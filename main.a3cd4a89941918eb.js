"use strict";(self.webpackChunkclipit=self.webpackChunkclipit||[]).push([[179],{440:(bt,$e,U)=>{U.d($e,{nm:()=>Rn});var p=U(5813);U(5e3),U(5867);var V=U(5861),Q=U(9681),de=U(4859),Re=U(2090),ke=U(1877);const Te=new Map,he={activated:!1,tokenObservers:[]},Z={initialized:!1,enabled:!1};function ye(we){return Te.get(we)||he}function ae(we,Ee){Te.set(we,Ee)}function Ge(){return Z}class Ht{constructor(Ee,Ve,Qe,ct,Ft){if(this.operation=Ee,this.retryPolicy=Ve,this.getWaitDuration=Qe,this.lowerBound=ct,this.upperBound=Ft,this.pending=null,this.nextErrorWaitInterval=ct,ct>Ft)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ee){var Ve=this;return(0,V.Z)(function*(){Ve.stop();try{Ve.pending=new Re.BH,yield function Dt(we){return new Promise(Ee=>{setTimeout(Ee,we)})}(Ve.getNextRun(Ee)),Ve.pending.resolve(),yield Ve.pending.promise,Ve.pending=new Re.BH,yield Ve.operation(),Ve.pending.resolve(),yield Ve.pending.promise,Ve.process(!0).catch(()=>{})}catch(Qe){Ve.retryPolicy(Qe)?Ve.process(!1).catch(()=>{}):Ve.stop()}})()}getNextRun(Ee){if(Ee)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ve=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ve}}}const nt=new Re.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Qt(we){if(!ye(we).activated)throw nt.create("use-before-activation",{appName:we.name})}function Xn(we,Ee){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,V.Z)(function*({url:we,body:Ee},Ve){const Qe={"Content-Type":"application/json"},ct=Ve.getImmediate({optional:!0});if(ct){const mi=yield ct.getHeartbeatsHeader();mi&&(Qe["X-Firebase-Client"]=mi)}const Ft={method:"POST",body:JSON.stringify(Ee),headers:Qe};let Vn,Ir;try{Vn=yield fetch(we,Ft)}catch(mi){throw nt.create("fetch-network-error",{originalErrorMessage:mi.message})}if(200!==Vn.status)throw nt.create("fetch-status-error",{httpStatus:Vn.status});try{Ir=yield Vn.json()}catch(mi){throw nt.create("fetch-parse-error",{originalErrorMessage:mi.message})}const Pn=Ir.ttl.match(/^([\d.]+)(s)$/);if(!Pn||!Pn[2]||isNaN(Number(Pn[1])))throw nt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ir.ttl}`});const gi=1e3*Number(Pn[1]),$i=Date.now();return{token:Ir.attestationToken,expireTimeMillis:$i+gi,issuedAtTimeMillis:$i}})).apply(this,arguments)}function fr(we,Ee){const{projectId:Ve,appId:Qe,apiKey:ct}=we.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Ve}/apps/${Qe}:exchangeDebugToken?key=${ct}`,body:{debug_token:Ee}}}const Jt="firebase-app-check-store";let on=null;function pr(){return on||(on=new Promise((we,Ee)=>{try{const Ve=indexedDB.open("firebase-app-check-database",1);Ve.onsuccess=Qe=>{we(Qe.target.result)},Ve.onerror=Qe=>{var ct;Ee(nt.create("storage-open",{originalErrorMessage:null===(ct=Qe.target.error)||void 0===ct?void 0:ct.message}))},Ve.onupgradeneeded=Qe=>{0===Qe.oldVersion&&Qe.target.result.createObjectStore(Jt,{keyPath:"compositeKey"})}}catch(Ve){Ee(nt.create("storage-open",{originalErrorMessage:Ve.message}))}}),on)}function vt(){return(vt=(0,V.Z)(function*(we,Ee){const Qe=(yield pr()).transaction(Jt,"readwrite"),Ft=Qe.objectStore(Jt).put({compositeKey:we,value:Ee});return new Promise((Vn,Ir)=>{Ft.onsuccess=Pn=>{Vn()},Qe.onerror=Pn=>{var gi;Ir(nt.create("storage-set",{originalErrorMessage:null===(gi=Pn.target.error)||void 0===gi?void 0:gi.message}))}})})).apply(this,arguments)}const Tr=new ke.Yd("@firebase/app-check");function mr(we,Ee){return(0,Re.hl)()?function Jn(we,Ee){return function Dr(we,Ee){return vt.apply(this,arguments)}(function or(we){return`${we.options.appId}-${we.name}`}(we),Ee)}(we,Ee).catch(Ve=>{Tr.warn(`Failed to write token to IndexedDB. Error: ${Ve}`)}):Promise.resolve()}function yr(){return Ge().enabled}function gn(){return At.apply(this,arguments)}function At(){return(At=(0,V.Z)(function*(){const we=Ge();if(we.enabled&&we.token)return we.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Et={error:"UNKNOWN_ERROR"};function zt(we){return Re.US.encodeString(JSON.stringify(we),!1)}function ln(we){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,V.Z)(function*(we,Ee=!1){const Ve=we.app;Qt(Ve);const Qe=ye(Ve);let Ft,ct=Qe.token;if(!ct){const Pn=yield Qe.cachedTokenPromise;Pn&&gt(Pn)&&(ct=Pn)}if(!Ee&&ct&&gt(ct))return{token:ct.token};let Ir,Vn=!1;if(yr()){Qe.exchangeTokenPromise||(Qe.exchangeTokenPromise=Xn(fr(Ve,yield gn()),we.heartbeatServiceProvider).then(gi=>(Qe.exchangeTokenPromise=void 0,gi)),Vn=!0);const Pn=yield Qe.exchangeTokenPromise;return yield mr(Ve,Pn),ae(Ve,Object.assign(Object.assign({},Qe),{token:Pn})),{token:Pn.token}}try{Qe.exchangeTokenPromise||(Qe.exchangeTokenPromise=Qe.provider.getToken().then(Pn=>(Qe.exchangeTokenPromise=void 0,Pn)),Vn=!0),ct=yield Qe.exchangeTokenPromise}catch(Pn){"appCheck/throttled"===Pn.code?Tr.warn(Pn.message):Tr.error(Pn),Ft=Pn}return ct?(Ir={token:ct.token},ae(Ve,Object.assign(Object.assign({},Qe),{token:ct})),yield mr(Ve,ct)):Ir=$t(Ft),Vn&&xe(Ve,Ir),Ir})).apply(this,arguments)}function ne(we,Ee){const Ve=ye(we),Qe=Ve.tokenObservers.filter(ct=>ct.next!==Ee);0===Qe.length&&Ve.tokenRefresher&&Ve.tokenRefresher.isRunning()&&Ve.tokenRefresher.stop(),ae(we,Object.assign(Object.assign({},Ve),{tokenObservers:Qe}))}function me(we){const{app:Ee}=we,Ve=ye(Ee);let Qe=Ve.tokenRefresher;Qe||(Qe=function We(we){const{app:Ee}=we;return new Ht((0,V.Z)(function*(){let Qe;if(Qe=ye(Ee).token?yield ln(we,!0):yield ln(we),Qe.error)throw Qe.error}),()=>!0,()=>{const Ve=ye(Ee);if(Ve.token){let Qe=Ve.token.issuedAtTimeMillis+.5*(Ve.token.expireTimeMillis-Ve.token.issuedAtTimeMillis)+3e5;return Qe=Math.min(Qe,Ve.token.expireTimeMillis-3e5),Math.max(0,Qe-Date.now())}return 0},3e4,96e4)}(we),ae(Ee,Object.assign(Object.assign({},Ve),{tokenRefresher:Qe}))),!Qe.isRunning()&&Ve.isTokenAutoRefreshEnabled&&Qe.start()}function xe(we,Ee){const Ve=ye(we).tokenObservers;for(const Qe of Ve)try{"EXTERNAL"===Qe.type&&null!=Ee.error?Qe.error(Ee.error):Qe.next(Ee)}catch(ct){}}function gt(we){return we.expireTimeMillis-Date.now()>0}function $t(we){return{token:zt(Et),error:we}}class mn{constructor(Ee,Ve){this.app=Ee,this.heartbeatServiceProvider=Ve}_delete(){const{tokenObservers:Ee}=ye(this.app);for(const Ve of Ee)ne(this.app,Ve.next);return Promise.resolve()}}const Oe="app-check-internal";!function Je(){(0,Q._registerComponent)(new de.wA("app-check",we=>function Zt(we,Ee){return new mn(we,Ee)}(we.getProvider("app").getImmediate(),we.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((we,Ee,Ve)=>{we.getProvider(Oe).initialize()})),(0,Q._registerComponent)(new de.wA(Oe,we=>function cn(we){return{getToken:Ee=>ln(we,Ee),addTokenListener:Ee=>function ue(we,Ee,Ve,Qe){const{app:ct}=we,Ft=ye(ct),Vn={next:Ve,error:Qe,type:Ee};if(ae(ct,Object.assign(Object.assign({},Ft),{tokenObservers:[...Ft.tokenObservers,Vn]})),Ft.token&&gt(Ft.token)){const Ir=Ft.token;Promise.resolve().then(()=>{Ve({token:Ir.token}),me(we)}).catch(()=>{})}Ft.cachedTokenPromise.then(()=>me(we))}(we,"INTERNAL",Ee),removeTokenListener:Ee=>ne(we.app,Ee)}}(we.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Q.registerVersion)("@firebase/app-check","0.5.6")}();class Rn{constructor(){return(0,p.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(bt,$e,U)=>{U.d($e,{zQ:()=>Ne,ww:()=>Nt,rT:()=>Z,f7:()=>ae,L6:()=>Te,_Q:()=>he,lh:()=>ye,Qv:()=>ke,nw:()=>Ge});var p=U(5e3),K=U(7579),Y=U(9646),ve=U(8306),fe=U(8996),Ie=U(6451),Ae=U(6063);class Me extends K.x{constructor(jt=1/0,ht=1/0,rt=Ae.l){super(),this._bufferSize=jt,this._windowTime=ht,this._timestampProvider=rt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ht===1/0,this._bufferSize=Math.max(1,jt),this._windowTime=Math.max(1,ht)}next(jt){const{isStopped:ht,_buffer:rt,_infiniteTimeWindow:Ht,_timestampProvider:Dt,_windowTime:St}=this;ht||(rt.push(jt),!Ht&&rt.push(Dt.now()+St)),this._trimBuffer(),super.next(jt)}_subscribe(jt){this._throwIfClosed(),this._trimBuffer();const ht=this._innerSubscribe(jt),{_infiniteTimeWindow:rt,_buffer:Ht}=this,Dt=Ht.slice();for(let St=0;St<Dt.length&&!jt.closed;St+=rt?1:2)jt.next(Dt[St]);return this._checkFinalizedStatuses(jt),ht}_trimBuffer(){const{_bufferSize:jt,_timestampProvider:ht,_buffer:rt,_infiniteTimeWindow:Ht}=this,Dt=(Ht?1:2)*jt;if(jt<1/0&&Dt<rt.length&&rt.splice(0,rt.length-Dt),!Ht){const St=ht.now();let nt=0;for(let rn=1;rn<rt.length&&rt[rn]<=St;rn+=2)nt=rn;nt&&rt.splice(0,nt+1)}}}var Se=U(3099);function oe(mt,jt,ht){let rt,Ht=!1;return mt&&"object"==typeof mt?({bufferSize:rt=1/0,windowTime:jt=1/0,refCount:Ht=!1,scheduler:ht}=mt):rt=null!=mt?mt:1/0,(0,Se.B)({connector:()=>new Me(rt,jt,ht),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ht})}var se=U(3900),Ce=U(576);function lt(mt,jt){return(0,Ce.m)(jt)?(0,se.w)(()=>mt,jt):(0,se.w)(()=>mt)}var Ke=U(5363),Xe=U(4004),at=U(590),Ue=U(9468),Fe=U(9300),pt=U(5813),j=U(2011),V=U(9808),Q=U(440),de=U(127);const ke=new p.OlP("angularfire2.auth.use-emulator"),Te=new p.OlP("angularfire2.auth.settings"),he=new p.OlP("angularfire2.auth.tenant-id"),Z=new p.OlP("angularfire2.auth.langugage-code"),ye=new p.OlP("angularfire2.auth.use-device-language"),ae=new p.OlP("angularfire.auth.persistence"),Ge=(mt,jt,ht,rt,Ht,Dt,St,nt)=>(0,j.cc)(`${mt.name}.auth`,"AngularFireAuth",mt.name,()=>{const rn=jt.runOutsideAngular(()=>mt.auth());if(ht&&rn.useEmulator(...ht),rt&&(rn.tenantId=rt),rn.languageCode=Ht,Dt&&rn.useDeviceLanguage(),St)for(const[Qt,sn]of Object.entries(St))rn.settings[Qt]=sn;return nt&&rn.setPersistence(nt),rn},[ht,rt,Ht,Dt,St,nt]);let Ne=(()=>{class mt{constructor(ht,rt,Ht,Dt,St,nt,rn,Qt,sn,Dn,wn,Xn){const Ln=new K.x,sr=(0,Y.of)(void 0).pipe((0,Ke.Q)(St.outsideAngular),(0,se.w)(()=>Dt.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,820)))),(0,Xe.U)(()=>(0,j.on)(ht,Dt,rt)),(0,Xe.U)(Gn=>Ge(Gn,Dt,nt,Qt,sn,Dn,rn,wn)),oe({bufferSize:1,refCount:!1}));if((0,V.PM)(Ht))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Y.of)(null);else{sr.pipe((0,at.P)()).subscribe();const fr=sr.pipe((0,se.w)(Jt=>Jt.getRedirectResult().then(Cn=>Cn,()=>null)),pt.iC,oe({bufferSize:1,refCount:!1})),jn=sr.pipe((0,se.w)(Jt=>new ve.y(Cn=>({unsubscribe:Dt.runOutsideAngular(()=>Jt.onAuthStateChanged(on=>Cn.next(on),on=>Cn.error(on),()=>Cn.complete()))})))),kt=sr.pipe((0,se.w)(Jt=>new ve.y(Cn=>({unsubscribe:Dt.runOutsideAngular(()=>Jt.onIdTokenChanged(on=>Cn.next(on),on=>Cn.error(on),()=>Cn.complete()))}))));this.authState=fr.pipe(lt(jn),(0,Ue.R)(St.outsideAngular),(0,Ke.Q)(St.insideAngular)),this.user=fr.pipe(lt(kt),(0,Ue.R)(St.outsideAngular),(0,Ke.Q)(St.insideAngular)),this.idToken=this.user.pipe((0,se.w)(Jt=>Jt?(0,fe.D)(Jt.getIdToken()):(0,Y.of)(null))),this.idTokenResult=this.user.pipe((0,se.w)(Jt=>Jt?(0,fe.D)(Jt.getIdTokenResult()):(0,Y.of)(null))),this.credential=(0,Ie.T)(fr,Ln,this.authState.pipe((0,Fe.h)(Jt=>!Jt))).pipe((0,Xe.U)(Jt=>(null==Jt?void 0:Jt.user)?Jt:null),(0,Ue.R)(St.outsideAngular),(0,Ke.Q)(St.insideAngular))}return(0,j.pX)(this,sr,Dt,{spy:{apply:(Gn,fr,jn)=>{(Gn.startsWith("signIn")||Gn.startsWith("createUser"))&&jn.then(kt=>Ln.next(kt))}}})}}return mt.\u0275fac=function(ht){return new(ht||mt)(p.LFG(j.Dh),p.LFG(j.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(pt.HU),p.LFG(ke,8),p.LFG(Te,8),p.LFG(he,8),p.LFG(Z,8),p.LFG(ye,8),p.LFG(ae,8),p.LFG(Q.nm,8))},mt.\u0275prov=p.Yz7({token:mt,factory:mt.\u0275fac,providedIn:"any"}),mt})(),Nt=(()=>{class mt{constructor(){de.Z.registerVersion("angularfire",pt.q4.full,"auth-compat")}}return mt.\u0275fac=function(ht){return new(ht||mt)},mt.\u0275mod=p.oAB({type:mt}),mt.\u0275inj=p.cJS({providers:[Ne]}),mt})()},7566:(bt,$e,U)=>{U.d($e,{ST:()=>qc,yb:()=>Kv});var p=U(5e3),K=U(4986),Y=U(8306),ve=U(8996),fe=U(9646),Ie=U(5813),Ae=U(4482),Me=U(5403);function Se(){return(0,Ae.e)((i,e)=>{let t,o=!1;i.subscribe((0,Me.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var oe=U(4671);function Ce(i,e){return i===e}var Z,lt=U(8675),Ke=U(4004),Xe=U(5026),at=U(9300),Ue=U(2011),Fe=U(9808),j=(U(820),U(3942)),V=U(5861),Q=U(9681),de=U(4859),Re=U(1877),ke=U(2090),Te="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},he={},ye=ye||{},ae=Te||self;function Ge(){}function Ne(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Nt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var jt="closure_uid_"+(1e9*Math.random()>>>0),ht=0;function rt(i,e,t){return i.call.apply(i.bind,arguments)}function Ht(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Dt(i,e,t){return(Dt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rt:Ht).apply(null,arguments)}function St(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function nt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var m=Array(arguments.length-2),D=2;D<arguments.length;D++)m[D-2]=arguments[D];return e.prototype[u].apply(o,m)}}function rn(){this.s=this.s,this.o=this.o}var sn={};rn.prototype.s=!1,rn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function mt(i){return Object.prototype.hasOwnProperty.call(i,jt)&&i[jt]||(i[jt]=++ht)}(this);delete sn[i]}},rn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Dn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},wn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function Ln(i){return Array.prototype.concat.apply([],arguments)}function sr(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Gn(i){return/^[\s\xa0]*$/.test(i)}var Jt,fr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function jn(i,e){return-1!=i.indexOf(e)}function kt(i,e){return i<e?-1:i>e?1:0}e:{var Cn=ae.navigator;if(Cn){var on=Cn.userAgent;if(on){Jt=on;break e}}Jt=""}function pr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function Oi(i){const e={};for(const t in i)e[t]=i[t];return e}var Jn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gr(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<Jn.length;d++)t=Jn[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function Hr(i){return Hr[" "](i),i}Hr[" "]=Ge;var mr,i,vt=jn(Jt,"Opera"),Mt=jn(Jt,"Trident")||jn(Jt,"MSIE"),Pt=jn(Jt,"Edge"),or=Pt||Mt,Tr=jn(Jt,"Gecko")&&!(jn(Jt.toLowerCase(),"webkit")&&!jn(Jt,"Edge"))&&!(jn(Jt,"Trident")||jn(Jt,"MSIE"))&&!jn(Jt,"Edge"),An=jn(Jt.toLowerCase(),"webkit")&&!jn(Jt,"Edge");function bi(){var i=ae.document;return i?i.documentMode:void 0}e:{var Wn="",Gt=(i=Jt,Tr?/rv:([^\);]+)(\)|;)/.exec(i):Pt?/Edge\/([\d\.]+)/.exec(i):Mt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):An?/WebKit\/(\S+)/.exec(i):vt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Gt&&(Wn=Gt?Gt[1]:""),Mt){var yr=bi();if(null!=yr&&yr>parseFloat(Wn)){mr=String(yr);break e}}mr=Wn}var gn={};var zt=ae.document&&Mt&&(bi()||parseInt(mr,10))||void 0,ln=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ae.addEventListener("test",Ge,e),ae.removeEventListener("test",Ge,e)}catch(t){}return i}();function Vt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function ue(i,e){if(Vt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Tr){e:{try{Hr(e.nodeName);var u=!0;break e}catch(d){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ne[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ue.Z.h.call(this)}}Vt.prototype.h=function(){this.defaultPrevented=!0},nt(ue,Vt);var ne={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),We=0;function xe(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++We,this.ca=this.fa=!1}function gt(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function $t(i){this.src=i,this.g={},this.h=0}function mn(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=Dn(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(gt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Zt(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}$t.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var m=Zt(i,e,o,u);return-1<m?(e=i[m],t||(e.fa=!1)):((e=new xe(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),kn={};function an(i,e,t,o,u){if(o&&o.once)return Yr(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)an(i,e[d],t,o,u);return null}return t=st(t),i&&i[me]?i.N(e,t,Nt(o)?!!o.capture:!!o,u):$n(i,e,t,!1,o,u)}function $n(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var m=Nt(u)?!!u.capture:!!u,D=Qr(i);if(D||(i[cn]=D=new $t(i)),(t=D.add(e,t,o,m,d)).proxy)return t;if(o=function Er(){var e=er;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)ln||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(wr(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Yr(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Yr(i,e[d],t,o,u);return null}return t=st(t),i&&i[me]?i.O(e,t,Nt(o)?!!o.capture:!!o,u):$n(i,e,t,!0,o,u)}function es(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)es(i,e[d],t,o,u);else o=Nt(o)?!!o.capture:!!o,t=st(t),i&&i[me]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Zt(d=i.g[e],t,o,u))&&(gt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=Qr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Zt(e,t,o,u)),(t=-1<i?e[i]:null)&&Sr(t))}function Sr(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[me])mn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(wr(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Qr(e))?(mn(t,i),0==t.h&&(t.src=null,e[cn]=null)):gt(i)}}}function wr(i){return i in kn?kn[i]:kn[i]="on"+i}function er(i,e){if(i.ca)i=!0;else{e=new ue(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Sr(i),i=t.call(o,e)}return i}function Qr(i){return(i=i[cn])instanceof $t?i:null}var Cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function st(i){return"function"==typeof i?i:(i[Cr]||(i[Cr]=function(e){return i.handleEvent(e)}),i[Cr])}function Rt(){rn.call(this),this.i=new $t(this),this.P=this,this.I=null}function en(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Vt(e,i);else if(e instanceof Vt)e.target=e.target||i;else{var u=e;gr(e=new Vt(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];u=zn(m,o,!0,e)&&u}if(u=zn(m=e.g=i,o,!0,e)&&u,u=zn(m,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=zn(m=e.g=t[d],o,!1,e)&&u}function zn(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.ca&&m.capture==t){var D=m.listener,L=m.ia||m.src;m.fa&&mn(i.i,m),u=!1!==D.call(L,o)&&u}}return u&&!o.defaultPrevented}nt(Rt,rn),Rt.prototype[me]=!0,Rt.prototype.removeEventListener=function(i,e,t,o){es(this,i,e,t,o)},Rt.prototype.M=function(){if(Rt.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)gt(t[o]);delete i.g[e],i.h--}}this.I=null},Rt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Rt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Jr=ae.JSON.stringify;function tr(){var i=Oe;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var pe,Sn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ar,i=>i.reset());class ar{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function oi(i){ae.setTimeout(()=>{throw i},0)}function un(i,e){pe||function le(){var i=ae.Promise.resolve(void 0);pe=function(){i.then(Je)}}(),ee||(pe(),ee=!0),Oe.add(i,e)}var ee=!1,Oe=new class Gr{constructor(){this.h=this.g=null}add(e,t){const o=Sn.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Je(){for(var i;i=tr();){try{i.h.call(i.g)}catch(t){oi(t)}var e=Sn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}ee=!1}function Tt(i,e){Rt.call(this),this.h=i||1,this.g=e||ae,this.j=Dt(this.kb,this),this.l=Date.now()}function tn(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Rn(i,e,t){if("function"==typeof i)t&&(i=Dt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Dt(i.handleEvent,i)}return 2147483647<Number(e)?-1:ae.setTimeout(i,e||0)}function yn(i){i.g=Rn(()=>{i.g=null,i.i&&(i.i=!1,yn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}nt(Tt,Rt),(Z=Tt.prototype).da=!1,Z.S=null,Z.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),en(this,"tick"),this.da&&(tn(this),this.start()))}},Z.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Z.M=function(){Tt.Z.M.call(this),tn(this),delete this.g};class Ni extends rn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yn(this)}M(){super.M(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mr(i){rn.call(this),this.h=i,this.g={}}nt(Mr,rn);var xr=[];function Xr(i,e,t,o){Array.isArray(t)||(t&&(xr[0]=t.toString()),t=xr);for(var u=0;u<t.length;u++){var d=an(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function fs(i){pr(i.g,function(e,t){this.g.hasOwnProperty(t)&&Sr(e)},i),i.g={}}function pi(){this.g=!0}function ji(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Gs(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<u.length;m++)u[m]=""}}}return Jr(t)}catch(D){return e}}(i,t)+(o?" "+o:"")})}Mr.prototype.M=function(){Mr.Z.M.call(this),fs(this)},Mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},pi.prototype.Aa=function(){this.g=!1},pi.prototype.info=function(){};var Hn={},Ts=null;function Ws(){return Ts=Ts||new Rt}function we(i){Vt.call(this,Hn.Ma,i)}function Ee(i){const e=Ws();en(e,new we(e,i))}function Ve(i,e){Vt.call(this,Hn.STAT_EVENT,i),this.stat=e}function Qe(i){const e=Ws();en(e,new Ve(e,i))}function ct(i,e){Vt.call(this,Hn.Na,i),this.size=e}function Ft(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){i()},e)}Hn.Ma="serverreachability",nt(we,Vt),Hn.STAT_EVENT="statevent",nt(Ve,Vt),Hn.Na="timingevent",nt(ct,Vt);var Vn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ir={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Pn(){}function $i(){}Pn.prototype.h=null;var zs,mi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Hi(){Vt.call(this,"d")}function Ti(){Vt.call(this,"c")}function as(){}function yi(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Mr(this),this.P=ps,this.W=new Tt(i=or?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Vr}function Vr(){this.i=null,this.g="",this.h=!1}nt(Hi,Vt),nt(Ti,Vt),nt(as,Pn),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},zs=new as;var ps=45e3,ts={},Gi={};function As(i,e,t){i.K=1,i.v=yt(H(e)),i.s=t,i.U=!0,ns(i,null)}function ns(i,e){i.F=Date.now(),us(i),i.A=H(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),O(t.h,"t",o),i.C=0,t=i.l.H,i.h=new Vr,i.g=Ha(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Ni(Dt(i.Ia,i,i.g),i.O)),Xr(i.V,i.g,"readystatechange",i.gb),e=i.H?Oi(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Ee(1),function Cs(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var m="",D=d.split("&"),L=0;L<D.length;L++){var W=D[L].split("=");if(1<W.length){var re=W[0];W=W[1];var _e=re.split("_");m=2<=_e.length&&"type"==_e[1]?m+(re+"=")+W+"&":m+(re+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.X,i.s)}function gs(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Ur(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Ai(i,t),u==Gi){4==e&&(i.o=4,Qe(14),o=!1),ji(i.j,i.m,null,"[Incomplete Response]");break}if(u==ts){i.o=4,Qe(15),ji(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}ji(i.j,i.m,u,null),Ms(i,u)}gs(i)&&u!=Gi&&u!=ts&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Qe(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ci(e),e.L=!0,Qe(11))):(ji(i.j,i.m,t,"[Invalid Chunked Response]"),vi(i),vr(i))}function Ai(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Gi:(t=Number(e.substring(t,o)),isNaN(t)?ts:(o+=1)+t>e.length?Gi:(e=e.substr(o,t),i.C=o+t,e))}function us(i){i.Y=Date.now()+i.P,Ss(i,i.P)}function Ss(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Ft(Dt(i.eb,i),e)}function Wr(i){i.B&&(ae.clearTimeout(i.B),i.B=null)}function vr(i){0==i.l.G||i.I||Os(i.l,i)}function vi(i){Wr(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,tn(i.W),fs(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Ms(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||zr(t.i,i)))if(t.I=i.N,!i.J&&zr(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(W){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ft(Dt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;Ki(t),ia(t)}$r(t),Qe(18)}if(1>=ui(t.i)&&t.ka){try{t.ka()}catch(W){}t.ka=void 0}}else Li(t,11)}else if((i.J||t.g==i)&&Ki(t),!Gn(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let W=u[e];if(t.U=W[0],W=W[1],2==t.G)if("c"==W[0]){t.J=W[1],t.la=W[2];const re=W[3];null!=re&&(t.ma=re,t.h.info("VER="+t.ma));const _e=W[4];null!=_e&&(t.za=_e,t.h.info("SVER="+t.za));const He=W[5];null!=He&&"number"==typeof He&&0<He&&(t.K=o=1.5*He,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const it=i.g;if(it){const ot=it.g?it.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ot){var d=o.i;!d.g&&(jn(ot,"spdy")||jn(ot,"quic")||jn(ot,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(Br(d,d.h),d.h=null))}if(o.D){const Wt=it.g?it.g.getResponseHeader("X-HTTP-Session-Id"):null;Wt&&(o.sa=Wt,qe(o.F,o.D,Wt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var m=i;if((o=t).oa=ba(o,o.H?o.la:null,o.W),m.J){Ys(o.i,m);var D=m,L=o.K;L&&D.setTimeout(L),D.B&&(Wr(D),us(D)),o.g=m}else Bo(o);0<t.l.length&&Uo(t)}else"stop"!=W[0]&&"close"!=W[0]||Li(t,7);else 3==t.G&&("stop"==W[0]||"close"==W[0]?"stop"==W[0]?Li(t,7):Nr(t):"noop"!=W[0]&&t.j&&t.j.wa(W),t.A=0)}Ee(4)}catch(W){}}function ls(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ne(i)||"string"==typeof i)wn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Ne(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function ms(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ne(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function Wi(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Wi)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Rr(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Si(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)Si(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function Si(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(Z=yi.prototype).setTimeout=function(i){this.P=i},Z.gb=function(i){i=i.target;const e=this.L;e&&3==ys(i)?e.l():this.Ia(i)},Z.Ia=function(i){try{if(i==this.g)e:{const re=ys(this.g);var e=this.g.Da();const _e=this.g.ba();if(!(3>re)&&(3!=re||or||this.g&&(this.h.h||this.g.ga()||Co(this.g)))){this.I||4!=re||7==e||Ee(8==e||0>=_e?3:2),Wr(this);var t=this.g.ba();this.N=t;t:if(gs(this)){var o=Co(this.g);i="";var u=o.length,d=4==ys(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vi(this),vr(this);var m="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.ga();if(this.i=200==t,function ai(i,e,t,o,u,d,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.X,re,t),this.i){if(this.$&&!this.J){t:{if(this.g){var D,L=this.g;if((D=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gn(D)){var W=D;break t}}W=null}if(!(t=W)){this.i=!1,this.o=3,Qe(12),vi(this),vr(this);break e}ji(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ms(this,t)}this.U?(Ur(this,re,m),or&&this.i&&3==re&&(Xr(this.V,this.W,"tick",this.fb),this.W.start())):(ji(this.j,this.m,m,null),Ms(this,m)),4==re&&vi(this),this.i&&!this.I&&(4==re?Os(this.l,this):(this.i=!1,us(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,Qe(12)):(this.o=0,Qe(13)),vi(this),vr(this)}}}catch(re){}},Z.fb=function(){if(this.g){var i=ys(this.g),e=this.g.ga();this.C<e.length&&(Wr(this),Ur(this,i,e),this.i&&4!=i&&us(this))}},Z.cancel=function(){this.I=!0,vi(this)},Z.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function bs(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ee(3),Qe(17)),vi(this),this.o=2,vr(this)):Ss(this,this.Y-i)},(Z=Wi.prototype).R=function(){Rr(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},Z.T=function(){return Rr(this),this.g.concat()},Z.get=function(i,e){return Si(this.h,i)?this.h[i]:e},Z.set=function(i,e){Si(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},Z.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var Ks=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function x(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof x){this.g=void 0!==e?e:i.g,M(this,i.j),this.s=i.s,q(this,i.i),ce(this,i.m),this.l=i.l,e=i.h;var t=new Pi;t.i=e.i,e.g&&(t.g=new Wi(e.g),t.h=e.h),ze(this,t),this.o=i.o}else i&&(t=String(i).match(Ks))?(this.g=!!e,M(this,t[1]||"",!0),this.s=dn(t[2]||""),q(this,t[3]||"",!0),ce(this,t[4]),this.l=dn(t[5]||"",!0),ze(this,t[6]||"",!0),this.o=dn(t[7]||"")):(this.g=!!e,this.h=new Pi(null,this.g))}function H(i){return new x(i)}function M(i,e,t){i.j=t?dn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function q(i,e,t){i.i=t?dn(e,!0):e}function ce(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function ze(i,e,t){e instanceof Pi?(i.h=e,function A(i,e){e&&!i.j&&(Fi(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(qs(this,o),O(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=En(e,ei)),i.h=new Pi(e,i.g))}function qe(i,e,t){i.h.set(e,t)}function yt(i){return qe(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function dn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function En(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,dr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function dr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}x.prototype.toString=function(){var i=[],e=this.j;e&&i.push(En(e,Yn,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(En(e,Yn,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(En(t,"/"==t.charAt(0)?ki:nr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",En(t,nn)),i.join("")};var Yn=/[#\/\?@]/g,nr=/[#\?:]/g,ki=/[#\?]/g,ei=/[#\?@]/g,nn=/#/g;function Pi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Fi(i){i.g||(i.g=new Wi,i.h=0,i.i&&function ur(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qs(i,e){Fi(i),e=S(i,e),Si(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Si((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Rr(i)))}function Zs(i,e){return Fi(i),e=S(i,e),Si(i.g.h,e)}function O(i,e,t){qs(i,e),0<t.length&&(i.i=null,i.g.set(S(i,e),sr(t)),i.h+=t.length)}function S(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Le(i){this.l=i||Ut,i=ae.PerformanceNavigationTiming?0<(i=ae.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ae.g&&ae.g.Ea&&ae.g.Ea()&&ae.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Z=Pi.prototype).add=function(i,e){Fi(this),this.i=null,i=S(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Z.forEach=function(i,e){Fi(this),this.g.forEach(function(t,o){wn(t,function(u){i.call(e,u,o,this)},this)},this)},Z.T=function(){Fi(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},Z.R=function(i){Fi(this);var e=[];if("string"==typeof i)Zs(this,i)&&(e=Ln(e,this.g.get(S(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Ln(e,i[t])}return e},Z.set=function(i,e){return Fi(this),this.i=null,Zs(this,i=S(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Z.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},Z.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var m=u;""!==o[d]&&(m+="="+encodeURIComponent(String(o[d]))),i.push(m)}}return this.i=i.join("&")};var Ut=10;function hn(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ui(i){return i.h?1:i.g?i.g.size:0}function zr(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Br(i,e){i.g?i.g.add(e):i.h=e}function Ys(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function cs(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return sr(i.i)}function Fo(){}function mu(){this.g=new Fo}function _a(i,e,t){const o=t||"";try{ls(i,function(u,d){let m=u;Nt(u)&&(m=Jr(u)),e.push(o+d+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function li(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(d){}}function Mi(i){this.l=i.$b||null,this.j=i.ib||!1}function Do(i,e){Rt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=xs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Le.prototype.cancel=function(){if(this.i=cs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Fo.prototype.stringify=function(i){return ae.JSON.stringify(i,void 0)},Fo.prototype.parse=function(i){return ae.JSON.parse(i,void 0)},nt(Mi,Pn),Mi.prototype.g=function(){return new Do(this.l,this.j)},Mi.prototype.i=function(i){return function(){return i}}({}),nt(Do,Rt);var xs=0;function ds(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function ao(i){i.readyState=4,i.l=null,i.j=null,i.A=null,uo(i)}function uo(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Z=Do.prototype).open=function(i,e){if(this.readyState!=xs)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,uo(this)},Z.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ae).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ao(this)),this.readyState=xs},Z.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ae.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ds(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Z.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ao(this):uo(this),3==this.readyState&&ds(this)}},Z.Ua=function(i){this.g&&(this.response=this.responseText=i,ao(this))},Z.Ta=function(i){this.g&&(this.response=i,ao(this))},Z.ha=function(){this.g&&ao(this)},Z.setRequestHeader=function(i,e){this.v.append(i,e)},Z.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Z.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Do.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ea=ae.JSON.parse;function Or(i){Rt.call(this),this.headers=new Wi,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Lo,this.K=this.L=!1}nt(Or,Rt);var Lo="",ta=/^https?$/i,na=["POST","PUT"];function wa(i){return"content-type"==i.toLowerCase()}function Vo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Qs(i),Rs(i)}function Qs(i){i.D||(i.D=!0,en(i,"complete"),en(i,"error"))}function Ia(i){if(i.h&&void 0!==ye&&(!i.C[1]||4!=ys(i)||2!=i.ba()))if(i.v&&4==ys(i))Rn(i.Fa,0,i);else if(en(i,"readystatechange"),4==ys(i)){i.h=!1;try{const D=i.ba();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(Ks)[1]||null;if(!u&&ae.self&&ae.self.location){var d=ae.self.location.protocol;u=d.substr(0,d.length-1)}o=!ta.test(u?u.toLowerCase():"")}t=o}if(t)en(i,"complete"),en(i,"success");else{i.m=6;try{var m=2<ys(i)?i.g.statusText:""}catch(L){m=""}i.j=m+" ["+i.ba()+"]",Qs(i)}}finally{Rs(i)}}}function Rs(i,e){if(i.g){Da(i);const t=i.g,o=i.C[0]?Ge:null;i.g=null,i.C=null,e||en(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function Da(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ae.clearTimeout(i.A),i.A=null)}function ys(i){return i.g?i.g.readyState:0}function Co(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Lo:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ra(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function vu(i){let e="";return pr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):qe(i,e,t))}function jr(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function bo(i){this.za=0,this.l=[],this.h=new pi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=jr("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=jr("baseRetryDelayMs",5e3,i),this.$a=jr("retryDelaySeedMs",1e4,i),this.Ya=jr("forwardChannelMaxRetries",2,i),this.ra=jr("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Le(i&&i.concurrentRequestLimit),this.Ca=new mu,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Nr(i){if(_u(i),3==i.G){var e=i.V++,t=H(i.F);qe(t,"SID",i.J),qe(t,"RID",e),qe(t,"TYPE","terminate"),zi(i,t),(e=new yi(i,i.h,e,void 0)).K=2,e.v=yt(H(t)),t=!1,ae.navigator&&ae.navigator.sendBeacon&&(t=ae.navigator.sendBeacon(e.v.toString(),"")),!t&&ae.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ha(e.l,null),e.g.ea(e.v)),e.F=Date.now(),us(e)}Js(i)}function ia(i){i.g&&(ci(i),i.g.cancel(),i.g=null)}function _u(i){ia(i),i.u&&(ae.clearTimeout(i.u),i.u=null),Ki(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ae.clearTimeout(i.m),i.m=null)}function Eu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Uo(i)}function Uo(i){hn(i.i)||i.m||(i.m=!0,un(i.Ha,i),i.C=0)}function Ca(i,e){var t;t=e?e.m:i.V++;const o=H(i.F);qe(o,"SID",i.J),qe(o,"RID",t),qe(o,"AID",i.U),zi(i,o),i.o&&i.s&&ra(o,i.o,i.s),t=new yi(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=lo(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Br(i.i,t),As(t,o,e)}function zi(i,e){i.j&&ls({},function(t,o){qe(e,o,t)})}function lo(i,e,t){t=Math.min(i.l.length,t);var o=i.j?Dt(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=u[0].h,m.push("ofs="+d)):d=0:m.push("ofs="+d);let D=!0;for(let L=0;L<t;L++){let W=u[L].h;const re=u[L].g;if(W-=d,0>W)d=Math.max(0,u[L].h-100),D=!1;else try{_a(re,m,"req"+W+"_")}catch(_e){o&&o(re)}}if(D){o=m.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Bo(i){i.g||i.u||(i.Y=1,un(i.Ga,i),i.A=0)}function $r(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Ft(Dt(i.Ga,i),To(i,i.A)),i.A++,0))}function ci(i){null!=i.B&&(ae.clearTimeout(i.B),i.B=null)}function wu(i){i.g=new yi(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=H(i.oa);qe(e,"RID","rpc"),qe(e,"SID",i.J),qe(e,"CI",i.N?"0":"1"),qe(e,"AID",i.U),zi(i,e),qe(e,"TYPE","xmlhttp"),i.o&&i.s&&ra(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=yt(H(e)),t.s=null,t.U=!0,ns(t,i)}function Ki(i){null!=i.v&&(ae.clearTimeout(i.v),i.v=null)}function Os(i,e){var t=null;if(i.g==e){Ki(i),ci(i),i.g=null;var o=2}else{if(!zr(i.i,e))return;t=e.D,Ys(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;en(o=Ws(),new ct(o,t,e,u)),Uo(i)}else Bo(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function tc(i,e){return!(ui(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Ft(Dt(i.Ha,i,e),To(i,i.C)),i.C++,0)))}(i,e)||2==o&&$r(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:Li(i,5);break;case 4:Li(i,10);break;case 3:Li(i,6);break;default:Li(i,2)}}function To(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Li(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=Dt(i.jb,i);t||(t=new x("//www.google.com/images/cleardot.gif"),ae.location&&"http"==ae.location.protocol||M(t,"https"),yt(t)),function oo(i,e){const t=new pi;if(ae.Image){const o=new Image;o.onload=St(li,t,o,"TestLoadImage: loaded",!0,e),o.onerror=St(li,t,o,"TestLoadImage: error",!1,e),o.onabort=St(li,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=St(li,t,o,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Qe(2);i.G=0,i.j&&i.j.va(e),Js(i),_u(i)}function Js(i){i.G=0,i.I=-1,i.j&&((0!=cs(i.i).length||0!=i.l.length)&&(i.i.i.length=0,sr(i.l),i.l.length=0),i.j.ua())}function ba(i,e,t){let o=function Kn(i){return i instanceof x?H(i):new x(i,void 0)}(t);if(""!=o.i)e&&q(o,e+"."+o.i),ce(o,o.m);else{const u=ae.location;o=function Un(i,e,t,o){var u=new x(null,void 0);return i&&M(u,i),e&&q(u,e),t&&ce(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&pr(i.aa,function(u,d){qe(o,d,u)}),t=i.sa,(e=i.D)&&t&&qe(o,e,t),qe(o,"VER",i.ma),zi(i,o),o}function Ha(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Or(t&&i.Ba&&!i.qa?new Mi({ib:!0}):i.qa)).L=i.H,e}function Iu(){}function Ga(){if(Mt&&!(10<=Number(zt)))throw Error("Environmental error: no available transport.")}function hr(i,e){Rt.call(this),this.g=new bo(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Gn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new qi(this)}function jo(i){Hi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Xs(){Ti.call(this),this.status=1}function qi(i){this.g=i}(Z=Or.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zs.g(),this.C=function gi(i){return i.h||(i.h=i.i())}(this.u?this.u:zs),this.g.onreadystatechange=Dt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void Vo(this,d)}i=t||"";const u=new Wi(this.headers);o&&ls(o,function(d,m){u.set(m,d)}),o=function Xn(i){e:{var e=wa;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=ae.FormData&&i instanceof ae.FormData,!(0<=Dn(na,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,m){this.g.setRequestHeader(m,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Da(this),0<this.B&&((this.K=function yu(i){return Mt&&function At(){return function Dr(i){var e=gn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=fr(String(mr)).split("."),t=fr("9").split("."),o=Math.max(e.length,t.length);for(let m=0;0==i&&m<o;m++){var u=e[m]||"",d=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=kt(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||kt(0==u[2].length,0==d[2].length)||kt(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dt(this.pa,this)):this.A=Rn(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){Vo(this,d)}},Z.pa=function(){void 0!==ye&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,en(this,"timeout"),this.abort(8))},Z.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,en(this,"complete"),en(this,"abort"),Rs(this))},Z.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rs(this,!0)),Or.Z.M.call(this)},Z.Fa=function(){this.s||(this.F||this.v||this.l?Ia(this):this.cb())},Z.cb=function(){Ia(this)},Z.ba=function(){try{return 2<ys(this)?this.g.status:-1}catch(i){return-1}},Z.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Z.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ea(e)}},Z.Da=function(){return this.m},Z.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Z=bo.prototype).ma=8,Z.G=1,Z.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},Z.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new yi(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=Oi(d),gr(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lo(this,u,e),qe(t=H(this.F),"RID",i),qe(t,"CVER",22),this.D&&qe(t,"X-HTTP-Session-Id",this.D),zi(this,t),this.o&&d&&ra(t,this.o,d),Br(this.i,u),this.Ra&&qe(t,"TYPE","init"),this.ja?(qe(t,"$req",e),qe(t,"SID","null"),u.$=!0,As(u,t,null)):As(u,t,e),this.G=2}}else 3==this.G&&(i?Ca(this,i):0==this.l.length||hn(this.i)||Ca(this))},Z.Ga=function(){if(this.u=null,wu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Ft(Dt(this.bb,this),i)}},Z.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qe(10),ia(this),wu(this))},Z.ab=function(){null!=this.v&&(this.v=null,ia(this),$r(this),Qe(19))},Z.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Qe(2)):(this.h.info("Failed to ping google.com"),Qe(1))},(Z=Iu.prototype).xa=function(){},Z.wa=function(){},Z.va=function(){},Z.ua=function(){},Z.Oa=function(){},Ga.prototype.g=function(i,e){return new hr(i,e)},nt(hr,Rt),hr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),un(Dt(i.hb,i,e))),Qe(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=ba(i,null,i.W),Uo(i)},hr.prototype.close=function(){Nr(this.g)},hr.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Eu(this.g,e)}else this.v?((e={}).__data__=Jr(i),Eu(this.g,e)):Eu(this.g,i)},hr.prototype.M=function(){this.g.j=null,delete this.j,Nr(this.g),delete this.g,hr.Z.M.call(this)},nt(jo,Hi),nt(Xs,Ti),nt(qi,Iu),qi.prototype.xa=function(){en(this.g,"a")},qi.prototype.wa=function(i){en(this.g,new jo(i))},qi.prototype.va=function(i){en(this.g,new Xs(i))},qi.prototype.ua=function(){en(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,hr.prototype.send=hr.prototype.u,hr.prototype.open=hr.prototype.m,hr.prototype.close=hr.prototype.close,Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,Ir.COMPLETE="complete",$i.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",Rt.prototype.listen=Rt.prototype.N,Or.prototype.listenOnce=Or.prototype.O,Or.prototype.getLastError=Or.prototype.La,Or.prototype.getLastErrorCode=Or.prototype.Da,Or.prototype.getStatus=Or.prototype.ba,Or.prototype.getResponseJson=Or.prototype.Qa,Or.prototype.getResponseText=Or.prototype.ga,Or.prototype.send=Or.prototype.ea;var $o=he.createWebChannelTransport=function(){return new Ga},Ho=he.getStatEventTarget=function(){return Ws()},Ta=he.ErrorCode=Vn,_r=he.EventType=Ir,al=he.Event=Hn,vs=he.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Aa=he.FetchXmlHttpFactory=Mi,hs=he.WebChannel=$i,nc=he.XhrIo=Or;const Wa="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let co="9.6.11";const rs=new Re.Yd("@firebase/firestore");function ho(){return rs.logLevel}function dt(i,...e){if(rs.logLevel<=Re.in.DEBUG){const t=e.map(E);rs.debug(`Firestore (${co}): ${i}`,...t)}}function rr(i,...e){if(rs.logLevel<=Re.in.ERROR){const t=e.map(E);rs.error(`Firestore (${co}): ${i}`,...t)}}function I(i,...e){if(rs.logLevel<=Re.in.WARN){const t=e.map(E);rs.warn(`Firestore (${co}): ${i}`,...t)}}function E(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function y(i="Unexpected state"){const e=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: `+i;throw rr(e),new Error(e)}function b(i,e){i||y()}function B(i,e){return i}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends ke.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class je{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class It{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class On{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class Kt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ir{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=W=>this.i!==u?(u=this.i,t(W)):Promise.resolve();let m=new je;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new je,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const W=m;e.enqueueRetryable((0,V.Z)(function*(){yield W.promise,yield d(o.currentUser)}))},L=W=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=W,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(W=>L(W)),setTimeout(()=>{if(!this.auth){const W=this.t.getImmediate({optional:!0});W?L(W):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new je)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(b("string"==typeof o.accessToken),new It(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return b(null===e||"string"==typeof e),new ti(e)}}class Nn{constructor(e,t,o){this.type="FirstParty",this.user=ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class _s{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new Nn(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class is{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Go{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=d=>{null!=d.error&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.p;return this.p=d.token,dt("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.g.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.g.getImmediate({optional:!0});d?u(d):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(b("string"==typeof t.token),this.p=t.token,new is(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class kr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Es(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}kr.A=-1;class rc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Es(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function bn(i,e){return i<e?-1:i>e?1:0}function eo(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function za(i){return i+"\0"}class di{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new X($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new X($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new X($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return di.fromMillis(Date.now())}static fromDate(e){return di.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new di(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bn(this.nanoseconds,e.nanoseconds):bn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new di(0,0))}static max(){return new Lt(new di(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Zc(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ka(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Yc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Sa{constructor(e,t,o){void 0===t?t=0:t>e.length&&y(),void 0===o?o=e.length-t:o>e.length-t&&y(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Sa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sa?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),m=t.get(u);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qn extends Sa{construct(e,t,o){return new Qn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new X($.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new Qn(t)}static emptyPath(){return new Qn([])}}const Wd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vi extends Sa{construct(e,t,o){return new Vi(e,t,o)}static isValidIdentifier(e){return Wd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vi(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new X($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let m=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new X($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const L=e[u+1];if("\\"!==L&&"."!==L&&"`"!==L)throw new X($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=L,u+=2}else"`"===D?(m=!m,u++):"."!==D||m?(o+=D,u++):(d(),u++)}if(d(),m)throw new X($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vi(t)}static emptyPath(){return new Vi([])}}class ks{constructor(e){this.fields=e,e.sort(Vi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return eo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Fn(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const ul=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(i){if(b(!!i),"string"==typeof i){let e=0;const t=ul.exec(i);if(b(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ni(i.seconds),nanos:ni(i.nanos)}}function ni(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ao(i){return"string"==typeof i?Fn.fromBase64String(i):Fn.fromUint8Array(i)}function Ui(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Is(i){const e=i.mapValue.fields.__previous_value__;return Ui(e)?Is(e):e}function Ma(i){const e=ws(i.mapValue.fields.__local_write_time__.timestampValue);return new di(e.seconds,e.nanos)}class Wo{constructor(e,t,o,u,d,m,D,L){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=D,this.useFetchStreams=L}}class _i{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _i("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _i&&e.projectId===this.projectId&&e.database===this.database}}function Zi(i){return null==i}function So(i){return 0===i&&1/i==-1/0}function Du(i){return"number"==typeof i&&Number.isInteger(i)&&!So(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class wt{constructor(e){this.path=e}static fromPath(e){return new wt(Qn.fromString(e))}static fromName(e){return new wt(Qn.fromString(e).popFirst(5))}static empty(){return new wt(Qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new Qn(e.slice()))}}const ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cu={nullValue:"NULL_VALUE"};function Ei(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ui(i)?4:Ko(i)?9:10:y()}function to(i,e){if(i===e)return!0;const t=Ei(i);if(t!==Ei(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ma(i).isEqual(Ma(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=ws(o.timestampValue),m=ws(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Ao(i.bytesValue).isEqual(Ao(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return ni(o.geoPointValue.latitude)===ni(u.geoPointValue.latitude)&&ni(o.geoPointValue.longitude)===ni(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ni(o.integerValue)===ni(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=ni(o.doubleValue),m=ni(u.doubleValue);return d===m?So(d)===So(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return eo(i.arrayValue.values||[],e.arrayValue.values||[],to);case 10:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Zc(d)!==Zc(m))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===m[D]||!to(d[D],m[D])))return!1;return!0}(i,e);default:return y()}var u}function po(i,e){return void 0!==(i.values||[]).find(t=>to(t,e))}function Mo(i,e){if(i===e)return 0;const t=Ei(i),o=Ei(e);if(t!==o)return bn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return bn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=ni(u.integerValue||u.doubleValue),D=ni(d.integerValue||d.doubleValue);return m<D?-1:m>D?1:m===D?0:isNaN(m)?isNaN(D)?0:-1:1}(i,e);case 3:return zo(i.timestampValue,e.timestampValue);case 4:return zo(Ma(i),Ma(e));case 5:return bn(i.stringValue,e.stringValue);case 6:return function(u,d){const m=Ao(u),D=Ao(d);return m.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),D=d.split("/");for(let L=0;L<m.length&&L<D.length;L++){const W=bn(m[L],D[L]);if(0!==W)return W}return bn(m.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=bn(ni(u.latitude),ni(d.latitude));return 0!==m?m:bn(ni(u.longitude),ni(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const m=u.values||[],D=d.values||[];for(let L=0;L<m.length&&L<D.length;++L){const W=Mo(m[L],D[L]);if(W)return W}return bn(m.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){const m=u.fields||{},D=Object.keys(m),L=d.fields||{},W=Object.keys(L);D.sort(),W.sort();for(let re=0;re<D.length&&re<W.length;++re){const _e=bn(D[re],W[re]);if(0!==_e)return _e;const He=Mo(m[D[re]],L[W[re]]);if(0!==He)return He}return bn(D.length,W.length)}(i.mapValue,e.mapValue);default:throw y()}}function zo(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return bn(i,e);const t=ws(i),o=ws(e),u=bn(t.seconds,o.seconds);return 0!==u?u:bn(t.nanos,o.nanos)}function xo(i){return cl(i)}function cl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=ws(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ao(i.bytesValue).toBase64():"referenceValue"in i?wt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const m of o.values||[])d?d=!1:u+=",",u+=cl(m);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",m=!0;for(const D of u)m?m=!1:d+=",",d+=`${D}:${cl(o.fields[D])}`;return d+"}"}(i.mapValue):y();var e}function Ro(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function no(i){return!!i&&"integerValue"in i}function qa(i){return!!i&&"arrayValue"in i}function Ps(i){return!!i&&"nullValue"in i}function dl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function xa(i){return!!i&&"mapValue"in i}function sa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ka(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=sa(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sa(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Ko(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Za(i){return"nullValue"in i?Cu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ro(_i.empty(),wt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:y()}function hl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ro(_i.empty(),wt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ll:y()}function T(i,e){return void 0===i?e:void 0===e||Mo(i,e)>0?i:e}function R(i,e){return void 0===i?e:void 0===e||Mo(i,e)<0?i:e}class z{constructor(e){this.value=e}static empty(){return new z({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!xa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(t)}setAll(e){let t=Vi.emptyPath(),o={},u=[];e.forEach((m,D)=>{if(!t.isImmediateParentOf(D)){const L=this.getFieldsMap(t);this.applyChanges(L,o,u),o={},u=[],t=D.popLast()}m?o[D.lastSegment()]=sa(m):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());xa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return to(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];xa(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ka(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new z(sa(this.value))}}function ie(i){const e=[];return Ka(i.fields,(t,o)=>{const u=new Vi([t]);if(xa(o)){const d=ie(o.mapValue).fields;if(0===d.length)e.push(u);else for(const m of d)e.push(u.child(m))}else e.push(u)}),new ks(e)}class De{constructor(e,t,o,u,d,m){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new De(e,0,Lt.min(),Lt.min(),z.empty(),0)}static newFoundDocument(e,t,o){return new De(e,1,t,Lt.min(),o,0)}static newNoDocument(e,t){return new De(e,2,t,Lt.min(),z.empty(),0)}static newUnknownDocument(e,t){return new De(e,3,t,Lt.min(),z.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=z.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=z.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof De&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new De(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Be{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function ft(i){return i.fields.find(e=>2===e.kind)}function Ot(i){return i.fields.filter(e=>2!==e.kind)}Be.UNKNOWN_ID=-1;class qt{constructor(e,t){this.fieldPath=e,this.kind=t}}class fn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fn(0,br.min())}}function qn(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=Lt.fromTimestamp(1e9===o?new di(t+1,0):new di(t,o));return new br(u,wt.empty(),e)}function Tn(i){return new br(i.readTime,i.key,-1)}class br{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new br(Lt.min(),wt.empty(),-1)}static max(){return new br(Lt.max(),wt.empty(),-1)}}function hi(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=wt.comparator(i.documentKey,e.documentKey),0!==t?t:bn(i.largestBatchId,e.largestBatchId))}class Ra{constructor(e,t=null,o=[],u=[],d=null,m=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=D,this.P=null}}function Ya(i,e=null,t=[],o=[],u=null,d=null,m=null){return new Ra(i,e,t,o,u,d,m)}function Yi(i){const e=B(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+xo(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Zi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>xo(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>xo(o)).join(",")),e.P=t}return e.P}function Fs(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!xf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!to(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Yd(i.startAt,e.startAt)&&Yd(i.endAt,e.endAt)}function go(i){return wt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function fl(i,e){return i.filters.filter(t=>t instanceof fi&&t.field.isEqual(e))}function Qc(i,e,t){let o,u=!0;for(const d of fl(i,e)){let m,D=!0;switch(d.op){case"<":case"<=":m=Za(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,D=!1;break;case"!=":case"not-in":m=Cu}T(o,m)===m&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];T(o,m)===m&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}function pl(i,e,t){let o,u=!0;for(const d of fl(i,e)){let m,D=!0;switch(d.op){case">=":case">":m=hl(d.value),D=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,D=!1;break;case"!=":case"not-in":m=ll}R(o,m)===m&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];R(o,m)===m&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}class fi extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new Kd(e,t,o):"array-contains"===t?new gl(e,o):"in"===t?new Sf(e,o):"not-in"===t?new Mf(e,o):"array-contains-any"===t?new qd(e,o):new fi(e,t,o)}static V(e,t,o){return"in"===t?new Tf(e,o):new Af(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Mo(t,this.value)):null!==t&&Ei(this.value)===Ei(t)&&this.v(Mo(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return y()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Kd extends fi{constructor(e,t,o){super(e,t,o),this.key=wt.fromName(o.referenceValue)}matches(e){const t=wt.comparator(e.key,this.key);return this.v(t)}}class Tf extends fi{constructor(e,t){super(e,"in",t),this.keys=oa(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Af extends fi{constructor(e,t){super(e,"not-in",t),this.keys=oa(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oa(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>wt.fromName(o.referenceValue))}class gl extends fi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qa(t)&&po(t.arrayValue,this.value)}}class Sf extends fi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&po(this.value.arrayValue,t)}}class Mf extends fi{constructor(e,t){super(e,"not-in",t)}matches(e){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!po(this.value.arrayValue,t)}}class qd extends fi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>po(this.value.arrayValue,o))}}class Oo{constructor(e,t){this.position=e,this.inclusive=t}}class ml{constructor(e,t="asc"){this.field=e,this.dir=t}}function xf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Zd(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],m=i.position[u];if(o=d.field.isKeyField()?wt.comparator(wt.fromName(m.referenceValue),t.key):Mo(m,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Yd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!to(i.position[t],e.position[t]))return!1;return!0}class mo{constructor(e,t=null,o=[],u=[],d=null,m="F",D=null,L=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=D,this.endAt=L,this.D=null,this.C=null}}function ic(i,e,t,o,u,d,m,D){return new mo(i,e,t,o,u,d,m,D)}function No(i){return new mo(i)}function sc(i){return!Zi(i.limit)&&"F"===i.limitType}function bu(i){return!Zi(i.limit)&&"L"===i.limitType}function Qd(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Tu(i){for(const e of i.filters)if(e.S())return e.field;return null}function yl(i){return null!==i.collectionGroup}function Qa(i){const e=B(i);if(null===e.D){e.D=[];const t=Tu(e),o=Qd(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new ml(t)),e.D.push(new ml(Vi.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.D.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ml(Vi.keyField(),d))}}}return e.D}function io(i){const e=B(i);if(!e.C)if("F"===e.limitType)e.C=Ya(e.path,e.collectionGroup,Qa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Qa(e))t.push(new ml(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Oo(e.endAt.position,!e.endAt.inclusive):null,u=e.startAt?new Oo(e.startAt.position,!e.startAt.inclusive):null;e.C=Ya(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function oc(i,e,t){return new mo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Au(i,e){return Fs(io(i),io(e))&&i.limitType===e.limitType}function Jd(i){return`${Yi(io(i))}|lt:${i.limitType}`}function Jc(i){return`Query(target=${function ro(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${xo(o.value)}`;var o}).join(", ")}]`),Zi(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>xo(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>xo(t)).join(",")),`Target(${e})`}(io(i))}; limitType=${i.limitType})`}function Xc(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):wt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,m){const D=Zd(u,d,m);return u.inclusive?D<=0:D<0}(t.startAt,Qa(t),o)||t.endAt&&!function(u,d,m){const D=Zd(u,d,m);return u.inclusive?D>=0:D>0}(t.endAt,Qa(t),o)));var t,o}function ac(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Xd(i){return(e,t)=>{let o=!1;for(const u of Qa(i)){const d=qo(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function qo(i,e,t){const o=i.field.isKeyField()?wt.comparator(e.key,t.key):function(u,d,m){const D=d.data.field(u),L=m.data.field(u);return null!==D&&null!==L?Mo(D,L):y()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return y()}}function Su(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:So(e)?"-0":e}}function ed(i){return{integerValue:""+i}}function Rf(i,e){return Du(e)?ed(e):Su(i,e)}class vl{constructor(){this._=void 0}}function Sg(i,e,t){return i instanceof Ja?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof Xa?th(i,e):i instanceof Mu?Oa(i,e):function(o,u){const d=eh(o,u),m=nh(d)+nh(o.k);return no(d)&&no(o.k)?ed(m):Su(o.M,m)}(i,e)}function Of(i,e,t){return i instanceof Xa?th(i,e):i instanceof Mu?Oa(i,e):t}function eh(i,e){return i instanceof _l?no(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Ja extends vl{}class Xa extends vl{constructor(e){super(),this.elements=e}}function th(i,e){const t=eu(e);for(const o of i.elements)t.some(u=>to(u,o))||t.push(o);return{arrayValue:{values:t}}}class Mu extends vl{constructor(e){super(),this.elements=e}}function Oa(i,e){let t=eu(e);for(const o of i.elements)t=t.filter(u=>!to(u,o));return{arrayValue:{values:t}}}class _l extends vl{constructor(e,t){super(),this.M=e,this.k=t}}function nh(i){return ni(i.integerValue||i.doubleValue)}function eu(i){return qa(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xu{constructor(e,t){this.field=e,this.transform=t}}class El{constructor(e,t){this.version=e,this.transformResults=t}}class wi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class wl{}function Mg(i,e,t){i instanceof nu?function(o,u,d){const m=o.value.clone(),D=Il(o.fieldTransforms,u,d.transformResults);m.setAll(D),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof Ru?function(o,u,d){if(!tu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=Il(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(rh(o)),D.setAll(m),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uc(i,e,t){var u;i instanceof nu?function(o,u,d){if(!tu(o.precondition,u))return;const m=o.value.clone(),D=ih(o.fieldTransforms,d,u);m.setAll(D),u.convertToFoundDocument(cc(u),m).setHasLocalMutations()}(i,e,t):i instanceof Ru?function(o,u,d){if(!tu(o.precondition,u))return;const m=ih(o.fieldTransforms,d,u),D=u.data;D.setAll(rh(o)),D.setAll(m),u.convertToFoundDocument(cc(u),D).setHasLocalMutations()}(i,e,t):tu(i.precondition,u=e)&&u.convertToNoDocument(Lt.min())}function xg(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=eh(o.transform,u||null);null!=d&&(null==t&&(t=z.empty()),t.set(o.field,d))}return t||null}function lc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&eo(t,o,(u,d)=>function yo(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Xa&&o instanceof Xa||t instanceof Mu&&o instanceof Mu?eo(t.elements,o.elements,to):t instanceof _l&&o instanceof _l?to(t.k,o.k):t instanceof Ja&&o instanceof Ja);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function cc(i){return i.isFoundDocument()?i.version:Lt.min()}class nu extends wl{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class Ru extends wl{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}}function rh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Il(i,e,t){const o=new Map;b(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],m=d.transform,D=e.data.field(d.field);o.set(d.field,Of(m,D,t[u]))}return o}function ih(i,e,t){const o=new Map;for(const u of i){const d=u.transform,m=t.data.field(u.field);o.set(u.field,Sg(d,m,e))}return o}class Dl extends wl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Cl extends wl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class td{constructor(e){this.count=e}}var Ii,Zn;function bl(i){switch(i){default:return y();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function dc(i){if(void 0===i)return rr("GRPC error has no .code"),$.UNKNOWN;switch(i){case Ii.OK:return $.OK;case Ii.CANCELLED:return $.CANCELLED;case Ii.UNKNOWN:return $.UNKNOWN;case Ii.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ii.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ii.INTERNAL:return $.INTERNAL;case Ii.UNAVAILABLE:return $.UNAVAILABLE;case Ii.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ii.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ii.NOT_FOUND:return $.NOT_FOUND;case Ii.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ii.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ii.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ii.ABORTED:return $.ABORTED;case Ii.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ii.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ii.DATA_LOSS:return $.DATA_LOSS;default:return y()}}(Zn=Ii||(Ii={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";class Na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Yc(this.inner)}size(){return this.innerSize}}class Bn{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new Bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tl(this.root,e,this.comparator,!0)}}class Tl{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=null!=o?o:ss.RED,this.left=null!=u?u:ss.EMPTY,this.right=null!=d?d:ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new ss(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return ss.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw y();const e=this.left.check();if(e!==this.right.check())throw y();return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1,ss.EMPTY=new class{constructor(){this.size=0}get key(){throw y()}get value(){throw y()}get color(){throw y()}get left(){throw y()}get right(){throw y()}copy(i,e,t,o,u){return this}insert(i,e,t){return new ss(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ar{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nd(this.data.getIterator())}getIteratorFrom(e){return new nd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Ar)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ar(this.comparator);return t.data=e,t}}class nd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ou(i){return i.hasNext()?i.getNext():void 0}const hc=new Bn(wt.comparator);function vo(){return hc}const sh=new Bn(wt.comparator);function rd(){return sh}function fc(){return new Na(i=>i.toString(),(i,e)=>i.isEqual(e))}const Rg=new Bn(wt.comparator),Al=new Ar(wt.comparator);function Mn(...i){let e=Al;for(const t of i)e=e.add(t);return e}const Sl=new Ar(bn);function ru(){return Sl}class iu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,xi.createSynthesizedTargetChangeForCurrentChange(e,t)),new iu(Lt.min(),o,ru(),vo(),Mn())}}class xi{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new xi(Fn.EMPTY_BYTE_STRING,t,Mn(),Mn(),Mn())}}class Zo{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class pc{constructor(e,t){this.targetId=e,this.$=t}}class Ls{constructor(e,t,o=Fn.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class Nu{constructor(){this.B=0,this.L=Ml(),this.U=Fn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Mn(),t=Mn(),o=Mn();return this.L.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:y()}}),new xi(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=Ml()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class id{constructor(e){this.nt=e,this.st=new Map,this.it=vo(),this.rt=oh(),this.ot=new Ar(bn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const d=u.target;if(go(d))if(0===o){const m=new wt(d.path);this.ct(t,m,De.newNoDocument(m,Lt.min()))}else b(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((d,m)=>{const D=this.wt(m);if(D){if(d.current&&go(D.target)){const L=new wt(D.target.path);null!==this.it.get(L)||this.It(m,L)||this.ct(m,L,De.newNoDocument(L,e))}d.j&&(t.set(m,d.H()),d.J())}});let o=Mn();this.rt.forEach((d,m)=>{let D=!0;m.forEachWhile(L=>{const W=this.wt(L);return!W||2===W.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.it.forEach((d,m)=>m.setReadTime(e));const u=new iu(e,t,this.ot,this.it,o);return this.it=vo(),this.rt=oh(),this.ot=new Ar(bn),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Nu,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Ar(bn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||dt("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Nu),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function oh(){return new Bn(wt.comparator)}function Ml(){return new Bn(wt.comparator)}const sd={asc:"ASCENDING",desc:"DESCENDING"},ah={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class uh{constructor(e,t){this.databaseId=e,this.N=t}}function xl(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ko(i,e){return i.N?e.toBase64():e.toUint8Array()}function lh(i,e){return xl(i,e.toTimestamp())}function Qi(i){return b(!!i),Lt.fromTimestamp(function(e){const t=ws(e);return new di(t.seconds,t.nanos)}(i))}function Rl(i,e){return(t=i,new Qn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ch(i){const e=Qn.fromString(i);return b(pn(e)),e}function ku(i,e){return Rl(i.databaseId,e.path)}function Pr(i,e){const t=ch(e);if(t.get(1)!==i.databaseId.projectId)throw new X($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new X($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new wt(Yo(t))}function Ol(i,e){return Rl(i.databaseId,e)}function gc(i){const e=ch(i);return 4===e.length?Qn.emptyPath():Yo(e)}function Nl(i){return new Qn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Yo(i){return b(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Pu(i,e,t){return{name:ku(i,e),fields:t.value.mapValue.fields}}function mc(i,e,t){const o=Pr(i,e.name),u=Qi(e.updateTime),d=new z({mapValue:{fields:e.fields}}),m=De.newFoundDocument(o,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function su(i,e){let t;if(e instanceof nu)t={update:Pu(i,e.key,e.value)};else if(e instanceof Dl)t={delete:ku(i,e.key)};else if(e instanceof Ru)t={update:Pu(i,e.key,e.data),updateMask:Yt(e.fieldMask)};else{if(!(e instanceof Cl))return y();t={verify:ku(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const m=d.transform;if(m instanceof Ja)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Xa)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Mu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof _l)return{fieldPath:d.field.canonicalString(),increment:m.k};throw y()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:lh(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:y()),t;var u}function od(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?wi.updateTime(Qi(u.updateTime)):void 0!==u.exists?wi.exists(u.exists):wi.none():wi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,m){let D=null;"setToServerValue"in m?(b("REQUEST_TIME"===m.setToServerValue),D=new Ja):"appendMissingElements"in m?D=new Xa(m.appendMissingElements.values||[]):"removeAllFromArray"in m?D=new Mu(m.removeAllFromArray.values||[]):"increment"in m?D=new _l(d,m.increment):y();const L=Vi.fromServerFormat(m.fieldPath);return new xu(L,D)}(i,u)):[];var u;if(e.update){const u=Pr(i,e.update.name),d=new z({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new ks((e.updateMask.fieldPaths||[]).map(W=>Vi.fromServerFormat(W)));return new Ru(u,d,m,t,o)}return new nu(u,d,t,o)}if(e.delete){const u=Pr(i,e.delete);return new Dl(u,t)}if(e.verify){const u=Pr(i,e.verify);return new Cl(u,t)}return y()}function hh(i,e){return{documents:[Ol(i,e.path)]}}function fh(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Ol(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ol(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(L){if(0===L.length)return;const W=L.map(re=>function(_e){if("=="===_e.op){if(dl(_e.value))return{unaryFilter:{field:J(_e.field),op:"IS_NAN"}};if(Ps(_e.value))return{unaryFilter:{field:J(_e.field),op:"IS_NULL"}}}else if("!="===_e.op){if(dl(_e.value))return{unaryFilter:{field:J(_e.field),op:"IS_NOT_NAN"}};if(Ps(_e.value))return{unaryFilter:{field:J(_e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:J(_e.field),op:k(_e.op),value:_e.value}}}(re));return 1===W.length?W[0]:{compositeFilter:{op:"AND",filters:W}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(L){if(0!==L.length)return L.map(W=>{return{field:J((re=W).field),direction:_(re.dir)};var re})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=(W=e.limit,i.N||Zi(W)?W:{value:W});var W,D,L;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(L=e.endAt).inclusive,values:L.position}),t}function g(i){let e=gc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){b(1===o);const re=t.from[0];re.allDescendants?u=re.collectionId:e=e.child(re.collectionId)}let d=[];t.where&&(d=f(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(re=>{return new ml(be((_e=re).field),function(He){switch(He){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_e.direction));var _e}));let D=null;t.limit&&(D=function(re){let _e;return _e="object"==typeof re?re.value:re,Zi(_e)?null:_e}(t.limit));let L=null;var re;t.startAt&&(L=new Oo((re=t.startAt).values||[],!!re.before));let W=null;return t.endAt&&(W=function(re){return new Oo(re.values||[],!re.before)}(t.endAt)),ic(e,u,m,d,D,"F",L,W)}function f(i){return i?void 0!==i.unaryFilter?[Ct(i)]:void 0!==i.fieldFilter?[Ze(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>f(e)).reduce((e,t)=>e.concat(t)):y():[]}function _(i){return sd[i]}function k(i){return ah[i]}function J(i){return{fieldPath:i.canonicalString()}}function be(i){return Vi.fromServerFormat(i.fieldPath)}function Ze(i){return fi.create(be(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return y()}}(i.fieldFilter.op),i.fieldFilter.value)}function Ct(i){switch(i.unaryFilter.op){case"IS_NAN":const e=be(i.unaryFilter.field);return fi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=be(i.unaryFilter.field);return fi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=be(i.unaryFilter.field);return fi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=be(i.unaryFilter.field);return fi.create(u,"!=",{nullValue:"NULL_VALUE"});default:return y()}}function Yt(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pn(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Bt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=so(e)),e=ri(i.get(t),e);return so(e)}function ri(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function so(i){return i+"\x01\x01"}function Vs(i){const e=i.length;if(b(e>=2),2===e)return b("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Qn.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const m=i.indexOf("\x01",d);switch((m<0||m>t)&&y(),i.charAt(m+1)){case"\x01":const D=i.substring(d,m);let L;0===u.length?L=D:(u+=D,L=u,u=""),o.push(L);break;case"\x10":u+=i.substring(d,m),u+="\0";break;case"\x11":u+=i.substring(d,m+1);break;default:y()}d=m+2}return new Qn(o)}const kl=["userId","batchId"];function ka(i,e){return[i,Bt(e)]}function yc(i,e,t){return[i,Bt(e),t]}const Pf={},Pa=["prefixPath","collectionGroup","readTime","documentId"],vc=["prefixPath","collectionGroup","documentId"],ad=["collectionGroup","readTime","prefixPath","documentId"],ud=["canonicalId","targetId"],_c=["targetId","path"],Ff=["path","targetId"],ld=["collectionId","parent"],Lf=["indexId","uid"],Sy=["uid","sequenceNumber"],My=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xy=["indexId","uid","orderedDocumentKey"],Og=["userId","collectionPath","documentId"],Vf=["userId","collectionPath","largestBatchId"],Ng=["userId","collectionGroup","largestBatchId"],ph=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ry=[...ph,"documentOverlays"],kg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Pg=[...kg,"indexConfiguration","indexState","indexEntries"],Uf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new et((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof et?t:et.resolve(t)}catch(t){return et.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):et.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):et.reject(t)}static resolve(e){return new et((t,o)=>{t(e)})}static reject(e){return new et((t,o)=>{o(e)})}static waitFor(e){return new et((t,o)=>{let u=0,d=0,m=!1;e.forEach(D=>{++u,D.next(()=>{++d,m&&d===u&&t()},L=>o(L))}),m=!0,d===u&&t()})}static or(e){let t=et.resolve(!1);for(const o of e)t=t.next(u=>u?et.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}}class cd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new je,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new dd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=yh(o.target.error);this.At.reject(new dd(e,u))}}static open(e,t,o,u){try{return new cd(t,e.transaction(u,o))}catch(d){throw new dd(t,d)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(dt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Fg(t)}}class aa{constructor(e,t,o){this.name=e,this.version=t,this.bt=o,12.2===aa.Vt((0,ke.z$)())&&rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return dt("SimpleDb","Removing database:",e),Vu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,ke.hl)())return!1;if(aa.St())return!0;const e=(0,ke.z$)(),t=aa.Vt(e),o=0<t&&t<10,u=aa.Dt(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,V.Z)(function*(){return t.db||(dt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new dd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const D=m.target.error;u("VersionError"===D.name?new X($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new X($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new dd(e,D))},d.onupgradeneeded=m=>{dt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.bt.kt(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{dt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,V.Z)(function*(){const m="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.Nt(e);const L=cd.open(d.db,e,m?"readonly":"readwrite",o),W=u(L).next(re=>(L.Pt(),re)).catch(re=>(L.abort(re),et.reject(re))).toPromise();return W.catch(()=>{}),yield L.Rt,W}catch(L){const W="FirebaseError"!==L.name&&D<3;if(dt("SimpleDb","Transaction failed with error:",L.message,"Retrying:",W),d.close(),!W)return Promise.reject(L)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gh{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Vu(this.Ft.delete())}}class dd extends X{constructor(e,t){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Lu(i){return"IndexedDbTransactionError"===i.name}class Fg{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(dt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(dt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Vu(o)}add(e){return dt("SimpleDb","ADD",this.store.name,e,e),Vu(this.store.add(e))}get(e){return Vu(this.store.get(e)).next(t=>(void 0===t&&(t=null),dt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return dt("SimpleDb","DELETE",this.store.name,e),Vu(this.store.delete(e))}count(){return dt("SimpleDb","COUNT",this.store.name),Vu(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.Kt(u,(m,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new et((d,m)=>{u.onerror=D=>{m(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new et((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}Qt(e,t){dt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Kt(u,(d,m,D)=>D.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Kt(u,t)}zt(e){const t=this.cursor({});return new et((o,u)=>{t.onerror=d=>{const m=yh(d.target.error);u(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(D=>{D?m.continue():o()}):o()}})}Kt(e,t){const o=[];return new et((u,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const D=m.target.result;if(!D)return void u();const L=new gh(D),W=t(D.primaryKey,D.value,L);if(W instanceof et){const re=W.catch(_e=>(L.done(),et.reject(_e)));o.push(re)}L.isDone?u():null===L.Lt?D.continue():D.continue(L.Lt)}}).next(()=>et.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vu(i){return new et((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=yh(o.target.error);t(u)}})}let mh=!1;function yh(i){const e=aa.Vt((0,ke.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mh||(mh=!0,setTimeout(()=>{throw o},0)),o}}return i}class hd extends Fu{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Bi(i,e){const t=B(i);return aa.xt(t.Ht,e)}class vh{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Mg(d,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&uc(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&uc(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(Lt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mn())}isEqual(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,(t,o)=>lc(t,o))&&eo(this.baseMutations,e.baseMutations,(t,o)=>lc(t,o))}}class fd{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){b(e.mutations.length===o.length);let u=Rg;const d=e.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new fd(e,t,o,u)}}class _h{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fa{constructor(e,t,o,u,d=Lt.min(),m=Lt.min(),D=Fn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=D}withSequenceNumber(e){return new Fa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ec{constructor(e){this.Jt=e}}function Bf(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Eh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:ku(u=i.Jt,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:xl(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Pl(e.version)};else{if(!e.isUnknownDocument())return y();o.unknownDocument={path:t.path.toArray(),version:Pl(e.version)}}var u,d;return o}function Eh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Pl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uu(i){const e=new di(i.seconds,i.nanoseconds);return Lt.fromTimestamp(e)}function Bu(i,e){const t=(e.baseMutations||[]).map(d=>od(i.Jt,d));for(let d=0;d<e.mutations.length-1;++d){const m=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(m.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>od(i.Jt,d)),u=di.fromMillis(e.localWriteTimeMs);return new vh(e.batchId,u,t,o)}function wc(i){const e=Uu(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Uu(i.lastLimboFreeSnapshotVersion):Lt.min();let o;var u;return void 0!==i.query.documents?(b(1===(u=i.query).documents.length),o=io(No(gc(u.documents[0])))):o=io(g(i.query)),new Fa(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Fn.fromBase64String(i.resumeToken))}function Ny(i,e){const t=Pl(e.snapshotVersion),o=Pl(e.lastLimboFreeSnapshotVersion);let u;u=go(e.target)?hh(i.Jt,e.target):fh(i.Jt,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yi(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function wh(i){const e=g({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?oc(e,e.limit,"L"):e}function jf(i,e){return new _h(e.largestBatchId,od(i.Jt,e.overlayMutation))}function $f(i,e){const t=e.path.lastSegment();return[i,Bt(e.path.popLast()),t]}class ky{getBundleMetadata(e,t){return Lg(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Uu(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Lg(e).put({bundleId:(o=t).id,createTime:Pl(Qi(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Qo(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:wh(u.bundledQuery),readTime:Uu(u.readTime)};var u})}saveNamedQuery(e,t){return Qo(e).put({name:(o=t).name,readTime:Pl(Qi(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Lg(i){return Bi(i,"bundles")}function Qo(i){return Bi(i,"namedQueries")}class Hf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Hf(e,t.uid||"")}getOverlay(e,t){return Ic(e).get($f(this.userId,t)).next(o=>o?jf(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((d,m)=>{const D=new _h(t,m);u.push(this.Xt(e,D))}),et.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(m=>u.add(Bt(m.getCollectionPath())));const d=[];return u.forEach(m=>{const D=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(Ic(e).Qt("collectionPathOverlayIndex",D))}),et.waitFor(d)}getOverlaysForCollection(e,t,o){const u=fc(),d=Bt(t),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Ic(e).qt("collectionPathOverlayIndex",m).next(D=>{for(const L of D){const W=jf(this.M,L);u.set(W.getKey(),W)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=fc();let m;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ic(e).Wt({index:"collectionGroupOverlayIndex",range:D},(L,W,re)=>{const _e=jf(this.M,W);d.size()<u||_e.largestBatchId===m?(d.set(_e.getKey(),_e),m=_e.largestBatchId):re.done()}).next(()=>d)}Xt(e,t){return Ic(e).put(function(o,u,d){const[m,D,L]=$f(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:L,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:su(o.Jt,d.mutation)}}(this.M,this.userId,t))}}function Ic(i){return Bi(i,"documentOverlays")}class Fl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(ni(e.integerValue));else if("doubleValue"in e){const o=ni(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),So(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ao(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?Ko(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):y()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),wt.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Py(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Vg(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=Py(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}Fl.fe=new Fl;class Fy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=Vg(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=Vg(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Ug{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Ly{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class pd{constructor(){this.De=new Fy,this.Ce=new Ug(this.De),this.xe=new Ly(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ju{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new ju(this.indexId,this.documentKey,this.arrayValue,o)}}function In(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Gf(i.arrayValue,e.arrayValue),0!==t?t:(t=Gf(i.directionalValue,e.directionalValue),0!==t?t:wt.comparator(i.documentKey,e.documentKey)))}function Gf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Bg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=ft(e);if(void 0!==t&&!this.Be(t))return!1;const o=Ot(e);let u=0,d=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const m=o[u];if(!this.Le(this.Fe,m)||!this.Ue(this.Me[d++],m))return!1;++u}for(;u<o.length;++u){const m=o[u];if(d>=this.Me.length||!this.Ue(this.Me[d++],m))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class jg{constructor(){this.qe=new Dc}addToCollectionParentIndex(e,t){return this.qe.add(t),et.resolve()}getCollectionParents(e,t){return et.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return et.resolve()}deleteFieldIndex(e,t){return et.resolve()}getDocumentsMatchingTarget(e,t){return et.resolve(null)}getFieldIndex(e,t){return et.resolve(null)}getFieldIndexes(e,t){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}updateCollectionGroup(e,t,o){return et.resolve()}updateIndexEntries(e,t){return et.resolve()}}class Dc{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new Ar(Qn.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Ar(Qn.comparator)).toArray()}}const Us=new Uint8Array(0);class $g{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Dc,this.Ge=new Na(o=>Yi(o),(o,u)=>Fs(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const d={collectionId:o,parent:Bt(u)};return Hg(e).put(d)}return et.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[za(t),""],!1,!0);return Hg(e).qt(u).next(d=>{for(const m of d){if(m.collectionId!==t)break;o.push(Vs(m.parent))}return o})}addFieldIndex(e,t){const o=Jo(e),u={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=Jo(e),u=Cc(e),d=Ll(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Ll(e);let u=!0;const d=new Map;return et.forEach(this.Qe(t),m=>this.getFieldIndex(e,m).next(D=>{u&&(u=!!D),d.set(m,D)})).next(()=>{if(u){let m=Mn();const D=[];return et.forEach(d,(L,W)=>{var re;dt("IndexedDbIndexManager",`Using index ${re=L,`id=${re.indexId}|cg=${re.collectionGroup}|f=${re.fields.map(Fr=>`${Fr.fieldPath}:${Fr.kind}`).join(",")}`} to execute ${Yi(t)}`);const _e=function(Fr,Xi){const si=ft(Xi);if(void 0===si)return null;for(const Ci of fl(Fr,si.fieldPath))switch(Ci.op){case"array-contains-any":return Ci.value.arrayValue.values||[];case"array-contains":return[Ci.value]}return null}(W,L),He=function(Fr,Xi){const si=new Map;for(const Ci of Ot(Xi))for(const Hs of fl(Fr,Ci.fieldPath))switch(Hs.op){case"==":case"in":si.set(Ci.fieldPath.canonicalString(),Hs.value);break;case"not-in":case"!=":return si.set(Ci.fieldPath.canonicalString(),Hs.value),Array.from(si.values())}return null}(W,L),it=function(Fr,Xi){const si=[];let Ci=!0;for(const Hs of Ot(Xi)){const sl=0===Hs.kind?Qc(Fr,Hs.fieldPath,Fr.startAt):pl(Fr,Hs.fieldPath,Fr.startAt);if(!sl.value)return null;si.push(sl.value),Ci&&(Ci=sl.inclusive)}return new Oo(si,Ci)}(W,L),ot=function(Fr,Xi){const si=[];let Ci=!0;for(const Hs of Ot(Xi)){const sl=0===Hs.kind?pl(Fr,Hs.fieldPath,Fr.endAt):Qc(Fr,Hs.fieldPath,Fr.endAt);if(!sl.value)return null;si.push(sl.value),Ci&&(Ci=sl.inclusive)}return new Oo(si,Ci)}(W,L),Wt=this.je(L,W,it),xn=this.je(L,W,ot),Zr=this.We(L,W,He),ii=this.ze(L.indexId,_e,Wt,!!it&&it.inclusive,xn,!!ot&&ot.inclusive,Zr);return et.forEach(ii,Fr=>o.Gt(Fr,t.limit).next(Xi=>{Xi.forEach(si=>{const Ci=wt.fromSegments(si.documentKey);m.has(Ci)||(m=m.add(Ci),D.push(Ci))})}))}).next(()=>D)}return et.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,o,u,d,m,D){const L=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=d?d.length:1),W=L/(null!=t?t.length:1),re=[];for(let _e=0;_e<L;++_e){const He=t?this.He(t[_e/W]):Us,it=o?this.Je(e,He,o[_e%W],u):this.Ye(e),ot=d?this.Xe(e,He,d[_e%W],m):this.Ye(e+1);re.push(...this.createRange(it,ot,D.map(Wt=>this.Je(e,He,Wt,!0))))}return re}Je(e,t,o,u){const d=new ju(e,wt.empty(),t,o);return u?d:d.ke()}Xe(e,t,o,u){const d=new ju(e,wt.empty(),t,o);return u?d.ke():d}Ye(e){return new ju(e,wt.empty(),Us,Us)}getFieldIndex(e,t){const o=new Bg(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{const m=d.filter(D=>o.$e(D));return m.sort((D,L)=>L.fields.length-D.fields.length),m.length>0?m[0]:null})}Ze(e,t){const o=new pd;for(const u of Ot(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const m=o.Ne(u.kind);Fl.fe.Zt(d,m)}return o.Se()}He(e){const t=new pd;return Fl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new pd;return Fl.fe.Zt(Ro(this.databaseId,t),o.Ne(function(u){const d=Ot(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.Se()}We(e,t,o){if(null===o)return[];let u=[];u.push(new pd);let d=0;for(const m of Ot(e)){const D=o[d++];for(const L of u)if(this.en(t,m.fieldPath)&&qa(D))u=this.nn(u,m,D);else{const W=L.Ne(m.kind);Fl.fe.Zt(D,W)}}return this.sn(u)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const u=[...e],d=[];for(const m of o.arrayValue.values||[])for(const D of u){const L=new pd;L.seed(D.Se()),Fl.fe.Zt(m,L.Ne(t.kind)),d.push(L)}return d}en(e,t){return!!e.filters.find(o=>o instanceof fi&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Jo(e),u=Cc(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(d=>{const m=[];return et.forEach(d,D=>u.get([D.indexId,this.uid]).next(L=>{m.push(function(W,re){const _e=re?new fn(re.sequenceNumber,new br(Uu(re.readTime),new wt(Vs(re.documentKey)),re.largestBatchId)):fn.empty(),He=W.fields.map(([it,ot])=>new qt(Vi.fromServerFormat(it),ot));return new Be(W.indexId,W.collectionGroup,He,_e)}(D,L))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:bn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Jo(e),d=Cc(e);return this.rn(e).next(m=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>et.forEach(D,L=>{return d.put({indexId:L.indexId,uid:this.user.uid||"",sequenceNumber:m,readTime:Pl((He=o).readTime),documentKey:Bt(He.documentKey.path),largestBatchId:He.largestBatchId});var He})))}updateIndexEntries(e,t){const o=new Map;return et.forEach(t,(u,d)=>{const m=o.get(u.collectionGroup);return(m?et.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),et.forEach(D,L=>this.on(e,u,L).next(W=>{const re=this.un(d,L);return W.isEqual(re)?et.resolve():this.an(e,d,L,W,re)}))))})}cn(e,t,o,u){return Ll(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,u){return Ll(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const u=Ll(e);let d=new Ar(In);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(m,D)=>{d=d.add(new ju(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}un(e,t){let o=new Ar(In);const u=this.Ze(t,e);if(null==u)return o;const d=ft(t);if(null!=d){const m=e.data.field(d.fieldPath);if(qa(m))for(const D of m.arrayValue.values||[])o=o.add(new ju(t.indexId,e.key,this.He(D),u))}else o=o.add(new ju(t.indexId,e.key,Us,u));return o}an(e,t,o,u,d){dt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(D,L,W,re,_e){const He=D.getIterator(),it=L.getIterator();let ot=Ou(He),Wt=Ou(it);for(;ot||Wt;){let xn=!1,Zr=!1;if(ot&&Wt){const ii=W(ot,Wt);ii<0?Zr=!0:ii>0&&(xn=!0)}else null!=ot?Zr=!0:xn=!0;xn?(re(Wt),Wt=Ou(it)):Zr?(_e(ot),ot=Ou(He)):(ot=Ou(He),Wt=Ou(it))}}(u,d,In,D=>{m.push(this.cn(e,t,o,D))},D=>{m.push(this.hn(e,t,o,D))}),et.waitFor(m)}rn(e){let t=1;return Cc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((m,D)=>In(m,D)).filter((m,D,L)=>!D||0!==In(m,L[D-1]));const u=[];u.push(e);for(const m of o){const D=In(m,e),L=In(m,t);if(0===D)u[0]=e.ke();else if(D>0&&L<0)u.push(m),u.push(m.ke());else if(L>0)break}u.push(t);const d=[];for(let m=0;m<u.length;m+=2)d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Us,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Us,[]]));return d}}function Hg(i){return Bi(i,"collectionParents")}function Ll(i){return Bi(i,"indexEntries")}function Jo(i){return Bi(i,"indexConfiguration")}function Cc(i){return Bi(i,"indexState")}const Wf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Vy(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],m=IDBKeyRange.only(t.batchId);let D=0;const L=o.Wt({range:m},(re,_e,He)=>(D++,He.delete()));d.push(L.next(()=>{b(1===D)}));const W=[];for(const re of t.mutations){const _e=yc(e,re.key.path,t.batchId);d.push(u.delete(_e)),W.push(re.key)}return et.waitFor(d).next(()=>W)}function gd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw y();e=i.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class Gg{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.ln={}}static Yt(e,t,o,u){b(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Gg(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ua(e).Wt({index:"userMutationsIndex",range:o},(u,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=$u(e),m=ua(e);return m.add({}).next(D=>{b("number"==typeof D);const L=new vh(D,t,o,u),W=function(He,it,ot){const Wt=ot.baseMutations.map(Zr=>su(He.Jt,Zr)),xn=ot.mutations.map(Zr=>su(He.Jt,Zr));return{userId:it,batchId:ot.batchId,localWriteTimeMs:ot.localWriteTime.toMillis(),baseMutations:Wt,mutations:xn}}(this.M,this.userId,L),re=[];let _e=new Ar((He,it)=>bn(He.canonicalString(),it.canonicalString()));for(const He of u){const it=yc(this.userId,He.key.path,D);_e=_e.add(He.key.path.popLast()),re.push(m.put(W)),re.push(d.put(it,Pf))}return _e.forEach(He=>{re.push(this.indexManager.addToCollectionParentIndex(e,He))}),e.addOnCommittedListener(()=>{this.ln[D]=L.keys()}),et.waitFor(re).next(()=>L)})}lookupMutationBatch(e,t){return ua(e).get(t).next(o=>o?(b(o.userId===this.userId),Bu(this.M,o)):null)}fn(e,t){return this.ln[t]?et.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.ln[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return ua(e).Wt({index:"userMutationsIndex",range:u},(m,D,L)=>{D.userId===this.userId&&(b(D.batchId>=o),d=Bu(this.M,D)),L.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ua(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ua(e).qt("userMutationsIndex",t).next(o=>o.map(u=>Bu(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=ka(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return $u(e).Wt({range:u},(m,D,L)=>{const[W,re,_e]=m,He=Vs(re);if(W===this.userId&&t.path.isEqual(He))return ua(e).get(_e).next(it=>{if(!it)throw y();b(it.userId===this.userId),d.push(Bu(this.M,it))});L.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Ar(bn);const u=[];return t.forEach(d=>{const m=ka(this.userId,d.path),D=IDBKeyRange.lowerBound(m),L=$u(e).Wt({range:D},(W,re,_e)=>{const[He,it,ot]=W,Wt=Vs(it);He===this.userId&&d.path.isEqual(Wt)?o=o.add(ot):_e.done()});u.push(L)}),et.waitFor(u).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=ka(this.userId,o),m=IDBKeyRange.lowerBound(d);let D=new Ar(bn);return $u(e).Wt({range:m},(L,W,re)=>{const[_e,He,it]=L,ot=Vs(He);_e===this.userId&&o.isPrefixOf(ot)?ot.length===u&&(D=D.add(it)):re.done()}).next(()=>this.dn(e,D))}dn(e,t){const o=[],u=[];return t.forEach(d=>{u.push(ua(e).get(d).next(m=>{if(null===m)throw y();b(m.userId===this.userId),o.push(Bu(this.M,m))}))}),et.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Vy(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),et.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return et.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return $u(e).Wt({range:o},(d,m,D)=>{if(d[0]===this.userId){const L=Vs(d[1]);u.push(L)}else D.done()}).next(()=>{b(0===u.length)})})}containsKey(e,t){return md(e,this.userId,t)}wn(e){return Ih(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function md(i,e,t){const o=ka(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return $u(i).Wt({range:d,jt:!0},(D,L,W)=>{const[re,_e,He]=D;re===e&&_e===u&&(m=!0),W.done()}).next(()=>m)}function ua(i){return Bi(i,"mutations")}function $u(i){return Bi(i,"documentMutations")}function Ih(i){return Bi(i,"mutationQueues")}class ou{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ou(0)}static yn(){return new ou(-1)}}class B_{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new ou(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Lt.fromTimestamp(new di(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.In(e,u)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bc(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(b(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return bc(e).Wt((m,D)=>{const L=wc(D);L.sequenceNumber<=t&&null===o.get(L.targetId)&&(u++,d.push(this.removeTargetData(e,L)))}).next(()=>et.waitFor(d)).next(()=>u)}forEachTarget(e,t){return bc(e).Wt((o,u)=>{const d=wc(u);t(d)})}pn(e){return Wg(e).get("targetGlobalKey").next(t=>(b(null!==t),t))}In(e,t){return Wg(e).put("targetGlobalKey",t)}Tn(e,t){return bc(e).put(Ny(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Yi(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return bc(e).Wt({range:u,index:"queryTargetsIndex"},(m,D,L)=>{const W=wc(D);Fs(t,W.target)&&(d=W,L.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=Hu(e);return t.forEach(m=>{const D=Bt(m.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,m))}),et.waitFor(u)}removeMatchingKeys(e,t,o){const u=Hu(e);return et.forEach(t,d=>{const m=Bt(d.path);return et.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=Hu(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Hu(e);let d=Mn();return u.Wt({range:o,jt:!0},(m,D,L)=>{const W=Vs(m[1]),re=new wt(W);d=d.add(re)}).next(()=>d)}containsKey(e,t){const o=Bt(t.path),u=IDBKeyRange.bound([o],[za(o)],!1,!0);let d=0;return Hu(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([m,D],L,W)=>{0!==m&&(d++,W.done())}).next(()=>d>0)}Et(e,t){return bc(e).get(t).next(o=>o?wc(o):null)}}function bc(i){return Bi(i,"targets")}function Wg(i){return Bi(i,"targetGlobal")}function Hu(i){return Bi(i,"targetDocuments")}function Vl(i){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,V.Z)(function*(i){if(i.code!==$.FAILED_PRECONDITION||i.message!==Uf)throw i;dt("LocalStore","Unexpectedly lost primary lease")}),Dh.apply(this,arguments)}function Uy([i,e],[t,o]){const u=bn(i,t);return 0===u?bn(e,o):u}class By{constructor(e){this.An=e,this.buffer=new Ar(Uy),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Uy(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class j_{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;dt("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,V.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){Lu(u)?dt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Vl(u)}yield t.Sn(e)}))}}class zg{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return et.resolve(kr.A);const o=new By(t);return this.Dn.forEachTarget(e,u=>o.bn(u.sequenceNumber)).next(()=>this.Dn.xn(e,u=>o.bn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(Wf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wf):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,u,d,m,D,L,W;const re=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_e=>(_e>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_e}`),u=this.params.maximumSequenceNumbersToCollect):u=_e,m=Date.now(),this.nthSequenceNumber(e,u))).next(_e=>(o=_e,D=Date.now(),this.removeTargets(e,o,t))).next(_e=>(d=_e,L=Date.now(),this.removeOrphanedDocuments(e,o))).next(_e=>(W=Date.now(),ho()<=Re.in.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-re}ms\n\tDetermined least recently used ${u} in `+(D-m)+`ms\n\tRemoved ${d} targets in `+(L-D)+`ms\n\tRemoved ${_e} documents in `+(W-L)+`ms\nTotal Duration: ${W-re}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:_e})))}}class Kg{constructor(e,t){this.db=e,this.garbageCollector=new zg(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,u)=>t(u))}addReference(e,t,o){return Ch(e,o)}removeReference(e,t,o){return Ch(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Ch(e,t)}On(e,t){return function(o,u){let d=!1;return Ih(o).zt(m=>md(o,m,u).next(D=>(D&&(d=!0),et.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Mn(e,(m,D)=>{if(D<=t){const L=this.On(e,m).next(W=>{if(!W)return d++,o.getEntry(e,m).next(()=>(o.removeEntry(m,Lt.min()),Hu(e).delete([0,Bt(m.path)])))});u.push(L)}}).next(()=>et.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Ch(e,t)}Mn(e,t){const o=Hu(e);let u,d=kr.A;return o.Wt({index:"documentTargetsIndex"},([m,D],{path:L,sequenceNumber:W})=>{0===m?(d!==kr.A&&t(new wt(Vs(u)),d),d=W,u=L):d=kr.A}).next(()=>{d!==kr.A&&t(new wt(Vs(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ch(i,e){return Hu(i).put((o=i.currentSequenceNumber,{targetId:0,path:Bt(e.path),sequenceNumber:o}));var o}class bh{constructor(){this.changes=new Na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,De.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?et.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $_{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Tc(e).put(o)}removeEntry(e,t,o){return Tc(e).delete(function(u,d){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Eh(d),m[m.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=De.newInvalidDocument(t);return Tc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Th(t))},(u,d)=>{o=this.$n(t,d)}).next(()=>o)}Bn(e,t){let o={size:0,document:De.newInvalidDocument(t)};return Tc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Th(t))},(u,d)=>{o={document:this.$n(t,d),size:gd(d)}}).next(()=>o)}getEntries(e,t){let o=vo();return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);o=o.insert(u,m)}).next(()=>o)}Un(e,t){let o=vo(),u=new Bn(wt.comparator);return this.Ln(e,t,(d,m)=>{const D=this.$n(d,m);o=o.insert(d,D),u=u.insert(d,gd(m))}).next(()=>({documents:o,qn:u}))}Ln(e,t,o){if(t.isEmpty())return et.resolve();let u=new Ar(Hy);t.forEach(L=>u=u.add(L));const d=IDBKeyRange.bound(Th(u.first()),Th(u.last())),m=u.getIterator();let D=m.getNext();return Tc(e).Wt({index:"documentKeyIndex",range:d},(L,W,re)=>{const _e=wt.fromSegments([...W.prefixPath,W.collectionGroup,W.documentId]);for(;D&&Hy(D,_e)<0;)o(D,null),D=m.getNext();D&&D.isEqual(_e)&&(o(D,W),D=m.hasNext()?m.getNext():null),D?re.Ut(Th(D)):re.done()}).next(()=>{for(;D;)o(D,null),D=m.hasNext()?m.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),Eh(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tc(e).qt(IDBKeyRange.bound(u,d,!0)).next(m=>{let D=vo();for(const L of m){const W=this.$n(wt.fromSegments(L.prefixPath.concat(L.collectionGroup,L.documentId)),L);D=D.insert(W.key,W)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=vo();const m=$y(t,o),D=$y(t,br.max());return Tc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,D,!0)},(L,W,re)=>{const _e=this.$n(wt.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);d=d.insert(_e.key,_e),d.size===u&&re.done()}).next(()=>d)}newChangeBuffer(e){return new H_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jy(e).get("remoteDocumentGlobalKey").next(t=>(b(!!t),t))}Fn(e,t){return jy(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function Oy(i,e){let t;if(e.document)t=mc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=wt.fromSegments(e.noDocument.path),u=Uu(e.noDocument.readTime);t=De.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return y();{const o=wt.fromSegments(e.unknownDocument.path),u=Uu(e.unknownDocument.version);t=De.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new di(o[0],o[1]);return Lt.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(Lt.min()))return o}return De.newInvalidDocument(e)}}class H_ extends bh{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Na(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new Ar((d,m)=>bn(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const D=this.Gn.get(d);if(t.push(this.Kn.removeEntry(e,d,D.readTime)),m.isValidDocument()){const L=Bf(this.Kn.M,m);u=u.add(d.path.popLast()),o+=gd(L)-D.size,t.push(this.Kn.addEntry(e,d,L))}else if(o-=D.size,this.trackRemovals){const L=Bf(this.Kn.M,m.convertToNoDocument(Lt.min()));t.push(this.Kn.addEntry(e,d,L))}}),u.forEach(d=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Kn.updateMetadata(e,o)),et.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:u})=>(u.forEach((d,m)=>{this.Gn.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function jy(i){return Bi(i,"remoteDocumentGlobal")}function Tc(i){return Bi(i,"remoteDocumentsV14")}function Th(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $y(i,e){const t=e.documentKey.path.toArray();return[i,Eh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Hy(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=bn(t[d],o[d]),u)return u;return u=bn(t.length,o.length),u||(u=bn(t[t.length-2],o[o.length-2]),u||bn(t[t.length-1],o[o.length-1]))}class G_{constructor(e){this.M=e}kt(e,t,o,u){const d=new cd("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kl,{unique:!0}),D.createObjectStore("documentMutations"),Gy(e),function(D){D.createObjectStore("remoteDocuments")}(e));let m=et.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),Gy(e)),m=m.next(()=>function(D){const L=D.store("targetGlobal"),W={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lt.min().toTimestamp(),targetCount:0};return L.put("targetGlobalKey",W)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(D,L){return L.store("mutations").qt().next(W=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kl,{unique:!0});const re=L.store("mutations"),_e=W.map(He=>re.put(He));return et.waitFor(_e)})}(e,d))),m=m.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(m=m.next(()=>this.Qn(d))),o<6&&u>=6&&(m=m.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.jn(d)))),o<7&&u>=7&&(m=m.next(()=>this.Wn(d))),o<8&&u>=8&&(m=m.next(()=>this.zn(e,d))),o<9&&u>=9&&(m=m.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(m=m.next(()=>this.Hn(d))),o<11&&u>=11&&(m=m.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(m=m.next(()=>{!function(D){const L=D.createObjectStore("documentOverlays",{keyPath:Og});L.createIndex("collectionPathOverlayIndex",Vf,{unique:!1}),L.createIndex("collectionGroupOverlayIndex",Ng,{unique:!1})}(e)})),o<13&&u>=13&&(m=m.next(()=>function(D){const L=D.createObjectStore("remoteDocumentsV14",{keyPath:Pa});L.createIndex("documentKeyIndex",vc),L.createIndex("collectionGroupIndex",ad)}(e)).next(()=>this.Jn(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>{!function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Lf}).createIndex("sequenceNumberIndex",Sy,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:My}).createIndex("documentKeyIndex",xy,{unique:!1})}(e)})),m}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=gd(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>et.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",m).next(D=>et.forEach(D,L=>{b(L.userId===d.userId);const W=Bu(this.M,L);return Vy(e,d.userId,W).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Wt((m,D)=>{const L=new Qn(m),W=[0,Bt(L)];d.push(t.get(W).next(re=>re?et.resolve():t.put({targetId:0,path:Bt(L),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>et.waitFor(d))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:ld});const o=t.store("collectionParents"),u=new Dc,d=m=>{if(u.add(m)){const D=m.lastSegment(),L=m.popLast();return o.put({collectionId:D,parent:Bt(L)})}};return t.store("remoteDocuments").Wt({jt:!0},(m,D)=>{const L=new Qn(m);return d(L.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([m,D,L],W)=>{const re=Vs(D);return d(re.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,u)=>{const d=wc(u),m=Ny(this.M,d);return t.put(m)})}Jn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((d,m)=>{const D=t.store("remoteDocumentsV14"),L=(W=m,W.document?new wt(Qn.fromString(W.document.name).popFirst(5)):W.noDocument?wt.fromSegments(W.noDocument.path):W.unknownDocument?wt.fromSegments(W.unknownDocument.path):y()).path.toArray();var W;const re={prefixPath:L.slice(0,L.length-2),collectionGroup:L[L.length-2],documentId:L[L.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};u.push(D.put(re))}).next(()=>et.waitFor(u))}}function Gy(i){i.createObjectStore("targetDocuments",{keyPath:_c}).createIndex("documentTargetsIndex",Ff,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ud,{unique:!0}),i.createObjectStore("targetGlobal")}const qg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class La{constructor(e,t,o,u,d,m,D,L,W,re,_e=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=d,this.window=m,this.document=D,this.Xn=W,this.Zn=re,this.ts=_e,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=He=>Promise.resolve(),!La.vt())throw new X($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kg(this,u),this.hs=t+"main",this.M=new Ec(L),this.ls=new aa(this.hs,this.ts,new G_(this.M)),this.fs=new B_(this.referenceDelegate,this.M),this.ds=new $_(this.M),this._s=new ky,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===re&&rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X($.FAILED_PRECONDITION,qg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new kr(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,V.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,V.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,V.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ah(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Lu(e))return dt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return dt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ul(e).get("owner").next(t=>et.resolve(this.bs(t)))}Vs(e){return Ah(e).delete(this.clientId)}vs(){var e=this;return(0,V.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Bi(o,"clientMetadata");return u.qt().next(d=>{const m=e.Ds(d,18e5),D=d.filter(L=>-1===m.indexOf(L));return et.forEach(D,L=>u.delete(L.clientId)).next(()=>D)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?et.resolve(!0):Ul(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new X($.FAILED_PRECONDITION,qg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ah(e).qt().next(o=>void 0===this.Ds(o,5e3).find(u=>{if(this.clientId!==u.clientId){const m=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||m&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&dt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,V.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new hd(t,kr.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Ah(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Gg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new $g(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Hf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){dt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=14===(m=this.ts)?Pg:13===m?kg:12===m?Ry:11===m?ph:void y();var m;let D;return this.ls.runTransaction(e,u,d,L=>(D=new hd(L,this.es?this.es.next():kr.A),"readwrite-primary"===t?this.Es(D).next(W=>!!W||this.As(D)).next(W=>{if(!W)throw rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new X($.FAILED_PRECONDITION,Uf);return o(D)}).next(W=>this.Ps(D).next(()=>W)):this.$s(D).next(()=>o(D)))).then(L=>(D.raiseOnCommittedEvent(),L))}$s(e){return Ul(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new X($.FAILED_PRECONDITION,qg)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ul(e).put("owner",t)}static vt(){return aa.vt()}Rs(e){const t=Ul(e);return t.get("owner").next(o=>this.bs(o)?(dt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):et.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(rr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,ke.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return dt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return rr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){rr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ul(i){return Bi(i,"owner")}function Ah(i){return Bi(i,"clientMetadata")}function Sh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class zf{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(u=>{for(const d of o)d.applyToLocalView(u);return u})}qs(e,t){e.forEach((o,u)=>{for(const d of t)d.applyToLocalView(u)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return wt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.js(e,t.path):yl(t)?this.Ws(e,t,o):this.zs(e,t,o);var u}js(e,t){return this.Ls(e,new wt(t)).next(o=>{let u=rd();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}Ws(e,t,o){const u=t.collectionGroup;let d=rd();return this.indexManager.getCollectionParents(e,u).next(m=>et.forEach(m,D=>{const L=(W=t,re=D.child(u),new mo(re,null,W.explicitOrderBy.slice(),W.filters.slice(),W.limit,W.limitType,W.startAt,W.endAt));var W,re;return this.zs(e,L,o).next(W=>{W.forEach((re,_e)=>{d=d.insert(re,_e)})})}).next(()=>d))}zs(e,t,o){let u;return this.ds.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(d=>{for(const m of d)for(const D of m.mutations){const L=D.key;let W=u.get(L);null==W&&(W=De.newInvalidDocument(L),u=u.insert(L,W)),uc(D,W,m.localWriteTime),W.isFoundDocument()||(u=u.remove(L))}}).next(()=>(u.forEach((d,m)=>{Xc(t,m)||(u=u.remove(d))}),u))}}class Mh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=u}static Ys(e,t){let o=Mn(),u=Mn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Mh(e,t.fromCache,o,u)}}class xh{Xs(e){this.Zs=e}Qs(e,t,o,u){return 0===(d=t).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||o.isEqual(Lt.min())?this.ti(e,t):this.Zs.Ks(e,u).next(d=>{const m=this.ei(t,d);return(sc(t)||bu(t))&&this.ni(t.limitType,m,u,o)?this.ti(e,t):(ho()<=Re.in.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Jc(t)),this.Zs.Qs(e,t,qn(o,-1)).next(D=>(m.forEach(L=>{D=D.insert(L.key,L)}),D)))});var d}ei(e,t){let o=new Ar(Xd(e));return t.forEach((u,d)=>{Xc(e,d)&&(o=o.add(d))}),o}ni(e,t,o,u){if(o.size!==t.size)return!0;const d="F"===e?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}ti(e,t){return ho()<=Re.in.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",Jc(t)),this.Zs.Qs(e,t,br.min())}}class Wy{constructor(e,t,o,u){this.persistence=e,this.si=t,this.M=u,this.ii=new Bn(bn),this.ri=new Na(d=>Yi(d),Fs),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(o)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new zf(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function au(i,e,t,o){return new Wy(i,e,t,o)}function Kf(i,e){return qf.apply(this,arguments)}function qf(){return qf=(0,V.Z)(function*(i,e){const t=B(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.Bs.getAllMutationBatches(o).next(d=>(u=d,t.ai(e),t.Bs.getAllMutationBatches(o))).next(d=>{const m=[],D=[];let L=Mn();for(const W of u){m.push(W.batchId);for(const re of W.mutations)L=L.add(re.key)}for(const W of d){D.push(W.batchId);for(const re of W.mutations)L=L.add(re.key)}return t.ci.Ks(o,L).next(W=>({hi:W,removedBatchIds:m,addedBatchIds:D}))})})}),qf.apply(this,arguments)}function Zf(i,e){const t=B(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.ui.newChangeBuffer({trackRemovals:!0});return function(m,D,L,W){const re=L.batch,_e=re.keys();let He=et.resolve();return _e.forEach(it=>{He=He.next(()=>W.getEntry(D,it)).next(ot=>{const Wt=L.docVersions.get(it);b(null!==Wt),ot.version.compareTo(Wt)<0&&(re.applyToRemoteDocument(ot,L),ot.isValidDocument()&&(ot.setReadTime(L.commitVersion),W.addEntry(ot)))})}),He.next(()=>m.Bs.removeMutationBatch(D,re))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.ci.Ks(o,u))})}function Zg(i){const e=B(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Yg(i,e){const t=B(i),o=e.snapshotVersion;let u=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.ui.newChangeBuffer({trackRemovals:!0});u=t.ii;const D=[];e.targetChanges.forEach((W,re)=>{const _e=u.get(re);if(!_e)return;D.push(t.fs.removeMatchingKeys(d,W.removedDocuments,re).next(()=>t.fs.addMatchingKeys(d,W.addedDocuments,re)));let He=_e.withSequenceNumber(d.currentSequenceNumber);var it,ot,Wt;e.targetMismatches.has(re)?He=He.withResumeToken(Fn.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):W.resumeToken.approximateByteSize()>0&&(He=He.withResumeToken(W.resumeToken,o)),u=u.insert(re,He),ot=He,Wt=W,(0===(it=_e).resumeToken.approximateByteSize()||ot.snapshotVersion.toMicroseconds()-it.snapshotVersion.toMicroseconds()>=3e8||Wt.addedDocuments.size+Wt.modifiedDocuments.size+Wt.removedDocuments.size>0)&&D.push(t.fs.updateTargetData(d,He))});let L=vo();if(e.documentUpdates.forEach(W=>{e.resolvedLimboDocuments.has(W)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,W))}),D.push(Qg(d,m,e.documentUpdates).next(W=>{L=W})),!o.isEqual(Lt.min())){const W=t.fs.getLastRemoteSnapshotVersion(d).next(re=>t.fs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(W)}return et.waitFor(D).next(()=>m.apply(d)).next(()=>t.ci.Gs(d,L)).next(()=>L)}).then(d=>(t.ii=u,d))}function Qg(i,e,t){let o=Mn();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let d=vo();return t.forEach((m,D)=>{const L=u.get(m);D.isNoDocument()&&D.version.isEqual(Lt.min())?(e.removeEntry(m,D.readTime),d=d.insert(m,D)):!L.isValidDocument()||D.version.compareTo(L.version)>0||0===D.version.compareTo(L.version)&&L.hasPendingWrites?(e.addEntry(D),d=d.insert(m,D)):dt("LocalStore","Ignoring outdated watch update for ",m,". Current version:",L.version," Watch version:",D.version)}),d})}function zy(i,e){const t=B(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function Va(i,e){const t=B(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.fs.getTargetData(o,e).next(d=>d?(u=d,et.resolve(u)):t.fs.allocateTargetId(o).next(m=>(u=new Fa(e,m,0,o.currentSequenceNumber),t.fs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.ii.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.ii=t.ii.insert(o.targetId,o),t.ri.set(e,o.targetId)),o})}function la(i,e,t){return yd.apply(this,arguments)}function yd(){return yd=(0,V.Z)(function*(i,e,t){const o=B(i),u=o.ii.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!Lu(m))throw m;dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}o.ii=o.ii.remove(e),o.ri.delete(u.target)}),yd.apply(this,arguments)}function uu(i,e,t){const o=B(i);let u=Lt.min(),d=Mn();return o.persistence.runTransaction("Execute query","readonly",m=>function(D,L,W){const re=B(D),_e=re.ri.get(W);return void 0!==_e?et.resolve(re.ii.get(_e)):re.fs.getTargetData(L,W)}(o,m,io(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(m,D.targetId).next(L=>{d=L})}).next(()=>o.si.Qs(m,e,t?u:Lt.min(),t?d:Mn())).next(D=>(Jg(o,ac(e),D),{documents:D,li:d})))}function Ac(i,e){const t=B(i),o=B(t.fs),u=t.ii.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.Et(d,e).next(m=>m?m.target:null))}function Bl(i,e){const t=B(i),o=t.oi.get(e)||Lt.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.ui.getAllFromCollectionGroup(u,e,qn(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Jg(t,e,u),u))}function Jg(i,e,t){let o=Lt.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.oi.set(e,o)}function Rh(){return Rh=(0,V.Z)(function*(i,e,t,o){const u=B(i);let d=Mn(),m=vo();for(const W of t){const re=e.fi(W.metadata.name);W.document&&(d=d.add(re));const _e=e.di(W);_e.setReadTime(e._i(W.metadata.readTime)),m=m.insert(re,_e)}const D=u.ui.newChangeBuffer({trackRemovals:!0}),L=yield Va(u,(W=o,io(No(Qn.fromString(`__bundle__/docs/${W}`)))));var W;return u.persistence.runTransaction("Apply bundle documents","readwrite",W=>Qg(W,D,m).next(re=>(D.apply(W),re)).next(re=>u.fs.removeMatchingKeysForTargetId(W,L.targetId).next(()=>u.fs.addMatchingKeys(W,d,L.targetId)).next(()=>u.ci.Gs(W,re)).next(()=>re)))}),Rh.apply(this,arguments)}function Yf(i,e){return vd.apply(this,arguments)}function vd(){return vd=(0,V.Z)(function*(i,e,t=Mn()){const o=yield Va(i,io(wh(e.bundledQuery))),u=B(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=Qi(e.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u._s.saveNamedQuery(d,e);const D=o.withResumeToken(Fn.EMPTY_BYTE_STRING,m);return u.ii=u.ii.insert(D.targetId,D),u.fs.updateTargetData(d,D).next(()=>u.fs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.fs.addMatchingKeys(d,t,o.targetId)).next(()=>u._s.saveNamedQuery(d,e))})}),vd.apply(this,arguments)}class em{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return et.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var o;return this.wi.set(t.id,{id:(o=t).id,version:o.version,createTime:Qi(o.createTime)}),et.resolve()}getNamedQuery(e,t){return et.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(o=t).name,query:wh(o.bundledQuery),readTime:Qi(o.readTime)}),et.resolve();var o}}class Oh{constructor(){this.overlays=new Bn(wt.comparator),this.gi=new Map}getOverlay(e,t){return et.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.Xt(e,t,d)}),et.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.gi.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.gi.delete(o)),et.resolve()}getOverlaysForCollection(e,t,o){const u=fc(),d=t.length+1,m=new wt(t.child("")),D=this.overlays.getIteratorFrom(m);for(;D.hasNext();){const L=D.getNext().value,W=L.getKey();if(!t.isPrefixOf(W.path))break;W.path.length===d&&L.largestBatchId>o&&u.set(L.getKey(),L)}return et.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Bn((W,re)=>W-re);const m=this.overlays.getIterator();for(;m.hasNext();){const W=m.getNext().value;if(W.getKey().getCollectionGroup()===t&&W.largestBatchId>o){let re=d.get(W.largestBatchId);null===re&&(re=fc(),d=d.insert(W.largestBatchId,re)),re.set(W.getKey(),W)}}const D=fc(),L=d.getIterator();for(;L.hasNext()&&(L.getNext().value.forEach((W,re)=>D.set(W,re)),!(D.size()>=u)););return et.resolve(D)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const m=this.gi.get(u.largestBatchId).delete(o.key);this.gi.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new _h(t,o));let d=this.gi.get(t);void 0===d&&(d=Mn(),this.gi.set(t,d)),this.gi.set(t,d.add(o.key))}}class Qf{constructor(){this.yi=new Ar(os.pi),this.Ii=new Ar(os.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const o=new os(e,t);this.yi=this.yi.add(o),this.Ii=this.Ii.add(o)}Ei(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ai(new os(e,t))}Ri(e,t){e.forEach(o=>this.removeReference(o,t))}Pi(e){const t=new wt(new Qn([])),o=new os(t,e),u=new os(t,e+1),d=[];return this.Ii.forEachInRange([o,u],m=>{this.Ai(m),d.push(m.key)}),d}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new wt(new Qn([])),o=new os(t,e),u=new os(t,e+1);let d=Mn();return this.Ii.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new os(e,0),o=this.yi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class os{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return wt.comparator(e.key,t.key)||bn(e.vi,t.vi)}static Ti(e,t){return bn(e.vi,t.vi)||wt.comparator(e.key,t.key)}}class W_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Ar(os.pi)}checkEmpty(e){return et.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,u){const d=this.Si;this.Si++;const m=new vh(d,t,o,u);this.Bs.push(m);for(const D of u)this.Di=this.Di.add(new os(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return et.resolve(m)}lookupMutationBatch(e,t){return et.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.xi(t+1),d=u<0?0:u;return et.resolve(this.Bs.length>d?this.Bs[d]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return et.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new os(t,0),u=new os(t,Number.POSITIVE_INFINITY),d=[];return this.Di.forEachInRange([o,u],m=>{const D=this.Ci(m.vi);d.push(D)}),et.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Ar(bn);return t.forEach(u=>{const d=new os(u,0),m=new os(u,Number.POSITIVE_INFINITY);this.Di.forEachInRange([d,m],D=>{o=o.add(D.vi)})}),et.resolve(this.Ni(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;wt.isDocumentKey(d)||(d=d.child(""));const m=new os(new wt(d),0);let D=new Ar(bn);return this.Di.forEachWhile(L=>{const W=L.key.path;return!!o.isPrefixOf(W)&&(W.length===u&&(D=D.add(L.vi)),!0)},m),et.resolve(this.Ni(D))}Ni(e){const t=[];return e.forEach(o=>{const u=this.Ci(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){b(0===this.ki(t.batchId,"removed")),this.Bs.shift();let o=this.Di;return et.forEach(t.mutations,u=>{const d=new os(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Di=o})}_n(e){}containsKey(e,t){const o=new os(t,0),u=this.Di.firstAfterOrEqual(o);return et.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return et.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class tm{constructor(e){this.Mi=e,this.docs=new Bn(wt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mi(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return et.resolve(o?o.document.mutableCopy():De.newInvalidDocument(t))}getEntries(e,t){let o=vo();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():De.newInvalidDocument(u))}),et.resolve(o)}getAllFromCollection(e,t,o){let u=vo();const d=new wt(t.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:D,value:{document:L}}=m.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||hi(Tn(L),o)<=0||(u=u.insert(L.key,L.mutableCopy()))}return et.resolve(u)}getAllFromCollectionGroup(e,t,o,u){y()}Oi(e,t){return et.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new nm(this)}getSize(e){return et.resolve(this.size)}}class nm extends bh{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Kn.addEntry(e,u)):this.Kn.removeEntry(o)}),et.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Ky{constructor(e){this.persistence=e,this.Fi=new Na(t=>Yi(t),Fs),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Qf,this.targetCount=0,this.Li=ou.gn()}forEachTarget(e,t){return this.Fi.forEach((o,u)=>t(u)),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.$i&&(this.$i=t),et.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new ou(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,et.resolve()}updateTargetData(e,t){return this.Tn(t),et.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Fi.forEach((m,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Fi.delete(m),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),et.waitFor(d).next(()=>u)}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,t){const o=this.Fi.get(t)||null;return et.resolve(o)}addMatchingKeys(e,t,o){return this.Bi.Ei(t,o),et.resolve()}removeMatchingKeys(e,t,o){this.Bi.Ri(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(m=>{d.push(u.markPotentiallyOrphaned(e,m))}),et.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),et.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Bi.Vi(t);return et.resolve(o)}containsKey(e,t){return et.resolve(this.Bi.containsKey(t))}}class rm{constructor(e,t){this.Ui={},this.overlays={},this.es=new kr(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Ky(this),this.indexManager=new jg,this.ds=new tm(o=>this.referenceDelegate.qi(o)),this.M=new Ec(t),this._s=new em(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Oh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ui[e.toKey()];return o||(o=new W_(t,this.referenceDelegate),this.Ui[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){dt("MemoryPersistence","Starting transaction:",e);const u=new qy(this.es.next());return this.referenceDelegate.Ki(),o(u).next(d=>this.referenceDelegate.Gi(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Qi(e,t){return et.or(Object.values(this.Ui).map(o=>()=>o.containsKey(e,t)))}}class qy extends Fu{constructor(e){super(),this.currentSequenceNumber=e}}class Jf{constructor(e){this.persistence=e,this.ji=new Qf,this.Wi=null}static zi(e){return new Jf(e)}get Hi(){if(this.Wi)return this.Wi;throw y()}addReference(e,t,o){return this.ji.addReference(o,t),this.Hi.delete(o.toString()),et.resolve()}removeReference(e,t,o){return this.ji.removeReference(o,t),this.Hi.add(o.toString()),et.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),et.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(u=>this.Hi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Hi.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Hi,o=>{const u=wt.fromPath(o);return this.Ji(e,u).next(d=>{d||t.removeEntry(u,Lt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(o=>{o?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return et.or([()=>et.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function _o(i,e){return`firestore_clients_${i}_${e}`}function im(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Xf(i,e){return`firestore_targets_${i}_${e}`}class ep{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Yi(e,t,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new X(u.error.code,u.error.message))),m?new ep(e,t,u.state,d):(rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Yi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new X(o.error.code,o.error.message))),d?new Nh(e,o.state,u):(rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _d{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=ru();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=Du(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new _d(e,d):(rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sm{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sm(t.clientId,t.onlineState):(rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tp{constructor(){this.activeTargetIds=ru()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ed{constructor(e,t,o,u,d){this.window=e,this.Yn=t,this.persistenceKey=o,this.er=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Bn(bn),this.started=!1,this.rr=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ur=_o(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new tp),this.cr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,V.Z)(function*(){const t=yield e.syncEngine.Fs();for(const u of t){if(u===e.er)continue;const d=e.getItem(_o(e.persistenceKey,u));if(d){const m=_d.Yi(u,d);m&&(e.ir=e.ir.insert(m.clientId,m))}}e.wr();const o=e.storage.getItem(e.dr);if(o){const u=e.mr(o);u&&e.gr(u)}for(const u of e.rr)e.sr(u);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,o){this.pr(e,t,o),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Xf(this.persistenceKey,e));if(o){const u=Nh.Yi(e,o);u&&(t=u.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xf(this.persistenceKey,e))}updateQueryState(e,t,o){this.Er(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Ir(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return dt("SharedClientState","READ",e,t),t}setItem(e,t){dt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){dt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(dt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ur)return void rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,V.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const u=t.Pr(o.key);return t.br(u,null)}{const u=t.Vr(o.key,o.newValue);if(u)return t.br(u.clientId,u)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const u=t.vr(o.key,o.newValue);if(u)return t.Sr(u)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(o.key===t.dr){if(null!==o.newValue){const u=t.mr(o.newValue);if(u)return t.gr(u)}}else if(o.key===t.ar){const u=function(d){let m=kr.A;if(null!=d)try{const D=JSON.parse(d);b("number"==typeof D),m=D}catch(D){rr("SharedClientState","Failed to read sequence number from WebStorage",D)}return m}(o.newValue);u!==kr.A&&t.sequenceNumberHandler(u)}else if(o.key===t._r){const u=t.Nr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.kr(d)))}}else t.rr.push(o)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,o){const u=new ep(this.currentUser,e,t,o),d=im(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Xi())}Ir(e){const t=im(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,o){const u=Xf(this.persistenceKey,e),d=new Nh(e,t,o);this.setItem(u,d.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.Pr(e);return _d.Yi(o,t)}vr(e,t){const o=this.hr.exec(e),u=Number(o[1]);return ep.Yi(new ti(void 0!==o[2]?o[2]:null),u,t)}Dr(e,t){const o=this.lr.exec(e),u=Number(o[1]);return Nh.Yi(u,t)}mr(e){return sm.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,V.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);dt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const o=t?this.ir.insert(e,t):this.ir.remove(e),u=this.yr(this.ir),d=this.yr(o),m=[],D=[];return d.forEach(L=>{u.has(L)||m.push(L)}),u.forEach(L=>{d.has(L)||D.push(L)}),this.syncEngine.Fr(m,D).then(()=>{this.ir=o})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=ru();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class np{constructor(){this.$r=new tp,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,o){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new tp,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zy{Lr(e){}shutdown(){}}class om{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Yy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class am{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Qy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,o,u,d){const m=this.uo(e,t);dt("RestConnection","Sending: ",m,o);const D={};return this.ao(D,u,d),this.co(e,m,D,o).then(L=>(dt("RestConnection","Received: ",L),L),L=>{throw I("RestConnection",`${e} failed with error: `,L,"url: ",m,"request:",o),L})}ho(e,t,o,u,d){return this.oo(e,t,o,u,d)}ao(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+co,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}uo(e,t){return`${this.io}/v1/${t}:${Yy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,u){return new Promise((d,m)=>{const D=new nc;D.listenOnce(_r.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case Ta.NO_ERROR:const W=D.getResponseJson();dt("Connection","XHR received:",JSON.stringify(W)),d(W);break;case Ta.TIMEOUT:dt("Connection",'RPC "'+e+'" timed out'),m(new X($.DEADLINE_EXCEEDED,"Request time out"));break;case Ta.HTTP_ERROR:const re=D.getStatus();if(dt("Connection",'RPC "'+e+'" failed with status:',re,"response text:",D.getResponseText()),re>0){const _e=D.getResponseJson().error;if(_e&&_e.status&&_e.message){const He=function(it){const ot=it.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ot)>=0?ot:$.UNKNOWN}(_e.status);m(new X(He,_e.message))}else m(new X($.UNKNOWN,"Server responded with status "+D.getStatus()))}else m(new X($.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{dt("Connection",'RPC "'+e+'" completed.')}});const L=JSON.stringify(u);D.send(t,"POST",L,o,15)})}lo(e,t,o){const u=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=$o(),m=Ho(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new Aa({})),this.ao(D.initMessageHeaders,t,o),(0,ke.uI)()||(0,ke.b$)()||(0,ke.d)()||(0,ke.w1)()||(0,ke.Mn)()||(0,ke.ru)()||(D.httpHeadersOverwriteParam="$httpHeaders");const L=u.join("");dt("Connection","Creating WebChannel: "+L,D);const W=d.createWebChannel(L,D);let re=!1,_e=!1;const He=new am({Wr:ot=>{_e?dt("Connection","Not sending because WebChannel is closed:",ot):(re||(dt("Connection","Opening WebChannel transport."),W.open(),re=!0),dt("Connection","WebChannel sending:",ot),W.send(ot))},zr:()=>W.close()}),it=(ot,Wt,xn)=>{ot.listen(Wt,Zr=>{try{xn(Zr)}catch(ii){setTimeout(()=>{throw ii},0)}})};return it(W,hs.EventType.OPEN,()=>{_e||dt("Connection","WebChannel transport opened.")}),it(W,hs.EventType.CLOSE,()=>{_e||(_e=!0,dt("Connection","WebChannel transport closed"),He.no())}),it(W,hs.EventType.ERROR,ot=>{_e||(_e=!0,I("Connection","WebChannel transport errored:",ot),He.no(new X($.UNAVAILABLE,"The operation could not be completed")))}),it(W,hs.EventType.MESSAGE,ot=>{var Wt;if(!_e){const xn=ot.data[0];b(!!xn);const Zr=xn,ii=Zr.error||(null===(Wt=Zr[0])||void 0===Wt?void 0:Wt.error);if(ii){dt("Connection","WebChannel received error:",ii);const Fr=ii.status;let Xi=function(Ci){const Hs=Ii[Ci];if(void 0!==Hs)return dc(Hs)}(Fr),si=ii.message;void 0===Xi&&(Xi=$.INTERNAL,si="Unknown error status: "+Fr+" with message "+ii.message),_e=!0,He.no(new X(Xi,si)),W.close()}else dt("Connection","WebChannel received:",xn),He.so(xn)}}),it(m,al.STAT_EVENT,ot=>{ot.stat===vs.PROXY?dt("Connection","Detected buffering proxy"):ot.stat===vs.NOPROXY&&dt("Connection","Detected no buffering proxy")}),setTimeout(()=>{He.eo()},0),He}}function rp(){return"undefined"!=typeof window?window:null}function kh(){return"undefined"!=typeof document?document:null}function wd(i){return new uh(i,!0)}class Ph{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Yn=e,this.timerId=t,this.fo=o,this._o=u,this.wo=d,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),o=Math.max(0,Date.now()-this.po),u=Math.max(0,t-o);u>0&&dt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,u,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class ip{constructor(e,t,o,u,d,m,D,L){this.Yn=e,this.Ro=o,this.Po=u,this.bo=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=D,this.listener=L,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Ph(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,V.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,V.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var o=this;return(0,V.Z)(function*(){o.$o(),o.Bo(),o.Do.cancel(),o.Vo++,4!==e?o.Do.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),o.Do.Io()):t&&t.code===$.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Lo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Vo===t&&this.qo(o,u)},o=>{e(()=>{const u=new X($.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ko(u)})})}qo(e,t){const o=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{o(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(u=>{o(()=>this.Ko(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}No(){var e=this;this.state=5,this.Do.To((0,V.Z)(function*(){e.state=0,e.start()}))}Ko(e){return dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jy extends ip{constructor(e,t,o,u,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,m),this.M=d}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Nf(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(L=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===L?1:"REMOVE"===L?2:"CURRENT"===L?3:"RESET"===L?4:y(),u=e.targetChange.targetIds||[],d=function(L,W){return L.N?(b(void 0===W||"string"==typeof W),Fn.fromBase64String(W||"")):(b(void 0===W||W instanceof Uint8Array),Fn.fromUint8Array(W||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,D=m&&function(L){const W=void 0===L.code?$.UNKNOWN:dc(L.code);return new X(W,L.message||"")}(m);t=new Ls(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=Pr(i,o.document.name),d=Qi(o.document.updateTime),m=new z({mapValue:{fields:o.document.fields}}),D=De.newFoundDocument(u,d,m);t=new Zo(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=Pr(i,o.document),d=o.readTime?Qi(o.readTime):Lt.min(),m=De.newNoDocument(u,d);t=new Zo([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const o=e.documentRemove,u=Pr(i,o.document);t=new Zo([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return y();{const o=e.filter,d=new td(o.count||0);t=new pc(o.targetId,d)}}var L;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return Lt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Lt.min():d.readTime?Qi(d.readTime):Lt.min()}(e);return this.listener.Qo(t,o)}jo(e){const t={};t.database=Nl(this.M),t.addTarget=function(u,d){let m;const D=d.target;return m=go(D)?{documents:hh(u,D)}:{query:fh(u,D)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=ko(u,d.resumeToken):d.snapshotVersion.compareTo(Lt.min())>0&&(m.readTime=xl(u,d.snapshotVersion.toTimestamp())),m}(this.M,e);const o=function c(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return y()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=Nl(this.M),t.removeTarget=e,this.Fo(t)}}class Ua extends ip{constructor(e,t,o,u,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,m),this.M=d,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(b(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function kf(i,e){return i&&i.length>0?(b(void 0!==e),i.map(t=>function(o,u){let d=Qi(o.updateTime?o.updateTime:u);return d.isEqual(Lt.min())&&(d=Qi(u)),new El(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Qi(e.commitTime);return this.listener.Yo(o,t)}return b(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Nl(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>su(this.M,o))};this.Fo(t)}}class sp extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=u,this.tu=!1}eu(){if(this.tu)throw new X($.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.oo(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new X($.UNKNOWN,u.toString())})}ho(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ho(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new X($.UNKNOWN,u.toString())})}terminate(){this.tu=!0}}class Xy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(rr(t),this.iu=!1):dt("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class ev{constructor(e,t,o,u,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=d,this._u.Lr(D=>{o.enqueueAndForget((0,V.Z)(function*(){var L;Gu(m)&&(dt("RemoteStore","Restarting streams for network reachability change."),yield(L=(0,V.Z)(function*(W){const re=B(W);re.fu.add(4),yield Sc(re),re.wu.set("Unknown"),re.fu.delete(4),yield Fh(re)}),function(W){return L.apply(this,arguments)})(m))}))}),this.wu=new Xy(o,u)}}function Fh(i){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,V.Z)(function*(i){if(Gu(i))for(const e of i.du)yield e(!0)}),Lh.apply(this,arguments)}function Sc(i){return op.apply(this,arguments)}function op(){return op=(0,V.Z)(function*(i){for(const e of i.du)yield e(!1)}),op.apply(this,arguments)}function Vh(i,e){const t=B(i);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Id(t)?Mc(t):Wu(t).xo()&&ap(t,e))}function jl(i,e){const t=B(i),o=Wu(t);t.lu.delete(e),o.xo()&&um(t,e),0===t.lu.size&&(o.xo()?o.Mo():Gu(t)&&t.wu.set("Unknown"))}function ap(i,e){i.mu.Z(e.targetId),Wu(i).jo(e)}function um(i,e){i.mu.Z(e),Wu(i).Wo(e)}function Mc(i){i.mu=new id({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.lu.get(e)||null}),Wu(i).start(),i.wu.ru()}function Id(i){return Gu(i)&&!Wu(i).Co()&&i.lu.size>0}function Gu(i){return 0===B(i).fu.size}function Uh(i){i.mu=void 0}function up(i){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,V.Z)(function*(i){i.lu.forEach((e,t)=>{ap(i,e)})}),Bh.apply(this,arguments)}function tv(i,e){return lp.apply(this,arguments)}function lp(){return lp=(0,V.Z)(function*(i,e){Uh(i),Id(i)?(i.wu.au(e),Mc(i)):i.wu.set("Unknown")}),lp.apply(this,arguments)}function cp(i,e,t){return lm.apply(this,arguments)}function lm(){return lm=(0,V.Z)(function*(i,e,t){if(i.wu.set("Online"),e instanceof Ls&&2===e.state&&e.cause)try{yield(o=(0,V.Z)(function*(u,d){const m=d.cause;for(const D of d.targetIds)u.lu.has(D)&&(yield u.remoteSyncer.rejectListen(D,m),u.lu.delete(D),u.mu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield jh(i,o)}else if(e instanceof Zo?i.mu.ut(e):e instanceof pc?i.mu._t(e):i.mu.ht(e),!t.isEqual(Lt.min()))try{const o=yield Zg(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const m=u.mu.yt(d);return m.targetChanges.forEach((D,L)=>{if(D.resumeToken.approximateByteSize()>0){const W=u.lu.get(L);W&&u.lu.set(L,W.withResumeToken(D.resumeToken,d))}}),m.targetMismatches.forEach(D=>{const L=u.lu.get(D);if(!L)return;u.lu.set(D,L.withResumeToken(Fn.EMPTY_BYTE_STRING,L.snapshotVersion)),um(u,D);const W=new Fa(L.target,D,1,L.sequenceNumber);ap(u,W)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t))}catch(o){dt("RemoteStore","Failed to raise snapshot:",o),yield jh(i,o)}var o}),lm.apply(this,arguments)}function jh(i,e,t){return $h.apply(this,arguments)}function $h(){return $h=(0,V.Z)(function*(i,e,t){if(!Lu(e))throw e;i.fu.add(1),yield Sc(i),i.wu.set("Offline"),t||(t=()=>Zg(i.localStore)),i.asyncQueue.enqueueRetryable((0,V.Z)(function*(){dt("RemoteStore","Retrying IndexedDB access"),yield t(),i.fu.delete(1),yield Fh(i)}))}),$h.apply(this,arguments)}function dp(i,e){return e().catch(t=>jh(i,t,e))}function $l(i){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,V.Z)(function*(i){const e=B(i),t=zu(e);let o=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;cm(e);)try{const u=yield zy(e.localStore,o);if(null===u){0===e.hu.length&&t.Mo();break}o=u.batchId,lu(e,u)}catch(u){yield jh(e,u)}Dd(e)&&dm(e)}),Hh.apply(this,arguments)}function cm(i){return Gu(i)&&i.hu.length<10}function lu(i,e){i.hu.push(e);const t=zu(i);t.xo()&&t.Ho&&t.Jo(e.mutations)}function Dd(i){return Gu(i)&&!zu(i).Co()&&i.hu.length>0}function dm(i){zu(i).start()}function nv(i){return hm.apply(this,arguments)}function hm(){return hm=(0,V.Z)(function*(i){zu(i).Zo()}),hm.apply(this,arguments)}function hp(i){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,V.Z)(function*(i){const e=zu(i);for(const t of i.hu)e.Jo(t.mutations)}),Gh.apply(this,arguments)}function fp(i,e,t){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,V.Z)(function*(i,e,t){const o=i.hu.shift(),u=fd.from(o,e,t);yield dp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield $l(i)}),Hl.apply(this,arguments)}function rv(i,e){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,V.Z)(function*(i,e){var t;e&&zu(i).Ho&&(yield(t=(0,V.Z)(function*(o,u){if(bl(d=u.code)&&d!==$.ABORTED){const m=o.hu.shift();zu(o).ko(),yield dp(o,()=>o.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield $l(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Dd(i)&&dm(i)}),Cd.apply(this,arguments)}function pp(i,e){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,V.Z)(function*(i,e){const t=B(i);t.asyncQueue.verifyOperationInProgress(),dt("RemoteStore","RemoteStore received new credentials");const o=Gu(t);t.fu.add(3),yield Sc(t),o&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Fh(t)}),Wh.apply(this,arguments)}function zh(i,e){return gp.apply(this,arguments)}function gp(){return gp=(0,V.Z)(function*(i,e){const t=B(i);e?(t.fu.delete(2),yield Fh(t)):e||(t.fu.add(2),yield Sc(t),t.wu.set("Unknown"))}),gp.apply(this,arguments)}function Wu(i){return i.gu||(i.gu=function(e,t,o){const u=B(e);return u.eu(),new Jy(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:up.bind(null,i),Yr:tv.bind(null,i),Qo:cp.bind(null,i)}),i.du.push(function(){var e=(0,V.Z)(function*(t){t?(i.gu.ko(),Id(i)?Mc(i):i.wu.set("Unknown")):(yield i.gu.stop(),Uh(i))});return function(t){return e.apply(this,arguments)}}())),i.gu}function zu(i){return i.yu||(i.yu=function(e,t,o){const u=B(e);return u.eu(),new Ua(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:nv.bind(null,i),Yr:rv.bind(null,i),Xo:hp.bind(null,i),Yo:fp.bind(null,i)}),i.du.push(function(){var e=(0,V.Z)(function*(t){t?(i.yu.ko(),yield $l(i)):(yield i.yu.stop(),i.hu.length>0&&(dt("RemoteStore",`Stopping write stream with ${i.hu.length} pending writes`),i.hu=[]))});return function(t){return e.apply(this,arguments)}}())),i.yu}class mp{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new je,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,o,u,d){const m=Date.now()+o,D=new mp(e,t,m,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new X($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gl(i,e){if(rr("AsyncQueue",`${e}: ${i}`),Lu(i))return new X($.UNAVAILABLE,`${e}: ${i}`);throw i}class ca{constructor(e){this.comparator=e?(t,o)=>e(t,o)||wt.comparator(t.key,o.key):(t,o)=>wt.comparator(t.key,o.key),this.keyedMap=rd(),this.sortedSet=new Bn(this.comparator)}static emptySet(e){return new ca(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new ca;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class yp{constructor(){this.pu=new Bn(wt.comparator)}track(e){const t=e.doc.key,o=this.pu.get(t);o?0!==e.type&&3===o.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==o.type?this.pu=this.pu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.pu=this.pu.remove(t):1===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):y():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,o)=>{e.push(o)}),e}}class xc{constructor(e,t,o,u,d,m,D,L){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=D,this.excludesMetadataChanges=L}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new xc(e,t,ca.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class iv{constructor(){this.Tu=void 0,this.listeners=[]}}class Rc{constructor(){this.queries=new Na(e=>Jd(e),Au),this.onlineState="Unknown",this.Eu=new Set}}function vp(i,e){return _p.apply(this,arguments)}function _p(){return _p=(0,V.Z)(function*(i,e){const t=B(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new iv),u)try{d.Tu=yield t.onListen(o)}catch(m){const D=Gl(m,`Initialization of query '${Jc(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.Au(t.onlineState),d.Tu&&e.Ru(d.Tu)&&Kh(t)}),_p.apply(this,arguments)}function Ep(i,e){return wp.apply(this,arguments)}function wp(){return wp=(0,V.Z)(function*(i,e){const t=B(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),wp.apply(this,arguments)}function da(i,e){const t=B(i);let o=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const D of m.listeners)D.Ru(u)&&(o=!0);m.Tu=u}}o&&Kh(t)}function Ip(i,e,t){const o=B(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Kh(i){i.Eu.forEach(e=>{e.next()})}class qh{constructor(e,t,o){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}Ru(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new xc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class fm{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class Dp{constructor(e){this.M=e}fi(e){return Pr(this.M,e)}di(e){return e.metadata.exists?mc(this.M,e.document,!1):De.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Qi(e)}}class sv{constructor(e,t,o){this.Nu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pm(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Qn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new Dp(this.M);for(const u of e)if(u.metadata.queries){const d=o.fi(u.metadata.name);for(const m of u.metadata.queries){const D=(t.get(m)||Mn()).add(d);t.set(m,D)}}return t}complete(){var e=this;return(0,V.Z)(function*(){const t=yield function Xg(i,e,t,o){return Rh.apply(this,arguments)}(e.localStore,new Dp(e.M),e.documents,e.Nu.id),o=e.Mu(e.documents);for(const u of e.queries)yield Yf(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function pm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class gm{constructor(e){this.key=e}}class mm{constructor(e){this.key=e}}class Cp{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Mn(),this.mutatedKeys=Mn(),this.Uu=Xd(e),this.qu=new ca(this.Uu)}get Ku(){return this.$u}Gu(e,t){const o=t?t.Qu:new yp,u=t?t.qu:this.qu;let d=t?t.mutatedKeys:this.mutatedKeys,m=u,D=!1;const L=sc(this.query)&&u.size===this.query.limit?u.last():null,W=bu(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((re,_e)=>{const He=u.get(re),it=Xc(this.query,_e)?_e:null,ot=!!He&&this.mutatedKeys.has(He.key),Wt=!!it&&(it.hasLocalMutations||this.mutatedKeys.has(it.key)&&it.hasCommittedMutations);let xn=!1;He&&it?He.data.isEqual(it.data)?ot!==Wt&&(o.track({type:3,doc:it}),xn=!0):this.ju(He,it)||(o.track({type:2,doc:it}),xn=!0,(L&&this.Uu(it,L)>0||W&&this.Uu(it,W)<0)&&(D=!0)):!He&&it?(o.track({type:0,doc:it}),xn=!0):He&&!it&&(o.track({type:1,doc:He}),xn=!0,(L||W)&&(D=!0)),xn&&(it?(m=m.add(it),d=Wt?d.add(re):d.delete(re)):(m=m.delete(re),d=d.delete(re)))}),sc(this.query)||bu(this.query))for(;m.size>this.query.limit;){const re=sc(this.query)?m.last():m.first();m=m.delete(re.key),d=d.delete(re.key),o.track({type:1,doc:re})}return{qu:m,Qu:o,ni:D,mutatedKeys:d}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const d=e.Qu.Iu();d.sort((W,re)=>function(_e,He){const it=ot=>{switch(ot){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return it(_e)-it(He)}(W.type,re.type)||this.Uu(W.doc,re.doc)),this.Wu(o);const m=t?this.zu():[],D=0===this.Lu.size&&this.current?1:0,L=D!==this.Bu;return this.Bu=D,0!==d.length||L?{snapshot:new xc(this.query,e.qu,u,d,e.mutatedKeys,0===D,L,!1),Hu:m}:{Hu:m}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new yp,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Mn(),this.qu.forEach(o=>{this.Ju(o.key)&&(this.Lu=this.Lu.add(o.key))});const t=[];return e.forEach(o=>{this.Lu.has(o)||t.push(new mm(o))}),this.Lu.forEach(o=>{e.has(o)||t.push(new gm(o))}),t}Yu(e){this.$u=e.li,this.Lu=Mn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return xc.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class z_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class ym{constructor(e){this.key=e,this.Zu=!1}}class ov{constructor(e,t,o,u,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.ta={},this.ea=new Na(D=>Jd(D),Au),this.na=new Map,this.sa=new Set,this.ia=new Bn(wt.comparator),this.ra=new Map,this.oa=new Qf,this.ua={},this.aa=new Map,this.ca=ou.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function av(i,e){return vm.apply(this,arguments)}function vm(){return vm=(0,V.Z)(function*(i,e){const t=Qu(i);let o,u;const d=t.ea.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.Xu();else{const m=yield Va(t.localStore,io(e));t.isPrimaryClient&&Vh(t.remoteStore,m);const D=t.sharedClientState.addLocalQueryTarget(m.targetId);o=m.targetId,u=yield _m(t,e,o,"current"===D)}return u}),vm.apply(this,arguments)}function _m(i,e,t,o){return bd.apply(this,arguments)}function bd(){return bd=(0,V.Z)(function*(i,e,t,o){i.la=(re,_e,He)=>{return(it=(0,V.Z)(function*(ot,Wt,xn,Zr){let ii=Wt.view.Gu(xn);ii.ni&&(ii=yield uu(ot.localStore,Wt.query,!1).then(({documents:si})=>Wt.view.Gu(si,ii)));const Fr=Zr&&Zr.targetChanges.get(Wt.targetId),Xi=Wt.view.applyChanges(ii,ot.isPrimaryClient,Fr);return Mp(ot,Wt.targetId,Xi.Hu),Xi.snapshot}),function(ot,Wt,xn,Zr){return it.apply(this,arguments)})(i,re,_e,He);var it};const u=yield uu(i.localStore,e,!0),d=new Cp(e,u.li),m=d.Gu(u.documents),D=xi.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),L=d.applyChanges(m,i.isPrimaryClient,D);Mp(i,t,L.Hu);const W=new z_(e,t,d);return i.ea.set(e,W),i.na.has(t)?i.na.get(t).push(e):i.na.set(t,[e]),L.snapshot}),bd.apply(this,arguments)}function uv(i,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,V.Z)(function*(i,e){const t=B(i),o=t.ea.get(e),u=t.na.get(o.targetId);if(u.length>1)return t.na.set(o.targetId,u.filter(d=>!Au(d,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield la(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),jl(t.remoteStore,o.targetId),Oc(t,o.targetId)}).catch(Vl))):(Oc(t,o.targetId),yield la(t.localStore,o.targetId,!0))}),Zh.apply(this,arguments)}function wm(){return wm=(0,V.Z)(function*(i,e,t){const o=Ju(i);try{const u=yield function(d,m){const D=B(d),L=di.now(),W=m.reduce((_e,He)=>_e.add(He.key),Mn());let re;return D.persistence.runTransaction("Locally write mutations","readwrite",_e=>D.ci.Ks(_e,W).next(He=>{re=He;const it=[];for(const ot of m){const Wt=xg(ot,re.get(ot.key));null!=Wt&&it.push(new Ru(ot.key,Wt,ie(Wt.value.mapValue),wi.exists(!0)))}return D.Bs.addMutationBatch(_e,L,it,m)})).then(_e=>(_e.applyToLocalDocumentSet(re),{batchId:_e.batchId,changes:re}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,m,D){let L=d.ua[d.currentUser.toKey()];L||(L=new Bn(bn)),L=L.insert(m,D),d.ua[d.currentUser.toKey()]=L}(o,u.batchId,t),yield ea(o,u.changes),yield $l(o.remoteStore)}catch(u){const d=Gl(u,"Failed to persist write");t.reject(d)}}),wm.apply(this,arguments)}function Xo(i,e){return Im.apply(this,arguments)}function Im(){return Im=(0,V.Z)(function*(i,e){const t=B(i);try{const o=yield Yg(t.localStore,e);e.targetChanges.forEach((u,d)=>{const m=t.ra.get(d);m&&(b(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.Zu=!0:u.modifiedDocuments.size>0?b(m.Zu):u.removedDocuments.size>0&&(b(m.Zu),m.Zu=!1))}),yield ea(t,o,e)}catch(o){yield Vl(o)}}),Im.apply(this,arguments)}function lv(i,e,t){const o=B(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ea.forEach((d,m)=>{const D=m.view.Au(e);D.snapshot&&u.push(D.snapshot)}),function(d,m){const D=B(d);D.onlineState=m;let L=!1;D.queries.forEach((W,re)=>{for(const _e of re.listeners)_e.Au(m)&&(L=!0)}),L&&Kh(D)}(o.eventManager,e),u.length&&o.ta.Qo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Dm(i,e,t){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,V.Z)(function*(i,e,t){const o=B(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.ra.get(e),d=u&&u.key;if(d){let m=new Bn(wt.comparator);m=m.insert(d,De.newNoDocument(d,Lt.min()));const D=Mn().add(d),L=new iu(Lt.min(),new Map,new Ar(bn),m,D);yield Xo(o,L),o.ia=o.ia.remove(d),o.ra.delete(e),xp(o)}else yield la(o.localStore,e,!1).then(()=>Oc(o,e,t)).catch(Vl)}),Yh.apply(this,arguments)}function Cm(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,V.Z)(function*(i,e){const t=B(i),o=e.batch.batchId;try{const u=yield Zf(t.localStore,e);Sp(t,o,null),Td(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield ea(t,u)}catch(u){yield Vl(u)}}),bp.apply(this,arguments)}function K_(i,e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,V.Z)(function*(i,e,t){const o=B(i);try{const u=yield function(d,m){const D=B(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",L=>{let W;return D.Bs.lookupMutationBatch(L,m).next(re=>(b(null!==re),W=re.keys(),D.Bs.removeMutationBatch(L,re))).next(()=>D.Bs.performConsistencyCheck(L)).next(()=>D.ci.Ks(L,W))})}(o.localStore,e);Sp(o,e,t),Td(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield ea(o,u)}catch(u){yield Vl(u)}}),Qh.apply(this,arguments)}function Ap(){return Ap=(0,V.Z)(function*(i,e){const t=B(i);Gu(t.remoteStore)||dt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const m=B(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>m.Bs.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.aa.get(o)||[];u.push(e),t.aa.set(o,u)}catch(o){const u=Gl(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Ap.apply(this,arguments)}function Td(i,e){(i.aa.get(e)||[]).forEach(t=>{t.resolve()}),i.aa.delete(e)}function Sp(i,e,t){const o=B(i);let u=o.ua[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ua[o.currentUser.toKey()]=u}}function Oc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.na.get(e))i.ea.delete(o),t&&i.ta.fa(o,t);i.na.delete(e),i.isPrimaryClient&&i.oa.Pi(e).forEach(o=>{i.oa.containsKey(o)||bm(i,o)})}function bm(i,e){i.sa.delete(e.path.canonicalString());const t=i.ia.get(e);null!==t&&(jl(i.remoteStore,t),i.ia=i.ia.remove(e),i.ra.delete(t),xp(i))}function Mp(i,e,t){for(const o of t)o instanceof gm?(i.oa.addReference(o.key,e),cv(i,o)):o instanceof mm?(dt("SyncEngine","Document no longer in limbo: "+o.key),i.oa.removeReference(o.key,e),i.oa.containsKey(o.key)||bm(i,o.key)):y()}function cv(i,e){const t=e.key,o=t.path.canonicalString();i.ia.get(t)||i.sa.has(o)||(dt("SyncEngine","New document in limbo: "+t),i.sa.add(o),xp(i))}function xp(i){for(;i.sa.size>0&&i.ia.size<i.maxConcurrentLimboResolutions;){const e=i.sa.values().next().value;i.sa.delete(e);const t=new wt(Qn.fromString(e)),o=i.ca.next();i.ra.set(o,new ym(t)),i.ia=i.ia.insert(t,o),Vh(i.remoteStore,new Fa(io(No(t.path)),o,2,kr.A))}}function ea(i,e,t){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,V.Z)(function*(i,e,t){const o=B(i),u=[],d=[],m=[];var D;o.ea.isEmpty()||(o.ea.forEach((D,L)=>{m.push(o.la(L,e,t).then(W=>{if(W){o.isPrimaryClient&&o.sharedClientState.updateQueryState(L.targetId,W.fromCache?"not-current":"current"),u.push(W);const re=Mh.Ys(L.targetId,W);d.push(re)}}))}),yield Promise.all(m),o.ta.Qo(u),yield(D=(0,V.Z)(function*(L,W){const re=B(L);try{yield re.persistence.runTransaction("notifyLocalViewChanges","readwrite",_e=>et.forEach(W,He=>et.forEach(He.Hs,it=>re.persistence.referenceDelegate.addReference(_e,He.targetId,it)).next(()=>et.forEach(He.Js,it=>re.persistence.referenceDelegate.removeReference(_e,He.targetId,it)))))}catch(_e){if(!Lu(_e))throw _e;dt("LocalStore","Failed to update sequence numbers: "+_e)}for(const _e of W){const He=_e.targetId;if(!_e.fromCache){const it=re.ii.get(He),Wt=it.withLastLimboFreeSnapshotVersion(it.snapshotVersion);re.ii=re.ii.insert(He,Wt)}}}),function(L,W){return D.apply(this,arguments)})(o.localStore,d))}),Ku.apply(this,arguments)}function dv(i,e){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,V.Z)(function*(i,e){const t=B(i);if(!t.currentUser.isEqual(e)){dt("SyncEngine","User change. New user:",e.toKey());const o=yield Kf(t.localStore,e);t.currentUser=e,(u=t).aa.forEach(m=>{m.forEach(D=>{D.reject(new X($.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.aa.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ea(t,o.hi)}var u}),Wl.apply(this,arguments)}function hv(i,e){const t=B(i),o=t.ra.get(e);if(o&&o.Zu)return Mn().add(o.key);{let u=Mn();const d=t.na.get(e);if(!d)return u;for(const m of d){const D=t.ea.get(m);u=u.unionWith(D.view.Ku)}return u}}function fv(i,e){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,V.Z)(function*(i,e){const t=B(i),o=yield uu(t.localStore,e.query,!0),u=e.view.Yu(o);return t.isPrimaryClient&&Mp(t,e.targetId,u.Hu),u}),Ad.apply(this,arguments)}function Ba(i,e){return zl.apply(this,arguments)}function zl(){return zl=(0,V.Z)(function*(i,e){const t=B(i);return Bl(t.localStore,e).then(o=>ea(t,o))}),zl.apply(this,arguments)}function js(i,e,t,o){return cu.apply(this,arguments)}function cu(){return cu=(0,V.Z)(function*(i,e,t,o){const u=B(i),d=yield function(m,D){const L=B(m),W=B(L.Bs);return L.persistence.runTransaction("Lookup mutation documents","readonly",re=>W.fn(re,D).next(_e=>_e?L.ci.Ks(re,_e):et.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield $l(u.remoteStore):"acknowledged"===t||"rejected"===t?(Sp(u,e,o||null),Td(u,e),D=e,B(B(u.localStore).Bs)._n(D)):y(),yield ea(u,d)):dt("SyncEngine","Cannot apply mutation batch with id: "+e)}),cu.apply(this,arguments)}function Eo(){return Eo=(0,V.Z)(function*(i,e){const t=B(i);if(Qu(t),Ju(t),!0===e&&!0!==t.ha){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield Xh(t,o.toArray());t.ha=!0,yield zh(t.remoteStore,!0);for(const d of u)Vh(t.remoteStore,d)}else if(!1===e&&!1!==t.ha){const o=[];let u=Promise.resolve();t.na.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(Oc(t,m),la(t.localStore,m,!0))),jl(t.remoteStore,m)}),yield u,yield Xh(t,o),function(d){const m=B(d);m.ra.forEach((D,L)=>{jl(m.remoteStore,L)}),m.oa.bi(),m.ra=new Map,m.ia=new Bn(wt.comparator)}(t),t.ha=!1,yield zh(t.remoteStore,!1)}}),Eo.apply(this,arguments)}function Xh(i,e,t){return qu.apply(this,arguments)}function qu(){return qu=(0,V.Z)(function*(i,e,t){const o=B(i),u=[],d=[];for(const m of e){let D;const L=o.na.get(m);if(L&&0!==L.length){D=yield Va(o.localStore,io(L[0]));for(const W of L){const re=o.ea.get(W),_e=yield fv(o,re);_e.snapshot&&d.push(_e.snapshot)}}else{const W=yield Ac(o.localStore,m);D=yield Va(o.localStore,W),yield _m(o,Kl(W),m,!1)}u.push(D)}return o.ta.Qo(d),u}),qu.apply(this,arguments)}function Kl(i){return ic(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Nc(i){const e=B(i);return B(B(e.localStore).persistence).Fs()}function kc(i,e,t,o){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,V.Z)(function*(i,e,t,o){const u=B(i);if(u.ha)return void dt("SyncEngine","Ignoring unexpected query state notification.");const d=u.na.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const m=yield Bl(u.localStore,ac(d[0])),D=iu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ea(u,m,D);break}case"rejected":yield la(u.localStore,e,!0),Oc(u,e,o);break;default:y()}}),Zu.apply(this,arguments)}function Pc(i,e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=(0,V.Z)(function*(i,e,t){const o=Qu(i);if(o.ha){for(const u of e){if(o.na.has(u)){dt("SyncEngine","Adding an already active target "+u);continue}const d=yield Ac(o.localStore,u),m=yield Va(o.localStore,d);yield _m(o,Kl(d),m.targetId,!1),Vh(o.remoteStore,m)}for(const u of t)o.na.has(u)&&(yield la(o.localStore,u,!1).then(()=>{jl(o.remoteStore,u),Oc(o,u)}).catch(Vl))}}),Yu.apply(this,arguments)}function Qu(i){const e=B(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dm.bind(null,e),e.ta.Qo=da.bind(null,e.eventManager),e.ta.fa=Ip.bind(null,e.eventManager),e}function Ju(i){const e=B(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K_.bind(null,e),e}class Rp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,V.Z)(function*(){t.M=wd(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return au(this.persistence,new xh,e.initialUser,this.M)}wa(e){return new rm(Jf.zi,this.M)}_a(e){return new np}terminate(){var e=this;return(0,V.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Op extends Rp{constructor(e,t,o){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,V.Z)(function*(){yield t().call(o,e),yield o.ya.initialize(o,e),yield Ju(o.ya.syncEngine),yield $l(o.ya.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ga(e){return au(this.persistence,new xh,e.initialUser,this.M)}ma(e){return new j_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new La(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,rp(),kh(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new np}}class Am extends Op{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,V.Z)(function*(){yield t().call(o,e);const u=o.ya.syncEngine;o.sharedClientState instanceof Ed&&(o.sharedClientState.syncEngine={Mr:js.bind(null,u),Or:kc.bind(null,u),Fr:Pc.bind(null,u),Fs:Nc.bind(null,u),kr:Ba.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var d=(0,V.Z)(function*(m){yield function Jh(i,e){return Eo.apply(this,arguments)}(o.ya.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):m||o.gcScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}_a(e){const t=rp();if(!Ed.vt(t))throw new X($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ed(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class ef{initialize(e,t){var o=this;return(0,V.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>lv(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=dv.bind(null,o.syncEngine),yield zh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Rc}createDatastore(e){const t=wd(e.databaseInfo.databaseId),o=new Qy(e.databaseInfo);return new sp(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>lv(this.syncEngine,D,0),m=om.vt()?new om:new Zy,new ev(t,o,u,d,m);var t,o,u,d,m}createSyncEngine(e,t){return function(o,u,d,m,D,L,W){const re=new ov(o,u,d,m,D,L);return W&&(re.ha=!0),re}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,V.Z)(function*(t){const o=B(t);dt("RemoteStore","RemoteStore shutting down."),o.fu.add(5),yield Sc(o),o._u.shutdown(),o.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Np(i,e=10240){let t=0;return{read:()=>(0,V.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,V.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Sd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Sm{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new je,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(o=>{o&&o.xu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,V.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,V.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,V.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const o=e.Ea.decode(t),u=Number(o);isNaN(u)&&e.Pa(`length string (${o}) is not valid number`);const d=yield e.ba(u);return new fm(JSON.parse(d),t.length+u)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,V.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,V.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const o=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,V.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Mm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,V.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new X($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,V.Z)(function*(d,m){const D=B(d),L=Nl(D.M)+"/documents",W={documents:m.map(it=>ku(D.M,it))},re=yield D.ho("BatchGetDocuments",L,W),_e=new Map;re.forEach(it=>{const ot=function dh(i,e){return"found"in e?function(t,o){b(!!o.found);const u=Pr(t,o.found.name),d=Qi(o.found.updateTime),m=new z({mapValue:{fields:o.found.fields}});return De.newFoundDocument(u,d,m)}(i,e):"missing"in e?function(t,o){b(!!o.missing),b(!!o.readTime);const u=Pr(t,o.missing),d=Qi(o.readTime);return De.newNoDocument(u,d)}(i,e):y()}(D.M,it);_e.set(ot.key.toString(),ot)});const He=[];return m.forEach(it=>{const ot=_e.get(it.toString());b(!!ot),He.push(ot)}),He}),function(d,m){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,V.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=wt.fromPath(u);e.mutations.push(new Cl(d,e.precondition(d)))}),yield(o=(0,V.Z)(function*(u,d){const m=B(u),D=Nl(m.M)+"/documents",L={writes:d.map(W=>su(m.M,W))};yield m.oo("Commit",D,L)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw y();t=Lt.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new X($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?wi.updateTime(t):wi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Lt.min()))throw new X($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wi.updateTime(t)}return wi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pv{constructor(e,t,o,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=u,this.Sa=5,this.Do=new Ph(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,V.Z)(function*(){const t=new Mm(e.datastore),o=e.Ca(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.xa(d)}))}).catch(u=>{e.xa(u)})}))}Ca(e){try{const t=this.updateFunction(e);return!Zi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!bl(t)}return!1}}class xm{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=ti.UNAUTHENTICATED,this.clientId=rc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,V.Z)(function*(D){dt("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(dt("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,V.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X($.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new je;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,V.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=Gl(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Rm(i,e){return tf.apply(this,arguments)}function tf(){return tf=(0,V.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),dt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,V.Z)(function*(d){o.isEqual(d)||(yield Kf(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),tf.apply(this,arguments)}function kp(i,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,V.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Fp(i);dt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>pp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>pp(e.remoteStore,d)),i.onlineComponents=e}),Pp.apply(this,arguments)}function Fp(i){return nf.apply(this,arguments)}function nf(){return nf=(0,V.Z)(function*(i){return i.offlineComponents||(dt("FirestoreClient","Using default OfflineComponentProvider"),yield Rm(i,new Rp)),i.offlineComponents}),nf.apply(this,arguments)}function rf(i){return sf.apply(this,arguments)}function sf(){return sf=(0,V.Z)(function*(i){return i.onlineComponents||(dt("FirestoreClient","Using default OnlineComponentProvider"),yield kp(i,new ef)),i.onlineComponents}),sf.apply(this,arguments)}function Om(i){return Fp(i).then(e=>e.persistence)}function Lp(i){return Fp(i).then(e=>e.localStore)}function gv(i){return rf(i).then(e=>e.remoteStore)}function Vp(i){return rf(i).then(e=>e.syncEngine)}function Xu(i){return Md.apply(this,arguments)}function Md(){return Md=(0,V.Z)(function*(i){const e=yield rf(i),t=e.eventManager;return t.onListen=av.bind(null,e.syncEngine),t.onUnlisten=uv.bind(null,e.syncEngine),t}),Md.apply(this,arguments)}function yv(i,e,t={}){const o=new je;return i.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function(u,d,m,D,L){const W=new Sd({next:_e=>{d.enqueueAndForget(()=>Ep(u,re));const He=_e.docs.has(m);!He&&_e.fromCache?L.reject(new X($.UNAVAILABLE,"Failed to get document because the client is offline.")):He&&_e.fromCache&&D&&"server"===D.source?L.reject(new X($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):L.resolve(_e)},error:_e=>L.reject(_e)}),re=new qh(No(m.path),W,{includeMetadataChanges:!0,Cu:!0});return vp(u,re)}(yield Xu(i),i.asyncQueue,e,t,o)})),o.promise}function Up(i,e,t={}){const o=new je;return i.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function(u,d,m,D,L){const W=new Sd({next:_e=>{d.enqueueAndForget(()=>Ep(u,re)),_e.fromCache&&"server"===D.source?L.reject(new X($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):L.resolve(_e)},error:_e=>L.reject(_e)}),re=new qh(m,W,{includeMetadataChanges:!0,Cu:!0});return vp(u,re)}(yield Xu(i),i.asyncQueue,e,t,o)})),o.promise}const Bp=new Map;function jp(i,e,t){if(!t)throw new X($.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function $p(i,e,t,o){if(!0===e&&!0===o)throw new X($.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function xd(i){if(!wt.isDocumentKey(i))throw new X($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Nm(i){if(wt.isDocumentKey(i))throw new X($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Rd(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":y()}function lr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new X($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rd(i);throw new X($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function km(i,e){if(e<=0)throw new X($.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Pm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new X($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new X($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,$p("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pm({}),this._settingsFrozen=!1,e instanceof _i?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new X($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _i(u.options.projectId)}(e))}get app(){if(!this._app)throw new X($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new X($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new On;switch(t.type){case"gapi":const o=t.client;return b(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new _s(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new X($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Bp.get(e);t&&(dt("ComponentProvider","Removing Datastore"),Bp.delete(e),t.terminate())}(this),Promise.resolve()}}class Kr{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kr(this.firestore,e,this._key)}}class $s{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new $s(this.firestore,e,this._query)}}class ha extends $s{constructor(e,t,o){super(e,t,No(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kr(this.firestore,null,new wt(e))}withConverter(e){return new ha(this.firestore,e,this._path)}}function Hp(i,e,...t){if(i=(0,ke.m9)(i),jp("collection","path",e),i instanceof Od){const o=Qn.fromString(e,...t);return Nm(o),new ha(i,null,o)}{if(!(i instanceof Kr||i instanceof ha))throw new X($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Qn.fromString(e,...t));return Nm(o),new ha(i.firestore,null,o)}}function Wp(i,e,...t){if(i=(0,ke.m9)(i),1===arguments.length&&(e=rc.R()),jp("doc","path",e),i instanceof Od){const o=Qn.fromString(e,...t);return xd(o),new Kr(i,null,new wt(o))}{if(!(i instanceof Kr||i instanceof ha))throw new X($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Qn.fromString(e,...t));return xd(o),new Kr(i.firestore,i instanceof ha?i.converter:null,new wt(o))}}function of(i,e){return i=(0,ke.m9)(i),e=(0,ke.m9)(e),(i instanceof Kr||i instanceof ha)&&(e instanceof Kr||e instanceof ha)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Fm(i,e){return i=(0,ke.m9)(i),e=(0,ke.m9)(e),i instanceof $s&&e instanceof $s&&i.firestore===e.firestore&&Au(i._query,e._query)&&i.converter===e.converter}class Q_{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Ph(this,"async_queue_retry"),this.qa=()=>{const t=kh();t&&dt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=kh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=kh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new je;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,V.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Lu(t))throw t;dt("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(o=>{throw this.$a=o,this.Ba=!1,rr("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(o)),o}).then(o=>(this.Ba=!1,o))));return this.ka=t,t}enqueueAfterDelay(e,t,o){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const u=mp.createAndSchedule(this,e,t,o,d=>this.ja(d));return this.Fa.push(u),u}Ka(){this.$a&&y()}verifyOperationInProgress(){}Wa(){var e=this;return(0,V.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function ql(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Lm{constructor(){this._progressObserver={},this._taskCompletionResolver=new je,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qr extends Od{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new Q_,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||af(this),this._firestoreClient.terminate()}}function Di(i){return i._firestoreClient||af(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function af(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Wo(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new xm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Nd(i,e,t){const o=new je;return i.asyncQueue.enqueue((0,V.Z)(function*(){try{yield Rm(i,t),yield kp(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(d=u).name?d.code===$.FAILED_PRECONDITION||d.code===$.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var d})).then(()=>o.promise)}function Yp(i){if(i._initialized||i._terminated)throw new X($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new X($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fa(Fn.fromBase64String(e))}catch(t){throw new X($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fa(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hu{constructor(e){this._methodName=e}}class kd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new X($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bn(this._lat,e._lat)||bn(this._long,e._long)}}const bv=/^__.*__$/;class jm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Ru(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class Qp{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Ru(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}class Lc{constructor(e,t,o,u,d,m){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===d&&this.Ya(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Lc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.nc(e),u}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.Ya(),u}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Fd(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(Jp(this.Xa)&&bv.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class $m{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||wd(e)}ac(e,t,o,u=!1){return new Lc({Xa:e,methodName:t,uc:o,path:Vi.emptyPath(),ec:!1,oc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function el(i){const e=i._freezeSettings(),t=wd(i._databaseId);return new $m(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Pd(i,e,t,o,u,d={}){const m=i.ac(d.merge||d.mergeFields?2:0,e,t,u);ig("Data must be an object, but it was:",m,o);const D=Ji(o,m);let L,W;if(d.merge)L=new ks(m.fieldMask),W=m.fieldTransforms;else if(d.mergeFields){const re=[];for(const _e of d.mergeFields){const He=sg(e,_e,t);if(!m.contains(He))throw new X($.INVALID_ARGUMENT,`Field '${He}' is specified in your field mask but missing from your input data.`);og(re,He)||re.push(He)}L=new ks(re),W=m.fieldTransforms.filter(_e=>L.covers(_e.field))}else L=null,W=m.fieldTransforms;return new jm(new z(D),L,W)}class Vc extends hu{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vc}}function Xp(i,e,t){return new Lc({Xa:3,uc:e.settings.uc,methodName:i._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class lf extends hu{_toFieldTransform(e){return new xu(e.path,new Ja)}isEqual(e){return e instanceof lf}}class Hm extends hu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=Xp(this,e,!0),o=this.cc.map(d=>Zl(d,t)),u=new Xa(o);return new xu(e.path,u)}isEqual(e){return this===e}}class Gm extends hu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=Xp(this,e,!0),o=this.cc.map(d=>Zl(d,t)),u=new Mu(o);return new xu(e.path,u)}isEqual(e){return this===e}}class e0 extends hu{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new _l(e.M,Rf(e.M,this.hc));return new xu(e.path,t)}isEqual(e){return this===e}}function eg(i,e,t,o){const u=i.ac(1,e,t);ig("Data must be an object, but it was:",u,o);const d=[],m=z.empty();Ka(o,(L,W)=>{const re=cf(e,L,t);W=(0,ke.m9)(W);const _e=u.sc(re);if(W instanceof Vc)d.push(re);else{const He=Zl(W,_e);null!=He&&(d.push(re),m.set(re,He))}});const D=new ks(d);return new Qp(m,D,u.fieldTransforms)}function tg(i,e,t,o,u,d){const m=i.ac(1,e,t),D=[sg(e,o,t)],L=[u];if(d.length%2!=0)throw new X($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let He=0;He<d.length;He+=2)D.push(sg(e,d[He])),L.push(d[He+1]);const W=[],re=z.empty();for(let He=D.length-1;He>=0;--He)if(!og(W,D[He])){const it=D[He];let ot=L[He];ot=(0,ke.m9)(ot);const Wt=m.sc(it);if(ot instanceof Vc)W.push(it);else{const xn=Zl(ot,Wt);null!=xn&&(W.push(it),re.set(it,xn))}}const _e=new ks(W);return new Qp(re,_e,m.fieldTransforms)}function ng(i,e,t,o=!1){return Zl(t,i.ac(o?4:3,e))}function Zl(i,e){if(rg(i=(0,ke.m9)(i)))return ig("Unsupported field value:",e,i),Ji(i,e);if(i instanceof hu)return function(t,o){if(!Jp(o.Xa))throw o.rc(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.rc(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const m of t){let D=Zl(m,o.ic(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,ke.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Rf(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=di.fromDate(t);return{timestampValue:xl(o.M,u)}}if(t instanceof di){const u=new di(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xl(o.M,u)}}if(t instanceof kd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fa)return{bytesValue:ko(o.M,t._byteString)};if(t instanceof Kr){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.rc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Rl(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.rc(`Unsupported field value: ${Rd(t)}`)}(i,e)}function Ji(i,e){const t={};return Yc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(i,(o,u)=>{const d=Zl(u,e.tc(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function rg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof di||i instanceof kd||i instanceof fa||i instanceof Kr||i instanceof hu)}function ig(i,e,t){if(!rg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Rd(t);throw e.rc("an object"===o?i+" a custom object":i+" "+o)}var o}function sg(i,e,t){if((e=(0,ke.m9)(e))instanceof du)return e._internalPath;if("string"==typeof e)return cf(i,e);throw Fd("Field path arguments must be of type string or ",i,!1,void 0,t)}const Wm=new RegExp("[~\\*/\\[\\]]");function cf(i,e,t){if(e.search(Wm)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new du(...e.split("."))._internalPath}catch(o){throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Fd(i,e,t,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let L="";return(d||m)&&(L+=" (found",d&&(L+=` in field ${o}`),m&&(L+=` in document ${u}`),L+=")"),new X($.INVALID_ARGUMENT,D+i+L)}function og(i,e){return i.some(t=>t.isEqual(e))}class ja{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Kr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Tv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(df("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Tv extends ja{data(){return super.data()}}function df(i,e){return"string"==typeof e?cf(i,e):e instanceof du?e._internalPath:e._delegate._internalPath}class tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fu extends ja{constructor(e,t,o,u,d,m){super(e,t,o,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(df("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Uc extends fu{data(e={}){return super.data(e)}}class Yl{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new tl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Uc(this._firestore,this._userDataWriter,o.key,o,new tl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>({type:"added",doc:new Uc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new tl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const D=new Uc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new tl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let L=-1,W=-1;return 0!==m.type&&(L=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),W=d.indexOf(m.doc.key)),{type:zm(m.type),doc:D,oldIndex:L,newIndex:W}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function zm(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}function hf(i,e){return i instanceof fu&&e instanceof fu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Yl&&e instanceof Yl&&i._firestore===e._firestore&&Fm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function pa(i){if(bu(i)&&0===i.explicitOrderBy.length)throw new X($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ld{}function nl(i,...e){for(const t of e)i=t._apply(i);return i}class $a extends Ld{constructor(e,t,o){super(),this.lc=e,this.fc=t,this.dc=o,this.type="where"}_apply(e){const t=el(e.firestore),o=function(u,d,m,D,L,W,re){let _e;if(L.isKeyField()){if("array-contains"===W||"array-contains-any"===W)throw new X($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${W}' queries on documentId().`);if("in"===W||"not-in"===W){cg(re,W);const it=[];for(const ot of re)it.push(lg(D,u,ot));_e={arrayValue:{values:it}}}else _e=lg(D,u,re)}else"in"!==W&&"not-in"!==W&&"array-contains-any"!==W||cg(re,W),_e=ng(m,"where",re,"in"===W||"not-in"===W);const He=fi.create(L,W,_e);return function(it,ot){if(ot.S()){const xn=Tu(it);if(null!==xn&&!xn.isEqual(ot.field))throw new X($.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xn.toString()}' and '${ot.field.toString()}'`);const Zr=Qd(it);null!==Zr&&Vd(0,ot.field,Zr)}const Wt=function(xn,Zr){for(const ii of xn.filters)if(Zr.indexOf(ii.op)>=0)return ii.op;return null}(it,function(xn){switch(xn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ot.op));if(null!==Wt)throw new X($.INVALID_ARGUMENT,Wt===ot.op?`Invalid query. You cannot use more than one '${ot.op.toString()}' filter.`:`Invalid query. You cannot use '${ot.op.toString()}' filters with '${Wt.toString()}' filters.`)}(u,He),He}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new $s(e.firestore,e.converter,function(u,d){const m=u.filters.concat([d]);return new mo(u.path,u.collectionGroup,u.explicitOrderBy.slice(),m,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class ma extends Ld{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new X($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new X($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new ml(u,d);return function(D,L){if(null===Qd(D)){const W=Tu(D);null!==W&&Vd(0,W,L.field)}}(o,m),m}(e._query,this.lc,this._c);return new $s(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new mo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ag extends Ld{constructor(e,t,o){super(),this.type=e,this.wc=t,this.mc=o}_apply(e){return new $s(e.firestore,e.converter,oc(e._query,this.wc,this.mc))}}class qm extends Ld{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Ym(e,this.type,this.gc,this.yc);return new $s(e.firestore,e.converter,(u=t,new mo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class Bc extends Ld{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Ym(e,this.type,this.gc,this.yc);return new $s(e.firestore,e.converter,(u=t,new mo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function Ym(i,e,t,o){if(t[0]=(0,ke.m9)(t[0]),t[0]instanceof ja)return function(u,d,m,D,L){if(!D)throw new X($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const W=[];for(const re of Qa(u))if(re.field.isKeyField())W.push(Ro(d,D.key));else{const _e=D.data.field(re.field);if(Ui(_e))throw new X($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+re.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_e){const He=re.field.canonicalString();throw new X($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${He}' (used as the orderBy) does not exist.`)}W.push(_e)}return new Oo(W,L)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=el(i.firestore);return function(d,m,D,L,W,re){const _e=d.explicitOrderBy;if(W.length>_e.length)throw new X($.INVALID_ARGUMENT,`Too many arguments provided to ${L}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const He=[];for(let it=0;it<W.length;it++){const ot=W[it];if(_e[it].field.isKeyField()){if("string"!=typeof ot)throw new X($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${L}(), but got a ${typeof ot}`);if(!yl(d)&&-1!==ot.indexOf("/"))throw new X($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${L}() must be a plain document ID, but '${ot}' contains a slash.`);const Wt=d.path.child(Qn.fromString(ot));if(!wt.isDocumentKey(Wt))throw new X($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${L}() must result in a valid document path, but '${Wt}' is not because it contains an odd number of segments.`);const xn=new wt(Wt);He.push(Ro(m,xn))}else{const Wt=ng(D,L,ot);He.push(Wt)}}return new Oo(He,re)}(i._query,i.firestore._databaseId,u,e,t,o)}}function lg(i,e,t){if("string"==typeof(t=(0,ke.m9)(t))){if(""===t)throw new X($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yl(e)&&-1!==t.indexOf("/"))throw new X($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Qn.fromString(t));if(!wt.isDocumentKey(o))throw new X($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ro(i,new wt(o))}if(t instanceof Kr)return Ro(i,t._key);throw new X($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(t)}.`)}function cg(i,e){if(!Array.isArray(i)||0===i.length)throw new X($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new X($.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Vd(i,e,t){if(!t.isEqual(e))throw new X($.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dg{convertValue(e,t="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ni(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw y()}}convertObject(e,t){const o={};return Ka(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new kd(ni(e.latitude),ni(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Is(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const t=ws(e);return new di(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Qn.fromString(e);b(pn(o));const u=new _i(o.get(1),o.get(3)),d=new wt(o.popFirst(5));return u.isEqual(t)||rr(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Ud(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Qm extends dg{constructor(e){super(),this.firestore=e}convertBytes(e){return new fa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kr(this.firestore,null,t)}}class ff{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=el(e)}set(e,t,o){this._verifyNotCommitted();const u=ya(e,this._firestore),d=Ud(u.converter,t,o),m=Pd(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,wi.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=ya(e,this._firestore);let m;return m="string"==typeof(t=(0,ke.m9)(t))||t instanceof du?tg(this._dataReader,"WriteBatch.update",d._key,t,o,u):eg(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,wi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ya(e,this._firestore);return this._mutations=this._mutations.concat(new Dl(t._key,wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ya(i,e){if((i=(0,ke.m9)(i)).firestore!==e)throw new X($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class rl extends dg{constructor(e){super(),this.firestore=e}convertBytes(e){return new fa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kr(this.firestore,null,t)}}function hg(i,e,t){i=lr(i,Kr);const o=lr(i.firestore,qr),u=Ud(i.converter,e,t);return jc(o,[Pd(el(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,wi.none())])}function iy(i,e,t,...o){i=lr(i,Kr);const u=lr(i.firestore,qr),d=el(u);let m;return m="string"==typeof(e=(0,ke.m9)(e))||e instanceof du?tg(d,"updateDoc",i._key,e,t,o):eg(d,"updateDoc",i._key,e),jc(u,[m.toMutation(i._key,wi.exists(!0))])}function sy(i,...e){var t,o,u;i=(0,ke.m9)(i);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||ql(e[m])||(d=e[m],m++);const D={includeMetadataChanges:d.includeMetadataChanges};if(ql(e[m])){const _e=e[m];e[m]=null===(t=_e.next)||void 0===t?void 0:t.bind(_e),e[m+1]=null===(o=_e.error)||void 0===o?void 0:o.bind(_e),e[m+2]=null===(u=_e.complete)||void 0===u?void 0:u.bind(_e)}let L,W,re;if(i instanceof Kr)W=lr(i.firestore,qr),re=No(i._key.path),L={next:_e=>{e[m]&&e[m](fg(W,i,_e))},error:e[m+1],complete:e[m+2]};else{const _e=lr(i,$s);W=lr(_e.firestore,qr),re=_e._query;const He=new rl(W);L={next:it=>{e[m]&&e[m](new Yl(W,He,_e,it))},error:e[m+1],complete:e[m+2]},pa(i._query)}return function(_e,He,it,ot){const Wt=new Sd(ot),xn=new qh(He,Wt,it);return _e.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return vp(yield Xu(_e),xn)})),()=>{Wt.Ia(),_e.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return Ep(yield Xu(_e),xn)}))}}(Di(W),re,D,L)}function jc(i,e){return function(t,o){const u=new je;return t.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function Em(i,e,t){return wm.apply(this,arguments)}(yield Vp(t),o,u)})),u.promise}(Di(i),e)}function fg(i,e,t){const o=t.docs.get(e._key),u=new rl(i);return new fu(i,u,e._key,o,new tl(t.hasPendingWrites,t.fromCache),e.converter)}class kv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=el(e)}get(e){const t=ya(e,this._firestore),o=new Qm(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return y();const d=u[0];if(d.isFoundDocument())return new ja(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new ja(this._firestore,o,t._key,null,t.converter);throw y()})}set(e,t,o){const u=ya(e,this._firestore),d=Ud(u.converter,t,o),m=Pd(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,m),this}update(e,t,o,...u){const d=ya(e,this._firestore);let m;return m="string"==typeof(t=(0,ke.m9)(t))||t instanceof du?tg(this._dataReader,"Transaction.update",d._key,t,o,u):eg(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=ya(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ya(e,this._firestore),o=new rl(this._firestore);return super.get(e).then(u=>new fu(this._firestore,o,t._key,u._document,new tl(!1,!1),t.converter))}}function pf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new X("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function pg(){if("undefined"==typeof Uint8Array)throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function gg(){if(!function zd(){return"undefined"!=typeof atob}())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){co=Q.SDK_VERSION,(0,Q._registerComponent)(new de.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),d=new qr(u,new ir(t.getProvider("auth-internal")),new Go(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC")),(0,Q.registerVersion)(Wa,"3.4.8",i),(0,Q.registerVersion)(Wa,"3.4.8","esm2017")}();class $c{constructor(e){this._delegate=e}static fromBase64String(e){return gg(),new $c(fa.fromBase64String(e))}static fromUint8Array(e){return pg(),new $c(fa.fromUint8Array(e))}toBase64(){return gg(),this._delegate.toBase64()}toUint8Array(){return pg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gf(i){return function uy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class ly{enableIndexedDbPersistence(e,t){return function X_(i,e){Yp(i=lr(i,qr));const t=Di(i),o=i._freezeSettings(),u=new ef;return Nd(t,u,new Op(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Iv(i){Yp(i=lr(i,qr));const e=Di(i),t=i._freezeSettings(),o=new ef;return Nd(e,o,new Am(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uf(i){if(i._initialized&&!i._terminated)throw new X($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new je;return i._queue.enqueueAndForgetEvenWhileRestricted((0,V.Z)(function*(){try{yield(t=(0,V.Z)(function*(o){if(!aa.vt())return Promise.resolve();const u=o+"main";yield aa.delete(u)}),function(o){return t.apply(this,arguments)})(Sh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class mg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof _i||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&I("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function wv(i,e,t,o={}){var u;const d=(i=lr(i,Od))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&I("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let m,D;if("string"==typeof o.mockUserToken)m=o.mockUserToken,D=ti.MOCK_USER;else{m=(0,ke.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const L=o.mockUserToken.sub||o.mockUserToken.user_id;if(!L)throw new X($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new ti(L)}i._authCredentials=new Kt(new It(m,D))}}(this._delegate,e,t,o)}enableNetwork(){return function Um(i){return function mv(i){return i.asyncQueue.enqueue((0,V.Z)(function*(){const e=yield Om(i),t=yield gv(i);return e.setNetworkEnabled(!0),function(o){const u=B(o);return u.fu.delete(0),Fh(u)}(t)}))}(Di(i=lr(i,qr)))}(this._delegate)}disableNetwork(){return function qp(i){return function q_(i){return i.asyncQueue.enqueue((0,V.Z)(function*(){const e=yield Om(i),t=yield gv(i);return e.setNetworkEnabled(!1),(o=(0,V.Z)(function*(u){const d=B(u);d.fu.add(0),yield Sc(d),d.wu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Di(i=lr(i,qr)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,$p("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Vm(i){return function(e){const t=new je;return e.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function Tp(i,e){return Ap.apply(this,arguments)}(yield Vp(e),t)})),t.promise}(Di(i=lr(i,qr)))}(this._delegate)}onSnapshotsInSync(e){return function Nv(i,e){return function Y_(i,e){const t=new Sd(e);return i.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return o=yield Xu(i),u=t,B(o).Eu.add(u),void u.next();var o,u})),()=>{t.Ia(),i.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return o=yield Xu(i),u=t,void B(o).Eu.delete(u);var o,u}))}}(Di(i=lr(i,qr)),ql(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wc(this,Hp(this._delegate,e))}catch(t){throw wo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ds(this,Wp(this._delegate,e))}catch(t){throw wo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Io(this,function Gp(i,e){if(i=lr(i,Od),jp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $s(i,null,(t=e,new mo(Qn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw wo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Pv(i,e){return function _v(i,e){const t=new je;return i.asyncQueue.enqueueAndForget((0,V.Z)(function*(){const o=yield(u=i,rf(u).then(d=>d.datastore));var u;new pv(i.asyncQueue,o,e,t).run()})),t.promise}(Di(i=lr(i,qr)),t=>e(new kv(i,t)))}(this._delegate,t=>e(new il(this,t)))}batch(){return Di(this._delegate),new dy(new ff(this._delegate,e=>jc(this._delegate,e)))}loadBundle(e){return function Bm(i,e){const t=Di(i=lr(i,qr)),o=new Lm;return function Fc(i,e,t,o){const u=function(d,m){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,L=function(L,W){if(L instanceof Uint8Array)return Np(L,W);if(L instanceof ArrayBuffer)return Np(new Uint8Array(L),W);if(L instanceof ReadableStream)return L.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Sm(L,m);var L}(t,wd(e));i.asyncQueue.enqueueAndForget((0,V.Z)(function*(){!function Tm(i,e,t){const o=B(i);var u;(u=(0,V.Z)(function*(d,m,D){try{const L=yield m.getMetadata();if(yield function(He,it){const ot=B(He),Wt=Qi(it.createTime);return ot.persistence.runTransaction("hasNewerBundle","readonly",xn=>ot._s.getBundleMetadata(xn,it.id)).then(xn=>!!xn&&xn.createTime.compareTo(Wt)>=0)}(d.localStore,L))return yield m.close(),D._completeWith({taskState:"Success",documentsLoaded:(He=L).totalDocuments,bytesLoaded:He.totalBytes,totalDocuments:He.totalDocuments,totalBytes:He.totalBytes}),Promise.resolve(new Set);D._updateProgress(pm(L));const W=new sv(L,d.localStore,m.M);let re=yield m.da();for(;re;){const He=yield W.ku(re);He&&D._updateProgress(He),re=yield m.da()}const _e=yield W.complete();return yield ea(d,_e.Fu,void 0),yield function(He,it){const ot=B(He);return ot.persistence.runTransaction("Save bundle","readwrite",Wt=>ot._s.saveBundleMetadata(Wt,it))}(d.localStore,L),D._completeWith(_e.progress),Promise.resolve(_e.Ou)}catch(L){return I("SyncEngine",`Loading bundle failed with ${L}`),D._failWith(L),Promise.resolve(new Set)}var He}),function(d,m,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Vp(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Zp(i,e){return function Ev(i,e){return i.asyncQueue.enqueue((0,V.Z)(function*(){return function(t,o){const u=B(t);return u.persistence.runTransaction("Get named query","readonly",d=>u._s.getNamedQuery(d,o))}(yield Lp(i),e)}))}(Di(i=lr(i,qr)),e).then(t=>t?new $s(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Io(this,t):null)}}class Bd extends dg{constructor(e){super(),this.firestore=e}convertBytes(e){return new $c(new fa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ds.forKey(t,this.firestore,null)}}class il{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}get(e){const t=Jl(e);return this._delegate.get(t).then(o=>new Hc(this._firestore,new fu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Jl(e);return o?(pf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Jl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Jl(e);return this._delegate.delete(t),this}}class dy{constructor(e){this._delegate=e}set(e,t,o){const u=Jl(e);return o?(pf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Jl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Jl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ql{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Uc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gc(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Ql.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Ql(e,new Bd(e),t),u.set(t,d)),d}}Ql.INSTANCES=new WeakMap;class Ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ds(t,new Kr(t._delegate,o,new wt(e)))}static forKey(e,t,o){return new Ds(t,new Kr(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Wc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wc(this.firestore,Hp(this._delegate,e))}catch(t){throw wo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ke.m9)(e))instanceof Kr&&of(this._delegate,e)}set(e,t){t=pf("DocumentReference.set",t);try{return t?hg(this._delegate,e,t):hg(this._delegate,e)}catch(o){throw wo(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?iy(this._delegate,e):iy(this._delegate,e,t,...o)}catch(u){throw wo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Rv(i){return jc(lr(i.firestore,qr),[new Dl(i._key,wi.none())])}(this._delegate)}onSnapshot(...e){const t=mf(e),o=$v(e,u=>new Hc(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return sy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Xm(i){i=lr(i,Kr);const e=lr(i.firestore,qr),t=Di(e),o=new rl(e);return function Z_(i,e){const t=new je;return i.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return(o=(0,V.Z)(function*(u,d,m){try{const D=yield function(L,W){const re=B(L);return re.persistence.runTransaction("read document","readonly",_e=>re.ci.Ls(_e,W))}(u,d);D.isFoundDocument()?m.resolve(D):D.isNoDocument()?m.resolve(null):m.reject(new X($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const L=Gl(D,`Failed to get document '${d} from cache`);m.reject(L)}}),function(u,d,m){return o.apply(this,arguments)})(yield Lp(i),e,t);var o})),t.promise}(t,i._key).then(u=>new fu(e,o,i._key,u,new tl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ey(i){i=lr(i,Kr);const e=lr(i.firestore,qr);return yv(Di(e),i._key,{source:"server"}).then(t=>fg(e,i,t))}(this._delegate):function Jm(i){i=lr(i,Kr);const e=lr(i.firestore,qr);return yv(Di(e),i._key).then(t=>fg(e,i,t))}(this._delegate),t.then(o=>new Hc(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Ds(this.firestore,this._delegate.withConverter(e?Ql.getInstance(this.firestore,e):null))}}function wo(i,e,t){return i.message=i.message.replace(e,t),i}function mf(i){for(const e of i)if("object"==typeof e&&!gf(e))return e;return{}}function $v(i,e){var t,o;let u;return u=gf(i[0])?i[0]:gf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Hc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ds(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return hf(this._delegate,e._delegate)}}class Gc extends Hc{data(e){const t=this._delegate.data(e);return function N(i,e){i||y()}(void 0!==t),t}}class Io{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}where(e,t,o){try{return new Io(this.firestore,nl(this._delegate,function ga(i,e,t){const o=e,u=df("where",i);return new $a(u,o,t)}(e,t,o)))}catch(u){throw wo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Io(this.firestore,nl(this._delegate,function Km(i,e="asc"){const t=e,o=df("orderBy",i);return new ma(o,t)}(e,t)))}catch(o){throw wo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Io(this.firestore,nl(this._delegate,function Av(i){return km("limit",i),new ag("limit",i,"F")}(e)))}catch(t){throw wo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Io(this.firestore,nl(this._delegate,function Sv(i){return km("limitToLast",i),new ag("limitToLast",i,"L")}(e)))}catch(t){throw wo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Io(this.firestore,nl(this._delegate,function Mv(...i){return new qm("startAt",i,!0)}(...e)))}catch(t){throw wo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Io(this.firestore,nl(this._delegate,function ug(...i){return new qm("startAfter",i,!1)}(...e)))}catch(t){throw wo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Io(this.firestore,nl(this._delegate,function xv(...i){return new Bc("endBefore",i,!1)}(...e)))}catch(t){throw wo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Io(this.firestore,nl(this._delegate,function Zm(...i){return new Bc("endAt",i,!0)}(...e)))}catch(t){throw wo(t,"endAt()","Query.endAt()")}}isEqual(e){return Fm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ny(i){i=lr(i,$s);const e=lr(i.firestore,qr),t=Di(e),o=new rl(e);return function vv(i,e){const t=new je;return i.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return(o=(0,V.Z)(function*(u,d,m){try{const D=yield uu(u,d,!0),L=new Cp(d,D.li),W=L.Gu(D.documents),re=L.applyChanges(W,!1);m.resolve(re.snapshot)}catch(D){const L=Gl(D,`Failed to execute query '${d} against cache`);m.reject(L)}}),function(u,d,m){return o.apply(this,arguments)})(yield Lp(i),e,t);var o})),t.promise}(t,i._query).then(u=>new Yl(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function ry(i){i=lr(i,$s);const e=lr(i.firestore,qr),t=Di(e),o=new rl(e);return Up(t,i._query,{source:"server"}).then(u=>new Yl(e,o,i,u))}(this._delegate):function ty(i){i=lr(i,$s);const e=lr(i.firestore,qr),t=Di(e),o=new rl(e);return pa(i._query),Up(t,i._query).then(u=>new Yl(e,o,i,u))}(this._delegate),t.then(o=>new yg(this.firestore,new Yl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=mf(e),o=$v(e,u=>new yg(this.firestore,new Yl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return sy(this._delegate,t,o)}withConverter(e){return new Io(this.firestore,this._delegate.withConverter(e?Ql.getInstance(this.firestore,e):null))}}class _n{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Io(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _n(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Gc(this._firestore,o))})}isEqual(e){return hf(this._delegate,e._delegate)}}class Wc extends Io{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ds(this.firestore,e):null}doc(e){try{return new Ds(this.firestore,void 0===e?Wp(this._delegate):Wp(this._delegate,e))}catch(t){throw wo(t,"doc()","CollectionReference.doc()")}}add(e){return function Ov(i,e){const t=lr(i.firestore,qr),o=Wp(i),u=Ud(i.converter,e);return jc(t,[Pd(el(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,wi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Ds(this.firestore,t))}isEqual(e){return of(this._delegate,e._delegate)}withConverter(e){return new Wc(this.firestore,this._delegate.withConverter(e?Ql.getInstance(this.firestore,e):null))}}function Jl(i){return lr(i,Kr)}class zc{constructor(...e){this._delegate=new du(...e)}static documentId(){return new zc(Vi.keyField().canonicalString())}isEqual(e){return(e=(0,ke.m9)(e))instanceof du&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Lv(){return new lf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xl(e)}static delete(){const e=function Fv(){return new Vc("deleteField")}();return e._methodName="FieldValue.delete",new Xl(e)}static arrayUnion(...e){const t=function Vv(...i){return new Hm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Xl(t)}static arrayRemove(...e){const t=function Uv(...i){return new Gm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Xl(t)}static increment(e){const t=function Bv(i){return new e0("increment",i)}(e);return t._methodName="FieldValue.increment",new Xl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const yf={Firestore:mg,GeoPoint:kd,Timestamp:di,Blob:$c,Transaction:il,WriteBatch:dy,DocumentReference:Ds,DocumentSnapshot:Hc,Query:Io,QueryDocumentSnapshot:Gc,QuerySnapshot:yg,CollectionReference:Wc,FieldPath:zc,FieldValue:Xl,setLogLevel:function cy(i){!function Ns(i){rs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Ri(i){(function vf(i,e){i.INTERNAL.registerComponent(new de.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},yf)))})(i,(e,t)=>new mg(e,t,new ly)),i.registerVersion("@firebase/firestore-compat","0.1.17")}(j.Z);var ec=U(1205),hy=U(440),Hv=U(127);function vg(i,e){return function Gv(i,e=K.z){return new Y.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function _f(i,e){return vg(i,e).pipe((0,Ke.U)(t=>({payload:t,type:"query"})))}function jd(i,e){return _f(i,e).pipe((0,lt.O)(void 0),Se(),(0,Ke.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((m,D)=>{const L=u.find(re=>re.doc.ref.isEqual(m.ref)),W=null==t?void 0:t.payload.docs.find(re=>re.ref.isEqual(m.ref));L&&JSON.stringify(L.doc.metadata)===JSON.stringify(m.metadata)||!L&&W&&JSON.stringify(W.metadata)===JSON.stringify(m.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:m}})}),d}))}function py(i,e,t){return jd(i,t).pipe((0,Xe.R)((o,u)=>function Wv(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function $d(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return _g(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _g(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _g(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function se(i,e=oe.y){return i=null!=i?i:Ce,(0,Ae.e)((t,o)=>{let u,d=!0;t.subscribe((0,Me.x)(o,m=>{const D=e(m);(d||!i(u,D))&&(d=!1,u=D,o.next(m))}))})}(),(0,Ke.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function _g(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function gy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class my{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=jd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ke.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,lt.O)(void 0),Se(),(0,at.h)(([o,u])=>u.length>0||!o),(0,Ke.U)(([o,u])=>u),Ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Xe.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=gy(e);return py(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(e={}){return _f(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Ie.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(Ie.iC)}add(e){return this.ref.add(e)}doc(e){return new yy(this.ref.doc(e),this.afs)}}class yy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=Kc(o,t);return new my(u,d,this.afs)}snapshotChanges(){return function fy(i,e){return vg(i,e).pipe((0,lt.O)(void 0),Se(),(0,Ke.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ke.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ve.D)(this.ref.get(e)).pipe(Ie.iC)}}class Ef{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jd(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,at.h)(t=>t.length>0),Ie.iC):jd(this.query,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Xe.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=gy(e);return py(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(e={}){return _f(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Ie.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(Ie.iC)}}const Eg=new p.OlP("angularfire2.enableFirestorePersistence"),wg=new p.OlP("angularfire2.firestore.persistenceSettings"),vy=new p.OlP("angularfire2.firestore.settings"),zv=new p.OlP("angularfire2.firestore.use-emulator");function Kc(i,e=(t=>t)){return{query:e(i),ref:i}}let qc=(()=>{class i{constructor(t,o,u,d,m,D,L,W,re,_e,He,it,ot,Wt,xn,Zr,ii){this.schedulers=L;const Fr=(0,Ue.on)(t,D,o),Xi=re;_e&&(0,ec.nw)(Fr,D,He,ot,Wt,xn,it,Zr),[this.firestore,this.persistenceEnabled$]=(0,Ue.cc)(`${Fr.name}.firestore`,"AngularFirestore",Fr.name,()=>{const si=D.runOutsideAngular(()=>Fr.firestore());if(d&&si.settings(d),Xi&&si.useEmulator(...Xi),u&&!(0,Fe.PM)(m)){const Ci=()=>{try{return(0,ve.D)(si.enablePersistence(W||void 0).then(()=>!0,()=>!1))}catch(Hs){return"undefined"!=typeof console&&console.warn(Hs),(0,fe.of)(!1)}};return[si,D.runOutsideAngular(Ci)]}return[si,(0,fe.of)(!1)]},[d,Xi,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:m}=Kc(u,o),D=this.schedulers.ngZone.run(()=>d);return new my(D,m,this)}collectionGroup(t,o){const u=o||(m=>m),d=this.firestore.collectionGroup(t);return new Ef(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new yy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Ue.Dh),p.LFG(Ue.xv,8),p.LFG(Eg,8),p.LFG(vy,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ie.HU),p.LFG(wg,8),p.LFG(zv,8),p.LFG(ec.zQ,8),p.LFG(ec.Qv,8),p.LFG(ec.L6,8),p.LFG(ec._Q,8),p.LFG(ec.rT,8),p.LFG(ec.lh,8),p.LFG(ec.f7,8),p.LFG(hy.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Kv=(()=>{class i{constructor(){Hv.Z.registerVersion("angularfire",Ie.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:Eg,useValue:!0},{provide:wg,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[qc]}),i})()},2011:(bt,$e,U)=>{U.d($e,{Dh:()=>Me,GT:()=>Ie,cc:()=>Ke,hO:()=>lt,on:()=>oe,pX:()=>fe,xv:()=>Se});var p=U(5e3),K=U(127),Y=U(5813);bt=U.hmd(bt);const ve=["ngOnDestroy"],fe=(Fe,pt,j,V={})=>new Proxy(Fe,{get:(Q,de)=>j.runOutsideAngular(()=>{var Re;if(Fe[de])return(null===(Re=null==V?void 0:V.spy)||void 0===Re?void 0:Re.get)&&V.spy.get(de,Fe[de]),Fe[de];if(ve.indexOf(de)>-1)return()=>{};const ke=pt.toPromise().then(Te=>{const he=Te&&Te[de];return"function"==typeof he?he.bind(Te):he&&he.then?he.then(Z=>j.run(()=>Z)):j.run(()=>he)});return new Proxy(()=>{},{get:(Te,he)=>ke[he],apply:(Te,he,Z)=>ke.then(ye=>{var ae;const Ge=ye&&ye(...Z);return(null===(ae=null==V?void 0:V.spy)||void 0===ae?void 0:ae.apply)&&V.spy.apply(de,Z,Ge),Ge})})})}),Ie=(Fe,pt)=>{pt.forEach(j=>{Object.getOwnPropertyNames(j.prototype||j).forEach(V=>{Object.defineProperty(Fe.prototype,V,Object.getOwnPropertyDescriptor(j.prototype||j,V))})})};class Ae{constructor(pt){return pt}}const Me=new p.OlP("angularfire2.app.options"),Se=new p.OlP("angularfire2.app.name");function oe(Fe,pt,j){const Q="object"==typeof j&&j||{};Q.name=Q.name||"string"==typeof j&&j||"[DEFAULT]";const Re=K.Z.apps.filter(ke=>ke&&ke.name===Q.name)[0]||pt.runOutsideAngular(()=>K.Z.initializeApp(Fe,Q));try{JSON.stringify(Fe)!==JSON.stringify(Re.options)&&se("error",`${Re.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ke){}return new Ae(Re)}const se=(Fe,...pt)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Fe](...pt)},Ce={provide:Ae,useFactory:oe,deps:[Me,p.R0b,[new p.FiY,Se]]};let lt=(()=>{class Fe{constructor(j){K.Z.registerVersion("angularfire",Y.q4.full,"core"),K.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),K.Z.registerVersion("angular",p.q4F.full,j.toString())}static initializeApp(j,V){return{ngModule:Fe,providers:[{provide:Me,useValue:j},{provide:Se,useValue:V}]}}}return Fe.\u0275fac=function(j){return new(j||Fe)(p.LFG(p.Lbi))},Fe.\u0275mod=p.oAB({type:Fe}),Fe.\u0275inj=p.cJS({providers:[Ce]}),Fe})();function Ke(Fe,pt,j,V,Q){const[,de,Re]=globalThis.\u0275AngularfireInstanceCache.find(ke=>ke[0]===Fe)||[];if(de)return function Xe(Fe,pt){try{return Fe.toString()===pt.toString()}catch(j){return Fe===pt}}(Q,Re)||(Ue("error",`${pt} was already initialized on the ${j} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),Ue("warn",{is:Q,was:Re})),de;{const ke=V();return globalThis.\u0275AngularfireInstanceCache.push([Fe,ke,Q]),ke}}const at=!!bt.hot,Ue=(Fe,...pt)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Fe](...pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(bt,$e,U)=>{U.d($e,{q4:()=>Ma,iC:()=>sa,HU:()=>Ro,vb:()=>Mo,JM:()=>po});var p=U(5e3),K=U(5867),Y=U(5861),ve=U(9681),fe=U(2090),Ie=U(4859),Ae=U(1877);const Me="@firebase/installations",se="w:0.5.8",Ce="FIS_v2",Fe=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pt(T){return T instanceof fe.ZR&&T.code.includes("request-failed")}function j({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function V(T){return{token:T.token,requestStatus:2,expiresIn:Z(T.expiresIn),creationTime:Date.now()}}function Q(T,R){return de.apply(this,arguments)}function de(){return(de=(0,Y.Z)(function*(T,R){const ie=(yield R.json()).error;return Fe.create("request-failed",{requestName:T,serverCode:ie.code,serverMessage:ie.message,serverStatus:ie.status})})).apply(this,arguments)}function Re({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function ke(T,{refreshToken:R}){const z=Re(T);return z.append("Authorization",function ye(T){return`${Ce} ${T}`}(R)),z}function Te(T){return he.apply(this,arguments)}function he(){return(he=(0,Y.Z)(function*(T){const R=yield T();return R.status>=500&&R.status<600?T():R})).apply(this,arguments)}function Z(T){return Number(T.replace("s","000"))}function ae(T,R){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,Y.Z)(function*({appConfig:T,heartbeatServiceProvider:R},{fid:z}){const ie=j(T),De=Re(T),Be=R.getImmediate({optional:!0});if(Be){const fn=yield Be.getHeartbeatsHeader();fn&&De.append("x-firebase-client",fn)}const Ot={method:"POST",headers:De,body:JSON.stringify({fid:z,authVersion:Ce,appId:T.appId,sdkVersion:se})},qt=yield Te(()=>fetch(ie,Ot));if(qt.ok){const fn=yield qt.json();return{fid:fn.fid||z,registrationStatus:2,refreshToken:fn.refreshToken,authToken:V(fn.authToken)}}throw yield Q("Create Installation",qt)})).apply(this,arguments)}function Ne(T){return new Promise(R=>{setTimeout(R,T)})}const mt=/^[cdef][\w-]{21}$/;function ht(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const z=function rt(T){return function Nt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return mt.test(z)?z:""}catch(T){return""}}function Ht(T){return`${T.appName}!${T.appId}`}const Dt=new Map;function St(T,R){const z=Ht(T);Qt(z,R),function sn(T,R){const z=function wn(){return!Dn&&"BroadcastChannel"in self&&(Dn=new BroadcastChannel("[Firebase] FID Change"),Dn.onmessage=T=>{Qt(T.data.key,T.data.fid)}),Dn}();z&&z.postMessage({key:T,fid:R}),function Xn(){0===Dt.size&&Dn&&(Dn.close(),Dn=null)}()}(z,R)}function Qt(T,R){const z=Dt.get(T);if(z)for(const ie of z)ie(R)}let Dn=null;const Gn="firebase-installations-store";let fr=null;function jn(){return fr||(fr=(0,fe.X3)("firebase-installations-database",1,(T,R)=>{0===R&&T.createObjectStore(Gn)})),fr}function kt(T,R){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,Y.Z)(function*(T,R){const z=Ht(T),De=(yield jn()).transaction(Gn,"readwrite"),Be=De.objectStore(Gn),ft=yield Be.get(z);return yield Be.put(R,z),yield De.complete,(!ft||ft.fid!==R.fid)&&St(T,R.fid),R})).apply(this,arguments)}function Cn(T){return on.apply(this,arguments)}function on(){return(on=(0,Y.Z)(function*(T){const R=Ht(T),ie=(yield jn()).transaction(Gn,"readwrite");yield ie.objectStore(Gn).delete(R),yield ie.complete})).apply(this,arguments)}function pr(T,R){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,Y.Z)(function*(T,R){const z=Ht(T),De=(yield jn()).transaction(Gn,"readwrite"),Be=De.objectStore(Gn),ft=yield Be.get(z),Ot=R(ft);return void 0===Ot?yield Be.delete(z):yield Be.put(Ot,z),yield De.complete,Ot&&(!ft||ft.fid!==Ot.fid)&&St(T,Ot.fid),Ot})).apply(this,arguments)}function Jn(T){return gr.apply(this,arguments)}function gr(){return(gr=(0,Y.Z)(function*(T){let R;const z=yield pr(T.appConfig,ie=>{const De=Hr(ie),Be=Dr(T,De);return R=Be.registrationPromise,Be.installationEntry});return""===z.fid?{installationEntry:yield R}:{installationEntry:z,registrationPromise:R}})).apply(this,arguments)}function Hr(T){return An(T||{fid:ht(),registrationStatus:0})}function Dr(T,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(Fe.create("app-offline"))};const z={fid:R.fid,registrationStatus:1,registrationTime:Date.now()},ie=function vt(T,R){return Mt.apply(this,arguments)}(T,z);return{installationEntry:z,registrationPromise:ie}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:Pt(T)}:{installationEntry:R}}function Mt(){return(Mt=(0,Y.Z)(function*(T,R){try{const z=yield ae(T,R);return kt(T.appConfig,z)}catch(z){throw pt(z)&&409===z.customData.serverCode?yield Cn(T.appConfig):yield kt(T.appConfig,{fid:R.fid,registrationStatus:0}),z}})).apply(this,arguments)}function Pt(T){return or.apply(this,arguments)}function or(){return(or=(0,Y.Z)(function*(T){let R=yield Tr(T.appConfig);for(;1===R.registrationStatus;)yield Ne(100),R=yield Tr(T.appConfig);if(0===R.registrationStatus){const{installationEntry:z,registrationPromise:ie}=yield Jn(T);return ie||z}return R})).apply(this,arguments)}function Tr(T){return pr(T,R=>{if(!R)throw Fe.create("installation-not-found");return An(R)})}function An(T){return function bi(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function mr(T,R){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,Y.Z)(function*({appConfig:T,heartbeatServiceProvider:R},z){const ie=Gt(T,z),De=ke(T,z),Be=R.getImmediate({optional:!0});if(Be){const fn=yield Be.getHeartbeatsHeader();fn&&De.append("x-firebase-client",fn)}const Ot={method:"POST",headers:De,body:JSON.stringify({installation:{sdkVersion:se,appId:T.appId}})},qt=yield Te(()=>fetch(ie,Ot));if(qt.ok)return V(yield qt.json());throw yield Q("Generate Auth Token",qt)})).apply(this,arguments)}function Gt(T,{fid:R}){return`${j(T)}/${R}/authTokens:generate`}function yr(T){return gn.apply(this,arguments)}function gn(){return(gn=(0,Y.Z)(function*(T,R=!1){let z;const ie=yield pr(T.appConfig,Be=>{if(!Vt(Be))throw Fe.create("not-registered");const ft=Be.authToken;if(!R&&ue(ft))return Be;if(1===ft.requestStatus)return z=At(T,R),Be;{if(!navigator.onLine)throw Fe.create("app-offline");const Ot=me(Be);return z=zt(T,Ot),Ot}});return z?yield z:ie.authToken})).apply(this,arguments)}function At(T,R){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,Y.Z)(function*(T,R){let z=yield Et(T.appConfig);for(;1===z.authToken.requestStatus;)yield Ne(100),z=yield Et(T.appConfig);const ie=z.authToken;return 0===ie.requestStatus?yr(T,R):ie})).apply(this,arguments)}function Et(T){return pr(T,R=>{if(!Vt(R))throw Fe.create("not-registered");return function We(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function zt(T,R){return ln.apply(this,arguments)}function ln(){return(ln=(0,Y.Z)(function*(T,R){try{const z=yield mr(T,R),ie=Object.assign(Object.assign({},R),{authToken:z});return yield kt(T.appConfig,ie),z}catch(z){if(!pt(z)||401!==z.customData.serverCode&&404!==z.customData.serverCode){const ie=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield kt(T.appConfig,ie)}else yield Cn(T.appConfig);throw z}})).apply(this,arguments)}function Vt(T){return void 0!==T&&2===T.registrationStatus}function ue(T){return 2===T.requestStatus&&!function ne(T){const R=Date.now();return R<T.creationTime||T.creationTime+T.expiresIn<R+36e5}(T)}function me(T){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:R})}function gt(){return(gt=(0,Y.Z)(function*(T){const R=T,{installationEntry:z,registrationPromise:ie}=yield Jn(R);return ie?ie.catch(console.error):yr(R).catch(console.error),z.fid})).apply(this,arguments)}function mn(){return(mn=(0,Y.Z)(function*(T,R=!1){const z=T;return yield Zt(z),(yield yr(z,R)).token})).apply(this,arguments)}function Zt(T){return cn.apply(this,arguments)}function cn(){return(cn=(0,Y.Z)(function*(T){const{registrationPromise:R}=yield Jn(T);R&&(yield R)})).apply(this,arguments)}function er(T){return Fe.create("missing-app-config-values",{valueName:T})}const Qr="installations",st=T=>{const R=T.getProvider("app").getImmediate(),z=function wr(T){if(!T||!T.options)throw er("App Configuration");if(!T.name)throw er("App Name");const R=["projectId","apiKey","appId"];for(const z of R)if(!T.options[z])throw er(z);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(R);return{app:R,appConfig:z,heartbeatServiceProvider:(0,ve._getProvider)(R,"heartbeat"),_delete:()=>Promise.resolve()}},Rt=T=>{const R=T.getProvider("app").getImmediate(),z=(0,ve._getProvider)(R,Qr).getImmediate();return{getId:()=>function xe(T){return gt.apply(this,arguments)}(z),getToken:De=>function $t(T){return mn.apply(this,arguments)}(z,De)}};(function en(){(0,ve._registerComponent)(new Ie.wA(Qr,st,"PUBLIC")),(0,ve._registerComponent)(new Ie.wA("installations-internal",Rt,"PRIVATE"))})(),(0,ve.registerVersion)(Me,"0.5.8"),(0,ve.registerVersion)(Me,"0.5.8","esm2017");const zn="@firebase/remote-config",ar=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ji{constructor(R,z,ie,De){this.client=R,this.storage=z,this.storageCache=ie,this.logger=De}isCachedDataFresh(R,z){if(!z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ie=Date.now()-z,De=ie<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ie}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${De}.`),De}fetch(R){var z=this;return(0,Y.Z)(function*(){const[ie,De]=yield Promise.all([z.storage.getLastSuccessfulFetchTimestampMillis(),z.storage.getLastSuccessfulFetchResponse()]);if(De&&z.isCachedDataFresh(R.cacheMaxAgeMillis,ie))return De;R.eTag=De&&De.eTag;const Be=yield z.client.fetch(R),ft=[z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Be.status&&ft.push(z.storage.setLastSuccessfulFetchResponse(Be)),yield Promise.all(ft),Be})()}}function bs(T=navigator){return T.languages&&T.languages[0]||T.language}class Gs{constructor(R,z,ie,De,Be,ft){this.firebaseInstallations=R,this.sdkVersion=z,this.namespace=ie,this.projectId=De,this.apiKey=Be,this.appId=ft}fetch(R){var z=this;return(0,Y.Z)(function*(){const[ie,De]=yield Promise.all([z.firebaseInstallations.getId(),z.firebaseInstallations.getToken()]),ft=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${z.projectId}/namespaces/${z.namespace}:fetch?key=${z.apiKey}`,Ot={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},qt={sdk_version:z.sdkVersion,app_instance_id:ie,app_instance_id_token:De,app_id:z.appId,language_code:bs()},fn={method:"POST",headers:Ot,body:JSON.stringify(qt)},qn=fetch(ft,fn),Tn=new Promise((ro,Fs)=>{R.signal.addEventListener(()=>{const go=new Error("The operation was aborted.");go.name="AbortError",Fs(go)})});let br;try{yield Promise.race([qn,Tn]),br=yield qn}catch(ro){let Fs="fetch-client-network";throw"AbortError"===ro.name&&(Fs="fetch-timeout"),ar.create(Fs,{originalErrorMessage:ro.message})}let hi=br.status;const Ra=br.headers.get("ETag")||void 0;let Ya,Yi;if(200===br.status){let ro;try{ro=yield br.json()}catch(Fs){throw ar.create("fetch-client-parse",{originalErrorMessage:Fs.message})}Ya=ro.entries,Yi=ro.state}if("INSTANCE_STATE_UNSPECIFIED"===Yi?hi=500:"NO_CHANGE"===Yi?hi=304:("NO_TEMPLATE"===Yi||"EMPTY_CONFIG"===Yi)&&(Ya={}),304!==hi&&200!==hi)throw ar.create("fetch-status",{httpStatus:hi});return{status:hi,eTag:Ra,config:Ya}})()}}class Ws{constructor(R,z){this.client=R,this.storage=z}fetch(R){var z=this;return(0,Y.Z)(function*(){const ie=(yield z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return z.attemptFetch(R,ie)})()}attemptFetch(R,{throttleEndTimeMillis:z,backoffCount:ie}){var De=this;return(0,Y.Z)(function*(){yield function Hn(T,R){return new Promise((z,ie)=>{const De=Math.max(R-Date.now(),0),Be=setTimeout(z,De);T.addEventListener(()=>{clearTimeout(Be),ie(ar.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,z);try{const Be=yield De.client.fetch(R);return yield De.storage.deleteThrottleMetadata(),Be}catch(Be){if(!function Ts(T){if(!(T instanceof fe.ZR&&T.customData))return!1;const R=Number(T.customData.httpStatus);return 429===R||500===R||503===R||504===R}(Be))throw Be;const ft={throttleEndTimeMillis:Date.now()+(0,fe.$s)(ie),backoffCount:ie+1};return yield De.storage.setThrottleMetadata(ft),De.attemptFetch(R,ft)}})()}}class Ve{constructor(R,z,ie,De,Be){this.app=R,this._client=z,this._storageCache=ie,this._storage=De,this._logger=Be,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qe(T,R){const z=T.target.error||void 0;return ar.create(R,{originalErrorMessage:z&&z.message})}const ct="app_namespace_store";class Pn{constructor(R,z,ie,De=function Ir(){return new Promise((T,R)=>{try{const z=indexedDB.open("firebase_remote_config",1);z.onerror=ie=>{R(Qe(ie,"storage-open"))},z.onsuccess=ie=>{T(ie.target.result)},z.onupgradeneeded=ie=>{0===ie.oldVersion&&ie.target.result.createObjectStore(ct,{keyPath:"compositeKey"})}}catch(z){R(ar.create("storage-open",{originalErrorMessage:z}))}})}()){this.appId=R,this.appName=z,this.namespace=ie,this.openDbPromise=De}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var z=this;return(0,Y.Z)(function*(){const ie=yield z.openDbPromise;return new Promise((De,Be)=>{const Ot=ie.transaction([ct],"readonly").objectStore(ct),qt=z.createCompositeKey(R);try{const fn=Ot.get(qt);fn.onerror=qn=>{Be(Qe(qn,"storage-get"))},fn.onsuccess=qn=>{const Tn=qn.target.result;De(Tn?Tn.value:void 0)}}catch(fn){Be(ar.create("storage-get",{originalErrorMessage:fn&&fn.message}))}})})()}set(R,z){var ie=this;return(0,Y.Z)(function*(){const De=yield ie.openDbPromise;return new Promise((Be,ft)=>{const qt=De.transaction([ct],"readwrite").objectStore(ct),fn=ie.createCompositeKey(R);try{const qn=qt.put({compositeKey:fn,value:z});qn.onerror=Tn=>{ft(Qe(Tn,"storage-set"))},qn.onsuccess=()=>{Be()}}catch(qn){ft(ar.create("storage-set",{originalErrorMessage:qn&&qn.message}))}})})()}delete(R){var z=this;return(0,Y.Z)(function*(){const ie=yield z.openDbPromise;return new Promise((De,Be)=>{const Ot=ie.transaction([ct],"readwrite").objectStore(ct),qt=z.createCompositeKey(R);try{const fn=Ot.delete(qt);fn.onerror=qn=>{Be(Qe(qn,"storage-delete"))},fn.onsuccess=()=>{De()}}catch(fn){Be(ar.create("storage-delete",{originalErrorMessage:fn&&fn.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class gi{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,Y.Z)(function*(){const z=R.storage.getLastFetchStatus(),ie=R.storage.getLastSuccessfulFetchTimestampMillis(),De=R.storage.getActiveConfig(),Be=yield z;Be&&(R.lastFetchStatus=Be);const ft=yield ie;ft&&(R.lastSuccessfulFetchTimestampMillis=ft);const Ot=yield De;Ot&&(R.activeConfig=Ot)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function Ti(){return zs.apply(this,arguments)}function zs(){return(zs=(0,Y.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(T){return!1}})).apply(this,arguments)}!function $i(){(0,ve._registerComponent)(new Ie.wA("remote-config",function T(R,{instanceIdentifier:z}){const ie=R.getProvider("app").getImmediate(),De=R.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ar.create("registration-window");if(!(0,fe.hl)())throw ar.create("indexed-db-unavailable");const{projectId:Be,apiKey:ft,appId:Ot}=ie.options;if(!Be)throw ar.create("registration-project-id");if(!ft)throw ar.create("registration-api-key");if(!Ot)throw ar.create("registration-app-id");const qt=new Pn(Ot,ie.name,z=z||"firebase"),fn=new gi(qt),qn=new Ae.Yd(zn);qn.logLevel=Ae.in.ERROR;const Tn=new Gs(De,ve.SDK_VERSION,z,Be,ft,Ot),br=new Ws(Tn,qt),hi=new ji(br,qt,fn,qn),Ra=new Ve(ie,hi,fn,qt,qn);return function Rn(T){const R=(0,fe.m9)(T);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(Ra),Ra},"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(zn,"0.3.7"),(0,ve.registerVersion)(zn,"0.3.7","esm2017")}();const as="/firebase-messaging-sw.js",yi="/firebase-cloud-messaging-push-scope",Vr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ts="google.c.a.c_id",Gi="google.c.a.c_l",As="google.c.a.ts",ns="google.c.a.e";var Ur=(()=>{return(T=Ur||(Ur={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Ur;var T})();function Ai(T){const R=new Uint8Array(T);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function us(T){const z=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ie=atob(z),De=new Uint8Array(ie.length);for(let Be=0;Be<ie.length;++Be)De[Be]=ie.charCodeAt(Be);return De}const Ss="fcm_token_details_db",vr="fcm_token_object_Store";function vi(T){return Ms.apply(this,arguments)}function Ms(){return Ms=(0,Y.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Be=>Be.name).includes(Ss))return null;let R=null;return(yield(0,fe.X3)(Ss,5,function(){var ie=(0,Y.Z)(function*(De,Be,ft,Ot){var qt;if(Be<2||!De.objectStoreNames.contains(vr))return;const fn=Ot.objectStore(vr),qn=yield fn.index("fcmSenderId").get(T);if(yield fn.clear(),qn)if(2===Be){const Tn=qn;if(!Tn.auth||!Tn.p256dh||!Tn.endpoint)return;R={token:Tn.fcmToken,createTime:null!==(qt=Tn.createTime)&&void 0!==qt?qt:Date.now(),subscriptionOptions:{auth:Tn.auth,p256dh:Tn.p256dh,endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:"string"==typeof Tn.vapidKey?Tn.vapidKey:Ai(Tn.vapidKey)}}}else if(3===Be){const Tn=qn;R={token:Tn.fcmToken,createTime:Tn.createTime,subscriptionOptions:{auth:Ai(Tn.auth),p256dh:Ai(Tn.p256dh),endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:Ai(Tn.vapidKey)}}}else if(4===Be){const Tn=qn;R={token:Tn.fcmToken,createTime:Tn.createTime,subscriptionOptions:{auth:Ai(Tn.auth),p256dh:Ai(Tn.p256dh),endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:Ai(Tn.vapidKey)}}}});return function(De,Be,ft,Ot){return ie.apply(this,arguments)}}())).close(),yield(0,fe.Lj)(Ss),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),ms(R)?R:null}),Ms.apply(this,arguments)}function ms(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:R}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}const Rr="firebase-messaging-store";let Si=null;function Ks(){return Si||(Si=(0,fe.X3)("firebase-messaging-database",1,(T,R)=>{0===R&&T.createObjectStore(Rr)})),Si}function ur(T){return x.apply(this,arguments)}function x(){return(x=(0,Y.Z)(function*(T){const R=ze(T),ie=yield(yield Ks()).transaction(Rr).objectStore(Rr).get(R);if(ie)return ie;{const De=yield vi(T.appConfig.senderId);if(De)return yield H(T,De),De}})).apply(this,arguments)}function H(T,R){return M.apply(this,arguments)}function M(){return(M=(0,Y.Z)(function*(T,R){const z=ze(T),De=(yield Ks()).transaction(Rr,"readwrite");return yield De.objectStore(Rr).put(R,z),yield De.complete,R})).apply(this,arguments)}function q(T){return ce.apply(this,arguments)}function ce(){return(ce=(0,Y.Z)(function*(T){const R=ze(T),ie=(yield Ks()).transaction(Rr,"readwrite");yield ie.objectStore(Rr).delete(R),yield ie.complete})).apply(this,arguments)}function ze({appConfig:T}){return T.appId}const yt=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Kn(T,R){return Un.apply(this,arguments)}function Un(){return(Un=(0,Y.Z)(function*(T,R){const z=yield ki(T),ie=nn(R),De={method:"POST",headers:z,body:JSON.stringify(ie)};let Be;try{Be=yield(yield fetch(nr(T.appConfig),De)).json()}catch(ft){throw yt.create("token-subscribe-failed",{errorInfo:ft})}if(Be.error)throw yt.create("token-subscribe-failed",{errorInfo:Be.error.message});if(!Be.token)throw yt.create("token-subscribe-no-token");return Be.token})).apply(this,arguments)}function dn(T,R){return En.apply(this,arguments)}function En(){return(En=(0,Y.Z)(function*(T,R){const z=yield ki(T),ie=nn(R.subscriptionOptions),De={method:"PATCH",headers:z,body:JSON.stringify(ie)};let Be;try{Be=yield(yield fetch(`${nr(T.appConfig)}/${R.token}`,De)).json()}catch(ft){throw yt.create("token-update-failed",{errorInfo:ft})}if(Be.error)throw yt.create("token-update-failed",{errorInfo:Be.error.message});if(!Be.token)throw yt.create("token-update-no-token");return Be.token})).apply(this,arguments)}function dr(T,R){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,Y.Z)(function*(T,R){const ie={method:"DELETE",headers:yield ki(T)};try{const Be=yield(yield fetch(`${nr(T.appConfig)}/${R}`,ie)).json();if(Be.error)throw yt.create("token-unsubscribe-failed",{errorInfo:Be.error.message})}catch(De){throw yt.create("token-unsubscribe-failed",{errorInfo:De})}})).apply(this,arguments)}function nr({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function ki(T){return ei.apply(this,arguments)}function ei(){return(ei=(0,Y.Z)(function*({appConfig:T,installations:R}){const z=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${z}`})})).apply(this,arguments)}function nn({p256dh:T,auth:R,endpoint:z,vapidKey:ie}){const De={web:{endpoint:z,auth:R,p256dh:T}};return ie!==Vr&&(De.web.applicationPubKey=ie),De}const Pi=6048e5;function Fi(T){return qs.apply(this,arguments)}function qs(){return(qs=(0,Y.Z)(function*(T){const R=yield Ut(T.swRegistration,T.vapidKey),z={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:R.endpoint,auth:Ai(R.getKey("auth")),p256dh:Ai(R.getKey("p256dh"))},ie=yield ur(T.firebaseDependencies);if(ie){if(ui(ie.subscriptionOptions,z))return Date.now()>=ie.createTime+Pi?S(T,{token:ie.token,createTime:Date.now(),subscriptionOptions:z}):ie.token;try{yield dr(T.firebaseDependencies,ie.token)}catch(De){console.warn(De)}return P(T.firebaseDependencies,z)}return P(T.firebaseDependencies,z)})).apply(this,arguments)}function Zs(T){return O.apply(this,arguments)}function O(){return(O=(0,Y.Z)(function*(T){const R=yield ur(T.firebaseDependencies);R&&(yield dr(T.firebaseDependencies,R.token),yield q(T.firebaseDependencies));const z=yield T.swRegistration.pushManager.getSubscription();return!z||z.unsubscribe()})).apply(this,arguments)}function S(T,R){return A.apply(this,arguments)}function A(){return(A=(0,Y.Z)(function*(T,R){try{const z=yield dn(T.firebaseDependencies,R),ie=Object.assign(Object.assign({},R),{token:z,createTime:Date.now()});return yield H(T.firebaseDependencies,ie),z}catch(z){throw yield Zs(T),z}})).apply(this,arguments)}function P(T,R){return Le.apply(this,arguments)}function Le(){return(Le=(0,Y.Z)(function*(T,R){const ie={token:yield Kn(T,R),createTime:Date.now(),subscriptionOptions:R};return yield H(T,ie),ie.token})).apply(this,arguments)}function Ut(T,R){return hn.apply(this,arguments)}function hn(){return(hn=(0,Y.Z)(function*(T,R){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:us(R)})})).apply(this,arguments)}function ui(T,R){return R.vapidKey===T.vapidKey&&R.endpoint===T.endpoint&&R.auth===T.auth&&R.p256dh===T.p256dh}function zr(T){const R={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Br(T,R){if(!R.notification)return;T.notification={};const z=R.notification.title;z&&(T.notification.title=z);const ie=R.notification.body;ie&&(T.notification.body=ie);const De=R.notification.image;De&&(T.notification.image=De)}(R,T),function Ys(T,R){!R.data||(T.data=R.data)}(R,T),function cs(T,R){if(!R.fcmOptions)return;T.fcmOptions={};const z=R.fcmOptions.link;z&&(T.fcmOptions.link=z);const ie=R.fcmOptions.analytics_label;ie&&(T.fcmOptions.analyticsLabel=ie)}(R,T),R}function Fo(T){return"object"==typeof T&&!!T&&ts in T}function mu(T,R){const z=[];for(let ie=0;ie<T.length;ie++)z.push(T.charAt(ie)),ie<R.length&&z.push(R.charAt(ie));return z.join("")}function oo(T){return yt.create("missing-app-config-values",{valueName:T})}mu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),mu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class li{constructor(R,z,ie){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const De=function _a(T){if(!T||!T.options)throw oo("App Configuration Object");if(!T.name)throw oo("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:z}=T;for(const ie of R)if(!z[ie])throw oo(ie);return{appName:T.name,projectId:z.projectId,apiKey:z.apiKey,appId:z.appId,senderId:z.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:De,installations:z,analyticsProvider:ie}}_delete(){return Promise.resolve()}}function Mi(T){return Do.apply(this,arguments)}function Do(){return(Do=(0,Y.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(as,{scope:yi}),T.swRegistration.update().catch(()=>{})}catch(R){throw yt.create("failed-service-worker-registration",{browserErrorMessage:R.message})}})).apply(this,arguments)}function xs(T,R){return ds.apply(this,arguments)}function ds(){return(ds=(0,Y.Z)(function*(T,R){if(!R&&!T.swRegistration&&(yield Mi(T)),R||!T.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw yt.create("invalid-sw-registration");T.swRegistration=R}})).apply(this,arguments)}function ao(T,R){return uo.apply(this,arguments)}function uo(){return(uo=(0,Y.Z)(function*(T,R){R?T.vapidKey=R:T.vapidKey||(T.vapidKey=Vr)})).apply(this,arguments)}function Or(){return(Or=(0,Y.Z)(function*(T,R){if(!navigator)throw yt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yt.create("permission-blocked");return yield ao(T,null==R?void 0:R.vapidKey),yield xs(T,null==R?void 0:R.serviceWorkerRegistration),Fi(T)})).apply(this,arguments)}function Lo(T,R,z){return ta.apply(this,arguments)}function ta(){return(ta=(0,Y.Z)(function*(T,R,z){const ie=na(R);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(ie,{message_id:z[ts],message_name:z[Gi],message_time:z[As],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function na(T){switch(T){case Ur.NOTIFICATION_CLICKED:return"notification_open";case Ur.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wa(){return(wa=(0,Y.Z)(function*(T,R){const z=R.data;if(!z.isFirebaseMessaging)return;T.onMessageHandler&&z.messageType===Ur.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(zr(z)):T.onMessageHandler.next(zr(z)));const ie=z.data;Fo(ie)&&"1"===ie[ns]&&(yield Lo(T,z.messageType,ie))})).apply(this,arguments)}const Vo="@firebase/messaging",Ia=T=>{const R=new li(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",z=>function yu(T,R){return wa.apply(this,arguments)}(R,z)),R},Rs=T=>{const R=T.getProvider("messaging").getImmediate();return{getToken:ie=>function Ea(T,R){return Or.apply(this,arguments)}(R,ie)}};function ys(){return Co.apply(this,arguments)}function Co(){return(Co=(0,Y.Z)(function*(){try{yield(0,fe.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Da(){(0,ve._registerComponent)(new Ie.wA("messaging",Ia,"PUBLIC")),(0,ve._registerComponent)(new Ie.wA("messaging-internal",Rs,"PRIVATE")),(0,ve.registerVersion)(Vo,"0.9.12"),(0,ve.registerVersion)(Vo,"0.9.12","esm2017")}();const Uo="analytics",tc="firebase_id",lo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bo="https://www.googletagmanager.com/gtag/js",$r=new Ae.Yd("@firebase/analytics");function ci(T){return Promise.all(T.map(R=>R.catch(z=>z)))}function wu(T,R){const z=document.createElement("script");z.src=`${Bo}?l=${T}&id=${R}`,z.async=!0,document.head.appendChild(z)}function Os(T,R,z,ie,De,Be){return To.apply(this,arguments)}function To(){return(To=(0,Y.Z)(function*(T,R,z,ie,De,Be){const ft=ie[De];try{if(ft)yield R[ft];else{const qt=(yield ci(z)).find(fn=>fn.measurementId===De);qt&&(yield R[qt.appId])}}catch(Ot){$r.error(Ot)}T("config",De,Be)})).apply(this,arguments)}function Li(T,R,z,ie,De){return Js.apply(this,arguments)}function Js(){return(Js=(0,Y.Z)(function*(T,R,z,ie,De){try{let Be=[];if(De&&De.send_to){let ft=De.send_to;Array.isArray(ft)||(ft=[ft]);const Ot=yield ci(z);for(const qt of ft){const fn=Ot.find(Tn=>Tn.measurementId===qt),qn=fn&&R[fn.appId];if(!qn){Be=[];break}Be.push(qn)}}0===Be.length&&(Be=Object.values(R)),yield Promise.all(Be),T("event",ie,De||{})}catch(Be){$r.error(Be)}})).apply(this,arguments)}function Iu(){const T=window.document.getElementsByTagName("script");for(const R of Object.values(T))if(R.src&&R.src.includes(Bo))return R;return null}const hr=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),$o=new class qi{constructor(R={},z=1e3){this.throttleMetadata=R,this.intervalMillis=z}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,z){this.throttleMetadata[R]=z}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function Ho(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Ta(T){return _r.apply(this,arguments)}function _r(){return(_r=(0,Y.Z)(function*(T){var R;const{appId:z,apiKey:ie}=T,De={method:"GET",headers:Ho(ie)},Be=lo.replace("{app-id}",z),ft=yield fetch(Be,De);if(200!==ft.status&&304!==ft.status){let Ot="";try{const qt=yield ft.json();(null===(R=qt.error)||void 0===R?void 0:R.message)&&(Ot=qt.error.message)}catch(qt){}throw hr.create("config-fetch-failed",{httpStatus:ft.status,responseMessage:Ot})}return ft.json()})).apply(this,arguments)}function al(T){return vs.apply(this,arguments)}function vs(){return(vs=(0,Y.Z)(function*(T,R=$o,z){const{appId:ie,apiKey:De,measurementId:Be}=T.options;if(!ie)throw hr.create("no-app-id");if(!De){if(Be)return{measurementId:Be,appId:ie};throw hr.create("no-api-key")}const ft=R.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ot=new ti;return setTimeout((0,Y.Z)(function*(){Ot.abort()}),void 0!==z?z:6e4),Aa({appId:ie,apiKey:De,measurementId:Be},ft,Ot,R)})).apply(this,arguments)}function Aa(T,R,z){return hs.apply(this,arguments)}function hs(){return(hs=(0,Y.Z)(function*(T,{throttleEndTimeMillis:R,backoffCount:z},ie,De=$o){const{appId:Be,measurementId:ft}=T;try{yield nc(ie,R)}catch(Ot){if(ft)return $r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${Ot.message}]`),{appId:Be,measurementId:ft};throw Ot}try{const Ot=yield Ta(T);return De.deleteThrottleMetadata(Be),Ot}catch(Ot){if(!Wa(Ot)){if(De.deleteThrottleMetadata(Be),ft)return $r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${Ot.message}]`),{appId:Be,measurementId:ft};throw Ot}const qt=503===Number(Ot.customData.httpStatus)?(0,fe.$s)(z,De.intervalMillis,30):(0,fe.$s)(z,De.intervalMillis),fn={throttleEndTimeMillis:Date.now()+qt,backoffCount:z+1};return De.setThrottleMetadata(Be,fn),$r.debug(`Calling attemptFetch again in ${qt} millis`),Aa(T,fn,ie,De)}})).apply(this,arguments)}function nc(T,R){return new Promise((z,ie)=>{const De=Math.max(R-Date.now(),0),Be=setTimeout(z,De);T.addEventListener(()=>{clearTimeout(Be),ie(hr.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}function Wa(T){if(!(T instanceof fe.ZR&&T.customData))return!1;const R=Number(T.customData.httpStatus);return 429===R||500===R||503===R||504===R}class ti{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}function co(){return rs.apply(this,arguments)}function rs(){return(rs=(0,Y.Z)(function*(){if(!(0,fe.hl)())return $r.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(T){return $r.warn(hr.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function Ns(){return(Ns=(0,Y.Z)(function*(T,R,z,ie,De,Be,ft){var Ot;const qt=al(T);qt.then(hi=>{z[hi.measurementId]=hi.appId,T.options.measurementId&&hi.measurementId!==T.options.measurementId&&$r.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${hi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(hi=>$r.error(hi)),R.push(qt);const fn=co().then(hi=>{if(hi)return ie.getId()}),[qn,Tn]=yield Promise.all([qt,fn]);Iu()||wu(Be,qn.measurementId),De("js",new Date);const br=null!==(Ot=null==ft?void 0:ft.config)&&void 0!==Ot?Ot:{};return br.origin="firebase",br.update=!0,null!=Tn&&(br[tc]=Tn),De("config",qn.measurementId,br),qn.measurementId})).apply(this,arguments)}class dt{constructor(R){this.app=R}_delete(){return delete rr[this.app.options.appId],Promise.resolve()}}let rr={},I=[];const E={};let N,B,y="dataLayer",$=!1;function It(T,R,z){!function je(){const T=[];if((0,fe.ru)()&&T.push("This is a browser extension environment."),(0,fe.zI)()||T.push("Cookies are not available."),T.length>0){const R=T.map((ie,De)=>`(${De+1}) ${ie}`).join(" "),z=hr.create("invalid-analytics-context",{errorInfo:R});$r.warn(z.message)}}();const ie=T.options.appId;if(!ie)throw hr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw hr.create("no-api-key");$r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=rr[ie])throw hr.create("already-exists",{id:ie});if(!$){!function Ki(T){let R=[];Array.isArray(window[T])?R=window[T]:window[T]=R}(y);const{wrappedGtag:Be,gtagCore:ft}=function Ha(T,R,z,ie,De){let Be=function(...ft){window[ie].push(arguments)};return window[De]&&"function"==typeof window[De]&&(Be=window[De]),window[De]=function ba(T,R,z,ie){function Be(){return(Be=(0,Y.Z)(function*(ft,Ot,qt){try{"event"===ft?yield Li(T,R,z,Ot,qt):"config"===ft?yield Os(T,R,z,ie,Ot,qt):T("set",Ot)}catch(fn){$r.error(fn)}})).apply(this,arguments)}return function De(ft,Ot,qt){return Be.apply(this,arguments)}}(Be,T,R,z),{gtagCore:Be,wrappedGtag:window[De]}}(rr,I,E,y,"gtag");B=Be,N=ft,$=!0}return rr[ie]=function ho(T,R,z,ie,De,Be,ft){return Ns.apply(this,arguments)}(T,I,E,R,N,y,z),new dt(T)}function Kt(){return(Kt=(0,Y.Z)(function*(T,R,z,ie,De){if(De&&De.global)T("event",z,ie);else{const Be=yield R;T("event",z,Object.assign(Object.assign({},ie),{send_to:Be}))}})).apply(this,arguments)}function eo(){return za.apply(this,arguments)}function za(){return(za=(0,Y.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(T){return!1}})).apply(this,arguments)}const Sa="@firebase/analytics";!function Wd(){(0,ve._registerComponent)(new Ie.wA(Uo,(R,{options:z})=>It(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),z),"PUBLIC")),(0,ve._registerComponent)(new Ie.wA("analytics-internal",function T(R){try{const z=R.getProvider(Uo).getImmediate();return{logEvent:(ie,De,Be)=>function Yc(T,R,z,ie){T=(0,fe.m9)(T),function On(T,R,z,ie,De){return Kt.apply(this,arguments)}(B,rr[T.app.options.appId],R,z,ie).catch(De=>$r.error(De))}(z,ie,De,Be)}}catch(z){throw hr.create("interop-component-reg-failed",{reason:z})}},"PRIVATE")),(0,ve.registerVersion)(Sa,"0.7.8"),(0,ve.registerVersion)(Sa,"0.7.8","esm2017")}();var Vi=U(4408),zd=U(7565);const ul=new class Fn extends zd.v{}(class ks extends Vi.o{constructor(R,z){super(R,z),this.scheduler=R,this.work=z}schedule(R,z=0){return z>0?super.schedule(R,z):(this.delay=z,this.state=R,this.scheduler.flush(this),this)}execute(R,z){return z>0||this.closed?super.execute(R,z):this._execute(R,z)}requestAsyncId(R,z,ie=0){return null!=ie&&ie>0||null==ie&&this.delay>0?super.requestAsyncId(R,z,ie):R.flush(this)}});var ni=U(4986),Ao=U(8505),Ui=U(9468),Is=U(5363);const Ma=new p.GfV("7.3.0"),Wo="__angularfire_symbol__analyticsIsSupportedValue",_i="__angularfire_symbol__analyticsIsSupported",Zi="__angularfire_symbol__remoteConfigIsSupportedValue",So="__angularfire_symbol__remoteConfigIsSupported",Du="__angularfire_symbol__messagingIsSupportedValue",wt="__angularfire_symbol__messagingIsSupported";function po(T,R,z){if(R){if(1===R.length)return R[0];const Be=R.filter(ft=>ft.app===z);if(1===Be.length)return Be[0]}return z.container.getProvider(T).getImmediate({optional:!0})}globalThis[_i]||(globalThis[_i]=eo().then(T=>globalThis[Wo]=T).catch(()=>globalThis[Wo]=!1)),globalThis[wt]||(globalThis[wt]=ys().then(T=>globalThis[Du]=T).catch(()=>globalThis[Du]=!1)),globalThis[So]||(globalThis[So]=Ti().then(T=>globalThis[Zi]=T).catch(()=>globalThis[Zi]=!1));const Mo=(T,R)=>{const z=R?[R]:(0,K.C6)(),ie=[];return z.forEach(De=>{De.container.getProvider(T).instances.forEach(ft=>{ie.includes(ft)||ie.push(ft)})}),ie};function zo(){}class xo{constructor(R,z=ul){this.zone=R,this.delegate=z}now(){return this.delegate.now()}schedule(R,z,ie){const De=this.zone;return this.delegate.schedule(function(ft){De.runGuarded(()=>{R.apply(this,[ft])})},z,ie)}}class cl{constructor(R){this.zone=R,this.task=null}call(R,z){const ie=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zo,{},zo,zo)),z.pipe((0,Ao.b)({next:ie,complete:ie,error:ie})).subscribe(R).add(ie)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ro=(()=>{class T{constructor(z){this.ngZone=z,this.outsideAngular=z.runOutsideAngular(()=>new xo(Zone.current)),this.insideAngular=z.run(()=>new xo(Zone.current,ni.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(z){return new(z||T)(p.LFG(p.R0b))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function no(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function sa(T){return no(),function Ko(T){return function(z){return(z=z.lift(new cl(T.ngZone))).pipe((0,Ui.R)(T.outsideAngular),(0,Is.Q)(T.insideAngular))}}(no())(T)}},2090:(bt,$e,U)=>{U.d($e,{$s:()=>bi,BH:()=>Ke,G6:()=>Te,L:()=>Se,LL:()=>Nt,Lj:()=>ln,Mn:()=>Re,Sg:()=>Xe,UG:()=>Fe,US:()=>Ae,X3:()=>zt,ZB:()=>Ce,ZR:()=>Ne,b$:()=>V,d:()=>Q,eu:()=>Z,hl:()=>he,jU:()=>pt,m9:()=>Gt,ne:()=>kt,pd:()=>fr,r3:()=>Qt,ru:()=>j,tV:()=>oe,uI:()=>Ue,vZ:()=>Xn,w1:()=>de,xO:()=>sr,xb:()=>Dn,z$:()=>at,zI:()=>ye,zd:()=>Gn});var p=U(5861);const fe=function(ue){const ne=[];let me=0;for(let We=0;We<ue.length;We++){let xe=ue.charCodeAt(We);xe<128?ne[me++]=xe:xe<2048?(ne[me++]=xe>>6|192,ne[me++]=63&xe|128):55296==(64512&xe)&&We+1<ue.length&&56320==(64512&ue.charCodeAt(We+1))?(xe=65536+((1023&xe)<<10)+(1023&ue.charCodeAt(++We)),ne[me++]=xe>>18|240,ne[me++]=xe>>12&63|128,ne[me++]=xe>>6&63|128,ne[me++]=63&xe|128):(ne[me++]=xe>>12|224,ne[me++]=xe>>6&63|128,ne[me++]=63&xe|128)}return ne},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ue,ne){if(!Array.isArray(ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();const me=ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,We=[];for(let xe=0;xe<ue.length;xe+=3){const gt=ue[xe],$t=xe+1<ue.length,mn=$t?ue[xe+1]:0,Zt=xe+2<ue.length,cn=Zt?ue[xe+2]:0;let $n=(15&mn)<<2|cn>>6,Er=63&cn;Zt||(Er=64,$t||($n=64)),We.push(me[gt>>2],me[(3&gt)<<4|mn>>4],me[$n],me[Er])}return We.join("")},encodeString(ue,ne){return this.HAS_NATIVE_SUPPORT&&!ne?btoa(ue):this.encodeByteArray(fe(ue),ne)},decodeString(ue,ne){return this.HAS_NATIVE_SUPPORT&&!ne?atob(ue):function(ue){const ne=[];let me=0,We=0;for(;me<ue.length;){const xe=ue[me++];if(xe<128)ne[We++]=String.fromCharCode(xe);else if(xe>191&&xe<224){const gt=ue[me++];ne[We++]=String.fromCharCode((31&xe)<<6|63&gt)}else if(xe>239&&xe<365){const Zt=((7&xe)<<18|(63&ue[me++])<<12|(63&ue[me++])<<6|63&ue[me++])-65536;ne[We++]=String.fromCharCode(55296+(Zt>>10)),ne[We++]=String.fromCharCode(56320+(1023&Zt))}else{const gt=ue[me++],$t=ue[me++];ne[We++]=String.fromCharCode((15&xe)<<12|(63&gt)<<6|63&$t)}}return ne.join("")}(this.decodeStringToByteArray(ue,ne))},decodeStringToByteArray(ue,ne){this.init_();const me=ne?this.charToByteMapWebSafe_:this.charToByteMap_,We=[];for(let xe=0;xe<ue.length;){const gt=me[ue.charAt(xe++)],mn=xe<ue.length?me[ue.charAt(xe)]:0;++xe;const cn=xe<ue.length?me[ue.charAt(xe)]:64;++xe;const an=xe<ue.length?me[ue.charAt(xe)]:64;if(++xe,null==gt||null==mn||null==cn||null==an)throw Error();We.push(gt<<2|mn>>4),64!==cn&&(We.push(mn<<4&240|cn>>2),64!==an&&We.push(cn<<6&192|an))}return We},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ue=0;ue<this.ENCODED_VALS.length;ue++)this.byteToCharMap_[ue]=this.ENCODED_VALS.charAt(ue),this.charToByteMap_[this.byteToCharMap_[ue]]=ue,this.byteToCharMapWebSafe_[ue]=this.ENCODED_VALS_WEBSAFE.charAt(ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ue]]=ue,ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ue)]=ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ue)]=ue)}}},Se=function(ue){return function(ue){const ne=fe(ue);return Ae.encodeByteArray(ne,!0)}(ue).replace(/\./g,"")},oe=function(ue){try{return Ae.decodeString(ue,!0)}catch(ne){console.error("base64Decode failed: ",ne)}return null};function Ce(ue,ne){if(!(ne instanceof Object))return ne;switch(ne.constructor){case Date:return new Date(ne.getTime());case Object:void 0===ue&&(ue={});break;case Array:ue=[];break;default:return ne}for(const me in ne)!ne.hasOwnProperty(me)||!lt(me)||(ue[me]=Ce(ue[me],ne[me]));return ue}function lt(ue){return"__proto__"!==ue}class Ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ne,me)=>{this.resolve=ne,this.reject=me})}wrapCallback(ne){return(me,We)=>{me?this.reject(me):this.resolve(We),"function"==typeof ne&&(this.promise.catch(()=>{}),1===ne.length?ne(me):ne(me,We))}}}function Xe(ue,ne){if(ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const We=ne||"demo-project",xe=ue.iat||0,gt=ue.sub||ue.user_id;if(!gt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $t=Object.assign({iss:`https://securetoken.google.com/${We}`,aud:We,iat:xe,exp:xe+3600,auth_time:xe,sub:gt,user_id:gt,firebase:{sign_in_provider:"custom",identities:{}}},ue);return[Se(JSON.stringify({alg:"none",type:"JWT"})),Se(JSON.stringify($t)),""].join(".")}function at(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function Fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ue){return!1}}function pt(){return"object"==typeof self&&self.self===self}function j(){const ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ue&&void 0!==ue.id}function V(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Q(){return at().indexOf("Electron/")>=0}function de(){const ue=at();return ue.indexOf("MSIE ")>=0||ue.indexOf("Trident/")>=0}function Re(){return at().indexOf("MSAppHost/")>=0}function Te(){return!Fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){return"object"==typeof indexedDB}function Z(){return new Promise((ue,ne)=>{try{let me=!0;const We="validate-browser-context-for-indexeddb-analytics-module",xe=self.indexedDB.open(We);xe.onsuccess=()=>{xe.result.close(),me||self.indexedDB.deleteDatabase(We),ue(!0)},xe.onupgradeneeded=()=>{me=!1},xe.onerror=()=>{var gt;ne((null===(gt=xe.error)||void 0===gt?void 0:gt.message)||"")}}catch(me){ne(me)}})}function ye(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ne extends Error{constructor(ne,me,We){super(me),this.code=ne,this.customData=We,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nt.prototype.create)}}class Nt{constructor(ne,me,We){this.service=ne,this.serviceName=me,this.errors=We}create(ne,...me){const We=me[0]||{},xe=`${this.service}/${ne}`,gt=this.errors[ne],$t=gt?function mt(ue,ne){return ue.replace(jt,(me,We)=>{const xe=ne[We];return null!=xe?String(xe):`<${We}?>`})}(gt,We):"Error";return new Ne(xe,`${this.serviceName}: ${$t} (${xe}).`,We)}}const jt=/\{\$([^}]+)}/g;function Qt(ue,ne){return Object.prototype.hasOwnProperty.call(ue,ne)}function Dn(ue){for(const ne in ue)if(Object.prototype.hasOwnProperty.call(ue,ne))return!1;return!0}function Xn(ue,ne){if(ue===ne)return!0;const me=Object.keys(ue),We=Object.keys(ne);for(const xe of me){if(!We.includes(xe))return!1;const gt=ue[xe],$t=ne[xe];if(Ln(gt)&&Ln($t)){if(!Xn(gt,$t))return!1}else if(gt!==$t)return!1}for(const xe of We)if(!me.includes(xe))return!1;return!0}function Ln(ue){return null!==ue&&"object"==typeof ue}function sr(ue){const ne=[];for(const[me,We]of Object.entries(ue))Array.isArray(We)?We.forEach(xe=>{ne.push(encodeURIComponent(me)+"="+encodeURIComponent(xe))}):ne.push(encodeURIComponent(me)+"="+encodeURIComponent(We));return ne.length?"&"+ne.join("&"):""}function Gn(ue){const ne={};return ue.replace(/^\?/,"").split("&").forEach(We=>{if(We){const[xe,gt]=We.split("=");ne[decodeURIComponent(xe)]=decodeURIComponent(gt)}}),ne}function fr(ue){const ne=ue.indexOf("?");if(!ne)return"";const me=ue.indexOf("#",ne);return ue.substring(ne,me>0?me:void 0)}function kt(ue,ne){const me=new Jt(ue,ne);return me.subscribe.bind(me)}class Jt{constructor(ne,me){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=me,this.task.then(()=>{ne(this)}).catch(We=>{this.error(We)})}next(ne){this.forEachObserver(me=>{me.next(ne)})}error(ne){this.forEachObserver(me=>{me.error(ne)}),this.close(ne)}complete(){this.forEachObserver(ne=>{ne.complete()}),this.close()}subscribe(ne,me,We){let xe;if(void 0===ne&&void 0===me&&void 0===We)throw new Error("Missing Observer.");xe=function on(ue,ne){if("object"!=typeof ue||null===ue)return!1;for(const me of ne)if(me in ue&&"function"==typeof ue[me])return!0;return!1}(ne,["next","error","complete"])?ne:{next:ne,error:me,complete:We},void 0===xe.next&&(xe.next=pr),void 0===xe.error&&(xe.error=pr),void 0===xe.complete&&(xe.complete=pr);const gt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?xe.error(this.finalError):xe.complete()}catch($t){}}),this.observers.push(xe),gt}unsubscribeOne(ne){void 0===this.observers||void 0===this.observers[ne]||(delete this.observers[ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ne){if(!this.finalized)for(let me=0;me<this.observers.length;me++)this.sendOne(me,ne)}sendOne(ne,me){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ne])try{me(this.observers[ne])}catch(We){"undefined"!=typeof console&&console.error&&console.error(We)}})}close(ne){this.finalized||(this.finalized=!0,void 0!==ne&&(this.finalError=ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pr(){}function bi(ue,ne=1e3,me=2){const We=ne*Math.pow(me,ue),xe=Math.round(.5*We*(Math.random()-.5)*2);return Math.min(144e5,We+xe)}function Gt(ue){return ue&&ue._delegate?ue._delegate:ue}function yr(ue,ne){return new Promise((me,We)=>{ue.onsuccess=xe=>{me(xe.target.result)},ue.onerror=xe=>{var gt;We(`${ne}: ${null===(gt=xe.target.error)||void 0===gt?void 0:gt.message}`)}})}class gn{constructor(ne){this._db=ne,this.objectStoreNames=this._db.objectStoreNames}transaction(ne,me="readonly"){return new At(this._db.transaction.call(this._db,ne,me))}createObjectStore(ne,me){return new Ye(this._db.createObjectStore(ne,me))}close(){this._db.close()}}class At{constructor(ne){this._transaction=ne,this.complete=new Promise((me,We)=>{this._transaction.oncomplete=function(){me()},this._transaction.onerror=()=>{We(this._transaction.error)},this._transaction.onabort=()=>{We(this._transaction.error)}})}objectStore(ne){return new Ye(this._transaction.objectStore(ne))}}class Ye{constructor(ne){this._store=ne}index(ne){return new Et(this._store.index(ne))}createIndex(ne,me,We){return new Et(this._store.createIndex(ne,me,We))}get(ne){return yr(this._store.get(ne),"Error reading from IndexedDB")}put(ne,me){return yr(this._store.put(ne,me),"Error writing to IndexedDB")}delete(ne){return yr(this._store.delete(ne),"Error deleting from IndexedDB")}clear(){return yr(this._store.clear(),"Error clearing IndexedDB object store")}}class Et{constructor(ne){this._index=ne}get(ne){return yr(this._index.get(ne),"Error reading from IndexedDB")}}function zt(ue,ne,me){return new Promise((We,xe)=>{try{const gt=indexedDB.open(ue,ne);gt.onsuccess=$t=>{We(new gn($t.target.result))},gt.onerror=$t=>{var mn;xe(`Error opening indexedDB: ${null===(mn=$t.target.error)||void 0===mn?void 0:mn.message}`)},gt.onupgradeneeded=$t=>{me(new gn(gt.result),$t.oldVersion,$t.newVersion,new At(gt.transaction))}}catch(gt){xe(`Error opening indexedDB: ${gt.message}`)}})}function ln(ue){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,p.Z)(function*(ue){return new Promise((ne,me)=>{try{const We=indexedDB.deleteDatabase(ue);We.onsuccess=()=>{ne()},We.onerror=xe=>{var gt;me(`Error deleting indexedDB database "${ue}": ${null===(gt=xe.target.error)||void 0===gt?void 0:gt.message}`)}}catch(We){me(`Error deleting indexedDB database "${ue}": ${We.message}`)}})})).apply(this,arguments)}},7556:(bt,$e,U)=>{U.d($e,{e:()=>Ie});var p=U(5861),K=U(4004),Y=U(5e3),ve=U(1205),fe=U(7566);let Ie=(()=>{class Ae{constructor(Se,oe){this.angularFireAuth=Se,this.angularFireStore=oe,this.usersCollection=this.angularFireStore.collection("users"),this.isAuthenticated$=this.angularFireAuth.user.pipe((0,K.U)(se=>!!se))}createUser(Se){var oe=this;return(0,p.Z)(function*(){var se;const{name:Ce,email:lt,password:Ke,age:Xe,phoneNumber:at}=Se,Ue=yield oe.angularFireAuth.createUserWithEmailAndPassword(lt,Ke);if(!Ue.user)throw Error("User cannot be found");yield oe.usersCollection.doc(null===(se=Ue.user)||void 0===se?void 0:se.uid).set({name:Ce,email:lt,phoneNumber:at,age:Xe}),yield Ue.user.updateProfile({displayName:Ce})})()}login(Se){var oe=this;return(0,p.Z)(function*(){const{email:se,password:Ce}=Se;yield oe.angularFireAuth.signInWithEmailAndPassword(se,Ce)})()}logout(){var Se=this;return(0,p.Z)(function*(){yield Se.angularFireAuth.signOut()})()}}return Ae.\u0275fac=function(Se){return new(Se||Ae)(Y.LFG(ve.zQ),Y.LFG(fe.ST))},Ae.\u0275prov=Y.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})()},4466:(bt,$e,U)=>{U.d($e,{m:()=>fe});var p=U(9808),K=U(2382),Y=U(1470),ve=U(5e3);let fe=(()=>{class Ie{}return Ie.\u0275fac=function(Me){return new(Me||Ie)},Ie.\u0275mod=ve.oAB({type:Ie}),Ie.\u0275inj=ve.cJS({imports:[[p.ez,K.UX,Y.yI.forRoot()]]}),Ie})()},276:(bt,$e,U)=>{var p=U(9808),K=U(5e3);class Y extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ve extends Y{static makeCurrent(){(0,p.HT)(new ve)}onAndCancel(le,ee,Oe){return le.addEventListener(ee,Oe,!1),()=>{le.removeEventListener(ee,Oe,!1)}}dispatchEvent(le,ee){le.dispatchEvent(ee)}remove(le){le.parentNode&&le.parentNode.removeChild(le)}createElement(le,ee){return(ee=ee||this.getDefaultDocument()).createElement(le)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(le){return le.nodeType===Node.ELEMENT_NODE}isShadowRoot(le){return le instanceof DocumentFragment}getGlobalEventTarget(le,ee){return"window"===ee?window:"document"===ee?le:"body"===ee?le.body:null}getBaseHref(le){const ee=function Ie(){return fe=fe||document.querySelector("base"),fe?fe.getAttribute("href"):null}();return null==ee?null:function Me(pe){Ae=Ae||document.createElement("a"),Ae.setAttribute("href",pe);const le=Ae.pathname;return"/"===le.charAt(0)?le:`/${le}`}(ee)}resetBaseElement(){fe=null}getUserAgent(){return window.navigator.userAgent}getCookie(le){return(0,p.Mx)(document.cookie,le)}}let Ae,fe=null;const Se=new K.OlP("TRANSITION_ID"),se=[{provide:K.ip1,useFactory:function oe(pe,le,ee){return()=>{ee.get(K.CZH).donePromise.then(()=>{const Oe=(0,p.q)(),Je=le.querySelectorAll(`style[ng-transition="${pe}"]`);for(let Tt=0;Tt<Je.length;Tt++)Oe.remove(Je[Tt])})}},deps:[Se,p.K0,K.zs3],multi:!0}];class Ce{static init(){(0,K.VLi)(new Ce)}addToWindow(le){K.dqk.getAngularTestability=(Oe,Je=!0)=>{const Tt=le.findTestabilityInTree(Oe,Je);if(null==Tt)throw new Error("Could not find testability for element.");return Tt},K.dqk.getAllAngularTestabilities=()=>le.getAllTestabilities(),K.dqk.getAllAngularRootElements=()=>le.getAllRootElements(),K.dqk.frameworkStabilizers||(K.dqk.frameworkStabilizers=[]),K.dqk.frameworkStabilizers.push(Oe=>{const Je=K.dqk.getAllAngularTestabilities();let Tt=Je.length,tn=!1;const Rn=function(yn){tn=tn||yn,Tt--,0==Tt&&Oe(tn)};Je.forEach(function(yn){yn.whenStable(Rn)})})}findTestabilityInTree(le,ee,Oe){if(null==ee)return null;const Je=le.getTestability(ee);return null!=Je?Je:Oe?(0,p.q)().isShadowRoot(ee)?this.findTestabilityInTree(le,ee.host,!0):this.findTestabilityInTree(le,ee.parentElement,!0):null}}let lt=(()=>{class pe{build(){return new XMLHttpRequest}}return pe.\u0275fac=function(ee){return new(ee||pe)},pe.\u0275prov=K.Yz7({token:pe,factory:pe.\u0275fac}),pe})();const Ke=new K.OlP("EventManagerPlugins");let Xe=(()=>{class pe{constructor(ee,Oe){this._zone=Oe,this._eventNameToPlugin=new Map,ee.forEach(Je=>Je.manager=this),this._plugins=ee.slice().reverse()}addEventListener(ee,Oe,Je){return this._findPluginFor(Oe).addEventListener(ee,Oe,Je)}addGlobalEventListener(ee,Oe,Je){return this._findPluginFor(Oe).addGlobalEventListener(ee,Oe,Je)}getZone(){return this._zone}_findPluginFor(ee){const Oe=this._eventNameToPlugin.get(ee);if(Oe)return Oe;const Je=this._plugins;for(let Tt=0;Tt<Je.length;Tt++){const tn=Je[Tt];if(tn.supports(ee))return this._eventNameToPlugin.set(ee,tn),tn}throw new Error(`No event manager plugin found for event ${ee}`)}}return pe.\u0275fac=function(ee){return new(ee||pe)(K.LFG(Ke),K.LFG(K.R0b))},pe.\u0275prov=K.Yz7({token:pe,factory:pe.\u0275fac}),pe})();class at{constructor(le){this._doc=le}addGlobalEventListener(le,ee,Oe){const Je=(0,p.q)().getGlobalEventTarget(this._doc,le);if(!Je)throw new Error(`Unsupported event target ${Je} for event ${ee}`);return this.addEventListener(Je,ee,Oe)}}let Ue=(()=>{class pe{constructor(){this._stylesSet=new Set}addStyles(ee){const Oe=new Set;ee.forEach(Je=>{this._stylesSet.has(Je)||(this._stylesSet.add(Je),Oe.add(Je))}),this.onStylesAdded(Oe)}onStylesAdded(ee){}getAllStyles(){return Array.from(this._stylesSet)}}return pe.\u0275fac=function(ee){return new(ee||pe)},pe.\u0275prov=K.Yz7({token:pe,factory:pe.\u0275fac}),pe})(),Fe=(()=>{class pe extends Ue{constructor(ee){super(),this._doc=ee,this._hostNodes=new Map,this._hostNodes.set(ee.head,[])}_addStylesToHost(ee,Oe,Je){ee.forEach(Tt=>{const tn=this._doc.createElement("style");tn.textContent=Tt,Je.push(Oe.appendChild(tn))})}addHost(ee){const Oe=[];this._addStylesToHost(this._stylesSet,ee,Oe),this._hostNodes.set(ee,Oe)}removeHost(ee){const Oe=this._hostNodes.get(ee);Oe&&Oe.forEach(pt),this._hostNodes.delete(ee)}onStylesAdded(ee){this._hostNodes.forEach((Oe,Je)=>{this._addStylesToHost(ee,Je,Oe)})}ngOnDestroy(){this._hostNodes.forEach(ee=>ee.forEach(pt))}}return pe.\u0275fac=function(ee){return new(ee||pe)(K.LFG(p.K0))},pe.\u0275prov=K.Yz7({token:pe,factory:pe.\u0275fac}),pe})();function pt(pe){(0,p.q)().remove(pe)}const j={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},V=/%COMP%/g;function Z(pe,le,ee){for(let Oe=0;Oe<le.length;Oe++){let Je=le[Oe];Array.isArray(Je)?Z(pe,Je,ee):(Je=Je.replace(V,pe),ee.push(Je))}return ee}function ye(pe){return le=>{if("__ngUnwrap__"===le)return pe;!1===pe(le)&&(le.preventDefault(),le.returnValue=!1)}}let Ge=(()=>{class pe{constructor(ee,Oe,Je){this.eventManager=ee,this.sharedStylesHost=Oe,this.appId=Je,this.rendererByCompId=new Map,this.defaultRenderer=new Ne(ee)}createRenderer(ee,Oe){if(!ee||!Oe)return this.defaultRenderer;switch(Oe.encapsulation){case K.ifc.Emulated:{let Je=this.rendererByCompId.get(Oe.id);return Je||(Je=new jt(this.eventManager,this.sharedStylesHost,Oe,this.appId),this.rendererByCompId.set(Oe.id,Je)),Je.applyToHost(ee),Je}case 1:case K.ifc.ShadowDom:return new ht(this.eventManager,this.sharedStylesHost,ee,Oe);default:if(!this.rendererByCompId.has(Oe.id)){const Je=Z(Oe.id,Oe.styles,[]);this.sharedStylesHost.addStyles(Je),this.rendererByCompId.set(Oe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return pe.\u0275fac=function(ee){return new(ee||pe)(K.LFG(Xe),K.LFG(Fe),K.LFG(K.AFp))},pe.\u0275prov=K.Yz7({token:pe,factory:pe.\u0275fac}),pe})();class Ne{constructor(le){this.eventManager=le,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(le,ee){return ee?document.createElementNS(j[ee]||ee,le):document.createElement(le)}createComment(le){return document.createComment(le)}createText(le){return document.createTextNode(le)}appendChild(le,ee){le.appendChild(ee)}insertBefore(le,ee,Oe){le&&le.insertBefore(ee,Oe)}removeChild(le,ee){le&&le.removeChild(ee)}selectRootElement(le,ee){let Oe="string"==typeof le?document.querySelector(le):le;if(!Oe)throw new Error(`The selector "${le}" did not match any elements`);return ee||(Oe.textContent=""),Oe}parentNode(le){return le.parentNode}nextSibling(le){return le.nextSibling}setAttribute(le,ee,Oe,Je){if(Je){ee=Je+":"+ee;const Tt=j[Je];Tt?le.setAttributeNS(Tt,ee,Oe):le.setAttribute(ee,Oe)}else le.setAttribute(ee,Oe)}removeAttribute(le,ee,Oe){if(Oe){const Je=j[Oe];Je?le.removeAttributeNS(Je,ee):le.removeAttribute(`${Oe}:${ee}`)}else le.removeAttribute(ee)}addClass(le,ee){le.classList.add(ee)}removeClass(le,ee){le.classList.remove(ee)}setStyle(le,ee,Oe,Je){Je&(K.JOm.DashCase|K.JOm.Important)?le.style.setProperty(ee,Oe,Je&K.JOm.Important?"important":""):le.style[ee]=Oe}removeStyle(le,ee,Oe){Oe&K.JOm.DashCase?le.style.removeProperty(ee):le.style[ee]=""}setProperty(le,ee,Oe){le[ee]=Oe}setValue(le,ee){le.nodeValue=ee}listen(le,ee,Oe){return"string"==typeof le?this.eventManager.addGlobalEventListener(le,ee,ye(Oe)):this.eventManager.addEventListener(le,ee,ye(Oe))}}class jt extends Ne{constructor(le,ee,Oe,Je){super(le),this.component=Oe;const Tt=Z(Je+"-"+Oe.id,Oe.styles,[]);ee.addStyles(Tt),this.contentAttr=function Te(pe){return"_ngcontent-%COMP%".replace(V,pe)}(Je+"-"+Oe.id),this.hostAttr=function he(pe){return"_nghost-%COMP%".replace(V,pe)}(Je+"-"+Oe.id)}applyToHost(le){super.setAttribute(le,this.hostAttr,"")}createElement(le,ee){const Oe=super.createElement(le,ee);return super.setAttribute(Oe,this.contentAttr,""),Oe}}class ht extends Ne{constructor(le,ee,Oe,Je){super(le),this.sharedStylesHost=ee,this.hostEl=Oe,this.shadowRoot=Oe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Tt=Z(Je.id,Je.styles,[]);for(let tn=0;tn<Tt.length;tn++){const Rn=document.createElement("style");Rn.textContent=Tt[tn],this.shadowRoot.appendChild(Rn)}}nodeOrShadowRoot(le){return le===this.hostEl?this.shadowRoot:le}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(le,ee){return super.appendChild(this.nodeOrShadowRoot(le),ee)}insertBefore(le,ee,Oe){return super.insertBefore(this.nodeOrShadowRoot(le),ee,Oe)}removeChild(le,ee){return super.removeChild(this.nodeOrShadowRoot(le),ee)}parentNode(le){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(le)))}}let rt=(()=>{class pe extends at{constructor(ee){super(ee)}supports(ee){return!0}addEventListener(ee,Oe,Je){return ee.addEventListener(Oe,Je,!1),()=>this.removeEventListener(ee,Oe,Je)}removeEventListener(ee,Oe,Je){return ee.removeEventListener(Oe,Je)}}return pe.\u0275fac=function(ee){return new(ee||pe)(K.LFG(p.K0))},pe.\u0275prov=K.Yz7({token:pe,factory:pe.\u0275fac}),pe})();const Ht=["alt","control","meta","shift"],St={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},rn={alt:pe=>pe.altKey,control:pe=>pe.ctrlKey,meta:pe=>pe.metaKey,shift:pe=>pe.shiftKey};let Qt=(()=>{class pe extends at{constructor(ee){super(ee)}supports(ee){return null!=pe.parseEventName(ee)}addEventListener(ee,Oe,Je){const Tt=pe.parseEventName(Oe),tn=pe.eventCallback(Tt.fullKey,Je,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(ee,Tt.domEventName,tn))}static parseEventName(ee){const Oe=ee.toLowerCase().split("."),Je=Oe.shift();if(0===Oe.length||"keydown"!==Je&&"keyup"!==Je)return null;const Tt=pe._normalizeKey(Oe.pop());let tn="";if(Ht.forEach(yn=>{const Ni=Oe.indexOf(yn);Ni>-1&&(Oe.splice(Ni,1),tn+=yn+".")}),tn+=Tt,0!=Oe.length||0===Tt.length)return null;const Rn={};return Rn.domEventName=Je,Rn.fullKey=tn,Rn}static getEventFullKey(ee){let Oe="",Je=function sn(pe){let le=pe.key;if(null==le){if(le=pe.keyIdentifier,null==le)return"Unidentified";le.startsWith("U+")&&(le=String.fromCharCode(parseInt(le.substring(2),16)),3===pe.location&&nt.hasOwnProperty(le)&&(le=nt[le]))}return St[le]||le}(ee);return Je=Je.toLowerCase()," "===Je?Je="space":"."===Je&&(Je="dot"),Ht.forEach(Tt=>{Tt!=Je&&rn[Tt](ee)&&(Oe+=Tt+".")}),Oe+=Je,Oe}static eventCallback(ee,Oe,Je){return Tt=>{pe.getEventFullKey(Tt)===ee&&Je.runGuarded(()=>Oe(Tt))}}static _normalizeKey(ee){return"esc"===ee?"escape":ee}}return pe.\u0275fac=function(ee){return new(ee||pe)(K.LFG(p.K0))},pe.\u0275prov=K.Yz7({token:pe,factory:pe.\u0275fac}),pe})();const sr=(0,K.eFA)(K._c5,"browser",[{provide:K.Lbi,useValue:p.bD},{provide:K.g9A,useValue:function Dn(){ve.makeCurrent(),Ce.init()},multi:!0},{provide:p.K0,useFactory:function Xn(){return(0,K.RDi)(document),document},deps:[]}]),Gn=[{provide:K.zSh,useValue:"root"},{provide:K.qLn,useFactory:function wn(){return new K.qLn},deps:[]},{provide:Ke,useClass:rt,multi:!0,deps:[p.K0,K.R0b,K.Lbi]},{provide:Ke,useClass:Qt,multi:!0,deps:[p.K0]},{provide:Ge,useClass:Ge,deps:[Xe,Fe,K.AFp]},{provide:K.FYo,useExisting:Ge},{provide:Ue,useExisting:Fe},{provide:Fe,useClass:Fe,deps:[p.K0]},{provide:K.dDg,useClass:K.dDg,deps:[K.R0b]},{provide:Xe,useClass:Xe,deps:[Ke,K.R0b]},{provide:p.JF,useClass:lt,deps:[]}];let fr=(()=>{class pe{constructor(ee){if(ee)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ee){return{ngModule:pe,providers:[{provide:K.AFp,useValue:ee.appId},{provide:Se,useExisting:K.AFp},se]}}}return pe.\u0275fac=function(ee){return new(ee||pe)(K.LFG(pe,12))},pe.\u0275mod=K.oAB({type:pe}),pe.\u0275inj=K.cJS({providers:Gn,imports:[p.ez,K.hGG]}),pe})();"undefined"!=typeof window&&window;var $t=U(127),Zt=(U(820),U(2011));const cn_firebase={apiKey:"AIzaSyAcBedrPQWtwsBA-t8ZSjUk3y4SQ8eGRK8",authDomain:"clipit-31d1c.firebaseapp.com",projectId:"clipit-31d1c",storageBucket:"clipit-31d1c.appspot.com",messagingSenderId:"169059670918",appId:"1:169059670918:web:0da8e64eae1eddd785ea07"};var kn=U(441);const Er=[{path:"user",outlet:"modal",loadChildren:()=>U.e(438).then(U.bind(U,2438)).then(pe=>pe.UserModule)},{path:"",component:(()=>{class pe{constructor(){}ngOnInit(){}}return pe.\u0275fac=function(ee){return new(ee||pe)},pe.\u0275cmp=K.Xpm({type:pe,selectors:[["app-home"]],decls:2,vars:0,template:function(ee,Oe){1&ee&&(K.TgZ(0,"p"),K._uU(1,"home works!"),K.qZA())},styles:[""]}),pe})()}];let Yr=(()=>{class pe{}return pe.\u0275fac=function(ee){return new(ee||pe)},pe.\u0275mod=K.oAB({type:pe}),pe.\u0275inj=K.cJS({imports:[[kn.Bz.forRoot(Er)],kn.Bz]}),pe})();var es=U(9646),Sr=U(4004),wr=U(5861),er=U(7556);const Qr=function(){return["user"]},Cr=function(pe){return{modal:pe}},st=function(pe){return{outlets:pe}},Rt=function(pe){return[pe]};function en(pe,le){1&pe&&(K.TgZ(0,"li")(1,"a",14),K._uU(2,"Login / Register"),K.qZA()()),2&pe&&(K.xp6(1),K.Q6J("routerLink",K.VKq(6,Rt,K.VKq(4,st,K.VKq(2,Cr,K.DdM(1,Qr))))))}function zn(pe,le){if(1&pe){const ee=K.EpF();K.TgZ(0,"li")(1,"a",15),K._uU(2,"Manage"),K.qZA()(),K.TgZ(3,"li")(4,"a",15),K._uU(5,"Upload"),K.qZA()(),K.TgZ(6,"li")(7,"a",16),K.NdJ("click",function(Je){return K.CHM(ee),K.oxw().logout(Je)}),K._uU(8,"Logout"),K.qZA()()}}let Jr=(()=>{class pe{constructor(ee){this.authService=ee}logout(ee){var Oe=this;return(0,wr.Z)(function*(){ee.preventDefault(),yield Oe.authService.logout()})()}}return pe.\u0275fac=function(ee){return new(ee||pe)(K.Y36(er.e))},pe.\u0275cmp=K.Xpm({type:pe,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["href","index.html",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["href","about.html",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"routerLink"],["href","#",1,"px-2"],["href","#",1,"px-2",3,"click"]],template:function(ee,Oe){if(1&ee&&(K.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),K._uU(3,"Clipit!"),K.qZA(),K.TgZ(4,"div",3)(5,"ul",4),K.YNc(6,en,3,8,"li",5),K.ALo(7,"async"),K.YNc(8,zn,9,0,"ng-template",null,6,K.W1O),K.TgZ(10,"li")(11,"a",7),K._uU(12,"About"),K.qZA()()(),K.TgZ(13,"ul",8)(14,"li")(15,"a",9),K._UZ(16,"img",10),K.TgZ(17,"span",11),K._uU(18,"English"),K.qZA()()(),K.TgZ(19,"li",12)(20,"a",9),K._UZ(21,"img",13),K.TgZ(22,"span",11),K._uU(23,"French"),K.qZA()()()()()()()),2&ee){const Je=K.MAs(9);K.xp6(6),K.Q6J("ngIf",!1===K.lcZ(7,2,Oe.authService.isAuthenticated$))("ngIfElse",Je)}},directives:[p.O5,kn.yS],pipes:[p.Ov],styles:[""],changeDetection:0}),pe})(),tr=(()=>{class pe{constructor(){}ngOnInit(){}}return pe.\u0275fac=function(ee){return new(ee||pe)},pe.\u0275cmp=K.Xpm({type:pe,selectors:[["app-loading-spinner"]],decls:5,vars:0,consts:[[1,"loadingio-spinner-dual-ring-tosstnkrw7b"],[1,"ldio-stkcctj1ev"]],template:function(ee,Oe){1&ee&&(K.TgZ(0,"div",0)(1,"div",1),K._UZ(2,"div"),K.TgZ(3,"div"),K._UZ(4,"div"),K.qZA()()())},styles:['[_nghost-%COMP%]{display:block;position:fixed;top:0;right:0;width:100vw;height:100vh;background:rgba(82,118,154,.2)}@keyframes ldio-stkcctj1ev{0%{transform:rotate(0)}to{transform:rotate(360deg)}}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box!important}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:144px;height:144px;top:28px;left:28px;border-radius:50%;border:16px solid #000;border-color:#1c4595 transparent #1c4595 transparent;animation:ldio-stkcctj1ev 1s linear infinite}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-color:transparent}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;transform:rotate(45deg)}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:16px;height:16px;top:-16px;left:48px;background:#1c4595;border-radius:50%;box-shadow:0 128px #1c4595}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{left:-16px;top:48px;box-shadow:128px 0 #1c4595}[_nghost-%COMP%]   .loadingio-spinner-dual-ring-tosstnkrw7b[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;display:inline-block;overflow:hidden}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(1);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}'],changeDetection:0}),pe})();function Gr(pe,le){1&pe&&K._UZ(0,"app-loading-spinner")}let Sn=(()=>{class pe{constructor(ee){this.router=ee,this.title="clipit",this.loading$=(0,es.of)(!1),this.loading$=this.router.events.pipe((0,Sr.U)(Oe=>Oe instanceof kn.xV))}}return pe.\u0275fac=function(ee){return new(ee||pe)(K.Y36(kn.F0))},pe.\u0275cmp=K.Xpm({type:pe,selectors:[["app-root"]],decls:5,vars:3,consts:[["name","modal"],[4,"ngIf"]],template:function(ee,Oe){1&ee&&(K._UZ(0,"app-nav")(1,"router-outlet")(2,"router-outlet",0),K.YNc(3,Gr,1,0,"app-loading-spinner",1),K.ALo(4,"async")),2&ee&&(K.xp6(3),K.Q6J("ngIf",K.lcZ(4,1,Oe.loading$)))},directives:[Jr,kn.lC,p.O5,tr],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),pe})();var ar=U(4466);let oi=(()=>{class pe{}return pe.\u0275fac=function(ee){return new(ee||pe)},pe.\u0275mod=K.oAB({type:pe,bootstrap:[Sn]}),pe.\u0275inj=K.cJS({providers:[],imports:[[fr,Yr,Zt.hO.initializeApp(cn_firebase),ar.m]]}),pe})();(0,K.G48)();let un=!1;$t.Z.initializeApp(cn_firebase),$t.Z.auth().onAuthStateChanged(()=>{un||sr().bootstrapModule(oi).catch(pe=>console.error(pe)),un=!0})},5867:(bt,$e,U)=>{U.d($e,{C6:()=>p.getApps,Mq:()=>p.getApp,ZR:()=>p.FirebaseError});var p=U(9681);(0,p.registerVersion)("firebase","9.6.11","app")},127:(bt,$e,U)=>{U.d($e,{Z:()=>p.Z});var p=U(3942);p.Z.registerVersion("firebase","9.6.11","app-compat")},820:(bt,$e,U)=>{U.r($e);var p=U(5861),K=U(3942),Y=U(2090),ve=U(9681),fe=U(655),Ie=U(1877),Ae=U(4859);const Xe=function lt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},at=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pt=new Ie.Yd("@firebase/auth");function j(g,...c){pt.logLevel<=Ie.in.ERROR&&pt.error(`Auth (${ve.SDK_VERSION}): ${g}`,...c)}function V(g,...c){throw ke(g,...c)}function Q(g,...c){return ke(g,...c)}function de(g,c,f){const _=Object.assign(Object.assign({},at()),{[c]:f});return new Y.LL("auth","Firebase",_).create(c,{appName:g.name})}function Re(g,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&V(g,"argument-error"),de(g,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(g,...c){if("string"!=typeof g){const f=c[0],_=[...c.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return Ue.create(g,...c)}function Te(g,c,...f){if(!g)throw ke(c,...f)}function he(g){const c="INTERNAL ASSERTION FAILED: "+g;throw j(c),new Error(c)}function Z(g,c){g||he(c)}const ye=new Map;function ae(g){Z(g instanceof Function,"Expected a class definition");let c=ye.get(g);return c?(Z(c instanceof g,"Instance stored in cache mismatched with class"),c):(c=new g,ye.set(g,c),c)}function Nt(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function mt(){return"http:"===jt()||"https:"===jt()}function jt(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Ht{constructor(c,f){this.shortDelay=c,this.longDelay=f,Z(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function ht(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mt()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dt(g,c){Z(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class St{static initialize(c,f,_){this.fetchImpl=c,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new Ht(3e4,6e4);function Qt(g,c){return g.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:g.tenantId}):c}function sn(g,c,f,_){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(g,c,f,_,k={}){return wn(g,k,(0,p.Z)(function*(){let J={},be={};_&&("GET"===c?be=_:J={body:JSON.stringify(_)});const Ze=(0,Y.xO)(Object.assign({key:g.config.apiKey},be)).slice(1),Ct=yield g._getAdditionalHeaders();return Ct["Content-Type"]="application/json",g.languageCode&&(Ct["X-Firebase-Locale"]=g.languageCode),St.fetch()(Gn(g,g.config.apiHost,f,Ze),Object.assign({method:c,headers:Ct,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function wn(g,c,f){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(g,c,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},nt),c);try{const k=new fr(g),J=yield Promise.race([f(),k.promise]);k.clearNetworkTimeout();const be=yield J.json();if("needConfirmation"in be)throw jn(g,"account-exists-with-different-credential",be);if(J.ok&&!("errorMessage"in be))return be;{const Ze=J.ok?be.errorMessage:be.error.message,[Ct,Yt]=Ze.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ct)throw jn(g,"credential-already-in-use",be);if("EMAIL_EXISTS"===Ct)throw jn(g,"email-already-in-use",be);const pn=_[Ct]||Ct.toLowerCase().replace(/[_\s]+/g,"-");if(Yt)throw de(g,pn,Yt);V(g,pn)}}catch(k){if(k instanceof Y.ZR)throw k;V(g,"network-request-failed")}})).apply(this,arguments)}function Ln(g,c,f,_){return sr.apply(this,arguments)}function sr(){return(sr=(0,p.Z)(function*(g,c,f,_,k={}){const J=yield sn(g,c,f,_,k);return"mfaPendingCredential"in J&&V(g,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function Gn(g,c,f,_){const k=`${c}${f}?${_}`;return g.config.emulator?Dt(g.config,k):`${g.config.apiScheme}://${k}`}class fr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(Q(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(g,c,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const k=Q(g,c,_);return k.customData._tokenResponse=f,k}function Jt(){return(Jt=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Cn(g,c){return on.apply(this,arguments)}function on(){return(on=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function pr(g,c){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Jn(g){if(g)try{const c=new Date(Number(g));if(!isNaN(c.getTime()))return c.toUTCString()}catch(c){}}function Dr(){return(Dr=(0,p.Z)(function*(g,c=!1){const f=(0,Y.m9)(g),_=yield f.getIdToken(c),k=Mt(_);Te(k&&k.exp&&k.auth_time&&k.iat,f.auth,"internal-error");const J="object"==typeof k.firebase?k.firebase:void 0,be=null==J?void 0:J.sign_in_provider;return{claims:k,token:_,authTime:Jn(vt(k.auth_time)),issuedAtTime:Jn(vt(k.iat)),expirationTime:Jn(vt(k.exp)),signInProvider:be||null,signInSecondFactor:(null==J?void 0:J.sign_in_second_factor)||null}})).apply(this,arguments)}function vt(g){return 1e3*Number(g)}function Mt(g){const[c,f,_]=g.split(".");if(void 0===c||void 0===f||void 0===_)return j("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,Y.tV)(f);return k?JSON.parse(k):(j("Failed to decode base64 JWT payload"),null)}catch(k){return j("Caught error parsing JWT payload as JSON",k),null}}function or(g,c){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,p.Z)(function*(g,c,f=!1){if(f)return c;try{return yield c}catch(_){throw _ instanceof Y.ZR&&An(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}function An({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class bi{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const k=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),_)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&c.schedule(!0))}c.schedule()})()}}class mr{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jn(this.lastLoginAt),this.creationTime=Jn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wn(g){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,p.Z)(function*(g){var c;const f=g.auth,_=yield g.getIdToken(),k=yield or(g,pr(f,{idToken:_}));Te(null==k?void 0:k.users.length,f,"internal-error");const J=k.users[0];g._notifyReloadListener(J);const be=(null===(c=J.providerUserInfo)||void 0===c?void 0:c.length)?Ye(J.providerUserInfo):[],Ze=At(g.providerData,be),pn=!!g.isAnonymous&&!(g.email&&J.passwordHash||(null==Ze?void 0:Ze.length)),Bt={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:Ze,metadata:new mr(J.createdAt,J.lastLoginAt),isAnonymous:pn};Object.assign(g,Bt)})).apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*(g){const c=(0,Y.m9)(g);yield Wn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function At(g,c){return[...g.filter(_=>!c.some(k=>k.providerId===_.providerId)),...c]}function Ye(g){return g.map(c=>{var{providerId:f}=c,_=(0,fe._T)(c,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function zt(){return(zt=(0,p.Z)(function*(g,c){const f=yield wn(g,{},(0,p.Z)(function*(){const _=(0,Y.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:k,apiKey:J}=g.config,be=Gn(g,k,"/v1/token",`key=${J}`),Ze=yield g._getAdditionalHeaders();return Ze["Content-Type"]="application/x-www-form-urlencoded",St.fetch()(be,{method:"POST",headers:Ze,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class ln{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Te(c.idToken,"internal-error"),Te(void 0!==c.idToken,"internal-error"),Te(void 0!==c.refreshToken,"internal-error");const f="expiresIn"in c&&void 0!==c.expiresIn?Number(c.expiresIn):function Pt(g){const c=Mt(g);return Te(c,"internal-error"),Te(void 0!==c.exp,"internal-error"),Te(void 0!==c.iat,"internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var _=this;return(0,p.Z)(function*(){return Te(!_.accessToken||_.refreshToken,c,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(c,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var _=this;return(0,p.Z)(function*(){const{accessToken:k,refreshToken:J,expiresIn:be}=yield function Et(g,c){return zt.apply(this,arguments)}(c,f);_.updateTokensAndExpiration(k,J,Number(be))})()}updateTokensAndExpiration(c,f,_){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(c,f){const{refreshToken:_,accessToken:k,expirationTime:J}=f,be=new ln;return _&&(Te("string"==typeof _,"internal-error",{appName:c}),be.refreshToken=_),k&&(Te("string"==typeof k,"internal-error",{appName:c}),be.accessToken=k),J&&(Te("number"==typeof J,"internal-error",{appName:c}),be.expirationTime=J),be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new ln,this.toJSON())}_performRefresh(){return he("not implemented")}}function Vt(g,c){Te("string"==typeof g||void 0===g,"internal-error",{appName:c})}class ue{constructor(c){var{uid:f,auth:_,stsTokenManager:k}=c,J=(0,fe._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new mr(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const _=yield or(f,f.stsTokenManager.getToken(f.auth,c));return Te(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(c){return function Hr(g){return Dr.apply(this,arguments)}(this,c)}reload(){return function yr(g){return gn.apply(this,arguments)}(this)}_assign(c){this!==c&&(Te(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new ue(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var _=this;return(0,p.Z)(function*(){let k=!1;c.idToken&&c.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(c),k=!0),f&&(yield Wn(_)),yield _.auth._persistUserIfCurrent(_),k&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield or(c,function kt(g,c){return Jt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var _,k,J,be,Ze,Ct,Yt,pn;const Bt=null!==(_=f.displayName)&&void 0!==_?_:void 0,ri=null!==(k=f.email)&&void 0!==k?k:void 0,so=null!==(J=f.phoneNumber)&&void 0!==J?J:void 0,Vs=null!==(be=f.photoURL)&&void 0!==be?be:void 0,kl=null!==(Ze=f.tenantId)&&void 0!==Ze?Ze:void 0,ka=null!==(Ct=f._redirectEventId)&&void 0!==Ct?Ct:void 0,yc=null!==(Yt=f.createdAt)&&void 0!==Yt?Yt:void 0,Pf=null!==(pn=f.lastLoginAt)&&void 0!==pn?pn:void 0,{uid:Pa,emailVerified:vc,isAnonymous:ad,providerData:ud,stsTokenManager:_c}=f;Te(Pa&&_c,c,"internal-error");const Ff=ln.fromJSON(this.name,_c);Te("string"==typeof Pa,c,"internal-error"),Vt(Bt,c.name),Vt(ri,c.name),Te("boolean"==typeof vc,c,"internal-error"),Te("boolean"==typeof ad,c,"internal-error"),Vt(so,c.name),Vt(Vs,c.name),Vt(kl,c.name),Vt(ka,c.name),Vt(yc,c.name),Vt(Pf,c.name);const ld=new ue({uid:Pa,auth:c,email:ri,emailVerified:vc,displayName:Bt,isAnonymous:ad,photoURL:Vs,phoneNumber:so,tenantId:kl,stsTokenManager:Ff,createdAt:yc,lastLoginAt:Pf});return ud&&Array.isArray(ud)&&(ld.providerData=ud.map(Lf=>Object.assign({},Lf))),ka&&(ld._redirectEventId=ka),ld}static _fromIdTokenResponse(c,f,_=!1){return(0,p.Z)(function*(){const k=new ln;k.updateFromServerResponse(f);const J=new ue({uid:f.localId,auth:c,stsTokenManager:k,isAnonymous:_});return yield Wn(J),J})()}}const me=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,_){var k=this;return(0,p.Z)(function*(){k.storage[f]=_})()}_get(f){var _=this;return(0,p.Z)(function*(){const k=_.storage[f];return void 0===k?null:k})()}_remove(f){var _=this;return(0,p.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function We(g,c,f){return`firebase:${g}:${c}:${f}`}class xe{constructor(c,f,_){this.persistence=c,this.auth=f,this.userKey=_;const{config:k,name:J}=this.auth;this.fullUserKey=We(this.userKey,k.apiKey,J),this.fullPersistenceKey=We("persistence",k.apiKey,J),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?ue._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,_="authUser"){return(0,p.Z)(function*(){if(!f.length)return new xe(ae(me),c,_);const k=(yield Promise.all(f.map(function(){var Yt=(0,p.Z)(function*(pn){if(yield pn._isAvailable())return pn});return function(pn){return Yt.apply(this,arguments)}}()))).filter(Yt=>Yt);let J=k[0]||ae(me);const be=We(_,c.config.apiKey,c.name);let Ze=null;for(const Yt of f)try{const pn=yield Yt._get(be);if(pn){const Bt=ue._fromJSON(c,pn);Yt!==J&&(Ze=Bt),J=Yt;break}}catch(pn){}const Ct=k.filter(Yt=>Yt._shouldAllowMigration);return J._shouldAllowMigration&&Ct.length?(J=Ct[0],Ze&&(yield J._set(be,Ze.toJSON())),yield Promise.all(f.map(function(){var Yt=(0,p.Z)(function*(pn){if(pn!==J)try{yield pn._remove(be)}catch(Bt){}});return function(pn){return Yt.apply(this,arguments)}}())),new xe(J,c,_)):new xe(J,c,_)})()}}function gt(g){const c=g.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(cn(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if($t(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(an(c))return"Blackberry";if($n(c))return"Webos";if(mn(c))return"Safari";if((c.includes("chrome/")||Zt(c))&&!c.includes("edge/"))return"Chrome";if(kn(c))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==_?void 0:_.length))return _[1]}return"Other"}function $t(g=(0,Y.z$)()){return/firefox\//i.test(g)}function mn(g=(0,Y.z$)()){const c=g.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Zt(g=(0,Y.z$)()){return/crios\//i.test(g)}function cn(g=(0,Y.z$)()){return/iemobile/i.test(g)}function kn(g=(0,Y.z$)()){return/android/i.test(g)}function an(g=(0,Y.z$)()){return/blackberry/i.test(g)}function $n(g=(0,Y.z$)()){return/webos/i.test(g)}function Er(g=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(g)}function wr(g=(0,Y.z$)()){return Er(g)||kn(g)||$n(g)||an(g)||/windows phone/i.test(g)||cn(g)}function Qr(g,c=[]){let f;switch(g){case"Browser":f=gt((0,Y.z$)());break;case"Worker":f=`${gt((0,Y.z$)())}-${g}`;break;default:f=g}const _=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${ve.SDK_VERSION}/${_}`}class Cr{constructor(c,f,_){this.app=c,this.heartbeatServiceProvider=f,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rt(this),this.idTokenSubscription=new Rt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,f){var _=this;return f&&(this._popupRedirectResolver=ae(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var k,J;if(!_._deleted&&(_.persistenceManager=yield xe.create(_,c),!_._deleted)){if(null===(k=_._popupRedirectResolver)||void 0===k?void 0:k._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch(be){}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(J=_.currentUser)||void 0===J?void 0:J.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var _;let k=yield f.assertedPersistence.getCurrentUser();if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const J=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,be=null==k?void 0:k._redirectEventId,Ze=yield f.tryRedirectSignIn(c);(!J||J===be)&&(null==Ze?void 0:Ze.user)&&(k=Ze.user)}return k?k._redirectEventId?(Te(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===k._redirectEventId?f.directlySetCurrentUser(k):f.reloadAndSetCurrentUserOrClear(k)):f.reloadAndSetCurrentUserOrClear(k):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch(k){yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){try{yield Wn(c)}catch(_){if("auth/network-request-failed"!==_.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function rt(){if("undefined"==typeof navigator)return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const _=c?(0,Y.m9)(c):null;return _&&Te(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){if(!f._deleted)return c&&Te(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),f.queue((0,p.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(ae(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new Y.LL("auth","Firebase",c())}onAuthStateChanged(c,f,_){return this.registerStateListener(this.authStateSubscription,c,f,_)}onIdTokenChanged(c,f,_){return this.registerStateListener(this.idTokenSubscription,c,f,_)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var _=this;return(0,p.Z)(function*(){const k=yield _.getOrInitRedirectPersistenceManager(f);return null===c?k.removeCurrentUser():k.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const _=c&&ae(c)||f._popupRedirectResolver;Te(_,f,"argument-error"),f.redirectPersistenceManager=yield xe.create(f,[ae(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var _,k;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===c?f._currentUser:(null===(k=f.redirectUser)||void 0===k?void 0:k._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,_,k){if(this._deleted)return()=>{};const J="function"==typeof f?f:f.next.bind(f),be=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(be,this,"internal-error"),be.then(()=>J(this.currentUser)),"function"==typeof f?c.addObserver(f,_,k):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&(f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh()),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Qr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const _={"X-Client-Version":c.clientVersion};c.app.options.appId&&(_["X-Firebase-gmpid"]=c.app.options.appId);const k=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return k&&(_["X-Firebase-Client"]=k),_})()}}function st(g){return(0,Y.m9)(g)}class Rt{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,Y.ne)(f=>this.observer=f)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zn(g){const c=g.indexOf(":");return c<0?"":g.substr(0,c+1)}function tr(g){if(!g)return null;const c=Number(g);return isNaN(c)?null:c}class Sn{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return he("not implemented")}_getIdTokenResponse(c){return he("not implemented")}_linkToIdToken(c,f){return he("not implemented")}_getReauthenticationResolver(c){return he("not implemented")}}function ar(g,c){return oi.apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:resetPassword",Qt(g,c))})).apply(this,arguments)}function un(g,c){return pe.apply(this,arguments)}function pe(){return(pe=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function le(g,c){return ee.apply(this,arguments)}function ee(){return(ee=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:update",Qt(g,c))})).apply(this,arguments)}function Je(){return(Je=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithPassword",Qt(g,c))})).apply(this,arguments)}function Tt(g,c){return tn.apply(this,arguments)}function tn(){return(tn=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:sendOobCode",Qt(g,c))})).apply(this,arguments)}function Rn(g,c){return yn.apply(this,arguments)}function yn(){return(yn=(0,p.Z)(function*(g,c){return Tt(g,c)})).apply(this,arguments)}function Ni(g,c){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(g,c){return Tt(g,c)})).apply(this,arguments)}function xr(g,c){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(g,c){return Tt(g,c)})).apply(this,arguments)}function fs(g,c){return pi.apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(g,c){return Tt(g,c)})).apply(this,arguments)}function ai(){return(ai=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithEmailLink",Qt(g,c))})).apply(this,arguments)}function bs(){return(bs=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithEmailLink",Qt(g,c))})).apply(this,arguments)}class Gs extends Sn{constructor(c,f,_,k=null){super("password",_),this._email=c,this._password=f,this._tenantId=k}static _fromEmailAndPassword(c,f){return new Gs(c,f,"password")}static _fromEmailAndCode(c,f,_=null){return new Gs(c,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Oe(g,c){return Je.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Cs(g,c){return ai.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:V(c,"internal-error")}})()}_linkToIdToken(c,f){var _=this;return(0,p.Z)(function*(){switch(_.signInMethod){case"password":return un(c,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ji(g,c){return bs.apply(this,arguments)}(c,{idToken:f,email:_._email,oobCode:_._password});default:V(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Hn(g,c){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithIdp",Qt(g,c))})).apply(this,arguments)}class we extends Sn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new we(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):V("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:_,signInMethod:k}=f,J=(0,fe._T)(f,["providerId","signInMethod"]);if(!_||!k)return null;const be=new we(_,k);return be.idToken=J.idToken||void 0,be.accessToken=J.accessToken||void 0,be.secret=J.secret,be.nonce=J.nonce,be.pendingToken=J.pendingToken||null,be}_getIdTokenResponse(c){return Hn(c,this.buildRequest())}_linkToIdToken(c,f){const _=this.buildRequest();return _.idToken=f,Hn(c,_)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Hn(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,Y.xO)(f)}return c}}function Ee(g,c){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:sendVerificationCode",Qt(g,c))})).apply(this,arguments)}function ct(){return(ct=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithPhoneNumber",Qt(g,c))})).apply(this,arguments)}function Vn(){return(Vn=(0,p.Z)(function*(g,c){const f=yield Ln(g,"POST","/v1/accounts:signInWithPhoneNumber",Qt(g,c));if(f.temporaryProof)throw jn(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Ir={USER_NOT_FOUND:"user-not-found"};function gi(){return(gi=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithPhoneNumber",Qt(g,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Ir)})).apply(this,arguments)}class $i extends Sn{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new $i({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new $i({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function Qe(g,c){return ct.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function Ft(g,c){return Vn.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Pn(g,c){return gi.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:_,verificationCode:k}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:_,code:k}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:_,phoneNumber:k,temporaryProof:J}=c;return _||f||k||J?new $i({verificationId:f,verificationCode:_,phoneNumber:k,temporaryProof:J}):null}}class Ti{constructor(c){var f,_,k,J,be,Ze;const Ct=(0,Y.zd)((0,Y.pd)(c)),Yt=null!==(f=Ct.apiKey)&&void 0!==f?f:null,pn=null!==(_=Ct.oobCode)&&void 0!==_?_:null,Bt=function mi(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=Ct.mode)&&void 0!==k?k:null);Te(Yt&&pn&&Bt,"argument-error"),this.apiKey=Yt,this.operation=Bt,this.code=pn,this.continueUrl=null!==(J=Ct.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(be=Ct.languageCode)&&void 0!==be?be:null,this.tenantId=null!==(Ze=Ct.tenantId)&&void 0!==Ze?Ze:null}static parseLink(c){const f=function Hi(g){const c=(0,Y.zd)((0,Y.pd)(g)).link,f=c?(0,Y.zd)((0,Y.pd)(c)).deep_link_id:null,_=(0,Y.zd)((0,Y.pd)(g)).deep_link_id;return(_?(0,Y.zd)((0,Y.pd)(_)).link:null)||_||f||c||g}(c);try{return new Ti(f)}catch(_){return null}}}let as=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return Gs._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const k=Ti.parseLink(_);return Te(k,"argument-error"),Gs._fromEmailAndCode(f,k.code,k.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class yi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Vr extends yi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ps extends Vr{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return Te("providerId"in f&&"signInMethod"in f,"argument-error"),we._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Te(c.idToken||c.accessToken,"argument-error"),we._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ps.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ps.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:k,pendingToken:J,nonce:be,providerId:Ze}=c;if(!_&&!k&&!f&&!J||!Ze)return null;try{return new ps(Ze)._credential({idToken:f,accessToken:_,nonce:be,pendingToken:J})}catch(Ct){return null}}}let ts=(()=>{class g extends Vr{constructor(){super("facebook.com")}static credential(f){return we._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(_){return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Gi=(()=>{class g extends Vr{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return we._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:k}=f;if(!_&&!k)return null;try{return g.credential(_,k)}catch(J){return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),As=(()=>{class g extends Vr{constructor(){super("github.com")}static credential(f){return we._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(_){return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class gs extends Sn{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return Hn(c,this.buildRequest())}_linkToIdToken(c,f){const _=this.buildRequest();return _.idToken=f,Hn(c,_)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Hn(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:_,signInMethod:k,pendingToken:J}=f;return _&&k&&J&&_===k?new gs(_,J):null}static _create(c,f){return new gs(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ai extends yi{constructor(c){Te(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Ai.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Ai.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=gs.fromJSON(c);return Te(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:_}=c;if(!f||!_)return null;try{return gs._create(_,f)}catch(k){return null}}}let us=(()=>{class g extends Vr{constructor(){super("twitter.com")}static credential(f,_){return we._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:k}=f;if(!_||!k)return null;try{return g.credential(_,k)}catch(J){return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Ss(g,c){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signUp",Qt(g,c))})).apply(this,arguments)}class vr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,_,k=!1){return(0,p.Z)(function*(){const J=yield ue._fromIdTokenResponse(c,_,k),be=vi(_);return new vr({user:J,providerId:be,_tokenResponse:_,operationType:f})})()}static _forOperation(c,f,_){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(_,!0);const k=vi(_);return new vr({user:c,providerId:k,_tokenResponse:_,operationType:f})})()}}function vi(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function ms(){return(ms=(0,p.Z)(function*(g){var c;const f=st(g);if(yield f._initializationPromise,null===(c=f.currentUser)||void 0===c?void 0:c.isAnonymous)return new vr({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield Ss(f,{returnSecureToken:!0}),k=yield vr._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(k.user),k})).apply(this,arguments)}class ls extends Y.ZR{constructor(c,f,_,k){var J;super(f.code,f.message),this.operationType=_,this.user=k,Object.setPrototypeOf(this,ls.prototype),this.customData={appName:c.name,tenantId:null!==(J=c.tenantId)&&void 0!==J?J:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(c,f,_,k){return new ls(c,f,_,k)}}function Wi(g,c,f,_){return("reauthenticate"===c?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?ls._fromErrorAndOperation(g,J,c,_):J})}function Rr(g){return new Set(g.map(({providerId:c})=>c).filter(c=>!!c))}function Ks(){return(Ks=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g);yield H(!0,f,c);const{providerUserInfo:_}=yield Cn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),k=Rr(_||[]);return f.providerData=f.providerData.filter(J=>k.has(J.providerId)),k.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function ur(g,c){return x.apply(this,arguments)}function x(){return(x=(0,p.Z)(function*(g,c,f=!1){const _=yield or(g,c._linkToIdToken(g.auth,yield g.getIdToken()),f);return vr._forOperation(g,"link",_)})).apply(this,arguments)}function H(g,c,f){return M.apply(this,arguments)}function M(){return(M=(0,p.Z)(function*(g,c,f){yield Wn(c);const k=!1===g?"provider-already-linked":"no-such-provider";Te(Rr(c.providerData).has(f)===g,c.auth,k)})).apply(this,arguments)}function q(g,c){return ce.apply(this,arguments)}function ce(){return(ce=(0,p.Z)(function*(g,c,f=!1){const{auth:_}=g,k="reauthenticate";try{const J=yield or(g,Wi(_,k,c,g),f);Te(J.idToken,_,"internal-error");const be=Mt(J.idToken);Te(be,_,"internal-error");const{sub:Ze}=be;return Te(g.uid===Ze,_,"user-mismatch"),vr._forOperation(g,k,J)}catch(J){throw"auth/user-not-found"===(null==J?void 0:J.code)&&V(_,"user-mismatch"),J}})).apply(this,arguments)}function ze(g,c){return qe.apply(this,arguments)}function qe(){return(qe=(0,p.Z)(function*(g,c,f=!1){const _="signIn",k=yield Wi(g,_,c),J=yield vr._fromIdTokenResponse(g,_,k);return f||(yield g._updateCurrentUser(J.user)),J})).apply(this,arguments)}function yt(g,c){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(g,c){return ze(st(g),c)})).apply(this,arguments)}function Un(g,c){return dn.apply(this,arguments)}function dn(){return(dn=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g);return yield H(!1,f,c.providerId),ur(f,c)})).apply(this,arguments)}function En(g,c){return dr.apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(g,c){return q((0,Y.m9)(g),c)})).apply(this,arguments)}function Yn(g,c){return nr.apply(this,arguments)}function nr(){return(nr=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithCustomToken",Qt(g,c))})).apply(this,arguments)}function ei(){return(ei=(0,p.Z)(function*(g,c){const f=st(g),_=yield Yn(f,{token:c,returnSecureToken:!0}),k=yield vr._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(k.user),k})).apply(this,arguments)}class nn{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Pi._fromServerResponse(c,f):V(c,"internal-error")}}class Pi extends nn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Pi(f)}}function Fi(g,c,f){var _;Te((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),Te(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Te(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(Te(f.android.packageName.length>0,g,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Zs(){return(Zs=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g),k={requestType:"PASSWORD_RESET",email:c};f&&Fi(_,k,f),yield Ni(_,k)})).apply(this,arguments)}function S(){return(S=(0,p.Z)(function*(g,c,f){yield ar((0,Y.m9)(g),{oobCode:c,newPassword:f})})).apply(this,arguments)}function P(){return(P=(0,p.Z)(function*(g,c){yield le((0,Y.m9)(g),{oobCode:c})})).apply(this,arguments)}function Le(g,c){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g),_=yield ar(f,{oobCode:c}),k=_.requestType;switch(Te(k,f,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(_.mfaInfo,f,"internal-error");default:Te(_.email,f,"internal-error")}let J=null;return _.mfaInfo&&(J=nn._fromServerResponse(st(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:J},operation:k}})).apply(this,arguments)}function ui(){return(ui=(0,p.Z)(function*(g,c){const{data:f}=yield Le((0,Y.m9)(g),c);return f.email})).apply(this,arguments)}function Br(){return(Br=(0,p.Z)(function*(g,c,f){const _=st(g),k=yield Ss(_,{returnSecureToken:!0,email:c,password:f}),J=yield vr._fromIdTokenResponse(_,"signIn",k);return yield _._updateCurrentUser(J.user),J})).apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g),k={requestType:"EMAIL_SIGNIN",email:c};Te(f.handleCodeInApp,_,"argument-error"),f&&Fi(_,k,f),yield xr(_,k)})).apply(this,arguments)}function oo(){return(oo=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g),k=as.credentialWithLink(c,f||Nt());return Te(k._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),yt(_,k)})).apply(this,arguments)}function li(g,c){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:createAuthUri",Qt(g,c))})).apply(this,arguments)}function xs(){return(xs=(0,p.Z)(function*(g,c){const _={identifier:c,continueUri:mt()?Nt():"http://localhost"},{signinMethods:k}=yield li((0,Y.m9)(g),_);return k||[]})).apply(this,arguments)}function ao(){return(ao=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g),k={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};c&&Fi(f.auth,k,c);const{email:J}=yield Rn(f.auth,k);J!==g.email&&(yield g.reload())})).apply(this,arguments)}function Ea(){return(Ea=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:c};f&&Fi(_.auth,J,f);const{email:be}=yield fs(_.auth,J);be!==g.email&&(yield g.reload())})).apply(this,arguments)}function Or(g,c){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function na(){return(na=(0,p.Z)(function*(g,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const _=(0,Y.m9)(g),J={idToken:yield _.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},be=yield or(_,Or(_.auth,J));_.displayName=be.displayName||null,_.photoURL=be.photoUrl||null;const Ze=_.providerData.find(({providerId:Ct})=>"password"===Ct);Ze&&(Ze.displayName=_.displayName,Ze.photoURL=_.photoURL),yield _._updateTokensIfNecessary(be)})).apply(this,arguments)}function Vo(g,c,f){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,p.Z)(function*(g,c,f){const{auth:_}=g,J={idToken:yield g.getIdToken(),returnSecureToken:!0};c&&(J.email=c),f&&(J.password=f);const be=yield or(g,un(_,J));yield g._updateTokensIfNecessary(be,!0)})).apply(this,arguments)}class Rs{constructor(c,f,_={}){this.isNewUser=c,this.providerId=f,this.profile=_}}class Da extends Rs{constructor(c,f,_,k){super(c,f,_),this.username=k}}class ys extends Rs{constructor(c,f){super(c,"facebook.com",f)}}class Co extends Da{constructor(c,f){super(c,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class vu extends Rs{constructor(c,f){super(c,"google.com",f)}}class ra extends Da{constructor(c,f,_){super(c,"twitter.com",f,_)}}function jr(g){const{user:c,_tokenResponse:f}=g;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Ia(g){var c,f;if(!g)return null;const{providerId:_}=g,k=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},J=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&(null==g?void 0:g.idToken)){const be=null===(f=null===(c=Mt(g.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(be)return new Rs(J,"anonymous"!==be&&"custom"!==be?be:null)}if(!_)return null;switch(_){case"facebook.com":return new ys(J,k);case"github.com":return new Co(J,k);case"google.com":return new vu(J,k);case"twitter.com":return new ra(J,k,g.screenName||null);case"custom":case"anonymous":return new Rs(J,null);default:return new Rs(J,_,k)}}(f)}class zi{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new zi("enroll",c)}static _fromMfaPendingCredential(c){return new zi("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,_;if(null==c?void 0:c.multiFactorSession){if(null===(f=c.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return zi._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null===(_=c.multiFactorSession)||void 0===_?void 0:_.idToken)return zi._fromIdtoken(c.multiFactorSession.idToken)}return null}}class lo{constructor(c,f,_){this.session=c,this.hints=f,this.signInResolver=_}static _fromError(c,f){const _=st(c),k=f.customData._serverResponse,J=(k.mfaInfo||[]).map(Ze=>nn._fromServerResponse(_,Ze));Te(k.mfaPendingCredential,_,"internal-error");const be=zi._fromMfaPendingCredential(k.mfaPendingCredential);return new lo(be,J,function(){var Ze=(0,p.Z)(function*(Ct){const Yt=yield Ct._process(_,be);delete k.mfaInfo,delete k.mfaPendingCredential;const pn=Object.assign(Object.assign({},k),{idToken:Yt.idToken,refreshToken:Yt.refreshToken});switch(f.operationType){case"signIn":const Bt=yield vr._fromIdTokenResponse(_,f.operationType,pn);return yield _._updateCurrentUser(Bt.user),Bt;case"reauthenticate":return Te(f.user,_,"internal-error"),vr._forOperation(f.user,f.operationType,pn);default:V(_,"internal-error")}});return function(Ct){return Ze.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function $r(g,c){return sn(g,"POST","/v2/accounts/mfaEnrollment:start",Qt(g,c))}class Ki{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>nn._fromServerResponse(c.auth,_)))})}static _fromUser(c){return new Ki(c)}getSession(){var c=this;return(0,p.Z)(function*(){return zi._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var _=this;return(0,p.Z)(function*(){const k=c,J=yield _.getSession(),be=yield or(_.user,k._process(_.user.auth,J,f));return yield _.user._updateTokensIfNecessary(be),_.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){const _="string"==typeof c?c:c.uid,k=yield f.user.getIdToken(),J=yield or(f.user,function wu(g,c){return sn(g,"POST","/v2/accounts/mfaEnrollment:withdraw",Qt(g,c))}(f.user.auth,{idToken:k,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:be})=>be!==_),yield f.user._updateTokensIfNecessary(J);try{yield f.user.reload()}catch(be){if("auth/user-token-expired"!==be.code)throw be}})()}}const Os=new WeakMap,Li="__sak";class Js{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Li,"1"),this.storage.removeItem(Li),Promise.resolve(!0)):Promise.resolve(!1)}catch(c){return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const hr=(()=>{class g extends Js{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ba(){const g=(0,Y.z$)();return mn(g)||Er(g)}()&&function er(){try{return!(!window||window===window.top)}catch(g){return!1}}(),this.fallbackToPolling=wr(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const k=this.storage.getItem(_),J=this.localCache[_];k!==J&&f(_,J,k)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((Ze,Ct,Yt)=>{this.notifyListeners(Ze,Yt)});const k=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ze=this.storage.getItem(k);if(f.newValue!==Ze)null!==f.newValue?this.storage.setItem(k,f.newValue):this.storage.removeItem(k);else if(this.localCache[k]===f.newValue&&!_)return}const J=()=>{const Ze=this.storage.getItem(k);!_&&this.localCache[k]===Ze||this.notifyListeners(k,Ze)},be=this.storage.getItem(k);!function Sr(){return(0,Y.w1)()&&10===document.documentMode}()||be===f.newValue||f.newValue===f.oldValue?J():setTimeout(J,10)}notifyListeners(f,_){this.localCache[f]=_;const k=this.listeners[f];if(k)for(const J of Array.from(k))J(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var k=()=>super._set,J=this;return(0,p.Z)(function*(){yield k().call(J,f,_),J.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,k=this;return(0,p.Z)(function*(){const J=yield _().call(k,f);return k.localCache[f]=JSON.stringify(J),J})()}_remove(f){var _=()=>super._remove,k=this;return(0,p.Z)(function*(){yield _().call(k,f),delete k.localCache[f]})()}}return g.type="LOCAL",g})(),Xs=(()=>{class g extends Js{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let $o=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(J=>J.isListeningto(f));if(_)return _;const k=new g(f);return this.receivers.push(k),k}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,p.Z)(function*(){const k=f,{eventId:J,eventType:be,data:Ze}=k.data,Ct=_.handlersMap[be];if(!(null==Ct?void 0:Ct.size))return;k.ports[0].postMessage({status:"ack",eventId:J,eventType:be});const Yt=Array.from(Ct).map(function(){var Bt=(0,p.Z)(function*(ri){return ri(k.origin,Ze)});return function(ri){return Bt.apply(this,arguments)}}()),pn=yield function qi(g){return Promise.all(g.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return c.apply(this,arguments)}}()))}(Yt);k.ports[0].postMessage({status:"done",eventId:J,eventType:be,response:pn})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Ho(g="",c=10){let f="";for(let _=0;_<c;_++)f+=Math.floor(10*Math.random());return g+f}class Ta{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,_=50){var k=this;return(0,p.Z)(function*(){const J="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let be,Ze;return new Promise((Ct,Yt)=>{const pn=Ho("",20);J.port1.start();const Bt=setTimeout(()=>{Yt(new Error("unsupported_event"))},_);Ze={messageChannel:J,onMessage(ri){const so=ri;if(so.data.eventId===pn)switch(so.data.status){case"ack":clearTimeout(Bt),be=setTimeout(()=>{Yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(be),Ct(so.data.response);break;default:clearTimeout(Bt),clearTimeout(be),Yt(new Error("invalid_response"))}}},k.handlers.add(Ze),J.port1.addEventListener("message",Ze.onMessage),k.target.postMessage({eventType:c,eventId:pn,data:f},[J.port2])}).finally(()=>{Ze&&k.removeMessageHandler(Ze)})})()}}function _r(){return window}function vs(){return void 0!==_r().WorkerGlobalScope&&"function"==typeof _r().importScripts}function hs(){return(hs=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(g){return null}})).apply(this,arguments)}const ti="firebaseLocalStorageDb",rs="firebaseLocalStorage",ho="fbase_key";class Ns{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function dt(g,c){return g.transaction([rs],c?"readwrite":"readonly").objectStore(rs)}function I(){const g=indexedDB.open(ti,1);return new Promise((c,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(rs,{keyPath:ho})}catch(k){f(k)}}),g.addEventListener("success",(0,p.Z)(function*(){const _=g.result;_.objectStoreNames.contains(rs)?c(_):(_.close(),yield function rr(){const g=indexedDB.deleteDatabase(ti);return new Ns(g).toPromise()}(),c(yield I()))}))})}function E(g,c,f){return y.apply(this,arguments)}function y(){return(y=(0,p.Z)(function*(g,c,f){const _=dt(g,!0).put({[ho]:c,value:f});return new Ns(_).toPromise()})).apply(this,arguments)}function N(){return(N=(0,p.Z)(function*(g,c){const f=dt(g,!1).get(c),_=yield new Ns(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function B(g,c){const f=dt(g,!0).delete(c);return new Ns(f).toPromise()}const It=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield I()),f.db})()}_withRetries(f){var _=this;return(0,p.Z)(function*(){let k=0;for(;;)try{const J=yield _._openDb();return yield f(J)}catch(J){if(k++>3)throw J;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return vs()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=$o._getInstance(function Wa(){return vs()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,p.Z)(function*(k,J){return{keyProcessed:(yield f._poll()).includes(J.key)}});return function(k,J){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,p.Z)(function*(k,J){return["keyChanged"]});return function(k,J){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var _,k;if(f.activeServiceWorker=yield function Aa(){return hs.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Ta(f.activeServiceWorker);const J=yield f.sender._send("ping",{},800);!J||(null===(_=J[0])||void 0===_?void 0:_.fulfilled)&&(null===(k=J[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,p.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function nc(){var g;return(null===(g=null==navigator?void 0:navigator.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch(k){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield I();return yield E(f,Li,"1"),yield B(f,Li),!0}catch(f){}return!1})()}_withPendingWrite(f){var _=this;return(0,p.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var k=this;return(0,p.Z)(function*(){return k._withPendingWrite((0,p.Z)(function*(){return yield k._withRetries(J=>E(J,f,_)),k.localCache[f]=_,k.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,p.Z)(function*(){const k=yield _._withRetries(J=>function b(g,c){return N.apply(this,arguments)}(J,f));return _.localCache[f]=k,k})()}_remove(f){var _=this;return(0,p.Z)(function*(){return _._withPendingWrite((0,p.Z)(function*(){return yield _._withRetries(k=>B(k,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const _=yield f._withRetries(be=>{const Ze=dt(be,!1).getAll();return new Ns(Ze).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const k=[],J=new Set;for(const{fbase_key:be,value:Ze}of _)J.add(be),JSON.stringify(f.localCache[be])!==JSON.stringify(Ze)&&(f.notifyListeners(be,Ze),k.push(be));for(const be of Object.keys(f.localCache))f.localCache[be]&&!J.has(be)&&(f.notifyListeners(be,null),k.push(be));return k})()}notifyListeners(f,_){this.localCache[f]=_;const k=this.listeners[f];if(k)for(const J of Array.from(k))J(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function On(g,c){return sn(g,"POST","/v2/accounts/mfaSignIn:start",Qt(g,c))}function Nn(){return(Nn=(0,p.Z)(function*(g){return(yield sn(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function is(g){return new Promise((c,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=c,_.onerror=k=>{const J=Q("internal-error");J.customData=k,f(J)},_.type="text/javascript",_.charset="UTF-8",function _s(){var g,c;return null!==(c=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==c?c:document}().appendChild(_)})}function Go(g){return`__${g}${Math.floor(1e6*Math.random())}`}const Es=1e12;class rc{constructor(c){this.auth=c,this.counter=Es,this._widgets=new Map}render(c,f){const _=this.counter;return this._widgets.set(_,new bn(c,this.auth.name,f||{})),this.counter++,_}reset(c){var f;const _=c||Es;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(c){var f;return(null===(f=this._widgets.get(c||Es))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var _;return null===(_=f._widgets.get(c||Es))||void 0===_||_.execute(),""})()}}class bn{constructor(c,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof c?document.getElementById(c):c;Te(k,"argument-error",{appName:f}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function eo(g){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch(_){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(_){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const za=Go("rcb"),di=new Ht(3e4,6e4);class Zc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!_r().grecaptcha}load(c,f=""){return Te(function Ka(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(_r().grecaptcha):new Promise((_,k)=>{const J=_r().setTimeout(()=>{k(Q(c,"network-request-failed"))},di.get());_r()[za]=()=>{_r().clearTimeout(J),delete _r()[za];const Ze=_r().grecaptcha;if(!Ze)return void k(Q(c,"internal-error"));const Ct=Ze.render;Ze.render=(Yt,pn)=>{const Bt=Ct(Yt,pn);return this.counter++,Bt},this.hostLanguage=f,_(Ze)},is(`https://www.google.com/recaptcha/api.js??${(0,Y.xO)({onload:za,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(J),k(Q(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){return!!_r().grecaptcha&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yc{load(c){return(0,p.Z)(function*(){return new rc(c)})()}clearedOneInstance(){}}const Sa="recaptcha",Qn={theme:"light",type:"image"};class Wd{constructor(c,f=Object.assign({},Qn),_){this.parameters=f,this.type=Sa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=st(_),this.isInvisible="invisible"===this.parameters.size,Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof c?document.getElementById(c):c;Te(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yc:new Zc,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),_=c.getAssertedRecaptcha();return _.getResponse(f)||new Promise(J=>{const be=Ze=>{!Ze||(c.tokenChangeListeners.delete(be),J(Ze))};c.tokenChangeListeners.add(be),c.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof c)c(f);else if("string"==typeof c){const _=_r()[c];"function"==typeof _&&_(f)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){Te(mt()&&!vs(),c.auth,"internal-error"),yield function Vi(){let g=null;return new Promise(c=>{"complete"!==document.readyState?(g=()=>c(),window.addEventListener("load",g)):c()}).catch(c=>{throw g&&window.removeEventListener("load",g),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function ir(g){return Nn.apply(this,arguments)}(c.auth);Te(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ks{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=$i._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Fn(){return(Fn=(0,p.Z)(function*(g,c,f){const _=st(g),k=yield Ui(_,c,(0,Y.m9)(f));return new ks(k,J=>yt(_,J))})).apply(this,arguments)}function ws(){return(ws=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g);yield H(!1,_,"phone");const k=yield Ui(_.auth,c,(0,Y.m9)(f));return new ks(k,J=>Un(_,J))})).apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g),k=yield Ui(_.auth,c,(0,Y.m9)(f));return new ks(k,J=>En(_,J))})).apply(this,arguments)}function Ui(g,c,f){return Is.apply(this,arguments)}function Is(){return(Is=(0,p.Z)(function*(g,c,f){var _;const k=yield f.verify();try{let J;if(Te("string"==typeof k,g,"argument-error"),Te(f.type===Sa,g,"argument-error"),J="string"==typeof c?{phoneNumber:c}:c,"session"in J){const be=J.session;if("phoneNumber"in J)return Te("enroll"===be.type,g,"internal-error"),(yield $r(g,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{Te("signin"===be.type,g,"internal-error");const Ze=(null===(_=J.multiFactorHint)||void 0===_?void 0:_.uid)||J.multiFactorUid;return Te(Ze,g,"missing-multi-factor-info"),(yield On(g,{mfaPendingCredential:be.credential,mfaEnrollmentId:Ze,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield Ee(g,{phoneNumber:J.phoneNumber,recaptchaToken:k});return be}}finally{f._reset()}})).apply(this,arguments)}function Wo(){return(Wo=(0,p.Z)(function*(g,c){yield ur((0,Y.m9)(g),c)})).apply(this,arguments)}let _i=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=st(f)}verifyPhoneNumber(f,_){return Ui(this.auth,f,(0,Y.m9)(_))}static credential(f,_){return $i._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:k}=f;return _&&k?$i._fromTokenResponse(_,k):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Zi(g,c){return c?ae(c):(Te(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class So extends Sn{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Hn(c,this._buildIdpRequest())}_linkToIdToken(c,f){return Hn(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return Hn(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function Du(g){return ze(g.auth,new So(g),g.bypassAuthState)}function wt(g){const{auth:c,user:f}=g;return Te(f,c,"internal-error"),q(f,new So(g),g.bypassAuthState)}function ll(g){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,p.Z)(function*(g){const{auth:c,user:f}=g;return Te(f,c,"internal-error"),ur(f,new So(g),g.bypassAuthState)})).apply(this,arguments)}class Ei{constructor(c,f,_,k,J=!1){this.auth=c,this.resolver=_,this.user=k,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(_,k){c.pendingPromise={resolve:_,reject:k};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(J){c.reject(J)}});return function(_,k){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:_,sessionId:k,postBody:J,tenantId:be,error:Ze,type:Ct}=c;if(Ze)return void f.reject(Ze);const Yt={auth:f.auth,requestUri:_,sessionId:k,tenantId:be||void 0,postBody:J||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ct)(Yt))}catch(pn){f.reject(pn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Du;case"linkViaPopup":case"linkViaRedirect":return ll;case"reauthViaPopup":case"reauthViaRedirect":return wt;default:V(this.auth,"internal-error")}}resolve(c){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const to=new Ht(2e3,1e4);function Mo(){return(Mo=(0,p.Z)(function*(g,c,f){const _=st(g);Re(g,c,yi);const k=Zi(_,f);return new no(_,"signInViaPopup",c,k).executeNotNull()})).apply(this,arguments)}function xo(){return(xo=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g);Re(_.auth,c,yi);const k=Zi(_.auth,f);return new no(_.auth,"reauthViaPopup",c,k,_).executeNotNull()})).apply(this,arguments)}function Ro(){return(Ro=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g);Re(_.auth,c,yi);const k=Zi(_.auth,f);return new no(_.auth,"linkViaPopup",c,k,_).executeNotNull()})).apply(this,arguments)}let no=(()=>{class g extends Ei{constructor(f,_,k,J,be){super(f,_,J,be),this.provider=k,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const _=yield f.execute();return Te(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,p.Z)(function*(){Z(1===f.filter.length,"Popup operations only handle one event");const _=Ho();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(k=>{f.reject(k)}),f.resolver._isIframeWebStorageSupported(f.auth,k=>{k||f.reject(Q(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Q(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,k;this.pollId=(null===(k=null===(_=this.authWindow)||void 0===_?void 0:_.window)||void 0===k?void 0:k.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Q(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,to.get())};f()}}return g.currentPopupAction=null,g})();const Ps=new Map;class dl extends Ei{constructor(c,f,_=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let _=Ps.get(f.auth._key());if(!_){try{const J=(yield function xa(g,c){return sa.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;_=()=>Promise.resolve(J)}catch(k){_=()=>Promise.reject(k)}Ps.set(f.auth._key(),_)}return f.bypassAuthState||Ps.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,_=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(_,c);if("unknown"!==c.type){if(c.eventId){const k=yield _.auth._redirectUserForId(c.eventId);if(k)return _.user=k,f().call(_,c);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function sa(){return(sa=(0,p.Z)(function*(g,c){const f=R(c),_=T(g);if(!(yield _._isAvailable()))return!1;const k="true"===(yield _._get(f));return yield _._remove(f),k})).apply(this,arguments)}function Ko(g,c){return Za.apply(this,arguments)}function Za(){return(Za=(0,p.Z)(function*(g,c){return T(g)._set(R(c),"true")})).apply(this,arguments)}function T(g){return ae(g._redirectPersistence)}function R(g){return We("pendingRedirect",g.config.apiKey,g.name)}function De(){return(De=(0,p.Z)(function*(g,c,f){const _=st(g);Re(g,c,yi);const k=Zi(_,f);return yield Ko(k,_),k._openRedirect(_,c,"signInViaRedirect")})).apply(this,arguments)}function Ot(){return(Ot=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g);Re(_.auth,c,yi);const k=Zi(_.auth,f);yield Ko(k,_.auth);const J=yield Ya(_);return k._openRedirect(_.auth,c,"reauthViaRedirect",J)})).apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g);Re(_.auth,c,yi);const k=Zi(_.auth,f);yield H(!1,_,c.providerId),yield Ko(k,_.auth);const J=yield Ya(_);return k._openRedirect(_.auth,c,"linkViaRedirect",J)})).apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(g,c){return yield st(g)._initializationPromise,hi(g,c,!1)})).apply(this,arguments)}function hi(g,c){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,p.Z)(function*(g,c,f=!1){const _=st(g),k=Zi(_,c),be=yield new dl(_,k,f).execute();return be&&!f&&(delete be.user._redirectEventId,yield _._persistUserIfCurrent(be.user),yield _._setRedirectUser(null,c)),be})).apply(this,arguments)}function Ya(g){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(g){const c=Ho(`${g.uid}:::`);return g._redirectEventId=c,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),c})).apply(this,arguments)}class Fs{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(c,_)&&(f=!0,this.sendToConsumer(c,_),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Qc(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fl(g);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var _;if(c.error&&!fl(c)){const k=(null===(_=c.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(Q(this.auth,k))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const _=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&_}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(go(c))}saveEventToCache(c){this.cachedEventUids.add(go(c)),this.lastProcessedEventTime=Date.now()}}function go(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(c=>c).join("-")}function fl({type:g,error:c}){return"unknown"===g&&"auth/no-auth-event"===(null==c?void 0:c.code)}function pl(g){return fi.apply(this,arguments)}function fi(){return(fi=(0,p.Z)(function*(g,c={}){return sn(g,"GET","/v1/projects",c)})).apply(this,arguments)}const Kd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tf=/^https?/;function oa(){return(oa=(0,p.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:c}=yield pl(g);for(const f of c)try{if(gl(f))return}catch(_){}V(g,"unauthorized-domain")})).apply(this,arguments)}function gl(g){const c=Nt(),{protocol:f,hostname:_}=new URL(c);if(g.startsWith("chrome-extension://")){const be=new URL(g);return""===be.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&be.hostname===_}if(!Tf.test(f))return!1;if(Kd.test(g))return _===g;const k=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(_)}const Sf=new Ht(3e4,6e4);function Mf(){const g=_r().___jsl;if(null==g?void 0:g.H)for(const c of Object.keys(g.H))if(g.H[c].r=g.H[c].r||[],g.H[c].L=g.H[c].L||[],g.H[c].r=[...g.H[c].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Oo=null;function ml(g){return Oo=Oo||function qd(g){return new Promise((c,f)=>{var _,k,J;function be(){Mf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Mf(),f(Q(g,"network-request-failed"))},timeout:Sf.get()})}if(null===(k=null===(_=_r().gapi)||void 0===_?void 0:_.iframes)||void 0===k?void 0:k.Iframe)c(gapi.iframes.getContext());else{if(!(null===(J=_r().gapi)||void 0===J?void 0:J.load)){const Ze=Go("iframefcb");return _r()[Ze]=()=>{gapi.load?be():f(Q(g,"network-request-failed"))},is(`https://apis.google.com/js/api.js?onload=${Ze}`).catch(Ct=>f(Ct))}be()}}).catch(c=>{throw Oo=null,c})}(g),Oo}const xf=new Ht(5e3,15e3),mo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ic=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function No(g){const c=g.config;Te(c.authDomain,g,"auth-domain-config-required");const f=c.emulator?Dt(c,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,_={apiKey:c.apiKey,appName:g.name,v:ve.SDK_VERSION},k=ic.get(g.config.apiHost);k&&(_.eid=k);const J=g._getFrameworks();return J.length&&(_.fw=J.join(",")),`${f}?${(0,Y.xO)(_).slice(1)}`}function bu(){return bu=(0,p.Z)(function*(g){const c=yield ml(g),f=_r().gapi;return Te(f,g,"internal-error"),c.open({where:document.body,url:No(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mo,dontclear:!0},_=>new Promise(function(){var k=(0,p.Z)(function*(J,be){yield _.restyle({setHideOnLeave:!1});const Ze=Q(g,"network-request-failed"),Ct=_r().setTimeout(()=>{be(Ze)},xf.get());function Yt(){_r().clearTimeout(Ct),J(_)}_.ping(Yt).then(Yt,()=>{be(Ze)})});return function(J,be){return k.apply(this,arguments)}}()))}),bu.apply(this,arguments)}const Qd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oc{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(c){}}}function ac(g,c,f,_,k,J){Te(g.config.authDomain,g,"auth-domain-config-required"),Te(g.config.apiKey,g,"invalid-api-key");const be={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:ve.SDK_VERSION,eventId:k};if(c instanceof yi){c.setDefaultLanguage(g.languageCode),be.providerId=c.providerId||"",(0,Y.xb)(c.getCustomParameters())||(be.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Ct,Yt]of Object.entries(J||{}))be[Ct]=Yt}if(c instanceof Vr){const Ct=c.getScopes().filter(Yt=>""!==Yt);Ct.length>0&&(be.scopes=Ct.join(","))}g.tenantId&&(be.tid=g.tenantId);const Ze=be;for(const Ct of Object.keys(Ze))void 0===Ze[Ct]&&delete Ze[Ct];return`${function Xd({config:g}){return g.emulator?Dt(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,Y.xO)(Ze).slice(1)}`}const qo="webStorageSupport";class vl extends class Rf{constructor(c){this.factorId=c}_process(c,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,_);case"signin":return this._finalizeSignIn(c,f.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new vl(c)}_finalizeEnroll(c,f,_){return function ci(g,c){return sn(g,"POST","/v2/accounts/mfaEnrollment:finalize",Qt(g,c))}(c,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function Kt(g,c){return sn(g,"POST","/v2/accounts/mfaSignIn:finalize",Qt(g,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Sg=(()=>{class g{constructor(){}static assertion(f){return vl._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var Of="@firebase/auth",eh="0.19.12";class Ja{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(_=>{var k;c((null===(k=_)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Oa(){return window}function eu(){return(eu=(0,p.Z)(function*(g,c,f){var _;const{BuildInfo:k}=Oa();Z(c.sessionId,"AuthEvent did not contain a session ID");const J=yield Mg(c.sessionId),be={};return Er()?be.ibi=k.packageName:kn()?be.apn=k.packageName:V(g,"operation-not-supported-in-this-environment"),k.displayName&&(be.appDisplayName=k.displayName),be.sessionId=J,ac(g,f,c.type,void 0,null!==(_=c.eventId)&&void 0!==_?_:void 0,be)})).apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(g){const{BuildInfo:c}=Oa(),f={};Er()?f.iosBundleId=c.packageName:kn()?f.androidPackageName=c.packageName:V(g,"operation-not-supported-in-this-environment"),yield pl(g,f)})).apply(this,arguments)}function tu(){return(tu=(0,p.Z)(function*(g,c,f){const{cordova:_}=Oa();let k=()=>{};try{yield new Promise((J,be)=>{let Ze=null;function Ct(){var Bt;J();const ri=null===(Bt=_.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof ri&&ri(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function Yt(){Ze||(Ze=window.setTimeout(()=>{be(Q(g,"redirect-cancelled-by-user"))},2e3))}function pn(){"visible"===(null==document?void 0:document.visibilityState)&&Yt()}c.addPassiveListener(Ct),document.addEventListener("resume",Yt,!1),kn()&&document.addEventListener("visibilitychange",pn,!1),k=()=>{c.removePassiveListener(Ct),document.removeEventListener("resume",Yt,!1),document.removeEventListener("visibilitychange",pn,!1),Ze&&window.clearTimeout(Ze)}})}finally{k()}})).apply(this,arguments)}function Mg(g){return uc.apply(this,arguments)}function uc(){return(uc=(0,p.Z)(function*(g){const c=xg(g),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function xg(g){if(Z(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(g);const c=new ArrayBuffer(g.length),f=new Uint8Array(c);for(let _=0;_<g.length;_++)f[_]=g.charCodeAt(_);return f}!function th(g){(0,ve._registerComponent)(new Ae.wA("auth",(c,{options:f})=>{const _=c.getProvider("app").getImmediate(),k=c.getProvider("heartbeat"),{apiKey:J,authDomain:be}=_.options;return((Ze,Ct)=>{Te(J&&!J.includes(":"),"invalid-api-key",{appName:Ze.name}),Te(!(null==be?void 0:be.includes(":")),"argument-error",{appName:Ze.name});const Yt={apiKey:J,authDomain:be,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qr(g)},pn=new Cr(Ze,Ct,Yt);return function Ne(g,c){const f=(null==c?void 0:c.persistence)||[],_=(Array.isArray(f)?f:[f]).map(ae);(null==c?void 0:c.errorMap)&&g._updateErrorMap(c.errorMap),g._initializeWithPersistence(_,null==c?void 0:c.popupRedirectResolver)}(pn,f),pn})(_,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,_)=>{c.getProvider("auth-internal").initialize()})),(0,ve._registerComponent)(new Ae.wA("auth-internal",c=>{const f=st(c.getProvider("auth").getImmediate());return new Ja(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ve.registerVersion)(Of,eh,function Xa(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,ve.registerVersion)(Of,eh,"esm2017")}("Browser");class cc extends Fs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function rh(g){return Il.apply(this,arguments)}function Il(){return(Il=(0,p.Z)(function*(g){const c=yield Cl()._get(td(g));return c&&(yield Cl()._remove(td(g))),c})).apply(this,arguments)}function Dl(){const g=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const _=Math.floor(Math.random()*c.length);g.push(c.charAt(_))}return g.join("")}function Cl(){return ae(hr)}function td(g){return We("authEvent",g.config.apiKey,g.name)}function bl(g){if(!(null==g?void 0:g.includes("?")))return{};const[c,...f]=g.split("?");return(0,Y.zd)(f.join("?"))}function Tl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Q("no-auth-event")}}function hc(){var g;return(null===(g=null==self?void 0:self.location)||void 0===g?void 0:g.protocol)||null}function sh(g=(0,Y.z$)()){return!("file:"!==hc()&&"ionic:"!==hc()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mn(){try{const g=self.localStorage,c=Ho();if(g)return g.setItem(c,"1"),g.removeItem(c),!function Al(g=(0,Y.z$)()){return function fc(){return(0,Y.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Rg(g=(0,Y.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,Y.hl)()}catch(g){return Sl()&&(0,Y.hl)()}return!1}function Sl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ru(){return(function vo(){return"http:"===hc()||"https:"===hc()}()||(0,Y.ru)()||sh())&&!function rd(){return(0,Y.b$)()||(0,Y.UG)()}()&&Mn()&&!Sl()}function iu(){return sh()&&"undefined"!=typeof document}function Zo(){return(Zo=(0,p.Z)(function*(){return!!iu()&&new Promise(g=>{const c=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),g(!0)})})})).apply(this,arguments)}const Ls={LOCAL:"local",NONE:"none",SESSION:"session"},Nu=Te,id="persistence";function Ml(g){return sd.apply(this,arguments)}function sd(){return(sd=(0,p.Z)(function*(g){yield g._initializationPromise;const c=uh(),f=We(id,g.config.apiKey,g.name);c&&c.setItem(f,g._getPersistence())})).apply(this,arguments)}function uh(){var g;try{return(null===(g=function pc(){return"undefined"!=typeof window?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch(c){return null}}const xl=Te;class ko{constructor(){this.browserResolver=ae(class Su{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xs,this._completeRedirectFn=hi}_openPopup(c,f,_,k){var J=this;return(0,p.Z)(function*(){var be;Z(null===(be=J.eventManagers[c._key()])||void 0===be?void 0:be.manager,"_initialize() not called before _openPopup()");const Ze=ac(c,f,_,Nt(),k);return function Au(g,c,f,_=500,k=600){const J=Math.max((window.screen.availHeight-k)/2,0).toString(),be=Math.max((window.screen.availWidth-_)/2,0).toString();let Ze="";const Ct=Object.assign(Object.assign({},Qd),{width:_.toString(),height:k.toString(),top:J,left:be}),Yt=(0,Y.z$)().toLowerCase();f&&(Ze=Zt(Yt)?"_blank":f),$t(Yt)&&(c=c||"http://localhost",Ct.scrollbars="yes");const pn=Object.entries(Ct).reduce((ri,[so,Vs])=>`${ri}${so}=${Vs},`,"");if(function es(g=(0,Y.z$)()){var c;return Er(g)&&!!(null===(c=window.navigator)||void 0===c?void 0:c.standalone)}(Yt)&&"_self"!==Ze)return function Jd(g,c){const f=document.createElement("a");f.href=g,f.target=c;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(c||"",Ze),new oc(null);const Bt=window.open(c||"",Ze,pn);Te(Bt,g,"popup-blocked");try{Bt.focus()}catch(ri){}return new oc(Bt)}(c,Ze,Ho())})()}_openRedirect(c,f,_,k){var J=this;return(0,p.Z)(function*(){return yield J._originValidation(c),function al(g){_r().location.href=g}(ac(c,f,_,Nt(),k)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:k,promise:J}=this.eventManagers[f];return k?Promise.resolve(k):(Z(J,"If manager is not set, promise should be"),J)}const _=this.initAndGetManager(c);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const _=yield function sc(g){return bu.apply(this,arguments)}(c),k=new Fs(c);return _.register("authEvent",J=>(Te(null==J?void 0:J.authEvent,c,"invalid-auth-event"),{status:k.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:k},f.iframes[c._key()]=_,k})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(qo,{type:qo},k=>{var J;const be=null===(J=null==k?void 0:k[0])||void 0===J?void 0:J[qo];void 0!==be&&f(!!be),V(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Af(g){return oa.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return wr()||mn()||Er()}}),this.cordovaResolver=ae(class Na{constructor(){this._redirectPersistence=Xs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=hi}_initialize(c){var f=this;return(0,p.Z)(function*(){const _=c._key();let k=f.eventManagers.get(_);return k||(k=new cc(c),f.eventManagers.set(_,k),f.attachCallbackListeners(c,k)),k})()}_openPopup(c){V(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,_,k){var J=this;return(0,p.Z)(function*(){!function wl(g){var c,f,_,k,J,be,Ze,Ct,Yt,pn;const Bt=Oa();Te("function"==typeof(null===(c=null==Bt?void 0:Bt.universalLinks)||void 0===c?void 0:c.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(void 0!==(null===(f=null==Bt?void 0:Bt.BuildInfo)||void 0===f?void 0:f.packageName),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(J=null===(k=null===(_=null==Bt?void 0:Bt.cordova)||void 0===_?void 0:_.plugins)||void 0===k?void 0:k.browsertab)||void 0===J?void 0:J.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Ct=null===(Ze=null===(be=null==Bt?void 0:Bt.cordova)||void 0===be?void 0:be.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===Ct?void 0:Ct.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(pn=null===(Yt=null==Bt?void 0:Bt.cordova)||void 0===Yt?void 0:Yt.InAppBrowser)||void 0===pn?void 0:pn.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const be=yield J._initialize(c);yield be.initialized(),be.resetRedirect(),function hl(){Ps.clear()}(),yield J._originValidation(c);const Ze=function nu(g,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:Dl(),postBody:null,tenantId:g.tenantId,error:Q(g,"no-auth-event")}}(c,_,k);yield function Ru(g,c){return Cl()._set(td(g),c)}(c,Ze);const Ct=yield function nh(g,c,f){return eu.apply(this,arguments)}(c,Ze,f),Yt=yield function El(g){const{cordova:c}=Oa();return new Promise(f=>{c.plugins.browsertab.isAvailable(_=>{let k=null;_?c.plugins.browsertab.openUrl(g):k=c.InAppBrowser.open(g,function Yr(g=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(k)})})}(Ct);return function wi(g,c,f){return tu.apply(this,arguments)}(c,be,Yt)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function xu(g){return yo.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:_,handleOpenURL:k,BuildInfo:J}=Oa(),be=setTimeout((0,p.Z)(function*(){yield rh(c),f.onEvent(Tl())}),500),Ze=function(){var pn=(0,p.Z)(function*(Bt){clearTimeout(be);const ri=yield rh(c);let so=null;ri&&(null==Bt?void 0:Bt.url)&&(so=function ih(g,c){var f,_;const k=function Zn(g){const c=bl(g),f=c.link?decodeURIComponent(c.link):void 0,_=bl(f).link,k=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return bl(k).link||k||_||f||g}(c);if(k.includes("/__/auth/callback")){const J=bl(k),be=J.firebaseError?function Ii(g){try{return JSON.parse(g)}catch(c){return null}}(decodeURIComponent(J.firebaseError)):null,Ze=null===(_=null===(f=null==be?void 0:be.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],Ct=Ze?Q(Ze):null;return Ct?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Ct,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:k,postBody:null}}return null}(ri,Bt.url)),f.onEvent(so||Tl())});return function(ri){return pn.apply(this,arguments)}}();void 0!==_&&"function"==typeof _.subscribe&&_.subscribe(null,Ze);const Ct=k,Yt=`${J.packageName.toLowerCase()}://`;Oa().handleOpenURL=function(){var pn=(0,p.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(Yt)&&Ze({url:Bt}),"function"==typeof Ct)try{Ct(Bt)}catch(ri){console.error(ri)}});return function(Bt){return pn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Xs,this._completeRedirectFn=hi}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,_,k){var J=this;return(0,p.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openPopup(c,f,_,k)})()}_openRedirect(c,f,_,k){var J=this;return(0,p.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openRedirect(c,f,_,k)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return iu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function xi(){return Zo.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function lh(g){return g.unwrap()}function Rl(g){return ku(g)}function ku(g){const{_tokenResponse:c}=g instanceof Y.ZR?g.customData:g;if(!c)return null;if(!(g instanceof Y.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return _i.credentialFromResult(g);const f=c.providerId;if(!f||"password"===f)return null;let _;switch(f){case"google.com":_=Gi;break;case"facebook.com":_=ts;break;case"github.com":_=As;break;case"twitter.com":_=us;break;default:const{oauthIdToken:k,oauthAccessToken:J,oauthTokenSecret:be,pendingToken:Ze,nonce:Ct}=c;return J||be||k||Ze?Ze?f.startsWith("saml.")?gs._create(f,Ze):we._fromParams({providerId:f,signInMethod:f,pendingToken:Ze,idToken:k,accessToken:J}):new ps(f).credential({idToken:k,accessToken:J,rawNonce:Ct}):null}return g instanceof Y.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function Pr(g,c){return c.catch(f=>{throw f instanceof Y.ZR&&function ch(g,c){var f;const _=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===c.code)c.resolver=new Nl(g,function Bo(g,c){var f;const _=(0,Y.m9)(g),k=c;return Te(c.customData.operationType,_,"argument-error"),Te(null===(f=k.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),lo._fromError(_,k)}(g,c));else if(_){const k=ku(c),J=c;k&&(J.credential=k,J.tenantId=_.tenantId||void 0,J.email=_.email||void 0,J.phoneNumber=_.phoneNumber||void 0)}}(g,f),f}).then(f=>{const k=f.user;return{operationType:f.operationType,credential:Rl(f),additionalUserInfo:jr(f),user:Yo.getOrCreate(k)}})}function Ol(g,c){return gc.apply(this,arguments)}function gc(){return(gc=(0,p.Z)(function*(g,c){const f=yield c;return{verificationId:f.verificationId,confirm:_=>Pr(g,f.confirm(_))}})).apply(this,arguments)}class Nl{constructor(c,f){this.resolver=f,this.auth=function Qi(g){return g.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Pr(lh(this.auth),this.resolver.resolveSignIn(c))}}class Yo{constructor(c){this._delegate=c,this.multiFactor=function To(g){const c=(0,Y.m9)(g);return Os.has(c)||Os.set(c,Ki._fromUser(c)),Os.get(c)}(c)}static getOrCreate(c){return Yo.USER_MAP.has(c)||Yo.USER_MAP.set(c,new Yo(c)),Yo.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return Pr(f.auth,Un(f._delegate,c))})()}linkWithPhoneNumber(c,f){var _=this;return(0,p.Z)(function*(){return Ol(_.auth,function ul(g,c,f){return ws.apply(this,arguments)}(_._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return Pr(f.auth,function cl(g,c,f){return Ro.apply(this,arguments)}(f._delegate,c,ko))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Ml(st(f.auth)),function qt(g,c,f){return function fn(g,c,f){return qn.apply(this,arguments)}(g,c,f)}(f._delegate,c,ko)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return Pr(f.auth,En(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Ol(this.auth,function ni(g,c,f){return Ao.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return Pr(this.auth,function zo(g,c,f){return xo.apply(this,arguments)}(this._delegate,c,ko))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Ml(st(f.auth)),function Be(g,c,f){return function ft(g,c,f){return Ot.apply(this,arguments)}(g,c,f)}(f._delegate,c,ko)})()}sendEmailVerification(c){return function ds(g,c){return ao.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function Si(g,c){return Ks.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function yu(g,c){return Vo((0,Y.m9)(g),c,null)}(this._delegate,c)}updatePassword(c){return function wa(g,c){return Vo((0,Y.m9)(g),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Ma(g,c){return Wo.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function ta(g,c){return na.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function uo(g,c,f){return Ea.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yo.USER_MAP=new WeakMap;const Pu=Te;let mc=(()=>{class g{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=f.options;Pu(k,"invalid-api-key",{appName:f.name}),Pu(k,"invalid-api-key",{appName:f.name});const J="undefined"!=typeof window?ko:void 0;this._delegate=_.initialize({options:{persistence:Nf(k,f.name),popupRedirectResolver:J}}),this._delegate._updateErrorMap(Xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function en(g,c,f){const _=st(g);Te(_._canInitEmulator,_,"emulator-config-failed"),Te(/^https?:\/\//.test(c),_,"invalid-emulator-scheme");const k=!!(null==f?void 0:f.disableWarnings),J=zn(c),{host:be,port:Ze}=function Jr(g){const c=zn(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(c.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(_);if(k){const J=k[1];return{host:J,port:tr(_.substr(J.length+1))}}{const[J,be]=_.split(":");return{host:J,port:tr(be)}}}(c);_.config.emulator={url:`${J}//${be}${null===Ze?"":`:${Ze}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:be,port:Ze,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function Gr(){function g(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,_)}applyActionCode(f){return function A(g,c){return P.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Le(this._delegate,f)}confirmPasswordReset(f,_){return function O(g,c,f){return S.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var k=this;return(0,p.Z)(function*(){return Pr(k._delegate,function zr(g,c,f){return Br.apply(this,arguments)}(k._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Do(g,c){return xs.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function mu(g,c){const f=Ti.parseLink(c);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Pu(ru(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function Tn(g,c){return br.apply(this,arguments)}(f._delegate,ko);return _?Pr(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function ss(g,c){st(g)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,_,k){const{next:J,error:be,complete:Ze}=dh(f,_,k);return this._delegate.onAuthStateChanged(J,be,Ze)}onIdTokenChanged(f,_,k){const{next:J,error:be,complete:Ze}=dh(f,_,k);return this._delegate.onIdTokenChanged(J,be,Ze)}sendSignInLinkToEmail(f,_){return function cs(g,c,f){return Fo.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function qs(g,c,f){return Zs.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,p.Z)(function*(){let k;switch(function oh(g,c){Nu(Object.values(Ls).includes(c),g,"invalid-persistence-type"),(0,Y.b$)()?Nu(c!==Ls.SESSION,g,"unsupported-persistence-type"):(0,Y.UG)()?Nu(c===Ls.NONE,g,"unsupported-persistence-type"):Sl()?Nu(c===Ls.NONE||c===Ls.LOCAL&&(0,Y.hl)(),g,"unsupported-persistence-type"):Nu(c===Ls.NONE||Mn(),g,"unsupported-persistence-type")}(_._delegate,f),f){case Ls.SESSION:k=Xs;break;case Ls.LOCAL:k=(yield ae(It)._isAvailable())?It:hr;break;case Ls.NONE:k=me;break;default:return V("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Pr(this._delegate,function Ms(g){return ms.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Pr(this._delegate,yt(this._delegate,f))}signInWithCustomToken(f){return Pr(this._delegate,function ki(g,c){return ei.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return Pr(this._delegate,function Ys(g,c,f){return yt((0,Y.m9)(g),as.credential(c,f))}(this._delegate,f,_))}signInWithEmailLink(f,_){return Pr(this._delegate,function _a(g,c,f){return oo.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return Ol(this._delegate,function zd(g,c,f){return Fn.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,p.Z)(function*(){return Pu(ru(),_._delegate,"operation-not-supported-in-this-environment"),Pr(_._delegate,function po(g,c,f){return Mo.apply(this,arguments)}(_._delegate,f,ko))})()}signInWithRedirect(f){var _=this;return(0,p.Z)(function*(){return Pu(ru(),_._delegate,"operation-not-supported-in-this-environment"),yield Ml(_._delegate),function z(g,c,f){return function ie(g,c,f){return De.apply(this,arguments)}(g,c,f)}(_._delegate,f,ko)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function hn(g,c){return ui.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Ls,g})();function dh(g,c,f){let _=g;"function"!=typeof g&&({next:_,error:c,complete:f}=g);const k=_;return{next:be=>k(be&&Yo.getOrCreate(be)),error:c,complete:f}}function Nf(g,c){const f=function ah(g,c){const f=uh();if(!f)return[];const _=We(id,g,c);switch(f.getItem(_)){case Ls.NONE:return[me];case Ls.LOCAL:return[It,Xs];case Ls.SESSION:return[Xs];default:return[]}}(g,c);if("undefined"!=typeof self&&!f.includes(It)&&f.push(It),"undefined"!=typeof window)for(const _ of[hr,Xs])f.includes(_)||f.push(_);return f.includes(me)||f.push(me),f}class su{constructor(){this.providerId="phone",this._delegate=new _i(lh(K.Z.auth()))}static credential(c,f){return _i.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}su.PHONE_SIGN_IN_METHOD=_i.PHONE_SIGN_IN_METHOD,su.PROVIDER_ID=_i.PROVIDER_ID;const od=Te;class kf{constructor(c,f,_=K.Z.app()){var k;od(null===(k=_.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Wd(c,f,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fh(g){g.INTERNAL.registerComponent(new Ae.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),_=c.getProvider("auth");return new mc(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:as,FacebookAuthProvider:ts,GithubAuthProvider:As,GoogleAuthProvider:Gi,OAuthProvider:ps,SAMLAuthProvider:Ai,PhoneAuthProvider:su,PhoneMultiFactorGenerator:Sg,RecaptchaVerifier:kf,TwitterAuthProvider:us,Auth:mc,AuthCredential:Sn,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.12")}(K.Z)},1135:(bt,$e,U)=>{U.d($e,{X:()=>K});var p=U(7579);class K extends p.x{constructor(ve){super(),this._value=ve}get value(){return this.getValue()}_subscribe(ve){const fe=super._subscribe(ve);return!fe.closed&&ve.next(this._value),fe}getValue(){const{hasError:ve,thrownError:fe,_value:Ie}=this;if(ve)throw fe;return this._throwIfClosed(),Ie}next(ve){super.next(this._value=ve)}}},8306:(bt,$e,U)=>{U.d($e,{y:()=>oe});var p=U(2961),K=U(727),Y=U(8822),ve=U(4671);var Ae=U(2416),Me=U(576),Se=U(2806);let oe=(()=>{class Ke{constructor(at){at&&(this._subscribe=at)}lift(at){const Ue=new Ke;return Ue.source=this,Ue.operator=at,Ue}subscribe(at,Ue,Fe){const pt=function lt(Ke){return Ke&&Ke instanceof p.Lv||function Ce(Ke){return Ke&&(0,Me.m)(Ke.next)&&(0,Me.m)(Ke.error)&&(0,Me.m)(Ke.complete)}(Ke)&&(0,K.Nn)(Ke)}(at)?at:new p.Hp(at,Ue,Fe);return(0,Se.x)(()=>{const{operator:j,source:V}=this;pt.add(j?j.call(pt,V):V?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(at){try{return this._subscribe(at)}catch(Ue){at.error(Ue)}}forEach(at,Ue){return new(Ue=se(Ue))((Fe,pt)=>{const j=new p.Hp({next:V=>{try{at(V)}catch(Q){pt(Q),j.unsubscribe()}},error:pt,complete:Fe});this.subscribe(j)})}_subscribe(at){var Ue;return null===(Ue=this.source)||void 0===Ue?void 0:Ue.subscribe(at)}[Y.L](){return this}pipe(...at){return function Ie(Ke){return 0===Ke.length?ve.y:1===Ke.length?Ke[0]:function(at){return Ke.reduce((Ue,Fe)=>Fe(Ue),at)}}(at)(this)}toPromise(at){return new(at=se(at))((Ue,Fe)=>{let pt;this.subscribe(j=>pt=j,j=>Fe(j),()=>Ue(pt))})}}return Ke.create=Xe=>new Ke(Xe),Ke})();function se(Ke){var Xe;return null!==(Xe=null!=Ke?Ke:Ae.v.Promise)&&void 0!==Xe?Xe:Promise}},7579:(bt,$e,U)=>{U.d($e,{x:()=>Ae});var p=U(8306),K=U(727);const ve=(0,U(3888).d)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=U(8737),Ie=U(2806);let Ae=(()=>{class Se extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(se){const Ce=new Me(this,this);return Ce.operator=se,Ce}_throwIfClosed(){if(this.closed)throw new ve}next(se){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ce of this.currentObservers)Ce.next(se)}})}error(se){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=se;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().error(se)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:se}=this;for(;se.length;)se.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var se;return(null===(se=this.observers)||void 0===se?void 0:se.length)>0}_trySubscribe(se){return this._throwIfClosed(),super._trySubscribe(se)}_subscribe(se){return this._throwIfClosed(),this._checkFinalizedStatuses(se),this._innerSubscribe(se)}_innerSubscribe(se){const{hasError:Ce,isStopped:lt,observers:Ke}=this;return Ce||lt?K.Lc:(this.currentObservers=null,Ke.push(se),new K.w0(()=>{this.currentObservers=null,(0,fe.P)(Ke,se)}))}_checkFinalizedStatuses(se){const{hasError:Ce,thrownError:lt,isStopped:Ke}=this;Ce?se.error(lt):Ke&&se.complete()}asObservable(){const se=new p.y;return se.source=this,se}}return Se.create=(oe,se)=>new Me(oe,se),Se})();class Me extends Ae{constructor(oe,se){super(),this.destination=oe,this.source=se}next(oe){var se,Ce;null===(Ce=null===(se=this.destination)||void 0===se?void 0:se.next)||void 0===Ce||Ce.call(se,oe)}error(oe){var se,Ce;null===(Ce=null===(se=this.destination)||void 0===se?void 0:se.error)||void 0===Ce||Ce.call(se,oe)}complete(){var oe,se;null===(se=null===(oe=this.destination)||void 0===oe?void 0:oe.complete)||void 0===se||se.call(oe)}_subscribe(oe){var se,Ce;return null!==(Ce=null===(se=this.source)||void 0===se?void 0:se.subscribe(oe))&&void 0!==Ce?Ce:K.Lc}}},2961:(bt,$e,U)=>{U.d($e,{Hp:()=>at,Lv:()=>Ce});var p=U(576),K=U(727),Y=U(2416),ve=U(7849);function fe(){}const Ie=Se("C",void 0,void 0);function Se(V,Q,de){return{kind:V,value:Q,error:de}}var oe=U(3410),se=U(2806);class Ce extends K.w0{constructor(Q){super(),this.isStopped=!1,Q?(this.destination=Q,(0,K.Nn)(Q)&&Q.add(this)):this.destination=j}static create(Q,de,Re){return new at(Q,de,Re)}next(Q){this.isStopped?pt(function Me(V){return Se("N",V,void 0)}(Q),this):this._next(Q)}error(Q){this.isStopped?pt(function Ae(V){return Se("E",void 0,V)}(Q),this):(this.isStopped=!0,this._error(Q))}complete(){this.isStopped?pt(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Q){this.destination.next(Q)}_error(Q){try{this.destination.error(Q)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const lt=Function.prototype.bind;function Ke(V,Q){return lt.call(V,Q)}class Xe{constructor(Q){this.partialObserver=Q}next(Q){const{partialObserver:de}=this;if(de.next)try{de.next(Q)}catch(Re){Ue(Re)}}error(Q){const{partialObserver:de}=this;if(de.error)try{de.error(Q)}catch(Re){Ue(Re)}else Ue(Q)}complete(){const{partialObserver:Q}=this;if(Q.complete)try{Q.complete()}catch(de){Ue(de)}}}class at extends Ce{constructor(Q,de,Re){let ke;if(super(),(0,p.m)(Q)||!Q)ke={next:null!=Q?Q:void 0,error:null!=de?de:void 0,complete:null!=Re?Re:void 0};else{let Te;this&&Y.v.useDeprecatedNextContext?(Te=Object.create(Q),Te.unsubscribe=()=>this.unsubscribe(),ke={next:Q.next&&Ke(Q.next,Te),error:Q.error&&Ke(Q.error,Te),complete:Q.complete&&Ke(Q.complete,Te)}):ke=Q}this.destination=new Xe(ke)}}function Ue(V){Y.v.useDeprecatedSynchronousErrorHandling?(0,se.O)(V):(0,ve.h)(V)}function pt(V,Q){const{onStoppedNotification:de}=Y.v;de&&oe.z.setTimeout(()=>de(V,Q))}const j={closed:!0,next:fe,error:function Fe(V){throw V},complete:fe}},727:(bt,$e,U)=>{U.d($e,{Lc:()=>Ie,w0:()=>fe,Nn:()=>Ae});var p=U(576);const Y=(0,U(3888).d)(Se=>function(se){Se(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((Ce,lt)=>`${lt+1}) ${Ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se});var ve=U(8737);class fe{constructor(oe){this.initialTeardown=oe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let oe;if(!this.closed){this.closed=!0;const{_parentage:se}=this;if(se)if(this._parentage=null,Array.isArray(se))for(const Ke of se)Ke.remove(this);else se.remove(this);const{initialTeardown:Ce}=this;if((0,p.m)(Ce))try{Ce()}catch(Ke){oe=Ke instanceof Y?Ke.errors:[Ke]}const{_finalizers:lt}=this;if(lt){this._finalizers=null;for(const Ke of lt)try{Me(Ke)}catch(Xe){oe=null!=oe?oe:[],Xe instanceof Y?oe=[...oe,...Xe.errors]:oe.push(Xe)}}if(oe)throw new Y(oe)}}add(oe){var se;if(oe&&oe!==this)if(this.closed)Me(oe);else{if(oe instanceof fe){if(oe.closed||oe._hasParent(this))return;oe._addParent(this)}(this._finalizers=null!==(se=this._finalizers)&&void 0!==se?se:[]).push(oe)}}_hasParent(oe){const{_parentage:se}=this;return se===oe||Array.isArray(se)&&se.includes(oe)}_addParent(oe){const{_parentage:se}=this;this._parentage=Array.isArray(se)?(se.push(oe),se):se?[se,oe]:oe}_removeParent(oe){const{_parentage:se}=this;se===oe?this._parentage=null:Array.isArray(se)&&(0,ve.P)(se,oe)}remove(oe){const{_finalizers:se}=this;se&&(0,ve.P)(se,oe),oe instanceof fe&&oe._removeParent(this)}}fe.EMPTY=(()=>{const Se=new fe;return Se.closed=!0,Se})();const Ie=fe.EMPTY;function Ae(Se){return Se instanceof fe||Se&&"closed"in Se&&(0,p.m)(Se.remove)&&(0,p.m)(Se.add)&&(0,p.m)(Se.unsubscribe)}function Me(Se){(0,p.m)(Se)?Se():Se.unsubscribe()}},2416:(bt,$e,U)=>{U.d($e,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(bt,$e,U)=>{U.d($e,{z:()=>fe});var p=U(8189),Y=U(7669),ve=U(8996);function fe(...Ie){return function K(){return(0,p.J)(1)}()((0,ve.D)(Ie,(0,Y.yG)(Ie)))}},515:(bt,$e,U)=>{U.d($e,{E:()=>K});const K=new(U(8306).y)(fe=>fe.complete())},8996:(bt,$e,U)=>{U.d($e,{D:()=>Q});var p=U(8421),K=U(5363),Y=U(9468),Ie=U(8306),Me=U(2202),Se=U(576),oe=U(9672);function Ce(de,Re){if(!de)throw new Error("Iterable cannot be null");return new Ie.y(ke=>{(0,oe.f)(ke,Re,()=>{const Te=de[Symbol.asyncIterator]();(0,oe.f)(ke,Re,()=>{Te.next().then(he=>{he.done?ke.complete():ke.next(he.value)})},0,!0)})})}var lt=U(3670),Ke=U(8239),Xe=U(1144),at=U(6495),Ue=U(2206),Fe=U(4532),pt=U(3260);function Q(de,Re){return Re?function V(de,Re){if(null!=de){if((0,lt.c)(de))return function ve(de,Re){return(0,p.Xf)(de).pipe((0,Y.R)(Re),(0,K.Q)(Re))}(de,Re);if((0,Xe.z)(de))return function Ae(de,Re){return new Ie.y(ke=>{let Te=0;return Re.schedule(function(){Te===de.length?ke.complete():(ke.next(de[Te++]),ke.closed||this.schedule())})})}(de,Re);if((0,Ke.t)(de))return function fe(de,Re){return(0,p.Xf)(de).pipe((0,Y.R)(Re),(0,K.Q)(Re))}(de,Re);if((0,Ue.D)(de))return Ce(de,Re);if((0,at.T)(de))return function se(de,Re){return new Ie.y(ke=>{let Te;return(0,oe.f)(ke,Re,()=>{Te=de[Me.h](),(0,oe.f)(ke,Re,()=>{let he,Z;try{({value:he,done:Z}=Te.next())}catch(ye){return void ke.error(ye)}Z?ke.complete():ke.next(he)},0,!0)}),()=>(0,Se.m)(null==Te?void 0:Te.return)&&Te.return()})}(de,Re);if((0,pt.L)(de))return function j(de,Re){return Ce((0,pt.Q)(de),Re)}(de,Re)}throw(0,Fe.z)(de)}(de,Re):(0,p.Xf)(de)}},8421:(bt,$e,U)=>{U.d($e,{Xf:()=>lt});var p=U(655),K=U(1144),Y=U(8239),ve=U(8306),fe=U(3670),Ie=U(2206),Ae=U(4532),Me=U(6495),Se=U(3260),oe=U(576),se=U(7849),Ce=U(8822);function lt(V){if(V instanceof ve.y)return V;if(null!=V){if((0,fe.c)(V))return function Ke(V){return new ve.y(Q=>{const de=V[Ce.L]();if((0,oe.m)(de.subscribe))return de.subscribe(Q);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(V);if((0,K.z)(V))return function Xe(V){return new ve.y(Q=>{for(let de=0;de<V.length&&!Q.closed;de++)Q.next(V[de]);Q.complete()})}(V);if((0,Y.t)(V))return function at(V){return new ve.y(Q=>{V.then(de=>{Q.closed||(Q.next(de),Q.complete())},de=>Q.error(de)).then(null,se.h)})}(V);if((0,Ie.D)(V))return Fe(V);if((0,Me.T)(V))return function Ue(V){return new ve.y(Q=>{for(const de of V)if(Q.next(de),Q.closed)return;Q.complete()})}(V);if((0,Se.L)(V))return function pt(V){return Fe((0,Se.Q)(V))}(V)}throw(0,Ae.z)(V)}function Fe(V){return new ve.y(Q=>{(function j(V,Q){var de,Re,ke,Te;return(0,p.mG)(this,void 0,void 0,function*(){try{for(de=(0,p.KL)(V);!(Re=yield de.next()).done;)if(Q.next(Re.value),Q.closed)return}catch(he){ke={error:he}}finally{try{Re&&!Re.done&&(Te=de.return)&&(yield Te.call(de))}finally{if(ke)throw ke.error}}Q.complete()})})(V,Q).catch(de=>Q.error(de))})}},6451:(bt,$e,U)=>{U.d($e,{T:()=>Ie});var p=U(8189),K=U(8421),Y=U(515),ve=U(7669),fe=U(8996);function Ie(...Ae){const Me=(0,ve.yG)(Ae),Se=(0,ve._6)(Ae,1/0),oe=Ae;return oe.length?1===oe.length?(0,K.Xf)(oe[0]):(0,p.J)(Se)((0,fe.D)(oe,Me)):Y.E}},9646:(bt,$e,U)=>{U.d($e,{of:()=>Y});var p=U(7669),K=U(8996);function Y(...ve){const fe=(0,p.yG)(ve);return(0,K.D)(ve,fe)}},5403:(bt,$e,U)=>{U.d($e,{x:()=>K});var p=U(2961);function K(ve,fe,Ie,Ae,Me){return new Y(ve,fe,Ie,Ae,Me)}class Y extends p.Lv{constructor(fe,Ie,Ae,Me,Se,oe){super(fe),this.onFinalize=Se,this.shouldUnsubscribe=oe,this._next=Ie?function(se){try{Ie(se)}catch(Ce){fe.error(Ce)}}:super._next,this._error=Me?function(se){try{Me(se)}catch(Ce){fe.error(Ce)}finally{this.unsubscribe()}}:super._error,this._complete=Ae?function(){try{Ae()}catch(se){fe.error(se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},6590:(bt,$e,U)=>{U.d($e,{d:()=>Y});var p=U(4482),K=U(5403);function Y(ve){return(0,p.e)((fe,Ie)=>{let Ae=!1;fe.subscribe((0,K.x)(Ie,Me=>{Ae=!0,Ie.next(Me)},()=>{Ae||Ie.next(ve),Ie.complete()}))})}},9300:(bt,$e,U)=>{U.d($e,{h:()=>Y});var p=U(4482),K=U(5403);function Y(ve,fe){return(0,p.e)((Ie,Ae)=>{let Me=0;Ie.subscribe((0,K.x)(Ae,Se=>ve.call(fe,Se,Me++)&&Ae.next(Se)))})}},590:(bt,$e,U)=>{U.d($e,{P:()=>Ae});var p=U(6805),K=U(9300),Y=U(5698),ve=U(6590),fe=U(8068),Ie=U(4671);function Ae(Me,Se){const oe=arguments.length>=2;return se=>se.pipe(Me?(0,K.h)((Ce,lt)=>Me(Ce,lt,se)):Ie.y,(0,Y.q)(1),oe?(0,ve.d)(Se):(0,fe.T)(()=>new p.K))}},4004:(bt,$e,U)=>{U.d($e,{U:()=>Y});var p=U(4482),K=U(5403);function Y(ve,fe){return(0,p.e)((Ie,Ae)=>{let Me=0;Ie.subscribe((0,K.x)(Ae,Se=>{Ae.next(ve.call(fe,Se,Me++))}))})}},8189:(bt,$e,U)=>{U.d($e,{J:()=>Y});var p=U(5577),K=U(4671);function Y(ve=1/0){return(0,p.z)(K.y,ve)}},5577:(bt,$e,U)=>{U.d($e,{z:()=>Me});var p=U(4004),K=U(8421),Y=U(4482),ve=U(9672),fe=U(5403),Ae=U(576);function Me(Se,oe,se=1/0){return(0,Ae.m)(oe)?Me((Ce,lt)=>(0,p.U)((Ke,Xe)=>oe(Ce,Ke,lt,Xe))((0,K.Xf)(Se(Ce,lt))),se):("number"==typeof oe&&(se=oe),(0,Y.e)((Ce,lt)=>function Ie(Se,oe,se,Ce,lt,Ke,Xe,at){const Ue=[];let Fe=0,pt=0,j=!1;const V=()=>{j&&!Ue.length&&!Fe&&oe.complete()},Q=Re=>Fe<Ce?de(Re):Ue.push(Re),de=Re=>{Ke&&oe.next(Re),Fe++;let ke=!1;(0,K.Xf)(se(Re,pt++)).subscribe((0,fe.x)(oe,Te=>{null==lt||lt(Te),Ke?Q(Te):oe.next(Te)},()=>{ke=!0},void 0,()=>{if(ke)try{for(Fe--;Ue.length&&Fe<Ce;){const Te=Ue.shift();Xe?(0,ve.f)(oe,Xe,()=>de(Te)):de(Te)}V()}catch(Te){oe.error(Te)}}))};return Se.subscribe((0,fe.x)(oe,Q,()=>{j=!0,V()})),()=>{null==at||at()}}(Ce,lt,Se,se)))}},5363:(bt,$e,U)=>{U.d($e,{Q:()=>ve});var p=U(9672),K=U(4482),Y=U(5403);function ve(fe,Ie=0){return(0,K.e)((Ae,Me)=>{Ae.subscribe((0,Y.x)(Me,Se=>(0,p.f)(Me,fe,()=>Me.next(Se),Ie),()=>(0,p.f)(Me,fe,()=>Me.complete(),Ie),Se=>(0,p.f)(Me,fe,()=>Me.error(Se),Ie)))})}},5026:(bt,$e,U)=>{U.d($e,{R:()=>ve});var p=U(4482),K=U(5403);function Y(fe,Ie,Ae,Me,Se){return(oe,se)=>{let Ce=Ae,lt=Ie,Ke=0;oe.subscribe((0,K.x)(se,Xe=>{const at=Ke++;lt=Ce?fe(lt,Xe,at):(Ce=!0,Xe),Me&&se.next(lt)},Se&&(()=>{Ce&&se.next(lt),se.complete()})))}}function ve(fe,Ie){return(0,p.e)(Y(fe,Ie,arguments.length>=2,!0))}},3099:(bt,$e,U)=>{U.d($e,{B:()=>Ie});var p=U(8996),K=U(5698),Y=U(7579),ve=U(2961),fe=U(4482);function Ie(Me={}){const{connector:Se=(()=>new Y.x),resetOnError:oe=!0,resetOnComplete:se=!0,resetOnRefCountZero:Ce=!0}=Me;return lt=>{let Ke=null,Xe=null,at=null,Ue=0,Fe=!1,pt=!1;const j=()=>{null==Xe||Xe.unsubscribe(),Xe=null},V=()=>{j(),Ke=at=null,Fe=pt=!1},Q=()=>{const de=Ke;V(),null==de||de.unsubscribe()};return(0,fe.e)((de,Re)=>{Ue++,!pt&&!Fe&&j();const ke=at=null!=at?at:Se();Re.add(()=>{Ue--,0===Ue&&!pt&&!Fe&&(Xe=Ae(Q,Ce))}),ke.subscribe(Re),Ke||(Ke=new ve.Hp({next:Te=>ke.next(Te),error:Te=>{pt=!0,j(),Xe=Ae(V,oe,Te),ke.error(Te)},complete:()=>{Fe=!0,j(),Xe=Ae(V,se),ke.complete()}}),(0,p.D)(de).subscribe(Ke))})(lt)}}function Ae(Me,Se,...oe){return!0===Se?(Me(),null):!1===Se?null:Se(...oe).pipe((0,K.q)(1)).subscribe(()=>Me())}},8675:(bt,$e,U)=>{U.d($e,{O:()=>ve});var p=U(7272),K=U(7669),Y=U(4482);function ve(...fe){const Ie=(0,K.yG)(fe);return(0,Y.e)((Ae,Me)=>{(Ie?(0,p.z)(fe,Ae,Ie):(0,p.z)(fe,Ae)).subscribe(Me)})}},9468:(bt,$e,U)=>{U.d($e,{R:()=>K});var p=U(4482);function K(Y,ve=0){return(0,p.e)((fe,Ie)=>{Ie.add(Y.schedule(()=>fe.subscribe(Ie),ve))})}},3900:(bt,$e,U)=>{U.d($e,{w:()=>ve});var p=U(8421),K=U(4482),Y=U(5403);function ve(fe,Ie){return(0,K.e)((Ae,Me)=>{let Se=null,oe=0,se=!1;const Ce=()=>se&&!Se&&Me.complete();Ae.subscribe((0,Y.x)(Me,lt=>{null==Se||Se.unsubscribe();let Ke=0;const Xe=oe++;(0,p.Xf)(fe(lt,Xe)).subscribe(Se=(0,Y.x)(Me,at=>Me.next(Ie?Ie(lt,at,Xe,Ke++):at),()=>{Se=null,Ce()}))},()=>{se=!0,Ce()}))})}},5698:(bt,$e,U)=>{U.d($e,{q:()=>ve});var p=U(515),K=U(4482),Y=U(5403);function ve(fe){return fe<=0?()=>p.E:(0,K.e)((Ie,Ae)=>{let Me=0;Ie.subscribe((0,Y.x)(Ae,Se=>{++Me<=fe&&(Ae.next(Se),fe<=Me&&Ae.complete())}))})}},8505:(bt,$e,U)=>{U.d($e,{b:()=>fe});var p=U(576),K=U(4482),Y=U(5403),ve=U(4671);function fe(Ie,Ae,Me){const Se=(0,p.m)(Ie)||Ae||Me?{next:Ie,error:Ae,complete:Me}:Ie;return Se?(0,K.e)((oe,se)=>{var Ce;null===(Ce=Se.subscribe)||void 0===Ce||Ce.call(Se);let lt=!0;oe.subscribe((0,Y.x)(se,Ke=>{var Xe;null===(Xe=Se.next)||void 0===Xe||Xe.call(Se,Ke),se.next(Ke)},()=>{var Ke;lt=!1,null===(Ke=Se.complete)||void 0===Ke||Ke.call(Se),se.complete()},Ke=>{var Xe;lt=!1,null===(Xe=Se.error)||void 0===Xe||Xe.call(Se,Ke),se.error(Ke)},()=>{var Ke,Xe;lt&&(null===(Ke=Se.unsubscribe)||void 0===Ke||Ke.call(Se)),null===(Xe=Se.finalize)||void 0===Xe||Xe.call(Se)}))}):ve.y}},8068:(bt,$e,U)=>{U.d($e,{T:()=>ve});var p=U(6805),K=U(4482),Y=U(5403);function ve(Ie=fe){return(0,K.e)((Ae,Me)=>{let Se=!1;Ae.subscribe((0,Y.x)(Me,oe=>{Se=!0,Me.next(oe)},()=>Se?Me.complete():Me.error(Ie())))})}function fe(){return new p.K}},4408:(bt,$e,U)=>{U.d($e,{o:()=>fe});var p=U(727);class K extends p.w0{constructor(Ae,Me){super()}schedule(Ae,Me=0){return this}}const Y={setInterval(Ie,Ae,...Me){const{delegate:Se}=Y;return(null==Se?void 0:Se.setInterval)?Se.setInterval(Ie,Ae,...Me):setInterval(Ie,Ae,...Me)},clearInterval(Ie){const{delegate:Ae}=Y;return((null==Ae?void 0:Ae.clearInterval)||clearInterval)(Ie)},delegate:void 0};var ve=U(8737);class fe extends K{constructor(Ae,Me){super(Ae,Me),this.scheduler=Ae,this.work=Me,this.pending=!1}schedule(Ae,Me=0){if(this.closed)return this;this.state=Ae;const Se=this.id,oe=this.scheduler;return null!=Se&&(this.id=this.recycleAsyncId(oe,Se,Me)),this.pending=!0,this.delay=Me,this.id=this.id||this.requestAsyncId(oe,this.id,Me),this}requestAsyncId(Ae,Me,Se=0){return Y.setInterval(Ae.flush.bind(Ae,this),Se)}recycleAsyncId(Ae,Me,Se=0){if(null!=Se&&this.delay===Se&&!1===this.pending)return Me;Y.clearInterval(Me)}execute(Ae,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(Ae,Me);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ae,Me){let oe,Se=!1;try{this.work(Ae)}catch(se){Se=!0,oe=se||new Error("Scheduled action threw falsy error")}if(Se)return this.unsubscribe(),oe}unsubscribe(){if(!this.closed){const{id:Ae,scheduler:Me}=this,{actions:Se}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ve.P)(Se,this),null!=Ae&&(this.id=this.recycleAsyncId(Me,Ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,$e,U)=>{U.d($e,{v:()=>Y});var p=U(6063);class K{constructor(fe,Ie=K.now){this.schedulerActionCtor=fe,this.now=Ie}schedule(fe,Ie=0,Ae){return new this.schedulerActionCtor(this,fe).schedule(Ae,Ie)}}K.now=p.l.now;class Y extends K{constructor(fe,Ie=K.now){super(fe,Ie),this.actions=[],this._active=!1,this._scheduled=void 0}flush(fe){const{actions:Ie}=this;if(this._active)return void Ie.push(fe);let Ae;this._active=!0;do{if(Ae=fe.execute(fe.state,fe.delay))break}while(fe=Ie.shift());if(this._active=!1,Ae){for(;fe=Ie.shift();)fe.unsubscribe();throw Ae}}}},4986:(bt,$e,U)=>{U.d($e,{z:()=>Y});var p=U(4408);const Y=new(U(7565).v)(p.o)},6063:(bt,$e,U)=>{U.d($e,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(bt,$e,U)=>{U.d($e,{z:()=>p});const p={setTimeout(K,Y,...ve){const{delegate:fe}=p;return(null==fe?void 0:fe.setTimeout)?fe.setTimeout(K,Y,...ve):setTimeout(K,Y,...ve)},clearTimeout(K){const{delegate:Y}=p;return((null==Y?void 0:Y.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(bt,$e,U)=>{U.d($e,{h:()=>K});const K=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,$e,U)=>{U.d($e,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(bt,$e,U)=>{U.d($e,{K:()=>K});const K=(0,U(3888).d)(Y=>function(){Y(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(bt,$e,U)=>{U.d($e,{_6:()=>Ie,jO:()=>ve,yG:()=>fe});var p=U(576);function Y(Ae){return Ae[Ae.length-1]}function ve(Ae){return(0,p.m)(Y(Ae))?Ae.pop():void 0}function fe(Ae){return function K(Ae){return Ae&&(0,p.m)(Ae.schedule)}(Y(Ae))?Ae.pop():void 0}function Ie(Ae,Me){return"number"==typeof Y(Ae)?Ae.pop():Me}},4742:(bt,$e,U)=>{U.d($e,{D:()=>fe});const{isArray:p}=Array,{getPrototypeOf:K,prototype:Y,keys:ve}=Object;function fe(Ae){if(1===Ae.length){const Me=Ae[0];if(p(Me))return{args:Me,keys:null};if(function Ie(Ae){return Ae&&"object"==typeof Ae&&K(Ae)===Y}(Me)){const Se=ve(Me);return{args:Se.map(oe=>Me[oe]),keys:Se}}}return{args:Ae,keys:null}}},8737:(bt,$e,U)=>{function p(K,Y){if(K){const ve=K.indexOf(Y);0<=ve&&K.splice(ve,1)}}U.d($e,{P:()=>p})},3888:(bt,$e,U)=>{function p(K){const ve=K(fe=>{Error.call(fe),fe.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}U.d($e,{d:()=>p})},1810:(bt,$e,U)=>{function p(K,Y){return K.reduce((ve,fe,Ie)=>(ve[fe]=Y[Ie],ve),{})}U.d($e,{n:()=>p})},2806:(bt,$e,U)=>{U.d($e,{O:()=>ve,x:()=>Y});var p=U(2416);let K=null;function Y(fe){if(p.v.useDeprecatedSynchronousErrorHandling){const Ie=!K;if(Ie&&(K={errorThrown:!1,error:null}),fe(),Ie){const{errorThrown:Ae,error:Me}=K;if(K=null,Ae)throw Me}}else fe()}function ve(fe){p.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=fe)}},9672:(bt,$e,U)=>{function p(K,Y,ve,fe=0,Ie=!1){const Ae=Y.schedule(function(){ve(),Ie?K.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(K.add(Ae),!Ie)return Ae}U.d($e,{f:()=>p})},4671:(bt,$e,U)=>{function p(K){return K}U.d($e,{y:()=>p})},1144:(bt,$e,U)=>{U.d($e,{z:()=>p});const p=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(bt,$e,U)=>{U.d($e,{D:()=>K});var p=U(576);function K(Y){return Symbol.asyncIterator&&(0,p.m)(null==Y?void 0:Y[Symbol.asyncIterator])}},576:(bt,$e,U)=>{function p(K){return"function"==typeof K}U.d($e,{m:()=>p})},3670:(bt,$e,U)=>{U.d($e,{c:()=>Y});var p=U(8822),K=U(576);function Y(ve){return(0,K.m)(ve[p.L])}},6495:(bt,$e,U)=>{U.d($e,{T:()=>Y});var p=U(2202),K=U(576);function Y(ve){return(0,K.m)(null==ve?void 0:ve[p.h])}},8239:(bt,$e,U)=>{U.d($e,{t:()=>K});var p=U(576);function K(Y){return(0,p.m)(null==Y?void 0:Y.then)}},3260:(bt,$e,U)=>{U.d($e,{L:()=>ve,Q:()=>Y});var p=U(655),K=U(576);function Y(fe){return(0,p.FC)(this,arguments,function*(){const Ae=fe.getReader();try{for(;;){const{value:Me,done:Se}=yield(0,p.qq)(Ae.read());if(Se)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Me)}}finally{Ae.releaseLock()}})}function ve(fe){return(0,K.m)(null==fe?void 0:fe.getReader)}},4482:(bt,$e,U)=>{U.d($e,{A:()=>K,e:()=>Y});var p=U(576);function K(ve){return(0,p.m)(null==ve?void 0:ve.lift)}function Y(ve){return fe=>{if(K(fe))return fe.lift(function(Ie){try{return ve(Ie,this)}catch(Ae){this.error(Ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(bt,$e,U)=>{U.d($e,{Z:()=>ve});var p=U(4004);const{isArray:K}=Array;function ve(fe){return(0,p.U)(Ie=>function Y(fe,Ie){return K(Ie)?fe(...Ie):fe(Ie)}(fe,Ie))}},7849:(bt,$e,U)=>{U.d($e,{h:()=>Y});var p=U(2416),K=U(3410);function Y(ve){K.z.setTimeout(()=>{const{onUnhandledError:fe}=p.v;if(!fe)throw ve;fe(ve)})}},4532:(bt,$e,U)=>{function p(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d($e,{z:()=>p})},655:(bt,$e,U)=>{function ve(he,Z){var ye={};for(var ae in he)Object.prototype.hasOwnProperty.call(he,ae)&&Z.indexOf(ae)<0&&(ye[ae]=he[ae]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(ae=Object.getOwnPropertySymbols(he);Ge<ae.length;Ge++)Z.indexOf(ae[Ge])<0&&Object.prototype.propertyIsEnumerable.call(he,ae[Ge])&&(ye[ae[Ge]]=he[ae[Ge]])}return ye}function fe(he,Z,ye,ae){var Nt,Ge=arguments.length,Ne=Ge<3?Z:null===ae?ae=Object.getOwnPropertyDescriptor(Z,ye):ae;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ne=Reflect.decorate(he,Z,ye,ae);else for(var mt=he.length-1;mt>=0;mt--)(Nt=he[mt])&&(Ne=(Ge<3?Nt(Ne):Ge>3?Nt(Z,ye,Ne):Nt(Z,ye))||Ne);return Ge>3&&Ne&&Object.defineProperty(Z,ye,Ne),Ne}function Me(he,Z,ye,ae){return new(ye||(ye=Promise))(function(Ne,Nt){function mt(rt){try{ht(ae.next(rt))}catch(Ht){Nt(Ht)}}function jt(rt){try{ht(ae.throw(rt))}catch(Ht){Nt(Ht)}}function ht(rt){rt.done?Ne(rt.value):function Ge(Ne){return Ne instanceof ye?Ne:new ye(function(Nt){Nt(Ne)})}(rt.value).then(mt,jt)}ht((ae=ae.apply(he,Z||[])).next())})}function Ue(he){return this instanceof Ue?(this.v=he,this):new Ue(he)}function Fe(he,Z,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,ae=ye.apply(he,Z||[]),Ne=[];return Ge={},Nt("next"),Nt("throw"),Nt("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function Nt(Dt){ae[Dt]&&(Ge[Dt]=function(St){return new Promise(function(nt,rn){Ne.push([Dt,St,nt,rn])>1||mt(Dt,St)})})}function mt(Dt,St){try{!function jt(Dt){Dt.value instanceof Ue?Promise.resolve(Dt.value.v).then(ht,rt):Ht(Ne[0][2],Dt)}(ae[Dt](St))}catch(nt){Ht(Ne[0][3],nt)}}function ht(Dt){mt("next",Dt)}function rt(Dt){mt("throw",Dt)}function Ht(Dt,St){Dt(St),Ne.shift(),Ne.length&&mt(Ne[0][0],Ne[0][1])}}function j(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,Z=he[Symbol.asyncIterator];return Z?Z.call(he):(he=function Ce(he){var Z="function"==typeof Symbol&&Symbol.iterator,ye=Z&&he[Z],ae=0;if(ye)return ye.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&ae>=he.length&&(he=void 0),{value:he&&he[ae++],done:!he}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),ye={},ae("next"),ae("throw"),ae("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function ae(Ne){ye[Ne]=he[Ne]&&function(Nt){return new Promise(function(mt,jt){!function Ge(Ne,Nt,mt,jt){Promise.resolve(jt).then(function(ht){Ne({value:ht,done:mt})},Nt)}(mt,jt,(Nt=he[Ne](Nt)).done,Nt.value)})}}}U.d($e,{FC:()=>Fe,KL:()=>j,_T:()=>ve,gn:()=>fe,mG:()=>Me,qq:()=>Ue})},9808:(bt,$e,U)=>{U.d($e,{Do:()=>V,EM:()=>ls,HT:()=>fe,JF:()=>ur,K0:()=>Ae,Mx:()=>pe,O5:()=>Rn,Ov:()=>Ve,PM:()=>vr,S$:()=>Ue,Ts:()=>Hi,V_:()=>oe,Ye:()=>Q,b0:()=>j,bD:()=>Ur,ez:()=>gs,lw:()=>Me,mk:()=>le,mr:()=>pt,q:()=>Y,sg:()=>Je,w_:()=>Ie});var p=U(5e3);let K=null;function Y(){return K}function fe(x){K||(K=x)}class Ie{}const Ae=new p.OlP("DocumentToken");let Me=(()=>{class x{historyGo(M){throw new Error("Not implemented")}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275prov=p.Yz7({token:x,factory:function(){return function Se(){return(0,p.LFG)(se)}()},providedIn:"platform"}),x})();const oe=new p.OlP("Location Initialized");let se=(()=>{class x extends Me{constructor(M){super(),this._doc=M,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState(M){const q=Y().getGlobalEventTarget(this._doc,"window");return q.addEventListener("popstate",M,!1),()=>q.removeEventListener("popstate",M)}onHashChange(M){const q=Y().getGlobalEventTarget(this._doc,"window");return q.addEventListener("hashchange",M,!1),()=>q.removeEventListener("hashchange",M)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(M){this.location.pathname=M}pushState(M,q,ce){Ce()?this._history.pushState(M,q,ce):this.location.hash=ce}replaceState(M,q,ce){Ce()?this._history.replaceState(M,q,ce):this.location.hash=ce}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return x.\u0275fac=function(M){return new(M||x)(p.LFG(Ae))},x.\u0275prov=p.Yz7({token:x,factory:function(){return function lt(){return new se((0,p.LFG)(Ae))}()},providedIn:"platform"}),x})();function Ce(){return!!window.history.pushState}function Ke(x,H){if(0==x.length)return H;if(0==H.length)return x;let M=0;return x.endsWith("/")&&M++,H.startsWith("/")&&M++,2==M?x+H.substring(1):1==M?x+H:x+"/"+H}function Xe(x){const H=x.match(/#|\?|$/),M=H&&H.index||x.length;return x.slice(0,M-("/"===x[M-1]?1:0))+x.slice(M)}function at(x){return x&&"?"!==x[0]?"?"+x:x}let Ue=(()=>{class x{historyGo(M){throw new Error("Not implemented")}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275prov=p.Yz7({token:x,factory:function(){return function Fe(x){const H=(0,p.LFG)(Ae).location;return new j((0,p.LFG)(Me),H&&H.origin||"")}()},providedIn:"root"}),x})();const pt=new p.OlP("appBaseHref");let j=(()=>{class x extends Ue{constructor(M,q){if(super(),this._platformLocation=M,this._removeListenerFns=[],null==q&&(q=this._platformLocation.getBaseHrefFromDOM()),null==q)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=q}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return Ke(this._baseHref,M)}path(M=!1){const q=this._platformLocation.pathname+at(this._platformLocation.search),ce=this._platformLocation.hash;return ce&&M?`${q}${ce}`:q}pushState(M,q,ce,ze){const qe=this.prepareExternalUrl(ce+at(ze));this._platformLocation.pushState(M,q,qe)}replaceState(M,q,ce,ze){const qe=this.prepareExternalUrl(ce+at(ze));this._platformLocation.replaceState(M,q,qe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(M=0){var q,ce;null===(ce=(q=this._platformLocation).historyGo)||void 0===ce||ce.call(q,M)}}return x.\u0275fac=function(M){return new(M||x)(p.LFG(Me),p.LFG(pt,8))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac}),x})(),V=(()=>{class x extends Ue{constructor(M,q){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=q&&(this._baseHref=q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let q=this._platformLocation.hash;return null==q&&(q="#"),q.length>0?q.substring(1):q}prepareExternalUrl(M){const q=Ke(this._baseHref,M);return q.length>0?"#"+q:q}pushState(M,q,ce,ze){let qe=this.prepareExternalUrl(ce+at(ze));0==qe.length&&(qe=this._platformLocation.pathname),this._platformLocation.pushState(M,q,qe)}replaceState(M,q,ce,ze){let qe=this.prepareExternalUrl(ce+at(ze));0==qe.length&&(qe=this._platformLocation.pathname),this._platformLocation.replaceState(M,q,qe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(M=0){var q,ce;null===(ce=(q=this._platformLocation).historyGo)||void 0===ce||ce.call(q,M)}}return x.\u0275fac=function(M){return new(M||x)(p.LFG(Me),p.LFG(pt,8))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac}),x})(),Q=(()=>{class x{constructor(M,q){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=M;const ce=this._platformStrategy.getBaseHref();this._platformLocation=q,this._baseHref=Xe(ke(ce)),this._platformStrategy.onPopState(ze=>{this._subject.emit({url:this.path(!0),pop:!0,state:ze.state,type:ze.type})})}path(M=!1){return this.normalize(this._platformStrategy.path(M))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(M,q=""){return this.path()==this.normalize(M+at(q))}normalize(M){return x.stripTrailingSlash(function Re(x,H){return x&&H.startsWith(x)?H.substring(x.length):H}(this._baseHref,ke(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._platformStrategy.prepareExternalUrl(M)}go(M,q="",ce=null){this._platformStrategy.pushState(ce,"",M,q),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+at(q)),ce)}replaceState(M,q="",ce=null){this._platformStrategy.replaceState(ce,"",M,q),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+at(q)),ce)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(M=0){var q,ce;null===(ce=(q=this._platformStrategy).historyGo)||void 0===ce||ce.call(q,M)}onUrlChange(M){this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(q=>{this._notifyUrlChangeListeners(q.url,q.state)}))}_notifyUrlChangeListeners(M="",q){this._urlChangeListeners.forEach(ce=>ce(M,q))}subscribe(M,q,ce){return this._subject.subscribe({next:M,error:q,complete:ce})}}return x.normalizeQueryParams=at,x.joinWithSlash=Ke,x.stripTrailingSlash=Xe,x.\u0275fac=function(M){return new(M||x)(p.LFG(Ue),p.LFG(Me))},x.\u0275prov=p.Yz7({token:x,factory:function(){return function de(){return new Q((0,p.LFG)(Ue),(0,p.LFG)(Me))}()},providedIn:"root"}),x})();function ke(x){return x.replace(/\/index.html$/,"")}function pe(x,H){H=encodeURIComponent(H);for(const M of x.split(";")){const q=M.indexOf("="),[ce,ze]=-1==q?[M,""]:[M.slice(0,q),M.slice(q+1)];if(ce.trim()===H)return decodeURIComponent(ze)}return null}let le=(()=>{class x{constructor(M,q,ce,ze){this._iterableDiffers=M,this._keyValueDiffers=q,this._ngEl=ce,this._renderer=ze,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(M){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof M?M.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(M){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof M?M.split(/\s+/):M,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const M=this._iterableDiffer.diff(this._rawClass);M&&this._applyIterableChanges(M)}else if(this._keyValueDiffer){const M=this._keyValueDiffer.diff(this._rawClass);M&&this._applyKeyValueChanges(M)}}_applyKeyValueChanges(M){M.forEachAddedItem(q=>this._toggleClass(q.key,q.currentValue)),M.forEachChangedItem(q=>this._toggleClass(q.key,q.currentValue)),M.forEachRemovedItem(q=>{q.previousValue&&this._toggleClass(q.key,!1)})}_applyIterableChanges(M){M.forEachAddedItem(q=>{if("string"!=typeof q.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(q.item)}`);this._toggleClass(q.item,!0)}),M.forEachRemovedItem(q=>this._toggleClass(q.item,!1))}_applyClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(q=>this._toggleClass(q,!0)):Object.keys(M).forEach(q=>this._toggleClass(q,!!M[q])))}_removeClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(q=>this._toggleClass(q,!1)):Object.keys(M).forEach(q=>this._toggleClass(q,!1)))}_toggleClass(M,q){(M=M.trim())&&M.split(/\s+/g).forEach(ce=>{q?this._renderer.addClass(this._ngEl.nativeElement,ce):this._renderer.removeClass(this._ngEl.nativeElement,ce)})}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),x})();class Oe{constructor(H,M,q,ce){this.$implicit=H,this.ngForOf=M,this.index=q,this.count=ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Je=(()=>{class x{constructor(M,q,ce){this._viewContainer=M,this._template=q,this._differs=ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const q=this._viewContainer;M.forEachOperation((ce,ze,qe)=>{if(null==ce.previousIndex)q.createEmbeddedView(this._template,new Oe(ce.item,this._ngForOf,-1,-1),null===qe?void 0:qe);else if(null==qe)q.remove(null===ze?void 0:ze);else if(null!==ze){const yt=q.get(ze);q.move(yt,qe),Tt(yt,ce)}});for(let ce=0,ze=q.length;ce<ze;ce++){const yt=q.get(ce).context;yt.index=ce,yt.count=ze,yt.ngForOf=this._ngForOf}M.forEachIdentityChange(ce=>{Tt(q.get(ce.currentIndex),ce)})}static ngTemplateContextGuard(M,q){return!0}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),x})();function Tt(x,H){x.context.$implicit=H.item}let Rn=(()=>{class x{constructor(M,q){this._viewContainer=M,this._context=new yn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=q}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){Ni("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){Ni("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,q){return!0}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.s_b),p.Y36(p.Rgc))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),x})();class yn{constructor(){this.$implicit=null,this.ngIf=null}}function Ni(x,H){if(H&&!H.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,p.AaK)(H)}'.`)}class Ts{createSubscription(H,M){return H.subscribe({next:M,error:q=>{throw q}})}dispose(H){H.unsubscribe()}onDestroy(H){H.unsubscribe()}}class Ws{createSubscription(H,M){return H.then(M,q=>{throw q})}dispose(H){}onDestroy(H){}}const we=new Ws,Ee=new Ts;let Ve=(()=>{class x{constructor(M){this._ref=M,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(M){return this._obj?M!==this._obj?(this._dispose(),this.transform(M)):this._latestValue:(M&&this._subscribe(M),this._latestValue)}_subscribe(M){this._obj=M,this._strategy=this._selectStrategy(M),this._subscription=this._strategy.createSubscription(M,q=>this._updateLatestValue(M,q))}_selectStrategy(M){if((0,p.QGY)(M))return we;if((0,p.F4k)(M))return Ee;throw function Hn(x,H){return new p.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(M,q){M===this._obj&&(this._latestValue=q,this._ref.markForCheck())}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.sBO,16))},x.\u0275pipe=p.Yjl({name:"async",type:x,pure:!1}),x})(),Hi=(()=>{class x{transform(M){return JSON.stringify(M,null,2)}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275pipe=p.Yjl({name:"json",type:x,pure:!1}),x})(),gs=(()=>{class x{}return x.\u0275fac=function(M){return new(M||x)},x.\u0275mod=p.oAB({type:x}),x.\u0275inj=p.cJS({}),x})();const Ur="browser";function vr(x){return"server"===x}let ls=(()=>{class x{}return x.\u0275prov=(0,p.Yz7)({token:x,providedIn:"root",factory:()=>new Wi((0,p.LFG)(Ae),window)}),x})();class Wi{constructor(H,M){this.document=H,this.window=M,this.offset=()=>[0,0]}setOffset(H){this.offset=Array.isArray(H)?()=>H:H}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(H){this.supportsScrolling()&&this.window.scrollTo(H[0],H[1])}scrollToAnchor(H){if(!this.supportsScrolling())return;const M=function Si(x,H){const M=x.getElementById(H)||x.getElementsByName(H)[0];if(M)return M;if("function"==typeof x.createTreeWalker&&x.body&&(x.body.createShadowRoot||x.body.attachShadow)){const q=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let ce=q.currentNode;for(;ce;){const ze=ce.shadowRoot;if(ze){const qe=ze.getElementById(H)||ze.querySelector(`[name="${H}"]`);if(qe)return qe}ce=q.nextNode()}}return null}(this.document,H);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(H){if(this.supportScrollRestoration()){const M=this.window.history;M&&M.scrollRestoration&&(M.scrollRestoration=H)}}scrollToElement(H){const M=H.getBoundingClientRect(),q=M.left+this.window.pageXOffset,ce=M.top+this.window.pageYOffset,ze=this.offset();this.window.scrollTo(q-ze[0],ce-ze[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const H=Rr(this.window.history)||Rr(Object.getPrototypeOf(this.window.history));return!(!H||!H.writable&&!H.set)}catch(H){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(H){return!1}}}function Rr(x){return Object.getOwnPropertyDescriptor(x,"scrollRestoration")}class ur{}},5e3:(bt,$e,U)=>{U.d($e,{$8M:()=>Go,$Z:()=>Lm,AFp:()=>dE,ALo:()=>k0,AaK:()=>Me,BQk:()=>uf,CHM:()=>Ut,CRH:()=>H0,CZH:()=>m_,CqO:()=>Bm,DdM:()=>T0,EJc:()=>vI,EpF:()=>Um,F$t:()=>jm,F4k:()=>Dv,FYo:()=>y0,FiY:()=>ro,G48:()=>UI,GfV:()=>v0,Gpc:()=>se,Hsn:()=>Qp,JOm:()=>Ze,LFG:()=>qt,LSH:()=>Ar,Lbi:()=>pE,MAs:()=>tf,NdJ:()=>Zp,OlP:()=>Lt,Oqu:()=>ff,PXZ:()=>OI,Q6J:()=>zp,QGY:()=>qp,Qsj:()=>mw,R0b:()=>pu,RDi:()=>Rr,Rgc:()=>Tg,SBq:()=>Ig,Sil:()=>EI,Suo:()=>$0,TTD:()=>ts,TgZ:()=>Kp,VKq:()=>A0,VLi:()=>MI,W1O:()=>K0,WLB:()=>S0,X6Q:()=>VI,XFs:()=>kt,Xpm:()=>Vt,Y36:()=>ql,YKP:()=>I0,YNc:()=>xm,Yjl:()=>Zt,Yz7:()=>nt,ZZ4:()=>M_,_Bn:()=>p0,_UZ:()=>af,_Vd:()=>_y,_c5:()=>tD,_uU:()=>Qm,aQg:()=>x_,c2e:()=>mE,cJS:()=>Qt,cg1:()=>mf,dDg:()=>_E,deG:()=>Zc,dqk:()=>An,eFA:()=>IE,ekj:()=>hf,g9A:()=>fE,h0i:()=>Df,hGG:()=>nD,hij:()=>ya,iGM:()=>j0,ifc:()=>vt,ip1:()=>cE,kL8:()=>Hc,lG2:()=>mn,lcZ:()=>P0,n5z:()=>_s,oAB:()=>xe,oxw:()=>kd,q4F:()=>_0,qLn:()=>Pr,qOj:()=>Tp,qZA:()=>Di,sBO:()=>BI,sIi:()=>Wl,s_b:()=>Iy,soG:()=>v_,tBr:()=>Yi,tb:()=>gE,tp0:()=>go,uIk:()=>Xh,vHH:()=>Xe,vpe:()=>ol,wAp:()=>_n,xp6:()=>Gf,ynx:()=>Nd,z2F:()=>D_,zSh:()=>fp,zs3:()=>da});var p=U(7579),K=U(727),Y=U(8306),ve=U(6451),fe=U(3099);function Ie(n){for(let r in n)if(n[r]===Ie)return r;throw Error("Could not find renamed property on target object.")}function Ae(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Me(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Me).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Se(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const oe=Ie({__forward_ref__:Ie});function se(n){return n.__forward_ref__=se,n.toString=function(){return Me(this())},n}function Ce(n){return lt(n)?n():n}function lt(n){return"function"==typeof n&&n.hasOwnProperty(oe)&&n.__forward_ref__===se}class Xe extends Error{constructor(r,s){super(function at(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ue(n){return"string"==typeof n?n:null==n?"":String(n)}function Fe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ue(n)}function Q(n,r){const s=r?` in ${r}`:"";throw new Xe(-201,`No provider for ${Fe(n)} found${s}`)}function ht(n,r){null==n&&function rt(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function nt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function sn(n){return Dn(n,sr)||Dn(n,fr)}function Dn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Ln(n){return n&&(n.hasOwnProperty(Gn)||n.hasOwnProperty(jn))?n[Gn]:null}const sr=Ie({\u0275prov:Ie}),Gn=Ie({\u0275inj:Ie}),fr=Ie({ngInjectableDef:Ie}),jn=Ie({ngInjectorDef:Ie});var kt=(()=>((kt=kt||{})[kt.Default=0]="Default",kt[kt.Host=1]="Host",kt[kt.Self=2]="Self",kt[kt.SkipSelf=4]="SkipSelf",kt[kt.Optional=8]="Optional",kt))();let Jt;function on(n){const r=Jt;return Jt=n,r}function pr(n,r,s){const a=sn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&kt.Optional?null:void 0!==r?r:void Q(Me(n),"Injector")}function Jn(n){return{toString:n}.toString()}var gr=(()=>((gr=gr||{})[gr.OnPush=0]="OnPush",gr[gr.Default=1]="Default",gr))(),vt=(()=>{return(n=vt||(vt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",vt;var n})();const Mt="undefined"!=typeof globalThis&&globalThis,Pt="undefined"!=typeof window&&window,or="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,An=Mt||"undefined"!=typeof global&&global||Pt||or,Wn={},Gt=[],yr=Ie({\u0275cmp:Ie}),gn=Ie({\u0275dir:Ie}),At=Ie({\u0275pipe:Ie}),Ye=Ie({\u0275mod:Ie}),Et=Ie({\u0275fac:Ie}),zt=Ie({__NG_ELEMENT_ID__:Ie});let ln=0;function Vt(n){return Jn(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===gr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Gt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||vt.Emulated,id:"c",styles:n.styles||Gt,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.directives,h=n.features,v=n.pipes;return a.id+=ln++,a.inputs=$t(n.inputs,s),a.outputs=$t(n.outputs),h&&h.forEach(w=>w(a)),a.directiveDefs=l?()=>("function"==typeof l?l():l).map(ne):null,a.pipeDefs=v?()=>("function"==typeof v?v():v).map(me):null,a})}function ne(n){return cn(n)||function kn(n){return n[gn]||null}(n)}function me(n){return function an(n){return n[At]||null}(n)}const We={};function xe(n){return Jn(()=>{const r={type:n.type,bootstrap:n.bootstrap||Gt,declarations:n.declarations||Gt,imports:n.imports||Gt,exports:n.exports||Gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(We[n.id]=n.type),r})}function $t(n,r){if(null==n)return Wn;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const mn=Vt;function Zt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function cn(n){return n[yr]||null}function $n(n,r){const s=n[Ye]||null;if(!s&&!0===r)throw new Error(`Type ${Me(n)} does not have '\u0275mod' property.`);return s}function xr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Xr(n){return Array.isArray(n)&&!0===n[1]}function fs(n){return 0!=(8&n.flags)}function pi(n){return 2==(2&n.flags)}function Cs(n){return 1==(1&n.flags)}function ai(n){return null!==n.template}function ji(n){return 0!=(512&n[2])}function Vr(n,r){return n.hasOwnProperty(Et)?n[Et]:null}class ps{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ts(){return Gi}function Gi(n){return n.type.prototype.ngOnChanges&&(n.setInput=ns),As}function As(){const n=Ur(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Wn)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function ns(n,r,s,a){const l=Ur(n)||function Ai(n,r){return n[gs]=r}(n,{previous:Wn,current:null}),h=l.current||(l.current={}),v=l.previous,w=this.declaredInputs[s],C=v[w];h[w]=new ps(C&&C.currentValue,r,v===Wn),n[a]=r}ts.ngInherit=!0;const gs="__ngSimpleChanges__";function Ur(n){return n[gs]||null}let Wi;function Rr(n){Wi=n}function ur(n){return!!n.listen}const x={createRenderer:(n,r)=>function Si(){return void 0!==Wi?Wi:"undefined"!=typeof document?document:void 0}()};function M(n){for(;Array.isArray(n);)n=n[0];return n}function ze(n,r){return M(r[n])}function qe(n,r){return M(r[n.index])}function Kn(n,r){return n.data[r]}function Un(n,r){return n[r]}function dn(n,r){const s=r[n];return xr(s)?s:s[0]}function En(n){return 4==(4&n[2])}function dr(n){return 128==(128&n[2])}function nr(n,r){return null==r?null:n[r]}function ki(n){n[18]=0}function ei(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const nn={lFrame:Rs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function O(){return nn.bindingsEnabled}function P(){return nn.lFrame.lView}function Le(){return nn.lFrame.tView}function Ut(n){return nn.lFrame.contextLView=n,n[8]}function hn(){let n=ui();for(;null!==n&&64===n.type;)n=n.parent;return n}function ui(){return nn.lFrame.currentTNode}function Br(n,r){const s=nn.lFrame;s.currentTNode=n,s.isParent=r}function Ys(){return nn.lFrame.isParent}function cs(){nn.lFrame.isParent=!1}function _a(){return nn.isInCheckNoChangesMode}function oo(n){nn.isInCheckNoChangesMode=n}function li(){const n=nn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function xs(){return nn.lFrame.bindingIndex++}function Ea(n,r){const s=nn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Lo(r)}function Lo(n){nn.lFrame.currentDirectiveIndex=n}function na(){return nn.lFrame.currentQueryIndex}function yu(n){nn.lFrame.currentQueryIndex=n}function wa(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Vo(n,r,s){if(s&kt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&kt.Host||(l=wa(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=nn.lFrame=Ia();return a.currentTNode=r,a.lView=n,!0}function Qs(n){const r=Ia(),s=n[1];nn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Ia(){const n=nn.lFrame,r=null===n?null:n.child;return null===r?Rs(n):r}function Rs(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Da(){const n=nn.lFrame;return nn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ys=Da;function Co(){const n=Da();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jr(){return nn.lFrame.selectedIndex}function bo(n){nn.lFrame.selectedIndex=n}function Nr(){const n=nn.lFrame;return Kn(n.tView,n.selectedIndex)}function zi(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:F,ngOnDestroy:G}=h;v&&(n.contentHooks||(n.contentHooks=[])).push(-s,v),w&&((n.contentHooks||(n.contentHooks=[])).push(s,w),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,w)),C&&(n.viewHooks||(n.viewHooks=[])).push(-s,C),F&&((n.viewHooks||(n.viewHooks=[])).push(s,F),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,F)),null!=G&&(n.destroyHooks||(n.destroyHooks=[])).push(s,G)}}function lo(n,r,s){ci(n,r,3,s)}function Bo(n,r,s,a){(3&n[2])===s&&ci(n,r,s,a)}function $r(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function ci(n,r,s,a){const h=null!=a?a:-1,v=r.length-1;let w=0;for(let C=void 0!==a?65535&n[18]:0;C<v;C++)if("number"==typeof r[C+1]){if(w=r[C],null!=a&&w>=a)break}else r[C]<0&&(n[18]+=65536),(w<h||-1==h)&&(wu(n,s,r,C),n[18]=(4294901760&n[18])+C+2),C++}function wu(n,r,s,a){const l=s[a]<0,h=s[a+1],w=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(w)}finally{}}}else try{h.call(w)}finally{}}class Os{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function jo(n,r,s){const a=ur(n);let l=0;for(;l<s.length;){const h=s[l];if("number"==typeof h){if(0!==h)break;l++;const v=s[l++],w=s[l++],C=s[l++];a?n.setAttribute(r,w,C,v):r.setAttributeNS(v,w,C)}else{const v=h,w=s[++l];qi(v)?a&&n.setProperty(r,v,w):a?n.setAttribute(r,v,w):r.setAttribute(v,w),l++}}return l}function Xs(n){return 3===n||4===n||6===n}function qi(n){return 64===n.charCodeAt(0)}function $o(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||Ho(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function Ho(n,r,s,a,l){let h=0,v=n.length;if(-1===r)v=-1;else for(;h<n.length;){const w=n[h++];if("number"==typeof w){if(w===r){v=-1;break}if(w>r){v=h-1;break}}}for(;h<n.length;){const w=n[h];if("number"==typeof w)break;if(w===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==v&&(n.splice(v,0,r),h=v+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Ta(n){return-1!==n}function _r(n){return 32767&n}function vs(n,r){let s=function al(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Aa=!0;function hs(n){const r=Aa;return Aa=n,r}let co=0;function ho(n,r){const s=dt(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Ns(a.data,n),Ns(r,null),Ns(a.blueprint,null));const l=rr(n,r),h=n.injectorIndex;if(Ta(l)){const v=_r(l),w=vs(l,r),C=w[1].data;for(let F=0;F<8;F++)r[h+F]=w[v+F]|C[v+F]}return r[h+8]=l,h}function Ns(n,r){n.push(0,0,0,0,0,0,0,0,r)}function dt(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function rr(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){const h=l[1],v=h.type;if(a=2===v?h.declTNode:1===v?l[6]:null,null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function I(n,r,s){!function rs(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(zt)&&(a=s[zt]),null==a&&(a=s[zt]=co++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function y(n,r,s){if(s&kt.Optional)return n;Q(r,"NodeInjector")}function b(n,r,s,a){if(s&kt.Optional&&void 0===a&&(a=null),0==(s&(kt.Self|kt.Host))){const l=n[9],h=on(void 0);try{return l?l.get(r,a,s&kt.Optional):pr(r,a,s&kt.Optional)}finally{on(h)}}return y(a,r,s)}function N(n,r,s,a=kt.Default,l){if(null!==n){const h=function On(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(zt)?n[zt]:void 0;return"number"==typeof r?r>=0?255&r:$:r}(s);if("function"==typeof h){if(!Vo(r,n,a))return a&kt.Host?y(l,s,a):b(r,s,a,l);try{const v=h(a);if(null!=v||a&kt.Optional)return v;Q(s)}finally{ys()}}else if("number"==typeof h){let v=null,w=dt(n,r),C=-1,F=a&kt.Host?r[16][6]:null;for((-1===w||a&kt.SkipSelf)&&(C=-1===w?rr(n,r):r[w+8],-1!==C&&ir(a,!1)?(v=r[1],w=_r(C),r=vs(C,r)):w=-1);-1!==w;){const G=r[1];if(Kt(h,w,G.data)){const te=X(w,r,s,v,a,F);if(te!==B)return te}C=r[w+8],-1!==C&&ir(a,r[1].data[w+8]===F)&&Kt(h,w,r)?(v=G,w=_r(C),r=vs(C,r)):w=-1}}}return b(r,s,a,l)}const B={};function $(){return new Nn(hn(),P())}function X(n,r,s,a,l,h){const v=r[1],w=v.data[n+8],G=je(w,v,s,null==a?pi(w)&&Aa:a!=v&&0!=(3&w.type),l&kt.Host&&h===w);return null!==G?It(r,v,G,w):B}function je(n,r,s,a,l){const h=n.providerIndexes,v=r.data,w=1048575&h,C=n.directiveStart,G=h>>20,ge=l?w+G:n.directiveEnd;for(let Pe=a?w:w+G;Pe<ge;Pe++){const tt=v[Pe];if(Pe<C&&s===tt||Pe>=C&&tt.type===s)return Pe}if(l){const Pe=v[C];if(Pe&&ai(Pe)&&Pe.type===s)return C}return null}function It(n,r,s,a){let l=n[s];const h=r.data;if(function To(n){return n instanceof Os}(l)){const v=l;v.resolving&&function pt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Xe(-200,`Circular dependency in DI detected for ${n}${s}`)}(Fe(h[s]));const w=hs(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?on(v.injectImpl):null;Vo(n,a,kt.Default);try{l=n[s]=v.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Ca(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const v=Gi(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==C&&on(C),hs(w),v.resolving=!1,ys()}}return l}function Kt(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function ir(n,r){return!(n&kt.Self||n&kt.Host&&r)}class Nn{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return N(this._tNode,this._lView,r,a,s)}}function _s(n){return Jn(()=>{const r=n.prototype.constructor,s=r[Et]||is(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[Et]||is(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function is(n){return lt(n)?()=>{const r=is(Ce(n));return r&&r()}:Vr(n)}function Go(n){return function E(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Xs(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(hn(),n)}const kr="__parameters__";function eo(n,r,s){return Jn(()=>{const a=function bn(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const v=new l(...h);return w.annotation=v,w;function w(C,F,G){const te=C.hasOwnProperty(kr)?C[kr]:Object.defineProperty(C,kr,{value:[]})[kr];for(;te.length<=G;)te.push(null);return(te[G]=te[G]||[]).push(v),C}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Lt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=nt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zc=new Lt("AnalyzeForEntryComponents");function Ui(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Ui(a,r)):r!==n&&r.push(a)}return r}function Is(n,r){n.forEach(s=>Array.isArray(s)?Is(s,r):r(s))}function Ma(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Wo(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function _i(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function Ei(n,r,s){let a=po(n,r);return a>=0?n[1|a]=s:(a=~a,function Du(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function to(n,r){const s=po(n,r);if(s>=0)return n[1|s]}function po(n,r){return function zo(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),v=n[h<<s];if(r===v)return h<<s;v>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Ko={},Za="__NG_DI_FLAG__",hl="ngTempTokenPath",R=/\n/gm,ie="__source",De=Ie({provide:String,useValue:Ie});let Be;function ft(n){const r=Be;return Be=n,r}function Ot(n,r=kt.Default){if(void 0===Be)throw new Xe(203,"");return null===Be?pr(n,void 0,r):Be.get(n,r&kt.Optional?null:void 0,r)}function qt(n,r=kt.Default){return(function Cn(){return Jt}()||Ot)(Ce(n),r)}const qn=qt;function Tn(n){const r=[];for(let s=0;s<n.length;s++){const a=Ce(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Xe(900,"");let l,h=kt.Default;for(let v=0;v<a.length;v++){const w=a[v],C=hi(w);"number"==typeof C?-1===C?l=w.token:h|=C:l=w}r.push(qt(l,h))}else r.push(qt(a))}return r}function br(n,r){return n[Za]=r,n.prototype[Za]=r,n}function hi(n){return n[Za]}const Yi=br(eo("Inject",n=>({token:n})),-1),ro=br(eo("Optional"),8),go=br(eo("SkipSelf"),4);class Au{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function qo(n){return n instanceof Au?n.changingThisBreaksApplicationSecurity:n}const Oa=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,nh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Bn=(()=>((Bn=Bn||{})[Bn.NONE=0]="NONE",Bn[Bn.HTML=1]="HTML",Bn[Bn.STYLE=2]="STYLE",Bn[Bn.SCRIPT=3]="SCRIPT",Bn[Bn.URL=4]="URL",Bn[Bn.RESOURCE_URL=5]="RESOURCE_URL",Bn))();function Ar(n){const r=function Al(){const n=P();return n&&n[12]}();return r?r.sanitize(Bn.URL,n)||"":function Su(n,r){const s=function ed(n){return n instanceof Au&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?qo(n):function eu(n){return(n=String(n)).match(Oa)||n.match(nh)?n:"unsafe:"+n}(Ue(n))}const iu="__ngContext__";function xi(n,r){n[iu]=r}function pc(n){const r=function Zo(n){return n[iu]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Rl(n){return n.ngOriginalError}function ku(n,...r){n.error(...r)}class Pr{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function ch(n){return n&&n.ngErrorLogger||ku}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Rl(r);for(;s&&Rl(s);)s=Rl(s);return s||null}}const kf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(An))();function f(n){return n instanceof Function?n():n}var Ze=(()=>((Ze=Ze||{})[Ze.Important=1]="Important",Ze[Ze.DashCase=2]="DashCase",Ze))();function Yt(n,r){return undefined(n,r)}function ri(n){const r=n[3];return Xr(r)?r[3]:r}function kl(n){return yc(n[13])}function ka(n){return yc(n[4])}function yc(n){for(;null!==n&&!Xr(n);)n=n[4];return n}function Pa(n,r,s,a,l){if(null!=a){let h,v=!1;Xr(a)?h=a:xr(a)&&(v=!0,a=a[0]);const w=M(a);0===n&&null!==s?null==l?et(r,s,w):Fu(r,s,w,l||null,!0):1===n&&null!==s?Fu(r,s,w,l||null,!0):2===n?function _h(n,r,s){const a=gh(n,r);a&&function aa(n,r,s,a){ur(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,w,v):3===n&&r.destroyNode(w),null!=h&&function Eh(n,r,s,a,l){const h=s[7];h!==M(s)&&Pa(r,n,a,h,l);for(let w=10;w<s.length;w++){const C=s[w];Ec(C[1],C,n,r,a,h)}}(r,n,h,s,l)}}function _c(n,r,s){if(ur(n))return n.createElement(r,s);{const a=null!==s?function ls(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Og(n,r){const s=n[9],a=s.indexOf(r),l=r[3];1024&r[2]&&(r[2]&=-1025,ei(l,-1)),s.splice(a,1)}function Vf(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&Og(l,a),r>0&&(n[s-1][4]=a[4]);const h=Wo(n,10+r);!function Ff(n,r){Ec(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=h[19];null!==v&&v.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Ng(n,r){if(!(256&r[2])){const s=r[11];ur(s)&&s.destroyNode&&Ec(n,r,s,3,null,null),function Sy(n){let r=n[13];if(!r)return ph(n[1],n);for(;r;){let s=null;if(xr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)xr(r)&&ph(r[1],r),r=r[3];null===r&&(r=n),xr(r)&&ph(r[1],r),s=r&&r[4]}r=s}}(r)}}function ph(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function kg(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Os)){const h=s[a+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const w=l[h[v]],C=h[v+1];try{C.call(w)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function Ry(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const v=s[h+1],w="function"==typeof v?v(r):M(r[v]),C=a[l=s[h+2]],F=s[h+3];"boolean"==typeof F?w.removeEventListener(s[h],C,F):F>=0?a[l=F]():a[l=-F].unsubscribe(),h+=2}else{const v=a[l=s[h+1]];s[h].call(v)}if(null!==a){for(let h=l+1;h<a.length;h++)a[h]();r[7]=null}}(n,r),1===r[1].type&&ur(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&Xr(r[3])){s!==r[3]&&Og(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function Pg(n,r,s){return function Uf(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===vt.None||l===vt.Emulated)return null}return qe(a,s)}(n,r.parent,s)}function Fu(n,r,s,a,l){ur(n)?n.insertBefore(r,s,a,l):r.insertBefore(s,a,l)}function et(n,r,s){ur(n)?n.appendChild(r,s):r.appendChild(s)}function cd(n,r,s,a,l){null!==a?Fu(n,r,s,a,l):et(n,r,s)}function gh(n,r){return ur(n)?n.parentNode(r):r.parentNode}function Lu(n,r,s){return Vu(n,r,s)}let Vu=function Fg(n,r,s){return 40&n.type?qe(n,s):null};function hd(n,r,s,a){const l=Pg(n,a,r),h=r[11],w=Lu(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let C=0;C<s.length;C++)cd(h,l,s[C],w,!1);else cd(h,l,s,w,!1)}function Bi(n,r){if(null!==r){const s=r.type;if(3&s)return qe(r,n);if(4&s)return fd(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return Bi(n,a);{const l=n[r.index];return Xr(l)?fd(-1,l):M(l)}}if(32&s)return Yt(r,n)()||M(n[r.index]);{const a=vh(n,r);return null!==a?Array.isArray(a)?a[0]:Bi(ri(n[16]),a):Bi(n,r.next)}}return null}function vh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function fd(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return Bi(a,l)}return r[7]}function Fa(n,r,s,a,l,h,v){for(;null!=s;){const w=a[s.index],C=s.type;if(v&&0===r&&(w&&xi(M(w),a),s.flags|=4),64!=(64&s.flags))if(8&C)Fa(n,r,s.child,a,l,h,!1),Pa(r,n,l,w,h);else if(32&C){const F=Yt(s,a);let G;for(;G=F();)Pa(r,n,l,G,h);Pa(r,n,l,w,h)}else 16&C?Bf(n,r,a,s,l,h):Pa(r,n,l,w,h);s=v?s.projectionNext:s.next}}function Ec(n,r,s,a,l,h){Fa(s,a,n.firstChild,r,l,h,!1)}function Bf(n,r,s,a,l,h){const v=s[16],C=v[6].projection[a.projection];if(Array.isArray(C))for(let F=0;F<C.length;F++)Pa(r,n,l,C[F],h);else Fa(n,r,C,v[3],l,h,!0)}function Uu(n,r,s){ur(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Bu(n,r,s){ur(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function wc(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const wh="ng-template";function jf(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==wc(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function $f(n){return 4===n.type&&n.value!==wh}function ky(n,r,s){return r===(4!==n.type||s?n.value:wh)}function Lg(n,r,s){let a=4;const l=n.attrs||[],h=function Py(n){for(let r=0;r<n.length;r++)if(Xs(n[r]))return r;return n.length}(l);let v=!1;for(let w=0;w<r.length;w++){const C=r[w];if("number"!=typeof C){if(!v)if(4&a){if(a=2|1&a,""!==C&&!ky(n,C,s)||""===C&&1===r.length){if(Qo(a))return!1;v=!0}}else{const F=8&a?C:r[++w];if(8&a&&null!==n.attrs){if(!jf(n.attrs,F,s)){if(Qo(a))return!1;v=!0}continue}const te=Hf(8&a?"class":C,l,$f(n),s);if(-1===te){if(Qo(a))return!1;v=!0;continue}if(""!==F){let ge;ge=te>h?"":l[te+1].toLowerCase();const Pe=8&a?ge:null;if(Pe&&-1!==wc(Pe,F,0)||2&a&&F!==ge){if(Qo(a))return!1;v=!0}}}}else{if(!v&&!Qo(a)&&!Qo(C))return!1;if(v&&Qo(C))continue;v=!1,a=C|1&a}}return Qo(a)||v}function Qo(n){return 0==(1&n)}function Hf(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const v=r[l];if(v===n)return l;if(3===v||6===v)h=!0;else{if(1===v||2===v){let w=r[++l];for(;"string"==typeof w;)w=r[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=h?1:2}return-1}return function Vg(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Ic(n,r,s=!1){for(let a=0;a<r.length;a++)if(Lg(n,r[a],s))return!0;return!1}function Fy(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let l=0;l<n.length;l++)if(n[l]!==a[l])continue e;return!0}}return!1}function Ug(n,r){return n?":not("+r.trim()+")":r}function Ly(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let v=n[s];if("string"==typeof v)if(2&a){const w=n[++s];l+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&a?l+="."+v:4&a&&(l+=" "+v);else""!==l&&!Qo(v)&&(r+=Ug(h,l),l=""),a=v,h=h||!Qo(a);s++}return""!==l&&(r+=Ug(h,l)),r}const In={};function Gf(n){Bg(Le(),P(),jr()+n,_a())}function Bg(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&lo(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Bo(r,h,0,s)}bo(s)}function Dc(n,r){return n<<17|r<<2}function Us(n){return n>>17&32767}function Ll(n){return 2|n}function Jo(n){return(131068&n)>>2}function Cc(n,r){return-131069&n|r<<2}function Bs(n){return 1|n}function Yg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const v=n.data[h];yu(l),v.contentQueries(2,r[h],h)}}}function Va(n,r,s,a,l,h,v,w,C,F){const G=r.blueprint.slice();return G[0]=l,G[2]=140|a,ki(G),G[3]=G[15]=n,G[8]=s,G[10]=v||n&&n[10],G[11]=w||n&&n[11],G[12]=C||n&&n[12]||null,G[9]=F||n&&n[9]||null,G[6]=h,G[16]=2==r.type?n[16]:G,G}function la(n,r,s,a,l){let h=n.data[r];if(null===h)h=function yd(n,r,s,a,l){const h=ui(),v=Ys(),C=n.data[r]=function Ky(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=C),null!==h&&(v?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(n,r,s,a,l),function ao(){return nn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const v=function zr(){const n=nn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return Br(h,!0),h}function uu(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Ac(n,r,s){Qs(r);try{const a=n.viewQuery;null!==a&&cp(1,a,s);const l=n.template;null!==l&&Xg(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Yg(n,r),n.staticViewQueries&&cp(2,n.viewQuery,s);const h=n.components;null!==h&&function zy(n,r){for(let s=0;s<r.length;s++)ap(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,Co()}}function Bl(n,r,s,a){const l=r[2];if(256==(256&l))return;Qs(r);const h=_a();try{ki(r),function Do(n){return nn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Xg(n,r,s,2,a);const v=3==(3&l);if(!h)if(v){const F=n.preOrderCheckHooks;null!==F&&lo(r,F,null)}else{const F=n.preOrderHooks;null!==F&&Bo(r,F,0,null),$r(r,0)}if(function op(n){for(let r=kl(n);null!==r;r=ka(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(1024&l[2])&&ei(h,1),l[2]|=1024}}}(r),function Sc(n){for(let r=kl(n);null!==r;r=ka(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];dr(a)&&Bl(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Yg(n,r),!h)if(v){const F=n.contentCheckHooks;null!==F&&lo(r,F)}else{const F=n.contentHooks;null!==F&&Bo(r,F,1),$r(r,1)}!function Zg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)bo(~l);else{const h=l,v=s[++a],w=s[++a];Ea(v,h),w(2,r[h])}}}finally{bo(-1)}}(n,r);const w=n.components;null!==w&&function Qg(n,r){for(let s=0;s<r.length;s++)Vh(n,r[s])}(r,w);const C=n.viewQuery;if(null!==C&&cp(2,C,a),!h)if(v){const F=n.viewCheckHooks;null!==F&&lo(r,F)}else{const F=n.viewHooks;null!==F&&Bo(r,F,2),$r(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),h||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,ei(r[3],-1))}finally{Co()}}function Jg(n,r,s,a){const l=r[10],h=!_a(),v=En(r);try{h&&!v&&l.begin&&l.begin(),v&&Ac(n,r,a),Bl(n,r,s,a)}finally{h&&!v&&l.end&&l.end()}}function Xg(n,r,s,a,l){const h=jr(),v=2&a;try{bo(-1),v&&r.length>20&&Bg(n,r,20,_a()),s(a,l)}finally{bo(h)}}function Rh(n,r,s){if(fs(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const v=n.data[h];v.contentQueries&&v.contentQueries(1,s[h],h)}}}function Yf(n,r,s){!O()||(function om(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||ho(s,r),xi(a,r);const v=s.initialInputs;for(let w=l;w<h;w++){const C=n.data[w],F=ai(C);F&&Jy(r,s,C);const G=It(r,n,w,s);xi(G,r),null!==v&&Xy(0,w-l,G,C,0,v),F&&(dn(s.index,r)[8]=G)}}(n,r,s,qe(s,r)),128==(128&s.flags)&&function Yy(n,r,s){const a=s.directiveStart,l=s.directiveEnd,v=s.index,w=function Or(){return nn.lFrame.currentDirectiveIndex}();try{bo(v);for(let C=a;C<l;C++){const F=n.data[C],G=r[C];Lo(C),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&am(F,G)}}finally{bo(-1),Lo(w)}}(n,r,s))}function vd(n,r,s=qe){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const v=a[h+1],w=-1===v?s(r,n):n[v];n[l++]=w}}}function em(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Oh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Oh(n,r,s,a,l,h,v,w,C,F){const G=20+a,te=G+l,ge=function Qf(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:In);return s}(G,te),Pe="function"==typeof F?F():F;return ge[1]={type:n,blueprint:ge,template:s,queries:null,viewQuery:w,declTNode:r,data:ge.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:Pe,incompleteFirstPass:!1}}function nm(n,r,s,a){const l=$h(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&dp(n).push(a,l.length-1))}function rm(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function Ed(n,r,s,a){let l=!1;if(O()){const h=function Qy(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const v=a[h];Ic(s,v.selectors,!1)&&(l||(l=[]),I(ho(s,r),n,v.type),ai(v)?(rp(n,s),l.unshift(v)):l.push(v))}return l}(n,r,s),v=null===a?null:{"":-1};if(null!==h){l=!0,Ph(s,n.data.length,h.length);for(let G=0;G<h.length;G++){const te=h[G];te.providersResolver&&te.providersResolver(te)}let w=!1,C=!1,F=uu(n,r,h.length,null);for(let G=0;G<h.length;G++){const te=h[G];s.mergedAttrs=$o(s.mergedAttrs,te.hostAttrs),ip(n,s,r,F,te),wd(F,te,v),null!==te.contentQueries&&(s.flags|=8),(null!==te.hostBindings||null!==te.hostAttrs||0!==te.hostVars)&&(s.flags|=128);const ge=te.type.prototype;!w&&(ge.ngOnChanges||ge.ngOnInit||ge.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),w=!0),!C&&(ge.ngOnChanges||ge.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),C=!0),F++}!function qy(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,v=[];let w=null,C=null;for(let F=r.directiveStart;F<a;F++){const G=l[F],te=G.inputs,ge=null===h||$f(r)?null:ev(te,h);v.push(ge),w=rm(te,F,w),C=rm(G.outputs,F,C)}null!==w&&(w.hasOwnProperty("class")&&(r.flags|=16),w.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=w,r.outputs=C}(n,s)}v&&function kh(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new Xe(-301,!1);a.push(r[l],h)}}}(s,a,v)}return s.mergedAttrs=$o(s.mergedAttrs,s.attrs),l}function np(n,r,s,a,l,h){const v=h.hostBindings;if(v){let w=n.hostBindingOpCodes;null===w&&(w=n.hostBindingOpCodes=[]);const C=~r.index;(function Zy(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(w)!=C&&w.push(C),w.push(a,l,v)}}function am(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function rp(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function wd(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;ai(r)&&(s[""]=n)}}function Ph(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function ip(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=Vr(l.type)),v=new Os(h,ai(l),null);n.blueprint[a]=v,s[a]=v,np(n,r,0,a,uu(n,s,l.hostVars,In),l)}function Jy(n,r,s){const a=qe(r,n),l=em(s),h=n[10],v=Mc(n,Va(n,l,null,s.onPush?64:16,a,r,h,h.createRenderer(a,s),null,null));n[r.index]=v}function Ua(n,r,s,a,l,h){const v=qe(n,r);!function sp(n,r,s,a,l,h,v){if(null==h)ur(n)?n.removeAttribute(r,l,s):r.removeAttribute(l);else{const w=null==v?Ue(h):v(h,a||"",l);ur(n)?n.setAttribute(r,l,w,s):s?r.setAttributeNS(s,l,w):r.setAttribute(l,w)}}(r[11],v,h,n.value,s,a,l)}function Xy(n,r,s,a,l,h){const v=h[r];if(null!==v){const w=a.setInput;for(let C=0;C<v.length;){const F=v[C++],G=v[C++],te=v[C++];null!==w?a.setInput(s,te,F,G):s[G]=te}}}function ev(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Lh(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Vh(n,r){const s=dn(r,n);if(dr(s)){const a=s[1];80&s[2]?Bl(a,s,a.template,s[8]):s[5]>0&&jl(s)}}function jl(n){for(let a=kl(n);null!==a;a=ka(a))for(let l=10;l<a.length;l++){const h=a[l];if(1024&h[2]){const v=h[1];Bl(v,h,v.template,h[8])}else h[5]>0&&jl(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=dn(s[a],n);dr(l)&&l[5]>0&&jl(l)}}function ap(n,r){const s=dn(r,n),a=s[1];(function um(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Ac(a,s,s[8])}function Mc(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Id(n){for(;n;){n[2]|=64;const r=ri(n);if(ji(n)&&!r)return n;n=r}return null}function up(n,r,s){const a=r[10];a.begin&&a.begin();try{Bl(n,r,n.template,s)}catch(l){throw Hh(r,l),l}finally{a.end&&a.end()}}function Bh(n){!function Uh(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=pc(s),l=a[1];Jg(l,a,l.template,s)}}(n[8])}function cp(n,r,s){yu(0),r(n,s)}const jh=(()=>Promise.resolve(null))();function $h(n){return n[7]||(n[7]=[])}function dp(n){return n.cleanup||(n.cleanup=[])}function Hh(n,r){const s=n[9],a=s?s.get(Pr,null):null;a&&a.handleError(r)}function cm(n,r,s,a,l){for(let h=0;h<s.length;){const v=s[h++],w=s[h++],C=r[v],F=n.data[v];null!==F.setInput?F.setInput(C,l,a,w):C[w]=l}}function lu(n,r,s){const a=ze(r,n);!function ad(n,r,s){ur(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Dd(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let v=0;v<r.length;v++){const w=r[v];"number"==typeof w?h=w:1==h?l=Se(l,w):2==h&&(a=Se(a,w+": "+r[++v]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}const hp=new Lt("INJECTOR",-1);class Gh{get(r,s=Ko){if(s===Ko){const a=new Error(`NullInjectorError: No provider for ${Me(r)}!`);throw a.name="NullInjectorError",a}return s}}const fp=new Lt("Set Injector scope."),Hl={},rv={};let Cd;function pp(){return void 0===Cd&&(Cd=new Gh),Cd}function Wh(n,r=null,s=null,a){const l=zh(n,r,s,a);return l._resolveInjectorDefTypes(),l}function zh(n,r=null,s=null,a){return new gp(n,s,r||pp(),a)}class gp{constructor(r,s,a,l=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];s&&Is(s,w=>this.processProvider(w,r,s)),Is([r],w=>this.processInjectorType(w,[],h)),this.records.set(hp,ca(void 0,this));const v=this.records.get(fp);this.scope=null!=v?v.value:null,this.source=l||("object"==typeof r?null:Me(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=Ko,a=kt.Default){this.assertNotDestroyed();const l=ft(this),h=on(void 0);try{if(!(a&kt.SkipSelf)){let w=this.records.get(r);if(void 0===w){const C=function wp(n){return"function"==typeof n||"object"==typeof n&&n instanceof Lt}(r)&&sn(r);w=C&&this.injectableDefInScope(C)?ca(Wu(r),Hl):null,this.records.set(r,w)}if(null!=w)return this.hydrate(r,w)}return(a&kt.Self?pp():this.parent).get(r,s=a&kt.Optional&&s===Ko?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[hl]=v[hl]||[]).unshift(Me(r)),l)throw v;return function Ra(n,r,s,a){const l=n[hl];throw r[ie]&&l.unshift(r[ie]),n.message=function Ya(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let l=Me(r);if(Array.isArray(r))l=r.map(Me).join(" -> ");else if("object"==typeof r){let h=[];for(let v in r)if(r.hasOwnProperty(v)){let w=r[v];h.push(v+":"+("string"==typeof w?JSON.stringify(w):Me(w)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(R,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[hl]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{on(h),ft(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,l)=>r.push(Me(l))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xe(205,!1)}processInjectorType(r,s,a){if(!(r=Ce(r)))return!1;let l=Ln(r);const h=null==l&&r.ngModule||void 0,v=void 0===h?r:h,w=-1!==a.indexOf(v);if(void 0!==h&&(l=Ln(h)),null==l)return!1;if(null!=l.imports&&!w){let G;a.push(v);try{Is(l.imports,te=>{this.processInjectorType(te,s,a)&&(void 0===G&&(G=[]),G.push(te))})}finally{}if(void 0!==G)for(let te=0;te<G.length;te++){const{ngModule:ge,providers:Pe}=G[te];Is(Pe,tt=>this.processProvider(tt,ge,Pe||Gt))}}this.injectorDefTypes.add(v);const C=Vr(v)||(()=>new v);this.records.set(v,ca(C,Hl));const F=l.providers;if(null!=F&&!w){const G=r;Is(F,te=>this.processProvider(te,G,F))}return void 0!==h&&void 0!==r.providers}processProvider(r,s,a){let l=Rc(r=Ce(r))?r:Ce(r&&r.provide);const h=function mp(n,r,s){return yp(n)?ca(void 0,n.useValue):ca(Gl(n),Hl)}(r);if(Rc(r)||!0!==r.multi)this.records.get(l);else{let v=this.records.get(l);v||(v=ca(void 0,Hl,!0),v.factory=()=>Tn(v.multi),this.records.set(l,v)),l=r,v.multi.push(r)}this.records.set(l,h)}hydrate(r,s){return s.value===Hl&&(s.value=rv,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Ep(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Ce(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Wu(n){const r=sn(n),s=null!==r?r.factory:Vr(n);if(null!==s)return s;if(n instanceof Lt)throw new Xe(204,!1);if(n instanceof Function)return function zu(n){const r=n.length;if(r>0)throw _i(r,"?"),new Xe(204,!1);const s=function wn(n){const r=n&&(n[sr]||n[fr]);if(r){const s=function Xn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Xe(204,!1)}function Gl(n,r,s){let a;if(Rc(n)){const l=Ce(n);return Vr(l)||Wu(l)}if(yp(n))a=()=>Ce(n.useValue);else if(function iv(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Tn(n.deps||[]));else if(function xc(n){return!(!n||!n.useExisting)}(n))a=()=>qt(Ce(n.useExisting));else{const l=Ce(n&&(n.useClass||n.provide));if(!function _p(n){return!!n.deps}(n))return Vr(l)||Wu(l);a=()=>new l(...Tn(n.deps))}return a}function ca(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function yp(n){return null!==n&&"object"==typeof n&&De in n}function Rc(n){return"function"==typeof n}let da=(()=>{class n{static create(s,a){var l;if(Array.isArray(s))return Wh({name:""},a,s,"");{const h=null!==(l=s.name)&&void 0!==l?l:"";return Wh({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=Ko,n.NULL=new Gh,n.\u0275prov=nt({token:n,providedIn:"any",factory:()=>qt(hp)}),n.__NG_ELEMENT_ID__=-1,n})();function bp(n,r){zi(pc(n)[1],hn())}function Tp(n){let r=function Qh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(ai(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Xe(903,"");l=r.\u0275dir}if(l){if(s){a.push(l);const v=n;v.inputs=Td(n.inputs),v.declaredInputs=Td(n.declaredInputs),v.outputs=Td(n.outputs);const w=l.hostBindings;w&&bm(n,w);const C=l.viewQuery,F=l.contentQueries;if(C&&Sp(n,C),F&&Oc(n,F),Ae(n.inputs,l.inputs),Ae(n.declaredInputs,l.declaredInputs),Ae(n.outputs,l.outputs),ai(l)&&l.data.animation){const G=n.data;G.animation=(G.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let v=0;v<h.length;v++){const w=h[v];w&&w.ngInherit&&w(n),w===Tp&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Ap(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=$o(l.hostAttrs,s=$o(s,l.hostAttrs))}}(a)}function Td(n){return n===Wn?{}:n===Gt?[]:n}function Sp(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Oc(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function bm(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let ea=null;function Ku(){if(!ea){const n=An.Symbol;if(n&&n.iterator)ea=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(ea=a)}}}return ea}function Wl(n){return!!Ad(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ku()in n)}function Ad(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ba(n,r,s){return n[r]=s}function js(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Xh(n,r,s,a){const l=P();return js(l,xs(),r)&&(Le(),Ua(Nr(),l,n,r,s,a)),Xh}function xm(n,r,s,a,l,h,v,w){const C=P(),F=Le(),G=n+20,te=F.firstCreatePass?function pv(n,r,s,a,l,h,v,w,C){const F=r.consts,G=la(r,n,4,v||null,nr(F,w));Ed(r,s,G,nr(F,C)),zi(r,G);const te=G.tViews=Oh(2,G,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,F);return null!==r.queries&&(r.queries.template(r,G),te.queries=r.queries.embeddedTView(G)),G}(G,F,C,r,s,a,l,h,v):F.data[G];Br(te,!1);const ge=C[11].createComment("");hd(F,C,ge,te),xi(ge,C),Mc(C,C[G]=Lh(ge,C,ge,te)),Cs(te)&&Yf(F,C,te),null!=v&&vd(C,te,w)}function tf(n){return Un(function mu(){return nn.lFrame.contextLView}(),20+n)}function ql(n,r=kt.Default){const s=P();return null===s?qt(n,r):N(hn(),s,Ce(n),r)}function Lm(){throw new Error("invalid")}function zp(n,r,s){const a=P();return js(a,xs(),r)&&function _o(n,r,s,a,l,h,v,w){const C=qe(r,s);let G,F=r.inputs;!w&&null!=F&&(G=F[a])?(cm(n,s,G,a,l),pi(r)&&function im(n,r){const s=dn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function Jf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=v?v(l,r.value||"",a):l,ur(h)?h.setProperty(C,a,l):qi(a)||(C.setProperty?C.setProperty(a,l):C[a]=l))}(Le(),Nr(),a,n,r,a[11],s,!1),zp}function qr(n,r,s,a,l){const v=l?"class":"style";cm(n,s,r.inputs[v],v,a)}function Kp(n,r,s,a){const l=P(),h=Le(),v=20+n,w=l[11],C=l[v]=_c(w,r,function tc(){return nn.lFrame.currentNamespace}()),F=h.firstCreatePass?function J_(n,r,s,a,l,h,v){const w=r.consts,F=la(r,n,2,l,nr(w,h));return Ed(r,s,F,nr(w,v)),null!==F.attrs&&Dd(F,F.attrs,!1),null!==F.mergedAttrs&&Dd(F,F.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,F),F}(v,h,l,0,r,s,a):h.data[v];Br(F,!0);const G=F.mergedAttrs;null!==G&&jo(w,C,G);const te=F.classes;null!==te&&Bu(w,C,te);const ge=F.styles;return null!==ge&&Uu(w,C,ge),64!=(64&F.flags)&&hd(h,l,C,F),0===function Fi(){return nn.lFrame.elementDepthCount}()&&xi(C,l),function qs(){nn.lFrame.elementDepthCount++}(),Cs(F)&&(Yf(h,l,F),Rh(h,F,l)),null!==a&&vd(l,F),Kp}function Di(){let n=hn();Ys()?cs():(n=n.parent,Br(n,!1));const r=n;!function Zs(){nn.lFrame.elementDepthCount--}();const s=Le();return s.firstCreatePass&&(zi(s,n),fs(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ha(n){return 0!=(16&n.flags)}(r)&&qr(s,r,P(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Iu(n){return 0!=(32&n.flags)}(r)&&qr(s,r,P(),r.stylesWithoutHost,!1),Di}function af(n,r,s,a){return Kp(n,r,s,a),Di(),af}function Nd(n,r,s){const a=P(),l=Le(),h=n+20,v=l.firstCreatePass?function Iv(n,r,s,a,l){const h=r.consts,v=nr(h,a),w=la(r,n,8,"ng-container",v);return null!==v&&Dd(w,v,!0),Ed(r,s,w,nr(h,l)),null!==r.queries&&r.queries.elementStart(r,w),w}(h,l,a,r,s):l.data[h];Br(v,!0);const w=a[h]=a[11].createComment("");return hd(l,a,w,v),xi(w,a),Cs(v)&&(Yf(l,a,v),Rh(l,v,a)),null!=s&&vd(a,v),Nd}function uf(){let n=hn();const r=Le();return Ys()?cs():(n=n.parent,Br(n,!1)),r.firstCreatePass&&(zi(r,n),fs(n)&&r.queries.elementEnd(n)),uf}function Um(){return P()}function qp(n){return!!n&&"function"==typeof n.then}function Dv(n){return!!n&&"function"==typeof n.subscribe}const Bm=Dv;function Zp(n,r,s,a){const l=P(),h=Le(),v=hn();return function Cv(n,r,s,a,l,h,v,w){const C=Cs(a),G=n.firstCreatePass&&dp(n),te=r[8],ge=$h(r);let Pe=!0;if(3&a.type||w){const xt=qe(a,r),Xt=w?w(xt):xt,ut=ge.length,vn=w?cr=>w(M(cr[a.index])):a.index;if(ur(s)){let cr=null;if(!w&&C&&(cr=function du(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const v=l[h];if(v===s&&l[h+1]===a){const w=r[7],C=l[h+2];return w.length>C?w[C]:null}"string"==typeof v&&(h+=2)}return null}(n,r,l,a.index)),null!==cr)(cr.__ngLastListenerFn__||cr).__ngNextListenerFn__=h,cr.__ngLastListenerFn__=h,Pe=!1;else{h=hu(a,r,te,h,!1);const Lr=s.listen(Xt,l,h);ge.push(h,Lr),G&&G.push(l,vn,ut,ut+1)}}else h=hu(a,r,te,h,!0),Xt.addEventListener(l,h,v),ge.push(h),G&&G.push(l,vn,ut,v)}else h=hu(a,r,te,h,!1);const tt=a.outputs;let _t;if(Pe&&null!==tt&&(_t=tt[l])){const xt=_t.length;if(xt)for(let Xt=0;Xt<xt;Xt+=2){const va=r[_t[Xt]][_t[Xt+1]].subscribe(h),Gd=ge.length;ge.push(h,va),G&&G.push(l,a.index,Gd,-(Gd+1))}}}(h,l,l[11],v,n,r,!!s,a),Zp}function fa(n,r,s,a){try{return!1!==s(a)}catch(l){return Hh(n,l),!1}}function hu(n,r,s,a,l){return function h(v){if(v===Function)return a;const w=2&n.flags?dn(n.index,r):r;0==(32&r[2])&&Id(w);let C=fa(r,0,a,v),F=h.__ngNextListenerFn__;for(;F;)C=fa(r,0,F,v)&&C,F=F.__ngNextListenerFn__;return l&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function kd(n=1){return function vu(n){return(nn.lFrame.contextLView=function ra(n,r){for(;n>0;)r=r[15],n--;return r}(n,nn.lFrame.contextLView))[8]}(n)}function bv(n,r){let s=null;const a=function Fl(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let l=0;l<r.length;l++){const h=r[l];if("*"!==h){if(null===a?Ic(n,h,!0):Fy(a,h))return l}else s=l}return s}function jm(n){const r=P()[16][6];if(!r.projection){const a=r.projection=_i(n?n.length:1,null),l=a.slice();let h=r.child;for(;null!==h;){const v=n?bv(h,n):0;null!==v&&(l[v]?l[v].projectionNext=h:a[v]=h,l[v]=h),h=h.next}}}function Qp(n,r=0,s){const a=P(),l=Le(),h=la(l,20+n,16,null,s||null);null===h.projection&&(h.projection=r),cs(),64!=(64&h.flags)&&function Oy(n,r,s){Bf(r[11],0,r,s,Pg(n,s,r),Lu(s.parent||r[6],s,r))}(l,a,h)}function ng(n,r,s,a,l){const h=n[s+1],v=null===r;let w=a?Us(h):Jo(h),C=!1;for(;0!==w&&(!1===C||v);){const G=n[w+1];Zl(n[w],r)&&(C=!0,n[w+1]=a?Bs(G):Ll(G)),w=a?Us(G):Jo(G)}C&&(n[s+1]=a?Ll(h):Bs(h))}function Zl(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&po(n,r)>=0}function hf(n,r){return function ga(n,r,s,a){const l=P(),h=Le(),v=function ds(n){const r=nn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function ag(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[jr()],v=function Km(n,r){return r>=n.expandoStartIndex}(n,s);(function Ud(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!v&&(r=!1),r=function Av(n,r,s,a){const l=function ta(n){const r=nn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Bc(s=ug(null,n,r,s,a),r.attrs,a),h=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==l)if(s=ug(l,n,r,s,a),null===h){let C=function Sv(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Jo(a))return n[Us(a)]}(n,r,a);void 0!==C&&Array.isArray(C)&&(C=ug(null,n,r,C[1],a),C=Bc(C,r.attrs,a),function qm(n,r,s,a){n[Us(s?r.classBindings:r.styleBindings)]=a}(n,r,a,C))}else h=function Mv(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Bc(a,n[h].hostAttrs,s);return Bc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function eg(n,r,s,a,l,h){let v=h?r.classBindings:r.styleBindings,w=Us(v),C=Jo(v);n[a]=s;let G,F=!1;if(Array.isArray(s)){const te=s;G=te[1],(null===G||po(te,G)>0)&&(F=!0)}else G=s;if(l)if(0!==C){const ge=Us(n[w+1]);n[a+1]=Dc(ge,w),0!==ge&&(n[ge+1]=Cc(n[ge+1],a)),n[w+1]=function Hg(n,r){return 131071&n|r<<17}(n[w+1],a)}else n[a+1]=Dc(w,0),0!==w&&(n[w+1]=Cc(n[w+1],a)),w=a;else n[a+1]=Dc(C,0),0===w?w=a:n[C+1]=Cc(n[C+1],a),C=a;F&&(n[a+1]=Ll(n[a+1])),ng(n,G,a,!0),ng(n,G,a,!1),function tg(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&po(h,r)>=0&&(s[a+1]=Bs(s[a+1]))}(r,G,n,a,h),v=Dc(w,C),h?r.classBindings=v:r.styleBindings=v}(l,h,r,s,v,a)}}(h,n,v,a),r!==In&&js(l,v,r)&&function lg(n,r,s,a,l,h,v,w){if(!(3&r.type))return;const C=n.data,F=C[w+1];Vd(function Wf(n){return 1==(1&n)}(F)?cg(C,r,s,l,Jo(F),v):void 0)||(Vd(h)||function $g(n){return 2==(2&n)}(F)&&(h=cg(C,null,s,l,w,v)),function Pl(n,r,s,a,l){const h=ur(n);if(r)l?h?n.addClass(s,a):s.classList.add(a):h?n.removeClass(s,a):s.classList.remove(a);else{let v=-1===a.indexOf("-")?void 0:Ze.DashCase;if(null==l)h?n.removeStyle(s,a,v):s.style.removeProperty(a);else{const w="string"==typeof l&&l.endsWith("!important");w&&(l=l.slice(0,-10),v|=Ze.Important),h?n.setStyle(s,a,l,v):s.style.setProperty(a,l,w?"important":"")}}}(a,v,ze(jr(),s),l,h))}(h,h.data[jr()],l,l[11],n,l[v+1]=function dg(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Me(qo(n)))),n}(r,s),a,v)}(n,r,null,!0),hf}function ug(n,r,s,a,l){let h=null;const v=s.directiveEnd;let w=s.directiveStylingLast;for(-1===w?w=s.directiveStart:w++;w<v&&(h=r[w],a=Bc(a,h.hostAttrs,l),h!==n);)w++;return null!==n&&(s.directiveStylingLast=w),a}function Bc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const v=r[h];"number"==typeof v?l=v:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ei(n,v,!!s||r[++h]))}return void 0===n?null:n}function cg(n,r,s,a,l,h){const v=null===r;let w;for(;l>0;){const C=n[l],F=Array.isArray(C),G=F?C[1]:C,te=null===G;let ge=s[l+1];ge===In&&(ge=te?Gt:void 0);let Pe=te?to(ge,a):G===a?ge:void 0;if(F&&!Vd(Pe)&&(Pe=to(C,a)),Vd(Pe)&&(w=Pe,v))return w;const tt=n[l+1];l=v?Us(tt):Jo(tt)}if(null!==r){let C=h?r.residualClasses:r.residualStyles;null!=C&&(w=to(C,a))}return w}function Vd(n){return void 0!==n}function Qm(n,r=""){const s=P(),a=Le(),l=n+20,h=a.firstCreatePass?la(a,l,1,r,null):a.data[l],v=s[l]=function vc(n,r){return ur(n)?n.createText(r):n.createTextNode(r)}(s[11],r);hd(a,s,v,h),Br(h,!1)}function ff(n){return ya("",n,""),ff}function ya(n,r,s){const a=P(),l=function Kl(n,r,s,a){return js(n,xs(),s)?r+Ue(s)+a:In}(a,n,r,s);return l!==In&&lu(a,jr(),l),ya}const il=void 0;var Ql=["en",[["a","p"],["AM","PM"],il],[["AM","PM"],il,il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",il,"{1} 'at' {0}",il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dy(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Ds={};function mf(n){const r=function yg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Gc(r);if(s)return s;const a=r.split("-")[0];if(s=Gc(a),s)return s;if("en"===a)return Ql;throw new Error(`Missing locale data for the locale "${n}".`)}function Hc(n){return mf(n)[_n.PluralCase]}function Gc(n){return n in Ds||(Ds[n]=An.ng&&An.ng.common&&An.ng.common.locales&&An.ng.common.locales[n]),Ds[n]}var _n=(()=>((_n=_n||{})[_n.LocaleId=0]="LocaleId",_n[_n.DayPeriodsFormat=1]="DayPeriodsFormat",_n[_n.DayPeriodsStandalone=2]="DayPeriodsStandalone",_n[_n.DaysFormat=3]="DaysFormat",_n[_n.DaysStandalone=4]="DaysStandalone",_n[_n.MonthsFormat=5]="MonthsFormat",_n[_n.MonthsStandalone=6]="MonthsStandalone",_n[_n.Eras=7]="Eras",_n[_n.FirstDayOfWeek=8]="FirstDayOfWeek",_n[_n.WeekendRange=9]="WeekendRange",_n[_n.DateFormat=10]="DateFormat",_n[_n.TimeFormat=11]="TimeFormat",_n[_n.DateTimeFormat=12]="DateTimeFormat",_n[_n.NumberSymbols=13]="NumberSymbols",_n[_n.NumberFormats=14]="NumberFormats",_n[_n.CurrencyCode=15]="CurrencyCode",_n[_n.CurrencySymbol=16]="CurrencySymbol",_n[_n.CurrencyName=17]="CurrencyName",_n[_n.Currencies=18]="Currencies",_n[_n.Directionality=19]="Directionality",_n[_n.PluralCase=20]="PluralCase",_n[_n.ExtraData=21]="ExtraData",_n))();const zc="en-US";let hy=zc;function Yv(n,r,s,a,l){if(n=Ce(n),Array.isArray(n))for(let h=0;h<n.length;h++)Yv(n[h],r,s,a,l);else{const h=Le(),v=P();let w=Rc(n)?n:Ce(n.provide),C=Gl(n);const F=hn(),G=1048575&F.providerIndexes,te=F.directiveStart,ge=F.providerIndexes>>20;if(Rc(n)||!n.multi){const Pe=new Os(C,l,ql),tt=Jv(w,r,l?G:G+ge,te);-1===tt?(I(ho(F,v),h,w),Qv(h,n,r.length),r.push(w),F.directiveStart++,F.directiveEnd++,l&&(F.providerIndexes+=1048576),s.push(Pe),v.push(Pe)):(s[tt]=Pe,v[tt]=Pe)}else{const Pe=Jv(w,r,G+ge,te),tt=Jv(w,r,G,G+ge),_t=Pe>=0&&s[Pe],xt=tt>=0&&s[tt];if(l&&!xt||!l&&!_t){I(ho(F,v),h,w);const Xt=function cw(n,r,s,a,l){const h=new Os(n,s,ql);return h.multi=[],h.index=r,h.componentProviders=0,f0(h,l,a&&!s),h}(l?lw:uw,s.length,l,a,C);!l&&xt&&(s[tt].providerFactory=Xt),Qv(h,n,r.length,0),r.push(w),F.directiveStart++,F.directiveEnd++,l&&(F.providerIndexes+=1048576),s.push(Xt),v.push(Xt)}else Qv(h,n,Pe>-1?Pe:tt,f0(s[l?tt:Pe],C,!l&&a));!l&&a&&xt&&s[tt].componentProviders++}}}function Qv(n,r,s,a){const l=Rc(r),h=function vp(n){return!!n.useClass}(r);if(l||h){const C=(h?Ce(r.useClass):r).prototype.ngOnDestroy;if(C){const F=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const G=F.indexOf(s);-1===G?F.push(s,[a,C]):F[G+1].push(a,C)}else F.push(s,C)}}}function f0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function Jv(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function uw(n,r,s,a){return Xv(this.multi,[])}function lw(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=It(s,s[1],this.providerFactory.index,a);h=w.slice(0,v),Xv(l,h);for(let C=v;C<w.length;C++)h.push(w[C])}else h=[],Xv(l,h);return h}function Xv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function p0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function aw(n,r,s){const a=Le();if(a.firstCreatePass){const l=ai(n);Yv(s,a.data,a.blueprint,l,!0),Yv(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class g0{}class fw{resolveComponentFactory(r){throw function hw(n){const r=Error(`No component factory found for ${Me(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let _y=(()=>{class n{}return n.NULL=new fw,n})();function pw(){return If(hn(),P())}function If(n,r){return new Ig(qe(n,r))}let Ig=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=pw,n})();function gw(n){return n instanceof Ig?n.nativeElement:n}class y0{}let mw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function vw(){const n=P(),s=dn(hn().index,n);return function yw(n){return n[11]}(xr(s)?s:n)}(),n})(),_w=(()=>{class n{}return n.\u0275prov=nt({token:n,providedIn:"root",factory:()=>null}),n})();class v0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const _0=new v0("13.3.2"),e_={};function Ey(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(M(h)),Xr(h))for(let w=10;w<h.length;w++){const C=h[w],F=C[1].firstChild;null!==F&&Ey(C[1],C,F,a)}const v=s.type;if(8&v)Ey(n,r,s.child,a);else if(32&v){const w=Yt(s,r);let C;for(;C=w();)a.push(C)}else if(16&v){const w=vh(r,s);if(Array.isArray(w))a.push(...w);else{const C=ri(r[16]);Ey(C[1],C,w,a,!0)}}s=l?s.projectionNext:s.next}return a}class Dg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Ey(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Xr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Vf(r,a),Wo(s,a))}this._attachedToViewContainer=!1}Ng(this._lView[1],this._lView)}onDestroy(r){nm(this._lView[1],this._lView,null,r)}markForCheck(){Id(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){up(this._lView[1],this._lView,this.context)}checkNoChanges(){!function tv(n,r,s){oo(!0);try{up(n,r,s)}finally{oo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Xe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lf(n,r){Ec(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Xe(902,"");this._appRef=r}}class Ew extends Dg{constructor(r){super(r),this._view=r}detectChanges(){Bh(this._view)}checkNoChanges(){!function lp(n){oo(!0);try{Bh(n)}finally{oo(!1)}}(this._view)}get context(){return null}}class E0 extends _y{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=cn(r);return new t_(s,this.ngModule)}}function w0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class t_ extends g0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function pd(n){return n.map(Ly).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return w0(this.componentDef.inputs)}get outputs(){return w0(this.componentDef.outputs)}create(r,s,a,l){const h=(l=l||this.ngModule)?function Iw(n,r){return{get:(s,a,l)=>{const h=n.get(s,e_,l);return h!==e_||a===e_?h:r.get(s,a,l)}}}(r,l.injector):r,v=h.get(y0,x),w=h.get(_w,null),C=v.createRenderer(null,this.componentDef),F=this.componentDef.selectors[0][0]||"div",G=a?function tm(n,r,s){if(ur(n))return n.selectRootElement(r,s===vt.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(C,a,this.componentDef.encapsulation):_c(v.createRenderer(null,this.componentDef),F,function ww(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(F)),te=this.componentDef.onPush?576:528,ge=function Cm(n,r){return{components:[],scheduler:n||kf,clean:jh,playerHandler:r||null,flags:0}}(),Pe=Oh(0,null,null,1,0,null,null,null,null,null),tt=Va(null,Pe,ge,te,null,null,v,C,w,h);let _t,xt;Qs(tt);try{const Xt=function Dm(n,r,s,a,l,h){const v=s[1];s[20]=n;const C=la(v,20,2,"#host",null),F=C.mergedAttrs=r.hostAttrs;null!==F&&(Dd(C,F,!0),null!==n&&(jo(l,n,F),null!==C.classes&&Bu(l,n,C.classes),null!==C.styles&&Uu(l,n,C.styles)));const G=a.createRenderer(n,r),te=Va(s,em(r),null,r.onPush?64:16,s[20],C,a,G,h||null,null);return v.firstCreatePass&&(I(ho(C,s),v,r.type),rp(v,C),Ph(C,s.length,1)),Mc(s,te),s[20]=te}(G,this.componentDef,tt,v,C);if(G)if(a)jo(C,G,["ng-version",_0.full]);else{const{attrs:ut,classes:vn}=function ju(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!Qo(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);ut&&jo(C,G,ut),vn&&vn.length>0&&Bu(C,G,vn.join(" "))}if(xt=Kn(Pe,20),void 0!==s){const ut=xt.projection=[];for(let vn=0;vn<this.ngContentSelectors.length;vn++){const cr=s[vn];ut.push(null!=cr?Array.from(cr):null)}}_t=function Yh(n,r,s,a,l){const h=s[1],v=function tp(n,r,s){const a=hn();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),ip(n,a,r,uu(n,r,1,null),s));const l=It(r,n,a.directiveStart,a);xi(l,r);const h=qe(a,r);return h&&xi(h,r),l}(h,s,r);if(a.components.push(v),n[8]=v,l&&l.forEach(C=>C(v,r)),r.contentQueries){const C=hn();r.contentQueries(1,v,C.directiveStart)}const w=hn();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(bo(w.index),np(s[1],w,0,w.directiveStart,w.directiveEnd,r),am(r,v)),v}(Xt,this.componentDef,tt,ge,[bp]),Ac(Pe,tt,null)}finally{Co()}return new Cw(this.componentType,_t,If(xt,tt),tt,xt)}}class Cw extends class dw{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new Ew(l),this.componentType=r}get injector(){return new Nn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Df{}class I0{}const Cf=new Map;class b0 extends Df{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new E0(this);const a=$n(r);this._bootstrapComponents=f(a.bootstrap),this._r3Injector=zh(r,s,[{provide:Df,useValue:this},{provide:_y,useValue:this.componentFactoryResolver}],Me(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=da.THROW_IF_NOT_FOUND,a=kt.Default){return r===da||r===Df||r===hp?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class n_ extends I0{constructor(r){super(),this.moduleType=r,null!==$n(r)&&function Tw(n){const r=new Set;!function s(a){const l=$n(a,!0),h=l.id;null!==h&&(function D0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Me(r)} vs ${Me(r.name)}`)}(h,Cf.get(h),a),Cf.set(h,a));const v=f(l.imports);for(const w of v)r.has(w)||(r.add(w),s(w))}(n)}(r)}create(r){return new b0(this.moduleType,r)}}function T0(n,r,s){const a=li()+n,l=P();return l[a]===In?Ba(l,a,s?r.call(s):r()):function zl(n,r){return n[r]}(l,a)}function A0(n,r,s,a){return M0(P(),li(),n,r,s,a)}function S0(n,r,s,a,l){return function x0(n,r,s,a,l,h,v){const w=r+s;return function cu(n,r,s,a){const l=js(n,r,s);return js(n,r+1,a)||l}(n,w,l,h)?Ba(n,w+2,v?a.call(v,l,h):a(l,h)):Cg(n,w+2)}(P(),li(),n,r,s,a,l)}function Cg(n,r){const s=n[r];return s===In?void 0:s}function M0(n,r,s,a,l,h){const v=r+s;return js(n,v,l)?Ba(n,v+1,h?a.call(h,l):a(l)):Cg(n,v+1)}function k0(n,r){const s=Le();let a;const l=n+20;s.firstCreatePass?(a=function kw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=Vr(a.type)),v=on(ql);try{const w=hs(!1),C=h();return hs(w),function Rm(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,P(),l,C),C}finally{on(v)}}function P0(n,r,s){const a=n+20,l=P(),h=Un(l,a);return function bg(n,r){return n[1].data[r].pure}(l,a)?M0(l,li(),r,h.transform,s,h):h.transform(s)}function r_(n){return r=>{setTimeout(n,void 0,r)}}const ol=class Uw extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var l,h,v;let w=r,C=s||(()=>null),F=a;if(r&&"object"==typeof r){const te=r;w=null===(l=te.next)||void 0===l?void 0:l.bind(te),C=null===(h=te.error)||void 0===h?void 0:h.bind(te),F=null===(v=te.complete)||void 0===v?void 0:v.bind(te)}this.__isAsync&&(C=r_(C),w&&(w=r_(w)),F&&(F=r_(F)));const G=super.subscribe({next:w,error:C,complete:F});return r instanceof K.w0&&r.add(G),G}};function Bw(){return this._results[Ku()]()}class i_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ku(),a=i_.prototype;a[s]||(a[s]=Bw)}get changes(){return this._changes||(this._changes=new ol)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=Ui(r);(this._changesDetected=!function Ao(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Tg=(()=>{class n{}return n.__NG_ELEMENT_ID__=Hw,n})();const jw=Tg,$w=class extends jw{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=Va(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(a[19]=h.createEmbeddedView(s)),Ac(s,a,r),new Dg(a)}};function Hw(){return wy(hn(),P())}function wy(n,r){return 4&n.type?new $w(r,n,If(n,r)):null}let Iy=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gw,n})();function Gw(){return V0(hn(),P())}const Ww=Iy,F0=class extends Ww{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return If(this._hostTNode,this._hostLView)}get injector(){return new Nn(this._hostTNode,this._hostLView)}get parentInjector(){const r=rr(this._hostTNode,this._hostLView);if(Ta(r)){const s=vs(r,this._hostLView),a=_r(r);return new Nn(s[1].data[a+8],s)}return new Nn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=L0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const l=r.createEmbeddedView(s||{});return this.insert(l,a),l}createComponent(r,s,a,l,h){const v=r&&!function ws(n){return"function"==typeof n}(r);let w;if(v)w=s;else{const te=s||{};w=te.index,a=te.injector,l=te.projectableNodes,h=te.ngModuleRef}const C=v?r:new t_(cn(r)),F=a||this.parentInjector;if(!h&&null==C.ngModule){const ge=(v?F:this.parentInjector).get(Df,null);ge&&(h=ge)}const G=C.create(F,l,void 0,h);return this.insert(G.hostView,w),G}insert(r,s){const a=r._lView,l=a[1];if(function Yn(n){return Xr(n[3])}(a)){const G=this.indexOf(r);if(-1!==G)this.detach(G);else{const te=a[3],ge=new F0(te,te[6],te[3]);ge.detach(ge.indexOf(r))}}const h=this._adjustIndex(s),v=this._lContainer;!function My(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Ma(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const v=r[17];null!==v&&s!==v&&function xy(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(v,r);const w=r[19];null!==w&&w.insertView(n),r[2]|=128}(l,a,v,h);const w=fd(h,v),C=a[11],F=gh(C,v[7]);return null!==F&&function ld(n,r,s,a,l,h){a[0]=l,a[6]=r,Ec(n,a,s,1,l,h)}(l,v[6],C,a,F,w),r.attachToViewContainerRef(),Ma(s_(v),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=L0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Vf(this._lContainer,s);a&&(Wo(s_(this._lContainer),s),Ng(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Vf(this._lContainer,s);return a&&null!=Wo(s_(this._lContainer),s)?new Dg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function L0(n){return n[8]}function s_(n){return n[8]||(n[8]=[])}function V0(n,r){let s;const a=r[n.index];if(Xr(a))s=a;else{let l;if(8&n.type)l=M(a);else{const h=r[11];l=h.createComment("");const v=qe(n,r);Fu(h,gh(h,v),l,function dd(n,r){return ur(n)?n.nextSibling(r):r.nextSibling}(h,v),!1)}r[n.index]=s=Lh(a,r,l,n),Mc(r,s)}return new F0(s,n,r)}class o_{constructor(r){this.queryList=r,this.matches=null}clone(){return new o_(this.queryList)}setDirty(){this.queryList.setDirty()}}class a_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const v=s.getByIndex(h);l.push(this.queries[v.indexInDeclarationView].clone())}return new a_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==z0(r,s).matches&&this.queries[s].setDirty()}}class U0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class u_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new u_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class l_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new l_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,qw(s,h)),this.matchTNodeWithReadOption(r,s,je(s,r,h,!1,!1))}else a===Tg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,je(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Ig||l===Iy||l===Tg&&4&s.type)this.addMatch(s.index,-2);else{const h=je(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function qw(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function Yw(n,r,s,a){return-1===s?function Zw(n,r){return 11&n.type?If(n,r):4&n.type?wy(n,r):null}(r,n):-2===s?function Qw(n,r,s){return s===Ig?If(r,n):s===Tg?wy(r,n):s===Iy?V0(r,n):void 0}(n,r,a):It(n,n[1],s,r)}function B0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,v=s.matches,w=[];for(let C=0;C<v.length;C+=2){const F=v[C];w.push(F<0?null:Yw(r,h[F],v[C+1],s.metadata.read))}l.matches=w}return l.matches}function c_(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const v=B0(n,r,l,s);for(let w=0;w<h.length;w+=2){const C=h[w];if(C>0)a.push(v[w/2]);else{const F=h[w+1],G=r[-C];for(let te=10;te<G.length;te++){const ge=G[te];ge[17]===ge[3]&&c_(ge[1],ge,F,a)}if(null!==G[9]){const te=G[9];for(let ge=0;ge<te.length;ge++){const Pe=te[ge];c_(Pe[1],Pe,F,a)}}}}}return a}function j0(n){const r=P(),s=Le(),a=na();yu(a+1);const l=z0(s,a);if(n.dirty&&En(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?c_(s,r,a,[]):B0(s,r,l,a);n.reset(h,gw),n.notifyOnChanges()}return!0}return!1}function $0(n,r,s,a){const l=Le();if(l.firstCreatePass){const h=hn();(function W0(n,r,s){null===n.queries&&(n.queries=new u_),n.queries.track(new l_(r,s))})(l,new U0(r,s,a),h.index),function eI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function G0(n,r,s){const a=new i_(4==(4&s));nm(n,r,a,a.destroy),null===r[19]&&(r[19]=new a_),r[19].queries.push(new o_(a))}(l,P(),s)}function H0(){return function Xw(n,r){return n[19].queries[r].queryList}(P(),na())}function z0(n,r){return n.queries.getByIndex(r)}function K0(n,r){return wy(n,r)}function by(...n){}const cE=new Lt("Application Initializer");let m_=(()=>{class n{constructor(s){this.appInits=s,this.resolve=by,this.reject=by,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(qp(h))s.push(h);else if(Bm(h)){const v=new Promise((w,C)=>{h.subscribe({complete:w,error:C})});s.push(v)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(qt(cE,8))},n.\u0275prov=nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dE=new Lt("AppId",{providedIn:"root",factory:function hE(){return`${y_()}${y_()}${y_()}`}});function y_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fE=new Lt("Platform Initializer"),pE=new Lt("Platform ID"),gE=new Lt("appBootstrapListener");let mE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=nt({token:n,factory:n.\u0275fac}),n})();const v_=new Lt("LocaleId",{providedIn:"root",factory:()=>qn(v_,kt.Optional|kt.SkipSelf)||function yI(){return"undefined"!=typeof $localize&&$localize.locale||zc}()}),vI=new Lt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class _I{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let EI=(()=>{class n{compileModuleSync(s){return new n_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=f($n(s).declarations).reduce((v,w)=>{const C=cn(w);return C&&v.push(new t_(C)),v},[]);return new _I(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const II=(()=>Promise.resolve(0))();function __(n){"undefined"==typeof Zone?II.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ol(!1),this.onMicrotaskEmpty=new ol(!1),this.onStable=new ol(!1),this.onError=new ol(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function DI(){let n=An.requestAnimationFrame,r=An.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function TI(n){const r=()=>{!function bI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(An,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,w_(n),n.isCheckStableRunning=!0,E_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),w_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,v,w)=>{try{return yE(n),s.invokeTask(l,h,v,w)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),vE(n)}},onInvoke:(s,a,l,h,v,w,C)=>{try{return yE(n),s.invoke(l,h,v,w,C)}finally{n.shouldCoalesceRunChangeDetection&&r(),vE(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,w_(n),E_(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+l,r,CI,by,by);try{return h.runTask(v,s,a)}finally{h.cancelTask(v)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const CI={};function E_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function w_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function yE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function vE(n){n._nesting--,E_(n)}class AI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ol,this.onMicrotaskEmpty=new ol,this.onStable=new ol,this.onError=new ol}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}let _E=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pu.assertNotInAngularZone(),__(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())__(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(qt(pu))},n.\u0275prov=nt({token:n,factory:n.\u0275fac}),n})(),EE=(()=>{class n{constructor(){this._applications=new Map,I_.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return I_.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=nt({token:n,factory:n.\u0275fac}),n})();class SI{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function MI(n){I_=n}let gu,I_=new SI;const wE=new Lt("AllowMultipleToken");class OI{constructor(r,s){this.name=r,this.token=s}}function IE(n,r,s=[]){const a=`Platform: ${r}`,l=new Lt(a);return(h=[])=>{let v=DE();if(!v||v.injector.get(wE,!1))if(n)n(s.concat(h).concat({provide:l,useValue:!0}));else{const w=s.concat(h).concat({provide:l,useValue:!0},{provide:fp,useValue:"platform"});!function NI(n){if(gu&&!gu.destroyed&&!gu.injector.get(wE,!1))throw new Xe(400,"");gu=n.get(CE);const r=n.get(fE,null);r&&r.forEach(s=>s())}(da.create({providers:w,name:a}))}return function kI(n){const r=DE();if(!r)throw new Xe(401,"");return r}()}}function DE(){return gu&&!gu.destroyed?gu:null}let CE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const w=function PI(n,r){let s;return s="noop"===n?new AI:("zone.js"===n?void 0:n)||new pu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),C=[{provide:pu,useValue:w}];return w.run(()=>{const F=da.create({providers:C,parent:this.injector,name:s.moduleType.name}),G=s.create(F),te=G.injector.get(Pr,null);if(!te)throw new Xe(402,"");return w.runOutsideAngular(()=>{const ge=w.onError.subscribe({next:Pe=>{te.handleError(Pe)}});G.onDestroy(()=>{C_(this._modules,G),ge.unsubscribe()})}),function FI(n,r,s){try{const a=s();return qp(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(te,w,()=>{const ge=G.injector.get(m_);return ge.runInitializers(),ge.donePromise.then(()=>(function Hv(n){ht(n,"Expected localeId to be defined"),"string"==typeof n&&(hy=n.toLowerCase().replace(/_/g,"-"))}(G.injector.get(v_,zc)||zc),this._moduleDoBootstrap(G),G))})})}bootstrapModule(s,a=[]){const l=bE({},a);return function xI(n,r,s){const a=new n_(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(D_);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Xe(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xe(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(qt(da))},n.\u0275prov=nt({token:n,factory:n.\u0275fac}),n})();function bE(n,r){return Array.isArray(r)?r.reduce(bE,n):Object.assign(Object.assign({},n),r)}let D_=(()=>{class n{constructor(s,a,l,h,v){this._zone=s,this._injector=a,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new Y.y(F=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{F.next(this._stable),F.complete()})}),C=new Y.y(F=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{pu.assertNotInAngularZone(),__(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,F.next(!0))})})});const te=this._zone.onUnstable.subscribe(()=>{pu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{F.next(!1)}))});return()=>{G.unsubscribe(),te.unsubscribe()}});this.isStable=(0,ve.T)(w,C.pipe((0,fe.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new Xe(405,"");let l;l=s instanceof g0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(l.componentType);const h=function RI(n){return n.isBoundToModule}(l)?void 0:this._injector.get(Df),w=l.create(da.NULL,[],a||l.selector,h),C=w.location.nativeElement,F=w.injector.get(_E,null),G=F&&w.injector.get(EE);return F&&G&&G.registerApplication(C,F),w.onDestroy(()=>{this.detachView(w.hostView),C_(this.components,w),G&&G.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Xe(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;C_(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(gE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(qt(pu),qt(da),qt(Pr),qt(_y),qt(m_))},n.\u0275prov=nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function C_(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let AE=!0,SE=!1;function VI(){return SE=!0,AE}function UI(){if(SE)throw new Error("Cannot enable prod mode after platform setup.");AE=!1}let BI=(()=>{class n{}return n.__NG_ELEMENT_ID__=jI,n})();function jI(n){return function $I(n,r,s){if(pi(n)&&!s){const a=dn(n.index,r);return new Dg(a,a)}return 47&n.type?new Dg(r[16],r):null}(hn(),P(),16==(16&n))}class OE{constructor(){}supports(r){return Wl(r)}create(r){return new qI(r)}}const KI=(n,r)=>r;class qI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||KI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const v=!a||s&&s.currentIndex<kE(a,l,h)?s:a,w=kE(v,l,h),C=v.currentIndex;if(v===a)l--,a=a._nextRemoved;else if(s=s._next,null==v.previousIndex)l++;else{h||(h=[]);const F=w-l,G=C-l;if(F!=G){for(let ge=0;ge<F;ge++){const Pe=ge<h.length?h[ge]:h[ge]=0,tt=Pe+ge;G<=tt&&tt<F&&(h[ge]=Pe+1)}h[v.previousIndex]=G-F}}w!==C&&r(v,w,C)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Wl(r))throw new Xe(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,v,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let w=0;w<this.length;w++)h=r[w],v=this._trackByFn(w,h),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,h,v,w)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,v,w),a=!0),s=s._next}else l=0,function fv(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Ku()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,w=>{v=this._trackByFn(l,w),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,w,v,l)),Object.is(s.item,w)||this._addIdentityChange(s,w)):(s=this._mismatch(s,w,v,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new ZI(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new NE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new NE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class ZI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class YI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class NE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new YI,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class PE{constructor(){}supports(r){return r instanceof Map||Ad(r)}create(){return new QI}}class QI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Ad(r)))throw new Xe(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,v=l._next;return h&&(h._next=v),v&&(v._prev=h),l._next=null,l._prev=null,l}const a=new JI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class JI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function FE(){return new M_([new OE])}let M_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||FE()),deps:[[n,new go,new ro]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Xe(901,"")}}return n.\u0275prov=nt({token:n,providedIn:"root",factory:FE}),n})();function LE(){return new x_([new PE])}let x_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||LE()),deps:[[n,new go,new ro]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(a)return a;throw new Xe(901,"")}}return n.\u0275prov=nt({token:n,providedIn:"root",factory:LE}),n})();const tD=IE(null,"core",[{provide:pE,useValue:"unknown"},{provide:CE,deps:[da]},{provide:EE,deps:[]},{provide:mE,deps:[]}]);let nD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(qt(D_))},n.\u0275mod=xe({type:n}),n.\u0275inj=Qt({}),n})()},2382:(bt,$e,U)=>{U.d($e,{Fj:()=>V,NI:()=>tn,oH:()=>mi,u:()=>Gi,cw:()=>Rn,sg:()=>Ti,u5:()=>nn,Cf:()=>Re,JU:()=>Xe,JJ:()=>gr,JL:()=>Hr,F:()=>xr,On:()=>Ts,c5:()=>dr,UX:()=>Pi,Q7:()=>q,kI:()=>he,_Y:()=>Ws});var p=U(5e3),K=U(9808),Y=U(8306),ve=U(4742),fe=U(8421),Ie=U(7669),Ae=U(5403),Me=U(3268),Se=U(1810),se=U(8996),Ce=U(4004);let lt=(()=>{class O{constructor(A,P){this._renderer=A,this._elementRef=P,this.onChange=Le=>{},this.onTouched=()=>{}}setProperty(A,P){this._renderer.setProperty(this._elementRef.nativeElement,A,P)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}}return O.\u0275fac=function(A){return new(A||O)(p.Y36(p.Qsj),p.Y36(p.SBq))},O.\u0275dir=p.lG2({type:O}),O})(),Ke=(()=>{class O extends lt{}return O.\u0275fac=function(){let S;return function(P){return(S||(S=p.n5z(O)))(P||O)}}(),O.\u0275dir=p.lG2({type:O,features:[p.qOj]}),O})();const Xe=new p.OlP("NgValueAccessor"),Fe={provide:Xe,useExisting:(0,p.Gpc)(()=>V),multi:!0},j=new p.OlP("CompositionEventMode");let V=(()=>{class O extends lt{constructor(A,P,Le){super(A,P),this._compositionMode=Le,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pt(){const O=(0,K.q)()?(0,K.q)().getUserAgent():"";return/android (\d+)/.test(O.toLowerCase())}())}writeValue(A){this.setProperty("value",null==A?"":A)}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}}return O.\u0275fac=function(A){return new(A||O)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(j,8))},O.\u0275dir=p.lG2({type:O,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(A,P){1&A&&p.NdJ("input",function(Ut){return P._handleInput(Ut.target.value)})("blur",function(){return P.onTouched()})("compositionstart",function(){return P._compositionStart()})("compositionend",function(Ut){return P._compositionEnd(Ut.target.value)})},features:[p._Bn([Fe]),p.qOj]}),O})();function Q(O){return null==O||0===O.length}function de(O){return null!=O&&"number"==typeof O.length}const Re=new p.OlP("NgValidators"),ke=new p.OlP("NgAsyncValidators"),Te=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class he{static min(S){return function Z(O){return S=>{if(Q(S.value)||Q(O))return null;const A=parseFloat(S.value);return!isNaN(A)&&A<O?{min:{min:O,actual:S.value}}:null}}(S)}static max(S){return function ye(O){return S=>{if(Q(S.value)||Q(O))return null;const A=parseFloat(S.value);return!isNaN(A)&&A>O?{max:{max:O,actual:S.value}}:null}}(S)}static required(S){return ae(S)}static requiredTrue(S){return function Ge(O){return!0===O.value?null:{required:!0}}(S)}static email(S){return function Ne(O){return Q(O.value)||Te.test(O.value)?null:{email:!0}}(S)}static minLength(S){return function Nt(O){return S=>Q(S.value)||!de(S.value)?null:S.value.length<O?{minlength:{requiredLength:O,actualLength:S.value.length}}:null}(S)}static maxLength(S){return function mt(O){return S=>de(S.value)&&S.value.length>O?{maxlength:{requiredLength:O,actualLength:S.value.length}}:null}(S)}static pattern(S){return jt(S)}static nullValidator(S){return null}static compose(S){return Qt(S)}static composeAsync(S){return Dn(S)}}function ae(O){return Q(O.value)?{required:!0}:null}function jt(O){if(!O)return ht;let S,A;return"string"==typeof O?(A="","^"!==O.charAt(0)&&(A+="^"),A+=O,"$"!==O.charAt(O.length-1)&&(A+="$"),S=new RegExp(A)):(A=O.toString(),S=O),P=>{if(Q(P.value))return null;const Le=P.value;return S.test(Le)?null:{pattern:{requiredPattern:A,actualValue:Le}}}}function ht(O){return null}function rt(O){return null!=O}function Ht(O){const S=(0,p.QGY)(O)?(0,se.D)(O):O;return(0,p.CqO)(S),S}function Dt(O){let S={};return O.forEach(A=>{S=null!=A?Object.assign(Object.assign({},S),A):S}),0===Object.keys(S).length?null:S}function St(O,S){return S.map(A=>A(O))}function rn(O){return O.map(S=>function nt(O){return!O.validate}(S)?S:A=>S.validate(A))}function Qt(O){if(!O)return null;const S=O.filter(rt);return 0==S.length?null:function(A){return Dt(St(A,S))}}function sn(O){return null!=O?Qt(rn(O)):null}function Dn(O){if(!O)return null;const S=O.filter(rt);return 0==S.length?null:function(A){return function oe(...O){const S=(0,Ie.jO)(O),{args:A,keys:P}=(0,ve.D)(O),Le=new Y.y(Ut=>{const{length:hn}=A;if(!hn)return void Ut.complete();const ui=new Array(hn);let zr=hn,Br=hn;for(let Ys=0;Ys<hn;Ys++){let cs=!1;(0,fe.Xf)(A[Ys]).subscribe((0,Ae.x)(Ut,Fo=>{cs||(cs=!0,Br--),ui[Ys]=Fo},()=>zr--,void 0,()=>{(!zr||!cs)&&(Br||Ut.next(P?(0,Se.n)(P,ui):ui),Ut.complete())}))}});return S?Le.pipe((0,Me.Z)(S)):Le}(St(A,S).map(Ht)).pipe((0,Ce.U)(Dt))}}function wn(O){return null!=O?Dn(rn(O)):null}function Xn(O,S){return null===O?[S]:Array.isArray(O)?[...O,S]:[O,S]}function Ln(O){return O._rawValidators}function sr(O){return O._rawAsyncValidators}function Gn(O){return O?Array.isArray(O)?O:[O]:[]}function fr(O,S){return Array.isArray(O)?O.includes(S):O===S}function jn(O,S){const A=Gn(S);return Gn(O).forEach(Le=>{fr(A,Le)||A.push(Le)}),A}function kt(O,S){return Gn(S).filter(A=>!fr(O,A))}class Jt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(S){this._rawValidators=S||[],this._composedValidatorFn=sn(this._rawValidators)}_setAsyncValidators(S){this._rawAsyncValidators=S||[],this._composedAsyncValidatorFn=wn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(S){this._onDestroyCallbacks.push(S)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(S=>S()),this._onDestroyCallbacks=[]}reset(S){this.control&&this.control.reset(S)}hasError(S,A){return!!this.control&&this.control.hasError(S,A)}getError(S,A){return this.control?this.control.getError(S,A):null}}class Cn extends Jt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class on extends Jt{get formDirective(){return null}get path(){return null}}class pr{constructor(S){this._cd=S}is(S){var A,P,Le;return"submitted"===S?!!(null===(A=this._cd)||void 0===A?void 0:A.submitted):!!(null===(Le=null===(P=this._cd)||void 0===P?void 0:P.control)||void 0===Le?void 0:Le[S])}}let gr=(()=>{class O extends pr{constructor(A){super(A)}}return O.\u0275fac=function(A){return new(A||O)(p.Y36(Cn,2))},O.\u0275dir=p.lG2({type:O,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(A,P){2&A&&p.ekj("ng-untouched",P.is("untouched"))("ng-touched",P.is("touched"))("ng-pristine",P.is("pristine"))("ng-dirty",P.is("dirty"))("ng-valid",P.is("valid"))("ng-invalid",P.is("invalid"))("ng-pending",P.is("pending"))},features:[p.qOj]}),O})(),Hr=(()=>{class O extends pr{constructor(A){super(A)}}return O.\u0275fac=function(A){return new(A||O)(p.Y36(on,10))},O.\u0275dir=p.lG2({type:O,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(A,P){2&A&&p.ekj("ng-untouched",P.is("untouched"))("ng-touched",P.is("touched"))("ng-pristine",P.is("pristine"))("ng-dirty",P.is("dirty"))("ng-valid",P.is("valid"))("ng-invalid",P.is("invalid"))("ng-pending",P.is("pending"))("ng-submitted",P.is("submitted"))},features:[p.qOj]}),O})();function zt(O,S){return[...S.path,O]}function ln(O,S){me(O,S),S.valueAccessor.writeValue(O.value),function xe(O,S){S.valueAccessor.registerOnChange(A=>{O._pendingValue=A,O._pendingChange=!0,O._pendingDirty=!0,"change"===O.updateOn&&$t(O,S)})}(O,S),function mn(O,S){const A=(P,Le)=>{S.valueAccessor.writeValue(P),Le&&S.viewToModelUpdate(P)};O.registerOnChange(A),S._registerOnDestroy(()=>{O._unregisterOnChange(A)})}(O,S),function gt(O,S){S.valueAccessor.registerOnTouched(()=>{O._pendingTouched=!0,"blur"===O.updateOn&&O._pendingChange&&$t(O,S),"submit"!==O.updateOn&&O.markAsTouched()})}(O,S),function ne(O,S){if(S.valueAccessor.setDisabledState){const A=P=>{S.valueAccessor.setDisabledState(P)};O.registerOnDisabledChange(A),S._registerOnDestroy(()=>{O._unregisterOnDisabledChange(A)})}}(O,S)}function Vt(O,S,A=!0){const P=()=>{};S.valueAccessor&&(S.valueAccessor.registerOnChange(P),S.valueAccessor.registerOnTouched(P)),We(O,S),O&&(S._invokeOnDestroyCallbacks(),O._registerOnCollectionChange(()=>{}))}function ue(O,S){O.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(S)})}function me(O,S){const A=Ln(O);null!==S.validator?O.setValidators(Xn(A,S.validator)):"function"==typeof A&&O.setValidators([A]);const P=sr(O);null!==S.asyncValidator?O.setAsyncValidators(Xn(P,S.asyncValidator)):"function"==typeof P&&O.setAsyncValidators([P]);const Le=()=>O.updateValueAndValidity();ue(S._rawValidators,Le),ue(S._rawAsyncValidators,Le)}function We(O,S){let A=!1;if(null!==O){if(null!==S.validator){const Le=Ln(O);if(Array.isArray(Le)&&Le.length>0){const Ut=Le.filter(hn=>hn!==S.validator);Ut.length!==Le.length&&(A=!0,O.setValidators(Ut))}}if(null!==S.asyncValidator){const Le=sr(O);if(Array.isArray(Le)&&Le.length>0){const Ut=Le.filter(hn=>hn!==S.asyncValidator);Ut.length!==Le.length&&(A=!0,O.setAsyncValidators(Ut))}}}const P=()=>{};return ue(S._rawValidators,P),ue(S._rawAsyncValidators,P),A}function $t(O,S){O._pendingDirty&&O.markAsDirty(),O.setValue(O._pendingValue,{emitModelToViewChange:!1}),S.viewToModelUpdate(O._pendingValue),O._pendingChange=!1}function Zt(O,S){me(O,S)}function Yr(O,S){if(!O.hasOwnProperty("model"))return!1;const A=O.model;return!!A.isFirstChange()||!Object.is(S,A.currentValue)}function Sr(O,S){O._syncPendingControls(),S.forEach(A=>{const P=A.control;"submit"===P.updateOn&&P._pendingChange&&(A.viewToModelUpdate(P._pendingValue),P._pendingChange=!1)})}function wr(O,S){if(!S)return null;let A,P,Le;return Array.isArray(S),S.forEach(Ut=>{Ut.constructor===V?A=Ut:function es(O){return Object.getPrototypeOf(O.constructor)===Ke}(Ut)?P=Ut:Le=Ut}),Le||P||A||null}function er(O,S){const A=O.indexOf(S);A>-1&&O.splice(A,1)}const st="VALID",Rt="INVALID",en="PENDING",zn="DISABLED";function tr(O){return(oi(O)?O.validators:O)||null}function Gr(O){return Array.isArray(O)?sn(O):O||null}function Sn(O,S){return(oi(S)?S.asyncValidators:O)||null}function ar(O){return Array.isArray(O)?wn(O):O||null}function oi(O){return null!=O&&!Array.isArray(O)&&"object"==typeof O}const un=O=>O instanceof tn,pe=O=>O instanceof Rn;function ee(O){return un(O)?O.value:O.getRawValue()}function Oe(O,S){const A=pe(O),P=O.controls;if(!(A?Object.keys(P):P).length)throw new p.vHH(1e3,"");if(!P[S])throw new p.vHH(1001,"")}function Je(O,S){pe(O),O._forEachChild((P,Le)=>{if(void 0===S[Le])throw new p.vHH(1002,"")})}class Tt{constructor(S,A){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=S,this._rawAsyncValidators=A,this._composedValidatorFn=Gr(this._rawValidators),this._composedAsyncValidatorFn=ar(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(S){this._rawValidators=this._composedValidatorFn=S}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(S){this._rawAsyncValidators=this._composedAsyncValidatorFn=S}get parent(){return this._parent}get valid(){return this.status===st}get invalid(){return this.status===Rt}get pending(){return this.status==en}get disabled(){return this.status===zn}get enabled(){return this.status!==zn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(S){this._rawValidators=S,this._composedValidatorFn=Gr(S)}setAsyncValidators(S){this._rawAsyncValidators=S,this._composedAsyncValidatorFn=ar(S)}addValidators(S){this.setValidators(jn(S,this._rawValidators))}addAsyncValidators(S){this.setAsyncValidators(jn(S,this._rawAsyncValidators))}removeValidators(S){this.setValidators(kt(S,this._rawValidators))}removeAsyncValidators(S){this.setAsyncValidators(kt(S,this._rawAsyncValidators))}hasValidator(S){return fr(this._rawValidators,S)}hasAsyncValidator(S){return fr(this._rawAsyncValidators,S)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(S={}){this.touched=!0,this._parent&&!S.onlySelf&&this._parent.markAsTouched(S)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(S=>S.markAllAsTouched())}markAsUntouched(S={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!S.onlySelf&&this._parent._updateTouched(S)}markAsDirty(S={}){this.pristine=!1,this._parent&&!S.onlySelf&&this._parent.markAsDirty(S)}markAsPristine(S={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!S.onlySelf&&this._parent._updatePristine(S)}markAsPending(S={}){this.status=en,!1!==S.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!S.onlySelf&&this._parent.markAsPending(S)}disable(S={}){const A=this._parentMarkedDirty(S.onlySelf);this.status=zn,this.errors=null,this._forEachChild(P=>{P.disable(Object.assign(Object.assign({},S),{onlySelf:!0}))}),this._updateValue(),!1!==S.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},S),{skipPristineCheck:A})),this._onDisabledChange.forEach(P=>P(!0))}enable(S={}){const A=this._parentMarkedDirty(S.onlySelf);this.status=st,this._forEachChild(P=>{P.enable(Object.assign(Object.assign({},S),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:S.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},S),{skipPristineCheck:A})),this._onDisabledChange.forEach(P=>P(!1))}_updateAncestors(S){this._parent&&!S.onlySelf&&(this._parent.updateValueAndValidity(S),S.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(S){this._parent=S}updateValueAndValidity(S={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===st||this.status===en)&&this._runAsyncValidator(S.emitEvent)),!1!==S.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!S.onlySelf&&this._parent.updateValueAndValidity(S)}_updateTreeValidity(S={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(S)),this.updateValueAndValidity({onlySelf:!0,emitEvent:S.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zn:st}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(S){if(this.asyncValidator){this.status=en,this._hasOwnPendingAsyncValidator=!0;const A=Ht(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(P=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(P,{emitEvent:S})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(S,A={}){this.errors=S,this._updateControlsErrors(!1!==A.emitEvent)}get(S){return function Jr(O,S,A){if(null==S||(Array.isArray(S)||(S=S.split(A)),Array.isArray(S)&&0===S.length))return null;let P=O;return S.forEach(Le=>{P=pe(P)?P.controls.hasOwnProperty(Le)?P.controls[Le]:null:(O=>O instanceof yn)(P)&&P.at(Le)||null}),P}(this,S,".")}getError(S,A){const P=A?this.get(A):this;return P&&P.errors?P.errors[S]:null}hasError(S,A){return!!this.getError(S,A)}get root(){let S=this;for(;S._parent;)S=S._parent;return S}_updateControlsErrors(S){this.status=this._calculateStatus(),S&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(S)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?zn:this.errors?Rt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(en)?en:this._anyControlsHaveStatus(Rt)?Rt:st}_anyControlsHaveStatus(S){return this._anyControls(A=>A.status===S)}_anyControlsDirty(){return this._anyControls(S=>S.dirty)}_anyControlsTouched(){return this._anyControls(S=>S.touched)}_updatePristine(S={}){this.pristine=!this._anyControlsDirty(),this._parent&&!S.onlySelf&&this._parent._updatePristine(S)}_updateTouched(S={}){this.touched=this._anyControlsTouched(),this._parent&&!S.onlySelf&&this._parent._updateTouched(S)}_isBoxedValue(S){return"object"==typeof S&&null!==S&&2===Object.keys(S).length&&"value"in S&&"disabled"in S}_registerOnCollectionChange(S){this._onCollectionChange=S}_setUpdateStrategy(S){oi(S)&&null!=S.updateOn&&(this._updateOn=S.updateOn)}_parentMarkedDirty(S){return!S&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class tn extends Tt{constructor(S=null,A,P){super(tr(A),Sn(P,A)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(S),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oi(A)&&A.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(S)?S.value:S)}setValue(S,A={}){this.value=this._pendingValue=S,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(P=>P(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(S,A={}){this.setValue(S,A)}reset(S=this.defaultValue,A={}){this._applyFormState(S),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(S){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(S){this._onChange.push(S)}_unregisterOnChange(S){er(this._onChange,S)}registerOnDisabledChange(S){this._onDisabledChange.push(S)}_unregisterOnDisabledChange(S){er(this._onDisabledChange,S)}_forEachChild(S){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(S){this._isBoxedValue(S)?(this.value=this._pendingValue=S.value,S.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=S}}class Rn extends Tt{constructor(S,A,P){super(tr(A),Sn(P,A)),this.controls=S,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(S,A){return this.controls[S]?this.controls[S]:(this.controls[S]=A,A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange),A)}addControl(S,A,P={}){this.registerControl(S,A),this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}removeControl(S,A={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),delete this.controls[S],this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}setControl(S,A,P={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),delete this.controls[S],A&&this.registerControl(S,A),this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}contains(S){return this.controls.hasOwnProperty(S)&&this.controls[S].enabled}setValue(S,A={}){Je(this,S),Object.keys(S).forEach(P=>{Oe(this,P),this.controls[P].setValue(S[P],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(S,A={}){null!=S&&(Object.keys(S).forEach(P=>{this.controls[P]&&this.controls[P].patchValue(S[P],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(S={},A={}){this._forEachChild((P,Le)=>{P.reset(S[Le],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this._reduceChildren({},(S,A,P)=>(S[P]=ee(A),S))}_syncPendingControls(){let S=this._reduceChildren(!1,(A,P)=>!!P._syncPendingControls()||A);return S&&this.updateValueAndValidity({onlySelf:!0}),S}_forEachChild(S){Object.keys(this.controls).forEach(A=>{const P=this.controls[A];P&&S(P,A)})}_setUpControls(){this._forEachChild(S=>{S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(S){for(const A of Object.keys(this.controls)){const P=this.controls[A];if(this.contains(A)&&S(P))return!0}return!1}_reduceValue(){return this._reduceChildren({},(S,A,P)=>((A.enabled||this.disabled)&&(S[P]=A.value),S))}_reduceChildren(S,A){let P=S;return this._forEachChild((Le,Ut)=>{P=A(P,Le,Ut)}),P}_allControlsDisabled(){for(const S of Object.keys(this.controls))if(this.controls[S].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class yn extends Tt{constructor(S,A,P){super(tr(A),Sn(P,A)),this.controls=S,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(S){return this.controls[S]}push(S,A={}){this.controls.push(S),this._registerControl(S),this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}insert(S,A,P={}){this.controls.splice(S,0,A),this._registerControl(A),this.updateValueAndValidity({emitEvent:P.emitEvent})}removeAt(S,A={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),this.controls.splice(S,1),this.updateValueAndValidity({emitEvent:A.emitEvent})}setControl(S,A,P={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),this.controls.splice(S,1),A&&(this.controls.splice(S,0,A),this._registerControl(A)),this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(S,A={}){Je(this,S),S.forEach((P,Le)=>{Oe(this,Le),this.at(Le).setValue(P,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(S,A={}){null!=S&&(S.forEach((P,Le)=>{this.at(Le)&&this.at(Le).patchValue(P,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(S=[],A={}){this._forEachChild((P,Le)=>{P.reset(S[Le],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this.controls.map(S=>ee(S))}clear(S={}){this.controls.length<1||(this._forEachChild(A=>A._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:S.emitEvent}))}_syncPendingControls(){let S=this.controls.reduce((A,P)=>!!P._syncPendingControls()||A,!1);return S&&this.updateValueAndValidity({onlySelf:!0}),S}_forEachChild(S){this.controls.forEach((A,P)=>{S(A,P)})}_updateValue(){this.value=this.controls.filter(S=>S.enabled||this.disabled).map(S=>S.value)}_anyControls(S){return this.controls.some(A=>A.enabled&&S(A))}_setUpControls(){this._forEachChild(S=>this._registerControl(S))}_allControlsDisabled(){for(const S of this.controls)if(S.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(S){S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange)}}const Ni={provide:on,useExisting:(0,p.Gpc)(()=>xr)},Mr=(()=>Promise.resolve(null))();let xr=(()=>{class O extends on{constructor(A,P){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new Rn({},sn(A),wn(P))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(A){Mr.then(()=>{const P=this._findContainer(A.path);A.control=P.registerControl(A.name,A.control),ln(A.control,A),A.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(A)})}getControl(A){return this.form.get(A.path)}removeControl(A){Mr.then(()=>{const P=this._findContainer(A.path);P&&P.removeControl(A.name),this._directives.delete(A)})}addFormGroup(A){Mr.then(()=>{const P=this._findContainer(A.path),Le=new Rn({});Zt(Le,A),P.registerControl(A.name,Le),Le.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(A){Mr.then(()=>{const P=this._findContainer(A.path);P&&P.removeControl(A.name)})}getFormGroup(A){return this.form.get(A.path)}updateModel(A,P){Mr.then(()=>{this.form.get(A.path).setValue(P)})}setValue(A){this.control.setValue(A)}onSubmit(A){return this.submitted=!0,Sr(this.form,this._directives),this.ngSubmit.emit(A),!1}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(A){return A.pop(),A.length?this.form.get(A):this.form}}return O.\u0275fac=function(A){return new(A||O)(p.Y36(Re,10),p.Y36(ke,10))},O.\u0275dir=p.lG2({type:O,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(A,P){1&A&&p.NdJ("submit",function(Ut){return P.onSubmit(Ut)})("reset",function(){return P.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Ni]),p.qOj]}),O})();const Gs={provide:Cn,useExisting:(0,p.Gpc)(()=>Ts)},Hn=(()=>Promise.resolve(null))();let Ts=(()=>{class O extends Cn{constructor(A,P,Le,Ut,hn){super(),this._changeDetectorRef=hn,this.control=new tn,this._registered=!1,this.update=new p.vpe,this._parent=A,this._setValidators(P),this._setAsyncValidators(Le),this.valueAccessor=wr(0,Ut)}ngOnChanges(A){if(this._checkForErrors(),!this._registered||"name"in A){if(this._registered&&(this._checkName(),this.formDirective)){const P=A.name.previousValue;this.formDirective.removeControl({name:P,path:this._getPath(P)})}this._setUpControl()}"isDisabled"in A&&this._updateDisabled(A),Yr(A,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ln(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(A){Hn.then(()=>{var P;this.control.setValue(A,{emitViewToModelChange:!1}),null===(P=this._changeDetectorRef)||void 0===P||P.markForCheck()})}_updateDisabled(A){const P=A.isDisabled.currentValue,Le=""===P||P&&"false"!==P;Hn.then(()=>{var Ut;Le&&!this.control.disabled?this.control.disable():!Le&&this.control.disabled&&this.control.enable(),null===(Ut=this._changeDetectorRef)||void 0===Ut||Ut.markForCheck()})}_getPath(A){return this._parent?zt(A,this._parent):[A]}}return O.\u0275fac=function(A){return new(A||O)(p.Y36(on,9),p.Y36(Re,10),p.Y36(ke,10),p.Y36(Xe,10),p.Y36(p.sBO,8))},O.\u0275dir=p.lG2({type:O,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Gs]),p.qOj,p.TTD]}),O})(),Ws=(()=>{class O{}return O.\u0275fac=function(A){return new(A||O)},O.\u0275dir=p.lG2({type:O,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),O})(),ct=(()=>{class O{}return O.\u0275fac=function(A){return new(A||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({}),O})();const gi=new p.OlP("NgModelWithFormControlWarning"),$i={provide:Cn,useExisting:(0,p.Gpc)(()=>mi)};let mi=(()=>{class O extends Cn{constructor(A,P,Le,Ut){super(),this._ngModelWarningConfig=Ut,this.update=new p.vpe,this._ngModelWarningSent=!1,this._setValidators(A),this._setAsyncValidators(P),this.valueAccessor=wr(0,Le)}set isDisabled(A){}ngOnChanges(A){if(this._isControlChanged(A)){const P=A.form.previousValue;P&&Vt(P,this,!1),ln(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Yr(A,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Vt(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_isControlChanged(A){return A.hasOwnProperty("form")}}return O._ngModelWarningSentOnce=!1,O.\u0275fac=function(A){return new(A||O)(p.Y36(Re,10),p.Y36(ke,10),p.Y36(Xe,10),p.Y36(gi,8))},O.\u0275dir=p.lG2({type:O,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[p._Bn([$i]),p.qOj,p.TTD]}),O})();const Hi={provide:on,useExisting:(0,p.Gpc)(()=>Ti)};let Ti=(()=>{class O extends on{constructor(A,P){super(),this.validators=A,this.asyncValidators=P,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(A),this._setAsyncValidators(P)}ngOnChanges(A){this._checkFormPresent(),A.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(We(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(A){const P=this.form.get(A.path);return ln(P,A),P.updateValueAndValidity({emitEvent:!1}),this.directives.push(A),P}getControl(A){return this.form.get(A.path)}removeControl(A){Vt(A.control||null,A,!1),er(this.directives,A)}addFormGroup(A){this._setUpFormContainer(A)}removeFormGroup(A){this._cleanUpFormContainer(A)}getFormGroup(A){return this.form.get(A.path)}addFormArray(A){this._setUpFormContainer(A)}removeFormArray(A){this._cleanUpFormContainer(A)}getFormArray(A){return this.form.get(A.path)}updateModel(A,P){this.form.get(A.path).setValue(P)}onSubmit(A){return this.submitted=!0,Sr(this.form,this.directives),this.ngSubmit.emit(A),!1}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_updateDomValue(){this.directives.forEach(A=>{const P=A.control,Le=this.form.get(A.path);P!==Le&&(Vt(P||null,A),un(Le)&&(ln(Le,A),A.control=Le))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(A){const P=this.form.get(A.path);Zt(P,A),P.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(A){if(this.form){const P=this.form.get(A.path);P&&function cn(O,S){return We(O,S)}(P,A)&&P.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){me(this.form,this),this._oldForm&&We(this._oldForm,this)}_checkFormPresent(){}}return O.\u0275fac=function(A){return new(A||O)(p.Y36(Re,10),p.Y36(ke,10))},O.\u0275dir=p.lG2({type:O,selectors:[["","formGroup",""]],hostBindings:function(A,P){1&A&&p.NdJ("submit",function(Ut){return P.onSubmit(Ut)})("reset",function(){return P.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Hi]),p.qOj,p.TTD]}),O})();const ts={provide:Cn,useExisting:(0,p.Gpc)(()=>Gi)};let Gi=(()=>{class O extends Cn{constructor(A,P,Le,Ut,hn){super(),this._ngModelWarningConfig=hn,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=A,this._setValidators(P),this._setAsyncValidators(Le),this.valueAccessor=wr(0,Ut)}set isDisabled(A){}ngOnChanges(A){this._added||this._setUpControl(),Yr(A,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}get path(){return zt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return O._ngModelWarningSentOnce=!1,O.\u0275fac=function(A){return new(A||O)(p.Y36(on,13),p.Y36(Re,10),p.Y36(ke,10),p.Y36(Xe,10),p.Y36(gi,8))},O.\u0275dir=p.lG2({type:O,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([ts]),p.qOj,p.TTD]}),O})(),Rr=(()=>{class O{constructor(){this._validator=ht}ngOnChanges(A){if(this.inputName in A){const P=this.normalizeInput(A[this.inputName].currentValue);this._enabled=this.enabled(P),this._validator=this._enabled?this.createValidator(P):ht,this._onChange&&this._onChange()}}validate(A){return this._validator(A)}registerOnValidatorChange(A){this._onChange=A}enabled(A){return null!=A}}return O.\u0275fac=function(A){return new(A||O)},O.\u0275dir=p.lG2({type:O,features:[p.TTD]}),O})();const H={provide:Re,useExisting:(0,p.Gpc)(()=>q),multi:!0};let q=(()=>{class O extends Rr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=A=>function ls(O){return null!=O&&!1!==O&&"false"!=`${O}`}(A),this.createValidator=A=>ae}enabled(A){return A}}return O.\u0275fac=function(){let S;return function(P){return(S||(S=p.n5z(O)))(P||O)}}(),O.\u0275dir=p.lG2({type:O,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(A,P){2&A&&p.uIk("required",P._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([H]),p.qOj]}),O})();const En={provide:Re,useExisting:(0,p.Gpc)(()=>dr),multi:!0};let dr=(()=>{class O extends Rr{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=A=>A,this.createValidator=A=>jt(A)}}return O.\u0275fac=function(){let S;return function(P){return(S||(S=p.n5z(O)))(P||O)}}(),O.\u0275dir=p.lG2({type:O,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(A,P){2&A&&p.uIk("pattern",P._enabled?P.pattern:null)},inputs:{pattern:"pattern"},features:[p._Bn([En]),p.qOj]}),O})(),ei=(()=>{class O{}return O.\u0275fac=function(A){return new(A||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[ct]]}),O})(),nn=(()=>{class O{}return O.\u0275fac=function(A){return new(A||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[ei]}),O})(),Pi=(()=>{class O{static withConfig(A){return{ngModule:O,providers:[{provide:gi,useValue:A.warnOnNgModelWithFormControl}]}}}return O.\u0275fac=function(A){return new(A||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[ei]}),O})()},441:(bt,$e,U)=>{U.d($e,{gk:()=>sr,m2:()=>Ln,GH:()=>pr,xV:()=>on,F0:()=>ci,yS:()=>To,Bz:()=>_r,lC:()=>ls});var p=U(5e3),K=U(8306),Y=U(4742),ve=U(8996),fe=U(4671),Ie=U(3268),Ae=U(7669),Me=U(1810),Se=U(5403),oe=U(9672);function lt(I,E,y){I?(0,oe.f)(y,I,E):E()}var Ke=U(576);function Xe(I,E){const y=(0,Ke.m)(I)?I:()=>I,b=N=>N.error(y());return new K.y(E?N=>E.schedule(b,0,N):b)}var at=U(8421);function Ue(I){return new K.y(E=>{(0,at.Xf)(I()).subscribe(E)})}var Fe=U(727),pt=U(4482);function j(){return(0,pt.e)((I,E)=>{let y=null;I._refCount++;const b=(0,Se.x)(E,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(y=null);const N=I._connection,B=y;y=null,N&&(!B||N===B)&&N.unsubscribe(),E.unsubscribe()});I.subscribe(b),b.closed||(y=I.connect())})}class V extends K.y{constructor(E,y){super(),this.source=E,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,pt.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,null==E||E.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new Fe.w0;const y=this.getSubject();E.add(this.source.subscribe((0,Se.x)(y,void 0,()=>{this._teardown(),y.complete()},b=>{this._teardown(),y.error(b)},()=>this._teardown()))),E.closed&&(this._connection=null,E=Fe.w0.EMPTY)}return E}refCount(){return j()(this)}}var Q=U(9646),de=U(1135),Re=U(6805),ke=U(7272),Te=U(515),he=U(7579);function Z(I){return(0,pt.e)((E,y)=>{let B,b=null,N=!1;b=E.subscribe((0,Se.x)(y,void 0,void 0,$=>{B=(0,at.Xf)(I($,Z(I)(E))),b?(b.unsubscribe(),b=null,B.subscribe(y)):N=!0})),N&&(b.unsubscribe(),b=null,B.subscribe(y))})}var ye=U(5577);function ae(I,E){return(0,Ke.m)(E)?(0,ye.z)(I,E,1):(0,ye.z)(I,1)}var Ge=U(9300);function Ne(I){return I<=0?()=>Te.E:(0,pt.e)((E,y)=>{let b=[];E.subscribe((0,Se.x)(y,N=>{b.push(N),I<b.length&&b.shift()},()=>{for(const N of b)y.next(N);y.complete()},void 0,()=>{b=null}))})}var Nt=U(8068),mt=U(6590),rt=U(4004),Ht=U(3900),Dt=U(5698),St=U(8675),nt=U(5026),rn=U(590),Qt=U(8505),sn=U(8189),Dn=U(9808);class wn{constructor(E,y){this.id=E,this.url=y}}class Xn extends wn{constructor(E,y,b="imperative",N=null){super(E,y),this.navigationTrigger=b,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ln extends wn{constructor(E,y,b){super(E,y),this.urlAfterRedirects=b}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sr extends wn{constructor(E,y,b){super(E,y),this.reason=b}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Gn extends wn{constructor(E,y,b){super(E,y),this.error=b}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fr extends wn{constructor(E,y,b,N){super(E,y),this.urlAfterRedirects=b,this.state=N}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jn extends wn{constructor(E,y,b,N){super(E,y),this.urlAfterRedirects=b,this.state=N}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kt extends wn{constructor(E,y,b,N,B){super(E,y),this.urlAfterRedirects=b,this.state=N,this.shouldActivate=B}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jt extends wn{constructor(E,y,b,N){super(E,y),this.urlAfterRedirects=b,this.state=N}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cn extends wn{constructor(E,y,b,N){super(E,y),this.urlAfterRedirects=b,this.state=N}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class on{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pr{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Oi{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jn{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gr{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hr{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dr{constructor(E,y,b){this.routerEvent=E,this.position=y,this.anchor=b}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const vt="primary";class Mt{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Pt(I){return new Mt(I)}const or="ngNavigationCancelingError";function Tr(I){const E=Error("NavigationCancelingError: "+I);return E[or]=!0,E}function bi(I,E,y){const b=y.path.split("/");if(b.length>I.length||"full"===y.pathMatch&&(E.hasChildren()||b.length<I.length))return null;const N={};for(let B=0;B<b.length;B++){const $=b[B],X=I[B];if($.startsWith(":"))N[$.substring(1)]=X;else if($!==X.path)return null}return{consumed:I.slice(0,b.length),posParams:N}}function Wn(I,E){const y=I?Object.keys(I):void 0,b=E?Object.keys(E):void 0;if(!y||!b||y.length!=b.length)return!1;let N;for(let B=0;B<y.length;B++)if(N=y[B],!Gt(I[N],E[N]))return!1;return!0}function Gt(I,E){if(Array.isArray(I)&&Array.isArray(E)){if(I.length!==E.length)return!1;const y=[...I].sort(),b=[...E].sort();return y.every((N,B)=>b[B]===N)}return I===E}function yr(I){return Array.prototype.concat.apply([],I)}function gn(I){return I.length>0?I[I.length-1]:null}function Ye(I,E){for(const y in I)I.hasOwnProperty(y)&&E(I[y],y)}function Et(I){return(0,p.CqO)(I)?I:(0,p.QGY)(I)?(0,ve.D)(Promise.resolve(I)):(0,Q.of)(I)}const ln={exact:function me(I,E,y){if(!an(I.segments,E.segments)||!$t(I.segments,E.segments,y)||I.numberOfChildren!==E.numberOfChildren)return!1;for(const b in E.children)if(!I.children[b]||!me(I.children[b],E.children[b],y))return!1;return!0},subset:xe},Vt={exact:function ne(I,E){return Wn(I,E)},subset:function We(I,E){return Object.keys(E).length<=Object.keys(I).length&&Object.keys(E).every(y=>Gt(I[y],E[y]))},ignored:()=>!0};function ue(I,E,y){return ln[y.paths](I.root,E.root,y.matrixParams)&&Vt[y.queryParams](I.queryParams,E.queryParams)&&!("exact"===y.fragment&&I.fragment!==E.fragment)}function xe(I,E,y){return gt(I,E,E.segments,y)}function gt(I,E,y,b){if(I.segments.length>y.length){const N=I.segments.slice(0,y.length);return!(!an(N,y)||E.hasChildren()||!$t(N,y,b))}if(I.segments.length===y.length){if(!an(I.segments,y)||!$t(I.segments,y,b))return!1;for(const N in E.children)if(!I.children[N]||!xe(I.children[N],E.children[N],b))return!1;return!0}{const N=y.slice(0,I.segments.length),B=y.slice(I.segments.length);return!!(an(I.segments,N)&&$t(I.segments,N,b)&&I.children[vt])&&gt(I.children[vt],E,B,b)}}function $t(I,E,y){return E.every((b,N)=>Vt[y](I[N].parameters,b.parameters))}class mn{constructor(E,y,b){this.root=E,this.queryParams=y,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pt(this.queryParams)),this._queryParamMap}toString(){return es.serialize(this)}}class Zt{constructor(E,y){this.segments=E,this.children=y,this.parent=null,Ye(y,(b,N)=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sr(this)}}class cn{constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Pt(this.parameters)),this._parameterMap}toString(){return zn(this)}}function an(I,E){return I.length===E.length&&I.every((y,b)=>y.path===E[b].path)}class Er{}class Yr{parse(E){const y=new le(E);return new mn(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){const y=`/${wr(E.root,!0)}`,b=function tr(I){const E=Object.keys(I).map(y=>{const b=I[y];return Array.isArray(b)?b.map(N=>`${Qr(y)}=${Qr(N)}`).join("&"):`${Qr(y)}=${Qr(b)}`}).filter(y=>!!y);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${y}${b}${"string"==typeof E.fragment?`#${function Cr(I){return encodeURI(I)}(E.fragment)}`:""}`}}const es=new Yr;function Sr(I){return I.segments.map(E=>zn(E)).join("/")}function wr(I,E){if(!I.hasChildren())return Sr(I);if(E){const y=I.children[vt]?wr(I.children[vt],!1):"",b=[];return Ye(I.children,(N,B)=>{B!==vt&&b.push(`${B}:${wr(N,!1)}`)}),b.length>0?`${y}(${b.join("//")})`:y}{const y=function $n(I,E){let y=[];return Ye(I.children,(b,N)=>{N===vt&&(y=y.concat(E(b,N)))}),Ye(I.children,(b,N)=>{N!==vt&&(y=y.concat(E(b,N)))}),y}(I,(b,N)=>N===vt?[wr(I.children[vt],!1)]:[`${N}:${wr(b,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[vt]?`${Sr(I)}/${y[0]}`:`${Sr(I)}/(${y.join("//")})`}}function er(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qr(I){return er(I).replace(/%3B/gi,";")}function st(I){return er(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rt(I){return decodeURIComponent(I)}function en(I){return Rt(I.replace(/\+/g,"%20"))}function zn(I){return`${st(I.path)}${function Jr(I){return Object.keys(I).map(E=>`;${st(E)}=${st(I[E])}`).join("")}(I.parameters)}`}const Gr=/^[^\/()?;=#]+/;function Sn(I){const E=I.match(Gr);return E?E[0]:""}const ar=/^[^=?&#]+/,un=/^[^&#]+/;class le{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(b[vt]=new Zt(E,y)),b}parseSegment(){const E=Sn(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new cn(Rt(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=Sn(this.remaining);if(!y)return;this.capture(y);let b="";if(this.consumeOptional("=")){const N=Sn(this.remaining);N&&(b=N,this.capture(b))}E[Rt(y)]=Rt(b)}parseQueryParam(E){const y=function oi(I){const E=I.match(ar);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let b="";if(this.consumeOptional("=")){const $=function pe(I){const E=I.match(un);return E?E[0]:""}(this.remaining);$&&(b=$,this.capture(b))}const N=en(y),B=en(b);if(E.hasOwnProperty(N)){let $=E[N];Array.isArray($)||($=[$],E[N]=$),$.push(B)}else E[N]=B}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=Sn(this.remaining),N=this.remaining[b.length];if("/"!==N&&")"!==N&&";"!==N)throw new Error(`Cannot parse url '${this.url}'`);let B;b.indexOf(":")>-1?(B=b.substr(0,b.indexOf(":")),this.capture(B),this.capture(":")):E&&(B=vt);const $=this.parseChildren();y[B]=1===Object.keys($).length?$[vt]:new Zt([],$),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class ee{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=Oe(E,this._root);return y?y.children.map(b=>b.value):[]}firstChild(E){const y=Oe(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=Je(E,this._root);return y.length<2?[]:y[y.length-2].children.map(N=>N.value).filter(N=>N!==E)}pathFromRoot(E){return Je(E,this._root).map(y=>y.value)}}function Oe(I,E){if(I===E.value)return E;for(const y of E.children){const b=Oe(I,y);if(b)return b}return null}function Je(I,E){if(I===E.value)return[E];for(const y of E.children){const b=Je(I,y);if(b.length)return b.unshift(E),b}return[]}class Tt{constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function tn(I){const E={};return I&&I.children.forEach(y=>E[y.value.outlet]=y),E}class Rn extends ee{constructor(E,y){super(E),this.snapshot=y,Cs(this,E)}toString(){return this.snapshot.toString()}}function yn(I,E){const y=function Ni(I,E){const $=new fs([],{},{},"",{},vt,E,null,I.root,-1,{});return new pi("",new Tt($,[]))}(I,E),b=new de.X([new cn("",{})]),N=new de.X({}),B=new de.X({}),$=new de.X({}),X=new de.X(""),je=new Mr(b,N,$,X,B,vt,E,y.root);return je.snapshot=y.root,new Rn(new Tt(je,[]),y)}class Mr{constructor(E,y,b,N,B,$,X,je){this.url=E,this.params=y,this.queryParams=b,this.fragment=N,this.data=B,this.outlet=$,this.component=X,this._futureSnapshot=je}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rt.U)(E=>Pt(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rt.U)(E=>Pt(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xr(I,E="emptyOnly"){const y=I.pathFromRoot;let b=0;if("always"!==E)for(b=y.length-1;b>=1;){const N=y[b],B=y[b-1];if(N.routeConfig&&""===N.routeConfig.path)b--;else{if(B.component)break;b--}}return function Xr(I){return I.reduce((E,y)=>({params:Object.assign(Object.assign({},E.params),y.params),data:Object.assign(Object.assign({},E.data),y.data),resolve:Object.assign(Object.assign({},E.resolve),y._resolvedData)}),{params:{},data:{},resolve:{}})}(y.slice(b))}class fs{constructor(E,y,b,N,B,$,X,je,It,On,Kt){this.url=E,this.params=y,this.queryParams=b,this.fragment=N,this.data=B,this.outlet=$,this.component=X,this.routeConfig=je,this._urlSegment=It,this._lastPathIndex=On,this._resolve=Kt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pi extends ee{constructor(E,y){super(y),this.url=E,Cs(this,y)}toString(){return ai(this._root)}}function Cs(I,E){E.value._routerState=I,E.children.forEach(y=>Cs(I,y))}function ai(I){const E=I.children.length>0?` { ${I.children.map(ai).join(", ")} } `:"";return`${I.value}${E}`}function ji(I){if(I.snapshot){const E=I.snapshot,y=I._futureSnapshot;I.snapshot=y,Wn(E.queryParams,y.queryParams)||I.queryParams.next(y.queryParams),E.fragment!==y.fragment&&I.fragment.next(y.fragment),Wn(E.params,y.params)||I.params.next(y.params),function mr(I,E){if(I.length!==E.length)return!1;for(let y=0;y<I.length;++y)if(!Wn(I[y],E[y]))return!1;return!0}(E.url,y.url)||I.url.next(y.url),Wn(E.data,y.data)||I.data.next(y.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function bs(I,E){const y=Wn(I.params,E.params)&&function kn(I,E){return an(I,E)&&I.every((y,b)=>Wn(y.parameters,E[b].parameters))}(I.url,E.url);return y&&!(!I.parent!=!E.parent)&&(!I.parent||bs(I.parent,E.parent))}function Hn(I,E,y){if(y&&I.shouldReuseRoute(E.value,y.value.snapshot)){const b=y.value;b._futureSnapshot=E.value;const N=function Ts(I,E,y){return E.children.map(b=>{for(const N of y.children)if(I.shouldReuseRoute(b.value,N.value.snapshot))return Hn(I,b,N);return Hn(I,b)})}(I,E,y);return new Tt(b,N)}{if(I.shouldAttach(E.value)){const B=I.retrieve(E.value);if(null!==B){const $=B.route;return $.value._futureSnapshot=E.value,$.children=E.children.map(X=>Hn(I,X)),$}}const b=function Ws(I){return new Mr(new de.X(I.url),new de.X(I.params),new de.X(I.queryParams),new de.X(I.fragment),new de.X(I.data),I.outlet,I.component,I)}(E.value),N=E.children.map(B=>Hn(I,B));return new Tt(b,N)}}function Ee(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Ve(I){return"object"==typeof I&&null!=I&&I.outlets}function Qe(I,E,y,b,N){let B={};if(b&&Ye(b,(X,je)=>{B[je]=Array.isArray(X)?X.map(It=>`${It}`):`${X}`}),I===E)return new mn(y,B,N);const $=ct(I,E,y);return new mn($,B,N)}function ct(I,E,y){const b={};return Ye(I.children,(N,B)=>{b[B]=N===E?y:ct(N,E,y)}),new Zt(I.segments,b)}class Ft{constructor(E,y,b){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=b,E&&b.length>0&&Ee(b[0]))throw new Error("Root segment cannot have matrix parameters");const N=b.find(Ve);if(N&&N!==gn(b))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ir{constructor(E,y,b){this.segmentGroup=E,this.processChildren=y,this.index=b}}function mi(I,E,y){if(I||(I=new Zt([],{})),0===I.segments.length&&I.hasChildren())return Hi(I,E,y);const b=function Ti(I,E,y){let b=0,N=E;const B={match:!1,pathIndex:0,commandIndex:0};for(;N<I.segments.length;){if(b>=y.length)return B;const $=I.segments[N],X=y[b];if(Ve(X))break;const je=`${X}`,It=b<y.length-1?y[b+1]:null;if(N>0&&void 0===je)break;if(je&&It&&"object"==typeof It&&void 0===It.outlets){if(!Vr(je,It,$))return B;b+=2}else{if(!Vr(je,{},$))return B;b++}N++}return{match:!0,pathIndex:N,commandIndex:b}}(I,E,y),N=y.slice(b.commandIndex);if(b.match&&b.pathIndex<I.segments.length){const B=new Zt(I.segments.slice(0,b.pathIndex),{});return B.children[vt]=new Zt(I.segments.slice(b.pathIndex),I.children),Hi(B,0,N)}return b.match&&0===N.length?new Zt(I.segments,{}):b.match&&!I.hasChildren()?zs(I,E,y):b.match?Hi(I,0,N):zs(I,E,y)}function Hi(I,E,y){if(0===y.length)return new Zt(I.segments,{});{const b=function $i(I){return Ve(I[0])?I[0].outlets:{[vt]:I}}(y),N={};return Ye(b,(B,$)=>{"string"==typeof B&&(B=[B]),null!==B&&(N[$]=mi(I.children[$],E,B))}),Ye(I.children,(B,$)=>{void 0===b[$]&&(N[$]=B)}),new Zt(I.segments,N)}}function zs(I,E,y){const b=I.segments.slice(0,E);let N=0;for(;N<y.length;){const B=y[N];if(Ve(B)){const je=as(B.outlets);return new Zt(b,je)}if(0===N&&Ee(y[0])){b.push(new cn(I.segments[E].path,yi(y[0]))),N++;continue}const $=Ve(B)?B.outlets[vt]:`${B}`,X=N<y.length-1?y[N+1]:null;$&&X&&Ee(X)?(b.push(new cn($,yi(X))),N+=2):(b.push(new cn($,{})),N++)}return new Zt(b,{})}function as(I){const E={};return Ye(I,(y,b)=>{"string"==typeof y&&(y=[y]),null!==y&&(E[b]=zs(new Zt([],{}),0,y))}),E}function yi(I){const E={};return Ye(I,(y,b)=>E[b]=`${y}`),E}function Vr(I,E,y){return I==y.path&&Wn(E,y.parameters)}class ts{constructor(E,y,b,N){this.routeReuseStrategy=E,this.futureState=y,this.currState=b,this.forwardEvent=N}activate(E){const y=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,b,E),ji(this.futureState.root),this.activateChildRoutes(y,b,E)}deactivateChildRoutes(E,y,b){const N=tn(y);E.children.forEach(B=>{const $=B.value.outlet;this.deactivateRoutes(B,N[$],b),delete N[$]}),Ye(N,(B,$)=>{this.deactivateRouteAndItsChildren(B,b)})}deactivateRoutes(E,y,b){const N=E.value,B=y?y.value:null;if(N===B)if(N.component){const $=b.getContext(N.outlet);$&&this.deactivateChildRoutes(E,y,$.children)}else this.deactivateChildRoutes(E,y,b);else B&&this.deactivateRouteAndItsChildren(y,b)}deactivateRouteAndItsChildren(E,y){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const b=y.getContext(E.value.outlet),N=b&&E.value.component?b.children:y,B=tn(E);for(const $ of Object.keys(B))this.deactivateRouteAndItsChildren(B[$],N);if(b&&b.outlet){const $=b.outlet.detach(),X=b.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:$,route:E,contexts:X})}}deactivateRouteAndOutlet(E,y){const b=y.getContext(E.value.outlet),N=b&&E.value.component?b.children:y,B=tn(E);for(const $ of Object.keys(B))this.deactivateRouteAndItsChildren(B[$],N);b&&b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated(),b.attachRef=null,b.resolver=null,b.route=null)}activateChildRoutes(E,y,b){const N=tn(y);E.children.forEach(B=>{this.activateRoutes(B,N[B.value.outlet],b),this.forwardEvent(new Hr(B.value.snapshot))}),E.children.length&&this.forwardEvent(new Jn(E.value.snapshot))}activateRoutes(E,y,b){const N=E.value,B=y?y.value:null;if(ji(N),N===B)if(N.component){const $=b.getOrCreateContext(N.outlet);this.activateChildRoutes(E,y,$.children)}else this.activateChildRoutes(E,y,b);else if(N.component){const $=b.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const X=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),$.children.onOutletReAttached(X.contexts),$.attachRef=X.componentRef,$.route=X.route.value,$.outlet&&$.outlet.attach(X.componentRef,X.route.value),ji(X.route.value),this.activateChildRoutes(E,null,$.children)}else{const X=function Gi(I){for(let E=I.parent;E;E=E.parent){const y=E.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig;if(y&&y.component)return null}return null}(N.snapshot),je=X?X.module.componentFactoryResolver:null;$.attachRef=null,$.route=N,$.resolver=je,$.outlet&&$.outlet.activateWith(N,je),this.activateChildRoutes(E,null,$.children)}}else this.activateChildRoutes(E,null,b)}}class As{constructor(E,y){this.routes=E,this.module=y}}function ns(I){return"function"==typeof I}function Ur(I){return I instanceof mn}const vr=Symbol("INITIAL_VALUE");function vi(){return(0,Ht.w)(I=>function se(...I){const E=(0,Ae.yG)(I),y=(0,Ae.jO)(I),{args:b,keys:N}=(0,Y.D)(I);if(0===b.length)return(0,ve.D)([],E);const B=new K.y(function Ce(I,E,y=fe.y){return b=>{lt(E,()=>{const{length:N}=I,B=new Array(N);let $=N,X=N;for(let je=0;je<N;je++)lt(E,()=>{const It=(0,ve.D)(I[je],E);let On=!1;It.subscribe((0,Se.x)(b,Kt=>{B[je]=Kt,On||(On=!0,X--),X||b.next(y(B.slice()))},()=>{--$||b.complete()}))},b)},b)}}(b,E,N?$=>(0,Me.n)(N,$):fe.y));return y?B.pipe((0,Ie.Z)(y)):B}(I.map(E=>E.pipe((0,Dt.q)(1),(0,St.O)(vr)))).pipe((0,nt.R)((E,y)=>{let b=!1;return y.reduce((N,B,$)=>N!==vr?N:(B===vr&&(b=!0),b||!1!==B&&$!==y.length-1&&!Ur(B)?N:B),E)},vr),(0,Ge.h)(E=>E!==vr),(0,rt.U)(E=>Ur(E)?E:!0===E),(0,Dt.q)(1)))}class Ms{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ms,this.attachRef=null}}class ms{constructor(){this.contexts=new Map}onChildOutletCreated(E,y){const b=this.getOrCreateContext(E);b.outlet=y,this.contexts.set(E,b)}onChildOutletDestroyed(E){const y=this.getContext(E);y&&(y.outlet=null,y.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let y=this.getContext(E);return y||(y=new Ms,this.contexts.set(E,y)),y}getContext(E){return this.contexts.get(E)||null}}let ls=(()=>{class I{constructor(y,b,N,B,$){this.parentContexts=y,this.location=b,this.resolver=N,this.changeDetector=$,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=B||vt,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,b){this.activated=y,this._activatedRoute=b,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,b){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;const $=(b=b||this.resolver).resolveComponentFactory(y._futureSnapshot.routeConfig.component),X=this.parentContexts.getOrCreateContext(this.name).children,je=new Wi(y,X,this.location.injector);this.activated=this.location.createComponent($,this.location.length,je),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(y){return new(y||I)(p.Y36(ms),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},I.\u0275dir=p.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),I})();class Wi{constructor(E,y,b){this.route=E,this.childContexts=y,this.parent=b}get(E,y){return E===Mr?this.route:E===ms?this.childContexts:this.parent.get(E,y)}}let Rr=(()=>{class I{}return I.\u0275fac=function(y){return new(y||I)},I.\u0275cmp=p.Xpm({type:I,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,b){1&y&&p._UZ(0,"router-outlet")},directives:[ls],encapsulation:2}),I})();function Si(I,E=""){for(let y=0;y<I.length;y++){const b=I[y];Ks(b,ur(E,b))}}function Ks(I,E){I.children&&Si(I.children,E)}function ur(I,E){return E?I||E.path?I&&!E.path?`${I}/`:!I&&E.path?E.path:`${I}/${E.path}`:"":I}function x(I){const E=I.children&&I.children.map(x),y=E?Object.assign(Object.assign({},I),{children:E}):Object.assign({},I);return!y.component&&(E||y.loadChildren)&&y.outlet&&y.outlet!==vt&&(y.component=Rr),y}function H(I){return I.outlet||vt}function M(I,E){const y=I.filter(b=>H(b)===E);return y.push(...I.filter(b=>H(b)!==E)),y}const q={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ce(I,E,y){var b;if(""===E.path)return"full"===E.pathMatch&&(I.hasChildren()||y.length>0)?Object.assign({},q):{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const B=(E.matcher||bi)(y,I,E);if(!B)return Object.assign({},q);const $={};Ye(B.posParams,(je,It)=>{$[It]=je.path});const X=B.consumed.length>0?Object.assign(Object.assign({},$),B.consumed[B.consumed.length-1].parameters):$;return{matched:!0,consumedSegments:B.consumed,remainingSegments:y.slice(B.consumed.length),parameters:X,positionalParamSegments:null!==(b=B.posParams)&&void 0!==b?b:{}}}function ze(I,E,y,b,N="corrected"){if(y.length>0&&function Kn(I,E,y){return y.some(b=>dn(I,E,b)&&H(b)!==vt)}(I,y,b)){const $=new Zt(E,function yt(I,E,y,b){const N={};N[vt]=b,b._sourceSegment=I,b._segmentIndexShift=E.length;for(const B of y)if(""===B.path&&H(B)!==vt){const $=new Zt([],{});$._sourceSegment=I,$._segmentIndexShift=E.length,N[H(B)]=$}return N}(I,E,b,new Zt(y,I.children)));return $._sourceSegment=I,$._segmentIndexShift=E.length,{segmentGroup:$,slicedSegments:[]}}if(0===y.length&&function Un(I,E,y){return y.some(b=>dn(I,E,b))}(I,y,b)){const $=new Zt(I.segments,function qe(I,E,y,b,N,B){const $={};for(const X of b)if(dn(I,y,X)&&!N[H(X)]){const je=new Zt([],{});je._sourceSegment=I,je._segmentIndexShift="legacy"===B?I.segments.length:E.length,$[H(X)]=je}return Object.assign(Object.assign({},N),$)}(I,E,y,b,I.children,N));return $._sourceSegment=I,$._segmentIndexShift=E.length,{segmentGroup:$,slicedSegments:y}}const B=new Zt(I.segments,I.children);return B._sourceSegment=I,B._segmentIndexShift=E.length,{segmentGroup:B,slicedSegments:y}}function dn(I,E,y){return(!(I.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}function En(I,E,y,b){return!!(H(I)===b||b!==vt&&dn(E,y,I))&&("**"===I.path||ce(E,I,y).matched)}function dr(I,E,y){return 0===E.length&&!I.children[y]}class Yn{constructor(E){this.segmentGroup=E||null}}class nr{constructor(E){this.urlTree=E}}function ki(I){return Xe(new Yn(I))}function ei(I){return Xe(new nr(I))}class qs{constructor(E,y,b,N,B){this.configLoader=y,this.urlSerializer=b,this.urlTree=N,this.config=B,this.allowRedirects=!0,this.ngModule=E.get(p.h0i)}apply(){const E=ze(this.urlTree.root,[],[],this.config).segmentGroup,y=new Zt(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,y,vt).pipe((0,rt.U)(B=>this.createUrlTree(O(B),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Z(B=>{if(B instanceof nr)return this.allowRedirects=!1,this.match(B.urlTree);throw B instanceof Yn?this.noMatchError(B):B}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,vt).pipe((0,rt.U)(N=>this.createUrlTree(O(N),E.queryParams,E.fragment))).pipe(Z(N=>{throw N instanceof Yn?this.noMatchError(N):N}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,y,b){const N=E.segments.length>0?new Zt([],{[vt]:E}):E;return new mn(N,y,b)}expandSegmentGroup(E,y,b,N){return 0===b.segments.length&&b.hasChildren()?this.expandChildren(E,y,b).pipe((0,rt.U)(B=>new Zt([],B))):this.expandSegment(E,b,y,b.segments,N,!0)}expandChildren(E,y,b){const N=[];for(const B of Object.keys(b.children))"primary"===B?N.unshift(B):N.push(B);return(0,ve.D)(N).pipe(ae(B=>{const $=b.children[B],X=M(y,B);return this.expandSegmentGroup(E,X,$,B).pipe((0,rt.U)(je=>({segment:je,outlet:B})))}),(0,nt.R)((B,$)=>(B[$.outlet]=$.segment,B),{}),function jt(I,E){const y=arguments.length>=2;return b=>b.pipe(I?(0,Ge.h)((N,B)=>I(N,B,b)):fe.y,Ne(1),y?(0,mt.d)(E):(0,Nt.T)(()=>new Re.K))}())}expandSegment(E,y,b,N,B,$){return(0,ve.D)(b).pipe(ae(X=>this.expandSegmentAgainstRoute(E,y,b,X,N,B,$).pipe(Z(It=>{if(It instanceof Yn)return(0,Q.of)(null);throw It}))),(0,rn.P)(X=>!!X),Z((X,je)=>{if(X instanceof Re.K||"EmptyError"===X.name)return dr(y,N,B)?(0,Q.of)(new Zt([],{})):ki(y);throw X}))}expandSegmentAgainstRoute(E,y,b,N,B,$,X){return En(N,y,B,$)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(E,y,N,B,$):X&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,y,b,N,B,$):ki(y):ki(y)}expandSegmentAgainstRouteUsingRedirect(E,y,b,N,B,$){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,b,N,$):this.expandRegularSegmentAgainstRouteUsingRedirect(E,y,b,N,B,$)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,y,b,N){const B=this.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?ei(B):this.lineralizeSegments(b,B).pipe((0,ye.z)($=>{const X=new Zt($,{});return this.expandSegment(E,X,y,$,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,y,b,N,B,$){const{matched:X,consumedSegments:je,remainingSegments:It,positionalParamSegments:On}=ce(y,N,B);if(!X)return ki(y);const Kt=this.applyRedirectCommands(je,N.redirectTo,On);return N.redirectTo.startsWith("/")?ei(Kt):this.lineralizeSegments(N,Kt).pipe((0,ye.z)(ir=>this.expandSegment(E,y,b,ir.concat(It),$,!1)))}matchSegmentAgainstRoute(E,y,b,N,B){if("**"===b.path)return b.loadChildren?(b._loadedConfig?(0,Q.of)(b._loadedConfig):this.configLoader.load(E.injector,b)).pipe((0,rt.U)(Kt=>(b._loadedConfig=Kt,new Zt(N,{})))):(0,Q.of)(new Zt(N,{}));const{matched:$,consumedSegments:X,remainingSegments:je}=ce(y,b,N);return $?this.getChildConfig(E,b,N).pipe((0,ye.z)(On=>{const Kt=On.module,ir=On.routes,{segmentGroup:Nn,slicedSegments:_s}=ze(y,X,je,ir),is=new Zt(Nn.segments,Nn.children);if(0===_s.length&&is.hasChildren())return this.expandChildren(Kt,ir,is).pipe((0,rt.U)(Es=>new Zt(X,Es)));if(0===ir.length&&0===_s.length)return(0,Q.of)(new Zt(X,{}));const Go=H(b)===B;return this.expandSegment(Kt,is,ir,_s,Go?vt:B,!0).pipe((0,rt.U)(kr=>new Zt(X.concat(kr.segments),kr.children)))})):ki(y)}getChildConfig(E,y,b){return y.children?(0,Q.of)(new As(y.children,E)):y.loadChildren?void 0!==y._loadedConfig?(0,Q.of)(y._loadedConfig):this.runCanLoadGuards(E.injector,y,b).pipe((0,ye.z)(N=>N?this.configLoader.load(E.injector,y).pipe((0,rt.U)(B=>(y._loadedConfig=B,B))):function Pi(I){return Xe(Tr(`Cannot load children because the guard of the route "path: '${I.path}'" returned false`))}(y))):(0,Q.of)(new As([],E))}runCanLoadGuards(E,y,b){const N=y.canLoad;if(!N||0===N.length)return(0,Q.of)(!0);const B=N.map($=>{const X=E.get($);let je;if(function Ai(I){return I&&ns(I.canLoad)}(X))je=X.canLoad(y,b);else{if(!ns(X))throw new Error("Invalid CanLoad guard");je=X(y,b)}return Et(je)});return(0,Q.of)(B).pipe(vi(),(0,Qt.b)($=>{if(!Ur($))return;const X=Tr(`Redirecting to "${this.urlSerializer.serialize($)}"`);throw X.url=$,X}),(0,rt.U)($=>!0===$))}lineralizeSegments(E,y){let b=[],N=y.root;for(;;){if(b=b.concat(N.segments),0===N.numberOfChildren)return(0,Q.of)(b);if(N.numberOfChildren>1||!N.children[vt])return Xe(new Error(`Only absolute redirects can have named outlets. redirectTo: '${E.redirectTo}'`));N=N.children[vt]}}applyRedirectCommands(E,y,b){return this.applyRedirectCreatreUrlTree(y,this.urlSerializer.parse(y),E,b)}applyRedirectCreatreUrlTree(E,y,b,N){const B=this.createSegmentGroup(E,y.root,b,N);return new mn(B,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const b={};return Ye(E,(N,B)=>{if("string"==typeof N&&N.startsWith(":")){const X=N.substring(1);b[B]=y[X]}else b[B]=N}),b}createSegmentGroup(E,y,b,N){const B=this.createSegments(E,y.segments,b,N);let $={};return Ye(y.children,(X,je)=>{$[je]=this.createSegmentGroup(E,X,b,N)}),new Zt(B,$)}createSegments(E,y,b,N){return y.map(B=>B.path.startsWith(":")?this.findPosParam(E,B,N):this.findOrReturn(B,b))}findPosParam(E,y,b){const N=b[y.path.substring(1)];if(!N)throw new Error(`Cannot redirect to '${E}'. Cannot find '${y.path}'.`);return N}findOrReturn(E,y){let b=0;for(const N of y){if(N.path===E.path)return y.splice(b),N;b++}return E}}function O(I){const E={};for(const b of Object.keys(I.children)){const B=O(I.children[b]);(B.segments.length>0||B.hasChildren())&&(E[b]=B)}return function Zs(I){if(1===I.numberOfChildren&&I.children[vt]){const E=I.children[vt];return new Zt(I.segments.concat(E.segments),E.children)}return I}(new Zt(I.segments,E))}class A{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class P{constructor(E,y){this.component=E,this.route=y}}function Le(I,E,y){const b=I._root;return zr(b,E?E._root:null,y,[b.value])}function hn(I,E,y){const b=function ui(I){if(!I)return null;for(let E=I.parent;E;E=E.parent){const y=E.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig}return null}(E);return(b?b.module.injector:y).get(I)}function zr(I,E,y,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const B=tn(E);return I.children.forEach($=>{(function Br(I,E,y,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const B=I.value,$=E?E.value:null,X=y?y.getContext(I.value.outlet):null;if($&&B.routeConfig===$.routeConfig){const je=function Ys(I,E,y){if("function"==typeof y)return y(I,E);switch(y){case"pathParamsChange":return!an(I.url,E.url);case"pathParamsOrQueryParamsChange":return!an(I.url,E.url)||!Wn(I.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bs(I,E)||!Wn(I.queryParams,E.queryParams);default:return!bs(I,E)}}($,B,B.routeConfig.runGuardsAndResolvers);je?N.canActivateChecks.push(new A(b)):(B.data=$.data,B._resolvedData=$._resolvedData),zr(I,E,B.component?X?X.children:null:y,b,N),je&&X&&X.outlet&&X.outlet.isActivated&&N.canDeactivateChecks.push(new P(X.outlet.component,$))}else $&&cs(E,X,N),N.canActivateChecks.push(new A(b)),zr(I,null,B.component?X?X.children:null:y,b,N)})($,B[$.value.outlet],y,b.concat([$.value]),N),delete B[$.value.outlet]}),Ye(B,($,X)=>cs($,y.getContext(X),N)),N}function cs(I,E,y){const b=tn(I),N=I.value;Ye(b,(B,$)=>{cs(B,N.component?E?E.children.getContext($):null:E,y)}),y.canDeactivateChecks.push(new P(N.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,N))}class ds{}function ao(I){return new K.y(E=>E.error(I))}class Ea{constructor(E,y,b,N,B,$){this.rootComponentType=E,this.config=y,this.urlTree=b,this.url=N,this.paramsInheritanceStrategy=B,this.relativeLinkResolution=$}recognize(){const E=ze(this.urlTree.root,[],[],this.config.filter($=>void 0===$.redirectTo),this.relativeLinkResolution).segmentGroup,y=this.processSegmentGroup(this.config,E,vt);if(null===y)return null;const b=new fs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},vt,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Tt(b,y),B=new pi(this.url,N);return this.inheritParamsAndData(B._root),B}inheritParamsAndData(E){const y=E.value,b=xr(y,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data),E.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(E,y,b){return 0===y.segments.length&&y.hasChildren()?this.processChildren(E,y):this.processSegment(E,y,y.segments,b)}processChildren(E,y){const b=[];for(const B of Object.keys(y.children)){const $=y.children[B],X=M(E,B),je=this.processSegmentGroup(X,$,B);if(null===je)return null;b.push(...je)}const N=na(b);return function Or(I){I.sort((E,y)=>E.value.outlet===vt?-1:y.value.outlet===vt?1:E.value.outlet.localeCompare(y.value.outlet))}(N),N}processSegment(E,y,b,N){for(const B of E){const $=this.processSegmentAgainstRoute(B,y,b,N);if(null!==$)return $}return dr(y,b,N)?[]:null}processSegmentAgainstRoute(E,y,b,N){if(E.redirectTo||!En(E,y,b,N))return null;let B,$=[],X=[];if("**"===E.path){const Nn=b.length>0?gn(b).parameters:{};B=new fs(b,Nn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qs(E),H(E),E.component,E,wa(y),Vo(y)+b.length,Ia(E))}else{const Nn=ce(y,E,b);if(!Nn.matched)return null;$=Nn.consumedSegments,X=Nn.remainingSegments,B=new fs($,Nn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qs(E),H(E),E.component,E,wa(y),Vo(y)+$.length,Ia(E))}const je=function Lo(I){return I.children?I.children:I.loadChildren?I._loadedConfig.routes:[]}(E),{segmentGroup:It,slicedSegments:On}=ze(y,$,X,je.filter(Nn=>void 0===Nn.redirectTo),this.relativeLinkResolution);if(0===On.length&&It.hasChildren()){const Nn=this.processChildren(je,It);return null===Nn?null:[new Tt(B,Nn)]}if(0===je.length&&0===On.length)return[new Tt(B,[])];const Kt=H(E)===N,ir=this.processSegment(je,It,On,Kt?vt:N);return null===ir?null:[new Tt(B,ir)]}}function ta(I){const E=I.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function na(I){const E=[],y=new Set;for(const b of I){if(!ta(b)){E.push(b);continue}const N=E.find(B=>b.value.routeConfig===B.value.routeConfig);void 0!==N?(N.children.push(...b.children),y.add(N)):E.push(b)}for(const b of y){const N=na(b.children);E.push(new Tt(b.value,N))}return E.filter(b=>!y.has(b))}function wa(I){let E=I;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Vo(I){let E=I,y=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,y+=E._segmentIndexShift?E._segmentIndexShift:0;return y-1}function Qs(I){return I.data||{}}function Ia(I){return I.resolve||{}}function vu(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function jr(I){return(0,Ht.w)(E=>{const y=I(E);return y?(0,ve.D)(y).pipe((0,rt.U)(()=>E)):(0,Q.of)(E)})}class ia extends class Nr{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}{}const _u=new p.OlP("ROUTES");class Eu{constructor(E,y,b,N){this.injector=E,this.compiler=y,this.onLoadStartListener=b,this.onLoadEndListener=N}load(E,y){if(y._loader$)return y._loader$;this.onLoadStartListener&&this.onLoadStartListener(y);const N=this.loadModuleFactory(y.loadChildren).pipe((0,rt.U)(B=>{this.onLoadEndListener&&this.onLoadEndListener(y);const $=B.create(E);return new As(yr($.injector.get(_u,void 0,p.XFs.Self|p.XFs.Optional)).map(x),$)}),Z(B=>{throw y._loader$=void 0,B}));return y._loader$=new V(N,()=>new he.x).pipe(j()),y._loader$}loadModuleFactory(E){return Et(E()).pipe((0,ye.z)(y=>y instanceof p.YKP?(0,Q.of)(y):(0,ve.D)(this.compiler.compileModuleAsync(y))))}}class tc{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,y){return E}}function Ca(I){throw I}function zi(I,E,y){return E.parse("/")}function lo(I,E){return(0,Q.of)(null)}const Bo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$r={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ci=(()=>{class I{constructor(y,b,N,B,$,X,je){this.rootComponentType=y,this.urlSerializer=b,this.rootContexts=N,this.location=B,this.config=je,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new he.x,this.errorHandler=Ca,this.malformedUriErrorHandler=zi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:lo,afterPreactivation:lo},this.urlHandlingStrategy=new tc,this.routeReuseStrategy=new ia,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=$.get(p.h0i),this.console=$.get(p.c2e);const Kt=$.get(p.R0b);this.isNgZoneEnabled=Kt instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(je),this.currentUrlTree=function zt(){return new mn(new Zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Eu($,X,ir=>this.triggerEvent(new on(ir)),ir=>this.triggerEvent(new pr(ir))),this.routerState=yn(this.currentUrlTree,this.rootComponentType),this.transitions=new de.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const b=this.events;return y.pipe((0,Ge.h)(N=>0!==N.id),(0,rt.U)(N=>Object.assign(Object.assign({},N),{extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,Ht.w)(N=>{let B=!1,$=!1;return(0,Q.of)(N).pipe((0,Qt.b)(X=>{this.currentNavigation={id:X.id,initialUrl:X.currentRawUrl,extractedUrl:X.extractedUrl,trigger:X.source,extras:X.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ht.w)(X=>{const je=this.browserUrlTree.toString(),It=!this.navigated||X.extractedUrl.toString()!==je||je!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||It)&&this.urlHandlingStrategy.shouldProcessUrl(X.rawUrl))return Ki(X.source)&&(this.browserUrlTree=X.extractedUrl),(0,Q.of)(X).pipe((0,Ht.w)(Kt=>{const ir=this.transitions.getValue();return b.next(new Xn(Kt.id,this.serializeUrl(Kt.extractedUrl),Kt.source,Kt.restoredState)),ir!==this.transitions.getValue()?Te.E:Promise.resolve(Kt)}),function S(I,E,y,b){return(0,Ht.w)(N=>function Fi(I,E,y,b,N){return new qs(I,E,y,b,N).apply()}(I,E,y,N.extractedUrl,b).pipe((0,rt.U)(B=>Object.assign(Object.assign({},N),{urlAfterRedirects:B}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qt.b)(Kt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Kt.urlAfterRedirects})}),function Rs(I,E,y,b,N){return(0,ye.z)(B=>function uo(I,E,y,b,N="emptyOnly",B="legacy"){try{const $=new Ea(I,E,y,b,N,B).recognize();return null===$?ao(new ds):(0,Q.of)($)}catch($){return ao($)}}(I,E,B.urlAfterRedirects,y(B.urlAfterRedirects),b,N).pipe((0,rt.U)($=>Object.assign(Object.assign({},B),{targetSnapshot:$}))))}(this.rootComponentType,this.config,Kt=>this.serializeUrl(Kt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qt.b)(Kt=>{if("eager"===this.urlUpdateStrategy){if(!Kt.extras.skipLocationChange){const Nn=this.urlHandlingStrategy.merge(Kt.urlAfterRedirects,Kt.rawUrl);this.setBrowserUrl(Nn,Kt)}this.browserUrlTree=Kt.urlAfterRedirects}const ir=new fr(Kt.id,this.serializeUrl(Kt.extractedUrl),this.serializeUrl(Kt.urlAfterRedirects),Kt.targetSnapshot);b.next(ir)}));if(It&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ir,extractedUrl:Nn,source:_s,restoredState:is,extras:Go}=X,fo=new Xn(ir,this.serializeUrl(Nn),_s,is);b.next(fo);const kr=yn(Nn,this.rootComponentType).snapshot;return(0,Q.of)(Object.assign(Object.assign({},X),{targetSnapshot:kr,urlAfterRedirects:Nn,extras:Object.assign(Object.assign({},Go),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=X.rawUrl,X.resolve(null),Te.E}),jr(X=>{const{targetSnapshot:je,id:It,extractedUrl:On,rawUrl:Kt,extras:{skipLocationChange:ir,replaceUrl:Nn}}=X;return this.hooks.beforePreactivation(je,{navigationId:It,appliedUrlTree:On,rawUrlTree:Kt,skipLocationChange:!!ir,replaceUrl:!!Nn})}),(0,Qt.b)(X=>{const je=new jn(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot);this.triggerEvent(je)}),(0,rt.U)(X=>Object.assign(Object.assign({},X),{guards:Le(X.targetSnapshot,X.currentSnapshot,this.rootContexts)})),function Fo(I,E){return(0,ye.z)(y=>{const{targetSnapshot:b,currentSnapshot:N,guards:{canActivateChecks:B,canDeactivateChecks:$}}=y;return 0===$.length&&0===B.length?(0,Q.of)(Object.assign(Object.assign({},y),{guardsResult:!0})):function mu(I,E,y,b){return(0,ve.D)(I).pipe((0,ye.z)(N=>function xs(I,E,y,b,N){const B=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!B||0===B.length)return(0,Q.of)(!0);const $=B.map(X=>{const je=hn(X,E,N);let It;if(function Wr(I){return I&&ns(I.canDeactivate)}(je))It=Et(je.canDeactivate(I,E,y,b));else{if(!ns(je))throw new Error("Invalid CanDeactivate guard");It=Et(je(I,E,y,b))}return It.pipe((0,rn.P)())});return(0,Q.of)($).pipe(vi())}(N.component,N.route,y,E,b)),(0,rn.P)(N=>!0!==N,!0))}($,b,N,I).pipe((0,ye.z)(X=>X&&function gs(I){return"boolean"==typeof I}(X)?function _a(I,E,y,b){return(0,ve.D)(E).pipe(ae(N=>(0,ke.z)(function li(I,E){return null!==I&&E&&E(new Oi(I)),(0,Q.of)(!0)}(N.route.parent,b),function oo(I,E){return null!==I&&E&&E(new gr(I)),(0,Q.of)(!0)}(N.route,b),function Do(I,E,y){const b=E[E.length-1],B=E.slice(0,E.length-1).reverse().map($=>function Ut(I){const E=I.routeConfig?I.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:I,guards:E}:null}($)).filter($=>null!==$).map($=>Ue(()=>{const X=$.guards.map(je=>{const It=hn(je,$.node,y);let On;if(function Ss(I){return I&&ns(I.canActivateChild)}(It))On=Et(It.canActivateChild(b,I));else{if(!ns(It))throw new Error("Invalid CanActivateChild guard");On=Et(It(b,I))}return On.pipe((0,rn.P)())});return(0,Q.of)(X).pipe(vi())}));return(0,Q.of)(B).pipe(vi())}(I,N.path,y),function Mi(I,E,y){const b=E.routeConfig?E.routeConfig.canActivate:null;if(!b||0===b.length)return(0,Q.of)(!0);const N=b.map(B=>Ue(()=>{const $=hn(B,E,y);let X;if(function us(I){return I&&ns(I.canActivate)}($))X=Et($.canActivate(E,I));else{if(!ns($))throw new Error("Invalid CanActivate guard");X=Et($(E,I))}return X.pipe((0,rn.P)())}));return(0,Q.of)(N).pipe(vi())}(I,N.route,y))),(0,rn.P)(N=>!0!==N,!0))}(b,B,I,E):(0,Q.of)(X)),(0,rt.U)(X=>Object.assign(Object.assign({},y),{guardsResult:X})))})}(this.ngModule.injector,X=>this.triggerEvent(X)),(0,Qt.b)(X=>{if(Ur(X.guardsResult)){const It=Tr(`Redirecting to "${this.serializeUrl(X.guardsResult)}"`);throw It.url=X.guardsResult,It}const je=new kt(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot,!!X.guardsResult);this.triggerEvent(je)}),(0,Ge.h)(X=>!!X.guardsResult||(this.restoreHistory(X),this.cancelNavigationTransition(X,""),!1)),jr(X=>{if(X.guards.canActivateChecks.length)return(0,Q.of)(X).pipe((0,Qt.b)(je=>{const It=new Jt(je.id,this.serializeUrl(je.extractedUrl),this.serializeUrl(je.urlAfterRedirects),je.targetSnapshot);this.triggerEvent(It)}),(0,Ht.w)(je=>{let It=!1;return(0,Q.of)(je).pipe(function Da(I,E){return(0,ye.z)(y=>{const{targetSnapshot:b,guards:{canActivateChecks:N}}=y;if(!N.length)return(0,Q.of)(y);let B=0;return(0,ve.D)(N).pipe(ae($=>function ys(I,E,y,b){return function Co(I,E,y,b){const N=vu(I);if(0===N.length)return(0,Q.of)({});const B={};return(0,ve.D)(N).pipe((0,ye.z)($=>function ra(I,E,y,b){const N=hn(I,E,b);return Et(N.resolve?N.resolve(E,y):N(E,y))}(I[$],E,y,b).pipe((0,Qt.b)(X=>{B[$]=X}))),Ne(1),(0,ye.z)(()=>vu(B).length===N.length?(0,Q.of)(B):Te.E))}(I._resolve,I,E,b).pipe((0,rt.U)(B=>(I._resolvedData=B,I.data=Object.assign(Object.assign({},I.data),xr(I,y).resolve),null)))}($.route,b,I,E)),(0,Qt.b)(()=>B++),Ne(1),(0,ye.z)($=>B===N.length?(0,Q.of)(y):Te.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qt.b)({next:()=>It=!0,complete:()=>{It||(this.restoreHistory(je),this.cancelNavigationTransition(je,"At least one route resolver didn't emit any value."))}}))}),(0,Qt.b)(je=>{const It=new Cn(je.id,this.serializeUrl(je.extractedUrl),this.serializeUrl(je.urlAfterRedirects),je.targetSnapshot);this.triggerEvent(It)}))}),jr(X=>{const{targetSnapshot:je,id:It,extractedUrl:On,rawUrl:Kt,extras:{skipLocationChange:ir,replaceUrl:Nn}}=X;return this.hooks.afterPreactivation(je,{navigationId:It,appliedUrlTree:On,rawUrlTree:Kt,skipLocationChange:!!ir,replaceUrl:!!Nn})}),(0,rt.U)(X=>{const je=function Gs(I,E,y){const b=Hn(I,E._root,y?y._root:void 0);return new Rn(b,E)}(this.routeReuseStrategy,X.targetSnapshot,X.currentRouterState);return Object.assign(Object.assign({},X),{targetRouterState:je})}),(0,Qt.b)(X=>{this.currentUrlTree=X.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(X.urlAfterRedirects,X.rawUrl),this.routerState=X.targetRouterState,"deferred"===this.urlUpdateStrategy&&(X.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,X),this.browserUrlTree=X.urlAfterRedirects)}),((I,E,y)=>(0,rt.U)(b=>(new ts(E,b.targetRouterState,b.currentRouterState,y).activate(I),b)))(this.rootContexts,this.routeReuseStrategy,X=>this.triggerEvent(X)),(0,Qt.b)({next(){B=!0},complete(){B=!0}}),function ht(I){return(0,pt.e)((E,y)=>{try{E.subscribe(y)}finally{y.add(I)}})}(()=>{var X;B||$||this.cancelNavigationTransition(N,`Navigation ID ${N.id} is not equal to the current navigation id ${this.navigationId}`),(null===(X=this.currentNavigation)||void 0===X?void 0:X.id)===N.id&&(this.currentNavigation=null)}),Z(X=>{if($=!0,function An(I){return I&&I[or]}(X)){const je=Ur(X.url);je||(this.navigated=!0,this.restoreHistory(N,!0));const It=new sr(N.id,this.serializeUrl(N.extractedUrl),X.message);b.next(It),je?setTimeout(()=>{const On=this.urlHandlingStrategy.merge(X.url,this.rawUrlTree),Kt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ki(N.source)};this.scheduleNavigation(On,"imperative",null,Kt,{resolve:N.resolve,reject:N.reject,promise:N.promise})},0):N.resolve(!1)}else{this.restoreHistory(N,!0);const je=new Gn(N.id,this.serializeUrl(N.extractedUrl),X);b.next(je);try{N.resolve(this.errorHandler(X))}catch(It){N.reject(It)}}return Te.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const b="popstate"===y.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{var N;const B={replaceUrl:!0},$=(null===(N=y.state)||void 0===N?void 0:N.navigationId)?y.state:null;if($){const je=Object.assign({},$);delete je.navigationId,delete je.\u0275routerPageId,0!==Object.keys(je).length&&(B.state=je)}const X=this.parseUrl(y.url);this.scheduleNavigation(X,b,$,B)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){Si(y),this.config=y.map(x),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,b={}){const{relativeTo:N,queryParams:B,fragment:$,queryParamsHandling:X,preserveFragment:je}=b,It=N||this.routerState.root,On=je?this.currentUrlTree.fragment:$;let Kt=null;switch(X){case"merge":Kt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),B);break;case"preserve":Kt=this.currentUrlTree.queryParams;break;default:Kt=B||null}return null!==Kt&&(Kt=this.removeEmptyProps(Kt)),function we(I,E,y,b,N){if(0===y.length)return Qe(E.root,E.root,E.root,b,N);const B=function Vn(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Ft(!0,0,I);let E=0,y=!1;const b=I.reduce((N,B,$)=>{if("object"==typeof B&&null!=B){if(B.outlets){const X={};return Ye(B.outlets,(je,It)=>{X[It]="string"==typeof je?je.split("/"):je}),[...N,{outlets:X}]}if(B.segmentPath)return[...N,B.segmentPath]}return"string"!=typeof B?[...N,B]:0===$?(B.split("/").forEach((X,je)=>{0==je&&"."===X||(0==je&&""===X?y=!0:".."===X?E++:""!=X&&N.push(X))}),N):[...N,B]},[]);return new Ft(y,E,b)}(y);if(B.toRoot())return Qe(E.root,E.root,new Zt([],{}),b,N);const $=function Pn(I,E,y){if(I.isAbsolute)return new Ir(E.root,!0,0);if(-1===y.snapshot._lastPathIndex){const B=y.snapshot._urlSegment;return new Ir(B,B===E.root,0)}const b=Ee(I.commands[0])?0:1;return function gi(I,E,y){let b=I,N=E,B=y;for(;B>N;){if(B-=N,b=b.parent,!b)throw new Error("Invalid number of '../'");N=b.segments.length}return new Ir(b,!1,N-B)}(y.snapshot._urlSegment,y.snapshot._lastPathIndex+b,I.numberOfDoubleDots)}(B,E,I),X=$.processChildren?Hi($.segmentGroup,$.index,B.commands):mi($.segmentGroup,$.index,B.commands);return Qe(E.root,$.segmentGroup,X,b,N)}(It,this.currentUrlTree,y,Kt,null!=On?On:null)}navigateByUrl(y,b={skipLocationChange:!1}){const N=Ur(y)?y:this.parseUrl(y),B=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(B,"imperative",null,b)}navigate(y,b={skipLocationChange:!1}){return function wu(I){for(let E=0;E<I.length;E++){const y=I[E];if(null==y)throw new Error(`The requested path contains ${y} segment at index ${E}`)}}(y),this.navigateByUrl(this.createUrlTree(y,b),b)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let b;try{b=this.urlSerializer.parse(y)}catch(N){b=this.malformedUriErrorHandler(N,this.urlSerializer,y)}return b}isActive(y,b){let N;if(N=!0===b?Object.assign({},Bo):!1===b?Object.assign({},$r):b,Ur(y))return ue(this.currentUrlTree,y,N);const B=this.parseUrl(y);return ue(this.currentUrlTree,B,N)}removeEmptyProps(y){return Object.keys(y).reduce((b,N)=>{const B=y[N];return null!=B&&(b[N]=B),b},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new Ln(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,b,N,B,$){var X,je;if(this.disposed)return Promise.resolve(!1);let It,On,Kt;$?(It=$.resolve,On=$.reject,Kt=$.promise):Kt=new Promise((_s,is)=>{It=_s,On=is});const ir=++this.navigationId;let Nn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),Nn=N&&N.\u0275routerPageId?N.\u0275routerPageId:B.replaceUrl||B.skipLocationChange?null!==(X=this.browserPageId)&&void 0!==X?X:0:(null!==(je=this.browserPageId)&&void 0!==je?je:0)+1):Nn=0,this.setTransition({id:ir,targetPageId:Nn,source:b,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:B,resolve:It,reject:On,promise:Kt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Kt.catch(_s=>Promise.reject(_s))}setBrowserUrl(y,b){const N=this.urlSerializer.serialize(y),B=Object.assign(Object.assign({},b.extras.state),this.generateNgRouterState(b.id,b.targetPageId));this.location.isCurrentPathEqualTo(N)||b.extras.replaceUrl?this.location.replaceState(N,"",B):this.location.go(N,"",B)}restoreHistory(y,b=!1){var N,B;if("computed"===this.canceledNavigationResolution){const $=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(N=this.currentNavigation)||void 0===N?void 0:N.finalUrl)||0===$?this.currentUrlTree===(null===(B=this.currentNavigation)||void 0===B?void 0:B.finalUrl)&&0===$&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($)}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,b){const N=new sr(y.id,this.serializeUrl(y.extractedUrl),b);this.triggerEvent(N),y.resolve(!1)}generateNgRouterState(y,b){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:b}:{navigationId:y}}}return I.\u0275fac=function(y){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function Ki(I){return"imperative"!==I}let To=(()=>{class I{constructor(y,b,N){this.router=y,this.route=b,this.locationStrategy=N,this.commands=null,this.href=null,this.onChanges=new he.x,this.subscription=y.events.subscribe(B=>{B instanceof Ln&&this.updateTargetUrlAndHref()})}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,b,N,B,$){if(0!==y||b||N||B||$||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const X={skipLocationChange:Li(this.skipLocationChange),replaceUrl:Li(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,X),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Li(this.preserveFragment)})}}return I.\u0275fac=function(y){return new(y||I)(p.Y36(ci),p.Y36(Mr),p.Y36(Dn.S$))},I.\u0275dir=p.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,b){1&y&&p.NdJ("click",function(B){return b.onClick(B.button,B.ctrlKey,B.shiftKey,B.altKey,B.metaKey)}),2&y&&p.uIk("target",b.target)("href",b.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})();function Li(I){return""===I||!!I}class Ha{}class Ga{preload(E,y){return(0,Q.of)(null)}}let hr=(()=>{class I{constructor(y,b,N,B){this.router=y,this.injector=N,this.preloadingStrategy=B,this.loader=new Eu(N,b,je=>y.triggerEvent(new on(je)),je=>y.triggerEvent(new pr(je)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ge.h)(y=>y instanceof Ln),ae(()=>this.preload())).subscribe(()=>{})}preload(){const y=this.injector.get(p.h0i);return this.processRoutes(y,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,b){const N=[];for(const B of b)if(B.loadChildren&&!B.canLoad&&B._loadedConfig){const $=B._loadedConfig;N.push(this.processRoutes($.module,$.routes))}else B.loadChildren&&!B.canLoad?N.push(this.preloadConfig(y,B)):B.children&&N.push(this.processRoutes(y,B.children));return(0,ve.D)(N).pipe((0,sn.J)(),(0,rt.U)(B=>{}))}preloadConfig(y,b){return this.preloadingStrategy.preload(b,()=>(b._loadedConfig?(0,Q.of)(b._loadedConfig):this.loader.load(y.injector,b)).pipe((0,ye.z)(B=>(b._loadedConfig=B,this.processRoutes(B.module,B.routes)))))}}return I.\u0275fac=function(y){return new(y||I)(p.LFG(ci),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Ha))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})(),jo=(()=>{class I{constructor(y,b,N={}){this.router=y,this.viewportScroller=b,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Xn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof Ln&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Dr&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,b){this.router.triggerEvent(new Dr(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(y){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();const qi=new p.OlP("ROUTER_CONFIGURATION"),$o=new p.OlP("ROUTER_FORROOT_GUARD"),Ho=[Dn.Ye,{provide:Er,useClass:Yr},{provide:ci,useFactory:function nc(I,E,y,b,N,B,$={},X,je){const It=new ci(null,I,E,y,b,N,yr(B));return X&&(It.urlHandlingStrategy=X),je&&(It.routeReuseStrategy=je),function Wa(I,E){I.errorHandler&&(E.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(E.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(E.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(E.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(E.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(E.canceledNavigationResolution=I.canceledNavigationResolution)}($,It),$.enableTracing&&It.events.subscribe(On=>{var Kt,ir;null===(Kt=console.group)||void 0===Kt||Kt.call(console,`Router Event: ${On.constructor.name}`),console.log(On.toString()),console.log(On),null===(ir=console.groupEnd)||void 0===ir||ir.call(console)}),It},deps:[Er,ms,Dn.Ye,p.zs3,p.Sil,_u,qi,[class Uo{},new p.FiY],[class bo{},new p.FiY]]},ms,{provide:Mr,useFactory:function ti(I){return I.routerState.root},deps:[ci]},hr,Ga,class Iu{preload(E,y){return y().pipe(Z(()=>(0,Q.of)(null)))}},{provide:qi,useValue:{enableTracing:!1}}];function Ta(){return new p.PXZ("Router",ci)}let _r=(()=>{class I{constructor(y,b){}static forRoot(y,b){return{ngModule:I,providers:[Ho,hs(y),{provide:$o,useFactory:Aa,deps:[[ci,new p.FiY,new p.tp0]]},{provide:qi,useValue:b||{}},{provide:Dn.S$,useFactory:vs,deps:[Dn.lw,[new p.tBr(Dn.mr),new p.FiY],qi]},{provide:jo,useFactory:al,deps:[ci,Dn.EM,qi]},{provide:Ha,useExisting:b&&b.preloadingStrategy?b.preloadingStrategy:Ga},{provide:p.PXZ,multi:!0,useFactory:Ta},[co,{provide:p.ip1,multi:!0,useFactory:rs,deps:[co]},{provide:Ns,useFactory:ho,deps:[co]},{provide:p.tb,multi:!0,useExisting:Ns}]]}}static forChild(y){return{ngModule:I,providers:[hs(y)]}}}return I.\u0275fac=function(y){return new(y||I)(p.LFG($o,8),p.LFG(ci,8))},I.\u0275mod=p.oAB({type:I}),I.\u0275inj=p.cJS({}),I})();function al(I,E,y){return y.scrollOffset&&E.setOffset(y.scrollOffset),new jo(I,E,y)}function vs(I,E,y={}){return y.useHash?new Dn.Do(I,E):new Dn.b0(I,E)}function Aa(I){return"guarded"}function hs(I){return[{provide:p.deG,multi:!0,useValue:I},{provide:_u,multi:!0,useValue:I}]}let co=(()=>{class I{constructor(y){this.injector=y,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new he.x}appInitializer(){return this.injector.get(Dn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let b=null;const N=new Promise(X=>b=X),B=this.injector.get(ci),$=this.injector.get(qi);return"disabled"===$.initialNavigation?(B.setUpLocationChangeListener(),b(!0)):"enabled"===$.initialNavigation||"enabledBlocking"===$.initialNavigation?(B.hooks.afterPreactivation=()=>this.initNavigation?(0,Q.of)(null):(this.initNavigation=!0,b(!0),this.resultOfPreactivationDone),B.initialNavigation()):b(!0),N})}bootstrapListener(y){const b=this.injector.get(qi),N=this.injector.get(hr),B=this.injector.get(jo),$=this.injector.get(ci),X=this.injector.get(p.z2F);y===X.components[0]&&(("enabledNonBlocking"===b.initialNavigation||void 0===b.initialNavigation)&&$.initialNavigation(),N.setUpPreloading(),B.init(),$.resetRootComponentType(X.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return I.\u0275fac=function(y){return new(y||I)(p.LFG(p.zs3))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function rs(I){return I.appInitializer.bind(I)}function ho(I){return I.bootstrapListener.bind(I)}const Ns=new p.OlP("Router Initializer")},3942:(bt,$e,U)=>{U.d($e,{Z:()=>Xe});var p=U(2090),K=U(4859),Y=U(9681),ve=U(1877);class fe{constructor(Ue,Fe){this._delegate=Ue,this.firebase=Fe,(0,Y._addComponent)(Ue,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(Ue,Fe=Y._DEFAULT_ENTRY_NAME){var pt;this._delegate.checkDestroyed();const j=this._delegate.container.getProvider(Ue);return!j.isInitialized()&&"EXPLICIT"===(null===(pt=j.getComponent())||void 0===pt?void 0:pt.instantiationMode)&&j.initialize(),j.getImmediate({identifier:Fe})}_removeServiceInstance(Ue,Fe=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(Fe)}_addComponent(Ue){(0,Y._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,Y._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function Se(){const at=function Me(at){const Ue={},Fe={__esModule:!0,initializeApp:function V(ke,Te={}){const he=Y.initializeApp(ke,Te);if((0,p.r3)(Ue,he.name))return Ue[he.name];const Z=new at(he,Fe);return Ue[he.name]=Z,Z},app:j,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function de(ke){const Te=ke.name,he=Te.replace("-compat","");if(Y._registerComponent(ke)&&"PUBLIC"===ke.type){const Z=(ye=j())=>{if("function"!=typeof ye[he])throw Ae.create("invalid-app-argument",{appName:Te});return ye[he]()};void 0!==ke.serviceProps&&(0,p.ZB)(Z,ke.serviceProps),Fe[he]=Z,at.prototype[he]=function(...ye){return this._getService.bind(this,Te).apply(this,ke.multipleInstances?ye:[])}}return"PUBLIC"===ke.type?Fe[he]:null},removeApp:function pt(ke){delete Ue[ke]},useAsService:function Re(ke,Te){return"serverAuth"===Te?null:Te},modularAPIs:Y}};function j(ke){if(!(0,p.r3)(Ue,ke=ke||Y._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:ke});return Ue[ke]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function Q(){return Object.keys(Ue).map(ke=>Ue[ke])}}),j.App=at,Fe}(fe);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function Ue(Fe){(0,p.ZB)(at,Fe)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),at}(),se=new ve.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=oe;!function Ke(at){(0,Y.registerVersion)("@firebase/app-compat","0.1.22",at)}()},9681:(bt,$e,U)=>{U.r($e),U.d($e,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>Ln,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>Dt,_addOrOverwriteComponent:()=>St,_apps:()=>rt,_clearComponents:()=>sn,_components:()=>Ht,_getProvider:()=>rn,_registerComponent:()=>nt,_removeServiceInstance:()=>Qt,deleteApp:()=>jn,getApp:()=>Gn,getApps:()=>fr,initializeApp:()=>sr,onLog:()=>Cn,registerVersion:()=>Jt,setLogLevel:()=>on});var p=U(5861),K=U(4859),Y=U(1877),ve=U(2090);class fe{constructor(Ye){this.container=Ye}getPlatformInfoString(){return this.container.getProviders().map(Et=>{if(function Ie(At){const Ye=At.getComponent();return"VERSION"===(null==Ye?void 0:Ye.type)}(Et)){const zt=Et.getImmediate();return`${zt.library}/${zt.version}`}return null}).filter(Et=>Et).join(" ")}}const Ae="@firebase/app",Se=new Y.Yd("@firebase/app"),jt="[DEFAULT]",ht={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rt=new Map,Ht=new Map;function Dt(At,Ye){try{At.container.addComponent(Ye)}catch(Et){Se.debug(`Component ${Ye.name} failed to register with FirebaseApp ${At.name}`,Et)}}function St(At,Ye){At.container.addOrOverwriteComponent(Ye)}function nt(At){const Ye=At.name;if(Ht.has(Ye))return Se.debug(`There were multiple attempts to register component ${Ye}.`),!1;Ht.set(Ye,At);for(const Et of rt.values())Dt(Et,At);return!0}function rn(At,Ye){const Et=At.container.getProvider("heartbeat").getImmediate({optional:!0});return Et&&Et.triggerHeartbeat(),At.container.getProvider(Ye)}function Qt(At,Ye,Et=jt){rn(At,Ye).clearInstance(Et)}function sn(){Ht.clear()}const wn=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Xn{constructor(Ye,Et,zt){this._isDeleted=!1,this._options=Object.assign({},Ye),this._config=Object.assign({},Et),this._name=Et.name,this._automaticDataCollectionEnabled=Et.automaticDataCollectionEnabled,this._container=zt,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ye}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ye){this._isDeleted=Ye}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}const Ln="9.6.11";function sr(At,Ye={}){"object"!=typeof Ye&&(Ye={name:Ye});const Et=Object.assign({name:jt,automaticDataCollectionEnabled:!1},Ye),zt=Et.name;if("string"!=typeof zt||!zt)throw wn.create("bad-app-name",{appName:String(zt)});const ln=rt.get(zt);if(ln){if((0,ve.vZ)(At,ln.options)&&(0,ve.vZ)(Et,ln.config))return ln;throw wn.create("duplicate-app",{appName:zt})}const Vt=new K.H0(zt);for(const ne of Ht.values())Vt.addComponent(ne);const ue=new Xn(At,Et,Vt);return rt.set(zt,ue),ue}function Gn(At=jt){const Ye=rt.get(At);if(!Ye)throw wn.create("no-app",{appName:At});return Ye}function fr(){return Array.from(rt.values())}function jn(At){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(At){const Ye=At.name;rt.has(Ye)&&(rt.delete(Ye),yield Promise.all(At.container.getProviders().map(Et=>Et.delete())),At.isDeleted=!0)})).apply(this,arguments)}function Jt(At,Ye,Et){var zt;let ln=null!==(zt=ht[At])&&void 0!==zt?zt:At;Et&&(ln+=`-${Et}`);const Vt=ln.match(/\s|\//),ue=Ye.match(/\s|\//);if(Vt||ue){const ne=[`Unable to register library "${ln}" with version "${Ye}":`];return Vt&&ne.push(`library name "${ln}" contains illegal characters (whitespace or "/")`),Vt&&ue&&ne.push("and"),ue&&ne.push(`version name "${Ye}" contains illegal characters (whitespace or "/")`),void Se.warn(ne.join(" "))}nt(new K.wA(`${ln}-version`,()=>({library:ln,version:Ye}),"VERSION"))}function Cn(At,Ye){if(null!==At&&"function"!=typeof At)throw wn.create("invalid-log-argument");(0,Y.Am)(At,Ye)}function on(At){(0,Y.Ub)(At)}const Jn="firebase-heartbeat-store";let gr=null;function Hr(){return gr||(gr=(0,ve.X3)("firebase-heartbeat-database",1,(At,Ye)=>{0===Ye&&At.createObjectStore(Jn)}).catch(At=>{throw wn.create("storage-open",{originalErrorMessage:At.message})})),gr}function vt(){return(vt=(0,p.Z)(function*(At){try{return(yield Hr()).transaction(Jn).objectStore(Jn).get(or(At))}catch(Ye){throw wn.create("storage-get",{originalErrorMessage:Ye.message})}})).apply(this,arguments)}function Mt(At,Ye){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,p.Z)(function*(At,Ye){try{const zt=(yield Hr()).transaction(Jn,"readwrite");return yield zt.objectStore(Jn).put(Ye,or(At)),zt.complete}catch(Et){throw wn.create("storage-set",{originalErrorMessage:Et.message})}})).apply(this,arguments)}function or(At){return`${At.name}!${At.options.appId}`}class bi{constructor(Ye){this.container=Ye,this._heartbeatsCache=null;const Et=this.container.getProvider("app").getImmediate();this._storage=new Gt(Et),this._heartbeatsCachePromise=this._storage.read().then(zt=>(this._heartbeatsCache=zt,zt))}triggerHeartbeat(){var Ye=this;return(0,p.Z)(function*(){const zt=Ye.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ln=mr();if(null===Ye._heartbeatsCache&&(Ye._heartbeatsCache=yield Ye._heartbeatsCachePromise),Ye._heartbeatsCache.lastSentHeartbeatDate!==ln&&!Ye._heartbeatsCache.heartbeats.some(Vt=>Vt.date===ln))return Ye._heartbeatsCache.heartbeats.push({date:ln,agent:zt}),Ye._heartbeatsCache.heartbeats=Ye._heartbeatsCache.heartbeats.filter(Vt=>{const ue=new Date(Vt.date).valueOf();return Date.now()-ue<=2592e6}),Ye._storage.overwrite(Ye._heartbeatsCache)})()}getHeartbeatsHeader(){var Ye=this;return(0,p.Z)(function*(){if(null===Ye._heartbeatsCache&&(yield Ye._heartbeatsCachePromise),null===Ye._heartbeatsCache||0===Ye._heartbeatsCache.heartbeats.length)return"";const Et=mr(),{heartbeatsToSend:zt,unsentEntries:ln}=function Wn(At,Ye=1024){const Et=[];let zt=At.slice();for(const ln of At){const Vt=Et.find(ue=>ue.agent===ln.agent);if(Vt){if(Vt.dates.push(ln.date),yr(Et)>Ye){Vt.dates.pop();break}}else if(Et.push({agent:ln.agent,dates:[ln.date]}),yr(Et)>Ye){Et.pop();break}zt=zt.slice(1)}return{heartbeatsToSend:Et,unsentEntries:zt}}(Ye._heartbeatsCache.heartbeats),Vt=(0,ve.L)(JSON.stringify({version:2,heartbeats:zt}));return Ye._heartbeatsCache.lastSentHeartbeatDate=Et,ln.length>0?(Ye._heartbeatsCache.heartbeats=ln,yield Ye._storage.overwrite(Ye._heartbeatsCache)):(Ye._heartbeatsCache.heartbeats=[],Ye._storage.overwrite(Ye._heartbeatsCache)),Vt})()}}function mr(){return(new Date).toISOString().substring(0,10)}class Gt{constructor(Ye){this.app=Ye,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ye=this;return(0,p.Z)(function*(){return(yield Ye._canUseIndexedDBPromise)&&(yield function Dr(At){return vt.apply(this,arguments)}(Ye.app))||{heartbeats:[]}})()}overwrite(Ye){var Et=this;return(0,p.Z)(function*(){var zt;if(yield Et._canUseIndexedDBPromise){const Vt=yield Et.read();return Mt(Et.app,{lastSentHeartbeatDate:null!==(zt=Ye.lastSentHeartbeatDate)&&void 0!==zt?zt:Vt.lastSentHeartbeatDate,heartbeats:Ye.heartbeats})}})()}add(Ye){var Et=this;return(0,p.Z)(function*(){var zt;if(yield Et._canUseIndexedDBPromise){const Vt=yield Et.read();return Mt(Et.app,{lastSentHeartbeatDate:null!==(zt=Ye.lastSentHeartbeatDate)&&void 0!==zt?zt:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...Ye.heartbeats]})}})()}}function yr(At){return(0,ve.L)(JSON.stringify({version:2,heartbeats:At})).length}!function gn(At){nt(new K.wA("platform-logger",Ye=>new fe(Ye),"PRIVATE")),nt(new K.wA("heartbeat",Ye=>new bi(Ye),"PRIVATE")),Jt(Ae,"0.7.21",At),Jt(Ae,"0.7.21","esm2017"),Jt("fire-js","")}("")},4859:(bt,$e,U)=>{U.d($e,{H0:()=>Me,wA:()=>Y});var p=U(5861),K=U(2090);class Y{constructor(oe,se,Ce){this.name=oe,this.instanceFactory=se,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const ve="[DEFAULT]";class fe{constructor(oe,se){this.name=oe,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const se=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(se)){const Ce=new K.BH;if(this.instancesDeferred.set(se,Ce),this.isInitialized(se)||this.shouldAutoInitialize())try{const lt=this.getOrInitializeService({instanceIdentifier:se});lt&&Ce.resolve(lt)}catch(lt){}}return this.instancesDeferred.get(se).promise}getImmediate(oe){var se;const Ce=this.normalizeInstanceIdentifier(null==oe?void 0:oe.identifier),lt=null!==(se=null==oe?void 0:oe.optional)&&void 0!==se&&se;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(Ke){if(lt)return null;throw Ke}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function Ae(Se){return"EAGER"===Se.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:ve})}catch(se){}for(const[se,Ce]of this.instancesDeferred.entries()){const lt=this.normalizeInstanceIdentifier(se);try{const Ke=this.getOrInitializeService({instanceIdentifier:lt});Ce.resolve(Ke)}catch(Ke){}}}}clearInstance(oe=ve){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,p.Z)(function*(){const se=Array.from(oe.instances.values());yield Promise.all([...se.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...se.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=ve){return this.instances.has(oe)}getOptions(oe=ve){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:se={}}=oe,Ce=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const lt=this.getOrInitializeService({instanceIdentifier:Ce,options:se});for(const[Ke,Xe]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(Ke)&&Xe.resolve(lt);return lt}onInit(oe,se){var Ce;const lt=this.normalizeInstanceIdentifier(se),Ke=null!==(Ce=this.onInitCallbacks.get(lt))&&void 0!==Ce?Ce:new Set;Ke.add(oe),this.onInitCallbacks.set(lt,Ke);const Xe=this.instances.get(lt);return Xe&&oe(Xe,lt),()=>{Ke.delete(oe)}}invokeOnInitCallbacks(oe,se){const Ce=this.onInitCallbacks.get(se);if(Ce)for(const lt of Ce)try{lt(oe,se)}catch(Ke){}}getOrInitializeService({instanceIdentifier:oe,options:se={}}){let Ce=this.instances.get(oe);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=oe,Se===ve?void 0:Se),options:se}),this.instances.set(oe,Ce),this.instancesOptions.set(oe,se),this.invokeOnInitCallbacks(Ce,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,Ce)}catch(lt){}var Se;return Ce||null}normalizeInstanceIdentifier(oe=ve){return this.component?this.component.multipleInstances?oe:ve:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const se=this.getProvider(oe.name);if(se.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);se.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const se=new fe(oe,this);return this.providers.set(oe,se),se}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,$e,U)=>{U.d($e,{Am:()=>Se,Ub:()=>Me,Yd:()=>Ae,in:()=>K});const p=[];var K=(()=>{return(oe=K||(K={}))[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",K;var oe})();const Y={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},ve=K.INFO,fe={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},Ie=(oe,se,...Ce)=>{if(se<oe.logLevel)return;const lt=(new Date).toISOString(),Ke=fe[se];if(!Ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[Ke](`[${lt}]  ${oe.name}:`,...Ce)};class Ae{constructor(se){this.name=se,this._logLevel=ve,this._logHandler=Ie,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in K))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?Y[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...se),this._logHandler(this,K.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...se),this._logHandler(this,K.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,K.INFO,...se),this._logHandler(this,K.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,K.WARN,...se),this._logHandler(this,K.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...se),this._logHandler(this,K.ERROR,...se)}}function Me(oe){p.forEach(se=>{se.setLogLevel(oe)})}function Se(oe,se){for(const Ce of p){let lt=null;se&&se.level&&(lt=Y[se.level]),Ce.userLogHandler=null===oe?null:(Ke,Xe,...at)=>{const Ue=at.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch(pt){return null}}).filter(Fe=>Fe).join(" ");Xe>=(null!=lt?lt:Ke.logLevel)&&oe({level:K[Xe].toLowerCase(),message:Ue,args:at,type:Ke.name})}}}},1470:(bt,$e,U)=>{U.d($e,{hx:()=>lt,yI:()=>at});var p=U(5e3),K=U(655),Y=U(2382),ve=U(9808);const fe=new p.OlP("ngx-mask config"),Ie=new p.OlP("new ngx-mask config"),Ae=new p.OlP("initial ngx-mask config"),Me={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new p.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Se=["Hh:m0:s0","Hh:m0","m0:s0"],oe=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let se=(()=>{class Fe{constructor(j){this._config=j,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(V,Q,de,Re)=>{var ke,Te;let he=[],Z="";if(Array.isArray(de)){const Nt=new RegExp(de.map(mt=>"[\\^$.|?*+()".indexOf(mt)>=0?`\\${mt}`:mt).join("|"));he=V.split(Nt),Z=null!==(Te=null===(ke=V.match(Nt))||void 0===ke?void 0:ke[0])&&void 0!==Te?Te:""}else he=V.split(de),Z=de;const ye=he.length>1?`${Z}${he[1]}`:"";let ae=he[0];const Ge=this.separatorLimit.replace(/\s/g,"");Ge&&+Ge&&(ae="-"===ae[0]?`-${ae.slice(1,ae.length).slice(0,Ge.length)}`:ae.slice(0,Ge.length));const Ne=/(\d+)(\d{3})/;for(;Q&&Ne.test(ae);)ae=ae.replace(Ne,"$1"+Q+"$2");return void 0===Re?ae+ye:0===Re?ae:ae+ye.substr(0,Re+1)},this.percentage=V=>Number(V)>=0&&Number(V)<=100,this.getPrecision=V=>{const Q=V.split(".");return Q.length>1?Number(Q[Q.length-1]):1/0},this.checkAndRemoveSuffix=V=>{var Q,de,Re;for(let ke=(null===(Q=this.suffix)||void 0===Q?void 0:Q.length)-1;ke>=0;ke--){const Te=this.suffix.substr(ke,null===(de=this.suffix)||void 0===de?void 0:de.length);if(V.includes(Te)&&(ke-1<0||!V.includes(this.suffix.substr(ke-1,null===(Re=this.suffix)||void 0===Re?void 0:Re.length))))return V.replace(Te,"")}return V},this.checkInputPrecision=(V,Q,de)=>{if(Q<1/0){if(Array.isArray(de)){const Te=de.find(he=>he!==this.thousandSeparator);de=Te||de[0]}const Re=new RegExp(this._charToRegExpExpression(de)+`\\d{${Q}}.*$`),ke=V.match(Re);ke&&ke[0].length-1>Q&&(V=V.substring(0,V.length-(ke[0].length-1-Q))),0===Q&&this._compareOrIncludes(V[V.length-1],de,this.thousandSeparator)&&(V=V.substring(0,V.length-1))}return V},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(j,V){const[Q,de]=V;return this.customPattern=de,this.applyMask(j,Q)}applyMask(j,V,Q=0,de=!1,Re=!1,ke=(()=>{})){var Te,he;if(!V||"string"!=typeof j)return"";let Z=0,ye="",ae=!1,Ge=!1,Ne=1,Nt=!1;j.slice(0,this.prefix.length)===this.prefix&&(j=j.slice(this.prefix.length,j.length)),this.suffix&&(null==j?void 0:j.length)>0&&(j=this.checkAndRemoveSuffix(j));const mt=j.toString().split("");"IP"===V&&(this.ipError=mt.filter(St=>"."===St).length<3&&mt.length<7,V="099.099.099.099");const jt=[];for(let St=0;St<j.length;St++)(null===(Te=j[St])||void 0===Te?void 0:Te.match("\\d"))&&jt.push(j[St]);if("CPF_CNPJ"===V&&(this.cpfCnpjError=11!==jt.length&&14!==jt.length,V=jt.length>11?"00.000.000/0000-00":"000.000.000-00"),V.startsWith("percent")){if(j.match("[a-z]|[A-Z]")||j.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){j=this._stripToDecimal(j);const St=this.getPrecision(V);j=this.checkInputPrecision(j,St,this.decimalMarker)}j.indexOf(".")>0&&!this.percentage(j.substring(0,j.indexOf(".")))&&(j=`${j.substring(0,j.indexOf(".")-1)}${j.substring(j.indexOf("."),j.length)}`),ye=this.percentage(j)?j:j.substring(0,j.length-1)}else if(V.startsWith("separator")){(j.match("[w\u0430-\u044f\u0410-\u042f]")||j.match("[\u0401\u0451\u0410-\u044f]")||j.match("[a-z]|[A-Z]")||j.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||j.match("[^A-Za-z0-9,]"))&&(j=this._stripToDecimal(j)),j=j.length>1&&"0"===j[0]&&!this._compareOrIncludes(j[1],this.decimalMarker,this.thousandSeparator)&&!Re?j.slice(1,j.length):j,Re&&(j=this._compareOrIncludes(j[j.length-1],this.decimalMarker,this.thousandSeparator)?j.slice(0,j.length-1):j);const St=this._charToRegExpExpression(this.thousandSeparator);let nt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(St,"");if(Array.isArray(this.decimalMarker))for(const Xn of this.decimalMarker)nt=nt.replace(this._charToRegExpExpression(Xn),"");else nt=nt.replace(this._charToRegExpExpression(this.decimalMarker),"");const rn=new RegExp("["+nt+"]");(j.match(rn)||1===j.length&&this._compareOrIncludes(j,this.decimalMarker,this.thousandSeparator))&&(j=j.substring(0,j.length-1));const Qt=this.getPrecision(V),sn=(j=this.checkInputPrecision(j,Qt,this.decimalMarker)).replace(new RegExp(St,"g"),"");ye=this._formatWithSeparators(sn,this.thousandSeparator,this.decimalMarker,Qt);const Dn=ye.indexOf(",")-j.indexOf(","),wn=ye.length-j.length;if(wn>0&&","!==ye[Q]){Ge=!0;let Xn=0;do{this._shift.add(Q+Xn),Xn++}while(Xn<wn)}else 0!==Dn&&Q>0&&!(ye.indexOf(",")>=Q&&Q>3)||!(ye.indexOf(".")>=Q&&Q>3)&&wn<=0?(this._shift.clear(),Ge=!0,Ne=wn,this._shift.add(Q+=wn)):this._shift.clear()}else for(let St=0,nt=mt[0];St<mt.length&&Z!==V.length;St++,nt=mt[St])if(this._checkSymbolMask(nt,V[Z])&&"?"===V[Z+1])ye+=nt,Z+=2;else if("*"===V[Z+1]&&ae&&this._checkSymbolMask(nt,V[Z+2]))ye+=nt,Z+=3,ae=!1;else if(this._checkSymbolMask(nt,V[Z])&&"*"===V[Z+1])ye+=nt,ae=!0;else if("?"===V[Z+1]&&this._checkSymbolMask(nt,V[Z+2]))ye+=nt,Z+=3;else if(this._checkSymbolMask(nt,V[Z])){if("H"===V[Z]&&Number(nt)>2){Z+=1,this._shiftStep(V,Z,mt.length),St--,this.leadZeroDateTime&&(ye+="0");continue}if("h"===V[Z]&&"2"===ye&&Number(nt)>3){Z+=1,St--;continue}if("m"===V[Z]&&Number(nt)>5){Z+=1,this._shiftStep(V,Z,mt.length),St--,this.leadZeroDateTime&&(ye+="0");continue}if("s"===V[Z]&&Number(nt)>5){Z+=1,this._shiftStep(V,Z,mt.length),St--,this.leadZeroDateTime&&(ye+="0");continue}const rn=31;if("d"===V[Z]&&(Number(nt)>3&&this.leadZeroDateTime||Number(j.slice(Z,Z+2))>rn||"/"===j[Z+1])){Z+=1,this._shiftStep(V,Z,mt.length),St--,this.leadZeroDateTime&&(ye+="0");continue}if("M"===V[Z]){const sn=0===Z&&(Number(nt)>2||Number(j.slice(Z,Z+2))>12||"/"===j[Z+1]),Dn=j.slice(Z-3,Z-1).includes("/")&&("/"===j[Z-2]&&Number(j.slice(Z-1,Z+1))>12&&"/"!==j[Z]||"/"===j[Z]||"/"===j[Z-3]&&Number(j.slice(Z-2,Z))>12&&"/"!==j[Z-1]||"/"===j[Z-1]),wn=Number(j.slice(Z-3,Z-1))<=rn&&!j.slice(Z-3,Z-1).includes("/")&&"/"===j[Z-1]&&(Number(j.slice(Z,Z+2))>12||"/"===j[Z+1]),Xn=Number(j.slice(Z-3,Z-1))>rn&&!j.slice(Z-3,Z-1).includes("/")&&!j.slice(Z-2,Z).includes("/")&&Number(j.slice(Z-2,Z))>12,Ln=Number(j.slice(Z-3,Z-1))<=rn&&!j.slice(Z-3,Z-1).includes("/")&&"/"!==j[Z-1]&&Number(j.slice(Z-1,Z+1))>12;if(Number(nt)>1&&this.leadZeroDateTime||sn||Dn||wn||Xn||Ln){Z+=1,this._shiftStep(V,Z,mt.length),St--,this.leadZeroDateTime&&(ye+="0");continue}}ye+=nt,Z++}else-1!==this.maskSpecialCharacters.indexOf(V[Z])?(ye+=V[Z],Z++,this._shiftStep(V,Z,mt.length),St--):this.maskSpecialCharacters.indexOf(nt)>-1&&this.maskAvailablePatterns[V[Z]]&&(null===(he=this.maskAvailablePatterns[V[Z]])||void 0===he?void 0:he.optional)?(!!mt[Z]&&"099.099.099.099"!==V&&"000.000.000-00"!==V&&"00.000.000/0000-00"!==V&&!V.match(/^9+\.0+$/)&&(ye+=mt[Z]),Z++,St--):"*"===this.maskExpression[Z+1]&&this._findSpecialChar(this.maskExpression[Z+2])&&this._findSpecialChar(nt)===this.maskExpression[Z+2]&&ae||"?"===this.maskExpression[Z+1]&&this._findSpecialChar(this.maskExpression[Z+2])&&this._findSpecialChar(nt)===this.maskExpression[Z+2]&&ae?(Z+=3,ye+=nt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(nt)<0&&nt!==this.placeHolderCharacter&&(Nt=!0);ye.length+1===V.length&&-1!==this.maskSpecialCharacters.indexOf(V[V.length-1])&&(ye+=V[V.length-1]);let ht=Q+1;for(;this._shift.has(ht);)Ne++,ht++;let rt=de?Z:this._shift.has(Q)?Ne:0;Nt&&rt--,ke(rt,Ge),Ne<0&&this._shift.clear();let Ht=!1;Re&&(Ht=mt.every(St=>this.maskSpecialCharacters.includes(St)));let Dt=`${this.prefix}${Ht?"":ye}${this.suffix}`;return 0===ye.length&&(Dt=`${this.prefix}${ye}`),Dt}_findSpecialChar(j){return this.maskSpecialCharacters.find(V=>V===j)}_checkSymbolMask(j,V){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[V]&&this.maskAvailablePatterns[V].pattern&&this.maskAvailablePatterns[V].pattern.test(j)}_stripToDecimal(j){return j.split("").filter((V,Q)=>V.match("^-?\\d")||V.match("\\s")||"."===V||","===V||"-"===V&&0===Q&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(j){return j&&(" "===j?"\\s":"[\\^$.|?*+()".indexOf(j)>=0?`\\${j}`:j)}_shiftStep(j,V,Q){const de=/[*?]/g.test(j.slice(0,V))?Q:V;this._shift.add(de+this.prefix.length||0)}_compareOrIncludes(j,V,Q){return Array.isArray(V)?V.filter(de=>de!==Q).includes(j):j===V}}return Fe.\u0275fac=function(j){return new(j||Fe)(p.LFG(fe))},Fe.\u0275prov=p.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})(),Ce=(()=>{class Fe extends se{constructor(j,V,Q,de){super(V),this.document=j,this._config=V,this._elementRef=Q,this._renderer=de,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=Re=>{}}applyMask(j,V,Q=0,de=!1,Re=!1,ke=(()=>{})){if(!V)return j!==this.actualValue?this.actualValue:j;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(j||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(j||"#")),!j&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const Te=j&&"number"==typeof this.selStart?j[this.selStart]:"";let he="";if(this.hiddenInput&&!this.writingValue){let Ge=this.actualValue.split("");""!==j&&Ge.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(j.length>Ge.length?Ge.splice(this.selStart,0,Te):j.length<Ge.length&&(Ge.length-j.length==1?Ge.splice(this.selStart-1,1):Ge.splice(this.selStart,this.selEnd-this.selStart))):Ge=[],this.showMaskTyped&&(j=this.removeMask(j)),he=this.actualValue.length&&Ge.length<=j.length?this.shiftTypedSymbols(Ge.join("")):j}he=Boolean(he)&&he.length?he:j;const Z=super.applyMask(he,V,Q,de,Re,ke);if(this.actualValue=this.getActualValue(Z),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(Ge=>!this._compareOrIncludes(Ge,this.decimalMarker,this.thousandSeparator))),this.formControlResult(Z),!this.showMaskTyped)return this.hiddenInput&&Z&&Z.length?this.hideInput(Z,this.maskExpression):Z;const ye=Z.length,ae=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const Ge=this._numberSkipedSymbols(Z);return Z+ae.slice(ye+Ge)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?Z+ae:Z+ae.slice(ye)}_numberSkipedSymbols(j){const V=/(^|\D)(\d\D)/g;let Q=V.exec(j),de=0;for(;null!=Q;)de+=1,Q=V.exec(j);return de}applyValueChanges(j,V,Q,de=(()=>{})){const Re=this._elementRef.nativeElement;Re.value=this.applyMask(Re.value,this.maskExpression,j,V,Q,de),Re!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(j,V){return j.split("").map((Q,de)=>{var Re,ke;return this.maskAvailablePatterns&&this.maskAvailablePatterns[V[de]]&&(null===(Re=this.maskAvailablePatterns[V[de]])||void 0===Re?void 0:Re.symbol)?null===(ke=this.maskAvailablePatterns[V[de]])||void 0===ke?void 0:ke.symbol:Q}).join("")}getActualValue(j){const V=j.split("").filter((Q,de)=>this._checkSymbolMask(Q,this.maskExpression[de])||this.maskSpecialCharacters.includes(this.maskExpression[de])&&Q===this.maskExpression[de]);return V.join("")===j?V.join(""):j}shiftTypedSymbols(j){let V="";return(j&&j.split("").map((de,Re)=>{if(this.maskSpecialCharacters.includes(j[Re+1])&&j[Re+1]!==this.maskExpression[Re+1])return V=de,j[Re+1];if(V.length){const ke=V;return V="",ke}return de})||[]).join("")}numberToString(j){return j||0===j?Number(j).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(j)}showMaskInInput(j){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(j){if("IP"===this.maskExpression)return this._checkForIp(j);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(j)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const j=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==j.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(j.value,this.maskExpression))}set formElementProperty([j,V]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,j,V))}checkSpecialCharAmount(j){return j.split("").filter(Q=>this._findSpecialChar(Q)).length}removeMask(j){return this._removeMask(this._removeSuffix(this._removePrefix(j)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(j){var V;if("#"===j)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const Q=[];for(let de=0;de<j.length;de++)(null===(V=j[de])||void 0===V?void 0:V.match("\\d"))&&Q.push(j[de]);return Q.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:Q.length>3&&Q.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:Q.length>6&&Q.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(j){var V;const Q=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,de=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===j)return Q;const Re=[];for(let ke=0;ke<j.length;ke++)(null===(V=j[ke])||void 0===V?void 0:V.match("\\d"))&&Re.push(j[ke]);return Re.length<=3?Q.slice(Re.length,Q.length):Re.length>3&&Re.length<=6?Q.slice(Re.length+1,Q.length):Re.length>6&&Re.length<=9?Q.slice(Re.length+2,Q.length):Re.length>9&&Re.length<11?Q.slice(Re.length+3,Q.length):11===Re.length?"":12===Re.length?de.slice(17===j.length?16:15,de.length):Re.length>12&&Re.length<=14?de.slice(Re.length+4,de.length):""}formControlResult(j){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(j)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(j)):this._removeSuffix(j))}_toNumber(j){if(!this.isNumberValue||""===j)return j;const V=Number(j);return Number.isNaN(V)?j:V}_removeMask(j,V){return j&&j.replace(this._regExpForRemove(V),"")}_removePrefix(j){return this.prefix?j&&j.replace(this.prefix,""):j}_removeSuffix(j){return this.suffix?j&&j.replace(this.suffix,""):j}_retrieveSeparatorValue(j){return this._removeMask(this._removeSuffix(this._removePrefix(j)),this.maskSpecialCharacters)}_regExpForRemove(j){return new RegExp(j.map(V=>`\\${V}`).join("|"),"gi")}_checkSymbols(j){if(""===j)return j;const V=this._retrieveSeparatorPrecision(this.maskExpression);let Q=this._retrieveSeparatorValue(j);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(Q=Q.replace(this.decimalMarker,".")),this.isNumberValue?V?j===this.decimalMarker?null:this._checkPrecision(this.maskExpression,Q):Number(Q):Q}_retrieveSeparatorPrecision(j){const V=j.match(new RegExp("^separator\\.([^d]*)"));return V?Number(V[1]):null}_checkPrecision(j,V){return j.indexOf("2")>0?Number(V).toFixed(2):Number(V)}}return Fe.\u0275fac=function(j){return new(j||Fe)(p.LFG(ve.K0),p.LFG(fe),p.LFG(p.SBq),p.LFG(p.Qsj))},Fe.\u0275prov=p.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})(),lt=(()=>{class Fe{constructor(j,V,Q){this.document=j,this._maskService=V,this._config=Q,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new p.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=de=>{},this.onTouch=()=>{}}ngOnChanges(j){const{maskExpression:V,specialCharacters:Q,patterns:de,prefix:Re,suffix:ke,thousandSeparator:Te,decimalMarker:he,dropSpecialCharacters:Z,hiddenInput:ye,showMaskTyped:ae,placeHolderCharacter:Ge,shownMaskExpression:Ne,showTemplate:Nt,clearIfNotMatch:mt,validation:jt,separatorLimit:ht,allowNegativeNumbers:rt,leadZeroDateTime:Ht,triggerOnMaskChange:Dt}=j;if(V&&(V.currentValue!==V.previousValue&&!V.firstChange&&(this._maskService.maskChanged=!0),V.currentValue&&V.currentValue.split("||").length>1?(this._maskExpressionArray=V.currentValue.split("||").sort((St,nt)=>St.length-nt.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0]):(this._maskExpressionArray=[],this._maskValue=V.currentValue||"",this._maskService.maskExpression=this._maskValue)),Q){if(!Q.currentValue||!Array.isArray(Q.currentValue))return;this._maskService.maskSpecialCharacters=Q.currentValue||[]}de&&de.currentValue&&(this._maskService.maskAvailablePatterns=de.currentValue),Re&&(this._maskService.prefix=Re.currentValue),ke&&(this._maskService.suffix=ke.currentValue),Te&&(this._maskService.thousandSeparator=Te.currentValue),he&&(this._maskService.decimalMarker=he.currentValue),Z&&(this._maskService.dropSpecialCharacters=Z.currentValue),ye&&(this._maskService.hiddenInput=ye.currentValue),ae&&(this._maskService.showMaskTyped=ae.currentValue),Ge&&(this._maskService.placeHolderCharacter=Ge.currentValue),Ne&&(this._maskService.shownMaskExpression=Ne.currentValue),Nt&&(this._maskService.showTemplate=Nt.currentValue),mt&&(this._maskService.clearIfNotMatch=mt.currentValue),jt&&(this._maskService.validation=jt.currentValue),ht&&(this._maskService.separatorLimit=ht.currentValue),rt&&(this._maskService.allowNegativeNumbers=rt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(St=>"-"!==St))),Ht&&(this._maskService.leadZeroDateTime=Ht.currentValue),Dt&&(this._maskService.triggerOnMaskChange=Dt.currentValue),this._applyMask()}validate({value:j}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(j);if(this._maskService.cpfCnpjError)return this._createValidationError(j);if(this._maskValue.startsWith("separator")||oe.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Se.includes(this._maskValue))return this._validateTime(j);if(j&&j.toString().length>=1){let V=0;for(const Q in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[Q].optional&&(this._maskValue.indexOf(Q)!==this._maskValue.lastIndexOf(Q)?V+=this._maskValue.split("").filter(Re=>Re===Q).join("").length:-1!==this._maskValue.indexOf(Q)&&V++,-1!==this._maskValue.indexOf(Q)&&j.toString().length>=this._maskValue.indexOf(Q)||V===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&j.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&j.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&j.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(j);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const Q=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-V:this._maskValue.length-V;if(j.toString().length<Q)return this._createValidationError(j)}}return j&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(j){!j&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(j){const V=j.target;if(this._inputValue=V.value,this._setMask(),!this._maskValue)return void this.onChange(V.value);const Q=1===V.selectionStart?V.selectionStart+this._maskService.prefix.length:V.selectionStart;let de=0,Re=!1;if(this._maskService.applyValueChanges(Q,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(Te,he)=>{this._justPasted=!1,de=Te,Re=he}),this.document.activeElement!==V)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let ke=this._position?this._inputValue.length+Q+de:Q+("Backspace"!==this._code||Re?de:0);ke>this._getActualInputLength()&&(ke=this._getActualInputLength()),ke<0&&(ke=0),V.setSelectionRange(ke,ke),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(j){if(!this._maskValue)return;const V=j.target;null!==V&&null!==V.selectionStart&&V.selectionStart===V.selectionEnd&&V.selectionStart>this._maskService.prefix.length&&38!==j.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),V.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===V.value?(V.focus(),V.setSelectionRange(0,0)):V.selectionStart>this._maskService.actualValue.length&&V.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const Re=V.value&&V.value!==this._maskService.prefix?V.value:this._maskService.prefix+this._maskService.maskIsShown;V.value!==Re&&(V.value=Re),(V.selectionStart||V.selectionEnd)<=this._maskService.prefix.length?V.selectionStart=this._maskService.prefix.length:V.selectionEnd>this._getActualInputLength()&&(V.selectionEnd=this._getActualInputLength())}onKeyDown(j){var V;if(!this._maskValue)return;this._code=j.code?j.code:j.key;const Q=j.target;if(this._inputValue=Q.value,this._setMask(),38===j.keyCode&&j.preventDefault(),37===j.keyCode||8===j.keyCode||46===j.keyCode){if(8===j.keyCode&&0===Q.value.length&&(Q.selectionStart=Q.selectionEnd),8===j.keyCode&&0!==Q.selectionStart)if(this.specialCharacters=(null===(V=this.specialCharacters)||void 0===V?void 0:V.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&Q.selectionStart<=this.prefix.length)Q.setSelectionRange(this.prefix.length,Q.selectionEnd);else if(this._inputValue.length!==Q.selectionStart&&1!==Q.selectionStart)for(;this.specialCharacters.includes(this._inputValue[Q.selectionStart-1].toString())&&(this.prefix.length>=1&&Q.selectionStart>this.prefix.length||0===this.prefix.length);)Q.setSelectionRange(Q.selectionStart-1,Q.selectionEnd);this.checkSelectionOnDeletion(Q),this._maskService.prefix.length&&Q.selectionStart<=this._maskService.prefix.length&&Q.selectionEnd<=this._maskService.prefix.length&&j.preventDefault();const de=Q.selectionStart;8===j.keyCode&&!Q.readOnly&&0===de&&Q.selectionEnd===Q.value.length&&0!==Q.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<Q.selectionStart?Q.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===j.keyCode&&j.ctrlKey||65===j.keyCode&&j.metaKey)&&(Q.setSelectionRange(0,this._getActualInputLength()),j.preventDefault()),this._maskService.selStart=Q.selectionStart,this._maskService.selEnd=Q.selectionEnd}writeValue(j){return(0,K.mG)(this,void 0,void 0,function*(){"object"==typeof j&&null!==j&&"value"in j&&("disable"in j&&this.setDisabledState(Boolean(j.disable)),j=j.value),("number"==typeof j||this._maskValue.startsWith("separator"))&&(j=this._maskService.numberToString(j),Array.isArray(this.decimalMarker)||(j="."!==this.decimalMarker?j.replace(".",this.decimalMarker):j),this._maskService.isNumberValue=!0),"string"!=typeof j&&(j=""),this._inputValue=j,this._setMask(),j&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(j,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",j],this._inputValue=j})}registerOnChange(j){this.onChange=j,this._maskService.onChange=this.onChange}registerOnTouched(j){this.onTouch=j}checkSelectionOnDeletion(j){j.selectionStart=Math.min(Math.max(this.prefix.length,j.selectionStart),this._inputValue.length-this.suffix.length),j.selectionEnd=Math.min(Math.max(this.prefix.length,j.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(j){this._maskService.formElementProperty=["disabled",j]}_repeatPatternSymbols(j){return j.match(/{[0-9]+}/)&&j.split("").reduce((V,Q,de)=>{if(this._start="{"===Q?de:this._start,"}"!==Q)return this._maskService._findSpecialChar(Q)?V+Q:V;this._end=de;const Re=Number(j.slice(this._start+1,this._end));return V+new Array(Re+1).join(j[this._start-1])},"")||j}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(j){const V=this._maskValue.split("").filter(Q=>":"!==Q).length;return j&&(0==+j[j.length-1]&&j.length<V||j.length<=V-2)?this._createValidationError(j):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(j){return{mask:{requiredMask:this._maskValue,actualValue:j}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(j=>{var V,Q;const de=(null===(V=this._maskService.removeMask(this._inputValue))||void 0===V?void 0:V.length)<=(null===(Q=this._maskService.removeMask(j))||void 0===Q?void 0:Q.length);if(this._inputValue&&de)return this._maskValue=j,this.maskExpression=j,this._maskService.maskExpression=j,de;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return Fe.\u0275fac=function(j){return new(j||Fe)(p.Y36(ve.K0),p.Y36(Ce),p.Y36(fe))},Fe.\u0275dir=p.lG2({type:Fe,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(j,V){1&j&&p.NdJ("paste",function(){return V.onPaste()})("ngModelChange",function(de){return V.onModelChange(de)})("input",function(de){return V.onInput(de)})("blur",function(){return V.onBlur()})("click",function(de){return V.onClick(de)})("keydown",function(de){return V.onKeyDown(de)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[p._Bn([{provide:Y.JU,useExisting:(0,p.Gpc)(()=>Fe),multi:!0},{provide:Y.Cf,useExisting:(0,p.Gpc)(()=>Fe),multi:!0},Ce]),p.TTD]}),Fe})();function Xe(Fe,pt){return Object.assign(Object.assign({},Fe),pt instanceof Function?pt():pt)}let at=(()=>{class Fe{static forRoot(j){return{ngModule:Fe,providers:[{provide:Ie,useValue:j},{provide:Ae,useValue:Me},{provide:fe,useFactory:Xe,deps:[Ae,Ie]},se]}}static forChild(){return{ngModule:Fe}}}return Fe.\u0275fac=function(j){return new(j||Fe)},Fe.\u0275mod=p.oAB({type:Fe}),Fe.\u0275inj=p.cJS({}),Fe})();const Ue="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Ue.KeyboardEvent||(Ue.KeyboardEvent=function(Fe,pt){})},5861:(bt,$e,U)=>{function p(Y,ve,fe,Ie,Ae,Me,Se){try{var oe=Y[Me](Se),se=oe.value}catch(Ce){return void fe(Ce)}oe.done?ve(se):Promise.resolve(se).then(Ie,Ae)}function K(Y){return function(){var ve=this,fe=arguments;return new Promise(function(Ie,Ae){var Me=Y.apply(ve,fe);function Se(se){p(Me,Ie,Ae,Se,oe,"next",se)}function oe(se){p(Me,Ie,Ae,Se,oe,"throw",se)}Se(void 0)})}}U.d($e,{Z:()=>K})}},bt=>{bt(bt.s=276)}]);