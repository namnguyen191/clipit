var dD=Object.defineProperty,My=Object.getOwnPropertySymbols,$E=Object.prototype.hasOwnProperty,HE=Object.prototype.propertyIsEnumerable,jE=(pt,Se,T)=>Se in pt?dD(pt,Se,{enumerable:!0,configurable:!0,writable:!0,value:T}):pt[Se]=T,xy=(pt,Se)=>{for(var T in Se||(Se={}))$E.call(Se,T)&&jE(pt,T,Se[T]);if(My)for(var T of My(Se))HE.call(Se,T)&&jE(pt,T,Se[T]);return pt},GE=(pt,Se)=>{var T={};for(var p in pt)$E.call(pt,p)&&Se.indexOf(p)<0&&(T[p]=pt[p]);if(null!=pt&&My)for(var p of My(pt))Se.indexOf(p)<0&&HE.call(pt,p)&&(T[p]=pt[p]);return T};(self.webpackChunkclipit=self.webpackChunkclipit||[]).push([[179],{440:(pt,Se,T)=>{"use strict";T.d(Se,{nm:()=>Sr});var p=T(5813);T(5e3),T(5867);var F=T(5861),te=T(9681),pe=T(4859),Ue=T(2090),Le=T(1877);const Re=new Map,ve={activated:!1,tokenObservers:[]},X={initialized:!1,enabled:!1};function Pe(Fe){return Re.get(Fe)||ve}function ce(Fe,Ne){Re.set(Fe,Ne)}function et(){return X}class Pt{constructor(Ne,Je,mt,Ot,Qt){if(this.operation=Ne,this.retryPolicy=Je,this.getWaitDuration=mt,this.lowerBound=Ot,this.upperBound=Qt,this.pending=null,this.nextErrorWaitInterval=Ot,Ot>Qt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ne){var Je=this;return(0,F.Z)(function*(){Je.stop();try{Je.pending=new Ue.BH,yield function bt(Fe){return new Promise(Ne=>{setTimeout(Ne,Fe)})}(Je.getNextRun(Ne)),Je.pending.resolve(),yield Je.pending.promise,Je.pending=new Ue.BH,yield Je.operation(),Je.pending.resolve(),yield Je.pending.promise,Je.process(!0).catch(()=>{})}catch(mt){Je.retryPolicy(mt)?Je.process(!1).catch(()=>{}):Je.stop()}})()}getNextRun(Ne){if(Ne)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Je=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Je}}}const dt=new Ue.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fn(Fe){if(!Pe(Fe).activated)throw dt.create("use-before-activation",{appName:Fe.name})}function tr(Fe,Ne){return On.apply(this,arguments)}function On(){return(On=(0,F.Z)(function*({url:Fe,body:Ne},Je){const mt={"Content-Type":"application/json"},Ot=Je.getImmediate({optional:!0});if(Ot){const Oi=yield Ot.getHeartbeatsHeader();Oi&&(mt["X-Firebase-Client"]=Oi)}const Qt={method:"POST",body:JSON.stringify(Ne),headers:mt};let jn,Pr;try{jn=yield fetch(Fe,Qt)}catch(Oi){throw dt.create("fetch-network-error",{originalErrorMessage:Oi.message})}if(200!==jn.status)throw dt.create("fetch-status-error",{httpStatus:jn.status});try{Pr=yield jn.json()}catch(Oi){throw dt.create("fetch-parse-error",{originalErrorMessage:Oi.message})}const kn=Pr.ttl.match(/^([\d.]+)(s)$/);if(!kn||!kn[2]||isNaN(Number(kn[1])))throw dt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Pr.ttl}`});const Ri=1e3*Number(kn[1]),Ii=Date.now();return{token:Pr.attestationToken,expireTimeMillis:Ii+Ri,issuedAtTimeMillis:Ii}})).apply(this,arguments)}function ir(Fe,Ne){const{projectId:Je,appId:mt,apiKey:Ot}=Fe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Je}/apps/${mt}:exchangeDebugToken?key=${Ot}`,body:{debug_token:Ne}}}const ln="firebase-app-check-store";let jt=null;function xr(){return jt||(jt=new Promise((Fe,Ne)=>{try{const Je=indexedDB.open("firebase-app-check-database",1);Je.onsuccess=mt=>{Fe(mt.target.result)},Je.onerror=mt=>{var Ot;Ne(dt.create("storage-open",{originalErrorMessage:null===(Ot=mt.target.error)||void 0===Ot?void 0:Ot.message}))},Je.onupgradeneeded=mt=>{0===mt.oldVersion&&mt.target.result.createObjectStore(ln,{keyPath:"compositeKey"})}}catch(Je){Ne(dt.create("storage-open",{originalErrorMessage:Je.message}))}}),jt)}function bn(){return(bn=(0,F.Z)(function*(Fe,Ne){const mt=(yield xr()).transaction(ln,"readwrite"),Qt=mt.objectStore(ln).put({compositeKey:Fe,value:Ne});return new Promise((jn,Pr)=>{Qt.onsuccess=kn=>{jn()},mt.onerror=kn=>{var Ri;Pr(dt.create("storage-set",{originalErrorMessage:null===(Ri=kn.target.error)||void 0===Ri?void 0:Ri.message}))}})})).apply(this,arguments)}const vr=new Le.Yd("@firebase/app-check");function Ln(Fe,Ne){return(0,Ue.hl)()?function Yn(Fe,Ne){return function Gr(Fe,Ne){return bn.apply(this,arguments)}(function nr(Fe){return`${Fe.options.appId}-${Fe.name}`}(Fe),Ne)}(Fe,Ne).catch(Je=>{vr.warn(`Failed to write token to IndexedDB. Error: ${Je}`)}):Promise.resolve()}function sr(){return et().enabled}function Ze(){return gt.apply(this,arguments)}function gt(){return(gt=(0,F.Z)(function*(){const Fe=et();if(Fe.enabled&&Fe.token)return Fe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const At={error:"UNKNOWN_ERROR"};function $t(Fe){return Ue.US.encodeString(JSON.stringify(Fe),!1)}function pn(Fe){return qt.apply(this,arguments)}function qt(){return(qt=(0,F.Z)(function*(Fe,Ne=!1){const Je=Fe.app;fn(Je);const mt=Pe(Je);let Qt,Ot=mt.token;if(!Ot){const kn=yield mt.cachedTokenPromise;kn&&Nt(kn)&&(Ot=kn)}if(!Ne&&Ot&&Nt(Ot))return{token:Ot.token};let Pr,jn=!1;if(sr()){mt.exchangeTokenPromise||(mt.exchangeTokenPromise=tr(ir(Je,yield Ze()),Fe.heartbeatServiceProvider).then(Ri=>(mt.exchangeTokenPromise=void 0,Ri)),jn=!0);const kn=yield mt.exchangeTokenPromise;return yield Ln(Je,kn),ce(Je,Object.assign(Object.assign({},mt),{token:kn})),{token:kn.token}}try{mt.exchangeTokenPromise||(mt.exchangeTokenPromise=mt.provider.getToken().then(kn=>(mt.exchangeTokenPromise=void 0,kn)),jn=!0),Ot=yield mt.exchangeTokenPromise}catch(kn){"appCheck/throttled"===kn.code?vr.warn(kn.message):vr.error(kn),Qt=kn}return Ot?(Pr={token:Ot.token},ce(Je,Object.assign(Object.assign({},mt),{token:Ot})),yield Ln(Je,Ot)):Pr=xe(Qt),jn&&ze(Je,Pr),Pr})).apply(this,arguments)}function ne(Fe,Ne){const Je=Pe(Fe),mt=Je.tokenObservers.filter(Ot=>Ot.next!==Ne);0===mt.length&&Je.tokenRefresher&&Je.tokenRefresher.isRunning()&&Je.tokenRefresher.stop(),ce(Fe,Object.assign(Object.assign({},Je),{tokenObservers:mt}))}function Ae(Fe){const{app:Ne}=Fe,Je=Pe(Ne);let mt=Je.tokenRefresher;mt||(mt=function nt(Fe){const{app:Ne}=Fe;return new Pt((0,F.Z)(function*(){let mt;if(mt=Pe(Ne).token?yield pn(Fe,!0):yield pn(Fe),mt.error)throw mt.error}),()=>!0,()=>{const Je=Pe(Ne);if(Je.token){let mt=Je.token.issuedAtTimeMillis+.5*(Je.token.expireTimeMillis-Je.token.issuedAtTimeMillis)+3e5;return mt=Math.min(mt,Je.token.expireTimeMillis-3e5),Math.max(0,mt-Date.now())}return 0},3e4,96e4)}(Fe),ce(Ne,Object.assign(Object.assign({},Je),{tokenRefresher:mt}))),!mt.isRunning()&&Je.isTokenAutoRefreshEnabled&&mt.start()}function ze(Fe,Ne){const Je=Pe(Fe).tokenObservers;for(const mt of Je)try{"EXTERNAL"===mt.type&&null!=Ne.error?mt.error(Ne.error):mt.next(Ne)}catch(Ot){}}function Nt(Fe){return Fe.expireTimeMillis-Date.now()>0}function xe(Fe){return{token:$t(At),error:Fe}}class we{constructor(Ne,Je){this.app=Ne,this.heartbeatServiceProvider=Je}_delete(){const{tokenObservers:Ne}=Pe(this.app);for(const Je of Ne)ne(this.app,Je.next);return Promise.resolve()}}const Ar="app-check-internal";!function Pn(){(0,te._registerComponent)(new pe.wA("app-check",Fe=>function ae(Fe,Ne){return new we(Fe,Ne)}(Fe.getProvider("app").getImmediate(),Fe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Fe,Ne,Je)=>{Fe.getProvider(Ar).initialize()})),(0,te._registerComponent)(new pe.wA(Ar,Fe=>function ke(Fe){return{getToken:Ne=>pn(Fe,Ne),addTokenListener:Ne=>function fe(Fe,Ne,Je,mt){const{app:Ot}=Fe,Qt=Pe(Ot),jn={next:Je,error:mt,type:Ne};if(ce(Ot,Object.assign(Object.assign({},Qt),{tokenObservers:[...Qt.tokenObservers,jn]})),Qt.token&&Nt(Qt.token)){const Pr=Qt.token;Promise.resolve().then(()=>{Je({token:Pr.token}),Ae(Fe)}).catch(()=>{})}Qt.cachedTokenPromise.then(()=>Ae(Fe))}(Fe,"INTERNAL",Ne),removeTokenListener:Ne=>ne(Fe.app,Ne)}}(Fe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,te.registerVersion)("@firebase/app-check","0.5.6")}();class Sr{constructor(){return(0,p.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(pt,Se,T)=>{"use strict";T.d(Se,{zQ:()=>he,ww:()=>Ge,rT:()=>X,f7:()=>ce,L6:()=>Re,_Q:()=>ve,lh:()=>Pe,Qv:()=>Le,nw:()=>et});var p=T(5e3),N=T(7579),G=T(9646),de=T(9751),ie=T(8996),me=T(6451),Ee=T(6063);class ue extends N.x{constructor(ht=1/0,Qe=1/0,vt=Ee.l){super(),this._bufferSize=ht,this._windowTime=Qe,this._timestampProvider=vt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Qe===1/0,this._bufferSize=Math.max(1,ht),this._windowTime=Math.max(1,Qe)}next(ht){const{isStopped:Qe,_buffer:vt,_infiniteTimeWindow:Pt,_timestampProvider:bt,_windowTime:Tt}=this;Qe||(vt.push(ht),!Pt&&vt.push(bt.now()+Tt)),this._trimBuffer(),super.next(ht)}_subscribe(ht){this._throwIfClosed(),this._trimBuffer();const Qe=this._innerSubscribe(ht),{_infiniteTimeWindow:vt,_buffer:Pt}=this,bt=Pt.slice();for(let Tt=0;Tt<bt.length&&!ht.closed;Tt+=vt?1:2)ht.next(bt[Tt]);return this._checkFinalizedStatuses(ht),Qe}_trimBuffer(){const{_bufferSize:ht,_timestampProvider:Qe,_buffer:vt,_infiniteTimeWindow:Pt}=this,bt=(Pt?1:2)*ht;if(ht<1/0&&bt<vt.length&&vt.splice(0,vt.length-bt),!Pt){const Tt=Qe.now();let dt=0;for(let hn=1;hn<vt.length&&vt[hn]<=Tt;hn+=2)dt=hn;dt&&vt.splice(0,dt+1)}}}var Ie=T(3099);function le(qe,ht,Qe){let vt,Pt=!1;return qe&&"object"==typeof qe?({bufferSize:vt=1/0,windowTime:ht=1/0,refCount:Pt=!1,scheduler:Qe}=qe):vt=null!=qe?qe:1/0,(0,Ie.B)({connector:()=>new ue(vt,ht,Qe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Pt})}var re=T(3900),_e=T(576);function $e(qe,ht){return(0,_e.m)(ht)?(0,re.w)(()=>qe,ht):(0,re.w)(()=>qe)}var We=T(5363),Ke=T(4004),Et=T(590),Ve=T(9468),Te=T(9300),ct=T(5813),H=T(2011),F=T(9808),te=T(440),pe=T(127);const Le=new p.OlP("angularfire2.auth.use-emulator"),Re=new p.OlP("angularfire2.auth.settings"),ve=new p.OlP("angularfire2.auth.tenant-id"),X=new p.OlP("angularfire2.auth.langugage-code"),Pe=new p.OlP("angularfire2.auth.use-device-language"),ce=new p.OlP("angularfire.auth.persistence"),et=(qe,ht,Qe,vt,Pt,bt,Tt,dt)=>(0,H.cc)(`${qe.name}.auth`,"AngularFireAuth",qe.name,()=>{const hn=ht.runOutsideAngular(()=>qe.auth());if(Qe&&hn.useEmulator(...Qe),vt&&(hn.tenantId=vt),hn.languageCode=Pt,bt&&hn.useDeviceLanguage(),Tt)for(const[fn,on]of Object.entries(Tt))hn.settings[fn]=on;return dt&&hn.setPersistence(dt),hn},[Qe,vt,Pt,bt,Tt,dt]);let he=(()=>{class qe{constructor(Qe,vt,Pt,bt,Tt,dt,hn,fn,on,zn,Gn,tr){const On=new N.x,En=(0,G.of)(void 0).pipe((0,We.Q)(Tt.outsideAngular),(0,re.w)(()=>bt.runOutsideAngular(()=>Promise.resolve().then(T.bind(T,820)))),(0,Ke.U)(()=>(0,H.on)(Qe,bt,vt)),(0,Ke.U)(Un=>et(Un,bt,dt,fn,on,zn,hn,Gn)),le({bufferSize:1,refCount:!1}));if((0,F.PM)(Pt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{En.pipe((0,Et.P)()).subscribe();const ir=En.pipe((0,re.w)(ln=>ln.getRedirectResult().then(Tn=>Tn,()=>null)),ct.iC,le({bufferSize:1,refCount:!1})),Zn=En.pipe((0,re.w)(ln=>new de.y(Tn=>({unsubscribe:bt.runOutsideAngular(()=>ln.onAuthStateChanged(jt=>Tn.next(jt),jt=>Tn.error(jt),()=>Tn.complete()))})))),Gt=En.pipe((0,re.w)(ln=>new de.y(Tn=>({unsubscribe:bt.runOutsideAngular(()=>ln.onIdTokenChanged(jt=>Tn.next(jt),jt=>Tn.error(jt),()=>Tn.complete()))}))));this.authState=ir.pipe($e(Zn),(0,Ve.R)(Tt.outsideAngular),(0,We.Q)(Tt.insideAngular)),this.user=ir.pipe($e(Gt),(0,Ve.R)(Tt.outsideAngular),(0,We.Q)(Tt.insideAngular)),this.idToken=this.user.pipe((0,re.w)(ln=>ln?(0,ie.D)(ln.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,re.w)(ln=>ln?(0,ie.D)(ln.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,me.T)(ir,On,this.authState.pipe((0,Te.h)(ln=>!ln))).pipe((0,Ke.U)(ln=>(null==ln?void 0:ln.user)?ln:null),(0,Ve.R)(Tt.outsideAngular),(0,We.Q)(Tt.insideAngular))}return(0,H.pX)(this,En,bt,{spy:{apply:(Un,ir,Zn)=>{(Un.startsWith("signIn")||Un.startsWith("createUser"))&&Zn.then(Gt=>On.next(Gt))}}})}}return qe.\u0275fac=function(Qe){return new(Qe||qe)(p.LFG(H.Dh),p.LFG(H.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ct.HU),p.LFG(Le,8),p.LFG(Re,8),p.LFG(ve,8),p.LFG(X,8),p.LFG(Pe,8),p.LFG(ce,8),p.LFG(te.nm,8))},qe.\u0275prov=p.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"any"}),qe})(),Ge=(()=>{class qe{constructor(){pe.Z.registerVersion("angularfire",ct.q4.full,"auth-compat")}}return qe.\u0275fac=function(Qe){return new(Qe||qe)},qe.\u0275mod=p.oAB({type:qe}),qe.\u0275inj=p.cJS({providers:[he]}),qe})()},7566:(pt,Se,T)=>{"use strict";T.d(Se,{ST:()=>Zc,yb:()=>Y_});var p=T(5e3),N=T(4986),G=T(9751),de=T(8996),ie=T(9646),me=T(5813),Ee=T(4482),ue=T(5403);function Ie(){return(0,Ee.e)((i,e)=>{let t,o=!1;i.subscribe((0,ue.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var le=T(4671);function _e(i,e){return i===e}var X,$e=T(8675),We=T(4004),Ke=T(5026),Et=T(9300),Ve=T(2011),Te=T(9808),H=(T(820),T(3942)),F=T(5861),te=T(9681),pe=T(4859),Ue=T(1877),Le=T(2090),Re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ve={},Pe=Pe||{},ce=Re||self;function et(){}function he(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ge(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var ht="closure_uid_"+(1e9*Math.random()>>>0),Qe=0;function vt(i,e,t){return i.call.apply(i.bind,arguments)}function Pt(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function bt(i,e,t){return(bt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vt:Pt).apply(null,arguments)}function Tt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function dt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var m=Array(arguments.length-2),D=2;D<arguments.length;D++)m[D-2]=arguments[D];return e.prototype[u].apply(o,m)}}function hn(){this.s=this.s,this.o=this.o}var on={};hn.prototype.s=!1,hn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function qe(i){return Object.prototype.hasOwnProperty.call(i,ht)&&i[ht]||(i[ht]=++Qe)}(this);delete on[i]}},hn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Gn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function On(i){return Array.prototype.concat.apply([],arguments)}function En(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Un(i){return/^[\s\xa0]*$/.test(i)}var ln,ir=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Zn(i,e){return-1!=i.indexOf(e)}function Gt(i,e){return i<e?-1:i>e?1:0}e:{var Tn=ce.navigator;if(Tn){var jt=Tn.userAgent;if(jt){ln=jt;break e}}ln=""}function xr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function Rr(i){const e={};for(const t in i)e[t]=i[t];return e}var Yn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _r(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<Yn.length;d++)t=Yn[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function ti(i){return ti[" "](i),i}ti[" "]=et;var Ln,i,bn=Zn(ln,"Opera"),Vt=Zn(ln,"Trident")||Zn(ln,"MSIE"),Kt=Zn(ln,"Edge"),nr=Kt||Vt,vr=Zn(ln,"Gecko")&&!(Zn(ln.toLowerCase(),"webkit")&&!Zn(ln,"Edge"))&&!(Zn(ln,"Trident")||Zn(ln,"MSIE"))&&!Zn(ln,"Edge"),An=Zn(ln.toLowerCase(),"webkit")&&!Zn(ln,"Edge");function Qn(){var i=ce.document;return i?i.documentMode:void 0}e:{var ur="",Zt=(i=ln,vr?/rv:([^\);]+)(\)|;)/.exec(i):Kt?/Edge\/([\d\.]+)/.exec(i):Vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):An?/WebKit\/(\S+)/.exec(i):bn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Zt&&(ur=Zt?Zt[1]:""),Vt){var sr=Qn();if(null!=sr&&sr>parseFloat(ur)){Ln=String(sr);break e}}Ln=ur}var Ze={};var $t=ce.document&&Vt&&(Qn()||parseInt(Ln,10))||void 0,pn=function(){if(!ce.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ce.addEventListener("test",et,e),ce.removeEventListener("test",et,e)}catch(t){}return i}();function qt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function fe(i,e){if(qt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(vr){e:{try{ti(e.nodeName);var u=!0;break e}catch(d){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ne[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&fe.Z.h.call(this)}}qt.prototype.h=function(){this.defaultPrevented=!0},dt(fe,qt);var ne={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),nt=0;function ze(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++nt,this.ca=this.fa=!1}function Nt(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function xe(i){this.src=i,this.g={},this.h=0}function we(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=zn(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(Nt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function ae(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}xe.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var m=ae(i,e,o,u);return-1<m?(e=i[m],t||(e.fa=!1)):((e=new ze(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var ke="closure_lm_"+(1e6*Math.random()|0),at={};function kt(i,e,t,o,u){if(o&&o.once)return Rn(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)kt(i,e[d],t,o,u);return null}return t=Mt(t),i&&i[Ae]?i.N(e,t,Ge(o)?!!o.capture:!!o,u):Jt(i,e,t,!1,o,u)}function Jt(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var m=Ge(u)?!!u.capture:!!u,D=Qr(i);if(D||(i[ke]=D=new xe(i)),(t=D.add(e,t,o,m,d)).proxy)return t;if(o=function vn(){var e=fr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)pn||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(zr(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Rn(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Rn(i,e[d],t,o,u);return null}return t=Mt(t),i&&i[Ae]?i.O(e,t,Ge(o)?!!o.capture:!!o,u):Jt(i,e,t,!0,o,u)}function $r(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)$r(i,e[d],t,o,u);else o=Ge(o)?!!o.capture:!!o,t=Mt(t),i&&i[Ae]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=ae(d=i.g[e],t,o,u))&&(Nt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=Qr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ae(e,t,o,u)),(t=-1<i?e[i]:null)&&Wr(t))}function Wr(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Ae])we(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(zr(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Qr(e))?(we(t,i),0==t.h&&(t.src=null,e[ke]=null)):Nt(i)}}}function zr(i){return i in at?at[i]:at[i]="on"+i}function fr(i,e){if(i.ca)i=!0;else{e=new fe(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Wr(i),i=t.call(o,e)}return i}function Qr(i){return(i=i[ke])instanceof xe?i:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(i){return"function"==typeof i?i:(i[Kr]||(i[Kr]=function(e){return i.handleEvent(e)}),i[Kr])}function nn(){hn.call(this),this.i=new xe(this),this.P=this,this.I=null}function yn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new qt(e,i);else if(e instanceof qt)e.target=e.target||i;else{var u=e;_r(e=new qt(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];u=wr(m,o,!0,e)&&u}if(u=wr(m=e.g=i,o,!0,e)&&u,u=wr(m,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=wr(m=e.g=t[d],o,!1,e)&&u}function wr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.ca&&m.capture==t){var D=m.listener,j=m.ia||m.src;m.fa&&we(i.i,m),u=!1!==D.call(j,o)&&u}}return u&&!o.defaultPrevented}dt(nn,hn),nn.prototype[Ae]=!0,nn.prototype.removeEventListener=function(i,e,t,o){$r(this,i,e,t,o)},nn.prototype.M=function(){if(nn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Nt(t[o]);delete i.g[e],i.h--}}this.I=null},nn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},nn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var hi=ce.JSON.stringify;function Tr(){var i=Ar;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ri,Bn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new or,i=>i.reset());class or{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Or(i){ce.setTimeout(()=>{throw i},0)}function mn(i,e){ri||function Fi(){var i=ce.Promise.resolve(void 0);ri=function(){i.then(Pn)}}(),ns||(ri(),ns=!0),Ar.add(i,e)}var ns=!1,Ar=new class ni{constructor(){this.h=this.g=null}add(e,t){const o=Bn.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Pn(){for(var i;i=Tr();){try{i.h.call(i.g)}catch(t){Or(t)}var e=Bn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}ns=!1}function qr(i,e){nn.call(this),this.h=i||1,this.g=e||ce,this.j=bt(this.kb,this),this.l=Date.now()}function Xr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Sr(i,e,t){if("function"==typeof i)t&&(i=bt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=bt(i.handleEvent,i)}return 2147483647<Number(e)?-1:ce.setTimeout(i,e||0)}function Kn(i){i.g=Sr(()=>{i.g=null,i.i&&(i.i=!1,Kn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}dt(qr,nn),(X=qr.prototype).da=!1,X.S=null,X.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),yn(this,"tick"),this.da&&(Xr(this),this.start()))}},X.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},X.M=function(){qr.Z.M.call(this),Xr(this),delete this.g};class os extends hn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Kn(this)}M(){super.M(),this.g&&(ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(i){hn.call(this),this.h=i,this.g={}}dt(Li,hn);var lr=[];function _i(i,e,t,o){Array.isArray(t)||(t&&(lr[0]=t.toString()),t=lr);for(var u=0;u<t.length;u++){var d=kt(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function zi(i){xr(i.g,function(e,t){this.g.hasOwnProperty(t)&&Wr(e)},i),i.g={}}function fi(){this.g=!0}function Zr(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function bs(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<u.length;m++)u[m]=""}}}return hi(t)}catch(D){return e}}(i,t)+(o?" "+o:"")})}Li.prototype.M=function(){Li.Z.M.call(this),zi(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fi.prototype.Aa=function(){this.g=!1},fi.prototype.info=function(){};var rr={},Ss=null;function Ms(){return Ss=Ss||new nn}function Fe(i){qt.call(this,rr.Ma,i)}function Ne(i){const e=Ms();yn(e,new Fe(e,i))}function Je(i,e){qt.call(this,rr.STAT_EVENT,i),this.stat=e}function mt(i){const e=Ms();yn(e,new Je(e,i))}function Ot(i,e){qt.call(this,rr.Na,i),this.size=e}function Qt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ce.setTimeout(function(){i()},e)}rr.Ma="serverreachability",dt(Fe,qt),rr.STAT_EVENT="statevent",dt(Je,qt),rr.Na="timingevent",dt(Ot,qt);var jn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Pr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function kn(){}function Ii(){}kn.prototype.h=null;var xs,Oi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ys(){qt.call(this,"d")}function Vi(){qt.call(this,"c")}function ii(){}function Di(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Li(this),this.P=as,this.W=new qr(i=nr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Er}function Er(){this.i=null,this.g="",this.h=!1}dt(ys,qt),dt(Vi,qt),dt(ii,kn),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},xs=new ii;var as=45e3,us={},ls={};function to(i,e,t){i.K=1,i.v=Lt(W(e)),i.s=t,i.U=!0,Bs(i,null)}function Bs(i,e){i.F=Date.now(),qi(i),i.A=W(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),V(t.h,"t",o),i.C=0,t=i.l.H,i.h=new Er,i.g=Ga(i.l,t?e:null,!i.s),0<i.O&&(i.L=new os(bt(i.Ia,i,i.g),i.O)),_i(i.V,i.g,"readystatechange",i.gb),e=i.H?Rr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Ne(1),function Ds(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var m="",D=d.split("&"),j=0;j<D.length;j++){var K=D[j].split("=");if(1<K.length){var ge=K[0];K=K[1];var Oe=ge.split("_");m=2<=Oe.length&&"type"==Oe[1]?m+(ge+"=")+K+"&":m+(ge+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.X,i.s)}function bi(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Ki(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Jr(i,t),u==ls){4==e&&(i.o=4,mt(14),o=!1),Zr(i.j,i.m,null,"[Incomplete Response]");break}if(u==us){i.o=4,mt(15),Zr(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Zr(i.j,i.m,u,null),Rs(i,u)}bi(i)&&u!=ls&&u!=us&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,mt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),na(e),e.L=!0,mt(11))):(Zr(i.j,i.m,t,"[Invalid Chunked Response]"),cs(i),kr(i))}function Jr(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?ls:(t=Number(e.substring(t,o)),isNaN(t)?us:(o+=1)+t>e.length?ls:(e=e.substr(o,t),i.C=o+t,e))}function qi(i){i.Y=Date.now()+i.P,Cs(i,i.P)}function Cs(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Qt(bt(i.eb,i),e)}function Ir(i){i.B&&(ce.clearTimeout(i.B),i.B=null)}function kr(i){0==i.l.G||i.I||io(i.l,i)}function cs(i){Ir(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Xr(i.W),zi(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Rs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Wt(t.i,i)))if(t.I=i.N,!i.J&&Wt(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(K){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=Qt(bt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;vs(t),So(t)}ui(t),mt(18)}if(1>=rn(t.i)&&t.ka){try{t.ka()}catch(K){}t.ka=void 0}}else Ts(t,11)}else if((i.J||t.g==i)&&vs(t),!Un(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let K=u[e];if(t.U=K[0],K=K[1],2==t.G)if("c"==K[0]){t.J=K[1],t.la=K[2];const ge=K[3];null!=ge&&(t.ma=ge,t.h.info("VER="+t.ma));const Oe=K[4];null!=Oe&&(t.za=Oe,t.h.info("SVER="+t.za));const st=K[5];null!=st&&"number"==typeof st&&0<st&&(t.K=o=1.5*st,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const St=i.g;if(St){const xt=St.g?St.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xt){var d=o.i;!d.g&&(Zn(xt,"spdy")||Zn(xt,"quic")||Zn(xt,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(_n(d,d.h),d.h=null))}if(o.D){const an=St.g?St.g.getResponseHeader("X-HTTP-Session-Id"):null;an&&(o.sa=an,ot(o.F,o.D,an))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var m=i;if((o=t).oa=Hs(o,o.H?o.la:null,o.W),m.J){qn(o.i,m);var D=m,j=o.K;j&&D.setTimeout(j),D.B&&(Ir(D),qi(D)),o.g=m}else Ns(o);0<t.l.length&&Ti(t)}else"stop"!=K[0]&&"close"!=K[0]||Ts(t,7);else 3==t.G&&("stop"==K[0]||"close"==K[0]?"stop"==K[0]?Ts(t,7):ai(t):"noop"!=K[0]&&t.j&&t.j.wa(K),t.A=0)}Ne(4)}catch(K){}}function si(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(he(i)||"string"==typeof i)Gn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(he(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function Os(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(he(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function rs(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof rs)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function gi(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];mi(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)mi(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function mi(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(X=Di.prototype).setTimeout=function(i){this.P=i},X.gb=function(i){i=i.target;const e=this.L;e&&3==ks(i)?e.l():this.Ia(i)},X.Ia=function(i){try{if(i==this.g)e:{const ge=ks(this.g);var e=this.g.Da();const Oe=this.g.ba();if(!(3>ge)&&(3!=ge||nr||this.g&&(this.h.h||this.g.ga()||ro(this.g)))){this.I||4!=ge||7==e||Ne(8==e||0>=Oe?3:2),Ir(this);var t=this.g.ba();this.N=t;t:if(bi(this)){var o=ro(this.g);i="";var u=o.length,d=4==ks(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){cs(this),kr(this);var m="";break t}this.h.i=new ce.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.ga();if(this.i=200==t,function pi(i,e,t,o,u,d,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.X,ge,t),this.i){if(this.$&&!this.J){t:{if(this.g){var D,j=this.g;if((D=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Un(D)){var K=D;break t}}K=null}if(!(t=K)){this.i=!1,this.o=3,mt(12),cs(this),kr(this);break e}Zr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rs(this,t)}this.U?(Ki(this,ge,m),nr&&this.i&&3==ge&&(_i(this.V,this.W,"tick",this.fb),this.W.start())):(Zr(this.j,this.m,m,null),Rs(this,m)),4==ge&&cs(this),this.i&&!this.I&&(4==ge?io(this.l,this):(this.i=!1,qi(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,mt(12)):(this.o=0,mt(13)),cs(this),kr(this)}}}catch(ge){}},X.fb=function(){if(this.g){var i=ks(this.g),e=this.g.ga();this.C<e.length&&(Ir(this),Ki(this,i,e),this.i&&4!=i&&qi(this))}},X.cancel=function(){this.I=!0,cs(this)},X.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function ms(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ne(3),mt(17)),cs(this),this.o=2,kr(this)):Cs(this,this.Y-i)},(X=rs.prototype).R=function(){gi(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},X.T=function(){return gi(this),this.g.concat()},X.get=function(i,e){return mi(this.h,i)?this.h[i]:e},X.set=function(i,e){mi(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},X.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var Zi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function R(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof R){this.g=void 0!==e?e:i.g,x(this,i.j),this.s=i.s,Y(this,i.i),be(this,i.m),this.l=i.l,e=i.h;var t=new Z;t.i=e.i,e.g&&(t.g=new rs(e.g),t.h=e.h),it(this,t),this.o=i.o}else i&&(t=String(i).match(Zi))?(this.g=!!e,x(this,t[1]||"",!0),this.s=wn(t[2]||""),Y(this,t[3]||"",!0),be(this,t[4]),this.l=wn(t[5]||"",!0),it(this,t[6]||"",!0),this.o=wn(t[7]||"")):(this.g=!!e,this.h=new Z(null,this.g))}function W(i){return new R(i)}function x(i,e,t){i.j=t?wn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Y(i,e,t){i.i=t?wn(e,!0):e}function be(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function it(i,e,t){e instanceof Z?(i.h=e,function ee(i,e){e&&!i.j&&(ut(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(en(this,o),V(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Sn(e,S)),i.h=new Z(e,i.g))}function ot(i,e,t){i.h.set(e,t)}function Lt(i){return ot(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function wn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Sn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Nr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Nr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}R.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Sn(e,ar,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Sn(e,ar,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Sn(t,"/"==t.charAt(0)?k:gr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Sn(t,b)),i.join("")};var ar=/[#\/\?@]/g,gr=/[#\?:]/g,k=/[#\?]/g,S=/[#\?@]/g,b=/#/g;function Z(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ut(i){i.g||(i.g=new rs,i.h=0,i.i&&function cr(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function en(i,e){ut(i),e=O(i,e),mi(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,mi((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&gi(i)))}function mr(i,e){return ut(i),e=O(i,e),mi(i.g.h,e)}function V(i,e,t){en(i,e),0<t.length&&(i.i=null,i.g.set(O(i,e),En(t)),i.h+=t.length)}function O(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function De(i){this.l=i||rt,i=ce.PerformanceNavigationTiming?0<(i=ce.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ce.g&&ce.g.Ea&&ce.g.Ea()&&ce.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(X=Z.prototype).add=function(i,e){ut(this),this.i=null,i=O(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},X.forEach=function(i,e){ut(this),this.g.forEach(function(t,o){Gn(t,function(u){i.call(e,u,o,this)},this)},this)},X.T=function(){ut(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},X.R=function(i){ut(this);var e=[];if("string"==typeof i)mr(this,i)&&(e=On(e,this.g.get(O(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=On(e,i[t])}return e},X.set=function(i,e){return ut(this),this.i=null,mr(this,i=O(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},X.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},X.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var m=u;""!==o[d]&&(m+="="+encodeURIComponent(String(o[d]))),i.push(m)}}return this.i=i.join("&")};var rt=10;function wt(i){return!!i.h||!!i.g&&i.g.size>=i.j}function rn(i){return i.h?1:i.g?i.g.size:0}function Wt(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function _n(i,e){i.g?i.g.add(e):i.h=e}function qn(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Vr(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return En(i.i)}function Mr(){}function oi(){this.g=new Mr}function Hr(i,e,t){const o=t||"";try{si(i,function(u,d){let m=u;Ge(u)&&(m=hi(u)),e.push(o+d+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Wn(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(d){}}function Ur(i){this.l=i.$b||null,this.j=i.ib||!1}function Ui(i,e){nn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Fr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}De.prototype.cancel=function(){if(this.i=Vr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Mr.prototype.stringify=function(i){return ce.JSON.stringify(i,void 0)},Mr.prototype.parse=function(i){return ce.JSON.parse(i,void 0)},dt(Ur,kn),Ur.prototype.g=function(){return new Ui(this.l,this.j)},Ur.prototype.i=function(i){return function(){return i}}({}),dt(Ui,nn);var Fr=0;function yr(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function _s(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Yi(i)}function Yi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(X=Ui.prototype).open=function(i,e){if(this.readyState!=Fr)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Yi(this)},X.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ce).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},X.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_s(this)),this.readyState=Fr},X.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ce.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yr(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},X.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?_s(this):Yi(this),3==this.readyState&&yr(this)}},X.Ua=function(i){this.g&&(this.response=this.responseText=i,_s(this))},X.Ta=function(i){this.g&&(this.response=i,_s(this))},X.ha=function(){this.g&&_s(this)},X.setRequestHeader=function(i,e){this.v.append(i,e)},X.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},X.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var no=ce.JSON.parse;function Dr(i){nn.call(this),this.headers=new rs,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ps,this.K=this.L=!1}dt(Dr,nn);var Ps="",Xo=/^https?$/i,Ea=["POST","PUT"];function $a(i){return"content-type"==i.toLowerCase()}function Bo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,fo(i),js(i)}function fo(i){i.D||(i.D=!0,yn(i,"complete"),yn(i,"error"))}function Jo(i){if(i.h&&void 0!==Pe&&(!i.C[1]||4!=ks(i)||2!=i.ba()))if(i.v&&4==ks(i))Sr(i.Fa,0,i);else if(yn(i,"readystatechange"),4==ks(i)){i.h=!1;try{const D=i.ba();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(Zi)[1]||null;if(!u&&ce.self&&ce.self.location){var d=ce.self.location.protocol;u=d.substr(0,d.length-1)}o=!Xo.test(u?u.toLowerCase():"")}t=o}if(t)yn(i,"complete"),yn(i,"success");else{i.m=6;try{var m=2<ks(i)?i.g.statusText:""}catch(j){m=""}i.j=m+" ["+i.ba()+"]",fo(i)}}finally{js(i)}}}function js(i,e){if(i.g){wa(i);const t=i.g,o=i.C[0]?et:null;i.g=null,i.C=null,e||yn(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function wa(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ce.clearTimeout(i.A),i.A=null)}function ks(i){return i.g?i.g.readyState:0}function ro(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Ps:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ea(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function mu(i){let e="";return xr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):ot(i,e,t))}function Ci(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Ao(i){this.za=0,this.l=[],this.h=new fi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ci("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ci("baseRetryDelayMs",5e3,i),this.$a=Ci("retryDelaySeedMs",1e4,i),this.Ya=Ci("forwardChannelMaxRetries",2,i),this.ra=Ci("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new De(i&&i.concurrentRequestLimit),this.Ca=new oi,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function ai(i){if(Jl(i),3==i.G){var e=i.V++,t=W(i.F);ot(t,"SID",i.J),ot(t,"RID",e),ot(t,"TYPE","terminate"),Qi(i,t),(e=new Di(i,i.h,e,void 0)).K=2,e.v=Lt(W(t)),t=!1,ce.navigator&&ce.navigator.sendBeacon&&(t=ce.navigator.sendBeacon(e.v.toString(),"")),!t&&ce.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ga(e.l,null),e.g.ea(e.v)),e.F=Date.now(),qi(e)}po(i)}function So(i){i.g&&(na(i),i.g.cancel(),i.g=null)}function Jl(i){So(i),i.u&&(ce.clearTimeout(i.u),i.u=null),vs(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ce.clearTimeout(i.m),i.m=null)}function yu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Ti(i)}function Ti(i){wt(i.i)||i.m||(i.m=!0,mn(i.Ha,i),i.C=0)}function ta(i,e){var t;t=e?e.m:i.V++;const o=W(i.F);ot(o,"SID",i.J),ot(o,"RID",t),ot(o,"AID",i.U),Qi(i,o),i.o&&i.s&&ea(o,i.o,i.s),t=new Di(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=$s(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),_n(i.i,t),to(t,o,e)}function Qi(i,e){i.j&&si({},function(t,o){ot(e,o,t)})}function $s(i,e,t){t=Math.min(i.l.length,t);var o=i.j?bt(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=u[0].h,m.push("ofs="+d)):d=0:m.push("ofs="+d);let D=!0;for(let j=0;j<t;j++){let K=u[j].h;const ge=u[j].g;if(K-=d,0>K)d=Math.max(0,u[j].h-100),D=!1;else try{Hr(ge,m,"req"+K+"_")}catch(Oe){o&&o(ge)}}if(D){o=m.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Ns(i){i.g||i.u||(i.Y=1,mn(i.Ga,i),i.A=0)}function ui(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Qt(bt(i.Ga,i),ra(i,i.A)),i.A++,0))}function na(i){null!=i.B&&(ce.clearTimeout(i.B),i.B=null)}function Ha(i){i.g=new Di(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=W(i.oa);ot(e,"RID","rpc"),ot(e,"SID",i.J),ot(e,"CI",i.N?"0":"1"),ot(e,"AID",i.U),Qi(i,e),ot(e,"TYPE","xmlhttp"),i.o&&i.s&&ea(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Lt(W(e)),t.s=null,t.U=!0,Bs(t,i)}function vs(i){null!=i.v&&(ce.clearTimeout(i.v),i.v=null)}function io(i,e){var t=null;if(i.g==e){vs(i),na(i),i.g=null;var o=2}else{if(!Wt(i.i,e))return;t=e.D,qn(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;yn(o=Ms(),new Ot(o,t,e,u)),Ti(i)}else Ns(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function ec(i,e){return!(rn(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Qt(bt(i.Ha,i,e),ra(i,i.C)),i.C++,0)))}(i,e)||2==o&&ui(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:Ts(i,5);break;case 4:Ts(i,10);break;case 3:Ts(i,6);break;default:Ts(i,2)}}function ra(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Ts(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=bt(i.jb,i);t||(t=new R("//www.google.com/images/cleardot.gif"),ce.location&&"http"==ce.location.protocol||x(t,"https"),Lt(t)),function yi(i,e){const t=new fi;if(ce.Image){const o=new Image;o.onload=Tt(Wn,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Tt(Wn,t,o,"TestLoadImage: error",!1,e),o.onabort=Tt(Wn,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Tt(Wn,t,o,"TestLoadImage: timeout",!1,e),ce.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else mt(2);i.G=0,i.j&&i.j.va(e),po(i),Jl(i)}function po(i){i.G=0,i.I=-1,i.j&&((0!=Vr(i.i).length||0!=i.l.length)&&(i.i.i.length=0,En(i.l),i.l.length=0),i.j.ua())}function Hs(i,e,t){let o=function Xn(i){return i instanceof R?W(i):new R(i,void 0)}(t);if(""!=o.i)e&&Y(o,e+"."+o.i),be(o,o.m);else{const u=ce.location;o=function $n(i,e,t,o){var u=new R(null,void 0);return i&&x(u,i),e&&Y(u,e),t&&be(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&xr(i.aa,function(u,d){ot(o,d,u)}),t=i.sa,(e=i.D)&&t&&ot(o,e,t),ot(o,"VER",i.ma),Qi(i,o),o}function Ga(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dr(t&&i.Ba&&!i.qa?new Ur({ib:!0}):i.qa)).L=i.H,e}function _u(){}function vu(){if(Vt&&!(10<=Number($t)))throw Error("Environmental error: no available transport.")}function Lr(i,e){nn.call(this),this.g=new Ao(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Un(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Un(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new go(this)}function Ia(i){ys.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Gs(){Vi.call(this),this.status=1}function go(i){this.g=i}(X=Dr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xs.g(),this.C=function Ri(i){return i.h||(i.h=i.i())}(this.u?this.u:xs),this.g.onreadystatechange=bt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void Bo(this,d)}i=t||"";const u=new rs(this.headers);o&&si(o,function(d,m){u.set(m,d)}),o=function tr(i){e:{var e=$a;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=ce.FormData&&i instanceof ce.FormData,!(0<=zn(Ea,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,m){this.g.setRequestHeader(m,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wa(this),0<this.B&&((this.K=function ja(i){return Vt&&function gt(){return function Gr(i){var e=Ze;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=ir(String(Ln)).split("."),t=ir("9").split("."),o=Math.max(e.length,t.length);for(let m=0;0==i&&m<o;m++){var u=e[m]||"",d=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=Gt(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||Gt(0==u[2].length,0==d[2].length)||Gt(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bt(this.pa,this)):this.A=Sr(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){Bo(this,d)}},X.pa=function(){void 0!==Pe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yn(this,"timeout"),this.abort(8))},X.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,yn(this,"complete"),yn(this,"abort"),js(this))},X.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),js(this,!0)),Dr.Z.M.call(this)},X.Fa=function(){this.s||(this.F||this.v||this.l?Jo(this):this.cb())},X.cb=function(){Jo(this)},X.ba=function(){try{return 2<ks(this)?this.g.status:-1}catch(i){return-1}},X.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},X.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),no(e)}},X.Da=function(){return this.m},X.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(X=Ao.prototype).ma=8,X.G=1,X.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},X.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new Di(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=Rr(d),_r(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$s(this,u,e),ot(t=W(this.F),"RID",i),ot(t,"CVER",22),this.D&&ot(t,"X-HTTP-Session-Id",this.D),Qi(this,t),this.o&&d&&ea(t,this.o,d),_n(this.i,u),this.Ra&&ot(t,"TYPE","init"),this.ja?(ot(t,"$req",e),ot(t,"SID","null"),u.$=!0,to(u,t,null)):to(u,t,e),this.G=2}}else 3==this.G&&(i?ta(this,i):0==this.l.length||wt(this.i)||ta(this))},X.Ga=function(){if(this.u=null,Ha(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Qt(bt(this.bb,this),i)}},X.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mt(10),So(this),Ha(this))},X.ab=function(){null!=this.v&&(this.v=null,So(this),ui(this),mt(19))},X.jb=function(i){i?(this.h.info("Successfully pinged google.com"),mt(2)):(this.h.info("Failed to ping google.com"),mt(1))},(X=_u.prototype).xa=function(){},X.wa=function(){},X.va=function(){},X.ua=function(){},X.Oa=function(){},vu.prototype.g=function(i,e){return new Lr(i,e)},dt(Lr,nn),Lr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),mn(bt(i.hb,i,e))),mt(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Hs(i,null,i.W),Ti(i)},Lr.prototype.close=function(){ai(this.g)},Lr.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,yu(this.g,e)}else this.v?((e={}).__data__=hi(i),yu(this.g,e)):yu(this.g,i)},Lr.prototype.M=function(){this.g.j=null,delete this.j,ai(this.g),delete this.g,Lr.Z.M.call(this)},dt(Ia,ys),dt(Gs,Vi),dt(go,_u),go.prototype.xa=function(){yn(this.g,"a")},go.prototype.wa=function(i){yn(this.g,new Ia(i))},go.prototype.va=function(i){yn(this.g,new Gs(i))},go.prototype.ua=function(){yn(this.g,"b")},vu.prototype.createWebChannel=vu.prototype.g,Lr.prototype.send=Lr.prototype.u,Lr.prototype.open=Lr.prototype.m,Lr.prototype.close=Lr.prototype.close,jn.NO_ERROR=0,jn.TIMEOUT=8,jn.HTTP_ERROR=6,Pr.COMPLETE="complete",Ii.EventType=Oi,Oi.OPEN="a",Oi.CLOSE="b",Oi.ERROR="c",Oi.MESSAGE="d",nn.prototype.listen=nn.prototype.N,Dr.prototype.listenOnce=Dr.prototype.O,Dr.prototype.getLastError=Dr.prototype.La,Dr.prototype.getLastErrorCode=Dr.prototype.Da,Dr.prototype.getStatus=Dr.prototype.ba,Dr.prototype.getResponseJson=Dr.prototype.Qa,Dr.prototype.getResponseText=Dr.prototype.ga,Dr.prototype.send=Dr.prototype.ea;var jo=ve.createWebChannelTransport=function(){return new vu},$o=ve.getStatEventTarget=function(){return Ms()},Da=ve.ErrorCode=jn,Br=ve.EventType=Pr,Wa=ve.Event=rr,Fs=ve.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ba=ve.FetchXmlHttpFactory=Ur,As=ve.WebChannel=Ii,tc=ve.XhrIo=Dr;const Eu="@firebase/firestore";class I{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}I.UNAUTHENTICATED=new I(null),I.GOOGLE_CREDENTIALS=new I("google-credentials-uid"),I.FIRST_PARTY=new I("first-party-uid"),I.MOCK_USER=new I("mock-user");let E="9.6.11";const _=new Ue.Yd("@firebase/firestore");function M(){return _.logLevel}function $(i,...e){if(_.logLevel<=Ue.in.DEBUG){const t=e.map(yt);_.debug(`Firestore (${E}): ${i}`,...t)}}function se(i,...e){if(_.logLevel<=Ue.in.ERROR){const t=e.map(yt);_.error(`Firestore (${E}): ${i}`,...t)}}function Ce(i,...e){if(_.logLevel<=Ue.in.WARN){const t=e.map(yt);_.warn(`Firestore (${E}): ${i}`,...t)}}function yt(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function ft(i="Unexpected state"){const e=`FIRESTORE (${E}) INTERNAL ASSERTION FAILED: `+i;throw se(e),new Error(e)}function Ut(i,e){i||ft()}function Ct(i,e){return i}const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dt extends Le.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Es{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(I.UNAUTHENTICATED))}shutdown(){}}class mo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Iu{constructor(e){this.t=e,this.currentUser=I.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=K=>this.i!==u?(u=this.i,t(K)):Promise.resolve();let m=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new jr,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const K=m;e.enqueueRetryable((0,F.Z)(function*(){yield K.promise,yield d(o.currentUser)}))},j=K=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=K,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(K=>j(K)),setTimeout(()=>{if(!this.auth){const K=this.t.getImmediate({optional:!0});K?j(K):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new jr)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ut("string"==typeof o.accessToken),new Es(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ut(null===e||"string"==typeof e),new I(e)}}class yo{constructor(e,t,o){this.type="FirstParty",this.user=I.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class nc{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new yo(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(I.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ia{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Du{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=d=>{null!=d.error&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.p;return this.p=d.token,$("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.g.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.g.getImmediate({optional:!0});d?u(d):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ut("string"==typeof t.token),this.p=t.token,new ia(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Xi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function so(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}Xi.A=-1;class rc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=so(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function Nn(i,e){return i<e?-1:i>e?1:0}function oo(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function za(i){return i+"\0"}class Pi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Dt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Dt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Dt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Dt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pi.fromMillis(Date.now())}static fromDate(e){return Pi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Pi(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nn(this.nanoseconds,e.nanoseconds):Nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tn(e)}static min(){return new tn(new Pi(0,0))}static max(){return new tn(new Pi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Yc(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ka(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Qc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ca{constructor(e,t,o){void 0===t?t=0:t>e.length&&ft(),void 0===o?o=e.length-t:o>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Ca.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ca?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),m=t.get(u);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pr extends Ca{construct(e,t,o){return new pr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Dt(Ye.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new pr(t)}static emptyPath(){return new pr([])}}const zd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class is extends Ca{construct(e,t,o){return new is(e,t,o)}static isValidIdentifier(e){return zd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),is.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new is(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new Dt(Ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let m=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new Dt(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const j=e[u+1];if("\\"!==j&&"."!==j&&"`"!==j)throw new Dt(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=j,u+=2}else"`"===D?(m=!m,u++):"."!==D||m?(o+=D,u++):(d(),u++)}if(d(),m)throw new Dt(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new is(t)}static emptyPath(){return new is([])}}class Ws{constructor(e){this.fields=e,e.sort(is.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Jn(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new Jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const ll=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(i){if(Ut(!!i),"string"==typeof i){let e=0;const t=ll.exec(i);if(Ut(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ai(i.seconds),nanos:Ai(i.nanos)}}function Ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Mo(i){return"string"==typeof i?Jn.fromBase64String(i):Jn.fromUint8Array(i)}function Ji(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Vs(i){const e=i.mapValue.fields.__previous_value__;return Ji(e)?Vs(e):e}function Ta(i){const e=Ls(i.mapValue.fields.__local_write_time__.timestampValue);return new Pi(e.seconds,e.nanos)}class Ho{constructor(e,t,o,u,d,m,D,j){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=D,this.useFetchStreams=j}}class Bi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Bi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Bi&&e.projectId===this.projectId&&e.database===this.database}}function ds(i){return null==i}function xo(i){return 0===i&&1/i==-1/0}function bu(i){return"number"==typeof i&&Number.isInteger(i)&&!xo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Ht{constructor(e){this.path=e}static fromPath(e){return new Ht(pr.fromString(e))}static fromName(e){return new Ht(pr.fromString(e).popFirst(5))}static empty(){return new Ht(pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ht(new pr(e.slice()))}}const cl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cu={nullValue:"NULL_VALUE"};function ji(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ji(i)?4:Wo(i)?9:10:ft()}function ao(i,e){if(i===e)return!0;const t=ji(i);if(t!==ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ta(i).isEqual(Ta(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ls(o.timestampValue),m=Ls(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Mo(i.bytesValue).isEqual(Mo(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Ai(o.geoPointValue.latitude)===Ai(u.geoPointValue.latitude)&&Ai(o.geoPointValue.longitude)===Ai(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ai(o.integerValue)===Ai(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Ai(o.doubleValue),m=Ai(u.doubleValue);return d===m?xo(d)===xo(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return oo(i.arrayValue.values||[],e.arrayValue.values||[],ao);case 10:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Yc(d)!==Yc(m))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===m[D]||!ao(d[D],m[D])))return!1;return!0}(i,e);default:return ft()}var u}function _o(i,e){return void 0!==(i.values||[]).find(t=>ao(t,e))}function Ro(i,e){if(i===e)return 0;const t=ji(i),o=ji(e);if(t!==o)return Nn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=Ai(u.integerValue||u.doubleValue),D=Ai(d.integerValue||d.doubleValue);return m<D?-1:m>D?1:m===D?0:isNaN(m)?isNaN(D)?0:-1:1}(i,e);case 3:return Go(i.timestampValue,e.timestampValue);case 4:return Go(Ta(i),Ta(e));case 5:return Nn(i.stringValue,e.stringValue);case 6:return function(u,d){const m=Mo(u),D=Mo(d);return m.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),D=d.split("/");for(let j=0;j<m.length&&j<D.length;j++){const K=Nn(m[j],D[j]);if(0!==K)return K}return Nn(m.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=Nn(Ai(u.latitude),Ai(d.latitude));return 0!==m?m:Nn(Ai(u.longitude),Ai(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const m=u.values||[],D=d.values||[];for(let j=0;j<m.length&&j<D.length;++j){const K=Ro(m[j],D[j]);if(K)return K}return Nn(m.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){const m=u.fields||{},D=Object.keys(m),j=d.fields||{},K=Object.keys(j);D.sort(),K.sort();for(let ge=0;ge<D.length&&ge<K.length;++ge){const Oe=Nn(D[ge],K[ge]);if(0!==Oe)return Oe;const st=Ro(m[D[ge]],j[K[ge]]);if(0!==st)return st}return Nn(D.length,K.length)}(i.mapValue,e.mapValue);default:throw ft()}}function Go(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Nn(i,e);const t=Ls(i),o=Ls(e),u=Nn(t.seconds,o.seconds);return 0!==u?u:Nn(t.nanos,o.nanos)}function Oo(i){return dl(i)}function dl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Ls(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Mo(i.bytesValue).toBase64():"referenceValue"in i?Ht.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const m of o.values||[])d?d=!1:u+=",",u+=dl(m);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",m=!0;for(const D of u)m?m=!1:d+=",",d+=`${D}:${dl(o.fields[D])}`;return d+"}"}(i.mapValue):ft();var e}function Po(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function uo(i){return!!i&&"integerValue"in i}function qa(i){return!!i&&"arrayValue"in i}function zs(i){return!!i&&"nullValue"in i}function Tu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Aa(i){return!!i&&"mapValue"in i}function oa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ka(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=oa(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oa(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Wo(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Za(i){return"nullValue"in i?Cu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Po(Bi.empty(),Ht.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:ft()}function hl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Po(Bi.empty(),Ht.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?cl:ft()}function A(i,e){return void 0===i?e:void 0===e||Ro(i,e)>0?i:e}function P(i,e){return void 0===i?e:void 0===e||Ro(i,e)<0?i:e}class q{constructor(e){this.value=e}static empty(){return new q({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Aa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oa(t)}setAll(e){let t=is.emptyPath(),o={},u=[];e.forEach((m,D)=>{if(!t.isImmediateParentOf(D)){const j=this.getFieldsMap(t);this.applyChanges(j,o,u),o={},u=[],t=D.popLast()}m?o[D.lastSegment()]=oa(m):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Aa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Aa(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ka(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new q(oa(this.value))}}function ye(i){const e=[];return Ka(i.fields,(t,o)=>{const u=new is([t]);if(Aa(o)){const d=ye(o.mapValue).fields;if(0===d.length)e.push(u);else for(const m of d)e.push(u.child(m))}else e.push(u)}),new Ws(e)}class je{constructor(e,t,o,u,d,m){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new je(e,0,tn.min(),tn.min(),q.empty(),0)}static newFoundDocument(e,t,o){return new je(e,1,t,tn.min(),o,0)}static newNoDocument(e,t){return new je(e,2,t,tn.min(),q.empty(),0)}static newUnknownDocument(e,t){return new je(e,3,t,tn.min(),q.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=q.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=q.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new je(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tt{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function Ft(i){return i.fields.find(e=>2===e.kind)}function Xt(i){return i.fields.filter(e=>2!==e.kind)}tt.UNKNOWN_ID=-1;class un{constructor(e,t){this.fieldPath=e,this.kind=t}}class In{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new In(0,Yr.min())}}function dr(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=tn.fromTimestamp(1e9===o?new Pi(t+1,0):new Pi(t,o));return new Yr(u,Ht.empty(),e)}function Fn(i){return new Yr(i.readTime,i.key,-1)}class Yr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Yr(tn.min(),Ht.empty(),-1)}static max(){return new Yr(tn.max(),Ht.empty(),-1)}}function ki(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ht.comparator(i.documentKey,e.documentKey),0!==t?t:Nn(i.largestBatchId,e.largestBatchId))}class Sa{constructor(e,t=null,o=[],u=[],d=null,m=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=D,this.P=null}}function Ya(i,e=null,t=[],o=[],u=null,d=null,m=null){return new Sa(i,e,t,o,u,d,m)}function hs(i){const e=Ct(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+Oo(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),ds(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Oo(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Oo(o)).join(",")),e.P=t}return e.P}function Ks(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Pf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!ao(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Qd(i.startAt,e.startAt)&&Qd(i.endAt,e.endAt)}function vo(i){return Ht.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function fl(i,e){return i.filters.filter(t=>t instanceof Ni&&t.field.isEqual(e))}function Xc(i,e,t){let o,u=!0;for(const d of fl(i,e)){let m,D=!0;switch(d.op){case"<":case"<=":m=Za(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,D=!1;break;case"!=":case"not-in":m=Cu}A(o,m)===m&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];A(o,m)===m&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}function pl(i,e,t){let o,u=!0;for(const d of fl(i,e)){let m,D=!0;switch(d.op){case">=":case">":m=hl(d.value),D=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,D=!1;break;case"!=":case"not-in":m=cl}P(o,m)===m&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];P(o,m)===m&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}class Ni extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new qd(e,t,o):"array-contains"===t?new gl(e,o):"in"===t?new Rf(e,o):"not-in"===t?new Of(e,o):"array-contains-any"===t?new Zd(e,o):new Ni(e,t,o)}static V(e,t,o){return"in"===t?new Mf(e,o):new xf(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ro(t,this.value)):null!==t&&ji(this.value)===ji(t)&&this.v(Ro(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class qd extends Ni{constructor(e,t,o){super(e,t,o),this.key=Ht.fromName(o.referenceValue)}matches(e){const t=Ht.comparator(e.key,this.key);return this.v(t)}}class Mf extends Ni{constructor(e,t){super(e,"in",t),this.keys=aa(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xf extends Ni{constructor(e,t){super(e,"not-in",t),this.keys=aa(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function aa(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Ht.fromName(o.referenceValue))}class gl extends Ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qa(t)&&_o(t.arrayValue,this.value)}}class Rf extends Ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_o(this.value.arrayValue,t)}}class Of extends Ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(_o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_o(this.value.arrayValue,t)}}class Zd extends Ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>_o(this.value.arrayValue,o))}}class ko{constructor(e,t){this.position=e,this.inclusive=t}}class ml{constructor(e,t="asc"){this.field=e,this.dir=t}}function Pf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Yd(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],m=i.position[u];if(o=d.field.isKeyField()?Ht.comparator(Ht.fromName(m.referenceValue),t.key):Ro(m,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Qd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ao(i.position[t],e.position[t]))return!1;return!0}class Eo{constructor(e,t=null,o=[],u=[],d=null,m="F",D=null,j=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=D,this.endAt=j,this.D=null,this.C=null}}function ic(i,e,t,o,u,d,m,D){return new Eo(i,e,t,o,u,d,m,D)}function No(i){return new Eo(i)}function sc(i){return!ds(i.limit)&&"F"===i.limitType}function Au(i){return!ds(i.limit)&&"L"===i.limitType}function Xd(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Su(i){for(const e of i.filters)if(e.S())return e.field;return null}function yl(i){return null!==i.collectionGroup}function Qa(i){const e=Ct(i);if(null===e.D){e.D=[];const t=Su(e),o=Xd(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new ml(t)),e.D.push(new ml(is.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.D.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ml(is.keyField(),d))}}}return e.D}function co(i){const e=Ct(i);if(!e.C)if("F"===e.limitType)e.C=Ya(e.path,e.collectionGroup,Qa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Qa(e))t.push(new ml(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new ko(e.endAt.position,!e.endAt.inclusive):null,u=e.startAt?new ko(e.startAt.position,!e.startAt.inclusive):null;e.C=Ya(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function oc(i,e,t){return new Eo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Fo(i,e){return Ks(co(i),co(e))&&i.limitType===e.limitType}function Jd(i){return`${hs(co(i))}|lt:${i.limitType}`}function Jc(i){return`Query(target=${function lo(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${Oo(o.value)}`;var o}).join(", ")}]`),ds(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Oo(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Oo(t)).join(",")),`Target(${e})`}(co(i))}; limitType=${i.limitType})`}function ed(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Ht.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,m){const D=Yd(u,d,m);return u.inclusive?D<=0:D<0}(t.startAt,Qa(t),o)||t.endAt&&!function(u,d,m){const D=Yd(u,d,m);return u.inclusive?D>=0:D>0}(t.endAt,Qa(t),o)));var t,o}function ac(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function eh(i){return(e,t)=>{let o=!1;for(const u of Qa(i)){const d=Lo(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Lo(i,e,t){const o=i.field.isKeyField()?Ht.comparator(e.key,t.key):function(u,d,m){const D=d.data.field(u),j=m.data.field(u);return null!==D&&null!==j?Ro(D,j):ft()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return ft()}}function Xa(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xo(e)?"-0":e}}function uc(i){return{integerValue:""+i}}function th(i,e){return bu(e)?uc(e):Xa(i,e)}class Mu{constructor(){this._=void 0}}function kf(i,e,t){return i instanceof Ja?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof eu?rh(i,e):i instanceof xu?Ma(i,e):function(o,u){const d=td(o,u),m=ih(d)+ih(o.k);return uo(d)&&uo(o.k)?uc(m):Xa(o.M,m)}(i,e)}function nh(i,e,t){return i instanceof eu?rh(i,e):i instanceof xu?Ma(i,e):t}function td(i,e){return i instanceof _l?uo(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Ja extends Mu{}class eu extends Mu{constructor(e){super(),this.elements=e}}function rh(i,e){const t=xa(e);for(const o of i.elements)t.some(u=>ao(u,o))||t.push(o);return{arrayValue:{values:t}}}class xu extends Mu{constructor(e){super(),this.elements=e}}function Ma(i,e){let t=xa(e);for(const o of i.elements)t=t.filter(u=>!ao(u,o));return{arrayValue:{values:t}}}class _l extends Mu{constructor(e,t){super(),this.M=e,this.k=t}}function ih(i){return Ai(i.integerValue||i.doubleValue)}function xa(i){return qa(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ru{constructor(e,t){this.field=e,this.transform=t}}class vl{constructor(e,t){this.version=e,this.transformResults=t}}class $i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $i}static exists(e){return new $i(void 0,e)}static updateTime(e){return new $i(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class El{}function xg(i,e,t){i instanceof nu?function(o,u,d){const m=o.value.clone(),D=wl(o.fieldTransforms,u,d.transformResults);m.setAll(D),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof Ou?function(o,u,d){if(!tu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=wl(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(sh(o)),D.setAll(m),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function lc(i,e,t){var u;i instanceof nu?function(o,u,d){if(!tu(o.precondition,u))return;const m=o.value.clone(),D=oh(o.fieldTransforms,d,u);m.setAll(D),u.convertToFoundDocument(dc(u),m).setHasLocalMutations()}(i,e,t):i instanceof Ou?function(o,u,d){if(!tu(o.precondition,u))return;const m=oh(o.fieldTransforms,d,u),D=u.data;D.setAll(sh(o)),D.setAll(m),u.convertToFoundDocument(dc(u),D).setHasLocalMutations()}(i,e,t):tu(i.precondition,u=e)&&u.convertToNoDocument(tn.min())}function Rg(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=td(o.transform,u||null);null!=d&&(null==t&&(t=q.empty()),t.set(o.field,d))}return t||null}function cc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&oo(t,o,(u,d)=>function wo(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof eu&&o instanceof eu||t instanceof xu&&o instanceof xu?oo(t.elements,o.elements,ao):t instanceof _l&&o instanceof _l?ao(t.k,o.k):t instanceof Ja&&o instanceof Ja);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function dc(i){return i.isFoundDocument()?i.version:tn.min()}class nu extends El{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class Ou extends El{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}}function sh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function wl(i,e,t){const o=new Map;Ut(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],m=d.transform,D=e.data.field(d.field);o.set(d.field,nh(m,D,t[u]))}return o}function oh(i,e,t){const o=new Map;for(const u of i){const d=u.transform,m=t.data.field(u.field);o.set(u.field,kf(d,m,e))}return o}class Il extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Dl extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class nd{constructor(e){this.count=e}}var Hi,hr;function Pu(i){switch(i){default:return ft();case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0}}function hc(i){if(void 0===i)return se("GRPC error has no .code"),Ye.UNKNOWN;switch(i){case Hi.OK:return Ye.OK;case Hi.CANCELLED:return Ye.CANCELLED;case Hi.UNKNOWN:return Ye.UNKNOWN;case Hi.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case Hi.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case Hi.INTERNAL:return Ye.INTERNAL;case Hi.UNAVAILABLE:return Ye.UNAVAILABLE;case Hi.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case Hi.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case Hi.NOT_FOUND:return Ye.NOT_FOUND;case Hi.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case Hi.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case Hi.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case Hi.ABORTED:return Ye.ABORTED;case Hi.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case Hi.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case Hi.DATA_LOSS:return Ye.DATA_LOSS;default:return ft()}}(hr=Hi||(Hi={}))[hr.OK=0]="OK",hr[hr.CANCELLED=1]="CANCELLED",hr[hr.UNKNOWN=2]="UNKNOWN",hr[hr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hr[hr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hr[hr.NOT_FOUND=5]="NOT_FOUND",hr[hr.ALREADY_EXISTS=6]="ALREADY_EXISTS",hr[hr.PERMISSION_DENIED=7]="PERMISSION_DENIED",hr[hr.UNAUTHENTICATED=16]="UNAUTHENTICATED",hr[hr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hr[hr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hr[hr.ABORTED=10]="ABORTED",hr[hr.OUT_OF_RANGE=11]="OUT_OF_RANGE",hr[hr.UNIMPLEMENTED=12]="UNIMPLEMENTED",hr[hr.INTERNAL=13]="INTERNAL",hr[hr.UNAVAILABLE=14]="UNAVAILABLE",hr[hr.DATA_LOSS=15]="DATA_LOSS";class Ra{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Qc(this.inner)}size(){return this.innerSize}}class er{constructor(e,t){this.comparator=e,this.root=t||ws.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ws.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ws.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bl(this.root,e,this.comparator,!0)}}class bl{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ws{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=null!=o?o:ws.RED,this.left=null!=u?u:ws.EMPTY,this.right=null!=d?d:ws.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new ws(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ws.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return ws.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}ws.EMPTY=null,ws.RED=!0,ws.BLACK=!1,ws.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(i,e,t,o,u){return this}insert(i,e,t){return new ws(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ei{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rd(this.data.getIterator())}getIteratorFrom(e){return new rd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof ei)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ei(this.comparator);return t.data=e,t}}class rd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ku(i){return i.hasNext()?i.getNext():void 0}const fc=new er(Ht.comparator);function Io(){return fc}const ah=new er(Ht.comparator);function id(){return ah}function pc(){return new Ra(i=>i.toString(),(i,e)=>i.isEqual(e))}const Og=new er(Ht.comparator),Cl=new ei(Ht.comparator);function Vn(...i){let e=Cl;for(const t of i)e=e.add(t);return e}const Tl=new ei(Nn);function ru(){return Tl}class iu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,es.createSynthesizedTargetChangeForCurrentChange(e,t)),new iu(tn.min(),o,ru(),Io(),Vn())}}class es{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new es(Jn.EMPTY_BYTE_STRING,t,Vn(),Vn(),Vn())}}class zo{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class gc{constructor(e,t){this.targetId=e,this.$=t}}class qs{constructor(e,t,o=Jn.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class Nu{constructor(){this.B=0,this.L=Al(),this.U=Jn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Vn(),t=Vn(),o=Vn();return this.L.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:ft()}}),new es(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=Al()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class sd{constructor(e){this.nt=e,this.st=new Map,this.it=Io(),this.rt=uh(),this.ot=new ei(Nn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const d=u.target;if(vo(d))if(0===o){const m=new Ht(d.path);this.ct(t,m,je.newNoDocument(m,tn.min()))}else Ut(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((d,m)=>{const D=this.wt(m);if(D){if(d.current&&vo(D.target)){const j=new Ht(D.target.path);null!==this.it.get(j)||this.It(m,j)||this.ct(m,j,je.newNoDocument(j,e))}d.j&&(t.set(m,d.H()),d.J())}});let o=Vn();this.rt.forEach((d,m)=>{let D=!0;m.forEachWhile(j=>{const K=this.wt(j);return!K||2===K.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.it.forEach((d,m)=>m.setReadTime(e));const u=new iu(e,t,this.ot,this.it,o);return this.it=Io(),this.rt=uh(),this.ot=new ei(Nn),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Nu,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new ei(Nn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||$("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Nu),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function uh(){return new er(Ht.comparator)}function Al(){return new er(Ht.comparator)}const od={asc:"ASCENDING",desc:"DESCENDING"},lh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ch{constructor(e,t){this.databaseId=e,this.N=t}}function Sl(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vo(i,e){return i.N?e.toBase64():e.toUint8Array()}function dh(i,e){return Sl(i,e.toTimestamp())}function fs(i){return Ut(!!i),tn.fromTimestamp(function(e){const t=Ls(e);return new Pi(t.seconds,t.nanos)}(i))}function Ml(i,e){return(t=i,new pr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function hh(i){const e=pr.fromString(i);return Ut(Dn(e)),e}function Fu(i,e){return Ml(i.databaseId,e.path)}function li(i,e){const t=hh(e);if(t.get(1)!==i.databaseId.projectId)throw new Dt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Dt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ht(Ko(t))}function xl(i,e){return Ml(i.databaseId,e)}function mc(i){const e=hh(i);return 4===e.length?pr.emptyPath():Ko(e)}function Rl(i){return new pr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ko(i){return Ut(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Lu(i,e,t){return{name:Fu(i,e),fields:t.value.mapValue.fields}}function yc(i,e,t){const o=li(i,e.name),u=fs(e.updateTime),d=new q({mapValue:{fields:e.fields}}),m=je.newFoundDocument(o,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function su(i,e){let t;if(e instanceof nu)t={update:Lu(i,e.key,e.value)};else if(e instanceof Il)t={delete:Fu(i,e.key)};else if(e instanceof Ou)t={update:Lu(i,e.key,e.data),updateMask:dn(e.fieldMask)};else{if(!(e instanceof Dl))return ft();t={verify:Fu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const m=d.transform;if(m instanceof Ja)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof eu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof xu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof _l)return{fieldPath:d.field.canonicalString(),increment:m.k};throw ft()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:dh(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:ft()),t;var u}function ad(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?$i.updateTime(fs(u.updateTime)):void 0!==u.exists?$i.exists(u.exists):$i.none():$i.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,m){let D=null;"setToServerValue"in m?(Ut("REQUEST_TIME"===m.setToServerValue),D=new Ja):"appendMissingElements"in m?D=new eu(m.appendMissingElements.values||[]):"removeAllFromArray"in m?D=new xu(m.removeAllFromArray.values||[]):"increment"in m?D=new _l(d,m.increment):ft();const j=is.fromServerFormat(m.fieldPath);return new Ru(j,D)}(i,u)):[];var u;if(e.update){const u=li(i,e.update.name),d=new q({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new Ws((e.updateMask.fieldPaths||[]).map(K=>is.fromServerFormat(K)));return new Ou(u,d,m,t,o)}return new nu(u,d,t,o)}if(e.delete){const u=li(i,e.delete);return new Il(u,t)}if(e.verify){const u=li(i,e.verify);return new Dl(u,t)}return ft()}function ph(i,e){return{documents:[xl(i,e.path)]}}function gh(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=xl(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xl(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(j){if(0===j.length)return;const K=j.map(ge=>function(Oe){if("=="===Oe.op){if(Tu(Oe.value))return{unaryFilter:{field:J(Oe.field),op:"IS_NAN"}};if(zs(Oe.value))return{unaryFilter:{field:J(Oe.field),op:"IS_NULL"}}}else if("!="===Oe.op){if(Tu(Oe.value))return{unaryFilter:{field:J(Oe.field),op:"IS_NOT_NAN"}};if(zs(Oe.value))return{unaryFilter:{field:J(Oe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:J(Oe.field),op:U(Oe.op),value:Oe.value}}}(ge));return 1===K.length?K[0]:{compositeFilter:{op:"AND",filters:K}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(j){if(0!==j.length)return j.map(K=>{return{field:J((ge=K).field),direction:v(ge.dir)};var ge})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=(K=e.limit,i.N||ds(K)?K:{value:K});var K,D,j;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(j=e.endAt).inclusive,values:j.position}),t}function g(i){let e=mc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){Ut(1===o);const ge=t.from[0];ge.allDescendants?u=ge.collectionId:e=e.child(ge.collectionId)}let d=[];t.where&&(d=f(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(ge=>{return new ml(He((Oe=ge).field),function(st){switch(st){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Oe.direction));var Oe}));let D=null;t.limit&&(D=function(ge){let Oe;return Oe="object"==typeof ge?ge.value:ge,ds(Oe)?null:Oe}(t.limit));let j=null;var ge;t.startAt&&(j=new ko((ge=t.startAt).values||[],!!ge.before));let K=null;return t.endAt&&(K=function(ge){return new ko(ge.values||[],!ge.before)}(t.endAt)),ic(e,u,m,d,D,"F",j,K)}function f(i){return i?void 0!==i.unaryFilter?[zt(i)]:void 0!==i.fieldFilter?[lt(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>f(e)).reduce((e,t)=>e.concat(t)):ft():[]}function v(i){return od[i]}function U(i){return lh[i]}function J(i){return{fieldPath:i.canonicalString()}}function He(i){return is.fromServerFormat(i.fieldPath)}function lt(i){return Ni.create(He(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(i.fieldFilter.op),i.fieldFilter.value)}function zt(i){switch(i.unaryFilter.op){case"IS_NAN":const e=He(i.unaryFilter.field);return Ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=He(i.unaryFilter.field);return Ni.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=He(i.unaryFilter.field);return Ni.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=He(i.unaryFilter.field);return Ni.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function dn(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Dn(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function sn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=ho(e)),e=Si(i.get(t),e);return ho(e)}function Si(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function ho(i){return i+"\x01\x01"}function Zs(i){const e=i.length;if(Ut(e>=2),2===e)return Ut("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),pr.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const m=i.indexOf("\x01",d);switch((m<0||m>t)&&ft(),i.charAt(m+1)){case"\x01":const D=i.substring(d,m);let j;0===u.length?j=D:(u+=D,j=u,u=""),o.push(j);break;case"\x10":u+=i.substring(d,m),u+="\0";break;case"\x11":u+=i.substring(d,m+1);break;default:ft()}d=m+2}return new pr(o)}const Ol=["userId","batchId"];function Oa(i,e){return[i,sn(e)]}function _c(i,e,t){return[i,sn(e),t]}const Lf={},Pa=["prefixPath","collectionGroup","readTime","documentId"],vc=["prefixPath","collectionGroup","documentId"],ud=["collectionGroup","readTime","prefixPath","documentId"],ld=["canonicalId","targetId"],Ec=["targetId","path"],Vf=["path","targetId"],cd=["collectionId","parent"],Uf=["indexId","uid"],Ry=["uid","sequenceNumber"],Oy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Py=["indexId","uid","orderedDocumentKey"],Pg=["userId","collectionPath","documentId"],Bf=["userId","collectionPath","largestBatchId"],kg=["userId","collectionGroup","largestBatchId"],mh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ky=[...mh,"documentOverlays"],Ng=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fg=[...Ng,"indexConfiguration","indexState","indexEntries"],jf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class _t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _t((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _t?t:_t.resolve(t)}catch(t){return _t.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_t.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_t.reject(t)}static resolve(e){return new _t((t,o)=>{t(e)})}static reject(e){return new _t((t,o)=>{o(e)})}static waitFor(e){return new _t((t,o)=>{let u=0,d=0,m=!1;e.forEach(D=>{++u,D.next(()=>{++d,m&&d===u&&t()},j=>o(j))}),m=!0,d===u&&t()})}static or(e){let t=_t.resolve(!1);for(const o of e)t=t.next(u=>u?_t.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}}class dd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new jr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new hd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=vh(o.target.error);this.At.reject(new hd(e,u))}}static open(e,t,o,u){try{return new dd(t,e.transaction(u,o))}catch(d){throw new hd(t,d)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||($("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lg(t)}}class ua{constructor(e,t,o){this.name=e,this.version=t,this.bt=o,12.2===ua.Vt((0,Le.z$)())&&se("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $("SimpleDb","Removing database:",e),Bu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Le.hl)())return!1;if(ua.St())return!0;const e=(0,Le.z$)(),t=ua.Vt(e),o=0<t&&t<10,u=ua.Dt(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,F.Z)(function*(){return t.db||($("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new hd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const D=m.target.error;u("VersionError"===D.name?new Dt(Ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new Dt(Ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new hd(e,D))},d.onupgradeneeded=m=>{$("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.bt.kt(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{$("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,F.Z)(function*(){const m="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.Nt(e);const j=dd.open(d.db,e,m?"readonly":"readwrite",o),K=u(j).next(ge=>(j.Pt(),ge)).catch(ge=>(j.abort(ge),_t.reject(ge))).toPromise();return K.catch(()=>{}),yield j.Rt,K}catch(j){const K="FirebaseError"!==j.name&&D<3;if($("SimpleDb","Transaction failed with error:",j.message,"Retrying:",K),d.close(),!K)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class yh{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bu(this.Ft.delete())}}class hd extends Dt{constructor(e,t){super(Ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uu(i){return"IndexedDbTransactionError"===i.name}class Lg{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?($("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):($("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Bu(o)}add(e){return $("SimpleDb","ADD",this.store.name,e,e),Bu(this.store.add(e))}get(e){return Bu(this.store.get(e)).next(t=>(void 0===t&&(t=null),$("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $("SimpleDb","DELETE",this.store.name,e),Bu(this.store.delete(e))}count(){return $("SimpleDb","COUNT",this.store.name),Bu(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.Kt(u,(m,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new _t((d,m)=>{u.onerror=D=>{m(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new _t((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}Qt(e,t){$("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Kt(u,(d,m,D)=>D.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Kt(u,t)}zt(e){const t=this.cursor({});return new _t((o,u)=>{t.onerror=d=>{const m=vh(d.target.error);u(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(D=>{D?m.continue():o()}):o()}})}Kt(e,t){const o=[];return new _t((u,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const D=m.target.result;if(!D)return void u();const j=new yh(D),K=t(D.primaryKey,D.value,j);if(K instanceof _t){const ge=K.catch(Oe=>(j.done(),_t.reject(Oe)));o.push(ge)}j.isDone?u():null===j.Lt?D.continue():D.continue(j.Lt)}}).next(()=>_t.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bu(i){return new _t((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=vh(o.target.error);t(u)}})}let _h=!1;function vh(i){const e=ua.Vt((0,Le.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new Dt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _h||(_h=!0,setTimeout(()=>{throw o},0)),o}}return i}class fd extends Vu{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ss(i,e){const t=Ct(i);return ua.xt(t.Ht,e)}class Eh{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&xg(d,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&lc(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&lc(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(tn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vn())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(t,o)=>cc(t,o))&&oo(this.baseMutations,e.baseMutations,(t,o)=>cc(t,o))}}class pd{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){Ut(e.mutations.length===o.length);let u=Og;const d=e.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new pd(e,t,o,u)}}class wh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ka{constructor(e,t,o,u,d=tn.min(),m=tn.min(),D=Jn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=D}withSequenceNumber(e){return new ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wc{constructor(e){this.Jt=e}}function $f(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ih(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Fu(u=i.Jt,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Sl(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Pl(e.version)};else{if(!e.isUnknownDocument())return ft();o.unknownDocument={path:t.path.toArray(),version:Pl(e.version)}}var u,d;return o}function Ih(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Pl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ju(i){const e=new Pi(i.seconds,i.nanoseconds);return tn.fromTimestamp(e)}function $u(i,e){const t=(e.baseMutations||[]).map(d=>ad(i.Jt,d));for(let d=0;d<e.mutations.length-1;++d){const m=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(m.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>ad(i.Jt,d)),u=Pi.fromMillis(e.localWriteTimeMs);return new Eh(e.batchId,u,t,o)}function Ic(i){const e=ju(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ju(i.lastLimboFreeSnapshotVersion):tn.min();let o;var u;return void 0!==i.query.documents?(Ut(1===(u=i.query).documents.length),o=co(No(mc(u.documents[0])))):o=co(g(i.query)),new ka(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Jn.fromBase64String(i.resumeToken))}function Fy(i,e){const t=Pl(e.snapshotVersion),o=Pl(e.lastLimboFreeSnapshotVersion);let u;u=vo(e.target)?ph(i.Jt,e.target):gh(i.Jt,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hs(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Dh(i){const e=g({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?oc(e,e.limit,"L"):e}function Hf(i,e){return new wh(e.largestBatchId,ad(i.Jt,e.overlayMutation))}function Gf(i,e){const t=e.path.lastSegment();return[i,sn(e.path.popLast()),t]}class Ly{getBundleMetadata(e,t){return Vg(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:ju(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Vg(e).put({bundleId:(o=t).id,createTime:Pl(fs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return qo(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:Dh(u.bundledQuery),readTime:ju(u.readTime)};var u})}saveNamedQuery(e,t){return qo(e).put({name:(o=t).name,readTime:Pl(fs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Vg(i){return ss(i,"bundles")}function qo(i){return ss(i,"namedQueries")}class Wf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Wf(e,t.uid||"")}getOverlay(e,t){return Dc(e).get(Gf(this.userId,t)).next(o=>o?Hf(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((d,m)=>{const D=new wh(t,m);u.push(this.Xt(e,D))}),_t.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(m=>u.add(sn(m.getCollectionPath())));const d=[];return u.forEach(m=>{const D=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(Dc(e).Qt("collectionPathOverlayIndex",D))}),_t.waitFor(d)}getOverlaysForCollection(e,t,o){const u=pc(),d=sn(t),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Dc(e).qt("collectionPathOverlayIndex",m).next(D=>{for(const j of D){const K=Hf(this.M,j);u.set(K.getKey(),K)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=pc();let m;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dc(e).Wt({index:"collectionGroupOverlayIndex",range:D},(j,K,ge)=>{const Oe=Hf(this.M,K);d.size()<u||Oe.largestBatchId===m?(d.set(Oe.getKey(),Oe),m=Oe.largestBatchId):ge.done()}).next(()=>d)}Xt(e,t){return Dc(e).put(function(o,u,d){const[m,D,j]=Gf(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:j,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:su(o.Jt,d.mutation)}}(this.M,this.userId,t))}}function Dc(i){return ss(i,"documentOverlays")}class kl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ai(e.integerValue));else if("doubleValue"in e){const o=Ai(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),xo(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Mo(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?Wo(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ft()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),Ht.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Vy(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ug(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=Vy(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}kl.fe=new kl;class Uy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Bg{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class By{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class gd{constructor(){this.De=new Uy,this.Ce=new Bg(this.De),this.xe=new By(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Hu{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Hu(this.indexId,this.documentKey,this.arrayValue,o)}}function xn(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=zf(i.arrayValue,e.arrayValue),0!==t?t:(t=zf(i.directionalValue,e.directionalValue),0!==t?t:Ht.comparator(i.documentKey,e.documentKey)))}function zf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class jg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=Ft(e);if(void 0!==t&&!this.Be(t))return!1;const o=Xt(e);let u=0,d=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const m=o[u];if(!this.Le(this.Fe,m)||!this.Ue(this.Me[d++],m))return!1;++u}for(;u<o.length;++u){const m=o[u];if(d>=this.Me.length||!this.Ue(this.Me[d++],m))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class $g{constructor(){this.qe=new bc}addToCollectionParentIndex(e,t){return this.qe.add(t),_t.resolve()}getCollectionParents(e,t){return _t.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return _t.resolve()}deleteFieldIndex(e,t){return _t.resolve()}getDocumentsMatchingTarget(e,t){return _t.resolve(null)}getFieldIndex(e,t){return _t.resolve(null)}getFieldIndexes(e,t){return _t.resolve([])}getNextCollectionGroupToUpdate(e){return _t.resolve(null)}updateCollectionGroup(e,t,o){return _t.resolve()}updateIndexEntries(e,t){return _t.resolve()}}class bc{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new ei(pr.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new ei(pr.comparator)).toArray()}}const Ys=new Uint8Array(0);class Hg{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new bc,this.Ge=new Ra(o=>hs(o),(o,u)=>Ks(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const d={collectionId:o,parent:sn(u)};return Gg(e).put(d)}return _t.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[za(t),""],!1,!0);return Gg(e).qt(u).next(d=>{for(const m of d){if(m.collectionId!==t)break;o.push(Zs(m.parent))}return o})}addFieldIndex(e,t){const o=Zo(e),u={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=Zo(e),u=Cc(e),d=Nl(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Nl(e);let u=!0;const d=new Map;return _t.forEach(this.Qe(t),m=>this.getFieldIndex(e,m).next(D=>{u&&(u=!!D),d.set(m,D)})).next(()=>{if(u){let m=Vn();const D=[];return _t.forEach(d,(j,K)=>{var ge;$("IndexedDbIndexManager",`Using index ${ge=j,`id=${ge.indexId}|cg=${ge.collectionGroup}|f=${ge.fields.map(ci=>`${ci.fieldPath}:${ci.kind}`).join(",")}`} to execute ${hs(t)}`);const Oe=function(ci,gs){const xi=Ft(gs);if(void 0===xi)return null;for(const Wi of fl(ci,xi.fieldPath))switch(Wi.op){case"array-contains-any":return Wi.value.arrayValue.values||[];case"array-contains":return[Wi.value]}return null}(K,j),st=function(ci,gs){const xi=new Map;for(const Wi of Xt(gs))for(const eo of fl(ci,Wi.fieldPath))switch(eo.op){case"==":case"in":xi.set(Wi.fieldPath.canonicalString(),eo.value);break;case"not-in":case"!=":return xi.set(Wi.fieldPath.canonicalString(),eo.value),Array.from(xi.values())}return null}(K,j),St=function(ci,gs){const xi=[];let Wi=!0;for(const eo of Xt(gs)){const al=0===eo.kind?Xc(ci,eo.fieldPath,ci.startAt):pl(ci,eo.fieldPath,ci.startAt);if(!al.value)return null;xi.push(al.value),Wi&&(Wi=al.inclusive)}return new ko(xi,Wi)}(K,j),xt=function(ci,gs){const xi=[];let Wi=!0;for(const eo of Xt(gs)){const al=0===eo.kind?pl(ci,eo.fieldPath,ci.endAt):Xc(ci,eo.fieldPath,ci.endAt);if(!al.value)return null;xi.push(al.value),Wi&&(Wi=al.inclusive)}return new ko(xi,Wi)}(K,j),an=this.je(j,K,St),Hn=this.je(j,K,xt),wi=this.We(j,K,st),Mi=this.ze(j.indexId,Oe,an,!!St&&St.inclusive,Hn,!!xt&&xt.inclusive,wi);return _t.forEach(Mi,ci=>o.Gt(ci,t.limit).next(gs=>{gs.forEach(xi=>{const Wi=Ht.fromSegments(xi.documentKey);m.has(Wi)||(m=m.add(Wi),D.push(Wi))})}))}).next(()=>D)}return _t.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,o,u,d,m,D){const j=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=d?d.length:1),K=j/(null!=t?t.length:1),ge=[];for(let Oe=0;Oe<j;++Oe){const st=t?this.He(t[Oe/K]):Ys,St=o?this.Je(e,st,o[Oe%K],u):this.Ye(e),xt=d?this.Xe(e,st,d[Oe%K],m):this.Ye(e+1);ge.push(...this.createRange(St,xt,D.map(an=>this.Je(e,st,an,!0))))}return ge}Je(e,t,o,u){const d=new Hu(e,Ht.empty(),t,o);return u?d:d.ke()}Xe(e,t,o,u){const d=new Hu(e,Ht.empty(),t,o);return u?d.ke():d}Ye(e){return new Hu(e,Ht.empty(),Ys,Ys)}getFieldIndex(e,t){const o=new jg(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{const m=d.filter(D=>o.$e(D));return m.sort((D,j)=>j.fields.length-D.fields.length),m.length>0?m[0]:null})}Ze(e,t){const o=new gd;for(const u of Xt(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const m=o.Ne(u.kind);kl.fe.Zt(d,m)}return o.Se()}He(e){const t=new gd;return kl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new gd;return kl.fe.Zt(Po(this.databaseId,t),o.Ne(function(u){const d=Xt(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.Se()}We(e,t,o){if(null===o)return[];let u=[];u.push(new gd);let d=0;for(const m of Xt(e)){const D=o[d++];for(const j of u)if(this.en(t,m.fieldPath)&&qa(D))u=this.nn(u,m,D);else{const K=j.Ne(m.kind);kl.fe.Zt(D,K)}}return this.sn(u)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const u=[...e],d=[];for(const m of o.arrayValue.values||[])for(const D of u){const j=new gd;j.seed(D.Se()),kl.fe.Zt(m,j.Ne(t.kind)),d.push(j)}return d}en(e,t){return!!e.filters.find(o=>o instanceof Ni&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Zo(e),u=Cc(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(d=>{const m=[];return _t.forEach(d,D=>u.get([D.indexId,this.uid]).next(j=>{m.push(function(K,ge){const Oe=ge?new In(ge.sequenceNumber,new Yr(ju(ge.readTime),new Ht(Zs(ge.documentKey)),ge.largestBatchId)):In.empty(),st=K.fields.map(([St,xt])=>new un(is.fromServerFormat(St),xt));return new tt(K.indexId,K.collectionGroup,st,Oe)}(D,j))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Nn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Zo(e),d=Cc(e);return this.rn(e).next(m=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>_t.forEach(D,j=>{return d.put({indexId:j.indexId,uid:this.user.uid||"",sequenceNumber:m,readTime:Pl((st=o).readTime),documentKey:sn(st.documentKey.path),largestBatchId:st.largestBatchId});var st})))}updateIndexEntries(e,t){const o=new Map;return _t.forEach(t,(u,d)=>{const m=o.get(u.collectionGroup);return(m?_t.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),_t.forEach(D,j=>this.on(e,u,j).next(K=>{const ge=this.un(d,j);return K.isEqual(ge)?_t.resolve():this.an(e,d,j,K,ge)}))))})}cn(e,t,o,u){return Nl(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,u){return Nl(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const u=Nl(e);let d=new ei(xn);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(m,D)=>{d=d.add(new Hu(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}un(e,t){let o=new ei(xn);const u=this.Ze(t,e);if(null==u)return o;const d=Ft(t);if(null!=d){const m=e.data.field(d.fieldPath);if(qa(m))for(const D of m.arrayValue.values||[])o=o.add(new Hu(t.indexId,e.key,this.He(D),u))}else o=o.add(new Hu(t.indexId,e.key,Ys,u));return o}an(e,t,o,u,d){$("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(D,j,K,ge,Oe){const st=D.getIterator(),St=j.getIterator();let xt=ku(st),an=ku(St);for(;xt||an;){let Hn=!1,wi=!1;if(xt&&an){const Mi=K(xt,an);Mi<0?wi=!0:Mi>0&&(Hn=!0)}else null!=xt?wi=!0:Hn=!0;Hn?(ge(an),an=ku(St)):wi?(Oe(xt),xt=ku(st)):(xt=ku(st),an=ku(St))}}(u,d,xn,D=>{m.push(this.cn(e,t,o,D))},D=>{m.push(this.hn(e,t,o,D))}),_t.waitFor(m)}rn(e){let t=1;return Cc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((m,D)=>xn(m,D)).filter((m,D,j)=>!D||0!==xn(m,j[D-1]));const u=[];u.push(e);for(const m of o){const D=xn(m,e),j=xn(m,t);if(0===D)u[0]=e.ke();else if(D>0&&j<0)u.push(m),u.push(m.ke());else if(j>0)break}u.push(t);const d=[];for(let m=0;m<u.length;m+=2)d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Ys,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Ys,[]]));return d}}function Gg(i){return ss(i,"collectionParents")}function Nl(i){return ss(i,"indexEntries")}function Zo(i){return ss(i,"indexConfiguration")}function Cc(i){return ss(i,"indexState")}const Kf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qs{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Qs(e,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jy(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],m=IDBKeyRange.only(t.batchId);let D=0;const j=o.Wt({range:m},(ge,Oe,st)=>(D++,st.delete()));d.push(j.next(()=>{Ut(1===D)}));const K=[];for(const ge of t.mutations){const Oe=_c(e,ge.key.path,t.batchId);d.push(u.delete(Oe)),K.push(ge.key)}return _t.waitFor(d).next(()=>K)}function md(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ft();e=i.noDocument}return JSON.stringify(e).length}Qs.DEFAULT_COLLECTION_PERCENTILE=10,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qs.DEFAULT=new Qs(41943040,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qs.DISABLED=new Qs(-1,0,0);class Wg{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.ln={}}static Yt(e,t,o,u){Ut(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Wg(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return la(e).Wt({index:"userMutationsIndex",range:o},(u,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=Gu(e),m=la(e);return m.add({}).next(D=>{Ut("number"==typeof D);const j=new Eh(D,t,o,u),K=function(st,St,xt){const an=xt.baseMutations.map(wi=>su(st.Jt,wi)),Hn=xt.mutations.map(wi=>su(st.Jt,wi));return{userId:St,batchId:xt.batchId,localWriteTimeMs:xt.localWriteTime.toMillis(),baseMutations:an,mutations:Hn}}(this.M,this.userId,j),ge=[];let Oe=new ei((st,St)=>Nn(st.canonicalString(),St.canonicalString()));for(const st of u){const St=_c(this.userId,st.key.path,D);Oe=Oe.add(st.key.path.popLast()),ge.push(m.put(K)),ge.push(d.put(St,Lf))}return Oe.forEach(st=>{ge.push(this.indexManager.addToCollectionParentIndex(e,st))}),e.addOnCommittedListener(()=>{this.ln[D]=j.keys()}),_t.waitFor(ge).next(()=>j)})}lookupMutationBatch(e,t){return la(e).get(t).next(o=>o?(Ut(o.userId===this.userId),$u(this.M,o)):null)}fn(e,t){return this.ln[t]?_t.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.ln[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return la(e).Wt({index:"userMutationsIndex",range:u},(m,D,j)=>{D.userId===this.userId&&(Ut(D.batchId>=o),d=$u(this.M,D)),j.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return la(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return la(e).qt("userMutationsIndex",t).next(o=>o.map(u=>$u(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Oa(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return Gu(e).Wt({range:u},(m,D,j)=>{const[K,ge,Oe]=m,st=Zs(ge);if(K===this.userId&&t.path.isEqual(st))return la(e).get(Oe).next(St=>{if(!St)throw ft();Ut(St.userId===this.userId),d.push($u(this.M,St))});j.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new ei(Nn);const u=[];return t.forEach(d=>{const m=Oa(this.userId,d.path),D=IDBKeyRange.lowerBound(m),j=Gu(e).Wt({range:D},(K,ge,Oe)=>{const[st,St,xt]=K,an=Zs(St);st===this.userId&&d.path.isEqual(an)?o=o.add(xt):Oe.done()});u.push(j)}),_t.waitFor(u).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=Oa(this.userId,o),m=IDBKeyRange.lowerBound(d);let D=new ei(Nn);return Gu(e).Wt({range:m},(j,K,ge)=>{const[Oe,st,St]=j,xt=Zs(st);Oe===this.userId&&o.isPrefixOf(xt)?xt.length===u&&(D=D.add(St)):ge.done()}).next(()=>this.dn(e,D))}dn(e,t){const o=[],u=[];return t.forEach(d=>{u.push(la(e).get(d).next(m=>{if(null===m)throw ft();Ut(m.userId===this.userId),o.push($u(this.M,m))}))}),_t.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return jy(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),_t.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return _t.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Gu(e).Wt({range:o},(d,m,D)=>{if(d[0]===this.userId){const j=Zs(d[1]);u.push(j)}else D.done()}).next(()=>{Ut(0===u.length)})})}containsKey(e,t){return yd(e,this.userId,t)}wn(e){return bh(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yd(i,e,t){const o=Oa(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Gu(i).Wt({range:d,jt:!0},(D,j,K)=>{const[ge,Oe,st]=D;ge===e&&Oe===u&&(m=!0),K.done()}).next(()=>m)}function la(i){return ss(i,"mutations")}function Gu(i){return ss(i,"documentMutations")}function bh(i){return ss(i,"mutationQueues")}class ou{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ou(0)}static yn(){return new ou(-1)}}class Hv{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new ou(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>tn.fromTimestamp(new Pi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.In(e,u)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Tc(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(Ut(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return Tc(e).Wt((m,D)=>{const j=Ic(D);j.sequenceNumber<=t&&null===o.get(j.targetId)&&(u++,d.push(this.removeTargetData(e,j)))}).next(()=>_t.waitFor(d)).next(()=>u)}forEachTarget(e,t){return Tc(e).Wt((o,u)=>{const d=Ic(u);t(d)})}pn(e){return zg(e).get("targetGlobalKey").next(t=>(Ut(null!==t),t))}In(e,t){return zg(e).put("targetGlobalKey",t)}Tn(e,t){return Tc(e).put(Fy(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=hs(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Tc(e).Wt({range:u,index:"queryTargetsIndex"},(m,D,j)=>{const K=Ic(D);Ks(t,K.target)&&(d=K,j.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=Wu(e);return t.forEach(m=>{const D=sn(m.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,m))}),_t.waitFor(u)}removeMatchingKeys(e,t,o){const u=Wu(e);return _t.forEach(t,d=>{const m=sn(d.path);return _t.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=Wu(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Wu(e);let d=Vn();return u.Wt({range:o,jt:!0},(m,D,j)=>{const K=Zs(m[1]),ge=new Ht(K);d=d.add(ge)}).next(()=>d)}containsKey(e,t){const o=sn(t.path),u=IDBKeyRange.bound([o],[za(o)],!1,!0);let d=0;return Wu(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([m,D],j,K)=>{0!==m&&(d++,K.done())}).next(()=>d>0)}Et(e,t){return Tc(e).get(t).next(o=>o?Ic(o):null)}}function Tc(i){return ss(i,"targets")}function zg(i){return ss(i,"targetGlobal")}function Wu(i){return ss(i,"targetDocuments")}function Fl(i){return Ch.apply(this,arguments)}function Ch(){return Ch=(0,F.Z)(function*(i){if(i.code!==Ye.FAILED_PRECONDITION||i.message!==jf)throw i;$("LocalStore","Unexpectedly lost primary lease")}),Ch.apply(this,arguments)}function $y([i,e],[t,o]){const u=Nn(i,t);return 0===u?Nn(e,o):u}class Hy{constructor(e){this.An=e,this.buffer=new ei($y),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();$y(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Gv{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;$("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,F.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){Uu(u)?$("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Fl(u)}yield t.Sn(e)}))}}class Kg{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return _t.resolve(Xi.A);const o=new Hy(t);return this.Dn.forEachTarget(e,u=>o.bn(u.sequenceNumber)).next(()=>this.Dn.xn(e,u=>o.bn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector","Garbage collection skipped; disabled"),_t.resolve(Kf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kf):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,u,d,m,D,j,K;const ge=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Oe=>(Oe>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Oe}`),u=this.params.maximumSequenceNumbersToCollect):u=Oe,m=Date.now(),this.nthSequenceNumber(e,u))).next(Oe=>(o=Oe,D=Date.now(),this.removeTargets(e,o,t))).next(Oe=>(d=Oe,j=Date.now(),this.removeOrphanedDocuments(e,o))).next(Oe=>(K=Date.now(),M()<=Ue.in.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-ge}ms\n\tDetermined least recently used ${u} in `+(D-m)+`ms\n\tRemoved ${d} targets in `+(j-D)+`ms\n\tRemoved ${Oe} documents in `+(K-j)+`ms\nTotal Duration: ${K-ge}ms`),_t.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:Oe})))}}class qg{constructor(e,t){this.db=e,this.garbageCollector=new Kg(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,u)=>t(u))}addReference(e,t,o){return Th(e,o)}removeReference(e,t,o){return Th(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Th(e,t)}On(e,t){return function(o,u){let d=!1;return bh(o).zt(m=>yd(o,m,u).next(D=>(D&&(d=!0),_t.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Mn(e,(m,D)=>{if(D<=t){const j=this.On(e,m).next(K=>{if(!K)return d++,o.getEntry(e,m).next(()=>(o.removeEntry(m,tn.min()),Wu(e).delete([0,sn(m.path)])))});u.push(j)}}).next(()=>_t.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Th(e,t)}Mn(e,t){const o=Wu(e);let u,d=Xi.A;return o.Wt({index:"documentTargetsIndex"},([m,D],{path:j,sequenceNumber:K})=>{0===m?(d!==Xi.A&&t(new Ht(Zs(u)),d),d=K,u=j):d=Xi.A}).next(()=>{d!==Xi.A&&t(new Ht(Zs(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Th(i,e){return Wu(i).put((o=i.currentSequenceNumber,{targetId:0,path:sn(e.path),sequenceNumber:o}));var o}class Ah{constructor(){this.changes=new Ra(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,je.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?_t.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wv{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Ac(e).put(o)}removeEntry(e,t,o){return Ac(e).delete(function(u,d){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Ih(d),m[m.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=je.newInvalidDocument(t);return Ac(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(t))},(u,d)=>{o=this.$n(t,d)}).next(()=>o)}Bn(e,t){let o={size:0,document:je.newInvalidDocument(t)};return Ac(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(t))},(u,d)=>{o={document:this.$n(t,d),size:md(d)}}).next(()=>o)}getEntries(e,t){let o=Io();return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);o=o.insert(u,m)}).next(()=>o)}Un(e,t){let o=Io(),u=new er(Ht.comparator);return this.Ln(e,t,(d,m)=>{const D=this.$n(d,m);o=o.insert(d,D),u=u.insert(d,md(m))}).next(()=>({documents:o,qn:u}))}Ln(e,t,o){if(t.isEmpty())return _t.resolve();let u=new ei(zy);t.forEach(j=>u=u.add(j));const d=IDBKeyRange.bound(Sh(u.first()),Sh(u.last())),m=u.getIterator();let D=m.getNext();return Ac(e).Wt({index:"documentKeyIndex",range:d},(j,K,ge)=>{const Oe=Ht.fromSegments([...K.prefixPath,K.collectionGroup,K.documentId]);for(;D&&zy(D,Oe)<0;)o(D,null),D=m.getNext();D&&D.isEqual(Oe)&&(o(D,K),D=m.hasNext()?m.getNext():null),D?ge.Ut(Sh(D)):ge.done()}).next(()=>{for(;D;)o(D,null),D=m.hasNext()?m.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),Ih(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ac(e).qt(IDBKeyRange.bound(u,d,!0)).next(m=>{let D=Io();for(const j of m){const K=this.$n(Ht.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);D=D.insert(K.key,K)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=Io();const m=Wy(t,o),D=Wy(t,Yr.max());return Ac(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,D,!0)},(j,K,ge)=>{const Oe=this.$n(Ht.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);d=d.insert(Oe.key,Oe),d.size===u&&ge.done()}).next(()=>d)}newChangeBuffer(e){return new zv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Gy(e).get("remoteDocumentGlobalKey").next(t=>(Ut(!!t),t))}Fn(e,t){return Gy(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function Ny(i,e){let t;if(e.document)t=yc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ht.fromSegments(e.noDocument.path),u=ju(e.noDocument.readTime);t=je.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const o=Ht.fromSegments(e.unknownDocument.path),u=ju(e.unknownDocument.version);t=je.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Pi(o[0],o[1]);return tn.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(tn.min()))return o}return je.newInvalidDocument(e)}}class zv extends Ah{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Ra(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new ei((d,m)=>Nn(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const D=this.Gn.get(d);if(t.push(this.Kn.removeEntry(e,d,D.readTime)),m.isValidDocument()){const j=$f(this.Kn.M,m);u=u.add(d.path.popLast()),o+=md(j)-D.size,t.push(this.Kn.addEntry(e,d,j))}else if(o-=D.size,this.trackRemovals){const j=$f(this.Kn.M,m.convertToNoDocument(tn.min()));t.push(this.Kn.addEntry(e,d,j))}}),u.forEach(d=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Kn.updateMetadata(e,o)),_t.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:u})=>(u.forEach((d,m)=>{this.Gn.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function Gy(i){return ss(i,"remoteDocumentGlobal")}function Ac(i){return ss(i,"remoteDocumentsV14")}function Sh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Wy(i,e){const t=e.documentKey.path.toArray();return[i,Ih(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zy(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=Nn(t[d],o[d]),u)return u;return u=Nn(t.length,o.length),u||(u=Nn(t[t.length-2],o[o.length-2]),u||Nn(t[t.length-1],o[o.length-1]))}class Kv{constructor(e){this.M=e}kt(e,t,o,u){const d=new dd("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ol,{unique:!0}),D.createObjectStore("documentMutations"),Ky(e),function(D){D.createObjectStore("remoteDocuments")}(e));let m=_t.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),Ky(e)),m=m.next(()=>function(D){const j=D.store("targetGlobal"),K={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tn.min().toTimestamp(),targetCount:0};return j.put("targetGlobalKey",K)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(D,j){return j.store("mutations").qt().next(K=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ol,{unique:!0});const ge=j.store("mutations"),Oe=K.map(st=>ge.put(st));return _t.waitFor(Oe)})}(e,d))),m=m.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(m=m.next(()=>this.Qn(d))),o<6&&u>=6&&(m=m.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.jn(d)))),o<7&&u>=7&&(m=m.next(()=>this.Wn(d))),o<8&&u>=8&&(m=m.next(()=>this.zn(e,d))),o<9&&u>=9&&(m=m.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(m=m.next(()=>this.Hn(d))),o<11&&u>=11&&(m=m.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(m=m.next(()=>{!function(D){const j=D.createObjectStore("documentOverlays",{keyPath:Pg});j.createIndex("collectionPathOverlayIndex",Bf,{unique:!1}),j.createIndex("collectionGroupOverlayIndex",kg,{unique:!1})}(e)})),o<13&&u>=13&&(m=m.next(()=>function(D){const j=D.createObjectStore("remoteDocumentsV14",{keyPath:Pa});j.createIndex("documentKeyIndex",vc),j.createIndex("collectionGroupIndex",ud)}(e)).next(()=>this.Jn(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>{!function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Uf}).createIndex("sequenceNumberIndex",Ry,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Oy}).createIndex("documentKeyIndex",Py,{unique:!1})}(e)})),m}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=md(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>_t.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",m).next(D=>_t.forEach(D,j=>{Ut(j.userId===d.userId);const K=$u(this.M,j);return jy(e,d.userId,K).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Wt((m,D)=>{const j=new pr(m),K=[0,sn(j)];d.push(t.get(K).next(ge=>ge?_t.resolve():t.put({targetId:0,path:sn(j),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>_t.waitFor(d))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:cd});const o=t.store("collectionParents"),u=new bc,d=m=>{if(u.add(m)){const D=m.lastSegment(),j=m.popLast();return o.put({collectionId:D,parent:sn(j)})}};return t.store("remoteDocuments").Wt({jt:!0},(m,D)=>{const j=new pr(m);return d(j.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([m,D,j],K)=>{const ge=Zs(D);return d(ge.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,u)=>{const d=Ic(u),m=Fy(this.M,d);return t.put(m)})}Jn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((d,m)=>{const D=t.store("remoteDocumentsV14"),j=(K=m,K.document?new Ht(pr.fromString(K.document.name).popFirst(5)):K.noDocument?Ht.fromSegments(K.noDocument.path):K.unknownDocument?Ht.fromSegments(K.unknownDocument.path):ft()).path.toArray();var K;const ge={prefixPath:j.slice(0,j.length-2),collectionGroup:j[j.length-2],documentId:j[j.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};u.push(D.put(ge))}).next(()=>_t.waitFor(u))}}function Ky(i){i.createObjectStore("targetDocuments",{keyPath:Ec}).createIndex("documentTargetsIndex",Vf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ld,{unique:!0}),i.createObjectStore("targetGlobal")}const Zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Na{constructor(e,t,o,u,d,m,D,j,K,ge,Oe=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=d,this.window=m,this.document=D,this.Xn=K,this.Zn=ge,this.ts=Oe,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=st=>Promise.resolve(),!Na.vt())throw new Dt(Ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qg(this,u),this.hs=t+"main",this.M=new wc(j),this.ls=new ua(this.hs,this.ts,new Kv(this.M)),this.fs=new Hv(this.referenceDelegate,this.M),this.ds=new Wv(this.M),this._s=new Ly,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===ge&&se("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Dt(Ye.FAILED_PRECONDITION,Zg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Xi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,F.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,F.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,F.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Uu(e))return $("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ll(e).get("owner").next(t=>_t.resolve(this.bs(t)))}Vs(e){return Mh(e).delete(this.clientId)}vs(){var e=this;return(0,F.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=ss(o,"clientMetadata");return u.qt().next(d=>{const m=e.Ds(d,18e5),D=d.filter(j=>-1===m.indexOf(j));return _t.forEach(D,j=>u.delete(j.clientId)).next(()=>D)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?_t.resolve(!0):Ll(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Dt(Ye.FAILED_PRECONDITION,Zg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mh(e).qt().next(o=>void 0===this.Ds(o,5e3).find(u=>{if(this.clientId!==u.clientId){const m=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||m&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,F.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new fd(t,Xi.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Mh(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Wg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Hg(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Wf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){$("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=14===(m=this.ts)?Fg:13===m?Ng:12===m?ky:11===m?mh:void ft();var m;let D;return this.ls.runTransaction(e,u,d,j=>(D=new fd(j,this.es?this.es.next():Xi.A),"readwrite-primary"===t?this.Es(D).next(K=>!!K||this.As(D)).next(K=>{if(!K)throw se(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Dt(Ye.FAILED_PRECONDITION,jf);return o(D)}).next(K=>this.Ps(D).next(()=>K)):this.$s(D).next(()=>o(D)))).then(j=>(D.raiseOnCommittedEvent(),j))}$s(e){return Ll(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Dt(Ye.FAILED_PRECONDITION,Zg)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ll(e).put("owner",t)}static vt(){return ua.vt()}Rs(e){const t=Ll(e);return t.get("owner").next(o=>this.bs(o)?($("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):_t.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(se(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Le.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return $("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return se("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){se("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ll(i){return ss(i,"owner")}function Mh(i){return ss(i,"clientMetadata")}function xh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class qf{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(u=>{for(const d of o)d.applyToLocalView(u);return u})}qs(e,t){e.forEach((o,u)=>{for(const d of t)d.applyToLocalView(u)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return Ht.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.js(e,t.path):yl(t)?this.Ws(e,t,o):this.zs(e,t,o);var u}js(e,t){return this.Ls(e,new Ht(t)).next(o=>{let u=id();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}Ws(e,t,o){const u=t.collectionGroup;let d=id();return this.indexManager.getCollectionParents(e,u).next(m=>_t.forEach(m,D=>{const j=(K=t,ge=D.child(u),new Eo(ge,null,K.explicitOrderBy.slice(),K.filters.slice(),K.limit,K.limitType,K.startAt,K.endAt));var K,ge;return this.zs(e,j,o).next(K=>{K.forEach((ge,Oe)=>{d=d.insert(ge,Oe)})})}).next(()=>d))}zs(e,t,o){let u;return this.ds.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(d=>{for(const m of d)for(const D of m.mutations){const j=D.key;let K=u.get(j);null==K&&(K=je.newInvalidDocument(j),u=u.insert(j,K)),lc(D,K,m.localWriteTime),K.isFoundDocument()||(u=u.remove(j))}}).next(()=>(u.forEach((d,m)=>{ed(t,m)||(u=u.remove(d))}),u))}}class Rh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=u}static Ys(e,t){let o=Vn(),u=Vn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Rh(e,t.fromCache,o,u)}}class Oh{Xs(e){this.Zs=e}Qs(e,t,o,u){return 0===(d=t).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||o.isEqual(tn.min())?this.ti(e,t):this.Zs.Ks(e,u).next(d=>{const m=this.ei(t,d);return(sc(t)||Au(t))&&this.ni(t.limitType,m,u,o)?this.ti(e,t):(M()<=Ue.in.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Jc(t)),this.Zs.Qs(e,t,dr(o,-1)).next(D=>(m.forEach(j=>{D=D.insert(j.key,j)}),D)))});var d}ei(e,t){let o=new ei(eh(e));return t.forEach((u,d)=>{ed(e,d)&&(o=o.add(d))}),o}ni(e,t,o,u){if(o.size!==t.size)return!0;const d="F"===e?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}ti(e,t){return M()<=Ue.in.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Jc(t)),this.Zs.Qs(e,t,Yr.min())}}class qy{constructor(e,t,o,u){this.persistence=e,this.si=t,this.M=u,this.ii=new er(Nn),this.ri=new Ra(d=>hs(d),Ks),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(o)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new qf(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function au(i,e,t,o){return new qy(i,e,t,o)}function Zf(i,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,F.Z)(function*(i,e){const t=Ct(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.Bs.getAllMutationBatches(o).next(d=>(u=d,t.ai(e),t.Bs.getAllMutationBatches(o))).next(d=>{const m=[],D=[];let j=Vn();for(const K of u){m.push(K.batchId);for(const ge of K.mutations)j=j.add(ge.key)}for(const K of d){D.push(K.batchId);for(const ge of K.mutations)j=j.add(ge.key)}return t.ci.Ks(o,j).next(K=>({hi:K,removedBatchIds:m,addedBatchIds:D}))})})}),Yf.apply(this,arguments)}function Qf(i,e){const t=Ct(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.ui.newChangeBuffer({trackRemovals:!0});return function(m,D,j,K){const ge=j.batch,Oe=ge.keys();let st=_t.resolve();return Oe.forEach(St=>{st=st.next(()=>K.getEntry(D,St)).next(xt=>{const an=j.docVersions.get(St);Ut(null!==an),xt.version.compareTo(an)<0&&(ge.applyToRemoteDocument(xt,j),xt.isValidDocument()&&(xt.setReadTime(j.commitVersion),K.addEntry(xt)))})}),st.next(()=>m.Bs.removeMutationBatch(D,ge))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.ci.Ks(o,u))})}function Yg(i){const e=Ct(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Qg(i,e){const t=Ct(i),o=e.snapshotVersion;let u=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.ui.newChangeBuffer({trackRemovals:!0});u=t.ii;const D=[];e.targetChanges.forEach((K,ge)=>{const Oe=u.get(ge);if(!Oe)return;D.push(t.fs.removeMatchingKeys(d,K.removedDocuments,ge).next(()=>t.fs.addMatchingKeys(d,K.addedDocuments,ge)));let st=Oe.withSequenceNumber(d.currentSequenceNumber);var St,xt,an;e.targetMismatches.has(ge)?st=st.withResumeToken(Jn.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):K.resumeToken.approximateByteSize()>0&&(st=st.withResumeToken(K.resumeToken,o)),u=u.insert(ge,st),xt=st,an=K,(0===(St=Oe).resumeToken.approximateByteSize()||xt.snapshotVersion.toMicroseconds()-St.snapshotVersion.toMicroseconds()>=3e8||an.addedDocuments.size+an.modifiedDocuments.size+an.removedDocuments.size>0)&&D.push(t.fs.updateTargetData(d,st))});let j=Io();if(e.documentUpdates.forEach(K=>{e.resolvedLimboDocuments.has(K)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,K))}),D.push(Xg(d,m,e.documentUpdates).next(K=>{j=K})),!o.isEqual(tn.min())){const K=t.fs.getLastRemoteSnapshotVersion(d).next(ge=>t.fs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(K)}return _t.waitFor(D).next(()=>m.apply(d)).next(()=>t.ci.Gs(d,j)).next(()=>j)}).then(d=>(t.ii=u,d))}function Xg(i,e,t){let o=Vn();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let d=Io();return t.forEach((m,D)=>{const j=u.get(m);D.isNoDocument()&&D.version.isEqual(tn.min())?(e.removeEntry(m,D.readTime),d=d.insert(m,D)):!j.isValidDocument()||D.version.compareTo(j.version)>0||0===D.version.compareTo(j.version)&&j.hasPendingWrites?(e.addEntry(D),d=d.insert(m,D)):$("LocalStore","Ignoring outdated watch update for ",m,". Current version:",j.version," Watch version:",D.version)}),d})}function Zy(i,e){const t=Ct(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function Fa(i,e){const t=Ct(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.fs.getTargetData(o,e).next(d=>d?(u=d,_t.resolve(u)):t.fs.allocateTargetId(o).next(m=>(u=new ka(e,m,0,o.currentSequenceNumber),t.fs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.ii.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.ii=t.ii.insert(o.targetId,o),t.ri.set(e,o.targetId)),o})}function ca(i,e,t){return _d.apply(this,arguments)}function _d(){return _d=(0,F.Z)(function*(i,e,t){const o=Ct(i),u=o.ii.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!Uu(m))throw m;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}o.ii=o.ii.remove(e),o.ri.delete(u.target)}),_d.apply(this,arguments)}function uu(i,e,t){const o=Ct(i);let u=tn.min(),d=Vn();return o.persistence.runTransaction("Execute query","readonly",m=>function(D,j,K){const ge=Ct(D),Oe=ge.ri.get(K);return void 0!==Oe?_t.resolve(ge.ii.get(Oe)):ge.fs.getTargetData(j,K)}(o,m,co(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(m,D.targetId).next(j=>{d=j})}).next(()=>o.si.Qs(m,e,t?u:tn.min(),t?d:Vn())).next(D=>(Jg(o,ac(e),D),{documents:D,li:d})))}function Sc(i,e){const t=Ct(i),o=Ct(t.fs),u=t.ii.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.Et(d,e).next(m=>m?m.target:null))}function Vl(i,e){const t=Ct(i),o=t.oi.get(e)||tn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.ui.getAllFromCollectionGroup(u,e,dr(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Jg(t,e,u),u))}function Jg(i,e,t){let o=tn.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.oi.set(e,o)}function Ph(){return Ph=(0,F.Z)(function*(i,e,t,o){const u=Ct(i);let d=Vn(),m=Io();for(const K of t){const ge=e.fi(K.metadata.name);K.document&&(d=d.add(ge));const Oe=e.di(K);Oe.setReadTime(e._i(K.metadata.readTime)),m=m.insert(ge,Oe)}const D=u.ui.newChangeBuffer({trackRemovals:!0}),j=yield Fa(u,(K=o,co(No(pr.fromString(`__bundle__/docs/${K}`)))));var K;return u.persistence.runTransaction("Apply bundle documents","readwrite",K=>Xg(K,D,m).next(ge=>(D.apply(K),ge)).next(ge=>u.fs.removeMatchingKeysForTargetId(K,j.targetId).next(()=>u.fs.addMatchingKeys(K,d,j.targetId)).next(()=>u.ci.Gs(K,ge)).next(()=>ge)))}),Ph.apply(this,arguments)}function Xf(i,e){return vd.apply(this,arguments)}function vd(){return vd=(0,F.Z)(function*(i,e,t=Vn()){const o=yield Fa(i,co(Dh(e.bundledQuery))),u=Ct(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=fs(e.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u._s.saveNamedQuery(d,e);const D=o.withResumeToken(Jn.EMPTY_BYTE_STRING,m);return u.ii=u.ii.insert(D.targetId,D),u.fs.updateTargetData(d,D).next(()=>u.fs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.fs.addMatchingKeys(d,t,o.targetId)).next(()=>u._s.saveNamedQuery(d,e))})}),vd.apply(this,arguments)}class tm{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return _t.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var o;return this.wi.set(t.id,{id:(o=t).id,version:o.version,createTime:fs(o.createTime)}),_t.resolve()}getNamedQuery(e,t){return _t.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(o=t).name,query:Dh(o.bundledQuery),readTime:fs(o.readTime)}),_t.resolve();var o}}class kh{constructor(){this.overlays=new er(Ht.comparator),this.gi=new Map}getOverlay(e,t){return _t.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.Xt(e,t,d)}),_t.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.gi.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.gi.delete(o)),_t.resolve()}getOverlaysForCollection(e,t,o){const u=pc(),d=t.length+1,m=new Ht(t.child("")),D=this.overlays.getIteratorFrom(m);for(;D.hasNext();){const j=D.getNext().value,K=j.getKey();if(!t.isPrefixOf(K.path))break;K.path.length===d&&j.largestBatchId>o&&u.set(j.getKey(),j)}return _t.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new er((K,ge)=>K-ge);const m=this.overlays.getIterator();for(;m.hasNext();){const K=m.getNext().value;if(K.getKey().getCollectionGroup()===t&&K.largestBatchId>o){let ge=d.get(K.largestBatchId);null===ge&&(ge=pc(),d=d.insert(K.largestBatchId,ge)),ge.set(K.getKey(),K)}}const D=pc(),j=d.getIterator();for(;j.hasNext()&&(j.getNext().value.forEach((K,ge)=>D.set(K,ge)),!(D.size()>=u)););return _t.resolve(D)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const m=this.gi.get(u.largestBatchId).delete(o.key);this.gi.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new wh(t,o));let d=this.gi.get(t);void 0===d&&(d=Vn(),this.gi.set(t,d)),this.gi.set(t,d.add(o.key))}}class Jf{constructor(){this.yi=new ei(Is.pi),this.Ii=new ei(Is.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const o=new Is(e,t);this.yi=this.yi.add(o),this.Ii=this.Ii.add(o)}Ei(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ai(new Is(e,t))}Ri(e,t){e.forEach(o=>this.removeReference(o,t))}Pi(e){const t=new Ht(new pr([])),o=new Is(t,e),u=new Is(t,e+1),d=[];return this.Ii.forEachInRange([o,u],m=>{this.Ai(m),d.push(m.key)}),d}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Ht(new pr([])),o=new Is(t,e),u=new Is(t,e+1);let d=Vn();return this.Ii.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new Is(e,0),o=this.yi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Is{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Ht.comparator(e.key,t.key)||Nn(e.vi,t.vi)}static Ti(e,t){return Nn(e.vi,t.vi)||Ht.comparator(e.key,t.key)}}class qv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new ei(Is.pi)}checkEmpty(e){return _t.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,u){const d=this.Si;this.Si++;const m=new Eh(d,t,o,u);this.Bs.push(m);for(const D of u)this.Di=this.Di.add(new Is(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return _t.resolve(m)}lookupMutationBatch(e,t){return _t.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.xi(t+1),d=u<0?0:u;return _t.resolve(this.Bs.length>d?this.Bs[d]:null)}getHighestUnacknowledgedBatchId(){return _t.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return _t.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Is(t,0),u=new Is(t,Number.POSITIVE_INFINITY),d=[];return this.Di.forEachInRange([o,u],m=>{const D=this.Ci(m.vi);d.push(D)}),_t.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new ei(Nn);return t.forEach(u=>{const d=new Is(u,0),m=new Is(u,Number.POSITIVE_INFINITY);this.Di.forEachInRange([d,m],D=>{o=o.add(D.vi)})}),_t.resolve(this.Ni(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;Ht.isDocumentKey(d)||(d=d.child(""));const m=new Is(new Ht(d),0);let D=new ei(Nn);return this.Di.forEachWhile(j=>{const K=j.key.path;return!!o.isPrefixOf(K)&&(K.length===u&&(D=D.add(j.vi)),!0)},m),_t.resolve(this.Ni(D))}Ni(e){const t=[];return e.forEach(o=>{const u=this.Ci(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){Ut(0===this.ki(t.batchId,"removed")),this.Bs.shift();let o=this.Di;return _t.forEach(t.mutations,u=>{const d=new Is(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Di=o})}_n(e){}containsKey(e,t){const o=new Is(t,0),u=this.Di.firstAfterOrEqual(o);return _t.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return _t.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class nm{constructor(e){this.Mi=e,this.docs=new er(Ht.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mi(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return _t.resolve(o?o.document.mutableCopy():je.newInvalidDocument(t))}getEntries(e,t){let o=Io();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():je.newInvalidDocument(u))}),_t.resolve(o)}getAllFromCollection(e,t,o){let u=Io();const d=new Ht(t.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:D,value:{document:j}}=m.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||ki(Fn(j),o)<=0||(u=u.insert(j.key,j.mutableCopy()))}return _t.resolve(u)}getAllFromCollectionGroup(e,t,o,u){ft()}Oi(e,t){return _t.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new rm(this)}getSize(e){return _t.resolve(this.size)}}class rm extends Ah{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Kn.addEntry(e,u)):this.Kn.removeEntry(o)}),_t.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Yy{constructor(e){this.persistence=e,this.Fi=new Ra(t=>hs(t),Ks),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Jf,this.targetCount=0,this.Li=ou.gn()}forEachTarget(e,t){return this.Fi.forEach((o,u)=>t(u)),_t.resolve()}getLastRemoteSnapshotVersion(e){return _t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _t.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),_t.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.$i&&(this.$i=t),_t.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new ou(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,_t.resolve()}updateTargetData(e,t){return this.Tn(t),_t.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,_t.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Fi.forEach((m,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Fi.delete(m),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),_t.waitFor(d).next(()=>u)}getTargetCount(e){return _t.resolve(this.targetCount)}getTargetData(e,t){const o=this.Fi.get(t)||null;return _t.resolve(o)}addMatchingKeys(e,t,o){return this.Bi.Ei(t,o),_t.resolve()}removeMatchingKeys(e,t,o){this.Bi.Ri(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(m=>{d.push(u.markPotentiallyOrphaned(e,m))}),_t.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),_t.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Bi.Vi(t);return _t.resolve(o)}containsKey(e,t){return _t.resolve(this.Bi.containsKey(t))}}class im{constructor(e,t){this.Ui={},this.overlays={},this.es=new Xi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Yy(this),this.indexManager=new $g,this.ds=new nm(o=>this.referenceDelegate.qi(o)),this.M=new wc(t),this._s=new tm(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ui[e.toKey()];return o||(o=new qv(t,this.referenceDelegate),this.Ui[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){$("MemoryPersistence","Starting transaction:",e);const u=new Qy(this.es.next());return this.referenceDelegate.Ki(),o(u).next(d=>this.referenceDelegate.Gi(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Qi(e,t){return _t.or(Object.values(this.Ui).map(o=>()=>o.containsKey(e,t)))}}class Qy extends Vu{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.ji=new Jf,this.Wi=null}static zi(e){return new ep(e)}get Hi(){if(this.Wi)return this.Wi;throw ft()}addReference(e,t,o){return this.ji.addReference(o,t),this.Hi.delete(o.toString()),_t.resolve()}removeReference(e,t,o){return this.ji.removeReference(o,t),this.Hi.add(o.toString()),_t.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),_t.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(u=>this.Hi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Hi.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _t.forEach(this.Hi,o=>{const u=Ht.fromPath(o);return this.Ji(e,u).next(d=>{d||t.removeEntry(u,tn.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(o=>{o?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return _t.or([()=>_t.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Do(i,e){return`firestore_clients_${i}_${e}`}function sm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function tp(i,e){return`firestore_targets_${i}_${e}`}class np{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Yi(e,t,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new Dt(u.error.code,u.error.message))),m?new np(e,t,u.state,d):(se("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Yi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Dt(o.error.code,o.error.message))),d?new Nh(e,o.state,u):(se("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ed{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=ru();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=bu(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Ed(e,d):(se("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class om{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new om(t.clientId,t.onlineState):(se("SharedClientState",`Failed to parse online state: ${e}`),null)}}class rp{constructor(){this.activeTargetIds=ru()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wd{constructor(e,t,o,u,d){this.window=e,this.Yn=t,this.persistenceKey=o,this.er=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new er(Nn),this.started=!1,this.rr=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ur=Do(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new rp),this.cr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,F.Z)(function*(){const t=yield e.syncEngine.Fs();for(const u of t){if(u===e.er)continue;const d=e.getItem(Do(e.persistenceKey,u));if(d){const m=Ed.Yi(u,d);m&&(e.ir=e.ir.insert(m.clientId,m))}}e.wr();const o=e.storage.getItem(e.dr);if(o){const u=e.mr(o);u&&e.gr(u)}for(const u of e.rr)e.sr(u);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,o){this.pr(e,t,o),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(tp(this.persistenceKey,e));if(o){const u=Nh.Yi(e,o);u&&(t=u.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tp(this.persistenceKey,e))}updateQueryState(e,t,o){this.Er(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Ir(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $("SharedClientState","READ",e,t),t}setItem(e,t){$("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const o=e;if(o.storageArea===this.storage){if($("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ur)return void se("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,F.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const u=t.Pr(o.key);return t.br(u,null)}{const u=t.Vr(o.key,o.newValue);if(u)return t.br(u.clientId,u)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const u=t.vr(o.key,o.newValue);if(u)return t.Sr(u)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(o.key===t.dr){if(null!==o.newValue){const u=t.mr(o.newValue);if(u)return t.gr(u)}}else if(o.key===t.ar){const u=function(d){let m=Xi.A;if(null!=d)try{const D=JSON.parse(d);Ut("number"==typeof D),m=D}catch(D){se("SharedClientState","Failed to read sequence number from WebStorage",D)}return m}(o.newValue);u!==Xi.A&&t.sequenceNumberHandler(u)}else if(o.key===t._r){const u=t.Nr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.kr(d)))}}else t.rr.push(o)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,o){const u=new np(this.currentUser,e,t,o),d=sm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Xi())}Ir(e){const t=sm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,o){const u=tp(this.persistenceKey,e),d=new Nh(e,t,o);this.setItem(u,d.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.Pr(e);return Ed.Yi(o,t)}vr(e,t){const o=this.hr.exec(e),u=Number(o[1]);return np.Yi(new I(void 0!==o[2]?o[2]:null),u,t)}Dr(e,t){const o=this.lr.exec(e),u=Number(o[1]);return Nh.Yi(u,t)}mr(e){return om.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,F.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);$("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const o=t?this.ir.insert(e,t):this.ir.remove(e),u=this.yr(this.ir),d=this.yr(o),m=[],D=[];return d.forEach(j=>{u.has(j)||m.push(j)}),u.forEach(j=>{d.has(j)||D.push(j)}),this.syncEngine.Fr(m,D).then(()=>{this.ir=o})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=ru();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class ip{constructor(){this.$r=new rp,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,o){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new rp,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xy{Lr(e){}shutdown(){}}class am{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Jy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class um{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class e_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,o,u,d){const m=this.uo(e,t);$("RestConnection","Sending: ",m,o);const D={};return this.ao(D,u,d),this.co(e,m,D,o).then(j=>($("RestConnection","Received: ",j),j),j=>{throw Ce("RestConnection",`${e} failed with error: `,j,"url: ",m,"request:",o),j})}ho(e,t,o,u,d){return this.oo(e,t,o,u,d)}ao(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+E,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}uo(e,t){return`${this.io}/v1/${t}:${Jy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,u){return new Promise((d,m)=>{const D=new tc;D.listenOnce(Br.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case Da.NO_ERROR:const K=D.getResponseJson();$("Connection","XHR received:",JSON.stringify(K)),d(K);break;case Da.TIMEOUT:$("Connection",'RPC "'+e+'" timed out'),m(new Dt(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case Da.HTTP_ERROR:const ge=D.getStatus();if($("Connection",'RPC "'+e+'" failed with status:',ge,"response text:",D.getResponseText()),ge>0){const Oe=D.getResponseJson().error;if(Oe&&Oe.status&&Oe.message){const st=function(St){const xt=St.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf(xt)>=0?xt:Ye.UNKNOWN}(Oe.status);m(new Dt(st,Oe.message))}else m(new Dt(Ye.UNKNOWN,"Server responded with status "+D.getStatus()))}else m(new Dt(Ye.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{$("Connection",'RPC "'+e+'" completed.')}});const j=JSON.stringify(u);D.send(t,"POST",j,o,15)})}lo(e,t,o){const u=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=jo(),m=$o(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new ba({})),this.ao(D.initMessageHeaders,t,o),(0,Le.uI)()||(0,Le.b$)()||(0,Le.d)()||(0,Le.w1)()||(0,Le.Mn)()||(0,Le.ru)()||(D.httpHeadersOverwriteParam="$httpHeaders");const j=u.join("");$("Connection","Creating WebChannel: "+j,D);const K=d.createWebChannel(j,D);let ge=!1,Oe=!1;const st=new um({Wr:xt=>{Oe?$("Connection","Not sending because WebChannel is closed:",xt):(ge||($("Connection","Opening WebChannel transport."),K.open(),ge=!0),$("Connection","WebChannel sending:",xt),K.send(xt))},zr:()=>K.close()}),St=(xt,an,Hn)=>{xt.listen(an,wi=>{try{Hn(wi)}catch(Mi){setTimeout(()=>{throw Mi},0)}})};return St(K,As.EventType.OPEN,()=>{Oe||$("Connection","WebChannel transport opened.")}),St(K,As.EventType.CLOSE,()=>{Oe||(Oe=!0,$("Connection","WebChannel transport closed"),st.no())}),St(K,As.EventType.ERROR,xt=>{Oe||(Oe=!0,Ce("Connection","WebChannel transport errored:",xt),st.no(new Dt(Ye.UNAVAILABLE,"The operation could not be completed")))}),St(K,As.EventType.MESSAGE,xt=>{var an;if(!Oe){const Hn=xt.data[0];Ut(!!Hn);const wi=Hn,Mi=wi.error||(null===(an=wi[0])||void 0===an?void 0:an.error);if(Mi){$("Connection","WebChannel received error:",Mi);const ci=Mi.status;let gs=function(Wi){const eo=Hi[Wi];if(void 0!==eo)return hc(eo)}(ci),xi=Mi.message;void 0===gs&&(gs=Ye.INTERNAL,xi="Unknown error status: "+ci+" with message "+Mi.message),Oe=!0,st.no(new Dt(gs,xi)),K.close()}else $("Connection","WebChannel received:",Hn),st.so(Hn)}}),St(m,Wa.STAT_EVENT,xt=>{xt.stat===Fs.PROXY?$("Connection","Detected buffering proxy"):xt.stat===Fs.NOPROXY&&$("Connection","Detected no buffering proxy")}),setTimeout(()=>{st.eo()},0),st}}function sp(){return"undefined"!=typeof window?window:null}function Fh(){return"undefined"!=typeof document?document:null}function Id(i){return new ch(i,!0)}class Lh{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Yn=e,this.timerId=t,this.fo=o,this._o=u,this.wo=d,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),o=Math.max(0,Date.now()-this.po),u=Math.max(0,t-o);u>0&&$("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,u,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class op{constructor(e,t,o,u,d,m,D,j){this.Yn=e,this.Ro=o,this.Po=u,this.bo=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=D,this.listener=j,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Lh(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,F.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,F.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var o=this;return(0,F.Z)(function*(){o.$o(),o.Bo(),o.Do.cancel(),o.Vo++,4!==e?o.Do.reset():t&&t.code===Ye.RESOURCE_EXHAUSTED?(se(t.toString()),se("Using maximum backoff delay to prevent overloading the backend."),o.Do.Io()):t&&t.code===Ye.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Lo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Vo===t&&this.qo(o,u)},o=>{e(()=>{const u=new Dt(Ye.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ko(u)})})}qo(e,t){const o=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{o(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(u=>{o(()=>this.Ko(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}No(){var e=this;this.state=5,this.Do.To((0,F.Z)(function*(){e.state=0,e.start()}))}Ko(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t_ extends op{constructor(e,t,o,u,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,m),this.M=d}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Nf(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(j=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===j?1:"REMOVE"===j?2:"CURRENT"===j?3:"RESET"===j?4:ft(),u=e.targetChange.targetIds||[],d=function(j,K){return j.N?(Ut(void 0===K||"string"==typeof K),Jn.fromBase64String(K||"")):(Ut(void 0===K||K instanceof Uint8Array),Jn.fromUint8Array(K||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,D=m&&function(j){const K=void 0===j.code?Ye.UNKNOWN:hc(j.code);return new Dt(K,j.message||"")}(m);t=new qs(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=li(i,o.document.name),d=fs(o.document.updateTime),m=new q({mapValue:{fields:o.document.fields}}),D=je.newFoundDocument(u,d,m);t=new zo(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=li(i,o.document),d=o.readTime?fs(o.readTime):tn.min(),m=je.newNoDocument(u,d);t=new zo([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const o=e.documentRemove,u=li(i,o.document);t=new zo([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return ft();{const o=e.filter,d=new nd(o.count||0);t=new gc(o.targetId,d)}}var j;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return tn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?tn.min():d.readTime?fs(d.readTime):tn.min()}(e);return this.listener.Qo(t,o)}jo(e){const t={};t.database=Rl(this.M),t.addTarget=function(u,d){let m;const D=d.target;return m=vo(D)?{documents:ph(u,D)}:{query:gh(u,D)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=Vo(u,d.resumeToken):d.snapshotVersion.compareTo(tn.min())>0&&(m.readTime=Sl(u,d.snapshotVersion.toTimestamp())),m}(this.M,e);const o=function c(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=Rl(this.M),t.removeTarget=e,this.Fo(t)}}class La extends op{constructor(e,t,o,u,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,m),this.M=d,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Ff(i,e){return i&&i.length>0?(Ut(void 0!==e),i.map(t=>function(o,u){let d=fs(o.updateTime?o.updateTime:u);return d.isEqual(tn.min())&&(d=fs(u)),new vl(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=fs(e.commitTime);return this.listener.Yo(o,t)}return Ut(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Rl(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>su(this.M,o))};this.Fo(t)}}class ap extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=u,this.tu=!1}eu(){if(this.tu)throw new Dt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.oo(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Dt(Ye.UNKNOWN,u.toString())})}ho(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ho(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Dt(Ye.UNKNOWN,u.toString())})}terminate(){this.tu=!0}}class n_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(se(t),this.iu=!1):$("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class r_{constructor(e,t,o,u,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=d,this._u.Lr(D=>{o.enqueueAndForget((0,F.Z)(function*(){var j;zu(m)&&($("RemoteStore","Restarting streams for network reachability change."),yield(j=(0,F.Z)(function*(K){const ge=Ct(K);ge.fu.add(4),yield Mc(ge),ge.wu.set("Unknown"),ge.fu.delete(4),yield Vh(ge)}),function(K){return j.apply(this,arguments)})(m))}))}),this.wu=new n_(o,u)}}function Vh(i){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,F.Z)(function*(i){if(zu(i))for(const e of i.du)yield e(!0)}),Uh.apply(this,arguments)}function Mc(i){return up.apply(this,arguments)}function up(){return up=(0,F.Z)(function*(i){for(const e of i.du)yield e(!1)}),up.apply(this,arguments)}function Bh(i,e){const t=Ct(i);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Dd(t)?xc(t):Ku(t).xo()&&lp(t,e))}function Ul(i,e){const t=Ct(i),o=Ku(t);t.lu.delete(e),o.xo()&&lm(t,e),0===t.lu.size&&(o.xo()?o.Mo():zu(t)&&t.wu.set("Unknown"))}function lp(i,e){i.mu.Z(e.targetId),Ku(i).jo(e)}function lm(i,e){i.mu.Z(e),Ku(i).Wo(e)}function xc(i){i.mu=new sd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.lu.get(e)||null}),Ku(i).start(),i.wu.ru()}function Dd(i){return zu(i)&&!Ku(i).Co()&&i.lu.size>0}function zu(i){return 0===Ct(i).fu.size}function jh(i){i.mu=void 0}function cp(i){return $h.apply(this,arguments)}function $h(){return $h=(0,F.Z)(function*(i){i.lu.forEach((e,t)=>{lp(i,e)})}),$h.apply(this,arguments)}function i_(i,e){return dp.apply(this,arguments)}function dp(){return dp=(0,F.Z)(function*(i,e){jh(i),Dd(i)?(i.wu.au(e),xc(i)):i.wu.set("Unknown")}),dp.apply(this,arguments)}function hp(i,e,t){return cm.apply(this,arguments)}function cm(){return cm=(0,F.Z)(function*(i,e,t){if(i.wu.set("Online"),e instanceof qs&&2===e.state&&e.cause)try{yield(o=(0,F.Z)(function*(u,d){const m=d.cause;for(const D of d.targetIds)u.lu.has(D)&&(yield u.remoteSyncer.rejectListen(D,m),u.lu.delete(D),u.mu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Hh(i,o)}else if(e instanceof zo?i.mu.ut(e):e instanceof gc?i.mu._t(e):i.mu.ht(e),!t.isEqual(tn.min()))try{const o=yield Yg(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const m=u.mu.yt(d);return m.targetChanges.forEach((D,j)=>{if(D.resumeToken.approximateByteSize()>0){const K=u.lu.get(j);K&&u.lu.set(j,K.withResumeToken(D.resumeToken,d))}}),m.targetMismatches.forEach(D=>{const j=u.lu.get(D);if(!j)return;u.lu.set(D,j.withResumeToken(Jn.EMPTY_BYTE_STRING,j.snapshotVersion)),lm(u,D);const K=new ka(j.target,D,1,j.sequenceNumber);lp(u,K)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t))}catch(o){$("RemoteStore","Failed to raise snapshot:",o),yield Hh(i,o)}var o}),cm.apply(this,arguments)}function Hh(i,e,t){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,F.Z)(function*(i,e,t){if(!Uu(e))throw e;i.fu.add(1),yield Mc(i),i.wu.set("Offline"),t||(t=()=>Yg(i.localStore)),i.asyncQueue.enqueueRetryable((0,F.Z)(function*(){$("RemoteStore","Retrying IndexedDB access"),yield t(),i.fu.delete(1),yield Vh(i)}))}),Gh.apply(this,arguments)}function fp(i,e){return e().catch(t=>Hh(i,t,e))}function Bl(i){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,F.Z)(function*(i){const e=Ct(i),t=qu(e);let o=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;dm(e);)try{const u=yield Zy(e.localStore,o);if(null===u){0===e.hu.length&&t.Mo();break}o=u.batchId,lu(e,u)}catch(u){yield Hh(e,u)}bd(e)&&hm(e)}),Wh.apply(this,arguments)}function dm(i){return zu(i)&&i.hu.length<10}function lu(i,e){i.hu.push(e);const t=qu(i);t.xo()&&t.Ho&&t.Jo(e.mutations)}function bd(i){return zu(i)&&!qu(i).Co()&&i.hu.length>0}function hm(i){qu(i).start()}function s_(i){return fm.apply(this,arguments)}function fm(){return fm=(0,F.Z)(function*(i){qu(i).Zo()}),fm.apply(this,arguments)}function pp(i){return zh.apply(this,arguments)}function zh(){return zh=(0,F.Z)(function*(i){const e=qu(i);for(const t of i.hu)e.Jo(t.mutations)}),zh.apply(this,arguments)}function gp(i,e,t){return jl.apply(this,arguments)}function jl(){return jl=(0,F.Z)(function*(i,e,t){const o=i.hu.shift(),u=pd.from(o,e,t);yield fp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Bl(i)}),jl.apply(this,arguments)}function o_(i,e){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,F.Z)(function*(i,e){var t;e&&qu(i).Ho&&(yield(t=(0,F.Z)(function*(o,u){if(Pu(d=u.code)&&d!==Ye.ABORTED){const m=o.hu.shift();qu(o).ko(),yield fp(o,()=>o.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield Bl(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),bd(i)&&hm(i)}),Cd.apply(this,arguments)}function mp(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,F.Z)(function*(i,e){const t=Ct(i);t.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");const o=zu(t);t.fu.add(3),yield Mc(t),o&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Vh(t)}),Kh.apply(this,arguments)}function qh(i,e){return yp.apply(this,arguments)}function yp(){return yp=(0,F.Z)(function*(i,e){const t=Ct(i);e?(t.fu.delete(2),yield Vh(t)):e||(t.fu.add(2),yield Mc(t),t.wu.set("Unknown"))}),yp.apply(this,arguments)}function Ku(i){return i.gu||(i.gu=function(e,t,o){const u=Ct(e);return u.eu(),new t_(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:cp.bind(null,i),Yr:i_.bind(null,i),Qo:hp.bind(null,i)}),i.du.push(function(){var e=(0,F.Z)(function*(t){t?(i.gu.ko(),Dd(i)?xc(i):i.wu.set("Unknown")):(yield i.gu.stop(),jh(i))});return function(t){return e.apply(this,arguments)}}())),i.gu}function qu(i){return i.yu||(i.yu=function(e,t,o){const u=Ct(e);return u.eu(),new La(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:s_.bind(null,i),Yr:o_.bind(null,i),Xo:pp.bind(null,i),Yo:gp.bind(null,i)}),i.du.push(function(){var e=(0,F.Z)(function*(t){t?(i.yu.ko(),yield Bl(i)):(yield i.yu.stop(),i.hu.length>0&&($("RemoteStore",`Stopping write stream with ${i.hu.length} pending writes`),i.hu=[]))});return function(t){return e.apply(this,arguments)}}())),i.yu}class _p{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,o,u,d){const m=Date.now()+o,D=new _p(e,t,m,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Dt(Ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $l(i,e){if(se("AsyncQueue",`${e}: ${i}`),Uu(i))return new Dt(Ye.UNAVAILABLE,`${e}: ${i}`);throw i}class da{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ht.comparator(t.key,o.key):(t,o)=>Ht.comparator(t.key,o.key),this.keyedMap=id(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new da(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new da;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class vp{constructor(){this.pu=new er(Ht.comparator)}track(e){const t=e.doc.key,o=this.pu.get(t);o?0!==e.type&&3===o.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==o.type?this.pu=this.pu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.pu=this.pu.remove(t):1===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):ft():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Rc{constructor(e,t,o,u,d,m,D,j){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=D,this.excludesMetadataChanges=j}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Rc(e,t,da.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class a_{constructor(){this.Tu=void 0,this.listeners=[]}}class Oc{constructor(){this.queries=new Ra(e=>Jd(e),Fo),this.onlineState="Unknown",this.Eu=new Set}}function Ep(i,e){return wp.apply(this,arguments)}function wp(){return wp=(0,F.Z)(function*(i,e){const t=Ct(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new a_),u)try{d.Tu=yield t.onListen(o)}catch(m){const D=$l(m,`Initialization of query '${Jc(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.Au(t.onlineState),d.Tu&&e.Ru(d.Tu)&&Zh(t)}),wp.apply(this,arguments)}function Ip(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,F.Z)(function*(i,e){const t=Ct(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Dp.apply(this,arguments)}function ha(i,e){const t=Ct(i);let o=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const D of m.listeners)D.Ru(u)&&(o=!0);m.Tu=u}}o&&Zh(t)}function bp(i,e,t){const o=Ct(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Zh(i){i.Eu.forEach(e=>{e.next()})}class Yh{constructor(e,t,o){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}Ru(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Rc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class pm{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class Cp{constructor(e){this.M=e}fi(e){return li(this.M,e)}di(e){return e.metadata.exists?yc(this.M,e.document,!1):je.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return fs(e)}}class u_{constructor(e,t,o){this.Nu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gm(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=pr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new Cp(this.M);for(const u of e)if(u.metadata.queries){const d=o.fi(u.metadata.name);for(const m of u.metadata.queries){const D=(t.get(m)||Vn()).add(d);t.set(m,D)}}return t}complete(){var e=this;return(0,F.Z)(function*(){const t=yield function em(i,e,t,o){return Ph.apply(this,arguments)}(e.localStore,new Cp(e.M),e.documents,e.Nu.id),o=e.Mu(e.documents);for(const u of e.queries)yield Xf(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function gm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class mm{constructor(e){this.key=e}}class ym{constructor(e){this.key=e}}class Tp{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Vn(),this.mutatedKeys=Vn(),this.Uu=eh(e),this.qu=new da(this.Uu)}get Ku(){return this.$u}Gu(e,t){const o=t?t.Qu:new vp,u=t?t.qu:this.qu;let d=t?t.mutatedKeys:this.mutatedKeys,m=u,D=!1;const j=sc(this.query)&&u.size===this.query.limit?u.last():null,K=Au(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ge,Oe)=>{const st=u.get(ge),St=ed(this.query,Oe)?Oe:null,xt=!!st&&this.mutatedKeys.has(st.key),an=!!St&&(St.hasLocalMutations||this.mutatedKeys.has(St.key)&&St.hasCommittedMutations);let Hn=!1;st&&St?st.data.isEqual(St.data)?xt!==an&&(o.track({type:3,doc:St}),Hn=!0):this.ju(st,St)||(o.track({type:2,doc:St}),Hn=!0,(j&&this.Uu(St,j)>0||K&&this.Uu(St,K)<0)&&(D=!0)):!st&&St?(o.track({type:0,doc:St}),Hn=!0):st&&!St&&(o.track({type:1,doc:st}),Hn=!0,(j||K)&&(D=!0)),Hn&&(St?(m=m.add(St),d=an?d.add(ge):d.delete(ge)):(m=m.delete(ge),d=d.delete(ge)))}),sc(this.query)||Au(this.query))for(;m.size>this.query.limit;){const ge=sc(this.query)?m.last():m.first();m=m.delete(ge.key),d=d.delete(ge.key),o.track({type:1,doc:ge})}return{qu:m,Qu:o,ni:D,mutatedKeys:d}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const d=e.Qu.Iu();d.sort((K,ge)=>function(Oe,st){const St=xt=>{switch(xt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return St(Oe)-St(st)}(K.type,ge.type)||this.Uu(K.doc,ge.doc)),this.Wu(o);const m=t?this.zu():[],D=0===this.Lu.size&&this.current?1:0,j=D!==this.Bu;return this.Bu=D,0!==d.length||j?{snapshot:new Rc(this.query,e.qu,u,d,e.mutatedKeys,0===D,j,!1),Hu:m}:{Hu:m}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new vp,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Vn(),this.qu.forEach(o=>{this.Ju(o.key)&&(this.Lu=this.Lu.add(o.key))});const t=[];return e.forEach(o=>{this.Lu.has(o)||t.push(new ym(o))}),this.Lu.forEach(o=>{e.has(o)||t.push(new mm(o))}),t}Yu(e){this.$u=e.li,this.Lu=Vn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Rc.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Zv{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class _m{constructor(e){this.key=e,this.Zu=!1}}class l_{constructor(e,t,o,u,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.ta={},this.ea=new Ra(D=>Jd(D),Fo),this.na=new Map,this.sa=new Set,this.ia=new er(Ht.comparator),this.ra=new Map,this.oa=new Jf,this.ua={},this.aa=new Map,this.ca=ou.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function c_(i,e){return vm.apply(this,arguments)}function vm(){return vm=(0,F.Z)(function*(i,e){const t=Ju(i);let o,u;const d=t.ea.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.Xu();else{const m=yield Fa(t.localStore,co(e));t.isPrimaryClient&&Bh(t.remoteStore,m);const D=t.sharedClientState.addLocalQueryTarget(m.targetId);o=m.targetId,u=yield Em(t,e,o,"current"===D)}return u}),vm.apply(this,arguments)}function Em(i,e,t,o){return Td.apply(this,arguments)}function Td(){return Td=(0,F.Z)(function*(i,e,t,o){i.la=(ge,Oe,st)=>{return(St=(0,F.Z)(function*(xt,an,Hn,wi){let Mi=an.view.Gu(Hn);Mi.ni&&(Mi=yield uu(xt.localStore,an.query,!1).then(({documents:xi})=>an.view.Gu(xi,Mi)));const ci=wi&&wi.targetChanges.get(an.targetId),gs=an.view.applyChanges(Mi,xt.isPrimaryClient,ci);return Rp(xt,an.targetId,gs.Hu),gs.snapshot}),function(xt,an,Hn,wi){return St.apply(this,arguments)})(i,ge,Oe,st);var St};const u=yield uu(i.localStore,e,!0),d=new Tp(e,u.li),m=d.Gu(u.documents),D=es.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),j=d.applyChanges(m,i.isPrimaryClient,D);Rp(i,t,j.Hu);const K=new Zv(e,t,d);return i.ea.set(e,K),i.na.has(t)?i.na.get(t).push(e):i.na.set(t,[e]),j.snapshot}),Td.apply(this,arguments)}function d_(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,F.Z)(function*(i,e){const t=Ct(i),o=t.ea.get(e),u=t.na.get(o.targetId);if(u.length>1)return t.na.set(o.targetId,u.filter(d=>!Fo(d,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield ca(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Ul(t.remoteStore,o.targetId),Pc(t,o.targetId)}).catch(Fl))):(Pc(t,o.targetId),yield ca(t.localStore,o.targetId,!0))}),Qh.apply(this,arguments)}function Im(){return Im=(0,F.Z)(function*(i,e,t){const o=el(i);try{const u=yield function(d,m){const D=Ct(d),j=Pi.now(),K=m.reduce((Oe,st)=>Oe.add(st.key),Vn());let ge;return D.persistence.runTransaction("Locally write mutations","readwrite",Oe=>D.ci.Ks(Oe,K).next(st=>{ge=st;const St=[];for(const xt of m){const an=Rg(xt,ge.get(xt.key));null!=an&&St.push(new Ou(xt.key,an,ye(an.value.mapValue),$i.exists(!0)))}return D.Bs.addMutationBatch(Oe,j,St,m)})).then(Oe=>(Oe.applyToLocalDocumentSet(ge),{batchId:Oe.batchId,changes:ge}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,m,D){let j=d.ua[d.currentUser.toKey()];j||(j=new er(Nn)),j=j.insert(m,D),d.ua[d.currentUser.toKey()]=j}(o,u.batchId,t),yield Qo(o,u.changes),yield Bl(o.remoteStore)}catch(u){const d=$l(u,"Failed to persist write");t.reject(d)}}),Im.apply(this,arguments)}function Yo(i,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,F.Z)(function*(i,e){const t=Ct(i);try{const o=yield Qg(t.localStore,e);e.targetChanges.forEach((u,d)=>{const m=t.ra.get(d);m&&(Ut(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.Zu=!0:u.modifiedDocuments.size>0?Ut(m.Zu):u.removedDocuments.size>0&&(Ut(m.Zu),m.Zu=!1))}),yield Qo(t,o,e)}catch(o){yield Fl(o)}}),Dm.apply(this,arguments)}function h_(i,e,t){const o=Ct(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ea.forEach((d,m)=>{const D=m.view.Au(e);D.snapshot&&u.push(D.snapshot)}),function(d,m){const D=Ct(d);D.onlineState=m;let j=!1;D.queries.forEach((K,ge)=>{for(const Oe of ge.listeners)Oe.Au(m)&&(j=!0)}),j&&Zh(D)}(o.eventManager,e),u.length&&o.ta.Qo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function bm(i,e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,F.Z)(function*(i,e,t){const o=Ct(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.ra.get(e),d=u&&u.key;if(d){let m=new er(Ht.comparator);m=m.insert(d,je.newNoDocument(d,tn.min()));const D=Vn().add(d),j=new iu(tn.min(),new Map,new ei(Nn),m,D);yield Yo(o,j),o.ia=o.ia.remove(d),o.ra.delete(e),Op(o)}else yield ca(o.localStore,e,!1).then(()=>Pc(o,e,t)).catch(Fl)}),Xh.apply(this,arguments)}function Cm(i,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,F.Z)(function*(i,e){const t=Ct(i),o=e.batch.batchId;try{const u=yield Qf(t.localStore,e);xp(t,o,null),Ad(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Qo(t,u)}catch(u){yield Fl(u)}}),Ap.apply(this,arguments)}function Yv(i,e,t){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,F.Z)(function*(i,e,t){const o=Ct(i);try{const u=yield function(d,m){const D=Ct(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let K;return D.Bs.lookupMutationBatch(j,m).next(ge=>(Ut(null!==ge),K=ge.keys(),D.Bs.removeMutationBatch(j,ge))).next(()=>D.Bs.performConsistencyCheck(j)).next(()=>D.ci.Ks(j,K))})}(o.localStore,e);xp(o,e,t),Ad(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Qo(o,u)}catch(u){yield Fl(u)}}),Jh.apply(this,arguments)}function Mp(){return Mp=(0,F.Z)(function*(i,e){const t=Ct(i);zu(t.remoteStore)||$("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const m=Ct(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>m.Bs.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.aa.get(o)||[];u.push(e),t.aa.set(o,u)}catch(o){const u=$l(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Mp.apply(this,arguments)}function Ad(i,e){(i.aa.get(e)||[]).forEach(t=>{t.resolve()}),i.aa.delete(e)}function xp(i,e,t){const o=Ct(i);let u=o.ua[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ua[o.currentUser.toKey()]=u}}function Pc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.na.get(e))i.ea.delete(o),t&&i.ta.fa(o,t);i.na.delete(e),i.isPrimaryClient&&i.oa.Pi(e).forEach(o=>{i.oa.containsKey(o)||Tm(i,o)})}function Tm(i,e){i.sa.delete(e.path.canonicalString());const t=i.ia.get(e);null!==t&&(Ul(i.remoteStore,t),i.ia=i.ia.remove(e),i.ra.delete(t),Op(i))}function Rp(i,e,t){for(const o of t)o instanceof mm?(i.oa.addReference(o.key,e),f_(i,o)):o instanceof ym?($("SyncEngine","Document no longer in limbo: "+o.key),i.oa.removeReference(o.key,e),i.oa.containsKey(o.key)||Tm(i,o.key)):ft()}function f_(i,e){const t=e.key,o=t.path.canonicalString();i.ia.get(t)||i.sa.has(o)||($("SyncEngine","New document in limbo: "+t),i.sa.add(o),Op(i))}function Op(i){for(;i.sa.size>0&&i.ia.size<i.maxConcurrentLimboResolutions;){const e=i.sa.values().next().value;i.sa.delete(e);const t=new Ht(pr.fromString(e)),o=i.ca.next();i.ra.set(o,new _m(t)),i.ia=i.ia.insert(t,o),Bh(i.remoteStore,new ka(co(No(t.path)),o,2,Xi.A))}}function Qo(i,e,t){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,F.Z)(function*(i,e,t){const o=Ct(i),u=[],d=[],m=[];var D;o.ea.isEmpty()||(o.ea.forEach((D,j)=>{m.push(o.la(j,e,t).then(K=>{if(K){o.isPrimaryClient&&o.sharedClientState.updateQueryState(j.targetId,K.fromCache?"not-current":"current"),u.push(K);const ge=Rh.Ys(j.targetId,K);d.push(ge)}}))}),yield Promise.all(m),o.ta.Qo(u),yield(D=(0,F.Z)(function*(j,K){const ge=Ct(j);try{yield ge.persistence.runTransaction("notifyLocalViewChanges","readwrite",Oe=>_t.forEach(K,st=>_t.forEach(st.Hs,St=>ge.persistence.referenceDelegate.addReference(Oe,st.targetId,St)).next(()=>_t.forEach(st.Js,St=>ge.persistence.referenceDelegate.removeReference(Oe,st.targetId,St)))))}catch(Oe){if(!Uu(Oe))throw Oe;$("LocalStore","Failed to update sequence numbers: "+Oe)}for(const Oe of K){const st=Oe.targetId;if(!Oe.fromCache){const St=ge.ii.get(st),an=St.withLastLimboFreeSnapshotVersion(St.snapshotVersion);ge.ii=ge.ii.insert(st,an)}}}),function(j,K){return D.apply(this,arguments)})(o.localStore,d))}),Zu.apply(this,arguments)}function p_(i,e){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,F.Z)(function*(i,e){const t=Ct(i);if(!t.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());const o=yield Zf(t.localStore,e);t.currentUser=e,(u=t).aa.forEach(m=>{m.forEach(D=>{D.reject(new Dt(Ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.aa.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Qo(t,o.hi)}var u}),Hl.apply(this,arguments)}function g_(i,e){const t=Ct(i),o=t.ra.get(e);if(o&&o.Zu)return Vn().add(o.key);{let u=Vn();const d=t.na.get(e);if(!d)return u;for(const m of d){const D=t.ea.get(m);u=u.unionWith(D.view.Ku)}return u}}function m_(i,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,F.Z)(function*(i,e){const t=Ct(i),o=yield uu(t.localStore,e.query,!0),u=e.view.Yu(o);return t.isPrimaryClient&&Rp(t,e.targetId,u.Hu),u}),Sd.apply(this,arguments)}function Va(i,e){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,F.Z)(function*(i,e){const t=Ct(i);return Vl(t.localStore,e).then(o=>Qo(t,o))}),Gl.apply(this,arguments)}function Xs(i,e,t,o){return cu.apply(this,arguments)}function cu(){return cu=(0,F.Z)(function*(i,e,t,o){const u=Ct(i),d=yield function(m,D){const j=Ct(m),K=Ct(j.Bs);return j.persistence.runTransaction("Lookup mutation documents","readonly",ge=>K.fn(ge,D).next(Oe=>Oe?j.ci.Ks(ge,Oe):_t.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield Bl(u.remoteStore):"acknowledged"===t||"rejected"===t?(xp(u,e,o||null),Ad(u,e),D=e,Ct(Ct(u.localStore).Bs)._n(D)):ft(),yield Qo(u,d)):$("SyncEngine","Cannot apply mutation batch with id: "+e)}),cu.apply(this,arguments)}function bo(){return bo=(0,F.Z)(function*(i,e){const t=Ct(i);if(Ju(t),el(t),!0===e&&!0!==t.ha){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield tf(t,o.toArray());t.ha=!0,yield qh(t.remoteStore,!0);for(const d of u)Bh(t.remoteStore,d)}else if(!1===e&&!1!==t.ha){const o=[];let u=Promise.resolve();t.na.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(Pc(t,m),ca(t.localStore,m,!0))),Ul(t.remoteStore,m)}),yield u,yield tf(t,o),function(d){const m=Ct(d);m.ra.forEach((D,j)=>{Ul(m.remoteStore,j)}),m.oa.bi(),m.ra=new Map,m.ia=new er(Ht.comparator)}(t),t.ha=!1,yield qh(t.remoteStore,!1)}}),bo.apply(this,arguments)}function tf(i,e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=(0,F.Z)(function*(i,e,t){const o=Ct(i),u=[],d=[];for(const m of e){let D;const j=o.na.get(m);if(j&&0!==j.length){D=yield Fa(o.localStore,co(j[0]));for(const K of j){const ge=o.ea.get(K),Oe=yield m_(o,ge);Oe.snapshot&&d.push(Oe.snapshot)}}else{const K=yield Sc(o.localStore,m);D=yield Fa(o.localStore,K),yield Em(o,Wl(K),m,!1)}u.push(D)}return o.ta.Qo(d),u}),Yu.apply(this,arguments)}function Wl(i){return ic(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function kc(i){const e=Ct(i);return Ct(Ct(e.localStore).persistence).Fs()}function Nc(i,e,t,o){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,F.Z)(function*(i,e,t,o){const u=Ct(i);if(u.ha)return void $("SyncEngine","Ignoring unexpected query state notification.");const d=u.na.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const m=yield Vl(u.localStore,ac(d[0])),D=iu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Qo(u,m,D);break}case"rejected":yield ca(u.localStore,e,!0),Pc(u,e,o);break;default:ft()}}),Qu.apply(this,arguments)}function Fc(i,e,t){return Xu.apply(this,arguments)}function Xu(){return Xu=(0,F.Z)(function*(i,e,t){const o=Ju(i);if(o.ha){for(const u of e){if(o.na.has(u)){$("SyncEngine","Adding an already active target "+u);continue}const d=yield Sc(o.localStore,u),m=yield Fa(o.localStore,d);yield Em(o,Wl(d),m.targetId,!1),Bh(o.remoteStore,m)}for(const u of t)o.na.has(u)&&(yield ca(o.localStore,u,!1).then(()=>{Ul(o.remoteStore,u),Pc(o,u)}).catch(Fl))}}),Xu.apply(this,arguments)}function Ju(i){const e=Ct(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bm.bind(null,e),e.ta.Qo=ha.bind(null,e.eventManager),e.ta.fa=bp.bind(null,e.eventManager),e}function el(i){const e=Ct(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yv.bind(null,e),e}class Pp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,F.Z)(function*(){t.M=Id(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return au(this.persistence,new Oh,e.initialUser,this.M)}wa(e){return new im(ep.zi,this.M)}_a(e){return new ip}terminate(){var e=this;return(0,F.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kp extends Pp{constructor(e,t,o){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,F.Z)(function*(){yield t().call(o,e),yield o.ya.initialize(o,e),yield el(o.ya.syncEngine),yield Bl(o.ya.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ga(e){return au(this.persistence,new Oh,e.initialUser,this.M)}ma(e){return new Gv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=xh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Qs.withCacheSize(this.cacheSizeBytes):Qs.DEFAULT;return new Na(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,sp(),Fh(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new ip}}class Sm extends kp{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,F.Z)(function*(){yield t().call(o,e);const u=o.ya.syncEngine;o.sharedClientState instanceof wd&&(o.sharedClientState.syncEngine={Mr:Xs.bind(null,u),Or:Nc.bind(null,u),Fr:Fc.bind(null,u),Fs:kc.bind(null,u),kr:Va.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var d=(0,F.Z)(function*(m){yield function ef(i,e){return bo.apply(this,arguments)}(o.ya.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):m||o.gcScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}_a(e){const t=sp();if(!wd.vt(t))throw new Dt(Ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=xh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wd(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class nf{initialize(e,t){var o=this;return(0,F.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>h_(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=p_.bind(null,o.syncEngine),yield qh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Oc}createDatastore(e){const t=Id(e.databaseInfo.databaseId),o=new e_(e.databaseInfo);return new ap(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>h_(this.syncEngine,D,0),m=am.vt()?new am:new Xy,new r_(t,o,u,d,m);var t,o,u,d,m}createSyncEngine(e,t){return function(o,u,d,m,D,j,K){const ge=new l_(o,u,d,m,D,j);return K&&(ge.ha=!0),ge}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,F.Z)(function*(t){const o=Ct(t);$("RemoteStore","RemoteStore shutting down."),o.fu.add(5),yield Mc(o),o._u.shutdown(),o.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Np(i,e=10240){let t=0;return{read:()=>(0,F.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,F.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Md{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mm{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new jr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(o=>{o&&o.xu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,F.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,F.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,F.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const o=e.Ea.decode(t),u=Number(o);isNaN(u)&&e.Pa(`length string (${o}) is not valid number`);const d=yield e.ba(u);return new pm(JSON.parse(d),t.length+u)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,F.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,F.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const o=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,F.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class xm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,F.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Dt(Ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,F.Z)(function*(d,m){const D=Ct(d),j=Rl(D.M)+"/documents",K={documents:m.map(St=>Fu(D.M,St))},ge=yield D.ho("BatchGetDocuments",j,K),Oe=new Map;ge.forEach(St=>{const xt=function fh(i,e){return"found"in e?function(t,o){Ut(!!o.found);const u=li(t,o.found.name),d=fs(o.found.updateTime),m=new q({mapValue:{fields:o.found.fields}});return je.newFoundDocument(u,d,m)}(i,e):"missing"in e?function(t,o){Ut(!!o.missing),Ut(!!o.readTime);const u=li(t,o.missing),d=fs(o.readTime);return je.newNoDocument(u,d)}(i,e):ft()}(D.M,St);Oe.set(xt.key.toString(),xt)});const st=[];return m.forEach(St=>{const xt=Oe.get(St.toString());Ut(!!xt),st.push(xt)}),st}),function(d,m){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Il(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,F.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=Ht.fromPath(u);e.mutations.push(new Dl(d,e.precondition(d)))}),yield(o=(0,F.Z)(function*(u,d){const m=Ct(u),D=Rl(m.M)+"/documents",j={writes:d.map(K=>su(m.M,K))};yield m.oo("Commit",D,j)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=tn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new Dt(Ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$i.updateTime(t):$i.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(tn.min()))throw new Dt(Ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $i.updateTime(t)}return $i.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class y_{constructor(e,t,o,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=u,this.Sa=5,this.Do=new Lh(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,F.Z)(function*(){const t=new xm(e.datastore),o=e.Ca(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.xa(d)}))}).catch(u=>{e.xa(u)})}))}Ca(e){try{const t=this.updateFunction(e);return!ds(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Pu(t)}return!1}}class Rm{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=I.UNAUTHENTICATED,this.clientId=rc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,F.Z)(function*(D){$("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>($("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,F.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Dt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,F.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=$l(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Om(i,e){return rf.apply(this,arguments)}function rf(){return rf=(0,F.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,F.Z)(function*(d){o.isEqual(d)||(yield Zf(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),rf.apply(this,arguments)}function Fp(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,F.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Vp(i);$("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>mp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>mp(e.remoteStore,d)),i.onlineComponents=e}),Lp.apply(this,arguments)}function Vp(i){return sf.apply(this,arguments)}function sf(){return sf=(0,F.Z)(function*(i){return i.offlineComponents||($("FirestoreClient","Using default OfflineComponentProvider"),yield Om(i,new Pp)),i.offlineComponents}),sf.apply(this,arguments)}function af(i){return uf.apply(this,arguments)}function uf(){return uf=(0,F.Z)(function*(i){return i.onlineComponents||($("FirestoreClient","Using default OnlineComponentProvider"),yield Fp(i,new nf)),i.onlineComponents}),uf.apply(this,arguments)}function Pm(i){return Vp(i).then(e=>e.persistence)}function Up(i){return Vp(i).then(e=>e.localStore)}function __(i){return af(i).then(e=>e.remoteStore)}function Bp(i){return af(i).then(e=>e.syncEngine)}function tl(i){return xd.apply(this,arguments)}function xd(){return xd=(0,F.Z)(function*(i){const e=yield af(i),t=e.eventManager;return t.onListen=c_.bind(null,e.syncEngine),t.onUnlisten=d_.bind(null,e.syncEngine),t}),xd.apply(this,arguments)}function E_(i,e,t={}){const o=new jr;return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return function(u,d,m,D,j){const K=new Md({next:Oe=>{d.enqueueAndForget(()=>Ip(u,ge));const st=Oe.docs.has(m);!st&&Oe.fromCache?j.reject(new Dt(Ye.UNAVAILABLE,"Failed to get document because the client is offline.")):st&&Oe.fromCache&&D&&"server"===D.source?j.reject(new Dt(Ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(Oe)},error:Oe=>j.reject(Oe)}),ge=new Yh(No(m.path),K,{includeMetadataChanges:!0,Cu:!0});return Ep(u,ge)}(yield tl(i),i.asyncQueue,e,t,o)})),o.promise}function jp(i,e,t={}){const o=new jr;return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return function(u,d,m,D,j){const K=new Md({next:Oe=>{d.enqueueAndForget(()=>Ip(u,ge)),Oe.fromCache&&"server"===D.source?j.reject(new Dt(Ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):j.resolve(Oe)},error:Oe=>j.reject(Oe)}),ge=new Yh(m,K,{includeMetadataChanges:!0,Cu:!0});return Ep(u,ge)}(yield tl(i),i.asyncQueue,e,t,o)})),o.promise}const $p=new Map;function Hp(i,e,t){if(!t)throw new Dt(Ye.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Gp(i,e,t,o){if(!0===e&&!0===o)throw new Dt(Ye.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Rd(i){if(!Ht.isDocumentKey(i))throw new Dt(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function km(i){if(Ht.isDocumentKey(i))throw new Dt(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Od(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":ft()}function br(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Dt(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Od(i);throw new Dt(Ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Nm(i,e){if(e<=0)throw new Dt(Ye.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Fm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Dt(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Dt(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Gp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fm({}),this._settingsFrozen=!1,e instanceof Bi?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Dt(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bi(u.options.projectId)}(e))}get app(){if(!this._app)throw new Dt(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Dt(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new wu;switch(t.type){case"gapi":const o=t.client;return Ut(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new nc(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Dt(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$p.get(e);t&&($("ComponentProvider","Removing Datastore"),$p.delete(e),t.terminate())}(this),Promise.resolve()}}class vi{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vi(this.firestore,e,this._key)}}class Js{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class fa extends Js{constructor(e,t,o){super(e,t,No(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vi(this.firestore,null,new Ht(e))}withConverter(e){return new fa(this.firestore,e,this._path)}}function Wp(i,e,...t){if(i=(0,Le.m9)(i),Hp("collection","path",e),i instanceof Pd){const o=pr.fromString(e,...t);return km(o),new fa(i,null,o)}{if(!(i instanceof vi||i instanceof fa))throw new Dt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(pr.fromString(e,...t));return km(o),new fa(i.firestore,null,o)}}function Kp(i,e,...t){if(i=(0,Le.m9)(i),1===arguments.length&&(e=rc.R()),Hp("doc","path",e),i instanceof Pd){const o=pr.fromString(e,...t);return Rd(o),new vi(i,null,new Ht(o))}{if(!(i instanceof vi||i instanceof fa))throw new Dt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(pr.fromString(e,...t));return Rd(o),new vi(i.firestore,i instanceof fa?i.converter:null,new Ht(o))}}function lf(i,e){return i=(0,Le.m9)(i),e=(0,Le.m9)(e),(i instanceof vi||i instanceof fa)&&(e instanceof vi||e instanceof fa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Lm(i,e){return i=(0,Le.m9)(i),e=(0,Le.m9)(e),i instanceof Js&&e instanceof Js&&i.firestore===e.firestore&&Fo(i._query,e._query)&&i.converter===e.converter}class e0{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Lh(this,"async_queue_retry"),this.qa=()=>{const t=Fh();t&&$("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Fh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Fh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new jr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,F.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Uu(t))throw t;$("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(o=>{throw this.$a=o,this.Ba=!1,se("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(o)),o}).then(o=>(this.Ba=!1,o))));return this.ka=t,t}enqueueAfterDelay(e,t,o){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const u=_p.createAndSchedule(this,e,t,o,d=>this.ja(d));return this.Fa.push(u),u}Ka(){this.$a&&ft()}verifyOperationInProgress(){}Wa(){var e=this;return(0,F.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function zl(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Vm{constructor(){this._progressObserver={},this._taskCompletionResolver=new jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ei extends Pd{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new e0,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cf(this),this._firestoreClient.terminate()}}function Gi(i){return i._firestoreClient||cf(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function cf(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ho(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new Rm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function kd(i,e,t){const o=new jr;return i.asyncQueue.enqueue((0,F.Z)(function*(){try{yield Om(i,t),yield Fp(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(d=u).name?d.code===Ye.FAILED_PRECONDITION||d.code===Ye.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var d})).then(()=>o.promise)}function Xp(i){if(i._initialized||i._terminated)throw new Dt(Ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Dt(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new is(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pa(Jn.fromBase64String(e))}catch(t){throw new Dt(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pa(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hu{constructor(e){this._methodName=e}}class Nd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Dt(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Dt(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nn(this._lat,e._lat)||Nn(this._long,e._long)}}const S_=/^__.*__$/;class $m{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class Jp{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class Vc{constructor(e,t,o,u,d,m){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===d&&this.Ya(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Vc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.nc(e),u}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.Ya(),u}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Ld(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(eg(this.Xa)&&S_.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Hm{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||Id(e)}ac(e,t,o,u=!1){return new Vc({Xa:e,methodName:t,uc:o,path:is.emptyPath(),ec:!1,oc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function nl(i){const e=i._freezeSettings(),t=Id(i._databaseId);return new Hm(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Fd(i,e,t,o,u,d={}){const m=i.ac(d.merge||d.mergeFields?2:0,e,t,u);og("Data must be an object, but it was:",m,o);const D=ps(o,m);let j,K;if(d.merge)j=new Ws(m.fieldMask),K=m.fieldTransforms;else if(d.mergeFields){const ge=[];for(const Oe of d.mergeFields){const st=ag(e,Oe,t);if(!m.contains(st))throw new Dt(Ye.INVALID_ARGUMENT,`Field '${st}' is specified in your field mask but missing from your input data.`);ug(ge,st)||ge.push(st)}j=new Ws(ge),K=m.fieldTransforms.filter(Oe=>j.covers(Oe.field))}else j=null,K=m.fieldTransforms;return new $m(new q(D),j,K)}class Uc extends hu{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uc}}function tg(i,e,t){return new Vc({Xa:3,uc:e.settings.uc,methodName:i._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class hf extends hu{_toFieldTransform(e){return new Ru(e.path,new Ja)}isEqual(e){return e instanceof hf}}class Gm extends hu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=tg(this,e,!0),o=this.cc.map(d=>Kl(d,t)),u=new eu(o);return new Ru(e.path,u)}isEqual(e){return this===e}}class Wm extends hu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=tg(this,e,!0),o=this.cc.map(d=>Kl(d,t)),u=new xu(o);return new Ru(e.path,u)}isEqual(e){return this===e}}class r0 extends hu{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new _l(e.M,th(e.M,this.hc));return new Ru(e.path,t)}isEqual(e){return this===e}}function ng(i,e,t,o){const u=i.ac(1,e,t);og("Data must be an object, but it was:",u,o);const d=[],m=q.empty();Ka(o,(j,K)=>{const ge=ff(e,j,t);K=(0,Le.m9)(K);const Oe=u.sc(ge);if(K instanceof Uc)d.push(ge);else{const st=Kl(K,Oe);null!=st&&(d.push(ge),m.set(ge,st))}});const D=new Ws(d);return new Jp(m,D,u.fieldTransforms)}function rg(i,e,t,o,u,d){const m=i.ac(1,e,t),D=[ag(e,o,t)],j=[u];if(d.length%2!=0)throw new Dt(Ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let st=0;st<d.length;st+=2)D.push(ag(e,d[st])),j.push(d[st+1]);const K=[],ge=q.empty();for(let st=D.length-1;st>=0;--st)if(!ug(K,D[st])){const St=D[st];let xt=j[st];xt=(0,Le.m9)(xt);const an=m.sc(St);if(xt instanceof Uc)K.push(St);else{const Hn=Kl(xt,an);null!=Hn&&(K.push(St),ge.set(St,Hn))}}const Oe=new Ws(K);return new Jp(ge,Oe,m.fieldTransforms)}function ig(i,e,t,o=!1){return Kl(t,i.ac(o?4:3,e))}function Kl(i,e){if(sg(i=(0,Le.m9)(i)))return og("Unsupported field value:",e,i),ps(i,e);if(i instanceof hu)return function(t,o){if(!eg(o.Xa))throw o.rc(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.rc(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const m of t){let D=Kl(m,o.ic(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Le.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return th(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Pi.fromDate(t);return{timestampValue:Sl(o.M,u)}}if(t instanceof Pi){const u=new Pi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sl(o.M,u)}}if(t instanceof Nd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pa)return{bytesValue:Vo(o.M,t._byteString)};if(t instanceof vi){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.rc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ml(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.rc(`Unsupported field value: ${Od(t)}`)}(i,e)}function ps(i,e){const t={};return Qc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(i,(o,u)=>{const d=Kl(u,e.tc(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function sg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Pi||i instanceof Nd||i instanceof pa||i instanceof vi||i instanceof hu)}function og(i,e,t){if(!sg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Od(t);throw e.rc("an object"===o?i+" a custom object":i+" "+o)}var o}function ag(i,e,t){if((e=(0,Le.m9)(e))instanceof du)return e._internalPath;if("string"==typeof e)return ff(i,e);throw Ld("Field path arguments must be of type string or ",i,!1,void 0,t)}const zm=new RegExp("[~\\*/\\[\\]]");function ff(i,e,t){if(e.search(zm)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new du(...e.split("."))._internalPath}catch(o){throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Ld(i,e,t,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let j="";return(d||m)&&(j+=" (found",d&&(j+=` in field ${o}`),m&&(j+=` in document ${u}`),j+=")"),new Dt(Ye.INVALID_ARGUMENT,D+i+j)}function ug(i,e){return i.some(t=>t.isEqual(e))}class Ua{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new vi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new M_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class M_ extends Ua{data(){return super.data()}}function pf(i,e){return"string"==typeof e?ff(i,e):e instanceof du?e._internalPath:e._delegate._internalPath}class rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fu extends Ua{constructor(e,t,o,u,d,m){super(e,t,o,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(pf("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Bc extends fu{data(e={}){return super.data(e)}}class ql{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new rl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Bc(this._firestore,this._userDataWriter,o.key,o,new rl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Dt(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>({type:"added",doc:new Bc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new rl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const D=new Bc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new rl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let j=-1,K=-1;return 0!==m.type&&(j=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),K=d.indexOf(m.doc.key)),{type:Km(m.type),doc:D,oldIndex:j,newIndex:K}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Km(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function gf(i,e){return i instanceof fu&&e instanceof fu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ql&&e instanceof ql&&i._firestore===e._firestore&&Lm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ga(i){if(Au(i)&&0===i.explicitOrderBy.length)throw new Dt(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vd{}function il(i,...e){for(const t of e)i=t._apply(i);return i}class Ba extends Vd{constructor(e,t,o){super(),this.lc=e,this.fc=t,this.dc=o,this.type="where"}_apply(e){const t=nl(e.firestore),o=function(u,d,m,D,j,K,ge){let Oe;if(j.isKeyField()){if("array-contains"===K||"array-contains-any"===K)throw new Dt(Ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${K}' queries on documentId().`);if("in"===K||"not-in"===K){hg(ge,K);const St=[];for(const xt of ge)St.push(dg(D,u,xt));Oe={arrayValue:{values:St}}}else Oe=dg(D,u,ge)}else"in"!==K&&"not-in"!==K&&"array-contains-any"!==K||hg(ge,K),Oe=ig(m,"where",ge,"in"===K||"not-in"===K);const st=Ni.create(j,K,Oe);return function(St,xt){if(xt.S()){const Hn=Su(St);if(null!==Hn&&!Hn.isEqual(xt.field))throw new Dt(Ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Hn.toString()}' and '${xt.field.toString()}'`);const wi=Xd(St);null!==wi&&Ud(0,xt.field,wi)}const an=function(Hn,wi){for(const Mi of Hn.filters)if(wi.indexOf(Mi.op)>=0)return Mi.op;return null}(St,function(Hn){switch(Hn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(xt.op));if(null!==an)throw new Dt(Ye.INVALID_ARGUMENT,an===xt.op?`Invalid query. You cannot use more than one '${xt.op.toString()}' filter.`:`Invalid query. You cannot use '${xt.op.toString()}' filters with '${an.toString()}' filters.`)}(u,st),st}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Js(e.firestore,e.converter,function(u,d){const m=u.filters.concat([d]);return new Eo(u.path,u.collectionGroup,u.explicitOrderBy.slice(),m,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class ya extends Vd{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new Dt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Dt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new ml(u,d);return function(D,j){if(null===Xd(D)){const K=Su(D);null!==K&&Ud(0,K,j.field)}}(o,m),m}(e._query,this.lc,this._c);return new Js(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Eo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class lg extends Vd{constructor(e,t,o){super(),this.type=e,this.wc=t,this.mc=o}_apply(e){return new Js(e.firestore,e.converter,oc(e._query,this.wc,this.mc))}}class Zm extends Vd{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new Js(e.firestore,e.converter,(u=t,new Eo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class jc extends Vd{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new Js(e.firestore,e.converter,(u=t,new Eo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function Qm(i,e,t,o){if(t[0]=(0,Le.m9)(t[0]),t[0]instanceof Ua)return function(u,d,m,D,j){if(!D)throw new Dt(Ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const K=[];for(const ge of Qa(u))if(ge.field.isKeyField())K.push(Po(d,D.key));else{const Oe=D.data.field(ge.field);if(Ji(Oe))throw new Dt(Ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ge.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Oe){const st=ge.field.canonicalString();throw new Dt(Ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${st}' (used as the orderBy) does not exist.`)}K.push(Oe)}return new ko(K,j)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=nl(i.firestore);return function(d,m,D,j,K,ge){const Oe=d.explicitOrderBy;if(K.length>Oe.length)throw new Dt(Ye.INVALID_ARGUMENT,`Too many arguments provided to ${j}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const st=[];for(let St=0;St<K.length;St++){const xt=K[St];if(Oe[St].field.isKeyField()){if("string"!=typeof xt)throw new Dt(Ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${j}(), but got a ${typeof xt}`);if(!yl(d)&&-1!==xt.indexOf("/"))throw new Dt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${j}() must be a plain document ID, but '${xt}' contains a slash.`);const an=d.path.child(pr.fromString(xt));if(!Ht.isDocumentKey(an))throw new Dt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${j}() must result in a valid document path, but '${an}' is not because it contains an odd number of segments.`);const Hn=new Ht(an);st.push(Po(m,Hn))}else{const an=ig(D,j,xt);st.push(an)}}return new ko(st,ge)}(i._query,i.firestore._databaseId,u,e,t,o)}}function dg(i,e,t){if("string"==typeof(t=(0,Le.m9)(t))){if(""===t)throw new Dt(Ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yl(e)&&-1!==t.indexOf("/"))throw new Dt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(pr.fromString(t));if(!Ht.isDocumentKey(o))throw new Dt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Po(i,new Ht(o))}if(t instanceof vi)return Po(i,t._key);throw new Dt(Ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Od(t)}.`)}function hg(i,e){if(!Array.isArray(i)||0===i.length)throw new Dt(Ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Dt(Ye.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ud(i,e,t){if(!t.isEqual(e))throw new Dt(Ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fg{convertValue(e,t="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const o={};return Ka(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Nd(Ai(e.latitude),Ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Vs(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ta(e));default:return null}}convertTimestamp(e){const t=Ls(e);return new Pi(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=pr.fromString(e);Ut(Dn(o));const u=new Bi(o.get(1),o.get(3)),d=new Ht(o.popFirst(5));return u.isEqual(t)||se(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Bd(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Xm extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new pa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,t)}}class mf{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nl(e)}set(e,t,o){this._verifyNotCommitted();const u=_a(e,this._firestore),d=Bd(u.converter,t,o),m=Fd(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,$i.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=_a(e,this._firestore);let m;return m="string"==typeof(t=(0,Le.m9)(t))||t instanceof du?rg(this._dataReader,"WriteBatch.update",d._key,t,o,u):ng(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,$i.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_a(e,this._firestore);return this._mutations=this._mutations.concat(new Il(t._key,$i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Dt(Ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _a(i,e){if((i=(0,Le.m9)(i)).firestore!==e)throw new Dt(Ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class sl extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new pa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,t)}}function pg(i,e,t){i=br(i,vi);const o=br(i.firestore,Ei),u=Bd(i.converter,e,t);return $c(o,[Fd(nl(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,$i.none())])}function sy(i,e,t,...o){i=br(i,vi);const u=br(i.firestore,Ei),d=nl(u);let m;return m="string"==typeof(e=(0,Le.m9)(e))||e instanceof du?rg(d,"updateDoc",i._key,e,t,o):ng(d,"updateDoc",i._key,e),$c(u,[m.toMutation(i._key,$i.exists(!0))])}function oy(i,...e){var t,o,u;i=(0,Le.m9)(i);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||zl(e[m])||(d=e[m],m++);const D={includeMetadataChanges:d.includeMetadataChanges};if(zl(e[m])){const Oe=e[m];e[m]=null===(t=Oe.next)||void 0===t?void 0:t.bind(Oe),e[m+1]=null===(o=Oe.error)||void 0===o?void 0:o.bind(Oe),e[m+2]=null===(u=Oe.complete)||void 0===u?void 0:u.bind(Oe)}let j,K,ge;if(i instanceof vi)K=br(i.firestore,Ei),ge=No(i._key.path),j={next:Oe=>{e[m]&&e[m](gg(K,i,Oe))},error:e[m+1],complete:e[m+2]};else{const Oe=br(i,Js);K=br(Oe.firestore,Ei),ge=Oe._query;const st=new sl(K);j={next:St=>{e[m]&&e[m](new ql(K,st,Oe,St))},error:e[m+1],complete:e[m+2]},ga(i._query)}return function(Oe,st,St,xt){const an=new Md(xt),Hn=new Yh(st,an,St);return Oe.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return Ep(yield tl(Oe),Hn)})),()=>{an.Ia(),Oe.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return Ip(yield tl(Oe),Hn)}))}}(Gi(K),ge,D,j)}function $c(i,e){return function(t,o){const u=new jr;return t.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return function wm(i,e,t){return Im.apply(this,arguments)}(yield Bp(t),o,u)})),u.promise}(Gi(i),e)}function gg(i,e,t){const o=t.docs.get(e._key),u=new sl(i);return new fu(i,u,e._key,o,new rl(t.hasPendingWrites,t.fromCache),e.converter)}class L_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=nl(e)}get(e){const t=_a(e,this._firestore),o=new Xm(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return ft();const d=u[0];if(d.isFoundDocument())return new Ua(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new Ua(this._firestore,o,t._key,null,t.converter);throw ft()})}set(e,t,o){const u=_a(e,this._firestore),d=Bd(u.converter,t,o),m=Fd(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,m),this}update(e,t,o,...u){const d=_a(e,this._firestore);let m;return m="string"==typeof(t=(0,Le.m9)(t))||t instanceof du?rg(this._dataReader,"Transaction.update",d._key,t,o,u):ng(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=_a(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_a(e,this._firestore),o=new sl(this._firestore);return super.get(e).then(u=>new fu(this._firestore,o,t._key,u._document,new rl(!1,!1),t.converter))}}function yf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Dt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function mg(){if("undefined"==typeof Uint8Array)throw new Dt("unimplemented","Uint8Arrays are not available in this environment.")}function yg(){if(!function Kd(){return"undefined"!=typeof atob}())throw new Dt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){E=te.SDK_VERSION,(0,te._registerComponent)(new pe.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Ei(u,new Iu(t.getProvider("auth-internal")),new Du(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC")),(0,te.registerVersion)(Eu,"3.4.8",i),(0,te.registerVersion)(Eu,"3.4.8","esm2017")}();class Hc{constructor(e){this._delegate=e}static fromBase64String(e){return yg(),new Hc(pa.fromBase64String(e))}static fromUint8Array(e){return mg(),new Hc(pa.fromUint8Array(e))}toBase64(){return yg(),this._delegate.toBase64()}toUint8Array(){return mg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _f(i){return function ly(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class cy{enableIndexedDbPersistence(e,t){return function n0(i,e){Xp(i=br(i,Ei));const t=Gi(i),o=i._freezeSettings(),u=new nf;return kd(t,u,new kp(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function C_(i){Xp(i=br(i,Ei));const e=Gi(i),t=i._freezeSettings(),o=new nf;return kd(e,o,new Sm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function df(i){if(i._initialized&&!i._terminated)throw new Dt(Ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new jr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,F.Z)(function*(){try{yield(t=(0,F.Z)(function*(o){if(!ua.vt())return Promise.resolve();const u=o+"main";yield ua.delete(u)}),function(o){return t.apply(this,arguments)})(xh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _g{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Bi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ce("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function b_(i,e,t,o={}){var u;const d=(i=br(i,Pd))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&Ce("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let m,D;if("string"==typeof o.mockUserToken)m=o.mockUserToken,D=I.MOCK_USER;else{m=(0,Le.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const j=o.mockUserToken.sub||o.mockUserToken.user_id;if(!j)throw new Dt(Ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new I(j)}i._authCredentials=new mo(new Es(m,D))}}(this._delegate,e,t,o)}enableNetwork(){return function Bm(i){return function v_(i){return i.asyncQueue.enqueue((0,F.Z)(function*(){const e=yield Pm(i),t=yield __(i);return e.setNetworkEnabled(!0),function(o){const u=Ct(o);return u.fu.delete(0),Vh(u)}(t)}))}(Gi(i=br(i,Ei)))}(this._delegate)}disableNetwork(){return function Yp(i){return function Qv(i){return i.asyncQueue.enqueue((0,F.Z)(function*(){const e=yield Pm(i),t=yield __(i);return e.setNetworkEnabled(!1),(o=(0,F.Z)(function*(u){const d=Ct(u);d.fu.add(0),yield Mc(d),d.wu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Gi(i=br(i,Ei)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Gp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Um(i){return function(e){const t=new jr;return e.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return function Sp(i,e){return Mp.apply(this,arguments)}(yield Bp(e),t)})),t.promise}(Gi(i=br(i,Ei)))}(this._delegate)}onSnapshotsInSync(e){return function F_(i,e){return function Jv(i,e){const t=new Md(e);return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return o=yield tl(i),u=t,Ct(o).Eu.add(u),void u.next();var o,u})),()=>{t.Ia(),i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return o=yield tl(i),u=t,void Ct(o).Eu.delete(u);var o,u}))}}(Gi(i=br(i,Ei)),zl(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Dt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zc(this,Wp(this._delegate,e))}catch(t){throw Co(t,"collection()","Firestore.collection()")}}doc(e){try{return new Us(this,Kp(this._delegate,e))}catch(t){throw Co(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new To(this,function zp(i,e){if(i=br(i,Pd),Hp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Dt(Ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Js(i,null,(t=e,new Eo(pr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Co(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function V_(i,e){return function I_(i,e){const t=new jr;return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){const o=yield(u=i,af(u).then(d=>d.datastore));var u;new y_(i.asyncQueue,o,e,t).run()})),t.promise}(Gi(i=br(i,Ei)),t=>e(new L_(i,t)))}(this._delegate,t=>e(new ol(this,t)))}batch(){return Gi(this._delegate),new hy(new mf(this._delegate,e=>$c(this._delegate,e)))}loadBundle(e){return function jm(i,e){const t=Gi(i=br(i,Ei)),o=new Vm;return function Lc(i,e,t,o){const u=function(d,m){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,j=function(j,K){if(j instanceof Uint8Array)return Np(j,K);if(j instanceof ArrayBuffer)return Np(new Uint8Array(j),K);if(j instanceof ReadableStream)return j.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Mm(j,m);var j}(t,Id(e));i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){!function Am(i,e,t){const o=Ct(i);var u;(u=(0,F.Z)(function*(d,m,D){try{const j=yield m.getMetadata();if(yield function(st,St){const xt=Ct(st),an=fs(St.createTime);return xt.persistence.runTransaction("hasNewerBundle","readonly",Hn=>xt._s.getBundleMetadata(Hn,St.id)).then(Hn=>!!Hn&&Hn.createTime.compareTo(an)>=0)}(d.localStore,j))return yield m.close(),D._completeWith({taskState:"Success",documentsLoaded:(st=j).totalDocuments,bytesLoaded:st.totalBytes,totalDocuments:st.totalDocuments,totalBytes:st.totalBytes}),Promise.resolve(new Set);D._updateProgress(gm(j));const K=new u_(j,d.localStore,m.M);let ge=yield m.da();for(;ge;){const st=yield K.ku(ge);st&&D._updateProgress(st),ge=yield m.da()}const Oe=yield K.complete();return yield Qo(d,Oe.Fu,void 0),yield function(st,St){const xt=Ct(st);return xt.persistence.runTransaction("Save bundle","readwrite",an=>xt._s.saveBundleMetadata(an,St))}(d.localStore,j),D._completeWith(Oe.progress),Promise.resolve(Oe.Ou)}catch(j){return Ce("SyncEngine",`Loading bundle failed with ${j}`),D._failWith(j),Promise.resolve(new Set)}var st}),function(d,m,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Bp(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Qp(i,e){return function D_(i,e){return i.asyncQueue.enqueue((0,F.Z)(function*(){return function(t,o){const u=Ct(t);return u.persistence.runTransaction("Get named query","readonly",d=>u._s.getNamedQuery(d,o))}(yield Up(i),e)}))}(Gi(i=br(i,Ei)),e).then(t=>t?new Js(i,null,t.query):null)}(this._delegate,e).then(t=>t?new To(this,t):null)}}class jd extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hc(new pa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Us.forKey(t,this.firestore,null)}}class ol{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}get(e){const t=Yl(e);return this._delegate.get(t).then(o=>new Gc(this._firestore,new fu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Yl(e);return o?(yf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Yl(e);return this._delegate.delete(t),this}}class hy{constructor(e){this._delegate=e}set(e,t,o){const u=Yl(e);return o?(yf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Yl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Bc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wc(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Zl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Zl(e,new jd(e),t),u.set(t,d)),d}}Zl.INSTANCES=new WeakMap;class Us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new Dt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Us(t,new vi(t._delegate,o,new Ht(e)))}static forKey(e,t,o){return new Us(t,new vi(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new zc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zc(this.firestore,Wp(this._delegate,e))}catch(t){throw Co(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Le.m9)(e))instanceof vi&&lf(this._delegate,e)}set(e,t){t=yf("DocumentReference.set",t);try{return t?pg(this._delegate,e,t):pg(this._delegate,e)}catch(o){throw Co(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?sy(this._delegate,e):sy(this._delegate,e,t,...o)}catch(u){throw Co(u,"updateDoc()","DocumentReference.update()")}}delete(){return function k_(i){return $c(br(i.firestore,Ei),[new Il(i._key,$i.none())])}(this._delegate)}onSnapshot(...e){const t=vf(e),o=W_(e,u=>new Gc(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return oy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ey(i){i=br(i,vi);const e=br(i.firestore,Ei),t=Gi(e),o=new sl(e);return function Xv(i,e){const t=new jr;return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return(o=(0,F.Z)(function*(u,d,m){try{const D=yield function(j,K){const ge=Ct(j);return ge.persistence.runTransaction("read document","readonly",Oe=>ge.ci.Ls(Oe,K))}(u,d);D.isFoundDocument()?m.resolve(D):D.isNoDocument()?m.resolve(null):m.reject(new Dt(Ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const j=$l(D,`Failed to get document '${d} from cache`);m.reject(j)}}),function(u,d,m){return o.apply(this,arguments)})(yield Up(i),e,t);var o})),t.promise}(t,i._key).then(u=>new fu(e,o,i._key,u,new rl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ty(i){i=br(i,vi);const e=br(i.firestore,Ei);return E_(Gi(e),i._key,{source:"server"}).then(t=>gg(e,i,t))}(this._delegate):function Jm(i){i=br(i,vi);const e=br(i.firestore,Ei);return E_(Gi(e),i._key).then(t=>gg(e,i,t))}(this._delegate),t.then(o=>new Gc(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Us(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function Co(i,e,t){return i.message=i.message.replace(e,t),i}function vf(i){for(const e of i)if("object"==typeof e&&!_f(e))return e;return{}}function W_(i,e){var t,o;let u;return u=_f(i[0])?i[0]:_f(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Gc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Us(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gf(this._delegate,e._delegate)}}class Wc extends Gc{data(e){const t=this._delegate.data(e);return function cn(i,e){i||ft()}(void 0!==t),t}}class To{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}where(e,t,o){try{return new To(this.firestore,il(this._delegate,function ma(i,e,t){const o=e,u=pf("where",i);return new Ba(u,o,t)}(e,t,o)))}catch(u){throw Co(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new To(this.firestore,il(this._delegate,function qm(i,e="asc"){const t=e,o=pf("orderBy",i);return new ya(o,t)}(e,t)))}catch(o){throw Co(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new To(this.firestore,il(this._delegate,function x_(i){return Nm("limit",i),new lg("limit",i,"F")}(e)))}catch(t){throw Co(t,"limit()","Query.limit()")}}limitToLast(e){try{return new To(this.firestore,il(this._delegate,function R_(i){return Nm("limitToLast",i),new lg("limitToLast",i,"L")}(e)))}catch(t){throw Co(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new To(this.firestore,il(this._delegate,function O_(...i){return new Zm("startAt",i,!0)}(...e)))}catch(t){throw Co(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new To(this.firestore,il(this._delegate,function cg(...i){return new Zm("startAfter",i,!1)}(...e)))}catch(t){throw Co(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new To(this.firestore,il(this._delegate,function P_(...i){return new jc("endBefore",i,!1)}(...e)))}catch(t){throw Co(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new To(this.firestore,il(this._delegate,function Ym(...i){return new jc("endAt",i,!0)}(...e)))}catch(t){throw Co(t,"endAt()","Query.endAt()")}}isEqual(e){return Lm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ry(i){i=br(i,Js);const e=br(i.firestore,Ei),t=Gi(e),o=new sl(e);return function w_(i,e){const t=new jr;return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return(o=(0,F.Z)(function*(u,d,m){try{const D=yield uu(u,d,!0),j=new Tp(d,D.li),K=j.Gu(D.documents),ge=j.applyChanges(K,!1);m.resolve(ge.snapshot)}catch(D){const j=$l(D,`Failed to execute query '${d} against cache`);m.reject(j)}}),function(u,d,m){return o.apply(this,arguments)})(yield Up(i),e,t);var o})),t.promise}(t,i._query).then(u=>new ql(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function iy(i){i=br(i,Js);const e=br(i.firestore,Ei),t=Gi(e),o=new sl(e);return jp(t,i._query,{source:"server"}).then(u=>new ql(e,o,i,u))}(this._delegate):function ny(i){i=br(i,Js);const e=br(i.firestore,Ei),t=Gi(e),o=new sl(e);return ga(i._query),jp(t,i._query).then(u=>new ql(e,o,i,u))}(this._delegate),t.then(o=>new vg(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=vf(e),o=W_(e,u=>new vg(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return oy(this._delegate,t,o)}withConverter(e){return new To(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}class Mn{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Wc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new To(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Mn(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Wc(this._firestore,o))})}isEqual(e){return gf(this._delegate,e._delegate)}}class zc extends To{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Us(this.firestore,e):null}doc(e){try{return new Us(this.firestore,void 0===e?Kp(this._delegate):Kp(this._delegate,e))}catch(t){throw Co(t,"doc()","CollectionReference.doc()")}}add(e){return function N_(i,e){const t=br(i.firestore,Ei),o=Kp(i),u=Bd(i.converter,e);return $c(t,[Fd(nl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,$i.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Us(this.firestore,t))}isEqual(e){return lf(this._delegate,e._delegate)}withConverter(e){return new zc(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function Yl(i){return br(i,vi)}class Kc{constructor(...e){this._delegate=new du(...e)}static documentId(){return new Kc(is.keyField().canonicalString())}isEqual(e){return(e=(0,Le.m9)(e))instanceof du&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ql{constructor(e){this._delegate=e}static serverTimestamp(){const e=function B_(){return new hf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ql(e)}static delete(){const e=function U_(){return new Uc("deleteField")}();return e._methodName="FieldValue.delete",new Ql(e)}static arrayUnion(...e){const t=function j_(...i){return new Gm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Ql(t)}static arrayRemove(...e){const t=function $_(...i){return new Wm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Ql(t)}static increment(e){const t=function H_(i){return new r0("increment",i)}(e);return t._methodName="FieldValue.increment",new Ql(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ef={Firestore:_g,GeoPoint:Nd,Timestamp:Pi,Blob:Hc,Transaction:ol,WriteBatch:hy,DocumentReference:Us,DocumentSnapshot:Gc,Query:To,QueryDocumentSnapshot:Wc,QuerySnapshot:vg,CollectionReference:zc,FieldPath:Kc,FieldValue:Ql,setLogLevel:function dy(i){!function L(i){_.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function ts(i){(function wf(i,e){i.INTERNAL.registerComponent(new pe.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},Ef)))})(i,(e,t)=>new _g(e,t,new cy)),i.registerVersion("@firebase/firestore-compat","0.1.17")}(H.Z);var Xl=T(1205),fy=T(440),z_=T(127);function Eg(i,e){return function K_(i,e=N.z){return new G.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function If(i,e){return Eg(i,e).pipe((0,We.U)(t=>({payload:t,type:"query"})))}function $d(i,e){return If(i,e).pipe((0,$e.O)(void 0),Ie(),(0,We.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((m,D)=>{const j=u.find(ge=>ge.doc.ref.isEqual(m.ref)),K=null==t?void 0:t.payload.docs.find(ge=>ge.ref.isEqual(m.ref));j&&JSON.stringify(j.doc.metadata)===JSON.stringify(m.metadata)||!j&&K&&JSON.stringify(K.metadata)===JSON.stringify(m.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:m}})}),d}))}function gy(i,e,t){return $d(i,t).pipe((0,Ke.R)((o,u)=>function q_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Hd(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return wg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function re(i,e=le.y){return i=null!=i?i:_e,(0,Ee.e)((t,o)=>{let u,d=!0;t.subscribe((0,ue.x)(o,m=>{const D=e(m);(d||!i(u,D))&&(d=!1,u=D,o.next(m))}))})}(),(0,We.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function wg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function my(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class yy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=$d(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,We.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,$e.O)(void 0),Ie(),(0,Et.h)(([o,u])=>u.length>0||!o),(0,We.U)(([o,u])=>u),me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ke.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(me.iC)}valueChanges(e={}){return If(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),me.iC)}get(e){return(0,de.D)(this.query.get(e)).pipe(me.iC)}add(e){return this.ref.add(e)}doc(e){return new _y(this.ref.doc(e),this.afs)}}class _y{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=qc(o,t);return new yy(u,d,this.afs)}snapshotChanges(){return function py(i,e){return Eg(i,e).pipe((0,$e.O)(void 0),Ie(),(0,We.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(me.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,We.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,de.D)(this.ref.get(e)).pipe(me.iC)}}class Df{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$d(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Et.h)(t=>t.length>0),me.iC):$d(this.query,this.afs.schedulers.outsideAngular).pipe(me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ke.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(me.iC)}valueChanges(e={}){return If(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),me.iC)}get(e){return(0,de.D)(this.query.get(e)).pipe(me.iC)}}const Ig=new p.OlP("angularfire2.enableFirestorePersistence"),Dg=new p.OlP("angularfire2.firestore.persistenceSettings"),vy=new p.OlP("angularfire2.firestore.settings"),Z_=new p.OlP("angularfire2.firestore.use-emulator");function qc(i,e=(t=>t)){return{query:e(i),ref:i}}let Zc=(()=>{class i{constructor(t,o,u,d,m,D,j,K,ge,Oe,st,St,xt,an,Hn,wi,Mi){this.schedulers=j;const ci=(0,Ve.on)(t,D,o),gs=ge;Oe&&(0,Xl.nw)(ci,D,st,xt,an,Hn,St,wi),[this.firestore,this.persistenceEnabled$]=(0,Ve.cc)(`${ci.name}.firestore`,"AngularFirestore",ci.name,()=>{const xi=D.runOutsideAngular(()=>ci.firestore());if(d&&xi.settings(d),gs&&xi.useEmulator(...gs),u&&!(0,Te.PM)(m)){const Wi=()=>{try{return(0,de.D)(xi.enablePersistence(K||void 0).then(()=>!0,()=>!1))}catch(eo){return"undefined"!=typeof console&&console.warn(eo),(0,ie.of)(!1)}};return[xi,D.runOutsideAngular(Wi)]}return[xi,(0,ie.of)(!1)]},[d,gs,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:m}=qc(u,o),D=this.schedulers.ngZone.run(()=>d);return new yy(D,m,this)}collectionGroup(t,o){const u=o||(m=>m),d=this.firestore.collectionGroup(t);return new Df(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new _y(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Ve.Dh),p.LFG(Ve.xv,8),p.LFG(Ig,8),p.LFG(vy,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(me.HU),p.LFG(Dg,8),p.LFG(Z_,8),p.LFG(Xl.zQ,8),p.LFG(Xl.Qv,8),p.LFG(Xl.L6,8),p.LFG(Xl._Q,8),p.LFG(Xl.rT,8),p.LFG(Xl.lh,8),p.LFG(Xl.f7,8),p.LFG(fy.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Y_=(()=>{class i{constructor(){z_.Z.registerVersion("angularfire",me.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:Ig,useValue:!0},{provide:Dg,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[Zc]}),i})()},4585:(pt,Se,T)=>{"use strict";T.d(Se,{Q1:()=>Z,TE:()=>mr});var p=T(9751),N=T(9646),G=T(8996),de=T(8372),ie=T(4004),me=T(3900),Ee=T(5813),ue=T(5e3),Ie=T(2011),le=T(3942),re=T(5861),_e=T(9681),$e=T(2090),We=T(4859);const Ke="firebasestorage.googleapis.com",Et="storageBucket";class ct extends $e.ZR{constructor(O,ee){super(H(O),`Firebase Storage: ${ee} (${H(O)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ct.prototype)}_codeEquals(O){return H(O)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(O){this.customData.serverResponse=O,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function H(V){return"storage/"+V}function F(){return new ct("unknown","An unknown error occurred, please check the error payload for server response.")}function X(){return new ct("canceled","User canceled the upload/download.")}function he(){return new ct("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ht(V){return new ct("invalid-argument",V)}function Qe(){return new ct("app-deleted","The Firebase app was deleted.")}function vt(V){return new ct("invalid-root-operation","The operation '"+V+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pt(V,O){return new ct("invalid-format","String does not match format '"+V+"': "+O)}function bt(V){throw new ct("internal-error","Internal error: "+V)}class Tt{constructor(O,ee){this.bucket=O,this.path_=ee}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const O=encodeURIComponent;return"/b/"+O(this.bucket)+"/o/"+O(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(O,ee){let Q;try{Q=Tt.makeFromUrl(O,ee)}catch(De){return new Tt(O,"")}if(""===Q.path)return Q;throw function ce(V){return new ct("invalid-default-bucket","Invalid default bucket '"+V+"'.")}(O)}static makeFromUrl(O,ee){let Q=null;const De="([A-Za-z0-9.\\-_]+)",rn=new RegExp("^gs://"+De+"(/(.*))?$","i");function _n(yr){yr.path_=decodeURIComponent(yr.path)}const Vr=ee.replace(/[.]/g,"\\."),Fr=[{regex:rn,indices:{bucket:1,path:3},postModify:function rt(yr){"/"===yr.path.charAt(yr.path.length-1)&&(yr.path_=yr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Vr}/v[A-Za-z0-9_]+/b/${De}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_n},{regex:new RegExp(`^https?://${ee===Ke?"(?:storage.googleapis.com|storage.cloud.google.com)":ee}/${De}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_n}];for(let yr=0;yr<Fr.length;yr++){const _s=Fr[yr],Yi=_s.regex.exec(O);if(Yi){let Dr=Yi[_s.indices.path];Dr||(Dr=""),Q=new Tt(Yi[_s.indices.bucket],Dr),_s.postModify(Q);break}}if(null==Q)throw function Pe(V){return new ct("invalid-url","Invalid URL '"+V+"'.")}(O);return Q}}class dt{constructor(O){this.promise_=Promise.reject(O)}getPromise(){return this.promise_}cancel(O=!1){}}function tr(V){return"string"==typeof V||V instanceof String}function On(V){return En()&&V instanceof Blob}function En(){return"undefined"!=typeof Blob}function Un(V,O,ee,Q){if(Q<O)throw ht(`Invalid value for '${V}'. Expected ${O} or greater.`);if(Q>ee)throw ht(`Invalid value for '${V}'. Expected ${ee} or less.`)}function ir(V,O,ee){let Q=O;return null==ee&&(Q=`https://${O}`),`${ee}://${Q}/v0${V}`}function Zn(V){const O=encodeURIComponent;let ee="?";for(const Q in V)V.hasOwnProperty(Q)&&(ee=ee+(O(Q)+"=")+O(V[Q])+"&");return ee=ee.slice(0,-1),ee}var Gt=(()=>{return(V=Gt||(Gt={}))[V.NO_ERROR=0]="NO_ERROR",V[V.NETWORK_ERROR=1]="NETWORK_ERROR",V[V.ABORT=2]="ABORT",Gt;var V})();class ln{constructor(O,ee,Q,De,rt,wt,rn,Wt,_n,qn,Vr){this.url_=O,this.method_=ee,this.headers_=Q,this.body_=De,this.successCodes_=rt,this.additionalRetryCodes_=wt,this.callback_=rn,this.errorCallback_=Wt,this.timeout_=_n,this.progressCallback_=qn,this.connectionFactory_=Vr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Mr,oi)=>{this.resolve_=Mr,this.reject_=oi,this.start_()})}start_(){const ee=(Q,De)=>{const rt=this.resolve_,wt=this.reject_,rn=De.connection;if(De.wasSuccessCode)try{const Wt=this.callback_(rn,rn.getResponse());!function on(V){return void 0!==V}(Wt)?rt():rt(Wt)}catch(Wt){wt(Wt)}else if(null!==rn){const Wt=F();Wt.serverResponse=rn.getErrorText(),wt(this.errorCallback_?this.errorCallback_(rn,Wt):Wt)}else wt(De.canceled?this.appDelete_?Qe():X():function ve(){return new ct("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?ee(0,new Tn(!1,null,!0)):this.backoffId_=function hn(V,O,ee){let Q=1,De=null,rt=null,wt=!1,rn=0;function Wt(){return 2===rn}let _n=!1;function qn(...Wn){_n||(_n=!0,O.apply(null,Wn))}function Vr(Wn){De=setTimeout(()=>{De=null,V(oi,Wt())},Wn)}function Mr(){rt&&clearTimeout(rt)}function oi(Wn,...Ur){if(_n)return void Mr();if(Wn)return Mr(),void qn.call(null,Wn,...Ur);if(Wt()||wt)return Mr(),void qn.call(null,Wn,...Ur);let Fr;Q<64&&(Q*=2),1===rn?(rn=2,Fr=0):Fr=1e3*(Q+Math.random()),Vr(Fr)}let Hr=!1;function yi(Wn){Hr||(Hr=!0,Mr(),!_n&&(null!==De?(Wn||(rn=2),clearTimeout(De),Vr(0)):Wn||(rn=1)))}return Vr(0),rt=setTimeout(()=>{wt=!0,yi(!0)},ee),yi}((Q,De)=>{if(De)return void Q(!1,new Tn(!1,null,!0));const rt=this.connectionFactory_();this.pendingConnection_=rt;const wt=rn=>{null!==this.progressCallback_&&this.progressCallback_(rn.loaded,rn.lengthComputable?rn.total:-1)};null!==this.progressCallback_&&rt.addUploadProgressListener(wt),rt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&rt.removeUploadProgressListener(wt),this.pendingConnection_=null;const rn=rt.getErrorCode()===Gt.NO_ERROR,Wt=rt.getStatus();if(!rn||this.isRetryStatusCode_(Wt)){const qn=rt.getErrorCode()===Gt.ABORT;return void Q(!1,new Tn(!1,null,qn))}const _n=-1!==this.successCodes_.indexOf(Wt);Q(!0,new Tn(_n,rt))})},ee,this.timeout_)}getPromise(){return this.promise_}cancel(O){this.canceled_=!0,this.appDelete_=O||!1,null!==this.backoffId_&&function fn(V){V(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(O){const ee=O>=500&&O<600,De=-1!==[408,429].indexOf(O),rt=-1!==this.additionalRetryCodes_.indexOf(O);return ee||De||rt}}class Tn{constructor(O,ee,Q){this.wasSuccessCode=O,this.connection=ee,this.canceled=!!Q}}function Gr(...V){const O=function ti(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==O){const ee=new O;for(let Q=0;Q<V.length;Q++)ee.append(V[Q]);return ee.getBlob()}if(En())return new Blob(V);throw new ct("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Kt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nr{constructor(O,ee){this.data=O,this.contentType=ee||null}}function vr(V,O){switch(V){case Kt.RAW:return new nr(An(O));case Kt.BASE64:case Kt.BASE64URL:return new nr(Ln(V,O));case Kt.DATA_URL:return new nr(function Zt(V){const O=new ur(V);return O.base64?Ln(Kt.BASE64,O.rest):function Qn(V){let O;try{O=decodeURIComponent(V)}catch(ee){throw Pt(Kt.DATA_URL,"Malformed data URL.")}return An(O)}(O.rest)}(O),function sr(V){return new ur(V).contentType}(O))}throw F()}function An(V){const O=[];for(let ee=0;ee<V.length;ee++){let Q=V.charCodeAt(ee);Q<=127?O.push(Q):Q<=2047?O.push(192|Q>>6,128|63&Q):55296==(64512&Q)?ee<V.length-1&&56320==(64512&V.charCodeAt(ee+1))?(Q=65536|(1023&Q)<<10|1023&V.charCodeAt(++ee),O.push(240|Q>>18,128|Q>>12&63,128|Q>>6&63,128|63&Q)):O.push(239,191,189):56320==(64512&Q)?O.push(239,191,189):O.push(224|Q>>12,128|Q>>6&63,128|63&Q)}return new Uint8Array(O)}function Ln(V,O){switch(V){case Kt.BASE64:{const De=-1!==O.indexOf("-"),rt=-1!==O.indexOf("_");if(De||rt)throw Pt(V,"Invalid character '"+(De?"-":"_")+"' found: is it base64url encoded?");break}case Kt.BASE64URL:{const De=-1!==O.indexOf("+"),rt=-1!==O.indexOf("/");if(De||rt)throw Pt(V,"Invalid character '"+(De?"+":"/")+"' found: is it base64 encoded?");O=O.replace(/-/g,"+").replace(/_/g,"/");break}}let ee;try{ee=function Vt(V){return atob(V)}(O)}catch(De){throw Pt(V,"Invalid character found")}const Q=new Uint8Array(ee.length);for(let De=0;De<ee.length;De++)Q[De]=ee.charCodeAt(De);return Q}class ur{constructor(O){this.base64=!1,this.contentType=null;const ee=O.match(/^data:([^,]+)?,/);if(null===ee)throw Pt(Kt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Q=ee[1]||null;null!=Q&&(this.base64=function Ze(V,O){return V.length>=O.length&&V.substring(V.length-O.length)===O}(Q,";base64"),this.contentType=this.base64?Q.substring(0,Q.length-7):Q),this.rest=O.substring(O.indexOf(",")+1)}}class gt{constructor(O,ee){let Q=0,De="";On(O)?(this.data_=O,Q=O.size,De=O.type):O instanceof ArrayBuffer?(ee?this.data_=new Uint8Array(O):(this.data_=new Uint8Array(O.byteLength),this.data_.set(new Uint8Array(O))),Q=this.data_.length):O instanceof Uint8Array&&(ee?this.data_=O:(this.data_=new Uint8Array(O.length),this.data_.set(O)),Q=O.length),this.size_=Q,this.type_=De}size(){return this.size_}type(){return this.type_}slice(O,ee){if(On(this.data_)){const De=function bn(V,O,ee){return V.webkitSlice?V.webkitSlice(O,ee):V.mozSlice?V.mozSlice(O,ee):V.slice?V.slice(O,ee):null}(this.data_,O,ee);return null===De?null:new gt(De)}{const Q=new Uint8Array(this.data_.buffer,O,ee-O);return new gt(Q,!0)}}static getBlob(...O){if(En()){const ee=O.map(Q=>Q instanceof gt?Q.data_:Q);return new gt(Gr.apply(null,ee))}{const ee=O.map(wt=>tr(wt)?vr(Kt.RAW,wt).data:wt.data_);let Q=0;ee.forEach(wt=>{Q+=wt.byteLength});const De=new Uint8Array(Q);let rt=0;return ee.forEach(wt=>{for(let rn=0;rn<wt.length;rn++)De[rt++]=wt[rn]}),new gt(De,!0)}}uploadData(){return this.data_}}function Be(V){let O;try{O=JSON.parse(V)}catch(ee){return null}return function Gn(V){return"object"==typeof V&&!Array.isArray(V)}(O)?O:null}function pn(V){const O=V.lastIndexOf("/",V.length-2);return-1===O?V:V.slice(O+1)}function qt(V,O){return O}class fe{constructor(O,ee,Q,De){this.server=O,this.local=ee||O,this.writable=!!Q,this.xform=De||qt}}let ne=null;function nt(){if(ne)return ne;const V=[];V.push(new fe("bucket")),V.push(new fe("generation")),V.push(new fe("metageneration")),V.push(new fe("name","fullPath",!0));const ee=new fe("name");ee.xform=function O(rt,wt){return function Ae(V){return!tr(V)||V.length<2?V:pn(V)}(wt)},V.push(ee);const De=new fe("size");return De.xform=function Q(rt,wt){return void 0!==wt?Number(wt):wt},V.push(De),V.push(new fe("timeCreated")),V.push(new fe("updated")),V.push(new fe("md5Hash",null,!0)),V.push(new fe("cacheControl",null,!0)),V.push(new fe("contentDisposition",null,!0)),V.push(new fe("contentEncoding",null,!0)),V.push(new fe("contentLanguage",null,!0)),V.push(new fe("contentType",null,!0)),V.push(new fe("metadata","customMetadata",!0)),ne=V,ne}function xe(V,O,ee){const Q=Be(O);return null===Q?null:function Nt(V,O,ee){const Q={type:"file"},De=ee.length;for(let rt=0;rt<De;rt++){const wt=ee[rt];Q[wt.local]=wt.xform(Q,O[wt.server])}return function ze(V,O){Object.defineProperty(V,"ref",{get:function ee(){const rt=new Tt(V.bucket,V.fullPath);return O._makeStorageReference(rt)}})}(Q,V),Q}(V,Q,ee)}function ae(V,O){const ee={},Q=O.length;for(let De=0;De<Q;De++){const rt=O[De];rt.writable&&(ee[rt.server]=V[rt.local])}return JSON.stringify(ee)}const ke="prefixes";class vn{constructor(O,ee,Q,De){this.url=O,this.method=ee,this.handler=Q,this.timeout=De,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Rn(V){if(!V)throw F()}function $r(V,O){return function ee(Q,De){const rt=xe(V,De,O);return Rn(null!==rt),rt}}function fr(V){return function O(ee,Q){let De;return De=401===ee.getStatus()?ee.getErrorText().includes("Firebase App Check token is invalid")?function Le(){return new ct("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Ue(){return new ct("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===ee.getStatus()?function pe(V){return new ct("quota-exceeded","Quota for bucket '"+V+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(V.bucket):403===ee.getStatus()?function Re(V){return new ct("unauthorized","User does not have permission to access '"+V+"'.")}(V.path):Q,De.serverResponse=Q.serverResponse,De}}function Qr(V){const O=fr(V);return function ee(Q,De){let rt=O(Q,De);return 404===Q.getStatus()&&(rt=function te(V){return new ct("object-not-found","Object '"+V+"' does not exist.")}(V.path)),rt.serverResponse=De.serverResponse,rt}}function Kr(V,O,ee){const De=ir(O.fullServerUrl(),V.host,V._protocol),wt=V.maxOperationRetryTime,rn=new vn(De,"GET",$r(V,ee),wt);return rn.errorHandler=Qr(O),rn}function Mt(V,O,ee,Q,De){const rt={};rt.prefix=O.isRoot?"":O.path+"/",ee&&ee.length>0&&(rt.delimiter=ee),Q&&(rt.pageToken=Q),De&&(rt.maxResults=De);const rn=ir(O.bucketOnlyServerUrl(),V.host,V._protocol),_n=V.maxOperationRetryTime,qn=new vn(rn,"GET",function Wr(V,O){return function ee(Q,De){const rt=function Jt(V,O,ee){const Q=Be(ee);return null===Q?null:function kt(V,O,ee){const Q={prefixes:[],items:[],nextPageToken:ee.nextPageToken};if(ee[ke])for(const De of ee[ke]){const rt=De.replace(/\/$/,""),wt=V._makeStorageReference(new Tt(O,rt));Q.prefixes.push(wt)}if(ee.items)for(const De of ee.items){const rt=V._makeStorageReference(new Tt(O,De.name));Q.items.push(rt)}return Q}(V,O,Q)}(V,O,De);return Rn(null!==rt),rt}}(V,O.bucket),_n);return qn.urlParams=rt,qn.errorHandler=fr(O),qn}function ni(V,O,ee){const Q=Object.assign({},ee);return Q.fullPath=V.path,Q.size=O.size(),Q.contentType||(Q.contentType=function Tr(V,O){return V&&V.contentType||O&&O.type()||"application/octet-stream"}(null,O)),Q}class or{constructor(O,ee,Q,De){this.current=O,this.total=ee,this.finalized=!!Q,this.metadata=De||null}}function Or(V,O){let ee=null;try{ee=V.getResponseHeader("X-Goog-Upload-Status")}catch(De){Rn(!1)}return Rn(!!ee&&-1!==(O||["active"]).indexOf(ee)),ee}const Ar={STATE_CHANGED:"state_changed"},Pn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qr(V){switch(V){case"running":case"pausing":case"canceling":return Pn.RUNNING;case"paused":return Pn.PAUSED;case"success":return Pn.SUCCESS;case"canceled":return Pn.CANCELED;default:return Pn.ERROR}}class Xr{constructor(O,ee,Q){if(function zn(V){return"function"==typeof V}(O)||null!=ee||null!=Q)this.next=O,this.error=null!=ee?ee:void 0,this.complete=null!=Q?Q:void 0;else{const rt=O;this.next=rt.next,this.error=rt.error,this.complete=rt.complete}}}function Sr(V){return(...O)=>{Promise.resolve().then(()=>V(...O))}}class Li extends class os{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gt.NO_ERROR,this.sendPromise_=new Promise(O=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gt.ABORT,O()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gt.NETWORK_ERROR,O()}),this.xhr_.addEventListener("load",()=>{O()})})}send(O,ee,Q,De){if(this.sent_)throw bt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ee,O,!0),void 0!==De)for(const rt in De)De.hasOwnProperty(rt)&&this.xhr_.setRequestHeader(rt,De[rt].toString());return void 0!==Q?this.xhr_.send(Q):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(O){return-1}}getResponse(){if(!this.sent_)throw bt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(O){return this.xhr_.getResponseHeader(O)}addUploadProgressListener(O){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",O)}removeUploadProgressListener(O){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",O)}}{initXhr(){this.xhr_.responseType="text"}}function lr(){return new Li}class pi{constructor(O,ee,Q=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=O,this._blob=ee,this._metadata=Q,this._mappings=nt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=De=>{this._request=void 0,this._chunkMultiplier=1,De._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=De,this._transition("error"))},this._metadataErrorHandler=De=>{this._request=void 0,De._codeEquals("canceled")?this.completeTransitions_():(this._error=De,this._transition("error"))},this._promise=new Promise((De,rt)=>{this._resolve=De,this._reject=rt,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const O=this._transferred;return ee=>this._updateProgress(O+ee)}_shouldDoResumable(O){return O.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(O){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([ee,Q])=>{switch(this._state){case"running":O(ee,Q);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((O,ee)=>{const Q=function mn(V,O,ee,Q,De){const rt=O.bucketOnlyServerUrl(),wt=ni(O,Q,De),rn={name:wt.fullPath},Wt=ir(rt,V.host,V._protocol),qn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Q.size()}`,"X-Goog-Upload-Header-Content-Type":wt.contentType,"Content-Type":"application/json; charset=utf-8"},Vr=ae(wt,ee),Hr=new vn(Wt,"POST",function oi(yi){let Wn;Or(yi);try{Wn=yi.getResponseHeader("X-Goog-Upload-URL")}catch(Ur){Rn(!1)}return Rn(tr(Wn)),Wn},V.maxUploadRetryTime);return Hr.urlParams=rn,Hr.headers=qn,Hr.body=Vr,Hr.errorHandler=fr(O),Hr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),De=this._ref.storage._makeRequest(Q,lr,O,ee);this._request=De,De.getPromise().then(rt=>{this._request=void 0,this._uploadUrl=rt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const O=this._uploadUrl;this._resolveToken((ee,Q)=>{const De=function ri(V,O,ee,Q){const Wt=new vn(ee,"POST",function rt(_n){const qn=Or(_n,["active","final"]);let Vr=null;try{Vr=_n.getResponseHeader("X-Goog-Upload-Size-Received")}catch(oi){Rn(!1)}Vr||Rn(!1);const Mr=Number(Vr);return Rn(!isNaN(Mr)),new or(Mr,Q.size(),"final"===qn)},V.maxUploadRetryTime);return Wt.headers={"X-Goog-Upload-Command":"query"},Wt.errorHandler=fr(O),Wt}(this._ref.storage,this._ref._location,O,this._blob),rt=this._ref.storage._makeRequest(De,lr,ee,Q);this._request=rt,rt.getPromise().then(wt=>{wt=wt,this._request=void 0,this._updateProgress(wt.current),this._needToFetchStatus=!1,wt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const O=262144*this._chunkMultiplier,ee=new or(this._transferred,this._blob.size()),Q=this._uploadUrl;this._resolveToken((De,rt)=>{let wt;try{wt=function ns(V,O,ee,Q,De,rt,wt,rn){const Wt=new or(0,0);if(wt?(Wt.current=wt.current,Wt.total=wt.total):(Wt.current=0,Wt.total=Q.size()),Q.size()!==Wt.total)throw function Ge(){return new ct("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _n=Wt.total-Wt.current;let qn=_n;De>0&&(qn=Math.min(qn,De));const Vr=Wt.current,Hr={"X-Goog-Upload-Command":qn===_n?"upload, finalize":"upload","X-Goog-Upload-Offset":`${Wt.current}`},yi=Q.slice(Vr,Vr+qn);if(null===yi)throw he();const Fr=new vn(ee,"POST",function Wn(yr,_s){const Yi=Or(yr,["active","final"]),no=Wt.current+qn,Dr=Q.size();let Ps;return Ps="final"===Yi?$r(O,rt)(yr,_s):null,new or(no,Dr,"final"===Yi,Ps)},O.maxUploadRetryTime);return Fr.headers=Hr,Fr.body=yi.uploadData(),Fr.progressCallback=rn||null,Fr.errorHandler=fr(V),Fr}(this._ref._location,this._ref.storage,Q,this._blob,O,this._mappings,ee,this._makeProgressCallback())}catch(Wt){return this._error=Wt,void this._transition("error")}const rn=this._ref.storage._makeRequest(wt,lr,De,rt);this._request=rn,rn.getPromise().then(Wt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Wt.current),Wt.finalized?(this._metadata=Wt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((O,ee)=>{const Q=Kr(this._ref.storage,this._ref._location,this._mappings),De=this._ref.storage._makeRequest(Q,lr,O,ee);this._request=De,De.getPromise().then(rt=>{this._request=void 0,this._metadata=rt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((O,ee)=>{const Q=function Bn(V,O,ee,Q,De){const rt=O.bucketOnlyServerUrl(),wt={"X-Goog-Upload-Protocol":"multipart"},Wt=function rn(){let Fr="";for(let yr=0;yr<2;yr++)Fr+=Math.random().toString().slice(2);return Fr}();wt["Content-Type"]="multipart/related; boundary="+Wt;const _n=ni(O,Q,De),qn=ae(_n,ee),oi=gt.getBlob("--"+Wt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+qn+"\r\n--"+Wt+"\r\nContent-Type: "+_n.contentType+"\r\n\r\n",Q,"\r\n--"+Wt+"--");if(null===oi)throw he();const Hr={name:_n.fullPath},yi=ir(rt,V.host,V._protocol),Ur=V.maxUploadRetryTime,Ui=new vn(yi,"POST",$r(V,ee),Ur);return Ui.urlParams=Hr,Ui.headers=wt,Ui.body=oi.uploadData(),Ui.errorHandler=fr(O),Ui}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),De=this._ref.storage._makeRequest(Q,lr,O,ee);this._request=De,De.getPromise().then(rt=>{this._request=void 0,this._metadata=rt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(O){const ee=this._transferred;this._transferred=O,this._transferred!==ee&&this._notifyObservers()}_transition(O){if(this._state!==O)switch(O){case"canceling":case"pausing":this._state=O,void 0!==this._request&&this._request.cancel();break;case"running":const ee="paused"===this._state;this._state=O,ee&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=O,this._notifyObservers();break;case"canceled":this._error=X(),this._state=O,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const O=qr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:O,metadata:this._metadata,task:this,ref:this._ref}}on(O,ee,Q,De){const rt=new Xr(ee||void 0,Q||void 0,De||void 0);return this._addObserver(rt),()=>{this._removeObserver(rt)}}then(O,ee){return this._promise.then(O,ee)}catch(O){return this.then(null,O)}_addObserver(O){this._observers.push(O),this._notifyObserver(O)}_removeObserver(O){const ee=this._observers.indexOf(O);-1!==ee&&this._observers.splice(ee,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(ee=>{this._notifyObserver(ee)})}_finishPromise(){if(void 0!==this._resolve){let O=!0;switch(qr(this._state)){case Pn.SUCCESS:Sr(this._resolve.bind(null,this.snapshot))();break;case Pn.CANCELED:case Pn.ERROR:Sr(this._reject.bind(null,this._error))();break;default:O=!1}O&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(O){switch(qr(this._state)){case Pn.RUNNING:case Pn.PAUSED:O.next&&Sr(O.next.bind(O,this.snapshot))();break;case Pn.SUCCESS:O.complete&&Sr(O.complete.bind(O))();break;default:O.error&&Sr(O.error.bind(O,this._error))()}}resume(){const O="paused"===this._state||"pausing"===this._state;return O&&this._transition("running"),O}pause(){const O="running"===this._state;return O&&this._transition("pausing"),O}cancel(){const O="running"===this._state||"pausing"===this._state;return O&&this._transition("canceling"),O}}class Zr{constructor(O,ee){this._service=O,this._location=ee instanceof Tt?ee:Tt.makeFromUrl(ee,O.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(O,ee){return new Zr(O,ee)}get root(){const O=new Tt(this._location.bucket,"");return this._newRef(this._service,O)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pn(this._location.path)}get storage(){return this._service}get parent(){const O=function At(V){if(0===V.length)return null;const O=V.lastIndexOf("/");return-1===O?"":V.slice(0,O)}(this._location.path);if(null===O)return null;const ee=new Tt(this._location.bucket,O);return new Zr(this._service,ee)}_throwIfRoot(O){if(""===this._location.path)throw vt(O)}}function Ne(V,O,ee){return Je.apply(this,arguments)}function Je(){return(Je=(0,re.Z)(function*(V,O,ee){const De=yield mt(V,{pageToken:ee});O.prefixes.push(...De.prefixes),O.items.push(...De.items),null!=De.nextPageToken&&(yield Ne(V,O,De.nextPageToken))})).apply(this,arguments)}function mt(V,O){null!=O&&"number"==typeof O.maxResults&&Un("options.maxResults",1,1e3,O.maxResults);const ee=O||{},Q=Mt(V.storage,V._location,"/",ee.pageToken,ee.maxResults);return V.storage.makeRequestWithTokens(Q,lr)}function jn(V){V._throwIfRoot("getDownloadURL");const O=function yn(V,O,ee){const De=ir(O.fullServerUrl(),V.host,V._protocol),wt=V.maxOperationRetryTime,rn=new vn(De,"GET",function zr(V,O){return function ee(Q,De){const rt=xe(V,De,O);return Rn(null!==rt),function we(V,O,ee,Q){const De=Be(O);if(null===De||!tr(De.downloadTokens))return null;const rt=De.downloadTokens;if(0===rt.length)return null;const wt=encodeURIComponent;return rt.split(",").map(_n=>{const Vr=V.fullPath;return ir("/b/"+wt(V.bucket)+"/o/"+wt(Vr),ee,Q)+Zn({alt:"media",token:_n})})[0]}(rt,De,V.host,V._protocol)}}(V,ee),wt);return rn.errorHandler=Qr(O),rn}(V.storage,V._location,nt());return V.storage.makeRequestWithTokens(O,lr).then(ee=>{if(null===ee)throw function qe(){return new ct("no-download-url","The given file does not have any download URLs.")}();return ee})}function kn(V,O){const ee=function $t(V,O){const ee=O.split("/").filter(Q=>Q.length>0).join("/");return 0===V.length?ee:V+"/"+ee}(V._location.path,O),Q=new Tt(V._location.bucket,ee);return new Zr(V.storage,Q)}function Oi(V,O){if(V instanceof ii){const ee=V;if(null==ee._bucket)throw function et(){return new ct("no-default-bucket","No default bucket found. Did you set the '"+Et+"' property when initializing the app?")}();const Q=new Zr(ee,ee._bucket);return null!=O?Oi(Q,O):Q}return void 0!==O?kn(V,O):V}function ys(V,O){if(O&&function Ri(V){return/^[A-Za-z]+:\/\//.test(V)}(O)){if(V instanceof ii)return function Ii(V,O){return new Zr(V,O)}(V,O);throw ht("To use ref(service, url), the first argument must be a Storage instance.")}return Oi(V,O)}function Vi(V,O){const ee=null==O?void 0:O[Et];return null==ee?null:Tt.makeFromBucketSpec(ee,V)}class ii{constructor(O,ee,Q,De,rt){this.app=O,this._authProvider=ee,this._appCheckProvider=Q,this._url=De,this._firebaseVersion=rt,this._bucket=null,this._host=Ke,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=De?Tt.makeFromBucketSpec(De,this._host):Vi(this._host,this.app.options)}get host(){return this._host}set host(O){this._host=O,this._bucket=null!=this._url?Tt.makeFromBucketSpec(this._url,O):Vi(O,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(O){Un("time",0,Number.POSITIVE_INFINITY,O),this._maxUploadRetryTime=O}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(O){Un("time",0,Number.POSITIVE_INFINITY,O),this._maxOperationRetryTime=O}_getAuthToken(){var O=this;return(0,re.Z)(function*(){if(O._overrideAuthToken)return O._overrideAuthToken;const ee=O._authProvider.getImmediate({optional:!0});if(ee){const Q=yield ee.getToken();if(null!==Q)return Q.accessToken}return null})()}_getAppCheckToken(){var O=this;return(0,re.Z)(function*(){const ee=O._appCheckProvider.getImmediate({optional:!0});return ee?(yield ee.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(O=>O.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(O){return new Zr(this,O)}_makeRequest(O,ee,Q,De){if(this._deleted)return new dt(Qe());{const rt=function _r(V,O,ee,Q,De,rt){const wt=Zn(V.urlParams),rn=V.url+wt,Wt=Object.assign({},V.headers);return function Rr(V,O){O&&(V["X-Firebase-GMPID"]=O)}(Wt,O),function jt(V,O){null!==O&&O.length>0&&(V.Authorization="Firebase "+O)}(Wt,ee),function xr(V,O){V["X-Firebase-Storage-Version"]="webjs/"+(null!=O?O:"AppManager")}(Wt,rt),function Yn(V,O){null!==O&&(V["X-Firebase-AppCheck"]=O)}(Wt,Q),new ln(rn,V.method,Wt,V.body,V.successCodes,V.additionalRetryCodes,V.handler,V.errorHandler,V.timeout,V.progressCallback,De)}(O,this._appId,Q,De,ee,this._firebaseVersion);return this._requests.add(rt),rt.getPromise().then(()=>this._requests.delete(rt),()=>this._requests.delete(rt)),rt}}makeRequestWithTokens(O,ee){var Q=this;return(0,re.Z)(function*(){const[De,rt]=yield Promise.all([Q._getAuthToken(),Q._getAppCheckToken()]);return Q._makeRequest(O,ee,De,rt).getPromise()})()}}const Di="@firebase/storage";function kr(V,O){return ys(V=(0,$e.m9)(V),O)}function gi(V,{instanceIdentifier:O}){const ee=V.getProvider("app").getImmediate(),Q=V.getProvider("auth-internal"),De=V.getProvider("app-check-internal");return new ii(ee,Q,De,O,_e.SDK_VERSION)}!function mi(){(0,_e._registerComponent)(new We.wA("storage",gi,"PUBLIC").setMultipleInstances(!0)),(0,_e.registerVersion)(Di,"0.9.5",""),(0,_e.registerVersion)(Di,"0.9.5","esm2017")}();class Zi{constructor(O,ee,Q){this._delegate=O,this.task=ee,this.ref=Q}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class cr{constructor(O,ee){this._delegate=O,this._ref=ee,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Zi(this._delegate.snapshot,this,this._ref)}then(O,ee){return this._delegate.then(Q=>{if(O)return O(new Zi(Q,this,this._ref))},ee)}on(O,ee,Q,De){let rt;return ee&&(rt="function"==typeof ee?wt=>ee(new Zi(wt,this,this._ref)):{next:ee.next?wt=>ee.next(new Zi(wt,this,this._ref)):void 0,complete:ee.complete||void 0,error:ee.error||void 0}),this._delegate.on(O,rt,Q||void 0,De||void 0)}}class R{constructor(O,ee){this._delegate=O,this._service=ee}get prefixes(){return this._delegate.prefixes.map(O=>new W(O,this._service))}get items(){return this._delegate.items.map(O=>new W(O,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class W{constructor(O,ee){this._delegate=O,this.storage=ee}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(O){const ee=function cs(V,O){return kn(V,O)}(this._delegate,O);return new W(ee,this.storage)}get root(){return new W(this._delegate.root,this.storage)}get parent(){const O=this._delegate.parent;return null==O?null:new W(O,this.storage)}put(O,ee){return this._throwIfRoot("put"),new cr(function Bs(V,O,ee){return function Ss(V,O,ee){return V._throwIfRoot("uploadBytesResumable"),new pi(V,new gt(O),ee)}(V=(0,$e.m9)(V),O,ee)}(this._delegate,O,ee),this)}putString(O,ee=Kt.RAW,Q){this._throwIfRoot("putString");const De=vr(ee,O),rt=Object.assign({},Q);return null==rt.contentType&&null!=De.contentType&&(rt.contentType=De.contentType),new cr(new pi(this._delegate,new gt(De.data,!0),rt),this)}listAll(){return function qi(V){return function Fe(V){const O={prefixes:[],items:[]};return Ne(V,O).then(()=>O)}(V=(0,$e.m9)(V))}(this._delegate).then(O=>new R(O,this.storage))}list(O){return function Jr(V,O){return mt(V=(0,$e.m9)(V),O)}(this._delegate,O||void 0).then(ee=>new R(ee,this.storage))}getMetadata(){return function bi(V){return function Ot(V){V._throwIfRoot("getMetadata");const O=Kr(V.storage,V._location,nt());return V.storage.makeRequestWithTokens(O,lr)}(V=(0,$e.m9)(V))}(this._delegate)}updateMetadata(O){return function Ki(V,O){return function Qt(V,O){V._throwIfRoot("updateMetadata");const ee=function wr(V,O,ee,Q){const rt=ir(O.fullServerUrl(),V.host,V._protocol),rn=ae(ee,Q),_n=V.maxOperationRetryTime,qn=new vn(rt,"PATCH",$r(V,Q),_n);return qn.headers={"Content-Type":"application/json; charset=utf-8"},qn.body=rn,qn.errorHandler=Qr(O),qn}(V.storage,V._location,O,nt());return V.storage.makeRequestWithTokens(ee,lr)}(V=(0,$e.m9)(V),O)}(this._delegate,O)}getDownloadURL(){return function Cs(V){return jn(V=(0,$e.m9)(V))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ir(V){return function Pr(V){V._throwIfRoot("deleteObject");const O=function hi(V,O){const Q=ir(O.fullServerUrl(),V.host,V._protocol),rn=new vn(Q,"DELETE",function wt(Wt,_n){},V.maxOperationRetryTime);return rn.successCodes=[200,204],rn.errorHandler=Qr(O),rn}(V.storage,V._location);return V.storage.makeRequestWithTokens(O,lr)}(V=(0,$e.m9)(V))}(this._delegate)}_throwIfRoot(O){if(""===this._delegate._location.path)throw vt(O)}}class x{constructor(O,ee){this.app=O,this._delegate=ee}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(O){if(Y(O))throw ht("ref() expected a child path but got a URL, use refFromURL instead.");return new W(kr(this._delegate,O),this)}refFromURL(O){if(!Y(O))throw ht("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Tt.makeFromUrl(O,this._delegate.host)}catch(ee){throw ht("refFromUrl() expected a valid full URL but got an invalid one.")}return new W(kr(this._delegate,O),this)}setMaxUploadRetryTime(O){this._delegate.maxUploadRetryTime=O}setMaxOperationRetryTime(O){this._delegate.maxOperationRetryTime=O}useEmulator(O,ee,Q={}){!function Os(V,O,ee,Q={}){!function xs(V,O,ee,Q={}){V.host=`${O}:${ee}`,V._protocol="http";const{mockUserToken:De}=Q;De&&(V._overrideAuthToken="string"==typeof De?De:(0,$e.Sg)(De,V.app.options.projectId))}(V,O,ee,Q)}(this._delegate,O,ee,Q)}}function Y(V){return/^[A-Za-z]+:\/\//.test(V)}function Lt(V,{instanceIdentifier:O}){const ee=V.getProvider("app-compat").getImmediate(),Q=V.getProvider("storage").getImmediate({identifier:O});return new x(ee,Q)}!function Xn(V){const O={TaskState:Pn,TaskEvent:Ar,StringFormat:Kt,Storage:x,Reference:W};V.INTERNAL.registerComponent(new We.wA("storage-compat",Lt,"PUBLIC").setServiceProps(O).setMultipleInstances(!0)),V.registerVersion("@firebase/storage-compat","0.1.13")}(le.Z);var $n=T(440),wn=T(127);function Nr(V){const O=function Sn(V){return new p.y(O=>{const ee=wt=>O.next(wt);ee(V.snapshot);const rt=V.on("state_changed",ee);return V.then(wt=>{ee(wt),O.complete()},wt=>{ee(V.snapshot),(wt=>{O.error(wt)})(wt)}),function(){rt()}}).pipe((0,de.b)(0))}(V);return{task:V,then:V.then.bind(V),catch:V.catch.bind(V),pause:V.pause.bind(V),cancel:V.cancel.bind(V),resume:V.resume.bind(V),snapshotChanges:()=>O,percentageChanges:()=>O.pipe((0,ie.U)(ee=>ee.bytesTransferred/ee.totalBytes*100))}}function ar(V){return{getDownloadURL:()=>(0,N.of)(void 0).pipe(Ee.fc,(0,me.w)(()=>V.getDownloadURL()),Ee.iC),getMetadata:()=>(0,N.of)(void 0).pipe(Ee.fc,(0,me.w)(()=>V.getMetadata()),Ee.iC),delete:()=>(0,G.D)(V.delete()),child:O=>ar(V.child(O)),updateMetadata:O=>(0,G.D)(V.updateMetadata(O)),put:(O,ee)=>Nr(V.put(O,ee)),putString:(O,ee,Q)=>Nr(V.putString(O,ee,Q)),list:O=>(0,G.D)(V.list(O)),listAll:()=>(0,G.D)(V.listAll())}}const gr=new ue.OlP("angularfire2.storageBucket"),k=new ue.OlP("angularfire2.storage.maxUploadRetryTime"),S=new ue.OlP("angularfire2.storage.maxOperationRetryTime"),b=new ue.OlP("angularfire2.storage.use-emulator");let Z=(()=>{class V{constructor(ee,Q,De,rt,wt,rn,Wt,_n,qn,Vr){const Mr=(0,Ie.on)(ee,wt,Q);this.storage=(0,Ie.cc)(`${Mr.name}.storage.${De}`,"AngularFireStorage",Mr.name,()=>{const oi=wt.runOutsideAngular(()=>Mr.storage(De||void 0)),Hr=qn;return Hr&&oi.useEmulator(...Hr),Wt&&oi.setMaxUploadRetryTime(Wt),_n&&oi.setMaxOperationRetryTime(_n),oi},[Wt,_n])}ref(ee){return ar(this.storage.ref(ee))}refFromURL(ee){return ar(this.storage.refFromURL(ee))}upload(ee,Q,De){return ar(this.storage.ref(ee)).put(Q,De)}}return V.\u0275fac=function(ee){return new(ee||V)(ue.LFG(Ie.Dh),ue.LFG(Ie.xv,8),ue.LFG(gr,8),ue.LFG(ue.Lbi),ue.LFG(ue.R0b),ue.LFG(Ee.HU),ue.LFG(k,8),ue.LFG(S,8),ue.LFG(b,8),ue.LFG($n.nm,8))},V.\u0275prov=ue.Yz7({token:V,factory:V.\u0275fac,providedIn:"any"}),V})(),en=(()=>{class V{}return V.\u0275fac=function(ee){return new(ee||V)},V.\u0275mod=ue.oAB({type:V}),V.\u0275inj=ue.cJS({}),V})(),mr=(()=>{class V{constructor(){wn.Z.registerVersion("angularfire",Ee.q4.full,"gcs-compat")}}return V.\u0275fac=function(ee){return new(ee||V)},V.\u0275mod=ue.oAB({type:V}),V.\u0275inj=ue.cJS({providers:[Z],imports:[en]}),V})()},2011:(pt,Se,T)=>{"use strict";T.d(Se,{Dh:()=>ue,GT:()=>me,cc:()=>We,hO:()=>$e,on:()=>le,pX:()=>ie,xv:()=>Ie});var p=T(5e3),N=T(127),G=T(5813);pt=T.hmd(pt);const de=["ngOnDestroy"],ie=(Te,ct,H,F={})=>new Proxy(Te,{get:(te,pe)=>H.runOutsideAngular(()=>{var Ue;if(Te[pe])return(null===(Ue=null==F?void 0:F.spy)||void 0===Ue?void 0:Ue.get)&&F.spy.get(pe,Te[pe]),Te[pe];if(de.indexOf(pe)>-1)return()=>{};const Le=ct.toPromise().then(Re=>{const ve=Re&&Re[pe];return"function"==typeof ve?ve.bind(Re):ve&&ve.then?ve.then(X=>H.run(()=>X)):H.run(()=>ve)});return new Proxy(()=>{},{get:(Re,ve)=>Le[ve],apply:(Re,ve,X)=>Le.then(Pe=>{var ce;const et=Pe&&Pe(...X);return(null===(ce=null==F?void 0:F.spy)||void 0===ce?void 0:ce.apply)&&F.spy.apply(pe,X,et),et})})})}),me=(Te,ct)=>{ct.forEach(H=>{Object.getOwnPropertyNames(H.prototype||H).forEach(F=>{Object.defineProperty(Te.prototype,F,Object.getOwnPropertyDescriptor(H.prototype||H,F))})})};class Ee{constructor(ct){return ct}}const ue=new p.OlP("angularfire2.app.options"),Ie=new p.OlP("angularfire2.app.name");function le(Te,ct,H){const te="object"==typeof H&&H||{};te.name=te.name||"string"==typeof H&&H||"[DEFAULT]";const Ue=N.Z.apps.filter(Le=>Le&&Le.name===te.name)[0]||ct.runOutsideAngular(()=>N.Z.initializeApp(Te,te));try{JSON.stringify(Te)!==JSON.stringify(Ue.options)&&re("error",`${Ue.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Le){}return new Ee(Ue)}const re=(Te,...ct)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Te](...ct)},_e={provide:Ee,useFactory:le,deps:[ue,p.R0b,[new p.FiY,Ie]]};let $e=(()=>{class Te{constructor(H){N.Z.registerVersion("angularfire",G.q4.full,"core"),N.Z.registerVersion("angularfire",G.q4.full,"app-compat"),N.Z.registerVersion("angular",p.q4F.full,H.toString())}static initializeApp(H,F){return{ngModule:Te,providers:[{provide:ue,useValue:H},{provide:Ie,useValue:F}]}}}return Te.\u0275fac=function(H){return new(H||Te)(p.LFG(p.Lbi))},Te.\u0275mod=p.oAB({type:Te}),Te.\u0275inj=p.cJS({providers:[_e]}),Te})();function We(Te,ct,H,F,te){const[,pe,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===Te)||[];if(pe)return function Ke(Te,ct){try{return Te.toString()===ct.toString()}catch(H){return Te===ct}}(te,Ue)||(Ve("error",`${ct} was already initialized on the ${H} Firebase App with different settings.${Et?" You may need to reload as Firebase is not HMR aware.":""}`),Ve("warn",{is:te,was:Ue})),pe;{const Le=F();return globalThis.\u0275AngularfireInstanceCache.push([Te,Le,te]),Le}}const Et=!!pt.hot,Ve=(Te,...ct)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Te](...ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pt,Se,T)=>{"use strict";T.d(Se,{q4:()=>Ta,iC:()=>oa,fc:()=>Tu,HU:()=>Po,vb:()=>Ro,JM:()=>_o});var p=T(5e3),N=T(5867),G=T(5861),de=T(9681),ie=T(2090),me=T(4859),Ee=T(1877);const ue="@firebase/installations",re="w:0.5.8",_e="FIS_v2",Te=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ct(A){return A instanceof ie.ZR&&A.code.includes("request-failed")}function H({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function F(A){return{token:A.token,requestStatus:2,expiresIn:X(A.expiresIn),creationTime:Date.now()}}function te(A,P){return pe.apply(this,arguments)}function pe(){return(pe=(0,G.Z)(function*(A,P){const ye=(yield P.json()).error;return Te.create("request-failed",{requestName:A,serverCode:ye.code,serverMessage:ye.message,serverStatus:ye.status})})).apply(this,arguments)}function Ue({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function Le(A,{refreshToken:P}){const q=Ue(A);return q.append("Authorization",function Pe(A){return`${_e} ${A}`}(P)),q}function Re(A){return ve.apply(this,arguments)}function ve(){return(ve=(0,G.Z)(function*(A){const P=yield A();return P.status>=500&&P.status<600?A():P})).apply(this,arguments)}function X(A){return Number(A.replace("s","000"))}function ce(A,P){return et.apply(this,arguments)}function et(){return(et=(0,G.Z)(function*({appConfig:A,heartbeatServiceProvider:P},{fid:q}){const ye=H(A),je=Ue(A),tt=P.getImmediate({optional:!0});if(tt){const In=yield tt.getHeartbeatsHeader();In&&je.append("x-firebase-client",In)}const Xt={method:"POST",headers:je,body:JSON.stringify({fid:q,authVersion:_e,appId:A.appId,sdkVersion:re})},un=yield Re(()=>fetch(ye,Xt));if(un.ok){const In=yield un.json();return{fid:In.fid||q,registrationStatus:2,refreshToken:In.refreshToken,authToken:F(In.authToken)}}throw yield te("Create Installation",un)})).apply(this,arguments)}function he(A){return new Promise(P=>{setTimeout(P,A)})}const qe=/^[cdef][\w-]{21}$/;function Qe(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const q=function vt(A){return function Ge(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return qe.test(q)?q:""}catch(A){return""}}function Pt(A){return`${A.appName}!${A.appId}`}const bt=new Map;function Tt(A,P){const q=Pt(A);fn(q,P),function on(A,P){const q=function Gn(){return!zn&&"BroadcastChannel"in self&&(zn=new BroadcastChannel("[Firebase] FID Change"),zn.onmessage=A=>{fn(A.data.key,A.data.fid)}),zn}();q&&q.postMessage({key:A,fid:P}),function tr(){0===bt.size&&zn&&(zn.close(),zn=null)}()}(q,P)}function fn(A,P){const q=bt.get(A);if(q)for(const ye of q)ye(P)}let zn=null;const Un="firebase-installations-store";let ir=null;function Zn(){return ir||(ir=(0,ie.X3)("firebase-installations-database",1,(A,P)=>{0===P&&A.createObjectStore(Un)})),ir}function Gt(A,P){return ln.apply(this,arguments)}function ln(){return(ln=(0,G.Z)(function*(A,P){const q=Pt(A),je=(yield Zn()).transaction(Un,"readwrite"),tt=je.objectStore(Un),Ft=yield tt.get(q);return yield tt.put(P,q),yield je.complete,(!Ft||Ft.fid!==P.fid)&&Tt(A,P.fid),P})).apply(this,arguments)}function Tn(A){return jt.apply(this,arguments)}function jt(){return(jt=(0,G.Z)(function*(A){const P=Pt(A),ye=(yield Zn()).transaction(Un,"readwrite");yield ye.objectStore(Un).delete(P),yield ye.complete})).apply(this,arguments)}function xr(A,P){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,G.Z)(function*(A,P){const q=Pt(A),je=(yield Zn()).transaction(Un,"readwrite"),tt=je.objectStore(Un),Ft=yield tt.get(q),Xt=P(Ft);return void 0===Xt?yield tt.delete(q):yield tt.put(Xt,q),yield je.complete,Xt&&(!Ft||Ft.fid!==Xt.fid)&&Tt(A,Xt.fid),Xt})).apply(this,arguments)}function Yn(A){return _r.apply(this,arguments)}function _r(){return(_r=(0,G.Z)(function*(A){let P;const q=yield xr(A.appConfig,ye=>{const je=ti(ye),tt=Gr(A,je);return P=tt.registrationPromise,tt.installationEntry});return""===q.fid?{installationEntry:yield P}:{installationEntry:q,registrationPromise:P}})).apply(this,arguments)}function ti(A){return An(A||{fid:Qe(),registrationStatus:0})}function Gr(A,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(Te.create("app-offline"))};const q={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},ye=function bn(A,P){return Vt.apply(this,arguments)}(A,q);return{installationEntry:q,registrationPromise:ye}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:Kt(A)}:{installationEntry:P}}function Vt(){return(Vt=(0,G.Z)(function*(A,P){try{const q=yield ce(A,P);return Gt(A.appConfig,q)}catch(q){throw ct(q)&&409===q.customData.serverCode?yield Tn(A.appConfig):yield Gt(A.appConfig,{fid:P.fid,registrationStatus:0}),q}})).apply(this,arguments)}function Kt(A){return nr.apply(this,arguments)}function nr(){return(nr=(0,G.Z)(function*(A){let P=yield vr(A.appConfig);for(;1===P.registrationStatus;)yield he(100),P=yield vr(A.appConfig);if(0===P.registrationStatus){const{installationEntry:q,registrationPromise:ye}=yield Yn(A);return ye||q}return P})).apply(this,arguments)}function vr(A){return xr(A,P=>{if(!P)throw Te.create("installation-not-found");return An(P)})}function An(A){return function Qn(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function Ln(A,P){return ur.apply(this,arguments)}function ur(){return(ur=(0,G.Z)(function*({appConfig:A,heartbeatServiceProvider:P},q){const ye=Zt(A,q),je=Le(A,q),tt=P.getImmediate({optional:!0});if(tt){const In=yield tt.getHeartbeatsHeader();In&&je.append("x-firebase-client",In)}const Xt={method:"POST",headers:je,body:JSON.stringify({installation:{sdkVersion:re,appId:A.appId}})},un=yield Re(()=>fetch(ye,Xt));if(un.ok)return F(yield un.json());throw yield te("Generate Auth Token",un)})).apply(this,arguments)}function Zt(A,{fid:P}){return`${H(A)}/${P}/authTokens:generate`}function sr(A){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,G.Z)(function*(A,P=!1){let q;const ye=yield xr(A.appConfig,tt=>{if(!qt(tt))throw Te.create("not-registered");const Ft=tt.authToken;if(!P&&fe(Ft))return tt;if(1===Ft.requestStatus)return q=gt(A,P),tt;{if(!navigator.onLine)throw Te.create("app-offline");const Xt=Ae(tt);return q=$t(A,Xt),Xt}});return q?yield q:ye.authToken})).apply(this,arguments)}function gt(A,P){return Be.apply(this,arguments)}function Be(){return(Be=(0,G.Z)(function*(A,P){let q=yield At(A.appConfig);for(;1===q.authToken.requestStatus;)yield he(100),q=yield At(A.appConfig);const ye=q.authToken;return 0===ye.requestStatus?sr(A,P):ye})).apply(this,arguments)}function At(A){return xr(A,P=>{if(!qt(P))throw Te.create("not-registered");return function nt(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function $t(A,P){return pn.apply(this,arguments)}function pn(){return(pn=(0,G.Z)(function*(A,P){try{const q=yield Ln(A,P),ye=Object.assign(Object.assign({},P),{authToken:q});return yield Gt(A.appConfig,ye),q}catch(q){if(!ct(q)||401!==q.customData.serverCode&&404!==q.customData.serverCode){const ye=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield Gt(A.appConfig,ye)}else yield Tn(A.appConfig);throw q}})).apply(this,arguments)}function qt(A){return void 0!==A&&2===A.registrationStatus}function fe(A){return 2===A.requestStatus&&!function ne(A){const P=Date.now();return P<A.creationTime||A.creationTime+A.expiresIn<P+36e5}(A)}function Ae(A){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:P})}function Nt(){return(Nt=(0,G.Z)(function*(A){const P=A,{installationEntry:q,registrationPromise:ye}=yield Yn(P);return ye?ye.catch(console.error):sr(P).catch(console.error),q.fid})).apply(this,arguments)}function we(){return(we=(0,G.Z)(function*(A,P=!1){const q=A;return yield ae(q),(yield sr(q,P)).token})).apply(this,arguments)}function ae(A){return ke.apply(this,arguments)}function ke(){return(ke=(0,G.Z)(function*(A){const{registrationPromise:P}=yield Yn(A);P&&(yield P)})).apply(this,arguments)}function fr(A){return Te.create("missing-app-config-values",{valueName:A})}const Qr="installations",Mt=A=>{const P=A.getProvider("app").getImmediate(),q=function zr(A){if(!A||!A.options)throw fr("App Configuration");if(!A.name)throw fr("App Name");const P=["projectId","apiKey","appId"];for(const q of P)if(!A.options[q])throw fr(q);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(P);return{app:P,appConfig:q,heartbeatServiceProvider:(0,de._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},nn=A=>{const P=A.getProvider("app").getImmediate(),q=(0,de._getProvider)(P,Qr).getImmediate();return{getId:()=>function ze(A){return Nt.apply(this,arguments)}(q),getToken:je=>function xe(A){return we.apply(this,arguments)}(q,je)}};(function yn(){(0,de._registerComponent)(new me.wA(Qr,Mt,"PUBLIC")),(0,de._registerComponent)(new me.wA("installations-internal",nn,"PRIVATE"))})(),(0,de.registerVersion)(ue,"0.5.8"),(0,de.registerVersion)(ue,"0.5.8","esm2017");const wr="@firebase/remote-config",or=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zr{constructor(P,q,ye,je){this.client=P,this.storage=q,this.storageCache=ye,this.logger=je}isCachedDataFresh(P,q){if(!q)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ye=Date.now()-q,je=ye<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ye}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${je}.`),je}fetch(P){var q=this;return(0,G.Z)(function*(){const[ye,je]=yield Promise.all([q.storage.getLastSuccessfulFetchTimestampMillis(),q.storage.getLastSuccessfulFetchResponse()]);if(je&&q.isCachedDataFresh(P.cacheMaxAgeMillis,ye))return je;P.eTag=je&&je.eTag;const tt=yield q.client.fetch(P),Ft=[q.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===tt.status&&Ft.push(q.storage.setLastSuccessfulFetchResponse(tt)),yield Promise.all(Ft),tt})()}}function ms(A=navigator){return A.languages&&A.languages[0]||A.language}class bs{constructor(P,q,ye,je,tt,Ft){this.firebaseInstallations=P,this.sdkVersion=q,this.namespace=ye,this.projectId=je,this.apiKey=tt,this.appId=Ft}fetch(P){var q=this;return(0,G.Z)(function*(){const[ye,je]=yield Promise.all([q.firebaseInstallations.getId(),q.firebaseInstallations.getToken()]),Ft=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${q.projectId}/namespaces/${q.namespace}:fetch?key=${q.apiKey}`,Xt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},un={sdk_version:q.sdkVersion,app_instance_id:ye,app_instance_id_token:je,app_id:q.appId,language_code:ms()},In={method:"POST",headers:Xt,body:JSON.stringify(un)},dr=fetch(Ft,In),Fn=new Promise((lo,Ks)=>{P.signal.addEventListener(()=>{const vo=new Error("The operation was aborted.");vo.name="AbortError",Ks(vo)})});let Yr;try{yield Promise.race([dr,Fn]),Yr=yield dr}catch(lo){let Ks="fetch-client-network";throw"AbortError"===lo.name&&(Ks="fetch-timeout"),or.create(Ks,{originalErrorMessage:lo.message})}let ki=Yr.status;const Sa=Yr.headers.get("ETag")||void 0;let Ya,hs;if(200===Yr.status){let lo;try{lo=yield Yr.json()}catch(Ks){throw or.create("fetch-client-parse",{originalErrorMessage:Ks.message})}Ya=lo.entries,hs=lo.state}if("INSTANCE_STATE_UNSPECIFIED"===hs?ki=500:"NO_CHANGE"===hs?ki=304:("NO_TEMPLATE"===hs||"EMPTY_CONFIG"===hs)&&(Ya={}),304!==ki&&200!==ki)throw or.create("fetch-status",{httpStatus:ki});return{status:ki,eTag:Sa,config:Ya}})()}}class Ms{constructor(P,q){this.client=P,this.storage=q}fetch(P){var q=this;return(0,G.Z)(function*(){const ye=(yield q.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return q.attemptFetch(P,ye)})()}attemptFetch(P,{throttleEndTimeMillis:q,backoffCount:ye}){var je=this;return(0,G.Z)(function*(){yield function rr(A,P){return new Promise((q,ye)=>{const je=Math.max(P-Date.now(),0),tt=setTimeout(q,je);A.addEventListener(()=>{clearTimeout(tt),ye(or.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,q);try{const tt=yield je.client.fetch(P);return yield je.storage.deleteThrottleMetadata(),tt}catch(tt){if(!function Ss(A){if(!(A instanceof ie.ZR&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}(tt))throw tt;const Ft={throttleEndTimeMillis:Date.now()+(0,ie.$s)(ye),backoffCount:ye+1};return yield je.storage.setThrottleMetadata(Ft),je.attemptFetch(P,Ft)}})()}}class Je{constructor(P,q,ye,je,tt){this.app=P,this._client=q,this._storageCache=ye,this._storage=je,this._logger=tt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function mt(A,P){const q=A.target.error||void 0;return or.create(P,{originalErrorMessage:q&&q.message})}const Ot="app_namespace_store";class kn{constructor(P,q,ye,je=function Pr(){return new Promise((A,P)=>{try{const q=indexedDB.open("firebase_remote_config",1);q.onerror=ye=>{P(mt(ye,"storage-open"))},q.onsuccess=ye=>{A(ye.target.result)},q.onupgradeneeded=ye=>{0===ye.oldVersion&&ye.target.result.createObjectStore(Ot,{keyPath:"compositeKey"})}}catch(q){P(or.create("storage-open",{originalErrorMessage:q}))}})}()){this.appId=P,this.appName=q,this.namespace=ye,this.openDbPromise=je}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var q=this;return(0,G.Z)(function*(){const ye=yield q.openDbPromise;return new Promise((je,tt)=>{const Xt=ye.transaction([Ot],"readonly").objectStore(Ot),un=q.createCompositeKey(P);try{const In=Xt.get(un);In.onerror=dr=>{tt(mt(dr,"storage-get"))},In.onsuccess=dr=>{const Fn=dr.target.result;je(Fn?Fn.value:void 0)}}catch(In){tt(or.create("storage-get",{originalErrorMessage:In&&In.message}))}})})()}set(P,q){var ye=this;return(0,G.Z)(function*(){const je=yield ye.openDbPromise;return new Promise((tt,Ft)=>{const un=je.transaction([Ot],"readwrite").objectStore(Ot),In=ye.createCompositeKey(P);try{const dr=un.put({compositeKey:In,value:q});dr.onerror=Fn=>{Ft(mt(Fn,"storage-set"))},dr.onsuccess=()=>{tt()}}catch(dr){Ft(or.create("storage-set",{originalErrorMessage:dr&&dr.message}))}})})()}delete(P){var q=this;return(0,G.Z)(function*(){const ye=yield q.openDbPromise;return new Promise((je,tt)=>{const Xt=ye.transaction([Ot],"readwrite").objectStore(Ot),un=q.createCompositeKey(P);try{const In=Xt.delete(un);In.onerror=dr=>{tt(mt(dr,"storage-delete"))},In.onsuccess=()=>{je()}}catch(In){tt(or.create("storage-delete",{originalErrorMessage:In&&In.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class Ri{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,G.Z)(function*(){const q=P.storage.getLastFetchStatus(),ye=P.storage.getLastSuccessfulFetchTimestampMillis(),je=P.storage.getActiveConfig(),tt=yield q;tt&&(P.lastFetchStatus=tt);const Ft=yield ye;Ft&&(P.lastSuccessfulFetchTimestampMillis=Ft);const Xt=yield je;Xt&&(P.activeConfig=Xt)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function Vi(){return xs.apply(this,arguments)}function xs(){return(xs=(0,G.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(A){return!1}})).apply(this,arguments)}!function Ii(){(0,de._registerComponent)(new me.wA("remote-config",function A(P,{instanceIdentifier:q}){const ye=P.getProvider("app").getImmediate(),je=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw or.create("registration-window");if(!(0,ie.hl)())throw or.create("indexed-db-unavailable");const{projectId:tt,apiKey:Ft,appId:Xt}=ye.options;if(!tt)throw or.create("registration-project-id");if(!Ft)throw or.create("registration-api-key");if(!Xt)throw or.create("registration-app-id");const un=new kn(Xt,ye.name,q=q||"firebase"),In=new Ri(un),dr=new Ee.Yd(wr);dr.logLevel=Ee.in.ERROR;const Fn=new bs(je,de.SDK_VERSION,q,tt,Ft,Xt),Yr=new Ms(Fn,un),ki=new Zr(Yr,un,In,dr),Sa=new Je(ye,ki,In,un,dr);return function Sr(A){const P=(0,ie.m9)(A);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(Sa),Sa},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(wr,"0.3.7"),(0,de.registerVersion)(wr,"0.3.7","esm2017")}();const ii="/firebase-messaging-sw.js",Di="/firebase-cloud-messaging-push-scope",Er="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",us="google.c.a.c_id",ls="google.c.a.c_l",to="google.c.a.ts",Bs="google.c.a.e";var Ki=(()=>{return(A=Ki||(Ki={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",Ki;var A})();function Jr(A){const P=new Uint8Array(A);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qi(A){const q=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ye=atob(q),je=new Uint8Array(ye.length);for(let tt=0;tt<ye.length;++tt)je[tt]=ye.charCodeAt(tt);return je}const Cs="fcm_token_details_db",kr="fcm_token_object_Store";function cs(A){return Rs.apply(this,arguments)}function Rs(){return Rs=(0,G.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(tt=>tt.name).includes(Cs))return null;let P=null;return(yield(0,ie.X3)(Cs,5,function(){var ye=(0,G.Z)(function*(je,tt,Ft,Xt){var un;if(tt<2||!je.objectStoreNames.contains(kr))return;const In=Xt.objectStore(kr),dr=yield In.index("fcmSenderId").get(A);if(yield In.clear(),dr)if(2===tt){const Fn=dr;if(!Fn.auth||!Fn.p256dh||!Fn.endpoint)return;P={token:Fn.fcmToken,createTime:null!==(un=Fn.createTime)&&void 0!==un?un:Date.now(),subscriptionOptions:{auth:Fn.auth,p256dh:Fn.p256dh,endpoint:Fn.endpoint,swScope:Fn.swScope,vapidKey:"string"==typeof Fn.vapidKey?Fn.vapidKey:Jr(Fn.vapidKey)}}}else if(3===tt){const Fn=dr;P={token:Fn.fcmToken,createTime:Fn.createTime,subscriptionOptions:{auth:Jr(Fn.auth),p256dh:Jr(Fn.p256dh),endpoint:Fn.endpoint,swScope:Fn.swScope,vapidKey:Jr(Fn.vapidKey)}}}else if(4===tt){const Fn=dr;P={token:Fn.fcmToken,createTime:Fn.createTime,subscriptionOptions:{auth:Jr(Fn.auth),p256dh:Jr(Fn.p256dh),endpoint:Fn.endpoint,swScope:Fn.swScope,vapidKey:Jr(Fn.vapidKey)}}}});return function(je,tt,Ft,Xt){return ye.apply(this,arguments)}}())).close(),yield(0,ie.Lj)(Cs),yield(0,ie.Lj)("fcm_vapid_details_db"),yield(0,ie.Lj)("undefined"),Os(P)?P:null}),Rs.apply(this,arguments)}function Os(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:P}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const gi="firebase-messaging-store";let mi=null;function Zi(){return mi||(mi=(0,ie.X3)("firebase-messaging-database",1,(A,P)=>{0===P&&A.createObjectStore(gi)})),mi}function cr(A){return R.apply(this,arguments)}function R(){return(R=(0,G.Z)(function*(A){const P=it(A),ye=yield(yield Zi()).transaction(gi).objectStore(gi).get(P);if(ye)return ye;{const je=yield cs(A.appConfig.senderId);if(je)return yield W(A,je),je}})).apply(this,arguments)}function W(A,P){return x.apply(this,arguments)}function x(){return(x=(0,G.Z)(function*(A,P){const q=it(A),je=(yield Zi()).transaction(gi,"readwrite");return yield je.objectStore(gi).put(P,q),yield je.complete,P})).apply(this,arguments)}function Y(A){return be.apply(this,arguments)}function be(){return(be=(0,G.Z)(function*(A){const P=it(A),ye=(yield Zi()).transaction(gi,"readwrite");yield ye.objectStore(gi).delete(P),yield ye.complete})).apply(this,arguments)}function it({appConfig:A}){return A.appId}const Lt=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xn(A,P){return $n.apply(this,arguments)}function $n(){return($n=(0,G.Z)(function*(A,P){const q=yield k(A),ye=b(P),je={method:"POST",headers:q,body:JSON.stringify(ye)};let tt;try{tt=yield(yield fetch(gr(A.appConfig),je)).json()}catch(Ft){throw Lt.create("token-subscribe-failed",{errorInfo:Ft})}if(tt.error)throw Lt.create("token-subscribe-failed",{errorInfo:tt.error.message});if(!tt.token)throw Lt.create("token-subscribe-no-token");return tt.token})).apply(this,arguments)}function wn(A,P){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,G.Z)(function*(A,P){const q=yield k(A),ye=b(P.subscriptionOptions),je={method:"PATCH",headers:q,body:JSON.stringify(ye)};let tt;try{tt=yield(yield fetch(`${gr(A.appConfig)}/${P.token}`,je)).json()}catch(Ft){throw Lt.create("token-update-failed",{errorInfo:Ft})}if(tt.error)throw Lt.create("token-update-failed",{errorInfo:tt.error.message});if(!tt.token)throw Lt.create("token-update-no-token");return tt.token})).apply(this,arguments)}function Nr(A,P){return ar.apply(this,arguments)}function ar(){return(ar=(0,G.Z)(function*(A,P){const ye={method:"DELETE",headers:yield k(A)};try{const tt=yield(yield fetch(`${gr(A.appConfig)}/${P}`,ye)).json();if(tt.error)throw Lt.create("token-unsubscribe-failed",{errorInfo:tt.error.message})}catch(je){throw Lt.create("token-unsubscribe-failed",{errorInfo:je})}})).apply(this,arguments)}function gr({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function k(A){return S.apply(this,arguments)}function S(){return(S=(0,G.Z)(function*({appConfig:A,installations:P}){const q=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${q}`})})).apply(this,arguments)}function b({p256dh:A,auth:P,endpoint:q,vapidKey:ye}){const je={web:{endpoint:q,auth:P,p256dh:A}};return ye!==Er&&(je.web.applicationPubKey=ye),je}const Z=6048e5;function ut(A){return en.apply(this,arguments)}function en(){return(en=(0,G.Z)(function*(A){const P=yield rt(A.swRegistration,A.vapidKey),q={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:P.endpoint,auth:Jr(P.getKey("auth")),p256dh:Jr(P.getKey("p256dh"))},ye=yield cr(A.firebaseDependencies);if(ye){if(rn(ye.subscriptionOptions,q))return Date.now()>=ye.createTime+Z?O(A,{token:ye.token,createTime:Date.now(),subscriptionOptions:q}):ye.token;try{yield Nr(A.firebaseDependencies,ye.token)}catch(je){console.warn(je)}return Q(A.firebaseDependencies,q)}return Q(A.firebaseDependencies,q)})).apply(this,arguments)}function mr(A){return V.apply(this,arguments)}function V(){return(V=(0,G.Z)(function*(A){const P=yield cr(A.firebaseDependencies);P&&(yield Nr(A.firebaseDependencies,P.token),yield Y(A.firebaseDependencies));const q=yield A.swRegistration.pushManager.getSubscription();return!q||q.unsubscribe()})).apply(this,arguments)}function O(A,P){return ee.apply(this,arguments)}function ee(){return(ee=(0,G.Z)(function*(A,P){try{const q=yield wn(A.firebaseDependencies,P),ye=Object.assign(Object.assign({},P),{token:q,createTime:Date.now()});return yield W(A.firebaseDependencies,ye),q}catch(q){throw yield mr(A),q}})).apply(this,arguments)}function Q(A,P){return De.apply(this,arguments)}function De(){return(De=(0,G.Z)(function*(A,P){const ye={token:yield Xn(A,P),createTime:Date.now(),subscriptionOptions:P};return yield W(A,ye),ye.token})).apply(this,arguments)}function rt(A,P){return wt.apply(this,arguments)}function wt(){return(wt=(0,G.Z)(function*(A,P){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qi(P)})})).apply(this,arguments)}function rn(A,P){return P.vapidKey===A.vapidKey&&P.endpoint===A.endpoint&&P.auth===A.auth&&P.p256dh===A.p256dh}function Wt(A){const P={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function _n(A,P){if(!P.notification)return;A.notification={};const q=P.notification.title;q&&(A.notification.title=q);const ye=P.notification.body;ye&&(A.notification.body=ye);const je=P.notification.image;je&&(A.notification.image=je)}(P,A),function qn(A,P){!P.data||(A.data=P.data)}(P,A),function Vr(A,P){if(!P.fcmOptions)return;A.fcmOptions={};const q=P.fcmOptions.link;q&&(A.fcmOptions.link=q);const ye=P.fcmOptions.analytics_label;ye&&(A.fcmOptions.analyticsLabel=ye)}(P,A),P}function Mr(A){return"object"==typeof A&&!!A&&us in A}function oi(A,P){const q=[];for(let ye=0;ye<A.length;ye++)q.push(A.charAt(ye)),ye<P.length&&q.push(P.charAt(ye));return q.join("")}function yi(A){return Lt.create("missing-app-config-values",{valueName:A})}oi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),oi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Wn{constructor(P,q,ye){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const je=function Hr(A){if(!A||!A.options)throw yi("App Configuration Object");if(!A.name)throw yi("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:q}=A;for(const ye of P)if(!q[ye])throw yi(ye);return{appName:A.name,projectId:q.projectId,apiKey:q.apiKey,appId:q.appId,senderId:q.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:je,installations:q,analyticsProvider:ye}}_delete(){return Promise.resolve()}}function Ur(A){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,G.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(ii,{scope:Di}),A.swRegistration.update().catch(()=>{})}catch(P){throw Lt.create("failed-service-worker-registration",{browserErrorMessage:P.message})}})).apply(this,arguments)}function Fr(A,P){return yr.apply(this,arguments)}function yr(){return(yr=(0,G.Z)(function*(A,P){if(!P&&!A.swRegistration&&(yield Ur(A)),P||!A.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw Lt.create("invalid-sw-registration");A.swRegistration=P}})).apply(this,arguments)}function _s(A,P){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,G.Z)(function*(A,P){P?A.vapidKey=P:A.vapidKey||(A.vapidKey=Er)})).apply(this,arguments)}function Dr(){return(Dr=(0,G.Z)(function*(A,P){if(!navigator)throw Lt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Lt.create("permission-blocked");return yield _s(A,null==P?void 0:P.vapidKey),yield Fr(A,null==P?void 0:P.serviceWorkerRegistration),ut(A)})).apply(this,arguments)}function Ps(A,P,q){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,G.Z)(function*(A,P,q){const ye=Ea(P);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(ye,{message_id:q[us],message_name:q[ls],message_time:q[to],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ea(A){switch(A){case Ki.NOTIFICATION_CLICKED:return"notification_open";case Ki.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $a(){return($a=(0,G.Z)(function*(A,P){const q=P.data;if(!q.isFirebaseMessaging)return;A.onMessageHandler&&q.messageType===Ki.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Wt(q)):A.onMessageHandler.next(Wt(q)));const ye=q.data;Mr(ye)&&"1"===ye[Bs]&&(yield Ps(A,q.messageType,ye))})).apply(this,arguments)}const Bo="@firebase/messaging",Jo=A=>{const P=new Wn(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",q=>function ja(A,P){return $a.apply(this,arguments)}(P,q)),P},js=A=>{const P=A.getProvider("messaging").getImmediate();return{getToken:ye=>function no(A,P){return Dr.apply(this,arguments)}(P,ye)}};function ks(){return ro.apply(this,arguments)}function ro(){return(ro=(0,G.Z)(function*(){try{yield(0,ie.eu)()}catch(A){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wa(){(0,de._registerComponent)(new me.wA("messaging",Jo,"PUBLIC")),(0,de._registerComponent)(new me.wA("messaging-internal",js,"PRIVATE")),(0,de.registerVersion)(Bo,"0.9.12"),(0,de.registerVersion)(Bo,"0.9.12","esm2017")}();const Ti="analytics",ec="firebase_id",$s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ns="https://www.googletagmanager.com/gtag/js",ui=new Ee.Yd("@firebase/analytics");function na(A){return Promise.all(A.map(P=>P.catch(q=>q)))}function Ha(A,P){const q=document.createElement("script");q.src=`${Ns}?l=${A}&id=${P}`,q.async=!0,document.head.appendChild(q)}function io(A,P,q,ye,je,tt){return ra.apply(this,arguments)}function ra(){return(ra=(0,G.Z)(function*(A,P,q,ye,je,tt){const Ft=ye[je];try{if(Ft)yield P[Ft];else{const un=(yield na(q)).find(In=>In.measurementId===je);un&&(yield P[un.appId])}}catch(Xt){ui.error(Xt)}A("config",je,tt)})).apply(this,arguments)}function Ts(A,P,q,ye,je){return po.apply(this,arguments)}function po(){return(po=(0,G.Z)(function*(A,P,q,ye,je){try{let tt=[];if(je&&je.send_to){let Ft=je.send_to;Array.isArray(Ft)||(Ft=[Ft]);const Xt=yield na(q);for(const un of Ft){const In=Xt.find(Fn=>Fn.measurementId===un),dr=In&&P[In.appId];if(!dr){tt=[];break}tt.push(dr)}}0===tt.length&&(tt=Object.values(P)),yield Promise.all(tt),A("event",ye,je||{})}catch(tt){ui.error(tt)}})).apply(this,arguments)}function _u(){const A=window.document.getElementsByTagName("script");for(const P of Object.values(A))if(P.src&&P.src.includes(Ns))return P;return null}const Lr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),jo=new class go{constructor(P={},q=1e3){this.throttleMetadata=P,this.intervalMillis=q}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,q){this.throttleMetadata[P]=q}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function $o(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function Da(A){return Br.apply(this,arguments)}function Br(){return(Br=(0,G.Z)(function*(A){var P;const{appId:q,apiKey:ye}=A,je={method:"GET",headers:$o(ye)},tt=$s.replace("{app-id}",q),Ft=yield fetch(tt,je);if(200!==Ft.status&&304!==Ft.status){let Xt="";try{const un=yield Ft.json();(null===(P=un.error)||void 0===P?void 0:P.message)&&(Xt=un.error.message)}catch(un){}throw Lr.create("config-fetch-failed",{httpStatus:Ft.status,responseMessage:Xt})}return Ft.json()})).apply(this,arguments)}function Wa(A){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,G.Z)(function*(A,P=jo,q){const{appId:ye,apiKey:je,measurementId:tt}=A.options;if(!ye)throw Lr.create("no-app-id");if(!je){if(tt)return{measurementId:tt,appId:ye};throw Lr.create("no-api-key")}const Ft=P.getThrottleMetadata(ye)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xt=new I;return setTimeout((0,G.Z)(function*(){Xt.abort()}),void 0!==q?q:6e4),ba({appId:ye,apiKey:je,measurementId:tt},Ft,Xt,P)})).apply(this,arguments)}function ba(A,P,q){return As.apply(this,arguments)}function As(){return(As=(0,G.Z)(function*(A,{throttleEndTimeMillis:P,backoffCount:q},ye,je=jo){const{appId:tt,measurementId:Ft}=A;try{yield tc(ye,P)}catch(Xt){if(Ft)return ui.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ft} provided in the "measurementId" field in the local Firebase config. [${Xt.message}]`),{appId:tt,measurementId:Ft};throw Xt}try{const Xt=yield Da(A);return je.deleteThrottleMetadata(tt),Xt}catch(Xt){if(!Eu(Xt)){if(je.deleteThrottleMetadata(tt),Ft)return ui.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ft} provided in the "measurementId" field in the local Firebase config. [${Xt.message}]`),{appId:tt,measurementId:Ft};throw Xt}const un=503===Number(Xt.customData.httpStatus)?(0,ie.$s)(q,je.intervalMillis,30):(0,ie.$s)(q,je.intervalMillis),In={throttleEndTimeMillis:Date.now()+un,backoffCount:q+1};return je.setThrottleMetadata(tt,In),ui.debug(`Calling attemptFetch again in ${un} millis`),ba(A,In,ye,je)}})).apply(this,arguments)}function tc(A,P){return new Promise((q,ye)=>{const je=Math.max(P-Date.now(),0),tt=setTimeout(q,je);A.addEventListener(()=>{clearTimeout(tt),ye(Lr.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function Eu(A){if(!(A instanceof ie.ZR&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}class I{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}function E(){return _.apply(this,arguments)}function _(){return(_=(0,G.Z)(function*(){if(!(0,ie.hl)())return ui.warn(Lr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(A){return ui.warn(Lr.create("indexeddb-unavailable",{errorInfo:A}).message),!1}return!0})).apply(this,arguments)}function L(){return(L=(0,G.Z)(function*(A,P,q,ye,je,tt,Ft){var Xt;const un=Wa(A);un.then(ki=>{q[ki.measurementId]=ki.appId,A.options.measurementId&&ki.measurementId!==A.options.measurementId&&ui.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${ki.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ki=>ui.error(ki)),P.push(un);const In=E().then(ki=>{if(ki)return ye.getId()}),[dr,Fn]=yield Promise.all([un,In]);_u()||Ha(tt,dr.measurementId),je("js",new Date);const Yr=null!==(Xt=null==Ft?void 0:Ft.config)&&void 0!==Xt?Xt:{};return Yr.origin="firebase",Yr.update=!0,null!=Fn&&(Yr[ec]=Fn),je("config",dr.measurementId,Yr),dr.measurementId})).apply(this,arguments)}class ${constructor(P){this.app=P}_delete(){return delete se[this.app.options.appId],Promise.resolve()}}let se={},Ce=[];const yt={};let cn,Ct,ft="dataLayer",Ye=!1;function Es(A,P,q){!function jr(){const A=[];if((0,ie.ru)()&&A.push("This is a browser extension environment."),(0,ie.zI)()||A.push("Cookies are not available."),A.length>0){const P=A.map((ye,je)=>`(${je+1}) ${ye}`).join(" "),q=Lr.create("invalid-analytics-context",{errorInfo:P});ui.warn(q.message)}}();const ye=A.options.appId;if(!ye)throw Lr.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Lr.create("no-api-key");ui.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=se[ye])throw Lr.create("already-exists",{id:ye});if(!Ye){!function vs(A){let P=[];Array.isArray(window[A])?P=window[A]:window[A]=P}(ft);const{wrappedGtag:tt,gtagCore:Ft}=function Ga(A,P,q,ye,je){let tt=function(...Ft){window[ye].push(arguments)};return window[je]&&"function"==typeof window[je]&&(tt=window[je]),window[je]=function Hs(A,P,q,ye){function tt(){return(tt=(0,G.Z)(function*(Ft,Xt,un){try{"event"===Ft?yield Ts(A,P,q,Xt,un):"config"===Ft?yield io(A,P,q,ye,Xt,un):A("set",Xt)}catch(In){ui.error(In)}})).apply(this,arguments)}return function je(Ft,Xt,un){return tt.apply(this,arguments)}}(tt,A,P,q),{gtagCore:tt,wrappedGtag:window[je]}}(se,Ce,yt,ft,"gtag");Ct=tt,cn=Ft,Ye=!0}return se[ye]=function M(A,P,q,ye,je,tt,Ft){return L.apply(this,arguments)}(A,Ce,yt,P,cn,ft,q),new $(A)}function mo(){return(mo=(0,G.Z)(function*(A,P,q,ye,je){if(je&&je.global)A("event",q,ye);else{const tt=yield P;A("event",q,Object.assign(Object.assign({},ye),{send_to:tt}))}})).apply(this,arguments)}function oo(){return za.apply(this,arguments)}function za(){return(za=(0,G.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(A){return!1}})).apply(this,arguments)}const Ca="@firebase/analytics";!function zd(){(0,de._registerComponent)(new me.wA(Ti,(P,{options:q})=>Es(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),q),"PUBLIC")),(0,de._registerComponent)(new me.wA("analytics-internal",function A(P){try{const q=P.getProvider(Ti).getImmediate();return{logEvent:(ye,je,tt)=>function Qc(A,P,q,ye){A=(0,ie.m9)(A),function wu(A,P,q,ye,je){return mo.apply(this,arguments)}(Ct,se[A.app.options.appId],P,q,ye).catch(je=>ui.error(je))}(q,ye,je,tt)}}catch(q){throw Lr.create("interop-component-reg-failed",{reason:q})}},"PRIVATE")),(0,de.registerVersion)(Ca,"0.7.8"),(0,de.registerVersion)(Ca,"0.7.8","esm2017")}();var is=T(4408),Kd=T(7565);const ll=new class Jn extends Kd.v{}(class Ws extends is.o{constructor(P,q){super(P,q),this.scheduler=P,this.work=q}schedule(P,q=0){return q>0?super.schedule(P,q):(this.delay=q,this.state=P,this.scheduler.flush(this),this)}execute(P,q){return q>0||this.closed?super.execute(P,q):this._execute(P,q)}requestAsyncId(P,q,ye=0){return null!=ye&&ye>0||null==ye&&this.delay>0?super.requestAsyncId(P,q,ye):P.flush(this)}});var Ai=T(4986),Mo=T(8505),Ji=T(5363),Vs=T(9468);const Ta=new p.GfV("7.3.0"),Ho="__angularfire_symbol__analyticsIsSupportedValue",Bi="__angularfire_symbol__analyticsIsSupported",ds="__angularfire_symbol__remoteConfigIsSupportedValue",xo="__angularfire_symbol__remoteConfigIsSupported",bu="__angularfire_symbol__messagingIsSupportedValue",Ht="__angularfire_symbol__messagingIsSupported";function _o(A,P,q){if(P){if(1===P.length)return P[0];const tt=P.filter(Ft=>Ft.app===q);if(1===tt.length)return tt[0]}return q.container.getProvider(A).getImmediate({optional:!0})}globalThis[Bi]||(globalThis[Bi]=oo().then(A=>globalThis[Ho]=A).catch(()=>globalThis[Ho]=!1)),globalThis[Ht]||(globalThis[Ht]=ks().then(A=>globalThis[bu]=A).catch(()=>globalThis[bu]=!1)),globalThis[xo]||(globalThis[xo]=Vi().then(A=>globalThis[ds]=A).catch(()=>globalThis[ds]=!1));const Ro=(A,P)=>{const q=P?[P]:(0,N.C6)(),ye=[];return q.forEach(je=>{je.container.getProvider(A).instances.forEach(Ft=>{ye.includes(Ft)||ye.push(Ft)})}),ye};function Go(){}class Oo{constructor(P,q=ll){this.zone=P,this.delegate=q}now(){return this.delegate.now()}schedule(P,q,ye){const je=this.zone;return this.delegate.schedule(function(Ft){je.runGuarded(()=>{P.apply(this,[Ft])})},q,ye)}}class dl{constructor(P){this.zone=P,this.task=null}call(P,q){const ye=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Go,{},Go,Go)),q.pipe((0,Mo.b)({next:ye,complete:ye,error:ye})).subscribe(P).add(ye)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Po=(()=>{class A{constructor(q){this.ngZone=q,this.outsideAngular=q.runOutsideAngular(()=>new Oo(Zone.current)),this.insideAngular=q.run(()=>new Oo(Zone.current,Ai.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(q){return new(q||A)(p.LFG(p.R0b))},A.\u0275prov=p.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function uo(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function Tu(A){return A.pipe((0,Ji.Q)(uo().outsideAngular))}function oa(A){return uo(),function Wo(A){return function(q){return(q=q.lift(new dl(A.ngZone))).pipe((0,Vs.R)(A.outsideAngular),(0,Ji.Q)(A.insideAngular))}}(uo())(A)}},8292:(pt,Se,T)=>{T(5555);const{devDependencies:N}=T(3681);pt.exports={corePath:`https://unpkg.com/@ffmpeg/core@${N["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}},2187:(pt,Se,T)=>{var p=T(8926).default;const N=T(5555);pt.exports=function(){var de=p(function*(ie){let me=ie;return void 0===ie?new Uint8Array:("string"==typeof ie?me=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(ie)?atob(ie.split(",")[1]).split("").map(Ee=>Ee.charCodeAt(0)):yield(yield fetch(N(ie))).arrayBuffer():(ie instanceof File||ie instanceof Blob)&&(me=yield(de=>new Promise((ie,me)=>{const Ee=new FileReader;Ee.onload=()=>{ie(Ee.result)},Ee.onerror=({target:{error:{code:ue}}})=>{me(Error(`File could not be read! Code=${ue}`))},Ee.readAsArrayBuffer(de)}))(ie)),new Uint8Array(me))});return function(ie){return de.apply(this,arguments)}}()},9965:(pt,Se,T)=>{var p=T(8926).default;const N=T(5555),{log:G}=T(6945),de=function(){var ie=p(function*(me,Ee){G("info",`fetch ${me}`);const ue=yield(yield fetch(me)).arrayBuffer();G("info",`${me} file size = ${ue.byteLength} bytes`);const Ie=new Blob([ue],{type:Ee}),le=URL.createObjectURL(Ie);return G("info",`${me} blob URL = ${le}`),le});return function(Ee,ue){return ie.apply(this,arguments)}}();pt.exports=function(){var ie=p(function*({corePath:me}){if("string"!=typeof me)throw Error("corePath should be a string!");const Ee=N(me),ue=yield de(Ee,"application/javascript"),Ie=yield de(Ee.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),le=yield de(Ee.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"==typeof createFFmpegCore?new Promise(re=>{const _e=document.createElement("script"),$e=()=>{_e.removeEventListener("load",$e),G("info","ffmpeg-core.js script loaded"),re({createFFmpegCore,corePath:ue,wasmPath:Ie,workerPath:le})};_e.src=ue,_e.type="text/javascript",_e.addEventListener("load",$e),document.getElementsByTagName("head")[0].appendChild(_e)}):(G("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:ue,wasmPath:Ie,workerPath:le}))});return function(me){return ie.apply(this,arguments)}}()},1346:(pt,Se,T)=>{const p=T(8292),N=T(9965),G=T(2187);pt.exports={defaultOptions:p,getCreateFFmpegCore:N,fetchFile:G}},6151:pt=>{pt.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},9639:(pt,Se,T)=>{var p=T(8926).default;const{defaultArgs:N,baseOptions:G}=T(6151),{setLogging:de,setCustomLogger:ie,log:me}=T(6945),Ee=T(5542),ue=T(8333),{defaultOptions:Ie,getCreateFFmpegCore:le}=T(1346),{version:re}=T(3681),_e=Error("ffmpeg.wasm is not ready, make sure you have completed load().");pt.exports=($e={})=>{const he=xy(xy(xy({},G),Ie),$e),{log:We,logger:Ke,progress:Et}=he,Ve=GE(he,["log","logger","progress"]);let Te=null,ct=null,H=null,F=!1,te=Et;const Ue=({type:Ge,message:qe})=>{me(Ge,qe),Ee(qe,te),(Ge=>{"FFMPEG_END"===Ge&&null!==H&&(H(),H=null,F=!1)})(qe)},Le=function(){var Ge=p(function*(){if(me("info","load ffmpeg-core"),null!==Te)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{me("info","loading ffmpeg-core");const{createFFmpegCore:qe,corePath:ht,workerPath:Qe,wasmPath:vt}=yield le(Ve);Te=yield qe({mainScriptUrlOrBlob:ht,printErr:Pt=>Ue({type:"fferr",message:Pt}),print:Pt=>Ue({type:"ffout",message:Pt}),locateFile:(Pt,bt)=>{if("undefined"!=typeof window){if(void 0!==vt&&Pt.endsWith("ffmpeg-core.wasm"))return vt;if(void 0!==Qe&&Pt.endsWith("ffmpeg-core.worker.js"))return Qe}return bt+Pt}}),ct=Te.cwrap("proxy_main","number",["number","number"]),me("info","ffmpeg-core loaded")}});return function(){return Ge.apply(this,arguments)}}();return de(We),ie(Ke),me("info",`use ffmpeg.wasm v${re}`),{setProgress:Ge=>{te=Ge},setLogger:Ge=>{ie(Ge)},setLogging:de,load:Le,isLoaded:()=>null!==Te,run:(...Ge)=>{if(me("info",`run ffmpeg command: ${Ge.join(" ")}`),null===Te)throw _e;if(F)throw Error("ffmpeg.wasm can only run one command at a time");return F=!0,new Promise(qe=>{const ht=[...N,...Ge].filter(Qe=>0!==Qe.length);H=qe,ct(...ue(Te,ht))})},exit:()=>{if(null===Te)throw _e;F=!1,Te.exit(1),Te=null,ct=null,H=null},FS:(Ge,...qe)=>{if(me("info",`run FS.${Ge} ${qe.map(ht=>"string"==typeof ht?ht:`<${ht.length} bytes binary file>`).join(" ")}`),null===Te)throw _e;{let ht=null;try{ht=Te.FS[Ge](...qe)}catch(Qe){throw Error("readdir"===Ge?`ffmpeg.FS('readdir', '${qe[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:"readFile"===Ge?`ffmpeg.FS('readFile', '${qe[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return ht}}}}},260:(pt,Se,T)=>{T(7854);const p=T(9639),{fetchFile:N}=T(1346);pt.exports={createFFmpeg:p,fetchFile:N}},6945:pt=>{let Se=!1,T=()=>{};pt.exports={logging:Se,setLogging:de=>{Se=de},setCustomLogger:de=>{T=de},log:(de,ie)=>{T({type:de,message:ie}),Se&&console.log(`[${de}] ${ie}`)}}},8333:pt=>{pt.exports=(Se,T)=>{const p=Se._malloc(T.length*Uint32Array.BYTES_PER_ELEMENT);return T.forEach((N,G)=>{const de=Se._malloc(N.length+1);Se.writeAsciiToMemory(N,de),Se.setValue(p+Uint32Array.BYTES_PER_ELEMENT*G,de,"i32")}),[T.length,p]}},5542:pt=>{let Se=0,T=0;const p=N=>{const[G,de,ie]=N.split(":");return 60*parseFloat(G)*60+60*parseFloat(de)+parseFloat(ie)};pt.exports=(N,G)=>{if("string"==typeof N)if(N.startsWith("  Duration")){const de=N.split(", ")[0].split(": ")[1],ie=p(de);G({duration:ie,ratio:T}),(0===Se||Se>ie)&&(Se=ie)}else if(N.startsWith("frame")||N.startsWith("size")){const de=N.split("time=")[1].split(" ")[0],ie=p(de);T=ie/Se,G({ratio:T,time:ie})}else N.startsWith("video:")&&(G({ratio:1}),Se=0)}},2090:(pt,Se,T)=>{"use strict";T.d(Se,{$s:()=>Qn,BH:()=>We,G6:()=>Re,L:()=>Ie,LL:()=>Ge,Lj:()=>pn,Mn:()=>Ue,Sg:()=>Ke,UG:()=>Te,US:()=>Ee,X3:()=>$t,ZB:()=>_e,ZR:()=>he,b$:()=>F,d:()=>te,eu:()=>X,hl:()=>ve,jU:()=>ct,m9:()=>Zt,ne:()=>Gt,pd:()=>ir,r3:()=>fn,ru:()=>H,tV:()=>le,uI:()=>Ve,vZ:()=>tr,w1:()=>pe,xO:()=>En,xb:()=>zn,z$:()=>Et,zI:()=>Pe,zd:()=>Un});var p=T(5861);const ie=function(fe){const ne=[];let Ae=0;for(let nt=0;nt<fe.length;nt++){let ze=fe.charCodeAt(nt);ze<128?ne[Ae++]=ze:ze<2048?(ne[Ae++]=ze>>6|192,ne[Ae++]=63&ze|128):55296==(64512&ze)&&nt+1<fe.length&&56320==(64512&fe.charCodeAt(nt+1))?(ze=65536+((1023&ze)<<10)+(1023&fe.charCodeAt(++nt)),ne[Ae++]=ze>>18|240,ne[Ae++]=ze>>12&63|128,ne[Ae++]=ze>>6&63|128,ne[Ae++]=63&ze|128):(ne[Ae++]=ze>>12|224,ne[Ae++]=ze>>6&63|128,ne[Ae++]=63&ze|128)}return ne},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(fe,ne){if(!Array.isArray(fe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ae=ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,nt=[];for(let ze=0;ze<fe.length;ze+=3){const Nt=fe[ze],xe=ze+1<fe.length,we=xe?fe[ze+1]:0,ae=ze+2<fe.length,ke=ae?fe[ze+2]:0;let Jt=(15&we)<<2|ke>>6,vn=63&ke;ae||(vn=64,xe||(Jt=64)),nt.push(Ae[Nt>>2],Ae[(3&Nt)<<4|we>>4],Ae[Jt],Ae[vn])}return nt.join("")},encodeString(fe,ne){return this.HAS_NATIVE_SUPPORT&&!ne?btoa(fe):this.encodeByteArray(ie(fe),ne)},decodeString(fe,ne){return this.HAS_NATIVE_SUPPORT&&!ne?atob(fe):function(fe){const ne=[];let Ae=0,nt=0;for(;Ae<fe.length;){const ze=fe[Ae++];if(ze<128)ne[nt++]=String.fromCharCode(ze);else if(ze>191&&ze<224){const Nt=fe[Ae++];ne[nt++]=String.fromCharCode((31&ze)<<6|63&Nt)}else if(ze>239&&ze<365){const ae=((7&ze)<<18|(63&fe[Ae++])<<12|(63&fe[Ae++])<<6|63&fe[Ae++])-65536;ne[nt++]=String.fromCharCode(55296+(ae>>10)),ne[nt++]=String.fromCharCode(56320+(1023&ae))}else{const Nt=fe[Ae++],xe=fe[Ae++];ne[nt++]=String.fromCharCode((15&ze)<<12|(63&Nt)<<6|63&xe)}}return ne.join("")}(this.decodeStringToByteArray(fe,ne))},decodeStringToByteArray(fe,ne){this.init_();const Ae=ne?this.charToByteMapWebSafe_:this.charToByteMap_,nt=[];for(let ze=0;ze<fe.length;){const Nt=Ae[fe.charAt(ze++)],we=ze<fe.length?Ae[fe.charAt(ze)]:0;++ze;const ke=ze<fe.length?Ae[fe.charAt(ze)]:64;++ze;const kt=ze<fe.length?Ae[fe.charAt(ze)]:64;if(++ze,null==Nt||null==we||null==ke||null==kt)throw Error();nt.push(Nt<<2|we>>4),64!==ke&&(nt.push(we<<4&240|ke>>2),64!==kt&&nt.push(ke<<6&192|kt))}return nt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let fe=0;fe<this.ENCODED_VALS.length;fe++)this.byteToCharMap_[fe]=this.ENCODED_VALS.charAt(fe),this.charToByteMap_[this.byteToCharMap_[fe]]=fe,this.byteToCharMapWebSafe_[fe]=this.ENCODED_VALS_WEBSAFE.charAt(fe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[fe]]=fe,fe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(fe)]=fe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(fe)]=fe)}}},Ie=function(fe){return function(fe){const ne=ie(fe);return Ee.encodeByteArray(ne,!0)}(fe).replace(/\./g,"")},le=function(fe){try{return Ee.decodeString(fe,!0)}catch(ne){console.error("base64Decode failed: ",ne)}return null};function _e(fe,ne){if(!(ne instanceof Object))return ne;switch(ne.constructor){case Date:return new Date(ne.getTime());case Object:void 0===fe&&(fe={});break;case Array:fe=[];break;default:return ne}for(const Ae in ne)!ne.hasOwnProperty(Ae)||!$e(Ae)||(fe[Ae]=_e(fe[Ae],ne[Ae]));return fe}function $e(fe){return"__proto__"!==fe}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ne,Ae)=>{this.resolve=ne,this.reject=Ae})}wrapCallback(ne){return(Ae,nt)=>{Ae?this.reject(Ae):this.resolve(nt),"function"==typeof ne&&(this.promise.catch(()=>{}),1===ne.length?ne(Ae):ne(Ae,nt))}}}function Ke(fe,ne){if(fe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const nt=ne||"demo-project",ze=fe.iat||0,Nt=fe.sub||fe.user_id;if(!Nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${nt}`,aud:nt,iat:ze,exp:ze+3600,auth_time:ze,sub:Nt,user_id:Nt,firebase:{sign_in_provider:"custom",identities:{}}},fe);return[Ie(JSON.stringify({alg:"none",type:"JWT"})),Ie(JSON.stringify(xe)),""].join(".")}function Et(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function Te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(fe){return!1}}function ct(){return"object"==typeof self&&self.self===self}function H(){const fe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof fe&&void 0!==fe.id}function F(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function te(){return Et().indexOf("Electron/")>=0}function pe(){const fe=Et();return fe.indexOf("MSIE ")>=0||fe.indexOf("Trident/")>=0}function Ue(){return Et().indexOf("MSAppHost/")>=0}function Re(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ve(){return"object"==typeof indexedDB}function X(){return new Promise((fe,ne)=>{try{let Ae=!0;const nt="validate-browser-context-for-indexeddb-analytics-module",ze=self.indexedDB.open(nt);ze.onsuccess=()=>{ze.result.close(),Ae||self.indexedDB.deleteDatabase(nt),fe(!0)},ze.onupgradeneeded=()=>{Ae=!1},ze.onerror=()=>{var Nt;ne((null===(Nt=ze.error)||void 0===Nt?void 0:Nt.message)||"")}}catch(Ae){ne(Ae)}})}function Pe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class he extends Error{constructor(ne,Ae,nt){super(Ae),this.code=ne,this.customData=nt,this.name="FirebaseError",Object.setPrototypeOf(this,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(ne,Ae,nt){this.service=ne,this.serviceName=Ae,this.errors=nt}create(ne,...Ae){const nt=Ae[0]||{},ze=`${this.service}/${ne}`,Nt=this.errors[ne],xe=Nt?function qe(fe,ne){return fe.replace(ht,(Ae,nt)=>{const ze=ne[nt];return null!=ze?String(ze):`<${nt}?>`})}(Nt,nt):"Error";return new he(ze,`${this.serviceName}: ${xe} (${ze}).`,nt)}}const ht=/\{\$([^}]+)}/g;function fn(fe,ne){return Object.prototype.hasOwnProperty.call(fe,ne)}function zn(fe){for(const ne in fe)if(Object.prototype.hasOwnProperty.call(fe,ne))return!1;return!0}function tr(fe,ne){if(fe===ne)return!0;const Ae=Object.keys(fe),nt=Object.keys(ne);for(const ze of Ae){if(!nt.includes(ze))return!1;const Nt=fe[ze],xe=ne[ze];if(On(Nt)&&On(xe)){if(!tr(Nt,xe))return!1}else if(Nt!==xe)return!1}for(const ze of nt)if(!Ae.includes(ze))return!1;return!0}function On(fe){return null!==fe&&"object"==typeof fe}function En(fe){const ne=[];for(const[Ae,nt]of Object.entries(fe))Array.isArray(nt)?nt.forEach(ze=>{ne.push(encodeURIComponent(Ae)+"="+encodeURIComponent(ze))}):ne.push(encodeURIComponent(Ae)+"="+encodeURIComponent(nt));return ne.length?"&"+ne.join("&"):""}function Un(fe){const ne={};return fe.replace(/^\?/,"").split("&").forEach(nt=>{if(nt){const[ze,Nt]=nt.split("=");ne[decodeURIComponent(ze)]=decodeURIComponent(Nt)}}),ne}function ir(fe){const ne=fe.indexOf("?");if(!ne)return"";const Ae=fe.indexOf("#",ne);return fe.substring(ne,Ae>0?Ae:void 0)}function Gt(fe,ne){const Ae=new ln(fe,ne);return Ae.subscribe.bind(Ae)}class ln{constructor(ne,Ae){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ae,this.task.then(()=>{ne(this)}).catch(nt=>{this.error(nt)})}next(ne){this.forEachObserver(Ae=>{Ae.next(ne)})}error(ne){this.forEachObserver(Ae=>{Ae.error(ne)}),this.close(ne)}complete(){this.forEachObserver(ne=>{ne.complete()}),this.close()}subscribe(ne,Ae,nt){let ze;if(void 0===ne&&void 0===Ae&&void 0===nt)throw new Error("Missing Observer.");ze=function jt(fe,ne){if("object"!=typeof fe||null===fe)return!1;for(const Ae of ne)if(Ae in fe&&"function"==typeof fe[Ae])return!0;return!1}(ne,["next","error","complete"])?ne:{next:ne,error:Ae,complete:nt},void 0===ze.next&&(ze.next=xr),void 0===ze.error&&(ze.error=xr),void 0===ze.complete&&(ze.complete=xr);const Nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ze.error(this.finalError):ze.complete()}catch(xe){}}),this.observers.push(ze),Nt}unsubscribeOne(ne){void 0===this.observers||void 0===this.observers[ne]||(delete this.observers[ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ne){if(!this.finalized)for(let Ae=0;Ae<this.observers.length;Ae++)this.sendOne(Ae,ne)}sendOne(ne,Ae){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ne])try{Ae(this.observers[ne])}catch(nt){"undefined"!=typeof console&&console.error&&console.error(nt)}})}close(ne){this.finalized||(this.finalized=!0,void 0!==ne&&(this.finalError=ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xr(){}function Qn(fe,ne=1e3,Ae=2){const nt=ne*Math.pow(Ae,fe),ze=Math.round(.5*nt*(Math.random()-.5)*2);return Math.min(144e5,nt+ze)}function Zt(fe){return fe&&fe._delegate?fe._delegate:fe}function sr(fe,ne){return new Promise((Ae,nt)=>{fe.onsuccess=ze=>{Ae(ze.target.result)},fe.onerror=ze=>{var Nt;nt(`${ne}: ${null===(Nt=ze.target.error)||void 0===Nt?void 0:Nt.message}`)}})}class Ze{constructor(ne){this._db=ne,this.objectStoreNames=this._db.objectStoreNames}transaction(ne,Ae="readonly"){return new gt(this._db.transaction.call(this._db,ne,Ae))}createObjectStore(ne,Ae){return new Be(this._db.createObjectStore(ne,Ae))}close(){this._db.close()}}class gt{constructor(ne){this._transaction=ne,this.complete=new Promise((Ae,nt)=>{this._transaction.oncomplete=function(){Ae()},this._transaction.onerror=()=>{nt(this._transaction.error)},this._transaction.onabort=()=>{nt(this._transaction.error)}})}objectStore(ne){return new Be(this._transaction.objectStore(ne))}}class Be{constructor(ne){this._store=ne}index(ne){return new At(this._store.index(ne))}createIndex(ne,Ae,nt){return new At(this._store.createIndex(ne,Ae,nt))}get(ne){return sr(this._store.get(ne),"Error reading from IndexedDB")}put(ne,Ae){return sr(this._store.put(ne,Ae),"Error writing to IndexedDB")}delete(ne){return sr(this._store.delete(ne),"Error deleting from IndexedDB")}clear(){return sr(this._store.clear(),"Error clearing IndexedDB object store")}}class At{constructor(ne){this._index=ne}get(ne){return sr(this._index.get(ne),"Error reading from IndexedDB")}}function $t(fe,ne,Ae){return new Promise((nt,ze)=>{try{const Nt=indexedDB.open(fe,ne);Nt.onsuccess=xe=>{nt(new Ze(xe.target.result))},Nt.onerror=xe=>{var we;ze(`Error opening indexedDB: ${null===(we=xe.target.error)||void 0===we?void 0:we.message}`)},Nt.onupgradeneeded=xe=>{Ae(new Ze(Nt.result),xe.oldVersion,xe.newVersion,new gt(Nt.transaction))}}catch(Nt){ze(`Error opening indexedDB: ${Nt.message}`)}})}function pn(fe){return qt.apply(this,arguments)}function qt(){return(qt=(0,p.Z)(function*(fe){return new Promise((ne,Ae)=>{try{const nt=indexedDB.deleteDatabase(fe);nt.onsuccess=()=>{ne()},nt.onerror=ze=>{var Nt;Ae(`Error deleting indexedDB database "${fe}": ${null===(Nt=ze.target.error)||void 0===Nt?void 0:Nt.message}`)}}catch(nt){Ae(`Error deleting indexedDB database "${fe}": ${nt.message}`)}})})).apply(this,arguments)}},7556:(pt,Se,T)=>{"use strict";T.d(Se,{e:()=>le});var p=T(5861),N=T(9100),G=T(4004),de=T(9300),ie=T(3900),me=T(9646),Ee=T(5e3),ue=T(1205),Ie=T(7566);let le=(()=>{class re{constructor($e,We,Ke,Et){this.angularFireAuth=$e,this.angularFireStore=We,this.activatedRoute=Ke,this.router=Et,this.redirectOnLoggedOutUrl=null,this.usersCollection=this.angularFireStore.collection("users"),this.isAuthenticated$=this.angularFireAuth.user.pipe((0,G.U)(Ve=>!!Ve)),this.user$=this.angularFireAuth.user.pipe((0,G.U)(Ve=>{var Te,ct,H;return Ve?{name:null!==(Te=Ve.displayName)&&void 0!==Te?Te:"unknown name",email:null!==(ct=Ve.email)&&void 0!==ct?ct:"unknow email",age:10,phoneNumber:null!==(H=Ve.phoneNumber)&&void 0!==H?H:"unknown phone",uuid:Ve.uid}:null})),this.router.events.pipe((0,de.h)(Ve=>Ve instanceof N.m2),(0,G.U)(()=>this.activatedRoute.firstChild),(0,ie.w)(Ve=>{var Te;return null!==(Te=null==Ve?void 0:Ve.data)&&void 0!==Te?Te:(0,me.of)({})})).subscribe(Ve=>{this.redirectOnLoggedOutUrl=Ve.redirectOnLoggedOutUrl})}createUser($e){var We=this;return(0,p.Z)(function*(){var Ke;const{name:Et,email:Ve,password:Te,age:ct,phoneNumber:H}=$e,F=yield We.angularFireAuth.createUserWithEmailAndPassword(Ve,Te);if(!F.user)throw Error("User cannot be found");yield We.usersCollection.doc(null===(Ke=F.user)||void 0===Ke?void 0:Ke.uid).set({name:Et,email:Ve,phoneNumber:H,age:ct}),yield F.user.updateProfile({displayName:Et})})()}login($e){var We=this;return(0,p.Z)(function*(){const{email:Ke,password:Et}=$e;yield We.angularFireAuth.signInWithEmailAndPassword(Ke,Et)})()}logout(){var $e=this;return(0,p.Z)(function*(){yield $e.angularFireAuth.signOut(),$e.redirectOnLoggedOutUrl&&$e.router.navigateByUrl($e.redirectOnLoggedOutUrl)})()}}return re.\u0275fac=function($e){return new($e||re)(Ee.LFG(ue.zQ),Ee.LFG(Ie.ST),Ee.LFG(N.gz),Ee.LFG(N.F0))},re.\u0275prov=Ee.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})()},9541:(pt,Se,T)=>{"use strict";T.d(Se,{Y:()=>te});var ie,p=T(3900),N=T(9646),G=T(4004),de=T(4128),me=new Uint8Array(16);function Ee(){if(!ie&&!(ie="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ie(me)}const ue=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,le=function Ie(pe){return"string"==typeof pe&&ue.test(pe)};for(var re=[],_e=0;_e<256;++_e)re.push((_e+256).toString(16).substr(1));const Et=function Ke(pe,Ue,Le){var Re=(pe=pe||{}).random||(pe.rng||Ee)();if(Re[6]=15&Re[6]|64,Re[8]=63&Re[8]|128,Ue){Le=Le||0;for(var ve=0;ve<16;++ve)Ue[Le+ve]=Re[ve];return Ue}return function $e(pe){var Ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Le=(re[pe[Ue+0]]+re[pe[Ue+1]]+re[pe[Ue+2]]+re[pe[Ue+3]]+"-"+re[pe[Ue+4]]+re[pe[Ue+5]]+"-"+re[pe[Ue+6]]+re[pe[Ue+7]]+"-"+re[pe[Ue+8]]+re[pe[Ue+9]]+"-"+re[pe[Ue+10]]+re[pe[Ue+11]]+re[pe[Ue+12]]+re[pe[Ue+13]]+re[pe[Ue+14]]+re[pe[Ue+15]]).toLowerCase();if(!le(Le))throw TypeError("Stringified UUID is invalid");return Le}(Re)};var Ve=T(5e3),Te=T(7566),ct=T(1205),H=T(4585),F=T(6161);let te=(()=>{class pe{constructor(Le,Re,ve,X){this.angularFirestore=Le,this.angularFireAuth=Re,this.angularFireStorage=ve,this.ffmpegService=X,this.CLIPS_COLLECTION_ID="clips",this._clipsCollection=this.angularFirestore.collection(this.CLIPS_COLLECTION_ID)}createClip(Le){return this._clipsCollection.add(Le)}uploadClip(Le){const ve=`clips/${Et()}.mp4`;return[this.angularFireStorage.upload(ve,Le),this.angularFireStorage.ref(ve)]}uploadScreenshot(Le){const ve=`screenshots/${Et()}.png`;return[this.angularFireStorage.upload(ve,Le),this.angularFireStorage.ref(ve)]}updateClip(Le){return this._clipsCollection.doc(Le.docID).update(Le)}getUserClips(){return this.angularFireAuth.user.pipe((0,p.w)(Le=>Le?this._clipsCollection.ref.where("uid","==",Le.uid).get():(0,N.of)(null)),(0,G.U)(Le=>(null==Le?void 0:Le.docs)?Le.docs.map(Re=>Object.assign(Object.assign({},Re.data()),{docID:Re.id})):[]))}deleteClip(Le){const Re=this.angularFireStorage.ref(`clips/${Le.fileName}`),ve=this.angularFireStorage.ref(`screenshots/${Le.screenshotFileName}`);return(0,de.D)([Re.delete(),ve.delete(),this._clipsCollection.doc(Le.docID).delete()]).pipe((0,G.U)(()=>Le.docID))}getClips(Le){const{limit:Re=6,lastDocId:ve}=Le,X=this._clipsCollection.ref.orderBy("timestamp","desc").limit(Re);return this._clipsCollection.doc(ve).get().pipe((0,p.w)(ce=>ce.exists?X.startAfter(ce).get():X.get()),(0,G.U)(ce=>(null==ce?void 0:ce.docs)?ce.docs.map(et=>Object.assign(Object.assign({},et.data()),{docID:et.id})):[]))}}return pe.\u0275fac=function(Le){return new(Le||pe)(Ve.LFG(Te.ST),Ve.LFG(ct.zQ),Ve.LFG(H.Q1),Ve.LFG(F.s))},pe.\u0275prov=Ve.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe})()},6161:(pt,Se,T)=>{"use strict";T.d(Se,{s:()=>me});var p=T(5861),N=T(260),de=T(1135),ie=T(5e3);let me=(()=>{class Ee{constructor(){this._isReadyBehaviourSubject=new de.X(!1),this.isReady$=this._isReadyBehaviourSubject.asObservable(),this._ffmpeg=(0,N.createFFmpeg)({log:!0})}init(){var Ie=this;return(0,p.Z)(function*(){Ie._isReadyBehaviourSubject.getValue()||(yield Ie._ffmpeg.load(),Ie._isReadyBehaviourSubject.next(!0))})()}getScreenShots(Ie){var le=this;return(0,p.Z)(function*(){const re=yield(0,N.fetchFile)(Ie);le._ffmpeg.FS("writeFile",Ie.name,re);const _e=[1,2,3],$e=[];_e.forEach(Ke=>{$e.push("-i",Ie.name,"-ss",`00:00:0${Ke}`,"-frames:v","1","-filter:v","scale=510:-1",`output_0${Ke}.png`)}),yield le._ffmpeg.run(...$e);const We=[];return _e.forEach(Ke=>{const Et=le._ffmpeg.FS("readFile",`output_0${Ke}.png`),Ve=new Blob([Et.buffer],{type:"image/png"}),Te=URL.createObjectURL(Ve);We.push(Te)}),We})()}blobFromURL(Ie){return(0,p.Z)(function*(){return yield(yield fetch(Ie)).blob()})()}}return Ee.\u0275fac=function(Ie){return new(Ie||Ee)},Ee.\u0275prov=ie.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})()},4466:(pt,Se,T)=>{"use strict";T.d(Se,{m:()=>ie});var p=T(9808),N=T(3075),G=T(1470),de=T(5e3);let ie=(()=>{class me{}return me.\u0275fac=function(ue){return new(ue||me)},me.\u0275mod=de.oAB({type:me}),me.\u0275inj=de.cJS({imports:[[p.ez,N.UX,G.yI.forRoot()]]}),me})()},9657:(pt,Se,T)=>{"use strict";var p=T(2313),N=T(5e3),G=T(127),ie=(T(820),T(2011)),me=T(4585);const Ee_firebase={apiKey:"AIzaSyAcBedrPQWtwsBA-t8ZSjUk3y4SQ8eGRK8",authDomain:"clipit-31d1c.firebaseapp.com",projectId:"clipit-31d1c",storageBucket:"clipit-31d1c.appspot.com",messagingSenderId:"169059670918",appId:"1:169059670918:web:0da8e64eae1eddd785ea07"};var ue=T(9100),Ie=T(9635),le=T(4004),re=T(5698),_e=T(1205);const $e=(0,le.U)(Ze=>!!Ze);let We=(()=>{class Ze{constructor(Be,At){this.router=Be,this.auth=At,this.canActivate=($t,pn)=>{const qt=$t.data.authGuardPipe||(()=>$e);return this.auth.user.pipe((0,re.q)(1),qt($t,pn),(0,le.U)(fe=>"boolean"==typeof fe?fe:Array.isArray(fe)?this.router.createUrlTree(fe):this.router.parseUrl(fe)))}}}return Ze.\u0275fac=function(Be){return new(Be||Ze)(N.LFG(ue.F0),N.LFG(_e.zQ))},Ze.\u0275prov=N.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"any"}),Ze})();var Ue=T(9808),Le=T(7579),Re=T(1135),ve=T(8421),X=T(9751),Pe=T(5577),ce=T(1144),et=T(576),he=T(3268);const Ge=["addListener","removeListener"],qe=["addEventListener","removeEventListener"],ht=["on","off"];function Qe(Ze,gt,Be,At){if((0,et.m)(Be)&&(At=Be,Be=void 0),At)return Qe(Ze,gt,Be).pipe((0,he.Z)(At));const[$t,pn]=function Tt(Ze){return(0,et.m)(Ze.addEventListener)&&(0,et.m)(Ze.removeEventListener)}(Ze)?qe.map(qt=>fe=>Ze[qt](gt,fe,Be)):function Pt(Ze){return(0,et.m)(Ze.addListener)&&(0,et.m)(Ze.removeListener)}(Ze)?Ge.map(vt(Ze,gt)):function bt(Ze){return(0,et.m)(Ze.on)&&(0,et.m)(Ze.off)}(Ze)?ht.map(vt(Ze,gt)):[];if(!$t&&(0,ce.z)(Ze))return(0,Pe.z)(qt=>Qe(qt,gt,Be))((0,ve.Xf)(Ze));if(!$t)throw new TypeError("Invalid event target");return new X.y(qt=>{const fe=(...ne)=>qt.next(1<ne.length?ne:ne[0]);return $t(fe),()=>pn(fe)})}function vt(Ze,gt){return Be=>At=>Ze[Be](gt,At)}var dt=T(4482),hn=T(5403),fn=T(5032),zn=T(8372),Gn=T(8505),tr=T(9541);let On=(()=>{class Ze{constructor(Be){this.datePipe=Be}transform(Be){const At=Be.toDate();return this.datePipe.transform(At,"mediumDate")}}return Ze.\u0275fac=function(Be){return new(Be||Ze)(N.Y36(Ue.uU,16))},Ze.\u0275pipe=N.Yjl({name:"fpTimeStamp",type:Ze,pure:!0}),Ze})();const En=function(Ze){return["/","clip",Ze]};function Un(Ze,gt){if(1&Ze&&(N.TgZ(0,"a",2),N._UZ(1,"img",3),N.TgZ(2,"div",4)(3,"div",5)(4,"div",6),N.O4$(),N.TgZ(5,"svg",7),N._UZ(6,"path",8),N.qZA()()()(),N.kcU(),N.TgZ(7,"div",9)(8,"h2",10),N._uU(9),N.qZA(),N.TgZ(10,"p",11),N._uU(11),N.TgZ(12,"span",12),N._uU(13),N.ALo(14,"fpTimeStamp"),N.qZA()()()()),2&Ze){const Be=gt.$implicit;N.Q6J("routerLink",N.VKq(7,En,Be.docID)),N.xp6(1),N.Q6J("src",Be.screenshotURL,N.LSH),N.xp6(8),N.Oqu(Be.title),N.xp6(2),N.hij(" ",Be.displayName," \xb7 "),N.xp6(2),N.Oqu(N.lcZ(14,5,Be.timestamp))}}let ir=(()=>{class Ze{constructor(Be){this.clipsService=Be,this.ngDestroyed$=new Le.x,this._clipsSource=new Re.X([]),this.clips$=this._clipsSource.asObservable()}ngOnInit(){this.updateClips(),Qe(window,"scroll").pipe(function on(Ze){return(0,dt.e)((gt,Be)=>{(0,ve.Xf)(Ze).subscribe((0,hn.x)(Be,()=>Be.complete(),fn.Z)),!Be.closed&&gt.subscribe(Be)})}(this.ngDestroyed$),(0,zn.b)(200),(0,Gn.b)(()=>this.handleScroll())).subscribe()}ngOnDestroy(){this.ngDestroyed$.next(!0),this.ngDestroyed$.complete()}handleScroll(){console.log("Nam data is: handling scroll");const{scrollTop:Be,offsetHeight:At}=document.documentElement,{innerHeight:$t}=window;Math.round(Be)+$t===At&&this.updateClips()}updateClips(){var Be;const At=this._clipsSource.getValue(),$t=null===(Be=At[At.length-1])||void 0===Be?void 0:Be.docID;$t&&$t===this.prevDocId||this.clipsService.getClips({lastDocId:$t}).subscribe(pn=>{this.prevDocId=$t,this._clipsSource.next([...At,...pn])})}}return Ze.\u0275fac=function(Be){return new(Be||Ze)(N.Y36(tr.Y))},Ze.\u0275cmp=N.Xpm({type:Ze,selectors:[["app-clips-list"]],features:[N._Bn([Ue.uU])],decls:3,vars:3,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(Be,At){1&Be&&(N.TgZ(0,"div",0),N.YNc(1,Un,15,9,"a",1),N.ALo(2,"async"),N.qZA()),2&Be&&(N.xp6(1),N.Q6J("ngForOf",N.lcZ(2,1,At.clips$)))},directives:[Ue.sg,ue.yS],pipes:[Ue.Ov,On],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),Ze})();const Tn=[{path:"",component:(()=>{class Ze{constructor(){}ngOnInit(){}}return Ze.\u0275fac=function(Be){return new(Be||Ze)},Ze.\u0275cmp=N.Xpm({type:Ze,selectors:[["app-home"]],decls:4,vars:0,consts:[[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(Be,At){1&Be&&(N.TgZ(0,"section",0)(1,"h1",1),N._uU(2," Latest "),N.qZA(),N._UZ(3,"app-clips-list"),N.qZA())},directives:[ir],styles:[""]}),Ze})()},{path:"about",loadChildren:()=>T.e(630).then(T.bind(T,7630)).then(Ze=>Ze.AboutModule)},{path:"video",canActivate:[We],data:{redirectOnLoggedOutUrl:"/",authGuardPipe:()=>("/",(0,Ie.z)($e,(0,le.U)(gt=>gt||"/")))},loadChildren:()=>Promise.all([T.e(592),T.e(300)]).then(T.bind(T,1300)).then(Ze=>Ze.VideoModule)},{path:"clips",loadChildren:()=>T.e(163).then(T.bind(T,9163)).then(Ze=>Ze.ClipsModule)},{path:"user",outlet:"modal",loadChildren:()=>Promise.all([T.e(592),T.e(983)]).then(T.bind(T,9983)).then(Ze=>Ze.UserModule)},{path:"**",loadChildren:()=>T.e(442).then(T.bind(T,2442)).then(Ze=>Ze.NotFoundModule)}];let jt=(()=>{class Ze{}return Ze.\u0275fac=function(Be){return new(Be||Ze)},Ze.\u0275mod=N.oAB({type:Ze}),Ze.\u0275inj=N.cJS({imports:[[ue.Bz.forRoot(Tn)],ue.Bz]}),Ze})();var xr=T(9646),Rr=T(5861),Yn=T(7556);const _r=function(){return["user"]},ti=function(Ze){return{modal:Ze}},Gr=function(Ze){return{outlets:Ze}},bn=function(Ze){return[Ze]};function Vt(Ze,gt){1&Ze&&(N.TgZ(0,"li")(1,"a",14),N._uU(2,"Login / Register"),N.qZA()()),2&Ze&&(N.xp6(1),N.Q6J("routerLink",N.VKq(6,bn,N.VKq(4,Gr,N.VKq(2,ti,N.DdM(1,_r))))))}const Kt=function(){return{sort:"asc"}};function nr(Ze,gt){if(1&Ze){const Be=N.EpF();N.TgZ(0,"li",7)(1,"a",15),N._uU(2,"Manage"),N.qZA()(),N.TgZ(3,"li",7)(4,"a",16),N._uU(5,"Upload"),N.qZA()(),N.TgZ(6,"li",7)(7,"a",17),N.NdJ("click",function($t){return N.CHM(Be),N.oxw().logout($t)}),N._uU(8,"Logout"),N.qZA()()}2&Ze&&(N.xp6(1),N.Q6J("queryParams",N.DdM(1,Kt)))}let vr=(()=>{class Ze{constructor(Be){this.authService=Be}logout(Be){var At=this;return(0,Rr.Z)(function*(){Be.preventDefault(),yield At.authService.logout()})()}}return Ze.\u0275fac=function(Be){return new(Be||Ze)(N.Y36(Yn.e))},Ze.\u0275cmp=N.Xpm({type:Ze,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","about",1,"px-2"],[1,"flex","flex-row","ml-auto"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],[1,"px-2",3,"routerLink"],["routerLink","video/manage",1,"px-2",3,"queryParams"],["routerLink","video/upload","href","javascript:void(0);",1,"px-2"],["href","javascript:void(0);",1,"px-2",3,"click"]],template:function(Be,At){if(1&Be&&(N.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),N._uU(3,"Clipit!"),N.qZA(),N.TgZ(4,"div",3)(5,"ul",4),N.YNc(6,Vt,3,8,"li",5),N.ALo(7,"async"),N.YNc(8,nr,9,2,"ng-template",null,6,N.W1O),N.TgZ(10,"li",7)(11,"a",8),N._uU(12,"About"),N.qZA()()(),N.TgZ(13,"ul",9)(14,"li")(15,"a"),N._UZ(16,"img",10),N.TgZ(17,"span",11),N._uU(18,"English"),N.qZA()()(),N.TgZ(19,"li",12)(20,"a"),N._UZ(21,"img",13),N.TgZ(22,"span",11),N._uU(23,"French"),N.qZA()()()()()()()),2&Be){const $t=N.MAs(9);N.xp6(6),N.Q6J("ngIf",!1===N.lcZ(7,2,At.authService.isAuthenticated$))("ngIfElse",$t)}},directives:[ue.yS,Ue.O5,ue.Od],pipes:[Ue.Ov],styles:[""],changeDetection:0}),Ze})(),An=(()=>{class Ze{constructor(){}}return Ze.\u0275fac=function(Be){return new(Be||Ze)},Ze.\u0275cmp=N.Xpm({type:Ze,selectors:[["app-loading-spinner"]],decls:5,vars:0,consts:[[1,"loadingio-spinner-dual-ring-tosstnkrw7b"],[1,"ldio-stkcctj1ev"]],template:function(Be,At){1&Be&&(N.TgZ(0,"div",0)(1,"div",1),N._UZ(2,"div"),N.TgZ(3,"div"),N._UZ(4,"div"),N.qZA()()())},styles:['[_nghost-%COMP%]{display:block;position:fixed;top:0;right:0;width:100vw;height:100vh;background:rgba(82,118,154,.2)}@keyframes ldio-stkcctj1ev{0%{transform:rotate(0)}to{transform:rotate(360deg)}}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box!important}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:144px;height:144px;top:28px;left:28px;border-radius:50%;border:16px solid #000;border-color:#1c4595 transparent #1c4595 transparent;animation:ldio-stkcctj1ev 1s linear infinite}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-color:transparent}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;transform:rotate(45deg)}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:16px;height:16px;top:-16px;left:48px;background:#1c4595;border-radius:50%;box-shadow:0 128px #1c4595}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{left:-16px;top:48px;box-shadow:128px 0 #1c4595}[_nghost-%COMP%]   .loadingio-spinner-dual-ring-tosstnkrw7b[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;display:inline-block;overflow:hidden}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(1);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}'],changeDetection:0}),Ze})();function Qn(Ze,gt){1&Ze&&N._UZ(0,"app-loading-spinner")}let Ln=(()=>{class Ze{constructor(Be){this.router=Be,this.title="clipit",this.loading$=(0,xr.of)(!1),this.loading$=this.router.events.pipe((0,le.U)(At=>At instanceof ue.xV))}}return Ze.\u0275fac=function(Be){return new(Be||Ze)(N.Y36(ue.F0))},Ze.\u0275cmp=N.Xpm({type:Ze,selectors:[["app-root"]],decls:5,vars:3,consts:[["name","modal"],[4,"ngIf"]],template:function(Be,At){1&Be&&(N._UZ(0,"app-nav")(1,"router-outlet")(2,"router-outlet",0),N.YNc(3,Qn,1,0,"app-loading-spinner",1),N.ALo(4,"async")),2&Be&&(N.xp6(3),N.Q6J("ngIf",N.lcZ(4,1,At.loading$)))},directives:[vr,ue.lC,Ue.O5,An],pipes:[Ue.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),Ze})();var ur=T(4466);let Zt=(()=>{class Ze{}return Ze.\u0275fac=function(Be){return new(Be||Ze)},Ze.\u0275mod=N.oAB({type:Ze,bootstrap:[Ln]}),Ze.\u0275inj=N.cJS({providers:[],imports:[[p.b2,jt,ie.hO.initializeApp(Ee_firebase),ur.m,me.TE]]}),Ze})();(0,N.G48)();let sr=!1;G.Z.initializeApp(Ee_firebase),G.Z.auth().onAuthStateChanged(()=>{sr||p.q6().bootstrapModule(Zt).catch(Ze=>console.error(Ze)),sr=!0})},5867:(pt,Se,T)=>{"use strict";T.d(Se,{C6:()=>p.getApps,Mq:()=>p.getApp,ZR:()=>p.FirebaseError});var p=T(9681);(0,p.registerVersion)("firebase","9.6.11","app")},127:(pt,Se,T)=>{"use strict";T.d(Se,{Z:()=>p.Z});var p=T(3942);p.Z.registerVersion("firebase","9.6.11","app-compat")},820:(pt,Se,T)=>{"use strict";T.r(Se);var p=T(5861),N=T(3942),G=T(2090),de=T(9681),ie=T(655),me=T(1877),Ee=T(4859);const Ke=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Et=function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ve=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ct=new me.Yd("@firebase/auth");function H(g,...c){ct.logLevel<=me.in.ERROR&&ct.error(`Auth (${de.SDK_VERSION}): ${g}`,...c)}function F(g,...c){throw Le(g,...c)}function te(g,...c){return Le(g,...c)}function pe(g,c,f){const v=Object.assign(Object.assign({},Et()),{[c]:f});return new G.LL("auth","Firebase",v).create(c,{appName:g.name})}function Ue(g,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&F(g,"argument-error"),pe(g,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(g,...c){if("string"!=typeof g){const f=c[0],v=[...c.slice(1)];return v[0]&&(v[0].appName=g.name),g._errorFactory.create(f,...v)}return Ve.create(g,...c)}function Re(g,c,...f){if(!g)throw Le(c,...f)}function ve(g){const c="INTERNAL ASSERTION FAILED: "+g;throw H(c),new Error(c)}function X(g,c){g||ve(c)}const Pe=new Map;function ce(g){X(g instanceof Function,"Expected a class definition");let c=Pe.get(g);return c?(X(c instanceof g,"Instance stored in cache mismatched with class"),c):(c=new g,Pe.set(g,c),c)}function Ge(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function qe(){return"http:"===ht()||"https:"===ht()}function ht(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Pt{constructor(c,f){this.shortDelay=c,this.longDelay=f,X(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Qe(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(qe()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bt(g,c){X(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class Tt{static initialize(c,f,v){this.fetchImpl=c,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},hn=new Pt(3e4,6e4);function fn(g,c){return g.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:g.tenantId}):c}function on(g,c,f,v){return zn.apply(this,arguments)}function zn(){return(zn=(0,p.Z)(function*(g,c,f,v,U={}){return Gn(g,U,(0,p.Z)(function*(){let J={},He={};v&&("GET"===c?He=v:J={body:JSON.stringify(v)});const lt=(0,G.xO)(Object.assign({key:g.config.apiKey},He)).slice(1),zt=yield g._getAdditionalHeaders();return zt["Content-Type"]="application/json",g.languageCode&&(zt["X-Firebase-Locale"]=g.languageCode),Tt.fetch()(Un(g,g.config.apiHost,f,lt),Object.assign({method:c,headers:zt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function Gn(g,c,f){return tr.apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(g,c,f){g._canInitEmulator=!1;const v=Object.assign(Object.assign({},dt),c);try{const U=new ir(g),J=yield Promise.race([f(),U.promise]);U.clearNetworkTimeout();const He=yield J.json();if("needConfirmation"in He)throw Zn(g,"account-exists-with-different-credential",He);if(J.ok&&!("errorMessage"in He))return He;{const lt=J.ok?He.errorMessage:He.error.message,[zt,dn]=lt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===zt)throw Zn(g,"credential-already-in-use",He);if("EMAIL_EXISTS"===zt)throw Zn(g,"email-already-in-use",He);const Dn=v[zt]||zt.toLowerCase().replace(/[_\s]+/g,"-");if(dn)throw pe(g,Dn,dn);F(g,Dn)}}catch(U){if(U instanceof G.ZR)throw U;F(g,"network-request-failed")}})).apply(this,arguments)}function On(g,c,f,v){return En.apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(g,c,f,v,U={}){const J=yield on(g,c,f,v,U);return"mfaPendingCredential"in J&&F(g,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function Un(g,c,f,v){const U=`${c}${f}?${v}`;return g.config.emulator?bt(g.config,U):`${g.config.apiScheme}://${U}`}class ir{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(te(this.auth,"network-request-failed")),hn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zn(g,c,f){const v={appName:g.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const U=te(g,c,v);return U.customData._tokenResponse=f,U}function ln(){return(ln=(0,p.Z)(function*(g,c){return on(g,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Tn(g,c){return jt.apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(g,c){return on(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function xr(g,c){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,p.Z)(function*(g,c){return on(g,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Yn(g){if(g)try{const c=new Date(Number(g));if(!isNaN(c.getTime()))return c.toUTCString()}catch(c){}}function Gr(){return(Gr=(0,p.Z)(function*(g,c=!1){const f=(0,G.m9)(g),v=yield f.getIdToken(c),U=Vt(v);Re(U&&U.exp&&U.auth_time&&U.iat,f.auth,"internal-error");const J="object"==typeof U.firebase?U.firebase:void 0,He=null==J?void 0:J.sign_in_provider;return{claims:U,token:v,authTime:Yn(bn(U.auth_time)),issuedAtTime:Yn(bn(U.iat)),expirationTime:Yn(bn(U.exp)),signInProvider:He||null,signInSecondFactor:(null==J?void 0:J.sign_in_second_factor)||null}})).apply(this,arguments)}function bn(g){return 1e3*Number(g)}function Vt(g){const[c,f,v]=g.split(".");if(void 0===c||void 0===f||void 0===v)return H("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,G.tV)(f);return U?JSON.parse(U):(H("Failed to decode base64 JWT payload"),null)}catch(U){return H("Caught error parsing JWT payload as JSON",U),null}}function nr(g,c){return vr.apply(this,arguments)}function vr(){return(vr=(0,p.Z)(function*(g,c,f=!1){if(f)return c;try{return yield c}catch(v){throw v instanceof G.ZR&&An(v)&&g.auth.currentUser===g&&(yield g.auth.signOut()),v}})).apply(this,arguments)}function An({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class Qn{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const U=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),v)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&c.schedule(!0))}c.schedule()})()}}class Ln{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yn(this.lastLoginAt),this.creationTime=Yn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ur(g){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,p.Z)(function*(g){var c;const f=g.auth,v=yield g.getIdToken(),U=yield nr(g,xr(f,{idToken:v}));Re(null==U?void 0:U.users.length,f,"internal-error");const J=U.users[0];g._notifyReloadListener(J);const He=(null===(c=J.providerUserInfo)||void 0===c?void 0:c.length)?Be(J.providerUserInfo):[],lt=gt(g.providerData,He),Dn=!!g.isAnonymous&&!(g.email&&J.passwordHash||(null==lt?void 0:lt.length)),sn={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:lt,metadata:new Ln(J.createdAt,J.lastLoginAt),isAnonymous:Dn};Object.assign(g,sn)})).apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(g){const c=(0,G.m9)(g);yield ur(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function gt(g,c){return[...g.filter(v=>!c.some(U=>U.providerId===v.providerId)),...c]}function Be(g){return g.map(c=>{var{providerId:f}=c,v=(0,ie._T)(c,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function $t(){return($t=(0,p.Z)(function*(g,c){const f=yield Gn(g,{},(0,p.Z)(function*(){const v=(0,G.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:U,apiKey:J}=g.config,He=Un(g,U,"/v1/token",`key=${J}`),lt=yield g._getAdditionalHeaders();return lt["Content-Type"]="application/x-www-form-urlencoded",Tt.fetch()(He,{method:"POST",headers:lt,body:v})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class pn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Re(c.idToken,"internal-error"),Re(void 0!==c.idToken,"internal-error"),Re(void 0!==c.refreshToken,"internal-error");const f="expiresIn"in c&&void 0!==c.expiresIn?Number(c.expiresIn):function Kt(g){const c=Vt(g);return Re(c,"internal-error"),Re(void 0!==c.exp,"internal-error"),Re(void 0!==c.iat,"internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var v=this;return(0,p.Z)(function*(){return Re(!v.accessToken||v.refreshToken,c,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(c,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var v=this;return(0,p.Z)(function*(){const{accessToken:U,refreshToken:J,expiresIn:He}=yield function At(g,c){return $t.apply(this,arguments)}(c,f);v.updateTokensAndExpiration(U,J,Number(He))})()}updateTokensAndExpiration(c,f,v){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(c,f){const{refreshToken:v,accessToken:U,expirationTime:J}=f,He=new pn;return v&&(Re("string"==typeof v,"internal-error",{appName:c}),He.refreshToken=v),U&&(Re("string"==typeof U,"internal-error",{appName:c}),He.accessToken=U),J&&(Re("number"==typeof J,"internal-error",{appName:c}),He.expirationTime=J),He}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new pn,this.toJSON())}_performRefresh(){return ve("not implemented")}}function qt(g,c){Re("string"==typeof g||void 0===g,"internal-error",{appName:c})}class fe{constructor(c){var{uid:f,auth:v,stsTokenManager:U}=c,J=(0,ie._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new Ln(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const v=yield nr(f,f.stsTokenManager.getToken(f.auth,c));return Re(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(c){return function ti(g){return Gr.apply(this,arguments)}(this,c)}reload(){return function sr(g){return Ze.apply(this,arguments)}(this)}_assign(c){this!==c&&(Re(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new fe(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var v=this;return(0,p.Z)(function*(){let U=!1;c.idToken&&c.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(c),U=!0),f&&(yield ur(v)),yield v.auth._persistUserIfCurrent(v),U&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield nr(c,function Gt(g,c){return ln.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var v,U,J,He,lt,zt,dn,Dn;const sn=null!==(v=f.displayName)&&void 0!==v?v:void 0,Si=null!==(U=f.email)&&void 0!==U?U:void 0,ho=null!==(J=f.phoneNumber)&&void 0!==J?J:void 0,Zs=null!==(He=f.photoURL)&&void 0!==He?He:void 0,Ol=null!==(lt=f.tenantId)&&void 0!==lt?lt:void 0,Oa=null!==(zt=f._redirectEventId)&&void 0!==zt?zt:void 0,_c=null!==(dn=f.createdAt)&&void 0!==dn?dn:void 0,Lf=null!==(Dn=f.lastLoginAt)&&void 0!==Dn?Dn:void 0,{uid:Pa,emailVerified:vc,isAnonymous:ud,providerData:ld,stsTokenManager:Ec}=f;Re(Pa&&Ec,c,"internal-error");const Vf=pn.fromJSON(this.name,Ec);Re("string"==typeof Pa,c,"internal-error"),qt(sn,c.name),qt(Si,c.name),Re("boolean"==typeof vc,c,"internal-error"),Re("boolean"==typeof ud,c,"internal-error"),qt(ho,c.name),qt(Zs,c.name),qt(Ol,c.name),qt(Oa,c.name),qt(_c,c.name),qt(Lf,c.name);const cd=new fe({uid:Pa,auth:c,email:Si,emailVerified:vc,displayName:sn,isAnonymous:ud,photoURL:Zs,phoneNumber:ho,tenantId:Ol,stsTokenManager:Vf,createdAt:_c,lastLoginAt:Lf});return ld&&Array.isArray(ld)&&(cd.providerData=ld.map(Uf=>Object.assign({},Uf))),Oa&&(cd._redirectEventId=Oa),cd}static _fromIdTokenResponse(c,f,v=!1){return(0,p.Z)(function*(){const U=new pn;U.updateFromServerResponse(f);const J=new fe({uid:f.localId,auth:c,stsTokenManager:U,isAnonymous:v});return yield ur(J),J})()}}const Ae=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,v){var U=this;return(0,p.Z)(function*(){U.storage[f]=v})()}_get(f){var v=this;return(0,p.Z)(function*(){const U=v.storage[f];return void 0===U?null:U})()}_remove(f){var v=this;return(0,p.Z)(function*(){delete v.storage[f]})()}_addListener(f,v){}_removeListener(f,v){}}return g.type="NONE",g})();function nt(g,c,f){return`firebase:${g}:${c}:${f}`}class ze{constructor(c,f,v){this.persistence=c,this.auth=f,this.userKey=v;const{config:U,name:J}=this.auth;this.fullUserKey=nt(this.userKey,U.apiKey,J),this.fullPersistenceKey=nt("persistence",U.apiKey,J),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?fe._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const v=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,v?f.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,v="authUser"){return(0,p.Z)(function*(){if(!f.length)return new ze(ce(Ae),c,v);const U=(yield Promise.all(f.map(function(){var dn=(0,p.Z)(function*(Dn){if(yield Dn._isAvailable())return Dn});return function(Dn){return dn.apply(this,arguments)}}()))).filter(dn=>dn);let J=U[0]||ce(Ae);const He=nt(v,c.config.apiKey,c.name);let lt=null;for(const dn of f)try{const Dn=yield dn._get(He);if(Dn){const sn=fe._fromJSON(c,Dn);dn!==J&&(lt=sn),J=dn;break}}catch(Dn){}const zt=U.filter(dn=>dn._shouldAllowMigration);return J._shouldAllowMigration&&zt.length?(J=zt[0],lt&&(yield J._set(He,lt.toJSON())),yield Promise.all(f.map(function(){var dn=(0,p.Z)(function*(Dn){if(Dn!==J)try{yield Dn._remove(He)}catch(sn){}});return function(Dn){return dn.apply(this,arguments)}}())),new ze(J,c,v)):new ze(J,c,v)})()}}function Nt(g){const c=g.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(ke(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(xe(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(kt(c))return"Blackberry";if(Jt(c))return"Webos";if(we(c))return"Safari";if((c.includes("chrome/")||ae(c))&&!c.includes("edge/"))return"Chrome";if(at(c))return"Android";{const v=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function xe(g=(0,G.z$)()){return/firefox\//i.test(g)}function we(g=(0,G.z$)()){const c=g.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function ae(g=(0,G.z$)()){return/crios\//i.test(g)}function ke(g=(0,G.z$)()){return/iemobile/i.test(g)}function at(g=(0,G.z$)()){return/android/i.test(g)}function kt(g=(0,G.z$)()){return/blackberry/i.test(g)}function Jt(g=(0,G.z$)()){return/webos/i.test(g)}function vn(g=(0,G.z$)()){return/iphone|ipad|ipod/i.test(g)}function zr(g=(0,G.z$)()){return vn(g)||at(g)||Jt(g)||kt(g)||/windows phone/i.test(g)||ke(g)}function Qr(g,c=[]){let f;switch(g){case"Browser":f=Nt((0,G.z$)());break;case"Worker":f=`${Nt((0,G.z$)())}-${g}`;break;default:f=g}const v=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${de.SDK_VERSION}/${v}`}class Kr{constructor(c,f,v){this.app=c,this.heartbeatServiceProvider=f,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nn(this),this.idTokenSubscription=new nn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ve,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(c,f){var v=this;return f&&(this._popupRedirectResolver=ce(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var U,J;if(!v._deleted&&(v.persistenceManager=yield ze.create(v,c),!v._deleted)){if(null===(U=v._popupRedirectResolver)||void 0===U?void 0:U._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(He){}yield v.initializeCurrentUser(f),v.lastNotifiedUid=(null===(J=v.currentUser)||void 0===J?void 0:J.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var v;let U=yield f.assertedPersistence.getCurrentUser();if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const J=null===(v=f.redirectUser)||void 0===v?void 0:v._redirectEventId,He=null==U?void 0:U._redirectEventId,lt=yield f.tryRedirectSignIn(c);(!J||J===He)&&(null==lt?void 0:lt.user)&&(U=lt.user)}return U?U._redirectEventId?(Re(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===U._redirectEventId?f.directlySetCurrentUser(U):f.reloadAndSetCurrentUserOrClear(U)):f.reloadAndSetCurrentUserOrClear(U):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let v=null;try{v=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch(U){yield f._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){try{yield ur(c)}catch(v){if("auth/network-request-failed"!==v.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function vt(){if("undefined"==typeof navigator)return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const v=c?(0,G.m9)(c):null;return v&&Re(v.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(v&&v._clone(f))})()}_updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){if(!f._deleted)return c&&Re(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),f.queue((0,p.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(ce(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new G.LL("auth","Firebase",c())}onAuthStateChanged(c,f,v){return this.registerStateListener(this.authStateSubscription,c,f,v)}onIdTokenChanged(c,f,v){return this.registerStateListener(this.idTokenSubscription,c,f,v)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var v=this;return(0,p.Z)(function*(){const U=yield v.getOrInitRedirectPersistenceManager(f);return null===c?U.removeCurrentUser():U.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const v=c&&ce(c)||f._popupRedirectResolver;Re(v,f,"argument-error"),f.redirectPersistenceManager=yield ze.create(f,[ce(v._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var v,U;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(v=f._currentUser)||void 0===v?void 0:v._redirectEventId)===c?f._currentUser:(null===(U=f.redirectUser)||void 0===U?void 0:U._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,v,U){if(this._deleted)return()=>{};const J="function"==typeof f?f:f.next.bind(f),He=this._isInitialized?Promise.resolve():this._initializationPromise;return Re(He,this,"internal-error"),He.then(()=>J(this.currentUser)),"function"==typeof f?c.addObserver(f,v,U):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&(f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh()),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Qr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const v={"X-Client-Version":c.clientVersion};c.app.options.appId&&(v["X-Firebase-gmpid"]=c.app.options.appId);const U=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return U&&(v["X-Firebase-Client"]=U),v})()}}function Mt(g){return(0,G.m9)(g)}class nn{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,G.ne)(f=>this.observer=f)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wr(g){const c=g.indexOf(":");return c<0?"":g.substr(0,c+1)}function Tr(g){if(!g)return null;const c=Number(g);return isNaN(c)?null:c}class Bn{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return ve("not implemented")}_getIdTokenResponse(c){return ve("not implemented")}_linkToIdToken(c,f){return ve("not implemented")}_getReauthenticationResolver(c){return ve("not implemented")}}function or(g,c){return Or.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(g,c){return on(g,"POST","/v1/accounts:resetPassword",fn(g,c))})).apply(this,arguments)}function mn(g,c){return ri.apply(this,arguments)}function ri(){return(ri=(0,p.Z)(function*(g,c){return on(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Fi(g,c){return ns.apply(this,arguments)}function ns(){return(ns=(0,p.Z)(function*(g,c){return on(g,"POST","/v1/accounts:update",fn(g,c))})).apply(this,arguments)}function Pn(){return(Pn=(0,p.Z)(function*(g,c){return On(g,"POST","/v1/accounts:signInWithPassword",fn(g,c))})).apply(this,arguments)}function qr(g,c){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(g,c){return on(g,"POST","/v1/accounts:sendOobCode",fn(g,c))})).apply(this,arguments)}function Sr(g,c){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(g,c){return qr(g,c)})).apply(this,arguments)}function os(g,c){return Li.apply(this,arguments)}function Li(){return(Li=(0,p.Z)(function*(g,c){return qr(g,c)})).apply(this,arguments)}function lr(g,c){return _i.apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(g,c){return qr(g,c)})).apply(this,arguments)}function zi(g,c){return fi.apply(this,arguments)}function fi(){return(fi=(0,p.Z)(function*(g,c){return qr(g,c)})).apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(g,c){return On(g,"POST","/v1/accounts:signInWithEmailLink",fn(g,c))})).apply(this,arguments)}function ms(){return(ms=(0,p.Z)(function*(g,c){return On(g,"POST","/v1/accounts:signInWithEmailLink",fn(g,c))})).apply(this,arguments)}class bs extends Bn{constructor(c,f,v,U=null){super("password",v),this._email=c,this._password=f,this._tenantId=U}static _fromEmailAndPassword(c,f){return new bs(c,f,"password")}static _fromEmailAndCode(c,f,v=null){return new bs(c,f,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Ar(g,c){return Pn.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Ds(g,c){return pi.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:F(c,"internal-error")}})()}_linkToIdToken(c,f){var v=this;return(0,p.Z)(function*(){switch(v.signInMethod){case"password":return mn(c,{idToken:f,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Zr(g,c){return ms.apply(this,arguments)}(c,{idToken:f,email:v._email,oobCode:v._password});default:F(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function rr(g,c){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,p.Z)(function*(g,c){return On(g,"POST","/v1/accounts:signInWithIdp",fn(g,c))})).apply(this,arguments)}class Fe extends Bn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new Fe(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):F("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:v,signInMethod:U}=f,J=(0,ie._T)(f,["providerId","signInMethod"]);if(!v||!U)return null;const He=new Fe(v,U);return He.idToken=J.idToken||void 0,He.accessToken=J.accessToken||void 0,He.secret=J.secret,He.nonce=J.nonce,He.pendingToken=J.pendingToken||null,He}_getIdTokenResponse(c){return rr(c,this.buildRequest())}_linkToIdToken(c,f){const v=this.buildRequest();return v.idToken=f,rr(c,v)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,rr(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,G.xO)(f)}return c}}function Ne(g,c){return Je.apply(this,arguments)}function Je(){return(Je=(0,p.Z)(function*(g,c){return on(g,"POST","/v1/accounts:sendVerificationCode",fn(g,c))})).apply(this,arguments)}function Ot(){return(Ot=(0,p.Z)(function*(g,c){return On(g,"POST","/v1/accounts:signInWithPhoneNumber",fn(g,c))})).apply(this,arguments)}function jn(){return(jn=(0,p.Z)(function*(g,c){const f=yield On(g,"POST","/v1/accounts:signInWithPhoneNumber",fn(g,c));if(f.temporaryProof)throw Zn(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Pr={USER_NOT_FOUND:"user-not-found"};function Ri(){return(Ri=(0,p.Z)(function*(g,c){return On(g,"POST","/v1/accounts:signInWithPhoneNumber",fn(g,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Pr)})).apply(this,arguments)}class Ii extends Bn{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new Ii({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new Ii({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function mt(g,c){return Ot.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function Qt(g,c){return jn.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function kn(g,c){return Ri.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:v,verificationCode:U}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:v,code:U}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:v,phoneNumber:U,temporaryProof:J}=c;return v||f||U||J?new Ii({verificationId:f,verificationCode:v,phoneNumber:U,temporaryProof:J}):null}}class Vi{constructor(c){var f,v,U,J,He,lt;const zt=(0,G.zd)((0,G.pd)(c)),dn=null!==(f=zt.apiKey)&&void 0!==f?f:null,Dn=null!==(v=zt.oobCode)&&void 0!==v?v:null,sn=function Oi(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=zt.mode)&&void 0!==U?U:null);Re(dn&&Dn&&sn,"argument-error"),this.apiKey=dn,this.operation=sn,this.code=Dn,this.continueUrl=null!==(J=zt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(He=zt.languageCode)&&void 0!==He?He:null,this.tenantId=null!==(lt=zt.tenantId)&&void 0!==lt?lt:null}static parseLink(c){const f=function ys(g){const c=(0,G.zd)((0,G.pd)(g)).link,f=c?(0,G.zd)((0,G.pd)(c)).deep_link_id:null,v=(0,G.zd)((0,G.pd)(g)).deep_link_id;return(v?(0,G.zd)((0,G.pd)(v)).link:null)||v||f||c||g}(c);try{return new Vi(f)}catch(v){return null}}}let ii=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,v){return bs._fromEmailAndPassword(f,v)}static credentialWithLink(f,v){const U=Vi.parseLink(v);return Re(U,"argument-error"),bs._fromEmailAndCode(f,U.code,U.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Di{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Er extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class as extends Er{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return Re("providerId"in f&&"signInMethod"in f,"argument-error"),Fe._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Re(c.idToken||c.accessToken,"argument-error"),Fe._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return as.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return as.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:U,pendingToken:J,nonce:He,providerId:lt}=c;if(!v&&!U&&!f&&!J||!lt)return null;try{return new as(lt)._credential({idToken:f,accessToken:v,nonce:He,pendingToken:J})}catch(zt){return null}}}let us=(()=>{class g extends Er{constructor(){super("facebook.com")}static credential(f){return Fe._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(v){return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),ls=(()=>{class g extends Er{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return Fe._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:U}=f;if(!v&&!U)return null;try{return g.credential(v,U)}catch(J){return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),to=(()=>{class g extends Er{constructor(){super("github.com")}static credential(f){return Fe._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(v){return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class bi extends Bn{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return rr(c,this.buildRequest())}_linkToIdToken(c,f){const v=this.buildRequest();return v.idToken=f,rr(c,v)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,rr(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:v,signInMethod:U,pendingToken:J}=f;return v&&U&&J&&v===U?new bi(v,J):null}static _create(c,f){return new bi(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Jr extends Di{constructor(c){Re(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Jr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Jr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=bi.fromJSON(c);return Re(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:v}=c;if(!f||!v)return null;try{return bi._create(v,f)}catch(U){return null}}}let qi=(()=>{class g extends Er{constructor(){super("twitter.com")}static credential(f,v){return Fe._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:U}=f;if(!v||!U)return null;try{return g.credential(v,U)}catch(J){return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Cs(g,c){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(g,c){return On(g,"POST","/v1/accounts:signUp",fn(g,c))})).apply(this,arguments)}class kr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,v,U=!1){return(0,p.Z)(function*(){const J=yield fe._fromIdTokenResponse(c,v,U),He=cs(v);return new kr({user:J,providerId:He,_tokenResponse:v,operationType:f})})()}static _forOperation(c,f,v){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(v,!0);const U=cs(v);return new kr({user:c,providerId:U,_tokenResponse:v,operationType:f})})()}}function cs(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Os(){return(Os=(0,p.Z)(function*(g){var c;const f=Mt(g);if(yield f._initializationPromise,null===(c=f.currentUser)||void 0===c?void 0:c.isAnonymous)return new kr({user:f.currentUser,providerId:null,operationType:"signIn"});const v=yield Cs(f,{returnSecureToken:!0}),U=yield kr._fromIdTokenResponse(f,"signIn",v,!0);return yield f._updateCurrentUser(U.user),U})).apply(this,arguments)}class si extends G.ZR{constructor(c,f,v,U){var J;super(f.code,f.message),this.operationType=v,this.user=U,Object.setPrototypeOf(this,si.prototype),this.customData={appName:c.name,tenantId:null!==(J=c.tenantId)&&void 0!==J?J:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(c,f,v,U){return new si(c,f,v,U)}}function rs(g,c,f,v){return("reauthenticate"===c?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?si._fromErrorAndOperation(g,J,c,v):J})}function gi(g){return new Set(g.map(({providerId:c})=>c).filter(c=>!!c))}function Zi(){return(Zi=(0,p.Z)(function*(g,c){const f=(0,G.m9)(g);yield W(!0,f,c);const{providerUserInfo:v}=yield Tn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),U=gi(v||[]);return f.providerData=f.providerData.filter(J=>U.has(J.providerId)),U.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function cr(g,c){return R.apply(this,arguments)}function R(){return(R=(0,p.Z)(function*(g,c,f=!1){const v=yield nr(g,c._linkToIdToken(g.auth,yield g.getIdToken()),f);return kr._forOperation(g,"link",v)})).apply(this,arguments)}function W(g,c,f){return x.apply(this,arguments)}function x(){return(x=(0,p.Z)(function*(g,c,f){yield ur(c);const U=!1===g?"provider-already-linked":"no-such-provider";Re(gi(c.providerData).has(f)===g,c.auth,U)})).apply(this,arguments)}function Y(g,c){return be.apply(this,arguments)}function be(){return(be=(0,p.Z)(function*(g,c,f=!1){const{auth:v}=g,U="reauthenticate";try{const J=yield nr(g,rs(v,U,c,g),f);Re(J.idToken,v,"internal-error");const He=Vt(J.idToken);Re(He,v,"internal-error");const{sub:lt}=He;return Re(g.uid===lt,v,"user-mismatch"),kr._forOperation(g,U,J)}catch(J){throw"auth/user-not-found"===(null==J?void 0:J.code)&&F(v,"user-mismatch"),J}})).apply(this,arguments)}function it(g,c){return ot.apply(this,arguments)}function ot(){return(ot=(0,p.Z)(function*(g,c,f=!1){const v="signIn",U=yield rs(g,v,c),J=yield kr._fromIdTokenResponse(g,v,U);return f||(yield g._updateCurrentUser(J.user)),J})).apply(this,arguments)}function Lt(g,c){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(g,c){return it(Mt(g),c)})).apply(this,arguments)}function $n(g,c){return wn.apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(g,c){const f=(0,G.m9)(g);return yield W(!1,f,c.providerId),cr(f,c)})).apply(this,arguments)}function Sn(g,c){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,p.Z)(function*(g,c){return Y((0,G.m9)(g),c)})).apply(this,arguments)}function ar(g,c){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(g,c){return On(g,"POST","/v1/accounts:signInWithCustomToken",fn(g,c))})).apply(this,arguments)}function S(){return(S=(0,p.Z)(function*(g,c){const f=Mt(g),v=yield ar(f,{token:c,returnSecureToken:!0}),U=yield kr._fromIdTokenResponse(f,"signIn",v);return yield f._updateCurrentUser(U.user),U})).apply(this,arguments)}class b{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Z._fromServerResponse(c,f):F(c,"internal-error")}}class Z extends b{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Z(f)}}function ut(g,c,f){var v;Re((null===(v=f.url)||void 0===v?void 0:v.length)>0,g,"invalid-continue-uri"),Re(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Re(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(Re(f.android.packageName.length>0,g,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function mr(){return(mr=(0,p.Z)(function*(g,c,f){const v=(0,G.m9)(g),U={requestType:"PASSWORD_RESET",email:c};f&&ut(v,U,f),yield os(v,U)})).apply(this,arguments)}function O(){return(O=(0,p.Z)(function*(g,c,f){yield or((0,G.m9)(g),{oobCode:c,newPassword:f})})).apply(this,arguments)}function Q(){return(Q=(0,p.Z)(function*(g,c){yield Fi((0,G.m9)(g),{oobCode:c})})).apply(this,arguments)}function De(g,c){return rt.apply(this,arguments)}function rt(){return(rt=(0,p.Z)(function*(g,c){const f=(0,G.m9)(g),v=yield or(f,{oobCode:c}),U=v.requestType;switch(Re(U,f,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Re(v.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Re(v.mfaInfo,f,"internal-error");default:Re(v.email,f,"internal-error")}let J=null;return v.mfaInfo&&(J=b._fromServerResponse(Mt(f),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:J},operation:U}})).apply(this,arguments)}function rn(){return(rn=(0,p.Z)(function*(g,c){const{data:f}=yield De((0,G.m9)(g),c);return f.email})).apply(this,arguments)}function _n(){return(_n=(0,p.Z)(function*(g,c,f){const v=Mt(g),U=yield Cs(v,{returnSecureToken:!0,email:c,password:f}),J=yield kr._fromIdTokenResponse(v,"signIn",U);return yield v._updateCurrentUser(J.user),J})).apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(g,c,f){const v=(0,G.m9)(g),U={requestType:"EMAIL_SIGNIN",email:c};Re(f.handleCodeInApp,v,"argument-error"),f&&ut(v,U,f),yield lr(v,U)})).apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(g,c,f){const v=(0,G.m9)(g),U=ii.credentialWithLink(c,f||Ge());return Re(U._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Lt(v,U)})).apply(this,arguments)}function Wn(g,c){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,p.Z)(function*(g,c){return on(g,"POST","/v1/accounts:createAuthUri",fn(g,c))})).apply(this,arguments)}function Fr(){return(Fr=(0,p.Z)(function*(g,c){const v={identifier:c,continueUri:qe()?Ge():"http://localhost"},{signinMethods:U}=yield Wn((0,G.m9)(g),v);return U||[]})).apply(this,arguments)}function _s(){return(_s=(0,p.Z)(function*(g,c){const f=(0,G.m9)(g),U={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};c&&ut(f.auth,U,c);const{email:J}=yield Sr(f.auth,U);J!==g.email&&(yield g.reload())})).apply(this,arguments)}function no(){return(no=(0,p.Z)(function*(g,c,f){const v=(0,G.m9)(g),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:c};f&&ut(v.auth,J,f);const{email:He}=yield zi(v.auth,J);He!==g.email&&(yield g.reload())})).apply(this,arguments)}function Dr(g,c){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,p.Z)(function*(g,c){return on(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ea(){return(Ea=(0,p.Z)(function*(g,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const v=(0,G.m9)(g),J={idToken:yield v.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},He=yield nr(v,Dr(v.auth,J));v.displayName=He.displayName||null,v.photoURL=He.photoUrl||null;const lt=v.providerData.find(({providerId:zt})=>"password"===zt);lt&&(lt.displayName=v.displayName,lt.photoURL=v.photoURL),yield v._updateTokensIfNecessary(He)})).apply(this,arguments)}function Bo(g,c,f){return fo.apply(this,arguments)}function fo(){return(fo=(0,p.Z)(function*(g,c,f){const{auth:v}=g,J={idToken:yield g.getIdToken(),returnSecureToken:!0};c&&(J.email=c),f&&(J.password=f);const He=yield nr(g,mn(v,J));yield g._updateTokensIfNecessary(He,!0)})).apply(this,arguments)}class js{constructor(c,f,v={}){this.isNewUser=c,this.providerId=f,this.profile=v}}class wa extends js{constructor(c,f,v,U){super(c,f,v),this.username=U}}class ks extends js{constructor(c,f){super(c,"facebook.com",f)}}class ro extends wa{constructor(c,f){super(c,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class mu extends js{constructor(c,f){super(c,"google.com",f)}}class ea extends wa{constructor(c,f,v){super(c,"twitter.com",f,v)}}function Ci(g){const{user:c,_tokenResponse:f}=g;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Jo(g){var c,f;if(!g)return null;const{providerId:v}=g,U=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},J=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!v&&(null==g?void 0:g.idToken)){const He=null===(f=null===(c=Vt(g.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(He)return new js(J,"anonymous"!==He&&"custom"!==He?He:null)}if(!v)return null;switch(v){case"facebook.com":return new ks(J,U);case"github.com":return new ro(J,U);case"google.com":return new mu(J,U);case"twitter.com":return new ea(J,U,g.screenName||null);case"custom":case"anonymous":return new js(J,null);default:return new js(J,v,U)}}(f)}class Qi{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new Qi("enroll",c)}static _fromMfaPendingCredential(c){return new Qi("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,v;if(null==c?void 0:c.multiFactorSession){if(null===(f=c.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return Qi._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null===(v=c.multiFactorSession)||void 0===v?void 0:v.idToken)return Qi._fromIdtoken(c.multiFactorSession.idToken)}return null}}class $s{constructor(c,f,v){this.session=c,this.hints=f,this.signInResolver=v}static _fromError(c,f){const v=Mt(c),U=f.customData._serverResponse,J=(U.mfaInfo||[]).map(lt=>b._fromServerResponse(v,lt));Re(U.mfaPendingCredential,v,"internal-error");const He=Qi._fromMfaPendingCredential(U.mfaPendingCredential);return new $s(He,J,function(){var lt=(0,p.Z)(function*(zt){const dn=yield zt._process(v,He);delete U.mfaInfo,delete U.mfaPendingCredential;const Dn=Object.assign(Object.assign({},U),{idToken:dn.idToken,refreshToken:dn.refreshToken});switch(f.operationType){case"signIn":const sn=yield kr._fromIdTokenResponse(v,f.operationType,Dn);return yield v._updateCurrentUser(sn.user),sn;case"reauthenticate":return Re(f.user,v,"internal-error"),kr._forOperation(f.user,f.operationType,Dn);default:F(v,"internal-error")}});return function(zt){return lt.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function ui(g,c){return on(g,"POST","/v2/accounts/mfaEnrollment:start",fn(g,c))}class vs{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>b._fromServerResponse(c.auth,v)))})}static _fromUser(c){return new vs(c)}getSession(){var c=this;return(0,p.Z)(function*(){return Qi._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var v=this;return(0,p.Z)(function*(){const U=c,J=yield v.getSession(),He=yield nr(v.user,U._process(v.user.auth,J,f));return yield v.user._updateTokensIfNecessary(He),v.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){const v="string"==typeof c?c:c.uid,U=yield f.user.getIdToken(),J=yield nr(f.user,function Ha(g,c){return on(g,"POST","/v2/accounts/mfaEnrollment:withdraw",fn(g,c))}(f.user.auth,{idToken:U,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:He})=>He!==v),yield f.user._updateTokensIfNecessary(J);try{yield f.user.reload()}catch(He){if("auth/user-token-expired"!==He.code)throw He}})()}}const io=new WeakMap,Ts="__sak";class po{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Ts,"1"),this.storage.removeItem(Ts),Promise.resolve(!0)):Promise.resolve(!1)}catch(c){return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Lr=(()=>{class g extends po{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Hs(){const g=(0,G.z$)();return we(g)||vn(g)}()&&function fr(){try{return!(!window||window===window.top)}catch(g){return!1}}(),this.fallbackToPolling=zr(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const U=this.storage.getItem(v),J=this.localCache[v];U!==J&&f(v,J,U)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((lt,zt,dn)=>{this.notifyListeners(lt,dn)});const U=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const lt=this.storage.getItem(U);if(f.newValue!==lt)null!==f.newValue?this.storage.setItem(U,f.newValue):this.storage.removeItem(U);else if(this.localCache[U]===f.newValue&&!v)return}const J=()=>{const lt=this.storage.getItem(U);!v&&this.localCache[U]===lt||this.notifyListeners(U,lt)},He=this.storage.getItem(U);!function Wr(){return(0,G.w1)()&&10===document.documentMode}()||He===f.newValue||f.newValue===f.oldValue?J():setTimeout(J,10)}notifyListeners(f,v){this.localCache[f]=v;const U=this.listeners[f];if(U)for(const J of Array.from(U))J(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var U=()=>super._set,J=this;return(0,p.Z)(function*(){yield U().call(J,f,v),J.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,U=this;return(0,p.Z)(function*(){const J=yield v().call(U,f);return U.localCache[f]=JSON.stringify(J),J})()}_remove(f){var v=()=>super._remove,U=this;return(0,p.Z)(function*(){yield v().call(U,f),delete U.localCache[f]})()}}return g.type="LOCAL",g})(),Gs=(()=>{class g extends po{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return g.type="SESSION",g})();let jo=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const v=this.receivers.find(J=>J.isListeningto(f));if(v)return v;const U=new g(f);return this.receivers.push(U),U}isListeningto(f){return this.eventTarget===f}handleEvent(f){var v=this;return(0,p.Z)(function*(){const U=f,{eventId:J,eventType:He,data:lt}=U.data,zt=v.handlersMap[He];if(!(null==zt?void 0:zt.size))return;U.ports[0].postMessage({status:"ack",eventId:J,eventType:He});const dn=Array.from(zt).map(function(){var sn=(0,p.Z)(function*(Si){return Si(U.origin,lt)});return function(Si){return sn.apply(this,arguments)}}()),Dn=yield function go(g){return Promise.all(g.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(v){return{fulfilled:!1,reason:v}}});return function(f){return c.apply(this,arguments)}}()))}(dn);U.ports[0].postMessage({status:"done",eventId:J,eventType:He,response:Dn})})()}_subscribe(f,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(v)}_unsubscribe(f,v){this.handlersMap[f]&&v&&this.handlersMap[f].delete(v),(!v||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function $o(g="",c=10){let f="";for(let v=0;v<c;v++)f+=Math.floor(10*Math.random());return g+f}class Da{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,v=50){var U=this;return(0,p.Z)(function*(){const J="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let He,lt;return new Promise((zt,dn)=>{const Dn=$o("",20);J.port1.start();const sn=setTimeout(()=>{dn(new Error("unsupported_event"))},v);lt={messageChannel:J,onMessage(Si){const ho=Si;if(ho.data.eventId===Dn)switch(ho.data.status){case"ack":clearTimeout(sn),He=setTimeout(()=>{dn(new Error("timeout"))},3e3);break;case"done":clearTimeout(He),zt(ho.data.response);break;default:clearTimeout(sn),clearTimeout(He),dn(new Error("invalid_response"))}}},U.handlers.add(lt),J.port1.addEventListener("message",lt.onMessage),U.target.postMessage({eventType:c,eventId:Dn,data:f},[J.port2])}).finally(()=>{lt&&U.removeMessageHandler(lt)})})()}}function Br(){return window}function Fs(){return void 0!==Br().WorkerGlobalScope&&"function"==typeof Br().importScripts}function As(){return(As=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(g){return null}})).apply(this,arguments)}const I="firebaseLocalStorageDb",_="firebaseLocalStorage",M="fbase_key";class L{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function $(g,c){return g.transaction([_],c?"readwrite":"readonly").objectStore(_)}function Ce(){const g=indexedDB.open(I,1);return new Promise((c,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const v=g.result;try{v.createObjectStore(_,{keyPath:M})}catch(U){f(U)}}),g.addEventListener("success",(0,p.Z)(function*(){const v=g.result;v.objectStoreNames.contains(_)?c(v):(v.close(),yield function se(){const g=indexedDB.deleteDatabase(I);return new L(g).toPromise()}(),c(yield Ce()))}))})}function yt(g,c,f){return ft.apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(g,c,f){const v=$(g,!0).put({[M]:c,value:f});return new L(v).toPromise()})).apply(this,arguments)}function cn(){return(cn=(0,p.Z)(function*(g,c){const f=$(g,!1).get(c),v=yield new L(f).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Ct(g,c){const f=$(g,!0).delete(c);return new L(f).toPromise()}const Es=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield Ce()),f.db})()}_withRetries(f){var v=this;return(0,p.Z)(function*(){let U=0;for(;;)try{const J=yield v._openDb();return yield f(J)}catch(J){if(U++>3)throw J;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return Fs()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=jo._getInstance(function Eu(){return Fs()?self:null}()),f.receiver._subscribe("keyChanged",function(){var v=(0,p.Z)(function*(U,J){return{keyProcessed:(yield f._poll()).includes(J.key)}});return function(U,J){return v.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var v=(0,p.Z)(function*(U,J){return["keyChanged"]});return function(U,J){return v.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var v,U;if(f.activeServiceWorker=yield function ba(){return As.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Da(f.activeServiceWorker);const J=yield f.sender._send("ping",{},800);!J||(null===(v=J[0])||void 0===v?void 0:v.fulfilled)&&(null===(U=J[0])||void 0===U?void 0:U.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var v=this;return(0,p.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function tc(){var g;return(null===(g=null==navigator?void 0:navigator.serviceWorker)||void 0===g?void 0:g.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:f},v.serviceWorkerReceiverAvailable?800:50)}catch(U){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Ce();return yield yt(f,Ts,"1"),yield Ct(f,Ts),!0}catch(f){}return!1})()}_withPendingWrite(f){var v=this;return(0,p.Z)(function*(){v.pendingWrites++;try{yield f()}finally{v.pendingWrites--}})()}_set(f,v){var U=this;return(0,p.Z)(function*(){return U._withPendingWrite((0,p.Z)(function*(){return yield U._withRetries(J=>yt(J,f,v)),U.localCache[f]=v,U.notifyServiceWorker(f)}))})()}_get(f){var v=this;return(0,p.Z)(function*(){const U=yield v._withRetries(J=>function Ut(g,c){return cn.apply(this,arguments)}(J,f));return v.localCache[f]=U,U})()}_remove(f){var v=this;return(0,p.Z)(function*(){return v._withPendingWrite((0,p.Z)(function*(){return yield v._withRetries(U=>Ct(U,f)),delete v.localCache[f],v.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const v=yield f._withRetries(He=>{const lt=$(He,!1).getAll();return new L(lt).toPromise()});if(!v)return[];if(0!==f.pendingWrites)return[];const U=[],J=new Set;for(const{fbase_key:He,value:lt}of v)J.add(He),JSON.stringify(f.localCache[He])!==JSON.stringify(lt)&&(f.notifyListeners(He,lt),U.push(He));for(const He of Object.keys(f.localCache))f.localCache[He]&&!J.has(He)&&(f.notifyListeners(He,null),U.push(He));return U})()}notifyListeners(f,v){this.localCache[f]=v;const U=this.listeners[f];if(U)for(const J of Array.from(U))J(v)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function wu(g,c){return on(g,"POST","/v2/accounts/mfaSignIn:start",fn(g,c))}function yo(){return(yo=(0,p.Z)(function*(g){return(yield on(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ia(g){return new Promise((c,f)=>{const v=document.createElement("script");v.setAttribute("src",g),v.onload=c,v.onerror=U=>{const J=te("internal-error");J.customData=U,f(J)},v.type="text/javascript",v.charset="UTF-8",function nc(){var g,c;return null!==(c=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==c?c:document}().appendChild(v)})}function Du(g){return`__${g}${Math.floor(1e6*Math.random())}`}const so=1e12;class rc{constructor(c){this.auth=c,this.counter=so,this._widgets=new Map}render(c,f){const v=this.counter;return this._widgets.set(v,new Nn(c,this.auth.name,f||{})),this.counter++,v}reset(c){var f;const v=c||so;null===(f=this._widgets.get(v))||void 0===f||f.delete(),this._widgets.delete(v)}getResponse(c){var f;return(null===(f=this._widgets.get(c||so))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var v;return null===(v=f._widgets.get(c||so))||void 0===v||v.execute(),""})()}}class Nn{constructor(c,f,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof c?document.getElementById(c):c;Re(U,"argument-error",{appName:f}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oo(g){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<g;v++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const za=Du("rcb"),Pi=new Pt(3e4,6e4);class Yc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Br().grecaptcha}load(c,f=""){return Re(function Ka(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Br().grecaptcha):new Promise((v,U)=>{const J=Br().setTimeout(()=>{U(te(c,"network-request-failed"))},Pi.get());Br()[za]=()=>{Br().clearTimeout(J),delete Br()[za];const lt=Br().grecaptcha;if(!lt)return void U(te(c,"internal-error"));const zt=lt.render;lt.render=(dn,Dn)=>{const sn=zt(dn,Dn);return this.counter++,sn},this.hostLanguage=f,v(lt)},ia(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:za,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(J),U(te(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){return!!Br().grecaptcha&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Qc{load(c){return(0,p.Z)(function*(){return new rc(c)})()}clearedOneInstance(){}}const Ca="recaptcha",pr={theme:"light",type:"image"};class zd{constructor(c,f=Object.assign({},pr),v){this.parameters=f,this.type=Ca,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mt(v),this.isInvisible="invisible"===this.parameters.size,Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof c?document.getElementById(c):c;Re(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qc:new Yc,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),v=c.getAssertedRecaptcha();return v.getResponse(f)||new Promise(J=>{const He=lt=>{!lt||(c.tokenChangeListeners.delete(He),J(lt))};c.tokenChangeListeners.add(He),c.isInvisible&&v.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Re(!this.parameters.sitekey,this.auth,"argument-error"),Re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(v=>v(f)),"function"==typeof c)c(f);else if("string"==typeof c){const v=Br()[c];"function"==typeof v&&v(f)}}}assertNotDestroyed(){Re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const v=document.createElement("div");f.appendChild(v),f=v}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){Re(qe()&&!Fs(),c.auth,"internal-error"),yield function is(){let g=null;return new Promise(c=>{"complete"!==document.readyState?(g=()=>c(),window.addEventListener("load",g)):c()}).catch(c=>{throw g&&window.removeEventListener("load",g),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Iu(g){return yo.apply(this,arguments)}(c.auth);Re(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return Re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ws{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=Ii._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Jn(){return(Jn=(0,p.Z)(function*(g,c,f){const v=Mt(g),U=yield Ji(v,c,(0,G.m9)(f));return new Ws(U,J=>Lt(v,J))})).apply(this,arguments)}function Ls(){return(Ls=(0,p.Z)(function*(g,c,f){const v=(0,G.m9)(g);yield W(!1,v,"phone");const U=yield Ji(v.auth,c,(0,G.m9)(f));return new Ws(U,J=>$n(v,J))})).apply(this,arguments)}function Mo(){return(Mo=(0,p.Z)(function*(g,c,f){const v=(0,G.m9)(g),U=yield Ji(v.auth,c,(0,G.m9)(f));return new Ws(U,J=>Sn(v,J))})).apply(this,arguments)}function Ji(g,c,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,p.Z)(function*(g,c,f){var v;const U=yield f.verify();try{let J;if(Re("string"==typeof U,g,"argument-error"),Re(f.type===Ca,g,"argument-error"),J="string"==typeof c?{phoneNumber:c}:c,"session"in J){const He=J.session;if("phoneNumber"in J)return Re("enroll"===He.type,g,"internal-error"),(yield ui(g,{idToken:He.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{Re("signin"===He.type,g,"internal-error");const lt=(null===(v=J.multiFactorHint)||void 0===v?void 0:v.uid)||J.multiFactorUid;return Re(lt,g,"missing-multi-factor-info"),(yield wu(g,{mfaPendingCredential:He.credential,mfaEnrollmentId:lt,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:He}=yield Ne(g,{phoneNumber:J.phoneNumber,recaptchaToken:U});return He}}finally{f._reset()}})).apply(this,arguments)}function Ho(){return(Ho=(0,p.Z)(function*(g,c){yield cr((0,G.m9)(g),c)})).apply(this,arguments)}let Bi=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=Mt(f)}verifyPhoneNumber(f,v){return Ji(this.auth,f,(0,G.m9)(v))}static credential(f,v){return Ii._fromVerification(f,v)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:U}=f;return v&&U?Ii._fromTokenResponse(v,U):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function ds(g,c){return c?ce(c):(Re(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class xo extends Bn{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return rr(c,this._buildIdpRequest())}_linkToIdToken(c,f){return rr(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return rr(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function bu(g){return it(g.auth,new xo(g),g.bypassAuthState)}function Ht(g){const{auth:c,user:f}=g;return Re(f,c,"internal-error"),Y(f,new xo(g),g.bypassAuthState)}function cl(g){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,p.Z)(function*(g){const{auth:c,user:f}=g;return Re(f,c,"internal-error"),cr(f,new xo(g),g.bypassAuthState)})).apply(this,arguments)}class ji{constructor(c,f,v,U,J=!1){this.auth=c,this.resolver=v,this.user=U,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(v,U){c.pendingPromise={resolve:v,reject:U};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(J){c.reject(J)}});return function(v,U){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:v,sessionId:U,postBody:J,tenantId:He,error:lt,type:zt}=c;if(lt)return void f.reject(lt);const dn={auth:f.auth,requestUri:v,sessionId:U,tenantId:He||void 0,postBody:J||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(zt)(dn))}catch(Dn){f.reject(Dn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return bu;case"linkViaPopup":case"linkViaRedirect":return cl;case"reauthViaPopup":case"reauthViaRedirect":return Ht;default:F(this.auth,"internal-error")}}resolve(c){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ao=new Pt(2e3,1e4);function Ro(){return(Ro=(0,p.Z)(function*(g,c,f){const v=Mt(g);Ue(g,c,Di);const U=ds(v,f);return new uo(v,"signInViaPopup",c,U).executeNotNull()})).apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(g,c,f){const v=(0,G.m9)(g);Ue(v.auth,c,Di);const U=ds(v.auth,f);return new uo(v.auth,"reauthViaPopup",c,U,v).executeNotNull()})).apply(this,arguments)}function Po(){return(Po=(0,p.Z)(function*(g,c,f){const v=(0,G.m9)(g);Ue(v.auth,c,Di);const U=ds(v.auth,f);return new uo(v.auth,"linkViaPopup",c,U,v).executeNotNull()})).apply(this,arguments)}let uo=(()=>{class g extends ji{constructor(f,v,U,J,He){super(f,v,J,He),this.provider=U,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const v=yield f.execute();return Re(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,p.Z)(function*(){X(1===f.filter.length,"Popup operations only handle one event");const v=$o();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(U=>{f.reject(U)}),f.resolver._isIframeWebStorageSupported(f.auth,U=>{U||f.reject(te(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,U;this.pollId=(null===(U=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===U?void 0:U.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(te(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,ao.get())};f()}}return g.currentPopupAction=null,g})();const zs=new Map;class Tu extends ji{constructor(c,f,v=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let v=zs.get(f.auth._key());if(!v){try{const J=(yield function Aa(g,c){return oa.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;v=()=>Promise.resolve(J)}catch(U){v=()=>Promise.reject(U)}zs.set(f.auth._key(),v)}return f.bypassAuthState||zs.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,v=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(v,c);if("unknown"!==c.type){if(c.eventId){const U=yield v.auth._redirectUserForId(c.eventId);if(U)return v.user=U,f().call(v,c);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function oa(){return(oa=(0,p.Z)(function*(g,c){const f=P(c),v=A(g);if(!(yield v._isAvailable()))return!1;const U="true"===(yield v._get(f));return yield v._remove(f),U})).apply(this,arguments)}function Wo(g,c){return Za.apply(this,arguments)}function Za(){return(Za=(0,p.Z)(function*(g,c){return A(g)._set(P(c),"true")})).apply(this,arguments)}function A(g){return ce(g._redirectPersistence)}function P(g){return nt("pendingRedirect",g.config.apiKey,g.name)}function je(){return(je=(0,p.Z)(function*(g,c,f){const v=Mt(g);Ue(g,c,Di);const U=ds(v,f);return yield Wo(U,v),U._openRedirect(v,c,"signInViaRedirect")})).apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(g,c,f){const v=(0,G.m9)(g);Ue(v.auth,c,Di);const U=ds(v.auth,f);yield Wo(U,v.auth);const J=yield Ya(v);return U._openRedirect(v.auth,c,"reauthViaRedirect",J)})).apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(g,c,f){const v=(0,G.m9)(g);Ue(v.auth,c,Di);const U=ds(v.auth,f);yield W(!1,v,c.providerId),yield Wo(U,v.auth);const J=yield Ya(v);return U._openRedirect(v.auth,c,"linkViaRedirect",J)})).apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(g,c){return yield Mt(g)._initializationPromise,ki(g,c,!1)})).apply(this,arguments)}function ki(g,c){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,p.Z)(function*(g,c,f=!1){const v=Mt(g),U=ds(v,c),He=yield new Tu(v,U,f).execute();return He&&!f&&(delete He.user._redirectEventId,yield v._persistUserIfCurrent(He.user),yield v._setRedirectUser(null,c)),He})).apply(this,arguments)}function Ya(g){return hs.apply(this,arguments)}function hs(){return(hs=(0,p.Z)(function*(g){const c=$o(`${g.uid}:::`);return g._redirectEventId=c,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),c})).apply(this,arguments)}class Ks{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(c,v)&&(f=!0,this.sendToConsumer(c,v),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Xc(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fl(g);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var v;if(c.error&&!fl(c)){const U=(null===(v=c.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(te(this.auth,U))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const v=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&v}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vo(c))}saveEventToCache(c){this.cachedEventUids.add(vo(c)),this.lastProcessedEventTime=Date.now()}}function vo(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(c=>c).join("-")}function fl({type:g,error:c}){return"unknown"===g&&"auth/no-auth-event"===(null==c?void 0:c.code)}function pl(g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,p.Z)(function*(g,c={}){return on(g,"GET","/v1/projects",c)})).apply(this,arguments)}const qd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mf=/^https?/;function aa(){return(aa=(0,p.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:c}=yield pl(g);for(const f of c)try{if(gl(f))return}catch(v){}F(g,"unauthorized-domain")})).apply(this,arguments)}function gl(g){const c=Ge(),{protocol:f,hostname:v}=new URL(c);if(g.startsWith("chrome-extension://")){const He=new URL(g);return""===He.hostname&&""===v?"chrome-extension:"===f&&g.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&He.hostname===v}if(!Mf.test(f))return!1;if(qd.test(g))return v===g;const U=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(v)}const Rf=new Pt(3e4,6e4);function Of(){const g=Br().___jsl;if(null==g?void 0:g.H)for(const c of Object.keys(g.H))if(g.H[c].r=g.H[c].r||[],g.H[c].L=g.H[c].L||[],g.H[c].r=[...g.H[c].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let ko=null;function ml(g){return ko=ko||function Zd(g){return new Promise((c,f)=>{var v,U,J;function He(){Of(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Of(),f(te(g,"network-request-failed"))},timeout:Rf.get()})}if(null===(U=null===(v=Br().gapi)||void 0===v?void 0:v.iframes)||void 0===U?void 0:U.Iframe)c(gapi.iframes.getContext());else{if(!(null===(J=Br().gapi)||void 0===J?void 0:J.load)){const lt=Du("iframefcb");return Br()[lt]=()=>{gapi.load?He():f(te(g,"network-request-failed"))},ia(`https://apis.google.com/js/api.js?onload=${lt}`).catch(zt=>f(zt))}He()}}).catch(c=>{throw ko=null,c})}(g),ko}const Pf=new Pt(5e3,15e3),Eo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ic=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function No(g){const c=g.config;Re(c.authDomain,g,"auth-domain-config-required");const f=c.emulator?bt(c,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,v={apiKey:c.apiKey,appName:g.name,v:de.SDK_VERSION},U=ic.get(g.config.apiHost);U&&(v.eid=U);const J=g._getFrameworks();return J.length&&(v.fw=J.join(",")),`${f}?${(0,G.xO)(v).slice(1)}`}function Au(){return Au=(0,p.Z)(function*(g){const c=yield ml(g),f=Br().gapi;return Re(f,g,"internal-error"),c.open({where:document.body,url:No(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Eo,dontclear:!0},v=>new Promise(function(){var U=(0,p.Z)(function*(J,He){yield v.restyle({setHideOnLeave:!1});const lt=te(g,"network-request-failed"),zt=Br().setTimeout(()=>{He(lt)},Pf.get());function dn(){Br().clearTimeout(zt),J(v)}v.ping(dn).then(dn,()=>{He(lt)})});return function(J,He){return U.apply(this,arguments)}}()))}),Au.apply(this,arguments)}const Xd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oc{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(c){}}}function ac(g,c,f,v,U,J){Re(g.config.authDomain,g,"auth-domain-config-required"),Re(g.config.apiKey,g,"invalid-api-key");const He={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:v,v:de.SDK_VERSION,eventId:U};if(c instanceof Di){c.setDefaultLanguage(g.languageCode),He.providerId=c.providerId||"",(0,G.xb)(c.getCustomParameters())||(He.customParameters=JSON.stringify(c.getCustomParameters()));for(const[zt,dn]of Object.entries(J||{}))He[zt]=dn}if(c instanceof Er){const zt=c.getScopes().filter(dn=>""!==dn);zt.length>0&&(He.scopes=zt.join(","))}g.tenantId&&(He.tid=g.tenantId);const lt=He;for(const zt of Object.keys(lt))void 0===lt[zt]&&delete lt[zt];return`${function eh({config:g}){return g.emulator?bt(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,G.xO)(lt).slice(1)}`}const Lo="webStorageSupport";class Mu extends class th{constructor(c){this.factorId=c}_process(c,f,v){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,v);case"signin":return this._finalizeSignIn(c,f.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Mu(c)}_finalizeEnroll(c,f,v){return function na(g,c){return on(g,"POST","/v2/accounts/mfaEnrollment:finalize",fn(g,c))}(c,{idToken:f,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function mo(g,c){return on(g,"POST","/v2/accounts/mfaSignIn:finalize",fn(g,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kf=(()=>{class g{constructor(){}static assertion(f){return Mu._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var nh="@firebase/auth",td="0.19.12";class Ja{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(v=>{var U;c((null===(U=v)||void 0===U?void 0:U.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ma(){return window}function xa(){return(xa=(0,p.Z)(function*(g,c,f){var v;const{BuildInfo:U}=Ma();X(c.sessionId,"AuthEvent did not contain a session ID");const J=yield xg(c.sessionId),He={};return vn()?He.ibi=U.packageName:at()?He.apn=U.packageName:F(g,"operation-not-supported-in-this-environment"),U.displayName&&(He.appDisplayName=U.displayName),He.sessionId=J,ac(g,f,c.type,void 0,null!==(v=c.eventId)&&void 0!==v?v:void 0,He)})).apply(this,arguments)}function wo(){return(wo=(0,p.Z)(function*(g){const{BuildInfo:c}=Ma(),f={};vn()?f.iosBundleId=c.packageName:at()?f.androidPackageName=c.packageName:F(g,"operation-not-supported-in-this-environment"),yield pl(g,f)})).apply(this,arguments)}function tu(){return(tu=(0,p.Z)(function*(g,c,f){const{cordova:v}=Ma();let U=()=>{};try{yield new Promise((J,He)=>{let lt=null;function zt(){var sn;J();const Si=null===(sn=v.plugins.browsertab)||void 0===sn?void 0:sn.close;"function"==typeof Si&&Si(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function dn(){lt||(lt=window.setTimeout(()=>{He(te(g,"redirect-cancelled-by-user"))},2e3))}function Dn(){"visible"===(null==document?void 0:document.visibilityState)&&dn()}c.addPassiveListener(zt),document.addEventListener("resume",dn,!1),at()&&document.addEventListener("visibilitychange",Dn,!1),U=()=>{c.removePassiveListener(zt),document.removeEventListener("resume",dn,!1),document.removeEventListener("visibilitychange",Dn,!1),lt&&window.clearTimeout(lt)}})}finally{U()}})).apply(this,arguments)}function xg(g){return lc.apply(this,arguments)}function lc(){return(lc=(0,p.Z)(function*(g){const c=Rg(g),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(U=>U.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Rg(g){if(X(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(g);const c=new ArrayBuffer(g.length),f=new Uint8Array(c);for(let v=0;v<g.length;v++)f[v]=g.charCodeAt(v);return f}!function rh(g){(0,de._registerComponent)(new Ee.wA("auth",(c,{options:f})=>{const v=c.getProvider("app").getImmediate(),U=c.getProvider("heartbeat"),{apiKey:J,authDomain:He}=v.options;return((lt,zt)=>{Re(J&&!J.includes(":"),"invalid-api-key",{appName:lt.name}),Re(!(null==He?void 0:He.includes(":")),"argument-error",{appName:lt.name});const dn={apiKey:J,authDomain:He,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qr(g)},Dn=new Kr(lt,zt,dn);return function he(g,c){const f=(null==c?void 0:c.persistence)||[],v=(Array.isArray(f)?f:[f]).map(ce);(null==c?void 0:c.errorMap)&&g._updateErrorMap(c.errorMap),g._initializeWithPersistence(v,null==c?void 0:c.popupRedirectResolver)}(Dn,f),Dn})(v,U)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,v)=>{c.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new Ee.wA("auth-internal",c=>{const f=Mt(c.getProvider("auth").getImmediate());return new Ja(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(nh,td,function eu(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,de.registerVersion)(nh,td,"esm2017")}("Browser");class dc extends Ks{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function sh(g){return wl.apply(this,arguments)}function wl(){return(wl=(0,p.Z)(function*(g){const c=yield Dl()._get(nd(g));return c&&(yield Dl()._remove(nd(g))),c})).apply(this,arguments)}function Il(){const g=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const v=Math.floor(Math.random()*c.length);g.push(c.charAt(v))}return g.join("")}function Dl(){return ce(Lr)}function nd(g){return nt("authEvent",g.config.apiKey,g.name)}function Pu(g){if(!(null==g?void 0:g.includes("?")))return{};const[c,...f]=g.split("?");return(0,G.zd)(f.join("?"))}function bl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:te("no-auth-event")}}function fc(){var g;return(null===(g=null==self?void 0:self.location)||void 0===g?void 0:g.protocol)||null}function ah(g=(0,G.z$)()){return!("file:"!==fc()&&"ionic:"!==fc()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vn(){try{const g=self.localStorage,c=$o();if(g)return g.setItem(c,"1"),g.removeItem(c),!function Cl(g=(0,G.z$)()){return function pc(){return(0,G.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Og(g=(0,G.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,G.hl)()}catch(g){return Tl()&&(0,G.hl)()}return!1}function Tl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ru(){return(function Io(){return"http:"===fc()||"https:"===fc()}()||(0,G.ru)()||ah())&&!function id(){return(0,G.b$)()||(0,G.UG)()}()&&Vn()&&!Tl()}function iu(){return ah()&&"undefined"!=typeof document}function zo(){return(zo=(0,p.Z)(function*(){return!!iu()&&new Promise(g=>{const c=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),g(!0)})})})).apply(this,arguments)}const qs={LOCAL:"local",NONE:"none",SESSION:"session"},Nu=Re,sd="persistence";function Al(g){return od.apply(this,arguments)}function od(){return(od=(0,p.Z)(function*(g){yield g._initializationPromise;const c=ch(),f=nt(sd,g.config.apiKey,g.name);c&&c.setItem(f,g._getPersistence())})).apply(this,arguments)}function ch(){var g;try{return(null===(g=function gc(){return"undefined"!=typeof window?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch(c){return null}}const Sl=Re;class Vo{constructor(){this.browserResolver=ce(class Xa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gs,this._completeRedirectFn=ki}_openPopup(c,f,v,U){var J=this;return(0,p.Z)(function*(){var He;X(null===(He=J.eventManagers[c._key()])||void 0===He?void 0:He.manager,"_initialize() not called before _openPopup()");const lt=ac(c,f,v,Ge(),U);return function Fo(g,c,f,v=500,U=600){const J=Math.max((window.screen.availHeight-U)/2,0).toString(),He=Math.max((window.screen.availWidth-v)/2,0).toString();let lt="";const zt=Object.assign(Object.assign({},Xd),{width:v.toString(),height:U.toString(),top:J,left:He}),dn=(0,G.z$)().toLowerCase();f&&(lt=ae(dn)?"_blank":f),xe(dn)&&(c=c||"http://localhost",zt.scrollbars="yes");const Dn=Object.entries(zt).reduce((Si,[ho,Zs])=>`${Si}${ho}=${Zs},`,"");if(function $r(g=(0,G.z$)()){var c;return vn(g)&&!!(null===(c=window.navigator)||void 0===c?void 0:c.standalone)}(dn)&&"_self"!==lt)return function Jd(g,c){const f=document.createElement("a");f.href=g,f.target=c;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(c||"",lt),new oc(null);const sn=window.open(c||"",lt,Dn);Re(sn,g,"popup-blocked");try{sn.focus()}catch(Si){}return new oc(sn)}(c,lt,$o())})()}_openRedirect(c,f,v,U){var J=this;return(0,p.Z)(function*(){return yield J._originValidation(c),function Wa(g){Br().location.href=g}(ac(c,f,v,Ge(),U)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:U,promise:J}=this.eventManagers[f];return U?Promise.resolve(U):(X(J,"If manager is not set, promise should be"),J)}const v=this.initAndGetManager(c);return this.eventManagers[f]={promise:v},v.catch(()=>{delete this.eventManagers[f]}),v}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const v=yield function sc(g){return Au.apply(this,arguments)}(c),U=new Ks(c);return v.register("authEvent",J=>(Re(null==J?void 0:J.authEvent,c,"invalid-auth-event"),{status:U.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:U},f.iframes[c._key()]=v,U})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(Lo,{type:Lo},U=>{var J;const He=null===(J=null==U?void 0:U[0])||void 0===J?void 0:J[Lo];void 0!==He&&f(!!He),F(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function xf(g){return aa.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return zr()||we()||vn()}}),this.cordovaResolver=ce(class Ra{constructor(){this._redirectPersistence=Gs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ki}_initialize(c){var f=this;return(0,p.Z)(function*(){const v=c._key();let U=f.eventManagers.get(v);return U||(U=new dc(c),f.eventManagers.set(v,U),f.attachCallbackListeners(c,U)),U})()}_openPopup(c){F(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,v,U){var J=this;return(0,p.Z)(function*(){!function El(g){var c,f,v,U,J,He,lt,zt,dn,Dn;const sn=Ma();Re("function"==typeof(null===(c=null==sn?void 0:sn.universalLinks)||void 0===c?void 0:c.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Re(void 0!==(null===(f=null==sn?void 0:sn.BuildInfo)||void 0===f?void 0:f.packageName),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Re("function"==typeof(null===(J=null===(U=null===(v=null==sn?void 0:sn.cordova)||void 0===v?void 0:v.plugins)||void 0===U?void 0:U.browsertab)||void 0===J?void 0:J.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(zt=null===(lt=null===(He=null==sn?void 0:sn.cordova)||void 0===He?void 0:He.plugins)||void 0===lt?void 0:lt.browsertab)||void 0===zt?void 0:zt.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(Dn=null===(dn=null==sn?void 0:sn.cordova)||void 0===dn?void 0:dn.InAppBrowser)||void 0===Dn?void 0:Dn.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const He=yield J._initialize(c);yield He.initialized(),He.resetRedirect(),function hl(){zs.clear()}(),yield J._originValidation(c);const lt=function nu(g,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:Il(),postBody:null,tenantId:g.tenantId,error:te(g,"no-auth-event")}}(c,v,U);yield function Ou(g,c){return Dl()._set(nd(g),c)}(c,lt);const zt=yield function ih(g,c,f){return xa.apply(this,arguments)}(c,lt,f),dn=yield function vl(g){const{cordova:c}=Ma();return new Promise(f=>{c.plugins.browsertab.isAvailable(v=>{let U=null;v?c.plugins.browsertab.openUrl(g):U=c.InAppBrowser.open(g,function Rn(g=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(U)})})}(zt);return function $i(g,c,f){return tu.apply(this,arguments)}(c,He,dn)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Ru(g){return wo.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:v,handleOpenURL:U,BuildInfo:J}=Ma(),He=setTimeout((0,p.Z)(function*(){yield sh(c),f.onEvent(bl())}),500),lt=function(){var Dn=(0,p.Z)(function*(sn){clearTimeout(He);const Si=yield sh(c);let ho=null;Si&&(null==sn?void 0:sn.url)&&(ho=function oh(g,c){var f,v;const U=function hr(g){const c=Pu(g),f=c.link?decodeURIComponent(c.link):void 0,v=Pu(f).link,U=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Pu(U).link||U||v||f||g}(c);if(U.includes("/__/auth/callback")){const J=Pu(U),He=J.firebaseError?function Hi(g){try{return JSON.parse(g)}catch(c){return null}}(decodeURIComponent(J.firebaseError)):null,lt=null===(v=null===(f=null==He?void 0:He.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],zt=lt?te(lt):null;return zt?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:zt,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:U,postBody:null}}return null}(Si,sn.url)),f.onEvent(ho||bl())});return function(Si){return Dn.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,lt);const zt=U,dn=`${J.packageName.toLowerCase()}://`;Ma().handleOpenURL=function(){var Dn=(0,p.Z)(function*(sn){if(sn.toLowerCase().startsWith(dn)&&lt({url:sn}),"function"==typeof zt)try{zt(sn)}catch(Si){console.error(Si)}});return function(sn){return Dn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Gs,this._completeRedirectFn=ki}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,v,U){var J=this;return(0,p.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openPopup(c,f,v,U)})()}_openRedirect(c,f,v,U){var J=this;return(0,p.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openRedirect(c,f,v,U)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return iu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function es(){return zo.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function dh(g){return g.unwrap()}function Ml(g){return Fu(g)}function Fu(g){const{_tokenResponse:c}=g instanceof G.ZR?g.customData:g;if(!c)return null;if(!(g instanceof G.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Bi.credentialFromResult(g);const f=c.providerId;if(!f||"password"===f)return null;let v;switch(f){case"google.com":v=ls;break;case"facebook.com":v=us;break;case"github.com":v=to;break;case"twitter.com":v=qi;break;default:const{oauthIdToken:U,oauthAccessToken:J,oauthTokenSecret:He,pendingToken:lt,nonce:zt}=c;return J||He||U||lt?lt?f.startsWith("saml.")?bi._create(f,lt):Fe._fromParams({providerId:f,signInMethod:f,pendingToken:lt,idToken:U,accessToken:J}):new as(f).credential({idToken:U,accessToken:J,rawNonce:zt}):null}return g instanceof G.ZR?v.credentialFromError(g):v.credentialFromResult(g)}function li(g,c){return c.catch(f=>{throw f instanceof G.ZR&&function hh(g,c){var f;const v=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===c.code)c.resolver=new Rl(g,function Ns(g,c){var f;const v=(0,G.m9)(g),U=c;return Re(c.customData.operationType,v,"argument-error"),Re(null===(f=U.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),$s._fromError(v,U)}(g,c));else if(v){const U=Fu(c),J=c;U&&(J.credential=U,J.tenantId=v.tenantId||void 0,J.email=v.email||void 0,J.phoneNumber=v.phoneNumber||void 0)}}(g,f),f}).then(f=>{const U=f.user;return{operationType:f.operationType,credential:Ml(f),additionalUserInfo:Ci(f),user:Ko.getOrCreate(U)}})}function xl(g,c){return mc.apply(this,arguments)}function mc(){return(mc=(0,p.Z)(function*(g,c){const f=yield c;return{verificationId:f.verificationId,confirm:v=>li(g,f.confirm(v))}})).apply(this,arguments)}class Rl{constructor(c,f){this.resolver=f,this.auth=function fs(g){return g.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return li(dh(this.auth),this.resolver.resolveSignIn(c))}}class Ko{constructor(c){this._delegate=c,this.multiFactor=function ra(g){const c=(0,G.m9)(g);return io.has(c)||io.set(c,vs._fromUser(c)),io.get(c)}(c)}static getOrCreate(c){return Ko.USER_MAP.has(c)||Ko.USER_MAP.set(c,new Ko(c)),Ko.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return li(f.auth,$n(f._delegate,c))})()}linkWithPhoneNumber(c,f){var v=this;return(0,p.Z)(function*(){return xl(v.auth,function ll(g,c,f){return Ls.apply(this,arguments)}(v._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return li(f.auth,function dl(g,c,f){return Po.apply(this,arguments)}(f._delegate,c,Vo))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Al(Mt(f.auth)),function un(g,c,f){return function In(g,c,f){return dr.apply(this,arguments)}(g,c,f)}(f._delegate,c,Vo)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return li(f.auth,Sn(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return xl(this.auth,function Ai(g,c,f){return Mo.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return li(this.auth,function Go(g,c,f){return Oo.apply(this,arguments)}(this._delegate,c,Vo))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Al(Mt(f.auth)),function tt(g,c,f){return function Ft(g,c,f){return Xt.apply(this,arguments)}(g,c,f)}(f._delegate,c,Vo)})()}sendEmailVerification(c){return function yr(g,c){return _s.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function mi(g,c){return Zi.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function ja(g,c){return Bo((0,G.m9)(g),c,null)}(this._delegate,c)}updatePassword(c){return function $a(g,c){return Bo((0,G.m9)(g),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Ta(g,c){return Ho.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Xo(g,c){return Ea.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Yi(g,c,f){return no.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ko.USER_MAP=new WeakMap;const Lu=Re;let yc=(()=>{class g{constructor(f,v){if(this.app=f,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:U}=f.options;Lu(U,"invalid-api-key",{appName:f.name}),Lu(U,"invalid-api-key",{appName:f.name});const J="undefined"!=typeof window?Vo:void 0;this._delegate=v.initialize({options:{persistence:Nf(U,f.name),popupRedirectResolver:J}}),this._delegate._updateErrorMap(Ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ko.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,v){!function yn(g,c,f){const v=Mt(g);Re(v._canInitEmulator,v,"emulator-config-failed"),Re(/^https?:\/\//.test(c),v,"invalid-emulator-scheme");const U=!!(null==f?void 0:f.disableWarnings),J=wr(c),{host:He,port:lt}=function hi(g){const c=wr(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(c.length));if(!f)return{host:"",port:null};const v=f[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(v);if(U){const J=U[1];return{host:J,port:Tr(v.substr(J.length+1))}}{const[J,He]=v.split(":");return{host:J,port:Tr(He)}}}(c);v.config.emulator={url:`${J}//${He}${null===lt?"":`:${lt}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:He,port:lt,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:U})}),U||function ni(){function g(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,v)}applyActionCode(f){return function ee(g,c){return Q.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return De(this._delegate,f)}confirmPasswordReset(f,v){return function V(g,c,f){return O.apply(this,arguments)}(this._delegate,f,v)}createUserWithEmailAndPassword(f,v){var U=this;return(0,p.Z)(function*(){return li(U._delegate,function Wt(g,c,f){return _n.apply(this,arguments)}(U._delegate,f,v))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Ui(g,c){return Fr.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function oi(g,c){const f=Vi.parseLink(c);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Lu(ru(),f._delegate,"operation-not-supported-in-this-environment");const v=yield function Fn(g,c){return Yr.apply(this,arguments)}(f._delegate,Vo);return v?li(f._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function ws(g,c){Mt(g)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,v,U){const{next:J,error:He,complete:lt}=fh(f,v,U);return this._delegate.onAuthStateChanged(J,He,lt)}onIdTokenChanged(f,v,U){const{next:J,error:He,complete:lt}=fh(f,v,U);return this._delegate.onIdTokenChanged(J,He,lt)}sendSignInLinkToEmail(f,v){return function Vr(g,c,f){return Mr.apply(this,arguments)}(this._delegate,f,v)}sendPasswordResetEmail(f,v){return function en(g,c,f){return mr.apply(this,arguments)}(this._delegate,f,v||void 0)}setPersistence(f){var v=this;return(0,p.Z)(function*(){let U;switch(function uh(g,c){Nu(Object.values(qs).includes(c),g,"invalid-persistence-type"),(0,G.b$)()?Nu(c!==qs.SESSION,g,"unsupported-persistence-type"):(0,G.UG)()?Nu(c===qs.NONE,g,"unsupported-persistence-type"):Tl()?Nu(c===qs.NONE||c===qs.LOCAL&&(0,G.hl)(),g,"unsupported-persistence-type"):Nu(c===qs.NONE||Vn(),g,"unsupported-persistence-type")}(v._delegate,f),f){case qs.SESSION:U=Gs;break;case qs.LOCAL:U=(yield ce(Es)._isAvailable())?Es:Lr;break;case qs.NONE:U=Ae;break;default:return F("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(U)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return li(this._delegate,function Rs(g){return Os.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return li(this._delegate,Lt(this._delegate,f))}signInWithCustomToken(f){return li(this._delegate,function k(g,c){return S.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,v){return li(this._delegate,function qn(g,c,f){return Lt((0,G.m9)(g),ii.credential(c,f))}(this._delegate,f,v))}signInWithEmailLink(f,v){return li(this._delegate,function Hr(g,c,f){return yi.apply(this,arguments)}(this._delegate,f,v))}signInWithPhoneNumber(f,v){return xl(this._delegate,function Kd(g,c,f){return Jn.apply(this,arguments)}(this._delegate,f,v))}signInWithPopup(f){var v=this;return(0,p.Z)(function*(){return Lu(ru(),v._delegate,"operation-not-supported-in-this-environment"),li(v._delegate,function _o(g,c,f){return Ro.apply(this,arguments)}(v._delegate,f,Vo))})()}signInWithRedirect(f){var v=this;return(0,p.Z)(function*(){return Lu(ru(),v._delegate,"operation-not-supported-in-this-environment"),yield Al(v._delegate),function q(g,c,f){return function ye(g,c,f){return je.apply(this,arguments)}(g,c,f)}(v._delegate,f,Vo)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function wt(g,c){return rn.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=qs,g})();function fh(g,c,f){let v=g;"function"!=typeof g&&({next:v,error:c,complete:f}=g);const U=v;return{next:He=>U(He&&Ko.getOrCreate(He)),error:c,complete:f}}function Nf(g,c){const f=function lh(g,c){const f=ch();if(!f)return[];const v=nt(sd,g,c);switch(f.getItem(v)){case qs.NONE:return[Ae];case qs.LOCAL:return[Es,Gs];case qs.SESSION:return[Gs];default:return[]}}(g,c);if("undefined"!=typeof self&&!f.includes(Es)&&f.push(Es),"undefined"!=typeof window)for(const v of[Lr,Gs])f.includes(v)||f.push(v);return f.includes(Ae)||f.push(Ae),f}class su{constructor(){this.providerId="phone",this._delegate=new Bi(dh(N.Z.auth()))}static credential(c,f){return Bi.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}su.PHONE_SIGN_IN_METHOD=Bi.PHONE_SIGN_IN_METHOD,su.PROVIDER_ID=Bi.PROVIDER_ID;const ad=Re;class Ff{constructor(c,f,v=N.Z.app()){var U;ad(null===(U=v.options)||void 0===U?void 0:U.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new zd(c,f,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function gh(g){g.INTERNAL.registerComponent(new Ee.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),v=c.getProvider("auth");return new yc(f,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ii,FacebookAuthProvider:us,GithubAuthProvider:to,GoogleAuthProvider:ls,OAuthProvider:as,SAMLAuthProvider:Jr,PhoneAuthProvider:su,PhoneMultiFactorGenerator:kf,RecaptchaVerifier:Ff,TwitterAuthProvider:qi,Auth:yc,AuthCredential:Bn,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.12")}(N.Z)},7854:pt=>{var Se=function(T){"use strict";var G,p=Object.prototype,N=p.hasOwnProperty,de="function"==typeof Symbol?Symbol:{},ie=de.iterator||"@@iterator",me=de.asyncIterator||"@@asyncIterator",Ee=de.toStringTag||"@@toStringTag";function ue(he,Ge,qe){return Object.defineProperty(he,Ge,{value:qe,enumerable:!0,configurable:!0,writable:!0}),he[Ge]}try{ue({},"")}catch(he){ue=function(Ge,qe,ht){return Ge[qe]=ht}}function Ie(he,Ge,qe,ht){var vt=Object.create((Ge&&Ge.prototype instanceof Et?Ge:Et).prototype),Pt=new Pe(ht||[]);return vt._invoke=function Le(he,Ge,qe){var ht=re;return function(vt,Pt){if(ht===$e)throw new Error("Generator is already running");if(ht===We){if("throw"===vt)throw Pt;return et()}for(qe.method=vt,qe.arg=Pt;;){var bt=qe.delegate;if(bt){var Tt=Re(bt,qe);if(Tt){if(Tt===Ke)continue;return Tt}}if("next"===qe.method)qe.sent=qe._sent=qe.arg;else if("throw"===qe.method){if(ht===re)throw ht=We,qe.arg;qe.dispatchException(qe.arg)}else"return"===qe.method&&qe.abrupt("return",qe.arg);ht=$e;var dt=le(he,Ge,qe);if("normal"===dt.type){if(ht=qe.done?We:_e,dt.arg===Ke)continue;return{value:dt.arg,done:qe.done}}"throw"===dt.type&&(ht=We,qe.method="throw",qe.arg=dt.arg)}}}(he,qe,Pt),vt}function le(he,Ge,qe){try{return{type:"normal",arg:he.call(Ge,qe)}}catch(ht){return{type:"throw",arg:ht}}}T.wrap=Ie;var re="suspendedStart",_e="suspendedYield",$e="executing",We="completed",Ke={};function Et(){}function Ve(){}function Te(){}var ct={};ue(ct,ie,function(){return this});var H=Object.getPrototypeOf,F=H&&H(H(ce([])));F&&F!==p&&N.call(F,ie)&&(ct=F);var te=Te.prototype=Et.prototype=Object.create(ct);function pe(he){["next","throw","return"].forEach(function(Ge){ue(he,Ge,function(qe){return this._invoke(Ge,qe)})})}function Ue(he,Ge){function qe(vt,Pt,bt,Tt){var dt=le(he[vt],he,Pt);if("throw"!==dt.type){var hn=dt.arg,fn=hn.value;return fn&&"object"==typeof fn&&N.call(fn,"__await")?Ge.resolve(fn.__await).then(function(on){qe("next",on,bt,Tt)},function(on){qe("throw",on,bt,Tt)}):Ge.resolve(fn).then(function(on){hn.value=on,bt(hn)},function(on){return qe("throw",on,bt,Tt)})}Tt(dt.arg)}var ht;this._invoke=function Qe(vt,Pt){function bt(){return new Ge(function(Tt,dt){qe(vt,Pt,Tt,dt)})}return ht=ht?ht.then(bt,bt):bt()}}function Re(he,Ge){var qe=he.iterator[Ge.method];if(qe===G){if(Ge.delegate=null,"throw"===Ge.method){if(he.iterator.return&&(Ge.method="return",Ge.arg=G,Re(he,Ge),"throw"===Ge.method))return Ke;Ge.method="throw",Ge.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ke}var ht=le(qe,he.iterator,Ge.arg);if("throw"===ht.type)return Ge.method="throw",Ge.arg=ht.arg,Ge.delegate=null,Ke;var Qe=ht.arg;return Qe?Qe.done?(Ge[he.resultName]=Qe.value,Ge.next=he.nextLoc,"return"!==Ge.method&&(Ge.method="next",Ge.arg=G),Ge.delegate=null,Ke):Qe:(Ge.method="throw",Ge.arg=new TypeError("iterator result is not an object"),Ge.delegate=null,Ke)}function ve(he){var Ge={tryLoc:he[0]};1 in he&&(Ge.catchLoc=he[1]),2 in he&&(Ge.finallyLoc=he[2],Ge.afterLoc=he[3]),this.tryEntries.push(Ge)}function X(he){var Ge=he.completion||{};Ge.type="normal",delete Ge.arg,he.completion=Ge}function Pe(he){this.tryEntries=[{tryLoc:"root"}],he.forEach(ve,this),this.reset(!0)}function ce(he){if(he){var Ge=he[ie];if(Ge)return Ge.call(he);if("function"==typeof he.next)return he;if(!isNaN(he.length)){var qe=-1,ht=function Qe(){for(;++qe<he.length;)if(N.call(he,qe))return Qe.value=he[qe],Qe.done=!1,Qe;return Qe.value=G,Qe.done=!0,Qe};return ht.next=ht}}return{next:et}}function et(){return{value:G,done:!0}}return Ve.prototype=Te,ue(te,"constructor",Te),ue(Te,"constructor",Ve),Ve.displayName=ue(Te,Ee,"GeneratorFunction"),T.isGeneratorFunction=function(he){var Ge="function"==typeof he&&he.constructor;return!!Ge&&(Ge===Ve||"GeneratorFunction"===(Ge.displayName||Ge.name))},T.mark=function(he){return Object.setPrototypeOf?Object.setPrototypeOf(he,Te):(he.__proto__=Te,ue(he,Ee,"GeneratorFunction")),he.prototype=Object.create(te),he},T.awrap=function(he){return{__await:he}},pe(Ue.prototype),ue(Ue.prototype,me,function(){return this}),T.AsyncIterator=Ue,T.async=function(he,Ge,qe,ht,Qe){void 0===Qe&&(Qe=Promise);var vt=new Ue(Ie(he,Ge,qe,ht),Qe);return T.isGeneratorFunction(Ge)?vt:vt.next().then(function(Pt){return Pt.done?Pt.value:vt.next()})},pe(te),ue(te,Ee,"Generator"),ue(te,ie,function(){return this}),ue(te,"toString",function(){return"[object Generator]"}),T.keys=function(he){var Ge=[];for(var qe in he)Ge.push(qe);return Ge.reverse(),function ht(){for(;Ge.length;){var Qe=Ge.pop();if(Qe in he)return ht.value=Qe,ht.done=!1,ht}return ht.done=!0,ht}},T.values=ce,Pe.prototype={constructor:Pe,reset:function(he){if(this.prev=0,this.next=0,this.sent=this._sent=G,this.done=!1,this.delegate=null,this.method="next",this.arg=G,this.tryEntries.forEach(X),!he)for(var Ge in this)"t"===Ge.charAt(0)&&N.call(this,Ge)&&!isNaN(+Ge.slice(1))&&(this[Ge]=G)},stop:function(){this.done=!0;var Ge=this.tryEntries[0].completion;if("throw"===Ge.type)throw Ge.arg;return this.rval},dispatchException:function(he){if(this.done)throw he;var Ge=this;function qe(Tt,dt){return vt.type="throw",vt.arg=he,Ge.next=Tt,dt&&(Ge.method="next",Ge.arg=G),!!dt}for(var ht=this.tryEntries.length-1;ht>=0;--ht){var Qe=this.tryEntries[ht],vt=Qe.completion;if("root"===Qe.tryLoc)return qe("end");if(Qe.tryLoc<=this.prev){var Pt=N.call(Qe,"catchLoc"),bt=N.call(Qe,"finallyLoc");if(Pt&&bt){if(this.prev<Qe.catchLoc)return qe(Qe.catchLoc,!0);if(this.prev<Qe.finallyLoc)return qe(Qe.finallyLoc)}else if(Pt){if(this.prev<Qe.catchLoc)return qe(Qe.catchLoc,!0)}else{if(!bt)throw new Error("try statement without catch or finally");if(this.prev<Qe.finallyLoc)return qe(Qe.finallyLoc)}}}},abrupt:function(he,Ge){for(var qe=this.tryEntries.length-1;qe>=0;--qe){var ht=this.tryEntries[qe];if(ht.tryLoc<=this.prev&&N.call(ht,"finallyLoc")&&this.prev<ht.finallyLoc){var Qe=ht;break}}Qe&&("break"===he||"continue"===he)&&Qe.tryLoc<=Ge&&Ge<=Qe.finallyLoc&&(Qe=null);var vt=Qe?Qe.completion:{};return vt.type=he,vt.arg=Ge,Qe?(this.method="next",this.next=Qe.finallyLoc,Ke):this.complete(vt)},complete:function(he,Ge){if("throw"===he.type)throw he.arg;return"break"===he.type||"continue"===he.type?this.next=he.arg:"return"===he.type?(this.rval=this.arg=he.arg,this.method="return",this.next="end"):"normal"===he.type&&Ge&&(this.next=Ge),Ke},finish:function(he){for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var qe=this.tryEntries[Ge];if(qe.finallyLoc===he)return this.complete(qe.completion,qe.afterLoc),X(qe),Ke}},catch:function(he){for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var qe=this.tryEntries[Ge];if(qe.tryLoc===he){var ht=qe.completion;if("throw"===ht.type){var Qe=ht.arg;X(qe)}return Qe}}throw new Error("illegal catch attempt")},delegateYield:function(he,Ge,qe){return this.delegate={iterator:ce(he),resultName:Ge,nextLoc:qe},"next"===this.method&&(this.arg=G),Ke}},T}(pt.exports);try{regeneratorRuntime=Se}catch(T){"object"==typeof globalThis?globalThis.regeneratorRuntime=Se:Function("r","regeneratorRuntime = r")(Se)}},5555:function(pt,Se,T){var p,N;p=function(){return function G(){var de=arguments.length;if(0===de)throw new Error("resolveUrl requires at least one argument; got none.");var ie=document.createElement("base");if(ie.href=arguments[0],1===de)return ie.href;var me=document.getElementsByTagName("head")[0];me.insertBefore(ie,me.firstChild);for(var ue,Ee=document.createElement("a"),Ie=1;Ie<de;Ie++)Ee.href=arguments[Ie],ie.href=ue=Ee.href;return me.removeChild(ie),ue}},void 0!==(N=p.call(Se,T,Se,pt))&&(pt.exports=N)},1135:(pt,Se,T)=>{"use strict";T.d(Se,{X:()=>N});var p=T(7579);class N extends p.x{constructor(de){super(),this._value=de}get value(){return this.getValue()}_subscribe(de){const ie=super._subscribe(de);return!ie.closed&&de.next(this._value),ie}getValue(){const{hasError:de,thrownError:ie,_value:me}=this;if(de)throw ie;return this._throwIfClosed(),me}next(de){super.next(this._value=de)}}},9751:(pt,Se,T)=>{"use strict";T.d(Se,{y:()=>ue});var p=T(930),N=T(727),G=T(8822),de=T(9635),ie=T(2416),me=T(576),Ee=T(2806);let ue=(()=>{class _e{constructor(We){We&&(this._subscribe=We)}lift(We){const Ke=new _e;return Ke.source=this,Ke.operator=We,Ke}subscribe(We,Ke,Et){const Ve=function re(_e){return _e&&_e instanceof p.Lv||function le(_e){return _e&&(0,me.m)(_e.next)&&(0,me.m)(_e.error)&&(0,me.m)(_e.complete)}(_e)&&(0,N.Nn)(_e)}(We)?We:new p.Hp(We,Ke,Et);return(0,Ee.x)(()=>{const{operator:Te,source:ct}=this;Ve.add(Te?Te.call(Ve,ct):ct?this._subscribe(Ve):this._trySubscribe(Ve))}),Ve}_trySubscribe(We){try{return this._subscribe(We)}catch(Ke){We.error(Ke)}}forEach(We,Ke){return new(Ke=Ie(Ke))((Et,Ve)=>{const Te=new p.Hp({next:ct=>{try{We(ct)}catch(H){Ve(H),Te.unsubscribe()}},error:Ve,complete:Et});this.subscribe(Te)})}_subscribe(We){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(We)}[G.L](){return this}pipe(...We){return(0,de.U)(We)(this)}toPromise(We){return new(We=Ie(We))((Ke,Et)=>{let Ve;this.subscribe(Te=>Ve=Te,Te=>Et(Te),()=>Ke(Ve))})}}return _e.create=$e=>new _e($e),_e})();function Ie(_e){var $e;return null!==($e=null!=_e?_e:ie.v.Promise)&&void 0!==$e?$e:Promise}},7579:(pt,Se,T)=>{"use strict";T.d(Se,{x:()=>Ee});var p=T(9751),N=T(727);const de=(0,T(3888).d)(Ie=>function(){Ie(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=T(8737),me=T(2806);let Ee=(()=>{class Ie extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const _e=new ue(this,this);return _e.operator=re,_e}_throwIfClosed(){if(this.closed)throw new de}next(re){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const _e of this.currentObservers)_e.next(re)}})}error(re){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:_e}=this;for(;_e.length;)_e.shift().error(re)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:_e,isStopped:$e,observers:We}=this;return _e||$e?N.Lc:(this.currentObservers=null,We.push(re),new N.w0(()=>{this.currentObservers=null,(0,ie.P)(We,re)}))}_checkFinalizedStatuses(re){const{hasError:_e,thrownError:$e,isStopped:We}=this;_e?re.error($e):We&&re.complete()}asObservable(){const re=new p.y;return re.source=this,re}}return Ie.create=(le,re)=>new ue(le,re),Ie})();class ue extends Ee{constructor(le,re){super(),this.destination=le,this.source=re}next(le){var re,_e;null===(_e=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===_e||_e.call(re,le)}error(le){var re,_e;null===(_e=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===_e||_e.call(re,le)}complete(){var le,re;null===(re=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===re||re.call(le)}_subscribe(le){var re,_e;return null!==(_e=null===(re=this.source)||void 0===re?void 0:re.subscribe(le))&&void 0!==_e?_e:N.Lc}}},930:(pt,Se,T)=>{"use strict";T.d(Se,{Hp:()=>Et,Lv:()=>_e});var p=T(576),N=T(727),G=T(2416),de=T(7849),ie=T(5032);const me=Ie("C",void 0,void 0);function Ie(F,te,pe){return{kind:F,value:te,error:pe}}var le=T(3410),re=T(2806);class _e extends N.w0{constructor(te){super(),this.isStopped=!1,te?(this.destination=te,(0,N.Nn)(te)&&te.add(this)):this.destination=H}static create(te,pe,Ue){return new Et(te,pe,Ue)}next(te){this.isStopped?ct(function ue(F){return Ie("N",F,void 0)}(te),this):this._next(te)}error(te){this.isStopped?ct(function Ee(F){return Ie("E",void 0,F)}(te),this):(this.isStopped=!0,this._error(te))}complete(){this.isStopped?ct(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(te){this.destination.next(te)}_error(te){try{this.destination.error(te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function We(F,te){return $e.call(F,te)}class Ke{constructor(te){this.partialObserver=te}next(te){const{partialObserver:pe}=this;if(pe.next)try{pe.next(te)}catch(Ue){Ve(Ue)}}error(te){const{partialObserver:pe}=this;if(pe.error)try{pe.error(te)}catch(Ue){Ve(Ue)}else Ve(te)}complete(){const{partialObserver:te}=this;if(te.complete)try{te.complete()}catch(pe){Ve(pe)}}}class Et extends _e{constructor(te,pe,Ue){let Le;if(super(),(0,p.m)(te)||!te)Le={next:null!=te?te:void 0,error:null!=pe?pe:void 0,complete:null!=Ue?Ue:void 0};else{let Re;this&&G.v.useDeprecatedNextContext?(Re=Object.create(te),Re.unsubscribe=()=>this.unsubscribe(),Le={next:te.next&&We(te.next,Re),error:te.error&&We(te.error,Re),complete:te.complete&&We(te.complete,Re)}):Le=te}this.destination=new Ke(Le)}}function Ve(F){G.v.useDeprecatedSynchronousErrorHandling?(0,re.O)(F):(0,de.h)(F)}function ct(F,te){const{onStoppedNotification:pe}=G.v;pe&&le.z.setTimeout(()=>pe(F,te))}const H={closed:!0,next:ie.Z,error:function Te(F){throw F},complete:ie.Z}},727:(pt,Se,T)=>{"use strict";T.d(Se,{Lc:()=>me,w0:()=>ie,Nn:()=>Ee});var p=T(576);const G=(0,T(3888).d)(Ie=>function(re){Ie(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((_e,$e)=>`${$e+1}) ${_e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var de=T(8737);class ie{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const We of re)We.remove(this);else re.remove(this);const{initialTeardown:_e}=this;if((0,p.m)(_e))try{_e()}catch(We){le=We instanceof G?We.errors:[We]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const We of $e)try{ue(We)}catch(Ke){le=null!=le?le:[],Ke instanceof G?le=[...le,...Ke.errors]:le.push(Ke)}}if(le)throw new G(le)}}add(le){var re;if(le&&le!==this)if(this.closed)ue(le);else{if(le instanceof ie){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(le)}}_hasParent(le){const{_parentage:re}=this;return re===le||Array.isArray(re)&&re.includes(le)}_addParent(le){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(le),re):re?[re,le]:le}_removeParent(le){const{_parentage:re}=this;re===le?this._parentage=null:Array.isArray(re)&&(0,de.P)(re,le)}remove(le){const{_finalizers:re}=this;re&&(0,de.P)(re,le),le instanceof ie&&le._removeParent(this)}}ie.EMPTY=(()=>{const Ie=new ie;return Ie.closed=!0,Ie})();const me=ie.EMPTY;function Ee(Ie){return Ie instanceof ie||Ie&&"closed"in Ie&&(0,p.m)(Ie.remove)&&(0,p.m)(Ie.add)&&(0,p.m)(Ie.unsubscribe)}function ue(Ie){(0,p.m)(Ie)?Ie():Ie.unsubscribe()}},2416:(pt,Se,T)=>{"use strict";T.d(Se,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(pt,Se,T)=>{"use strict";T.d(Se,{a:()=>le});var p=T(9751),N=T(4742),G=T(8996),de=T(4671),ie=T(3268),me=T(3269),Ee=T(1810),ue=T(5403),Ie=T(9672);function le(...$e){const We=(0,me.yG)($e),Ke=(0,me.jO)($e),{args:Et,keys:Ve}=(0,N.D)($e);if(0===Et.length)return(0,G.D)([],We);const Te=new p.y(function re($e,We,Ke=de.y){return Et=>{_e(We,()=>{const{length:Ve}=$e,Te=new Array(Ve);let ct=Ve,H=Ve;for(let F=0;F<Ve;F++)_e(We,()=>{const te=(0,G.D)($e[F],We);let pe=!1;te.subscribe((0,ue.x)(Et,Ue=>{Te[F]=Ue,pe||(pe=!0,H--),H||Et.next(Ke(Te.slice()))},()=>{--ct||Et.complete()}))},Et)},Et)}}(Et,We,Ve?ct=>(0,Ee.n)(Ve,ct):de.y));return Ke?Te.pipe((0,ie.Z)(Ke)):Te}function _e($e,We,Ke){$e?(0,Ie.f)(Ke,$e,We):We()}},7272:(pt,Se,T)=>{"use strict";T.d(Se,{z:()=>ie});var p=T(8189),G=T(3269),de=T(8996);function ie(...me){return function N(){return(0,p.J)(1)}()((0,de.D)(me,(0,G.yG)(me)))}},515:(pt,Se,T)=>{"use strict";T.d(Se,{E:()=>N});const N=new(T(9751).y)(ie=>ie.complete())},4128:(pt,Se,T)=>{"use strict";T.d(Se,{D:()=>ue});var p=T(9751),N=T(4742),G=T(8421),de=T(3269),ie=T(5403),me=T(3268),Ee=T(1810);function ue(...Ie){const le=(0,de.jO)(Ie),{args:re,keys:_e}=(0,N.D)(Ie),$e=new p.y(We=>{const{length:Ke}=re;if(!Ke)return void We.complete();const Et=new Array(Ke);let Ve=Ke,Te=Ke;for(let ct=0;ct<Ke;ct++){let H=!1;(0,G.Xf)(re[ct]).subscribe((0,ie.x)(We,F=>{H||(H=!0,Te--),Et[ct]=F},()=>Ve--,void 0,()=>{(!Ve||!H)&&(Te||We.next(_e?(0,Ee.n)(_e,Et):Et),We.complete())}))}});return le?$e.pipe((0,me.Z)(le)):$e}},8996:(pt,Se,T)=>{"use strict";T.d(Se,{D:()=>te});var p=T(8421),N=T(5363),G=T(9468),me=T(9751),ue=T(2202),Ie=T(576),le=T(9672);function _e(pe,Ue){if(!pe)throw new Error("Iterable cannot be null");return new me.y(Le=>{(0,le.f)(Le,Ue,()=>{const Re=pe[Symbol.asyncIterator]();(0,le.f)(Le,Ue,()=>{Re.next().then(ve=>{ve.done?Le.complete():Le.next(ve.value)})},0,!0)})})}var $e=T(3670),We=T(8239),Ke=T(1144),Et=T(6495),Ve=T(2206),Te=T(4532),ct=T(3260);function te(pe,Ue){return Ue?function F(pe,Ue){if(null!=pe){if((0,$e.c)(pe))return function de(pe,Ue){return(0,p.Xf)(pe).pipe((0,G.R)(Ue),(0,N.Q)(Ue))}(pe,Ue);if((0,Ke.z)(pe))return function Ee(pe,Ue){return new me.y(Le=>{let Re=0;return Ue.schedule(function(){Re===pe.length?Le.complete():(Le.next(pe[Re++]),Le.closed||this.schedule())})})}(pe,Ue);if((0,We.t)(pe))return function ie(pe,Ue){return(0,p.Xf)(pe).pipe((0,G.R)(Ue),(0,N.Q)(Ue))}(pe,Ue);if((0,Ve.D)(pe))return _e(pe,Ue);if((0,Et.T)(pe))return function re(pe,Ue){return new me.y(Le=>{let Re;return(0,le.f)(Le,Ue,()=>{Re=pe[ue.h](),(0,le.f)(Le,Ue,()=>{let ve,X;try{({value:ve,done:X}=Re.next())}catch(Pe){return void Le.error(Pe)}X?Le.complete():Le.next(ve)},0,!0)}),()=>(0,Ie.m)(null==Re?void 0:Re.return)&&Re.return()})}(pe,Ue);if((0,ct.L)(pe))return function H(pe,Ue){return _e((0,ct.Q)(pe),Ue)}(pe,Ue)}throw(0,Te.z)(pe)}(pe,Ue):(0,p.Xf)(pe)}},8421:(pt,Se,T)=>{"use strict";T.d(Se,{Xf:()=>$e});var p=T(655),N=T(1144),G=T(8239),de=T(9751),ie=T(3670),me=T(2206),Ee=T(4532),ue=T(6495),Ie=T(3260),le=T(576),re=T(7849),_e=T(8822);function $e(F){if(F instanceof de.y)return F;if(null!=F){if((0,ie.c)(F))return function We(F){return new de.y(te=>{const pe=F[_e.L]();if((0,le.m)(pe.subscribe))return pe.subscribe(te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(F);if((0,N.z)(F))return function Ke(F){return new de.y(te=>{for(let pe=0;pe<F.length&&!te.closed;pe++)te.next(F[pe]);te.complete()})}(F);if((0,G.t)(F))return function Et(F){return new de.y(te=>{F.then(pe=>{te.closed||(te.next(pe),te.complete())},pe=>te.error(pe)).then(null,re.h)})}(F);if((0,me.D)(F))return Te(F);if((0,ue.T)(F))return function Ve(F){return new de.y(te=>{for(const pe of F)if(te.next(pe),te.closed)return;te.complete()})}(F);if((0,Ie.L)(F))return function ct(F){return Te((0,Ie.Q)(F))}(F)}throw(0,Ee.z)(F)}function Te(F){return new de.y(te=>{(function H(F,te){var pe,Ue,Le,Re;return(0,p.mG)(this,void 0,void 0,function*(){try{for(pe=(0,p.KL)(F);!(Ue=yield pe.next()).done;)if(te.next(Ue.value),te.closed)return}catch(ve){Le={error:ve}}finally{try{Ue&&!Ue.done&&(Re=pe.return)&&(yield Re.call(pe))}finally{if(Le)throw Le.error}}te.complete()})})(F,te).catch(pe=>te.error(pe))})}},6451:(pt,Se,T)=>{"use strict";T.d(Se,{T:()=>me});var p=T(8189),N=T(8421),G=T(515),de=T(3269),ie=T(8996);function me(...Ee){const ue=(0,de.yG)(Ee),Ie=(0,de._6)(Ee,1/0),le=Ee;return le.length?1===le.length?(0,N.Xf)(le[0]):(0,p.J)(Ie)((0,ie.D)(le,ue)):G.E}},9646:(pt,Se,T)=>{"use strict";T.d(Se,{of:()=>G});var p=T(3269),N=T(8996);function G(...de){const ie=(0,p.yG)(de);return(0,N.D)(de,ie)}},5403:(pt,Se,T)=>{"use strict";T.d(Se,{x:()=>N});var p=T(930);function N(de,ie,me,Ee,ue){return new G(de,ie,me,Ee,ue)}class G extends p.Lv{constructor(ie,me,Ee,ue,Ie,le){super(ie),this.onFinalize=Ie,this.shouldUnsubscribe=le,this._next=me?function(re){try{me(re)}catch(_e){ie.error(_e)}}:super._next,this._error=ue?function(re){try{ue(re)}catch(_e){ie.error(_e)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(re){ie.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},8372:(pt,Se,T)=>{"use strict";T.d(Se,{b:()=>de});var p=T(4986),N=T(4482),G=T(5403);function de(ie,me=p.z){return(0,N.e)((Ee,ue)=>{let Ie=null,le=null,re=null;const _e=()=>{if(Ie){Ie.unsubscribe(),Ie=null;const We=le;le=null,ue.next(We)}};function $e(){const We=re+ie,Ke=me.now();if(Ke<We)return Ie=this.schedule(void 0,We-Ke),void ue.add(Ie);_e()}Ee.subscribe((0,G.x)(ue,We=>{le=We,re=me.now(),Ie||(Ie=me.schedule($e,ie),ue.add(Ie))},()=>{_e(),ue.complete()},void 0,()=>{le=Ie=null}))})}},6590:(pt,Se,T)=>{"use strict";T.d(Se,{d:()=>G});var p=T(4482),N=T(5403);function G(de){return(0,p.e)((ie,me)=>{let Ee=!1;ie.subscribe((0,N.x)(me,ue=>{Ee=!0,me.next(ue)},()=>{Ee||me.next(de),me.complete()}))})}},9300:(pt,Se,T)=>{"use strict";T.d(Se,{h:()=>G});var p=T(4482),N=T(5403);function G(de,ie){return(0,p.e)((me,Ee)=>{let ue=0;me.subscribe((0,N.x)(Ee,Ie=>de.call(ie,Ie,ue++)&&Ee.next(Ie)))})}},590:(pt,Se,T)=>{"use strict";T.d(Se,{P:()=>Ee});var p=T(6805),N=T(9300),G=T(5698),de=T(6590),ie=T(8068),me=T(4671);function Ee(ue,Ie){const le=arguments.length>=2;return re=>re.pipe(ue?(0,N.h)((_e,$e)=>ue(_e,$e,re)):me.y,(0,G.q)(1),le?(0,de.d)(Ie):(0,ie.T)(()=>new p.K))}},4004:(pt,Se,T)=>{"use strict";T.d(Se,{U:()=>G});var p=T(4482),N=T(5403);function G(de,ie){return(0,p.e)((me,Ee)=>{let ue=0;me.subscribe((0,N.x)(Ee,Ie=>{Ee.next(de.call(ie,Ie,ue++))}))})}},8189:(pt,Se,T)=>{"use strict";T.d(Se,{J:()=>G});var p=T(5577),N=T(4671);function G(de=1/0){return(0,p.z)(N.y,de)}},5577:(pt,Se,T)=>{"use strict";T.d(Se,{z:()=>ue});var p=T(4004),N=T(8421),G=T(4482),de=T(9672),ie=T(5403),Ee=T(576);function ue(Ie,le,re=1/0){return(0,Ee.m)(le)?ue((_e,$e)=>(0,p.U)((We,Ke)=>le(_e,We,$e,Ke))((0,N.Xf)(Ie(_e,$e))),re):("number"==typeof le&&(re=le),(0,G.e)((_e,$e)=>function me(Ie,le,re,_e,$e,We,Ke,Et){const Ve=[];let Te=0,ct=0,H=!1;const F=()=>{H&&!Ve.length&&!Te&&le.complete()},te=Ue=>Te<_e?pe(Ue):Ve.push(Ue),pe=Ue=>{We&&le.next(Ue),Te++;let Le=!1;(0,N.Xf)(re(Ue,ct++)).subscribe((0,ie.x)(le,Re=>{null==$e||$e(Re),We?te(Re):le.next(Re)},()=>{Le=!0},void 0,()=>{if(Le)try{for(Te--;Ve.length&&Te<_e;){const Re=Ve.shift();Ke?(0,de.f)(le,Ke,()=>pe(Re)):pe(Re)}F()}catch(Re){le.error(Re)}}))};return Ie.subscribe((0,ie.x)(le,te,()=>{H=!0,F()})),()=>{null==Et||Et()}}(_e,$e,Ie,re)))}},5363:(pt,Se,T)=>{"use strict";T.d(Se,{Q:()=>de});var p=T(9672),N=T(4482),G=T(5403);function de(ie,me=0){return(0,N.e)((Ee,ue)=>{Ee.subscribe((0,G.x)(ue,Ie=>(0,p.f)(ue,ie,()=>ue.next(Ie),me),()=>(0,p.f)(ue,ie,()=>ue.complete(),me),Ie=>(0,p.f)(ue,ie,()=>ue.error(Ie),me)))})}},5026:(pt,Se,T)=>{"use strict";T.d(Se,{R:()=>de});var p=T(4482),N=T(5403);function G(ie,me,Ee,ue,Ie){return(le,re)=>{let _e=Ee,$e=me,We=0;le.subscribe((0,N.x)(re,Ke=>{const Et=We++;$e=_e?ie($e,Ke,Et):(_e=!0,Ke),ue&&re.next($e)},Ie&&(()=>{_e&&re.next($e),re.complete()})))}}function de(ie,me){return(0,p.e)(G(ie,me,arguments.length>=2,!0))}},3099:(pt,Se,T)=>{"use strict";T.d(Se,{B:()=>me});var p=T(8996),N=T(5698),G=T(7579),de=T(930),ie=T(4482);function me(ue={}){const{connector:Ie=(()=>new G.x),resetOnError:le=!0,resetOnComplete:re=!0,resetOnRefCountZero:_e=!0}=ue;return $e=>{let We=null,Ke=null,Et=null,Ve=0,Te=!1,ct=!1;const H=()=>{null==Ke||Ke.unsubscribe(),Ke=null},F=()=>{H(),We=Et=null,Te=ct=!1},te=()=>{const pe=We;F(),null==pe||pe.unsubscribe()};return(0,ie.e)((pe,Ue)=>{Ve++,!ct&&!Te&&H();const Le=Et=null!=Et?Et:Ie();Ue.add(()=>{Ve--,0===Ve&&!ct&&!Te&&(Ke=Ee(te,_e))}),Le.subscribe(Ue),We||(We=new de.Hp({next:Re=>Le.next(Re),error:Re=>{ct=!0,H(),Ke=Ee(F,le,Re),Le.error(Re)},complete:()=>{Te=!0,H(),Ke=Ee(F,re),Le.complete()}}),(0,p.D)(pe).subscribe(We))})($e)}}function Ee(ue,Ie,...le){return!0===Ie?(ue(),null):!1===Ie?null:Ie(...le).pipe((0,N.q)(1)).subscribe(()=>ue())}},8675:(pt,Se,T)=>{"use strict";T.d(Se,{O:()=>de});var p=T(7272),N=T(3269),G=T(4482);function de(...ie){const me=(0,N.yG)(ie);return(0,G.e)((Ee,ue)=>{(me?(0,p.z)(ie,Ee,me):(0,p.z)(ie,Ee)).subscribe(ue)})}},9468:(pt,Se,T)=>{"use strict";T.d(Se,{R:()=>N});var p=T(4482);function N(G,de=0){return(0,p.e)((ie,me)=>{me.add(G.schedule(()=>ie.subscribe(me),de))})}},3900:(pt,Se,T)=>{"use strict";T.d(Se,{w:()=>de});var p=T(8421),N=T(4482),G=T(5403);function de(ie,me){return(0,N.e)((Ee,ue)=>{let Ie=null,le=0,re=!1;const _e=()=>re&&!Ie&&ue.complete();Ee.subscribe((0,G.x)(ue,$e=>{null==Ie||Ie.unsubscribe();let We=0;const Ke=le++;(0,p.Xf)(ie($e,Ke)).subscribe(Ie=(0,G.x)(ue,Et=>ue.next(me?me($e,Et,Ke,We++):Et),()=>{Ie=null,_e()}))},()=>{re=!0,_e()}))})}},5698:(pt,Se,T)=>{"use strict";T.d(Se,{q:()=>de});var p=T(515),N=T(4482),G=T(5403);function de(ie){return ie<=0?()=>p.E:(0,N.e)((me,Ee)=>{let ue=0;me.subscribe((0,G.x)(Ee,Ie=>{++ue<=ie&&(Ee.next(Ie),ie<=ue&&Ee.complete())}))})}},8505:(pt,Se,T)=>{"use strict";T.d(Se,{b:()=>ie});var p=T(576),N=T(4482),G=T(5403),de=T(4671);function ie(me,Ee,ue){const Ie=(0,p.m)(me)||Ee||ue?{next:me,error:Ee,complete:ue}:me;return Ie?(0,N.e)((le,re)=>{var _e;null===(_e=Ie.subscribe)||void 0===_e||_e.call(Ie);let $e=!0;le.subscribe((0,G.x)(re,We=>{var Ke;null===(Ke=Ie.next)||void 0===Ke||Ke.call(Ie,We),re.next(We)},()=>{var We;$e=!1,null===(We=Ie.complete)||void 0===We||We.call(Ie),re.complete()},We=>{var Ke;$e=!1,null===(Ke=Ie.error)||void 0===Ke||Ke.call(Ie,We),re.error(We)},()=>{var We,Ke;$e&&(null===(We=Ie.unsubscribe)||void 0===We||We.call(Ie)),null===(Ke=Ie.finalize)||void 0===Ke||Ke.call(Ie)}))}):de.y}},8068:(pt,Se,T)=>{"use strict";T.d(Se,{T:()=>de});var p=T(6805),N=T(4482),G=T(5403);function de(me=ie){return(0,N.e)((Ee,ue)=>{let Ie=!1;Ee.subscribe((0,G.x)(ue,le=>{Ie=!0,ue.next(le)},()=>Ie?ue.complete():ue.error(me())))})}function ie(){return new p.K}},4408:(pt,Se,T)=>{"use strict";T.d(Se,{o:()=>ie});var p=T(727);class N extends p.w0{constructor(Ee,ue){super()}schedule(Ee,ue=0){return this}}const G={setInterval(me,Ee,...ue){const{delegate:Ie}=G;return(null==Ie?void 0:Ie.setInterval)?Ie.setInterval(me,Ee,...ue):setInterval(me,Ee,...ue)},clearInterval(me){const{delegate:Ee}=G;return((null==Ee?void 0:Ee.clearInterval)||clearInterval)(me)},delegate:void 0};var de=T(8737);class ie extends N{constructor(Ee,ue){super(Ee,ue),this.scheduler=Ee,this.work=ue,this.pending=!1}schedule(Ee,ue=0){if(this.closed)return this;this.state=Ee;const Ie=this.id,le=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(le,Ie,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(le,this.id,ue),this}requestAsyncId(Ee,ue,Ie=0){return G.setInterval(Ee.flush.bind(Ee,this),Ie)}recycleAsyncId(Ee,ue,Ie=0){if(null!=Ie&&this.delay===Ie&&!1===this.pending)return ue;G.clearInterval(ue)}execute(Ee,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(Ee,ue);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,ue){let le,Ie=!1;try{this.work(Ee)}catch(re){Ie=!0,le=re||new Error("Scheduled action threw falsy error")}if(Ie)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:ue}=this,{actions:Ie}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(Ie,this),null!=Ee&&(this.id=this.recycleAsyncId(ue,Ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Se,T)=>{"use strict";T.d(Se,{v:()=>G});var p=T(6063);class N{constructor(ie,me=N.now){this.schedulerActionCtor=ie,this.now=me}schedule(ie,me=0,Ee){return new this.schedulerActionCtor(this,ie).schedule(Ee,me)}}N.now=p.l.now;class G extends N{constructor(ie,me=N.now){super(ie,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:me}=this;if(this._active)return void me.push(ie);let Ee;this._active=!0;do{if(Ee=ie.execute(ie.state,ie.delay))break}while(ie=me.shift());if(this._active=!1,Ee){for(;ie=me.shift();)ie.unsubscribe();throw Ee}}}},4986:(pt,Se,T)=>{"use strict";T.d(Se,{P:()=>de,z:()=>G});var p=T(4408);const G=new(T(7565).v)(p.o),de=G},6063:(pt,Se,T)=>{"use strict";T.d(Se,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(pt,Se,T)=>{"use strict";T.d(Se,{z:()=>p});const p={setTimeout(N,G,...de){const{delegate:ie}=p;return(null==ie?void 0:ie.setTimeout)?ie.setTimeout(N,G,...de):setTimeout(N,G,...de)},clearTimeout(N){const{delegate:G}=p;return((null==G?void 0:G.clearTimeout)||clearTimeout)(N)},delegate:void 0}},2202:(pt,Se,T)=>{"use strict";T.d(Se,{h:()=>N});const N=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Se,T)=>{"use strict";T.d(Se,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(pt,Se,T)=>{"use strict";T.d(Se,{K:()=>N});const N=(0,T(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(pt,Se,T)=>{"use strict";T.d(Se,{_6:()=>me,jO:()=>de,yG:()=>ie});var p=T(576),N=T(3532);function G(Ee){return Ee[Ee.length-1]}function de(Ee){return(0,p.m)(G(Ee))?Ee.pop():void 0}function ie(Ee){return(0,N.K)(G(Ee))?Ee.pop():void 0}function me(Ee,ue){return"number"==typeof G(Ee)?Ee.pop():ue}},4742:(pt,Se,T)=>{"use strict";T.d(Se,{D:()=>ie});const{isArray:p}=Array,{getPrototypeOf:N,prototype:G,keys:de}=Object;function ie(Ee){if(1===Ee.length){const ue=Ee[0];if(p(ue))return{args:ue,keys:null};if(function me(Ee){return Ee&&"object"==typeof Ee&&N(Ee)===G}(ue)){const Ie=de(ue);return{args:Ie.map(le=>ue[le]),keys:Ie}}}return{args:Ee,keys:null}}},8737:(pt,Se,T)=>{"use strict";function p(N,G){if(N){const de=N.indexOf(G);0<=de&&N.splice(de,1)}}T.d(Se,{P:()=>p})},3888:(pt,Se,T)=>{"use strict";function p(N){const de=N(ie=>{Error.call(ie),ie.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}T.d(Se,{d:()=>p})},1810:(pt,Se,T)=>{"use strict";function p(N,G){return N.reduce((de,ie,me)=>(de[ie]=G[me],de),{})}T.d(Se,{n:()=>p})},2806:(pt,Se,T)=>{"use strict";T.d(Se,{O:()=>de,x:()=>G});var p=T(2416);let N=null;function G(ie){if(p.v.useDeprecatedSynchronousErrorHandling){const me=!N;if(me&&(N={errorThrown:!1,error:null}),ie(),me){const{errorThrown:Ee,error:ue}=N;if(N=null,Ee)throw ue}}else ie()}function de(ie){p.v.useDeprecatedSynchronousErrorHandling&&N&&(N.errorThrown=!0,N.error=ie)}},9672:(pt,Se,T)=>{"use strict";function p(N,G,de,ie=0,me=!1){const Ee=G.schedule(function(){de(),me?N.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(N.add(Ee),!me)return Ee}T.d(Se,{f:()=>p})},4671:(pt,Se,T)=>{"use strict";function p(N){return N}T.d(Se,{y:()=>p})},1144:(pt,Se,T)=>{"use strict";T.d(Se,{z:()=>p});const p=N=>N&&"number"==typeof N.length&&"function"!=typeof N},2206:(pt,Se,T)=>{"use strict";T.d(Se,{D:()=>N});var p=T(576);function N(G){return Symbol.asyncIterator&&(0,p.m)(null==G?void 0:G[Symbol.asyncIterator])}},576:(pt,Se,T)=>{"use strict";function p(N){return"function"==typeof N}T.d(Se,{m:()=>p})},3670:(pt,Se,T)=>{"use strict";T.d(Se,{c:()=>G});var p=T(8822),N=T(576);function G(de){return(0,N.m)(de[p.L])}},6495:(pt,Se,T)=>{"use strict";T.d(Se,{T:()=>G});var p=T(2202),N=T(576);function G(de){return(0,N.m)(null==de?void 0:de[p.h])}},8239:(pt,Se,T)=>{"use strict";T.d(Se,{t:()=>N});var p=T(576);function N(G){return(0,p.m)(null==G?void 0:G.then)}},3260:(pt,Se,T)=>{"use strict";T.d(Se,{L:()=>de,Q:()=>G});var p=T(655),N=T(576);function G(ie){return(0,p.FC)(this,arguments,function*(){const Ee=ie.getReader();try{for(;;){const{value:ue,done:Ie}=yield(0,p.qq)(Ee.read());if(Ie)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ue)}}finally{Ee.releaseLock()}})}function de(ie){return(0,N.m)(null==ie?void 0:ie.getReader)}},3532:(pt,Se,T)=>{"use strict";T.d(Se,{K:()=>N});var p=T(576);function N(G){return G&&(0,p.m)(G.schedule)}},4482:(pt,Se,T)=>{"use strict";T.d(Se,{A:()=>N,e:()=>G});var p=T(576);function N(de){return(0,p.m)(null==de?void 0:de.lift)}function G(de){return ie=>{if(N(ie))return ie.lift(function(me){try{return de(me,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(pt,Se,T)=>{"use strict";T.d(Se,{Z:()=>de});var p=T(4004);const{isArray:N}=Array;function de(ie){return(0,p.U)(me=>function G(ie,me){return N(me)?ie(...me):ie(me)}(ie,me))}},5032:(pt,Se,T)=>{"use strict";function p(){}T.d(Se,{Z:()=>p})},9635:(pt,Se,T)=>{"use strict";T.d(Se,{U:()=>G,z:()=>N});var p=T(4671);function N(...de){return G(de)}function G(de){return 0===de.length?p.y:1===de.length?de[0]:function(me){return de.reduce((Ee,ue)=>ue(Ee),me)}}},7849:(pt,Se,T)=>{"use strict";T.d(Se,{h:()=>G});var p=T(2416),N=T(3410);function G(de){N.z.setTimeout(()=>{const{onUnhandledError:ie}=p.v;if(!ie)throw de;ie(de)})}},4532:(pt,Se,T)=>{"use strict";function p(N){return new TypeError(`You provided ${null!==N&&"object"==typeof N?"an invalid object":`'${N}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}T.d(Se,{z:()=>p})},8926:pt=>{function Se(p,N,G,de,ie,me,Ee){try{var ue=p[me](Ee),Ie=ue.value}catch(le){return void G(le)}ue.done?N(Ie):Promise.resolve(Ie).then(de,ie)}pt.exports=function T(p){return function(){var N=this,G=arguments;return new Promise(function(de,ie){var me=p.apply(N,G);function Ee(Ie){Se(me,de,ie,Ee,ue,"next",Ie)}function ue(Ie){Se(me,de,ie,Ee,ue,"throw",Ie)}Ee(void 0)})}},pt.exports.__esModule=!0,pt.exports.default=pt.exports},655:(pt,Se,T)=>{"use strict";function de(ve,X){var Pe={};for(var ce in ve)Object.prototype.hasOwnProperty.call(ve,ce)&&X.indexOf(ce)<0&&(Pe[ce]=ve[ce]);if(null!=ve&&"function"==typeof Object.getOwnPropertySymbols){var et=0;for(ce=Object.getOwnPropertySymbols(ve);et<ce.length;et++)X.indexOf(ce[et])<0&&Object.prototype.propertyIsEnumerable.call(ve,ce[et])&&(Pe[ce[et]]=ve[ce[et]])}return Pe}function ie(ve,X,Pe,ce){var Ge,et=arguments.length,he=et<3?X:null===ce?ce=Object.getOwnPropertyDescriptor(X,Pe):ce;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)he=Reflect.decorate(ve,X,Pe,ce);else for(var qe=ve.length-1;qe>=0;qe--)(Ge=ve[qe])&&(he=(et<3?Ge(he):et>3?Ge(X,Pe,he):Ge(X,Pe))||he);return et>3&&he&&Object.defineProperty(X,Pe,he),he}function ue(ve,X,Pe,ce){return new(Pe||(Pe=Promise))(function(he,Ge){function qe(vt){try{Qe(ce.next(vt))}catch(Pt){Ge(Pt)}}function ht(vt){try{Qe(ce.throw(vt))}catch(Pt){Ge(Pt)}}function Qe(vt){vt.done?he(vt.value):function et(he){return he instanceof Pe?he:new Pe(function(Ge){Ge(he)})}(vt.value).then(qe,ht)}Qe((ce=ce.apply(ve,X||[])).next())})}function Ve(ve){return this instanceof Ve?(this.v=ve,this):new Ve(ve)}function Te(ve,X,Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,ce=Pe.apply(ve,X||[]),he=[];return et={},Ge("next"),Ge("throw"),Ge("return"),et[Symbol.asyncIterator]=function(){return this},et;function Ge(bt){ce[bt]&&(et[bt]=function(Tt){return new Promise(function(dt,hn){he.push([bt,Tt,dt,hn])>1||qe(bt,Tt)})})}function qe(bt,Tt){try{!function ht(bt){bt.value instanceof Ve?Promise.resolve(bt.value.v).then(Qe,vt):Pt(he[0][2],bt)}(ce[bt](Tt))}catch(dt){Pt(he[0][3],dt)}}function Qe(bt){qe("next",bt)}function vt(bt){qe("throw",bt)}function Pt(bt,Tt){bt(Tt),he.shift(),he.length&&qe(he[0][0],he[0][1])}}function H(ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,X=ve[Symbol.asyncIterator];return X?X.call(ve):(ve=function _e(ve){var X="function"==typeof Symbol&&Symbol.iterator,Pe=X&&ve[X],ce=0;if(Pe)return Pe.call(ve);if(ve&&"number"==typeof ve.length)return{next:function(){return ve&&ce>=ve.length&&(ve=void 0),{value:ve&&ve[ce++],done:!ve}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(ve),Pe={},ce("next"),ce("throw"),ce("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe);function ce(he){Pe[he]=ve[he]&&function(Ge){return new Promise(function(qe,ht){!function et(he,Ge,qe,ht){Promise.resolve(ht).then(function(Qe){he({value:Qe,done:qe})},Ge)}(qe,ht,(Ge=ve[he](Ge)).done,Ge.value)})}}}T.d(Se,{FC:()=>Te,KL:()=>H,_T:()=>de,gn:()=>ie,mG:()=>ue,qq:()=>Ve})},9808:(pt,Se,T)=>{"use strict";T.d(Se,{Do:()=>F,EM:()=>si,HT:()=>ie,JF:()=>cr,K0:()=>Ee,Mx:()=>ri,O5:()=>Sr,Ov:()=>Je,PM:()=>kr,S$:()=>Ve,Ts:()=>ys,V_:()=>le,Ye:()=>te,Zx:()=>Er,b0:()=>H,bD:()=>Ki,ez:()=>bi,lw:()=>ue,mk:()=>Fi,mr:()=>ct,q:()=>G,sg:()=>Pn,uU:()=>kn,w_:()=>me});var p=T(5e3);let N=null;function G(){return N}function ie(R){N||(N=R)}class me{}const Ee=new p.OlP("DocumentToken");let ue=(()=>{class R{historyGo(x){throw new Error("Not implemented")}}return R.\u0275fac=function(x){return new(x||R)},R.\u0275prov=p.Yz7({token:R,factory:function(){return function Ie(){return(0,p.LFG)(re)}()},providedIn:"platform"}),R})();const le=new p.OlP("Location Initialized");let re=(()=>{class R extends ue{constructor(x){super(),this._doc=x,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(x){const Y=G().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",x,!1),()=>Y.removeEventListener("popstate",x)}onHashChange(x){const Y=G().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",x,!1),()=>Y.removeEventListener("hashchange",x)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(x){this.location.pathname=x}pushState(x,Y,be){_e()?this._history.pushState(x,Y,be):this.location.hash=be}replaceState(x,Y,be){_e()?this._history.replaceState(x,Y,be):this.location.hash=be}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return R.\u0275fac=function(x){return new(x||R)(p.LFG(Ee))},R.\u0275prov=p.Yz7({token:R,factory:function(){return function $e(){return new re((0,p.LFG)(Ee))}()},providedIn:"platform"}),R})();function _e(){return!!window.history.pushState}function We(R,W){if(0==R.length)return W;if(0==W.length)return R;let x=0;return R.endsWith("/")&&x++,W.startsWith("/")&&x++,2==x?R+W.substring(1):1==x?R+W:R+"/"+W}function Ke(R){const W=R.match(/#|\?|$/),x=W&&W.index||R.length;return R.slice(0,x-("/"===R[x-1]?1:0))+R.slice(x)}function Et(R){return R&&"?"!==R[0]?"?"+R:R}let Ve=(()=>{class R{historyGo(x){throw new Error("Not implemented")}}return R.\u0275fac=function(x){return new(x||R)},R.\u0275prov=p.Yz7({token:R,factory:function(){return function Te(R){const W=(0,p.LFG)(Ee).location;return new H((0,p.LFG)(ue),W&&W.origin||"")}()},providedIn:"root"}),R})();const ct=new p.OlP("appBaseHref");let H=(()=>{class R extends Ve{constructor(x,Y){if(super(),this._platformLocation=x,this._removeListenerFns=[],null==Y&&(Y=this._platformLocation.getBaseHrefFromDOM()),null==Y)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Y}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return We(this._baseHref,x)}path(x=!1){const Y=this._platformLocation.pathname+Et(this._platformLocation.search),be=this._platformLocation.hash;return be&&x?`${Y}${be}`:Y}pushState(x,Y,be,it){const ot=this.prepareExternalUrl(be+Et(it));this._platformLocation.pushState(x,Y,ot)}replaceState(x,Y,be,it){const ot=this.prepareExternalUrl(be+Et(it));this._platformLocation.replaceState(x,Y,ot)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(x=0){var Y,be;null===(be=(Y=this._platformLocation).historyGo)||void 0===be||be.call(Y,x)}}return R.\u0275fac=function(x){return new(x||R)(p.LFG(ue),p.LFG(ct,8))},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac}),R})(),F=(()=>{class R extends Ve{constructor(x,Y){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(x){const Y=We(this._baseHref,x);return Y.length>0?"#"+Y:Y}pushState(x,Y,be,it){let ot=this.prepareExternalUrl(be+Et(it));0==ot.length&&(ot=this._platformLocation.pathname),this._platformLocation.pushState(x,Y,ot)}replaceState(x,Y,be,it){let ot=this.prepareExternalUrl(be+Et(it));0==ot.length&&(ot=this._platformLocation.pathname),this._platformLocation.replaceState(x,Y,ot)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(x=0){var Y,be;null===(be=(Y=this._platformLocation).historyGo)||void 0===be||be.call(Y,x)}}return R.\u0275fac=function(x){return new(x||R)(p.LFG(ue),p.LFG(ct,8))},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac}),R})(),te=(()=>{class R{constructor(x,Y){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=x;const be=this._platformStrategy.getBaseHref();this._platformLocation=Y,this._baseHref=Ke(Le(be)),this._platformStrategy.onPopState(it=>{this._subject.emit({url:this.path(!0),pop:!0,state:it.state,type:it.type})})}path(x=!1){return this.normalize(this._platformStrategy.path(x))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(x,Y=""){return this.path()==this.normalize(x+Et(Y))}normalize(x){return R.stripTrailingSlash(function Ue(R,W){return R&&W.startsWith(R)?W.substring(R.length):W}(this._baseHref,Le(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._platformStrategy.prepareExternalUrl(x)}go(x,Y="",be=null){this._platformStrategy.pushState(be,"",x,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+Et(Y)),be)}replaceState(x,Y="",be=null){this._platformStrategy.replaceState(be,"",x,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+Et(Y)),be)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(x=0){var Y,be;null===(be=(Y=this._platformStrategy).historyGo)||void 0===be||be.call(Y,x)}onUrlChange(x){this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)}))}_notifyUrlChangeListeners(x="",Y){this._urlChangeListeners.forEach(be=>be(x,Y))}subscribe(x,Y,be){return this._subject.subscribe({next:x,error:Y,complete:be})}}return R.normalizeQueryParams=Et,R.joinWithSlash=We,R.stripTrailingSlash=Ke,R.\u0275fac=function(x){return new(x||R)(p.LFG(Ve),p.LFG(ue))},R.\u0275prov=p.Yz7({token:R,factory:function(){return function pe(){return new te((0,p.LFG)(Ve),(0,p.LFG)(ue))}()},providedIn:"root"}),R})();function Le(R){return R.replace(/\/index.html$/,"")}var ve=(()=>((ve=ve||{})[ve.Decimal=0]="Decimal",ve[ve.Percent=1]="Percent",ve[ve.Currency=2]="Currency",ve[ve.Scientific=3]="Scientific",ve))(),Pe=(()=>((Pe=Pe||{})[Pe.Format=0]="Format",Pe[Pe.Standalone=1]="Standalone",Pe))(),ce=(()=>((ce=ce||{})[ce.Narrow=0]="Narrow",ce[ce.Abbreviated=1]="Abbreviated",ce[ce.Wide=2]="Wide",ce[ce.Short=3]="Short",ce))(),et=(()=>((et=et||{})[et.Short=0]="Short",et[et.Medium=1]="Medium",et[et.Long=2]="Long",et[et.Full=3]="Full",et))(),he=(()=>((he=he||{})[he.Decimal=0]="Decimal",he[he.Group=1]="Group",he[he.List=2]="List",he[he.PercentSign=3]="PercentSign",he[he.PlusSign=4]="PlusSign",he[he.MinusSign=5]="MinusSign",he[he.Exponential=6]="Exponential",he[he.SuperscriptingExponent=7]="SuperscriptingExponent",he[he.PerMille=8]="PerMille",he[he.Infinity=9]="Infinity",he[he.NaN=10]="NaN",he[he.TimeSeparator=11]="TimeSeparator",he[he.CurrencyDecimal=12]="CurrencyDecimal",he[he.CurrencyGroup=13]="CurrencyGroup",he))();function dt(R,W){return Tn((0,p.cg1)(R)[p.wAp.DateFormat],W)}function hn(R,W){return Tn((0,p.cg1)(R)[p.wAp.TimeFormat],W)}function fn(R,W){return Tn((0,p.cg1)(R)[p.wAp.DateTimeFormat],W)}function on(R,W){const x=(0,p.cg1)(R),Y=x[p.wAp.NumberSymbols][W];if(void 0===Y){if(W===he.CurrencyDecimal)return x[p.wAp.NumberSymbols][he.Decimal];if(W===he.CurrencyGroup)return x[p.wAp.NumberSymbols][he.Group]}return Y}function ir(R){if(!R[p.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${R[p.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Tn(R,W){for(let x=W;x>-1;x--)if(void 0!==R[x])return R[x];throw new Error("Locale data API: locale data undefined")}function jt(R){const[W,x]=R.split(":");return{hours:+W,minutes:+x}}const _r=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ti={},Gr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var bn=(()=>((bn=bn||{})[bn.Short=0]="Short",bn[bn.ShortGMT=1]="ShortGMT",bn[bn.Long=2]="Long",bn[bn.Extended=3]="Extended",bn))(),Vt=(()=>((Vt=Vt||{})[Vt.FullYear=0]="FullYear",Vt[Vt.Month=1]="Month",Vt[Vt.Date=2]="Date",Vt[Vt.Hours=3]="Hours",Vt[Vt.Minutes=4]="Minutes",Vt[Vt.Seconds=5]="Seconds",Vt[Vt.FractionalSeconds=6]="FractionalSeconds",Vt[Vt.Day=7]="Day",Vt))(),Kt=(()=>((Kt=Kt||{})[Kt.DayPeriods=0]="DayPeriods",Kt[Kt.Days=1]="Days",Kt[Kt.Months=2]="Months",Kt[Kt.Eras=3]="Eras",Kt))();function nr(R,W,x,Y){let be=function we(R){if(ke(R))return R;if("number"==typeof R&&!isNaN(R))return new Date(R);if("string"==typeof R){if(R=R.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(R)){const[be,it=1,ot=1]=R.split("-").map(Lt=>+Lt);return vr(be,it-1,ot)}const x=parseFloat(R);if(!isNaN(R-x))return new Date(x);let Y;if(Y=R.match(_r))return function ae(R){const W=new Date(0);let x=0,Y=0;const be=R[8]?W.setUTCFullYear:W.setFullYear,it=R[8]?W.setUTCHours:W.setHours;R[9]&&(x=Number(R[9]+R[10]),Y=Number(R[9]+R[11])),be.call(W,Number(R[1]),Number(R[2])-1,Number(R[3]));const ot=Number(R[4]||0)-x,Lt=Number(R[5]||0)-Y,Xn=Number(R[6]||0),$n=Math.floor(1e3*parseFloat("0."+(R[7]||0)));return it.call(W,ot,Lt,Xn,$n),W}(Y)}const W=new Date(R);if(!ke(W))throw new Error(`Unable to convert "${R}" into a date`);return W}(R);W=An(x,W)||W;let Lt,ot=[];for(;W;){if(Lt=Gr.exec(W),!Lt){ot.push(W);break}{ot=ot.concat(Lt.slice(1));const wn=ot.pop();if(!wn)break;W=wn}}let Xn=be.getTimezoneOffset();Y&&(Xn=ze(Y,Xn),be=function xe(R,W,x){const Y=x?-1:1,be=R.getTimezoneOffset();return function Nt(R,W){return(R=new Date(R.getTime())).setMinutes(R.getMinutes()+W),R}(R,Y*(ze(W,be)-be))}(be,Y,!0));let $n="";return ot.forEach(wn=>{const Sn=function nt(R){if(Ae[R])return Ae[R];let W;switch(R){case"G":case"GG":case"GGG":W=Ze(Kt.Eras,ce.Abbreviated);break;case"GGGG":W=Ze(Kt.Eras,ce.Wide);break;case"GGGGG":W=Ze(Kt.Eras,ce.Narrow);break;case"y":W=Zt(Vt.FullYear,1,0,!1,!0);break;case"yy":W=Zt(Vt.FullYear,2,0,!0,!0);break;case"yyy":W=Zt(Vt.FullYear,3,0,!1,!0);break;case"yyyy":W=Zt(Vt.FullYear,4,0,!1,!0);break;case"Y":W=ne(1);break;case"YY":W=ne(2,!0);break;case"YYY":W=ne(3);break;case"YYYY":W=ne(4);break;case"M":case"L":W=Zt(Vt.Month,1,1);break;case"MM":case"LL":W=Zt(Vt.Month,2,1);break;case"MMM":W=Ze(Kt.Months,ce.Abbreviated);break;case"MMMM":W=Ze(Kt.Months,ce.Wide);break;case"MMMMM":W=Ze(Kt.Months,ce.Narrow);break;case"LLL":W=Ze(Kt.Months,ce.Abbreviated,Pe.Standalone);break;case"LLLL":W=Ze(Kt.Months,ce.Wide,Pe.Standalone);break;case"LLLLL":W=Ze(Kt.Months,ce.Narrow,Pe.Standalone);break;case"w":W=fe(1);break;case"ww":W=fe(2);break;case"W":W=fe(1,!0);break;case"d":W=Zt(Vt.Date,1);break;case"dd":W=Zt(Vt.Date,2);break;case"c":case"cc":W=Zt(Vt.Day,1);break;case"ccc":W=Ze(Kt.Days,ce.Abbreviated,Pe.Standalone);break;case"cccc":W=Ze(Kt.Days,ce.Wide,Pe.Standalone);break;case"ccccc":W=Ze(Kt.Days,ce.Narrow,Pe.Standalone);break;case"cccccc":W=Ze(Kt.Days,ce.Short,Pe.Standalone);break;case"E":case"EE":case"EEE":W=Ze(Kt.Days,ce.Abbreviated);break;case"EEEE":W=Ze(Kt.Days,ce.Wide);break;case"EEEEE":W=Ze(Kt.Days,ce.Narrow);break;case"EEEEEE":W=Ze(Kt.Days,ce.Short);break;case"a":case"aa":case"aaa":W=Ze(Kt.DayPeriods,ce.Abbreviated);break;case"aaaa":W=Ze(Kt.DayPeriods,ce.Wide);break;case"aaaaa":W=Ze(Kt.DayPeriods,ce.Narrow);break;case"b":case"bb":case"bbb":W=Ze(Kt.DayPeriods,ce.Abbreviated,Pe.Standalone,!0);break;case"bbbb":W=Ze(Kt.DayPeriods,ce.Wide,Pe.Standalone,!0);break;case"bbbbb":W=Ze(Kt.DayPeriods,ce.Narrow,Pe.Standalone,!0);break;case"B":case"BB":case"BBB":W=Ze(Kt.DayPeriods,ce.Abbreviated,Pe.Format,!0);break;case"BBBB":W=Ze(Kt.DayPeriods,ce.Wide,Pe.Format,!0);break;case"BBBBB":W=Ze(Kt.DayPeriods,ce.Narrow,Pe.Format,!0);break;case"h":W=Zt(Vt.Hours,1,-12);break;case"hh":W=Zt(Vt.Hours,2,-12);break;case"H":W=Zt(Vt.Hours,1);break;case"HH":W=Zt(Vt.Hours,2);break;case"m":W=Zt(Vt.Minutes,1);break;case"mm":W=Zt(Vt.Minutes,2);break;case"s":W=Zt(Vt.Seconds,1);break;case"ss":W=Zt(Vt.Seconds,2);break;case"S":W=Zt(Vt.FractionalSeconds,1);break;case"SS":W=Zt(Vt.FractionalSeconds,2);break;case"SSS":W=Zt(Vt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":W=Be(bn.Short);break;case"ZZZZZ":W=Be(bn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":W=Be(bn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":W=Be(bn.Long);break;default:return null}return Ae[R]=W,W}(wn);$n+=Sn?Sn(be,x,Xn):"''"===wn?"'":wn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),$n}function vr(R,W,x){const Y=new Date(0);return Y.setFullYear(R,W,x),Y.setHours(0,0,0),Y}function An(R,W){const x=function qe(R){return(0,p.cg1)(R)[p.wAp.LocaleId]}(R);if(ti[x]=ti[x]||{},ti[x][W])return ti[x][W];let Y="";switch(W){case"shortDate":Y=dt(R,et.Short);break;case"mediumDate":Y=dt(R,et.Medium);break;case"longDate":Y=dt(R,et.Long);break;case"fullDate":Y=dt(R,et.Full);break;case"shortTime":Y=hn(R,et.Short);break;case"mediumTime":Y=hn(R,et.Medium);break;case"longTime":Y=hn(R,et.Long);break;case"fullTime":Y=hn(R,et.Full);break;case"short":const be=An(R,"shortTime"),it=An(R,"shortDate");Y=Qn(fn(R,et.Short),[be,it]);break;case"medium":const ot=An(R,"mediumTime"),Lt=An(R,"mediumDate");Y=Qn(fn(R,et.Medium),[ot,Lt]);break;case"long":const Xn=An(R,"longTime"),$n=An(R,"longDate");Y=Qn(fn(R,et.Long),[Xn,$n]);break;case"full":const wn=An(R,"fullTime"),Sn=An(R,"fullDate");Y=Qn(fn(R,et.Full),[wn,Sn])}return Y&&(ti[x][W]=Y),Y}function Qn(R,W){return W&&(R=R.replace(/\{([^}]+)}/g,function(x,Y){return null!=W&&Y in W?W[Y]:x})),R}function Ln(R,W,x="-",Y,be){let it="";(R<0||be&&R<=0)&&(be?R=1-R:(R=-R,it=x));let ot=String(R);for(;ot.length<W;)ot="0"+ot;return Y&&(ot=ot.substr(ot.length-W)),it+ot}function Zt(R,W,x=0,Y=!1,be=!1){return function(it,ot){let Lt=function sr(R,W){switch(R){case Vt.FullYear:return W.getFullYear();case Vt.Month:return W.getMonth();case Vt.Date:return W.getDate();case Vt.Hours:return W.getHours();case Vt.Minutes:return W.getMinutes();case Vt.Seconds:return W.getSeconds();case Vt.FractionalSeconds:return W.getMilliseconds();case Vt.Day:return W.getDay();default:throw new Error(`Unknown DateType value "${R}".`)}}(R,it);if((x>0||Lt>-x)&&(Lt+=x),R===Vt.Hours)0===Lt&&-12===x&&(Lt=12);else if(R===Vt.FractionalSeconds)return function ur(R,W){return Ln(R,3).substr(0,W)}(Lt,W);const Xn=on(ot,he.MinusSign);return Ln(Lt,W,Xn,Y,be)}}function Ze(R,W,x=Pe.Format,Y=!1){return function(be,it){return function gt(R,W,x,Y,be,it){switch(x){case Kt.Months:return function vt(R,W,x){const Y=(0,p.cg1)(R),it=Tn([Y[p.wAp.MonthsFormat],Y[p.wAp.MonthsStandalone]],W);return Tn(it,x)}(W,be,Y)[R.getMonth()];case Kt.Days:return function Qe(R,W,x){const Y=(0,p.cg1)(R),it=Tn([Y[p.wAp.DaysFormat],Y[p.wAp.DaysStandalone]],W);return Tn(it,x)}(W,be,Y)[R.getDay()];case Kt.DayPeriods:const ot=R.getHours(),Lt=R.getMinutes();if(it){const $n=function Zn(R){const W=(0,p.cg1)(R);return ir(W),(W[p.wAp.ExtraData][2]||[]).map(Y=>"string"==typeof Y?jt(Y):[jt(Y[0]),jt(Y[1])])}(W),wn=function Gt(R,W,x){const Y=(0,p.cg1)(R);ir(Y);const it=Tn([Y[p.wAp.ExtraData][0],Y[p.wAp.ExtraData][1]],W)||[];return Tn(it,x)||[]}(W,be,Y),Sn=$n.findIndex(Nr=>{if(Array.isArray(Nr)){const[ar,gr]=Nr,k=ot>=ar.hours&&Lt>=ar.minutes,S=ot<gr.hours||ot===gr.hours&&Lt<gr.minutes;if(ar.hours<gr.hours){if(k&&S)return!0}else if(k||S)return!0}else if(Nr.hours===ot&&Nr.minutes===Lt)return!0;return!1});if(-1!==Sn)return wn[Sn]}return function ht(R,W,x){const Y=(0,p.cg1)(R),it=Tn([Y[p.wAp.DayPeriodsFormat],Y[p.wAp.DayPeriodsStandalone]],W);return Tn(it,x)}(W,be,Y)[ot<12?0:1];case Kt.Eras:return function Pt(R,W){return Tn((0,p.cg1)(R)[p.wAp.Eras],W)}(W,Y)[R.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${x}`)}}(be,it,R,W,x,Y)}}function Be(R){return function(W,x,Y){const be=-1*Y,it=on(x,he.MinusSign),ot=be>0?Math.floor(be/60):Math.ceil(be/60);switch(R){case bn.Short:return(be>=0?"+":"")+Ln(ot,2,it)+Ln(Math.abs(be%60),2,it);case bn.ShortGMT:return"GMT"+(be>=0?"+":"")+Ln(ot,1,it);case bn.Long:return"GMT"+(be>=0?"+":"")+Ln(ot,2,it)+":"+Ln(Math.abs(be%60),2,it);case bn.Extended:return 0===Y?"Z":(be>=0?"+":"")+Ln(ot,2,it)+":"+Ln(Math.abs(be%60),2,it);default:throw new Error(`Unknown zone width "${R}"`)}}}function qt(R){return vr(R.getFullYear(),R.getMonth(),R.getDate()+(4-R.getDay()))}function fe(R,W=!1){return function(x,Y){let be;if(W){const it=new Date(x.getFullYear(),x.getMonth(),1).getDay()-1,ot=x.getDate();be=1+Math.floor((ot+it)/7)}else{const it=qt(x),ot=function pn(R){const W=vr(R,0,1).getDay();return vr(R,0,1+(W<=4?4:11)-W)}(it.getFullYear()),Lt=it.getTime()-ot.getTime();be=1+Math.round(Lt/6048e5)}return Ln(be,R,on(Y,he.MinusSign))}}function ne(R,W=!1){return function(x,Y){return Ln(qt(x).getFullYear(),R,on(Y,he.MinusSign),W)}}const Ae={};function ze(R,W){R=R.replace(/:/g,"");const x=Date.parse("Jan 01, 1970 00:00:00 "+R)/6e4;return isNaN(x)?W:x}function ke(R){return R instanceof Date&&!isNaN(R.valueOf())}const at=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ni(R){const W=parseInt(R);if(isNaN(W))throw new Error("Invalid integer literal when parsing "+R);return W}function ri(R,W){W=encodeURIComponent(W);for(const x of R.split(";")){const Y=x.indexOf("="),[be,it]=-1==Y?[x,""]:[x.slice(0,Y),x.slice(Y+1)];if(be.trim()===W)return decodeURIComponent(it)}return null}let Fi=(()=>{class R{constructor(x,Y,be,it){this._iterableDiffers=x,this._keyValueDiffers=Y,this._ngEl=be,this._renderer=it,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(x){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof x?x.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(x){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof x?x.split(/\s+/):x,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const x=this._iterableDiffer.diff(this._rawClass);x&&this._applyIterableChanges(x)}else if(this._keyValueDiffer){const x=this._keyValueDiffer.diff(this._rawClass);x&&this._applyKeyValueChanges(x)}}_applyKeyValueChanges(x){x.forEachAddedItem(Y=>this._toggleClass(Y.key,Y.currentValue)),x.forEachChangedItem(Y=>this._toggleClass(Y.key,Y.currentValue)),x.forEachRemovedItem(Y=>{Y.previousValue&&this._toggleClass(Y.key,!1)})}_applyIterableChanges(x){x.forEachAddedItem(Y=>{if("string"!=typeof Y.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(Y.item)}`);this._toggleClass(Y.item,!0)}),x.forEachRemovedItem(Y=>this._toggleClass(Y.item,!1))}_applyClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(Y=>this._toggleClass(Y,!0)):Object.keys(x).forEach(Y=>this._toggleClass(Y,!!x[Y])))}_removeClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(Y=>this._toggleClass(Y,!1)):Object.keys(x).forEach(Y=>this._toggleClass(Y,!1)))}_toggleClass(x,Y){(x=x.trim())&&x.split(/\s+/g).forEach(be=>{Y?this._renderer.addClass(this._ngEl.nativeElement,be):this._renderer.removeClass(this._ngEl.nativeElement,be)})}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},R.\u0275dir=p.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),R})();class Ar{constructor(W,x,Y,be){this.$implicit=W,this.ngForOf=x,this.index=Y,this.count=be}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pn=(()=>{class R{constructor(x,Y,be){this._viewContainer=x,this._template=Y,this._differs=be,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const Y=this._viewContainer;x.forEachOperation((be,it,ot)=>{if(null==be.previousIndex)Y.createEmbeddedView(this._template,new Ar(be.item,this._ngForOf,-1,-1),null===ot?void 0:ot);else if(null==ot)Y.remove(null===it?void 0:it);else if(null!==it){const Lt=Y.get(it);Y.move(Lt,ot),qr(Lt,be)}});for(let be=0,it=Y.length;be<it;be++){const Lt=Y.get(be).context;Lt.index=be,Lt.count=it,Lt.ngForOf=this._ngForOf}x.forEachIdentityChange(be=>{qr(Y.get(be.currentIndex),be)})}static ngTemplateContextGuard(x,Y){return!0}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},R.\u0275dir=p.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),R})();function qr(R,W){R.context.$implicit=W.item}let Sr=(()=>{class R{constructor(x,Y){this._viewContainer=x,this._context=new Kn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){os("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){os("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,Y){return!0}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.s_b),p.Y36(p.Rgc))},R.\u0275dir=p.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),R})();class Kn{constructor(){this.$implicit=null,this.ngIf=null}}function os(R,W){if(W&&!W.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,p.AaK)(W)}'.`)}function rr(R,W){return new p.vHH(2100,"")}class Ss{createSubscription(W,x){return W.subscribe({next:x,error:Y=>{throw Y}})}dispose(W){W.unsubscribe()}onDestroy(W){W.unsubscribe()}}class Ms{createSubscription(W,x){return W.then(x,Y=>{throw Y})}dispose(W){}onDestroy(W){}}const Fe=new Ms,Ne=new Ss;let Je=(()=>{class R{constructor(x){this._ref=x,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(x){return this._obj?x!==this._obj?(this._dispose(),this.transform(x)):this._latestValue:(x&&this._subscribe(x),this._latestValue)}_subscribe(x){this._obj=x,this._strategy=this._selectStrategy(x),this._subscription=this._strategy.createSubscription(x,Y=>this._updateLatestValue(x,Y))}_selectStrategy(x){if((0,p.QGY)(x))return Fe;if((0,p.F4k)(x))return Ne;throw rr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(x,Y){x===this._obj&&(this._latestValue=Y,this._ref.markForCheck())}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.sBO,16))},R.\u0275pipe=p.Yjl({name:"async",type:R,pure:!1}),R})();const Pr=new p.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let kn=(()=>{class R{constructor(x,Y){this.locale=x,this.defaultTimezone=Y}transform(x,Y="mediumDate",be,it){var ot;if(null==x||""===x||x!=x)return null;try{return nr(x,Y,it||this.locale,null!==(ot=null!=be?be:this.defaultTimezone)&&void 0!==ot?ot:void 0)}catch(Lt){throw rr()}}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.soG,16),p.Y36(Pr,24))},R.\u0275pipe=p.Yjl({name:"date",type:R,pure:!0}),R})(),ys=(()=>{class R{transform(x){return JSON.stringify(x,null,2)}}return R.\u0275fac=function(x){return new(x||R)},R.\u0275pipe=p.Yjl({name:"json",type:R,pure:!1}),R})(),Er=(()=>{class R{constructor(x){this._locale=x}transform(x,Y,be){if(!function us(R){return!(null==R||""===R||R!=R)}(x))return null;be=be||this._locale;try{return function Mt(R,W,x){return function Qr(R,W,x,Y,be,it,ot=!1){let Lt="",Xn=!1;if(isFinite(R)){let $n=function hi(R){let Y,be,it,ot,Lt,W=Math.abs(R)+"",x=0;for((be=W.indexOf("."))>-1&&(W=W.replace(".","")),(it=W.search(/e/i))>0?(be<0&&(be=it),be+=+W.slice(it+1),W=W.substring(0,it)):be<0&&(be=W.length),it=0;"0"===W.charAt(it);it++);if(it===(Lt=W.length))Y=[0],be=1;else{for(Lt--;"0"===W.charAt(Lt);)Lt--;for(be-=it,Y=[],ot=0;it<=Lt;it++,ot++)Y[ot]=Number(W.charAt(it))}return be>22&&(Y=Y.splice(0,21),x=be-1,be=1),{digits:Y,exponent:x,integerLen:be}}(R);ot&&($n=function wr(R){if(0===R.digits[0])return R;const W=R.digits.length-R.integerLen;return R.exponent?R.exponent+=2:(0===W?R.digits.push(0,0):1===W&&R.digits.push(0),R.integerLen+=2),R}($n));let wn=W.minInt,Sn=W.minFrac,Nr=W.maxFrac;if(it){const Z=it.match(at);if(null===Z)throw new Error(`${it} is not a valid digit info`);const ut=Z[1],en=Z[3],mr=Z[5];null!=ut&&(wn=ni(ut)),null!=en&&(Sn=ni(en)),null!=mr?Nr=ni(mr):null!=en&&Sn>Nr&&(Nr=Sn)}!function Tr(R,W,x){if(W>x)throw new Error(`The minimum number of digits after fraction (${W}) is higher than the maximum (${x}).`);let Y=R.digits,be=Y.length-R.integerLen;const it=Math.min(Math.max(W,be),x);let ot=it+R.integerLen,Lt=Y[ot];if(ot>0){Y.splice(Math.max(R.integerLen,ot));for(let Sn=ot;Sn<Y.length;Sn++)Y[Sn]=0}else{be=Math.max(0,be),R.integerLen=1,Y.length=Math.max(1,ot=it+1),Y[0]=0;for(let Sn=1;Sn<ot;Sn++)Y[Sn]=0}if(Lt>=5)if(ot-1<0){for(let Sn=0;Sn>ot;Sn--)Y.unshift(0),R.integerLen++;Y.unshift(1),R.integerLen++}else Y[ot-1]++;for(;be<Math.max(0,it);be++)Y.push(0);let Xn=0!==it;const $n=W+R.integerLen,wn=Y.reduceRight(function(Sn,Nr,ar,gr){return gr[ar]=(Nr+=Sn)<10?Nr:Nr-10,Xn&&(0===gr[ar]&&ar>=$n?gr.pop():Xn=!1),Nr>=10?1:0},0);wn&&(Y.unshift(wn),R.integerLen++)}($n,Sn,Nr);let ar=$n.digits,gr=$n.integerLen;const k=$n.exponent;let S=[];for(Xn=ar.every(Z=>!Z);gr<wn;gr++)ar.unshift(0);for(;gr<0;gr++)ar.unshift(0);gr>0?S=ar.splice(gr,ar.length):(S=ar,ar=[0]);const b=[];for(ar.length>=W.lgSize&&b.unshift(ar.splice(-W.lgSize,ar.length).join(""));ar.length>W.gSize;)b.unshift(ar.splice(-W.gSize,ar.length).join(""));ar.length&&b.unshift(ar.join("")),Lt=b.join(on(x,Y)),S.length&&(Lt+=on(x,be)+S.join("")),k&&(Lt+=on(x,he.Exponential)+"+"+k)}else Lt=on(x,he.Infinity);return Lt=R<0&&!Xn?W.negPre+Lt+W.negSuf:W.posPre+Lt+W.posSuf,Lt}(R,function yn(R,W="-"){const x={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Y=R.split(";"),be=Y[0],it=Y[1],ot=-1!==be.indexOf(".")?be.split("."):[be.substring(0,be.lastIndexOf("0")+1),be.substring(be.lastIndexOf("0")+1)],Lt=ot[0],Xn=ot[1]||"";x.posPre=Lt.substr(0,Lt.indexOf("#"));for(let wn=0;wn<Xn.length;wn++){const Sn=Xn.charAt(wn);"0"===Sn?x.minFrac=x.maxFrac=wn+1:"#"===Sn?x.maxFrac=wn+1:x.posSuf+=Sn}const $n=Lt.split(",");if(x.gSize=$n[1]?$n[1].length:0,x.lgSize=$n[2]||$n[1]?($n[2]||$n[1]).length:0,it){const wn=be.length-x.posPre.length-x.posSuf.length,Sn=it.indexOf("#");x.negPre=it.substr(0,Sn).replace(/'/g,""),x.negSuf=it.substr(Sn+wn).replace(/'/g,"")}else x.negPre=W+x.posPre,x.negSuf=x.posSuf;return x}(function zn(R,W){return(0,p.cg1)(R)[p.wAp.NumberFormats][W]}(W,ve.Percent),on(W,he.MinusSign)),W,he.Group,he.Decimal,x,!0).replace(new RegExp("%","g"),on(W,he.PercentSign))}(function ls(R){if("string"==typeof R&&!isNaN(Number(R)-parseFloat(R)))return Number(R);if("number"!=typeof R)throw new Error(`${R} is not a number`);return R}(x),be,Y)}catch(it){throw rr()}}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.soG,16))},R.\u0275pipe=p.Yjl({name:"percent",type:R,pure:!0}),R})();let bi=(()=>{class R{}return R.\u0275fac=function(x){return new(x||R)},R.\u0275mod=p.oAB({type:R}),R.\u0275inj=p.cJS({}),R})();const Ki="browser";function kr(R){return"server"===R}let si=(()=>{class R{}return R.\u0275prov=(0,p.Yz7)({token:R,providedIn:"root",factory:()=>new rs((0,p.LFG)(Ee),window)}),R})();class rs{constructor(W,x){this.document=W,this.window=x,this.offset=()=>[0,0]}setOffset(W){this.offset=Array.isArray(W)?()=>W:W}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(W){this.supportsScrolling()&&this.window.scrollTo(W[0],W[1])}scrollToAnchor(W){if(!this.supportsScrolling())return;const x=function mi(R,W){const x=R.getElementById(W)||R.getElementsByName(W)[0];if(x)return x;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const Y=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let be=Y.currentNode;for(;be;){const it=be.shadowRoot;if(it){const ot=it.getElementById(W)||it.querySelector(`[name="${W}"]`);if(ot)return ot}be=Y.nextNode()}}return null}(this.document,W);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(W){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=W)}}scrollToElement(W){const x=W.getBoundingClientRect(),Y=x.left+this.window.pageXOffset,be=x.top+this.window.pageYOffset,it=this.offset();this.window.scrollTo(Y-it[0],be-it[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const W=gi(this.window.history)||gi(Object.getPrototypeOf(this.window.history));return!(!W||!W.writable&&!W.set)}catch(W){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(W){return!1}}}function gi(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class cr{}},5e3:(pt,Se,T)=>{"use strict";T.d(Se,{$8M:()=>Du,$Z:()=>Vm,AFp:()=>pE,ALo:()=>L0,AaK:()=>ue,BQk:()=>df,CHM:()=>rt,CRH:()=>z0,CZH:()=>vv,CqO:()=>jm,DdM:()=>M0,EJc:()=>CI,EiD:()=>Pu,EpF:()=>Bm,F$t:()=>$m,F4k:()=>T_,FYo:()=>E0,FiY:()=>lo,G48:()=>zI,GfV:()=>w0,Gpc:()=>re,Hsn:()=>Jp,JOm:()=>lt,JVY:()=>th,L6k:()=>Mu,LAX:()=>nh,LFG:()=>un,LSH:()=>ei,Lbi:()=>yE,MAs:()=>rf,NdJ:()=>Qp,O4$:()=>So,OlP:()=>tn,Oqu:()=>mf,PXZ:()=>UI,Q6J:()=>qp,QGY:()=>Yp,Qsj:()=>Dw,R0b:()=>pu,RDi:()=>gi,Rgc:()=>Sg,SBq:()=>bg,Sil:()=>AI,Suo:()=>W0,TTD:()=>us,TgZ:()=>Zp,VKq:()=>x0,VLi:()=>FI,W1O:()=>Y0,WLB:()=>R0,X6Q:()=>WI,XFs:()=>Gt,Xpm:()=>qt,Y36:()=>zl,YKP:()=>C0,YNc:()=>Rm,Yjl:()=>ae,Yz7:()=>dt,ZZ4:()=>Ov,_Bn:()=>y0,_UZ:()=>cf,_Vd:()=>Ey,_c5:()=>uD,_uU:()=>Xm,aQg:()=>Pv,c2e:()=>vE,cJS:()=>fn,cg1:()=>vf,dDg:()=>IE,deG:()=>Yc,dqk:()=>An,eBb:()=>kf,eFA:()=>CE,ekj:()=>gf,g9A:()=>mE,h0i:()=>Tf,hGG:()=>lD,hij:()=>_a,iGM:()=>G0,ifc:()=>bn,ip1:()=>fE,kL8:()=>Gc,kcU:()=>yu,lG2:()=>we,lcZ:()=>V0,mCW:()=>xa,n5z:()=>nc,oAB:()=>ze,oxw:()=>Nd,pB0:()=>td,q3G:()=>er,q4F:()=>I0,qLn:()=>li,qOj:()=>Sp,qZA:()=>Gi,qzn:()=>Xa,sBO:()=>KI,sIi:()=>Hl,s_b:()=>Dy,soG:()=>wv,tBr:()=>hs,tb:()=>_E,tp0:()=>vo,uIk:()=>tf,vHH:()=>Ke,vpe:()=>ul,wAp:()=>Mn,xp6:()=>zf,yhl:()=>uc,ynx:()=>kd,z2F:()=>Tv,z3N:()=>Lo,zSh:()=>gp,zs3:()=>ha});var p=T(7579),N=T(727),G=T(9751),de=T(6451),ie=T(3099);function me(n){for(let r in n)if(n[r]===me)return r;throw Error("Could not find renamed property on target object.")}function Ee(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function ue(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ue).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ie(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const le=me({__forward_ref__:me});function re(n){return n.__forward_ref__=re,n.toString=function(){return ue(this())},n}function _e(n){return $e(n)?n():n}function $e(n){return"function"==typeof n&&n.hasOwnProperty(le)&&n.__forward_ref__===re}class Ke extends Error{constructor(r,s){super(function Et(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ve(n){return"string"==typeof n?n:null==n?"":String(n)}function Te(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ve(n)}function te(n,r){const s=r?` in ${r}`:"";throw new Ke(-201,`No provider for ${Te(n)} found${s}`)}function Qe(n,r){null==n&&function vt(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function dt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fn(n){return{providers:n.providers||[],imports:n.imports||[]}}function on(n){return zn(n,En)||zn(n,ir)}function zn(n,r){return n.hasOwnProperty(r)?n[r]:null}function On(n){return n&&(n.hasOwnProperty(Un)||n.hasOwnProperty(Zn))?n[Un]:null}const En=me({\u0275prov:me}),Un=me({\u0275inj:me}),ir=me({ngInjectableDef:me}),Zn=me({ngInjectorDef:me});var Gt=(()=>((Gt=Gt||{})[Gt.Default=0]="Default",Gt[Gt.Host=1]="Host",Gt[Gt.Self=2]="Self",Gt[Gt.SkipSelf=4]="SkipSelf",Gt[Gt.Optional=8]="Optional",Gt))();let ln;function jt(n){const r=ln;return ln=n,r}function xr(n,r,s){const a=on(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Gt.Optional?null:void 0!==r?r:void te(ue(n),"Injector")}function Yn(n){return{toString:n}.toString()}var _r=(()=>((_r=_r||{})[_r.OnPush=0]="OnPush",_r[_r.Default=1]="Default",_r))(),bn=(()=>{return(n=bn||(bn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",bn;var n})();const Vt="undefined"!=typeof globalThis&&globalThis,Kt="undefined"!=typeof window&&window,nr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,An=Vt||"undefined"!=typeof global&&global||Kt||nr,ur={},Zt=[],sr=me({\u0275cmp:me}),Ze=me({\u0275dir:me}),gt=me({\u0275pipe:me}),Be=me({\u0275mod:me}),At=me({\u0275fac:me}),$t=me({__NG_ELEMENT_ID__:me});let pn=0;function qt(n){return Yn(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===_r.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Zt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||bn.Emulated,id:"c",styles:n.styles||Zt,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.directives,h=n.features,y=n.pipes;return a.id+=pn++,a.inputs=xe(n.inputs,s),a.outputs=xe(n.outputs),h&&h.forEach(w=>w(a)),a.directiveDefs=l?()=>("function"==typeof l?l():l).map(ne):null,a.pipeDefs=y?()=>("function"==typeof y?y():y).map(Ae):null,a})}function ne(n){return ke(n)||function at(n){return n[Ze]||null}(n)}function Ae(n){return function kt(n){return n[gt]||null}(n)}const nt={};function ze(n){return Yn(()=>{const r={type:n.type,bootstrap:n.bootstrap||Zt,declarations:n.declarations||Zt,imports:n.imports||Zt,exports:n.exports||Zt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(nt[n.id]=n.type),r})}function xe(n,r){if(null==n)return ur;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const we=qt;function ae(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function ke(n){return n[sr]||null}function Jt(n,r){const s=n[Be]||null;if(!s&&!0===r)throw new Error(`Type ${ue(n)} does not have '\u0275mod' property.`);return s}function lr(n){return Array.isArray(n)&&"object"==typeof n[1]}function _i(n){return Array.isArray(n)&&!0===n[1]}function zi(n){return 0!=(8&n.flags)}function fi(n){return 2==(2&n.flags)}function Ds(n){return 1==(1&n.flags)}function pi(n){return null!==n.template}function Zr(n){return 0!=(512&n[2])}function Er(n,r){return n.hasOwnProperty(At)?n[At]:null}class as{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function us(){return ls}function ls(n){return n.type.prototype.ngOnChanges&&(n.setInput=Bs),to}function to(){const n=Ki(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===ur)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Bs(n,r,s,a){const l=Ki(n)||function Jr(n,r){return n[bi]=r}(n,{previous:ur,current:null}),h=l.current||(l.current={}),y=l.previous,w=this.declaredInputs[s],C=y[w];h[w]=new as(C&&C.currentValue,r,y===ur),n[a]=r}us.ngInherit=!0;const bi="__ngSimpleChanges__";function Ki(n){return n[bi]||null}let rs;function gi(n){rs=n}function cr(n){return!!n.listen}const R={createRenderer:(n,r)=>function mi(){return void 0!==rs?rs:"undefined"!=typeof document?document:void 0}()};function x(n){for(;Array.isArray(n);)n=n[0];return n}function it(n,r){return x(r[n])}function ot(n,r){return x(r[n.index])}function Xn(n,r){return n.data[r]}function $n(n,r){return n[r]}function wn(n,r){const s=r[n];return lr(s)?s:s[0]}function Sn(n){return 4==(4&n[2])}function Nr(n){return 128==(128&n[2])}function gr(n,r){return null==r?null:n[r]}function k(n){n[18]=0}function S(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const b={lFrame:js(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function V(){return b.bindingsEnabled}function Q(){return b.lFrame.lView}function De(){return b.lFrame.tView}function rt(n){return b.lFrame.contextLView=n,n[8]}function wt(){let n=rn();for(;null!==n&&64===n.type;)n=n.parent;return n}function rn(){return b.lFrame.currentTNode}function _n(n,r){const s=b.lFrame;s.currentTNode=n,s.isParent=r}function qn(){return b.lFrame.isParent}function Vr(){b.lFrame.isParent=!1}function Hr(){return b.isInCheckNoChangesMode}function yi(n){b.isInCheckNoChangesMode=n}function Wn(){const n=b.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Fr(){return b.lFrame.bindingIndex++}function no(n,r){const s=b.lFrame;s.bindingIndex=s.bindingRootIndex=n,Ps(r)}function Ps(n){b.lFrame.currentDirectiveIndex=n}function Ea(){return b.lFrame.currentQueryIndex}function ja(n){b.lFrame.currentQueryIndex=n}function $a(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Bo(n,r,s){if(s&Gt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&Gt.Host||(l=$a(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=b.lFrame=Jo();return a.currentTNode=r,a.lView=n,!0}function fo(n){const r=Jo(),s=n[1];b.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Jo(){const n=b.lFrame,r=null===n?null:n.child;return null===r?js(n):r}function js(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function wa(){const n=b.lFrame;return b.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ks=wa;function ro(){const n=wa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ci(){return b.lFrame.selectedIndex}function Ao(n){b.lFrame.selectedIndex=n}function ai(){const n=b.lFrame;return Xn(n.tView,n.selectedIndex)}function So(){b.lFrame.currentNamespace="svg"}function yu(){!function Ti(){b.lFrame.currentNamespace=null}()}function Qi(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:B,ngOnDestroy:z}=h;y&&(n.contentHooks||(n.contentHooks=[])).push(-s,y),w&&((n.contentHooks||(n.contentHooks=[])).push(s,w),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,w)),C&&(n.viewHooks||(n.viewHooks=[])).push(-s,C),B&&((n.viewHooks||(n.viewHooks=[])).push(s,B),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,B)),null!=z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,z)}}function $s(n,r,s){na(n,r,3,s)}function Ns(n,r,s,a){(3&n[2])===s&&na(n,r,s,a)}function ui(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function na(n,r,s,a){const h=null!=a?a:-1,y=r.length-1;let w=0;for(let C=void 0!==a?65535&n[18]:0;C<y;C++)if("number"==typeof r[C+1]){if(w=r[C],null!=a&&w>=a)break}else r[C]<0&&(n[18]+=65536),(w<h||-1==h)&&(Ha(n,s,r,C),n[18]=(4294901760&n[18])+C+2),C++}function Ha(n,r,s,a){const l=s[a]<0,h=s[a+1],w=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(w)}finally{}}}else try{h.call(w)}finally{}}class io{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Ia(n,r,s){const a=cr(n);let l=0;for(;l<s.length;){const h=s[l];if("number"==typeof h){if(0!==h)break;l++;const y=s[l++],w=s[l++],C=s[l++];a?n.setAttribute(r,w,C,y):r.setAttributeNS(y,w,C)}else{const y=h,w=s[++l];go(y)?a&&n.setProperty(r,y,w):a?n.setAttribute(r,y,w):r.setAttribute(y,w),l++}}return l}function Gs(n){return 3===n||4===n||6===n}function go(n){return 64===n.charCodeAt(0)}function jo(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||$o(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function $o(n,r,s,a,l){let h=0,y=n.length;if(-1===r)y=-1;else for(;h<n.length;){const w=n[h++];if("number"==typeof w){if(w===r){y=-1;break}if(w>r){y=h-1;break}}}for(;h<n.length;){const w=n[h];if("number"==typeof w)break;if(w===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==y&&(n.splice(y,0,r),h=y+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Da(n){return-1!==n}function Br(n){return 32767&n}function Fs(n,r){let s=function Wa(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let ba=!0;function As(n){const r=ba;return ba=n,r}let E=0;function M(n,r){const s=$(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,L(a.data,n),L(r,null),L(a.blueprint,null));const l=se(n,r),h=n.injectorIndex;if(Da(l)){const y=Br(l),w=Fs(l,r),C=w[1].data;for(let B=0;B<8;B++)r[h+B]=w[y+B]|C[y+B]}return r[h+8]=l,h}function L(n,r){n.push(0,0,0,0,0,0,0,0,r)}function $(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function se(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){const h=l[1],y=h.type;if(a=2===y?h.declTNode:1===y?l[6]:null,null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function Ce(n,r,s){!function _(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty($t)&&(a=s[$t]),null==a&&(a=s[$t]=E++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function ft(n,r,s){if(s&Gt.Optional)return n;te(r,"NodeInjector")}function Ut(n,r,s,a){if(s&Gt.Optional&&void 0===a&&(a=null),0==(s&(Gt.Self|Gt.Host))){const l=n[9],h=jt(void 0);try{return l?l.get(r,a,s&Gt.Optional):xr(r,a,s&Gt.Optional)}finally{jt(h)}}return ft(a,r,s)}function cn(n,r,s,a=Gt.Default,l){if(null!==n){const h=function wu(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty($t)?n[$t]:void 0;return"number"==typeof r?r>=0?255&r:Ye:r}(s);if("function"==typeof h){if(!Bo(r,n,a))return a&Gt.Host?ft(l,s,a):Ut(r,s,a,l);try{const y=h(a);if(null!=y||a&Gt.Optional)return y;te(s)}finally{ks()}}else if("number"==typeof h){let y=null,w=$(n,r),C=-1,B=a&Gt.Host?r[16][6]:null;for((-1===w||a&Gt.SkipSelf)&&(C=-1===w?se(n,r):r[w+8],-1!==C&&Iu(a,!1)?(y=r[1],w=Br(C),r=Fs(C,r)):w=-1);-1!==w;){const z=r[1];if(mo(h,w,z.data)){const oe=Dt(w,r,s,y,a,B);if(oe!==Ct)return oe}C=r[w+8],-1!==C&&Iu(a,r[1].data[w+8]===B)&&mo(h,w,r)?(y=z,w=Br(C),r=Fs(C,r)):w=-1}}}return Ut(r,s,a,l)}const Ct={};function Ye(){return new yo(wt(),Q())}function Dt(n,r,s,a,l,h){const y=r[1],w=y.data[n+8],z=jr(w,y,s,null==a?fi(w)&&ba:a!=y&&0!=(3&w.type),l&Gt.Host&&h===w);return null!==z?Es(r,y,z,w):Ct}function jr(n,r,s,a,l){const h=n.providerIndexes,y=r.data,w=1048575&h,C=n.directiveStart,z=h>>20,Me=l?w+z:n.directiveEnd;for(let Xe=a?w:w+z;Xe<Me;Xe++){const It=y[Xe];if(Xe<C&&s===It||Xe>=C&&It.type===s)return Xe}if(l){const Xe=y[C];if(Xe&&pi(Xe)&&Xe.type===s)return C}return null}function Es(n,r,s,a){let l=n[s];const h=r.data;if(function ra(n){return n instanceof io}(l)){const y=l;y.resolving&&function ct(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ke(-200,`Circular dependency in DI detected for ${n}${s}`)}(Te(h[s]));const w=As(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?jt(y.injectImpl):null;Bo(n,a,Gt.Default);try{l=n[s]=y.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function ta(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const y=ls(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==C&&jt(C),As(w),y.resolving=!1,ks()}}return l}function mo(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Iu(n,r){return!(n&Gt.Self||n&Gt.Host&&r)}class yo{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return cn(this._tNode,this._lView,r,a,s)}}function nc(n){return Yn(()=>{const r=n.prototype.constructor,s=r[At]||ia(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[At]||ia(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function ia(n){return $e(n)?()=>{const r=ia(_e(n));return r&&r()}:Er(n)}function Du(n){return function yt(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Gs(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(wt(),n)}const Xi="__parameters__";function oo(n,r,s){return Yn(()=>{const a=function Nn(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const y=new l(...h);return w.annotation=y,w;function w(C,B,z){const oe=C.hasOwnProperty(Xi)?C[Xi]:Object.defineProperty(C,Xi,{value:[]})[Xi];for(;oe.length<=z;)oe.push(null);return(oe[z]=oe[z]||[]).push(y),C}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class tn{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=dt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Yc=new tn("AnalyzeForEntryComponents");function Ji(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Ji(a,r)):r!==n&&r.push(a)}return r}function Vs(n,r){n.forEach(s=>Array.isArray(s)?Vs(s,r):r(s))}function Ta(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ho(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Bi(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function ji(n,r,s){let a=_o(n,r);return a>=0?n[1|a]=s:(a=~a,function bu(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function ao(n,r){const s=_o(n,r);if(s>=0)return n[1|s]}function _o(n,r){return function Go(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),y=n[h<<s];if(r===y)return h<<s;y>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Wo={},Za="__NG_DI_FLAG__",hl="ngTempTokenPath",P=/\n/gm,ye="__source",je=me({provide:String,useValue:me});let tt;function Ft(n){const r=tt;return tt=n,r}function Xt(n,r=Gt.Default){if(void 0===tt)throw new Ke(203,"");return null===tt?xr(n,void 0,r):tt.get(n,r&Gt.Optional?null:void 0,r)}function un(n,r=Gt.Default){return(function Tn(){return ln}()||Xt)(_e(n),r)}const dr=un;function Fn(n){const r=[];for(let s=0;s<n.length;s++){const a=_e(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ke(900,"");let l,h=Gt.Default;for(let y=0;y<a.length;y++){const w=a[y],C=ki(w);"number"==typeof C?-1===C?l=w.token:h|=C:l=w}r.push(un(l,h))}else r.push(un(a))}return r}function Yr(n,r){return n[Za]=r,n.prototype[Za]=r,n}function ki(n){return n[Za]}const hs=Yr(oo("Inject",n=>({token:n})),-1),lo=Yr(oo("Optional"),8),vo=Yr(oo("SkipSelf"),4);let Eo;function No(n){var r;return(null===(r=function ic(){if(void 0===Eo&&(Eo=null,An.trustedTypes))try{Eo=An.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Eo}())||void 0===r?void 0:r.createHTML(n))||n}class Fo{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Jd extends Fo{getTypeName(){return"HTML"}}class Jc extends Fo{getTypeName(){return"Style"}}class ed extends Fo{getTypeName(){return"Script"}}class ac extends Fo{getTypeName(){return"URL"}}class eh extends Fo{getTypeName(){return"ResourceURL"}}function Lo(n){return n instanceof Fo?n.changingThisBreaksApplicationSecurity:n}function Xa(n,r){const s=uc(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function uc(n){return n instanceof Fo&&n.getTypeName()||null}function th(n){return new Jd(n)}function Mu(n){return new Jc(n)}function kf(n){return new ed(n)}function nh(n){return new ac(n)}function td(n){return new eh(n)}class eu{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(No(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class rh{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=No(r),s;const a=this.inertDocument.createElement("body");return a.innerHTML=No(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const s=r.attributes;for(let l=s.length-1;0<l;l--){const y=s.item(l).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&r.removeAttribute(y)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const Ma=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ih=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function xa(n){return(n=String(n)).match(Ma)||n.match(ih)?n:"unsafe:"+n}function wo(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function vl(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const $i=wo("area,br,col,hr,img,wbr"),tu=wo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),El=wo("rp,rt"),cc=vl($i,vl(tu,wo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vl(El,wo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vl(El,tu)),dc=wo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),nu=wo("srcset"),wl=vl(dc,nu,wo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),oh=wo("script,style,template");class Il{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!cc.hasOwnProperty(s))return this.sanitizedSomething=!0,!oh.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const h=a.item(l),y=h.name,w=y.toLowerCase();if(!wl.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let C=h.value;dc[w]&&(C=xa(C)),nu[w]&&(n=C,C=(n=String(n)).split(",").map(r=>xa(r.trim())).join(", ")),this.buf.push(" ",y,'="',Hi(C),'"')}var n;return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();cc.hasOwnProperty(s)&&!$i.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Hi(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Dl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nd=/([^\#-~ |!])/g;function Hi(n){return n.replace(/&/g,"&amp;").replace(Dl,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(nd,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let hr;function Pu(n,r){let s=null;try{hr=hr||function Ja(n){const r=new rh(n);return function xu(){try{return!!(new window.DOMParser).parseFromString(No(""),"text/html")}catch(n){return!1}}()?new eu(r):r}(n);let a=r?String(r):"";s=hr.getInertBodyElement(a);let l=5,h=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=h,h=s.innerHTML,s=hr.getInertBodyElement(a)}while(a!==h);return No((new Il).sanitizeChildren(hc(s)||s))}finally{if(s){const a=hc(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function hc(n){return"content"in n&&function Ra(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var er=(()=>((er=er||{})[er.NONE=0]="NONE",er[er.HTML=1]="HTML",er[er.STYLE=2]="STYLE",er[er.SCRIPT=3]="SCRIPT",er[er.URL=4]="URL",er[er.RESOURCE_URL=5]="RESOURCE_URL",er))();function ei(n){const r=function Cl(){const n=Q();return n&&n[12]}();return r?r.sanitize(er.URL,n)||"":Xa(n,"URL")?Lo(n):xa(Ve(n))}const iu="__ngContext__";function es(n,r){n[iu]=r}function gc(n){const r=function zo(n){return n[iu]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Ml(n){return n.ngOriginalError}function Fu(n,...r){n.error(...r)}class li{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function hh(n){return n&&n.ngErrorLogger||Fu}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ml(r);for(;s&&Ml(s);)s=Ml(s);return s||null}}const Ff=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(An))();function f(n){return n instanceof Function?n():n}var lt=(()=>((lt=lt||{})[lt.Important=1]="Important",lt[lt.DashCase=2]="DashCase",lt))();function dn(n,r){return undefined(n,r)}function Si(n){const r=n[3];return _i(r)?r[3]:r}function Ol(n){return _c(n[13])}function Oa(n){return _c(n[4])}function _c(n){for(;null!==n&&!_i(n);)n=n[4];return n}function Pa(n,r,s,a,l){if(null!=a){let h,y=!1;_i(a)?h=a:lr(a)&&(y=!0,a=a[0]);const w=x(a);0===n&&null!==s?null==l?_t(r,s,w):Vu(r,s,w,l||null,!0):1===n&&null!==s?Vu(r,s,w,l||null,!0):2===n?function wh(n,r,s){const a=yh(n,r);a&&function ua(n,r,s,a){cr(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,w,y):3===n&&r.destroyNode(w),null!=h&&function Ih(n,r,s,a,l){const h=s[7];h!==x(s)&&Pa(r,n,a,h,l);for(let w=10;w<s.length;w++){const C=s[w];wc(C[1],C,n,r,a,h)}}(r,n,h,s,l)}}function Ec(n,r,s){if(cr(n))return n.createElement(r,s);{const a=null!==s?function si(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Pg(n,r){const s=n[9],a=s.indexOf(r),l=r[3];1024&r[2]&&(r[2]&=-1025,S(l,-1)),s.splice(a,1)}function Bf(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&Pg(l,a),r>0&&(n[s-1][4]=a[4]);const h=Ho(n,10+r);!function Vf(n,r){wc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const y=h[19];null!==y&&y.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function kg(n,r){if(!(256&r[2])){const s=r[11];cr(s)&&s.destroyNode&&wc(n,r,s,3,null,null),function Ry(n){let r=n[13];if(!r)return mh(n[1],n);for(;r;){let s=null;if(lr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)lr(r)&&mh(r[1],r),r=r[3];null===r&&(r=n),lr(r)&&mh(r[1],r),s=r&&r[4]}r=s}}(r)}}function mh(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Ng(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof io)){const h=s[a+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const w=l[h[y]],C=h[y+1];try{C.call(w)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function ky(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const y=s[h+1],w="function"==typeof y?y(r):x(r[y]),C=a[l=s[h+2]],B=s[h+3];"boolean"==typeof B?w.removeEventListener(s[h],C,B):B>=0?a[l=B]():a[l=-B].unsubscribe(),h+=2}else{const y=a[l=s[h+1]];s[h].call(y)}if(null!==a){for(let h=l+1;h<a.length;h++)a[h]();r[7]=null}}(n,r),1===r[1].type&&cr(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&_i(r[3])){s!==r[3]&&Pg(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function Fg(n,r,s){return function jf(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===bn.None||l===bn.Emulated)return null}return ot(a,s)}(n,r.parent,s)}function Vu(n,r,s,a,l){cr(n)?n.insertBefore(r,s,a,l):r.insertBefore(s,a,l)}function _t(n,r,s){cr(n)?n.appendChild(r,s):r.appendChild(s)}function dd(n,r,s,a,l){null!==a?Vu(n,r,s,a,l):_t(n,r,s)}function yh(n,r){return cr(n)?n.parentNode(r):r.parentNode}function Uu(n,r,s){return Bu(n,r,s)}let Bu=function Lg(n,r,s){return 40&n.type?ot(n,s):null};function fd(n,r,s,a){const l=Fg(n,a,r),h=r[11],w=Uu(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let C=0;C<s.length;C++)dd(h,l,s[C],w,!1);else dd(h,l,s,w,!1)}function ss(n,r){if(null!==r){const s=r.type;if(3&s)return ot(r,n);if(4&s)return pd(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return ss(n,a);{const l=n[r.index];return _i(l)?pd(-1,l):x(l)}}if(32&s)return dn(r,n)()||x(n[r.index]);{const a=Eh(n,r);return null!==a?Array.isArray(a)?a[0]:ss(Si(n[16]),a):ss(n,r.next)}}return null}function Eh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function pd(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return ss(a,l)}return r[7]}function ka(n,r,s,a,l,h,y){for(;null!=s;){const w=a[s.index],C=s.type;if(y&&0===r&&(w&&es(x(w),a),s.flags|=4),64!=(64&s.flags))if(8&C)ka(n,r,s.child,a,l,h,!1),Pa(r,n,l,w,h);else if(32&C){const B=dn(s,a);let z;for(;z=B();)Pa(r,n,l,z,h);Pa(r,n,l,w,h)}else 16&C?$f(n,r,a,s,l,h):Pa(r,n,l,w,h);s=y?s.projectionNext:s.next}}function wc(n,r,s,a,l,h){ka(s,a,n.firstChild,r,l,h,!1)}function $f(n,r,s,a,l,h){const y=s[16],C=y[6].projection[a.projection];if(Array.isArray(C))for(let B=0;B<C.length;B++)Pa(r,n,l,C[B],h);else ka(n,r,C,y[3],l,h,!0)}function ju(n,r,s){cr(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function $u(n,r,s){cr(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function Ic(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Dh="ng-template";function Hf(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==Ic(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Gf(n){return 4===n.type&&n.value!==Dh}function Ly(n,r,s){return r===(4!==n.type||s?n.value:Dh)}function Vg(n,r,s){let a=4;const l=n.attrs||[],h=function Vy(n){for(let r=0;r<n.length;r++)if(Gs(n[r]))return r;return n.length}(l);let y=!1;for(let w=0;w<r.length;w++){const C=r[w];if("number"!=typeof C){if(!y)if(4&a){if(a=2|1&a,""!==C&&!Ly(n,C,s)||""===C&&1===r.length){if(qo(a))return!1;y=!0}}else{const B=8&a?C:r[++w];if(8&a&&null!==n.attrs){if(!Hf(n.attrs,B,s)){if(qo(a))return!1;y=!0}continue}const oe=Wf(8&a?"class":C,l,Gf(n),s);if(-1===oe){if(qo(a))return!1;y=!0;continue}if(""!==B){let Me;Me=oe>h?"":l[oe+1].toLowerCase();const Xe=8&a?Me:null;if(Xe&&-1!==Ic(Xe,B,0)||2&a&&B!==Me){if(qo(a))return!1;y=!0}}}}else{if(!y&&!qo(a)&&!qo(C))return!1;if(y&&qo(C))continue;y=!1,a=C|1&a}}return qo(a)||y}function qo(n){return 0==(1&n)}function Wf(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const y=r[l];if(y===n)return l;if(3===y||6===y)h=!0;else{if(1===y||2===y){let w=r[++l];for(;"string"==typeof w;)w=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=h?1:2}return-1}return function Ug(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Dc(n,r,s=!1){for(let a=0;a<r.length;a++)if(Vg(n,r[a],s))return!0;return!1}function Uy(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let l=0;l<n.length;l++)if(n[l]!==a[l])continue e;return!0}}return!1}function Bg(n,r){return n?":not("+r.trim()+")":r}function By(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let y=n[s];if("string"==typeof y)if(2&a){const w=n[++s];l+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!qo(y)&&(r+=Bg(h,l),l=""),a=y,h=h||!qo(a);s++}return""!==l&&(r+=Bg(h,l)),r}const xn={};function zf(n){jg(De(),Q(),Ci()+n,Hr())}function jg(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&$s(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Ns(r,h,0,s)}Ao(s)}function bc(n,r){return n<<17|r<<2}function Ys(n){return n>>17&32767}function Nl(n){return 2|n}function Zo(n){return(131068&n)>>2}function Cc(n,r){return-131069&n|r<<2}function Qs(n){return 1|n}function Qg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const y=n.data[h];ja(l),y.contentQueries(2,r[h],h)}}}function Fa(n,r,s,a,l,h,y,w,C,B){const z=r.blueprint.slice();return z[0]=l,z[2]=140|a,k(z),z[3]=z[15]=n,z[8]=s,z[10]=y||n&&n[10],z[11]=w||n&&n[11],z[12]=C||n&&n[12]||null,z[9]=B||n&&n[9]||null,z[6]=h,z[16]=2==r.type?n[16]:z,z}function ca(n,r,s,a,l){let h=n.data[r];if(null===h)h=function _d(n,r,s,a,l){const h=rn(),y=qn(),C=n.data[r]=function Yy(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=C),null!==h&&(y?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(n,r,s,a,l),function _s(){return b.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const y=function Wt(){const n=b.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return _n(h,!0),h}function uu(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Sc(n,r,s){fo(r);try{const a=n.viewQuery;null!==a&&hp(1,a,s);const l=n.template;null!==l&&em(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Qg(n,r),n.staticViewQueries&&hp(2,n.viewQuery,s);const h=n.components;null!==h&&function Zy(n,r){for(let s=0;s<r.length;s++)lp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,ro()}}function Vl(n,r,s,a){const l=r[2];if(256==(256&l))return;fo(r);const h=Hr();try{k(r),function Ui(n){return b.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&em(n,r,s,2,a);const y=3==(3&l);if(!h)if(y){const B=n.preOrderCheckHooks;null!==B&&$s(r,B,null)}else{const B=n.preOrderHooks;null!==B&&Ns(r,B,0,null),ui(r,0)}if(function up(n){for(let r=Ol(n);null!==r;r=Oa(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(1024&l[2])&&S(h,1),l[2]|=1024}}}(r),function Mc(n){for(let r=Ol(n);null!==r;r=Oa(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];Nr(a)&&Vl(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Qg(n,r),!h)if(y){const B=n.contentCheckHooks;null!==B&&$s(r,B)}else{const B=n.contentHooks;null!==B&&Ns(r,B,1),ui(r,1)}!function Yg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Ao(~l);else{const h=l,y=s[++a],w=s[++a];no(y,h),w(2,r[h])}}}finally{Ao(-1)}}(n,r);const w=n.components;null!==w&&function Xg(n,r){for(let s=0;s<r.length;s++)Bh(n,r[s])}(r,w);const C=n.viewQuery;if(null!==C&&hp(2,C,a),!h)if(y){const B=n.viewCheckHooks;null!==B&&$s(r,B)}else{const B=n.viewHooks;null!==B&&Ns(r,B,2),ui(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),h||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,S(r[3],-1))}finally{ro()}}function Jg(n,r,s,a){const l=r[10],h=!Hr(),y=Sn(r);try{h&&!y&&l.begin&&l.begin(),y&&Sc(n,r,a),Vl(n,r,s,a)}finally{h&&!y&&l.end&&l.end()}}function em(n,r,s,a,l){const h=Ci(),y=2&a;try{Ao(-1),y&&r.length>20&&jg(n,r,20,Hr()),s(a,l)}finally{Ao(h)}}function Ph(n,r,s){if(zi(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const y=n.data[h];y.contentQueries&&y.contentQueries(1,s[h],h)}}}function Xf(n,r,s){!V()||(function am(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||M(s,r),es(a,r);const y=s.initialInputs;for(let w=l;w<h;w++){const C=n.data[w],B=pi(C);B&&t_(r,s,C);const z=Es(r,n,w,s);es(z,r),null!==y&&n_(0,w-l,z,C,0,y),B&&(wn(s.index,r)[8]=z)}}(n,r,s,ot(s,r)),128==(128&s.flags)&&function Jy(n,r,s){const a=s.directiveStart,l=s.directiveEnd,y=s.index,w=function Dr(){return b.lFrame.currentDirectiveIndex}();try{Ao(y);for(let C=a;C<l;C++){const B=n.data[C],z=r[C];Ps(C),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&um(B,z)}}finally{Ao(-1),Ps(w)}}(n,r,s))}function vd(n,r,s=ot){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const y=a[h+1],w=-1===y?s(r,n):n[y];n[l++]=w}}}function tm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=kh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function kh(n,r,s,a,l,h,y,w,C,B){const z=20+a,oe=z+l,Me=function Jf(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:xn);return s}(z,oe),Xe="function"==typeof B?B():B;return Me[1]={type:n,blueprint:Me,template:s,queries:null,viewQuery:w,declTNode:r,data:Me.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:Xe,incompleteFirstPass:!1}}function rm(n,r,s,a){const l=Gh(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&fp(n).push(a,l.length-1))}function im(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function wd(n,r,s,a){let l=!1;if(V()){const h=function e_(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const y=a[h];Dc(s,y.selectors,!1)&&(l||(l=[]),Ce(M(s,r),n,y.type),pi(y)?(sp(n,s),l.unshift(y)):l.push(y))}return l}(n,r,s),y=null===a?null:{"":-1};if(null!==h){l=!0,Lh(s,n.data.length,h.length);for(let z=0;z<h.length;z++){const oe=h[z];oe.providersResolver&&oe.providersResolver(oe)}let w=!1,C=!1,B=uu(n,r,h.length,null);for(let z=0;z<h.length;z++){const oe=h[z];s.mergedAttrs=jo(s.mergedAttrs,oe.hostAttrs),op(n,s,r,B,oe),Id(B,oe,y),null!==oe.contentQueries&&(s.flags|=8),(null!==oe.hostBindings||null!==oe.hostAttrs||0!==oe.hostVars)&&(s.flags|=128);const Me=oe.type.prototype;!w&&(Me.ngOnChanges||Me.ngOnInit||Me.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),w=!0),!C&&(Me.ngOnChanges||Me.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),C=!0),B++}!function Qy(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,y=[];let w=null,C=null;for(let B=r.directiveStart;B<a;B++){const z=l[B],oe=z.inputs,Me=null===h||Gf(r)?null:r_(oe,h);y.push(Me),w=im(oe,B,w),C=im(z.outputs,B,C)}null!==w&&(w.hasOwnProperty("class")&&(r.flags|=16),w.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=y,r.inputs=w,r.outputs=C}(n,s)}y&&function Fh(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new Ke(-301,!1);a.push(r[l],h)}}}(s,a,y)}return s.mergedAttrs=jo(s.mergedAttrs,s.attrs),l}function ip(n,r,s,a,l,h){const y=h.hostBindings;if(y){let w=n.hostBindingOpCodes;null===w&&(w=n.hostBindingOpCodes=[]);const C=~r.index;(function Xy(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(w)!=C&&w.push(C),w.push(a,l,y)}}function um(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function sp(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Id(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;pi(r)&&(s[""]=n)}}function Lh(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function op(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=Er(l.type)),y=new io(h,pi(l),null);n.blueprint[a]=y,s[a]=y,ip(n,r,0,a,uu(n,s,l.hostVars,xn),l)}function t_(n,r,s){const a=ot(r,n),l=tm(s),h=n[10],y=xc(n,Fa(n,l,null,s.onPush?64:16,a,r,h,h.createRenderer(a,s),null,null));n[r.index]=y}function La(n,r,s,a,l,h){const y=ot(n,r);!function ap(n,r,s,a,l,h,y){if(null==h)cr(n)?n.removeAttribute(r,l,s):r.removeAttribute(l);else{const w=null==y?Ve(h):y(h,a||"",l);cr(n)?n.setAttribute(r,l,w,s):s?r.setAttributeNS(s,l,w):r.setAttribute(l,w)}}(r[11],y,h,n.value,s,a,l)}function n_(n,r,s,a,l,h){const y=h[r];if(null!==y){const w=a.setInput;for(let C=0;C<y.length;){const B=y[C++],z=y[C++],oe=y[C++];null!==w?a.setInput(s,oe,B,z):s[z]=oe}}}function r_(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Uh(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Bh(n,r){const s=wn(r,n);if(Nr(s)){const a=s[1];80&s[2]?Vl(a,s,a.template,s[8]):s[5]>0&&Ul(s)}}function Ul(n){for(let a=Ol(n);null!==a;a=Oa(a))for(let l=10;l<a.length;l++){const h=a[l];if(1024&h[2]){const y=h[1];Vl(y,h,y.template,h[8])}else h[5]>0&&Ul(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=wn(s[a],n);Nr(l)&&l[5]>0&&Ul(l)}}function lp(n,r){const s=wn(r,n),a=s[1];(function lm(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Sc(a,s,s[8])}function xc(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Dd(n){for(;n;){n[2]|=64;const r=Si(n);if(Zr(n)&&!r)return n;n=r}return null}function cp(n,r,s){const a=r[10];a.begin&&a.begin();try{Vl(n,r,n.template,s)}catch(l){throw Wh(r,l),l}finally{a.end&&a.end()}}function $h(n){!function jh(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=gc(s),l=a[1];Jg(l,a,l.template,s)}}(n[8])}function hp(n,r,s){ja(0),r(n,s)}const Hh=(()=>Promise.resolve(null))();function Gh(n){return n[7]||(n[7]=[])}function fp(n){return n.cleanup||(n.cleanup=[])}function Wh(n,r){const s=n[9],a=s?s.get(li,null):null;a&&a.handleError(r)}function dm(n,r,s,a,l){for(let h=0;h<s.length;){const y=s[h++],w=s[h++],C=r[y],B=n.data[y];null!==B.setInput?B.setInput(C,l,a,w):C[w]=l}}function lu(n,r,s){const a=it(r,n);!function ud(n,r,s){cr(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function bd(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let y=0;y<r.length;y++){const w=r[y];"number"==typeof w?h=w:1==h?l=Ie(l,w):2==h&&(a=Ie(a,w+": "+r[++y]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}const pp=new tn("INJECTOR",-1);class zh{get(r,s=Wo){if(s===Wo){const a=new Error(`NullInjectorError: No provider for ${ue(r)}!`);throw a.name="NullInjectorError",a}return s}}const gp=new tn("Set Injector scope."),jl={},o_={};let Cd;function mp(){return void 0===Cd&&(Cd=new zh),Cd}function Kh(n,r=null,s=null,a){const l=qh(n,r,s,a);return l._resolveInjectorDefTypes(),l}function qh(n,r=null,s=null,a){return new yp(n,s,r||mp(),a)}class yp{constructor(r,s,a,l=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];s&&Vs(s,w=>this.processProvider(w,r,s)),Vs([r],w=>this.processInjectorType(w,[],h)),this.records.set(pp,da(void 0,this));const y=this.records.get(gp);this.scope=null!=y?y.value:null,this.source=l||("object"==typeof r?null:ue(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=Wo,a=Gt.Default){this.assertNotDestroyed();const l=Ft(this),h=jt(void 0);try{if(!(a&Gt.SkipSelf)){let w=this.records.get(r);if(void 0===w){const C=function Dp(n){return"function"==typeof n||"object"==typeof n&&n instanceof tn}(r)&&on(r);w=C&&this.injectableDefInScope(C)?da(Ku(r),jl):null,this.records.set(r,w)}if(null!=w)return this.hydrate(r,w)}return(a&Gt.Self?mp():this.parent).get(r,s=a&Gt.Optional&&s===Wo?null:s)}catch(y){if("NullInjectorError"===y.name){if((y[hl]=y[hl]||[]).unshift(ue(r)),l)throw y;return function Sa(n,r,s,a){const l=n[hl];throw r[ye]&&l.unshift(r[ye]),n.message=function Ya(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let l=ue(r);if(Array.isArray(r))l=r.map(ue).join(" -> ");else if("object"==typeof r){let h=[];for(let y in r)if(r.hasOwnProperty(y)){let w=r[y];h.push(y+":"+("string"==typeof w?JSON.stringify(w):ue(w)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(P,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[hl]=null,n}(y,r,"R3InjectorError",this.source)}throw y}finally{jt(h),Ft(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,l)=>r.push(ue(l))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ke(205,!1)}processInjectorType(r,s,a){if(!(r=_e(r)))return!1;let l=On(r);const h=null==l&&r.ngModule||void 0,y=void 0===h?r:h,w=-1!==a.indexOf(y);if(void 0!==h&&(l=On(h)),null==l)return!1;if(null!=l.imports&&!w){let z;a.push(y);try{Vs(l.imports,oe=>{this.processInjectorType(oe,s,a)&&(void 0===z&&(z=[]),z.push(oe))})}finally{}if(void 0!==z)for(let oe=0;oe<z.length;oe++){const{ngModule:Me,providers:Xe}=z[oe];Vs(Xe,It=>this.processProvider(It,Me,Xe||Zt))}}this.injectorDefTypes.add(y);const C=Er(y)||(()=>new y);this.records.set(y,da(C,jl));const B=l.providers;if(null!=B&&!w){const z=r;Vs(B,oe=>this.processProvider(oe,z,B))}return void 0!==h&&void 0!==r.providers}processProvider(r,s,a){let l=Oc(r=_e(r))?r:_e(r&&r.provide);const h=function _p(n,r,s){return vp(n)?da(void 0,n.useValue):da($l(n),jl)}(r);if(Oc(r)||!0!==r.multi)this.records.get(l);else{let y=this.records.get(l);y||(y=da(void 0,jl,!0),y.factory=()=>Fn(y.multi),this.records.set(l,y)),l=r,y.multi.push(r)}this.records.set(l,h)}hydrate(r,s){return s.value===jl&&(s.value=o_,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Ip(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=_e(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Ku(n){const r=on(n),s=null!==r?r.factory:Er(n);if(null!==s)return s;if(n instanceof tn)throw new Ke(204,!1);if(n instanceof Function)return function qu(n){const r=n.length;if(r>0)throw Bi(r,"?"),new Ke(204,!1);const s=function Gn(n){const r=n&&(n[En]||n[ir]);if(r){const s=function tr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ke(204,!1)}function $l(n,r,s){let a;if(Oc(n)){const l=_e(n);return Er(l)||Ku(l)}if(vp(n))a=()=>_e(n.useValue);else if(function a_(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Fn(n.deps||[]));else if(function Rc(n){return!(!n||!n.useExisting)}(n))a=()=>un(_e(n.useExisting));else{const l=_e(n&&(n.useClass||n.provide));if(!function wp(n){return!!n.deps}(n))return Er(l)||Ku(l);a=()=>new l(...Fn(n.deps))}return a}function da(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function vp(n){return null!==n&&"object"==typeof n&&je in n}function Oc(n){return"function"==typeof n}let ha=(()=>{class n{static create(s,a){var l;if(Array.isArray(s))return Kh({name:""},a,s,"");{const h=null!==(l=s.name)&&void 0!==l?l:"";return Kh({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=Wo,n.NULL=new zh,n.\u0275prov=dt({token:n,providedIn:"any",factory:()=>un(pp)}),n.__NG_ELEMENT_ID__=-1,n})();function Ap(n,r){Qi(gc(n)[1],wt())}function Sp(n){let r=function Jh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(pi(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ke(903,"");l=r.\u0275dir}if(l){if(s){a.push(l);const y=n;y.inputs=Ad(n.inputs),y.declaredInputs=Ad(n.declaredInputs),y.outputs=Ad(n.outputs);const w=l.hostBindings;w&&Tm(n,w);const C=l.viewQuery,B=l.contentQueries;if(C&&xp(n,C),B&&Pc(n,B),Ee(n.inputs,l.inputs),Ee(n.declaredInputs,l.declaredInputs),Ee(n.outputs,l.outputs),pi(l)&&l.data.animation){const z=n.data;z.animation=(z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let y=0;y<h.length;y++){const w=h[y];w&&w.ngInherit&&w(n),w===Sp&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Mp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=jo(l.hostAttrs,s=jo(s,l.hostAttrs))}}(a)}function Ad(n){return n===ur?{}:n===Zt?[]:n}function xp(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Pc(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function Tm(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let Qo=null;function Zu(){if(!Qo){const n=An.Symbol;if(n&&n.iterator)Qo=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Qo=a)}}}return Qo}function Hl(n){return!!Sd(n)&&(Array.isArray(n)||!(n instanceof Map)&&Zu()in n)}function Sd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Va(n,r,s){return n[r]=s}function Xs(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function tf(n,r,s,a){const l=Q();return Xs(l,Fr(),r)&&(De(),La(ai(),l,n,r,s,a)),tf}function Rm(n,r,s,a,l,h,y,w){const C=Q(),B=De(),z=n+20,oe=B.firstCreatePass?function y_(n,r,s,a,l,h,y,w,C){const B=r.consts,z=ca(r,n,4,y||null,gr(B,w));wd(r,s,z,gr(B,C)),Qi(r,z);const oe=z.tViews=kh(2,z,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,B);return null!==r.queries&&(r.queries.template(r,z),oe.queries=r.queries.embeddedTView(z)),z}(z,B,C,r,s,a,l,h,y):B.data[z];_n(oe,!1);const Me=C[11].createComment("");fd(B,C,Me,oe),es(Me,C),xc(C,C[z]=Uh(Me,C,Me,oe)),Ds(oe)&&Xf(B,C,oe),null!=y&&vd(C,oe,w)}function rf(n){return $n(function oi(){return b.lFrame.contextLView}(),20+n)}function zl(n,r=Gt.Default){const s=Q();return null===s?un(n,r):cn(wt(),s,_e(n),r)}function Vm(){throw new Error("invalid")}function qp(n,r,s){const a=Q();return Xs(a,Fr(),r)&&function Do(n,r,s,a,l,h,y,w){const C=ot(r,s);let z,B=r.inputs;!w&&null!=B&&(z=B[a])?(dm(n,s,z,a,l),fi(r)&&function sm(n,r){const s=wn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function ep(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=y?y(l,r.value||"",a):l,cr(h)?h.setProperty(C,a,l):go(a)||(C.setProperty?C.setProperty(a,l):C[a]=l))}(De(),ai(),a,n,r,a[11],s,!1),qp}function Ei(n,r,s,a,l){const y=l?"class":"style";dm(n,s,r.inputs[y],y,a)}function Zp(n,r,s,a){const l=Q(),h=De(),y=20+n,w=l[11],C=l[y]=Ec(w,r,function ec(){return b.lFrame.currentNamespace}()),B=h.firstCreatePass?function t0(n,r,s,a,l,h,y){const w=r.consts,B=ca(r,n,2,l,gr(w,h));return wd(r,s,B,gr(w,y)),null!==B.attrs&&bd(B,B.attrs,!1),null!==B.mergedAttrs&&bd(B,B.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,B),B}(y,h,l,0,r,s,a):h.data[y];_n(B,!0);const z=B.mergedAttrs;null!==z&&Ia(w,C,z);const oe=B.classes;null!==oe&&$u(w,C,oe);const Me=B.styles;return null!==Me&&ju(w,C,Me),64!=(64&B.flags)&&fd(h,l,C,B),0===function ut(){return b.lFrame.elementDepthCount}()&&es(C,l),function en(){b.lFrame.elementDepthCount++}(),Ds(B)&&(Xf(h,l,B),Ph(h,B,l)),null!==a&&vd(l,B),Zp}function Gi(){let n=wt();qn()?Vr():(n=n.parent,_n(n,!1));const r=n;!function mr(){b.lFrame.elementDepthCount--}();const s=De();return s.firstCreatePass&&(Qi(s,n),zi(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ga(n){return 0!=(16&n.flags)}(r)&&Ei(s,r,Q(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function _u(n){return 0!=(32&n.flags)}(r)&&Ei(s,r,Q(),r.stylesWithoutHost,!1),Gi}function cf(n,r,s,a){return Zp(n,r,s,a),Gi(),cf}function kd(n,r,s){const a=Q(),l=De(),h=n+20,y=l.firstCreatePass?function C_(n,r,s,a,l){const h=r.consts,y=gr(h,a),w=ca(r,n,8,"ng-container",y);return null!==y&&bd(w,y,!0),wd(r,s,w,gr(h,l)),null!==r.queries&&r.queries.elementStart(r,w),w}(h,l,a,r,s):l.data[h];_n(y,!0);const w=a[h]=a[11].createComment("");return fd(l,a,w,y),es(w,a),Ds(y)&&(Xf(l,a,y),Ph(l,y,a)),null!=s&&vd(a,y),kd}function df(){let n=wt();const r=De();return qn()?Vr():(n=n.parent,_n(n,!1)),r.firstCreatePass&&(Qi(r,n),zi(n)&&r.queries.elementEnd(n)),df}function Bm(){return Q()}function Yp(n){return!!n&&"function"==typeof n.then}function T_(n){return!!n&&"function"==typeof n.subscribe}const jm=T_;function Qp(n,r,s,a){const l=Q(),h=De(),y=wt();return function A_(n,r,s,a,l,h,y,w){const C=Ds(a),z=n.firstCreatePass&&fp(n),oe=r[8],Me=Gh(r);let Xe=!0;if(3&a.type||w){const Yt=ot(a,r),gn=w?w(Yt):Yt,Rt=Me.length,Cn=w?Cr=>w(x(Cr[a.index])):a.index;if(cr(s)){let Cr=null;if(!w&&C&&(Cr=function du(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const y=l[h];if(y===s&&l[h+1]===a){const w=r[7],C=l[h+2];return w.length>C?w[C]:null}"string"==typeof y&&(h+=2)}return null}(n,r,l,a.index)),null!==Cr)(Cr.__ngLastListenerFn__||Cr).__ngNextListenerFn__=h,Cr.__ngLastListenerFn__=h,Xe=!1;else{h=hu(a,r,oe,h,!1);const di=s.listen(gn,l,h);Me.push(h,di),z&&z.push(l,Cn,Rt,Rt+1)}}else h=hu(a,r,oe,h,!0),gn.addEventListener(l,h,y),Me.push(h),z&&z.push(l,Cn,Rt,y)}else h=hu(a,r,oe,h,!1);const It=a.outputs;let Bt;if(Xe&&null!==It&&(Bt=It[l])){const Yt=Bt.length;if(Yt)for(let gn=0;gn<Yt;gn+=2){const va=r[Bt[gn]][Bt[gn+1]].subscribe(h),Wd=Me.length;Me.push(h,va),z&&z.push(l,a.index,Wd,-(Wd+1))}}}(h,l,l[11],y,n,r,!!s,a),Qp}function pa(n,r,s,a){try{return!1!==s(a)}catch(l){return Wh(n,l),!1}}function hu(n,r,s,a,l){return function h(y){if(y===Function)return a;const w=2&n.flags?wn(n.index,r):r;0==(32&r[2])&&Dd(w);let C=pa(r,0,a,y),B=h.__ngNextListenerFn__;for(;B;)C=pa(r,0,B,y)&&C,B=B.__ngNextListenerFn__;return l&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function Nd(n=1){return function mu(n){return(b.lFrame.contextLView=function ea(n,r){for(;n>0;)r=r[15],n--;return r}(n,b.lFrame.contextLView))[8]}(n)}function S_(n,r){let s=null;const a=function kl(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let l=0;l<r.length;l++){const h=r[l];if("*"!==h){if(null===a?Dc(n,h,!0):Uy(a,h))return l}else s=l}return s}function $m(n){const r=Q()[16][6];if(!r.projection){const a=r.projection=Bi(n?n.length:1,null),l=a.slice();let h=r.child;for(;null!==h;){const y=n?S_(h,n):0;null!==y&&(l[y]?l[y].projectionNext=h:a[y]=h,l[y]=h),h=h.next}}}function Jp(n,r=0,s){const a=Q(),l=De(),h=ca(l,20+n,16,null,s||null);null===h.projection&&(h.projection=r),Vr(),64!=(64&h.flags)&&function Ny(n,r,s){$f(r[11],0,r,s,Fg(n,s,r),Uu(s.parent||r[6],s,r))}(l,a,h)}function ig(n,r,s,a,l){const h=n[s+1],y=null===r;let w=a?Ys(h):Zo(h),C=!1;for(;0!==w&&(!1===C||y);){const z=n[w+1];Kl(n[w],r)&&(C=!0,n[w+1]=a?Qs(z):Nl(z)),w=a?Ys(z):Zo(z)}C&&(n[s+1]=a?Nl(h):Qs(h))}function Kl(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&_o(n,r)>=0}function gf(n,r){return function ma(n,r,s,a){const l=Q(),h=De(),y=function yr(n){const r=b.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function lg(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[Ci()],y=function qm(n,r){return r>=n.expandoStartIndex}(n,s);(function Bd(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!y&&(r=!1),r=function x_(n,r,s,a){const l=function Xo(n){const r=b.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=jc(s=cg(null,n,r,s,a),r.attrs,a),h=null);else{const y=r.directiveStylingLast;if(-1===y||n[y]!==l)if(s=cg(l,n,r,s,a),null===h){let C=function R_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Zo(a))return n[Ys(a)]}(n,r,a);void 0!==C&&Array.isArray(C)&&(C=cg(null,n,r,C[1],a),C=jc(C,r.attrs,a),function Zm(n,r,s,a){n[Ys(s?r.classBindings:r.styleBindings)]=a}(n,r,a,C))}else h=function O_(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=jc(a,n[h].hostAttrs,s);return jc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function ng(n,r,s,a,l,h){let y=h?r.classBindings:r.styleBindings,w=Ys(y),C=Zo(y);n[a]=s;let z,B=!1;if(Array.isArray(s)){const oe=s;z=oe[1],(null===z||_o(oe,z)>0)&&(B=!0)}else z=s;if(l)if(0!==C){const Me=Ys(n[w+1]);n[a+1]=bc(Me,w),0!==Me&&(n[Me+1]=Cc(n[Me+1],a)),n[w+1]=function Gg(n,r){return 131071&n|r<<17}(n[w+1],a)}else n[a+1]=bc(w,0),0!==w&&(n[w+1]=Cc(n[w+1],a)),w=a;else n[a+1]=bc(C,0),0===w?w=a:n[C+1]=Cc(n[C+1],a),C=a;B&&(n[a+1]=Nl(n[a+1])),ig(n,z,a,!0),ig(n,z,a,!1),function rg(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&_o(h,r)>=0&&(s[a+1]=Qs(s[a+1]))}(r,z,n,a,h),y=bc(w,C),h?r.classBindings=y:r.styleBindings=y}(l,h,r,s,y,a)}}(h,n,y,a),r!==xn&&Xs(l,y,r)&&function dg(n,r,s,a,l,h,y,w){if(!(3&r.type))return;const C=n.data,B=C[w+1];Ud(function Kf(n){return 1==(1&n)}(B)?hg(C,r,s,l,Zo(B),y):void 0)||(Ud(h)||function Hg(n){return 2==(2&n)}(B)&&(h=hg(C,null,s,l,w,y)),function Pl(n,r,s,a,l){const h=cr(n);if(r)l?h?n.addClass(s,a):s.classList.add(a):h?n.removeClass(s,a):s.classList.remove(a);else{let y=-1===a.indexOf("-")?void 0:lt.DashCase;if(null==l)h?n.removeStyle(s,a,y):s.style.removeProperty(a);else{const w="string"==typeof l&&l.endsWith("!important");w&&(l=l.slice(0,-10),y|=lt.Important),h?n.setStyle(s,a,l,y):s.style.setProperty(a,l,w?"important":"")}}}(a,y,it(Ci(),s),l,h))}(h,h.data[Ci()],l,l[11],n,l[y+1]=function fg(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ue(Lo(n)))),n}(r,s),a,y)}(n,r,null,!0),gf}function cg(n,r,s,a,l){let h=null;const y=s.directiveEnd;let w=s.directiveStylingLast;for(-1===w?w=s.directiveStart:w++;w<y&&(h=r[w],a=jc(a,h.hostAttrs,l),h!==n);)w++;return null!==n&&(s.directiveStylingLast=w),a}function jc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const y=r[h];"number"==typeof y?l=y:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ji(n,y,!!s||r[++h]))}return void 0===n?null:n}function hg(n,r,s,a,l,h){const y=null===r;let w;for(;l>0;){const C=n[l],B=Array.isArray(C),z=B?C[1]:C,oe=null===z;let Me=s[l+1];Me===xn&&(Me=oe?Zt:void 0);let Xe=oe?ao(Me,a):z===a?Me:void 0;if(B&&!Ud(Xe)&&(Xe=ao(C,a)),Ud(Xe)&&(w=Xe,y))return w;const It=n[l+1];l=y?Ys(It):Zo(It)}if(null!==r){let C=h?r.residualClasses:r.residualStyles;null!=C&&(w=ao(C,a))}return w}function Ud(n){return void 0!==n}function Xm(n,r=""){const s=Q(),a=De(),l=n+20,h=a.firstCreatePass?ca(a,l,1,r,null):a.data[l],y=s[l]=function vc(n,r){return cr(n)?n.createText(r):n.createTextNode(r)}(s[11],r);fd(a,s,y,h),_n(h,!1)}function mf(n){return _a("",n,""),mf}function _a(n,r,s){const a=Q(),l=function Wl(n,r,s,a){return Xs(n,Fr(),s)?r+Ve(s)+a:xn}(a,n,r,s);return l!==xn&&lu(a,Ci(),l),_a}const ol=void 0;var Zl=["en",[["a","p"],["AM","PM"],ol],[["AM","PM"],ol,ol],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ol,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ol,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ol,"{1} 'at' {0}",ol],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hy(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Us={};function vf(n){const r=function vg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Wc(r);if(s)return s;const a=r.split("-")[0];if(s=Wc(a),s)return s;if("en"===a)return Zl;throw new Error(`Missing locale data for the locale "${n}".`)}function Gc(n){return vf(n)[Mn.PluralCase]}function Wc(n){return n in Us||(Us[n]=An.ng&&An.ng.common&&An.ng.common.locales&&An.ng.common.locales[n]),Us[n]}var Mn=(()=>((Mn=Mn||{})[Mn.LocaleId=0]="LocaleId",Mn[Mn.DayPeriodsFormat=1]="DayPeriodsFormat",Mn[Mn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mn[Mn.DaysFormat=3]="DaysFormat",Mn[Mn.DaysStandalone=4]="DaysStandalone",Mn[Mn.MonthsFormat=5]="MonthsFormat",Mn[Mn.MonthsStandalone=6]="MonthsStandalone",Mn[Mn.Eras=7]="Eras",Mn[Mn.FirstDayOfWeek=8]="FirstDayOfWeek",Mn[Mn.WeekendRange=9]="WeekendRange",Mn[Mn.DateFormat=10]="DateFormat",Mn[Mn.TimeFormat=11]="TimeFormat",Mn[Mn.DateTimeFormat=12]="DateTimeFormat",Mn[Mn.NumberSymbols=13]="NumberSymbols",Mn[Mn.NumberFormats=14]="NumberFormats",Mn[Mn.CurrencyCode=15]="CurrencyCode",Mn[Mn.CurrencySymbol=16]="CurrencySymbol",Mn[Mn.CurrencyName=17]="CurrencyName",Mn[Mn.Currencies=18]="Currencies",Mn[Mn.Directionality=19]="Directionality",Mn[Mn.PluralCase=20]="PluralCase",Mn[Mn.ExtraData=21]="ExtraData",Mn))();const Kc="en-US";let fy=Kc;function J_(n,r,s,a,l){if(n=_e(n),Array.isArray(n))for(let h=0;h<n.length;h++)J_(n[h],r,s,a,l);else{const h=De(),y=Q();let w=Oc(n)?n:_e(n.provide),C=$l(n);const B=wt(),z=1048575&B.providerIndexes,oe=B.directiveStart,Me=B.providerIndexes>>20;if(Oc(n)||!n.multi){const Xe=new io(C,l,zl),It=tv(w,r,l?z:z+Me,oe);-1===It?(Ce(M(B,y),h,w),ev(h,n,r.length),r.push(w),B.directiveStart++,B.directiveEnd++,l&&(B.providerIndexes+=1048576),s.push(Xe),y.push(Xe)):(s[It]=Xe,y[It]=Xe)}else{const Xe=tv(w,r,z+Me,oe),It=tv(w,r,z,z+Me),Bt=Xe>=0&&s[Xe],Yt=It>=0&&s[It];if(l&&!Yt||!l&&!Bt){Ce(M(B,y),h,w);const gn=function yw(n,r,s,a,l){const h=new io(n,s,zl);return h.multi=[],h.index=r,h.componentProviders=0,m0(h,l,a&&!s),h}(l?mw:gw,s.length,l,a,C);!l&&Yt&&(s[It].providerFactory=gn),ev(h,n,r.length,0),r.push(w),B.directiveStart++,B.directiveEnd++,l&&(B.providerIndexes+=1048576),s.push(gn),y.push(gn)}else ev(h,n,Xe>-1?Xe:It,m0(s[l?It:Xe],C,!l&&a));!l&&a&&Yt&&s[It].componentProviders++}}}function ev(n,r,s,a){const l=Oc(r),h=function Ep(n){return!!n.useClass}(r);if(l||h){const C=(h?_e(r.useClass):r).prototype.ngOnDestroy;if(C){const B=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const z=B.indexOf(s);-1===z?B.push(s,[a,C]):B[z+1].push(a,C)}else B.push(s,C)}}}function m0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function tv(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function gw(n,r,s,a){return nv(this.multi,[])}function mw(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Es(s,s[1],this.providerFactory.index,a);h=w.slice(0,y),nv(l,h);for(let C=y;C<w.length;C++)h.push(w[C])}else h=[],nv(l,h);return h}function nv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function y0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function pw(n,r,s){const a=De();if(a.firstCreatePass){const l=pi(n);J_(s,a.data,a.blueprint,l,!0),J_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class _0{}class Ew{resolveComponentFactory(r){throw function vw(n){const r=Error(`No component factory found for ${ue(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ey=(()=>{class n{}return n.NULL=new Ew,n})();function ww(){return Cf(wt(),Q())}function Cf(n,r){return new bg(ot(n,r))}let bg=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=ww,n})();function Iw(n){return n instanceof bg?n.nativeElement:n}class E0{}let Dw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Cw(){const n=Q(),s=wn(wt().index,n);return function bw(n){return n[11]}(lr(s)?s:n)}(),n})(),Tw=(()=>{class n{}return n.\u0275prov=dt({token:n,providedIn:"root",factory:()=>null}),n})();class w0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const I0=new w0("13.3.2"),rv={};function wy(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(x(h)),_i(h))for(let w=10;w<h.length;w++){const C=h[w],B=C[1].firstChild;null!==B&&wy(C[1],C,B,a)}const y=s.type;if(8&y)wy(n,r,s.child,a);else if(32&y){const w=dn(s,r);let C;for(;C=w();)a.push(C)}else if(16&y){const w=Eh(r,s);if(Array.isArray(w))a.push(...w);else{const C=Si(r[16]);wy(C[1],C,w,a,!0)}}s=l?s.projectionNext:s.next}return a}class Cg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return wy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(_i(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Bf(r,a),Ho(s,a))}this._attachedToViewContainer=!1}kg(this._lView[1],this._lView)}onDestroy(r){rm(this._lView[1],this._lView,null,r)}markForCheck(){Dd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function i_(n,r,s){yi(!0);try{cp(n,r,s)}finally{yi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Uf(n,r){wc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ke(902,"");this._appRef=r}}class Aw extends Cg{constructor(r){super(r),this._view=r}detectChanges(){$h(this._view)}checkNoChanges(){!function dp(n){yi(!0);try{$h(n)}finally{yi(!1)}}(this._view)}get context(){return null}}class D0 extends Ey{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=ke(r);return new iv(s,this.ngModule)}}function b0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class iv extends _0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function gd(n){return n.map(By).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return b0(this.componentDef.inputs)}get outputs(){return b0(this.componentDef.outputs)}create(r,s,a,l){const h=(l=l||this.ngModule)?function Mw(n,r){return{get:(s,a,l)=>{const h=n.get(s,rv,l);return h!==rv||a===rv?h:r.get(s,a,l)}}}(r,l.injector):r,y=h.get(E0,R),w=h.get(Tw,null),C=y.createRenderer(null,this.componentDef),B=this.componentDef.selectors[0][0]||"div",z=a?function nm(n,r,s){if(cr(n))return n.selectRootElement(r,s===bn.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(C,a,this.componentDef.encapsulation):Ec(y.createRenderer(null,this.componentDef),B,function Sw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(B)),oe=this.componentDef.onPush?576:528,Me=function Cm(n,r){return{components:[],scheduler:n||Ff,clean:Hh,playerHandler:r||null,flags:0}}(),Xe=kh(0,null,null,1,0,null,null,null,null,null),It=Fa(null,Xe,Me,oe,null,null,y,C,w,h);let Bt,Yt;fo(It);try{const gn=function bm(n,r,s,a,l,h){const y=s[1];s[20]=n;const C=ca(y,20,2,"#host",null),B=C.mergedAttrs=r.hostAttrs;null!==B&&(bd(C,B,!0),null!==n&&(Ia(l,n,B),null!==C.classes&&$u(l,n,C.classes),null!==C.styles&&ju(l,n,C.styles)));const z=a.createRenderer(n,r),oe=Fa(s,tm(r),null,r.onPush?64:16,s[20],C,a,z,h||null,null);return y.firstCreatePass&&(Ce(M(C,s),y,r.type),sp(y,C),Lh(C,s.length,1)),xc(s,oe),s[20]=oe}(z,this.componentDef,It,y,C);if(z)if(a)Ia(C,z,["ng-version",I0.full]);else{const{attrs:Rt,classes:Cn}=function Hu(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!qo(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Rt&&Ia(C,z,Rt),Cn&&Cn.length>0&&$u(C,z,Cn.join(" "))}if(Yt=Xn(Xe,20),void 0!==s){const Rt=Yt.projection=[];for(let Cn=0;Cn<this.ngContentSelectors.length;Cn++){const Cr=s[Cn];Rt.push(null!=Cr?Array.from(Cr):null)}}Bt=function Xh(n,r,s,a,l){const h=s[1],y=function rp(n,r,s){const a=wt();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),op(n,a,r,uu(n,r,1,null),s));const l=Es(r,n,a.directiveStart,a);es(l,r);const h=ot(a,r);return h&&es(h,r),l}(h,s,r);if(a.components.push(y),n[8]=y,l&&l.forEach(C=>C(y,r)),r.contentQueries){const C=wt();r.contentQueries(1,y,C.directiveStart)}const w=wt();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ao(w.index),ip(s[1],w,0,w.directiveStart,w.directiveEnd,r),um(r,y)),y}(gn,this.componentDef,It,Me,[Ap]),Sc(Xe,It,null)}finally{ro()}return new Rw(this.componentType,Bt,Cf(Yt,It),It,Yt)}}class Rw extends class _w{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new Aw(l),this.componentType=r}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Tf{}class C0{}const Af=new Map;class S0 extends Tf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new D0(this);const a=Jt(r);this._bootstrapComponents=f(a.bootstrap),this._r3Injector=qh(r,s,[{provide:Tf,useValue:this},{provide:Ey,useValue:this.componentFactoryResolver}],ue(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=ha.THROW_IF_NOT_FOUND,a=Gt.Default){return r===ha||r===Tf||r===pp?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class sv extends C0{constructor(r){super(),this.moduleType=r,null!==Jt(r)&&function Pw(n){const r=new Set;!function s(a){const l=Jt(a,!0),h=l.id;null!==h&&(function T0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${ue(r)} vs ${ue(r.name)}`)}(h,Af.get(h),a),Af.set(h,a));const y=f(l.imports);for(const w of y)r.has(w)||(r.add(w),s(w))}(n)}(r)}create(r){return new S0(this.moduleType,r)}}function M0(n,r,s){const a=Wn()+n,l=Q();return l[a]===xn?Va(l,a,s?r.call(s):r()):function Gl(n,r){return n[r]}(l,a)}function x0(n,r,s,a){return O0(Q(),Wn(),n,r,s,a)}function R0(n,r,s,a,l){return function P0(n,r,s,a,l,h,y){const w=r+s;return function cu(n,r,s,a){const l=Xs(n,r,s);return Xs(n,r+1,a)||l}(n,w,l,h)?Va(n,w+2,y?a.call(y,l,h):a(l,h)):Tg(n,w+2)}(Q(),Wn(),n,r,s,a,l)}function Tg(n,r){const s=n[r];return s===xn?void 0:s}function O0(n,r,s,a,l,h){const y=r+s;return Xs(n,y,l)?Va(n,y+1,h?a.call(h,l):a(l)):Tg(n,y+1)}function L0(n,r){const s=De();let a;const l=n+20;s.firstCreatePass?(a=function jw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=Er(a.type)),y=jt(zl);try{const w=As(!1),C=h();return As(w),function Om(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,Q(),l,C),C}finally{jt(y)}}function V0(n,r,s){const a=n+20,l=Q(),h=$n(l,a);return function Ag(n,r){return n[1].data[r].pure}(l,a)?O0(l,Wn(),r,h.transform,s,h):h.transform(s)}function ov(n){return r=>{setTimeout(n,void 0,r)}}const ul=class zw extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var l,h,y;let w=r,C=s||(()=>null),B=a;if(r&&"object"==typeof r){const oe=r;w=null===(l=oe.next)||void 0===l?void 0:l.bind(oe),C=null===(h=oe.error)||void 0===h?void 0:h.bind(oe),B=null===(y=oe.complete)||void 0===y?void 0:y.bind(oe)}this.__isAsync&&(C=ov(C),w&&(w=ov(w)),B&&(B=ov(B)));const z=super.subscribe({next:w,error:C,complete:B});return r instanceof N.w0&&r.add(z),z}};function Kw(){return this._results[Zu()]()}class av{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Zu(),a=av.prototype;a[s]||(a[s]=Kw)}get changes(){return this._changes||(this._changes=new ul)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=Ji(r);(this._changesDetected=!function Mo(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Sg=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yw,n})();const qw=Sg,Zw=class extends qw{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=Fa(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(a[19]=h.createEmbeddedView(s)),Sc(s,a,r),new Cg(a)}};function Yw(){return Iy(wt(),Q())}function Iy(n,r){return 4&n.type?new Zw(r,n,Cf(n,r)):null}let Dy=(()=>{class n{}return n.__NG_ELEMENT_ID__=Qw,n})();function Qw(){return j0(wt(),Q())}const Xw=Dy,U0=class extends Xw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Cf(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){const r=se(this._hostTNode,this._hostLView);if(Da(r)){const s=Fs(r,this._hostLView),a=Br(r);return new yo(s[1].data[a+8],s)}return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=B0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const l=r.createEmbeddedView(s||{});return this.insert(l,a),l}createComponent(r,s,a,l,h){const y=r&&!function Ls(n){return"function"==typeof n}(r);let w;if(y)w=s;else{const oe=s||{};w=oe.index,a=oe.injector,l=oe.projectableNodes,h=oe.ngModuleRef}const C=y?r:new iv(ke(r)),B=a||this.parentInjector;if(!h&&null==C.ngModule){const Me=(y?B:this.parentInjector).get(Tf,null);Me&&(h=Me)}const z=C.create(B,l,void 0,h);return this.insert(z.hostView,w),z}insert(r,s){const a=r._lView,l=a[1];if(function ar(n){return _i(n[3])}(a)){const z=this.indexOf(r);if(-1!==z)this.detach(z);else{const oe=a[3],Me=new U0(oe,oe[6],oe[3]);Me.detach(Me.indexOf(r))}}const h=this._adjustIndex(s),y=this._lContainer;!function Oy(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Ta(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const y=r[17];null!==y&&s!==y&&function Py(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(y,r);const w=r[19];null!==w&&w.insertView(n),r[2]|=128}(l,a,y,h);const w=pd(h,y),C=a[11],B=yh(C,y[7]);return null!==B&&function cd(n,r,s,a,l,h){a[0]=l,a[6]=r,wc(n,a,s,1,l,h)}(l,y[6],C,a,B,w),r.attachToViewContainerRef(),Ta(uv(y),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=B0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Bf(this._lContainer,s);a&&(Ho(uv(this._lContainer),s),kg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Bf(this._lContainer,s);return a&&null!=Ho(uv(this._lContainer),s)?new Cg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function B0(n){return n[8]}function uv(n){return n[8]||(n[8]=[])}function j0(n,r){let s;const a=r[n.index];if(_i(a))s=a;else{let l;if(8&n.type)l=x(a);else{const h=r[11];l=h.createComment("");const y=ot(n,r);Vu(h,yh(h,y),l,function hd(n,r){return cr(n)?n.nextSibling(r):r.nextSibling}(h,y),!1)}r[n.index]=s=Uh(a,r,l,n),xc(r,s)}return new U0(s,n,r)}class lv{constructor(r){this.queryList=r,this.matches=null}clone(){return new lv(this.queryList)}setDirty(){this.queryList.setDirty()}}class cv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const y=s.getByIndex(h);l.push(this.queries[y.indexInDeclarationView].clone())}return new cv(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Z0(r,s).matches&&this.queries[s].setDirty()}}class $0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class dv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new dv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class hv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new hv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,tI(s,h)),this.matchTNodeWithReadOption(r,s,jr(s,r,h,!1,!1))}else a===Sg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,jr(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===bg||l===Dy||l===Sg&&4&s.type)this.addMatch(s.index,-2);else{const h=jr(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function tI(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function rI(n,r,s,a){return-1===s?function nI(n,r){return 11&n.type?Cf(n,r):4&n.type?Iy(n,r):null}(r,n):-2===s?function iI(n,r,s){return s===bg?Cf(r,n):s===Sg?Iy(r,n):s===Dy?j0(r,n):void 0}(n,r,a):Es(n,n[1],s,r)}function H0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,y=s.matches,w=[];for(let C=0;C<y.length;C+=2){const B=y[C];w.push(B<0?null:rI(r,h[B],y[C+1],s.metadata.read))}l.matches=w}return l.matches}function fv(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const y=H0(n,r,l,s);for(let w=0;w<h.length;w+=2){const C=h[w];if(C>0)a.push(y[w/2]);else{const B=h[w+1],z=r[-C];for(let oe=10;oe<z.length;oe++){const Me=z[oe];Me[17]===Me[3]&&fv(Me[1],Me,B,a)}if(null!==z[9]){const oe=z[9];for(let Me=0;Me<oe.length;Me++){const Xe=oe[Me];fv(Xe[1],Xe,B,a)}}}}}return a}function G0(n){const r=Q(),s=De(),a=Ea();ja(a+1);const l=Z0(s,a);if(n.dirty&&Sn(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?fv(s,r,a,[]):H0(s,r,l,a);n.reset(h,Iw),n.notifyOnChanges()}return!0}return!1}function W0(n,r,s,a){const l=De();if(l.firstCreatePass){const h=wt();(function q0(n,r,s){null===n.queries&&(n.queries=new dv),n.queries.track(new hv(r,s))})(l,new $0(r,s,a),h.index),function aI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function K0(n,r,s){const a=new av(4==(4&s));rm(n,r,a,a.destroy),null===r[19]&&(r[19]=new cv),r[19].queries.push(new lv(a))}(l,Q(),s)}function z0(){return function oI(n,r){return n[19].queries[r].queryList}(Q(),Ea())}function Z0(n,r){return n.queries.getByIndex(r)}function Y0(n,r){return Iy(n,r)}function Ty(...n){}const fE=new tn("Application Initializer");let vv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Ty,this.reject=Ty,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Yp(h))s.push(h);else if(jm(h)){const y=new Promise((w,C)=>{h.subscribe({complete:w,error:C})});s.push(y)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(un(fE,8))},n.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pE=new tn("AppId",{providedIn:"root",factory:function gE(){return`${Ev()}${Ev()}${Ev()}`}});function Ev(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const mE=new tn("Platform Initializer"),yE=new tn("Platform ID"),_E=new tn("appBootstrapListener");let vE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=dt({token:n,factory:n.\u0275fac}),n})();const wv=new tn("LocaleId",{providedIn:"root",factory:()=>dr(wv,Gt.Optional|Gt.SkipSelf)||function bI(){return"undefined"!=typeof $localize&&$localize.locale||Kc}()}),CI=new tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class TI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let AI=(()=>{class n{compileModuleSync(s){return new sv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=f(Jt(s).declarations).reduce((y,w)=>{const C=ke(w);return C&&y.push(new iv(C)),y},[]);return new TI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const MI=(()=>Promise.resolve(0))();function Iv(n){"undefined"==typeof Zone?MI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ul(!1),this.onMicrotaskEmpty=new ul(!1),this.onStable=new ul(!1),this.onError=new ul(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function xI(){let n=An.requestAnimationFrame,r=An.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function PI(n){const r=()=>{!function OI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(An,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,bv(n),n.isCheckStableRunning=!0,Dv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),bv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,y,w)=>{try{return EE(n),s.invokeTask(l,h,y,w)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),wE(n)}},onInvoke:(s,a,l,h,y,w,C)=>{try{return EE(n),s.invoke(l,h,y,w,C)}finally{n.shouldCoalesceRunChangeDetection&&r(),wE(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,bv(n),Dv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+l,r,RI,Ty,Ty);try{return h.runTask(y,s,a)}finally{h.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const RI={};function Dv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function EE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function wE(n){n._nesting--,Dv(n)}class kI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ul,this.onMicrotaskEmpty=new ul,this.onStable=new ul,this.onError=new ul}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}let IE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pu.assertNotInAngularZone(),Iv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Iv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(un(pu))},n.\u0275prov=dt({token:n,factory:n.\u0275fac}),n})(),DE=(()=>{class n{constructor(){this._applications=new Map,Cv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Cv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=dt({token:n,factory:n.\u0275fac}),n})();class NI{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function FI(n){Cv=n}let gu,Cv=new NI;const bE=new tn("AllowMultipleToken");class UI{constructor(r,s){this.name=r,this.token=s}}function CE(n,r,s=[]){const a=`Platform: ${r}`,l=new tn(a);return(h=[])=>{let y=TE();if(!y||y.injector.get(bE,!1))if(n)n(s.concat(h).concat({provide:l,useValue:!0}));else{const w=s.concat(h).concat({provide:l,useValue:!0},{provide:gp,useValue:"platform"});!function BI(n){if(gu&&!gu.destroyed&&!gu.injector.get(bE,!1))throw new Ke(400,"");gu=n.get(AE);const r=n.get(mE,null);r&&r.forEach(s=>s())}(ha.create({providers:w,name:a}))}return function jI(n){const r=TE();if(!r)throw new Ke(401,"");return r}()}}function TE(){return gu&&!gu.destroyed?gu:null}let AE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const w=function $I(n,r){let s;return s="noop"===n?new kI:("zone.js"===n?void 0:n)||new pu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),C=[{provide:pu,useValue:w}];return w.run(()=>{const B=ha.create({providers:C,parent:this.injector,name:s.moduleType.name}),z=s.create(B),oe=z.injector.get(li,null);if(!oe)throw new Ke(402,"");return w.runOutsideAngular(()=>{const Me=w.onError.subscribe({next:Xe=>{oe.handleError(Xe)}});z.onDestroy(()=>{Av(this._modules,z),Me.unsubscribe()})}),function HI(n,r,s){try{const a=s();return Yp(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(oe,w,()=>{const Me=z.injector.get(vv);return Me.runInitializers(),Me.donePromise.then(()=>(function z_(n){Qe(n,"Expected localeId to be defined"),"string"==typeof n&&(fy=n.toLowerCase().replace(/_/g,"-"))}(z.injector.get(wv,Kc)||Kc),this._moduleDoBootstrap(z),z))})})}bootstrapModule(s,a=[]){const l=SE({},a);return function LI(n,r,s){const a=new sv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Tv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Ke(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ke(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(un(ha))},n.\u0275prov=dt({token:n,factory:n.\u0275fac}),n})();function SE(n,r){return Array.isArray(r)?r.reduce(SE,n):Object.assign(Object.assign({},n),r)}let Tv=(()=>{class n{constructor(s,a,l,h,y){this._zone=s,this._injector=a,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new G.y(B=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{B.next(this._stable),B.complete()})}),C=new G.y(B=>{let z;this._zone.runOutsideAngular(()=>{z=this._zone.onStable.subscribe(()=>{pu.assertNotInAngularZone(),Iv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,B.next(!0))})})});const oe=this._zone.onUnstable.subscribe(()=>{pu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{B.next(!1)}))});return()=>{z.unsubscribe(),oe.unsubscribe()}});this.isStable=(0,de.T)(w,C.pipe((0,ie.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new Ke(405,"");let l;l=s instanceof _0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(l.componentType);const h=function VI(n){return n.isBoundToModule}(l)?void 0:this._injector.get(Tf),w=l.create(ha.NULL,[],a||l.selector,h),C=w.location.nativeElement,B=w.injector.get(IE,null),z=B&&w.injector.get(DE);return B&&z&&z.registerApplication(C,B),w.onDestroy(()=>{this.detachView(w.hostView),Av(this.components,w),z&&z.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ke(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Av(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(_E,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(un(pu),un(ha),un(li),un(Ey),un(vv))},n.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Av(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let xE=!0,RE=!1;function WI(){return RE=!0,xE}function zI(){if(RE)throw new Error("Cannot enable prod mode after platform setup.");xE=!1}let KI=(()=>{class n{}return n.__NG_ELEMENT_ID__=qI,n})();function qI(n){return function ZI(n,r,s){if(fi(n)&&!s){const a=wn(n.index,r);return new Cg(a,a)}return 47&n.type?new Cg(r[16],r):null}(wt(),Q(),16==(16&n))}class NE{constructor(){}supports(r){return Hl(r)}create(r){return new tD(r)}}const eD=(n,r)=>r;class tD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||eD}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const y=!a||s&&s.currentIndex<LE(a,l,h)?s:a,w=LE(y,l,h),C=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{h||(h=[]);const B=w-l,z=C-l;if(B!=z){for(let Me=0;Me<B;Me++){const Xe=Me<h.length?h[Me]:h[Me]=0,It=Xe+Me;z<=It&&It<B&&(h[Me]=Xe+1)}h[y.previousIndex]=z-B}}w!==C&&r(y,w,C)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Hl(r))throw new Ke(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let w=0;w<this.length;w++)h=r[w],y=this._trackByFn(w,h),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,h,y,w)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,y,w),a=!0),s=s._next}else l=0,function m_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Zu()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,w=>{y=this._trackByFn(l,w),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,w,y,l)),Object.is(s.item,w)||this._addIdentityChange(s,w)):(s=this._mismatch(s,w,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new nD(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new FE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class nD{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class FE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new rD,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class VE{constructor(){}supports(r){return r instanceof Map||Sd(r)}create(){return new iD}}class iD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Sd(r)))throw new Ke(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,y=l._next;return h&&(h._next=y),y&&(y._prev=h),l._next=null,l._prev=null,l}const a=new sD(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class sD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UE(){return new Ov([new NE])}let Ov=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||UE()),deps:[[n,new vo,new lo]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Ke(901,"")}}return n.\u0275prov=dt({token:n,providedIn:"root",factory:UE}),n})();function BE(){return new Pv([new VE])}let Pv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||BE()),deps:[[n,new vo,new lo]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(a)return a;throw new Ke(901,"")}}return n.\u0275prov=dt({token:n,providedIn:"root",factory:BE}),n})();const uD=CE(null,"core",[{provide:yE,useValue:"unknown"},{provide:AE,deps:[ha]},{provide:DE,deps:[]},{provide:vE,deps:[]}]);let lD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(un(Tv))},n.\u0275mod=ze({type:n}),n.\u0275inj=fn({}),n})()},3075:(pt,Se,T)=>{"use strict";T.d(Se,{Cf:()=>Ve,F:()=>Pn,Fj:()=>We,JJ:()=>Gt,JL:()=>ln,JU:()=>ue,Kr:()=>Ki,NI:()=>mn,On:()=>fi,Q7:()=>gi,UX:()=>Sn,YN:()=>as,_Y:()=>Ds,c5:()=>it,cw:()=>ri,kI:()=>H,oH:()=>Ot,sg:()=>jn,u5:()=>wn});var p=T(5e3),N=T(9808),G=T(8996),de=T(4128),ie=T(4004);let me=(()=>{class k{constructor(b,Z){this._renderer=b,this._elementRef=Z,this.onChange=ut=>{},this.onTouched=()=>{}}setProperty(b,Z){this._renderer.setProperty(this._elementRef.nativeElement,b,Z)}registerOnTouched(b){this.onTouched=b}registerOnChange(b){this.onChange=b}setDisabledState(b){this.setProperty("disabled",b)}}return k.\u0275fac=function(b){return new(b||k)(p.Y36(p.Qsj),p.Y36(p.SBq))},k.\u0275dir=p.lG2({type:k}),k})(),Ee=(()=>{class k extends me{}return k.\u0275fac=function(){let S;return function(Z){return(S||(S=p.n5z(k)))(Z||k)}}(),k.\u0275dir=p.lG2({type:k,features:[p.qOj]}),k})();const ue=new p.OlP("NgValueAccessor"),re={provide:ue,useExisting:(0,p.Gpc)(()=>We),multi:!0},$e=new p.OlP("CompositionEventMode");let We=(()=>{class k extends me{constructor(b,Z,ut){super(b,Z),this._compositionMode=ut,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _e(){const k=(0,N.q)()?(0,N.q)().getUserAgent():"";return/android (\d+)/.test(k.toLowerCase())}())}writeValue(b){this.setProperty("value",null==b?"":b)}_handleInput(b){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(b)}_compositionStart(){this._composing=!0}_compositionEnd(b){this._composing=!1,this._compositionMode&&this.onChange(b)}}return k.\u0275fac=function(b){return new(b||k)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36($e,8))},k.\u0275dir=p.lG2({type:k,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(b,Z){1&b&&p.NdJ("input",function(en){return Z._handleInput(en.target.value)})("blur",function(){return Z.onTouched()})("compositionstart",function(){return Z._compositionStart()})("compositionend",function(en){return Z._compositionEnd(en.target.value)})},features:[p._Bn([re]),p.qOj]}),k})();function Ke(k){return null==k||0===k.length}function Et(k){return null!=k&&"number"==typeof k.length}const Ve=new p.OlP("NgValidators"),Te=new p.OlP("NgAsyncValidators"),ct=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class H{static min(S){return function F(k){return S=>{if(Ke(S.value)||Ke(k))return null;const b=parseFloat(S.value);return!isNaN(b)&&b<k?{min:{min:k,actual:S.value}}:null}}(S)}static max(S){return function te(k){return S=>{if(Ke(S.value)||Ke(k))return null;const b=parseFloat(S.value);return!isNaN(b)&&b>k?{max:{max:k,actual:S.value}}:null}}(S)}static required(S){return pe(S)}static requiredTrue(S){return function Ue(k){return!0===k.value?null:{required:!0}}(S)}static email(S){return function Le(k){return Ke(k.value)||ct.test(k.value)?null:{email:!0}}(S)}static minLength(S){return function Re(k){return S=>Ke(S.value)||!Et(S.value)?null:S.value.length<k?{minlength:{requiredLength:k,actualLength:S.value.length}}:null}(S)}static maxLength(S){return function ve(k){return S=>Et(S.value)&&S.value.length>k?{maxlength:{requiredLength:k,actualLength:S.value.length}}:null}(S)}static pattern(S){return X(S)}static nullValidator(S){return null}static compose(S){return Qe(S)}static composeAsync(S){return Pt(S)}}function pe(k){return Ke(k.value)?{required:!0}:null}function X(k){if(!k)return Pe;let S,b;return"string"==typeof k?(b="","^"!==k.charAt(0)&&(b+="^"),b+=k,"$"!==k.charAt(k.length-1)&&(b+="$"),S=new RegExp(b)):(b=k.toString(),S=k),Z=>{if(Ke(Z.value))return null;const ut=Z.value;return S.test(ut)?null:{pattern:{requiredPattern:b,actualValue:ut}}}}function Pe(k){return null}function ce(k){return null!=k}function et(k){const S=(0,p.QGY)(k)?(0,G.D)(k):k;return(0,p.CqO)(S),S}function he(k){let S={};return k.forEach(b=>{S=null!=b?Object.assign(Object.assign({},S),b):S}),0===Object.keys(S).length?null:S}function Ge(k,S){return S.map(b=>b(k))}function ht(k){return k.map(S=>function qe(k){return!k.validate}(S)?S:b=>S.validate(b))}function Qe(k){if(!k)return null;const S=k.filter(ce);return 0==S.length?null:function(b){return he(Ge(b,S))}}function vt(k){return null!=k?Qe(ht(k)):null}function Pt(k){if(!k)return null;const S=k.filter(ce);return 0==S.length?null:function(b){const Z=Ge(b,S).map(et);return(0,de.D)(Z).pipe((0,ie.U)(he))}}function bt(k){return null!=k?Pt(ht(k)):null}function Tt(k,S){return null===k?[S]:Array.isArray(k)?[...k,S]:[k,S]}function dt(k){return k._rawValidators}function hn(k){return k._rawAsyncValidators}function fn(k){return k?Array.isArray(k)?k:[k]:[]}function on(k,S){return Array.isArray(k)?k.includes(S):k===S}function zn(k,S){const b=fn(S);return fn(k).forEach(ut=>{on(b,ut)||b.push(ut)}),b}function Gn(k,S){return fn(S).filter(b=>!on(k,b))}class tr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(S){this._rawValidators=S||[],this._composedValidatorFn=vt(this._rawValidators)}_setAsyncValidators(S){this._rawAsyncValidators=S||[],this._composedAsyncValidatorFn=bt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(S){this._onDestroyCallbacks.push(S)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(S=>S()),this._onDestroyCallbacks=[]}reset(S){this.control&&this.control.reset(S)}hasError(S,b){return!!this.control&&this.control.hasError(S,b)}getError(S,b){return this.control?this.control.getError(S,b):null}}class On extends tr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class En extends tr{get formDirective(){return null}get path(){return null}}class Un{constructor(S){this._cd=S}is(S){var b,Z,ut;return"submitted"===S?!!(null===(b=this._cd)||void 0===b?void 0:b.submitted):!!(null===(ut=null===(Z=this._cd)||void 0===Z?void 0:Z.control)||void 0===ut?void 0:ut[S])}}let Gt=(()=>{class k extends Un{constructor(b){super(b)}}return k.\u0275fac=function(b){return new(b||k)(p.Y36(On,2))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(b,Z){2&b&&p.ekj("ng-untouched",Z.is("untouched"))("ng-touched",Z.is("touched"))("ng-pristine",Z.is("pristine"))("ng-dirty",Z.is("dirty"))("ng-valid",Z.is("valid"))("ng-invalid",Z.is("invalid"))("ng-pending",Z.is("pending"))},features:[p.qOj]}),k})(),ln=(()=>{class k extends Un{constructor(b){super(b)}}return k.\u0275fac=function(b){return new(b||k)(p.Y36(En,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(b,Z){2&b&&p.ekj("ng-untouched",Z.is("untouched"))("ng-touched",Z.is("touched"))("ng-pristine",Z.is("pristine"))("ng-dirty",Z.is("dirty"))("ng-valid",Z.is("valid"))("ng-invalid",Z.is("invalid"))("ng-pending",Z.is("pending"))("ng-submitted",Z.is("submitted"))},features:[p.qOj]}),k})();function Zt(k,S){Be(k,S),S.valueAccessor.writeValue(k.value),function $t(k,S){S.valueAccessor.registerOnChange(b=>{k._pendingValue=b,k._pendingChange=!0,k._pendingDirty=!0,"change"===k.updateOn&&qt(k,S)})}(k,S),function fe(k,S){const b=(Z,ut)=>{S.valueAccessor.writeValue(Z),ut&&S.viewToModelUpdate(Z)};k.registerOnChange(b),S._registerOnDestroy(()=>{k._unregisterOnChange(b)})}(k,S),function pn(k,S){S.valueAccessor.registerOnTouched(()=>{k._pendingTouched=!0,"blur"===k.updateOn&&k._pendingChange&&qt(k,S),"submit"!==k.updateOn&&k.markAsTouched()})}(k,S),function gt(k,S){if(S.valueAccessor.setDisabledState){const b=Z=>{S.valueAccessor.setDisabledState(Z)};k.registerOnDisabledChange(b),S._registerOnDestroy(()=>{k._unregisterOnDisabledChange(b)})}}(k,S)}function sr(k,S,b=!0){const Z=()=>{};S.valueAccessor&&(S.valueAccessor.registerOnChange(Z),S.valueAccessor.registerOnTouched(Z)),At(k,S),k&&(S._invokeOnDestroyCallbacks(),k._registerOnCollectionChange(()=>{}))}function Ze(k,S){k.forEach(b=>{b.registerOnValidatorChange&&b.registerOnValidatorChange(S)})}function Be(k,S){const b=dt(k);null!==S.validator?k.setValidators(Tt(b,S.validator)):"function"==typeof b&&k.setValidators([b]);const Z=hn(k);null!==S.asyncValidator?k.setAsyncValidators(Tt(Z,S.asyncValidator)):"function"==typeof Z&&k.setAsyncValidators([Z]);const ut=()=>k.updateValueAndValidity();Ze(S._rawValidators,ut),Ze(S._rawAsyncValidators,ut)}function At(k,S){let b=!1;if(null!==k){if(null!==S.validator){const ut=dt(k);if(Array.isArray(ut)&&ut.length>0){const en=ut.filter(mr=>mr!==S.validator);en.length!==ut.length&&(b=!0,k.setValidators(en))}}if(null!==S.asyncValidator){const ut=hn(k);if(Array.isArray(ut)&&ut.length>0){const en=ut.filter(mr=>mr!==S.asyncValidator);en.length!==ut.length&&(b=!0,k.setAsyncValidators(en))}}}const Z=()=>{};return Ze(S._rawValidators,Z),Ze(S._rawAsyncValidators,Z),b}function qt(k,S){k._pendingDirty&&k.markAsDirty(),k.setValue(k._pendingValue,{emitModelToViewChange:!1}),S.viewToModelUpdate(k._pendingValue),k._pendingChange=!1}function ne(k,S){Be(k,S)}function we(k,S){if(!k.hasOwnProperty("model"))return!1;const b=k.model;return!!b.isFirstChange()||!Object.is(S,b.currentValue)}function ke(k,S){k._syncPendingControls(),S.forEach(b=>{const Z=b.control;"submit"===Z.updateOn&&Z._pendingChange&&(b.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1)})}function at(k,S){if(!S)return null;let b,Z,ut;return Array.isArray(S),S.forEach(en=>{en.constructor===We?b=en:function ae(k){return Object.getPrototypeOf(k.constructor)===Ee}(en)?Z=en:ut=en}),ut||Z||b||null}function kt(k,S){const b=k.indexOf(S);b>-1&&k.splice(b,1)}const Rn="VALID",$r="INVALID",Wr="PENDING",zr="DISABLED";function Qr(k){return(yn(k)?k.validators:k)||null}function Kr(k){return Array.isArray(k)?vt(k):k||null}function Mt(k,S){return(yn(S)?S.asyncValidators:k)||null}function nn(k){return Array.isArray(k)?bt(k):k||null}function yn(k){return null!=k&&!Array.isArray(k)&&"object"==typeof k}const wr=k=>k instanceof mn,hi=k=>k instanceof ri;function ni(k){return wr(k)?k.value:k.getRawValue()}function Bn(k,S){const b=hi(k),Z=k.controls;if(!(b?Object.keys(Z):Z).length)throw new p.vHH(1e3,"");if(!Z[S])throw new p.vHH(1001,"")}function or(k,S){hi(k),k._forEachChild((Z,ut)=>{if(void 0===S[ut])throw new p.vHH(1002,"")})}class Or{constructor(S,b){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=S,this._rawAsyncValidators=b,this._composedValidatorFn=Kr(this._rawValidators),this._composedAsyncValidatorFn=nn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(S){this._rawValidators=this._composedValidatorFn=S}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(S){this._rawAsyncValidators=this._composedAsyncValidatorFn=S}get parent(){return this._parent}get valid(){return this.status===Rn}get invalid(){return this.status===$r}get pending(){return this.status==Wr}get disabled(){return this.status===zr}get enabled(){return this.status!==zr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(S){this._rawValidators=S,this._composedValidatorFn=Kr(S)}setAsyncValidators(S){this._rawAsyncValidators=S,this._composedAsyncValidatorFn=nn(S)}addValidators(S){this.setValidators(zn(S,this._rawValidators))}addAsyncValidators(S){this.setAsyncValidators(zn(S,this._rawAsyncValidators))}removeValidators(S){this.setValidators(Gn(S,this._rawValidators))}removeAsyncValidators(S){this.setAsyncValidators(Gn(S,this._rawAsyncValidators))}hasValidator(S){return on(this._rawValidators,S)}hasAsyncValidator(S){return on(this._rawAsyncValidators,S)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(S={}){this.touched=!0,this._parent&&!S.onlySelf&&this._parent.markAsTouched(S)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(S=>S.markAllAsTouched())}markAsUntouched(S={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(b=>{b.markAsUntouched({onlySelf:!0})}),this._parent&&!S.onlySelf&&this._parent._updateTouched(S)}markAsDirty(S={}){this.pristine=!1,this._parent&&!S.onlySelf&&this._parent.markAsDirty(S)}markAsPristine(S={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(b=>{b.markAsPristine({onlySelf:!0})}),this._parent&&!S.onlySelf&&this._parent._updatePristine(S)}markAsPending(S={}){this.status=Wr,!1!==S.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!S.onlySelf&&this._parent.markAsPending(S)}disable(S={}){const b=this._parentMarkedDirty(S.onlySelf);this.status=zr,this.errors=null,this._forEachChild(Z=>{Z.disable(Object.assign(Object.assign({},S),{onlySelf:!0}))}),this._updateValue(),!1!==S.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},S),{skipPristineCheck:b})),this._onDisabledChange.forEach(Z=>Z(!0))}enable(S={}){const b=this._parentMarkedDirty(S.onlySelf);this.status=Rn,this._forEachChild(Z=>{Z.enable(Object.assign(Object.assign({},S),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:S.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},S),{skipPristineCheck:b})),this._onDisabledChange.forEach(Z=>Z(!1))}_updateAncestors(S){this._parent&&!S.onlySelf&&(this._parent.updateValueAndValidity(S),S.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(S){this._parent=S}updateValueAndValidity(S={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rn||this.status===Wr)&&this._runAsyncValidator(S.emitEvent)),!1!==S.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!S.onlySelf&&this._parent.updateValueAndValidity(S)}_updateTreeValidity(S={emitEvent:!0}){this._forEachChild(b=>b._updateTreeValidity(S)),this.updateValueAndValidity({onlySelf:!0,emitEvent:S.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zr:Rn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(S){if(this.asyncValidator){this.status=Wr,this._hasOwnPendingAsyncValidator=!0;const b=et(this.asyncValidator(this));this._asyncValidationSubscription=b.subscribe(Z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Z,{emitEvent:S})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(S,b={}){this.errors=S,this._updateControlsErrors(!1!==b.emitEvent)}get(S){return function fr(k,S,b){if(null==S||(Array.isArray(S)||(S=S.split(b)),Array.isArray(S)&&0===S.length))return null;let Z=k;return S.forEach(ut=>{Z=hi(Z)?Z.controls.hasOwnProperty(ut)?Z.controls[ut]:null:(k=>k instanceof Fi)(Z)&&Z.at(ut)||null}),Z}(this,S,".")}getError(S,b){const Z=b?this.get(b):this;return Z&&Z.errors?Z.errors[S]:null}hasError(S,b){return!!this.getError(S,b)}get root(){let S=this;for(;S._parent;)S=S._parent;return S}_updateControlsErrors(S){this.status=this._calculateStatus(),S&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(S)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?zr:this.errors?$r:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wr)?Wr:this._anyControlsHaveStatus($r)?$r:Rn}_anyControlsHaveStatus(S){return this._anyControls(b=>b.status===S)}_anyControlsDirty(){return this._anyControls(S=>S.dirty)}_anyControlsTouched(){return this._anyControls(S=>S.touched)}_updatePristine(S={}){this.pristine=!this._anyControlsDirty(),this._parent&&!S.onlySelf&&this._parent._updatePristine(S)}_updateTouched(S={}){this.touched=this._anyControlsTouched(),this._parent&&!S.onlySelf&&this._parent._updateTouched(S)}_isBoxedValue(S){return"object"==typeof S&&null!==S&&2===Object.keys(S).length&&"value"in S&&"disabled"in S}_registerOnCollectionChange(S){this._onCollectionChange=S}_setUpdateStrategy(S){yn(S)&&null!=S.updateOn&&(this._updateOn=S.updateOn)}_parentMarkedDirty(S){return!S&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class mn extends Or{constructor(S=null,b,Z){super(Qr(b),Mt(Z,b)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(S),this._setUpdateStrategy(b),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yn(b)&&b.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(S)?S.value:S)}setValue(S,b={}){this.value=this._pendingValue=S,this._onChange.length&&!1!==b.emitModelToViewChange&&this._onChange.forEach(Z=>Z(this.value,!1!==b.emitViewToModelChange)),this.updateValueAndValidity(b)}patchValue(S,b={}){this.setValue(S,b)}reset(S=this.defaultValue,b={}){this._applyFormState(S),this.markAsPristine(b),this.markAsUntouched(b),this.setValue(this.value,b),this._pendingChange=!1}_updateValue(){}_anyControls(S){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(S){this._onChange.push(S)}_unregisterOnChange(S){kt(this._onChange,S)}registerOnDisabledChange(S){this._onDisabledChange.push(S)}_unregisterOnDisabledChange(S){kt(this._onDisabledChange,S)}_forEachChild(S){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(S){this._isBoxedValue(S)?(this.value=this._pendingValue=S.value,S.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=S}}class ri extends Or{constructor(S,b,Z){super(Qr(b),Mt(Z,b)),this.controls=S,this._initObservables(),this._setUpdateStrategy(b),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(S,b){return this.controls[S]?this.controls[S]:(this.controls[S]=b,b.setParent(this),b._registerOnCollectionChange(this._onCollectionChange),b)}addControl(S,b,Z={}){this.registerControl(S,b),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}removeControl(S,b={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),delete this.controls[S],this.updateValueAndValidity({emitEvent:b.emitEvent}),this._onCollectionChange()}setControl(S,b,Z={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),delete this.controls[S],b&&this.registerControl(S,b),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}contains(S){return this.controls.hasOwnProperty(S)&&this.controls[S].enabled}setValue(S,b={}){or(this,S),Object.keys(S).forEach(Z=>{Bn(this,Z),this.controls[Z].setValue(S[Z],{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b)}patchValue(S,b={}){null!=S&&(Object.keys(S).forEach(Z=>{this.controls[Z]&&this.controls[Z].patchValue(S[Z],{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b))}reset(S={},b={}){this._forEachChild((Z,ut)=>{Z.reset(S[ut],{onlySelf:!0,emitEvent:b.emitEvent})}),this._updatePristine(b),this._updateTouched(b),this.updateValueAndValidity(b)}getRawValue(){return this._reduceChildren({},(S,b,Z)=>(S[Z]=ni(b),S))}_syncPendingControls(){let S=this._reduceChildren(!1,(b,Z)=>!!Z._syncPendingControls()||b);return S&&this.updateValueAndValidity({onlySelf:!0}),S}_forEachChild(S){Object.keys(this.controls).forEach(b=>{const Z=this.controls[b];Z&&S(Z,b)})}_setUpControls(){this._forEachChild(S=>{S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(S){for(const b of Object.keys(this.controls)){const Z=this.controls[b];if(this.contains(b)&&S(Z))return!0}return!1}_reduceValue(){return this._reduceChildren({},(S,b,Z)=>((b.enabled||this.disabled)&&(S[Z]=b.value),S))}_reduceChildren(S,b){let Z=S;return this._forEachChild((ut,en)=>{Z=b(Z,ut,en)}),Z}_allControlsDisabled(){for(const S of Object.keys(this.controls))if(this.controls[S].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Fi extends Or{constructor(S,b,Z){super(Qr(b),Mt(Z,b)),this.controls=S,this._initObservables(),this._setUpdateStrategy(b),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(S){return this.controls[S]}push(S,b={}){this.controls.push(S),this._registerControl(S),this.updateValueAndValidity({emitEvent:b.emitEvent}),this._onCollectionChange()}insert(S,b,Z={}){this.controls.splice(S,0,b),this._registerControl(b),this.updateValueAndValidity({emitEvent:Z.emitEvent})}removeAt(S,b={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),this.controls.splice(S,1),this.updateValueAndValidity({emitEvent:b.emitEvent})}setControl(S,b,Z={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),this.controls.splice(S,1),b&&(this.controls.splice(S,0,b),this._registerControl(b)),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(S,b={}){or(this,S),S.forEach((Z,ut)=>{Bn(this,ut),this.at(ut).setValue(Z,{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b)}patchValue(S,b={}){null!=S&&(S.forEach((Z,ut)=>{this.at(ut)&&this.at(ut).patchValue(Z,{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b))}reset(S=[],b={}){this._forEachChild((Z,ut)=>{Z.reset(S[ut],{onlySelf:!0,emitEvent:b.emitEvent})}),this._updatePristine(b),this._updateTouched(b),this.updateValueAndValidity(b)}getRawValue(){return this.controls.map(S=>ni(S))}clear(S={}){this.controls.length<1||(this._forEachChild(b=>b._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:S.emitEvent}))}_syncPendingControls(){let S=this.controls.reduce((b,Z)=>!!Z._syncPendingControls()||b,!1);return S&&this.updateValueAndValidity({onlySelf:!0}),S}_forEachChild(S){this.controls.forEach((b,Z)=>{S(b,Z)})}_updateValue(){this.value=this.controls.filter(S=>S.enabled||this.disabled).map(S=>S.value)}_anyControls(S){return this.controls.some(b=>b.enabled&&S(b))}_setUpControls(){this._forEachChild(S=>this._registerControl(S))}_allControlsDisabled(){for(const S of this.controls)if(S.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(S){S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange)}}const ns={provide:En,useExisting:(0,p.Gpc)(()=>Pn)},Ar=(()=>Promise.resolve(null))();let Pn=(()=>{class k extends En{constructor(b,Z){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new ri({},vt(b),bt(Z))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(b){Ar.then(()=>{const Z=this._findContainer(b.path);b.control=Z.registerControl(b.name,b.control),Zt(b.control,b),b.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(b)})}getControl(b){return this.form.get(b.path)}removeControl(b){Ar.then(()=>{const Z=this._findContainer(b.path);Z&&Z.removeControl(b.name),this._directives.delete(b)})}addFormGroup(b){Ar.then(()=>{const Z=this._findContainer(b.path),ut=new ri({});ne(ut,b),Z.registerControl(b.name,ut),ut.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(b){Ar.then(()=>{const Z=this._findContainer(b.path);Z&&Z.removeControl(b.name)})}getFormGroup(b){return this.form.get(b.path)}updateModel(b,Z){Ar.then(()=>{this.form.get(b.path).setValue(Z)})}setValue(b){this.control.setValue(b)}onSubmit(b){return this.submitted=!0,ke(this.form,this._directives),this.ngSubmit.emit(b),!1}onReset(){this.resetForm()}resetForm(b){this.form.reset(b),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(b){return b.pop(),b.length?this.form.get(b):this.form}}return k.\u0275fac=function(b){return new(b||k)(p.Y36(Ve,10),p.Y36(Te,10))},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(b,Z){1&b&&p.NdJ("submit",function(en){return Z.onSubmit(en)})("reset",function(){return Z.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([ns]),p.qOj]}),k})();const _i={provide:On,useExisting:(0,p.Gpc)(()=>fi)},zi=(()=>Promise.resolve(null))();let fi=(()=>{class k extends On{constructor(b,Z,ut,en,mr){super(),this._changeDetectorRef=mr,this.control=new mn,this._registered=!1,this.update=new p.vpe,this._parent=b,this._setValidators(Z),this._setAsyncValidators(ut),this.valueAccessor=at(0,en)}ngOnChanges(b){if(this._checkForErrors(),!this._registered||"name"in b){if(this._registered&&(this._checkName(),this.formDirective)){const Z=b.name.previousValue;this.formDirective.removeControl({name:Z,path:this._getPath(Z)})}this._setUpControl()}"isDisabled"in b&&this._updateDisabled(b),we(b,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(b){this.viewModel=b,this.update.emit(b)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(b){zi.then(()=>{var Z;this.control.setValue(b,{emitViewToModelChange:!1}),null===(Z=this._changeDetectorRef)||void 0===Z||Z.markForCheck()})}_updateDisabled(b){const Z=b.isDisabled.currentValue,ut=""===Z||Z&&"false"!==Z;zi.then(()=>{var en;ut&&!this.control.disabled?this.control.disable():!ut&&this.control.disabled&&this.control.enable(),null===(en=this._changeDetectorRef)||void 0===en||en.markForCheck()})}_getPath(b){return this._parent?function ur(k,S){return[...S.path,k]}(b,this._parent):[b]}}return k.\u0275fac=function(b){return new(b||k)(p.Y36(En,9),p.Y36(Ve,10),p.Y36(Te,10),p.Y36(ue,10),p.Y36(p.sBO,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([_i]),p.qOj,p.TTD]}),k})(),Ds=(()=>{class k{}return k.\u0275fac=function(b){return new(b||k)},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),k})(),rr=(()=>{class k{}return k.\u0275fac=function(b){return new(b||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({}),k})();const Je=new p.OlP("NgModelWithFormControlWarning"),mt={provide:On,useExisting:(0,p.Gpc)(()=>Ot)};let Ot=(()=>{class k extends On{constructor(b,Z,ut,en){super(),this._ngModelWarningConfig=en,this.update=new p.vpe,this._ngModelWarningSent=!1,this._setValidators(b),this._setAsyncValidators(Z),this.valueAccessor=at(0,ut)}set isDisabled(b){}ngOnChanges(b){if(this._isControlChanged(b)){const Z=b.form.previousValue;Z&&sr(Z,this,!1),Zt(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}we(b,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&sr(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(b){this.viewModel=b,this.update.emit(b)}_isControlChanged(b){return b.hasOwnProperty("form")}}return k._ngModelWarningSentOnce=!1,k.\u0275fac=function(b){return new(b||k)(p.Y36(Ve,10),p.Y36(Te,10),p.Y36(ue,10),p.Y36(Je,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[p._Bn([mt]),p.qOj,p.TTD]}),k})();const Qt={provide:En,useExisting:(0,p.Gpc)(()=>jn)};let jn=(()=>{class k extends En{constructor(b,Z){super(),this.validators=b,this.asyncValidators=Z,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(b),this._setAsyncValidators(Z)}ngOnChanges(b){this._checkFormPresent(),b.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(At(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(b){const Z=this.form.get(b.path);return Zt(Z,b),Z.updateValueAndValidity({emitEvent:!1}),this.directives.push(b),Z}getControl(b){return this.form.get(b.path)}removeControl(b){sr(b.control||null,b,!1),kt(this.directives,b)}addFormGroup(b){this._setUpFormContainer(b)}removeFormGroup(b){this._cleanUpFormContainer(b)}getFormGroup(b){return this.form.get(b.path)}addFormArray(b){this._setUpFormContainer(b)}removeFormArray(b){this._cleanUpFormContainer(b)}getFormArray(b){return this.form.get(b.path)}updateModel(b,Z){this.form.get(b.path).setValue(Z)}onSubmit(b){return this.submitted=!0,ke(this.form,this.directives),this.ngSubmit.emit(b),!1}onReset(){this.resetForm()}resetForm(b){this.form.reset(b),this.submitted=!1}_updateDomValue(){this.directives.forEach(b=>{const Z=b.control,ut=this.form.get(b.path);Z!==ut&&(sr(Z||null,b),wr(ut)&&(Zt(ut,b),b.control=ut))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(b){const Z=this.form.get(b.path);ne(Z,b),Z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(b){if(this.form){const Z=this.form.get(b.path);Z&&function Ae(k,S){return At(k,S)}(Z,b)&&Z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Be(this.form,this),this._oldForm&&At(this._oldForm,this)}_checkFormPresent(){}}return k.\u0275fac=function(b){return new(b||k)(p.Y36(Ve,10),p.Y36(Te,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroup",""]],hostBindings:function(b,Z){1&b&&p.NdJ("submit",function(en){return Z.onSubmit(en)})("reset",function(){return Z.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Qt]),p.qOj,p.TTD]}),k})();const xs={provide:ue,useExisting:(0,p.Gpc)(()=>Er),multi:!0};function ii(k,S){return null==k?`${S}`:(S&&"object"==typeof S&&(S="Object"),`${k}: ${S}`.slice(0,50))}let Er=(()=>{class k extends Ee{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(b){this._compareWith=b}writeValue(b){this.value=b;const ut=ii(this._getOptionId(b),b);this.setProperty("value",ut)}registerOnChange(b){this.onChange=Z=>{this.value=this._getOptionValue(Z),b(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(b){for(const Z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Z),b))return Z;return null}_getOptionValue(b){const Z=function Di(k){return k.split(":")[0]}(b);return this._optionMap.has(Z)?this._optionMap.get(Z):b}}return k.\u0275fac=function(){let S;return function(Z){return(S||(S=p.n5z(k)))(Z||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(b,Z){1&b&&p.NdJ("change",function(en){return Z.onChange(en.target.value)})("blur",function(){return Z.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([xs]),p.qOj]}),k})(),as=(()=>{class k{constructor(b,Z,ut){this._element=b,this._renderer=Z,this._select=ut,this._select&&(this.id=this._select._registerOption())}set ngValue(b){null!=this._select&&(this._select._optionMap.set(this.id,b),this._setElementValue(ii(this.id,b)),this._select.writeValue(this._select.value))}set value(b){this._setElementValue(b),this._select&&this._select.writeValue(this._select.value)}_setElementValue(b){this._renderer.setProperty(this._element.nativeElement,"value",b)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(b){return new(b||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Er,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();const us={provide:ue,useExisting:(0,p.Gpc)(()=>bi),multi:!0};function ls(k,S){return null==k?`${S}`:("string"==typeof S&&(S=`'${S}'`),S&&"object"==typeof S&&(S="Object"),`${k}: ${S}`.slice(0,50))}let bi=(()=>{class k extends Ee{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(b){this._compareWith=b}writeValue(b){let Z;if(this.value=b,Array.isArray(b)){const ut=b.map(en=>this._getOptionId(en));Z=(en,mr)=>{en._setSelected(ut.indexOf(mr.toString())>-1)}}else Z=(ut,en)=>{ut._setSelected(!1)};this._optionMap.forEach(Z)}registerOnChange(b){this.onChange=Z=>{const ut=[],en=Z.selectedOptions;if(void 0!==en){const mr=en;for(let V=0;V<mr.length;V++){const ee=this._getOptionValue(mr[V].value);ut.push(ee)}}else{const mr=Z.options;for(let V=0;V<mr.length;V++){const O=mr[V];if(O.selected){const ee=this._getOptionValue(O.value);ut.push(ee)}}}this.value=ut,b(ut)}}_registerOption(b){const Z=(this._idCounter++).toString();return this._optionMap.set(Z,b),Z}_getOptionId(b){for(const Z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Z)._value,b))return Z;return null}_getOptionValue(b){const Z=function to(k){return k.split(":")[0]}(b);return this._optionMap.has(Z)?this._optionMap.get(Z)._value:b}}return k.\u0275fac=function(){let S;return function(Z){return(S||(S=p.n5z(k)))(Z||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(b,Z){1&b&&p.NdJ("change",function(en){return Z.onChange(en.target)})("blur",function(){return Z.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([us]),p.qOj]}),k})(),Ki=(()=>{class k{constructor(b,Z,ut){this._element=b,this._renderer=Z,this._select=ut,this._select&&(this.id=this._select._registerOption(this))}set ngValue(b){null!=this._select&&(this._value=b,this._setElementValue(ls(this.id,b)),this._select.writeValue(this._select.value))}set value(b){this._select?(this._value=b,this._setElementValue(ls(this.id,b)),this._select.writeValue(this._select.value)):this._setElementValue(b)}_setElementValue(b){this._renderer.setProperty(this._element.nativeElement,"value",b)}_setSelected(b){this._renderer.setProperty(this._element.nativeElement,"selected",b)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(b){return new(b||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(bi,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})(),Ir=(()=>{class k{constructor(){this._validator=Pe}ngOnChanges(b){if(this.inputName in b){const Z=this.normalizeInput(b[this.inputName].currentValue);this._enabled=this.enabled(Z),this._validator=this._enabled?this.createValidator(Z):Pe,this._onChange&&this._onChange()}}validate(b){return this._validator(b)}registerOnValidatorChange(b){this._onChange=b}enabled(b){return null!=b}}return k.\u0275fac=function(b){return new(b||k)},k.\u0275dir=p.lG2({type:k,features:[p.TTD]}),k})();const si={provide:Ve,useExisting:(0,p.Gpc)(()=>gi),multi:!0};let gi=(()=>{class k extends Ir{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=b=>function qi(k){return null!=k&&!1!==k&&"false"!=`${k}`}(b),this.createValidator=b=>pe}enabled(b){return b}}return k.\u0275fac=function(){let S;return function(Z){return(S||(S=p.n5z(k)))(Z||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(b,Z){2&b&&p.uIk("required",Z._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([si]),p.qOj]}),k})();const be={provide:Ve,useExisting:(0,p.Gpc)(()=>it),multi:!0};let it=(()=>{class k extends Ir{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=b=>b,this.createValidator=b=>X(b)}}return k.\u0275fac=function(){let S;return function(Z){return(S||(S=p.n5z(k)))(Z||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(b,Z){2&b&&p.uIk("pattern",Z._enabled?Z.pattern:null)},inputs:{pattern:"pattern"},features:[p._Bn([be]),p.qOj]}),k})(),$n=(()=>{class k{}return k.\u0275fac=function(b){return new(b||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[[rr]]}),k})(),wn=(()=>{class k{}return k.\u0275fac=function(b){return new(b||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[$n]}),k})(),Sn=(()=>{class k{static withConfig(b){return{ngModule:k,providers:[{provide:Je,useValue:b.warnOnNgModelWithFormControl}]}}}return k.\u0275fac=function(b){return new(b||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[$n]}),k})()},2313:(pt,Se,T)=>{"use strict";T.d(Se,{H7:()=>Ae,b2:()=>ir,q6:()=>En});var p=T(9808),N=T(5e3);class G extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class de extends G{static makeCurrent(){(0,p.HT)(new de)}onAndCancel(we,ae,ke){return we.addEventListener(ae,ke,!1),()=>{we.removeEventListener(ae,ke,!1)}}dispatchEvent(we,ae){we.dispatchEvent(ae)}remove(we){we.parentNode&&we.parentNode.removeChild(we)}createElement(we,ae){return(ae=ae||this.getDefaultDocument()).createElement(we)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(we){return we.nodeType===Node.ELEMENT_NODE}isShadowRoot(we){return we instanceof DocumentFragment}getGlobalEventTarget(we,ae){return"window"===ae?window:"document"===ae?we:"body"===ae?we.body:null}getBaseHref(we){const ae=function me(){return ie=ie||document.querySelector("base"),ie?ie.getAttribute("href"):null}();return null==ae?null:function ue(xe){Ee=Ee||document.createElement("a"),Ee.setAttribute("href",xe);const we=Ee.pathname;return"/"===we.charAt(0)?we:`/${we}`}(ae)}resetBaseElement(){ie=null}getUserAgent(){return window.navigator.userAgent}getCookie(we){return(0,p.Mx)(document.cookie,we)}}let Ee,ie=null;const Ie=new N.OlP("TRANSITION_ID"),re=[{provide:N.ip1,useFactory:function le(xe,we,ae){return()=>{ae.get(N.CZH).donePromise.then(()=>{const ke=(0,p.q)(),at=we.querySelectorAll(`style[ng-transition="${xe}"]`);for(let kt=0;kt<at.length;kt++)ke.remove(at[kt])})}},deps:[Ie,p.K0,N.zs3],multi:!0}];class _e{static init(){(0,N.VLi)(new _e)}addToWindow(we){N.dqk.getAngularTestability=(ke,at=!0)=>{const kt=we.findTestabilityInTree(ke,at);if(null==kt)throw new Error("Could not find testability for element.");return kt},N.dqk.getAllAngularTestabilities=()=>we.getAllTestabilities(),N.dqk.getAllAngularRootElements=()=>we.getAllRootElements(),N.dqk.frameworkStabilizers||(N.dqk.frameworkStabilizers=[]),N.dqk.frameworkStabilizers.push(ke=>{const at=N.dqk.getAllAngularTestabilities();let kt=at.length,Jt=!1;const vn=function(Rn){Jt=Jt||Rn,kt--,0==kt&&ke(Jt)};at.forEach(function(Rn){Rn.whenStable(vn)})})}findTestabilityInTree(we,ae,ke){if(null==ae)return null;const at=we.getTestability(ae);return null!=at?at:ke?(0,p.q)().isShadowRoot(ae)?this.findTestabilityInTree(we,ae.host,!0):this.findTestabilityInTree(we,ae.parentElement,!0):null}}let $e=(()=>{class xe{build(){return new XMLHttpRequest}}return xe.\u0275fac=function(ae){return new(ae||xe)},xe.\u0275prov=N.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const We=new N.OlP("EventManagerPlugins");let Ke=(()=>{class xe{constructor(ae,ke){this._zone=ke,this._eventNameToPlugin=new Map,ae.forEach(at=>at.manager=this),this._plugins=ae.slice().reverse()}addEventListener(ae,ke,at){return this._findPluginFor(ke).addEventListener(ae,ke,at)}addGlobalEventListener(ae,ke,at){return this._findPluginFor(ke).addGlobalEventListener(ae,ke,at)}getZone(){return this._zone}_findPluginFor(ae){const ke=this._eventNameToPlugin.get(ae);if(ke)return ke;const at=this._plugins;for(let kt=0;kt<at.length;kt++){const Jt=at[kt];if(Jt.supports(ae))return this._eventNameToPlugin.set(ae,Jt),Jt}throw new Error(`No event manager plugin found for event ${ae}`)}}return xe.\u0275fac=function(ae){return new(ae||xe)(N.LFG(We),N.LFG(N.R0b))},xe.\u0275prov=N.Yz7({token:xe,factory:xe.\u0275fac}),xe})();class Et{constructor(we){this._doc=we}addGlobalEventListener(we,ae,ke){const at=(0,p.q)().getGlobalEventTarget(this._doc,we);if(!at)throw new Error(`Unsupported event target ${at} for event ${ae}`);return this.addEventListener(at,ae,ke)}}let Ve=(()=>{class xe{constructor(){this._stylesSet=new Set}addStyles(ae){const ke=new Set;ae.forEach(at=>{this._stylesSet.has(at)||(this._stylesSet.add(at),ke.add(at))}),this.onStylesAdded(ke)}onStylesAdded(ae){}getAllStyles(){return Array.from(this._stylesSet)}}return xe.\u0275fac=function(ae){return new(ae||xe)},xe.\u0275prov=N.Yz7({token:xe,factory:xe.\u0275fac}),xe})(),Te=(()=>{class xe extends Ve{constructor(ae){super(),this._doc=ae,this._hostNodes=new Map,this._hostNodes.set(ae.head,[])}_addStylesToHost(ae,ke,at){ae.forEach(kt=>{const Jt=this._doc.createElement("style");Jt.textContent=kt,at.push(ke.appendChild(Jt))})}addHost(ae){const ke=[];this._addStylesToHost(this._stylesSet,ae,ke),this._hostNodes.set(ae,ke)}removeHost(ae){const ke=this._hostNodes.get(ae);ke&&ke.forEach(ct),this._hostNodes.delete(ae)}onStylesAdded(ae){this._hostNodes.forEach((ke,at)=>{this._addStylesToHost(ae,at,ke)})}ngOnDestroy(){this._hostNodes.forEach(ae=>ae.forEach(ct))}}return xe.\u0275fac=function(ae){return new(ae||xe)(N.LFG(p.K0))},xe.\u0275prov=N.Yz7({token:xe,factory:xe.\u0275fac}),xe})();function ct(xe){(0,p.q)().remove(xe)}const H={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},F=/%COMP%/g;function X(xe,we,ae){for(let ke=0;ke<we.length;ke++){let at=we[ke];Array.isArray(at)?X(xe,at,ae):(at=at.replace(F,xe),ae.push(at))}return ae}function Pe(xe){return we=>{if("__ngUnwrap__"===we)return xe;!1===xe(we)&&(we.preventDefault(),we.returnValue=!1)}}let et=(()=>{class xe{constructor(ae,ke,at){this.eventManager=ae,this.sharedStylesHost=ke,this.appId=at,this.rendererByCompId=new Map,this.defaultRenderer=new he(ae)}createRenderer(ae,ke){if(!ae||!ke)return this.defaultRenderer;switch(ke.encapsulation){case N.ifc.Emulated:{let at=this.rendererByCompId.get(ke.id);return at||(at=new ht(this.eventManager,this.sharedStylesHost,ke,this.appId),this.rendererByCompId.set(ke.id,at)),at.applyToHost(ae),at}case 1:case N.ifc.ShadowDom:return new Qe(this.eventManager,this.sharedStylesHost,ae,ke);default:if(!this.rendererByCompId.has(ke.id)){const at=X(ke.id,ke.styles,[]);this.sharedStylesHost.addStyles(at),this.rendererByCompId.set(ke.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return xe.\u0275fac=function(ae){return new(ae||xe)(N.LFG(Ke),N.LFG(Te),N.LFG(N.AFp))},xe.\u0275prov=N.Yz7({token:xe,factory:xe.\u0275fac}),xe})();class he{constructor(we){this.eventManager=we,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(we,ae){return ae?document.createElementNS(H[ae]||ae,we):document.createElement(we)}createComment(we){return document.createComment(we)}createText(we){return document.createTextNode(we)}appendChild(we,ae){we.appendChild(ae)}insertBefore(we,ae,ke){we&&we.insertBefore(ae,ke)}removeChild(we,ae){we&&we.removeChild(ae)}selectRootElement(we,ae){let ke="string"==typeof we?document.querySelector(we):we;if(!ke)throw new Error(`The selector "${we}" did not match any elements`);return ae||(ke.textContent=""),ke}parentNode(we){return we.parentNode}nextSibling(we){return we.nextSibling}setAttribute(we,ae,ke,at){if(at){ae=at+":"+ae;const kt=H[at];kt?we.setAttributeNS(kt,ae,ke):we.setAttribute(ae,ke)}else we.setAttribute(ae,ke)}removeAttribute(we,ae,ke){if(ke){const at=H[ke];at?we.removeAttributeNS(at,ae):we.removeAttribute(`${ke}:${ae}`)}else we.removeAttribute(ae)}addClass(we,ae){we.classList.add(ae)}removeClass(we,ae){we.classList.remove(ae)}setStyle(we,ae,ke,at){at&(N.JOm.DashCase|N.JOm.Important)?we.style.setProperty(ae,ke,at&N.JOm.Important?"important":""):we.style[ae]=ke}removeStyle(we,ae,ke){ke&N.JOm.DashCase?we.style.removeProperty(ae):we.style[ae]=""}setProperty(we,ae,ke){we[ae]=ke}setValue(we,ae){we.nodeValue=ae}listen(we,ae,ke){return"string"==typeof we?this.eventManager.addGlobalEventListener(we,ae,Pe(ke)):this.eventManager.addEventListener(we,ae,Pe(ke))}}class ht extends he{constructor(we,ae,ke,at){super(we),this.component=ke;const kt=X(at+"-"+ke.id,ke.styles,[]);ae.addStyles(kt),this.contentAttr=function Re(xe){return"_ngcontent-%COMP%".replace(F,xe)}(at+"-"+ke.id),this.hostAttr=function ve(xe){return"_nghost-%COMP%".replace(F,xe)}(at+"-"+ke.id)}applyToHost(we){super.setAttribute(we,this.hostAttr,"")}createElement(we,ae){const ke=super.createElement(we,ae);return super.setAttribute(ke,this.contentAttr,""),ke}}class Qe extends he{constructor(we,ae,ke,at){super(we),this.sharedStylesHost=ae,this.hostEl=ke,this.shadowRoot=ke.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const kt=X(at.id,at.styles,[]);for(let Jt=0;Jt<kt.length;Jt++){const vn=document.createElement("style");vn.textContent=kt[Jt],this.shadowRoot.appendChild(vn)}}nodeOrShadowRoot(we){return we===this.hostEl?this.shadowRoot:we}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(we,ae){return super.appendChild(this.nodeOrShadowRoot(we),ae)}insertBefore(we,ae,ke){return super.insertBefore(this.nodeOrShadowRoot(we),ae,ke)}removeChild(we,ae){return super.removeChild(this.nodeOrShadowRoot(we),ae)}parentNode(we){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(we)))}}let vt=(()=>{class xe extends Et{constructor(ae){super(ae)}supports(ae){return!0}addEventListener(ae,ke,at){return ae.addEventListener(ke,at,!1),()=>this.removeEventListener(ae,ke,at)}removeEventListener(ae,ke,at){return ae.removeEventListener(ke,at)}}return xe.\u0275fac=function(ae){return new(ae||xe)(N.LFG(p.K0))},xe.\u0275prov=N.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const Pt=["alt","control","meta","shift"],Tt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hn={alt:xe=>xe.altKey,control:xe=>xe.ctrlKey,meta:xe=>xe.metaKey,shift:xe=>xe.shiftKey};let fn=(()=>{class xe extends Et{constructor(ae){super(ae)}supports(ae){return null!=xe.parseEventName(ae)}addEventListener(ae,ke,at){const kt=xe.parseEventName(ke),Jt=xe.eventCallback(kt.fullKey,at,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(ae,kt.domEventName,Jt))}static parseEventName(ae){const ke=ae.toLowerCase().split("."),at=ke.shift();if(0===ke.length||"keydown"!==at&&"keyup"!==at)return null;const kt=xe._normalizeKey(ke.pop());let Jt="";if(Pt.forEach(Rn=>{const $r=ke.indexOf(Rn);$r>-1&&(ke.splice($r,1),Jt+=Rn+".")}),Jt+=kt,0!=ke.length||0===kt.length)return null;const vn={};return vn.domEventName=at,vn.fullKey=Jt,vn}static getEventFullKey(ae){let ke="",at=function on(xe){let we=xe.key;if(null==we){if(we=xe.keyIdentifier,null==we)return"Unidentified";we.startsWith("U+")&&(we=String.fromCharCode(parseInt(we.substring(2),16)),3===xe.location&&dt.hasOwnProperty(we)&&(we=dt[we]))}return Tt[we]||we}(ae);return at=at.toLowerCase()," "===at?at="space":"."===at&&(at="dot"),Pt.forEach(kt=>{kt!=at&&hn[kt](ae)&&(ke+=kt+".")}),ke+=at,ke}static eventCallback(ae,ke,at){return kt=>{xe.getEventFullKey(kt)===ae&&at.runGuarded(()=>ke(kt))}}static _normalizeKey(ae){return"esc"===ae?"escape":ae}}return xe.\u0275fac=function(ae){return new(ae||xe)(N.LFG(p.K0))},xe.\u0275prov=N.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const En=(0,N.eFA)(N._c5,"browser",[{provide:N.Lbi,useValue:p.bD},{provide:N.g9A,useValue:function zn(){de.makeCurrent(),_e.init()},multi:!0},{provide:p.K0,useFactory:function tr(){return(0,N.RDi)(document),document},deps:[]}]),Un=[{provide:N.zSh,useValue:"root"},{provide:N.qLn,useFactory:function Gn(){return new N.qLn},deps:[]},{provide:We,useClass:vt,multi:!0,deps:[p.K0,N.R0b,N.Lbi]},{provide:We,useClass:fn,multi:!0,deps:[p.K0]},{provide:et,useClass:et,deps:[Ke,Te,N.AFp]},{provide:N.FYo,useExisting:et},{provide:Ve,useExisting:Te},{provide:Te,useClass:Te,deps:[p.K0]},{provide:N.dDg,useClass:N.dDg,deps:[N.R0b]},{provide:Ke,useClass:Ke,deps:[We,N.R0b]},{provide:p.JF,useClass:$e,deps:[]}];let ir=(()=>{class xe{constructor(ae){if(ae)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ae){return{ngModule:xe,providers:[{provide:N.AFp,useValue:ae.appId},{provide:Ie,useExisting:N.AFp},re]}}}return xe.\u0275fac=function(ae){return new(ae||xe)(N.LFG(xe,12))},xe.\u0275mod=N.oAB({type:xe}),xe.\u0275inj=N.cJS({providers:Un,imports:[p.ez,N.hGG]}),xe})();"undefined"!=typeof window&&window;let Ae=(()=>{class xe{}return xe.\u0275fac=function(ae){return new(ae||xe)},xe.\u0275prov=N.Yz7({token:xe,factory:function(ae){let ke=null;return ke=ae?new(ae||xe):N.LFG(ze),ke},providedIn:"root"}),xe})(),ze=(()=>{class xe extends Ae{constructor(ae){super(),this._doc=ae}sanitize(ae,ke){if(null==ke)return null;switch(ae){case N.q3G.NONE:return ke;case N.q3G.HTML:return(0,N.qzn)(ke,"HTML")?(0,N.z3N)(ke):(0,N.EiD)(this._doc,String(ke)).toString();case N.q3G.STYLE:return(0,N.qzn)(ke,"Style")?(0,N.z3N)(ke):ke;case N.q3G.SCRIPT:if((0,N.qzn)(ke,"Script"))return(0,N.z3N)(ke);throw new Error("unsafe value used in a script context");case N.q3G.URL:return(0,N.yhl)(ke),(0,N.qzn)(ke,"URL")?(0,N.z3N)(ke):(0,N.mCW)(String(ke));case N.q3G.RESOURCE_URL:if((0,N.qzn)(ke,"ResourceURL"))return(0,N.z3N)(ke);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ae} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ae){return(0,N.JVY)(ae)}bypassSecurityTrustStyle(ae){return(0,N.L6k)(ae)}bypassSecurityTrustScript(ae){return(0,N.eBb)(ae)}bypassSecurityTrustUrl(ae){return(0,N.LAX)(ae)}bypassSecurityTrustResourceUrl(ae){return(0,N.pB0)(ae)}}return xe.\u0275fac=function(ae){return new(ae||xe)(N.LFG(p.K0))},xe.\u0275prov=N.Yz7({token:xe,factory:function(ae){let ke=null;return ke=ae?new ae:function nt(xe){return new ze(xe.get(p.K0))}(N.LFG(N.zs3)),ke},providedIn:"root"}),xe})()},9100:(pt,Se,T)=>{"use strict";T.d(Se,{gz:()=>Ar,gk:()=>hn,m2:()=>dt,GH:()=>Un,xV:()=>En,F0:()=>Ti,Od:()=>ui,yS:()=>$s,Bz:()=>Lr,lC:()=>qi});var p=T(5e3),N=T(9751),G=T(576);function de(I,E){const _=(0,G.m)(I)?I:()=>I,M=L=>L.error(_());return new N.y(E?L=>E.schedule(M,0,L):M)}var ie=T(8421);function me(I){return new N.y(E=>{(0,ie.Xf)(I()).subscribe(E)})}var Ee=T(727),ue=T(4482),Ie=T(5403);function le(){return(0,ue.e)((I,E)=>{let _=null;I._refCount++;const M=(0,Ie.x)(E,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(_=null);const L=I._connection,$=_;_=null,L&&(!$||L===$)&&L.unsubscribe(),E.unsubscribe()});I.subscribe(M),M.closed||(_=I.connect())})}class re extends N.y{constructor(E,_){super(),this.source=E,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,ue.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,null==E||E.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new Ee.w0;const _=this.getSubject();E.add(this.source.subscribe((0,Ie.x)(_,void 0,()=>{this._teardown(),_.complete()},M=>{this._teardown(),_.error(M)},()=>this._teardown()))),E.closed&&(this._connection=null,E=Ee.w0.EMPTY)}return E}refCount(){return le()(this)}}var _e=T(8996),$e=T(9646),We=T(1135),Ke=T(9841),Et=T(6805),Ve=T(7272),Te=T(515),ct=T(7579);function H(I){return(0,ue.e)((E,_)=>{let $,M=null,L=!1;M=E.subscribe((0,Ie.x)(_,void 0,void 0,se=>{$=(0,ie.Xf)(I(se,H(I)(E))),M?(M.unsubscribe(),M=null,$.subscribe(_)):L=!0})),L&&(M.unsubscribe(),M=null,$.subscribe(_))})}var F=T(5577);function te(I,E){return(0,G.m)(E)?(0,F.z)(I,E,1):(0,F.z)(I,1)}var pe=T(9300);function Ue(I){return I<=0?()=>Te.E:(0,ue.e)((E,_)=>{let M=[];E.subscribe((0,Ie.x)(_,L=>{M.push(L),I<M.length&&M.shift()},()=>{for(const L of M)_.next(L);_.complete()},void 0,()=>{M=null}))})}var Le=T(8068),Re=T(6590),ve=T(4671),ce=T(4004),et=T(3900),he=T(5698),Ge=T(8675),qe=T(5026),ht=T(590),Qe=T(8505),vt=T(8189),Pt=T(9808);class bt{constructor(E,_){this.id=E,this.url=_}}class Tt extends bt{constructor(E,_,M="imperative",L=null){super(E,_),this.navigationTrigger=M,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class dt extends bt{constructor(E,_,M){super(E,_),this.urlAfterRedirects=M}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hn extends bt{constructor(E,_,M){super(E,_),this.reason=M}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fn extends bt{constructor(E,_,M){super(E,_),this.error=M}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class on extends bt{constructor(E,_,M,L){super(E,_),this.urlAfterRedirects=M,this.state=L}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zn extends bt{constructor(E,_,M,L){super(E,_),this.urlAfterRedirects=M,this.state=L}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gn extends bt{constructor(E,_,M,L,$){super(E,_),this.urlAfterRedirects=M,this.state=L,this.shouldActivate=$}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tr extends bt{constructor(E,_,M,L){super(E,_),this.urlAfterRedirects=M,this.state=L}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class On extends bt{constructor(E,_,M,L){super(E,_),this.urlAfterRedirects=M,this.state=L}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class En{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Un{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ir{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zn{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gt{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ln{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tn{constructor(E,_,M){this.routerEvent=E,this.position=_,this.anchor=M}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class xr{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const _=this.params[E];return Array.isArray(_)?_[0]:_}return null}getAll(E){if(this.has(E)){const _=this.params[E];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Rr(I){return new xr(I)}const Yn="ngNavigationCancelingError";function _r(I){const E=Error("NavigationCancelingError: "+I);return E[Yn]=!0,E}function Gr(I,E,_){const M=_.path.split("/");if(M.length>I.length||"full"===_.pathMatch&&(E.hasChildren()||M.length<I.length))return null;const L={};for(let $=0;$<M.length;$++){const se=M[$],Ce=I[$];if(se.startsWith(":"))L[se.substring(1)]=Ce;else if(se!==Ce.path)return null}return{consumed:I.slice(0,M.length),posParams:L}}function Vt(I,E){const _=I?Object.keys(I):void 0,M=E?Object.keys(E):void 0;if(!_||!M||_.length!=M.length)return!1;let L;for(let $=0;$<_.length;$++)if(L=_[$],!Kt(I[L],E[L]))return!1;return!0}function Kt(I,E){if(Array.isArray(I)&&Array.isArray(E)){if(I.length!==E.length)return!1;const _=[...I].sort(),M=[...E].sort();return _.every((L,$)=>M[$]===L)}return I===E}function nr(I){return Array.prototype.concat.apply([],I)}function vr(I){return I.length>0?I[I.length-1]:null}function Qn(I,E){for(const _ in I)I.hasOwnProperty(_)&&E(I[_],_)}function Ln(I){return(0,p.CqO)(I)?I:(0,p.QGY)(I)?(0,_e.D)(Promise.resolve(I)):(0,$e.of)(I)}const Zt={exact:function Be(I,E,_){if(!ze(I.segments,E.segments)||!qt(I.segments,E.segments,_)||I.numberOfChildren!==E.numberOfChildren)return!1;for(const M in E.children)if(!I.children[M]||!Be(I.children[M],E.children[M],_))return!1;return!0},subset:$t},sr={exact:function gt(I,E){return Vt(I,E)},subset:function At(I,E){return Object.keys(E).length<=Object.keys(I).length&&Object.keys(E).every(_=>Kt(I[_],E[_]))},ignored:()=>!0};function Ze(I,E,_){return Zt[_.paths](I.root,E.root,_.matrixParams)&&sr[_.queryParams](I.queryParams,E.queryParams)&&!("exact"===_.fragment&&I.fragment!==E.fragment)}function $t(I,E,_){return pn(I,E,E.segments,_)}function pn(I,E,_,M){if(I.segments.length>_.length){const L=I.segments.slice(0,_.length);return!(!ze(L,_)||E.hasChildren()||!qt(L,_,M))}if(I.segments.length===_.length){if(!ze(I.segments,_)||!qt(I.segments,_,M))return!1;for(const L in E.children)if(!I.children[L]||!$t(I.children[L],E.children[L],M))return!1;return!0}{const L=_.slice(0,I.segments.length),$=_.slice(I.segments.length);return!!(ze(I.segments,L)&&qt(I.segments,L,M)&&I.children[jt])&&pn(I.children[jt],E,$,M)}}function qt(I,E,_){return E.every((M,L)=>sr[_](I[L].parameters,M.parameters))}class fe{constructor(E,_,M){this.root=E,this.queryParams=_,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rr(this.queryParams)),this._queryParamMap}toString(){return ae.serialize(this)}}class ne{constructor(E,_){this.segments=E,this.children=_,this.parent=null,Qn(_,(M,L)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ke(this)}}class Ae{constructor(E,_){this.path=E,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Rr(this.parameters)),this._parameterMap}toString(){return zr(this)}}function ze(I,E){return I.length===E.length&&I.every((_,M)=>_.path===E[M].path)}class xe{}class we{parse(E){const _=new Tr(E);return new fe(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(E){const _=`/${at(E.root,!0)}`,M=function Qr(I){const E=Object.keys(I).map(_=>{const M=I[_];return Array.isArray(M)?M.map(L=>`${Jt(_)}=${Jt(L)}`).join("&"):`${Jt(_)}=${Jt(M)}`}).filter(_=>!!_);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${_}${M}${"string"==typeof E.fragment?`#${function vn(I){return encodeURI(I)}(E.fragment)}`:""}`}}const ae=new we;function ke(I){return I.segments.map(E=>zr(E)).join("/")}function at(I,E){if(!I.hasChildren())return ke(I);if(E){const _=I.children[jt]?at(I.children[jt],!1):"",M=[];return Qn(I.children,(L,$)=>{$!==jt&&M.push(`${$}:${at(L,!1)}`)}),M.length>0?`${_}(${M.join("//")})`:_}{const _=function Nt(I,E){let _=[];return Qn(I.children,(M,L)=>{L===jt&&(_=_.concat(E(M,L)))}),Qn(I.children,(M,L)=>{L!==jt&&(_=_.concat(E(M,L)))}),_}(I,(M,L)=>L===jt?[at(I.children[jt],!1)]:[`${L}:${at(M,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[jt]?`${ke(I)}/${_[0]}`:`${ke(I)}/(${_.join("//")})`}}function kt(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jt(I){return kt(I).replace(/%3B/gi,";")}function Rn(I){return kt(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $r(I){return decodeURIComponent(I)}function Wr(I){return $r(I.replace(/\+/g,"%20"))}function zr(I){return`${Rn(I.path)}${function fr(I){return Object.keys(I).map(E=>`;${Rn(E)}=${Rn(I[E])}`).join("")}(I.parameters)}`}const Kr=/^[^\/()?;=#]+/;function Mt(I){const E=I.match(Kr);return E?E[0]:""}const nn=/^[^=?&#]+/,wr=/^[^&#]+/;class Tr{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ne([],{}):new ne([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(E.length>0||Object.keys(_).length>0)&&(M[jt]=new ne(E,_)),M}parseSegment(){const E=Mt(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new Ae($r(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const _=Mt(this.remaining);if(!_)return;this.capture(_);let M="";if(this.consumeOptional("=")){const L=Mt(this.remaining);L&&(M=L,this.capture(M))}E[$r(_)]=$r(M)}parseQueryParam(E){const _=function yn(I){const E=I.match(nn);return E?E[0]:""}(this.remaining);if(!_)return;this.capture(_);let M="";if(this.consumeOptional("=")){const se=function hi(I){const E=I.match(wr);return E?E[0]:""}(this.remaining);se&&(M=se,this.capture(M))}const L=Wr(_),$=Wr(M);if(E.hasOwnProperty(L)){let se=E[L];Array.isArray(se)||(se=[se],E[L]=se),se.push($)}else E[L]=$}parseParens(E){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=Mt(this.remaining),L=this.remaining[M.length];if("/"!==L&&")"!==L&&";"!==L)throw new Error(`Cannot parse url '${this.url}'`);let $;M.indexOf(":")>-1?($=M.substr(0,M.indexOf(":")),this.capture($),this.capture(":")):E&&($=jt);const se=this.parseChildren();_[$]=1===Object.keys(se).length?se[jt]:new ne([],se),this.consumeOptional("//")}return _}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class ni{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const _=this.pathFromRoot(E);return _.length>1?_[_.length-2]:null}children(E){const _=Bn(E,this._root);return _?_.children.map(M=>M.value):[]}firstChild(E){const _=Bn(E,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(E){const _=or(E,this._root);return _.length<2?[]:_[_.length-2].children.map(L=>L.value).filter(L=>L!==E)}pathFromRoot(E){return or(E,this._root).map(_=>_.value)}}function Bn(I,E){if(I===E.value)return E;for(const _ of E.children){const M=Bn(I,_);if(M)return M}return null}function or(I,E){if(I===E.value)return[E];for(const _ of E.children){const M=or(I,_);if(M.length)return M.unshift(E),M}return[]}class Or{constructor(E,_){this.value=E,this.children=_}toString(){return`TreeNode(${this.value})`}}function mn(I){const E={};return I&&I.children.forEach(_=>E[_.value.outlet]=_),E}class ri extends ni{constructor(E,_){super(E),this.snapshot=_,Kn(this,E)}toString(){return this.snapshot.toString()}}function Fi(I,E){const _=function ns(I,E){const se=new Xr([],{},{},"",{},jt,E,null,I.root,-1,{});return new Sr("",new Or(se,[]))}(I,E),M=new We.X([new Ae("",{})]),L=new We.X({}),$=new We.X({}),se=new We.X({}),Ce=new We.X(""),yt=new Ar(M,L,se,Ce,$,jt,E,_.root);return yt.snapshot=_.root,new ri(new Or(yt,[]),_)}class Ar{constructor(E,_,M,L,$,se,Ce,yt){this.url=E,this.params=_,this.queryParams=M,this.fragment=L,this.data=$,this.outlet=se,this.component=Ce,this._futureSnapshot=yt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ce.U)(E=>Rr(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ce.U)(E=>Rr(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pn(I,E="emptyOnly"){const _=I.pathFromRoot;let M=0;if("always"!==E)for(M=_.length-1;M>=1;){const L=_[M],$=_[M-1];if(L.routeConfig&&""===L.routeConfig.path)M--;else{if($.component)break;M--}}return function qr(I){return I.reduce((E,_)=>({params:Object.assign(Object.assign({},E.params),_.params),data:Object.assign(Object.assign({},E.data),_.data),resolve:Object.assign(Object.assign({},E.resolve),_._resolvedData)}),{params:{},data:{},resolve:{}})}(_.slice(M))}class Xr{constructor(E,_,M,L,$,se,Ce,yt,ft,Ut,cn){this.url=E,this.params=_,this.queryParams=M,this.fragment=L,this.data=$,this.outlet=se,this.component=Ce,this.routeConfig=yt,this._urlSegment=ft,this._lastPathIndex=Ut,this._resolve=cn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Rr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sr extends ni{constructor(E,_){super(_),this.url=E,Kn(this,_)}toString(){return os(this._root)}}function Kn(I,E){E.value._routerState=I,E.children.forEach(_=>Kn(I,_))}function os(I){const E=I.children.length>0?` { ${I.children.map(os).join(", ")} } `:"";return`${I.value}${E}`}function Li(I){if(I.snapshot){const E=I.snapshot,_=I._futureSnapshot;I.snapshot=_,Vt(E.queryParams,_.queryParams)||I.queryParams.next(_.queryParams),E.fragment!==_.fragment&&I.fragment.next(_.fragment),Vt(E.params,_.params)||I.params.next(_.params),function bn(I,E){if(I.length!==E.length)return!1;for(let _=0;_<I.length;++_)if(!Vt(I[_],E[_]))return!1;return!0}(E.url,_.url)||I.url.next(_.url),Vt(E.data,_.data)||I.data.next(_.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function lr(I,E){const _=Vt(I.params,E.params)&&function nt(I,E){return ze(I,E)&&I.every((_,M)=>Vt(_.parameters,E[M].parameters))}(I.url,E.url);return _&&!(!I.parent!=!E.parent)&&(!I.parent||lr(I.parent,E.parent))}function zi(I,E,_){if(_&&I.shouldReuseRoute(E.value,_.value.snapshot)){const M=_.value;M._futureSnapshot=E.value;const L=function fi(I,E,_){return E.children.map(M=>{for(const L of _.children)if(I.shouldReuseRoute(M.value,L.value.snapshot))return zi(I,M,L);return zi(I,M)})}(I,E,_);return new Or(M,L)}{if(I.shouldAttach(E.value)){const $=I.retrieve(E.value);if(null!==$){const se=$.route;return se.value._futureSnapshot=E.value,se.children=E.children.map(Ce=>zi(I,Ce)),se}}const M=function Ds(I){return new Ar(new We.X(I.url),new We.X(I.params),new We.X(I.queryParams),new We.X(I.fragment),new We.X(I.data),I.outlet,I.component,I)}(E.value),L=E.children.map($=>zi(I,$));return new Or(M,L)}}function Zr(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function ms(I){return"object"==typeof I&&null!=I&&I.outlets}function bs(I,E,_,M,L){let $={};if(M&&Qn(M,(Ce,yt)=>{$[yt]=Array.isArray(Ce)?Ce.map(ft=>`${ft}`):`${Ce}`}),I===E)return new fe(_,$,L);const se=rr(I,E,_);return new fe(se,$,L)}function rr(I,E,_){const M={};return Qn(I.children,(L,$)=>{M[$]=L===E?_:rr(L,E,_)}),new ne(I.segments,M)}class Ss{constructor(E,_,M){if(this.isAbsolute=E,this.numberOfDoubleDots=_,this.commands=M,E&&M.length>0&&Zr(M[0]))throw new Error("Root segment cannot have matrix parameters");const L=M.find(ms);if(L&&L!==vr(M))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fe{constructor(E,_,M){this.segmentGroup=E,this.processChildren=_,this.index=M}}function Ot(I,E,_){if(I||(I=new ne([],{})),0===I.segments.length&&I.hasChildren())return Qt(I,E,_);const M=function jn(I,E,_){let M=0,L=E;const $={match:!1,pathIndex:0,commandIndex:0};for(;L<I.segments.length;){if(M>=_.length)return $;const se=I.segments[L],Ce=_[M];if(ms(Ce))break;const yt=`${Ce}`,ft=M<_.length-1?_[M+1]:null;if(L>0&&void 0===yt)break;if(yt&&ft&&"object"==typeof ft&&void 0===ft.outlets){if(!Ii(yt,ft,se))return $;M+=2}else{if(!Ii(yt,{},se))return $;M++}L++}return{match:!0,pathIndex:L,commandIndex:M}}(I,E,_),L=_.slice(M.commandIndex);if(M.match&&M.pathIndex<I.segments.length){const $=new ne(I.segments.slice(0,M.pathIndex),{});return $.children[jt]=new ne(I.segments.slice(M.pathIndex),I.children),Qt($,0,L)}return M.match&&0===L.length?new ne(I.segments,{}):M.match&&!I.hasChildren()?Pr(I,E,_):M.match?Qt(I,0,L):Pr(I,E,_)}function Qt(I,E,_){if(0===_.length)return new ne(I.segments,{});{const M=function mt(I){return ms(I[0])?I[0].outlets:{[jt]:I}}(_),L={};return Qn(M,($,se)=>{"string"==typeof $&&($=[$]),null!==$&&(L[se]=Ot(I.children[se],E,$))}),Qn(I.children,($,se)=>{void 0===M[se]&&(L[se]=$)}),new ne(I.segments,L)}}function Pr(I,E,_){const M=I.segments.slice(0,E);let L=0;for(;L<_.length;){const $=_[L];if(ms($)){const yt=kn($.outlets);return new ne(M,yt)}if(0===L&&Zr(_[0])){M.push(new Ae(I.segments[E].path,Ri(_[0]))),L++;continue}const se=ms($)?$.outlets[jt]:`${$}`,Ce=L<_.length-1?_[L+1]:null;se&&Ce&&Zr(Ce)?(M.push(new Ae(se,Ri(Ce))),L+=2):(M.push(new Ae(se,{})),L++)}return new ne(M,{})}function kn(I){const E={};return Qn(I,(_,M)=>{"string"==typeof _&&(_=[_]),null!==_&&(E[M]=Pr(new ne([],{}),0,_))}),E}function Ri(I){const E={};return Qn(I,(_,M)=>E[M]=`${_}`),E}function Ii(I,E,_){return I==_.path&&Vt(E,_.parameters)}class ys{constructor(E,_,M,L){this.routeReuseStrategy=E,this.futureState=_,this.currState=M,this.forwardEvent=L}activate(E){const _=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,M,E),Li(this.futureState.root),this.activateChildRoutes(_,M,E)}deactivateChildRoutes(E,_,M){const L=mn(_);E.children.forEach($=>{const se=$.value.outlet;this.deactivateRoutes($,L[se],M),delete L[se]}),Qn(L,($,se)=>{this.deactivateRouteAndItsChildren($,M)})}deactivateRoutes(E,_,M){const L=E.value,$=_?_.value:null;if(L===$)if(L.component){const se=M.getContext(L.outlet);se&&this.deactivateChildRoutes(E,_,se.children)}else this.deactivateChildRoutes(E,_,M);else $&&this.deactivateRouteAndItsChildren(_,M)}deactivateRouteAndItsChildren(E,_){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,_):this.deactivateRouteAndOutlet(E,_)}detachAndStoreRouteSubtree(E,_){const M=_.getContext(E.value.outlet),L=M&&E.value.component?M.children:_,$=mn(E);for(const se of Object.keys($))this.deactivateRouteAndItsChildren($[se],L);if(M&&M.outlet){const se=M.outlet.detach(),Ce=M.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:se,route:E,contexts:Ce})}}deactivateRouteAndOutlet(E,_){const M=_.getContext(E.value.outlet),L=M&&E.value.component?M.children:_,$=mn(E);for(const se of Object.keys($))this.deactivateRouteAndItsChildren($[se],L);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(E,_,M){const L=mn(_);E.children.forEach($=>{this.activateRoutes($,L[$.value.outlet],M),this.forwardEvent(new ln($.value.snapshot))}),E.children.length&&this.forwardEvent(new Zn(E.value.snapshot))}activateRoutes(E,_,M){const L=E.value,$=_?_.value:null;if(Li(L),L===$)if(L.component){const se=M.getOrCreateContext(L.outlet);this.activateChildRoutes(E,_,se.children)}else this.activateChildRoutes(E,_,M);else if(L.component){const se=M.getOrCreateContext(L.outlet);if(this.routeReuseStrategy.shouldAttach(L.snapshot)){const Ce=this.routeReuseStrategy.retrieve(L.snapshot);this.routeReuseStrategy.store(L.snapshot,null),se.children.onOutletReAttached(Ce.contexts),se.attachRef=Ce.componentRef,se.route=Ce.route.value,se.outlet&&se.outlet.attach(Ce.componentRef,Ce.route.value),Li(Ce.route.value),this.activateChildRoutes(E,null,se.children)}else{const Ce=function Vi(I){for(let E=I.parent;E;E=E.parent){const _=E.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig;if(_&&_.component)return null}return null}(L.snapshot),yt=Ce?Ce.module.componentFactoryResolver:null;se.attachRef=null,se.route=L,se.resolver=yt,se.outlet&&se.outlet.activateWith(L,yt),this.activateChildRoutes(E,null,se.children)}}else this.activateChildRoutes(E,null,M)}}class xs{constructor(E,_){this.routes=E,this.module=_}}function ii(I){return"function"==typeof I}function Er(I){return I instanceof fe}const Bs=Symbol("INITIAL_VALUE");function bi(){return(0,et.w)(I=>(0,Ke.a)(I.map(E=>E.pipe((0,he.q)(1),(0,Ge.O)(Bs)))).pipe((0,qe.R)((E,_)=>{let M=!1;return _.reduce((L,$,se)=>L!==Bs?L:($===Bs&&(M=!0),M||!1!==$&&se!==_.length-1&&!Er($)?L:$),E)},Bs),(0,pe.h)(E=>E!==Bs),(0,ce.U)(E=>Er(E)?E:!0===E),(0,he.q)(1)))}class Ki{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Jr,this.attachRef=null}}class Jr{constructor(){this.contexts=new Map}onChildOutletCreated(E,_){const M=this.getOrCreateContext(E);M.outlet=_,this.contexts.set(E,M)}onChildOutletDestroyed(E){const _=this.getContext(E);_&&(_.outlet=null,_.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let _=this.getContext(E);return _||(_=new Ki,this.contexts.set(E,_)),_}getContext(E){return this.contexts.get(E)||null}}let qi=(()=>{class I{constructor(_,M,L,$,se){this.parentContexts=_,this.location=M,this.resolver=L,this.changeDetector=se,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=$||jt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,M){this.activated=_,this._activatedRoute=M,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,M){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=_;const se=(M=M||this.resolver).resolveComponentFactory(_._futureSnapshot.routeConfig.component),Ce=this.parentContexts.getOrCreateContext(this.name).children,yt=new Cs(_,Ce,this.location.injector);this.activated=this.location.createComponent(se,this.location.length,yt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Jr),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},I.\u0275dir=p.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),I})();class Cs{constructor(E,_,M){this.route=E,this.childContexts=_,this.parent=M}get(E,_){return E===Ar?this.route:E===Jr?this.childContexts:this.parent.get(E,_)}}let Ir=(()=>{class I{}return I.\u0275fac=function(_){return new(_||I)},I.\u0275cmp=p.Xpm({type:I,selectors:[["ng-component"]],decls:1,vars:0,template:function(_,M){1&_&&p._UZ(0,"router-outlet")},directives:[qi],encapsulation:2}),I})();function kr(I,E=""){for(let _=0;_<I.length;_++){const M=I[_];cs(M,Rs(E,M))}}function cs(I,E){I.children&&kr(I.children,E)}function Rs(I,E){return E?I||E.path?I&&!E.path?`${I}/`:!I&&E.path?E.path:`${I}/${E.path}`:"":I}function Os(I){const E=I.children&&I.children.map(Os),_=E?Object.assign(Object.assign({},I),{children:E}):Object.assign({},I);return!_.component&&(E||_.loadChildren)&&_.outlet&&_.outlet!==jt&&(_.component=Ir),_}function si(I){return I.outlet||jt}function rs(I,E){const _=I.filter(M=>si(M)===E);return _.push(...I.filter(M=>si(M)!==E)),_}const gi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mi(I,E,_){var M;if(""===E.path)return"full"===E.pathMatch&&(I.hasChildren()||_.length>0)?Object.assign({},gi):{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const $=(E.matcher||Gr)(_,I,E);if(!$)return Object.assign({},gi);const se={};Qn($.posParams,(yt,ft)=>{se[ft]=yt.path});const Ce=$.consumed.length>0?Object.assign(Object.assign({},se),$.consumed[$.consumed.length-1].parameters):se;return{matched:!0,consumedSegments:$.consumed,remainingSegments:_.slice($.consumed.length),parameters:Ce,positionalParamSegments:null!==(M=$.posParams)&&void 0!==M?M:{}}}function Zi(I,E,_,M,L="corrected"){if(_.length>0&&function W(I,E,_){return _.some(M=>Y(I,E,M)&&si(M)!==jt)}(I,_,M)){const se=new ne(E,function R(I,E,_,M){const L={};L[jt]=M,M._sourceSegment=I,M._segmentIndexShift=E.length;for(const $ of _)if(""===$.path&&si($)!==jt){const se=new ne([],{});se._sourceSegment=I,se._segmentIndexShift=E.length,L[si($)]=se}return L}(I,E,M,new ne(_,I.children)));return se._sourceSegment=I,se._segmentIndexShift=E.length,{segmentGroup:se,slicedSegments:[]}}if(0===_.length&&function x(I,E,_){return _.some(M=>Y(I,E,M))}(I,_,M)){const se=new ne(I.segments,function cr(I,E,_,M,L,$){const se={};for(const Ce of M)if(Y(I,_,Ce)&&!L[si(Ce)]){const yt=new ne([],{});yt._sourceSegment=I,yt._segmentIndexShift="legacy"===$?I.segments.length:E.length,se[si(Ce)]=yt}return Object.assign(Object.assign({},L),se)}(I,E,_,M,I.children,L));return se._sourceSegment=I,se._segmentIndexShift=E.length,{segmentGroup:se,slicedSegments:_}}const $=new ne(I.segments,I.children);return $._sourceSegment=I,$._segmentIndexShift=E.length,{segmentGroup:$,slicedSegments:_}}function Y(I,E,_){return(!(I.hasChildren()||E.length>0)||"full"!==_.pathMatch)&&""===_.path}function be(I,E,_,M){return!!(si(I)===M||M!==jt&&Y(E,_,I))&&("**"===I.path||mi(E,I,_).matched)}function it(I,E,_){return 0===E.length&&!I.children[_]}class ot{constructor(E){this.segmentGroup=E||null}}class Lt{constructor(E){this.urlTree=E}}function Xn(I){return de(new ot(I))}function $n(I){return de(new Lt(I))}class ar{constructor(E,_,M,L,$){this.configLoader=_,this.urlSerializer=M,this.urlTree=L,this.config=$,this.allowRedirects=!0,this.ngModule=E.get(p.h0i)}apply(){const E=Zi(this.urlTree.root,[],[],this.config).segmentGroup,_=new ne(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,_,jt).pipe((0,ce.U)($=>this.createUrlTree(k($),this.urlTree.queryParams,this.urlTree.fragment))).pipe(H($=>{if($ instanceof Lt)return this.allowRedirects=!1,this.match($.urlTree);throw $ instanceof ot?this.noMatchError($):$}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,jt).pipe((0,ce.U)(L=>this.createUrlTree(k(L),E.queryParams,E.fragment))).pipe(H(L=>{throw L instanceof ot?this.noMatchError(L):L}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,_,M){const L=E.segments.length>0?new ne([],{[jt]:E}):E;return new fe(L,_,M)}expandSegmentGroup(E,_,M,L){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(E,_,M).pipe((0,ce.U)($=>new ne([],$))):this.expandSegment(E,M,_,M.segments,L,!0)}expandChildren(E,_,M){const L=[];for(const $ of Object.keys(M.children))"primary"===$?L.unshift($):L.push($);return(0,_e.D)(L).pipe(te($=>{const se=M.children[$],Ce=rs(_,$);return this.expandSegmentGroup(E,Ce,se,$).pipe((0,ce.U)(yt=>({segment:yt,outlet:$})))}),(0,qe.R)(($,se)=>($[se.outlet]=se.segment,$),{}),function X(I,E){const _=arguments.length>=2;return M=>M.pipe(I?(0,pe.h)((L,$)=>I(L,$,M)):ve.y,Ue(1),_?(0,Re.d)(E):(0,Le.T)(()=>new Et.K))}())}expandSegment(E,_,M,L,$,se){return(0,_e.D)(M).pipe(te(Ce=>this.expandSegmentAgainstRoute(E,_,M,Ce,L,$,se).pipe(H(ft=>{if(ft instanceof ot)return(0,$e.of)(null);throw ft}))),(0,ht.P)(Ce=>!!Ce),H((Ce,yt)=>{if(Ce instanceof Et.K||"EmptyError"===Ce.name)return it(_,L,$)?(0,$e.of)(new ne([],{})):Xn(_);throw Ce}))}expandSegmentAgainstRoute(E,_,M,L,$,se,Ce){return be(L,_,$,se)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(E,_,L,$,se):Ce&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,_,M,L,$,se):Xn(_):Xn(_)}expandSegmentAgainstRouteUsingRedirect(E,_,M,L,$,se){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,M,L,se):this.expandRegularSegmentAgainstRouteUsingRedirect(E,_,M,L,$,se)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,_,M,L){const $=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?$n($):this.lineralizeSegments(M,$).pipe((0,F.z)(se=>{const Ce=new ne(se,{});return this.expandSegment(E,Ce,_,se,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,_,M,L,$,se){const{matched:Ce,consumedSegments:yt,remainingSegments:ft,positionalParamSegments:Ut}=mi(_,L,$);if(!Ce)return Xn(_);const cn=this.applyRedirectCommands(yt,L.redirectTo,Ut);return L.redirectTo.startsWith("/")?$n(cn):this.lineralizeSegments(L,cn).pipe((0,F.z)(Ct=>this.expandSegment(E,_,M,Ct.concat(ft),se,!1)))}matchSegmentAgainstRoute(E,_,M,L,$){if("**"===M.path)return M.loadChildren?(M._loadedConfig?(0,$e.of)(M._loadedConfig):this.configLoader.load(E.injector,M)).pipe((0,ce.U)(cn=>(M._loadedConfig=cn,new ne(L,{})))):(0,$e.of)(new ne(L,{}));const{matched:se,consumedSegments:Ce,remainingSegments:yt}=mi(_,M,L);return se?this.getChildConfig(E,M,L).pipe((0,F.z)(Ut=>{const cn=Ut.module,Ct=Ut.routes,{segmentGroup:Ye,slicedSegments:Dt}=Zi(_,Ce,yt,Ct),jr=new ne(Ye.segments,Ye.children);if(0===Dt.length&&jr.hasChildren())return this.expandChildren(cn,Ct,jr).pipe((0,ce.U)(Iu=>new ne(Ce,Iu)));if(0===Ct.length&&0===Dt.length)return(0,$e.of)(new ne(Ce,{}));const Es=si(M)===$;return this.expandSegment(cn,jr,Ct,Dt,Es?jt:$,!0).pipe((0,ce.U)(mo=>new ne(Ce.concat(mo.segments),mo.children)))})):Xn(_)}getChildConfig(E,_,M){return _.children?(0,$e.of)(new xs(_.children,E)):_.loadChildren?void 0!==_._loadedConfig?(0,$e.of)(_._loadedConfig):this.runCanLoadGuards(E.injector,_,M).pipe((0,F.z)(L=>L?this.configLoader.load(E.injector,_).pipe((0,ce.U)($=>(_._loadedConfig=$,$))):function Sn(I){return de(_r(`Cannot load children because the guard of the route "path: '${I.path}'" returned false`))}(_))):(0,$e.of)(new xs([],E))}runCanLoadGuards(E,_,M){const L=_.canLoad;if(!L||0===L.length)return(0,$e.of)(!0);const $=L.map(se=>{const Ce=E.get(se);let yt;if(function as(I){return I&&ii(I.canLoad)}(Ce))yt=Ce.canLoad(_,M);else{if(!ii(Ce))throw new Error("Invalid CanLoad guard");yt=Ce(_,M)}return Ln(yt)});return(0,$e.of)($).pipe(bi(),(0,Qe.b)(se=>{if(!Er(se))return;const Ce=_r(`Redirecting to "${this.urlSerializer.serialize(se)}"`);throw Ce.url=se,Ce}),(0,ce.U)(se=>!0===se))}lineralizeSegments(E,_){let M=[],L=_.root;for(;;){if(M=M.concat(L.segments),0===L.numberOfChildren)return(0,$e.of)(M);if(L.numberOfChildren>1||!L.children[jt])return de(new Error(`Only absolute redirects can have named outlets. redirectTo: '${E.redirectTo}'`));L=L.children[jt]}}applyRedirectCommands(E,_,M){return this.applyRedirectCreatreUrlTree(_,this.urlSerializer.parse(_),E,M)}applyRedirectCreatreUrlTree(E,_,M,L){const $=this.createSegmentGroup(E,_.root,M,L);return new fe($,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(E,_){const M={};return Qn(E,(L,$)=>{if("string"==typeof L&&L.startsWith(":")){const Ce=L.substring(1);M[$]=_[Ce]}else M[$]=L}),M}createSegmentGroup(E,_,M,L){const $=this.createSegments(E,_.segments,M,L);let se={};return Qn(_.children,(Ce,yt)=>{se[yt]=this.createSegmentGroup(E,Ce,M,L)}),new ne($,se)}createSegments(E,_,M,L){return _.map($=>$.path.startsWith(":")?this.findPosParam(E,$,L):this.findOrReturn($,M))}findPosParam(E,_,M){const L=M[_.path.substring(1)];if(!L)throw new Error(`Cannot redirect to '${E}'. Cannot find '${_.path}'.`);return L}findOrReturn(E,_){let M=0;for(const L of _){if(L.path===E.path)return _.splice(M),L;M++}return E}}function k(I){const E={};for(const M of Object.keys(I.children)){const $=k(I.children[M]);($.segments.length>0||$.hasChildren())&&(E[M]=$)}return function gr(I){if(1===I.numberOfChildren&&I.children[jt]){const E=I.children[jt];return new ne(I.segments.concat(E.segments),E.children)}return I}(new ne(I.segments,E))}class b{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class Z{constructor(E,_){this.component=E,this.route=_}}function ut(I,E,_){const M=I._root;return O(M,E?E._root:null,_,[M.value])}function mr(I,E,_){const M=function V(I){if(!I)return null;for(let E=I.parent;E;E=E.parent){const _=E.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig}return null}(E);return(M?M.module.injector:_).get(I)}function O(I,E,_,M,L={canDeactivateChecks:[],canActivateChecks:[]}){const $=mn(E);return I.children.forEach(se=>{(function ee(I,E,_,M,L={canDeactivateChecks:[],canActivateChecks:[]}){const $=I.value,se=E?E.value:null,Ce=_?_.getContext(I.value.outlet):null;if(se&&$.routeConfig===se.routeConfig){const yt=function Q(I,E,_){if("function"==typeof _)return _(I,E);switch(_){case"pathParamsChange":return!ze(I.url,E.url);case"pathParamsOrQueryParamsChange":return!ze(I.url,E.url)||!Vt(I.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lr(I,E)||!Vt(I.queryParams,E.queryParams);default:return!lr(I,E)}}(se,$,$.routeConfig.runGuardsAndResolvers);yt?L.canActivateChecks.push(new b(M)):($.data=se.data,$._resolvedData=se._resolvedData),O(I,E,$.component?Ce?Ce.children:null:_,M,L),yt&&Ce&&Ce.outlet&&Ce.outlet.isActivated&&L.canDeactivateChecks.push(new Z(Ce.outlet.component,se))}else se&&De(E,Ce,L),L.canActivateChecks.push(new b(M)),O(I,null,$.component?Ce?Ce.children:null:_,M,L)})(se,$[se.value.outlet],_,M.concat([se.value]),L),delete $[se.value.outlet]}),Qn($,(se,Ce)=>De(se,_.getContext(Ce),L)),L}function De(I,E,_){const M=mn(I),L=I.value;Qn(M,($,se)=>{De($,L.component?E?E.children.getContext(se):null:E,_)}),_.canDeactivateChecks.push(new Z(L.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,L))}class oi{}function Hr(I){return new N.y(E=>E.error(I))}class Wn{constructor(E,_,M,L,$,se){this.rootComponentType=E,this.config=_,this.urlTree=M,this.url=L,this.paramsInheritanceStrategy=$,this.relativeLinkResolution=se}recognize(){const E=Zi(this.urlTree.root,[],[],this.config.filter(se=>void 0===se.redirectTo),this.relativeLinkResolution).segmentGroup,_=this.processSegmentGroup(this.config,E,jt);if(null===_)return null;const M=new Xr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),L=new Or(M,_),$=new Sr(this.url,L);return this.inheritParamsAndData($._root),$}inheritParamsAndData(E){const _=E.value,M=Pn(_,this.paramsInheritanceStrategy);_.params=Object.freeze(M.params),_.data=Object.freeze(M.data),E.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(E,_,M){return 0===_.segments.length&&_.hasChildren()?this.processChildren(E,_):this.processSegment(E,_,_.segments,M)}processChildren(E,_){const M=[];for(const $ of Object.keys(_.children)){const se=_.children[$],Ce=rs(E,$),yt=this.processSegmentGroup(Ce,se,$);if(null===yt)return null;M.push(...yt)}const L=yr(M);return function Ur(I){I.sort((E,_)=>E.value.outlet===jt?-1:_.value.outlet===jt?1:E.value.outlet.localeCompare(_.value.outlet))}(L),L}processSegment(E,_,M,L){for(const $ of E){const se=this.processSegmentAgainstRoute($,_,M,L);if(null!==se)return se}return it(_,M,L)?[]:null}processSegmentAgainstRoute(E,_,M,L){if(E.redirectTo||!be(E,_,M,L))return null;let $,se=[],Ce=[];if("**"===E.path){const Ye=M.length>0?vr(M).parameters:{};$=new Xr(M,Ye,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dr(E),si(E),E.component,E,Yi(_),no(_)+M.length,Ps(E))}else{const Ye=mi(_,E,M);if(!Ye.matched)return null;se=Ye.consumedSegments,Ce=Ye.remainingSegments,$=new Xr(se,Ye.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dr(E),si(E),E.component,E,Yi(_),no(_)+se.length,Ps(E))}const yt=function Ui(I){return I.children?I.children:I.loadChildren?I._loadedConfig.routes:[]}(E),{segmentGroup:ft,slicedSegments:Ut}=Zi(_,se,Ce,yt.filter(Ye=>void 0===Ye.redirectTo),this.relativeLinkResolution);if(0===Ut.length&&ft.hasChildren()){const Ye=this.processChildren(yt,ft);return null===Ye?null:[new Or($,Ye)]}if(0===yt.length&&0===Ut.length)return[new Or($,[])];const cn=si(E)===L,Ct=this.processSegment(yt,ft,Ut,cn?jt:L);return null===Ct?null:[new Or($,Ct)]}}function Fr(I){const E=I.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function yr(I){const E=[],_=new Set;for(const M of I){if(!Fr(M)){E.push(M);continue}const L=E.find($=>M.value.routeConfig===$.value.routeConfig);void 0!==L?(L.children.push(...M.children),_.add(L)):E.push(M)}for(const M of _){const L=yr(M.children);E.push(new Or(M.value,L))}return E.filter(M=>!_.has(M))}function Yi(I){let E=I;for(;E._sourceSegment;)E=E._sourceSegment;return E}function no(I){let E=I,_=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,_+=E._segmentIndexShift?E._segmentIndexShift:0;return _-1}function Dr(I){return I.data||{}}function Ps(I){return I.resolve||{}}function Bo(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function Jo(I){return(0,et.w)(E=>{const _=I(E);return _?(0,_e.D)(_).pipe((0,ce.U)(()=>E)):(0,$e.of)(E)})}class ks extends class wa{shouldDetach(E){return!1}store(E,_){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,_){return E.routeConfig===_.routeConfig}}{}const ro=new p.OlP("ROUTES");class mu{constructor(E,_,M,L){this.injector=E,this.compiler=_,this.onLoadStartListener=M,this.onLoadEndListener=L}load(E,_){if(_._loader$)return _._loader$;this.onLoadStartListener&&this.onLoadStartListener(_);const L=this.loadModuleFactory(_.loadChildren).pipe((0,ce.U)($=>{this.onLoadEndListener&&this.onLoadEndListener(_);const se=$.create(E);return new xs(nr(se.injector.get(ro,void 0,p.XFs.Self|p.XFs.Optional)).map(Os),se)}),H($=>{throw _._loader$=void 0,$}));return _._loader$=new re(L,()=>new ct.x).pipe(le()),_._loader$}loadModuleFactory(E){return Ln(E()).pipe((0,F.z)(_=>_ instanceof p.YKP?(0,$e.of)(_):(0,_e.D)(this.compiler.compileModuleAsync(_))))}}class Ci{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,_){return E}}function Ao(I){throw I}function ai(I,E,_){return E.parse("/")}function So(I,E){return(0,$e.of)(null)}const Jl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ti=(()=>{class I{constructor(_,M,L,$,se,Ce,yt){this.rootComponentType=_,this.urlSerializer=M,this.rootContexts=L,this.location=$,this.config=yt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ct.x,this.errorHandler=Ao,this.malformedUriErrorHandler=ai,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:So,afterPreactivation:So},this.urlHandlingStrategy=new Ci,this.routeReuseStrategy=new ks,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=se.get(p.h0i),this.console=se.get(p.c2e);const cn=se.get(p.R0b);this.isNgZoneEnabled=cn instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(yt),this.currentUrlTree=function ur(){return new fe(new ne([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mu(se,Ce,Ct=>this.triggerEvent(new En(Ct)),Ct=>this.triggerEvent(new Un(Ct))),this.routerState=Fi(this.currentUrlTree,this.rootComponentType),this.transitions=new We.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var _;return null===(_=this.location.getState())||void 0===_?void 0:_.\u0275routerPageId}setupNavigations(_){const M=this.events;return _.pipe((0,pe.h)(L=>0!==L.id),(0,ce.U)(L=>Object.assign(Object.assign({},L),{extractedUrl:this.urlHandlingStrategy.extract(L.rawUrl)})),(0,et.w)(L=>{let $=!1,se=!1;return(0,$e.of)(L).pipe((0,Qe.b)(Ce=>{this.currentNavigation={id:Ce.id,initialUrl:Ce.currentRawUrl,extractedUrl:Ce.extractedUrl,trigger:Ce.source,extras:Ce.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,et.w)(Ce=>{const yt=this.browserUrlTree.toString(),ft=!this.navigated||Ce.extractedUrl.toString()!==yt||yt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ft)&&this.urlHandlingStrategy.shouldProcessUrl(Ce.rawUrl))return ta(Ce.source)&&(this.browserUrlTree=Ce.extractedUrl),(0,$e.of)(Ce).pipe((0,et.w)(cn=>{const Ct=this.transitions.getValue();return M.next(new Tt(cn.id,this.serializeUrl(cn.extractedUrl),cn.source,cn.restoredState)),Ct!==this.transitions.getValue()?Te.E:Promise.resolve(cn)}),function S(I,E,_,M){return(0,et.w)(L=>function Nr(I,E,_,M,L){return new ar(I,E,_,M,L).apply()}(I,E,_,L.extractedUrl,M).pipe((0,ce.U)($=>Object.assign(Object.assign({},L),{urlAfterRedirects:$}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qe.b)(cn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:cn.urlAfterRedirects})}),function Xo(I,E,_,M,L){return(0,F.z)($=>function yi(I,E,_,M,L="emptyOnly",$="legacy"){try{const se=new Wn(I,E,_,M,L,$).recognize();return null===se?Hr(new oi):(0,$e.of)(se)}catch(se){return Hr(se)}}(I,E,$.urlAfterRedirects,_($.urlAfterRedirects),M,L).pipe((0,ce.U)(se=>Object.assign(Object.assign({},$),{targetSnapshot:se}))))}(this.rootComponentType,this.config,cn=>this.serializeUrl(cn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qe.b)(cn=>{if("eager"===this.urlUpdateStrategy){if(!cn.extras.skipLocationChange){const Ye=this.urlHandlingStrategy.merge(cn.urlAfterRedirects,cn.rawUrl);this.setBrowserUrl(Ye,cn)}this.browserUrlTree=cn.urlAfterRedirects}const Ct=new on(cn.id,this.serializeUrl(cn.extractedUrl),this.serializeUrl(cn.urlAfterRedirects),cn.targetSnapshot);M.next(Ct)}));if(ft&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ct,extractedUrl:Ye,source:Dt,restoredState:jr,extras:Es}=Ce,wu=new Tt(Ct,this.serializeUrl(Ye),Dt,jr);M.next(wu);const mo=Fi(Ye,this.rootComponentType).snapshot;return(0,$e.of)(Object.assign(Object.assign({},Ce),{targetSnapshot:mo,urlAfterRedirects:Ye,extras:Object.assign(Object.assign({},Es),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ce.rawUrl,Ce.resolve(null),Te.E}),Jo(Ce=>{const{targetSnapshot:yt,id:ft,extractedUrl:Ut,rawUrl:cn,extras:{skipLocationChange:Ct,replaceUrl:Ye}}=Ce;return this.hooks.beforePreactivation(yt,{navigationId:ft,appliedUrlTree:Ut,rawUrlTree:cn,skipLocationChange:!!Ct,replaceUrl:!!Ye})}),(0,Qe.b)(Ce=>{const yt=new zn(Ce.id,this.serializeUrl(Ce.extractedUrl),this.serializeUrl(Ce.urlAfterRedirects),Ce.targetSnapshot);this.triggerEvent(yt)}),(0,ce.U)(Ce=>Object.assign(Object.assign({},Ce),{guards:ut(Ce.targetSnapshot,Ce.currentSnapshot,this.rootContexts)})),function rt(I,E){return(0,F.z)(_=>{const{targetSnapshot:M,currentSnapshot:L,guards:{canActivateChecks:$,canDeactivateChecks:se}}=_;return 0===se.length&&0===$.length?(0,$e.of)(Object.assign(Object.assign({},_),{guardsResult:!0})):function wt(I,E,_,M){return(0,_e.D)(I).pipe((0,F.z)(L=>function Mr(I,E,_,M,L){const $=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!$||0===$.length)return(0,$e.of)(!0);const se=$.map(Ce=>{const yt=mr(Ce,E,L);let ft;if(function to(I){return I&&ii(I.canDeactivate)}(yt))ft=Ln(yt.canDeactivate(I,E,_,M));else{if(!ii(yt))throw new Error("Invalid CanDeactivate guard");ft=Ln(yt(I,E,_,M))}return ft.pipe((0,ht.P)())});return(0,$e.of)(se).pipe(bi())}(L.component,L.route,_,E,M)),(0,ht.P)(L=>!0!==L,!0))}(se,M,L,I).pipe((0,F.z)(Ce=>Ce&&function Di(I){return"boolean"==typeof I}(Ce)?function rn(I,E,_,M){return(0,_e.D)(E).pipe(te(L=>(0,Ve.z)(function _n(I,E){return null!==I&&E&&E(new ir(I)),(0,$e.of)(!0)}(L.route.parent,M),function Wt(I,E){return null!==I&&E&&E(new Gt(I)),(0,$e.of)(!0)}(L.route,M),function Vr(I,E,_){const M=E[E.length-1],$=E.slice(0,E.length-1).reverse().map(se=>function en(I){const E=I.routeConfig?I.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:I,guards:E}:null}(se)).filter(se=>null!==se).map(se=>me(()=>{const Ce=se.guards.map(yt=>{const ft=mr(yt,se.node,_);let Ut;if(function ls(I){return I&&ii(I.canActivateChild)}(ft))Ut=Ln(ft.canActivateChild(M,I));else{if(!ii(ft))throw new Error("Invalid CanActivateChild guard");Ut=Ln(ft(M,I))}return Ut.pipe((0,ht.P)())});return(0,$e.of)(Ce).pipe(bi())}));return(0,$e.of)($).pipe(bi())}(I,L.path,_),function qn(I,E,_){const M=E.routeConfig?E.routeConfig.canActivate:null;if(!M||0===M.length)return(0,$e.of)(!0);const L=M.map($=>me(()=>{const se=mr($,E,_);let Ce;if(function us(I){return I&&ii(I.canActivate)}(se))Ce=Ln(se.canActivate(E,I));else{if(!ii(se))throw new Error("Invalid CanActivate guard");Ce=Ln(se(E,I))}return Ce.pipe((0,ht.P)())}));return(0,$e.of)(L).pipe(bi())}(I,L.route,_))),(0,ht.P)(L=>!0!==L,!0))}(M,$,I,E):(0,$e.of)(Ce)),(0,ce.U)(Ce=>Object.assign(Object.assign({},_),{guardsResult:Ce})))})}(this.ngModule.injector,Ce=>this.triggerEvent(Ce)),(0,Qe.b)(Ce=>{if(Er(Ce.guardsResult)){const ft=_r(`Redirecting to "${this.serializeUrl(Ce.guardsResult)}"`);throw ft.url=Ce.guardsResult,ft}const yt=new Gn(Ce.id,this.serializeUrl(Ce.extractedUrl),this.serializeUrl(Ce.urlAfterRedirects),Ce.targetSnapshot,!!Ce.guardsResult);this.triggerEvent(yt)}),(0,pe.h)(Ce=>!!Ce.guardsResult||(this.restoreHistory(Ce),this.cancelNavigationTransition(Ce,""),!1)),Jo(Ce=>{if(Ce.guards.canActivateChecks.length)return(0,$e.of)(Ce).pipe((0,Qe.b)(yt=>{const ft=new tr(yt.id,this.serializeUrl(yt.extractedUrl),this.serializeUrl(yt.urlAfterRedirects),yt.targetSnapshot);this.triggerEvent(ft)}),(0,et.w)(yt=>{let ft=!1;return(0,$e.of)(yt).pipe(function Ea(I,E){return(0,F.z)(_=>{const{targetSnapshot:M,guards:{canActivateChecks:L}}=_;if(!L.length)return(0,$e.of)(_);let $=0;return(0,_e.D)(L).pipe(te(se=>function ja(I,E,_,M){return function $a(I,E,_,M){const L=Bo(I);if(0===L.length)return(0,$e.of)({});const $={};return(0,_e.D)(L).pipe((0,F.z)(se=>function fo(I,E,_,M){const L=mr(I,E,M);return Ln(L.resolve?L.resolve(E,_):L(E,_))}(I[se],E,_,M).pipe((0,Qe.b)(Ce=>{$[se]=Ce}))),Ue(1),(0,F.z)(()=>Bo($).length===L.length?(0,$e.of)($):Te.E))}(I._resolve,I,E,M).pipe((0,ce.U)($=>(I._resolvedData=$,I.data=Object.assign(Object.assign({},I.data),Pn(I,_).resolve),null)))}(se.route,M,I,E)),(0,Qe.b)(()=>$++),Ue(1),(0,F.z)(se=>$===L.length?(0,$e.of)(_):Te.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qe.b)({next:()=>ft=!0,complete:()=>{ft||(this.restoreHistory(yt),this.cancelNavigationTransition(yt,"At least one route resolver didn't emit any value."))}}))}),(0,Qe.b)(yt=>{const ft=new On(yt.id,this.serializeUrl(yt.extractedUrl),this.serializeUrl(yt.urlAfterRedirects),yt.targetSnapshot);this.triggerEvent(ft)}))}),Jo(Ce=>{const{targetSnapshot:yt,id:ft,extractedUrl:Ut,rawUrl:cn,extras:{skipLocationChange:Ct,replaceUrl:Ye}}=Ce;return this.hooks.afterPreactivation(yt,{navigationId:ft,appliedUrlTree:Ut,rawUrlTree:cn,skipLocationChange:!!Ct,replaceUrl:!!Ye})}),(0,ce.U)(Ce=>{const yt=function _i(I,E,_){const M=zi(I,E._root,_?_._root:void 0);return new ri(M,E)}(this.routeReuseStrategy,Ce.targetSnapshot,Ce.currentRouterState);return Object.assign(Object.assign({},Ce),{targetRouterState:yt})}),(0,Qe.b)(Ce=>{this.currentUrlTree=Ce.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ce.urlAfterRedirects,Ce.rawUrl),this.routerState=Ce.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ce.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ce),this.browserUrlTree=Ce.urlAfterRedirects)}),((I,E,_)=>(0,ce.U)(M=>(new ys(E,M.targetRouterState,M.currentRouterState,_).activate(I),M)))(this.rootContexts,this.routeReuseStrategy,Ce=>this.triggerEvent(Ce)),(0,Qe.b)({next(){$=!0},complete(){$=!0}}),function Pe(I){return(0,ue.e)((E,_)=>{try{E.subscribe(_)}finally{_.add(I)}})}(()=>{var Ce;$||se||this.cancelNavigationTransition(L,`Navigation ID ${L.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ce=this.currentNavigation)||void 0===Ce?void 0:Ce.id)===L.id&&(this.currentNavigation=null)}),H(Ce=>{if(se=!0,function ti(I){return I&&I[Yn]}(Ce)){const yt=Er(Ce.url);yt||(this.navigated=!0,this.restoreHistory(L,!0));const ft=new hn(L.id,this.serializeUrl(L.extractedUrl),Ce.message);M.next(ft),yt?setTimeout(()=>{const Ut=this.urlHandlingStrategy.merge(Ce.url,this.rawUrlTree),cn={skipLocationChange:L.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ta(L.source)};this.scheduleNavigation(Ut,"imperative",null,cn,{resolve:L.resolve,reject:L.reject,promise:L.promise})},0):L.resolve(!1)}else{this.restoreHistory(L,!0);const yt=new fn(L.id,this.serializeUrl(L.extractedUrl),Ce);M.next(yt);try{L.resolve(this.errorHandler(Ce))}catch(ft){L.reject(ft)}}return Te.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),_))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const M="popstate"===_.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{var L;const $={replaceUrl:!0},se=(null===(L=_.state)||void 0===L?void 0:L.navigationId)?_.state:null;if(se){const yt=Object.assign({},se);delete yt.navigationId,delete yt.\u0275routerPageId,0!==Object.keys(yt).length&&($.state=yt)}const Ce=this.parseUrl(_.url);this.scheduleNavigation(Ce,M,se,$)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){kr(_),this.config=_.map(Os),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,M={}){const{relativeTo:L,queryParams:$,fragment:se,queryParamsHandling:Ce,preserveFragment:yt}=M,ft=L||this.routerState.root,Ut=yt?this.currentUrlTree.fragment:se;let cn=null;switch(Ce){case"merge":cn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),$);break;case"preserve":cn=this.currentUrlTree.queryParams;break;default:cn=$||null}return null!==cn&&(cn=this.removeEmptyProps(cn)),function pi(I,E,_,M,L){if(0===_.length)return bs(E.root,E.root,E.root,M,L);const $=function Ms(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Ss(!0,0,I);let E=0,_=!1;const M=I.reduce((L,$,se)=>{if("object"==typeof $&&null!=$){if($.outlets){const Ce={};return Qn($.outlets,(yt,ft)=>{Ce[ft]="string"==typeof yt?yt.split("/"):yt}),[...L,{outlets:Ce}]}if($.segmentPath)return[...L,$.segmentPath]}return"string"!=typeof $?[...L,$]:0===se?($.split("/").forEach((Ce,yt)=>{0==yt&&"."===Ce||(0==yt&&""===Ce?_=!0:".."===Ce?E++:""!=Ce&&L.push(Ce))}),L):[...L,$]},[]);return new Ss(_,E,M)}(_);if($.toRoot())return bs(E.root,E.root,new ne([],{}),M,L);const se=function Ne(I,E,_){if(I.isAbsolute)return new Fe(E.root,!0,0);if(-1===_.snapshot._lastPathIndex){const $=_.snapshot._urlSegment;return new Fe($,$===E.root,0)}const M=Zr(I.commands[0])?0:1;return function Je(I,E,_){let M=I,L=E,$=_;for(;$>L;){if($-=L,M=M.parent,!M)throw new Error("Invalid number of '../'");L=M.segments.length}return new Fe(M,!1,L-$)}(_.snapshot._urlSegment,_.snapshot._lastPathIndex+M,I.numberOfDoubleDots)}($,E,I),Ce=se.processChildren?Qt(se.segmentGroup,se.index,$.commands):Ot(se.segmentGroup,se.index,$.commands);return bs(E.root,se.segmentGroup,Ce,M,L)}(ft,this.currentUrlTree,_,cn,null!=Ut?Ut:null)}navigateByUrl(_,M={skipLocationChange:!1}){const L=Er(_)?_:this.parseUrl(_),$=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation($,"imperative",null,M)}navigate(_,M={skipLocationChange:!1}){return function ec(I){for(let E=0;E<I.length;E++){const _=I[E];if(null==_)throw new Error(`The requested path contains ${_} segment at index ${E}`)}}(_),this.navigateByUrl(this.createUrlTree(_,M),M)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let M;try{M=this.urlSerializer.parse(_)}catch(L){M=this.malformedUriErrorHandler(L,this.urlSerializer,_)}return M}isActive(_,M){let L;if(L=!0===M?Object.assign({},Jl):!1===M?Object.assign({},yu):M,Er(_))return Ze(this.currentUrlTree,_,L);const $=this.parseUrl(_);return Ze(this.currentUrlTree,$,L)}removeEmptyProps(_){return Object.keys(_).reduce((M,L)=>{const $=_[L];return null!=$&&(M[L]=$),M},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new dt(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,M,L,$,se){var Ce,yt;if(this.disposed)return Promise.resolve(!1);let ft,Ut,cn;se?(ft=se.resolve,Ut=se.reject,cn=se.promise):cn=new Promise((Dt,jr)=>{ft=Dt,Ut=jr});const Ct=++this.navigationId;let Ye;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(L=this.location.getState()),Ye=L&&L.\u0275routerPageId?L.\u0275routerPageId:$.replaceUrl||$.skipLocationChange?null!==(Ce=this.browserPageId)&&void 0!==Ce?Ce:0:(null!==(yt=this.browserPageId)&&void 0!==yt?yt:0)+1):Ye=0,this.setTransition({id:Ct,targetPageId:Ye,source:M,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:$,resolve:ft,reject:Ut,promise:cn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),cn.catch(Dt=>Promise.reject(Dt))}setBrowserUrl(_,M){const L=this.urlSerializer.serialize(_),$=Object.assign(Object.assign({},M.extras.state),this.generateNgRouterState(M.id,M.targetPageId));this.location.isCurrentPathEqualTo(L)||M.extras.replaceUrl?this.location.replaceState(L,"",$):this.location.go(L,"",$)}restoreHistory(_,M=!1){var L,$;if("computed"===this.canceledNavigationResolution){const se=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(L=this.currentNavigation)||void 0===L?void 0:L.finalUrl)||0===se?this.currentUrlTree===(null===($=this.currentNavigation)||void 0===$?void 0:$.finalUrl)&&0===se&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(se)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,M){const L=new hn(_.id,this.serializeUrl(_.extractedUrl),M);this.triggerEvent(L),_.resolve(!1)}generateNgRouterState(_,M){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:M}:{navigationId:_}}}return I.\u0275fac=function(_){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function ta(I){return"imperative"!==I}let Qi=(()=>{class I{constructor(_,M,L,$,se){this.router=_,this.route=M,this.tabIndexAttribute=L,this.renderer=$,this.el=se,this.commands=null,this.onChanges=new ct.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(_){if(null!=this.tabIndexAttribute)return;const M=this.renderer,L=this.el.nativeElement;null!==_?M.setAttribute(L,"tabindex",_):M.removeAttribute(L,"tabindex")}ngOnChanges(_){this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const _={skipLocationChange:Ns(this.skipLocationChange),replaceUrl:Ns(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ns(this.preserveFragment)})}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Ti),p.Y36(Ar),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},I.\u0275dir=p.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(_,M){1&_&&p.NdJ("click",function(){return M.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})(),$s=(()=>{class I{constructor(_,M,L){this.router=_,this.route=M,this.locationStrategy=L,this.commands=null,this.href=null,this.onChanges=new ct.x,this.subscription=_.events.subscribe($=>{$ instanceof dt&&this.updateTargetUrlAndHref()})}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,M,L,$,se){if(0!==_||M||L||$||se||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Ce={skipLocationChange:Ns(this.skipLocationChange),replaceUrl:Ns(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ce),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ns(this.preserveFragment)})}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Ti),p.Y36(Ar),p.Y36(Pt.S$))},I.\u0275dir=p.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,M){1&_&&p.NdJ("click",function($){return M.onClick($.button,$.ctrlKey,$.shiftKey,$.altKey,$.metaKey)}),2&_&&p.uIk("target",M.target)("href",M.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})();function Ns(I){return""===I||!!I}let ui=(()=>{class I{constructor(_,M,L,$,se,Ce){this.router=_,this.element=M,this.renderer=L,this.cdr=$,this.link=se,this.linkWithHref=Ce,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=_.events.subscribe(yt=>{yt instanceof dt&&this.update()})}ngAfterContentInit(){(0,$e.of)(this.links.changes,this.linksWithHrefs.changes,(0,$e.of)(null)).pipe((0,vt.J)()).subscribe(_=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var _;null===(_=this.linkInputChangesSubscription)||void 0===_||_.unsubscribe();const M=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(L=>!!L).map(L=>L.onChanges);this.linkInputChangesSubscription=(0,_e.D)(M).pipe((0,vt.J)()).subscribe(L=>{this.isActive!==this.isLinkActive(this.router)(L)&&this.update()})}set routerLinkActive(_){const M=Array.isArray(_)?_:_.split(" ");this.classes=M.filter(L=>!!L)}ngOnChanges(_){this.update()}ngOnDestroy(){var _;this.routerEventsSubscription.unsubscribe(),null===(_=this.linkInputChangesSubscription)||void 0===_||_.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const _=this.hasActiveLinks();this.isActive!==_&&(this.isActive=_,this.cdr.markForCheck(),this.classes.forEach(M=>{_?this.renderer.addClass(this.element.nativeElement,M):this.renderer.removeClass(this.element.nativeElement,M)}),this.isActiveChange.emit(_))})}isLinkActive(_){const M=function na(I){return!!I.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return L=>!!L.urlTree&&_.isActive(L.urlTree,M)}hasActiveLinks(){const _=this.isLinkActive(this.router);return this.link&&_(this.link)||this.linkWithHref&&_(this.linkWithHref)||this.links.some(_)||this.linksWithHrefs.some(_)}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Ti),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(Qi,8),p.Y36($s,8))},I.\u0275dir=p.lG2({type:I,selectors:[["","routerLinkActive",""]],contentQueries:function(_,M,L){if(1&_&&(p.Suo(L,Qi,5),p.Suo(L,$s,5)),2&_){let $;p.iGM($=p.CRH())&&(M.links=$),p.iGM($=p.CRH())&&(M.linksWithHrefs=$)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[p.TTD]}),I})();class Ha{}class io{preload(E,_){return(0,$e.of)(null)}}let ra=(()=>{class I{constructor(_,M,L,$){this.router=_,this.injector=L,this.preloadingStrategy=$,this.loader=new mu(L,M,yt=>_.triggerEvent(new En(yt)),yt=>_.triggerEvent(new Un(yt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,pe.h)(_=>_ instanceof dt),te(()=>this.preload())).subscribe(()=>{})}preload(){const _=this.injector.get(p.h0i);return this.processRoutes(_,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,M){const L=[];for(const $ of M)if($.loadChildren&&!$.canLoad&&$._loadedConfig){const se=$._loadedConfig;L.push(this.processRoutes(se.module,se.routes))}else $.loadChildren&&!$.canLoad?L.push(this.preloadConfig(_,$)):$.children&&L.push(this.processRoutes(_,$.children));return(0,_e.D)(L).pipe((0,vt.J)(),(0,ce.U)($=>{}))}preloadConfig(_,M){return this.preloadingStrategy.preload(M,()=>(M._loadedConfig?(0,$e.of)(M._loadedConfig):this.loader.load(_.injector,M)).pipe((0,F.z)($=>(M._loadedConfig=$,this.processRoutes($.module,$.routes)))))}}return I.\u0275fac=function(_){return new(_||I)(p.LFG(Ti),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Ha))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})(),Ts=(()=>{class I{constructor(_,M,L={}){this.router=_,this.viewportScroller=M,this.options=L,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},L.scrollPositionRestoration=L.scrollPositionRestoration||"disabled",L.anchorScrolling=L.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Tt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof dt&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Tn&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,M){this.router.triggerEvent(new Tn(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(_){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();const Hs=new p.OlP("ROUTER_CONFIGURATION"),Ga=new p.OlP("ROUTER_FORROOT_GUARD"),_u=[Pt.Ye,{provide:xe,useClass:we},{provide:Ti,useFactory:function $o(I,E,_,M,L,$,se={},Ce,yt){const ft=new Ti(null,I,E,_,M,L,nr($));return Ce&&(ft.urlHandlingStrategy=Ce),yt&&(ft.routeReuseStrategy=yt),function Da(I,E){I.errorHandler&&(E.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(E.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(E.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(E.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(E.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(E.canceledNavigationResolution=I.canceledNavigationResolution)}(se,ft),se.enableTracing&&ft.events.subscribe(Ut=>{var cn,Ct;null===(cn=console.group)||void 0===cn||cn.call(console,`Router Event: ${Ut.constructor.name}`),console.log(Ut.toString()),console.log(Ut),null===(Ct=console.groupEnd)||void 0===Ct||Ct.call(console)}),ft},deps:[xe,Jr,Pt.Ye,p.zs3,p.Sil,ro,Hs,[class ea{},new p.FiY],[class js{},new p.FiY]]},Jr,{provide:Ar,useFactory:function Br(I){return I.routerState.root},deps:[Ti]},ra,io,class vs{preload(E,_){return _().pipe(H(()=>(0,$e.of)(null)))}},{provide:Hs,useValue:{enableTracing:!1}}];function vu(){return new p.PXZ("Router",Ti)}let Lr=(()=>{class I{constructor(_,M){}static forRoot(_,M){return{ngModule:I,providers:[_u,jo(_),{provide:Ga,useFactory:go,deps:[[Ti,new p.FiY,new p.tp0]]},{provide:Hs,useValue:M||{}},{provide:Pt.S$,useFactory:Gs,deps:[Pt.lw,[new p.tBr(Pt.mr),new p.FiY],Hs]},{provide:Ts,useFactory:Ia,deps:[Ti,Pt.EM,Hs]},{provide:Ha,useExisting:M&&M.preloadingStrategy?M.preloadingStrategy:io},{provide:p.PXZ,multi:!0,useFactory:vu},[Wa,{provide:p.ip1,multi:!0,useFactory:Fs,deps:[Wa]},{provide:As,useFactory:ba,deps:[Wa]},{provide:p.tb,multi:!0,useExisting:As}]]}}static forChild(_){return{ngModule:I,providers:[jo(_)]}}}return I.\u0275fac=function(_){return new(_||I)(p.LFG(Ga,8),p.LFG(Ti,8))},I.\u0275mod=p.oAB({type:I}),I.\u0275inj=p.cJS({}),I})();function Ia(I,E,_){return _.scrollOffset&&E.setOffset(_.scrollOffset),new Ts(I,E,_)}function Gs(I,E,_={}){return _.useHash?new Pt.Do(I,E):new Pt.b0(I,E)}function go(I){return"guarded"}function jo(I){return[{provide:p.deG,multi:!0,useValue:I},{provide:ro,multi:!0,useValue:I}]}let Wa=(()=>{class I{constructor(_){this.injector=_,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ct.x}appInitializer(){return this.injector.get(Pt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let M=null;const L=new Promise(Ce=>M=Ce),$=this.injector.get(Ti),se=this.injector.get(Hs);return"disabled"===se.initialNavigation?($.setUpLocationChangeListener(),M(!0)):"enabled"===se.initialNavigation||"enabledBlocking"===se.initialNavigation?($.hooks.afterPreactivation=()=>this.initNavigation?(0,$e.of)(null):(this.initNavigation=!0,M(!0),this.resultOfPreactivationDone),$.initialNavigation()):M(!0),L})}bootstrapListener(_){const M=this.injector.get(Hs),L=this.injector.get(ra),$=this.injector.get(Ts),se=this.injector.get(Ti),Ce=this.injector.get(p.z2F);_===Ce.components[0]&&(("enabledNonBlocking"===M.initialNavigation||void 0===M.initialNavigation)&&se.initialNavigation(),L.setUpPreloading(),$.init(),se.resetRootComponentType(Ce.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return I.\u0275fac=function(_){return new(_||I)(p.LFG(p.zs3))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function Fs(I){return I.appInitializer.bind(I)}function ba(I){return I.bootstrapListener.bind(I)}const As=new p.OlP("Router Initializer")},3942:(pt,Se,T)=>{"use strict";T.d(Se,{Z:()=>Ke});var p=T(2090),N=T(4859),G=T(9681),de=T(1877);class ie{constructor(Ve,Te){this._delegate=Ve,this.firebase=Te,(0,G._addComponent)(Ve,new N.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(Ve,Te=G._DEFAULT_ENTRY_NAME){var ct;this._delegate.checkDestroyed();const H=this._delegate.container.getProvider(Ve);return!H.isInitialized()&&"EXPLICIT"===(null===(ct=H.getComponent())||void 0===ct?void 0:ct.instantiationMode)&&H.initialize(),H.getImmediate({identifier:Te})}_removeServiceInstance(Ve,Te=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(Te)}_addComponent(Ve){(0,G._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,G._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function Ie(){const Et=function ue(Et){const Ve={},Te={__esModule:!0,initializeApp:function F(Le,Re={}){const ve=G.initializeApp(Le,Re);if((0,p.r3)(Ve,ve.name))return Ve[ve.name];const X=new Et(ve,Te);return Ve[ve.name]=X,X},app:H,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function pe(Le){const Re=Le.name,ve=Re.replace("-compat","");if(G._registerComponent(Le)&&"PUBLIC"===Le.type){const X=(Pe=H())=>{if("function"!=typeof Pe[ve])throw Ee.create("invalid-app-argument",{appName:Re});return Pe[ve]()};void 0!==Le.serviceProps&&(0,p.ZB)(X,Le.serviceProps),Te[ve]=X,Et.prototype[ve]=function(...Pe){return this._getService.bind(this,Re).apply(this,Le.multipleInstances?Pe:[])}}return"PUBLIC"===Le.type?Te[ve]:null},removeApp:function ct(Le){delete Ve[Le]},useAsService:function Ue(Le,Re){return"serverAuth"===Re?null:Re},modularAPIs:G}};function H(Le){if(!(0,p.r3)(Ve,Le=Le||G._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Le});return Ve[Le]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function te(){return Object.keys(Ve).map(Le=>Ve[Le])}}),H.App=Et,Te}(ie);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:Ie,extendNamespace:function Ve(Te){(0,p.ZB)(Et,Te)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Et}(),re=new de.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Et=self.firebase.SDK_VERSION;Et&&Et.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=le;!function We(Et){(0,G.registerVersion)("@firebase/app-compat","0.1.22",Et)}()},9681:(pt,Se,T)=>{"use strict";T.r(Se),T.d(Se,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>On,_DEFAULT_ENTRY_NAME:()=>ht,_addComponent:()=>bt,_addOrOverwriteComponent:()=>Tt,_apps:()=>vt,_clearComponents:()=>on,_components:()=>Pt,_getProvider:()=>hn,_registerComponent:()=>dt,_removeServiceInstance:()=>fn,deleteApp:()=>Zn,getApp:()=>Un,getApps:()=>ir,initializeApp:()=>En,onLog:()=>Tn,registerVersion:()=>ln,setLogLevel:()=>jt});var p=T(5861),N=T(4859),G=T(1877),de=T(2090);class ie{constructor(Be){this.container=Be}getPlatformInfoString(){return this.container.getProviders().map(At=>{if(function me(gt){const Be=gt.getComponent();return"VERSION"===(null==Be?void 0:Be.type)}(At)){const $t=At.getImmediate();return`${$t.library}/${$t.version}`}return null}).filter(At=>At).join(" ")}}const Ee="@firebase/app",Ie=new G.Yd("@firebase/app"),ht="[DEFAULT]",Qe={[Ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vt=new Map,Pt=new Map;function bt(gt,Be){try{gt.container.addComponent(Be)}catch(At){Ie.debug(`Component ${Be.name} failed to register with FirebaseApp ${gt.name}`,At)}}function Tt(gt,Be){gt.container.addOrOverwriteComponent(Be)}function dt(gt){const Be=gt.name;if(Pt.has(Be))return Ie.debug(`There were multiple attempts to register component ${Be}.`),!1;Pt.set(Be,gt);for(const At of vt.values())bt(At,gt);return!0}function hn(gt,Be){const At=gt.container.getProvider("heartbeat").getImmediate({optional:!0});return At&&At.triggerHeartbeat(),gt.container.getProvider(Be)}function fn(gt,Be,At=ht){hn(gt,Be).clearInstance(At)}function on(){Pt.clear()}const Gn=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class tr{constructor(Be,At,$t){this._isDeleted=!1,this._options=Object.assign({},Be),this._config=Object.assign({},At),this._name=At.name,this._automaticDataCollectionEnabled=At.automaticDataCollectionEnabled,this._container=$t,this.container.addComponent(new N.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this.checkDestroyed(),this._automaticDataCollectionEnabled=Be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Be){this._isDeleted=Be}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}const On="9.6.11";function En(gt,Be={}){"object"!=typeof Be&&(Be={name:Be});const At=Object.assign({name:ht,automaticDataCollectionEnabled:!1},Be),$t=At.name;if("string"!=typeof $t||!$t)throw Gn.create("bad-app-name",{appName:String($t)});const pn=vt.get($t);if(pn){if((0,de.vZ)(gt,pn.options)&&(0,de.vZ)(At,pn.config))return pn;throw Gn.create("duplicate-app",{appName:$t})}const qt=new N.H0($t);for(const ne of Pt.values())qt.addComponent(ne);const fe=new tr(gt,At,qt);return vt.set($t,fe),fe}function Un(gt=ht){const Be=vt.get(gt);if(!Be)throw Gn.create("no-app",{appName:gt});return Be}function ir(){return Array.from(vt.values())}function Zn(gt){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,p.Z)(function*(gt){const Be=gt.name;vt.has(Be)&&(vt.delete(Be),yield Promise.all(gt.container.getProviders().map(At=>At.delete())),gt.isDeleted=!0)})).apply(this,arguments)}function ln(gt,Be,At){var $t;let pn=null!==($t=Qe[gt])&&void 0!==$t?$t:gt;At&&(pn+=`-${At}`);const qt=pn.match(/\s|\//),fe=Be.match(/\s|\//);if(qt||fe){const ne=[`Unable to register library "${pn}" with version "${Be}":`];return qt&&ne.push(`library name "${pn}" contains illegal characters (whitespace or "/")`),qt&&fe&&ne.push("and"),fe&&ne.push(`version name "${Be}" contains illegal characters (whitespace or "/")`),void Ie.warn(ne.join(" "))}dt(new N.wA(`${pn}-version`,()=>({library:pn,version:Be}),"VERSION"))}function Tn(gt,Be){if(null!==gt&&"function"!=typeof gt)throw Gn.create("invalid-log-argument");(0,G.Am)(gt,Be)}function jt(gt){(0,G.Ub)(gt)}const Yn="firebase-heartbeat-store";let _r=null;function ti(){return _r||(_r=(0,de.X3)("firebase-heartbeat-database",1,(gt,Be)=>{0===Be&&gt.createObjectStore(Yn)}).catch(gt=>{throw Gn.create("storage-open",{originalErrorMessage:gt.message})})),_r}function bn(){return(bn=(0,p.Z)(function*(gt){try{return(yield ti()).transaction(Yn).objectStore(Yn).get(nr(gt))}catch(Be){throw Gn.create("storage-get",{originalErrorMessage:Be.message})}})).apply(this,arguments)}function Vt(gt,Be){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,p.Z)(function*(gt,Be){try{const $t=(yield ti()).transaction(Yn,"readwrite");return yield $t.objectStore(Yn).put(Be,nr(gt)),$t.complete}catch(At){throw Gn.create("storage-set",{originalErrorMessage:At.message})}})).apply(this,arguments)}function nr(gt){return`${gt.name}!${gt.options.appId}`}class Qn{constructor(Be){this.container=Be,this._heartbeatsCache=null;const At=this.container.getProvider("app").getImmediate();this._storage=new Zt(At),this._heartbeatsCachePromise=this._storage.read().then($t=>(this._heartbeatsCache=$t,$t))}triggerHeartbeat(){var Be=this;return(0,p.Z)(function*(){const $t=Be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pn=Ln();if(null===Be._heartbeatsCache&&(Be._heartbeatsCache=yield Be._heartbeatsCachePromise),Be._heartbeatsCache.lastSentHeartbeatDate!==pn&&!Be._heartbeatsCache.heartbeats.some(qt=>qt.date===pn))return Be._heartbeatsCache.heartbeats.push({date:pn,agent:$t}),Be._heartbeatsCache.heartbeats=Be._heartbeatsCache.heartbeats.filter(qt=>{const fe=new Date(qt.date).valueOf();return Date.now()-fe<=2592e6}),Be._storage.overwrite(Be._heartbeatsCache)})()}getHeartbeatsHeader(){var Be=this;return(0,p.Z)(function*(){if(null===Be._heartbeatsCache&&(yield Be._heartbeatsCachePromise),null===Be._heartbeatsCache||0===Be._heartbeatsCache.heartbeats.length)return"";const At=Ln(),{heartbeatsToSend:$t,unsentEntries:pn}=function ur(gt,Be=1024){const At=[];let $t=gt.slice();for(const pn of gt){const qt=At.find(fe=>fe.agent===pn.agent);if(qt){if(qt.dates.push(pn.date),sr(At)>Be){qt.dates.pop();break}}else if(At.push({agent:pn.agent,dates:[pn.date]}),sr(At)>Be){At.pop();break}$t=$t.slice(1)}return{heartbeatsToSend:At,unsentEntries:$t}}(Be._heartbeatsCache.heartbeats),qt=(0,de.L)(JSON.stringify({version:2,heartbeats:$t}));return Be._heartbeatsCache.lastSentHeartbeatDate=At,pn.length>0?(Be._heartbeatsCache.heartbeats=pn,yield Be._storage.overwrite(Be._heartbeatsCache)):(Be._heartbeatsCache.heartbeats=[],Be._storage.overwrite(Be._heartbeatsCache)),qt})()}}function Ln(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(Be){this.app=Be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Be=this;return(0,p.Z)(function*(){return(yield Be._canUseIndexedDBPromise)&&(yield function Gr(gt){return bn.apply(this,arguments)}(Be.app))||{heartbeats:[]}})()}overwrite(Be){var At=this;return(0,p.Z)(function*(){var $t;if(yield At._canUseIndexedDBPromise){const qt=yield At.read();return Vt(At.app,{lastSentHeartbeatDate:null!==($t=Be.lastSentHeartbeatDate)&&void 0!==$t?$t:qt.lastSentHeartbeatDate,heartbeats:Be.heartbeats})}})()}add(Be){var At=this;return(0,p.Z)(function*(){var $t;if(yield At._canUseIndexedDBPromise){const qt=yield At.read();return Vt(At.app,{lastSentHeartbeatDate:null!==($t=Be.lastSentHeartbeatDate)&&void 0!==$t?$t:qt.lastSentHeartbeatDate,heartbeats:[...qt.heartbeats,...Be.heartbeats]})}})()}}function sr(gt){return(0,de.L)(JSON.stringify({version:2,heartbeats:gt})).length}!function Ze(gt){dt(new N.wA("platform-logger",Be=>new ie(Be),"PRIVATE")),dt(new N.wA("heartbeat",Be=>new Qn(Be),"PRIVATE")),ln(Ee,"0.7.21",gt),ln(Ee,"0.7.21","esm2017"),ln("fire-js","")}("")},4859:(pt,Se,T)=>{"use strict";T.d(Se,{H0:()=>ue,wA:()=>G});var p=T(5861),N=T(2090);class G{constructor(le,re,_e){this.name=le,this.instanceFactory=re,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const de="[DEFAULT]";class ie{constructor(le,re){this.name=le,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const re=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(re)){const _e=new N.BH;if(this.instancesDeferred.set(re,_e),this.isInitialized(re)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:re});$e&&_e.resolve($e)}catch($e){}}return this.instancesDeferred.get(re).promise}getImmediate(le){var re;const _e=this.normalizeInstanceIdentifier(null==le?void 0:le.identifier),$e=null!==(re=null==le?void 0:le.optional)&&void 0!==re&&re;if(!this.isInitialized(_e)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(We){if($e)return null;throw We}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function Ee(Ie){return"EAGER"===Ie.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:de})}catch(re){}for(const[re,_e]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(re);try{const We=this.getOrInitializeService({instanceIdentifier:$e});_e.resolve(We)}catch(We){}}}}clearInstance(le=de){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,p.Z)(function*(){const re=Array.from(le.instances.values());yield Promise.all([...re.filter(_e=>"INTERNAL"in _e).map(_e=>_e.INTERNAL.delete()),...re.filter(_e=>"_delete"in _e).map(_e=>_e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=de){return this.instances.has(le)}getOptions(le=de){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:re={}}=le,_e=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(_e))throw Error(`${this.name}(${_e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:_e,options:re});for(const[We,Ke]of this.instancesDeferred.entries())_e===this.normalizeInstanceIdentifier(We)&&Ke.resolve($e);return $e}onInit(le,re){var _e;const $e=this.normalizeInstanceIdentifier(re),We=null!==(_e=this.onInitCallbacks.get($e))&&void 0!==_e?_e:new Set;We.add(le),this.onInitCallbacks.set($e,We);const Ke=this.instances.get($e);return Ke&&le(Ke,$e),()=>{We.delete(le)}}invokeOnInitCallbacks(le,re){const _e=this.onInitCallbacks.get(re);if(_e)for(const $e of _e)try{$e(le,re)}catch(We){}}getOrInitializeService({instanceIdentifier:le,options:re={}}){let _e=this.instances.get(le);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:(Ie=le,Ie===de?void 0:Ie),options:re}),this.instances.set(le,_e),this.instancesOptions.set(le,re),this.invokeOnInitCallbacks(_e,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,_e)}catch($e){}var Ie;return _e||null}normalizeInstanceIdentifier(le=de){return this.component?this.component.multipleInstances?le:de:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const re=this.getProvider(le.name);if(re.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);re.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const re=new ie(le,this);return this.providers.set(le,re),re}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Se,T)=>{"use strict";T.d(Se,{Am:()=>Ie,Ub:()=>ue,Yd:()=>Ee,in:()=>N});const p=[];var N=(()=>{return(le=N||(N={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",N;var le})();const G={debug:N.DEBUG,verbose:N.VERBOSE,info:N.INFO,warn:N.WARN,error:N.ERROR,silent:N.SILENT},de=N.INFO,ie={[N.DEBUG]:"log",[N.VERBOSE]:"log",[N.INFO]:"info",[N.WARN]:"warn",[N.ERROR]:"error"},me=(le,re,..._e)=>{if(re<le.logLevel)return;const $e=(new Date).toISOString(),We=ie[re];if(!We)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[We](`[${$e}]  ${le.name}:`,..._e)};class Ee{constructor(re){this.name=re,this._logLevel=de,this._logHandler=me,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in N))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?G[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,N.DEBUG,...re),this._logHandler(this,N.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,N.VERBOSE,...re),this._logHandler(this,N.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,N.INFO,...re),this._logHandler(this,N.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,N.WARN,...re),this._logHandler(this,N.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,N.ERROR,...re),this._logHandler(this,N.ERROR,...re)}}function ue(le){p.forEach(re=>{re.setLogLevel(le)})}function Ie(le,re){for(const _e of p){let $e=null;re&&re.level&&($e=G[re.level]),_e.userLogHandler=null===le?null:(We,Ke,...Et)=>{const Ve=Et.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch(ct){return null}}).filter(Te=>Te).join(" ");Ke>=(null!=$e?$e:We.logLevel)&&le({level:N[Ke].toLowerCase(),message:Ve,args:Et,type:We.name})}}}},1470:(pt,Se,T)=>{"use strict";T.d(Se,{hx:()=>$e,yI:()=>Et});var p=T(5e3),N=T(655),G=T(3075),de=T(9808);const ie=new p.OlP("ngx-mask config"),me=new p.OlP("new ngx-mask config"),Ee=new p.OlP("initial ngx-mask config"),ue={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new p.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Ie=["Hh:m0:s0","Hh:m0","m0:s0"],le=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let re=(()=>{class Te{constructor(H){this._config=H,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(F,te,pe,Ue)=>{var Le,Re;let ve=[],X="";if(Array.isArray(pe)){const Ge=new RegExp(pe.map(qe=>"[\\^$.|?*+()".indexOf(qe)>=0?`\\${qe}`:qe).join("|"));ve=F.split(Ge),X=null!==(Re=null===(Le=F.match(Ge))||void 0===Le?void 0:Le[0])&&void 0!==Re?Re:""}else ve=F.split(pe),X=pe;const Pe=ve.length>1?`${X}${ve[1]}`:"";let ce=ve[0];const et=this.separatorLimit.replace(/\s/g,"");et&&+et&&(ce="-"===ce[0]?`-${ce.slice(1,ce.length).slice(0,et.length)}`:ce.slice(0,et.length));const he=/(\d+)(\d{3})/;for(;te&&he.test(ce);)ce=ce.replace(he,"$1"+te+"$2");return void 0===Ue?ce+Pe:0===Ue?ce:ce+Pe.substr(0,Ue+1)},this.percentage=F=>Number(F)>=0&&Number(F)<=100,this.getPrecision=F=>{const te=F.split(".");return te.length>1?Number(te[te.length-1]):1/0},this.checkAndRemoveSuffix=F=>{var te,pe,Ue;for(let Le=(null===(te=this.suffix)||void 0===te?void 0:te.length)-1;Le>=0;Le--){const Re=this.suffix.substr(Le,null===(pe=this.suffix)||void 0===pe?void 0:pe.length);if(F.includes(Re)&&(Le-1<0||!F.includes(this.suffix.substr(Le-1,null===(Ue=this.suffix)||void 0===Ue?void 0:Ue.length))))return F.replace(Re,"")}return F},this.checkInputPrecision=(F,te,pe)=>{if(te<1/0){if(Array.isArray(pe)){const Re=pe.find(ve=>ve!==this.thousandSeparator);pe=Re||pe[0]}const Ue=new RegExp(this._charToRegExpExpression(pe)+`\\d{${te}}.*$`),Le=F.match(Ue);Le&&Le[0].length-1>te&&(F=F.substring(0,F.length-(Le[0].length-1-te))),0===te&&this._compareOrIncludes(F[F.length-1],pe,this.thousandSeparator)&&(F=F.substring(0,F.length-1))}return F},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(H,F){const[te,pe]=F;return this.customPattern=pe,this.applyMask(H,te)}applyMask(H,F,te=0,pe=!1,Ue=!1,Le=(()=>{})){var Re,ve;if(!F||"string"!=typeof H)return"";let X=0,Pe="",ce=!1,et=!1,he=1,Ge=!1;H.slice(0,this.prefix.length)===this.prefix&&(H=H.slice(this.prefix.length,H.length)),this.suffix&&(null==H?void 0:H.length)>0&&(H=this.checkAndRemoveSuffix(H));const qe=H.toString().split("");"IP"===F&&(this.ipError=qe.filter(Tt=>"."===Tt).length<3&&qe.length<7,F="099.099.099.099");const ht=[];for(let Tt=0;Tt<H.length;Tt++)(null===(Re=H[Tt])||void 0===Re?void 0:Re.match("\\d"))&&ht.push(H[Tt]);if("CPF_CNPJ"===F&&(this.cpfCnpjError=11!==ht.length&&14!==ht.length,F=ht.length>11?"00.000.000/0000-00":"000.000.000-00"),F.startsWith("percent")){if(H.match("[a-z]|[A-Z]")||H.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){H=this._stripToDecimal(H);const Tt=this.getPrecision(F);H=this.checkInputPrecision(H,Tt,this.decimalMarker)}H.indexOf(".")>0&&!this.percentage(H.substring(0,H.indexOf(".")))&&(H=`${H.substring(0,H.indexOf(".")-1)}${H.substring(H.indexOf("."),H.length)}`),Pe=this.percentage(H)?H:H.substring(0,H.length-1)}else if(F.startsWith("separator")){(H.match("[w\u0430-\u044f\u0410-\u042f]")||H.match("[\u0401\u0451\u0410-\u044f]")||H.match("[a-z]|[A-Z]")||H.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||H.match("[^A-Za-z0-9,]"))&&(H=this._stripToDecimal(H)),H=H.length>1&&"0"===H[0]&&!this._compareOrIncludes(H[1],this.decimalMarker,this.thousandSeparator)&&!Ue?H.slice(1,H.length):H,Ue&&(H=this._compareOrIncludes(H[H.length-1],this.decimalMarker,this.thousandSeparator)?H.slice(0,H.length-1):H);const Tt=this._charToRegExpExpression(this.thousandSeparator);let dt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Tt,"");if(Array.isArray(this.decimalMarker))for(const tr of this.decimalMarker)dt=dt.replace(this._charToRegExpExpression(tr),"");else dt=dt.replace(this._charToRegExpExpression(this.decimalMarker),"");const hn=new RegExp("["+dt+"]");(H.match(hn)||1===H.length&&this._compareOrIncludes(H,this.decimalMarker,this.thousandSeparator))&&(H=H.substring(0,H.length-1));const fn=this.getPrecision(F),on=(H=this.checkInputPrecision(H,fn,this.decimalMarker)).replace(new RegExp(Tt,"g"),"");Pe=this._formatWithSeparators(on,this.thousandSeparator,this.decimalMarker,fn);const zn=Pe.indexOf(",")-H.indexOf(","),Gn=Pe.length-H.length;if(Gn>0&&","!==Pe[te]){et=!0;let tr=0;do{this._shift.add(te+tr),tr++}while(tr<Gn)}else 0!==zn&&te>0&&!(Pe.indexOf(",")>=te&&te>3)||!(Pe.indexOf(".")>=te&&te>3)&&Gn<=0?(this._shift.clear(),et=!0,he=Gn,this._shift.add(te+=Gn)):this._shift.clear()}else for(let Tt=0,dt=qe[0];Tt<qe.length&&X!==F.length;Tt++,dt=qe[Tt])if(this._checkSymbolMask(dt,F[X])&&"?"===F[X+1])Pe+=dt,X+=2;else if("*"===F[X+1]&&ce&&this._checkSymbolMask(dt,F[X+2]))Pe+=dt,X+=3,ce=!1;else if(this._checkSymbolMask(dt,F[X])&&"*"===F[X+1])Pe+=dt,ce=!0;else if("?"===F[X+1]&&this._checkSymbolMask(dt,F[X+2]))Pe+=dt,X+=3;else if(this._checkSymbolMask(dt,F[X])){if("H"===F[X]&&Number(dt)>2){X+=1,this._shiftStep(F,X,qe.length),Tt--,this.leadZeroDateTime&&(Pe+="0");continue}if("h"===F[X]&&"2"===Pe&&Number(dt)>3){X+=1,Tt--;continue}if("m"===F[X]&&Number(dt)>5){X+=1,this._shiftStep(F,X,qe.length),Tt--,this.leadZeroDateTime&&(Pe+="0");continue}if("s"===F[X]&&Number(dt)>5){X+=1,this._shiftStep(F,X,qe.length),Tt--,this.leadZeroDateTime&&(Pe+="0");continue}const hn=31;if("d"===F[X]&&(Number(dt)>3&&this.leadZeroDateTime||Number(H.slice(X,X+2))>hn||"/"===H[X+1])){X+=1,this._shiftStep(F,X,qe.length),Tt--,this.leadZeroDateTime&&(Pe+="0");continue}if("M"===F[X]){const on=0===X&&(Number(dt)>2||Number(H.slice(X,X+2))>12||"/"===H[X+1]),zn=H.slice(X-3,X-1).includes("/")&&("/"===H[X-2]&&Number(H.slice(X-1,X+1))>12&&"/"!==H[X]||"/"===H[X]||"/"===H[X-3]&&Number(H.slice(X-2,X))>12&&"/"!==H[X-1]||"/"===H[X-1]),Gn=Number(H.slice(X-3,X-1))<=hn&&!H.slice(X-3,X-1).includes("/")&&"/"===H[X-1]&&(Number(H.slice(X,X+2))>12||"/"===H[X+1]),tr=Number(H.slice(X-3,X-1))>hn&&!H.slice(X-3,X-1).includes("/")&&!H.slice(X-2,X).includes("/")&&Number(H.slice(X-2,X))>12,On=Number(H.slice(X-3,X-1))<=hn&&!H.slice(X-3,X-1).includes("/")&&"/"!==H[X-1]&&Number(H.slice(X-1,X+1))>12;if(Number(dt)>1&&this.leadZeroDateTime||on||zn||Gn||tr||On){X+=1,this._shiftStep(F,X,qe.length),Tt--,this.leadZeroDateTime&&(Pe+="0");continue}}Pe+=dt,X++}else-1!==this.maskSpecialCharacters.indexOf(F[X])?(Pe+=F[X],X++,this._shiftStep(F,X,qe.length),Tt--):this.maskSpecialCharacters.indexOf(dt)>-1&&this.maskAvailablePatterns[F[X]]&&(null===(ve=this.maskAvailablePatterns[F[X]])||void 0===ve?void 0:ve.optional)?(!!qe[X]&&"099.099.099.099"!==F&&"000.000.000-00"!==F&&"00.000.000/0000-00"!==F&&!F.match(/^9+\.0+$/)&&(Pe+=qe[X]),X++,Tt--):"*"===this.maskExpression[X+1]&&this._findSpecialChar(this.maskExpression[X+2])&&this._findSpecialChar(dt)===this.maskExpression[X+2]&&ce||"?"===this.maskExpression[X+1]&&this._findSpecialChar(this.maskExpression[X+2])&&this._findSpecialChar(dt)===this.maskExpression[X+2]&&ce?(X+=3,Pe+=dt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(dt)<0&&dt!==this.placeHolderCharacter&&(Ge=!0);Pe.length+1===F.length&&-1!==this.maskSpecialCharacters.indexOf(F[F.length-1])&&(Pe+=F[F.length-1]);let Qe=te+1;for(;this._shift.has(Qe);)he++,Qe++;let vt=pe?X:this._shift.has(te)?he:0;Ge&&vt--,Le(vt,et),he<0&&this._shift.clear();let Pt=!1;Ue&&(Pt=qe.every(Tt=>this.maskSpecialCharacters.includes(Tt)));let bt=`${this.prefix}${Pt?"":Pe}${this.suffix}`;return 0===Pe.length&&(bt=`${this.prefix}${Pe}`),bt}_findSpecialChar(H){return this.maskSpecialCharacters.find(F=>F===H)}_checkSymbolMask(H,F){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[F]&&this.maskAvailablePatterns[F].pattern&&this.maskAvailablePatterns[F].pattern.test(H)}_stripToDecimal(H){return H.split("").filter((F,te)=>F.match("^-?\\d")||F.match("\\s")||"."===F||","===F||"-"===F&&0===te&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(H){return H&&(" "===H?"\\s":"[\\^$.|?*+()".indexOf(H)>=0?`\\${H}`:H)}_shiftStep(H,F,te){const pe=/[*?]/g.test(H.slice(0,F))?te:F;this._shift.add(pe+this.prefix.length||0)}_compareOrIncludes(H,F,te){return Array.isArray(F)?F.filter(pe=>pe!==te).includes(H):H===F}}return Te.\u0275fac=function(H){return new(H||Te)(p.LFG(ie))},Te.\u0275prov=p.Yz7({token:Te,factory:Te.\u0275fac}),Te})(),_e=(()=>{class Te extends re{constructor(H,F,te,pe){super(F),this.document=H,this._config=F,this._elementRef=te,this._renderer=pe,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=Ue=>{}}applyMask(H,F,te=0,pe=!1,Ue=!1,Le=(()=>{})){if(!F)return H!==this.actualValue?this.actualValue:H;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(H||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(H||"#")),!H&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const Re=H&&"number"==typeof this.selStart?H[this.selStart]:"";let ve="";if(this.hiddenInput&&!this.writingValue){let et=this.actualValue.split("");""!==H&&et.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(H.length>et.length?et.splice(this.selStart,0,Re):H.length<et.length&&(et.length-H.length==1?et.splice(this.selStart-1,1):et.splice(this.selStart,this.selEnd-this.selStart))):et=[],this.showMaskTyped&&(H=this.removeMask(H)),ve=this.actualValue.length&&et.length<=H.length?this.shiftTypedSymbols(et.join("")):H}ve=Boolean(ve)&&ve.length?ve:H;const X=super.applyMask(ve,F,te,pe,Ue,Le);if(this.actualValue=this.getActualValue(X),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(et=>!this._compareOrIncludes(et,this.decimalMarker,this.thousandSeparator))),this.formControlResult(X),!this.showMaskTyped)return this.hiddenInput&&X&&X.length?this.hideInput(X,this.maskExpression):X;const Pe=X.length,ce=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const et=this._numberSkipedSymbols(X);return X+ce.slice(Pe+et)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?X+ce:X+ce.slice(Pe)}_numberSkipedSymbols(H){const F=/(^|\D)(\d\D)/g;let te=F.exec(H),pe=0;for(;null!=te;)pe+=1,te=F.exec(H);return pe}applyValueChanges(H,F,te,pe=(()=>{})){const Ue=this._elementRef.nativeElement;Ue.value=this.applyMask(Ue.value,this.maskExpression,H,F,te,pe),Ue!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(H,F){return H.split("").map((te,pe)=>{var Ue,Le;return this.maskAvailablePatterns&&this.maskAvailablePatterns[F[pe]]&&(null===(Ue=this.maskAvailablePatterns[F[pe]])||void 0===Ue?void 0:Ue.symbol)?null===(Le=this.maskAvailablePatterns[F[pe]])||void 0===Le?void 0:Le.symbol:te}).join("")}getActualValue(H){const F=H.split("").filter((te,pe)=>this._checkSymbolMask(te,this.maskExpression[pe])||this.maskSpecialCharacters.includes(this.maskExpression[pe])&&te===this.maskExpression[pe]);return F.join("")===H?F.join(""):H}shiftTypedSymbols(H){let F="";return(H&&H.split("").map((pe,Ue)=>{if(this.maskSpecialCharacters.includes(H[Ue+1])&&H[Ue+1]!==this.maskExpression[Ue+1])return F=pe,H[Ue+1];if(F.length){const Le=F;return F="",Le}return pe})||[]).join("")}numberToString(H){return H||0===H?Number(H).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(H)}showMaskInInput(H){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(H){if("IP"===this.maskExpression)return this._checkForIp(H);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(H)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const H=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==H.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(H.value,this.maskExpression))}set formElementProperty([H,F]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,H,F))}checkSpecialCharAmount(H){return H.split("").filter(te=>this._findSpecialChar(te)).length}removeMask(H){return this._removeMask(this._removeSuffix(this._removePrefix(H)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(H){var F;if("#"===H)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const te=[];for(let pe=0;pe<H.length;pe++)(null===(F=H[pe])||void 0===F?void 0:F.match("\\d"))&&te.push(H[pe]);return te.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:te.length>3&&te.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:te.length>6&&te.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(H){var F;const te=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,pe=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===H)return te;const Ue=[];for(let Le=0;Le<H.length;Le++)(null===(F=H[Le])||void 0===F?void 0:F.match("\\d"))&&Ue.push(H[Le]);return Ue.length<=3?te.slice(Ue.length,te.length):Ue.length>3&&Ue.length<=6?te.slice(Ue.length+1,te.length):Ue.length>6&&Ue.length<=9?te.slice(Ue.length+2,te.length):Ue.length>9&&Ue.length<11?te.slice(Ue.length+3,te.length):11===Ue.length?"":12===Ue.length?pe.slice(17===H.length?16:15,pe.length):Ue.length>12&&Ue.length<=14?pe.slice(Ue.length+4,pe.length):""}formControlResult(H){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(H)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(H)):this._removeSuffix(H))}_toNumber(H){if(!this.isNumberValue||""===H)return H;const F=Number(H);return Number.isNaN(F)?H:F}_removeMask(H,F){return H&&H.replace(this._regExpForRemove(F),"")}_removePrefix(H){return this.prefix?H&&H.replace(this.prefix,""):H}_removeSuffix(H){return this.suffix?H&&H.replace(this.suffix,""):H}_retrieveSeparatorValue(H){return this._removeMask(this._removeSuffix(this._removePrefix(H)),this.maskSpecialCharacters)}_regExpForRemove(H){return new RegExp(H.map(F=>`\\${F}`).join("|"),"gi")}_checkSymbols(H){if(""===H)return H;const F=this._retrieveSeparatorPrecision(this.maskExpression);let te=this._retrieveSeparatorValue(H);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(te=te.replace(this.decimalMarker,".")),this.isNumberValue?F?H===this.decimalMarker?null:this._checkPrecision(this.maskExpression,te):Number(te):te}_retrieveSeparatorPrecision(H){const F=H.match(new RegExp("^separator\\.([^d]*)"));return F?Number(F[1]):null}_checkPrecision(H,F){return H.indexOf("2")>0?Number(F).toFixed(2):Number(F)}}return Te.\u0275fac=function(H){return new(H||Te)(p.LFG(de.K0),p.LFG(ie),p.LFG(p.SBq),p.LFG(p.Qsj))},Te.\u0275prov=p.Yz7({token:Te,factory:Te.\u0275fac}),Te})(),$e=(()=>{class Te{constructor(H,F,te){this.document=H,this._maskService=F,this._config=te,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new p.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=pe=>{},this.onTouch=()=>{}}ngOnChanges(H){const{maskExpression:F,specialCharacters:te,patterns:pe,prefix:Ue,suffix:Le,thousandSeparator:Re,decimalMarker:ve,dropSpecialCharacters:X,hiddenInput:Pe,showMaskTyped:ce,placeHolderCharacter:et,shownMaskExpression:he,showTemplate:Ge,clearIfNotMatch:qe,validation:ht,separatorLimit:Qe,allowNegativeNumbers:vt,leadZeroDateTime:Pt,triggerOnMaskChange:bt}=H;if(F&&(F.currentValue!==F.previousValue&&!F.firstChange&&(this._maskService.maskChanged=!0),F.currentValue&&F.currentValue.split("||").length>1?(this._maskExpressionArray=F.currentValue.split("||").sort((Tt,dt)=>Tt.length-dt.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0]):(this._maskExpressionArray=[],this._maskValue=F.currentValue||"",this._maskService.maskExpression=this._maskValue)),te){if(!te.currentValue||!Array.isArray(te.currentValue))return;this._maskService.maskSpecialCharacters=te.currentValue||[]}pe&&pe.currentValue&&(this._maskService.maskAvailablePatterns=pe.currentValue),Ue&&(this._maskService.prefix=Ue.currentValue),Le&&(this._maskService.suffix=Le.currentValue),Re&&(this._maskService.thousandSeparator=Re.currentValue),ve&&(this._maskService.decimalMarker=ve.currentValue),X&&(this._maskService.dropSpecialCharacters=X.currentValue),Pe&&(this._maskService.hiddenInput=Pe.currentValue),ce&&(this._maskService.showMaskTyped=ce.currentValue),et&&(this._maskService.placeHolderCharacter=et.currentValue),he&&(this._maskService.shownMaskExpression=he.currentValue),Ge&&(this._maskService.showTemplate=Ge.currentValue),qe&&(this._maskService.clearIfNotMatch=qe.currentValue),ht&&(this._maskService.validation=ht.currentValue),Qe&&(this._maskService.separatorLimit=Qe.currentValue),vt&&(this._maskService.allowNegativeNumbers=vt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(Tt=>"-"!==Tt))),Pt&&(this._maskService.leadZeroDateTime=Pt.currentValue),bt&&(this._maskService.triggerOnMaskChange=bt.currentValue),this._applyMask()}validate({value:H}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(H);if(this._maskService.cpfCnpjError)return this._createValidationError(H);if(this._maskValue.startsWith("separator")||le.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Ie.includes(this._maskValue))return this._validateTime(H);if(H&&H.toString().length>=1){let F=0;for(const te in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[te].optional&&(this._maskValue.indexOf(te)!==this._maskValue.lastIndexOf(te)?F+=this._maskValue.split("").filter(Ue=>Ue===te).join("").length:-1!==this._maskValue.indexOf(te)&&F++,-1!==this._maskValue.indexOf(te)&&H.toString().length>=this._maskValue.indexOf(te)||F===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&H.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&H.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&H.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(H);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const te=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-F:this._maskValue.length-F;if(H.toString().length<te)return this._createValidationError(H)}}return H&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(H){!H&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(H){const F=H.target;if(this._inputValue=F.value,this._setMask(),!this._maskValue)return void this.onChange(F.value);const te=1===F.selectionStart?F.selectionStart+this._maskService.prefix.length:F.selectionStart;let pe=0,Ue=!1;if(this._maskService.applyValueChanges(te,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(Re,ve)=>{this._justPasted=!1,pe=Re,Ue=ve}),this.document.activeElement!==F)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let Le=this._position?this._inputValue.length+te+pe:te+("Backspace"!==this._code||Ue?pe:0);Le>this._getActualInputLength()&&(Le=this._getActualInputLength()),Le<0&&(Le=0),F.setSelectionRange(Le,Le),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(H){if(!this._maskValue)return;const F=H.target;null!==F&&null!==F.selectionStart&&F.selectionStart===F.selectionEnd&&F.selectionStart>this._maskService.prefix.length&&38!==H.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),F.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===F.value?(F.focus(),F.setSelectionRange(0,0)):F.selectionStart>this._maskService.actualValue.length&&F.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const Ue=F.value&&F.value!==this._maskService.prefix?F.value:this._maskService.prefix+this._maskService.maskIsShown;F.value!==Ue&&(F.value=Ue),(F.selectionStart||F.selectionEnd)<=this._maskService.prefix.length?F.selectionStart=this._maskService.prefix.length:F.selectionEnd>this._getActualInputLength()&&(F.selectionEnd=this._getActualInputLength())}onKeyDown(H){var F;if(!this._maskValue)return;this._code=H.code?H.code:H.key;const te=H.target;if(this._inputValue=te.value,this._setMask(),38===H.keyCode&&H.preventDefault(),37===H.keyCode||8===H.keyCode||46===H.keyCode){if(8===H.keyCode&&0===te.value.length&&(te.selectionStart=te.selectionEnd),8===H.keyCode&&0!==te.selectionStart)if(this.specialCharacters=(null===(F=this.specialCharacters)||void 0===F?void 0:F.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&te.selectionStart<=this.prefix.length)te.setSelectionRange(this.prefix.length,te.selectionEnd);else if(this._inputValue.length!==te.selectionStart&&1!==te.selectionStart)for(;this.specialCharacters.includes(this._inputValue[te.selectionStart-1].toString())&&(this.prefix.length>=1&&te.selectionStart>this.prefix.length||0===this.prefix.length);)te.setSelectionRange(te.selectionStart-1,te.selectionEnd);this.checkSelectionOnDeletion(te),this._maskService.prefix.length&&te.selectionStart<=this._maskService.prefix.length&&te.selectionEnd<=this._maskService.prefix.length&&H.preventDefault();const pe=te.selectionStart;8===H.keyCode&&!te.readOnly&&0===pe&&te.selectionEnd===te.value.length&&0!==te.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<te.selectionStart?te.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===H.keyCode&&H.ctrlKey||65===H.keyCode&&H.metaKey)&&(te.setSelectionRange(0,this._getActualInputLength()),H.preventDefault()),this._maskService.selStart=te.selectionStart,this._maskService.selEnd=te.selectionEnd}writeValue(H){return(0,N.mG)(this,void 0,void 0,function*(){"object"==typeof H&&null!==H&&"value"in H&&("disable"in H&&this.setDisabledState(Boolean(H.disable)),H=H.value),("number"==typeof H||this._maskValue.startsWith("separator"))&&(H=this._maskService.numberToString(H),Array.isArray(this.decimalMarker)||(H="."!==this.decimalMarker?H.replace(".",this.decimalMarker):H),this._maskService.isNumberValue=!0),"string"!=typeof H&&(H=""),this._inputValue=H,this._setMask(),H&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(H,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",H],this._inputValue=H})}registerOnChange(H){this.onChange=H,this._maskService.onChange=this.onChange}registerOnTouched(H){this.onTouch=H}checkSelectionOnDeletion(H){H.selectionStart=Math.min(Math.max(this.prefix.length,H.selectionStart),this._inputValue.length-this.suffix.length),H.selectionEnd=Math.min(Math.max(this.prefix.length,H.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(H){this._maskService.formElementProperty=["disabled",H]}_repeatPatternSymbols(H){return H.match(/{[0-9]+}/)&&H.split("").reduce((F,te,pe)=>{if(this._start="{"===te?pe:this._start,"}"!==te)return this._maskService._findSpecialChar(te)?F+te:F;this._end=pe;const Ue=Number(H.slice(this._start+1,this._end));return F+new Array(Ue+1).join(H[this._start-1])},"")||H}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(H){const F=this._maskValue.split("").filter(te=>":"!==te).length;return H&&(0==+H[H.length-1]&&H.length<F||H.length<=F-2)?this._createValidationError(H):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(H){return{mask:{requiredMask:this._maskValue,actualValue:H}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(H=>{var F,te;const pe=(null===(F=this._maskService.removeMask(this._inputValue))||void 0===F?void 0:F.length)<=(null===(te=this._maskService.removeMask(H))||void 0===te?void 0:te.length);if(this._inputValue&&pe)return this._maskValue=H,this.maskExpression=H,this._maskService.maskExpression=H,pe;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return Te.\u0275fac=function(H){return new(H||Te)(p.Y36(de.K0),p.Y36(_e),p.Y36(ie))},Te.\u0275dir=p.lG2({type:Te,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(H,F){1&H&&p.NdJ("paste",function(){return F.onPaste()})("ngModelChange",function(pe){return F.onModelChange(pe)})("input",function(pe){return F.onInput(pe)})("blur",function(){return F.onBlur()})("click",function(pe){return F.onClick(pe)})("keydown",function(pe){return F.onKeyDown(pe)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[p._Bn([{provide:G.JU,useExisting:(0,p.Gpc)(()=>Te),multi:!0},{provide:G.Cf,useExisting:(0,p.Gpc)(()=>Te),multi:!0},_e]),p.TTD]}),Te})();function Ke(Te,ct){return Object.assign(Object.assign({},Te),ct instanceof Function?ct():ct)}let Et=(()=>{class Te{static forRoot(H){return{ngModule:Te,providers:[{provide:me,useValue:H},{provide:Ee,useValue:ue},{provide:ie,useFactory:Ke,deps:[Ee,me]},re]}}static forChild(){return{ngModule:Te}}}return Te.\u0275fac=function(H){return new(H||Te)},Te.\u0275mod=p.oAB({type:Te}),Te.\u0275inj=p.cJS({}),Te})();const Ve="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Ve.KeyboardEvent||(Ve.KeyboardEvent=function(Te,ct){})},5861:(pt,Se,T)=>{"use strict";function p(G,de,ie,me,Ee,ue,Ie){try{var le=G[ue](Ie),re=le.value}catch(_e){return void ie(_e)}le.done?de(re):Promise.resolve(re).then(me,Ee)}function N(G){return function(){var de=this,ie=arguments;return new Promise(function(me,Ee){var ue=G.apply(de,ie);function Ie(re){p(ue,me,Ee,Ie,le,"next",re)}function le(re){p(ue,me,Ee,Ie,le,"throw",re)}Ie(void 0)})}}T.d(Se,{Z:()=>N})},3681:pt=>{"use strict";pt.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.10.1","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')}},pt=>{pt(pt.s=9657)}]);