"use strict";(self.webpackChunkclipit=self.webpackChunkclipit||[]).push([[179],{440:(wt,Ue,P)=>{P.d(Ue,{nm:()=>pr});var p=P(5813);P(5e3),P(5867);var U=P(5861),J=P(9681),he=P(4859),Oe=P(2090),Pe=P(1877);const Te=new Map,pe={activated:!1,tokenObservers:[]},Z={initialized:!1,enabled:!1};function Ee(ge){return Te.get(ge)||pe}function ue(ge,me){Te.set(ge,me)}function We(){return Z}class $t{constructor(me,Fe,Xe,lt,kt){if(this.operation=me,this.retryPolicy=Fe,this.getWaitDuration=Xe,this.lowerBound=lt,this.upperBound=kt,this.pending=null,this.nextErrorWaitInterval=lt,lt>kt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(me){var Fe=this;return(0,U.Z)(function*(){Fe.stop();try{Fe.pending=new Oe.BH,yield function Ct(ge){return new Promise(me=>{setTimeout(me,ge)})}(Fe.getNextRun(me)),Fe.pending.resolve(),yield Fe.pending.promise,Fe.pending=new Oe.BH,yield Fe.operation(),Fe.pending.resolve(),yield Fe.pending.promise,Fe.process(!0).catch(()=>{})}catch(Xe){Fe.retryPolicy(Xe)?Fe.process(!1).catch(()=>{}):Fe.stop()}})()}getNextRun(me){if(me)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Fe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Fe}}}const rt=new Oe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Yt(ge){if(!Ee(ge).activated)throw rt.create("use-before-activation",{appName:ge.name})}function Jn(ge,me){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,U.Z)(function*({url:ge,body:me},Fe){const Xe={"Content-Type":"application/json"},lt=Fe.getImmediate({optional:!0});if(lt){const Ei=yield lt.getHeartbeatsHeader();Ei&&(Xe["X-Firebase-Client"]=Ei)}const kt={method:"POST",body:JSON.stringify(me),headers:Xe};let Vn,Cr;try{Vn=yield fetch(ge,kt)}catch(Ei){throw rt.create("fetch-network-error",{originalErrorMessage:Ei.message})}if(200!==Vn.status)throw rt.create("fetch-status-error",{httpStatus:Vn.status});try{Cr=yield Vn.json()}catch(Ei){throw rt.create("fetch-parse-error",{originalErrorMessage:Ei.message})}const kn=Cr.ttl.match(/^([\d.]+)(s)$/);if(!kn||!kn[2]||isNaN(Number(kn[1])))throw rt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Cr.ttl}`});const _i=1e3*Number(kn[1]),Ki=Date.now();return{token:Cr.attestationToken,expireTimeMillis:Ki+_i,issuedAtTimeMillis:Ki}})).apply(this,arguments)}function gr(ge,me){const{projectId:Fe,appId:Xe,apiKey:lt}=ge.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Fe}/apps/${Xe}:exchangeDebugToken?key=${lt}`,body:{debug_token:me}}}const Jt="firebase-app-check-store";let on=null;function mr(){return on||(on=new Promise((ge,me)=>{try{const Fe=indexedDB.open("firebase-app-check-database",1);Fe.onsuccess=Xe=>{ge(Xe.target.result)},Fe.onerror=Xe=>{var lt;me(rt.create("storage-open",{originalErrorMessage:null===(lt=Xe.target.error)||void 0===lt?void 0:lt.message}))},Fe.onupgradeneeded=Xe=>{0===Xe.oldVersion&&Xe.target.result.createObjectStore(Jt,{keyPath:"compositeKey"})}}catch(Fe){me(rt.create("storage-open",{originalErrorMessage:Fe.message}))}}),on)}function vt(){return(vt=(0,U.Z)(function*(ge,me){const Xe=(yield mr()).transaction(Jt,"readwrite"),kt=Xe.objectStore(Jt).put({compositeKey:ge,value:me});return new Promise((Vn,Cr)=>{kt.onsuccess=kn=>{Vn()},Xe.onerror=kn=>{var _i;Cr(rt.create("storage-set",{originalErrorMessage:null===(_i=kn.target.error)||void 0===_i?void 0:_i.message}))}})})).apply(this,arguments)}const Mr=new Pe.Yd("@firebase/app-check");function vr(ge,me){return(0,Oe.hl)()?function Yn(ge,me){return function br(ge,me){return vt.apply(this,arguments)}(function rr(ge){return`${ge.options.appId}-${ge.name}`}(ge),me)}(ge,me).catch(Fe=>{Mr.warn(`Failed to write token to IndexedDB. Error: ${Fe}`)}):Promise.resolve()}function _r(){return We().enabled}function pn(){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,U.Z)(function*(){const ge=We();if(ge.enabled&&ge.token)return ge.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Et={error:"UNKNOWN_ERROR"};function Wt(ge){return Oe.US.encodeString(JSON.stringify(ge),!1)}function un(ge){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,U.Z)(function*(ge,me=!1){const Fe=ge.app;Yt(Fe);const Xe=Ee(Fe);let kt,lt=Xe.token;if(!lt){const kn=yield Xe.cachedTokenPromise;kn&&ft(kn)&&(lt=kn)}if(!me&&lt&&ft(lt))return{token:lt.token};let Cr,Vn=!1;if(_r()){Xe.exchangeTokenPromise||(Xe.exchangeTokenPromise=Jn(gr(Fe,yield pn()),ge.heartbeatServiceProvider).then(_i=>(Xe.exchangeTokenPromise=void 0,_i)),Vn=!0);const kn=yield Xe.exchangeTokenPromise;return yield vr(Fe,kn),ue(Fe,Object.assign(Object.assign({},Xe),{token:kn})),{token:kn.token}}try{Xe.exchangeTokenPromise||(Xe.exchangeTokenPromise=Xe.provider.getToken().then(kn=>(Xe.exchangeTokenPromise=void 0,kn)),Vn=!0),lt=yield Xe.exchangeTokenPromise}catch(kn){"appCheck/throttled"===kn.code?Mr.warn(kn.message):Mr.error(kn),kt=kn}return lt?(Cr={token:lt.token},ue(Fe,Object.assign(Object.assign({},Xe),{token:lt})),yield vr(Fe,lt)):Cr=jt(kt),Vn&&xe(Fe,Cr),Cr})).apply(this,arguments)}function ne(ge,me){const Fe=Ee(ge),Xe=Fe.tokenObservers.filter(lt=>lt.next!==me);0===Xe.length&&Fe.tokenRefresher&&Fe.tokenRefresher.isRunning()&&Fe.tokenRefresher.stop(),ue(ge,Object.assign(Object.assign({},Fe),{tokenObservers:Xe}))}function _e(ge){const{app:me}=ge,Fe=Ee(me);let Xe=Fe.tokenRefresher;Xe||(Xe=function ze(ge){const{app:me}=ge;return new $t((0,U.Z)(function*(){let Xe;if(Xe=Ee(me).token?yield un(ge,!0):yield un(ge),Xe.error)throw Xe.error}),()=>!0,()=>{const Fe=Ee(me);if(Fe.token){let Xe=Fe.token.issuedAtTimeMillis+.5*(Fe.token.expireTimeMillis-Fe.token.issuedAtTimeMillis)+3e5;return Xe=Math.min(Xe,Fe.token.expireTimeMillis-3e5),Math.max(0,Xe-Date.now())}return 0},3e4,96e4)}(ge),ue(me,Object.assign(Object.assign({},Fe),{tokenRefresher:Xe}))),!Xe.isRunning()&&Fe.isTokenAutoRefreshEnabled&&Xe.start()}function xe(ge,me){const Fe=Ee(ge).tokenObservers;for(const Xe of Fe)try{"EXTERNAL"===Xe.type&&null!=me.error?Xe.error(me.error):Xe.next(me)}catch(lt){}}function ft(ge){return ge.expireTimeMillis-Date.now()>0}function jt(ge){return{token:Wt(Et),error:ge}}class gn{constructor(me,Fe){this.app=me,this.heartbeatServiceProvider=Fe}_delete(){const{tokenObservers:me}=Ee(this.app);for(const Fe of me)ne(this.app,Fe.next);return Promise.resolve()}}const Br="app-check-internal";!function fr(){(0,J._registerComponent)(new he.wA("app-check",ge=>function qt(ge,me){return new gn(ge,me)}(ge.getProvider("app").getImmediate(),ge.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ge,me,Fe)=>{ge.getProvider(Br).initialize()})),(0,J._registerComponent)(new he.wA(Br,ge=>function ln(ge){return{getToken:me=>un(ge,me),addTokenListener:me=>function ce(ge,me,Fe,Xe){const{app:lt}=ge,kt=Ee(lt),Vn={next:Fe,error:Xe,type:me};if(ue(lt,Object.assign(Object.assign({},kt),{tokenObservers:[...kt.tokenObservers,Vn]})),kt.token&&ft(kt.token)){const Cr=kt.token;Promise.resolve().then(()=>{Fe({token:Cr.token}),_e(ge)}).catch(()=>{})}kt.cachedTokenPromise.then(()=>_e(ge))}(ge,"INTERNAL",me),removeTokenListener:me=>ne(ge.app,me)}}(ge.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)("@firebase/app-check","0.5.6")}();class pr{constructor(){return(0,p.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(wt,Ue,P)=>{P.d(Ue,{zQ:()=>Ne,ww:()=>Ot,rT:()=>Z,f7:()=>ue,L6:()=>Te,_Q:()=>pe,lh:()=>Ee,Qv:()=>Pe,nw:()=>We});var p=P(5e3),K=P(7579),Y=P(9646),ye=P(9751),fe=P(8996),De=P(6451),Ae=P(6063);class Se extends K.x{constructor(Bt=1/0,dt=1/0,it=Ae.l){super(),this._bufferSize=Bt,this._windowTime=dt,this._timestampProvider=it,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=dt===1/0,this._bufferSize=Math.max(1,Bt),this._windowTime=Math.max(1,dt)}next(Bt){const{isStopped:dt,_buffer:it,_infiniteTimeWindow:$t,_timestampProvider:Ct,_windowTime:At}=this;dt||(it.push(Bt),!$t&&it.push(Ct.now()+At)),this._trimBuffer(),super.next(Bt)}_subscribe(Bt){this._throwIfClosed(),this._trimBuffer();const dt=this._innerSubscribe(Bt),{_infiniteTimeWindow:it,_buffer:$t}=this,Ct=$t.slice();for(let At=0;At<Ct.length&&!Bt.closed;At+=it?1:2)Bt.next(Ct[At]);return this._checkFinalizedStatuses(Bt),dt}_trimBuffer(){const{_bufferSize:Bt,_timestampProvider:dt,_buffer:it,_infiniteTimeWindow:$t}=this,Ct=($t?1:2)*Bt;if(Bt<1/0&&Ct<it.length&&it.splice(0,it.length-Ct),!$t){const At=dt.now();let rt=0;for(let nn=1;nn<it.length&&it[nn]<=At;nn+=2)rt=nn;rt&&it.splice(0,rt+1)}}}var Me=P(3099);function le(gt,Bt,dt){let it,$t=!1;return gt&&"object"==typeof gt?({bufferSize:it=1/0,windowTime:Bt=1/0,refCount:$t=!1,scheduler:dt}=gt):it=null!=gt?gt:1/0,(0,Me.B)({connector:()=>new Se(it,Bt,dt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$t})}var se=P(3900),Ie=P(576);function nt(gt,Bt){return(0,Ie.m)(Bt)?(0,se.w)(()=>gt,Bt):(0,se.w)(()=>gt)}var Ze=P(5363),He=P(4004),pt=P(590),Be=P(9468),Re=P(9300),mt=P(5813),j=P(2011),U=P(9808),J=P(440),he=P(127);const Pe=new p.OlP("angularfire2.auth.use-emulator"),Te=new p.OlP("angularfire2.auth.settings"),pe=new p.OlP("angularfire2.auth.tenant-id"),Z=new p.OlP("angularfire2.auth.langugage-code"),Ee=new p.OlP("angularfire2.auth.use-device-language"),ue=new p.OlP("angularfire.auth.persistence"),We=(gt,Bt,dt,it,$t,Ct,At,rt)=>(0,j.cc)(`${gt.name}.auth`,"AngularFireAuth",gt.name,()=>{const nn=Bt.runOutsideAngular(()=>gt.auth());if(dt&&nn.useEmulator(...dt),it&&(nn.tenantId=it),nn.languageCode=$t,Ct&&nn.useDeviceLanguage(),At)for(const[Yt,sn]of Object.entries(At))nn.settings[Yt]=sn;return rt&&nn.setPersistence(rt),nn},[dt,it,$t,Ct,At,rt]);let Ne=(()=>{class gt{constructor(dt,it,$t,Ct,At,rt,nn,Yt,sn,wn,_n,Jn){const Ln=new K.x,nr=(0,Y.of)(void 0).pipe((0,Ze.Q)(At.outsideAngular),(0,se.w)(()=>Ct.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,820)))),(0,He.U)(()=>(0,j.on)(dt,Ct,it)),(0,He.U)($n=>We($n,Ct,rt,Yt,sn,wn,nn,_n)),le({bufferSize:1,refCount:!1}));if((0,U.PM)($t))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Y.of)(null);else{nr.pipe((0,pt.P)()).subscribe();const gr=nr.pipe((0,se.w)(Jt=>Jt.getRedirectResult().then(In=>In,()=>null)),mt.iC,le({bufferSize:1,refCount:!1})),jn=nr.pipe((0,se.w)(Jt=>new ye.y(In=>({unsubscribe:Ct.runOutsideAngular(()=>Jt.onAuthStateChanged(on=>In.next(on),on=>In.error(on),()=>In.complete()))})))),Nt=nr.pipe((0,se.w)(Jt=>new ye.y(In=>({unsubscribe:Ct.runOutsideAngular(()=>Jt.onIdTokenChanged(on=>In.next(on),on=>In.error(on),()=>In.complete()))}))));this.authState=gr.pipe(nt(jn),(0,Be.R)(At.outsideAngular),(0,Ze.Q)(At.insideAngular)),this.user=gr.pipe(nt(Nt),(0,Be.R)(At.outsideAngular),(0,Ze.Q)(At.insideAngular)),this.idToken=this.user.pipe((0,se.w)(Jt=>Jt?(0,fe.D)(Jt.getIdToken()):(0,Y.of)(null))),this.idTokenResult=this.user.pipe((0,se.w)(Jt=>Jt?(0,fe.D)(Jt.getIdTokenResult()):(0,Y.of)(null))),this.credential=(0,De.T)(gr,Ln,this.authState.pipe((0,Re.h)(Jt=>!Jt))).pipe((0,He.U)(Jt=>(null==Jt?void 0:Jt.user)?Jt:null),(0,Be.R)(At.outsideAngular),(0,Ze.Q)(At.insideAngular))}return(0,j.pX)(this,nr,Ct,{spy:{apply:($n,gr,jn)=>{($n.startsWith("signIn")||$n.startsWith("createUser"))&&jn.then(Nt=>Ln.next(Nt))}}})}}return gt.\u0275fac=function(dt){return new(dt||gt)(p.LFG(j.Dh),p.LFG(j.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(mt.HU),p.LFG(Pe,8),p.LFG(Te,8),p.LFG(pe,8),p.LFG(Z,8),p.LFG(Ee,8),p.LFG(ue,8),p.LFG(J.nm,8))},gt.\u0275prov=p.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"any"}),gt})(),Ot=(()=>{class gt{constructor(){he.Z.registerVersion("angularfire",mt.q4.full,"auth-compat")}}return gt.\u0275fac=function(dt){return new(dt||gt)},gt.\u0275mod=p.oAB({type:gt}),gt.\u0275inj=p.cJS({providers:[Ne]}),gt})()},7566:(wt,Ue,P)=>{P.d(Ue,{ST:()=>qc,yb:()=>qv});var p=P(5e3),K=P(4986),Y=P(9751),ye=P(8996),fe=P(9646),De=P(5813),Ae=P(4482),Se=P(5403);function Me(){return(0,Ae.e)((i,e)=>{let t,o=!1;i.subscribe((0,Se.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var le=P(4671);function Ie(i,e){return i===e}var Z,nt=P(8675),Ze=P(4004),He=P(5026),pt=P(9300),Be=P(2011),Re=P(9808),j=(P(820),P(3942)),U=P(5861),J=P(9681),he=P(4859),Oe=P(1877),Pe=P(2090),Te="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pe={},Ee=Ee||{},ue=Te||self;function We(){}function Ne(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ot(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Bt="closure_uid_"+(1e9*Math.random()>>>0),dt=0;function it(i,e,t){return i.call.apply(i.bind,arguments)}function $t(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Ct(i,e,t){return(Ct=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?it:$t).apply(null,arguments)}function At(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function rt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var m=Array(arguments.length-2),D=2;D<arguments.length;D++)m[D-2]=arguments[D];return e.prototype[u].apply(o,m)}}function nn(){this.s=this.s,this.o=this.o}var sn={};nn.prototype.s=!1,nn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function gt(i){return Object.prototype.hasOwnProperty.call(i,Bt)&&i[Bt]||(i[Bt]=++dt)}(this);delete sn[i]}},nn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},_n=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function Ln(i){return Array.prototype.concat.apply([],arguments)}function nr(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function $n(i){return/^[\s\xa0]*$/.test(i)}var Jt,gr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function jn(i,e){return-1!=i.indexOf(e)}function Nt(i,e){return i<e?-1:i>e?1:0}e:{var In=ue.navigator;if(In){var on=In.userAgent;if(on){Jt=on;break e}}Jt=""}function mr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function Fi(i){const e={};for(const t in i)e[t]=i[t];return e}var Yn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yr(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<Yn.length;d++)t=Yn[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function Kr(i){return Kr[" "](i),i}Kr[" "]=We;var vr,i,vt=jn(Jt,"Opera"),St=jn(Jt,"Trident")||jn(Jt,"MSIE"),Pt=jn(Jt,"Edge"),rr=Pt||St,Mr=jn(Jt,"Gecko")&&!(jn(Jt.toLowerCase(),"webkit")&&!jn(Jt,"Edge"))&&!(jn(Jt,"Trident")||jn(Jt,"MSIE"))&&!jn(Jt,"Edge"),Tn=jn(Jt.toLowerCase(),"webkit")&&!jn(Jt,"Edge");function Mi(){var i=ue.document;return i?i.documentMode:void 0}e:{var Hn="",Ht=(i=Jt,Mr?/rv:([^\);]+)(\)|;)/.exec(i):Pt?/Edge\/([\d\.]+)/.exec(i):St?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Tn?/WebKit\/(\S+)/.exec(i):vt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ht&&(Hn=Ht?Ht[1]:""),St){var _r=Mi();if(null!=_r&&_r>parseFloat(Hn)){vr=String(_r);break e}}vr=Hn}var pn={};var Wt=ue.document&&St&&(Mi()||parseInt(vr,10))||void 0,un=function(){if(!ue.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ue.addEventListener("test",We,e),ue.removeEventListener("test",We,e)}catch(t){}return i}();function Lt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function ce(i,e){if(Lt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Mr){e:{try{Kr(e.nodeName);var u=!0;break e}catch(d){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ne[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ce.Z.h.call(this)}}Lt.prototype.h=function(){this.defaultPrevented=!0},rt(ce,Lt);var ne={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),ze=0;function xe(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++ze,this.ca=this.fa=!1}function ft(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function jt(i){this.src=i,this.g={},this.h=0}function gn(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=wn(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(ft(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function qt(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}jt.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var m=qt(i,e,o,u);return-1<m?(e=i[m],t||(e.fa=!1)):((e=new xe(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var ln="closure_lm_"+(1e6*Math.random()|0),xn={};function rn(i,e,t,o,u){if(o&&o.once)return ei(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)rn(i,e[d],t,o,u);return null}return t=ot(t),i&&i[_e]?i.N(e,t,Ot(o)?!!o.capture:!!o,u):On(i,e,t,!1,o,u)}function On(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var m=Ot(u)?!!u.capture:!!u,D=li(i);if(D||(i[ln]=D=new jt(i)),(t=D.add(e,t,o,m,d)).proxy)return t;if(o=function Ir(){var e=ir;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)un||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Tr(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function ei(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)ei(i,e[d],t,o,u);return null}return t=ot(t),i&&i[_e]?i.O(e,t,Ot(o)?!!o.capture:!!o,u):On(i,e,t,!0,o,u)}function Li(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)Li(i,e[d],t,o,u);else o=Ot(o)?!!o.capture:!!o,t=ot(t),i&&i[_e]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=qt(d=i.g[e],t,o,u))&&(ft(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=li(i))&&(e=i.g[e.toString()],i=-1,e&&(i=qt(e,t,o,u)),(t=-1<i?e[i]:null)&&xr(t))}function xr(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[_e])gn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Tr(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=li(e))?(gn(t,i),0==t.h&&(t.src=null,e[ln]=null)):ft(i)}}}function Tr(i){return i in xn?xn[i]:xn[i]="on"+i}function ir(i,e){if(i.ca)i=!0;else{e=new ce(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&xr(i),i=t.call(o,e)}return i}function li(i){return(i=i[ln])instanceof jt?i:null}var Or="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(i){return"function"==typeof i?i:(i[Or]||(i[Or]=function(e){return i.handleEvent(e)}),i[Or])}function Rt(){nn.call(this),this.i=new jt(this),this.P=this,this.I=null}function en(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Lt(e,i);else if(e instanceof Lt)e.target=e.target||i;else{var u=e;yr(e=new Lt(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];u=Kn(m,o,!0,e)&&u}if(u=Kn(m=e.g=i,o,!0,e)&&u,u=Kn(m,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=Kn(m=e.g=t[d],o,!1,e)&&u}function Kn(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.ca&&m.capture==t){var D=m.listener,V=m.ia||m.src;m.fa&&gn(i.i,m),u=!1!==D.call(V,o)&&u}}return u&&!o.defaultPrevented}rt(Rt,nn),Rt.prototype[_e]=!0,Rt.prototype.removeEventListener=function(i,e,t,o){Li(this,i,e,t,o)},Rt.prototype.M=function(){if(Rt.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)ft(t[o]);delete i.g[e],i.h--}}this.I=null},Rt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Rt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var ci=ue.JSON.stringify;function sr(){var i=Br;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var qr,Sn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new or,i=>i.reset());class or{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function di(i){ue.setTimeout(()=>{throw i},0)}function an(i,e){qr||function Vi(){var i=ue.Promise.resolve(void 0);qr=function(){i.then(fr)}}(),vi||(qr(),vi=!0),Br.add(i,e)}var vi=!1,Br=new class ti{constructor(){this.h=this.g=null}add(e,t){const o=Sn.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function fr(){for(var i;i=sr();){try{i.h.call(i.g)}catch(t){di(t)}var e=Sn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}vi=!1}function Qn(i,e){Rt.call(this),this.h=i||1,this.g=e||ue,this.j=Ct(this.kb,this),this.l=Date.now()}function cr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function pr(i,e,t){if("function"==typeof i)t&&(i=Ct(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ct(i.handleEvent,i)}return 2147483647<Number(e)?-1:ue.setTimeout(i,e||0)}function Pn(i){i.g=pr(()=>{i.g=null,i.i&&(i.i=!1,Pn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}rt(Qn,Rt),(Z=Qn.prototype).da=!1,Z.S=null,Z.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),en(this,"tick"),this.da&&(cr(this),this.start()))}},Z.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Z.M=function(){Qn.Z.M.call(this),cr(this),delete this.g};class zi extends nn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Pn(this)}M(){super.M(),this.g&&(ue.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(i){nn.call(this),this.h=i,this.g={}}rt(Dr,nn);var Ar=[];function jr(i,e,t,o){Array.isArray(t)||(t&&(Ar[0]=t.toString()),t=Ar);for(var u=0;u<t.length;u++){var d=rn(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function is(i){mr(i.g,function(e,t){this.g.hasOwnProperty(t)&&xr(e)},i),i.g={}}function ni(){this.g=!0}function ae(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ve(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<u.length;m++)u[m]=""}}}return ci(t)}catch(D){return e}}(i,t)+(o?" "+o:"")})}Dr.prototype.M=function(){Dr.Z.M.call(this),is(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ni.prototype.Aa=function(){this.g=!1},ni.prototype.info=function(){};var Ke={},Qt=null;function Dn(){return Qt=Qt||new Rt}function ge(i){Lt.call(this,Ke.Ma,i)}function me(i){const e=Dn();en(e,new ge(e,i))}function Fe(i,e){Lt.call(this,Ke.STAT_EVENT,i),this.stat=e}function Xe(i){const e=Dn();en(e,new Fe(e,i))}function lt(i,e){Lt.call(this,Ke.Na,i),this.size=e}function kt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ue.setTimeout(function(){i()},e)}Ke.Ma="serverreachability",rt(ge,Lt),Ke.STAT_EVENT="statevent",rt(Fe,Lt),Ke.Na="timingevent",rt(lt,Lt);var Vn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Cr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function kn(){}function Ki(){}kn.prototype.h=null;var Ks,Ei={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function qi(){Lt.call(this,"d")}function xi(){Lt.call(this,"c")}function fs(){}function wi(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Dr(this),this.P=_s,this.W=new Qn(i=rr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $r}function $r(){this.i=null,this.g="",this.h=!1}rt(qi,Lt),rt(xi,Lt),rt(fs,kn),fs.prototype.g=function(){return new XMLHttpRequest},fs.prototype.i=function(){return{}},Ks=new fs;var _s=45e3,os={},as={};function Ms(i,e,t){i.K=1,i.v=yt(H(e)),i.s=t,i.U=!0,us(i,null)}function us(i,e){i.F=Date.now(),ps(i),i.A=H(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),R(t.h,"t",o),i.C=0,t=i.l.H,i.h=new $r,i.g=Ga(i.l,t?e:null,!i.s),0<i.O&&(i.L=new zi(Ct(i.Ia,i,i.g),i.O)),jr(i.V,i.g,"readystatechange",i.gb),e=i.H?Fi(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),me(1),function ss(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var m="",D=d.split("&"),V=0;V<D.length;V++){var W=D[V].split("=");if(1<W.length){var re=W[0];W=W[1];var we=re.split("_");m=2<=we.length&&"type"==we[1]?m+(re+"=")+W+"&":m+(re+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Es(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Hr(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Oi(i,t),u==as){4==e&&(i.o=4,Xe(14),o=!1),ae(i.j,i.m,null,"[Incomplete Response]");break}if(u==os){i.o=4,Xe(15),ae(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}ae(i.j,i.m,u,null),Os(i,u)}Es(i)&&u!=as&&u!=os&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Xe(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),pi(e),e.L=!0,Xe(11))):(ae(i.j,i.m,t,"[Invalid Chunked Response]"),Ii(i),Er(i))}function Oi(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?as:(t=Number(e.substring(t,o)),isNaN(t)?os:(o+=1)+t>e.length?as:(e=e.substr(o,t),i.C=o+t,e))}function ps(i){i.Y=Date.now()+i.P,xs(i,i.P)}function xs(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=kt(Ct(i.eb,i),e)}function Zr(i){i.B&&(ue.clearTimeout(i.B),i.B=null)}function Er(i){0==i.l.G||i.I||Ps(i.l,i)}function Ii(i){Zr(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,cr(i.W),is(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Os(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Yr(t.i,i)))if(t.I=i.N,!i.J&&Yr(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(W){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=kt(Ct(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;Qi(t),Uo(t)}zr(t),Xe(18)}if(1>=hi(t.i)&&t.ka){try{t.ka()}catch(W){}t.ka=void 0}}else $i(t,11)}else if((i.J||t.g==i)&&Qi(t),!$n(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let W=u[e];if(t.U=W[0],W=W[1],2==t.G)if("c"==W[0]){t.J=W[1],t.la=W[2];const re=W[3];null!=re&&(t.ma=re,t.h.info("VER="+t.ma));const we=W[4];null!=we&&(t.za=we,t.h.info("SVER="+t.za));const Ge=W[5];null!=Ge&&"number"==typeof Ge&&0<Ge&&(t.K=o=1.5*Ge,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const st=i.g;if(st){const at=st.g?st.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(at){var d=o.i;!d.g&&(jn(at,"spdy")||jn(at,"quic")||jn(at,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(Gr(d,d.h),d.h=null))}if(o.D){const Gt=st.g?st.g.getResponseHeader("X-HTTP-Session-Id"):null;Gt&&(o.sa=Gt,Ye(o.F,o.D,Gt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var m=i;if((o=t).oa=ba(o,o.H?o.la:null,o.W),m.J){Qs(o.i,m);var D=m,V=o.K;V&&D.setTimeout(V),D.B&&(Zr(D),ps(D)),o.g=m}else jo(o);0<t.l.length&&Bo(t)}else"stop"!=W[0]&&"close"!=W[0]||$i(t,7);else 3==t.G&&("stop"==W[0]||"close"==W[0]?"stop"==W[0]?$i(t,7):kr(t):"noop"!=W[0]&&t.j&&t.j.wa(W),t.A=0)}me(4)}catch(W){}}function gs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ne(i)||"string"==typeof i)_n(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Ne(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function ws(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ne(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function Zi(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Zi)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Nr(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Ri(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)Ri(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function Ri(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(Z=wi.prototype).setTimeout=function(i){this.P=i},Z.gb=function(i){i=i.target;const e=this.L;e&&3==Is(i)?e.l():this.Ia(i)},Z.Ia=function(i){try{if(i==this.g)e:{const re=Is(this.g);var e=this.g.Da();const we=this.g.ba();if(!(3>re)&&(3!=re||rr||this.g&&(this.h.h||this.g.ga()||Co(this.g)))){this.I||4!=re||7==e||me(8==e||0>=we?3:2),Zr(this);var t=this.g.ba();this.N=t;t:if(Es(this)){var o=Co(this.g);i="";var u=o.length,d=4==Is(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ii(this),Er(this);var m="";break t}this.h.i=new ue.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.ga();if(this.i=200==t,function oe(i,e,t,o,u,d,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.X,re,t),this.i){if(this.$&&!this.J){t:{if(this.g){var D,V=this.g;if((D=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$n(D)){var W=D;break t}}W=null}if(!(t=W)){this.i=!1,this.o=3,Xe(12),Ii(this),Er(this);break e}ae(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Os(this,t)}this.U?(Hr(this,re,m),rr&&this.i&&3==re&&(jr(this.V,this.W,"tick",this.fb),this.W.start())):(ae(this.j,this.m,m,null),Os(this,m)),4==re&&Ii(this),this.i&&!this.I&&(4==re?Ps(this.l,this):(this.i=!1,ps(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,Xe(12)):(this.o=0,Xe(13)),Ii(this),Er(this)}}}catch(re){}},Z.fb=function(){if(this.g){var i=Is(this.g),e=this.g.ga();this.C<e.length&&(Zr(this),Hr(this,i,e),this.i&&4!=i&&ps(this))}},Z.cancel=function(){this.I=!0,Ii(this)},Z.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function ee(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(me(3),Xe(17)),Ii(this),this.o=2,Er(this)):xs(this,this.Y-i)},(Z=Zi.prototype).R=function(){Nr(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},Z.T=function(){return Nr(this),this.g.concat()},Z.get=function(i,e){return Ri(this.h,i)?this.h[i]:e},Z.set=function(i,e){Ri(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},Z.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var qs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function x(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof x){this.g=void 0!==e?e:i.g,M(this,i.j),this.s=i.s,q(this,i.i),de(this,i.m),this.l=i.l,e=i.h;var t=new Bi;t.i=e.i,e.g&&(t.g=new Zi(e.g),t.h=e.h),qe(this,t),this.o=i.o}else i&&(t=String(i).match(qs))?(this.g=!!e,M(this,t[1]||"",!0),this.s=cn(t[2]||""),q(this,t[3]||"",!0),de(this,t[4]),this.l=cn(t[5]||"",!0),qe(this,t[6]||"",!0),this.o=cn(t[7]||"")):(this.g=!!e,this.h=new Bi(null,this.g))}function H(i){return new x(i)}function M(i,e,t){i.j=t?cn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function q(i,e,t){i.i=t?cn(e,!0):e}function de(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function qe(i,e,t){e instanceof Bi?(i.h=e,function A(i,e){e&&!i.j&&(ji(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Zs(this,o),R(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=vn(e,ri)),i.h=new Bi(e,i.g))}function Ye(i,e,t){i.h.set(e,t)}function yt(i){return Ye(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function cn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function vn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,dr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function dr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}x.prototype.toString=function(){var i=[],e=this.j;e&&i.push(vn(e,qn,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(vn(e,qn,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(vn(t,"/"==t.charAt(0)?Ui:Xn,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",vn(t,tn)),i.join("")};var qn=/[#\/\?@]/g,Xn=/[#\?:]/g,Ui=/[#\?]/g,ri=/[#\?@]/g,tn=/#/g;function Bi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ji(i){i.g||(i.g=new Zi,i.h=0,i.i&&function ar(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Zs(i,e){ji(i),e=S(i,e),Ri(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Ri((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Nr(i)))}function Ys(i,e){return ji(i),e=S(i,e),Ri(i.g.h,e)}function R(i,e,t){Zs(i,e),0<t.length&&(i.i=null,i.g.set(S(i,e),nr(t)),i.h+=t.length)}function S(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Le(i){this.l=i||Vt,i=ue.PerformanceNavigationTiming?0<(i=ue.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ue.g&&ue.g.Ea&&ue.g.Ea()&&ue.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Z=Bi.prototype).add=function(i,e){ji(this),this.i=null,i=S(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Z.forEach=function(i,e){ji(this),this.g.forEach(function(t,o){_n(t,function(u){i.call(e,u,o,this)},this)},this)},Z.T=function(){ji(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},Z.R=function(i){ji(this);var e=[];if("string"==typeof i)Ys(this,i)&&(e=Ln(e,this.g.get(S(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Ln(e,i[t])}return e},Z.set=function(i,e){return ji(this),this.i=null,Ys(this,i=S(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Z.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},Z.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var m=u;""!==o[d]&&(m+="="+encodeURIComponent(String(o[d]))),i.push(m)}}return this.i=i.join("&")};var Vt=10;function dn(i){return!!i.h||!!i.g&&i.g.size>=i.j}function hi(i){return i.h?1:i.g?i.g.size:0}function Yr(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Gr(i,e){i.g?i.g.add(e):i.h=e}function Qs(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function ms(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return nr(i.i)}function Fo(){}function yu(){this.g=new Fo}function _a(i,e,t){const o=t||"";try{gs(i,function(u,d){let m=u;Ot(u)&&(m=ci(u)),e.push(o+d+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function fi(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(d){}}function Ni(i){this.l=i.$b||null,this.j=i.ib||!1}function Do(i,e){Rt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Rs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Le.prototype.cancel=function(){if(this.i=ms(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Fo.prototype.stringify=function(i){return ue.JSON.stringify(i,void 0)},Fo.prototype.parse=function(i){return ue.JSON.parse(i,void 0)},rt(Ni,kn),Ni.prototype.g=function(){return new Do(this.l,this.j)},Ni.prototype.i=function(i){return function(){return i}}({}),rt(Do,Rt);var Rs=0;function ys(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function ao(i){i.readyState=4,i.l=null,i.j=null,i.A=null,uo(i)}function uo(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Z=Do.prototype).open=function(i,e){if(this.readyState!=Rs)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,uo(this)},Z.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ue).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ao(this)),this.readyState=Rs},Z.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ue.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ys(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Z.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ao(this):uo(this),3==this.readyState&&ys(this)}},Z.Ua=function(i){this.g&&(this.response=this.responseText=i,ao(this))},Z.Ta=function(i){this.g&&(this.response=i,ao(this))},Z.ha=function(){this.g&&ao(this)},Z.setRequestHeader=function(i,e){this.v.append(i,e)},Z.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Z.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Do.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ea=ue.JSON.parse;function Pr(i){Rt.call(this),this.headers=new Zi,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Lo,this.K=this.L=!1}rt(Pr,Rt);var Lo="",na=/^https?$/i,ra=["POST","PUT"];function wa(i){return"content-type"==i.toLowerCase()}function Vo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Js(i),Ns(i)}function Js(i){i.D||(i.D=!0,en(i,"complete"),en(i,"error"))}function Ia(i){if(i.h&&void 0!==Ee&&(!i.C[1]||4!=Is(i)||2!=i.ba()))if(i.v&&4==Is(i))pr(i.Fa,0,i);else if(en(i,"readystatechange"),4==Is(i)){i.h=!1;try{const D=i.ba();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(qs)[1]||null;if(!u&&ue.self&&ue.self.location){var d=ue.self.location.protocol;u=d.substr(0,d.length-1)}o=!na.test(u?u.toLowerCase():"")}t=o}if(t)en(i,"complete"),en(i,"success");else{i.m=6;try{var m=2<Is(i)?i.g.statusText:""}catch(V){m=""}i.j=m+" ["+i.ba()+"]",Js(i)}}finally{Ns(i)}}}function Ns(i,e){if(i.g){Da(i);const t=i.g,o=i.C[0]?We:null;i.g=null,i.C=null,e||en(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function Da(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ue.clearTimeout(i.A),i.A=null)}function Is(i){return i.g?i.g.readyState:0}function Co(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Lo:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ia(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function _u(i){let e="";return mr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Ye(i,e,t))}function Wr(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function bo(i){this.za=0,this.l=[],this.h=new ni,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wr("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wr("baseRetryDelayMs",5e3,i),this.$a=Wr("retryDelaySeedMs",1e4,i),this.Ya=Wr("forwardChannelMaxRetries",2,i),this.ra=Wr("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Le(i&&i.concurrentRequestLimit),this.Ca=new yu,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function kr(i){if(Eu(i),3==i.G){var e=i.V++,t=H(i.F);Ye(t,"SID",i.J),Ye(t,"RID",e),Ye(t,"TYPE","terminate"),Yi(i,t),(e=new wi(i,i.h,e,void 0)).K=2,e.v=yt(H(t)),t=!1,ue.navigator&&ue.navigator.sendBeacon&&(t=ue.navigator.sendBeacon(e.v.toString(),"")),!t&&ue.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ga(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ps(e)}ks(i)}function Uo(i){i.g&&(pi(i),i.g.cancel(),i.g=null)}function Eu(i){Uo(i),i.u&&(ue.clearTimeout(i.u),i.u=null),Qi(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ue.clearTimeout(i.m),i.m=null)}function Ha(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Bo(i)}function Bo(i){dn(i.i)||i.m||(i.m=!0,an(i.Ha,i),i.C=0)}function Ca(i,e){var t;t=e?e.m:i.V++;const o=H(i.F);Ye(o,"SID",i.J),Ye(o,"RID",t),Ye(o,"AID",i.U),Yi(i,o),i.o&&i.s&&ia(o,i.o,i.s),t=new wi(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=lo(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Gr(i.i,t),Ms(t,o,e)}function Yi(i,e){i.j&&gs({},function(t,o){Ye(e,o,t)})}function lo(i,e,t){t=Math.min(i.l.length,t);var o=i.j?Ct(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=u[0].h,m.push("ofs="+d)):d=0:m.push("ofs="+d);let D=!0;for(let V=0;V<t;V++){let W=u[V].h;const re=u[V].g;if(W-=d,0>W)d=Math.max(0,u[V].h-100),D=!1;else try{_a(re,m,"req"+W+"_")}catch(we){o&&o(re)}}if(D){o=m.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function jo(i){i.g||i.u||(i.Y=1,an(i.Ga,i),i.A=0)}function zr(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=kt(Ct(i.Ga,i),To(i,i.A)),i.A++,0))}function pi(i){null!=i.B&&(ue.clearTimeout(i.B),i.B=null)}function wu(i){i.g=new wi(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=H(i.oa);Ye(e,"RID","rpc"),Ye(e,"SID",i.J),Ye(e,"CI",i.N?"0":"1"),Ye(e,"AID",i.U),Yi(i,e),Ye(e,"TYPE","xmlhttp"),i.o&&i.s&&ia(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=yt(H(e)),t.s=null,t.U=!0,us(t,i)}function Qi(i){null!=i.v&&(ue.clearTimeout(i.v),i.v=null)}function Ps(i,e){var t=null;if(i.g==e){Qi(i),pi(i),i.g=null;var o=2}else{if(!Yr(i.i,e))return;t=e.D,Qs(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;en(o=Dn(),new lt(o,t,e,u)),Bo(i)}else jo(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function tc(i,e){return!(hi(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=kt(Ct(i.Ha,i,e),To(i,i.C)),i.C++,0)))}(i,e)||2==o&&zr(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:$i(i,5);break;case 4:$i(i,10);break;case 3:$i(i,6);break;default:$i(i,2)}}function To(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function $i(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=Ct(i.jb,i);t||(t=new x("//www.google.com/images/cleardot.gif"),ue.location&&"http"==ue.location.protocol||M(t,"https"),yt(t)),function oo(i,e){const t=new ni;if(ue.Image){const o=new Image;o.onload=At(fi,t,o,"TestLoadImage: loaded",!0,e),o.onerror=At(fi,t,o,"TestLoadImage: error",!1,e),o.onabort=At(fi,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=At(fi,t,o,"TestLoadImage: timeout",!1,e),ue.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Xe(2);i.G=0,i.j&&i.j.va(e),ks(i),Eu(i)}function ks(i){i.G=0,i.I=-1,i.j&&((0!=ms(i.i).length||0!=i.l.length)&&(i.i.i.length=0,nr(i.l),i.l.length=0),i.j.ua())}function ba(i,e,t){let o=function Gn(i){return i instanceof x?H(i):new x(i,void 0)}(t);if(""!=o.i)e&&q(o,e+"."+o.i),de(o,o.m);else{const u=ue.location;o=function Un(i,e,t,o){var u=new x(null,void 0);return i&&M(u,i),e&&q(u,e),t&&de(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&mr(i.aa,function(u,d){Ye(o,d,u)}),t=i.sa,(e=i.D)&&t&&Ye(o,e,t),Ye(o,"VER",i.ma),Yi(i,o),o}function Ga(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pr(t&&i.Ba&&!i.qa?new Ni({ib:!0}):i.qa)).L=i.H,e}function Iu(){}function Wa(){if(St&&!(10<=Number(Wt)))throw Error("Environmental error: no available transport.")}function hr(i,e){Rt.call(this),this.g=new bo(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!$n(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$n(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ji(this)}function $o(i){qi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Xs(){xi.call(this),this.status=1}function Ji(i){this.g=i}(Z=Pr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ks.g(),this.C=function _i(i){return i.h||(i.h=i.i())}(this.u?this.u:Ks),this.g.onreadystatechange=Ct(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void Vo(this,d)}i=t||"";const u=new Zi(this.headers);o&&gs(o,function(d,m){u.set(m,d)}),o=function Jn(i){e:{var e=wa;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=ue.FormData&&i instanceof ue.FormData,!(0<=wn(ra,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,m){this.g.setRequestHeader(m,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Da(this),0<this.B&&((this.K=function vu(i){return St&&function Tt(){return function br(i){var e=pn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=gr(String(vr)).split("."),t=gr("9").split("."),o=Math.max(e.length,t.length);for(let m=0;0==i&&m<o;m++){var u=e[m]||"",d=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=Nt(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||Nt(0==u[2].length,0==d[2].length)||Nt(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ct(this.pa,this)):this.A=pr(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){Vo(this,d)}},Z.pa=function(){void 0!==Ee&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,en(this,"timeout"),this.abort(8))},Z.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,en(this,"complete"),en(this,"abort"),Ns(this))},Z.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ns(this,!0)),Pr.Z.M.call(this)},Z.Fa=function(){this.s||(this.F||this.v||this.l?Ia(this):this.cb())},Z.cb=function(){Ia(this)},Z.ba=function(){try{return 2<Is(this)?this.g.status:-1}catch(i){return-1}},Z.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Z.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ea(e)}},Z.Da=function(){return this.m},Z.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Z=bo.prototype).ma=8,Z.G=1,Z.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},Z.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new wi(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=Fi(d),yr(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lo(this,u,e),Ye(t=H(this.F),"RID",i),Ye(t,"CVER",22),this.D&&Ye(t,"X-HTTP-Session-Id",this.D),Yi(this,t),this.o&&d&&ia(t,this.o,d),Gr(this.i,u),this.Ra&&Ye(t,"TYPE","init"),this.ja?(Ye(t,"$req",e),Ye(t,"SID","null"),u.$=!0,Ms(u,t,null)):Ms(u,t,e),this.G=2}}else 3==this.G&&(i?Ca(this,i):0==this.l.length||dn(this.i)||Ca(this))},Z.Ga=function(){if(this.u=null,wu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=kt(Ct(this.bb,this),i)}},Z.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xe(10),Uo(this),wu(this))},Z.ab=function(){null!=this.v&&(this.v=null,Uo(this),zr(this),Xe(19))},Z.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Xe(2)):(this.h.info("Failed to ping google.com"),Xe(1))},(Z=Iu.prototype).xa=function(){},Z.wa=function(){},Z.va=function(){},Z.ua=function(){},Z.Oa=function(){},Wa.prototype.g=function(i,e){return new hr(i,e)},rt(hr,Rt),hr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),an(Ct(i.hb,i,e))),Xe(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=ba(i,null,i.W),Bo(i)},hr.prototype.close=function(){kr(this.g)},hr.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Ha(this.g,e)}else this.v?((e={}).__data__=ci(i),Ha(this.g,e)):Ha(this.g,i)},hr.prototype.M=function(){this.g.j=null,delete this.j,kr(this.g),delete this.g,hr.Z.M.call(this)},rt($o,qi),rt(Xs,xi),rt(Ji,Iu),Ji.prototype.xa=function(){en(this.g,"a")},Ji.prototype.wa=function(i){en(this.g,new $o(i))},Ji.prototype.va=function(i){en(this.g,new Xs(i))},Ji.prototype.ua=function(){en(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,hr.prototype.send=hr.prototype.u,hr.prototype.open=hr.prototype.m,hr.prototype.close=hr.prototype.close,Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,Cr.COMPLETE="complete",Ki.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",Rt.prototype.listen=Rt.prototype.N,Pr.prototype.listenOnce=Pr.prototype.O,Pr.prototype.getLastError=Pr.prototype.La,Pr.prototype.getLastErrorCode=Pr.prototype.Da,Pr.prototype.getStatus=Pr.prototype.ba,Pr.prototype.getResponseJson=Pr.prototype.Qa,Pr.prototype.getResponseText=Pr.prototype.ga,Pr.prototype.send=Pr.prototype.ea;var Ho=pe.createWebChannelTransport=function(){return new Wa},Go=pe.getStatEventTarget=function(){return Dn()},Ta=pe.ErrorCode=Vn,wr=pe.EventType=Cr,al=pe.Event=Ke,Ds=pe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Aa=pe.FetchXmlHttpFactory=Ni,vs=pe.WebChannel=Ki,nc=pe.XhrIo=Pr;const za="@firebase/firestore";class ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");let co="9.6.11";const ls=new Oe.Yd("@firebase/firestore");function ho(){return ls.logLevel}function ct(i,...e){if(ls.logLevel<=Oe.in.DEBUG){const t=e.map(E);ls.debug(`Firestore (${co}): ${i}`,...t)}}function er(i,...e){if(ls.logLevel<=Oe.in.ERROR){const t=e.map(E);ls.error(`Firestore (${co}): ${i}`,...t)}}function I(i,...e){if(ls.logLevel<=Oe.in.WARN){const t=e.map(E);ls.warn(`Firestore (${co}): ${i}`,...t)}}function E(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function y(i="Unexpected state"){const e=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: `+i;throw er(e),new Error(e)}function b(i,e){i||y()}function B(i,e){return i}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Pe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $e{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Dt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ii.UNAUTHENTICATED))}shutdown(){}}class zt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tr{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=W=>this.i!==u?(u=this.i,t(W)):Promise.resolve();let m=new $e;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new $e,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const W=m;e.enqueueRetryable((0,U.Z)(function*(){yield W.promise,yield d(o.currentUser)}))},V=W=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=W,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(W=>V(W)),setTimeout(()=>{if(!this.auth){const W=this.t.getImmediate({optional:!0});W?V(W):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new $e)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(b("string"==typeof o.accessToken),new Dt(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return b(null===e||"string"==typeof e),new ii(e)}}class Nn{constructor(e,t,o){this.type="FirstParty",this.user=ii.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class Cs{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new Nn(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wo{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=d=>{null!=d.error&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.p;return this.p=d.token,ct("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.g.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.g.getImmediate({optional:!0});d?u(d):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(b("string"==typeof t.token),this.p=t.token,new cs(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Fr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function bs(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}Fr.A=-1;class rc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=bs(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function Cn(i,e){return i<e?-1:i>e?1:0}function eo(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function Ka(i){return i+"\0"}class gi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new X($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new X($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new X($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gi.fromMillis(Date.now())}static fromDate(e){return gi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new gi(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Cn(this.nanoseconds,e.nanoseconds):Cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new gi(0,0))}static max(){return new Ft(new gi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Zc(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function qa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Yc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Sa{constructor(e,t,o){void 0===t?t=0:t>e.length&&y(),void 0===o?o=e.length-t:o>e.length-t&&y(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Sa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sa?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),m=t.get(u);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zn extends Sa{construct(e,t,o){return new Zn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new X($.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new Zn(t)}static emptyPath(){return new Zn([])}}const Wd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends Sa{construct(e,t,o){return new Hi(e,t,o)}static isValidIdentifier(e){return Wd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hi(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new X($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let m=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new X($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const V=e[u+1];if("\\"!==V&&"."!==V&&"`"!==V)throw new X($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=V,u+=2}else"`"===D?(m=!m,u++):"."!==D||m?(o+=D,u++):(d(),u++)}if(d(),m)throw new X($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hi(t)}static emptyPath(){return new Hi([])}}class Ls{constructor(e){this.fields=e,e.sort(Hi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return eo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Fn(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const ul=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(i){if(b(!!i),"string"==typeof i){let e=0;const t=ul.exec(i);if(b(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:si(i.seconds),nanos:si(i.nanos)}}function si(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ao(i){return"string"==typeof i?Fn.fromBase64String(i):Fn.fromUint8Array(i)}function Gi(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function As(i){const e=i.mapValue.fields.__previous_value__;return Gi(e)?As(e):e}function Ma(i){const e=Ts(i.mapValue.fields.__local_write_time__.timestampValue);return new gi(e.seconds,e.nanos)}class zo{constructor(e,t,o,u,d,m,D,V){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=D,this.useFetchStreams=V}}class Di{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Di("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Di&&e.projectId===this.projectId&&e.database===this.database}}function Xi(i){return null==i}function So(i){return 0===i&&1/i==-1/0}function Du(i){return"number"==typeof i&&Number.isInteger(i)&&!So(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class It{constructor(e){this.path=e}static fromPath(e){return new It(Zn.fromString(e))}static fromName(e){return new It(Zn.fromString(e).popFirst(5))}static empty(){return new It(Zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new Zn(e.slice()))}}const ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cu={nullValue:"NULL_VALUE"};function Ci(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Gi(i)?4:qo(i)?9:10:y()}function to(i,e){if(i===e)return!0;const t=Ci(i);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ma(i).isEqual(Ma(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ts(o.timestampValue),m=Ts(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Ao(i.bytesValue).isEqual(Ao(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return si(o.geoPointValue.latitude)===si(u.geoPointValue.latitude)&&si(o.geoPointValue.longitude)===si(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return si(o.integerValue)===si(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=si(o.doubleValue),m=si(u.doubleValue);return d===m?So(d)===So(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return eo(i.arrayValue.values||[],e.arrayValue.values||[],to);case 10:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Zc(d)!==Zc(m))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===m[D]||!to(d[D],m[D])))return!1;return!0}(i,e);default:return y()}var u}function po(i,e){return void 0!==(i.values||[]).find(t=>to(t,e))}function Mo(i,e){if(i===e)return 0;const t=Ci(i),o=Ci(e);if(t!==o)return Cn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Cn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=si(u.integerValue||u.doubleValue),D=si(d.integerValue||d.doubleValue);return m<D?-1:m>D?1:m===D?0:isNaN(m)?isNaN(D)?0:-1:1}(i,e);case 3:return Ko(i.timestampValue,e.timestampValue);case 4:return Ko(Ma(i),Ma(e));case 5:return Cn(i.stringValue,e.stringValue);case 6:return function(u,d){const m=Ao(u),D=Ao(d);return m.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),D=d.split("/");for(let V=0;V<m.length&&V<D.length;V++){const W=Cn(m[V],D[V]);if(0!==W)return W}return Cn(m.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=Cn(si(u.latitude),si(d.latitude));return 0!==m?m:Cn(si(u.longitude),si(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const m=u.values||[],D=d.values||[];for(let V=0;V<m.length&&V<D.length;++V){const W=Mo(m[V],D[V]);if(W)return W}return Cn(m.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){const m=u.fields||{},D=Object.keys(m),V=d.fields||{},W=Object.keys(V);D.sort(),W.sort();for(let re=0;re<D.length&&re<W.length;++re){const we=Cn(D[re],W[re]);if(0!==we)return we;const Ge=Mo(m[D[re]],V[W[re]]);if(0!==Ge)return Ge}return Cn(D.length,W.length)}(i.mapValue,e.mapValue);default:throw y()}}function Ko(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Cn(i,e);const t=Ts(i),o=Ts(e),u=Cn(t.seconds,o.seconds);return 0!==u?u:Cn(t.nanos,o.nanos)}function xo(i){return cl(i)}function cl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Ts(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ao(i.bytesValue).toBase64():"referenceValue"in i?It.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const m of o.values||[])d?d=!1:u+=",",u+=cl(m);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",m=!0;for(const D of u)m?m=!1:d+=",",d+=`${D}:${cl(o.fields[D])}`;return d+"}"}(i.mapValue):y();var e}function Oo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function no(i){return!!i&&"integerValue"in i}function Za(i){return!!i&&"arrayValue"in i}function Vs(i){return!!i&&"nullValue"in i}function dl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function xa(i){return!!i&&"mapValue"in i}function sa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return qa(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=sa(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sa(i.arrayValue.values[t]);return e}return Object.assign({},i)}function qo(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ya(i){return"nullValue"in i?Cu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Oo(Di.empty(),It.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:y()}function hl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Oo(Di.empty(),It.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ll:y()}function T(i,e){return void 0===i?e:void 0===e||Mo(i,e)>0?i:e}function O(i,e){return void 0===i?e:void 0===e||Mo(i,e)<0?i:e}class z{constructor(e){this.value=e}static empty(){return new z({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!xa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(t)}setAll(e){let t=Hi.emptyPath(),o={},u=[];e.forEach((m,D)=>{if(!t.isImmediateParentOf(D)){const V=this.getFieldsMap(t);this.applyChanges(V,o,u),o={},u=[],t=D.popLast()}m?o[D.lastSegment()]=sa(m):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());xa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return to(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];xa(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){qa(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new z(sa(this.value))}}function ie(i){const e=[];return qa(i.fields,(t,o)=>{const u=new Hi([t]);if(xa(o)){const d=ie(o.mapValue).fields;if(0===d.length)e.push(u);else for(const m of d)e.push(u.child(m))}else e.push(u)}),new Ls(e)}class Ce{constructor(e,t,o,u,d,m){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Ce(e,0,Ft.min(),Ft.min(),z.empty(),0)}static newFoundDocument(e,t,o){return new Ce(e,1,t,Ft.min(),o,0)}static newNoDocument(e,t){return new Ce(e,2,t,Ft.min(),z.empty(),0)}static newUnknownDocument(e,t){return new Ce(e,3,t,Ft.min(),z.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=z.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=z.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ce&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ce(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class je{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function ht(i){return i.fields.find(e=>2===e.kind)}function xt(i){return i.fields.filter(e=>2!==e.kind)}je.UNKNOWN_ID=-1;class Kt{constructor(e,t){this.fieldPath=e,this.kind=t}}class hn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hn(0,Sr.min())}}function Wn(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=Ft.fromTimestamp(1e9===o?new gi(t+1,0):new gi(t,o));return new Sr(u,It.empty(),e)}function bn(i){return new Sr(i.readTime,i.key,-1)}class Sr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Sr(Ft.min(),It.empty(),-1)}static max(){return new Sr(Ft.max(),It.empty(),-1)}}function mi(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=It.comparator(i.documentKey,e.documentKey),0!==t?t:Cn(i.largestBatchId,e.largestBatchId))}class Oa{constructor(e,t=null,o=[],u=[],d=null,m=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=D,this.P=null}}function Qa(i,e=null,t=[],o=[],u=null,d=null,m=null){return new Oa(i,e,t,o,u,d,m)}function es(i){const e=B(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+xo(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Xi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>xo(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>xo(o)).join(",")),e.P=t}return e.P}function Us(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Of(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!to(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Yd(i.startAt,e.startAt)&&Yd(i.endAt,e.endAt)}function go(i){return It.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function fl(i,e){return i.filters.filter(t=>t instanceof yi&&t.field.isEqual(e))}function Qc(i,e,t){let o,u=!0;for(const d of fl(i,e)){let m,D=!0;switch(d.op){case"<":case"<=":m=Ya(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,D=!1;break;case"!=":case"not-in":m=Cu}T(o,m)===m&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];T(o,m)===m&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}function pl(i,e,t){let o,u=!0;for(const d of fl(i,e)){let m,D=!0;switch(d.op){case">=":case">":m=hl(d.value),D=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,D=!1;break;case"!=":case"not-in":m=ll}O(o,m)===m&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];O(o,m)===m&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}class yi extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new Kd(e,t,o):"array-contains"===t?new gl(e,o):"in"===t?new Mf(e,o):"not-in"===t?new xf(e,o):"array-contains-any"===t?new qd(e,o):new yi(e,t,o)}static V(e,t,o){return"in"===t?new Af(e,o):new Sf(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Mo(t,this.value)):null!==t&&Ci(this.value)===Ci(t)&&this.v(Mo(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return y()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Kd extends yi{constructor(e,t,o){super(e,t,o),this.key=It.fromName(o.referenceValue)}matches(e){const t=It.comparator(e.key,this.key);return this.v(t)}}class Af extends yi{constructor(e,t){super(e,"in",t),this.keys=oa(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sf extends yi{constructor(e,t){super(e,"not-in",t),this.keys=oa(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oa(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>It.fromName(o.referenceValue))}class gl extends yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Za(t)&&po(t.arrayValue,this.value)}}class Mf extends yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&po(this.value.arrayValue,t)}}class xf extends yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!po(this.value.arrayValue,t)}}class qd extends yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Za(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>po(this.value.arrayValue,o))}}class Ro{constructor(e,t){this.position=e,this.inclusive=t}}class ml{constructor(e,t="asc"){this.field=e,this.dir=t}}function Of(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Zd(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],m=i.position[u];if(o=d.field.isKeyField()?It.comparator(It.fromName(m.referenceValue),t.key):Mo(m,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Yd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!to(i.position[t],e.position[t]))return!1;return!0}class mo{constructor(e,t=null,o=[],u=[],d=null,m="F",D=null,V=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=D,this.endAt=V,this.D=null,this.C=null}}function ic(i,e,t,o,u,d,m,D){return new mo(i,e,t,o,u,d,m,D)}function No(i){return new mo(i)}function sc(i){return!Xi(i.limit)&&"F"===i.limitType}function bu(i){return!Xi(i.limit)&&"L"===i.limitType}function Qd(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Tu(i){for(const e of i.filters)if(e.S())return e.field;return null}function yl(i){return null!==i.collectionGroup}function Ja(i){const e=B(i);if(null===e.D){e.D=[];const t=Tu(e),o=Qd(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new ml(t)),e.D.push(new ml(Hi.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.D.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ml(Hi.keyField(),d))}}}return e.D}function io(i){const e=B(i);if(!e.C)if("F"===e.limitType)e.C=Qa(e.path,e.collectionGroup,Ja(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Ja(e))t.push(new ml(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Ro(e.endAt.position,!e.endAt.inclusive):null,u=e.startAt?new Ro(e.startAt.position,!e.startAt.inclusive):null;e.C=Qa(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function oc(i,e,t){return new mo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Au(i,e){return Us(io(i),io(e))&&i.limitType===e.limitType}function Jd(i){return`${es(io(i))}|lt:${i.limitType}`}function Jc(i){return`Query(target=${function ro(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${xo(o.value)}`;var o}).join(", ")}]`),Xi(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>xo(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>xo(t)).join(",")),`Target(${e})`}(io(i))}; limitType=${i.limitType})`}function Xc(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):It.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,m){const D=Zd(u,d,m);return u.inclusive?D<=0:D<0}(t.startAt,Ja(t),o)||t.endAt&&!function(u,d,m){const D=Zd(u,d,m);return u.inclusive?D>=0:D>0}(t.endAt,Ja(t),o)));var t,o}function ac(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Xd(i){return(e,t)=>{let o=!1;for(const u of Ja(i)){const d=Zo(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Zo(i,e,t){const o=i.field.isKeyField()?It.comparator(e.key,t.key):function(u,d,m){const D=d.data.field(u),V=m.data.field(u);return null!==D&&null!==V?Mo(D,V):y()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return y()}}function Su(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:So(e)?"-0":e}}function ed(i){return{integerValue:""+i}}function Rf(i,e){return Du(e)?ed(e):Su(i,e)}class vl{constructor(){this._=void 0}}function Mg(i,e,t){return i instanceof Xa?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof eu?th(i,e):i instanceof Mu?Ra(i,e):function(o,u){const d=eh(o,u),m=nh(d)+nh(o.k);return no(d)&&no(o.k)?ed(m):Su(o.M,m)}(i,e)}function Nf(i,e,t){return i instanceof eu?th(i,e):i instanceof Mu?Ra(i,e):t}function eh(i,e){return i instanceof _l?no(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Xa extends vl{}class eu extends vl{constructor(e){super(),this.elements=e}}function th(i,e){const t=tu(e);for(const o of i.elements)t.some(u=>to(u,o))||t.push(o);return{arrayValue:{values:t}}}class Mu extends vl{constructor(e){super(),this.elements=e}}function Ra(i,e){let t=tu(e);for(const o of i.elements)t=t.filter(u=>!to(u,o));return{arrayValue:{values:t}}}class _l extends vl{constructor(e,t){super(),this.M=e,this.k=t}}function nh(i){return si(i.integerValue||i.doubleValue)}function tu(i){return Za(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xu{constructor(e,t){this.field=e,this.transform=t}}class El{constructor(e,t){this.version=e,this.transformResults=t}}class bi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bi}static exists(e){return new bi(void 0,e)}static updateTime(e){return new bi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class wl{}function xg(i,e,t){i instanceof ru?function(o,u,d){const m=o.value.clone(),D=Il(o.fieldTransforms,u,d.transformResults);m.setAll(D),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof Ou?function(o,u,d){if(!nu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=Il(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(rh(o)),D.setAll(m),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uc(i,e,t){var u;i instanceof ru?function(o,u,d){if(!nu(o.precondition,u))return;const m=o.value.clone(),D=ih(o.fieldTransforms,d,u);m.setAll(D),u.convertToFoundDocument(cc(u),m).setHasLocalMutations()}(i,e,t):i instanceof Ou?function(o,u,d){if(!nu(o.precondition,u))return;const m=ih(o.fieldTransforms,d,u),D=u.data;D.setAll(rh(o)),D.setAll(m),u.convertToFoundDocument(cc(u),D).setHasLocalMutations()}(i,e,t):nu(i.precondition,u=e)&&u.convertToNoDocument(Ft.min())}function Og(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=eh(o.transform,u||null);null!=d&&(null==t&&(t=z.empty()),t.set(o.field,d))}return t||null}function lc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&eo(t,o,(u,d)=>function yo(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof eu&&o instanceof eu||t instanceof Mu&&o instanceof Mu?eo(t.elements,o.elements,to):t instanceof _l&&o instanceof _l?to(t.k,o.k):t instanceof Xa&&o instanceof Xa);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function cc(i){return i.isFoundDocument()?i.version:Ft.min()}class ru extends wl{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class Ou extends wl{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}}function rh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Il(i,e,t){const o=new Map;b(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],m=d.transform,D=e.data.field(d.field);o.set(d.field,Nf(m,D,t[u]))}return o}function ih(i,e,t){const o=new Map;for(const u of i){const d=u.transform,m=t.data.field(u.field);o.set(u.field,Mg(d,m,e))}return o}class Dl extends wl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Cl extends wl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class td{constructor(e){this.count=e}}var Ti,zn;function bl(i){switch(i){default:return y();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function dc(i){if(void 0===i)return er("GRPC error has no .code"),$.UNKNOWN;switch(i){case Ti.OK:return $.OK;case Ti.CANCELLED:return $.CANCELLED;case Ti.UNKNOWN:return $.UNKNOWN;case Ti.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ti.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ti.INTERNAL:return $.INTERNAL;case Ti.UNAVAILABLE:return $.UNAVAILABLE;case Ti.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ti.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ti.NOT_FOUND:return $.NOT_FOUND;case Ti.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ti.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ti.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ti.ABORTED:return $.ABORTED;case Ti.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ti.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ti.DATA_LOSS:return $.DATA_LOSS;default:return y()}}(zn=Ti||(Ti={}))[zn.OK=0]="OK",zn[zn.CANCELLED=1]="CANCELLED",zn[zn.UNKNOWN=2]="UNKNOWN",zn[zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zn[zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zn[zn.NOT_FOUND=5]="NOT_FOUND",zn[zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",zn[zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",zn[zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",zn[zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zn[zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zn[zn.ABORTED=10]="ABORTED",zn[zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",zn[zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",zn[zn.INTERNAL=13]="INTERNAL",zn[zn.UNAVAILABLE=14]="UNAVAILABLE",zn[zn.DATA_LOSS=15]="DATA_LOSS";class Na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){qa(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Yc(this.inner)}size(){return this.innerSize}}class Bn{constructor(e,t){this.comparator=e,this.root=t||ds.EMPTY}insert(e,t){return new Bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tl(this.root,e,this.comparator,!0)}}class Tl{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ds{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=null!=o?o:ds.RED,this.left=null!=u?u:ds.EMPTY,this.right=null!=d?d:ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new ds(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return ds.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw y();const e=this.left.check();if(e!==this.right.check())throw y();return e+(this.isRed()?0:1)}}ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1,ds.EMPTY=new class{constructor(){this.size=0}get key(){throw y()}get value(){throw y()}get color(){throw y()}get left(){throw y()}get right(){throw y()}copy(i,e,t,o,u){return this}insert(i,e,t){return new ds(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rr{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nd(this.data.getIterator())}getIteratorFrom(e){return new nd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Rr)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rr(this.comparator);return t.data=e,t}}class nd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ru(i){return i.hasNext()?i.getNext():void 0}const hc=new Bn(It.comparator);function vo(){return hc}const sh=new Bn(It.comparator);function rd(){return sh}function fc(){return new Na(i=>i.toString(),(i,e)=>i.isEqual(e))}const Rg=new Bn(It.comparator),Al=new Rr(It.comparator);function An(...i){let e=Al;for(const t of i)e=e.add(t);return e}const Sl=new Rr(Cn);function iu(){return Sl}class su{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Pi.createSynthesizedTargetChangeForCurrentChange(e,t)),new su(Ft.min(),o,iu(),vo(),An())}}class Pi{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Pi(Fn.EMPTY_BYTE_STRING,t,An(),An(),An())}}class Yo{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class pc{constructor(e,t){this.targetId=e,this.$=t}}class Bs{constructor(e,t,o=Fn.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class Nu{constructor(){this.B=0,this.L=Ml(),this.U=Fn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=An(),t=An(),o=An();return this.L.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:y()}}),new Pi(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=Ml()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class id{constructor(e){this.nt=e,this.st=new Map,this.it=vo(),this.rt=oh(),this.ot=new Rr(Cn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const d=u.target;if(go(d))if(0===o){const m=new It(d.path);this.ct(t,m,Ce.newNoDocument(m,Ft.min()))}else b(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((d,m)=>{const D=this.wt(m);if(D){if(d.current&&go(D.target)){const V=new It(D.target.path);null!==this.it.get(V)||this.It(m,V)||this.ct(m,V,Ce.newNoDocument(V,e))}d.j&&(t.set(m,d.H()),d.J())}});let o=An();this.rt.forEach((d,m)=>{let D=!0;m.forEachWhile(V=>{const W=this.wt(V);return!W||2===W.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.it.forEach((d,m)=>m.setReadTime(e));const u=new su(e,t,this.ot,this.it,o);return this.it=vo(),this.rt=oh(),this.ot=new Rr(Cn),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Nu,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Rr(Cn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ct("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Nu),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function oh(){return new Bn(It.comparator)}function Ml(){return new Bn(It.comparator)}const sd={asc:"ASCENDING",desc:"DESCENDING"},ah={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class uh{constructor(e,t){this.databaseId=e,this.N=t}}function xl(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Po(i,e){return i.N?e.toBase64():e.toUint8Array()}function lh(i,e){return xl(i,e.toTimestamp())}function ts(i){return b(!!i),Ft.fromTimestamp(function(e){const t=Ts(e);return new gi(t.seconds,t.nanos)}(i))}function Ol(i,e){return(t=i,new Zn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ch(i){const e=Zn.fromString(i);return b(fn(e)),e}function Pu(i,e){return Ol(i.databaseId,e.path)}function Lr(i,e){const t=ch(e);if(t.get(1)!==i.databaseId.projectId)throw new X($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new X($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new It(Qo(t))}function Rl(i,e){return Ol(i.databaseId,e)}function gc(i){const e=ch(i);return 4===e.length?Zn.emptyPath():Qo(e)}function Nl(i){return new Zn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Qo(i){return b(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function ku(i,e,t){return{name:Pu(i,e),fields:t.value.mapValue.fields}}function mc(i,e,t){const o=Lr(i,e.name),u=ts(e.updateTime),d=new z({mapValue:{fields:e.fields}}),m=Ce.newFoundDocument(o,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function ou(i,e){let t;if(e instanceof ru)t={update:ku(i,e.key,e.value)};else if(e instanceof Dl)t={delete:Pu(i,e.key)};else if(e instanceof Ou)t={update:ku(i,e.key,e.data),updateMask:Zt(e.fieldMask)};else{if(!(e instanceof Cl))return y();t={verify:Pu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const m=d.transform;if(m instanceof Xa)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof eu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Mu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof _l)return{fieldPath:d.field.canonicalString(),increment:m.k};throw y()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:lh(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:y()),t;var u}function od(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?bi.updateTime(ts(u.updateTime)):void 0!==u.exists?bi.exists(u.exists):bi.none():bi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,m){let D=null;"setToServerValue"in m?(b("REQUEST_TIME"===m.setToServerValue),D=new Xa):"appendMissingElements"in m?D=new eu(m.appendMissingElements.values||[]):"removeAllFromArray"in m?D=new Mu(m.removeAllFromArray.values||[]):"increment"in m?D=new _l(d,m.increment):y();const V=Hi.fromServerFormat(m.fieldPath);return new xu(V,D)}(i,u)):[];var u;if(e.update){const u=Lr(i,e.update.name),d=new z({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new Ls((e.updateMask.fieldPaths||[]).map(W=>Hi.fromServerFormat(W)));return new Ou(u,d,m,t,o)}return new ru(u,d,t,o)}if(e.delete){const u=Lr(i,e.delete);return new Dl(u,t)}if(e.verify){const u=Lr(i,e.verify);return new Cl(u,t)}return y()}function hh(i,e){return{documents:[Rl(i,e.path)]}}function fh(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Rl(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Rl(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(V){if(0===V.length)return;const W=V.map(re=>function(we){if("=="===we.op){if(dl(we.value))return{unaryFilter:{field:Q(we.field),op:"IS_NAN"}};if(Vs(we.value))return{unaryFilter:{field:Q(we.field),op:"IS_NULL"}}}else if("!="===we.op){if(dl(we.value))return{unaryFilter:{field:Q(we.field),op:"IS_NOT_NAN"}};if(Vs(we.value))return{unaryFilter:{field:Q(we.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Q(we.field),op:k(we.op),value:we.value}}}(re));return 1===W.length?W[0]:{compositeFilter:{op:"AND",filters:W}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(V){if(0!==V.length)return V.map(W=>{return{field:Q((re=W).field),direction:_(re.dir)};var re})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=(W=e.limit,i.N||Xi(W)?W:{value:W});var W,D,V;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(V=e.endAt).inclusive,values:V.position}),t}function g(i){let e=gc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){b(1===o);const re=t.from[0];re.allDescendants?u=re.collectionId:e=e.child(re.collectionId)}let d=[];t.where&&(d=f(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(re=>{return new ml(be((we=re).field),function(Ge){switch(Ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(we.direction));var we}));let D=null;t.limit&&(D=function(re){let we;return we="object"==typeof re?re.value:re,Xi(we)?null:we}(t.limit));let V=null;var re;t.startAt&&(V=new Ro((re=t.startAt).values||[],!!re.before));let W=null;return t.endAt&&(W=function(re){return new Ro(re.values||[],!re.before)}(t.endAt)),ic(e,u,m,d,D,"F",V,W)}function f(i){return i?void 0!==i.unaryFilter?[bt(i)]:void 0!==i.fieldFilter?[Qe(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>f(e)).reduce((e,t)=>e.concat(t)):y():[]}function _(i){return sd[i]}function k(i){return ah[i]}function Q(i){return{fieldPath:i.canonicalString()}}function be(i){return Hi.fromServerFormat(i.fieldPath)}function Qe(i){return yi.create(be(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return y()}}(i.fieldFilter.op),i.fieldFilter.value)}function bt(i){switch(i.unaryFilter.op){case"IS_NAN":const e=be(i.unaryFilter.field);return yi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=be(i.unaryFilter.field);return yi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=be(i.unaryFilter.field);return yi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=be(i.unaryFilter.field);return yi.create(u,"!=",{nullValue:"NULL_VALUE"});default:return y()}}function Zt(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fn(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Ut(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=so(e)),e=oi(i.get(t),e);return so(e)}function oi(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function so(i){return i+"\x01\x01"}function js(i){const e=i.length;if(b(e>=2),2===e)return b("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Zn.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const m=i.indexOf("\x01",d);switch((m<0||m>t)&&y(),i.charAt(m+1)){case"\x01":const D=i.substring(d,m);let V;0===u.length?V=D:(u+=D,V=u,u=""),o.push(V);break;case"\x10":u+=i.substring(d,m),u+="\0";break;case"\x11":u+=i.substring(d,m+1);break;default:y()}d=m+2}return new Zn(o)}const Pl=["userId","batchId"];function Pa(i,e){return[i,Ut(e)]}function yc(i,e,t){return[i,Ut(e),t]}const Ff={},ka=["prefixPath","collectionGroup","readTime","documentId"],vc=["prefixPath","collectionGroup","documentId"],ad=["collectionGroup","readTime","prefixPath","documentId"],ud=["canonicalId","targetId"],_c=["targetId","path"],Lf=["path","targetId"],ld=["collectionId","parent"],Vf=["indexId","uid"],My=["uid","sequenceNumber"],xy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Oy=["indexId","uid","orderedDocumentKey"],Ng=["userId","collectionPath","documentId"],Uf=["userId","collectionPath","largestBatchId"],Pg=["userId","collectionGroup","largestBatchId"],ph=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ry=[...ph,"documentOverlays"],kg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fg=[...kg,"indexConfiguration","indexState","indexEntries"],Bf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new et((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof et?t:et.resolve(t)}catch(t){return et.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):et.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):et.reject(t)}static resolve(e){return new et((t,o)=>{t(e)})}static reject(e){return new et((t,o)=>{o(e)})}static waitFor(e){return new et((t,o)=>{let u=0,d=0,m=!1;e.forEach(D=>{++u,D.next(()=>{++d,m&&d===u&&t()},V=>o(V))}),m=!0,d===u&&t()})}static or(e){let t=et.resolve(!1);for(const o of e)t=t.next(u=>u?et.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}}class cd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new $e,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new dd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=yh(o.target.error);this.At.reject(new dd(e,u))}}static open(e,t,o,u){try{return new cd(t,e.transaction(u,o))}catch(d){throw new dd(t,d)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ct("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lg(t)}}class aa{constructor(e,t,o){this.name=e,this.version=t,this.bt=o,12.2===aa.Vt((0,Pe.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ct("SimpleDb","Removing database:",e),Vu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Pe.hl)())return!1;if(aa.St())return!0;const e=(0,Pe.z$)(),t=aa.Vt(e),o=0<t&&t<10,u=aa.Dt(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,U.Z)(function*(){return t.db||(ct("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new dd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const D=m.target.error;u("VersionError"===D.name?new X($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new X($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new dd(e,D))},d.onupgradeneeded=m=>{ct("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.bt.kt(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{ct("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,U.Z)(function*(){const m="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.Nt(e);const V=cd.open(d.db,e,m?"readonly":"readwrite",o),W=u(V).next(re=>(V.Pt(),re)).catch(re=>(V.abort(re),et.reject(re))).toPromise();return W.catch(()=>{}),yield V.Rt,W}catch(V){const W="FirebaseError"!==V.name&&D<3;if(ct("SimpleDb","Transaction failed with error:",V.message,"Retrying:",W),d.close(),!W)return Promise.reject(V)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gh{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Vu(this.Ft.delete())}}class dd extends X{constructor(e,t){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Lu(i){return"IndexedDbTransactionError"===i.name}class Lg{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(ct("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(ct("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Vu(o)}add(e){return ct("SimpleDb","ADD",this.store.name,e,e),Vu(this.store.add(e))}get(e){return Vu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ct("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ct("SimpleDb","DELETE",this.store.name,e),Vu(this.store.delete(e))}count(){return ct("SimpleDb","COUNT",this.store.name),Vu(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.Kt(u,(m,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new et((d,m)=>{u.onerror=D=>{m(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new et((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}Qt(e,t){ct("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Kt(u,(d,m,D)=>D.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Kt(u,t)}zt(e){const t=this.cursor({});return new et((o,u)=>{t.onerror=d=>{const m=yh(d.target.error);u(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(D=>{D?m.continue():o()}):o()}})}Kt(e,t){const o=[];return new et((u,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const D=m.target.result;if(!D)return void u();const V=new gh(D),W=t(D.primaryKey,D.value,V);if(W instanceof et){const re=W.catch(we=>(V.done(),et.reject(we)));o.push(re)}V.isDone?u():null===V.Lt?D.continue():D.continue(V.Lt)}}).next(()=>et.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vu(i){return new et((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=yh(o.target.error);t(u)}})}let mh=!1;function yh(i){const e=aa.Vt((0,Pe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mh||(mh=!0,setTimeout(()=>{throw o},0)),o}}return i}class hd extends Fu{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Wi(i,e){const t=B(i);return aa.xt(t.Ht,e)}class vh{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&xg(d,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&uc(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&uc(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(Ft.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),An())}isEqual(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,(t,o)=>lc(t,o))&&eo(this.baseMutations,e.baseMutations,(t,o)=>lc(t,o))}}class fd{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){b(e.mutations.length===o.length);let u=Rg;const d=e.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new fd(e,t,o,u)}}class _h{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fa{constructor(e,t,o,u,d=Ft.min(),m=Ft.min(),D=Fn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=D}withSequenceNumber(e){return new Fa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ec{constructor(e){this.Jt=e}}function jf(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Eh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Pu(u=i.Jt,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:xl(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:kl(e.version)};else{if(!e.isUnknownDocument())return y();o.unknownDocument={path:t.path.toArray(),version:kl(e.version)}}var u,d;return o}function Eh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function kl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uu(i){const e=new gi(i.seconds,i.nanoseconds);return Ft.fromTimestamp(e)}function Bu(i,e){const t=(e.baseMutations||[]).map(d=>od(i.Jt,d));for(let d=0;d<e.mutations.length-1;++d){const m=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(m.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>od(i.Jt,d)),u=gi.fromMillis(e.localWriteTimeMs);return new vh(e.batchId,u,t,o)}function wc(i){const e=Uu(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Uu(i.lastLimboFreeSnapshotVersion):Ft.min();let o;var u;return void 0!==i.query.documents?(b(1===(u=i.query).documents.length),o=io(No(gc(u.documents[0])))):o=io(g(i.query)),new Fa(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Fn.fromBase64String(i.resumeToken))}function Py(i,e){const t=kl(e.snapshotVersion),o=kl(e.lastLimboFreeSnapshotVersion);let u;u=go(e.target)?hh(i.Jt,e.target):fh(i.Jt,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:es(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function wh(i){const e=g({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?oc(e,e.limit,"L"):e}function $f(i,e){return new _h(e.largestBatchId,od(i.Jt,e.overlayMutation))}function Hf(i,e){const t=e.path.lastSegment();return[i,Ut(e.path.popLast()),t]}class ky{getBundleMetadata(e,t){return Vg(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Uu(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Vg(e).put({bundleId:(o=t).id,createTime:kl(ts(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Jo(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:wh(u.bundledQuery),readTime:Uu(u.readTime)};var u})}saveNamedQuery(e,t){return Jo(e).put({name:(o=t).name,readTime:kl(ts(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Vg(i){return Wi(i,"bundles")}function Jo(i){return Wi(i,"namedQueries")}class Gf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Gf(e,t.uid||"")}getOverlay(e,t){return Ic(e).get(Hf(this.userId,t)).next(o=>o?$f(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((d,m)=>{const D=new _h(t,m);u.push(this.Xt(e,D))}),et.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(m=>u.add(Ut(m.getCollectionPath())));const d=[];return u.forEach(m=>{const D=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(Ic(e).Qt("collectionPathOverlayIndex",D))}),et.waitFor(d)}getOverlaysForCollection(e,t,o){const u=fc(),d=Ut(t),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Ic(e).qt("collectionPathOverlayIndex",m).next(D=>{for(const V of D){const W=$f(this.M,V);u.set(W.getKey(),W)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=fc();let m;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ic(e).Wt({index:"collectionGroupOverlayIndex",range:D},(V,W,re)=>{const we=$f(this.M,W);d.size()<u||we.largestBatchId===m?(d.set(we.getKey(),we),m=we.largestBatchId):re.done()}).next(()=>d)}Xt(e,t){return Ic(e).put(function(o,u,d){const[m,D,V]=Hf(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:V,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:ou(o.Jt,d.mutation)}}(this.M,this.userId,t))}}function Ic(i){return Wi(i,"documentOverlays")}class Fl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(si(e.integerValue));else if("doubleValue"in e){const o=si(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),So(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ao(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?qo(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):y()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),It.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Fy(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ug(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=Fy(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}Fl.fe=new Fl;class Ly{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Bg{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Vy{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class pd{constructor(){this.De=new Ly,this.Ce=new Bg(this.De),this.xe=new Vy(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ju{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new ju(this.indexId,this.documentKey,this.arrayValue,o)}}function En(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Wf(i.arrayValue,e.arrayValue),0!==t?t:(t=Wf(i.directionalValue,e.directionalValue),0!==t?t:It.comparator(i.documentKey,e.documentKey)))}function Wf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class jg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=ht(e);if(void 0!==t&&!this.Be(t))return!1;const o=xt(e);let u=0,d=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const m=o[u];if(!this.Le(this.Fe,m)||!this.Ue(this.Me[d++],m))return!1;++u}for(;u<o.length;++u){const m=o[u];if(d>=this.Me.length||!this.Ue(this.Me[d++],m))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class $g{constructor(){this.qe=new Dc}addToCollectionParentIndex(e,t){return this.qe.add(t),et.resolve()}getCollectionParents(e,t){return et.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return et.resolve()}deleteFieldIndex(e,t){return et.resolve()}getDocumentsMatchingTarget(e,t){return et.resolve(null)}getFieldIndex(e,t){return et.resolve(null)}getFieldIndexes(e,t){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}updateCollectionGroup(e,t,o){return et.resolve()}updateIndexEntries(e,t){return et.resolve()}}class Dc{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new Rr(Zn.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Rr(Zn.comparator)).toArray()}}const $s=new Uint8Array(0);class Hg{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Dc,this.Ge=new Na(o=>es(o),(o,u)=>Us(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const d={collectionId:o,parent:Ut(u)};return Gg(e).put(d)}return et.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[Ka(t),""],!1,!0);return Gg(e).qt(u).next(d=>{for(const m of d){if(m.collectionId!==t)break;o.push(js(m.parent))}return o})}addFieldIndex(e,t){const o=Xo(e),u={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=Xo(e),u=Cc(e),d=Ll(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Ll(e);let u=!0;const d=new Map;return et.forEach(this.Qe(t),m=>this.getFieldIndex(e,m).next(D=>{u&&(u=!!D),d.set(m,D)})).next(()=>{if(u){let m=An();const D=[];return et.forEach(d,(V,W)=>{var re;ct("IndexedDbIndexManager",`Using index ${re=V,`id=${re.indexId}|cg=${re.collectionGroup}|f=${re.fields.map(Vr=>`${Vr.fieldPath}:${Vr.kind}`).join(",")}`} to execute ${es(t)}`);const we=function(Vr,rs){const ui=ht(rs);if(void 0===ui)return null;for(const Si of fl(Vr,ui.fieldPath))switch(Si.op){case"array-contains-any":return Si.value.arrayValue.values||[];case"array-contains":return[Si.value]}return null}(W,V),Ge=function(Vr,rs){const ui=new Map;for(const Si of xt(rs))for(const zs of fl(Vr,Si.fieldPath))switch(zs.op){case"==":case"in":ui.set(Si.fieldPath.canonicalString(),zs.value);break;case"not-in":case"!=":return ui.set(Si.fieldPath.canonicalString(),zs.value),Array.from(ui.values())}return null}(W,V),st=function(Vr,rs){const ui=[];let Si=!0;for(const zs of xt(rs)){const sl=0===zs.kind?Qc(Vr,zs.fieldPath,Vr.startAt):pl(Vr,zs.fieldPath,Vr.startAt);if(!sl.value)return null;ui.push(sl.value),Si&&(Si=sl.inclusive)}return new Ro(ui,Si)}(W,V),at=function(Vr,rs){const ui=[];let Si=!0;for(const zs of xt(rs)){const sl=0===zs.kind?pl(Vr,zs.fieldPath,Vr.endAt):Qc(Vr,zs.fieldPath,Vr.endAt);if(!sl.value)return null;ui.push(sl.value),Si&&(Si=sl.inclusive)}return new Ro(ui,Si)}(W,V),Gt=this.je(V,W,st),Mn=this.je(V,W,at),Xr=this.We(V,W,Ge),ai=this.ze(V.indexId,we,Gt,!!st&&st.inclusive,Mn,!!at&&at.inclusive,Xr);return et.forEach(ai,Vr=>o.Gt(Vr,t.limit).next(rs=>{rs.forEach(ui=>{const Si=It.fromSegments(ui.documentKey);m.has(Si)||(m=m.add(Si),D.push(Si))})}))}).next(()=>D)}return et.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,o,u,d,m,D){const V=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=d?d.length:1),W=V/(null!=t?t.length:1),re=[];for(let we=0;we<V;++we){const Ge=t?this.He(t[we/W]):$s,st=o?this.Je(e,Ge,o[we%W],u):this.Ye(e),at=d?this.Xe(e,Ge,d[we%W],m):this.Ye(e+1);re.push(...this.createRange(st,at,D.map(Gt=>this.Je(e,Ge,Gt,!0))))}return re}Je(e,t,o,u){const d=new ju(e,It.empty(),t,o);return u?d:d.ke()}Xe(e,t,o,u){const d=new ju(e,It.empty(),t,o);return u?d.ke():d}Ye(e){return new ju(e,It.empty(),$s,$s)}getFieldIndex(e,t){const o=new jg(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{const m=d.filter(D=>o.$e(D));return m.sort((D,V)=>V.fields.length-D.fields.length),m.length>0?m[0]:null})}Ze(e,t){const o=new pd;for(const u of xt(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const m=o.Ne(u.kind);Fl.fe.Zt(d,m)}return o.Se()}He(e){const t=new pd;return Fl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new pd;return Fl.fe.Zt(Oo(this.databaseId,t),o.Ne(function(u){const d=xt(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.Se()}We(e,t,o){if(null===o)return[];let u=[];u.push(new pd);let d=0;for(const m of xt(e)){const D=o[d++];for(const V of u)if(this.en(t,m.fieldPath)&&Za(D))u=this.nn(u,m,D);else{const W=V.Ne(m.kind);Fl.fe.Zt(D,W)}}return this.sn(u)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const u=[...e],d=[];for(const m of o.arrayValue.values||[])for(const D of u){const V=new pd;V.seed(D.Se()),Fl.fe.Zt(m,V.Ne(t.kind)),d.push(V)}return d}en(e,t){return!!e.filters.find(o=>o instanceof yi&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Xo(e),u=Cc(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(d=>{const m=[];return et.forEach(d,D=>u.get([D.indexId,this.uid]).next(V=>{m.push(function(W,re){const we=re?new hn(re.sequenceNumber,new Sr(Uu(re.readTime),new It(js(re.documentKey)),re.largestBatchId)):hn.empty(),Ge=W.fields.map(([st,at])=>new Kt(Hi.fromServerFormat(st),at));return new je(W.indexId,W.collectionGroup,Ge,we)}(D,V))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Cn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Xo(e),d=Cc(e);return this.rn(e).next(m=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>et.forEach(D,V=>{return d.put({indexId:V.indexId,uid:this.user.uid||"",sequenceNumber:m,readTime:kl((Ge=o).readTime),documentKey:Ut(Ge.documentKey.path),largestBatchId:Ge.largestBatchId});var Ge})))}updateIndexEntries(e,t){const o=new Map;return et.forEach(t,(u,d)=>{const m=o.get(u.collectionGroup);return(m?et.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),et.forEach(D,V=>this.on(e,u,V).next(W=>{const re=this.un(d,V);return W.isEqual(re)?et.resolve():this.an(e,d,V,W,re)}))))})}cn(e,t,o,u){return Ll(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,u){return Ll(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const u=Ll(e);let d=new Rr(En);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(m,D)=>{d=d.add(new ju(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}un(e,t){let o=new Rr(En);const u=this.Ze(t,e);if(null==u)return o;const d=ht(t);if(null!=d){const m=e.data.field(d.fieldPath);if(Za(m))for(const D of m.arrayValue.values||[])o=o.add(new ju(t.indexId,e.key,this.He(D),u))}else o=o.add(new ju(t.indexId,e.key,$s,u));return o}an(e,t,o,u,d){ct("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(D,V,W,re,we){const Ge=D.getIterator(),st=V.getIterator();let at=Ru(Ge),Gt=Ru(st);for(;at||Gt;){let Mn=!1,Xr=!1;if(at&&Gt){const ai=W(at,Gt);ai<0?Xr=!0:ai>0&&(Mn=!0)}else null!=at?Xr=!0:Mn=!0;Mn?(re(Gt),Gt=Ru(st)):Xr?(we(at),at=Ru(Ge)):(at=Ru(Ge),Gt=Ru(st))}}(u,d,En,D=>{m.push(this.cn(e,t,o,D))},D=>{m.push(this.hn(e,t,o,D))}),et.waitFor(m)}rn(e){let t=1;return Cc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((m,D)=>En(m,D)).filter((m,D,V)=>!D||0!==En(m,V[D-1]));const u=[];u.push(e);for(const m of o){const D=En(m,e),V=En(m,t);if(0===D)u[0]=e.ke();else if(D>0&&V<0)u.push(m),u.push(m.ke());else if(V>0)break}u.push(t);const d=[];for(let m=0;m<u.length;m+=2)d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,$s,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,$s,[]]));return d}}function Gg(i){return Wi(i,"collectionParents")}function Ll(i){return Wi(i,"indexEntries")}function Xo(i){return Wi(i,"indexConfiguration")}function Cc(i){return Wi(i,"indexState")}const zf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hs{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Hs(e,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Uy(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],m=IDBKeyRange.only(t.batchId);let D=0;const V=o.Wt({range:m},(re,we,Ge)=>(D++,Ge.delete()));d.push(V.next(()=>{b(1===D)}));const W=[];for(const re of t.mutations){const we=yc(e,re.key.path,t.batchId);d.push(u.delete(we)),W.push(re.key)}return et.waitFor(d).next(()=>W)}function gd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw y();e=i.noDocument}return JSON.stringify(e).length}Hs.DEFAULT_COLLECTION_PERCENTILE=10,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hs.DEFAULT=new Hs(41943040,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hs.DISABLED=new Hs(-1,0,0);class Wg{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.ln={}}static Yt(e,t,o,u){b(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Wg(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ua(e).Wt({index:"userMutationsIndex",range:o},(u,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=$u(e),m=ua(e);return m.add({}).next(D=>{b("number"==typeof D);const V=new vh(D,t,o,u),W=function(Ge,st,at){const Gt=at.baseMutations.map(Xr=>ou(Ge.Jt,Xr)),Mn=at.mutations.map(Xr=>ou(Ge.Jt,Xr));return{userId:st,batchId:at.batchId,localWriteTimeMs:at.localWriteTime.toMillis(),baseMutations:Gt,mutations:Mn}}(this.M,this.userId,V),re=[];let we=new Rr((Ge,st)=>Cn(Ge.canonicalString(),st.canonicalString()));for(const Ge of u){const st=yc(this.userId,Ge.key.path,D);we=we.add(Ge.key.path.popLast()),re.push(m.put(W)),re.push(d.put(st,Ff))}return we.forEach(Ge=>{re.push(this.indexManager.addToCollectionParentIndex(e,Ge))}),e.addOnCommittedListener(()=>{this.ln[D]=V.keys()}),et.waitFor(re).next(()=>V)})}lookupMutationBatch(e,t){return ua(e).get(t).next(o=>o?(b(o.userId===this.userId),Bu(this.M,o)):null)}fn(e,t){return this.ln[t]?et.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.ln[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return ua(e).Wt({index:"userMutationsIndex",range:u},(m,D,V)=>{D.userId===this.userId&&(b(D.batchId>=o),d=Bu(this.M,D)),V.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ua(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ua(e).qt("userMutationsIndex",t).next(o=>o.map(u=>Bu(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Pa(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return $u(e).Wt({range:u},(m,D,V)=>{const[W,re,we]=m,Ge=js(re);if(W===this.userId&&t.path.isEqual(Ge))return ua(e).get(we).next(st=>{if(!st)throw y();b(st.userId===this.userId),d.push(Bu(this.M,st))});V.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Rr(Cn);const u=[];return t.forEach(d=>{const m=Pa(this.userId,d.path),D=IDBKeyRange.lowerBound(m),V=$u(e).Wt({range:D},(W,re,we)=>{const[Ge,st,at]=W,Gt=js(st);Ge===this.userId&&d.path.isEqual(Gt)?o=o.add(at):we.done()});u.push(V)}),et.waitFor(u).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=Pa(this.userId,o),m=IDBKeyRange.lowerBound(d);let D=new Rr(Cn);return $u(e).Wt({range:m},(V,W,re)=>{const[we,Ge,st]=V,at=js(Ge);we===this.userId&&o.isPrefixOf(at)?at.length===u&&(D=D.add(st)):re.done()}).next(()=>this.dn(e,D))}dn(e,t){const o=[],u=[];return t.forEach(d=>{u.push(ua(e).get(d).next(m=>{if(null===m)throw y();b(m.userId===this.userId),o.push(Bu(this.M,m))}))}),et.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Uy(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),et.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return et.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return $u(e).Wt({range:o},(d,m,D)=>{if(d[0]===this.userId){const V=js(d[1]);u.push(V)}else D.done()}).next(()=>{b(0===u.length)})})}containsKey(e,t){return md(e,this.userId,t)}wn(e){return Ih(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function md(i,e,t){const o=Pa(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return $u(i).Wt({range:d,jt:!0},(D,V,W)=>{const[re,we,Ge]=D;re===e&&we===u&&(m=!0),W.done()}).next(()=>m)}function ua(i){return Wi(i,"mutations")}function $u(i){return Wi(i,"documentMutations")}function Ih(i){return Wi(i,"mutationQueues")}class au{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new au(0)}static yn(){return new au(-1)}}class j_{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new au(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Ft.fromTimestamp(new gi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.In(e,u)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bc(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(b(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return bc(e).Wt((m,D)=>{const V=wc(D);V.sequenceNumber<=t&&null===o.get(V.targetId)&&(u++,d.push(this.removeTargetData(e,V)))}).next(()=>et.waitFor(d)).next(()=>u)}forEachTarget(e,t){return bc(e).Wt((o,u)=>{const d=wc(u);t(d)})}pn(e){return zg(e).get("targetGlobalKey").next(t=>(b(null!==t),t))}In(e,t){return zg(e).put("targetGlobalKey",t)}Tn(e,t){return bc(e).put(Py(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=es(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return bc(e).Wt({range:u,index:"queryTargetsIndex"},(m,D,V)=>{const W=wc(D);Us(t,W.target)&&(d=W,V.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=Hu(e);return t.forEach(m=>{const D=Ut(m.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,m))}),et.waitFor(u)}removeMatchingKeys(e,t,o){const u=Hu(e);return et.forEach(t,d=>{const m=Ut(d.path);return et.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=Hu(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Hu(e);let d=An();return u.Wt({range:o,jt:!0},(m,D,V)=>{const W=js(m[1]),re=new It(W);d=d.add(re)}).next(()=>d)}containsKey(e,t){const o=Ut(t.path),u=IDBKeyRange.bound([o],[Ka(o)],!1,!0);let d=0;return Hu(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([m,D],V,W)=>{0!==m&&(d++,W.done())}).next(()=>d>0)}Et(e,t){return bc(e).get(t).next(o=>o?wc(o):null)}}function bc(i){return Wi(i,"targets")}function zg(i){return Wi(i,"targetGlobal")}function Hu(i){return Wi(i,"targetDocuments")}function Vl(i){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,U.Z)(function*(i){if(i.code!==$.FAILED_PRECONDITION||i.message!==Bf)throw i;ct("LocalStore","Unexpectedly lost primary lease")}),Dh.apply(this,arguments)}function By([i,e],[t,o]){const u=Cn(i,t);return 0===u?Cn(e,o):u}class jy{constructor(e){this.An=e,this.buffer=new Rr(By),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();By(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $_{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;ct("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,U.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){Lu(u)?ct("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Vl(u)}yield t.Sn(e)}))}}class Kg{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return et.resolve(Fr.A);const o=new jy(t);return this.Dn.forEachTarget(e,u=>o.bn(u.sequenceNumber)).next(()=>this.Dn.xn(e,u=>o.bn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(zf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zf):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,u,d,m,D,V,W;const re=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(we=>(we>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${we}`),u=this.params.maximumSequenceNumbersToCollect):u=we,m=Date.now(),this.nthSequenceNumber(e,u))).next(we=>(o=we,D=Date.now(),this.removeTargets(e,o,t))).next(we=>(d=we,V=Date.now(),this.removeOrphanedDocuments(e,o))).next(we=>(W=Date.now(),ho()<=Oe.in.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-re}ms\n\tDetermined least recently used ${u} in `+(D-m)+`ms\n\tRemoved ${d} targets in `+(V-D)+`ms\n\tRemoved ${we} documents in `+(W-V)+`ms\nTotal Duration: ${W-re}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:we})))}}class qg{constructor(e,t){this.db=e,this.garbageCollector=new Kg(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,u)=>t(u))}addReference(e,t,o){return Ch(e,o)}removeReference(e,t,o){return Ch(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Ch(e,t)}On(e,t){return function(o,u){let d=!1;return Ih(o).zt(m=>md(o,m,u).next(D=>(D&&(d=!0),et.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Mn(e,(m,D)=>{if(D<=t){const V=this.On(e,m).next(W=>{if(!W)return d++,o.getEntry(e,m).next(()=>(o.removeEntry(m,Ft.min()),Hu(e).delete([0,Ut(m.path)])))});u.push(V)}}).next(()=>et.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Ch(e,t)}Mn(e,t){const o=Hu(e);let u,d=Fr.A;return o.Wt({index:"documentTargetsIndex"},([m,D],{path:V,sequenceNumber:W})=>{0===m?(d!==Fr.A&&t(new It(js(u)),d),d=W,u=V):d=Fr.A}).next(()=>{d!==Fr.A&&t(new It(js(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ch(i,e){return Hu(i).put((o=i.currentSequenceNumber,{targetId:0,path:Ut(e.path),sequenceNumber:o}));var o}class bh{constructor(){this.changes=new Na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ce.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?et.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class H_{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Tc(e).put(o)}removeEntry(e,t,o){return Tc(e).delete(function(u,d){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Eh(d),m[m.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=Ce.newInvalidDocument(t);return Tc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Th(t))},(u,d)=>{o=this.$n(t,d)}).next(()=>o)}Bn(e,t){let o={size:0,document:Ce.newInvalidDocument(t)};return Tc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Th(t))},(u,d)=>{o={document:this.$n(t,d),size:gd(d)}}).next(()=>o)}getEntries(e,t){let o=vo();return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);o=o.insert(u,m)}).next(()=>o)}Un(e,t){let o=vo(),u=new Bn(It.comparator);return this.Ln(e,t,(d,m)=>{const D=this.$n(d,m);o=o.insert(d,D),u=u.insert(d,gd(m))}).next(()=>({documents:o,qn:u}))}Ln(e,t,o){if(t.isEmpty())return et.resolve();let u=new Rr(Gy);t.forEach(V=>u=u.add(V));const d=IDBKeyRange.bound(Th(u.first()),Th(u.last())),m=u.getIterator();let D=m.getNext();return Tc(e).Wt({index:"documentKeyIndex",range:d},(V,W,re)=>{const we=It.fromSegments([...W.prefixPath,W.collectionGroup,W.documentId]);for(;D&&Gy(D,we)<0;)o(D,null),D=m.getNext();D&&D.isEqual(we)&&(o(D,W),D=m.hasNext()?m.getNext():null),D?re.Ut(Th(D)):re.done()}).next(()=>{for(;D;)o(D,null),D=m.hasNext()?m.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),Eh(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tc(e).qt(IDBKeyRange.bound(u,d,!0)).next(m=>{let D=vo();for(const V of m){const W=this.$n(It.fromSegments(V.prefixPath.concat(V.collectionGroup,V.documentId)),V);D=D.insert(W.key,W)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=vo();const m=Hy(t,o),D=Hy(t,Sr.max());return Tc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,D,!0)},(V,W,re)=>{const we=this.$n(It.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);d=d.insert(we.key,we),d.size===u&&re.done()}).next(()=>d)}newChangeBuffer(e){return new G_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $y(e).get("remoteDocumentGlobalKey").next(t=>(b(!!t),t))}Fn(e,t){return $y(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function Ny(i,e){let t;if(e.document)t=mc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=It.fromSegments(e.noDocument.path),u=Uu(e.noDocument.readTime);t=Ce.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return y();{const o=It.fromSegments(e.unknownDocument.path),u=Uu(e.unknownDocument.version);t=Ce.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new gi(o[0],o[1]);return Ft.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(Ft.min()))return o}return Ce.newInvalidDocument(e)}}class G_ extends bh{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Na(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new Rr((d,m)=>Cn(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const D=this.Gn.get(d);if(t.push(this.Kn.removeEntry(e,d,D.readTime)),m.isValidDocument()){const V=jf(this.Kn.M,m);u=u.add(d.path.popLast()),o+=gd(V)-D.size,t.push(this.Kn.addEntry(e,d,V))}else if(o-=D.size,this.trackRemovals){const V=jf(this.Kn.M,m.convertToNoDocument(Ft.min()));t.push(this.Kn.addEntry(e,d,V))}}),u.forEach(d=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Kn.updateMetadata(e,o)),et.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:u})=>(u.forEach((d,m)=>{this.Gn.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function $y(i){return Wi(i,"remoteDocumentGlobal")}function Tc(i){return Wi(i,"remoteDocumentsV14")}function Th(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Hy(i,e){const t=e.documentKey.path.toArray();return[i,Eh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gy(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=Cn(t[d],o[d]),u)return u;return u=Cn(t.length,o.length),u||(u=Cn(t[t.length-2],o[o.length-2]),u||Cn(t[t.length-1],o[o.length-1]))}class W_{constructor(e){this.M=e}kt(e,t,o,u){const d=new cd("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pl,{unique:!0}),D.createObjectStore("documentMutations"),Wy(e),function(D){D.createObjectStore("remoteDocuments")}(e));let m=et.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),Wy(e)),m=m.next(()=>function(D){const V=D.store("targetGlobal"),W={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return V.put("targetGlobalKey",W)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(D,V){return V.store("mutations").qt().next(W=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pl,{unique:!0});const re=V.store("mutations"),we=W.map(Ge=>re.put(Ge));return et.waitFor(we)})}(e,d))),m=m.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(m=m.next(()=>this.Qn(d))),o<6&&u>=6&&(m=m.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.jn(d)))),o<7&&u>=7&&(m=m.next(()=>this.Wn(d))),o<8&&u>=8&&(m=m.next(()=>this.zn(e,d))),o<9&&u>=9&&(m=m.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(m=m.next(()=>this.Hn(d))),o<11&&u>=11&&(m=m.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(m=m.next(()=>{!function(D){const V=D.createObjectStore("documentOverlays",{keyPath:Ng});V.createIndex("collectionPathOverlayIndex",Uf,{unique:!1}),V.createIndex("collectionGroupOverlayIndex",Pg,{unique:!1})}(e)})),o<13&&u>=13&&(m=m.next(()=>function(D){const V=D.createObjectStore("remoteDocumentsV14",{keyPath:ka});V.createIndex("documentKeyIndex",vc),V.createIndex("collectionGroupIndex",ad)}(e)).next(()=>this.Jn(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>{!function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Vf}).createIndex("sequenceNumberIndex",My,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:xy}).createIndex("documentKeyIndex",Oy,{unique:!1})}(e)})),m}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=gd(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>et.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",m).next(D=>et.forEach(D,V=>{b(V.userId===d.userId);const W=Bu(this.M,V);return Uy(e,d.userId,W).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Wt((m,D)=>{const V=new Zn(m),W=[0,Ut(V)];d.push(t.get(W).next(re=>re?et.resolve():t.put({targetId:0,path:Ut(V),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>et.waitFor(d))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:ld});const o=t.store("collectionParents"),u=new Dc,d=m=>{if(u.add(m)){const D=m.lastSegment(),V=m.popLast();return o.put({collectionId:D,parent:Ut(V)})}};return t.store("remoteDocuments").Wt({jt:!0},(m,D)=>{const V=new Zn(m);return d(V.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([m,D,V],W)=>{const re=js(D);return d(re.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,u)=>{const d=wc(u),m=Py(this.M,d);return t.put(m)})}Jn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((d,m)=>{const D=t.store("remoteDocumentsV14"),V=(W=m,W.document?new It(Zn.fromString(W.document.name).popFirst(5)):W.noDocument?It.fromSegments(W.noDocument.path):W.unknownDocument?It.fromSegments(W.unknownDocument.path):y()).path.toArray();var W;const re={prefixPath:V.slice(0,V.length-2),collectionGroup:V[V.length-2],documentId:V[V.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};u.push(D.put(re))}).next(()=>et.waitFor(u))}}function Wy(i){i.createObjectStore("targetDocuments",{keyPath:_c}).createIndex("documentTargetsIndex",Lf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ud,{unique:!0}),i.createObjectStore("targetGlobal")}const Zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class La{constructor(e,t,o,u,d,m,D,V,W,re,we=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=d,this.window=m,this.document=D,this.Xn=W,this.Zn=re,this.ts=we,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=Ge=>Promise.resolve(),!La.vt())throw new X($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qg(this,u),this.hs=t+"main",this.M=new Ec(V),this.ls=new aa(this.hs,this.ts,new W_(this.M)),this.fs=new j_(this.referenceDelegate,this.M),this.ds=new H_(this.M),this._s=new ky,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===re&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X($.FAILED_PRECONDITION,Zg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Fr(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,U.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,U.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,U.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ah(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Lu(e))return ct("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ct("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ul(e).get("owner").next(t=>et.resolve(this.bs(t)))}Vs(e){return Ah(e).delete(this.clientId)}vs(){var e=this;return(0,U.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Wi(o,"clientMetadata");return u.qt().next(d=>{const m=e.Ds(d,18e5),D=d.filter(V=>-1===m.indexOf(V));return et.forEach(D,V=>u.delete(V.clientId)).next(()=>D)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?et.resolve(!0):Ul(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new X($.FAILED_PRECONDITION,Zg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ah(e).qt().next(o=>void 0===this.Ds(o,5e3).find(u=>{if(this.clientId!==u.clientId){const m=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||m&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ct("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,U.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new hd(t,Fr.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Ah(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Wg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Hg(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Gf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){ct("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=14===(m=this.ts)?Fg:13===m?kg:12===m?Ry:11===m?ph:void y();var m;let D;return this.ls.runTransaction(e,u,d,V=>(D=new hd(V,this.es?this.es.next():Fr.A),"readwrite-primary"===t?this.Es(D).next(W=>!!W||this.As(D)).next(W=>{if(!W)throw er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new X($.FAILED_PRECONDITION,Bf);return o(D)}).next(W=>this.Ps(D).next(()=>W)):this.$s(D).next(()=>o(D)))).then(V=>(D.raiseOnCommittedEvent(),V))}$s(e){return Ul(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new X($.FAILED_PRECONDITION,Zg)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ul(e).put("owner",t)}static vt(){return aa.vt()}Rs(e){const t=Ul(e);return t.get("owner").next(o=>this.bs(o)?(ct("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):et.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(er(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Pe.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ct("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return er("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){er("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ul(i){return Wi(i,"owner")}function Ah(i){return Wi(i,"clientMetadata")}function Sh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Kf{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(u=>{for(const d of o)d.applyToLocalView(u);return u})}qs(e,t){e.forEach((o,u)=>{for(const d of t)d.applyToLocalView(u)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return It.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.js(e,t.path):yl(t)?this.Ws(e,t,o):this.zs(e,t,o);var u}js(e,t){return this.Ls(e,new It(t)).next(o=>{let u=rd();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}Ws(e,t,o){const u=t.collectionGroup;let d=rd();return this.indexManager.getCollectionParents(e,u).next(m=>et.forEach(m,D=>{const V=(W=t,re=D.child(u),new mo(re,null,W.explicitOrderBy.slice(),W.filters.slice(),W.limit,W.limitType,W.startAt,W.endAt));var W,re;return this.zs(e,V,o).next(W=>{W.forEach((re,we)=>{d=d.insert(re,we)})})}).next(()=>d))}zs(e,t,o){let u;return this.ds.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(d=>{for(const m of d)for(const D of m.mutations){const V=D.key;let W=u.get(V);null==W&&(W=Ce.newInvalidDocument(V),u=u.insert(V,W)),uc(D,W,m.localWriteTime),W.isFoundDocument()||(u=u.remove(V))}}).next(()=>(u.forEach((d,m)=>{Xc(t,m)||(u=u.remove(d))}),u))}}class Mh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=u}static Ys(e,t){let o=An(),u=An();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Mh(e,t.fromCache,o,u)}}class xh{Xs(e){this.Zs=e}Qs(e,t,o,u){return 0===(d=t).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||o.isEqual(Ft.min())?this.ti(e,t):this.Zs.Ks(e,u).next(d=>{const m=this.ei(t,d);return(sc(t)||bu(t))&&this.ni(t.limitType,m,u,o)?this.ti(e,t):(ho()<=Oe.in.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Jc(t)),this.Zs.Qs(e,t,Wn(o,-1)).next(D=>(m.forEach(V=>{D=D.insert(V.key,V)}),D)))});var d}ei(e,t){let o=new Rr(Xd(e));return t.forEach((u,d)=>{Xc(e,d)&&(o=o.add(d))}),o}ni(e,t,o,u){if(o.size!==t.size)return!0;const d="F"===e?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}ti(e,t){return ho()<=Oe.in.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",Jc(t)),this.Zs.Qs(e,t,Sr.min())}}class zy{constructor(e,t,o,u){this.persistence=e,this.si=t,this.M=u,this.ii=new Bn(Cn),this.ri=new Na(d=>es(d),Us),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(o)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Kf(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function uu(i,e,t,o){return new zy(i,e,t,o)}function qf(i,e){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,U.Z)(function*(i,e){const t=B(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.Bs.getAllMutationBatches(o).next(d=>(u=d,t.ai(e),t.Bs.getAllMutationBatches(o))).next(d=>{const m=[],D=[];let V=An();for(const W of u){m.push(W.batchId);for(const re of W.mutations)V=V.add(re.key)}for(const W of d){D.push(W.batchId);for(const re of W.mutations)V=V.add(re.key)}return t.ci.Ks(o,V).next(W=>({hi:W,removedBatchIds:m,addedBatchIds:D}))})})}),Zf.apply(this,arguments)}function Yf(i,e){const t=B(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.ui.newChangeBuffer({trackRemovals:!0});return function(m,D,V,W){const re=V.batch,we=re.keys();let Ge=et.resolve();return we.forEach(st=>{Ge=Ge.next(()=>W.getEntry(D,st)).next(at=>{const Gt=V.docVersions.get(st);b(null!==Gt),at.version.compareTo(Gt)<0&&(re.applyToRemoteDocument(at,V),at.isValidDocument()&&(at.setReadTime(V.commitVersion),W.addEntry(at)))})}),Ge.next(()=>m.Bs.removeMutationBatch(D,re))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.ci.Ks(o,u))})}function Yg(i){const e=B(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Qg(i,e){const t=B(i),o=e.snapshotVersion;let u=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.ui.newChangeBuffer({trackRemovals:!0});u=t.ii;const D=[];e.targetChanges.forEach((W,re)=>{const we=u.get(re);if(!we)return;D.push(t.fs.removeMatchingKeys(d,W.removedDocuments,re).next(()=>t.fs.addMatchingKeys(d,W.addedDocuments,re)));let Ge=we.withSequenceNumber(d.currentSequenceNumber);var st,at,Gt;e.targetMismatches.has(re)?Ge=Ge.withResumeToken(Fn.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):W.resumeToken.approximateByteSize()>0&&(Ge=Ge.withResumeToken(W.resumeToken,o)),u=u.insert(re,Ge),at=Ge,Gt=W,(0===(st=we).resumeToken.approximateByteSize()||at.snapshotVersion.toMicroseconds()-st.snapshotVersion.toMicroseconds()>=3e8||Gt.addedDocuments.size+Gt.modifiedDocuments.size+Gt.removedDocuments.size>0)&&D.push(t.fs.updateTargetData(d,Ge))});let V=vo();if(e.documentUpdates.forEach(W=>{e.resolvedLimboDocuments.has(W)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,W))}),D.push(Jg(d,m,e.documentUpdates).next(W=>{V=W})),!o.isEqual(Ft.min())){const W=t.fs.getLastRemoteSnapshotVersion(d).next(re=>t.fs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(W)}return et.waitFor(D).next(()=>m.apply(d)).next(()=>t.ci.Gs(d,V)).next(()=>V)}).then(d=>(t.ii=u,d))}function Jg(i,e,t){let o=An();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let d=vo();return t.forEach((m,D)=>{const V=u.get(m);D.isNoDocument()&&D.version.isEqual(Ft.min())?(e.removeEntry(m,D.readTime),d=d.insert(m,D)):!V.isValidDocument()||D.version.compareTo(V.version)>0||0===D.version.compareTo(V.version)&&V.hasPendingWrites?(e.addEntry(D),d=d.insert(m,D)):ct("LocalStore","Ignoring outdated watch update for ",m,". Current version:",V.version," Watch version:",D.version)}),d})}function Ky(i,e){const t=B(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function Va(i,e){const t=B(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.fs.getTargetData(o,e).next(d=>d?(u=d,et.resolve(u)):t.fs.allocateTargetId(o).next(m=>(u=new Fa(e,m,0,o.currentSequenceNumber),t.fs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.ii.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.ii=t.ii.insert(o.targetId,o),t.ri.set(e,o.targetId)),o})}function la(i,e,t){return yd.apply(this,arguments)}function yd(){return yd=(0,U.Z)(function*(i,e,t){const o=B(i),u=o.ii.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!Lu(m))throw m;ct("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}o.ii=o.ii.remove(e),o.ri.delete(u.target)}),yd.apply(this,arguments)}function lu(i,e,t){const o=B(i);let u=Ft.min(),d=An();return o.persistence.runTransaction("Execute query","readonly",m=>function(D,V,W){const re=B(D),we=re.ri.get(W);return void 0!==we?et.resolve(re.ii.get(we)):re.fs.getTargetData(V,W)}(o,m,io(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(m,D.targetId).next(V=>{d=V})}).next(()=>o.si.Qs(m,e,t?u:Ft.min(),t?d:An())).next(D=>(Xg(o,ac(e),D),{documents:D,li:d})))}function Ac(i,e){const t=B(i),o=B(t.fs),u=t.ii.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.Et(d,e).next(m=>m?m.target:null))}function Bl(i,e){const t=B(i),o=t.oi.get(e)||Ft.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.ui.getAllFromCollectionGroup(u,e,Wn(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Xg(t,e,u),u))}function Xg(i,e,t){let o=Ft.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.oi.set(e,o)}function Oh(){return Oh=(0,U.Z)(function*(i,e,t,o){const u=B(i);let d=An(),m=vo();for(const W of t){const re=e.fi(W.metadata.name);W.document&&(d=d.add(re));const we=e.di(W);we.setReadTime(e._i(W.metadata.readTime)),m=m.insert(re,we)}const D=u.ui.newChangeBuffer({trackRemovals:!0}),V=yield Va(u,(W=o,io(No(Zn.fromString(`__bundle__/docs/${W}`)))));var W;return u.persistence.runTransaction("Apply bundle documents","readwrite",W=>Jg(W,D,m).next(re=>(D.apply(W),re)).next(re=>u.fs.removeMatchingKeysForTargetId(W,V.targetId).next(()=>u.fs.addMatchingKeys(W,d,V.targetId)).next(()=>u.ci.Gs(W,re)).next(()=>re)))}),Oh.apply(this,arguments)}function Qf(i,e){return vd.apply(this,arguments)}function vd(){return vd=(0,U.Z)(function*(i,e,t=An()){const o=yield Va(i,io(wh(e.bundledQuery))),u=B(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=ts(e.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u._s.saveNamedQuery(d,e);const D=o.withResumeToken(Fn.EMPTY_BYTE_STRING,m);return u.ii=u.ii.insert(D.targetId,D),u.fs.updateTargetData(d,D).next(()=>u.fs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.fs.addMatchingKeys(d,t,o.targetId)).next(()=>u._s.saveNamedQuery(d,e))})}),vd.apply(this,arguments)}class tm{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return et.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var o;return this.wi.set(t.id,{id:(o=t).id,version:o.version,createTime:ts(o.createTime)}),et.resolve()}getNamedQuery(e,t){return et.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(o=t).name,query:wh(o.bundledQuery),readTime:ts(o.readTime)}),et.resolve();var o}}class Rh{constructor(){this.overlays=new Bn(It.comparator),this.gi=new Map}getOverlay(e,t){return et.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.Xt(e,t,d)}),et.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.gi.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.gi.delete(o)),et.resolve()}getOverlaysForCollection(e,t,o){const u=fc(),d=t.length+1,m=new It(t.child("")),D=this.overlays.getIteratorFrom(m);for(;D.hasNext();){const V=D.getNext().value,W=V.getKey();if(!t.isPrefixOf(W.path))break;W.path.length===d&&V.largestBatchId>o&&u.set(V.getKey(),V)}return et.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Bn((W,re)=>W-re);const m=this.overlays.getIterator();for(;m.hasNext();){const W=m.getNext().value;if(W.getKey().getCollectionGroup()===t&&W.largestBatchId>o){let re=d.get(W.largestBatchId);null===re&&(re=fc(),d=d.insert(W.largestBatchId,re)),re.set(W.getKey(),W)}}const D=fc(),V=d.getIterator();for(;V.hasNext()&&(V.getNext().value.forEach((W,re)=>D.set(W,re)),!(D.size()>=u)););return et.resolve(D)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const m=this.gi.get(u.largestBatchId).delete(o.key);this.gi.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new _h(t,o));let d=this.gi.get(t);void 0===d&&(d=An(),this.gi.set(t,d)),this.gi.set(t,d.add(o.key))}}class Jf{constructor(){this.yi=new Rr(hs.pi),this.Ii=new Rr(hs.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const o=new hs(e,t);this.yi=this.yi.add(o),this.Ii=this.Ii.add(o)}Ei(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ai(new hs(e,t))}Ri(e,t){e.forEach(o=>this.removeReference(o,t))}Pi(e){const t=new It(new Zn([])),o=new hs(t,e),u=new hs(t,e+1),d=[];return this.Ii.forEachInRange([o,u],m=>{this.Ai(m),d.push(m.key)}),d}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new It(new Zn([])),o=new hs(t,e),u=new hs(t,e+1);let d=An();return this.Ii.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new hs(e,0),o=this.yi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class hs{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return It.comparator(e.key,t.key)||Cn(e.vi,t.vi)}static Ti(e,t){return Cn(e.vi,t.vi)||It.comparator(e.key,t.key)}}class z_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Rr(hs.pi)}checkEmpty(e){return et.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,u){const d=this.Si;this.Si++;const m=new vh(d,t,o,u);this.Bs.push(m);for(const D of u)this.Di=this.Di.add(new hs(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return et.resolve(m)}lookupMutationBatch(e,t){return et.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.xi(t+1),d=u<0?0:u;return et.resolve(this.Bs.length>d?this.Bs[d]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return et.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new hs(t,0),u=new hs(t,Number.POSITIVE_INFINITY),d=[];return this.Di.forEachInRange([o,u],m=>{const D=this.Ci(m.vi);d.push(D)}),et.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Rr(Cn);return t.forEach(u=>{const d=new hs(u,0),m=new hs(u,Number.POSITIVE_INFINITY);this.Di.forEachInRange([d,m],D=>{o=o.add(D.vi)})}),et.resolve(this.Ni(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;It.isDocumentKey(d)||(d=d.child(""));const m=new hs(new It(d),0);let D=new Rr(Cn);return this.Di.forEachWhile(V=>{const W=V.key.path;return!!o.isPrefixOf(W)&&(W.length===u&&(D=D.add(V.vi)),!0)},m),et.resolve(this.Ni(D))}Ni(e){const t=[];return e.forEach(o=>{const u=this.Ci(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){b(0===this.ki(t.batchId,"removed")),this.Bs.shift();let o=this.Di;return et.forEach(t.mutations,u=>{const d=new hs(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Di=o})}_n(e){}containsKey(e,t){const o=new hs(t,0),u=this.Di.firstAfterOrEqual(o);return et.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return et.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class nm{constructor(e){this.Mi=e,this.docs=new Bn(It.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mi(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return et.resolve(o?o.document.mutableCopy():Ce.newInvalidDocument(t))}getEntries(e,t){let o=vo();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():Ce.newInvalidDocument(u))}),et.resolve(o)}getAllFromCollection(e,t,o){let u=vo();const d=new It(t.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:D,value:{document:V}}=m.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||mi(bn(V),o)<=0||(u=u.insert(V.key,V.mutableCopy()))}return et.resolve(u)}getAllFromCollectionGroup(e,t,o,u){y()}Oi(e,t){return et.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new rm(this)}getSize(e){return et.resolve(this.size)}}class rm extends bh{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Kn.addEntry(e,u)):this.Kn.removeEntry(o)}),et.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class qy{constructor(e){this.persistence=e,this.Fi=new Na(t=>es(t),Us),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Jf,this.targetCount=0,this.Li=au.gn()}forEachTarget(e,t){return this.Fi.forEach((o,u)=>t(u)),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.$i&&(this.$i=t),et.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new au(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,et.resolve()}updateTargetData(e,t){return this.Tn(t),et.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Fi.forEach((m,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Fi.delete(m),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),et.waitFor(d).next(()=>u)}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,t){const o=this.Fi.get(t)||null;return et.resolve(o)}addMatchingKeys(e,t,o){return this.Bi.Ei(t,o),et.resolve()}removeMatchingKeys(e,t,o){this.Bi.Ri(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(m=>{d.push(u.markPotentiallyOrphaned(e,m))}),et.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),et.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Bi.Vi(t);return et.resolve(o)}containsKey(e,t){return et.resolve(this.Bi.containsKey(t))}}class im{constructor(e,t){this.Ui={},this.overlays={},this.es=new Fr(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new qy(this),this.indexManager=new $g,this.ds=new nm(o=>this.referenceDelegate.qi(o)),this.M=new Ec(t),this._s=new tm(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ui[e.toKey()];return o||(o=new z_(t,this.referenceDelegate),this.Ui[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){ct("MemoryPersistence","Starting transaction:",e);const u=new Zy(this.es.next());return this.referenceDelegate.Ki(),o(u).next(d=>this.referenceDelegate.Gi(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Qi(e,t){return et.or(Object.values(this.Ui).map(o=>()=>o.containsKey(e,t)))}}class Zy extends Fu{constructor(e){super(),this.currentSequenceNumber=e}}class Xf{constructor(e){this.persistence=e,this.ji=new Jf,this.Wi=null}static zi(e){return new Xf(e)}get Hi(){if(this.Wi)return this.Wi;throw y()}addReference(e,t,o){return this.ji.addReference(o,t),this.Hi.delete(o.toString()),et.resolve()}removeReference(e,t,o){return this.ji.removeReference(o,t),this.Hi.add(o.toString()),et.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),et.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(u=>this.Hi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Hi.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Hi,o=>{const u=It.fromPath(o);return this.Ji(e,u).next(d=>{d||t.removeEntry(u,Ft.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(o=>{o?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return et.or([()=>et.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function _o(i,e){return`firestore_clients_${i}_${e}`}function sm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function ep(i,e){return`firestore_targets_${i}_${e}`}class tp{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Yi(e,t,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new X(u.error.code,u.error.message))),m?new tp(e,t,u.state,d):(er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Yi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new X(o.error.code,o.error.message))),d?new Nh(e,o.state,u):(er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _d{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=iu();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=Du(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new _d(e,d):(er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class om{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new om(t.clientId,t.onlineState):(er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class np{constructor(){this.activeTargetIds=iu()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ed{constructor(e,t,o,u,d){this.window=e,this.Yn=t,this.persistenceKey=o,this.er=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Bn(Cn),this.started=!1,this.rr=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ur=_o(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new np),this.cr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,U.Z)(function*(){const t=yield e.syncEngine.Fs();for(const u of t){if(u===e.er)continue;const d=e.getItem(_o(e.persistenceKey,u));if(d){const m=_d.Yi(u,d);m&&(e.ir=e.ir.insert(m.clientId,m))}}e.wr();const o=e.storage.getItem(e.dr);if(o){const u=e.mr(o);u&&e.gr(u)}for(const u of e.rr)e.sr(u);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,o){this.pr(e,t,o),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(ep(this.persistenceKey,e));if(o){const u=Nh.Yi(e,o);u&&(t=u.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ep(this.persistenceKey,e))}updateQueryState(e,t,o){this.Er(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Ir(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ct("SharedClientState","READ",e,t),t}setItem(e,t){ct("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ct("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(ct("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ur)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,U.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const u=t.Pr(o.key);return t.br(u,null)}{const u=t.Vr(o.key,o.newValue);if(u)return t.br(u.clientId,u)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const u=t.vr(o.key,o.newValue);if(u)return t.Sr(u)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(o.key===t.dr){if(null!==o.newValue){const u=t.mr(o.newValue);if(u)return t.gr(u)}}else if(o.key===t.ar){const u=function(d){let m=Fr.A;if(null!=d)try{const D=JSON.parse(d);b("number"==typeof D),m=D}catch(D){er("SharedClientState","Failed to read sequence number from WebStorage",D)}return m}(o.newValue);u!==Fr.A&&t.sequenceNumberHandler(u)}else if(o.key===t._r){const u=t.Nr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.kr(d)))}}else t.rr.push(o)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,o){const u=new tp(this.currentUser,e,t,o),d=sm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Xi())}Ir(e){const t=sm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,o){const u=ep(this.persistenceKey,e),d=new Nh(e,t,o);this.setItem(u,d.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.Pr(e);return _d.Yi(o,t)}vr(e,t){const o=this.hr.exec(e),u=Number(o[1]);return tp.Yi(new ii(void 0!==o[2]?o[2]:null),u,t)}Dr(e,t){const o=this.lr.exec(e),u=Number(o[1]);return Nh.Yi(u,t)}mr(e){return om.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,U.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);ct("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const o=t?this.ir.insert(e,t):this.ir.remove(e),u=this.yr(this.ir),d=this.yr(o),m=[],D=[];return d.forEach(V=>{u.has(V)||m.push(V)}),u.forEach(V=>{d.has(V)||D.push(V)}),this.syncEngine.Fr(m,D).then(()=>{this.ir=o})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=iu();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class rp{constructor(){this.$r=new np,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,o){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new np,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Yy{Lr(e){}shutdown(){}}class am{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Qy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class um{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Jy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,o,u,d){const m=this.uo(e,t);ct("RestConnection","Sending: ",m,o);const D={};return this.ao(D,u,d),this.co(e,m,D,o).then(V=>(ct("RestConnection","Received: ",V),V),V=>{throw I("RestConnection",`${e} failed with error: `,V,"url: ",m,"request:",o),V})}ho(e,t,o,u,d){return this.oo(e,t,o,u,d)}ao(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+co,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}uo(e,t){return`${this.io}/v1/${t}:${Qy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,u){return new Promise((d,m)=>{const D=new nc;D.listenOnce(wr.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case Ta.NO_ERROR:const W=D.getResponseJson();ct("Connection","XHR received:",JSON.stringify(W)),d(W);break;case Ta.TIMEOUT:ct("Connection",'RPC "'+e+'" timed out'),m(new X($.DEADLINE_EXCEEDED,"Request time out"));break;case Ta.HTTP_ERROR:const re=D.getStatus();if(ct("Connection",'RPC "'+e+'" failed with status:',re,"response text:",D.getResponseText()),re>0){const we=D.getResponseJson().error;if(we&&we.status&&we.message){const Ge=function(st){const at=st.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(at)>=0?at:$.UNKNOWN}(we.status);m(new X(Ge,we.message))}else m(new X($.UNKNOWN,"Server responded with status "+D.getStatus()))}else m(new X($.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{ct("Connection",'RPC "'+e+'" completed.')}});const V=JSON.stringify(u);D.send(t,"POST",V,o,15)})}lo(e,t,o){const u=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Ho(),m=Go(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new Aa({})),this.ao(D.initMessageHeaders,t,o),(0,Pe.uI)()||(0,Pe.b$)()||(0,Pe.d)()||(0,Pe.w1)()||(0,Pe.Mn)()||(0,Pe.ru)()||(D.httpHeadersOverwriteParam="$httpHeaders");const V=u.join("");ct("Connection","Creating WebChannel: "+V,D);const W=d.createWebChannel(V,D);let re=!1,we=!1;const Ge=new um({Wr:at=>{we?ct("Connection","Not sending because WebChannel is closed:",at):(re||(ct("Connection","Opening WebChannel transport."),W.open(),re=!0),ct("Connection","WebChannel sending:",at),W.send(at))},zr:()=>W.close()}),st=(at,Gt,Mn)=>{at.listen(Gt,Xr=>{try{Mn(Xr)}catch(ai){setTimeout(()=>{throw ai},0)}})};return st(W,vs.EventType.OPEN,()=>{we||ct("Connection","WebChannel transport opened.")}),st(W,vs.EventType.CLOSE,()=>{we||(we=!0,ct("Connection","WebChannel transport closed"),Ge.no())}),st(W,vs.EventType.ERROR,at=>{we||(we=!0,I("Connection","WebChannel transport errored:",at),Ge.no(new X($.UNAVAILABLE,"The operation could not be completed")))}),st(W,vs.EventType.MESSAGE,at=>{var Gt;if(!we){const Mn=at.data[0];b(!!Mn);const Xr=Mn,ai=Xr.error||(null===(Gt=Xr[0])||void 0===Gt?void 0:Gt.error);if(ai){ct("Connection","WebChannel received error:",ai);const Vr=ai.status;let rs=function(Si){const zs=Ti[Si];if(void 0!==zs)return dc(zs)}(Vr),ui=ai.message;void 0===rs&&(rs=$.INTERNAL,ui="Unknown error status: "+Vr+" with message "+ai.message),we=!0,Ge.no(new X(rs,ui)),W.close()}else ct("Connection","WebChannel received:",Mn),Ge.so(Mn)}}),st(m,al.STAT_EVENT,at=>{at.stat===Ds.PROXY?ct("Connection","Detected buffering proxy"):at.stat===Ds.NOPROXY&&ct("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ge.eo()},0),Ge}}function ip(){return"undefined"!=typeof window?window:null}function Ph(){return"undefined"!=typeof document?document:null}function wd(i){return new uh(i,!0)}class kh{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Yn=e,this.timerId=t,this.fo=o,this._o=u,this.wo=d,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),o=Math.max(0,Date.now()-this.po),u=Math.max(0,t-o);u>0&&ct("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,u,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class sp{constructor(e,t,o,u,d,m,D,V){this.Yn=e,this.Ro=o,this.Po=u,this.bo=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=D,this.listener=V,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new kh(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,U.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,U.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var o=this;return(0,U.Z)(function*(){o.$o(),o.Bo(),o.Do.cancel(),o.Vo++,4!==e?o.Do.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),o.Do.Io()):t&&t.code===$.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Lo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Vo===t&&this.qo(o,u)},o=>{e(()=>{const u=new X($.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ko(u)})})}qo(e,t){const o=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{o(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(u=>{o(()=>this.Ko(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}No(){var e=this;this.state=5,this.Do.To((0,U.Z)(function*(){e.state=0,e.start()}))}Ko(e){return ct("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xy extends sp{constructor(e,t,o,u,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,m),this.M=d}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Pf(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(V=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===V?1:"REMOVE"===V?2:"CURRENT"===V?3:"RESET"===V?4:y(),u=e.targetChange.targetIds||[],d=function(V,W){return V.N?(b(void 0===W||"string"==typeof W),Fn.fromBase64String(W||"")):(b(void 0===W||W instanceof Uint8Array),Fn.fromUint8Array(W||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,D=m&&function(V){const W=void 0===V.code?$.UNKNOWN:dc(V.code);return new X(W,V.message||"")}(m);t=new Bs(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=Lr(i,o.document.name),d=ts(o.document.updateTime),m=new z({mapValue:{fields:o.document.fields}}),D=Ce.newFoundDocument(u,d,m);t=new Yo(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=Lr(i,o.document),d=o.readTime?ts(o.readTime):Ft.min(),m=Ce.newNoDocument(u,d);t=new Yo([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const o=e.documentRemove,u=Lr(i,o.document);t=new Yo([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return y();{const o=e.filter,d=new td(o.count||0);t=new pc(o.targetId,d)}}var V;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return Ft.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Ft.min():d.readTime?ts(d.readTime):Ft.min()}(e);return this.listener.Qo(t,o)}jo(e){const t={};t.database=Nl(this.M),t.addTarget=function(u,d){let m;const D=d.target;return m=go(D)?{documents:hh(u,D)}:{query:fh(u,D)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=Po(u,d.resumeToken):d.snapshotVersion.compareTo(Ft.min())>0&&(m.readTime=xl(u,d.snapshotVersion.toTimestamp())),m}(this.M,e);const o=function c(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return y()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=Nl(this.M),t.removeTarget=e,this.Fo(t)}}class Ua extends sp{constructor(e,t,o,u,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,m),this.M=d,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(b(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function kf(i,e){return i&&i.length>0?(b(void 0!==e),i.map(t=>function(o,u){let d=ts(o.updateTime?o.updateTime:u);return d.isEqual(Ft.min())&&(d=ts(u)),new El(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=ts(e.commitTime);return this.listener.Yo(o,t)}return b(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Nl(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>ou(this.M,o))};this.Fo(t)}}class op extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=u,this.tu=!1}eu(){if(this.tu)throw new X($.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.oo(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new X($.UNKNOWN,u.toString())})}ho(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ho(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new X($.UNKNOWN,u.toString())})}terminate(){this.tu=!0}}class ev{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(er(t),this.iu=!1):ct("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class tv{constructor(e,t,o,u,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=d,this._u.Lr(D=>{o.enqueueAndForget((0,U.Z)(function*(){var V;Gu(m)&&(ct("RemoteStore","Restarting streams for network reachability change."),yield(V=(0,U.Z)(function*(W){const re=B(W);re.fu.add(4),yield Sc(re),re.wu.set("Unknown"),re.fu.delete(4),yield Fh(re)}),function(W){return V.apply(this,arguments)})(m))}))}),this.wu=new ev(o,u)}}function Fh(i){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,U.Z)(function*(i){if(Gu(i))for(const e of i.du)yield e(!0)}),Lh.apply(this,arguments)}function Sc(i){return ap.apply(this,arguments)}function ap(){return ap=(0,U.Z)(function*(i){for(const e of i.du)yield e(!1)}),ap.apply(this,arguments)}function Vh(i,e){const t=B(i);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Id(t)?Mc(t):Wu(t).xo()&&up(t,e))}function jl(i,e){const t=B(i),o=Wu(t);t.lu.delete(e),o.xo()&&lm(t,e),0===t.lu.size&&(o.xo()?o.Mo():Gu(t)&&t.wu.set("Unknown"))}function up(i,e){i.mu.Z(e.targetId),Wu(i).jo(e)}function lm(i,e){i.mu.Z(e),Wu(i).Wo(e)}function Mc(i){i.mu=new id({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.lu.get(e)||null}),Wu(i).start(),i.wu.ru()}function Id(i){return Gu(i)&&!Wu(i).Co()&&i.lu.size>0}function Gu(i){return 0===B(i).fu.size}function Uh(i){i.mu=void 0}function lp(i){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,U.Z)(function*(i){i.lu.forEach((e,t)=>{up(i,e)})}),Bh.apply(this,arguments)}function nv(i,e){return cp.apply(this,arguments)}function cp(){return cp=(0,U.Z)(function*(i,e){Uh(i),Id(i)?(i.wu.au(e),Mc(i)):i.wu.set("Unknown")}),cp.apply(this,arguments)}function dp(i,e,t){return cm.apply(this,arguments)}function cm(){return cm=(0,U.Z)(function*(i,e,t){if(i.wu.set("Online"),e instanceof Bs&&2===e.state&&e.cause)try{yield(o=(0,U.Z)(function*(u,d){const m=d.cause;for(const D of d.targetIds)u.lu.has(D)&&(yield u.remoteSyncer.rejectListen(D,m),u.lu.delete(D),u.mu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){ct("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield jh(i,o)}else if(e instanceof Yo?i.mu.ut(e):e instanceof pc?i.mu._t(e):i.mu.ht(e),!t.isEqual(Ft.min()))try{const o=yield Yg(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const m=u.mu.yt(d);return m.targetChanges.forEach((D,V)=>{if(D.resumeToken.approximateByteSize()>0){const W=u.lu.get(V);W&&u.lu.set(V,W.withResumeToken(D.resumeToken,d))}}),m.targetMismatches.forEach(D=>{const V=u.lu.get(D);if(!V)return;u.lu.set(D,V.withResumeToken(Fn.EMPTY_BYTE_STRING,V.snapshotVersion)),lm(u,D);const W=new Fa(V.target,D,1,V.sequenceNumber);up(u,W)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t))}catch(o){ct("RemoteStore","Failed to raise snapshot:",o),yield jh(i,o)}var o}),cm.apply(this,arguments)}function jh(i,e,t){return $h.apply(this,arguments)}function $h(){return $h=(0,U.Z)(function*(i,e,t){if(!Lu(e))throw e;i.fu.add(1),yield Sc(i),i.wu.set("Offline"),t||(t=()=>Yg(i.localStore)),i.asyncQueue.enqueueRetryable((0,U.Z)(function*(){ct("RemoteStore","Retrying IndexedDB access"),yield t(),i.fu.delete(1),yield Fh(i)}))}),$h.apply(this,arguments)}function hp(i,e){return e().catch(t=>jh(i,t,e))}function $l(i){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,U.Z)(function*(i){const e=B(i),t=zu(e);let o=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;dm(e);)try{const u=yield Ky(e.localStore,o);if(null===u){0===e.hu.length&&t.Mo();break}o=u.batchId,cu(e,u)}catch(u){yield jh(e,u)}Dd(e)&&hm(e)}),Hh.apply(this,arguments)}function dm(i){return Gu(i)&&i.hu.length<10}function cu(i,e){i.hu.push(e);const t=zu(i);t.xo()&&t.Ho&&t.Jo(e.mutations)}function Dd(i){return Gu(i)&&!zu(i).Co()&&i.hu.length>0}function hm(i){zu(i).start()}function rv(i){return fm.apply(this,arguments)}function fm(){return fm=(0,U.Z)(function*(i){zu(i).Zo()}),fm.apply(this,arguments)}function fp(i){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,U.Z)(function*(i){const e=zu(i);for(const t of i.hu)e.Jo(t.mutations)}),Gh.apply(this,arguments)}function pp(i,e,t){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,U.Z)(function*(i,e,t){const o=i.hu.shift(),u=fd.from(o,e,t);yield hp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield $l(i)}),Hl.apply(this,arguments)}function iv(i,e){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,U.Z)(function*(i,e){var t;e&&zu(i).Ho&&(yield(t=(0,U.Z)(function*(o,u){if(bl(d=u.code)&&d!==$.ABORTED){const m=o.hu.shift();zu(o).ko(),yield hp(o,()=>o.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield $l(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Dd(i)&&hm(i)}),Cd.apply(this,arguments)}function gp(i,e){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,U.Z)(function*(i,e){const t=B(i);t.asyncQueue.verifyOperationInProgress(),ct("RemoteStore","RemoteStore received new credentials");const o=Gu(t);t.fu.add(3),yield Sc(t),o&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Fh(t)}),Wh.apply(this,arguments)}function zh(i,e){return mp.apply(this,arguments)}function mp(){return mp=(0,U.Z)(function*(i,e){const t=B(i);e?(t.fu.delete(2),yield Fh(t)):e||(t.fu.add(2),yield Sc(t),t.wu.set("Unknown"))}),mp.apply(this,arguments)}function Wu(i){return i.gu||(i.gu=function(e,t,o){const u=B(e);return u.eu(),new Xy(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:lp.bind(null,i),Yr:nv.bind(null,i),Qo:dp.bind(null,i)}),i.du.push(function(){var e=(0,U.Z)(function*(t){t?(i.gu.ko(),Id(i)?Mc(i):i.wu.set("Unknown")):(yield i.gu.stop(),Uh(i))});return function(t){return e.apply(this,arguments)}}())),i.gu}function zu(i){return i.yu||(i.yu=function(e,t,o){const u=B(e);return u.eu(),new Ua(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:rv.bind(null,i),Yr:iv.bind(null,i),Xo:fp.bind(null,i),Yo:pp.bind(null,i)}),i.du.push(function(){var e=(0,U.Z)(function*(t){t?(i.yu.ko(),yield $l(i)):(yield i.yu.stop(),i.hu.length>0&&(ct("RemoteStore",`Stopping write stream with ${i.hu.length} pending writes`),i.hu=[]))});return function(t){return e.apply(this,arguments)}}())),i.yu}class yp{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new $e,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,o,u,d){const m=Date.now()+o,D=new yp(e,t,m,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new X($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gl(i,e){if(er("AsyncQueue",`${e}: ${i}`),Lu(i))return new X($.UNAVAILABLE,`${e}: ${i}`);throw i}class ca{constructor(e){this.comparator=e?(t,o)=>e(t,o)||It.comparator(t.key,o.key):(t,o)=>It.comparator(t.key,o.key),this.keyedMap=rd(),this.sortedSet=new Bn(this.comparator)}static emptySet(e){return new ca(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new ca;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class vp{constructor(){this.pu=new Bn(It.comparator)}track(e){const t=e.doc.key,o=this.pu.get(t);o?0!==e.type&&3===o.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==o.type?this.pu=this.pu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.pu=this.pu.remove(t):1===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):y():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,o)=>{e.push(o)}),e}}class xc{constructor(e,t,o,u,d,m,D,V){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=D,this.excludesMetadataChanges=V}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new xc(e,t,ca.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class sv{constructor(){this.Tu=void 0,this.listeners=[]}}class Oc{constructor(){this.queries=new Na(e=>Jd(e),Au),this.onlineState="Unknown",this.Eu=new Set}}function _p(i,e){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,U.Z)(function*(i,e){const t=B(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new sv),u)try{d.Tu=yield t.onListen(o)}catch(m){const D=Gl(m,`Initialization of query '${Jc(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.Au(t.onlineState),d.Tu&&e.Ru(d.Tu)&&Kh(t)}),Ep.apply(this,arguments)}function wp(i,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,U.Z)(function*(i,e){const t=B(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Ip.apply(this,arguments)}function da(i,e){const t=B(i);let o=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const D of m.listeners)D.Ru(u)&&(o=!0);m.Tu=u}}o&&Kh(t)}function Dp(i,e,t){const o=B(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Kh(i){i.Eu.forEach(e=>{e.next()})}class qh{constructor(e,t,o){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}Ru(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new xc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class pm{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class Cp{constructor(e){this.M=e}fi(e){return Lr(this.M,e)}di(e){return e.metadata.exists?mc(this.M,e.document,!1):Ce.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return ts(e)}}class ov{constructor(e,t,o){this.Nu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gm(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Zn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new Cp(this.M);for(const u of e)if(u.metadata.queries){const d=o.fi(u.metadata.name);for(const m of u.metadata.queries){const D=(t.get(m)||An()).add(d);t.set(m,D)}}return t}complete(){var e=this;return(0,U.Z)(function*(){const t=yield function em(i,e,t,o){return Oh.apply(this,arguments)}(e.localStore,new Cp(e.M),e.documents,e.Nu.id),o=e.Mu(e.documents);for(const u of e.queries)yield Qf(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function gm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class mm{constructor(e){this.key=e}}class ym{constructor(e){this.key=e}}class bp{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=An(),this.mutatedKeys=An(),this.Uu=Xd(e),this.qu=new ca(this.Uu)}get Ku(){return this.$u}Gu(e,t){const o=t?t.Qu:new vp,u=t?t.qu:this.qu;let d=t?t.mutatedKeys:this.mutatedKeys,m=u,D=!1;const V=sc(this.query)&&u.size===this.query.limit?u.last():null,W=bu(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((re,we)=>{const Ge=u.get(re),st=Xc(this.query,we)?we:null,at=!!Ge&&this.mutatedKeys.has(Ge.key),Gt=!!st&&(st.hasLocalMutations||this.mutatedKeys.has(st.key)&&st.hasCommittedMutations);let Mn=!1;Ge&&st?Ge.data.isEqual(st.data)?at!==Gt&&(o.track({type:3,doc:st}),Mn=!0):this.ju(Ge,st)||(o.track({type:2,doc:st}),Mn=!0,(V&&this.Uu(st,V)>0||W&&this.Uu(st,W)<0)&&(D=!0)):!Ge&&st?(o.track({type:0,doc:st}),Mn=!0):Ge&&!st&&(o.track({type:1,doc:Ge}),Mn=!0,(V||W)&&(D=!0)),Mn&&(st?(m=m.add(st),d=Gt?d.add(re):d.delete(re)):(m=m.delete(re),d=d.delete(re)))}),sc(this.query)||bu(this.query))for(;m.size>this.query.limit;){const re=sc(this.query)?m.last():m.first();m=m.delete(re.key),d=d.delete(re.key),o.track({type:1,doc:re})}return{qu:m,Qu:o,ni:D,mutatedKeys:d}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const d=e.Qu.Iu();d.sort((W,re)=>function(we,Ge){const st=at=>{switch(at){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return st(we)-st(Ge)}(W.type,re.type)||this.Uu(W.doc,re.doc)),this.Wu(o);const m=t?this.zu():[],D=0===this.Lu.size&&this.current?1:0,V=D!==this.Bu;return this.Bu=D,0!==d.length||V?{snapshot:new xc(this.query,e.qu,u,d,e.mutatedKeys,0===D,V,!1),Hu:m}:{Hu:m}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new vp,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=An(),this.qu.forEach(o=>{this.Ju(o.key)&&(this.Lu=this.Lu.add(o.key))});const t=[];return e.forEach(o=>{this.Lu.has(o)||t.push(new ym(o))}),this.Lu.forEach(o=>{e.has(o)||t.push(new mm(o))}),t}Yu(e){this.$u=e.li,this.Lu=An();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return xc.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class K_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class vm{constructor(e){this.key=e,this.Zu=!1}}class av{constructor(e,t,o,u,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.ta={},this.ea=new Na(D=>Jd(D),Au),this.na=new Map,this.sa=new Set,this.ia=new Bn(It.comparator),this.ra=new Map,this.oa=new Jf,this.ua={},this.aa=new Map,this.ca=au.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function uv(i,e){return _m.apply(this,arguments)}function _m(){return _m=(0,U.Z)(function*(i,e){const t=Qu(i);let o,u;const d=t.ea.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.Xu();else{const m=yield Va(t.localStore,io(e));t.isPrimaryClient&&Vh(t.remoteStore,m);const D=t.sharedClientState.addLocalQueryTarget(m.targetId);o=m.targetId,u=yield Em(t,e,o,"current"===D)}return u}),_m.apply(this,arguments)}function Em(i,e,t,o){return bd.apply(this,arguments)}function bd(){return bd=(0,U.Z)(function*(i,e,t,o){i.la=(re,we,Ge)=>{return(st=(0,U.Z)(function*(at,Gt,Mn,Xr){let ai=Gt.view.Gu(Mn);ai.ni&&(ai=yield lu(at.localStore,Gt.query,!1).then(({documents:ui})=>Gt.view.Gu(ui,ai)));const Vr=Xr&&Xr.targetChanges.get(Gt.targetId),rs=Gt.view.applyChanges(ai,at.isPrimaryClient,Vr);return xp(at,Gt.targetId,rs.Hu),rs.snapshot}),function(at,Gt,Mn,Xr){return st.apply(this,arguments)})(i,re,we,Ge);var st};const u=yield lu(i.localStore,e,!0),d=new bp(e,u.li),m=d.Gu(u.documents),D=Pi.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),V=d.applyChanges(m,i.isPrimaryClient,D);xp(i,t,V.Hu);const W=new K_(e,t,d);return i.ea.set(e,W),i.na.has(t)?i.na.get(t).push(e):i.na.set(t,[e]),V.snapshot}),bd.apply(this,arguments)}function lv(i,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,U.Z)(function*(i,e){const t=B(i),o=t.ea.get(e),u=t.na.get(o.targetId);if(u.length>1)return t.na.set(o.targetId,u.filter(d=>!Au(d,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield la(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),jl(t.remoteStore,o.targetId),Rc(t,o.targetId)}).catch(Vl))):(Rc(t,o.targetId),yield la(t.localStore,o.targetId,!0))}),Zh.apply(this,arguments)}function Im(){return Im=(0,U.Z)(function*(i,e,t){const o=Ju(i);try{const u=yield function(d,m){const D=B(d),V=gi.now(),W=m.reduce((we,Ge)=>we.add(Ge.key),An());let re;return D.persistence.runTransaction("Locally write mutations","readwrite",we=>D.ci.Ks(we,W).next(Ge=>{re=Ge;const st=[];for(const at of m){const Gt=Og(at,re.get(at.key));null!=Gt&&st.push(new Ou(at.key,Gt,ie(Gt.value.mapValue),bi.exists(!0)))}return D.Bs.addMutationBatch(we,V,st,m)})).then(we=>(we.applyToLocalDocumentSet(re),{batchId:we.batchId,changes:re}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,m,D){let V=d.ua[d.currentUser.toKey()];V||(V=new Bn(Cn)),V=V.insert(m,D),d.ua[d.currentUser.toKey()]=V}(o,u.batchId,t),yield ta(o,u.changes),yield $l(o.remoteStore)}catch(u){const d=Gl(u,"Failed to persist write");t.reject(d)}}),Im.apply(this,arguments)}function ea(i,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,U.Z)(function*(i,e){const t=B(i);try{const o=yield Qg(t.localStore,e);e.targetChanges.forEach((u,d)=>{const m=t.ra.get(d);m&&(b(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.Zu=!0:u.modifiedDocuments.size>0?b(m.Zu):u.removedDocuments.size>0&&(b(m.Zu),m.Zu=!1))}),yield ta(t,o,e)}catch(o){yield Vl(o)}}),Dm.apply(this,arguments)}function cv(i,e,t){const o=B(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ea.forEach((d,m)=>{const D=m.view.Au(e);D.snapshot&&u.push(D.snapshot)}),function(d,m){const D=B(d);D.onlineState=m;let V=!1;D.queries.forEach((W,re)=>{for(const we of re.listeners)we.Au(m)&&(V=!0)}),V&&Kh(D)}(o.eventManager,e),u.length&&o.ta.Qo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Cm(i,e,t){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,U.Z)(function*(i,e,t){const o=B(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.ra.get(e),d=u&&u.key;if(d){let m=new Bn(It.comparator);m=m.insert(d,Ce.newNoDocument(d,Ft.min()));const D=An().add(d),V=new su(Ft.min(),new Map,new Rr(Cn),m,D);yield ea(o,V),o.ia=o.ia.remove(d),o.ra.delete(e),Op(o)}else yield la(o.localStore,e,!1).then(()=>Rc(o,e,t)).catch(Vl)}),Yh.apply(this,arguments)}function bm(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,U.Z)(function*(i,e){const t=B(i),o=e.batch.batchId;try{const u=yield Yf(t.localStore,e);Mp(t,o,null),Td(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield ta(t,u)}catch(u){yield Vl(u)}}),Tp.apply(this,arguments)}function q_(i,e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,U.Z)(function*(i,e,t){const o=B(i);try{const u=yield function(d,m){const D=B(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",V=>{let W;return D.Bs.lookupMutationBatch(V,m).next(re=>(b(null!==re),W=re.keys(),D.Bs.removeMutationBatch(V,re))).next(()=>D.Bs.performConsistencyCheck(V)).next(()=>D.ci.Ks(V,W))})}(o.localStore,e);Mp(o,e,t),Td(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield ta(o,u)}catch(u){yield Vl(u)}}),Qh.apply(this,arguments)}function Sp(){return Sp=(0,U.Z)(function*(i,e){const t=B(i);Gu(t.remoteStore)||ct("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const m=B(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>m.Bs.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.aa.get(o)||[];u.push(e),t.aa.set(o,u)}catch(o){const u=Gl(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Sp.apply(this,arguments)}function Td(i,e){(i.aa.get(e)||[]).forEach(t=>{t.resolve()}),i.aa.delete(e)}function Mp(i,e,t){const o=B(i);let u=o.ua[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ua[o.currentUser.toKey()]=u}}function Rc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.na.get(e))i.ea.delete(o),t&&i.ta.fa(o,t);i.na.delete(e),i.isPrimaryClient&&i.oa.Pi(e).forEach(o=>{i.oa.containsKey(o)||Tm(i,o)})}function Tm(i,e){i.sa.delete(e.path.canonicalString());const t=i.ia.get(e);null!==t&&(jl(i.remoteStore,t),i.ia=i.ia.remove(e),i.ra.delete(t),Op(i))}function xp(i,e,t){for(const o of t)o instanceof mm?(i.oa.addReference(o.key,e),dv(i,o)):o instanceof ym?(ct("SyncEngine","Document no longer in limbo: "+o.key),i.oa.removeReference(o.key,e),i.oa.containsKey(o.key)||Tm(i,o.key)):y()}function dv(i,e){const t=e.key,o=t.path.canonicalString();i.ia.get(t)||i.sa.has(o)||(ct("SyncEngine","New document in limbo: "+t),i.sa.add(o),Op(i))}function Op(i){for(;i.sa.size>0&&i.ia.size<i.maxConcurrentLimboResolutions;){const e=i.sa.values().next().value;i.sa.delete(e);const t=new It(Zn.fromString(e)),o=i.ca.next();i.ra.set(o,new vm(t)),i.ia=i.ia.insert(t,o),Vh(i.remoteStore,new Fa(io(No(t.path)),o,2,Fr.A))}}function ta(i,e,t){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,U.Z)(function*(i,e,t){const o=B(i),u=[],d=[],m=[];var D;o.ea.isEmpty()||(o.ea.forEach((D,V)=>{m.push(o.la(V,e,t).then(W=>{if(W){o.isPrimaryClient&&o.sharedClientState.updateQueryState(V.targetId,W.fromCache?"not-current":"current"),u.push(W);const re=Mh.Ys(V.targetId,W);d.push(re)}}))}),yield Promise.all(m),o.ta.Qo(u),yield(D=(0,U.Z)(function*(V,W){const re=B(V);try{yield re.persistence.runTransaction("notifyLocalViewChanges","readwrite",we=>et.forEach(W,Ge=>et.forEach(Ge.Hs,st=>re.persistence.referenceDelegate.addReference(we,Ge.targetId,st)).next(()=>et.forEach(Ge.Js,st=>re.persistence.referenceDelegate.removeReference(we,Ge.targetId,st)))))}catch(we){if(!Lu(we))throw we;ct("LocalStore","Failed to update sequence numbers: "+we)}for(const we of W){const Ge=we.targetId;if(!we.fromCache){const st=re.ii.get(Ge),Gt=st.withLastLimboFreeSnapshotVersion(st.snapshotVersion);re.ii=re.ii.insert(Ge,Gt)}}}),function(V,W){return D.apply(this,arguments)})(o.localStore,d))}),Ku.apply(this,arguments)}function hv(i,e){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,U.Z)(function*(i,e){const t=B(i);if(!t.currentUser.isEqual(e)){ct("SyncEngine","User change. New user:",e.toKey());const o=yield qf(t.localStore,e);t.currentUser=e,(u=t).aa.forEach(m=>{m.forEach(D=>{D.reject(new X($.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.aa.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ta(t,o.hi)}var u}),Wl.apply(this,arguments)}function fv(i,e){const t=B(i),o=t.ra.get(e);if(o&&o.Zu)return An().add(o.key);{let u=An();const d=t.na.get(e);if(!d)return u;for(const m of d){const D=t.ea.get(m);u=u.unionWith(D.view.Ku)}return u}}function pv(i,e){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,U.Z)(function*(i,e){const t=B(i),o=yield lu(t.localStore,e.query,!0),u=e.view.Yu(o);return t.isPrimaryClient&&xp(t,e.targetId,u.Hu),u}),Ad.apply(this,arguments)}function Ba(i,e){return zl.apply(this,arguments)}function zl(){return zl=(0,U.Z)(function*(i,e){const t=B(i);return Bl(t.localStore,e).then(o=>ta(t,o))}),zl.apply(this,arguments)}function Gs(i,e,t,o){return du.apply(this,arguments)}function du(){return du=(0,U.Z)(function*(i,e,t,o){const u=B(i),d=yield function(m,D){const V=B(m),W=B(V.Bs);return V.persistence.runTransaction("Lookup mutation documents","readonly",re=>W.fn(re,D).next(we=>we?V.ci.Ks(re,we):et.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield $l(u.remoteStore):"acknowledged"===t||"rejected"===t?(Mp(u,e,o||null),Td(u,e),D=e,B(B(u.localStore).Bs)._n(D)):y(),yield ta(u,d)):ct("SyncEngine","Cannot apply mutation batch with id: "+e)}),du.apply(this,arguments)}function Eo(){return Eo=(0,U.Z)(function*(i,e){const t=B(i);if(Qu(t),Ju(t),!0===e&&!0!==t.ha){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield Xh(t,o.toArray());t.ha=!0,yield zh(t.remoteStore,!0);for(const d of u)Vh(t.remoteStore,d)}else if(!1===e&&!1!==t.ha){const o=[];let u=Promise.resolve();t.na.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(Rc(t,m),la(t.localStore,m,!0))),jl(t.remoteStore,m)}),yield u,yield Xh(t,o),function(d){const m=B(d);m.ra.forEach((D,V)=>{jl(m.remoteStore,V)}),m.oa.bi(),m.ra=new Map,m.ia=new Bn(It.comparator)}(t),t.ha=!1,yield zh(t.remoteStore,!1)}}),Eo.apply(this,arguments)}function Xh(i,e,t){return qu.apply(this,arguments)}function qu(){return qu=(0,U.Z)(function*(i,e,t){const o=B(i),u=[],d=[];for(const m of e){let D;const V=o.na.get(m);if(V&&0!==V.length){D=yield Va(o.localStore,io(V[0]));for(const W of V){const re=o.ea.get(W),we=yield pv(o,re);we.snapshot&&d.push(we.snapshot)}}else{const W=yield Ac(o.localStore,m);D=yield Va(o.localStore,W),yield Em(o,Kl(W),m,!1)}u.push(D)}return o.ta.Qo(d),u}),qu.apply(this,arguments)}function Kl(i){return ic(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Nc(i){const e=B(i);return B(B(e.localStore).persistence).Fs()}function Pc(i,e,t,o){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,U.Z)(function*(i,e,t,o){const u=B(i);if(u.ha)return void ct("SyncEngine","Ignoring unexpected query state notification.");const d=u.na.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const m=yield Bl(u.localStore,ac(d[0])),D=su.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ta(u,m,D);break}case"rejected":yield la(u.localStore,e,!0),Rc(u,e,o);break;default:y()}}),Zu.apply(this,arguments)}function kc(i,e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=(0,U.Z)(function*(i,e,t){const o=Qu(i);if(o.ha){for(const u of e){if(o.na.has(u)){ct("SyncEngine","Adding an already active target "+u);continue}const d=yield Ac(o.localStore,u),m=yield Va(o.localStore,d);yield Em(o,Kl(d),m.targetId,!1),Vh(o.remoteStore,m)}for(const u of t)o.na.has(u)&&(yield la(o.localStore,u,!1).then(()=>{jl(o.remoteStore,u),Rc(o,u)}).catch(Vl))}}),Yu.apply(this,arguments)}function Qu(i){const e=B(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ea.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cm.bind(null,e),e.ta.Qo=da.bind(null,e.eventManager),e.ta.fa=Dp.bind(null,e.eventManager),e}function Ju(i){const e=B(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q_.bind(null,e),e}class Rp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,U.Z)(function*(){t.M=wd(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return uu(this.persistence,new xh,e.initialUser,this.M)}wa(e){return new im(Xf.zi,this.M)}_a(e){return new rp}terminate(){var e=this;return(0,U.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Np extends Rp{constructor(e,t,o){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,U.Z)(function*(){yield t().call(o,e),yield o.ya.initialize(o,e),yield Ju(o.ya.syncEngine),yield $l(o.ya.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ga(e){return uu(this.persistence,new xh,e.initialUser,this.M)}ma(e){return new $_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Hs.withCacheSize(this.cacheSizeBytes):Hs.DEFAULT;return new La(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,ip(),Ph(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new rp}}class Sm extends Np{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,U.Z)(function*(){yield t().call(o,e);const u=o.ya.syncEngine;o.sharedClientState instanceof Ed&&(o.sharedClientState.syncEngine={Mr:Gs.bind(null,u),Or:Pc.bind(null,u),Fr:kc.bind(null,u),Fs:Nc.bind(null,u),kr:Ba.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var d=(0,U.Z)(function*(m){yield function Jh(i,e){return Eo.apply(this,arguments)}(o.ya.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):m||o.gcScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}_a(e){const t=ip();if(!Ed.vt(t))throw new X($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ed(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class ef{initialize(e,t){var o=this;return(0,U.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>cv(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=hv.bind(null,o.syncEngine),yield zh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Oc}createDatastore(e){const t=wd(e.databaseInfo.databaseId),o=new Jy(e.databaseInfo);return new op(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>cv(this.syncEngine,D,0),m=am.vt()?new am:new Yy,new tv(t,o,u,d,m);var t,o,u,d,m}createSyncEngine(e,t){return function(o,u,d,m,D,V,W){const re=new av(o,u,d,m,D,V);return W&&(re.ha=!0),re}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,U.Z)(function*(t){const o=B(t);ct("RemoteStore","RemoteStore shutting down."),o.fu.add(5),yield Sc(o),o._u.shutdown(),o.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Pp(i,e=10240){let t=0;return{read:()=>(0,U.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,U.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Sd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mm{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new $e,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(o=>{o&&o.xu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,U.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,U.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,U.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const o=e.Ea.decode(t),u=Number(o);isNaN(u)&&e.Pa(`length string (${o}) is not valid number`);const d=yield e.ba(u);return new pm(JSON.parse(d),t.length+u)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,U.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,U.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const o=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,U.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class xm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,U.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new X($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,U.Z)(function*(d,m){const D=B(d),V=Nl(D.M)+"/documents",W={documents:m.map(st=>Pu(D.M,st))},re=yield D.ho("BatchGetDocuments",V,W),we=new Map;re.forEach(st=>{const at=function dh(i,e){return"found"in e?function(t,o){b(!!o.found);const u=Lr(t,o.found.name),d=ts(o.found.updateTime),m=new z({mapValue:{fields:o.found.fields}});return Ce.newFoundDocument(u,d,m)}(i,e):"missing"in e?function(t,o){b(!!o.missing),b(!!o.readTime);const u=Lr(t,o.missing),d=ts(o.readTime);return Ce.newNoDocument(u,d)}(i,e):y()}(D.M,st);we.set(at.key.toString(),at)});const Ge=[];return m.forEach(st=>{const at=we.get(st.toString());b(!!at),Ge.push(at)}),Ge}),function(d,m){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,U.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=It.fromPath(u);e.mutations.push(new Cl(d,e.precondition(d)))}),yield(o=(0,U.Z)(function*(u,d){const m=B(u),D=Nl(m.M)+"/documents",V={writes:d.map(W=>ou(m.M,W))};yield m.oo("Commit",D,V)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw y();t=Ft.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new X($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?bi.updateTime(t):bi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ft.min()))throw new X($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bi.updateTime(t)}return bi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gv{constructor(e,t,o,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=u,this.Sa=5,this.Do=new kh(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,U.Z)(function*(){const t=new xm(e.datastore),o=e.Ca(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.xa(d)}))}).catch(u=>{e.xa(u)})}))}Ca(e){try{const t=this.updateFunction(e);return!Xi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!bl(t)}return!1}}class Om{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=ii.UNAUTHENTICATED,this.clientId=rc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,U.Z)(function*(D){ct("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(ct("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,U.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X($.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $e;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,U.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=Gl(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Rm(i,e){return tf.apply(this,arguments)}function tf(){return tf=(0,U.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),ct("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,U.Z)(function*(d){o.isEqual(d)||(yield qf(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),tf.apply(this,arguments)}function kp(i,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,U.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Lp(i);ct("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>gp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>gp(e.remoteStore,d)),i.onlineComponents=e}),Fp.apply(this,arguments)}function Lp(i){return nf.apply(this,arguments)}function nf(){return nf=(0,U.Z)(function*(i){return i.offlineComponents||(ct("FirestoreClient","Using default OfflineComponentProvider"),yield Rm(i,new Rp)),i.offlineComponents}),nf.apply(this,arguments)}function rf(i){return sf.apply(this,arguments)}function sf(){return sf=(0,U.Z)(function*(i){return i.onlineComponents||(ct("FirestoreClient","Using default OnlineComponentProvider"),yield kp(i,new ef)),i.onlineComponents}),sf.apply(this,arguments)}function Nm(i){return Lp(i).then(e=>e.persistence)}function Vp(i){return Lp(i).then(e=>e.localStore)}function mv(i){return rf(i).then(e=>e.remoteStore)}function Up(i){return rf(i).then(e=>e.syncEngine)}function Xu(i){return Md.apply(this,arguments)}function Md(){return Md=(0,U.Z)(function*(i){const e=yield rf(i),t=e.eventManager;return t.onListen=uv.bind(null,e.syncEngine),t.onUnlisten=lv.bind(null,e.syncEngine),t}),Md.apply(this,arguments)}function vv(i,e,t={}){const o=new $e;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function(u,d,m,D,V){const W=new Sd({next:we=>{d.enqueueAndForget(()=>wp(u,re));const Ge=we.docs.has(m);!Ge&&we.fromCache?V.reject(new X($.UNAVAILABLE,"Failed to get document because the client is offline.")):Ge&&we.fromCache&&D&&"server"===D.source?V.reject(new X($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):V.resolve(we)},error:we=>V.reject(we)}),re=new qh(No(m.path),W,{includeMetadataChanges:!0,Cu:!0});return _p(u,re)}(yield Xu(i),i.asyncQueue,e,t,o)})),o.promise}function Bp(i,e,t={}){const o=new $e;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function(u,d,m,D,V){const W=new Sd({next:we=>{d.enqueueAndForget(()=>wp(u,re)),we.fromCache&&"server"===D.source?V.reject(new X($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):V.resolve(we)},error:we=>V.reject(we)}),re=new qh(m,W,{includeMetadataChanges:!0,Cu:!0});return _p(u,re)}(yield Xu(i),i.asyncQueue,e,t,o)})),o.promise}const jp=new Map;function $p(i,e,t){if(!t)throw new X($.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Hp(i,e,t,o){if(!0===e&&!0===o)throw new X($.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function xd(i){if(!It.isDocumentKey(i))throw new X($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Pm(i){if(It.isDocumentKey(i))throw new X($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Od(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":y()}function ur(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new X($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Od(i);throw new X($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function km(i,e){if(e<=0)throw new X($.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Fm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new X($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new X($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Hp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rd{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fm({}),this._settingsFrozen=!1,e instanceof Di?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new X($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Di(u.options.projectId)}(e))}get app(){if(!this._app)throw new X($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new X($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Rn;switch(t.type){case"gapi":const o=t.client;return b(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new Cs(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new X($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jp.get(e);t&&(ct("ComponentProvider","Removing Datastore"),jp.delete(e),t.terminate())}(this),Promise.resolve()}}class Qr{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qr(this.firestore,e,this._key)}}class Ws{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ws(this.firestore,e,this._query)}}class ha extends Ws{constructor(e,t,o){super(e,t,No(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qr(this.firestore,null,new It(e))}withConverter(e){return new ha(this.firestore,e,this._path)}}function Gp(i,e,...t){if(i=(0,Pe.m9)(i),$p("collection","path",e),i instanceof Rd){const o=Zn.fromString(e,...t);return Pm(o),new ha(i,null,o)}{if(!(i instanceof Qr||i instanceof ha))throw new X($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Zn.fromString(e,...t));return Pm(o),new ha(i.firestore,null,o)}}function zp(i,e,...t){if(i=(0,Pe.m9)(i),1===arguments.length&&(e=rc.R()),$p("doc","path",e),i instanceof Rd){const o=Zn.fromString(e,...t);return xd(o),new Qr(i,null,new It(o))}{if(!(i instanceof Qr||i instanceof ha))throw new X($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Zn.fromString(e,...t));return xd(o),new Qr(i.firestore,i instanceof ha?i.converter:null,new It(o))}}function af(i,e){return i=(0,Pe.m9)(i),e=(0,Pe.m9)(e),(i instanceof Qr||i instanceof ha)&&(e instanceof Qr||e instanceof ha)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Lm(i,e){return i=(0,Pe.m9)(i),e=(0,Pe.m9)(e),i instanceof Ws&&e instanceof Ws&&i.firestore===e.firestore&&Au(i._query,e._query)&&i.converter===e.converter}class J_{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new kh(this,"async_queue_retry"),this.qa=()=>{const t=Ph();t&&ct("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Ph();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Ph();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new $e;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,U.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Lu(t))throw t;ct("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(o=>{throw this.$a=o,this.Ba=!1,er("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(o)),o}).then(o=>(this.Ba=!1,o))));return this.ka=t,t}enqueueAfterDelay(e,t,o){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const u=yp.createAndSchedule(this,e,t,o,d=>this.ja(d));return this.Fa.push(u),u}Ka(){this.$a&&y()}verifyOperationInProgress(){}Wa(){var e=this;return(0,U.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function ql(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Vm{constructor(){this._progressObserver={},this._taskCompletionResolver=new $e,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jr extends Rd{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new J_,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||uf(this),this._firestoreClient.terminate()}}function Ai(i){return i._firestoreClient||uf(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function uf(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new zo(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new Om(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Nd(i,e,t){const o=new $e;return i.asyncQueue.enqueue((0,U.Z)(function*(){try{yield Rm(i,t),yield kp(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(d=u).name?d.code===$.FAILED_PRECONDITION||d.code===$.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var d})).then(()=>o.promise)}function Qp(i){if(i._initialized||i._terminated)throw new X($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new X($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fa(Fn.fromBase64String(e))}catch(t){throw new X($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fa(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fu{constructor(e){this._methodName=e}}class Pd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new X($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Cn(this._lat,e._lat)||Cn(this._long,e._long)}}const Tv=/^__.*__$/;class $m{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new ru(e,this.data,t,this.fieldTransforms)}}class Jp{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Xp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}class Lc{constructor(e,t,o,u,d,m){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===d&&this.Ya(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Lc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.nc(e),u}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.Ya(),u}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Fd(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(Xp(this.Xa)&&Tv.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Hm{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||wd(e)}ac(e,t,o,u=!1){return new Lc({Xa:e,methodName:t,uc:o,path:Hi.emptyPath(),ec:!1,oc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function el(i){const e=i._freezeSettings(),t=wd(i._databaseId);return new Hm(i._databaseId,!!e.ignoreUndefinedProperties,t)}function kd(i,e,t,o,u,d={}){const m=i.ac(d.merge||d.mergeFields?2:0,e,t,u);sg("Data must be an object, but it was:",m,o);const D=ns(o,m);let V,W;if(d.merge)V=new Ls(m.fieldMask),W=m.fieldTransforms;else if(d.mergeFields){const re=[];for(const we of d.mergeFields){const Ge=og(e,we,t);if(!m.contains(Ge))throw new X($.INVALID_ARGUMENT,`Field '${Ge}' is specified in your field mask but missing from your input data.`);ag(re,Ge)||re.push(Ge)}V=new Ls(re),W=m.fieldTransforms.filter(we=>V.covers(we.field))}else V=null,W=m.fieldTransforms;return new $m(new z(D),V,W)}class Vc extends fu{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vc}}function eg(i,e,t){return new Lc({Xa:3,uc:e.settings.uc,methodName:i._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class cf extends fu{_toFieldTransform(e){return new xu(e.path,new Xa)}isEqual(e){return e instanceof cf}}class Gm extends fu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=eg(this,e,!0),o=this.cc.map(d=>Zl(d,t)),u=new eu(o);return new xu(e.path,u)}isEqual(e){return this===e}}class Wm extends fu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=eg(this,e,!0),o=this.cc.map(d=>Zl(d,t)),u=new Mu(o);return new xu(e.path,u)}isEqual(e){return this===e}}class t0 extends fu{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new _l(e.M,Rf(e.M,this.hc));return new xu(e.path,t)}isEqual(e){return this===e}}function tg(i,e,t,o){const u=i.ac(1,e,t);sg("Data must be an object, but it was:",u,o);const d=[],m=z.empty();qa(o,(V,W)=>{const re=df(e,V,t);W=(0,Pe.m9)(W);const we=u.sc(re);if(W instanceof Vc)d.push(re);else{const Ge=Zl(W,we);null!=Ge&&(d.push(re),m.set(re,Ge))}});const D=new Ls(d);return new Jp(m,D,u.fieldTransforms)}function ng(i,e,t,o,u,d){const m=i.ac(1,e,t),D=[og(e,o,t)],V=[u];if(d.length%2!=0)throw new X($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ge=0;Ge<d.length;Ge+=2)D.push(og(e,d[Ge])),V.push(d[Ge+1]);const W=[],re=z.empty();for(let Ge=D.length-1;Ge>=0;--Ge)if(!ag(W,D[Ge])){const st=D[Ge];let at=V[Ge];at=(0,Pe.m9)(at);const Gt=m.sc(st);if(at instanceof Vc)W.push(st);else{const Mn=Zl(at,Gt);null!=Mn&&(W.push(st),re.set(st,Mn))}}const we=new Ls(W);return new Jp(re,we,m.fieldTransforms)}function rg(i,e,t,o=!1){return Zl(t,i.ac(o?4:3,e))}function Zl(i,e){if(ig(i=(0,Pe.m9)(i)))return sg("Unsupported field value:",e,i),ns(i,e);if(i instanceof fu)return function(t,o){if(!Xp(o.Xa))throw o.rc(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.rc(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const m of t){let D=Zl(m,o.ic(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Pe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Rf(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=gi.fromDate(t);return{timestampValue:xl(o.M,u)}}if(t instanceof gi){const u=new gi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xl(o.M,u)}}if(t instanceof Pd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fa)return{bytesValue:Po(o.M,t._byteString)};if(t instanceof Qr){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.rc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ol(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.rc(`Unsupported field value: ${Od(t)}`)}(i,e)}function ns(i,e){const t={};return Yc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qa(i,(o,u)=>{const d=Zl(u,e.tc(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function ig(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof gi||i instanceof Pd||i instanceof fa||i instanceof Qr||i instanceof fu)}function sg(i,e,t){if(!ig(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Od(t);throw e.rc("an object"===o?i+" a custom object":i+" "+o)}var o}function og(i,e,t){if((e=(0,Pe.m9)(e))instanceof hu)return e._internalPath;if("string"==typeof e)return df(i,e);throw Fd("Field path arguments must be of type string or ",i,!1,void 0,t)}const zm=new RegExp("[~\\*/\\[\\]]");function df(i,e,t){if(e.search(zm)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new hu(...e.split("."))._internalPath}catch(o){throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Fd(i,e,t,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let V="";return(d||m)&&(V+=" (found",d&&(V+=` in field ${o}`),m&&(V+=` in document ${u}`),V+=")"),new X($.INVALID_ARGUMENT,D+i+V)}function ag(i,e){return i.some(t=>t.isEqual(e))}class ja{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Qr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Av(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Av extends ja{data(){return super.data()}}function hf(i,e){return"string"==typeof e?df(i,e):e instanceof hu?e._internalPath:e._delegate._internalPath}class tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pu extends ja{constructor(e,t,o,u,d,m){super(e,t,o,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(hf("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Uc extends pu{data(e={}){return super.data(e)}}class Yl{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new tl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Uc(this._firestore,this._userDataWriter,o.key,o,new tl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>({type:"added",doc:new Uc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new tl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const D=new Uc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new tl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let V=-1,W=-1;return 0!==m.type&&(V=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),W=d.indexOf(m.doc.key)),{type:Km(m.type),doc:D,oldIndex:V,newIndex:W}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Km(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}function ff(i,e){return i instanceof pu&&e instanceof pu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Yl&&e instanceof Yl&&i._firestore===e._firestore&&Lm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function pa(i){if(bu(i)&&0===i.explicitOrderBy.length)throw new X($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ld{}function nl(i,...e){for(const t of e)i=t._apply(i);return i}class $a extends Ld{constructor(e,t,o){super(),this.lc=e,this.fc=t,this.dc=o,this.type="where"}_apply(e){const t=el(e.firestore),o=function(u,d,m,D,V,W,re){let we;if(V.isKeyField()){if("array-contains"===W||"array-contains-any"===W)throw new X($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${W}' queries on documentId().`);if("in"===W||"not-in"===W){dg(re,W);const st=[];for(const at of re)st.push(cg(D,u,at));we={arrayValue:{values:st}}}else we=cg(D,u,re)}else"in"!==W&&"not-in"!==W&&"array-contains-any"!==W||dg(re,W),we=rg(m,"where",re,"in"===W||"not-in"===W);const Ge=yi.create(V,W,we);return function(st,at){if(at.S()){const Mn=Tu(st);if(null!==Mn&&!Mn.isEqual(at.field))throw new X($.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Mn.toString()}' and '${at.field.toString()}'`);const Xr=Qd(st);null!==Xr&&Vd(0,at.field,Xr)}const Gt=function(Mn,Xr){for(const ai of Mn.filters)if(Xr.indexOf(ai.op)>=0)return ai.op;return null}(st,function(Mn){switch(Mn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(at.op));if(null!==Gt)throw new X($.INVALID_ARGUMENT,Gt===at.op?`Invalid query. You cannot use more than one '${at.op.toString()}' filter.`:`Invalid query. You cannot use '${at.op.toString()}' filters with '${Gt.toString()}' filters.`)}(u,Ge),Ge}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Ws(e.firestore,e.converter,function(u,d){const m=u.filters.concat([d]);return new mo(u.path,u.collectionGroup,u.explicitOrderBy.slice(),m,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class ma extends Ld{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new X($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new X($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new ml(u,d);return function(D,V){if(null===Qd(D)){const W=Tu(D);null!==W&&Vd(0,W,V.field)}}(o,m),m}(e._query,this.lc,this._c);return new Ws(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new mo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ug extends Ld{constructor(e,t,o){super(),this.type=e,this.wc=t,this.mc=o}_apply(e){return new Ws(e.firestore,e.converter,oc(e._query,this.wc,this.mc))}}class Zm extends Ld{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new Ws(e.firestore,e.converter,(u=t,new mo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class Bc extends Ld{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new Ws(e.firestore,e.converter,(u=t,new mo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function Qm(i,e,t,o){if(t[0]=(0,Pe.m9)(t[0]),t[0]instanceof ja)return function(u,d,m,D,V){if(!D)throw new X($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const W=[];for(const re of Ja(u))if(re.field.isKeyField())W.push(Oo(d,D.key));else{const we=D.data.field(re.field);if(Gi(we))throw new X($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+re.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===we){const Ge=re.field.canonicalString();throw new X($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ge}' (used as the orderBy) does not exist.`)}W.push(we)}return new Ro(W,V)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=el(i.firestore);return function(d,m,D,V,W,re){const we=d.explicitOrderBy;if(W.length>we.length)throw new X($.INVALID_ARGUMENT,`Too many arguments provided to ${V}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ge=[];for(let st=0;st<W.length;st++){const at=W[st];if(we[st].field.isKeyField()){if("string"!=typeof at)throw new X($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${V}(), but got a ${typeof at}`);if(!yl(d)&&-1!==at.indexOf("/"))throw new X($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${V}() must be a plain document ID, but '${at}' contains a slash.`);const Gt=d.path.child(Zn.fromString(at));if(!It.isDocumentKey(Gt))throw new X($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${V}() must result in a valid document path, but '${Gt}' is not because it contains an odd number of segments.`);const Mn=new It(Gt);Ge.push(Oo(m,Mn))}else{const Gt=rg(D,V,at);Ge.push(Gt)}}return new Ro(Ge,re)}(i._query,i.firestore._databaseId,u,e,t,o)}}function cg(i,e,t){if("string"==typeof(t=(0,Pe.m9)(t))){if(""===t)throw new X($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yl(e)&&-1!==t.indexOf("/"))throw new X($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Zn.fromString(t));if(!It.isDocumentKey(o))throw new X($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Oo(i,new It(o))}if(t instanceof Qr)return Oo(i,t._key);throw new X($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Od(t)}.`)}function dg(i,e){if(!Array.isArray(i)||0===i.length)throw new X($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new X($.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Vd(i,e,t){if(!t.isEqual(e))throw new X($.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class hg{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw y()}}convertObject(e,t){const o={};return qa(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Pd(si(e.latitude),si(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=As(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const t=Ts(e);return new gi(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Zn.fromString(e);b(fn(o));const u=new Di(o.get(1),o.get(3)),d=new It(o.popFirst(5));return u.isEqual(t)||er(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Ud(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Jm extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new fa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,t)}}class pf{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=el(e)}set(e,t,o){this._verifyNotCommitted();const u=ya(e,this._firestore),d=Ud(u.converter,t,o),m=kd(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,bi.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=ya(e,this._firestore);let m;return m="string"==typeof(t=(0,Pe.m9)(t))||t instanceof hu?ng(this._dataReader,"WriteBatch.update",d._key,t,o,u):tg(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,bi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ya(e,this._firestore);return this._mutations=this._mutations.concat(new Dl(t._key,bi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ya(i,e){if((i=(0,Pe.m9)(i)).firestore!==e)throw new X($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class rl extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new fa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,t)}}function fg(i,e,t){i=ur(i,Qr);const o=ur(i.firestore,Jr),u=Ud(i.converter,e,t);return jc(o,[kd(el(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,bi.none())])}function sy(i,e,t,...o){i=ur(i,Qr);const u=ur(i.firestore,Jr),d=el(u);let m;return m="string"==typeof(e=(0,Pe.m9)(e))||e instanceof hu?ng(d,"updateDoc",i._key,e,t,o):tg(d,"updateDoc",i._key,e),jc(u,[m.toMutation(i._key,bi.exists(!0))])}function oy(i,...e){var t,o,u;i=(0,Pe.m9)(i);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||ql(e[m])||(d=e[m],m++);const D={includeMetadataChanges:d.includeMetadataChanges};if(ql(e[m])){const we=e[m];e[m]=null===(t=we.next)||void 0===t?void 0:t.bind(we),e[m+1]=null===(o=we.error)||void 0===o?void 0:o.bind(we),e[m+2]=null===(u=we.complete)||void 0===u?void 0:u.bind(we)}let V,W,re;if(i instanceof Qr)W=ur(i.firestore,Jr),re=No(i._key.path),V={next:we=>{e[m]&&e[m](pg(W,i,we))},error:e[m+1],complete:e[m+2]};else{const we=ur(i,Ws);W=ur(we.firestore,Jr),re=we._query;const Ge=new rl(W);V={next:st=>{e[m]&&e[m](new Yl(W,Ge,we,st))},error:e[m+1],complete:e[m+2]},pa(i._query)}return function(we,Ge,st,at){const Gt=new Sd(at),Mn=new qh(Ge,Gt,st);return we.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return _p(yield Xu(we),Mn)})),()=>{Gt.Ia(),we.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return wp(yield Xu(we),Mn)}))}}(Ai(W),re,D,V)}function jc(i,e){return function(t,o){const u=new $e;return t.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function wm(i,e,t){return Im.apply(this,arguments)}(yield Up(t),o,u)})),u.promise}(Ai(i),e)}function pg(i,e,t){const o=t.docs.get(e._key),u=new rl(i);return new pu(i,u,e._key,o,new tl(t.hasPendingWrites,t.fromCache),e.converter)}class kv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=el(e)}get(e){const t=ya(e,this._firestore),o=new Jm(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return y();const d=u[0];if(d.isFoundDocument())return new ja(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new ja(this._firestore,o,t._key,null,t.converter);throw y()})}set(e,t,o){const u=ya(e,this._firestore),d=Ud(u.converter,t,o),m=kd(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,m),this}update(e,t,o,...u){const d=ya(e,this._firestore);let m;return m="string"==typeof(t=(0,Pe.m9)(t))||t instanceof hu?ng(this._dataReader,"Transaction.update",d._key,t,o,u):tg(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=ya(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ya(e,this._firestore),o=new rl(this._firestore);return super.get(e).then(u=>new pu(this._firestore,o,t._key,u._document,new tl(!1,!1),t.converter))}}function gf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new X("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function gg(){if("undefined"==typeof Uint8Array)throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function mg(){if(!function zd(){return"undefined"!=typeof atob}())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){co=J.SDK_VERSION,(0,J._registerComponent)(new he.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Jr(u,new tr(t.getProvider("auth-internal")),new Wo(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC")),(0,J.registerVersion)(za,"3.4.8",i),(0,J.registerVersion)(za,"3.4.8","esm2017")}();class $c{constructor(e){this._delegate=e}static fromBase64String(e){return mg(),new $c(fa.fromBase64String(e))}static fromUint8Array(e){return gg(),new $c(fa.fromUint8Array(e))}toBase64(){return mg(),this._delegate.toBase64()}toUint8Array(){return gg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mf(i){return function ly(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class cy{enableIndexedDbPersistence(e,t){return function e0(i,e){Qp(i=ur(i,Jr));const t=Ai(i),o=i._freezeSettings(),u=new ef;return Nd(t,u,new Np(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Dv(i){Qp(i=ur(i,Jr));const e=Ai(i),t=i._freezeSettings(),o=new ef;return Nd(e,o,new Sm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function lf(i){if(i._initialized&&!i._terminated)throw new X($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $e;return i._queue.enqueueAndForgetEvenWhileRestricted((0,U.Z)(function*(){try{yield(t=(0,U.Z)(function*(o){if(!aa.vt())return Promise.resolve();const u=o+"main";yield aa.delete(u)}),function(o){return t.apply(this,arguments)})(Sh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class yg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Di||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&I("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function Iv(i,e,t,o={}){var u;const d=(i=ur(i,Rd))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&I("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let m,D;if("string"==typeof o.mockUserToken)m=o.mockUserToken,D=ii.MOCK_USER;else{m=(0,Pe.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const V=o.mockUserToken.sub||o.mockUserToken.user_id;if(!V)throw new X($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new ii(V)}i._authCredentials=new zt(new Dt(m,D))}}(this._delegate,e,t,o)}enableNetwork(){return function Bm(i){return function yv(i){return i.asyncQueue.enqueue((0,U.Z)(function*(){const e=yield Nm(i),t=yield mv(i);return e.setNetworkEnabled(!0),function(o){const u=B(o);return u.fu.delete(0),Fh(u)}(t)}))}(Ai(i=ur(i,Jr)))}(this._delegate)}disableNetwork(){return function Zp(i){return function Z_(i){return i.asyncQueue.enqueue((0,U.Z)(function*(){const e=yield Nm(i),t=yield mv(i);return e.setNetworkEnabled(!1),(o=(0,U.Z)(function*(u){const d=B(u);d.fu.add(0),yield Sc(d),d.wu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Ai(i=ur(i,Jr)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Hp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Um(i){return function(e){const t=new $e;return e.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function Ap(i,e){return Sp.apply(this,arguments)}(yield Up(e),t)})),t.promise}(Ai(i=ur(i,Jr)))}(this._delegate)}onSnapshotsInSync(e){return function Pv(i,e){return function Q_(i,e){const t=new Sd(e);return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return o=yield Xu(i),u=t,B(o).Eu.add(u),void u.next();var o,u})),()=>{t.Ia(),i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return o=yield Xu(i),u=t,void B(o).Eu.delete(u);var o,u}))}}(Ai(i=ur(i,Jr)),ql(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wc(this,Gp(this._delegate,e))}catch(t){throw wo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ss(this,zp(this._delegate,e))}catch(t){throw wo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Io(this,function Wp(i,e){if(i=ur(i,Rd),$p("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ws(i,null,(t=e,new mo(Zn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw wo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Fv(i,e){return function Ev(i,e){const t=new $e;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){const o=yield(u=i,rf(u).then(d=>d.datastore));var u;new gv(i.asyncQueue,o,e,t).run()})),t.promise}(Ai(i=ur(i,Jr)),t=>e(new kv(i,t)))}(this._delegate,t=>e(new il(this,t)))}batch(){return Ai(this._delegate),new hy(new pf(this._delegate,e=>jc(this._delegate,e)))}loadBundle(e){return function jm(i,e){const t=Ai(i=ur(i,Jr)),o=new Vm;return function Fc(i,e,t,o){const u=function(d,m){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,V=function(V,W){if(V instanceof Uint8Array)return Pp(V,W);if(V instanceof ArrayBuffer)return Pp(new Uint8Array(V),W);if(V instanceof ReadableStream)return V.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Mm(V,m);var V}(t,wd(e));i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){!function Am(i,e,t){const o=B(i);var u;(u=(0,U.Z)(function*(d,m,D){try{const V=yield m.getMetadata();if(yield function(Ge,st){const at=B(Ge),Gt=ts(st.createTime);return at.persistence.runTransaction("hasNewerBundle","readonly",Mn=>at._s.getBundleMetadata(Mn,st.id)).then(Mn=>!!Mn&&Mn.createTime.compareTo(Gt)>=0)}(d.localStore,V))return yield m.close(),D._completeWith({taskState:"Success",documentsLoaded:(Ge=V).totalDocuments,bytesLoaded:Ge.totalBytes,totalDocuments:Ge.totalDocuments,totalBytes:Ge.totalBytes}),Promise.resolve(new Set);D._updateProgress(gm(V));const W=new ov(V,d.localStore,m.M);let re=yield m.da();for(;re;){const Ge=yield W.ku(re);Ge&&D._updateProgress(Ge),re=yield m.da()}const we=yield W.complete();return yield ta(d,we.Fu,void 0),yield function(Ge,st){const at=B(Ge);return at.persistence.runTransaction("Save bundle","readwrite",Gt=>at._s.saveBundleMetadata(Gt,st))}(d.localStore,V),D._completeWith(we.progress),Promise.resolve(we.Ou)}catch(V){return I("SyncEngine",`Loading bundle failed with ${V}`),D._failWith(V),Promise.resolve(new Set)}var Ge}),function(d,m,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Up(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Yp(i,e){return function wv(i,e){return i.asyncQueue.enqueue((0,U.Z)(function*(){return function(t,o){const u=B(t);return u.persistence.runTransaction("Get named query","readonly",d=>u._s.getNamedQuery(d,o))}(yield Vp(i),e)}))}(Ai(i=ur(i,Jr)),e).then(t=>t?new Ws(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Io(this,t):null)}}class Bd extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new $c(new fa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ss.forKey(t,this.firestore,null)}}class il{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}get(e){const t=Jl(e);return this._delegate.get(t).then(o=>new Hc(this._firestore,new pu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Jl(e);return o?(gf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Jl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Jl(e);return this._delegate.delete(t),this}}class hy{constructor(e){this._delegate=e}set(e,t,o){const u=Jl(e);return o?(gf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Jl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Jl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ql{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Uc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gc(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Ql.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Ql(e,new Bd(e),t),u.set(t,d)),d}}Ql.INSTANCES=new WeakMap;class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ss(t,new Qr(t._delegate,o,new It(e)))}static forKey(e,t,o){return new Ss(t,new Qr(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Wc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wc(this.firestore,Gp(this._delegate,e))}catch(t){throw wo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Pe.m9)(e))instanceof Qr&&af(this._delegate,e)}set(e,t){t=gf("DocumentReference.set",t);try{return t?fg(this._delegate,e,t):fg(this._delegate,e)}catch(o){throw wo(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?sy(this._delegate,e):sy(this._delegate,e,t,...o)}catch(u){throw wo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Rv(i){return jc(ur(i.firestore,Jr),[new Dl(i._key,bi.none())])}(this._delegate)}onSnapshot(...e){const t=yf(e),o=Hv(e,u=>new Hc(this.firestore,new pu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return oy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ey(i){i=ur(i,Qr);const e=ur(i.firestore,Jr),t=Ai(e),o=new rl(e);return function Y_(i,e){const t=new $e;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return(o=(0,U.Z)(function*(u,d,m){try{const D=yield function(V,W){const re=B(V);return re.persistence.runTransaction("read document","readonly",we=>re.ci.Ls(we,W))}(u,d);D.isFoundDocument()?m.resolve(D):D.isNoDocument()?m.resolve(null):m.reject(new X($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const V=Gl(D,`Failed to get document '${d} from cache`);m.reject(V)}}),function(u,d,m){return o.apply(this,arguments)})(yield Vp(i),e,t);var o})),t.promise}(t,i._key).then(u=>new pu(e,o,i._key,u,new tl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ty(i){i=ur(i,Qr);const e=ur(i.firestore,Jr);return vv(Ai(e),i._key,{source:"server"}).then(t=>pg(e,i,t))}(this._delegate):function Xm(i){i=ur(i,Qr);const e=ur(i.firestore,Jr);return vv(Ai(e),i._key).then(t=>pg(e,i,t))}(this._delegate),t.then(o=>new Hc(this.firestore,new pu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?Ql.getInstance(this.firestore,e):null))}}function wo(i,e,t){return i.message=i.message.replace(e,t),i}function yf(i){for(const e of i)if("object"==typeof e&&!mf(e))return e;return{}}function Hv(i,e){var t,o;let u;return u=mf(i[0])?i[0]:mf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Hc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ss(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ff(this._delegate,e._delegate)}}class Gc extends Hc{data(e){const t=this._delegate.data(e);return function N(i,e){i||y()}(void 0!==t),t}}class Io{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}where(e,t,o){try{return new Io(this.firestore,nl(this._delegate,function ga(i,e,t){const o=e,u=hf("where",i);return new $a(u,o,t)}(e,t,o)))}catch(u){throw wo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Io(this.firestore,nl(this._delegate,function qm(i,e="asc"){const t=e,o=hf("orderBy",i);return new ma(o,t)}(e,t)))}catch(o){throw wo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Io(this.firestore,nl(this._delegate,function Sv(i){return km("limit",i),new ug("limit",i,"F")}(e)))}catch(t){throw wo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Io(this.firestore,nl(this._delegate,function Mv(i){return km("limitToLast",i),new ug("limitToLast",i,"L")}(e)))}catch(t){throw wo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Io(this.firestore,nl(this._delegate,function xv(...i){return new Zm("startAt",i,!0)}(...e)))}catch(t){throw wo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Io(this.firestore,nl(this._delegate,function lg(...i){return new Zm("startAfter",i,!1)}(...e)))}catch(t){throw wo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Io(this.firestore,nl(this._delegate,function Ov(...i){return new Bc("endBefore",i,!1)}(...e)))}catch(t){throw wo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Io(this.firestore,nl(this._delegate,function Ym(...i){return new Bc("endAt",i,!0)}(...e)))}catch(t){throw wo(t,"endAt()","Query.endAt()")}}isEqual(e){return Lm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ry(i){i=ur(i,Ws);const e=ur(i.firestore,Jr),t=Ai(e),o=new rl(e);return function _v(i,e){const t=new $e;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return(o=(0,U.Z)(function*(u,d,m){try{const D=yield lu(u,d,!0),V=new bp(d,D.li),W=V.Gu(D.documents),re=V.applyChanges(W,!1);m.resolve(re.snapshot)}catch(D){const V=Gl(D,`Failed to execute query '${d} against cache`);m.reject(V)}}),function(u,d,m){return o.apply(this,arguments)})(yield Vp(i),e,t);var o})),t.promise}(t,i._query).then(u=>new Yl(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function iy(i){i=ur(i,Ws);const e=ur(i.firestore,Jr),t=Ai(e),o=new rl(e);return Bp(t,i._query,{source:"server"}).then(u=>new Yl(e,o,i,u))}(this._delegate):function ny(i){i=ur(i,Ws);const e=ur(i.firestore,Jr),t=Ai(e),o=new rl(e);return pa(i._query),Bp(t,i._query).then(u=>new Yl(e,o,i,u))}(this._delegate),t.then(o=>new vg(this.firestore,new Yl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=yf(e),o=Hv(e,u=>new vg(this.firestore,new Yl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return oy(this._delegate,t,o)}withConverter(e){return new Io(this.firestore,this._delegate.withConverter(e?Ql.getInstance(this.firestore,e):null))}}class yn{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Io(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yn(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Gc(this._firestore,o))})}isEqual(e){return ff(this._delegate,e._delegate)}}class Wc extends Io{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ss(this.firestore,e):null}doc(e){try{return new Ss(this.firestore,void 0===e?zp(this._delegate):zp(this._delegate,e))}catch(t){throw wo(t,"doc()","CollectionReference.doc()")}}add(e){return function Nv(i,e){const t=ur(i.firestore,Jr),o=zp(i),u=Ud(i.converter,e);return jc(t,[kd(el(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,bi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Ss(this.firestore,t))}isEqual(e){return af(this._delegate,e._delegate)}withConverter(e){return new Wc(this.firestore,this._delegate.withConverter(e?Ql.getInstance(this.firestore,e):null))}}function Jl(i){return ur(i,Qr)}class zc{constructor(...e){this._delegate=new hu(...e)}static documentId(){return new zc(Hi.keyField().canonicalString())}isEqual(e){return(e=(0,Pe.m9)(e))instanceof hu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Vv(){return new cf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xl(e)}static delete(){const e=function Lv(){return new Vc("deleteField")}();return e._methodName="FieldValue.delete",new Xl(e)}static arrayUnion(...e){const t=function Uv(...i){return new Gm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Xl(t)}static arrayRemove(...e){const t=function Bv(...i){return new Wm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Xl(t)}static increment(e){const t=function jv(i){return new t0("increment",i)}(e);return t._methodName="FieldValue.increment",new Xl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vf={Firestore:yg,GeoPoint:Pd,Timestamp:gi,Blob:$c,Transaction:il,WriteBatch:hy,DocumentReference:Ss,DocumentSnapshot:Hc,Query:Io,QueryDocumentSnapshot:Gc,QuerySnapshot:vg,CollectionReference:Wc,FieldPath:zc,FieldValue:Xl,setLogLevel:function dy(i){!function Fs(i){ls.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function ki(i){(function _f(i,e){i.INTERNAL.registerComponent(new he.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},vf)))})(i,(e,t)=>new yg(e,t,new cy)),i.registerVersion("@firebase/firestore-compat","0.1.17")}(j.Z);var ec=P(1205),fy=P(440),Gv=P(127);function _g(i,e){return function Wv(i,e=K.z){return new Y.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function Ef(i,e){return _g(i,e).pipe((0,Ze.U)(t=>({payload:t,type:"query"})))}function jd(i,e){return Ef(i,e).pipe((0,nt.O)(void 0),Me(),(0,Ze.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((m,D)=>{const V=u.find(re=>re.doc.ref.isEqual(m.ref)),W=null==t?void 0:t.payload.docs.find(re=>re.ref.isEqual(m.ref));V&&JSON.stringify(V.doc.metadata)===JSON.stringify(m.metadata)||!V&&W&&JSON.stringify(W.metadata)===JSON.stringify(m.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:m}})}),d}))}function gy(i,e,t){return jd(i,t).pipe((0,He.R)((o,u)=>function zv(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function $d(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Eg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Eg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Eg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function se(i,e=le.y){return i=null!=i?i:Ie,(0,Ae.e)((t,o)=>{let u,d=!0;t.subscribe((0,Se.x)(o,m=>{const D=e(m);(d||!i(u,D))&&(d=!1,u=D,o.next(m))}))})}(),(0,Ze.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Eg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function my(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class yy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=jd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ze.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,nt.O)(void 0),Me(),(0,pt.h)(([o,u])=>u.length>0||!o),(0,Ze.U)(([o,u])=>u),De.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,He.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(De.iC)}valueChanges(e={}){return Ef(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ze.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),De.iC)}get(e){return(0,ye.D)(this.query.get(e)).pipe(De.iC)}add(e){return this.ref.add(e)}doc(e){return new vy(this.ref.doc(e),this.afs)}}class vy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=Kc(o,t);return new yy(u,d,this.afs)}snapshotChanges(){return function py(i,e){return _g(i,e).pipe((0,nt.O)(void 0),Me(),(0,Ze.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(De.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ze.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ye.D)(this.ref.get(e)).pipe(De.iC)}}class wf{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jd(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ze.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,pt.h)(t=>t.length>0),De.iC):jd(this.query,this.afs.schedulers.outsideAngular).pipe(De.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,He.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(De.iC)}valueChanges(e={}){return Ef(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ze.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),De.iC)}get(e){return(0,ye.D)(this.query.get(e)).pipe(De.iC)}}const wg=new p.OlP("angularfire2.enableFirestorePersistence"),Ig=new p.OlP("angularfire2.firestore.persistenceSettings"),_y=new p.OlP("angularfire2.firestore.settings"),Kv=new p.OlP("angularfire2.firestore.use-emulator");function Kc(i,e=(t=>t)){return{query:e(i),ref:i}}let qc=(()=>{class i{constructor(t,o,u,d,m,D,V,W,re,we,Ge,st,at,Gt,Mn,Xr,ai){this.schedulers=V;const Vr=(0,Be.on)(t,D,o),rs=re;we&&(0,ec.nw)(Vr,D,Ge,at,Gt,Mn,st,Xr),[this.firestore,this.persistenceEnabled$]=(0,Be.cc)(`${Vr.name}.firestore`,"AngularFirestore",Vr.name,()=>{const ui=D.runOutsideAngular(()=>Vr.firestore());if(d&&ui.settings(d),rs&&ui.useEmulator(...rs),u&&!(0,Re.PM)(m)){const Si=()=>{try{return(0,ye.D)(ui.enablePersistence(W||void 0).then(()=>!0,()=>!1))}catch(zs){return"undefined"!=typeof console&&console.warn(zs),(0,fe.of)(!1)}};return[ui,D.runOutsideAngular(Si)]}return[ui,(0,fe.of)(!1)]},[d,rs,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:m}=Kc(u,o),D=this.schedulers.ngZone.run(()=>d);return new yy(D,m,this)}collectionGroup(t,o){const u=o||(m=>m),d=this.firestore.collectionGroup(t);return new wf(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new vy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Be.Dh),p.LFG(Be.xv,8),p.LFG(wg,8),p.LFG(_y,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(De.HU),p.LFG(Ig,8),p.LFG(Kv,8),p.LFG(ec.zQ,8),p.LFG(ec.Qv,8),p.LFG(ec.L6,8),p.LFG(ec._Q,8),p.LFG(ec.rT,8),p.LFG(ec.lh,8),p.LFG(ec.f7,8),p.LFG(fy.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),qv=(()=>{class i{constructor(){Gv.Z.registerVersion("angularfire",De.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:wg,useValue:!0},{provide:Ig,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[qc]}),i})()},2011:(wt,Ue,P)=>{P.d(Ue,{Dh:()=>Se,GT:()=>De,cc:()=>Ze,hO:()=>nt,on:()=>le,pX:()=>fe,xv:()=>Me});var p=P(5e3),K=P(127),Y=P(5813);wt=P.hmd(wt);const ye=["ngOnDestroy"],fe=(Re,mt,j,U={})=>new Proxy(Re,{get:(J,he)=>j.runOutsideAngular(()=>{var Oe;if(Re[he])return(null===(Oe=null==U?void 0:U.spy)||void 0===Oe?void 0:Oe.get)&&U.spy.get(he,Re[he]),Re[he];if(ye.indexOf(he)>-1)return()=>{};const Pe=mt.toPromise().then(Te=>{const pe=Te&&Te[he];return"function"==typeof pe?pe.bind(Te):pe&&pe.then?pe.then(Z=>j.run(()=>Z)):j.run(()=>pe)});return new Proxy(()=>{},{get:(Te,pe)=>Pe[pe],apply:(Te,pe,Z)=>Pe.then(Ee=>{var ue;const We=Ee&&Ee(...Z);return(null===(ue=null==U?void 0:U.spy)||void 0===ue?void 0:ue.apply)&&U.spy.apply(he,Z,We),We})})})}),De=(Re,mt)=>{mt.forEach(j=>{Object.getOwnPropertyNames(j.prototype||j).forEach(U=>{Object.defineProperty(Re.prototype,U,Object.getOwnPropertyDescriptor(j.prototype||j,U))})})};class Ae{constructor(mt){return mt}}const Se=new p.OlP("angularfire2.app.options"),Me=new p.OlP("angularfire2.app.name");function le(Re,mt,j){const J="object"==typeof j&&j||{};J.name=J.name||"string"==typeof j&&j||"[DEFAULT]";const Oe=K.Z.apps.filter(Pe=>Pe&&Pe.name===J.name)[0]||mt.runOutsideAngular(()=>K.Z.initializeApp(Re,J));try{JSON.stringify(Re)!==JSON.stringify(Oe.options)&&se("error",`${Oe.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Pe){}return new Ae(Oe)}const se=(Re,...mt)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Re](...mt)},Ie={provide:Ae,useFactory:le,deps:[Se,p.R0b,[new p.FiY,Me]]};let nt=(()=>{class Re{constructor(j){K.Z.registerVersion("angularfire",Y.q4.full,"core"),K.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),K.Z.registerVersion("angular",p.q4F.full,j.toString())}static initializeApp(j,U){return{ngModule:Re,providers:[{provide:Se,useValue:j},{provide:Me,useValue:U}]}}}return Re.\u0275fac=function(j){return new(j||Re)(p.LFG(p.Lbi))},Re.\u0275mod=p.oAB({type:Re}),Re.\u0275inj=p.cJS({providers:[Ie]}),Re})();function Ze(Re,mt,j,U,J){const[,he,Oe]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===Re)||[];if(he)return function He(Re,mt){try{return Re.toString()===mt.toString()}catch(j){return Re===mt}}(J,Oe)||(Be("error",`${mt} was already initialized on the ${j} Firebase App with different settings.${pt?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:J,was:Oe})),he;{const Pe=U();return globalThis.\u0275AngularfireInstanceCache.push([Re,Pe,J]),Pe}}const pt=!!wt.hot,Be=(Re,...mt)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Re](...mt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(wt,Ue,P)=>{P.d(Ue,{q4:()=>Ma,iC:()=>sa,HU:()=>Oo,vb:()=>Mo,JM:()=>po});var p=P(5e3),K=P(5867),Y=P(5861),ye=P(9681),fe=P(2090),De=P(4859),Ae=P(1877);const Se="@firebase/installations",se="w:0.5.8",Ie="FIS_v2",Re=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function mt(T){return T instanceof fe.ZR&&T.code.includes("request-failed")}function j({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function U(T){return{token:T.token,requestStatus:2,expiresIn:Z(T.expiresIn),creationTime:Date.now()}}function J(T,O){return he.apply(this,arguments)}function he(){return(he=(0,Y.Z)(function*(T,O){const ie=(yield O.json()).error;return Re.create("request-failed",{requestName:T,serverCode:ie.code,serverMessage:ie.message,serverStatus:ie.status})})).apply(this,arguments)}function Oe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Pe(T,{refreshToken:O}){const z=Oe(T);return z.append("Authorization",function Ee(T){return`${Ie} ${T}`}(O)),z}function Te(T){return pe.apply(this,arguments)}function pe(){return(pe=(0,Y.Z)(function*(T){const O=yield T();return O.status>=500&&O.status<600?T():O})).apply(this,arguments)}function Z(T){return Number(T.replace("s","000"))}function ue(T,O){return We.apply(this,arguments)}function We(){return(We=(0,Y.Z)(function*({appConfig:T,heartbeatServiceProvider:O},{fid:z}){const ie=j(T),Ce=Oe(T),je=O.getImmediate({optional:!0});if(je){const hn=yield je.getHeartbeatsHeader();hn&&Ce.append("x-firebase-client",hn)}const xt={method:"POST",headers:Ce,body:JSON.stringify({fid:z,authVersion:Ie,appId:T.appId,sdkVersion:se})},Kt=yield Te(()=>fetch(ie,xt));if(Kt.ok){const hn=yield Kt.json();return{fid:hn.fid||z,registrationStatus:2,refreshToken:hn.refreshToken,authToken:U(hn.authToken)}}throw yield J("Create Installation",Kt)})).apply(this,arguments)}function Ne(T){return new Promise(O=>{setTimeout(O,T)})}const gt=/^[cdef][\w-]{21}$/;function dt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const z=function it(T){return function Ot(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return gt.test(z)?z:""}catch(T){return""}}function $t(T){return`${T.appName}!${T.appId}`}const Ct=new Map;function At(T,O){const z=$t(T);Yt(z,O),function sn(T,O){const z=function _n(){return!wn&&"BroadcastChannel"in self&&(wn=new BroadcastChannel("[Firebase] FID Change"),wn.onmessage=T=>{Yt(T.data.key,T.data.fid)}),wn}();z&&z.postMessage({key:T,fid:O}),function Jn(){0===Ct.size&&wn&&(wn.close(),wn=null)}()}(z,O)}function Yt(T,O){const z=Ct.get(T);if(z)for(const ie of z)ie(O)}let wn=null;const $n="firebase-installations-store";let gr=null;function jn(){return gr||(gr=(0,fe.X3)("firebase-installations-database",1,(T,O)=>{0===O&&T.createObjectStore($n)})),gr}function Nt(T,O){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,Y.Z)(function*(T,O){const z=$t(T),Ce=(yield jn()).transaction($n,"readwrite"),je=Ce.objectStore($n),ht=yield je.get(z);return yield je.put(O,z),yield Ce.complete,(!ht||ht.fid!==O.fid)&&At(T,O.fid),O})).apply(this,arguments)}function In(T){return on.apply(this,arguments)}function on(){return(on=(0,Y.Z)(function*(T){const O=$t(T),ie=(yield jn()).transaction($n,"readwrite");yield ie.objectStore($n).delete(O),yield ie.complete})).apply(this,arguments)}function mr(T,O){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,Y.Z)(function*(T,O){const z=$t(T),Ce=(yield jn()).transaction($n,"readwrite"),je=Ce.objectStore($n),ht=yield je.get(z),xt=O(ht);return void 0===xt?yield je.delete(z):yield je.put(xt,z),yield Ce.complete,xt&&(!ht||ht.fid!==xt.fid)&&At(T,xt.fid),xt})).apply(this,arguments)}function Yn(T){return yr.apply(this,arguments)}function yr(){return(yr=(0,Y.Z)(function*(T){let O;const z=yield mr(T.appConfig,ie=>{const Ce=Kr(ie),je=br(T,Ce);return O=je.registrationPromise,je.installationEntry});return""===z.fid?{installationEntry:yield O}:{installationEntry:z,registrationPromise:O}})).apply(this,arguments)}function Kr(T){return Tn(T||{fid:dt(),registrationStatus:0})}function br(T,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(Re.create("app-offline"))};const z={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},ie=function vt(T,O){return St.apply(this,arguments)}(T,z);return{installationEntry:z,registrationPromise:ie}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:Pt(T)}:{installationEntry:O}}function St(){return(St=(0,Y.Z)(function*(T,O){try{const z=yield ue(T,O);return Nt(T.appConfig,z)}catch(z){throw mt(z)&&409===z.customData.serverCode?yield In(T.appConfig):yield Nt(T.appConfig,{fid:O.fid,registrationStatus:0}),z}})).apply(this,arguments)}function Pt(T){return rr.apply(this,arguments)}function rr(){return(rr=(0,Y.Z)(function*(T){let O=yield Mr(T.appConfig);for(;1===O.registrationStatus;)yield Ne(100),O=yield Mr(T.appConfig);if(0===O.registrationStatus){const{installationEntry:z,registrationPromise:ie}=yield Yn(T);return ie||z}return O})).apply(this,arguments)}function Mr(T){return mr(T,O=>{if(!O)throw Re.create("installation-not-found");return Tn(O)})}function Tn(T){return function Mi(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function vr(T,O){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,Y.Z)(function*({appConfig:T,heartbeatServiceProvider:O},z){const ie=Ht(T,z),Ce=Pe(T,z),je=O.getImmediate({optional:!0});if(je){const hn=yield je.getHeartbeatsHeader();hn&&Ce.append("x-firebase-client",hn)}const xt={method:"POST",headers:Ce,body:JSON.stringify({installation:{sdkVersion:se,appId:T.appId}})},Kt=yield Te(()=>fetch(ie,xt));if(Kt.ok)return U(yield Kt.json());throw yield J("Generate Auth Token",Kt)})).apply(this,arguments)}function Ht(T,{fid:O}){return`${j(T)}/${O}/authTokens:generate`}function _r(T){return pn.apply(this,arguments)}function pn(){return(pn=(0,Y.Z)(function*(T,O=!1){let z;const ie=yield mr(T.appConfig,je=>{if(!Lt(je))throw Re.create("not-registered");const ht=je.authToken;if(!O&&ce(ht))return je;if(1===ht.requestStatus)return z=Tt(T,O),je;{if(!navigator.onLine)throw Re.create("app-offline");const xt=_e(je);return z=Wt(T,xt),xt}});return z?yield z:ie.authToken})).apply(this,arguments)}function Tt(T,O){return Je.apply(this,arguments)}function Je(){return(Je=(0,Y.Z)(function*(T,O){let z=yield Et(T.appConfig);for(;1===z.authToken.requestStatus;)yield Ne(100),z=yield Et(T.appConfig);const ie=z.authToken;return 0===ie.requestStatus?_r(T,O):ie})).apply(this,arguments)}function Et(T){return mr(T,O=>{if(!Lt(O))throw Re.create("not-registered");return function ze(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function Wt(T,O){return un.apply(this,arguments)}function un(){return(un=(0,Y.Z)(function*(T,O){try{const z=yield vr(T,O),ie=Object.assign(Object.assign({},O),{authToken:z});return yield Nt(T.appConfig,ie),z}catch(z){if(!mt(z)||401!==z.customData.serverCode&&404!==z.customData.serverCode){const ie=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield Nt(T.appConfig,ie)}else yield In(T.appConfig);throw z}})).apply(this,arguments)}function Lt(T){return void 0!==T&&2===T.registrationStatus}function ce(T){return 2===T.requestStatus&&!function ne(T){const O=Date.now();return O<T.creationTime||T.creationTime+T.expiresIn<O+36e5}(T)}function _e(T){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:O})}function ft(){return(ft=(0,Y.Z)(function*(T){const O=T,{installationEntry:z,registrationPromise:ie}=yield Yn(O);return ie?ie.catch(console.error):_r(O).catch(console.error),z.fid})).apply(this,arguments)}function gn(){return(gn=(0,Y.Z)(function*(T,O=!1){const z=T;return yield qt(z),(yield _r(z,O)).token})).apply(this,arguments)}function qt(T){return ln.apply(this,arguments)}function ln(){return(ln=(0,Y.Z)(function*(T){const{registrationPromise:O}=yield Yn(T);O&&(yield O)})).apply(this,arguments)}function ir(T){return Re.create("missing-app-config-values",{valueName:T})}const li="installations",ot=T=>{const O=T.getProvider("app").getImmediate(),z=function Tr(T){if(!T||!T.options)throw ir("App Configuration");if(!T.name)throw ir("App Name");const O=["projectId","apiKey","appId"];for(const z of O)if(!T.options[z])throw ir(z);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(O);return{app:O,appConfig:z,heartbeatServiceProvider:(0,ye._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},Rt=T=>{const O=T.getProvider("app").getImmediate(),z=(0,ye._getProvider)(O,li).getImmediate();return{getId:()=>function xe(T){return ft.apply(this,arguments)}(z),getToken:Ce=>function jt(T){return gn.apply(this,arguments)}(z,Ce)}};(function en(){(0,ye._registerComponent)(new De.wA(li,ot,"PUBLIC")),(0,ye._registerComponent)(new De.wA("installations-internal",Rt,"PRIVATE"))})(),(0,ye.registerVersion)(Se,"0.5.8"),(0,ye.registerVersion)(Se,"0.5.8","esm2017");const Kn="@firebase/remote-config",or=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ae{constructor(O,z,ie,Ce){this.client=O,this.storage=z,this.storageCache=ie,this.logger=Ce}isCachedDataFresh(O,z){if(!z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ie=Date.now()-z,Ce=ie<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ie}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${Ce}.`),Ce}fetch(O){var z=this;return(0,Y.Z)(function*(){const[ie,Ce]=yield Promise.all([z.storage.getLastSuccessfulFetchTimestampMillis(),z.storage.getLastSuccessfulFetchResponse()]);if(Ce&&z.isCachedDataFresh(O.cacheMaxAgeMillis,ie))return Ce;O.eTag=Ce&&Ce.eTag;const je=yield z.client.fetch(O),ht=[z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===je.status&&ht.push(z.storage.setLastSuccessfulFetchResponse(je)),yield Promise.all(ht),je})()}}function ee(T=navigator){return T.languages&&T.languages[0]||T.language}class Ve{constructor(O,z,ie,Ce,je,ht){this.firebaseInstallations=O,this.sdkVersion=z,this.namespace=ie,this.projectId=Ce,this.apiKey=je,this.appId=ht}fetch(O){var z=this;return(0,Y.Z)(function*(){const[ie,Ce]=yield Promise.all([z.firebaseInstallations.getId(),z.firebaseInstallations.getToken()]),ht=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${z.projectId}/namespaces/${z.namespace}:fetch?key=${z.apiKey}`,xt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},Kt={sdk_version:z.sdkVersion,app_instance_id:ie,app_instance_id_token:Ce,app_id:z.appId,language_code:ee()},hn={method:"POST",headers:xt,body:JSON.stringify(Kt)},Wn=fetch(ht,hn),bn=new Promise((ro,Us)=>{O.signal.addEventListener(()=>{const go=new Error("The operation was aborted.");go.name="AbortError",Us(go)})});let Sr;try{yield Promise.race([Wn,bn]),Sr=yield Wn}catch(ro){let Us="fetch-client-network";throw"AbortError"===ro.name&&(Us="fetch-timeout"),or.create(Us,{originalErrorMessage:ro.message})}let mi=Sr.status;const Oa=Sr.headers.get("ETag")||void 0;let Qa,es;if(200===Sr.status){let ro;try{ro=yield Sr.json()}catch(Us){throw or.create("fetch-client-parse",{originalErrorMessage:Us.message})}Qa=ro.entries,es=ro.state}if("INSTANCE_STATE_UNSPECIFIED"===es?mi=500:"NO_CHANGE"===es?mi=304:("NO_TEMPLATE"===es||"EMPTY_CONFIG"===es)&&(Qa={}),304!==mi&&200!==mi)throw or.create("fetch-status",{httpStatus:mi});return{status:mi,eTag:Oa,config:Qa}})()}}class Dn{constructor(O,z){this.client=O,this.storage=z}fetch(O){var z=this;return(0,Y.Z)(function*(){const ie=(yield z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return z.attemptFetch(O,ie)})()}attemptFetch(O,{throttleEndTimeMillis:z,backoffCount:ie}){var Ce=this;return(0,Y.Z)(function*(){yield function Ke(T,O){return new Promise((z,ie)=>{const Ce=Math.max(O-Date.now(),0),je=setTimeout(z,Ce);T.addEventListener(()=>{clearTimeout(je),ie(or.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,z);try{const je=yield Ce.client.fetch(O);return yield Ce.storage.deleteThrottleMetadata(),je}catch(je){if(!function Qt(T){if(!(T instanceof fe.ZR&&T.customData))return!1;const O=Number(T.customData.httpStatus);return 429===O||500===O||503===O||504===O}(je))throw je;const ht={throttleEndTimeMillis:Date.now()+(0,fe.$s)(ie),backoffCount:ie+1};return yield Ce.storage.setThrottleMetadata(ht),Ce.attemptFetch(O,ht)}})()}}class Fe{constructor(O,z,ie,Ce,je){this.app=O,this._client=z,this._storageCache=ie,this._storage=Ce,this._logger=je,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xe(T,O){const z=T.target.error||void 0;return or.create(O,{originalErrorMessage:z&&z.message})}const lt="app_namespace_store";class kn{constructor(O,z,ie,Ce=function Cr(){return new Promise((T,O)=>{try{const z=indexedDB.open("firebase_remote_config",1);z.onerror=ie=>{O(Xe(ie,"storage-open"))},z.onsuccess=ie=>{T(ie.target.result)},z.onupgradeneeded=ie=>{0===ie.oldVersion&&ie.target.result.createObjectStore(lt,{keyPath:"compositeKey"})}}catch(z){O(or.create("storage-open",{originalErrorMessage:z}))}})}()){this.appId=O,this.appName=z,this.namespace=ie,this.openDbPromise=Ce}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var z=this;return(0,Y.Z)(function*(){const ie=yield z.openDbPromise;return new Promise((Ce,je)=>{const xt=ie.transaction([lt],"readonly").objectStore(lt),Kt=z.createCompositeKey(O);try{const hn=xt.get(Kt);hn.onerror=Wn=>{je(Xe(Wn,"storage-get"))},hn.onsuccess=Wn=>{const bn=Wn.target.result;Ce(bn?bn.value:void 0)}}catch(hn){je(or.create("storage-get",{originalErrorMessage:hn&&hn.message}))}})})()}set(O,z){var ie=this;return(0,Y.Z)(function*(){const Ce=yield ie.openDbPromise;return new Promise((je,ht)=>{const Kt=Ce.transaction([lt],"readwrite").objectStore(lt),hn=ie.createCompositeKey(O);try{const Wn=Kt.put({compositeKey:hn,value:z});Wn.onerror=bn=>{ht(Xe(bn,"storage-set"))},Wn.onsuccess=()=>{je()}}catch(Wn){ht(or.create("storage-set",{originalErrorMessage:Wn&&Wn.message}))}})})()}delete(O){var z=this;return(0,Y.Z)(function*(){const ie=yield z.openDbPromise;return new Promise((Ce,je)=>{const xt=ie.transaction([lt],"readwrite").objectStore(lt),Kt=z.createCompositeKey(O);try{const hn=xt.delete(Kt);hn.onerror=Wn=>{je(Xe(Wn,"storage-delete"))},hn.onsuccess=()=>{Ce()}}catch(hn){je(or.create("storage-delete",{originalErrorMessage:hn&&hn.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class _i{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,Y.Z)(function*(){const z=O.storage.getLastFetchStatus(),ie=O.storage.getLastSuccessfulFetchTimestampMillis(),Ce=O.storage.getActiveConfig(),je=yield z;je&&(O.lastFetchStatus=je);const ht=yield ie;ht&&(O.lastSuccessfulFetchTimestampMillis=ht);const xt=yield Ce;xt&&(O.activeConfig=xt)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function xi(){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,Y.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Ki(){(0,ye._registerComponent)(new De.wA("remote-config",function T(O,{instanceIdentifier:z}){const ie=O.getProvider("app").getImmediate(),Ce=O.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw or.create("registration-window");if(!(0,fe.hl)())throw or.create("indexed-db-unavailable");const{projectId:je,apiKey:ht,appId:xt}=ie.options;if(!je)throw or.create("registration-project-id");if(!ht)throw or.create("registration-api-key");if(!xt)throw or.create("registration-app-id");const Kt=new kn(xt,ie.name,z=z||"firebase"),hn=new _i(Kt),Wn=new Ae.Yd(Kn);Wn.logLevel=Ae.in.ERROR;const bn=new Ve(Ce,ye.SDK_VERSION,z,je,ht,xt),Sr=new Dn(bn,Kt),mi=new ae(Sr,Kt,hn,Wn),Oa=new Fe(ie,mi,hn,Kt,Wn);return function pr(T){const O=(0,fe.m9)(T);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(Oa),Oa},"PUBLIC").setMultipleInstances(!0)),(0,ye.registerVersion)(Kn,"0.3.7"),(0,ye.registerVersion)(Kn,"0.3.7","esm2017")}();const fs="/firebase-messaging-sw.js",wi="/firebase-cloud-messaging-push-scope",$r="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",os="google.c.a.c_id",as="google.c.a.c_l",Ms="google.c.a.ts",us="google.c.a.e";var Hr=(()=>{return(T=Hr||(Hr={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Hr;var T})();function Oi(T){const O=new Uint8Array(T);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ps(T){const z=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ie=atob(z),Ce=new Uint8Array(ie.length);for(let je=0;je<ie.length;++je)Ce[je]=ie.charCodeAt(je);return Ce}const xs="fcm_token_details_db",Er="fcm_token_object_Store";function Ii(T){return Os.apply(this,arguments)}function Os(){return Os=(0,Y.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(je=>je.name).includes(xs))return null;let O=null;return(yield(0,fe.X3)(xs,5,function(){var ie=(0,Y.Z)(function*(Ce,je,ht,xt){var Kt;if(je<2||!Ce.objectStoreNames.contains(Er))return;const hn=xt.objectStore(Er),Wn=yield hn.index("fcmSenderId").get(T);if(yield hn.clear(),Wn)if(2===je){const bn=Wn;if(!bn.auth||!bn.p256dh||!bn.endpoint)return;O={token:bn.fcmToken,createTime:null!==(Kt=bn.createTime)&&void 0!==Kt?Kt:Date.now(),subscriptionOptions:{auth:bn.auth,p256dh:bn.p256dh,endpoint:bn.endpoint,swScope:bn.swScope,vapidKey:"string"==typeof bn.vapidKey?bn.vapidKey:Oi(bn.vapidKey)}}}else if(3===je){const bn=Wn;O={token:bn.fcmToken,createTime:bn.createTime,subscriptionOptions:{auth:Oi(bn.auth),p256dh:Oi(bn.p256dh),endpoint:bn.endpoint,swScope:bn.swScope,vapidKey:Oi(bn.vapidKey)}}}else if(4===je){const bn=Wn;O={token:bn.fcmToken,createTime:bn.createTime,subscriptionOptions:{auth:Oi(bn.auth),p256dh:Oi(bn.p256dh),endpoint:bn.endpoint,swScope:bn.swScope,vapidKey:Oi(bn.vapidKey)}}}});return function(Ce,je,ht,xt){return ie.apply(this,arguments)}}())).close(),yield(0,fe.Lj)(xs),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),ws(O)?O:null}),Os.apply(this,arguments)}function ws(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:O}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const Nr="firebase-messaging-store";let Ri=null;function qs(){return Ri||(Ri=(0,fe.X3)("firebase-messaging-database",1,(T,O)=>{0===O&&T.createObjectStore(Nr)})),Ri}function ar(T){return x.apply(this,arguments)}function x(){return(x=(0,Y.Z)(function*(T){const O=qe(T),ie=yield(yield qs()).transaction(Nr).objectStore(Nr).get(O);if(ie)return ie;{const Ce=yield Ii(T.appConfig.senderId);if(Ce)return yield H(T,Ce),Ce}})).apply(this,arguments)}function H(T,O){return M.apply(this,arguments)}function M(){return(M=(0,Y.Z)(function*(T,O){const z=qe(T),Ce=(yield qs()).transaction(Nr,"readwrite");return yield Ce.objectStore(Nr).put(O,z),yield Ce.complete,O})).apply(this,arguments)}function q(T){return de.apply(this,arguments)}function de(){return(de=(0,Y.Z)(function*(T){const O=qe(T),ie=(yield qs()).transaction(Nr,"readwrite");yield ie.objectStore(Nr).delete(O),yield ie.complete})).apply(this,arguments)}function qe({appConfig:T}){return T.appId}const yt=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Gn(T,O){return Un.apply(this,arguments)}function Un(){return(Un=(0,Y.Z)(function*(T,O){const z=yield Ui(T),ie=tn(O),Ce={method:"POST",headers:z,body:JSON.stringify(ie)};let je;try{je=yield(yield fetch(Xn(T.appConfig),Ce)).json()}catch(ht){throw yt.create("token-subscribe-failed",{errorInfo:ht})}if(je.error)throw yt.create("token-subscribe-failed",{errorInfo:je.error.message});if(!je.token)throw yt.create("token-subscribe-no-token");return je.token})).apply(this,arguments)}function cn(T,O){return vn.apply(this,arguments)}function vn(){return(vn=(0,Y.Z)(function*(T,O){const z=yield Ui(T),ie=tn(O.subscriptionOptions),Ce={method:"PATCH",headers:z,body:JSON.stringify(ie)};let je;try{je=yield(yield fetch(`${Xn(T.appConfig)}/${O.token}`,Ce)).json()}catch(ht){throw yt.create("token-update-failed",{errorInfo:ht})}if(je.error)throw yt.create("token-update-failed",{errorInfo:je.error.message});if(!je.token)throw yt.create("token-update-no-token");return je.token})).apply(this,arguments)}function dr(T,O){return qn.apply(this,arguments)}function qn(){return(qn=(0,Y.Z)(function*(T,O){const ie={method:"DELETE",headers:yield Ui(T)};try{const je=yield(yield fetch(`${Xn(T.appConfig)}/${O}`,ie)).json();if(je.error)throw yt.create("token-unsubscribe-failed",{errorInfo:je.error.message})}catch(Ce){throw yt.create("token-unsubscribe-failed",{errorInfo:Ce})}})).apply(this,arguments)}function Xn({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Ui(T){return ri.apply(this,arguments)}function ri(){return(ri=(0,Y.Z)(function*({appConfig:T,installations:O}){const z=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${z}`})})).apply(this,arguments)}function tn({p256dh:T,auth:O,endpoint:z,vapidKey:ie}){const Ce={web:{endpoint:z,auth:O,p256dh:T}};return ie!==$r&&(Ce.web.applicationPubKey=ie),Ce}const Bi=6048e5;function ji(T){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,Y.Z)(function*(T){const O=yield Vt(T.swRegistration,T.vapidKey),z={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:O.endpoint,auth:Oi(O.getKey("auth")),p256dh:Oi(O.getKey("p256dh"))},ie=yield ar(T.firebaseDependencies);if(ie){if(hi(ie.subscriptionOptions,z))return Date.now()>=ie.createTime+Bi?S(T,{token:ie.token,createTime:Date.now(),subscriptionOptions:z}):ie.token;try{yield dr(T.firebaseDependencies,ie.token)}catch(Ce){console.warn(Ce)}return F(T.firebaseDependencies,z)}return F(T.firebaseDependencies,z)})).apply(this,arguments)}function Ys(T){return R.apply(this,arguments)}function R(){return(R=(0,Y.Z)(function*(T){const O=yield ar(T.firebaseDependencies);O&&(yield dr(T.firebaseDependencies,O.token),yield q(T.firebaseDependencies));const z=yield T.swRegistration.pushManager.getSubscription();return!z||z.unsubscribe()})).apply(this,arguments)}function S(T,O){return A.apply(this,arguments)}function A(){return(A=(0,Y.Z)(function*(T,O){try{const z=yield cn(T.firebaseDependencies,O),ie=Object.assign(Object.assign({},O),{token:z,createTime:Date.now()});return yield H(T.firebaseDependencies,ie),z}catch(z){throw yield Ys(T),z}})).apply(this,arguments)}function F(T,O){return Le.apply(this,arguments)}function Le(){return(Le=(0,Y.Z)(function*(T,O){const ie={token:yield Gn(T,O),createTime:Date.now(),subscriptionOptions:O};return yield H(T,ie),ie.token})).apply(this,arguments)}function Vt(T,O){return dn.apply(this,arguments)}function dn(){return(dn=(0,Y.Z)(function*(T,O){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ps(O)})})).apply(this,arguments)}function hi(T,O){return O.vapidKey===T.vapidKey&&O.endpoint===T.endpoint&&O.auth===T.auth&&O.p256dh===T.p256dh}function Yr(T){const O={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Gr(T,O){if(!O.notification)return;T.notification={};const z=O.notification.title;z&&(T.notification.title=z);const ie=O.notification.body;ie&&(T.notification.body=ie);const Ce=O.notification.image;Ce&&(T.notification.image=Ce)}(O,T),function Qs(T,O){!O.data||(T.data=O.data)}(O,T),function ms(T,O){if(!O.fcmOptions)return;T.fcmOptions={};const z=O.fcmOptions.link;z&&(T.fcmOptions.link=z);const ie=O.fcmOptions.analytics_label;ie&&(T.fcmOptions.analyticsLabel=ie)}(O,T),O}function Fo(T){return"object"==typeof T&&!!T&&os in T}function yu(T,O){const z=[];for(let ie=0;ie<T.length;ie++)z.push(T.charAt(ie)),ie<O.length&&z.push(O.charAt(ie));return z.join("")}function oo(T){return yt.create("missing-app-config-values",{valueName:T})}yu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fi{constructor(O,z,ie){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ce=function _a(T){if(!T||!T.options)throw oo("App Configuration Object");if(!T.name)throw oo("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:z}=T;for(const ie of O)if(!z[ie])throw oo(ie);return{appName:T.name,projectId:z.projectId,apiKey:z.apiKey,appId:z.appId,senderId:z.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:Ce,installations:z,analyticsProvider:ie}}_delete(){return Promise.resolve()}}function Ni(T){return Do.apply(this,arguments)}function Do(){return(Do=(0,Y.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(fs,{scope:wi}),T.swRegistration.update().catch(()=>{})}catch(O){throw yt.create("failed-service-worker-registration",{browserErrorMessage:O.message})}})).apply(this,arguments)}function Rs(T,O){return ys.apply(this,arguments)}function ys(){return(ys=(0,Y.Z)(function*(T,O){if(!O&&!T.swRegistration&&(yield Ni(T)),O||!T.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw yt.create("invalid-sw-registration");T.swRegistration=O}})).apply(this,arguments)}function ao(T,O){return uo.apply(this,arguments)}function uo(){return(uo=(0,Y.Z)(function*(T,O){O?T.vapidKey=O:T.vapidKey||(T.vapidKey=$r)})).apply(this,arguments)}function Pr(){return(Pr=(0,Y.Z)(function*(T,O){if(!navigator)throw yt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yt.create("permission-blocked");return yield ao(T,null==O?void 0:O.vapidKey),yield Rs(T,null==O?void 0:O.serviceWorkerRegistration),ji(T)})).apply(this,arguments)}function Lo(T,O,z){return na.apply(this,arguments)}function na(){return(na=(0,Y.Z)(function*(T,O,z){const ie=ra(O);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(ie,{message_id:z[os],message_name:z[as],message_time:z[Ms],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ra(T){switch(T){case Hr.NOTIFICATION_CLICKED:return"notification_open";case Hr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wa(){return(wa=(0,Y.Z)(function*(T,O){const z=O.data;if(!z.isFirebaseMessaging)return;T.onMessageHandler&&z.messageType===Hr.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Yr(z)):T.onMessageHandler.next(Yr(z)));const ie=z.data;Fo(ie)&&"1"===ie[us]&&(yield Lo(T,z.messageType,ie))})).apply(this,arguments)}const Vo="@firebase/messaging",Ia=T=>{const O=new fi(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",z=>function vu(T,O){return wa.apply(this,arguments)}(O,z)),O},Ns=T=>{const O=T.getProvider("messaging").getImmediate();return{getToken:ie=>function Ea(T,O){return Pr.apply(this,arguments)}(O,ie)}};function Is(){return Co.apply(this,arguments)}function Co(){return(Co=(0,Y.Z)(function*(){try{yield(0,fe.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Da(){(0,ye._registerComponent)(new De.wA("messaging",Ia,"PUBLIC")),(0,ye._registerComponent)(new De.wA("messaging-internal",Ns,"PRIVATE")),(0,ye.registerVersion)(Vo,"0.9.12"),(0,ye.registerVersion)(Vo,"0.9.12","esm2017")}();const Bo="analytics",tc="firebase_id",lo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jo="https://www.googletagmanager.com/gtag/js",zr=new Ae.Yd("@firebase/analytics");function pi(T){return Promise.all(T.map(O=>O.catch(z=>z)))}function wu(T,O){const z=document.createElement("script");z.src=`${jo}?l=${T}&id=${O}`,z.async=!0,document.head.appendChild(z)}function Ps(T,O,z,ie,Ce,je){return To.apply(this,arguments)}function To(){return(To=(0,Y.Z)(function*(T,O,z,ie,Ce,je){const ht=ie[Ce];try{if(ht)yield O[ht];else{const Kt=(yield pi(z)).find(hn=>hn.measurementId===Ce);Kt&&(yield O[Kt.appId])}}catch(xt){zr.error(xt)}T("config",Ce,je)})).apply(this,arguments)}function $i(T,O,z,ie,Ce){return ks.apply(this,arguments)}function ks(){return(ks=(0,Y.Z)(function*(T,O,z,ie,Ce){try{let je=[];if(Ce&&Ce.send_to){let ht=Ce.send_to;Array.isArray(ht)||(ht=[ht]);const xt=yield pi(z);for(const Kt of ht){const hn=xt.find(bn=>bn.measurementId===Kt),Wn=hn&&O[hn.appId];if(!Wn){je=[];break}je.push(Wn)}}0===je.length&&(je=Object.values(O)),yield Promise.all(je),T("event",ie,Ce||{})}catch(je){zr.error(je)}})).apply(this,arguments)}function Iu(){const T=window.document.getElementsByTagName("script");for(const O of Object.values(T))if(O.src&&O.src.includes(jo))return O;return null}const hr=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ho=new class Ji{constructor(O={},z=1e3){this.throttleMetadata=O,this.intervalMillis=z}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,z){this.throttleMetadata[O]=z}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function Go(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Ta(T){return wr.apply(this,arguments)}function wr(){return(wr=(0,Y.Z)(function*(T){var O;const{appId:z,apiKey:ie}=T,Ce={method:"GET",headers:Go(ie)},je=lo.replace("{app-id}",z),ht=yield fetch(je,Ce);if(200!==ht.status&&304!==ht.status){let xt="";try{const Kt=yield ht.json();(null===(O=Kt.error)||void 0===O?void 0:O.message)&&(xt=Kt.error.message)}catch(Kt){}throw hr.create("config-fetch-failed",{httpStatus:ht.status,responseMessage:xt})}return ht.json()})).apply(this,arguments)}function al(T){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,Y.Z)(function*(T,O=Ho,z){const{appId:ie,apiKey:Ce,measurementId:je}=T.options;if(!ie)throw hr.create("no-app-id");if(!Ce){if(je)return{measurementId:je,appId:ie};throw hr.create("no-api-key")}const ht=O.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xt=new ii;return setTimeout((0,Y.Z)(function*(){xt.abort()}),void 0!==z?z:6e4),Aa({appId:ie,apiKey:Ce,measurementId:je},ht,xt,O)})).apply(this,arguments)}function Aa(T,O,z){return vs.apply(this,arguments)}function vs(){return(vs=(0,Y.Z)(function*(T,{throttleEndTimeMillis:O,backoffCount:z},ie,Ce=Ho){const{appId:je,measurementId:ht}=T;try{yield nc(ie,O)}catch(xt){if(ht)return zr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${xt.message}]`),{appId:je,measurementId:ht};throw xt}try{const xt=yield Ta(T);return Ce.deleteThrottleMetadata(je),xt}catch(xt){if(!za(xt)){if(Ce.deleteThrottleMetadata(je),ht)return zr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${xt.message}]`),{appId:je,measurementId:ht};throw xt}const Kt=503===Number(xt.customData.httpStatus)?(0,fe.$s)(z,Ce.intervalMillis,30):(0,fe.$s)(z,Ce.intervalMillis),hn={throttleEndTimeMillis:Date.now()+Kt,backoffCount:z+1};return Ce.setThrottleMetadata(je,hn),zr.debug(`Calling attemptFetch again in ${Kt} millis`),Aa(T,hn,ie,Ce)}})).apply(this,arguments)}function nc(T,O){return new Promise((z,ie)=>{const Ce=Math.max(O-Date.now(),0),je=setTimeout(z,Ce);T.addEventListener(()=>{clearTimeout(je),ie(hr.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function za(T){if(!(T instanceof fe.ZR&&T.customData))return!1;const O=Number(T.customData.httpStatus);return 429===O||500===O||503===O||504===O}class ii{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}function co(){return ls.apply(this,arguments)}function ls(){return(ls=(0,Y.Z)(function*(){if(!(0,fe.hl)())return zr.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(T){return zr.warn(hr.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function Fs(){return(Fs=(0,Y.Z)(function*(T,O,z,ie,Ce,je,ht){var xt;const Kt=al(T);Kt.then(mi=>{z[mi.measurementId]=mi.appId,T.options.measurementId&&mi.measurementId!==T.options.measurementId&&zr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${mi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mi=>zr.error(mi)),O.push(Kt);const hn=co().then(mi=>{if(mi)return ie.getId()}),[Wn,bn]=yield Promise.all([Kt,hn]);Iu()||wu(je,Wn.measurementId),Ce("js",new Date);const Sr=null!==(xt=null==ht?void 0:ht.config)&&void 0!==xt?xt:{};return Sr.origin="firebase",Sr.update=!0,null!=bn&&(Sr[tc]=bn),Ce("config",Wn.measurementId,Sr),Wn.measurementId})).apply(this,arguments)}class ct{constructor(O){this.app=O}_delete(){return delete er[this.app.options.appId],Promise.resolve()}}let er={},I=[];const E={};let N,B,y="dataLayer",$=!1;function Dt(T,O,z){!function $e(){const T=[];if((0,fe.ru)()&&T.push("This is a browser extension environment."),(0,fe.zI)()||T.push("Cookies are not available."),T.length>0){const O=T.map((ie,Ce)=>`(${Ce+1}) ${ie}`).join(" "),z=hr.create("invalid-analytics-context",{errorInfo:O});zr.warn(z.message)}}();const ie=T.options.appId;if(!ie)throw hr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw hr.create("no-api-key");zr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=er[ie])throw hr.create("already-exists",{id:ie});if(!$){!function Qi(T){let O=[];Array.isArray(window[T])?O=window[T]:window[T]=O}(y);const{wrappedGtag:je,gtagCore:ht}=function Ga(T,O,z,ie,Ce){let je=function(...ht){window[ie].push(arguments)};return window[Ce]&&"function"==typeof window[Ce]&&(je=window[Ce]),window[Ce]=function ba(T,O,z,ie){function je(){return(je=(0,Y.Z)(function*(ht,xt,Kt){try{"event"===ht?yield $i(T,O,z,xt,Kt):"config"===ht?yield Ps(T,O,z,ie,xt,Kt):T("set",xt)}catch(hn){zr.error(hn)}})).apply(this,arguments)}return function Ce(ht,xt,Kt){return je.apply(this,arguments)}}(je,T,O,z),{gtagCore:je,wrappedGtag:window[Ce]}}(er,I,E,y,"gtag");B=je,N=ht,$=!0}return er[ie]=function ho(T,O,z,ie,Ce,je,ht){return Fs.apply(this,arguments)}(T,I,E,O,N,y,z),new ct(T)}function zt(){return(zt=(0,Y.Z)(function*(T,O,z,ie,Ce){if(Ce&&Ce.global)T("event",z,ie);else{const je=yield O;T("event",z,Object.assign(Object.assign({},ie),{send_to:je}))}})).apply(this,arguments)}function eo(){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,Y.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(T){return!1}})).apply(this,arguments)}const Sa="@firebase/analytics";!function Wd(){(0,ye._registerComponent)(new De.wA(Bo,(O,{options:z})=>Dt(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),z),"PUBLIC")),(0,ye._registerComponent)(new De.wA("analytics-internal",function T(O){try{const z=O.getProvider(Bo).getImmediate();return{logEvent:(ie,Ce,je)=>function Yc(T,O,z,ie){T=(0,fe.m9)(T),function Rn(T,O,z,ie,Ce){return zt.apply(this,arguments)}(B,er[T.app.options.appId],O,z,ie).catch(Ce=>zr.error(Ce))}(z,ie,Ce,je)}}catch(z){throw hr.create("interop-component-reg-failed",{reason:z})}},"PRIVATE")),(0,ye.registerVersion)(Sa,"0.7.8"),(0,ye.registerVersion)(Sa,"0.7.8","esm2017")}();var Hi=P(4408),zd=P(7565);const ul=new class Fn extends zd.v{}(class Ls extends Hi.o{constructor(O,z){super(O,z),this.scheduler=O,this.work=z}schedule(O,z=0){return z>0?super.schedule(O,z):(this.delay=z,this.state=O,this.scheduler.flush(this),this)}execute(O,z){return z>0||this.closed?super.execute(O,z):this._execute(O,z)}requestAsyncId(O,z,ie=0){return null!=ie&&ie>0||null==ie&&this.delay>0?super.requestAsyncId(O,z,ie):O.flush(this)}});var si=P(4986),Ao=P(8505),Gi=P(9468),As=P(5363);const Ma=new p.GfV("7.3.0"),zo="__angularfire_symbol__analyticsIsSupportedValue",Di="__angularfire_symbol__analyticsIsSupported",Xi="__angularfire_symbol__remoteConfigIsSupportedValue",So="__angularfire_symbol__remoteConfigIsSupported",Du="__angularfire_symbol__messagingIsSupportedValue",It="__angularfire_symbol__messagingIsSupported";function po(T,O,z){if(O){if(1===O.length)return O[0];const je=O.filter(ht=>ht.app===z);if(1===je.length)return je[0]}return z.container.getProvider(T).getImmediate({optional:!0})}globalThis[Di]||(globalThis[Di]=eo().then(T=>globalThis[zo]=T).catch(()=>globalThis[zo]=!1)),globalThis[It]||(globalThis[It]=Is().then(T=>globalThis[Du]=T).catch(()=>globalThis[Du]=!1)),globalThis[So]||(globalThis[So]=xi().then(T=>globalThis[Xi]=T).catch(()=>globalThis[Xi]=!1));const Mo=(T,O)=>{const z=O?[O]:(0,K.C6)(),ie=[];return z.forEach(Ce=>{Ce.container.getProvider(T).instances.forEach(ht=>{ie.includes(ht)||ie.push(ht)})}),ie};function Ko(){}class xo{constructor(O,z=ul){this.zone=O,this.delegate=z}now(){return this.delegate.now()}schedule(O,z,ie){const Ce=this.zone;return this.delegate.schedule(function(ht){Ce.runGuarded(()=>{O.apply(this,[ht])})},z,ie)}}class cl{constructor(O){this.zone=O,this.task=null}call(O,z){const ie=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko)),z.pipe((0,Ao.b)({next:ie,complete:ie,error:ie})).subscribe(O).add(ie)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Oo=(()=>{class T{constructor(z){this.ngZone=z,this.outsideAngular=z.runOutsideAngular(()=>new xo(Zone.current)),this.insideAngular=z.run(()=>new xo(Zone.current,si.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(z){return new(z||T)(p.LFG(p.R0b))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function no(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function sa(T){return no(),function qo(T){return function(z){return(z=z.lift(new cl(T.ngZone))).pipe((0,Gi.R)(T.outsideAngular),(0,As.Q)(T.insideAngular))}}(no())(T)}},2090:(wt,Ue,P)=>{P.d(Ue,{$s:()=>Mi,BH:()=>Ze,G6:()=>Te,L:()=>Me,LL:()=>Ot,Lj:()=>un,Mn:()=>Oe,Sg:()=>He,UG:()=>Re,US:()=>Ae,X3:()=>Wt,ZB:()=>Ie,ZR:()=>Ne,b$:()=>U,d:()=>J,eu:()=>Z,hl:()=>pe,jU:()=>mt,m9:()=>Ht,ne:()=>Nt,pd:()=>gr,r3:()=>Yt,ru:()=>j,tV:()=>le,uI:()=>Be,vZ:()=>Jn,w1:()=>he,xO:()=>nr,xb:()=>wn,z$:()=>pt,zI:()=>Ee,zd:()=>$n});var p=P(5861);const fe=function(ce){const ne=[];let _e=0;for(let ze=0;ze<ce.length;ze++){let xe=ce.charCodeAt(ze);xe<128?ne[_e++]=xe:xe<2048?(ne[_e++]=xe>>6|192,ne[_e++]=63&xe|128):55296==(64512&xe)&&ze+1<ce.length&&56320==(64512&ce.charCodeAt(ze+1))?(xe=65536+((1023&xe)<<10)+(1023&ce.charCodeAt(++ze)),ne[_e++]=xe>>18|240,ne[_e++]=xe>>12&63|128,ne[_e++]=xe>>6&63|128,ne[_e++]=63&xe|128):(ne[_e++]=xe>>12|224,ne[_e++]=xe>>6&63|128,ne[_e++]=63&xe|128)}return ne},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ce,ne){if(!Array.isArray(ce))throw Error("encodeByteArray takes an array as a parameter");this.init_();const _e=ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,ze=[];for(let xe=0;xe<ce.length;xe+=3){const ft=ce[xe],jt=xe+1<ce.length,gn=jt?ce[xe+1]:0,qt=xe+2<ce.length,ln=qt?ce[xe+2]:0;let On=(15&gn)<<2|ln>>6,Ir=63&ln;qt||(Ir=64,jt||(On=64)),ze.push(_e[ft>>2],_e[(3&ft)<<4|gn>>4],_e[On],_e[Ir])}return ze.join("")},encodeString(ce,ne){return this.HAS_NATIVE_SUPPORT&&!ne?btoa(ce):this.encodeByteArray(fe(ce),ne)},decodeString(ce,ne){return this.HAS_NATIVE_SUPPORT&&!ne?atob(ce):function(ce){const ne=[];let _e=0,ze=0;for(;_e<ce.length;){const xe=ce[_e++];if(xe<128)ne[ze++]=String.fromCharCode(xe);else if(xe>191&&xe<224){const ft=ce[_e++];ne[ze++]=String.fromCharCode((31&xe)<<6|63&ft)}else if(xe>239&&xe<365){const qt=((7&xe)<<18|(63&ce[_e++])<<12|(63&ce[_e++])<<6|63&ce[_e++])-65536;ne[ze++]=String.fromCharCode(55296+(qt>>10)),ne[ze++]=String.fromCharCode(56320+(1023&qt))}else{const ft=ce[_e++],jt=ce[_e++];ne[ze++]=String.fromCharCode((15&xe)<<12|(63&ft)<<6|63&jt)}}return ne.join("")}(this.decodeStringToByteArray(ce,ne))},decodeStringToByteArray(ce,ne){this.init_();const _e=ne?this.charToByteMapWebSafe_:this.charToByteMap_,ze=[];for(let xe=0;xe<ce.length;){const ft=_e[ce.charAt(xe++)],gn=xe<ce.length?_e[ce.charAt(xe)]:0;++xe;const ln=xe<ce.length?_e[ce.charAt(xe)]:64;++xe;const rn=xe<ce.length?_e[ce.charAt(xe)]:64;if(++xe,null==ft||null==gn||null==ln||null==rn)throw Error();ze.push(ft<<2|gn>>4),64!==ln&&(ze.push(gn<<4&240|ln>>2),64!==rn&&ze.push(ln<<6&192|rn))}return ze},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ce=0;ce<this.ENCODED_VALS.length;ce++)this.byteToCharMap_[ce]=this.ENCODED_VALS.charAt(ce),this.charToByteMap_[this.byteToCharMap_[ce]]=ce,this.byteToCharMapWebSafe_[ce]=this.ENCODED_VALS_WEBSAFE.charAt(ce),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ce]]=ce,ce>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ce)]=ce,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ce)]=ce)}}},Me=function(ce){return function(ce){const ne=fe(ce);return Ae.encodeByteArray(ne,!0)}(ce).replace(/\./g,"")},le=function(ce){try{return Ae.decodeString(ce,!0)}catch(ne){console.error("base64Decode failed: ",ne)}return null};function Ie(ce,ne){if(!(ne instanceof Object))return ne;switch(ne.constructor){case Date:return new Date(ne.getTime());case Object:void 0===ce&&(ce={});break;case Array:ce=[];break;default:return ne}for(const _e in ne)!ne.hasOwnProperty(_e)||!nt(_e)||(ce[_e]=Ie(ce[_e],ne[_e]));return ce}function nt(ce){return"__proto__"!==ce}class Ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ne,_e)=>{this.resolve=ne,this.reject=_e})}wrapCallback(ne){return(_e,ze)=>{_e?this.reject(_e):this.resolve(ze),"function"==typeof ne&&(this.promise.catch(()=>{}),1===ne.length?ne(_e):ne(_e,ze))}}}function He(ce,ne){if(ce.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ze=ne||"demo-project",xe=ce.iat||0,ft=ce.sub||ce.user_id;if(!ft)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const jt=Object.assign({iss:`https://securetoken.google.com/${ze}`,aud:ze,iat:xe,exp:xe+3600,auth_time:xe,sub:ft,user_id:ft,firebase:{sign_in_provider:"custom",identities:{}}},ce);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(jt)),""].join(".")}function pt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function Re(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ce){return!1}}function mt(){return"object"==typeof self&&self.self===self}function j(){const ce="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ce&&void 0!==ce.id}function U(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function J(){return pt().indexOf("Electron/")>=0}function he(){const ce=pt();return ce.indexOf("MSIE ")>=0||ce.indexOf("Trident/")>=0}function Oe(){return pt().indexOf("MSAppHost/")>=0}function Te(){return!Re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){return"object"==typeof indexedDB}function Z(){return new Promise((ce,ne)=>{try{let _e=!0;const ze="validate-browser-context-for-indexeddb-analytics-module",xe=self.indexedDB.open(ze);xe.onsuccess=()=>{xe.result.close(),_e||self.indexedDB.deleteDatabase(ze),ce(!0)},xe.onupgradeneeded=()=>{_e=!1},xe.onerror=()=>{var ft;ne((null===(ft=xe.error)||void 0===ft?void 0:ft.message)||"")}}catch(_e){ne(_e)}})}function Ee(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ne extends Error{constructor(ne,_e,ze){super(_e),this.code=ne,this.customData=ze,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ot.prototype.create)}}class Ot{constructor(ne,_e,ze){this.service=ne,this.serviceName=_e,this.errors=ze}create(ne,..._e){const ze=_e[0]||{},xe=`${this.service}/${ne}`,ft=this.errors[ne],jt=ft?function gt(ce,ne){return ce.replace(Bt,(_e,ze)=>{const xe=ne[ze];return null!=xe?String(xe):`<${ze}?>`})}(ft,ze):"Error";return new Ne(xe,`${this.serviceName}: ${jt} (${xe}).`,ze)}}const Bt=/\{\$([^}]+)}/g;function Yt(ce,ne){return Object.prototype.hasOwnProperty.call(ce,ne)}function wn(ce){for(const ne in ce)if(Object.prototype.hasOwnProperty.call(ce,ne))return!1;return!0}function Jn(ce,ne){if(ce===ne)return!0;const _e=Object.keys(ce),ze=Object.keys(ne);for(const xe of _e){if(!ze.includes(xe))return!1;const ft=ce[xe],jt=ne[xe];if(Ln(ft)&&Ln(jt)){if(!Jn(ft,jt))return!1}else if(ft!==jt)return!1}for(const xe of ze)if(!_e.includes(xe))return!1;return!0}function Ln(ce){return null!==ce&&"object"==typeof ce}function nr(ce){const ne=[];for(const[_e,ze]of Object.entries(ce))Array.isArray(ze)?ze.forEach(xe=>{ne.push(encodeURIComponent(_e)+"="+encodeURIComponent(xe))}):ne.push(encodeURIComponent(_e)+"="+encodeURIComponent(ze));return ne.length?"&"+ne.join("&"):""}function $n(ce){const ne={};return ce.replace(/^\?/,"").split("&").forEach(ze=>{if(ze){const[xe,ft]=ze.split("=");ne[decodeURIComponent(xe)]=decodeURIComponent(ft)}}),ne}function gr(ce){const ne=ce.indexOf("?");if(!ne)return"";const _e=ce.indexOf("#",ne);return ce.substring(ne,_e>0?_e:void 0)}function Nt(ce,ne){const _e=new Jt(ce,ne);return _e.subscribe.bind(_e)}class Jt{constructor(ne,_e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=_e,this.task.then(()=>{ne(this)}).catch(ze=>{this.error(ze)})}next(ne){this.forEachObserver(_e=>{_e.next(ne)})}error(ne){this.forEachObserver(_e=>{_e.error(ne)}),this.close(ne)}complete(){this.forEachObserver(ne=>{ne.complete()}),this.close()}subscribe(ne,_e,ze){let xe;if(void 0===ne&&void 0===_e&&void 0===ze)throw new Error("Missing Observer.");xe=function on(ce,ne){if("object"!=typeof ce||null===ce)return!1;for(const _e of ne)if(_e in ce&&"function"==typeof ce[_e])return!0;return!1}(ne,["next","error","complete"])?ne:{next:ne,error:_e,complete:ze},void 0===xe.next&&(xe.next=mr),void 0===xe.error&&(xe.error=mr),void 0===xe.complete&&(xe.complete=mr);const ft=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?xe.error(this.finalError):xe.complete()}catch(jt){}}),this.observers.push(xe),ft}unsubscribeOne(ne){void 0===this.observers||void 0===this.observers[ne]||(delete this.observers[ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ne){if(!this.finalized)for(let _e=0;_e<this.observers.length;_e++)this.sendOne(_e,ne)}sendOne(ne,_e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ne])try{_e(this.observers[ne])}catch(ze){"undefined"!=typeof console&&console.error&&console.error(ze)}})}close(ne){this.finalized||(this.finalized=!0,void 0!==ne&&(this.finalError=ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mr(){}function Mi(ce,ne=1e3,_e=2){const ze=ne*Math.pow(_e,ce),xe=Math.round(.5*ze*(Math.random()-.5)*2);return Math.min(144e5,ze+xe)}function Ht(ce){return ce&&ce._delegate?ce._delegate:ce}function _r(ce,ne){return new Promise((_e,ze)=>{ce.onsuccess=xe=>{_e(xe.target.result)},ce.onerror=xe=>{var ft;ze(`${ne}: ${null===(ft=xe.target.error)||void 0===ft?void 0:ft.message}`)}})}class pn{constructor(ne){this._db=ne,this.objectStoreNames=this._db.objectStoreNames}transaction(ne,_e="readonly"){return new Tt(this._db.transaction.call(this._db,ne,_e))}createObjectStore(ne,_e){return new Je(this._db.createObjectStore(ne,_e))}close(){this._db.close()}}class Tt{constructor(ne){this._transaction=ne,this.complete=new Promise((_e,ze)=>{this._transaction.oncomplete=function(){_e()},this._transaction.onerror=()=>{ze(this._transaction.error)},this._transaction.onabort=()=>{ze(this._transaction.error)}})}objectStore(ne){return new Je(this._transaction.objectStore(ne))}}class Je{constructor(ne){this._store=ne}index(ne){return new Et(this._store.index(ne))}createIndex(ne,_e,ze){return new Et(this._store.createIndex(ne,_e,ze))}get(ne){return _r(this._store.get(ne),"Error reading from IndexedDB")}put(ne,_e){return _r(this._store.put(ne,_e),"Error writing to IndexedDB")}delete(ne){return _r(this._store.delete(ne),"Error deleting from IndexedDB")}clear(){return _r(this._store.clear(),"Error clearing IndexedDB object store")}}class Et{constructor(ne){this._index=ne}get(ne){return _r(this._index.get(ne),"Error reading from IndexedDB")}}function Wt(ce,ne,_e){return new Promise((ze,xe)=>{try{const ft=indexedDB.open(ce,ne);ft.onsuccess=jt=>{ze(new pn(jt.target.result))},ft.onerror=jt=>{var gn;xe(`Error opening indexedDB: ${null===(gn=jt.target.error)||void 0===gn?void 0:gn.message}`)},ft.onupgradeneeded=jt=>{_e(new pn(ft.result),jt.oldVersion,jt.newVersion,new Tt(ft.transaction))}}catch(ft){xe(`Error opening indexedDB: ${ft.message}`)}})}function un(ce){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,p.Z)(function*(ce){return new Promise((ne,_e)=>{try{const ze=indexedDB.deleteDatabase(ce);ze.onsuccess=()=>{ne()},ze.onerror=xe=>{var ft;_e(`Error deleting indexedDB database "${ce}": ${null===(ft=xe.target.error)||void 0===ft?void 0:ft.message}`)}}catch(ze){_e(`Error deleting indexedDB database "${ce}": ${ze.message}`)}})})).apply(this,arguments)}},7556:(wt,Ue,P)=>{P.d(Ue,{e:()=>le});var p=P(5861),K=P(441),Y=P(4004),ye=P(9300),fe=P(3900),De=P(9646),Ae=P(5e3),Se=P(1205),Me=P(7566);let le=(()=>{class se{constructor(nt,Ze,He,pt){this.angularFireAuth=nt,this.angularFireStore=Ze,this.activatedRoute=He,this.router=pt,this.redirectOnLoggedOutUrl=null,this.usersCollection=this.angularFireStore.collection("users"),this.isAuthenticated$=this.angularFireAuth.user.pipe((0,Y.U)(Be=>!!Be)),this.router.events.pipe((0,ye.h)(Be=>Be instanceof K.m2),(0,Y.U)(()=>this.activatedRoute.firstChild),(0,fe.w)(Be=>{var Re;return null!==(Re=null==Be?void 0:Be.data)&&void 0!==Re?Re:(0,De.of)({})})).subscribe(Be=>{this.redirectOnLoggedOutUrl=Be.redirectOnLoggedOutUrl})}createUser(nt){var Ze=this;return(0,p.Z)(function*(){var He;const{name:pt,email:Be,password:Re,age:mt,phoneNumber:j}=nt,U=yield Ze.angularFireAuth.createUserWithEmailAndPassword(Be,Re);if(!U.user)throw Error("User cannot be found");yield Ze.usersCollection.doc(null===(He=U.user)||void 0===He?void 0:He.uid).set({name:pt,email:Be,phoneNumber:j,age:mt}),yield U.user.updateProfile({displayName:pt})})()}login(nt){var Ze=this;return(0,p.Z)(function*(){const{email:He,password:pt}=nt;yield Ze.angularFireAuth.signInWithEmailAndPassword(He,pt)})()}logout(){var nt=this;return(0,p.Z)(function*(){yield nt.angularFireAuth.signOut(),nt.redirectOnLoggedOutUrl&&nt.router.navigateByUrl(nt.redirectOnLoggedOutUrl)})()}}return se.\u0275fac=function(nt){return new(nt||se)(Ae.LFG(Se.zQ),Ae.LFG(Me.ST),Ae.LFG(K.gz),Ae.LFG(K.F0))},se.\u0275prov=Ae.Yz7({token:se,factory:se.\u0275fac,providedIn:"root"}),se})()},4466:(wt,Ue,P)=>{P.d(Ue,{m:()=>fe});var p=P(9808),K=P(2382),Y=P(1470),ye=P(5e3);let fe=(()=>{class De{}return De.\u0275fac=function(Se){return new(Se||De)},De.\u0275mod=ye.oAB({type:De}),De.\u0275inj=ye.cJS({imports:[[p.ez,K.UX,Y.yI.forRoot()]]}),De})()},6213:(wt,Ue,P)=>{var p=P(9808),K=P(5e3);class Y extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ye extends Y{static makeCurrent(){(0,p.HT)(new ye)}onAndCancel(ae,ee,Ve){return ae.addEventListener(ee,Ve,!1),()=>{ae.removeEventListener(ee,Ve,!1)}}dispatchEvent(ae,ee){ae.dispatchEvent(ee)}remove(ae){ae.parentNode&&ae.parentNode.removeChild(ae)}createElement(ae,ee){return(ee=ee||this.getDefaultDocument()).createElement(ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ae){return ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(ae){return ae instanceof DocumentFragment}getGlobalEventTarget(ae,ee){return"window"===ee?window:"document"===ee?ae:"body"===ee?ae.body:null}getBaseHref(ae){const ee=function De(){return fe=fe||document.querySelector("base"),fe?fe.getAttribute("href"):null}();return null==ee?null:function Se(oe){Ae=Ae||document.createElement("a"),Ae.setAttribute("href",oe);const ae=Ae.pathname;return"/"===ae.charAt(0)?ae:`/${ae}`}(ee)}resetBaseElement(){fe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ae){return(0,p.Mx)(document.cookie,ae)}}let Ae,fe=null;const Me=new K.OlP("TRANSITION_ID"),se=[{provide:K.ip1,useFactory:function le(oe,ae,ee){return()=>{ee.get(K.CZH).donePromise.then(()=>{const Ve=(0,p.q)(),Ke=ae.querySelectorAll(`style[ng-transition="${oe}"]`);for(let Qt=0;Qt<Ke.length;Qt++)Ve.remove(Ke[Qt])})}},deps:[Me,p.K0,K.zs3],multi:!0}];class Ie{static init(){(0,K.VLi)(new Ie)}addToWindow(ae){K.dqk.getAngularTestability=(Ve,Ke=!0)=>{const Qt=ae.findTestabilityInTree(Ve,Ke);if(null==Qt)throw new Error("Could not find testability for element.");return Qt},K.dqk.getAllAngularTestabilities=()=>ae.getAllTestabilities(),K.dqk.getAllAngularRootElements=()=>ae.getAllRootElements(),K.dqk.frameworkStabilizers||(K.dqk.frameworkStabilizers=[]),K.dqk.frameworkStabilizers.push(Ve=>{const Ke=K.dqk.getAllAngularTestabilities();let Qt=Ke.length,Dn=!1;const ge=function(me){Dn=Dn||me,Qt--,0==Qt&&Ve(Dn)};Ke.forEach(function(me){me.whenStable(ge)})})}findTestabilityInTree(ae,ee,Ve){if(null==ee)return null;const Ke=ae.getTestability(ee);return null!=Ke?Ke:Ve?(0,p.q)().isShadowRoot(ee)?this.findTestabilityInTree(ae,ee.host,!0):this.findTestabilityInTree(ae,ee.parentElement,!0):null}}let nt=(()=>{class oe{build(){return new XMLHttpRequest}}return oe.\u0275fac=function(ee){return new(ee||oe)},oe.\u0275prov=K.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const Ze=new K.OlP("EventManagerPlugins");let He=(()=>{class oe{constructor(ee,Ve){this._zone=Ve,this._eventNameToPlugin=new Map,ee.forEach(Ke=>Ke.manager=this),this._plugins=ee.slice().reverse()}addEventListener(ee,Ve,Ke){return this._findPluginFor(Ve).addEventListener(ee,Ve,Ke)}addGlobalEventListener(ee,Ve,Ke){return this._findPluginFor(Ve).addGlobalEventListener(ee,Ve,Ke)}getZone(){return this._zone}_findPluginFor(ee){const Ve=this._eventNameToPlugin.get(ee);if(Ve)return Ve;const Ke=this._plugins;for(let Qt=0;Qt<Ke.length;Qt++){const Dn=Ke[Qt];if(Dn.supports(ee))return this._eventNameToPlugin.set(ee,Dn),Dn}throw new Error(`No event manager plugin found for event ${ee}`)}}return oe.\u0275fac=function(ee){return new(ee||oe)(K.LFG(Ze),K.LFG(K.R0b))},oe.\u0275prov=K.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class pt{constructor(ae){this._doc=ae}addGlobalEventListener(ae,ee,Ve){const Ke=(0,p.q)().getGlobalEventTarget(this._doc,ae);if(!Ke)throw new Error(`Unsupported event target ${Ke} for event ${ee}`);return this.addEventListener(Ke,ee,Ve)}}let Be=(()=>{class oe{constructor(){this._stylesSet=new Set}addStyles(ee){const Ve=new Set;ee.forEach(Ke=>{this._stylesSet.has(Ke)||(this._stylesSet.add(Ke),Ve.add(Ke))}),this.onStylesAdded(Ve)}onStylesAdded(ee){}getAllStyles(){return Array.from(this._stylesSet)}}return oe.\u0275fac=function(ee){return new(ee||oe)},oe.\u0275prov=K.Yz7({token:oe,factory:oe.\u0275fac}),oe})(),Re=(()=>{class oe extends Be{constructor(ee){super(),this._doc=ee,this._hostNodes=new Map,this._hostNodes.set(ee.head,[])}_addStylesToHost(ee,Ve,Ke){ee.forEach(Qt=>{const Dn=this._doc.createElement("style");Dn.textContent=Qt,Ke.push(Ve.appendChild(Dn))})}addHost(ee){const Ve=[];this._addStylesToHost(this._stylesSet,ee,Ve),this._hostNodes.set(ee,Ve)}removeHost(ee){const Ve=this._hostNodes.get(ee);Ve&&Ve.forEach(mt),this._hostNodes.delete(ee)}onStylesAdded(ee){this._hostNodes.forEach((Ve,Ke)=>{this._addStylesToHost(ee,Ke,Ve)})}ngOnDestroy(){this._hostNodes.forEach(ee=>ee.forEach(mt))}}return oe.\u0275fac=function(ee){return new(ee||oe)(K.LFG(p.K0))},oe.\u0275prov=K.Yz7({token:oe,factory:oe.\u0275fac}),oe})();function mt(oe){(0,p.q)().remove(oe)}const j={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},U=/%COMP%/g;function Z(oe,ae,ee){for(let Ve=0;Ve<ae.length;Ve++){let Ke=ae[Ve];Array.isArray(Ke)?Z(oe,Ke,ee):(Ke=Ke.replace(U,oe),ee.push(Ke))}return ee}function Ee(oe){return ae=>{if("__ngUnwrap__"===ae)return oe;!1===oe(ae)&&(ae.preventDefault(),ae.returnValue=!1)}}let We=(()=>{class oe{constructor(ee,Ve,Ke){this.eventManager=ee,this.sharedStylesHost=Ve,this.appId=Ke,this.rendererByCompId=new Map,this.defaultRenderer=new Ne(ee)}createRenderer(ee,Ve){if(!ee||!Ve)return this.defaultRenderer;switch(Ve.encapsulation){case K.ifc.Emulated:{let Ke=this.rendererByCompId.get(Ve.id);return Ke||(Ke=new Bt(this.eventManager,this.sharedStylesHost,Ve,this.appId),this.rendererByCompId.set(Ve.id,Ke)),Ke.applyToHost(ee),Ke}case 1:case K.ifc.ShadowDom:return new dt(this.eventManager,this.sharedStylesHost,ee,Ve);default:if(!this.rendererByCompId.has(Ve.id)){const Ke=Z(Ve.id,Ve.styles,[]);this.sharedStylesHost.addStyles(Ke),this.rendererByCompId.set(Ve.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return oe.\u0275fac=function(ee){return new(ee||oe)(K.LFG(He),K.LFG(Re),K.LFG(K.AFp))},oe.\u0275prov=K.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class Ne{constructor(ae){this.eventManager=ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ae,ee){return ee?document.createElementNS(j[ee]||ee,ae):document.createElement(ae)}createComment(ae){return document.createComment(ae)}createText(ae){return document.createTextNode(ae)}appendChild(ae,ee){ae.appendChild(ee)}insertBefore(ae,ee,Ve){ae&&ae.insertBefore(ee,Ve)}removeChild(ae,ee){ae&&ae.removeChild(ee)}selectRootElement(ae,ee){let Ve="string"==typeof ae?document.querySelector(ae):ae;if(!Ve)throw new Error(`The selector "${ae}" did not match any elements`);return ee||(Ve.textContent=""),Ve}parentNode(ae){return ae.parentNode}nextSibling(ae){return ae.nextSibling}setAttribute(ae,ee,Ve,Ke){if(Ke){ee=Ke+":"+ee;const Qt=j[Ke];Qt?ae.setAttributeNS(Qt,ee,Ve):ae.setAttribute(ee,Ve)}else ae.setAttribute(ee,Ve)}removeAttribute(ae,ee,Ve){if(Ve){const Ke=j[Ve];Ke?ae.removeAttributeNS(Ke,ee):ae.removeAttribute(`${Ve}:${ee}`)}else ae.removeAttribute(ee)}addClass(ae,ee){ae.classList.add(ee)}removeClass(ae,ee){ae.classList.remove(ee)}setStyle(ae,ee,Ve,Ke){Ke&(K.JOm.DashCase|K.JOm.Important)?ae.style.setProperty(ee,Ve,Ke&K.JOm.Important?"important":""):ae.style[ee]=Ve}removeStyle(ae,ee,Ve){Ve&K.JOm.DashCase?ae.style.removeProperty(ee):ae.style[ee]=""}setProperty(ae,ee,Ve){ae[ee]=Ve}setValue(ae,ee){ae.nodeValue=ee}listen(ae,ee,Ve){return"string"==typeof ae?this.eventManager.addGlobalEventListener(ae,ee,Ee(Ve)):this.eventManager.addEventListener(ae,ee,Ee(Ve))}}class Bt extends Ne{constructor(ae,ee,Ve,Ke){super(ae),this.component=Ve;const Qt=Z(Ke+"-"+Ve.id,Ve.styles,[]);ee.addStyles(Qt),this.contentAttr=function Te(oe){return"_ngcontent-%COMP%".replace(U,oe)}(Ke+"-"+Ve.id),this.hostAttr=function pe(oe){return"_nghost-%COMP%".replace(U,oe)}(Ke+"-"+Ve.id)}applyToHost(ae){super.setAttribute(ae,this.hostAttr,"")}createElement(ae,ee){const Ve=super.createElement(ae,ee);return super.setAttribute(Ve,this.contentAttr,""),Ve}}class dt extends Ne{constructor(ae,ee,Ve,Ke){super(ae),this.sharedStylesHost=ee,this.hostEl=Ve,this.shadowRoot=Ve.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Qt=Z(Ke.id,Ke.styles,[]);for(let Dn=0;Dn<Qt.length;Dn++){const ge=document.createElement("style");ge.textContent=Qt[Dn],this.shadowRoot.appendChild(ge)}}nodeOrShadowRoot(ae){return ae===this.hostEl?this.shadowRoot:ae}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ae,ee){return super.appendChild(this.nodeOrShadowRoot(ae),ee)}insertBefore(ae,ee,Ve){return super.insertBefore(this.nodeOrShadowRoot(ae),ee,Ve)}removeChild(ae,ee){return super.removeChild(this.nodeOrShadowRoot(ae),ee)}parentNode(ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ae)))}}let it=(()=>{class oe extends pt{constructor(ee){super(ee)}supports(ee){return!0}addEventListener(ee,Ve,Ke){return ee.addEventListener(Ve,Ke,!1),()=>this.removeEventListener(ee,Ve,Ke)}removeEventListener(ee,Ve,Ke){return ee.removeEventListener(Ve,Ke)}}return oe.\u0275fac=function(ee){return new(ee||oe)(K.LFG(p.K0))},oe.\u0275prov=K.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const $t=["alt","control","meta","shift"],At={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},nn={alt:oe=>oe.altKey,control:oe=>oe.ctrlKey,meta:oe=>oe.metaKey,shift:oe=>oe.shiftKey};let Yt=(()=>{class oe extends pt{constructor(ee){super(ee)}supports(ee){return null!=oe.parseEventName(ee)}addEventListener(ee,Ve,Ke){const Qt=oe.parseEventName(Ve),Dn=oe.eventCallback(Qt.fullKey,Ke,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(ee,Qt.domEventName,Dn))}static parseEventName(ee){const Ve=ee.toLowerCase().split("."),Ke=Ve.shift();if(0===Ve.length||"keydown"!==Ke&&"keyup"!==Ke)return null;const Qt=oe._normalizeKey(Ve.pop());let Dn="";if($t.forEach(me=>{const Fe=Ve.indexOf(me);Fe>-1&&(Ve.splice(Fe,1),Dn+=me+".")}),Dn+=Qt,0!=Ve.length||0===Qt.length)return null;const ge={};return ge.domEventName=Ke,ge.fullKey=Dn,ge}static getEventFullKey(ee){let Ve="",Ke=function sn(oe){let ae=oe.key;if(null==ae){if(ae=oe.keyIdentifier,null==ae)return"Unidentified";ae.startsWith("U+")&&(ae=String.fromCharCode(parseInt(ae.substring(2),16)),3===oe.location&&rt.hasOwnProperty(ae)&&(ae=rt[ae]))}return At[ae]||ae}(ee);return Ke=Ke.toLowerCase()," "===Ke?Ke="space":"."===Ke&&(Ke="dot"),$t.forEach(Qt=>{Qt!=Ke&&nn[Qt](ee)&&(Ve+=Qt+".")}),Ve+=Ke,Ve}static eventCallback(ee,Ve,Ke){return Qt=>{oe.getEventFullKey(Qt)===ee&&Ke.runGuarded(()=>Ve(Qt))}}static _normalizeKey(ee){return"esc"===ee?"escape":ee}}return oe.\u0275fac=function(ee){return new(ee||oe)(K.LFG(p.K0))},oe.\u0275prov=K.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const nr=(0,K.eFA)(K._c5,"browser",[{provide:K.Lbi,useValue:p.bD},{provide:K.g9A,useValue:function wn(){ye.makeCurrent(),Ie.init()},multi:!0},{provide:p.K0,useFactory:function Jn(){return(0,K.RDi)(document),document},deps:[]}]),$n=[{provide:K.zSh,useValue:"root"},{provide:K.qLn,useFactory:function _n(){return new K.qLn},deps:[]},{provide:Ze,useClass:it,multi:!0,deps:[p.K0,K.R0b,K.Lbi]},{provide:Ze,useClass:Yt,multi:!0,deps:[p.K0]},{provide:We,useClass:We,deps:[He,Re,K.AFp]},{provide:K.FYo,useExisting:We},{provide:Be,useExisting:Re},{provide:Re,useClass:Re,deps:[p.K0]},{provide:K.dDg,useClass:K.dDg,deps:[K.R0b]},{provide:He,useClass:He,deps:[Ze,K.R0b]},{provide:p.JF,useClass:nt,deps:[]}];let gr=(()=>{class oe{constructor(ee){if(ee)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ee){return{ngModule:oe,providers:[{provide:K.AFp,useValue:ee.appId},{provide:Me,useExisting:K.AFp},se]}}}return oe.\u0275fac=function(ee){return new(ee||oe)(K.LFG(oe,12))},oe.\u0275mod=K.oAB({type:oe}),oe.\u0275inj=K.cJS({providers:$n,imports:[p.ez,K.hGG]}),oe})();"undefined"!=typeof window&&window;var jt=P(127),qt=(P(820),P(2011));const ln_firebase={apiKey:"AIzaSyAcBedrPQWtwsBA-t8ZSjUk3y4SQ8eGRK8",authDomain:"clipit-31d1c.firebaseapp.com",projectId:"clipit-31d1c",storageBucket:"clipit-31d1c.appspot.com",messagingSenderId:"169059670918",appId:"1:169059670918:web:0da8e64eae1eddd785ea07"};var xn=P(441),rn=P(9635),On=P(4004),Ir=P(5698),ei=P(1205);const Li=(0,On.U)(oe=>!!oe);let xr=(()=>{class oe{constructor(ee,Ve){this.router=ee,this.auth=Ve,this.canActivate=(Ke,Qt)=>{const Dn=Ke.data.authGuardPipe||(()=>Li);return this.auth.user.pipe((0,Ir.q)(1),Dn(Ke,Qt),(0,On.U)(ge=>"boolean"==typeof ge?ge:Array.isArray(ge)?this.router.createUrlTree(ge):this.router.parseUrl(ge)))}}}return oe.\u0275fac=function(ee){return new(ee||oe)(K.LFG(xn.F0),K.LFG(ei.zQ))},oe.\u0275prov=K.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"any"}),oe})();const or=[{path:"",component:(()=>{class oe{constructor(){}ngOnInit(){}}return oe.\u0275fac=function(ee){return new(ee||oe)},oe.\u0275cmp=K.Xpm({type:oe,selectors:[["app-home"]],decls:2,vars:0,template:function(ee,Ve){1&ee&&(K.TgZ(0,"p"),K._uU(1,"home works!"),K.qZA())},styles:[""]}),oe})()},{path:"about",loadChildren:()=>P.e(630).then(P.bind(P,7630)).then(oe=>oe.AboutModule)},{path:"video",canActivate:[xr],data:{redirectOnLoggedOutUrl:"/",authGuardPipe:()=>("/",(0,rn.z)(Li,(0,On.U)(ae=>ae||"/")))},loadChildren:()=>P.e(921).then(P.bind(P,1921)).then(oe=>oe.VideoModule)},{path:"clips",loadChildren:()=>P.e(163).then(P.bind(P,9163)).then(oe=>oe.ClipsModule)},{path:"user",outlet:"modal",loadChildren:()=>P.e(20).then(P.bind(P,7020)).then(oe=>oe.UserModule)},{path:"**",loadChildren:()=>P.e(442).then(P.bind(P,2442)).then(oe=>oe.NotFoundModule)}];let di=(()=>{class oe{}return oe.\u0275fac=function(ee){return new(ee||oe)},oe.\u0275mod=K.oAB({type:oe}),oe.\u0275inj=K.cJS({imports:[[xn.Bz.forRoot(or)],xn.Bz]}),oe})();var an=P(9646),qr=P(5861),Vi=P(7556);const vi=function(){return["user"]},Br=function(oe){return{modal:oe}},fr=function(oe){return{outlets:oe}},Qn=function(oe){return[oe]};function cr(oe,ae){1&oe&&(K.TgZ(0,"li")(1,"a",14),K._uU(2,"Login / Register"),K.qZA()()),2&oe&&(K.xp6(1),K.Q6J("routerLink",K.VKq(6,Qn,K.VKq(4,fr,K.VKq(2,Br,K.DdM(1,vi))))))}const pr=function(){return{sort:"asc"}};function Pn(oe,ae){if(1&oe){const ee=K.EpF();K.TgZ(0,"li",7)(1,"a",15),K._uU(2,"Manage"),K.qZA()(),K.TgZ(3,"li",7)(4,"a",16),K._uU(5,"Upload"),K.qZA()(),K.TgZ(6,"li",7)(7,"a",17),K.NdJ("click",function(Ke){return K.CHM(ee),K.oxw().logout(Ke)}),K._uU(8,"Logout"),K.qZA()()}2&oe&&(K.xp6(1),K.Q6J("queryParams",K.DdM(1,pr)))}let zi=(()=>{class oe{constructor(ee){this.authService=ee}logout(ee){var Ve=this;return(0,qr.Z)(function*(){ee.preventDefault(),yield Ve.authService.logout()})()}}return oe.\u0275fac=function(ee){return new(ee||oe)(K.Y36(Vi.e))},oe.\u0275cmp=K.Xpm({type:oe,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","about",1,"px-2"],[1,"flex","flex-row","ml-auto"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],[1,"px-2",3,"routerLink"],["routerLink","video/manage",1,"px-2",3,"queryParams"],["href","javascript:void(0);",1,"px-2"],["href","javascript:void(0);",1,"px-2",3,"click"]],template:function(ee,Ve){if(1&ee&&(K.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),K._uU(3,"Clipit!"),K.qZA(),K.TgZ(4,"div",3)(5,"ul",4),K.YNc(6,cr,3,8,"li",5),K.ALo(7,"async"),K.YNc(8,Pn,9,2,"ng-template",null,6,K.W1O),K.TgZ(10,"li",7)(11,"a",8),K._uU(12,"About"),K.qZA()()(),K.TgZ(13,"ul",9)(14,"li")(15,"a"),K._UZ(16,"img",10),K.TgZ(17,"span",11),K._uU(18,"English"),K.qZA()()(),K.TgZ(19,"li",12)(20,"a"),K._UZ(21,"img",13),K.TgZ(22,"span",11),K._uU(23,"French"),K.qZA()()()()()()()),2&ee){const Ke=K.MAs(9);K.xp6(6),K.Q6J("ngIf",!1===K.lcZ(7,2,Ve.authService.isAuthenticated$))("ngIfElse",Ke)}},directives:[xn.yS,p.O5,xn.Od],pipes:[p.Ov],styles:[""],changeDetection:0}),oe})(),Dr=(()=>{class oe{constructor(){}ngOnInit(){}}return oe.\u0275fac=function(ee){return new(ee||oe)},oe.\u0275cmp=K.Xpm({type:oe,selectors:[["app-loading-spinner"]],decls:5,vars:0,consts:[[1,"loadingio-spinner-dual-ring-tosstnkrw7b"],[1,"ldio-stkcctj1ev"]],template:function(ee,Ve){1&ee&&(K.TgZ(0,"div",0)(1,"div",1),K._UZ(2,"div"),K.TgZ(3,"div"),K._UZ(4,"div"),K.qZA()()())},styles:['[_nghost-%COMP%]{display:block;position:fixed;top:0;right:0;width:100vw;height:100vh;background:rgba(82,118,154,.2)}@keyframes ldio-stkcctj1ev{0%{transform:rotate(0)}to{transform:rotate(360deg)}}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box!important}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:144px;height:144px;top:28px;left:28px;border-radius:50%;border:16px solid #000;border-color:#1c4595 transparent #1c4595 transparent;animation:ldio-stkcctj1ev 1s linear infinite}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-color:transparent}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;transform:rotate(45deg)}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:16px;height:16px;top:-16px;left:48px;background:#1c4595;border-radius:50%;box-shadow:0 128px #1c4595}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{left:-16px;top:48px;box-shadow:128px 0 #1c4595}[_nghost-%COMP%]   .loadingio-spinner-dual-ring-tosstnkrw7b[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;display:inline-block;overflow:hidden}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(1);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}'],changeDetection:0}),oe})();function Ar(oe,ae){1&oe&&K._UZ(0,"app-loading-spinner")}let jr=(()=>{class oe{constructor(ee){this.router=ee,this.title="clipit",this.loading$=(0,an.of)(!1),this.loading$=this.router.events.pipe((0,On.U)(Ve=>Ve instanceof xn.xV))}}return oe.\u0275fac=function(ee){return new(ee||oe)(K.Y36(xn.F0))},oe.\u0275cmp=K.Xpm({type:oe,selectors:[["app-root"]],decls:5,vars:3,consts:[["name","modal"],[4,"ngIf"]],template:function(ee,Ve){1&ee&&(K._UZ(0,"app-nav")(1,"router-outlet")(2,"router-outlet",0),K.YNc(3,Ar,1,0,"app-loading-spinner",1),K.ALo(4,"async")),2&ee&&(K.xp6(3),K.Q6J("ngIf",K.lcZ(4,1,Ve.loading$)))},directives:[zi,xn.lC,p.O5,Dr],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),oe})();var is=P(4466);let ni=(()=>{class oe{}return oe.\u0275fac=function(ee){return new(ee||oe)},oe.\u0275mod=K.oAB({type:oe,bootstrap:[jr]}),oe.\u0275inj=K.cJS({providers:[],imports:[[gr,di,qt.hO.initializeApp(ln_firebase),is.m]]}),oe})();(0,K.G48)();let ss=!1;jt.Z.initializeApp(ln_firebase),jt.Z.auth().onAuthStateChanged(()=>{ss||nr().bootstrapModule(ni).catch(oe=>console.error(oe)),ss=!0})},5867:(wt,Ue,P)=>{P.d(Ue,{C6:()=>p.getApps,Mq:()=>p.getApp,ZR:()=>p.FirebaseError});var p=P(9681);(0,p.registerVersion)("firebase","9.6.11","app")},127:(wt,Ue,P)=>{P.d(Ue,{Z:()=>p.Z});var p=P(3942);p.Z.registerVersion("firebase","9.6.11","app-compat")},820:(wt,Ue,P)=>{P.r(Ue);var p=P(5861),K=P(3942),Y=P(2090),ye=P(9681),fe=P(655),De=P(1877),Ae=P(4859);const He=function nt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},pt=function Ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Be=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mt=new De.Yd("@firebase/auth");function j(g,...c){mt.logLevel<=De.in.ERROR&&mt.error(`Auth (${ye.SDK_VERSION}): ${g}`,...c)}function U(g,...c){throw Pe(g,...c)}function J(g,...c){return Pe(g,...c)}function he(g,c,f){const _=Object.assign(Object.assign({},pt()),{[c]:f});return new Y.LL("auth","Firebase",_).create(c,{appName:g.name})}function Oe(g,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&U(g,"argument-error"),he(g,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pe(g,...c){if("string"!=typeof g){const f=c[0],_=[...c.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return Be.create(g,...c)}function Te(g,c,...f){if(!g)throw Pe(c,...f)}function pe(g){const c="INTERNAL ASSERTION FAILED: "+g;throw j(c),new Error(c)}function Z(g,c){g||pe(c)}const Ee=new Map;function ue(g){Z(g instanceof Function,"Expected a class definition");let c=Ee.get(g);return c?(Z(c instanceof g,"Instance stored in cache mismatched with class"),c):(c=new g,Ee.set(g,c),c)}function Ot(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function gt(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class $t{constructor(c,f){this.shortDelay=c,this.longDelay=f,Z(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function dt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gt()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ct(g,c){Z(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class At{static initialize(c,f,_){this.fetchImpl=c,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new $t(3e4,6e4);function Yt(g,c){return g.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:g.tenantId}):c}function sn(g,c,f,_){return wn.apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(g,c,f,_,k={}){return _n(g,k,(0,p.Z)(function*(){let Q={},be={};_&&("GET"===c?be=_:Q={body:JSON.stringify(_)});const Qe=(0,Y.xO)(Object.assign({key:g.config.apiKey},be)).slice(1),bt=yield g._getAdditionalHeaders();return bt["Content-Type"]="application/json",g.languageCode&&(bt["X-Firebase-Locale"]=g.languageCode),At.fetch()($n(g,g.config.apiHost,f,Qe),Object.assign({method:c,headers:bt,referrerPolicy:"no-referrer"},Q))}))})).apply(this,arguments)}function _n(g,c,f){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,p.Z)(function*(g,c,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},rt),c);try{const k=new gr(g),Q=yield Promise.race([f(),k.promise]);k.clearNetworkTimeout();const be=yield Q.json();if("needConfirmation"in be)throw jn(g,"account-exists-with-different-credential",be);if(Q.ok&&!("errorMessage"in be))return be;{const Qe=Q.ok?be.errorMessage:be.error.message,[bt,Zt]=Qe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===bt)throw jn(g,"credential-already-in-use",be);if("EMAIL_EXISTS"===bt)throw jn(g,"email-already-in-use",be);const fn=_[bt]||bt.toLowerCase().replace(/[_\s]+/g,"-");if(Zt)throw he(g,fn,Zt);U(g,fn)}}catch(k){if(k instanceof Y.ZR)throw k;U(g,"network-request-failed")}})).apply(this,arguments)}function Ln(g,c,f,_){return nr.apply(this,arguments)}function nr(){return(nr=(0,p.Z)(function*(g,c,f,_,k={}){const Q=yield sn(g,c,f,_,k);return"mfaPendingCredential"in Q&&U(g,"multi-factor-auth-required",{_serverResponse:Q}),Q})).apply(this,arguments)}function $n(g,c,f,_){const k=`${c}${f}?${_}`;return g.config.emulator?Ct(g.config,k):`${g.config.apiScheme}://${k}`}class gr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(J(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(g,c,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const k=J(g,c,_);return k.customData._tokenResponse=f,k}function Jt(){return(Jt=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function In(g,c){return on.apply(this,arguments)}function on(){return(on=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function mr(g,c){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Yn(g){if(g)try{const c=new Date(Number(g));if(!isNaN(c.getTime()))return c.toUTCString()}catch(c){}}function br(){return(br=(0,p.Z)(function*(g,c=!1){const f=(0,Y.m9)(g),_=yield f.getIdToken(c),k=St(_);Te(k&&k.exp&&k.auth_time&&k.iat,f.auth,"internal-error");const Q="object"==typeof k.firebase?k.firebase:void 0,be=null==Q?void 0:Q.sign_in_provider;return{claims:k,token:_,authTime:Yn(vt(k.auth_time)),issuedAtTime:Yn(vt(k.iat)),expirationTime:Yn(vt(k.exp)),signInProvider:be||null,signInSecondFactor:(null==Q?void 0:Q.sign_in_second_factor)||null}})).apply(this,arguments)}function vt(g){return 1e3*Number(g)}function St(g){const[c,f,_]=g.split(".");if(void 0===c||void 0===f||void 0===_)return j("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,Y.tV)(f);return k?JSON.parse(k):(j("Failed to decode base64 JWT payload"),null)}catch(k){return j("Caught error parsing JWT payload as JSON",k),null}}function rr(g,c){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(g,c,f=!1){if(f)return c;try{return yield c}catch(_){throw _ instanceof Y.ZR&&Tn(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}function Tn({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class Mi{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const k=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),_)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&c.schedule(!0))}c.schedule()})()}}class vr{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yn(this.lastLoginAt),this.creationTime=Yn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hn(g){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,p.Z)(function*(g){var c;const f=g.auth,_=yield g.getIdToken(),k=yield rr(g,mr(f,{idToken:_}));Te(null==k?void 0:k.users.length,f,"internal-error");const Q=k.users[0];g._notifyReloadListener(Q);const be=(null===(c=Q.providerUserInfo)||void 0===c?void 0:c.length)?Je(Q.providerUserInfo):[],Qe=Tt(g.providerData,be),fn=!!g.isAnonymous&&!(g.email&&Q.passwordHash||(null==Qe?void 0:Qe.length)),Ut={uid:Q.localId,displayName:Q.displayName||null,photoURL:Q.photoUrl||null,email:Q.email||null,emailVerified:Q.emailVerified||!1,phoneNumber:Q.phoneNumber||null,tenantId:Q.tenantId||null,providerData:Qe,metadata:new vr(Q.createdAt,Q.lastLoginAt),isAnonymous:fn};Object.assign(g,Ut)})).apply(this,arguments)}function pn(){return(pn=(0,p.Z)(function*(g){const c=(0,Y.m9)(g);yield Hn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Tt(g,c){return[...g.filter(_=>!c.some(k=>k.providerId===_.providerId)),...c]}function Je(g){return g.map(c=>{var{providerId:f}=c,_=(0,fe._T)(c,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Wt(){return(Wt=(0,p.Z)(function*(g,c){const f=yield _n(g,{},(0,p.Z)(function*(){const _=(0,Y.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:k,apiKey:Q}=g.config,be=$n(g,k,"/v1/token",`key=${Q}`),Qe=yield g._getAdditionalHeaders();return Qe["Content-Type"]="application/x-www-form-urlencoded",At.fetch()(be,{method:"POST",headers:Qe,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class un{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Te(c.idToken,"internal-error"),Te(void 0!==c.idToken,"internal-error"),Te(void 0!==c.refreshToken,"internal-error");const f="expiresIn"in c&&void 0!==c.expiresIn?Number(c.expiresIn):function Pt(g){const c=St(g);return Te(c,"internal-error"),Te(void 0!==c.exp,"internal-error"),Te(void 0!==c.iat,"internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var _=this;return(0,p.Z)(function*(){return Te(!_.accessToken||_.refreshToken,c,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(c,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var _=this;return(0,p.Z)(function*(){const{accessToken:k,refreshToken:Q,expiresIn:be}=yield function Et(g,c){return Wt.apply(this,arguments)}(c,f);_.updateTokensAndExpiration(k,Q,Number(be))})()}updateTokensAndExpiration(c,f,_){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(c,f){const{refreshToken:_,accessToken:k,expirationTime:Q}=f,be=new un;return _&&(Te("string"==typeof _,"internal-error",{appName:c}),be.refreshToken=_),k&&(Te("string"==typeof k,"internal-error",{appName:c}),be.accessToken=k),Q&&(Te("number"==typeof Q,"internal-error",{appName:c}),be.expirationTime=Q),be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new un,this.toJSON())}_performRefresh(){return pe("not implemented")}}function Lt(g,c){Te("string"==typeof g||void 0===g,"internal-error",{appName:c})}class ce{constructor(c){var{uid:f,auth:_,stsTokenManager:k}=c,Q=(0,fe._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=Q.displayName||null,this.email=Q.email||null,this.emailVerified=Q.emailVerified||!1,this.phoneNumber=Q.phoneNumber||null,this.photoURL=Q.photoURL||null,this.isAnonymous=Q.isAnonymous||!1,this.tenantId=Q.tenantId||null,this.providerData=Q.providerData?[...Q.providerData]:[],this.metadata=new vr(Q.createdAt||void 0,Q.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const _=yield rr(f,f.stsTokenManager.getToken(f.auth,c));return Te(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(c){return function Kr(g){return br.apply(this,arguments)}(this,c)}reload(){return function _r(g){return pn.apply(this,arguments)}(this)}_assign(c){this!==c&&(Te(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new ce(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var _=this;return(0,p.Z)(function*(){let k=!1;c.idToken&&c.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(c),k=!0),f&&(yield Hn(_)),yield _.auth._persistUserIfCurrent(_),k&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield rr(c,function Nt(g,c){return Jt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var _,k,Q,be,Qe,bt,Zt,fn;const Ut=null!==(_=f.displayName)&&void 0!==_?_:void 0,oi=null!==(k=f.email)&&void 0!==k?k:void 0,so=null!==(Q=f.phoneNumber)&&void 0!==Q?Q:void 0,js=null!==(be=f.photoURL)&&void 0!==be?be:void 0,Pl=null!==(Qe=f.tenantId)&&void 0!==Qe?Qe:void 0,Pa=null!==(bt=f._redirectEventId)&&void 0!==bt?bt:void 0,yc=null!==(Zt=f.createdAt)&&void 0!==Zt?Zt:void 0,Ff=null!==(fn=f.lastLoginAt)&&void 0!==fn?fn:void 0,{uid:ka,emailVerified:vc,isAnonymous:ad,providerData:ud,stsTokenManager:_c}=f;Te(ka&&_c,c,"internal-error");const Lf=un.fromJSON(this.name,_c);Te("string"==typeof ka,c,"internal-error"),Lt(Ut,c.name),Lt(oi,c.name),Te("boolean"==typeof vc,c,"internal-error"),Te("boolean"==typeof ad,c,"internal-error"),Lt(so,c.name),Lt(js,c.name),Lt(Pl,c.name),Lt(Pa,c.name),Lt(yc,c.name),Lt(Ff,c.name);const ld=new ce({uid:ka,auth:c,email:oi,emailVerified:vc,displayName:Ut,isAnonymous:ad,photoURL:js,phoneNumber:so,tenantId:Pl,stsTokenManager:Lf,createdAt:yc,lastLoginAt:Ff});return ud&&Array.isArray(ud)&&(ld.providerData=ud.map(Vf=>Object.assign({},Vf))),Pa&&(ld._redirectEventId=Pa),ld}static _fromIdTokenResponse(c,f,_=!1){return(0,p.Z)(function*(){const k=new un;k.updateFromServerResponse(f);const Q=new ce({uid:f.localId,auth:c,stsTokenManager:k,isAnonymous:_});return yield Hn(Q),Q})()}}const _e=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,_){var k=this;return(0,p.Z)(function*(){k.storage[f]=_})()}_get(f){var _=this;return(0,p.Z)(function*(){const k=_.storage[f];return void 0===k?null:k})()}_remove(f){var _=this;return(0,p.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function ze(g,c,f){return`firebase:${g}:${c}:${f}`}class xe{constructor(c,f,_){this.persistence=c,this.auth=f,this.userKey=_;const{config:k,name:Q}=this.auth;this.fullUserKey=ze(this.userKey,k.apiKey,Q),this.fullPersistenceKey=ze("persistence",k.apiKey,Q),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?ce._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,_="authUser"){return(0,p.Z)(function*(){if(!f.length)return new xe(ue(_e),c,_);const k=(yield Promise.all(f.map(function(){var Zt=(0,p.Z)(function*(fn){if(yield fn._isAvailable())return fn});return function(fn){return Zt.apply(this,arguments)}}()))).filter(Zt=>Zt);let Q=k[0]||ue(_e);const be=ze(_,c.config.apiKey,c.name);let Qe=null;for(const Zt of f)try{const fn=yield Zt._get(be);if(fn){const Ut=ce._fromJSON(c,fn);Zt!==Q&&(Qe=Ut),Q=Zt;break}}catch(fn){}const bt=k.filter(Zt=>Zt._shouldAllowMigration);return Q._shouldAllowMigration&&bt.length?(Q=bt[0],Qe&&(yield Q._set(be,Qe.toJSON())),yield Promise.all(f.map(function(){var Zt=(0,p.Z)(function*(fn){if(fn!==Q)try{yield fn._remove(be)}catch(Ut){}});return function(fn){return Zt.apply(this,arguments)}}())),new xe(Q,c,_)):new xe(Q,c,_)})()}}function ft(g){const c=g.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(ln(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(jt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(rn(c))return"Blackberry";if(On(c))return"Webos";if(gn(c))return"Safari";if((c.includes("chrome/")||qt(c))&&!c.includes("edge/"))return"Chrome";if(xn(c))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==_?void 0:_.length))return _[1]}return"Other"}function jt(g=(0,Y.z$)()){return/firefox\//i.test(g)}function gn(g=(0,Y.z$)()){const c=g.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function qt(g=(0,Y.z$)()){return/crios\//i.test(g)}function ln(g=(0,Y.z$)()){return/iemobile/i.test(g)}function xn(g=(0,Y.z$)()){return/android/i.test(g)}function rn(g=(0,Y.z$)()){return/blackberry/i.test(g)}function On(g=(0,Y.z$)()){return/webos/i.test(g)}function Ir(g=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(g)}function Tr(g=(0,Y.z$)()){return Ir(g)||xn(g)||On(g)||rn(g)||/windows phone/i.test(g)||ln(g)}function li(g,c=[]){let f;switch(g){case"Browser":f=ft((0,Y.z$)());break;case"Worker":f=`${ft((0,Y.z$)())}-${g}`;break;default:f=g}const _=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${ye.SDK_VERSION}/${_}`}class Or{constructor(c,f,_){this.app=c,this.heartbeatServiceProvider=f,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rt(this),this.idTokenSubscription=new Rt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,f){var _=this;return f&&(this._popupRedirectResolver=ue(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var k,Q;if(!_._deleted&&(_.persistenceManager=yield xe.create(_,c),!_._deleted)){if(null===(k=_._popupRedirectResolver)||void 0===k?void 0:k._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch(be){}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(Q=_.currentUser)||void 0===Q?void 0:Q.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var _;let k=yield f.assertedPersistence.getCurrentUser();if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Q=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,be=null==k?void 0:k._redirectEventId,Qe=yield f.tryRedirectSignIn(c);(!Q||Q===be)&&(null==Qe?void 0:Qe.user)&&(k=Qe.user)}return k?k._redirectEventId?(Te(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===k._redirectEventId?f.directlySetCurrentUser(k):f.reloadAndSetCurrentUserOrClear(k)):f.reloadAndSetCurrentUserOrClear(k):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch(k){yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){try{yield Hn(c)}catch(_){if("auth/network-request-failed"!==_.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function it(){if("undefined"==typeof navigator)return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const _=c?(0,Y.m9)(c):null;return _&&Te(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){if(!f._deleted)return c&&Te(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),f.queue((0,p.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(ue(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new Y.LL("auth","Firebase",c())}onAuthStateChanged(c,f,_){return this.registerStateListener(this.authStateSubscription,c,f,_)}onIdTokenChanged(c,f,_){return this.registerStateListener(this.idTokenSubscription,c,f,_)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var _=this;return(0,p.Z)(function*(){const k=yield _.getOrInitRedirectPersistenceManager(f);return null===c?k.removeCurrentUser():k.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const _=c&&ue(c)||f._popupRedirectResolver;Te(_,f,"argument-error"),f.redirectPersistenceManager=yield xe.create(f,[ue(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var _,k;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===c?f._currentUser:(null===(k=f.redirectUser)||void 0===k?void 0:k._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,_,k){if(this._deleted)return()=>{};const Q="function"==typeof f?f:f.next.bind(f),be=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(be,this,"internal-error"),be.then(()=>Q(this.currentUser)),"function"==typeof f?c.addObserver(f,_,k):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&(f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh()),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=li(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const _={"X-Client-Version":c.clientVersion};c.app.options.appId&&(_["X-Firebase-gmpid"]=c.app.options.appId);const k=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return k&&(_["X-Firebase-Client"]=k),_})()}}function ot(g){return(0,Y.m9)(g)}class Rt{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,Y.ne)(f=>this.observer=f)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Kn(g){const c=g.indexOf(":");return c<0?"":g.substr(0,c+1)}function sr(g){if(!g)return null;const c=Number(g);return isNaN(c)?null:c}class Sn{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return pe("not implemented")}_getIdTokenResponse(c){return pe("not implemented")}_linkToIdToken(c,f){return pe("not implemented")}_getReauthenticationResolver(c){return pe("not implemented")}}function or(g,c){return di.apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:resetPassword",Yt(g,c))})).apply(this,arguments)}function an(g,c){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Vi(g,c){return vi.apply(this,arguments)}function vi(){return(vi=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:update",Yt(g,c))})).apply(this,arguments)}function fr(){return(fr=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithPassword",Yt(g,c))})).apply(this,arguments)}function Qn(g,c){return cr.apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:sendOobCode",Yt(g,c))})).apply(this,arguments)}function pr(g,c){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,p.Z)(function*(g,c){return Qn(g,c)})).apply(this,arguments)}function zi(g,c){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,p.Z)(function*(g,c){return Qn(g,c)})).apply(this,arguments)}function Ar(g,c){return jr.apply(this,arguments)}function jr(){return(jr=(0,p.Z)(function*(g,c){return Qn(g,c)})).apply(this,arguments)}function is(g,c){return ni.apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*(g,c){return Qn(g,c)})).apply(this,arguments)}function oe(){return(oe=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithEmailLink",Yt(g,c))})).apply(this,arguments)}function ee(){return(ee=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithEmailLink",Yt(g,c))})).apply(this,arguments)}class Ve extends Sn{constructor(c,f,_,k=null){super("password",_),this._email=c,this._password=f,this._tenantId=k}static _fromEmailAndPassword(c,f){return new Ve(c,f,"password")}static _fromEmailAndCode(c,f,_=null){return new Ve(c,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Br(g,c){return fr.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function ss(g,c){return oe.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:U(c,"internal-error")}})()}_linkToIdToken(c,f){var _=this;return(0,p.Z)(function*(){switch(_.signInMethod){case"password":return an(c,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ae(g,c){return ee.apply(this,arguments)}(c,{idToken:f,email:_._email,oobCode:_._password});default:U(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Ke(g,c){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithIdp",Yt(g,c))})).apply(this,arguments)}class ge extends Sn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new ge(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):U("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:_,signInMethod:k}=f,Q=(0,fe._T)(f,["providerId","signInMethod"]);if(!_||!k)return null;const be=new ge(_,k);return be.idToken=Q.idToken||void 0,be.accessToken=Q.accessToken||void 0,be.secret=Q.secret,be.nonce=Q.nonce,be.pendingToken=Q.pendingToken||null,be}_getIdTokenResponse(c){return Ke(c,this.buildRequest())}_linkToIdToken(c,f){const _=this.buildRequest();return _.idToken=f,Ke(c,_)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Ke(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,Y.xO)(f)}return c}}function me(g,c){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:sendVerificationCode",Yt(g,c))})).apply(this,arguments)}function lt(){return(lt=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithPhoneNumber",Yt(g,c))})).apply(this,arguments)}function Vn(){return(Vn=(0,p.Z)(function*(g,c){const f=yield Ln(g,"POST","/v1/accounts:signInWithPhoneNumber",Yt(g,c));if(f.temporaryProof)throw jn(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Cr={USER_NOT_FOUND:"user-not-found"};function _i(){return(_i=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithPhoneNumber",Yt(g,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Cr)})).apply(this,arguments)}class Ki extends Sn{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new Ki({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new Ki({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function Xe(g,c){return lt.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function kt(g,c){return Vn.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function kn(g,c){return _i.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:_,verificationCode:k}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:_,code:k}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:_,phoneNumber:k,temporaryProof:Q}=c;return _||f||k||Q?new Ki({verificationId:f,verificationCode:_,phoneNumber:k,temporaryProof:Q}):null}}class xi{constructor(c){var f,_,k,Q,be,Qe;const bt=(0,Y.zd)((0,Y.pd)(c)),Zt=null!==(f=bt.apiKey)&&void 0!==f?f:null,fn=null!==(_=bt.oobCode)&&void 0!==_?_:null,Ut=function Ei(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=bt.mode)&&void 0!==k?k:null);Te(Zt&&fn&&Ut,"argument-error"),this.apiKey=Zt,this.operation=Ut,this.code=fn,this.continueUrl=null!==(Q=bt.continueUrl)&&void 0!==Q?Q:null,this.languageCode=null!==(be=bt.languageCode)&&void 0!==be?be:null,this.tenantId=null!==(Qe=bt.tenantId)&&void 0!==Qe?Qe:null}static parseLink(c){const f=function qi(g){const c=(0,Y.zd)((0,Y.pd)(g)).link,f=c?(0,Y.zd)((0,Y.pd)(c)).deep_link_id:null,_=(0,Y.zd)((0,Y.pd)(g)).deep_link_id;return(_?(0,Y.zd)((0,Y.pd)(_)).link:null)||_||f||c||g}(c);try{return new xi(f)}catch(_){return null}}}let fs=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return Ve._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const k=xi.parseLink(_);return Te(k,"argument-error"),Ve._fromEmailAndCode(f,k.code,k.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class wi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class $r extends wi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class _s extends $r{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return Te("providerId"in f&&"signInMethod"in f,"argument-error"),ge._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Te(c.idToken||c.accessToken,"argument-error"),ge._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return _s.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return _s.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:k,pendingToken:Q,nonce:be,providerId:Qe}=c;if(!_&&!k&&!f&&!Q||!Qe)return null;try{return new _s(Qe)._credential({idToken:f,accessToken:_,nonce:be,pendingToken:Q})}catch(bt){return null}}}let os=(()=>{class g extends $r{constructor(){super("facebook.com")}static credential(f){return ge._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(_){return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),as=(()=>{class g extends $r{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return ge._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:k}=f;if(!_&&!k)return null;try{return g.credential(_,k)}catch(Q){return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Ms=(()=>{class g extends $r{constructor(){super("github.com")}static credential(f){return ge._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(_){return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Es extends Sn{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return Ke(c,this.buildRequest())}_linkToIdToken(c,f){const _=this.buildRequest();return _.idToken=f,Ke(c,_)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Ke(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:_,signInMethod:k,pendingToken:Q}=f;return _&&k&&Q&&_===k?new Es(_,Q):null}static _create(c,f){return new Es(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oi extends wi{constructor(c){Te(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Oi.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Oi.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Es.fromJSON(c);return Te(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:_}=c;if(!f||!_)return null;try{return Es._create(_,f)}catch(k){return null}}}let ps=(()=>{class g extends $r{constructor(){super("twitter.com")}static credential(f,_){return ge._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:k}=f;if(!_||!k)return null;try{return g.credential(_,k)}catch(Q){return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function xs(g,c){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signUp",Yt(g,c))})).apply(this,arguments)}class Er{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,_,k=!1){return(0,p.Z)(function*(){const Q=yield ce._fromIdTokenResponse(c,_,k),be=Ii(_);return new Er({user:Q,providerId:be,_tokenResponse:_,operationType:f})})()}static _forOperation(c,f,_){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(_,!0);const k=Ii(_);return new Er({user:c,providerId:k,_tokenResponse:_,operationType:f})})()}}function Ii(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function ws(){return(ws=(0,p.Z)(function*(g){var c;const f=ot(g);if(yield f._initializationPromise,null===(c=f.currentUser)||void 0===c?void 0:c.isAnonymous)return new Er({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield xs(f,{returnSecureToken:!0}),k=yield Er._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(k.user),k})).apply(this,arguments)}class gs extends Y.ZR{constructor(c,f,_,k){var Q;super(f.code,f.message),this.operationType=_,this.user=k,Object.setPrototypeOf(this,gs.prototype),this.customData={appName:c.name,tenantId:null!==(Q=c.tenantId)&&void 0!==Q?Q:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(c,f,_,k){return new gs(c,f,_,k)}}function Zi(g,c,f,_){return("reauthenticate"===c?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(Q=>{throw"auth/multi-factor-auth-required"===Q.code?gs._fromErrorAndOperation(g,Q,c,_):Q})}function Nr(g){return new Set(g.map(({providerId:c})=>c).filter(c=>!!c))}function qs(){return(qs=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g);yield H(!0,f,c);const{providerUserInfo:_}=yield In(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),k=Nr(_||[]);return f.providerData=f.providerData.filter(Q=>k.has(Q.providerId)),k.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function ar(g,c){return x.apply(this,arguments)}function x(){return(x=(0,p.Z)(function*(g,c,f=!1){const _=yield rr(g,c._linkToIdToken(g.auth,yield g.getIdToken()),f);return Er._forOperation(g,"link",_)})).apply(this,arguments)}function H(g,c,f){return M.apply(this,arguments)}function M(){return(M=(0,p.Z)(function*(g,c,f){yield Hn(c);const k=!1===g?"provider-already-linked":"no-such-provider";Te(Nr(c.providerData).has(f)===g,c.auth,k)})).apply(this,arguments)}function q(g,c){return de.apply(this,arguments)}function de(){return(de=(0,p.Z)(function*(g,c,f=!1){const{auth:_}=g,k="reauthenticate";try{const Q=yield rr(g,Zi(_,k,c,g),f);Te(Q.idToken,_,"internal-error");const be=St(Q.idToken);Te(be,_,"internal-error");const{sub:Qe}=be;return Te(g.uid===Qe,_,"user-mismatch"),Er._forOperation(g,k,Q)}catch(Q){throw"auth/user-not-found"===(null==Q?void 0:Q.code)&&U(_,"user-mismatch"),Q}})).apply(this,arguments)}function qe(g,c){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,p.Z)(function*(g,c,f=!1){const _="signIn",k=yield Zi(g,_,c),Q=yield Er._fromIdTokenResponse(g,_,k);return f||(yield g._updateCurrentUser(Q.user)),Q})).apply(this,arguments)}function yt(g,c){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,p.Z)(function*(g,c){return qe(ot(g),c)})).apply(this,arguments)}function Un(g,c){return cn.apply(this,arguments)}function cn(){return(cn=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g);return yield H(!1,f,c.providerId),ar(f,c)})).apply(this,arguments)}function vn(g,c){return dr.apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(g,c){return q((0,Y.m9)(g),c)})).apply(this,arguments)}function qn(g,c){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(g,c){return Ln(g,"POST","/v1/accounts:signInWithCustomToken",Yt(g,c))})).apply(this,arguments)}function ri(){return(ri=(0,p.Z)(function*(g,c){const f=ot(g),_=yield qn(f,{token:c,returnSecureToken:!0}),k=yield Er._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(k.user),k})).apply(this,arguments)}class tn{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Bi._fromServerResponse(c,f):U(c,"internal-error")}}class Bi extends tn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Bi(f)}}function ji(g,c,f){var _;Te((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),Te(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Te(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(Te(f.android.packageName.length>0,g,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Ys(){return(Ys=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g),k={requestType:"PASSWORD_RESET",email:c};f&&ji(_,k,f),yield zi(_,k)})).apply(this,arguments)}function S(){return(S=(0,p.Z)(function*(g,c,f){yield or((0,Y.m9)(g),{oobCode:c,newPassword:f})})).apply(this,arguments)}function F(){return(F=(0,p.Z)(function*(g,c){yield Vi((0,Y.m9)(g),{oobCode:c})})).apply(this,arguments)}function Le(g,c){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g),_=yield or(f,{oobCode:c}),k=_.requestType;switch(Te(k,f,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(_.mfaInfo,f,"internal-error");default:Te(_.email,f,"internal-error")}let Q=null;return _.mfaInfo&&(Q=tn._fromServerResponse(ot(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:Q},operation:k}})).apply(this,arguments)}function hi(){return(hi=(0,p.Z)(function*(g,c){const{data:f}=yield Le((0,Y.m9)(g),c);return f.email})).apply(this,arguments)}function Gr(){return(Gr=(0,p.Z)(function*(g,c,f){const _=ot(g),k=yield xs(_,{returnSecureToken:!0,email:c,password:f}),Q=yield Er._fromIdTokenResponse(_,"signIn",k);return yield _._updateCurrentUser(Q.user),Q})).apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g),k={requestType:"EMAIL_SIGNIN",email:c};Te(f.handleCodeInApp,_,"argument-error"),f&&ji(_,k,f),yield Ar(_,k)})).apply(this,arguments)}function oo(){return(oo=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g),k=fs.credentialWithLink(c,f||Ot());return Te(k._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),yt(_,k)})).apply(this,arguments)}function fi(g,c){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:createAuthUri",Yt(g,c))})).apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(g,c){const _={identifier:c,continueUri:gt()?Ot():"http://localhost"},{signinMethods:k}=yield fi((0,Y.m9)(g),_);return k||[]})).apply(this,arguments)}function ao(){return(ao=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g),k={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};c&&ji(f.auth,k,c);const{email:Q}=yield pr(f.auth,k);Q!==g.email&&(yield g.reload())})).apply(this,arguments)}function Ea(){return(Ea=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g),Q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:c};f&&ji(_.auth,Q,f);const{email:be}=yield is(_.auth,Q);be!==g.email&&(yield g.reload())})).apply(this,arguments)}function Pr(g,c){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(g,c){return sn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(g,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const _=(0,Y.m9)(g),Q={idToken:yield _.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},be=yield rr(_,Pr(_.auth,Q));_.displayName=be.displayName||null,_.photoURL=be.photoUrl||null;const Qe=_.providerData.find(({providerId:bt})=>"password"===bt);Qe&&(Qe.displayName=_.displayName,Qe.photoURL=_.photoURL),yield _._updateTokensIfNecessary(be)})).apply(this,arguments)}function Vo(g,c,f){return Js.apply(this,arguments)}function Js(){return(Js=(0,p.Z)(function*(g,c,f){const{auth:_}=g,Q={idToken:yield g.getIdToken(),returnSecureToken:!0};c&&(Q.email=c),f&&(Q.password=f);const be=yield rr(g,an(_,Q));yield g._updateTokensIfNecessary(be,!0)})).apply(this,arguments)}class Ns{constructor(c,f,_={}){this.isNewUser=c,this.providerId=f,this.profile=_}}class Da extends Ns{constructor(c,f,_,k){super(c,f,_),this.username=k}}class Is extends Ns{constructor(c,f){super(c,"facebook.com",f)}}class Co extends Da{constructor(c,f){super(c,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class _u extends Ns{constructor(c,f){super(c,"google.com",f)}}class ia extends Da{constructor(c,f,_){super(c,"twitter.com",f,_)}}function Wr(g){const{user:c,_tokenResponse:f}=g;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Ia(g){var c,f;if(!g)return null;const{providerId:_}=g,k=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},Q=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&(null==g?void 0:g.idToken)){const be=null===(f=null===(c=St(g.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(be)return new Ns(Q,"anonymous"!==be&&"custom"!==be?be:null)}if(!_)return null;switch(_){case"facebook.com":return new Is(Q,k);case"github.com":return new Co(Q,k);case"google.com":return new _u(Q,k);case"twitter.com":return new ia(Q,k,g.screenName||null);case"custom":case"anonymous":return new Ns(Q,null);default:return new Ns(Q,_,k)}}(f)}class Yi{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new Yi("enroll",c)}static _fromMfaPendingCredential(c){return new Yi("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,_;if(null==c?void 0:c.multiFactorSession){if(null===(f=c.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return Yi._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null===(_=c.multiFactorSession)||void 0===_?void 0:_.idToken)return Yi._fromIdtoken(c.multiFactorSession.idToken)}return null}}class lo{constructor(c,f,_){this.session=c,this.hints=f,this.signInResolver=_}static _fromError(c,f){const _=ot(c),k=f.customData._serverResponse,Q=(k.mfaInfo||[]).map(Qe=>tn._fromServerResponse(_,Qe));Te(k.mfaPendingCredential,_,"internal-error");const be=Yi._fromMfaPendingCredential(k.mfaPendingCredential);return new lo(be,Q,function(){var Qe=(0,p.Z)(function*(bt){const Zt=yield bt._process(_,be);delete k.mfaInfo,delete k.mfaPendingCredential;const fn=Object.assign(Object.assign({},k),{idToken:Zt.idToken,refreshToken:Zt.refreshToken});switch(f.operationType){case"signIn":const Ut=yield Er._fromIdTokenResponse(_,f.operationType,fn);return yield _._updateCurrentUser(Ut.user),Ut;case"reauthenticate":return Te(f.user,_,"internal-error"),Er._forOperation(f.user,f.operationType,fn);default:U(_,"internal-error")}});return function(bt){return Qe.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function zr(g,c){return sn(g,"POST","/v2/accounts/mfaEnrollment:start",Yt(g,c))}class Qi{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>tn._fromServerResponse(c.auth,_)))})}static _fromUser(c){return new Qi(c)}getSession(){var c=this;return(0,p.Z)(function*(){return Yi._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var _=this;return(0,p.Z)(function*(){const k=c,Q=yield _.getSession(),be=yield rr(_.user,k._process(_.user.auth,Q,f));return yield _.user._updateTokensIfNecessary(be),_.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){const _="string"==typeof c?c:c.uid,k=yield f.user.getIdToken(),Q=yield rr(f.user,function wu(g,c){return sn(g,"POST","/v2/accounts/mfaEnrollment:withdraw",Yt(g,c))}(f.user.auth,{idToken:k,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:be})=>be!==_),yield f.user._updateTokensIfNecessary(Q);try{yield f.user.reload()}catch(be){if("auth/user-token-expired"!==be.code)throw be}})()}}const Ps=new WeakMap,$i="__sak";class ks{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem($i,"1"),this.storage.removeItem($i),Promise.resolve(!0)):Promise.resolve(!1)}catch(c){return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const hr=(()=>{class g extends ks{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ba(){const g=(0,Y.z$)();return gn(g)||Ir(g)}()&&function ir(){try{return!(!window||window===window.top)}catch(g){return!1}}(),this.fallbackToPolling=Tr(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const k=this.storage.getItem(_),Q=this.localCache[_];k!==Q&&f(_,Q,k)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((Qe,bt,Zt)=>{this.notifyListeners(Qe,Zt)});const k=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Qe=this.storage.getItem(k);if(f.newValue!==Qe)null!==f.newValue?this.storage.setItem(k,f.newValue):this.storage.removeItem(k);else if(this.localCache[k]===f.newValue&&!_)return}const Q=()=>{const Qe=this.storage.getItem(k);!_&&this.localCache[k]===Qe||this.notifyListeners(k,Qe)},be=this.storage.getItem(k);!function xr(){return(0,Y.w1)()&&10===document.documentMode}()||be===f.newValue||f.newValue===f.oldValue?Q():setTimeout(Q,10)}notifyListeners(f,_){this.localCache[f]=_;const k=this.listeners[f];if(k)for(const Q of Array.from(k))Q(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var k=()=>super._set,Q=this;return(0,p.Z)(function*(){yield k().call(Q,f,_),Q.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,k=this;return(0,p.Z)(function*(){const Q=yield _().call(k,f);return k.localCache[f]=JSON.stringify(Q),Q})()}_remove(f){var _=()=>super._remove,k=this;return(0,p.Z)(function*(){yield _().call(k,f),delete k.localCache[f]})()}}return g.type="LOCAL",g})(),Xs=(()=>{class g extends ks{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let Ho=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(Q=>Q.isListeningto(f));if(_)return _;const k=new g(f);return this.receivers.push(k),k}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,p.Z)(function*(){const k=f,{eventId:Q,eventType:be,data:Qe}=k.data,bt=_.handlersMap[be];if(!(null==bt?void 0:bt.size))return;k.ports[0].postMessage({status:"ack",eventId:Q,eventType:be});const Zt=Array.from(bt).map(function(){var Ut=(0,p.Z)(function*(oi){return oi(k.origin,Qe)});return function(oi){return Ut.apply(this,arguments)}}()),fn=yield function Ji(g){return Promise.all(g.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return c.apply(this,arguments)}}()))}(Zt);k.ports[0].postMessage({status:"done",eventId:Q,eventType:be,response:fn})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Go(g="",c=10){let f="";for(let _=0;_<c;_++)f+=Math.floor(10*Math.random());return g+f}class Ta{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,_=50){var k=this;return(0,p.Z)(function*(){const Q="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Q)throw new Error("connection_unavailable");let be,Qe;return new Promise((bt,Zt)=>{const fn=Go("",20);Q.port1.start();const Ut=setTimeout(()=>{Zt(new Error("unsupported_event"))},_);Qe={messageChannel:Q,onMessage(oi){const so=oi;if(so.data.eventId===fn)switch(so.data.status){case"ack":clearTimeout(Ut),be=setTimeout(()=>{Zt(new Error("timeout"))},3e3);break;case"done":clearTimeout(be),bt(so.data.response);break;default:clearTimeout(Ut),clearTimeout(be),Zt(new Error("invalid_response"))}}},k.handlers.add(Qe),Q.port1.addEventListener("message",Qe.onMessage),k.target.postMessage({eventType:c,eventId:fn,data:f},[Q.port2])}).finally(()=>{Qe&&k.removeMessageHandler(Qe)})})()}}function wr(){return window}function Ds(){return void 0!==wr().WorkerGlobalScope&&"function"==typeof wr().importScripts}function vs(){return(vs=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(g){return null}})).apply(this,arguments)}const ii="firebaseLocalStorageDb",ls="firebaseLocalStorage",ho="fbase_key";class Fs{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function ct(g,c){return g.transaction([ls],c?"readwrite":"readonly").objectStore(ls)}function I(){const g=indexedDB.open(ii,1);return new Promise((c,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(ls,{keyPath:ho})}catch(k){f(k)}}),g.addEventListener("success",(0,p.Z)(function*(){const _=g.result;_.objectStoreNames.contains(ls)?c(_):(_.close(),yield function er(){const g=indexedDB.deleteDatabase(ii);return new Fs(g).toPromise()}(),c(yield I()))}))})}function E(g,c,f){return y.apply(this,arguments)}function y(){return(y=(0,p.Z)(function*(g,c,f){const _=ct(g,!0).put({[ho]:c,value:f});return new Fs(_).toPromise()})).apply(this,arguments)}function N(){return(N=(0,p.Z)(function*(g,c){const f=ct(g,!1).get(c),_=yield new Fs(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function B(g,c){const f=ct(g,!0).delete(c);return new Fs(f).toPromise()}const Dt=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield I()),f.db})()}_withRetries(f){var _=this;return(0,p.Z)(function*(){let k=0;for(;;)try{const Q=yield _._openDb();return yield f(Q)}catch(Q){if(k++>3)throw Q;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return Ds()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=Ho._getInstance(function za(){return Ds()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,p.Z)(function*(k,Q){return{keyProcessed:(yield f._poll()).includes(Q.key)}});return function(k,Q){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,p.Z)(function*(k,Q){return["keyChanged"]});return function(k,Q){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var _,k;if(f.activeServiceWorker=yield function Aa(){return vs.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Ta(f.activeServiceWorker);const Q=yield f.sender._send("ping",{},800);!Q||(null===(_=Q[0])||void 0===_?void 0:_.fulfilled)&&(null===(k=Q[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,p.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function nc(){var g;return(null===(g=null==navigator?void 0:navigator.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch(k){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield I();return yield E(f,$i,"1"),yield B(f,$i),!0}catch(f){}return!1})()}_withPendingWrite(f){var _=this;return(0,p.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var k=this;return(0,p.Z)(function*(){return k._withPendingWrite((0,p.Z)(function*(){return yield k._withRetries(Q=>E(Q,f,_)),k.localCache[f]=_,k.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,p.Z)(function*(){const k=yield _._withRetries(Q=>function b(g,c){return N.apply(this,arguments)}(Q,f));return _.localCache[f]=k,k})()}_remove(f){var _=this;return(0,p.Z)(function*(){return _._withPendingWrite((0,p.Z)(function*(){return yield _._withRetries(k=>B(k,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const _=yield f._withRetries(be=>{const Qe=ct(be,!1).getAll();return new Fs(Qe).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const k=[],Q=new Set;for(const{fbase_key:be,value:Qe}of _)Q.add(be),JSON.stringify(f.localCache[be])!==JSON.stringify(Qe)&&(f.notifyListeners(be,Qe),k.push(be));for(const be of Object.keys(f.localCache))f.localCache[be]&&!Q.has(be)&&(f.notifyListeners(be,null),k.push(be));return k})()}notifyListeners(f,_){this.localCache[f]=_;const k=this.listeners[f];if(k)for(const Q of Array.from(k))Q(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function Rn(g,c){return sn(g,"POST","/v2/accounts/mfaSignIn:start",Yt(g,c))}function Nn(){return(Nn=(0,p.Z)(function*(g){return(yield sn(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function cs(g){return new Promise((c,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=c,_.onerror=k=>{const Q=J("internal-error");Q.customData=k,f(Q)},_.type="text/javascript",_.charset="UTF-8",function Cs(){var g,c;return null!==(c=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==c?c:document}().appendChild(_)})}function Wo(g){return`__${g}${Math.floor(1e6*Math.random())}`}const bs=1e12;class rc{constructor(c){this.auth=c,this.counter=bs,this._widgets=new Map}render(c,f){const _=this.counter;return this._widgets.set(_,new Cn(c,this.auth.name,f||{})),this.counter++,_}reset(c){var f;const _=c||bs;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(c){var f;return(null===(f=this._widgets.get(c||bs))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var _;return null===(_=f._widgets.get(c||bs))||void 0===_||_.execute(),""})()}}class Cn{constructor(c,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof c?document.getElementById(c):c;Te(k,"argument-error",{appName:f}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function eo(g){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch(_){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(_){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ka=Wo("rcb"),gi=new $t(3e4,6e4);class Zc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!wr().grecaptcha}load(c,f=""){return Te(function qa(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(wr().grecaptcha):new Promise((_,k)=>{const Q=wr().setTimeout(()=>{k(J(c,"network-request-failed"))},gi.get());wr()[Ka]=()=>{wr().clearTimeout(Q),delete wr()[Ka];const Qe=wr().grecaptcha;if(!Qe)return void k(J(c,"internal-error"));const bt=Qe.render;Qe.render=(Zt,fn)=>{const Ut=bt(Zt,fn);return this.counter++,Ut},this.hostLanguage=f,_(Qe)},cs(`https://www.google.com/recaptcha/api.js??${(0,Y.xO)({onload:Ka,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(Q),k(J(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){return!!wr().grecaptcha&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yc{load(c){return(0,p.Z)(function*(){return new rc(c)})()}clearedOneInstance(){}}const Sa="recaptcha",Zn={theme:"light",type:"image"};class Wd{constructor(c,f=Object.assign({},Zn),_){this.parameters=f,this.type=Sa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ot(_),this.isInvisible="invisible"===this.parameters.size,Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof c?document.getElementById(c):c;Te(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yc:new Zc,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),_=c.getAssertedRecaptcha();return _.getResponse(f)||new Promise(Q=>{const be=Qe=>{!Qe||(c.tokenChangeListeners.delete(be),Q(Qe))};c.tokenChangeListeners.add(be),c.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof c)c(f);else if("string"==typeof c){const _=wr()[c];"function"==typeof _&&_(f)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){Te(gt()&&!Ds(),c.auth,"internal-error"),yield function Hi(){let g=null;return new Promise(c=>{"complete"!==document.readyState?(g=()=>c(),window.addEventListener("load",g)):c()}).catch(c=>{throw g&&window.removeEventListener("load",g),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function tr(g){return Nn.apply(this,arguments)}(c.auth);Te(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ls{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=Ki._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Fn(){return(Fn=(0,p.Z)(function*(g,c,f){const _=ot(g),k=yield Gi(_,c,(0,Y.m9)(f));return new Ls(k,Q=>yt(_,Q))})).apply(this,arguments)}function Ts(){return(Ts=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g);yield H(!1,_,"phone");const k=yield Gi(_.auth,c,(0,Y.m9)(f));return new Ls(k,Q=>Un(_,Q))})).apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g),k=yield Gi(_.auth,c,(0,Y.m9)(f));return new Ls(k,Q=>vn(_,Q))})).apply(this,arguments)}function Gi(g,c,f){return As.apply(this,arguments)}function As(){return(As=(0,p.Z)(function*(g,c,f){var _;const k=yield f.verify();try{let Q;if(Te("string"==typeof k,g,"argument-error"),Te(f.type===Sa,g,"argument-error"),Q="string"==typeof c?{phoneNumber:c}:c,"session"in Q){const be=Q.session;if("phoneNumber"in Q)return Te("enroll"===be.type,g,"internal-error"),(yield zr(g,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:Q.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{Te("signin"===be.type,g,"internal-error");const Qe=(null===(_=Q.multiFactorHint)||void 0===_?void 0:_.uid)||Q.multiFactorUid;return Te(Qe,g,"missing-multi-factor-info"),(yield Rn(g,{mfaPendingCredential:be.credential,mfaEnrollmentId:Qe,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield me(g,{phoneNumber:Q.phoneNumber,recaptchaToken:k});return be}}finally{f._reset()}})).apply(this,arguments)}function zo(){return(zo=(0,p.Z)(function*(g,c){yield ar((0,Y.m9)(g),c)})).apply(this,arguments)}let Di=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=ot(f)}verifyPhoneNumber(f,_){return Gi(this.auth,f,(0,Y.m9)(_))}static credential(f,_){return Ki._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:k}=f;return _&&k?Ki._fromTokenResponse(_,k):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Xi(g,c){return c?ue(c):(Te(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class So extends Sn{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Ke(c,this._buildIdpRequest())}_linkToIdToken(c,f){return Ke(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return Ke(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function Du(g){return qe(g.auth,new So(g),g.bypassAuthState)}function It(g){const{auth:c,user:f}=g;return Te(f,c,"internal-error"),q(f,new So(g),g.bypassAuthState)}function ll(g){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,p.Z)(function*(g){const{auth:c,user:f}=g;return Te(f,c,"internal-error"),ar(f,new So(g),g.bypassAuthState)})).apply(this,arguments)}class Ci{constructor(c,f,_,k,Q=!1){this.auth=c,this.resolver=_,this.user=k,this.bypassAuthState=Q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(_,k){c.pendingPromise={resolve:_,reject:k};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(Q){c.reject(Q)}});return function(_,k){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:_,sessionId:k,postBody:Q,tenantId:be,error:Qe,type:bt}=c;if(Qe)return void f.reject(Qe);const Zt={auth:f.auth,requestUri:_,sessionId:k,tenantId:be||void 0,postBody:Q||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(bt)(Zt))}catch(fn){f.reject(fn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Du;case"linkViaPopup":case"linkViaRedirect":return ll;case"reauthViaPopup":case"reauthViaRedirect":return It;default:U(this.auth,"internal-error")}}resolve(c){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const to=new $t(2e3,1e4);function Mo(){return(Mo=(0,p.Z)(function*(g,c,f){const _=ot(g);Oe(g,c,wi);const k=Xi(_,f);return new no(_,"signInViaPopup",c,k).executeNotNull()})).apply(this,arguments)}function xo(){return(xo=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g);Oe(_.auth,c,wi);const k=Xi(_.auth,f);return new no(_.auth,"reauthViaPopup",c,k,_).executeNotNull()})).apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g);Oe(_.auth,c,wi);const k=Xi(_.auth,f);return new no(_.auth,"linkViaPopup",c,k,_).executeNotNull()})).apply(this,arguments)}let no=(()=>{class g extends Ci{constructor(f,_,k,Q,be){super(f,_,Q,be),this.provider=k,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const _=yield f.execute();return Te(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,p.Z)(function*(){Z(1===f.filter.length,"Popup operations only handle one event");const _=Go();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(k=>{f.reject(k)}),f.resolver._isIframeWebStorageSupported(f.auth,k=>{k||f.reject(J(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(J(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,k;this.pollId=(null===(k=null===(_=this.authWindow)||void 0===_?void 0:_.window)||void 0===k?void 0:k.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(J(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,to.get())};f()}}return g.currentPopupAction=null,g})();const Vs=new Map;class dl extends Ci{constructor(c,f,_=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let _=Vs.get(f.auth._key());if(!_){try{const Q=(yield function xa(g,c){return sa.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;_=()=>Promise.resolve(Q)}catch(k){_=()=>Promise.reject(k)}Vs.set(f.auth._key(),_)}return f.bypassAuthState||Vs.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,_=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(_,c);if("unknown"!==c.type){if(c.eventId){const k=yield _.auth._redirectUserForId(c.eventId);if(k)return _.user=k,f().call(_,c);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function sa(){return(sa=(0,p.Z)(function*(g,c){const f=O(c),_=T(g);if(!(yield _._isAvailable()))return!1;const k="true"===(yield _._get(f));return yield _._remove(f),k})).apply(this,arguments)}function qo(g,c){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,p.Z)(function*(g,c){return T(g)._set(O(c),"true")})).apply(this,arguments)}function T(g){return ue(g._redirectPersistence)}function O(g){return ze("pendingRedirect",g.config.apiKey,g.name)}function Ce(){return(Ce=(0,p.Z)(function*(g,c,f){const _=ot(g);Oe(g,c,wi);const k=Xi(_,f);return yield qo(k,_),k._openRedirect(_,c,"signInViaRedirect")})).apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g);Oe(_.auth,c,wi);const k=Xi(_.auth,f);yield qo(k,_.auth);const Q=yield Qa(_);return k._openRedirect(_.auth,c,"reauthViaRedirect",Q)})).apply(this,arguments)}function Wn(){return(Wn=(0,p.Z)(function*(g,c,f){const _=(0,Y.m9)(g);Oe(_.auth,c,wi);const k=Xi(_.auth,f);yield H(!1,_,c.providerId),yield qo(k,_.auth);const Q=yield Qa(_);return k._openRedirect(_.auth,c,"linkViaRedirect",Q)})).apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(g,c){return yield ot(g)._initializationPromise,mi(g,c,!1)})).apply(this,arguments)}function mi(g,c){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,p.Z)(function*(g,c,f=!1){const _=ot(g),k=Xi(_,c),be=yield new dl(_,k,f).execute();return be&&!f&&(delete be.user._redirectEventId,yield _._persistUserIfCurrent(be.user),yield _._setRedirectUser(null,c)),be})).apply(this,arguments)}function Qa(g){return es.apply(this,arguments)}function es(){return(es=(0,p.Z)(function*(g){const c=Go(`${g.uid}:::`);return g._redirectEventId=c,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),c})).apply(this,arguments)}class Us{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(c,_)&&(f=!0,this.sendToConsumer(c,_),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Qc(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fl(g);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var _;if(c.error&&!fl(c)){const k=(null===(_=c.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(J(this.auth,k))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const _=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&_}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(go(c))}saveEventToCache(c){this.cachedEventUids.add(go(c)),this.lastProcessedEventTime=Date.now()}}function go(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(c=>c).join("-")}function fl({type:g,error:c}){return"unknown"===g&&"auth/no-auth-event"===(null==c?void 0:c.code)}function pl(g){return yi.apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(g,c={}){return sn(g,"GET","/v1/projects",c)})).apply(this,arguments)}const Kd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Af=/^https?/;function oa(){return(oa=(0,p.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:c}=yield pl(g);for(const f of c)try{if(gl(f))return}catch(_){}U(g,"unauthorized-domain")})).apply(this,arguments)}function gl(g){const c=Ot(),{protocol:f,hostname:_}=new URL(c);if(g.startsWith("chrome-extension://")){const be=new URL(g);return""===be.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&be.hostname===_}if(!Af.test(f))return!1;if(Kd.test(g))return _===g;const k=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(_)}const Mf=new $t(3e4,6e4);function xf(){const g=wr().___jsl;if(null==g?void 0:g.H)for(const c of Object.keys(g.H))if(g.H[c].r=g.H[c].r||[],g.H[c].L=g.H[c].L||[],g.H[c].r=[...g.H[c].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Ro=null;function ml(g){return Ro=Ro||function qd(g){return new Promise((c,f)=>{var _,k,Q;function be(){xf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{xf(),f(J(g,"network-request-failed"))},timeout:Mf.get()})}if(null===(k=null===(_=wr().gapi)||void 0===_?void 0:_.iframes)||void 0===k?void 0:k.Iframe)c(gapi.iframes.getContext());else{if(!(null===(Q=wr().gapi)||void 0===Q?void 0:Q.load)){const Qe=Wo("iframefcb");return wr()[Qe]=()=>{gapi.load?be():f(J(g,"network-request-failed"))},cs(`https://apis.google.com/js/api.js?onload=${Qe}`).catch(bt=>f(bt))}be()}}).catch(c=>{throw Ro=null,c})}(g),Ro}const Of=new $t(5e3,15e3),mo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ic=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function No(g){const c=g.config;Te(c.authDomain,g,"auth-domain-config-required");const f=c.emulator?Ct(c,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,_={apiKey:c.apiKey,appName:g.name,v:ye.SDK_VERSION},k=ic.get(g.config.apiHost);k&&(_.eid=k);const Q=g._getFrameworks();return Q.length&&(_.fw=Q.join(",")),`${f}?${(0,Y.xO)(_).slice(1)}`}function bu(){return bu=(0,p.Z)(function*(g){const c=yield ml(g),f=wr().gapi;return Te(f,g,"internal-error"),c.open({where:document.body,url:No(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mo,dontclear:!0},_=>new Promise(function(){var k=(0,p.Z)(function*(Q,be){yield _.restyle({setHideOnLeave:!1});const Qe=J(g,"network-request-failed"),bt=wr().setTimeout(()=>{be(Qe)},Of.get());function Zt(){wr().clearTimeout(bt),Q(_)}_.ping(Zt).then(Zt,()=>{be(Qe)})});return function(Q,be){return k.apply(this,arguments)}}()))}),bu.apply(this,arguments)}const Qd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oc{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(c){}}}function ac(g,c,f,_,k,Q){Te(g.config.authDomain,g,"auth-domain-config-required"),Te(g.config.apiKey,g,"invalid-api-key");const be={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:ye.SDK_VERSION,eventId:k};if(c instanceof wi){c.setDefaultLanguage(g.languageCode),be.providerId=c.providerId||"",(0,Y.xb)(c.getCustomParameters())||(be.customParameters=JSON.stringify(c.getCustomParameters()));for(const[bt,Zt]of Object.entries(Q||{}))be[bt]=Zt}if(c instanceof $r){const bt=c.getScopes().filter(Zt=>""!==Zt);bt.length>0&&(be.scopes=bt.join(","))}g.tenantId&&(be.tid=g.tenantId);const Qe=be;for(const bt of Object.keys(Qe))void 0===Qe[bt]&&delete Qe[bt];return`${function Xd({config:g}){return g.emulator?Ct(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,Y.xO)(Qe).slice(1)}`}const Zo="webStorageSupport";class vl extends class Rf{constructor(c){this.factorId=c}_process(c,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,_);case"signin":return this._finalizeSignIn(c,f.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new vl(c)}_finalizeEnroll(c,f,_){return function pi(g,c){return sn(g,"POST","/v2/accounts/mfaEnrollment:finalize",Yt(g,c))}(c,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function zt(g,c){return sn(g,"POST","/v2/accounts/mfaSignIn:finalize",Yt(g,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mg=(()=>{class g{constructor(){}static assertion(f){return vl._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var Nf="@firebase/auth",eh="0.19.12";class Xa{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(_=>{var k;c((null===(k=_)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ra(){return window}function tu(){return(tu=(0,p.Z)(function*(g,c,f){var _;const{BuildInfo:k}=Ra();Z(c.sessionId,"AuthEvent did not contain a session ID");const Q=yield xg(c.sessionId),be={};return Ir()?be.ibi=k.packageName:xn()?be.apn=k.packageName:U(g,"operation-not-supported-in-this-environment"),k.displayName&&(be.appDisplayName=k.displayName),be.sessionId=Q,ac(g,f,c.type,void 0,null!==(_=c.eventId)&&void 0!==_?_:void 0,be)})).apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(g){const{BuildInfo:c}=Ra(),f={};Ir()?f.iosBundleId=c.packageName:xn()?f.androidPackageName=c.packageName:U(g,"operation-not-supported-in-this-environment"),yield pl(g,f)})).apply(this,arguments)}function nu(){return(nu=(0,p.Z)(function*(g,c,f){const{cordova:_}=Ra();let k=()=>{};try{yield new Promise((Q,be)=>{let Qe=null;function bt(){var Ut;Q();const oi=null===(Ut=_.plugins.browsertab)||void 0===Ut?void 0:Ut.close;"function"==typeof oi&&oi(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function Zt(){Qe||(Qe=window.setTimeout(()=>{be(J(g,"redirect-cancelled-by-user"))},2e3))}function fn(){"visible"===(null==document?void 0:document.visibilityState)&&Zt()}c.addPassiveListener(bt),document.addEventListener("resume",Zt,!1),xn()&&document.addEventListener("visibilitychange",fn,!1),k=()=>{c.removePassiveListener(bt),document.removeEventListener("resume",Zt,!1),document.removeEventListener("visibilitychange",fn,!1),Qe&&window.clearTimeout(Qe)}})}finally{k()}})).apply(this,arguments)}function xg(g){return uc.apply(this,arguments)}function uc(){return(uc=(0,p.Z)(function*(g){const c=Og(g),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Og(g){if(Z(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(g);const c=new ArrayBuffer(g.length),f=new Uint8Array(c);for(let _=0;_<g.length;_++)f[_]=g.charCodeAt(_);return f}!function th(g){(0,ye._registerComponent)(new Ae.wA("auth",(c,{options:f})=>{const _=c.getProvider("app").getImmediate(),k=c.getProvider("heartbeat"),{apiKey:Q,authDomain:be}=_.options;return((Qe,bt)=>{Te(Q&&!Q.includes(":"),"invalid-api-key",{appName:Qe.name}),Te(!(null==be?void 0:be.includes(":")),"argument-error",{appName:Qe.name});const Zt={apiKey:Q,authDomain:be,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:li(g)},fn=new Or(Qe,bt,Zt);return function Ne(g,c){const f=(null==c?void 0:c.persistence)||[],_=(Array.isArray(f)?f:[f]).map(ue);(null==c?void 0:c.errorMap)&&g._updateErrorMap(c.errorMap),g._initializeWithPersistence(_,null==c?void 0:c.popupRedirectResolver)}(fn,f),fn})(_,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,_)=>{c.getProvider("auth-internal").initialize()})),(0,ye._registerComponent)(new Ae.wA("auth-internal",c=>{const f=ot(c.getProvider("auth").getImmediate());return new Xa(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ye.registerVersion)(Nf,eh,function eu(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,ye.registerVersion)(Nf,eh,"esm2017")}("Browser");class cc extends Us{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function rh(g){return Il.apply(this,arguments)}function Il(){return(Il=(0,p.Z)(function*(g){const c=yield Cl()._get(td(g));return c&&(yield Cl()._remove(td(g))),c})).apply(this,arguments)}function Dl(){const g=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const _=Math.floor(Math.random()*c.length);g.push(c.charAt(_))}return g.join("")}function Cl(){return ue(hr)}function td(g){return ze("authEvent",g.config.apiKey,g.name)}function bl(g){if(!(null==g?void 0:g.includes("?")))return{};const[c,...f]=g.split("?");return(0,Y.zd)(f.join("?"))}function Tl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:J("no-auth-event")}}function hc(){var g;return(null===(g=null==self?void 0:self.location)||void 0===g?void 0:g.protocol)||null}function sh(g=(0,Y.z$)()){return!("file:"!==hc()&&"ionic:"!==hc()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function An(){try{const g=self.localStorage,c=Go();if(g)return g.setItem(c,"1"),g.removeItem(c),!function Al(g=(0,Y.z$)()){return function fc(){return(0,Y.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Rg(g=(0,Y.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,Y.hl)()}catch(g){return Sl()&&(0,Y.hl)()}return!1}function Sl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function iu(){return(function vo(){return"http:"===hc()||"https:"===hc()}()||(0,Y.ru)()||sh())&&!function rd(){return(0,Y.b$)()||(0,Y.UG)()}()&&An()&&!Sl()}function su(){return sh()&&"undefined"!=typeof document}function Yo(){return(Yo=(0,p.Z)(function*(){return!!su()&&new Promise(g=>{const c=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),g(!0)})})})).apply(this,arguments)}const Bs={LOCAL:"local",NONE:"none",SESSION:"session"},Nu=Te,id="persistence";function Ml(g){return sd.apply(this,arguments)}function sd(){return(sd=(0,p.Z)(function*(g){yield g._initializationPromise;const c=uh(),f=ze(id,g.config.apiKey,g.name);c&&c.setItem(f,g._getPersistence())})).apply(this,arguments)}function uh(){var g;try{return(null===(g=function pc(){return"undefined"!=typeof window?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch(c){return null}}const xl=Te;class Po{constructor(){this.browserResolver=ue(class Su{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xs,this._completeRedirectFn=mi}_openPopup(c,f,_,k){var Q=this;return(0,p.Z)(function*(){var be;Z(null===(be=Q.eventManagers[c._key()])||void 0===be?void 0:be.manager,"_initialize() not called before _openPopup()");const Qe=ac(c,f,_,Ot(),k);return function Au(g,c,f,_=500,k=600){const Q=Math.max((window.screen.availHeight-k)/2,0).toString(),be=Math.max((window.screen.availWidth-_)/2,0).toString();let Qe="";const bt=Object.assign(Object.assign({},Qd),{width:_.toString(),height:k.toString(),top:Q,left:be}),Zt=(0,Y.z$)().toLowerCase();f&&(Qe=qt(Zt)?"_blank":f),jt(Zt)&&(c=c||"http://localhost",bt.scrollbars="yes");const fn=Object.entries(bt).reduce((oi,[so,js])=>`${oi}${so}=${js},`,"");if(function Li(g=(0,Y.z$)()){var c;return Ir(g)&&!!(null===(c=window.navigator)||void 0===c?void 0:c.standalone)}(Zt)&&"_self"!==Qe)return function Jd(g,c){const f=document.createElement("a");f.href=g,f.target=c;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(c||"",Qe),new oc(null);const Ut=window.open(c||"",Qe,fn);Te(Ut,g,"popup-blocked");try{Ut.focus()}catch(oi){}return new oc(Ut)}(c,Qe,Go())})()}_openRedirect(c,f,_,k){var Q=this;return(0,p.Z)(function*(){return yield Q._originValidation(c),function al(g){wr().location.href=g}(ac(c,f,_,Ot(),k)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:k,promise:Q}=this.eventManagers[f];return k?Promise.resolve(k):(Z(Q,"If manager is not set, promise should be"),Q)}const _=this.initAndGetManager(c);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const _=yield function sc(g){return bu.apply(this,arguments)}(c),k=new Us(c);return _.register("authEvent",Q=>(Te(null==Q?void 0:Q.authEvent,c,"invalid-auth-event"),{status:k.onEvent(Q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:k},f.iframes[c._key()]=_,k})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(Zo,{type:Zo},k=>{var Q;const be=null===(Q=null==k?void 0:k[0])||void 0===Q?void 0:Q[Zo];void 0!==be&&f(!!be),U(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Sf(g){return oa.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return Tr()||gn()||Ir()}}),this.cordovaResolver=ue(class Na{constructor(){this._redirectPersistence=Xs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mi}_initialize(c){var f=this;return(0,p.Z)(function*(){const _=c._key();let k=f.eventManagers.get(_);return k||(k=new cc(c),f.eventManagers.set(_,k),f.attachCallbackListeners(c,k)),k})()}_openPopup(c){U(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,_,k){var Q=this;return(0,p.Z)(function*(){!function wl(g){var c,f,_,k,Q,be,Qe,bt,Zt,fn;const Ut=Ra();Te("function"==typeof(null===(c=null==Ut?void 0:Ut.universalLinks)||void 0===c?void 0:c.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(void 0!==(null===(f=null==Ut?void 0:Ut.BuildInfo)||void 0===f?void 0:f.packageName),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(Q=null===(k=null===(_=null==Ut?void 0:Ut.cordova)||void 0===_?void 0:_.plugins)||void 0===k?void 0:k.browsertab)||void 0===Q?void 0:Q.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(bt=null===(Qe=null===(be=null==Ut?void 0:Ut.cordova)||void 0===be?void 0:be.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===bt?void 0:bt.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(fn=null===(Zt=null==Ut?void 0:Ut.cordova)||void 0===Zt?void 0:Zt.InAppBrowser)||void 0===fn?void 0:fn.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const be=yield Q._initialize(c);yield be.initialized(),be.resetRedirect(),function hl(){Vs.clear()}(),yield Q._originValidation(c);const Qe=function ru(g,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:Dl(),postBody:null,tenantId:g.tenantId,error:J(g,"no-auth-event")}}(c,_,k);yield function Ou(g,c){return Cl()._set(td(g),c)}(c,Qe);const bt=yield function nh(g,c,f){return tu.apply(this,arguments)}(c,Qe,f),Zt=yield function El(g){const{cordova:c}=Ra();return new Promise(f=>{c.plugins.browsertab.isAvailable(_=>{let k=null;_?c.plugins.browsertab.openUrl(g):k=c.InAppBrowser.open(g,function ei(g=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(k)})})}(bt);return function bi(g,c,f){return nu.apply(this,arguments)}(c,be,Zt)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function xu(g){return yo.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:_,handleOpenURL:k,BuildInfo:Q}=Ra(),be=setTimeout((0,p.Z)(function*(){yield rh(c),f.onEvent(Tl())}),500),Qe=function(){var fn=(0,p.Z)(function*(Ut){clearTimeout(be);const oi=yield rh(c);let so=null;oi&&(null==Ut?void 0:Ut.url)&&(so=function ih(g,c){var f,_;const k=function zn(g){const c=bl(g),f=c.link?decodeURIComponent(c.link):void 0,_=bl(f).link,k=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return bl(k).link||k||_||f||g}(c);if(k.includes("/__/auth/callback")){const Q=bl(k),be=Q.firebaseError?function Ti(g){try{return JSON.parse(g)}catch(c){return null}}(decodeURIComponent(Q.firebaseError)):null,Qe=null===(_=null===(f=null==be?void 0:be.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],bt=Qe?J(Qe):null;return bt?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:bt,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:k,postBody:null}}return null}(oi,Ut.url)),f.onEvent(so||Tl())});return function(oi){return fn.apply(this,arguments)}}();void 0!==_&&"function"==typeof _.subscribe&&_.subscribe(null,Qe);const bt=k,Zt=`${Q.packageName.toLowerCase()}://`;Ra().handleOpenURL=function(){var fn=(0,p.Z)(function*(Ut){if(Ut.toLowerCase().startsWith(Zt)&&Qe({url:Ut}),"function"==typeof bt)try{bt(Ut)}catch(oi){console.error(oi)}});return function(Ut){return fn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Xs,this._completeRedirectFn=mi}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,_,k){var Q=this;return(0,p.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openPopup(c,f,_,k)})()}_openRedirect(c,f,_,k){var Q=this;return(0,p.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openRedirect(c,f,_,k)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return su()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function Pi(){return Yo.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function lh(g){return g.unwrap()}function Ol(g){return Pu(g)}function Pu(g){const{_tokenResponse:c}=g instanceof Y.ZR?g.customData:g;if(!c)return null;if(!(g instanceof Y.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Di.credentialFromResult(g);const f=c.providerId;if(!f||"password"===f)return null;let _;switch(f){case"google.com":_=as;break;case"facebook.com":_=os;break;case"github.com":_=Ms;break;case"twitter.com":_=ps;break;default:const{oauthIdToken:k,oauthAccessToken:Q,oauthTokenSecret:be,pendingToken:Qe,nonce:bt}=c;return Q||be||k||Qe?Qe?f.startsWith("saml.")?Es._create(f,Qe):ge._fromParams({providerId:f,signInMethod:f,pendingToken:Qe,idToken:k,accessToken:Q}):new _s(f).credential({idToken:k,accessToken:Q,rawNonce:bt}):null}return g instanceof Y.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function Lr(g,c){return c.catch(f=>{throw f instanceof Y.ZR&&function ch(g,c){var f;const _=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===c.code)c.resolver=new Nl(g,function jo(g,c){var f;const _=(0,Y.m9)(g),k=c;return Te(c.customData.operationType,_,"argument-error"),Te(null===(f=k.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),lo._fromError(_,k)}(g,c));else if(_){const k=Pu(c),Q=c;k&&(Q.credential=k,Q.tenantId=_.tenantId||void 0,Q.email=_.email||void 0,Q.phoneNumber=_.phoneNumber||void 0)}}(g,f),f}).then(f=>{const k=f.user;return{operationType:f.operationType,credential:Ol(f),additionalUserInfo:Wr(f),user:Qo.getOrCreate(k)}})}function Rl(g,c){return gc.apply(this,arguments)}function gc(){return(gc=(0,p.Z)(function*(g,c){const f=yield c;return{verificationId:f.verificationId,confirm:_=>Lr(g,f.confirm(_))}})).apply(this,arguments)}class Nl{constructor(c,f){this.resolver=f,this.auth=function ts(g){return g.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Lr(lh(this.auth),this.resolver.resolveSignIn(c))}}class Qo{constructor(c){this._delegate=c,this.multiFactor=function To(g){const c=(0,Y.m9)(g);return Ps.has(c)||Ps.set(c,Qi._fromUser(c)),Ps.get(c)}(c)}static getOrCreate(c){return Qo.USER_MAP.has(c)||Qo.USER_MAP.set(c,new Qo(c)),Qo.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return Lr(f.auth,Un(f._delegate,c))})()}linkWithPhoneNumber(c,f){var _=this;return(0,p.Z)(function*(){return Rl(_.auth,function ul(g,c,f){return Ts.apply(this,arguments)}(_._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return Lr(f.auth,function cl(g,c,f){return Oo.apply(this,arguments)}(f._delegate,c,Po))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Ml(ot(f.auth)),function Kt(g,c,f){return function hn(g,c,f){return Wn.apply(this,arguments)}(g,c,f)}(f._delegate,c,Po)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return Lr(f.auth,vn(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Rl(this.auth,function si(g,c,f){return Ao.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return Lr(this.auth,function Ko(g,c,f){return xo.apply(this,arguments)}(this._delegate,c,Po))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Ml(ot(f.auth)),function je(g,c,f){return function ht(g,c,f){return xt.apply(this,arguments)}(g,c,f)}(f._delegate,c,Po)})()}sendEmailVerification(c){return function ys(g,c){return ao.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function Ri(g,c){return qs.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function vu(g,c){return Vo((0,Y.m9)(g),c,null)}(this._delegate,c)}updatePassword(c){return function wa(g,c){return Vo((0,Y.m9)(g),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Ma(g,c){return zo.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function na(g,c){return ra.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function uo(g,c,f){return Ea.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qo.USER_MAP=new WeakMap;const ku=Te;let mc=(()=>{class g{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=f.options;ku(k,"invalid-api-key",{appName:f.name}),ku(k,"invalid-api-key",{appName:f.name});const Q="undefined"!=typeof window?Po:void 0;this._delegate=_.initialize({options:{persistence:Pf(k,f.name),popupRedirectResolver:Q}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function en(g,c,f){const _=ot(g);Te(_._canInitEmulator,_,"emulator-config-failed"),Te(/^https?:\/\//.test(c),_,"invalid-emulator-scheme");const k=!!(null==f?void 0:f.disableWarnings),Q=Kn(c),{host:be,port:Qe}=function ci(g){const c=Kn(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(c.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(_);if(k){const Q=k[1];return{host:Q,port:sr(_.substr(Q.length+1))}}{const[Q,be]=_.split(":");return{host:Q,port:sr(be)}}}(c);_.config.emulator={url:`${Q}//${be}${null===Qe?"":`:${Qe}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:be,port:Qe,protocol:Q.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function ti(){function g(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,_)}applyActionCode(f){return function A(g,c){return F.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Le(this._delegate,f)}confirmPasswordReset(f,_){return function R(g,c,f){return S.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var k=this;return(0,p.Z)(function*(){return Lr(k._delegate,function Yr(g,c,f){return Gr.apply(this,arguments)}(k._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Do(g,c){return Rs.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function yu(g,c){const f=xi.parseLink(c);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){ku(iu(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function bn(g,c){return Sr.apply(this,arguments)}(f._delegate,Po);return _?Lr(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function ds(g,c){ot(g)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,_,k){const{next:Q,error:be,complete:Qe}=dh(f,_,k);return this._delegate.onAuthStateChanged(Q,be,Qe)}onIdTokenChanged(f,_,k){const{next:Q,error:be,complete:Qe}=dh(f,_,k);return this._delegate.onIdTokenChanged(Q,be,Qe)}sendSignInLinkToEmail(f,_){return function ms(g,c,f){return Fo.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function Zs(g,c,f){return Ys.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,p.Z)(function*(){let k;switch(function oh(g,c){Nu(Object.values(Bs).includes(c),g,"invalid-persistence-type"),(0,Y.b$)()?Nu(c!==Bs.SESSION,g,"unsupported-persistence-type"):(0,Y.UG)()?Nu(c===Bs.NONE,g,"unsupported-persistence-type"):Sl()?Nu(c===Bs.NONE||c===Bs.LOCAL&&(0,Y.hl)(),g,"unsupported-persistence-type"):Nu(c===Bs.NONE||An(),g,"unsupported-persistence-type")}(_._delegate,f),f){case Bs.SESSION:k=Xs;break;case Bs.LOCAL:k=(yield ue(Dt)._isAvailable())?Dt:hr;break;case Bs.NONE:k=_e;break;default:return U("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Lr(this._delegate,function Os(g){return ws.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Lr(this._delegate,yt(this._delegate,f))}signInWithCustomToken(f){return Lr(this._delegate,function Ui(g,c){return ri.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return Lr(this._delegate,function Qs(g,c,f){return yt((0,Y.m9)(g),fs.credential(c,f))}(this._delegate,f,_))}signInWithEmailLink(f,_){return Lr(this._delegate,function _a(g,c,f){return oo.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return Rl(this._delegate,function zd(g,c,f){return Fn.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,p.Z)(function*(){return ku(iu(),_._delegate,"operation-not-supported-in-this-environment"),Lr(_._delegate,function po(g,c,f){return Mo.apply(this,arguments)}(_._delegate,f,Po))})()}signInWithRedirect(f){var _=this;return(0,p.Z)(function*(){return ku(iu(),_._delegate,"operation-not-supported-in-this-environment"),yield Ml(_._delegate),function z(g,c,f){return function ie(g,c,f){return Ce.apply(this,arguments)}(g,c,f)}(_._delegate,f,Po)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function dn(g,c){return hi.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Bs,g})();function dh(g,c,f){let _=g;"function"!=typeof g&&({next:_,error:c,complete:f}=g);const k=_;return{next:be=>k(be&&Qo.getOrCreate(be)),error:c,complete:f}}function Pf(g,c){const f=function ah(g,c){const f=uh();if(!f)return[];const _=ze(id,g,c);switch(f.getItem(_)){case Bs.NONE:return[_e];case Bs.LOCAL:return[Dt,Xs];case Bs.SESSION:return[Xs];default:return[]}}(g,c);if("undefined"!=typeof self&&!f.includes(Dt)&&f.push(Dt),"undefined"!=typeof window)for(const _ of[hr,Xs])f.includes(_)||f.push(_);return f.includes(_e)||f.push(_e),f}class ou{constructor(){this.providerId="phone",this._delegate=new Di(lh(K.Z.auth()))}static credential(c,f){return Di.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}ou.PHONE_SIGN_IN_METHOD=Di.PHONE_SIGN_IN_METHOD,ou.PROVIDER_ID=Di.PROVIDER_ID;const od=Te;class kf{constructor(c,f,_=K.Z.app()){var k;od(null===(k=_.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Wd(c,f,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fh(g){g.INTERNAL.registerComponent(new Ae.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),_=c.getProvider("auth");return new mc(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:fs,FacebookAuthProvider:os,GithubAuthProvider:Ms,GoogleAuthProvider:as,OAuthProvider:_s,SAMLAuthProvider:Oi,PhoneAuthProvider:ou,PhoneMultiFactorGenerator:Mg,RecaptchaVerifier:kf,TwitterAuthProvider:ps,Auth:mc,AuthCredential:Sn,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.12")}(K.Z)},1135:(wt,Ue,P)=>{P.d(Ue,{X:()=>K});var p=P(7579);class K extends p.x{constructor(ye){super(),this._value=ye}get value(){return this.getValue()}_subscribe(ye){const fe=super._subscribe(ye);return!fe.closed&&ye.next(this._value),fe}getValue(){const{hasError:ye,thrownError:fe,_value:De}=this;if(ye)throw fe;return this._throwIfClosed(),De}next(ye){super.next(this._value=ye)}}},9751:(wt,Ue,P)=>{P.d(Ue,{y:()=>Se});var p=P(930),K=P(727),Y=P(8822),ye=P(9635),fe=P(2416),De=P(576),Ae=P(2806);let Se=(()=>{class Ie{constructor(Ze){Ze&&(this._subscribe=Ze)}lift(Ze){const He=new Ie;return He.source=this,He.operator=Ze,He}subscribe(Ze,He,pt){const Be=function se(Ie){return Ie&&Ie instanceof p.Lv||function le(Ie){return Ie&&(0,De.m)(Ie.next)&&(0,De.m)(Ie.error)&&(0,De.m)(Ie.complete)}(Ie)&&(0,K.Nn)(Ie)}(Ze)?Ze:new p.Hp(Ze,He,pt);return(0,Ae.x)(()=>{const{operator:Re,source:mt}=this;Be.add(Re?Re.call(Be,mt):mt?this._subscribe(Be):this._trySubscribe(Be))}),Be}_trySubscribe(Ze){try{return this._subscribe(Ze)}catch(He){Ze.error(He)}}forEach(Ze,He){return new(He=Me(He))((pt,Be)=>{const Re=new p.Hp({next:mt=>{try{Ze(mt)}catch(j){Be(j),Re.unsubscribe()}},error:Be,complete:pt});this.subscribe(Re)})}_subscribe(Ze){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(Ze)}[Y.L](){return this}pipe(...Ze){return(0,ye.U)(Ze)(this)}toPromise(Ze){return new(Ze=Me(Ze))((He,pt)=>{let Be;this.subscribe(Re=>Be=Re,Re=>pt(Re),()=>He(Be))})}}return Ie.create=nt=>new Ie(nt),Ie})();function Me(Ie){var nt;return null!==(nt=null!=Ie?Ie:fe.v.Promise)&&void 0!==nt?nt:Promise}},7579:(wt,Ue,P)=>{P.d(Ue,{x:()=>Ae});var p=P(9751),K=P(727);const ye=(0,P(3888).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=P(8737),De=P(2806);let Ae=(()=>{class Me extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(se){const Ie=new Se(this,this);return Ie.operator=se,Ie}_throwIfClosed(){if(this.closed)throw new ye}next(se){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ie of this.currentObservers)Ie.next(se)}})}error(se){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=se;const{observers:Ie}=this;for(;Ie.length;)Ie.shift().error(se)}})}complete(){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:se}=this;for(;se.length;)se.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var se;return(null===(se=this.observers)||void 0===se?void 0:se.length)>0}_trySubscribe(se){return this._throwIfClosed(),super._trySubscribe(se)}_subscribe(se){return this._throwIfClosed(),this._checkFinalizedStatuses(se),this._innerSubscribe(se)}_innerSubscribe(se){const{hasError:Ie,isStopped:nt,observers:Ze}=this;return Ie||nt?K.Lc:(this.currentObservers=null,Ze.push(se),new K.w0(()=>{this.currentObservers=null,(0,fe.P)(Ze,se)}))}_checkFinalizedStatuses(se){const{hasError:Ie,thrownError:nt,isStopped:Ze}=this;Ie?se.error(nt):Ze&&se.complete()}asObservable(){const se=new p.y;return se.source=this,se}}return Me.create=(le,se)=>new Se(le,se),Me})();class Se extends Ae{constructor(le,se){super(),this.destination=le,this.source=se}next(le){var se,Ie;null===(Ie=null===(se=this.destination)||void 0===se?void 0:se.next)||void 0===Ie||Ie.call(se,le)}error(le){var se,Ie;null===(Ie=null===(se=this.destination)||void 0===se?void 0:se.error)||void 0===Ie||Ie.call(se,le)}complete(){var le,se;null===(se=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===se||se.call(le)}_subscribe(le){var se,Ie;return null!==(Ie=null===(se=this.source)||void 0===se?void 0:se.subscribe(le))&&void 0!==Ie?Ie:K.Lc}}},930:(wt,Ue,P)=>{P.d(Ue,{Hp:()=>pt,Lv:()=>Ie});var p=P(576),K=P(727),Y=P(2416),ye=P(7849),fe=P(5032);const De=Me("C",void 0,void 0);function Me(U,J,he){return{kind:U,value:J,error:he}}var le=P(3410),se=P(2806);class Ie extends K.w0{constructor(J){super(),this.isStopped=!1,J?(this.destination=J,(0,K.Nn)(J)&&J.add(this)):this.destination=j}static create(J,he,Oe){return new pt(J,he,Oe)}next(J){this.isStopped?mt(function Se(U){return Me("N",U,void 0)}(J),this):this._next(J)}error(J){this.isStopped?mt(function Ae(U){return Me("E",void 0,U)}(J),this):(this.isStopped=!0,this._error(J))}complete(){this.isStopped?mt(De,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(J){this.destination.next(J)}_error(J){try{this.destination.error(J)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const nt=Function.prototype.bind;function Ze(U,J){return nt.call(U,J)}class He{constructor(J){this.partialObserver=J}next(J){const{partialObserver:he}=this;if(he.next)try{he.next(J)}catch(Oe){Be(Oe)}}error(J){const{partialObserver:he}=this;if(he.error)try{he.error(J)}catch(Oe){Be(Oe)}else Be(J)}complete(){const{partialObserver:J}=this;if(J.complete)try{J.complete()}catch(he){Be(he)}}}class pt extends Ie{constructor(J,he,Oe){let Pe;if(super(),(0,p.m)(J)||!J)Pe={next:null!=J?J:void 0,error:null!=he?he:void 0,complete:null!=Oe?Oe:void 0};else{let Te;this&&Y.v.useDeprecatedNextContext?(Te=Object.create(J),Te.unsubscribe=()=>this.unsubscribe(),Pe={next:J.next&&Ze(J.next,Te),error:J.error&&Ze(J.error,Te),complete:J.complete&&Ze(J.complete,Te)}):Pe=J}this.destination=new He(Pe)}}function Be(U){Y.v.useDeprecatedSynchronousErrorHandling?(0,se.O)(U):(0,ye.h)(U)}function mt(U,J){const{onStoppedNotification:he}=Y.v;he&&le.z.setTimeout(()=>he(U,J))}const j={closed:!0,next:fe.Z,error:function Re(U){throw U},complete:fe.Z}},727:(wt,Ue,P)=>{P.d(Ue,{Lc:()=>De,w0:()=>fe,Nn:()=>Ae});var p=P(576);const Y=(0,P(3888).d)(Me=>function(se){Me(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((Ie,nt)=>`${nt+1}) ${Ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se});var ye=P(8737);class fe{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:se}=this;if(se)if(this._parentage=null,Array.isArray(se))for(const Ze of se)Ze.remove(this);else se.remove(this);const{initialTeardown:Ie}=this;if((0,p.m)(Ie))try{Ie()}catch(Ze){le=Ze instanceof Y?Ze.errors:[Ze]}const{_finalizers:nt}=this;if(nt){this._finalizers=null;for(const Ze of nt)try{Se(Ze)}catch(He){le=null!=le?le:[],He instanceof Y?le=[...le,...He.errors]:le.push(He)}}if(le)throw new Y(le)}}add(le){var se;if(le&&le!==this)if(this.closed)Se(le);else{if(le instanceof fe){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(se=this._finalizers)&&void 0!==se?se:[]).push(le)}}_hasParent(le){const{_parentage:se}=this;return se===le||Array.isArray(se)&&se.includes(le)}_addParent(le){const{_parentage:se}=this;this._parentage=Array.isArray(se)?(se.push(le),se):se?[se,le]:le}_removeParent(le){const{_parentage:se}=this;se===le?this._parentage=null:Array.isArray(se)&&(0,ye.P)(se,le)}remove(le){const{_finalizers:se}=this;se&&(0,ye.P)(se,le),le instanceof fe&&le._removeParent(this)}}fe.EMPTY=(()=>{const Me=new fe;return Me.closed=!0,Me})();const De=fe.EMPTY;function Ae(Me){return Me instanceof fe||Me&&"closed"in Me&&(0,p.m)(Me.remove)&&(0,p.m)(Me.add)&&(0,p.m)(Me.unsubscribe)}function Se(Me){(0,p.m)(Me)?Me():Me.unsubscribe()}},2416:(wt,Ue,P)=>{P.d(Ue,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(wt,Ue,P)=>{P.d(Ue,{z:()=>fe});var p=P(8189),Y=P(3269),ye=P(8996);function fe(...De){return function K(){return(0,p.J)(1)}()((0,ye.D)(De,(0,Y.yG)(De)))}},515:(wt,Ue,P)=>{P.d(Ue,{E:()=>K});const K=new(P(9751).y)(fe=>fe.complete())},8996:(wt,Ue,P)=>{P.d(Ue,{D:()=>J});var p=P(8421),K=P(5363),Y=P(9468),De=P(9751),Se=P(2202),Me=P(576),le=P(9672);function Ie(he,Oe){if(!he)throw new Error("Iterable cannot be null");return new De.y(Pe=>{(0,le.f)(Pe,Oe,()=>{const Te=he[Symbol.asyncIterator]();(0,le.f)(Pe,Oe,()=>{Te.next().then(pe=>{pe.done?Pe.complete():Pe.next(pe.value)})},0,!0)})})}var nt=P(3670),Ze=P(8239),He=P(1144),pt=P(6495),Be=P(2206),Re=P(4532),mt=P(3260);function J(he,Oe){return Oe?function U(he,Oe){if(null!=he){if((0,nt.c)(he))return function ye(he,Oe){return(0,p.Xf)(he).pipe((0,Y.R)(Oe),(0,K.Q)(Oe))}(he,Oe);if((0,He.z)(he))return function Ae(he,Oe){return new De.y(Pe=>{let Te=0;return Oe.schedule(function(){Te===he.length?Pe.complete():(Pe.next(he[Te++]),Pe.closed||this.schedule())})})}(he,Oe);if((0,Ze.t)(he))return function fe(he,Oe){return(0,p.Xf)(he).pipe((0,Y.R)(Oe),(0,K.Q)(Oe))}(he,Oe);if((0,Be.D)(he))return Ie(he,Oe);if((0,pt.T)(he))return function se(he,Oe){return new De.y(Pe=>{let Te;return(0,le.f)(Pe,Oe,()=>{Te=he[Se.h](),(0,le.f)(Pe,Oe,()=>{let pe,Z;try{({value:pe,done:Z}=Te.next())}catch(Ee){return void Pe.error(Ee)}Z?Pe.complete():Pe.next(pe)},0,!0)}),()=>(0,Me.m)(null==Te?void 0:Te.return)&&Te.return()})}(he,Oe);if((0,mt.L)(he))return function j(he,Oe){return Ie((0,mt.Q)(he),Oe)}(he,Oe)}throw(0,Re.z)(he)}(he,Oe):(0,p.Xf)(he)}},8421:(wt,Ue,P)=>{P.d(Ue,{Xf:()=>nt});var p=P(655),K=P(1144),Y=P(8239),ye=P(9751),fe=P(3670),De=P(2206),Ae=P(4532),Se=P(6495),Me=P(3260),le=P(576),se=P(7849),Ie=P(8822);function nt(U){if(U instanceof ye.y)return U;if(null!=U){if((0,fe.c)(U))return function Ze(U){return new ye.y(J=>{const he=U[Ie.L]();if((0,le.m)(he.subscribe))return he.subscribe(J);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(U);if((0,K.z)(U))return function He(U){return new ye.y(J=>{for(let he=0;he<U.length&&!J.closed;he++)J.next(U[he]);J.complete()})}(U);if((0,Y.t)(U))return function pt(U){return new ye.y(J=>{U.then(he=>{J.closed||(J.next(he),J.complete())},he=>J.error(he)).then(null,se.h)})}(U);if((0,De.D)(U))return Re(U);if((0,Se.T)(U))return function Be(U){return new ye.y(J=>{for(const he of U)if(J.next(he),J.closed)return;J.complete()})}(U);if((0,Me.L)(U))return function mt(U){return Re((0,Me.Q)(U))}(U)}throw(0,Ae.z)(U)}function Re(U){return new ye.y(J=>{(function j(U,J){var he,Oe,Pe,Te;return(0,p.mG)(this,void 0,void 0,function*(){try{for(he=(0,p.KL)(U);!(Oe=yield he.next()).done;)if(J.next(Oe.value),J.closed)return}catch(pe){Pe={error:pe}}finally{try{Oe&&!Oe.done&&(Te=he.return)&&(yield Te.call(he))}finally{if(Pe)throw Pe.error}}J.complete()})})(U,J).catch(he=>J.error(he))})}},6451:(wt,Ue,P)=>{P.d(Ue,{T:()=>De});var p=P(8189),K=P(8421),Y=P(515),ye=P(3269),fe=P(8996);function De(...Ae){const Se=(0,ye.yG)(Ae),Me=(0,ye._6)(Ae,1/0),le=Ae;return le.length?1===le.length?(0,K.Xf)(le[0]):(0,p.J)(Me)((0,fe.D)(le,Se)):Y.E}},9646:(wt,Ue,P)=>{P.d(Ue,{of:()=>Y});var p=P(3269),K=P(8996);function Y(...ye){const fe=(0,p.yG)(ye);return(0,K.D)(ye,fe)}},5403:(wt,Ue,P)=>{P.d(Ue,{x:()=>K});var p=P(930);function K(ye,fe,De,Ae,Se){return new Y(ye,fe,De,Ae,Se)}class Y extends p.Lv{constructor(fe,De,Ae,Se,Me,le){super(fe),this.onFinalize=Me,this.shouldUnsubscribe=le,this._next=De?function(se){try{De(se)}catch(Ie){fe.error(Ie)}}:super._next,this._error=Se?function(se){try{Se(se)}catch(Ie){fe.error(Ie)}finally{this.unsubscribe()}}:super._error,this._complete=Ae?function(){try{Ae()}catch(se){fe.error(se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:De}=this;super.unsubscribe(),!De&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},6590:(wt,Ue,P)=>{P.d(Ue,{d:()=>Y});var p=P(4482),K=P(5403);function Y(ye){return(0,p.e)((fe,De)=>{let Ae=!1;fe.subscribe((0,K.x)(De,Se=>{Ae=!0,De.next(Se)},()=>{Ae||De.next(ye),De.complete()}))})}},9300:(wt,Ue,P)=>{P.d(Ue,{h:()=>Y});var p=P(4482),K=P(5403);function Y(ye,fe){return(0,p.e)((De,Ae)=>{let Se=0;De.subscribe((0,K.x)(Ae,Me=>ye.call(fe,Me,Se++)&&Ae.next(Me)))})}},590:(wt,Ue,P)=>{P.d(Ue,{P:()=>Ae});var p=P(6805),K=P(9300),Y=P(5698),ye=P(6590),fe=P(8068),De=P(4671);function Ae(Se,Me){const le=arguments.length>=2;return se=>se.pipe(Se?(0,K.h)((Ie,nt)=>Se(Ie,nt,se)):De.y,(0,Y.q)(1),le?(0,ye.d)(Me):(0,fe.T)(()=>new p.K))}},4004:(wt,Ue,P)=>{P.d(Ue,{U:()=>Y});var p=P(4482),K=P(5403);function Y(ye,fe){return(0,p.e)((De,Ae)=>{let Se=0;De.subscribe((0,K.x)(Ae,Me=>{Ae.next(ye.call(fe,Me,Se++))}))})}},8189:(wt,Ue,P)=>{P.d(Ue,{J:()=>Y});var p=P(5577),K=P(4671);function Y(ye=1/0){return(0,p.z)(K.y,ye)}},5577:(wt,Ue,P)=>{P.d(Ue,{z:()=>Se});var p=P(4004),K=P(8421),Y=P(4482),ye=P(9672),fe=P(5403),Ae=P(576);function Se(Me,le,se=1/0){return(0,Ae.m)(le)?Se((Ie,nt)=>(0,p.U)((Ze,He)=>le(Ie,Ze,nt,He))((0,K.Xf)(Me(Ie,nt))),se):("number"==typeof le&&(se=le),(0,Y.e)((Ie,nt)=>function De(Me,le,se,Ie,nt,Ze,He,pt){const Be=[];let Re=0,mt=0,j=!1;const U=()=>{j&&!Be.length&&!Re&&le.complete()},J=Oe=>Re<Ie?he(Oe):Be.push(Oe),he=Oe=>{Ze&&le.next(Oe),Re++;let Pe=!1;(0,K.Xf)(se(Oe,mt++)).subscribe((0,fe.x)(le,Te=>{null==nt||nt(Te),Ze?J(Te):le.next(Te)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(Re--;Be.length&&Re<Ie;){const Te=Be.shift();He?(0,ye.f)(le,He,()=>he(Te)):he(Te)}U()}catch(Te){le.error(Te)}}))};return Me.subscribe((0,fe.x)(le,J,()=>{j=!0,U()})),()=>{null==pt||pt()}}(Ie,nt,Me,se)))}},5363:(wt,Ue,P)=>{P.d(Ue,{Q:()=>ye});var p=P(9672),K=P(4482),Y=P(5403);function ye(fe,De=0){return(0,K.e)((Ae,Se)=>{Ae.subscribe((0,Y.x)(Se,Me=>(0,p.f)(Se,fe,()=>Se.next(Me),De),()=>(0,p.f)(Se,fe,()=>Se.complete(),De),Me=>(0,p.f)(Se,fe,()=>Se.error(Me),De)))})}},5026:(wt,Ue,P)=>{P.d(Ue,{R:()=>ye});var p=P(4482),K=P(5403);function Y(fe,De,Ae,Se,Me){return(le,se)=>{let Ie=Ae,nt=De,Ze=0;le.subscribe((0,K.x)(se,He=>{const pt=Ze++;nt=Ie?fe(nt,He,pt):(Ie=!0,He),Se&&se.next(nt)},Me&&(()=>{Ie&&se.next(nt),se.complete()})))}}function ye(fe,De){return(0,p.e)(Y(fe,De,arguments.length>=2,!0))}},3099:(wt,Ue,P)=>{P.d(Ue,{B:()=>De});var p=P(8996),K=P(5698),Y=P(7579),ye=P(930),fe=P(4482);function De(Se={}){const{connector:Me=(()=>new Y.x),resetOnError:le=!0,resetOnComplete:se=!0,resetOnRefCountZero:Ie=!0}=Se;return nt=>{let Ze=null,He=null,pt=null,Be=0,Re=!1,mt=!1;const j=()=>{null==He||He.unsubscribe(),He=null},U=()=>{j(),Ze=pt=null,Re=mt=!1},J=()=>{const he=Ze;U(),null==he||he.unsubscribe()};return(0,fe.e)((he,Oe)=>{Be++,!mt&&!Re&&j();const Pe=pt=null!=pt?pt:Me();Oe.add(()=>{Be--,0===Be&&!mt&&!Re&&(He=Ae(J,Ie))}),Pe.subscribe(Oe),Ze||(Ze=new ye.Hp({next:Te=>Pe.next(Te),error:Te=>{mt=!0,j(),He=Ae(U,le,Te),Pe.error(Te)},complete:()=>{Re=!0,j(),He=Ae(U,se),Pe.complete()}}),(0,p.D)(he).subscribe(Ze))})(nt)}}function Ae(Se,Me,...le){return!0===Me?(Se(),null):!1===Me?null:Me(...le).pipe((0,K.q)(1)).subscribe(()=>Se())}},8675:(wt,Ue,P)=>{P.d(Ue,{O:()=>ye});var p=P(7272),K=P(3269),Y=P(4482);function ye(...fe){const De=(0,K.yG)(fe);return(0,Y.e)((Ae,Se)=>{(De?(0,p.z)(fe,Ae,De):(0,p.z)(fe,Ae)).subscribe(Se)})}},9468:(wt,Ue,P)=>{P.d(Ue,{R:()=>K});var p=P(4482);function K(Y,ye=0){return(0,p.e)((fe,De)=>{De.add(Y.schedule(()=>fe.subscribe(De),ye))})}},3900:(wt,Ue,P)=>{P.d(Ue,{w:()=>ye});var p=P(8421),K=P(4482),Y=P(5403);function ye(fe,De){return(0,K.e)((Ae,Se)=>{let Me=null,le=0,se=!1;const Ie=()=>se&&!Me&&Se.complete();Ae.subscribe((0,Y.x)(Se,nt=>{null==Me||Me.unsubscribe();let Ze=0;const He=le++;(0,p.Xf)(fe(nt,He)).subscribe(Me=(0,Y.x)(Se,pt=>Se.next(De?De(nt,pt,He,Ze++):pt),()=>{Me=null,Ie()}))},()=>{se=!0,Ie()}))})}},5698:(wt,Ue,P)=>{P.d(Ue,{q:()=>ye});var p=P(515),K=P(4482),Y=P(5403);function ye(fe){return fe<=0?()=>p.E:(0,K.e)((De,Ae)=>{let Se=0;De.subscribe((0,Y.x)(Ae,Me=>{++Se<=fe&&(Ae.next(Me),fe<=Se&&Ae.complete())}))})}},8505:(wt,Ue,P)=>{P.d(Ue,{b:()=>fe});var p=P(576),K=P(4482),Y=P(5403),ye=P(4671);function fe(De,Ae,Se){const Me=(0,p.m)(De)||Ae||Se?{next:De,error:Ae,complete:Se}:De;return Me?(0,K.e)((le,se)=>{var Ie;null===(Ie=Me.subscribe)||void 0===Ie||Ie.call(Me);let nt=!0;le.subscribe((0,Y.x)(se,Ze=>{var He;null===(He=Me.next)||void 0===He||He.call(Me,Ze),se.next(Ze)},()=>{var Ze;nt=!1,null===(Ze=Me.complete)||void 0===Ze||Ze.call(Me),se.complete()},Ze=>{var He;nt=!1,null===(He=Me.error)||void 0===He||He.call(Me,Ze),se.error(Ze)},()=>{var Ze,He;nt&&(null===(Ze=Me.unsubscribe)||void 0===Ze||Ze.call(Me)),null===(He=Me.finalize)||void 0===He||He.call(Me)}))}):ye.y}},8068:(wt,Ue,P)=>{P.d(Ue,{T:()=>ye});var p=P(6805),K=P(4482),Y=P(5403);function ye(De=fe){return(0,K.e)((Ae,Se)=>{let Me=!1;Ae.subscribe((0,Y.x)(Se,le=>{Me=!0,Se.next(le)},()=>Me?Se.complete():Se.error(De())))})}function fe(){return new p.K}},4408:(wt,Ue,P)=>{P.d(Ue,{o:()=>fe});var p=P(727);class K extends p.w0{constructor(Ae,Se){super()}schedule(Ae,Se=0){return this}}const Y={setInterval(De,Ae,...Se){const{delegate:Me}=Y;return(null==Me?void 0:Me.setInterval)?Me.setInterval(De,Ae,...Se):setInterval(De,Ae,...Se)},clearInterval(De){const{delegate:Ae}=Y;return((null==Ae?void 0:Ae.clearInterval)||clearInterval)(De)},delegate:void 0};var ye=P(8737);class fe extends K{constructor(Ae,Se){super(Ae,Se),this.scheduler=Ae,this.work=Se,this.pending=!1}schedule(Ae,Se=0){if(this.closed)return this;this.state=Ae;const Me=this.id,le=this.scheduler;return null!=Me&&(this.id=this.recycleAsyncId(le,Me,Se)),this.pending=!0,this.delay=Se,this.id=this.id||this.requestAsyncId(le,this.id,Se),this}requestAsyncId(Ae,Se,Me=0){return Y.setInterval(Ae.flush.bind(Ae,this),Me)}recycleAsyncId(Ae,Se,Me=0){if(null!=Me&&this.delay===Me&&!1===this.pending)return Se;Y.clearInterval(Se)}execute(Ae,Se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Me=this._execute(Ae,Se);if(Me)return Me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ae,Se){let le,Me=!1;try{this.work(Ae)}catch(se){Me=!0,le=se||new Error("Scheduled action threw falsy error")}if(Me)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:Ae,scheduler:Se}=this,{actions:Me}=Se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ye.P)(Me,this),null!=Ae&&(this.id=this.recycleAsyncId(Se,Ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(wt,Ue,P)=>{P.d(Ue,{v:()=>Y});var p=P(6063);class K{constructor(fe,De=K.now){this.schedulerActionCtor=fe,this.now=De}schedule(fe,De=0,Ae){return new this.schedulerActionCtor(this,fe).schedule(Ae,De)}}K.now=p.l.now;class Y extends K{constructor(fe,De=K.now){super(fe,De),this.actions=[],this._active=!1,this._scheduled=void 0}flush(fe){const{actions:De}=this;if(this._active)return void De.push(fe);let Ae;this._active=!0;do{if(Ae=fe.execute(fe.state,fe.delay))break}while(fe=De.shift());if(this._active=!1,Ae){for(;fe=De.shift();)fe.unsubscribe();throw Ae}}}},4986:(wt,Ue,P)=>{P.d(Ue,{P:()=>ye,z:()=>Y});var p=P(4408);const Y=new(P(7565).v)(p.o),ye=Y},6063:(wt,Ue,P)=>{P.d(Ue,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(wt,Ue,P)=>{P.d(Ue,{z:()=>p});const p={setTimeout(K,Y,...ye){const{delegate:fe}=p;return(null==fe?void 0:fe.setTimeout)?fe.setTimeout(K,Y,...ye):setTimeout(K,Y,...ye)},clearTimeout(K){const{delegate:Y}=p;return((null==Y?void 0:Y.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(wt,Ue,P)=>{P.d(Ue,{h:()=>K});const K=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wt,Ue,P)=>{P.d(Ue,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(wt,Ue,P)=>{P.d(Ue,{K:()=>K});const K=(0,P(3888).d)(Y=>function(){Y(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(wt,Ue,P)=>{P.d(Ue,{_6:()=>De,jO:()=>ye,yG:()=>fe});var p=P(576),K=P(3532);function Y(Ae){return Ae[Ae.length-1]}function ye(Ae){return(0,p.m)(Y(Ae))?Ae.pop():void 0}function fe(Ae){return(0,K.K)(Y(Ae))?Ae.pop():void 0}function De(Ae,Se){return"number"==typeof Y(Ae)?Ae.pop():Se}},4742:(wt,Ue,P)=>{P.d(Ue,{D:()=>fe});const{isArray:p}=Array,{getPrototypeOf:K,prototype:Y,keys:ye}=Object;function fe(Ae){if(1===Ae.length){const Se=Ae[0];if(p(Se))return{args:Se,keys:null};if(function De(Ae){return Ae&&"object"==typeof Ae&&K(Ae)===Y}(Se)){const Me=ye(Se);return{args:Me.map(le=>Se[le]),keys:Me}}}return{args:Ae,keys:null}}},8737:(wt,Ue,P)=>{function p(K,Y){if(K){const ye=K.indexOf(Y);0<=ye&&K.splice(ye,1)}}P.d(Ue,{P:()=>p})},3888:(wt,Ue,P)=>{function p(K){const ye=K(fe=>{Error.call(fe),fe.stack=(new Error).stack});return ye.prototype=Object.create(Error.prototype),ye.prototype.constructor=ye,ye}P.d(Ue,{d:()=>p})},1810:(wt,Ue,P)=>{function p(K,Y){return K.reduce((ye,fe,De)=>(ye[fe]=Y[De],ye),{})}P.d(Ue,{n:()=>p})},2806:(wt,Ue,P)=>{P.d(Ue,{O:()=>ye,x:()=>Y});var p=P(2416);let K=null;function Y(fe){if(p.v.useDeprecatedSynchronousErrorHandling){const De=!K;if(De&&(K={errorThrown:!1,error:null}),fe(),De){const{errorThrown:Ae,error:Se}=K;if(K=null,Ae)throw Se}}else fe()}function ye(fe){p.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=fe)}},9672:(wt,Ue,P)=>{function p(K,Y,ye,fe=0,De=!1){const Ae=Y.schedule(function(){ye(),De?K.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(K.add(Ae),!De)return Ae}P.d(Ue,{f:()=>p})},4671:(wt,Ue,P)=>{function p(K){return K}P.d(Ue,{y:()=>p})},1144:(wt,Ue,P)=>{P.d(Ue,{z:()=>p});const p=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(wt,Ue,P)=>{P.d(Ue,{D:()=>K});var p=P(576);function K(Y){return Symbol.asyncIterator&&(0,p.m)(null==Y?void 0:Y[Symbol.asyncIterator])}},576:(wt,Ue,P)=>{function p(K){return"function"==typeof K}P.d(Ue,{m:()=>p})},3670:(wt,Ue,P)=>{P.d(Ue,{c:()=>Y});var p=P(8822),K=P(576);function Y(ye){return(0,K.m)(ye[p.L])}},6495:(wt,Ue,P)=>{P.d(Ue,{T:()=>Y});var p=P(2202),K=P(576);function Y(ye){return(0,K.m)(null==ye?void 0:ye[p.h])}},8239:(wt,Ue,P)=>{P.d(Ue,{t:()=>K});var p=P(576);function K(Y){return(0,p.m)(null==Y?void 0:Y.then)}},3260:(wt,Ue,P)=>{P.d(Ue,{L:()=>ye,Q:()=>Y});var p=P(655),K=P(576);function Y(fe){return(0,p.FC)(this,arguments,function*(){const Ae=fe.getReader();try{for(;;){const{value:Se,done:Me}=yield(0,p.qq)(Ae.read());if(Me)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Se)}}finally{Ae.releaseLock()}})}function ye(fe){return(0,K.m)(null==fe?void 0:fe.getReader)}},3532:(wt,Ue,P)=>{P.d(Ue,{K:()=>K});var p=P(576);function K(Y){return Y&&(0,p.m)(Y.schedule)}},4482:(wt,Ue,P)=>{P.d(Ue,{A:()=>K,e:()=>Y});var p=P(576);function K(ye){return(0,p.m)(null==ye?void 0:ye.lift)}function Y(ye){return fe=>{if(K(fe))return fe.lift(function(De){try{return ye(De,this)}catch(Ae){this.error(Ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(wt,Ue,P)=>{P.d(Ue,{Z:()=>ye});var p=P(4004);const{isArray:K}=Array;function ye(fe){return(0,p.U)(De=>function Y(fe,De){return K(De)?fe(...De):fe(De)}(fe,De))}},5032:(wt,Ue,P)=>{function p(){}P.d(Ue,{Z:()=>p})},9635:(wt,Ue,P)=>{P.d(Ue,{U:()=>Y,z:()=>K});var p=P(4671);function K(...ye){return Y(ye)}function Y(ye){return 0===ye.length?p.y:1===ye.length?ye[0]:function(De){return ye.reduce((Ae,Se)=>Se(Ae),De)}}},7849:(wt,Ue,P)=>{P.d(Ue,{h:()=>Y});var p=P(2416),K=P(3410);function Y(ye){K.z.setTimeout(()=>{const{onUnhandledError:fe}=p.v;if(!fe)throw ye;fe(ye)})}},4532:(wt,Ue,P)=>{function p(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ue,{z:()=>p})},655:(wt,Ue,P)=>{function ye(pe,Z){var Ee={};for(var ue in pe)Object.prototype.hasOwnProperty.call(pe,ue)&&Z.indexOf(ue)<0&&(Ee[ue]=pe[ue]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(ue=Object.getOwnPropertySymbols(pe);We<ue.length;We++)Z.indexOf(ue[We])<0&&Object.prototype.propertyIsEnumerable.call(pe,ue[We])&&(Ee[ue[We]]=pe[ue[We]])}return Ee}function fe(pe,Z,Ee,ue){var Ot,We=arguments.length,Ne=We<3?Z:null===ue?ue=Object.getOwnPropertyDescriptor(Z,Ee):ue;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ne=Reflect.decorate(pe,Z,Ee,ue);else for(var gt=pe.length-1;gt>=0;gt--)(Ot=pe[gt])&&(Ne=(We<3?Ot(Ne):We>3?Ot(Z,Ee,Ne):Ot(Z,Ee))||Ne);return We>3&&Ne&&Object.defineProperty(Z,Ee,Ne),Ne}function Se(pe,Z,Ee,ue){return new(Ee||(Ee=Promise))(function(Ne,Ot){function gt(it){try{dt(ue.next(it))}catch($t){Ot($t)}}function Bt(it){try{dt(ue.throw(it))}catch($t){Ot($t)}}function dt(it){it.done?Ne(it.value):function We(Ne){return Ne instanceof Ee?Ne:new Ee(function(Ot){Ot(Ne)})}(it.value).then(gt,Bt)}dt((ue=ue.apply(pe,Z||[])).next())})}function Be(pe){return this instanceof Be?(this.v=pe,this):new Be(pe)}function Re(pe,Z,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,ue=Ee.apply(pe,Z||[]),Ne=[];return We={},Ot("next"),Ot("throw"),Ot("return"),We[Symbol.asyncIterator]=function(){return this},We;function Ot(Ct){ue[Ct]&&(We[Ct]=function(At){return new Promise(function(rt,nn){Ne.push([Ct,At,rt,nn])>1||gt(Ct,At)})})}function gt(Ct,At){try{!function Bt(Ct){Ct.value instanceof Be?Promise.resolve(Ct.value.v).then(dt,it):$t(Ne[0][2],Ct)}(ue[Ct](At))}catch(rt){$t(Ne[0][3],rt)}}function dt(Ct){gt("next",Ct)}function it(Ct){gt("throw",Ct)}function $t(Ct,At){Ct(At),Ne.shift(),Ne.length&&gt(Ne[0][0],Ne[0][1])}}function j(pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,Z=pe[Symbol.asyncIterator];return Z?Z.call(pe):(pe=function Ie(pe){var Z="function"==typeof Symbol&&Symbol.iterator,Ee=Z&&pe[Z],ue=0;if(Ee)return Ee.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&ue>=pe.length&&(pe=void 0),{value:pe&&pe[ue++],done:!pe}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(pe),Ee={},ue("next"),ue("throw"),ue("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function ue(Ne){Ee[Ne]=pe[Ne]&&function(Ot){return new Promise(function(gt,Bt){!function We(Ne,Ot,gt,Bt){Promise.resolve(Bt).then(function(dt){Ne({value:dt,done:gt})},Ot)}(gt,Bt,(Ot=pe[Ne](Ot)).done,Ot.value)})}}}P.d(Ue,{FC:()=>Re,KL:()=>j,_T:()=>ye,gn:()=>fe,mG:()=>Se,qq:()=>Be})},9808:(wt,Ue,P)=>{P.d(Ue,{Do:()=>U,EM:()=>gs,HT:()=>fe,JF:()=>ar,K0:()=>Ae,Mx:()=>qr,O5:()=>pr,Ov:()=>Fe,PM:()=>Er,S$:()=>Be,Ts:()=>qi,V_:()=>le,Ye:()=>J,b0:()=>j,bD:()=>Hr,ez:()=>Es,lw:()=>Se,mk:()=>Vi,mr:()=>mt,q:()=>Y,sg:()=>fr,w_:()=>De});var p=P(5e3);let K=null;function Y(){return K}function fe(x){K||(K=x)}class De{}const Ae=new p.OlP("DocumentToken");let Se=(()=>{class x{historyGo(M){throw new Error("Not implemented")}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275prov=p.Yz7({token:x,factory:function(){return function Me(){return(0,p.LFG)(se)}()},providedIn:"platform"}),x})();const le=new p.OlP("Location Initialized");let se=(()=>{class x extends Se{constructor(M){super(),this._doc=M,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState(M){const q=Y().getGlobalEventTarget(this._doc,"window");return q.addEventListener("popstate",M,!1),()=>q.removeEventListener("popstate",M)}onHashChange(M){const q=Y().getGlobalEventTarget(this._doc,"window");return q.addEventListener("hashchange",M,!1),()=>q.removeEventListener("hashchange",M)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(M){this.location.pathname=M}pushState(M,q,de){Ie()?this._history.pushState(M,q,de):this.location.hash=de}replaceState(M,q,de){Ie()?this._history.replaceState(M,q,de):this.location.hash=de}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return x.\u0275fac=function(M){return new(M||x)(p.LFG(Ae))},x.\u0275prov=p.Yz7({token:x,factory:function(){return function nt(){return new se((0,p.LFG)(Ae))}()},providedIn:"platform"}),x})();function Ie(){return!!window.history.pushState}function Ze(x,H){if(0==x.length)return H;if(0==H.length)return x;let M=0;return x.endsWith("/")&&M++,H.startsWith("/")&&M++,2==M?x+H.substring(1):1==M?x+H:x+"/"+H}function He(x){const H=x.match(/#|\?|$/),M=H&&H.index||x.length;return x.slice(0,M-("/"===x[M-1]?1:0))+x.slice(M)}function pt(x){return x&&"?"!==x[0]?"?"+x:x}let Be=(()=>{class x{historyGo(M){throw new Error("Not implemented")}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275prov=p.Yz7({token:x,factory:function(){return function Re(x){const H=(0,p.LFG)(Ae).location;return new j((0,p.LFG)(Se),H&&H.origin||"")}()},providedIn:"root"}),x})();const mt=new p.OlP("appBaseHref");let j=(()=>{class x extends Be{constructor(M,q){if(super(),this._platformLocation=M,this._removeListenerFns=[],null==q&&(q=this._platformLocation.getBaseHrefFromDOM()),null==q)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=q}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return Ze(this._baseHref,M)}path(M=!1){const q=this._platformLocation.pathname+pt(this._platformLocation.search),de=this._platformLocation.hash;return de&&M?`${q}${de}`:q}pushState(M,q,de,qe){const Ye=this.prepareExternalUrl(de+pt(qe));this._platformLocation.pushState(M,q,Ye)}replaceState(M,q,de,qe){const Ye=this.prepareExternalUrl(de+pt(qe));this._platformLocation.replaceState(M,q,Ye)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(M=0){var q,de;null===(de=(q=this._platformLocation).historyGo)||void 0===de||de.call(q,M)}}return x.\u0275fac=function(M){return new(M||x)(p.LFG(Se),p.LFG(mt,8))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac}),x})(),U=(()=>{class x extends Be{constructor(M,q){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=q&&(this._baseHref=q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let q=this._platformLocation.hash;return null==q&&(q="#"),q.length>0?q.substring(1):q}prepareExternalUrl(M){const q=Ze(this._baseHref,M);return q.length>0?"#"+q:q}pushState(M,q,de,qe){let Ye=this.prepareExternalUrl(de+pt(qe));0==Ye.length&&(Ye=this._platformLocation.pathname),this._platformLocation.pushState(M,q,Ye)}replaceState(M,q,de,qe){let Ye=this.prepareExternalUrl(de+pt(qe));0==Ye.length&&(Ye=this._platformLocation.pathname),this._platformLocation.replaceState(M,q,Ye)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(M=0){var q,de;null===(de=(q=this._platformLocation).historyGo)||void 0===de||de.call(q,M)}}return x.\u0275fac=function(M){return new(M||x)(p.LFG(Se),p.LFG(mt,8))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac}),x})(),J=(()=>{class x{constructor(M,q){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=M;const de=this._platformStrategy.getBaseHref();this._platformLocation=q,this._baseHref=He(Pe(de)),this._platformStrategy.onPopState(qe=>{this._subject.emit({url:this.path(!0),pop:!0,state:qe.state,type:qe.type})})}path(M=!1){return this.normalize(this._platformStrategy.path(M))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(M,q=""){return this.path()==this.normalize(M+pt(q))}normalize(M){return x.stripTrailingSlash(function Oe(x,H){return x&&H.startsWith(x)?H.substring(x.length):H}(this._baseHref,Pe(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._platformStrategy.prepareExternalUrl(M)}go(M,q="",de=null){this._platformStrategy.pushState(de,"",M,q),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+pt(q)),de)}replaceState(M,q="",de=null){this._platformStrategy.replaceState(de,"",M,q),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+pt(q)),de)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(M=0){var q,de;null===(de=(q=this._platformStrategy).historyGo)||void 0===de||de.call(q,M)}onUrlChange(M){this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(q=>{this._notifyUrlChangeListeners(q.url,q.state)}))}_notifyUrlChangeListeners(M="",q){this._urlChangeListeners.forEach(de=>de(M,q))}subscribe(M,q,de){return this._subject.subscribe({next:M,error:q,complete:de})}}return x.normalizeQueryParams=pt,x.joinWithSlash=Ze,x.stripTrailingSlash=He,x.\u0275fac=function(M){return new(M||x)(p.LFG(Be),p.LFG(Se))},x.\u0275prov=p.Yz7({token:x,factory:function(){return function he(){return new J((0,p.LFG)(Be),(0,p.LFG)(Se))}()},providedIn:"root"}),x})();function Pe(x){return x.replace(/\/index.html$/,"")}function qr(x,H){H=encodeURIComponent(H);for(const M of x.split(";")){const q=M.indexOf("="),[de,qe]=-1==q?[M,""]:[M.slice(0,q),M.slice(q+1)];if(de.trim()===H)return decodeURIComponent(qe)}return null}let Vi=(()=>{class x{constructor(M,q,de,qe){this._iterableDiffers=M,this._keyValueDiffers=q,this._ngEl=de,this._renderer=qe,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(M){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof M?M.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(M){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof M?M.split(/\s+/):M,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const M=this._iterableDiffer.diff(this._rawClass);M&&this._applyIterableChanges(M)}else if(this._keyValueDiffer){const M=this._keyValueDiffer.diff(this._rawClass);M&&this._applyKeyValueChanges(M)}}_applyKeyValueChanges(M){M.forEachAddedItem(q=>this._toggleClass(q.key,q.currentValue)),M.forEachChangedItem(q=>this._toggleClass(q.key,q.currentValue)),M.forEachRemovedItem(q=>{q.previousValue&&this._toggleClass(q.key,!1)})}_applyIterableChanges(M){M.forEachAddedItem(q=>{if("string"!=typeof q.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(q.item)}`);this._toggleClass(q.item,!0)}),M.forEachRemovedItem(q=>this._toggleClass(q.item,!1))}_applyClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(q=>this._toggleClass(q,!0)):Object.keys(M).forEach(q=>this._toggleClass(q,!!M[q])))}_removeClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(q=>this._toggleClass(q,!1)):Object.keys(M).forEach(q=>this._toggleClass(q,!1)))}_toggleClass(M,q){(M=M.trim())&&M.split(/\s+/g).forEach(de=>{q?this._renderer.addClass(this._ngEl.nativeElement,de):this._renderer.removeClass(this._ngEl.nativeElement,de)})}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),x})();class Br{constructor(H,M,q,de){this.$implicit=H,this.ngForOf=M,this.index=q,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fr=(()=>{class x{constructor(M,q,de){this._viewContainer=M,this._template=q,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const q=this._viewContainer;M.forEachOperation((de,qe,Ye)=>{if(null==de.previousIndex)q.createEmbeddedView(this._template,new Br(de.item,this._ngForOf,-1,-1),null===Ye?void 0:Ye);else if(null==Ye)q.remove(null===qe?void 0:qe);else if(null!==qe){const yt=q.get(qe);q.move(yt,Ye),Qn(yt,de)}});for(let de=0,qe=q.length;de<qe;de++){const yt=q.get(de).context;yt.index=de,yt.count=qe,yt.ngForOf=this._ngForOf}M.forEachIdentityChange(de=>{Qn(q.get(de.currentIndex),de)})}static ngTemplateContextGuard(M,q){return!0}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),x})();function Qn(x,H){x.context.$implicit=H.item}let pr=(()=>{class x{constructor(M,q){this._viewContainer=M,this._context=new Pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=q}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){zi("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){zi("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,q){return!0}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.s_b),p.Y36(p.Rgc))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),x})();class Pn{constructor(){this.$implicit=null,this.ngIf=null}}function zi(x,H){if(H&&!H.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,p.AaK)(H)}'.`)}class Qt{createSubscription(H,M){return H.subscribe({next:M,error:q=>{throw q}})}dispose(H){H.unsubscribe()}onDestroy(H){H.unsubscribe()}}class Dn{createSubscription(H,M){return H.then(M,q=>{throw q})}dispose(H){}onDestroy(H){}}const ge=new Dn,me=new Qt;let Fe=(()=>{class x{constructor(M){this._ref=M,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(M){return this._obj?M!==this._obj?(this._dispose(),this.transform(M)):this._latestValue:(M&&this._subscribe(M),this._latestValue)}_subscribe(M){this._obj=M,this._strategy=this._selectStrategy(M),this._subscription=this._strategy.createSubscription(M,q=>this._updateLatestValue(M,q))}_selectStrategy(M){if((0,p.QGY)(M))return ge;if((0,p.F4k)(M))return me;throw function Ke(x,H){return new p.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(M,q){M===this._obj&&(this._latestValue=q,this._ref.markForCheck())}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.sBO,16))},x.\u0275pipe=p.Yjl({name:"async",type:x,pure:!1}),x})(),qi=(()=>{class x{transform(M){return JSON.stringify(M,null,2)}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275pipe=p.Yjl({name:"json",type:x,pure:!1}),x})(),Es=(()=>{class x{}return x.\u0275fac=function(M){return new(M||x)},x.\u0275mod=p.oAB({type:x}),x.\u0275inj=p.cJS({}),x})();const Hr="browser";function Er(x){return"server"===x}let gs=(()=>{class x{}return x.\u0275prov=(0,p.Yz7)({token:x,providedIn:"root",factory:()=>new Zi((0,p.LFG)(Ae),window)}),x})();class Zi{constructor(H,M){this.document=H,this.window=M,this.offset=()=>[0,0]}setOffset(H){this.offset=Array.isArray(H)?()=>H:H}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(H){this.supportsScrolling()&&this.window.scrollTo(H[0],H[1])}scrollToAnchor(H){if(!this.supportsScrolling())return;const M=function Ri(x,H){const M=x.getElementById(H)||x.getElementsByName(H)[0];if(M)return M;if("function"==typeof x.createTreeWalker&&x.body&&(x.body.createShadowRoot||x.body.attachShadow)){const q=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let de=q.currentNode;for(;de;){const qe=de.shadowRoot;if(qe){const Ye=qe.getElementById(H)||qe.querySelector(`[name="${H}"]`);if(Ye)return Ye}de=q.nextNode()}}return null}(this.document,H);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(H){if(this.supportScrollRestoration()){const M=this.window.history;M&&M.scrollRestoration&&(M.scrollRestoration=H)}}scrollToElement(H){const M=H.getBoundingClientRect(),q=M.left+this.window.pageXOffset,de=M.top+this.window.pageYOffset,qe=this.offset();this.window.scrollTo(q-qe[0],de-qe[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const H=Nr(this.window.history)||Nr(Object.getPrototypeOf(this.window.history));return!(!H||!H.writable&&!H.set)}catch(H){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(H){return!1}}}function Nr(x){return Object.getOwnPropertyDescriptor(x,"scrollRestoration")}class ar{}},5e3:(wt,Ue,P)=>{P.d(Ue,{$8M:()=>Wo,$Z:()=>Vm,AFp:()=>hE,ALo:()=>k0,AaK:()=>Se,BQk:()=>lf,CHM:()=>Vt,CRH:()=>G0,CZH:()=>y_,CqO:()=>jm,DdM:()=>A0,EJc:()=>_I,EpF:()=>Bm,F$t:()=>$m,F4k:()=>Cv,FYo:()=>v0,FiY:()=>ro,G48:()=>BI,GfV:()=>_0,Gpc:()=>se,Hsn:()=>Jp,JOm:()=>Qe,LFG:()=>Kt,LSH:()=>Rr,Lbi:()=>gE,MAs:()=>tf,NdJ:()=>Yp,O4$:()=>Uo,OlP:()=>Ft,Oqu:()=>pf,PXZ:()=>NI,Q6J:()=>Kp,QGY:()=>Zp,Qsj:()=>yw,R0b:()=>gu,RDi:()=>Nr,Rgc:()=>Ag,SBq:()=>Dg,Sil:()=>wI,Suo:()=>H0,TTD:()=>os,TgZ:()=>qp,VKq:()=>S0,VLi:()=>xI,W1O:()=>q0,WLB:()=>M0,X6Q:()=>UI,XFs:()=>Nt,Xpm:()=>Lt,Y36:()=>ql,YKP:()=>D0,YNc:()=>Om,Yjl:()=>qt,Yz7:()=>rt,ZZ4:()=>x_,_Bn:()=>g0,_UZ:()=>uf,_Vd:()=>Ey,_c5:()=>nD,_uU:()=>Jm,aQg:()=>O_,c2e:()=>yE,cJS:()=>Yt,cg1:()=>yf,dDg:()=>EE,deG:()=>Zc,dqk:()=>Tn,eFA:()=>DE,ekj:()=>ff,g9A:()=>pE,h0i:()=>Cf,hGG:()=>rD,hij:()=>ya,iGM:()=>$0,ifc:()=>vt,ip1:()=>dE,kL8:()=>Hc,kcU:()=>Ha,lG2:()=>gn,lcZ:()=>F0,n5z:()=>Cs,oAB:()=>xe,oxw:()=>Pd,q4F:()=>E0,qLn:()=>Lr,qOj:()=>Ap,qZA:()=>Ai,sBO:()=>jI,sIi:()=>Wl,s_b:()=>Dy,soG:()=>__,tBr:()=>es,tb:()=>mE,tp0:()=>go,uIk:()=>Xh,vHH:()=>He,vpe:()=>ol,wAp:()=>yn,xp6:()=>Wf,ynx:()=>Nd,z2F:()=>C_,zSh:()=>pp,zs3:()=>da});var p=P(7579),K=P(727),Y=P(9751),ye=P(6451),fe=P(3099);function De(n){for(let r in n)if(n[r]===De)return r;throw Error("Could not find renamed property on target object.")}function Ae(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Se(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Se).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Me(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const le=De({__forward_ref__:De});function se(n){return n.__forward_ref__=se,n.toString=function(){return Se(this())},n}function Ie(n){return nt(n)?n():n}function nt(n){return"function"==typeof n&&n.hasOwnProperty(le)&&n.__forward_ref__===se}class He extends Error{constructor(r,s){super(function pt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Be(n){return"string"==typeof n?n:null==n?"":String(n)}function Re(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Be(n)}function J(n,r){const s=r?` in ${r}`:"";throw new He(-201,`No provider for ${Re(n)} found${s}`)}function dt(n,r){null==n&&function it(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function rt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Yt(n){return{providers:n.providers||[],imports:n.imports||[]}}function sn(n){return wn(n,nr)||wn(n,gr)}function wn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Ln(n){return n&&(n.hasOwnProperty($n)||n.hasOwnProperty(jn))?n[$n]:null}const nr=De({\u0275prov:De}),$n=De({\u0275inj:De}),gr=De({ngInjectableDef:De}),jn=De({ngInjectorDef:De});var Nt=(()=>((Nt=Nt||{})[Nt.Default=0]="Default",Nt[Nt.Host=1]="Host",Nt[Nt.Self=2]="Self",Nt[Nt.SkipSelf=4]="SkipSelf",Nt[Nt.Optional=8]="Optional",Nt))();let Jt;function on(n){const r=Jt;return Jt=n,r}function mr(n,r,s){const a=sn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Nt.Optional?null:void 0!==r?r:void J(Se(n),"Injector")}function Yn(n){return{toString:n}.toString()}var yr=(()=>((yr=yr||{})[yr.OnPush=0]="OnPush",yr[yr.Default=1]="Default",yr))(),vt=(()=>{return(n=vt||(vt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",vt;var n})();const St="undefined"!=typeof globalThis&&globalThis,Pt="undefined"!=typeof window&&window,rr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Tn=St||"undefined"!=typeof global&&global||Pt||rr,Hn={},Ht=[],_r=De({\u0275cmp:De}),pn=De({\u0275dir:De}),Tt=De({\u0275pipe:De}),Je=De({\u0275mod:De}),Et=De({\u0275fac:De}),Wt=De({__NG_ELEMENT_ID__:De});let un=0;function Lt(n){return Yn(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===yr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Ht,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||vt.Emulated,id:"c",styles:n.styles||Ht,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.directives,h=n.features,v=n.pipes;return a.id+=un++,a.inputs=jt(n.inputs,s),a.outputs=jt(n.outputs),h&&h.forEach(w=>w(a)),a.directiveDefs=l?()=>("function"==typeof l?l():l).map(ne):null,a.pipeDefs=v?()=>("function"==typeof v?v():v).map(_e):null,a})}function ne(n){return ln(n)||function xn(n){return n[pn]||null}(n)}function _e(n){return function rn(n){return n[Tt]||null}(n)}const ze={};function xe(n){return Yn(()=>{const r={type:n.type,bootstrap:n.bootstrap||Ht,declarations:n.declarations||Ht,imports:n.imports||Ht,exports:n.exports||Ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ze[n.id]=n.type),r})}function jt(n,r){if(null==n)return Hn;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const gn=Lt;function qt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function ln(n){return n[_r]||null}function On(n,r){const s=n[Je]||null;if(!s&&!0===r)throw new Error(`Type ${Se(n)} does not have '\u0275mod' property.`);return s}function Ar(n){return Array.isArray(n)&&"object"==typeof n[1]}function jr(n){return Array.isArray(n)&&!0===n[1]}function is(n){return 0!=(8&n.flags)}function ni(n){return 2==(2&n.flags)}function ss(n){return 1==(1&n.flags)}function oe(n){return null!==n.template}function ae(n){return 0!=(512&n[2])}function $r(n,r){return n.hasOwnProperty(Et)?n[Et]:null}class _s{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function os(){return as}function as(n){return n.type.prototype.ngOnChanges&&(n.setInput=us),Ms}function Ms(){const n=Hr(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Hn)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function us(n,r,s,a){const l=Hr(n)||function Oi(n,r){return n[Es]=r}(n,{previous:Hn,current:null}),h=l.current||(l.current={}),v=l.previous,w=this.declaredInputs[s],C=v[w];h[w]=new _s(C&&C.currentValue,r,v===Hn),n[a]=r}os.ngInherit=!0;const Es="__ngSimpleChanges__";function Hr(n){return n[Es]||null}let Zi;function Nr(n){Zi=n}function ar(n){return!!n.listen}const x={createRenderer:(n,r)=>function Ri(){return void 0!==Zi?Zi:"undefined"!=typeof document?document:void 0}()};function M(n){for(;Array.isArray(n);)n=n[0];return n}function qe(n,r){return M(r[n])}function Ye(n,r){return M(r[n.index])}function Gn(n,r){return n.data[r]}function Un(n,r){return n[r]}function cn(n,r){const s=r[n];return Ar(s)?s:s[0]}function vn(n){return 4==(4&n[2])}function dr(n){return 128==(128&n[2])}function Xn(n,r){return null==r?null:n[r]}function Ui(n){n[18]=0}function ri(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const tn={lFrame:Ns(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function R(){return tn.bindingsEnabled}function F(){return tn.lFrame.lView}function Le(){return tn.lFrame.tView}function Vt(n){return tn.lFrame.contextLView=n,n[8]}function dn(){let n=hi();for(;null!==n&&64===n.type;)n=n.parent;return n}function hi(){return tn.lFrame.currentTNode}function Gr(n,r){const s=tn.lFrame;s.currentTNode=n,s.isParent=r}function Qs(){return tn.lFrame.isParent}function ms(){tn.lFrame.isParent=!1}function _a(){return tn.isInCheckNoChangesMode}function oo(n){tn.isInCheckNoChangesMode=n}function fi(){const n=tn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Rs(){return tn.lFrame.bindingIndex++}function Ea(n,r){const s=tn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Lo(r)}function Lo(n){tn.lFrame.currentDirectiveIndex=n}function ra(){return tn.lFrame.currentQueryIndex}function vu(n){tn.lFrame.currentQueryIndex=n}function wa(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Vo(n,r,s){if(s&Nt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&Nt.Host||(l=wa(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=tn.lFrame=Ia();return a.currentTNode=r,a.lView=n,!0}function Js(n){const r=Ia(),s=n[1];tn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Ia(){const n=tn.lFrame,r=null===n?null:n.child;return null===r?Ns(n):r}function Ns(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Da(){const n=tn.lFrame;return tn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Is=Da;function Co(){const n=Da();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Wr(){return tn.lFrame.selectedIndex}function bo(n){tn.lFrame.selectedIndex=n}function kr(){const n=tn.lFrame;return Gn(n.tView,n.selectedIndex)}function Uo(){tn.lFrame.currentNamespace="svg"}function Ha(){!function Bo(){tn.lFrame.currentNamespace=null}()}function Yi(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:L,ngOnDestroy:G}=h;v&&(n.contentHooks||(n.contentHooks=[])).push(-s,v),w&&((n.contentHooks||(n.contentHooks=[])).push(s,w),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,w)),C&&(n.viewHooks||(n.viewHooks=[])).push(-s,C),L&&((n.viewHooks||(n.viewHooks=[])).push(s,L),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,L)),null!=G&&(n.destroyHooks||(n.destroyHooks=[])).push(s,G)}}function lo(n,r,s){pi(n,r,3,s)}function jo(n,r,s,a){(3&n[2])===s&&pi(n,r,s,a)}function zr(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function pi(n,r,s,a){const h=null!=a?a:-1,v=r.length-1;let w=0;for(let C=void 0!==a?65535&n[18]:0;C<v;C++)if("number"==typeof r[C+1]){if(w=r[C],null!=a&&w>=a)break}else r[C]<0&&(n[18]+=65536),(w<h||-1==h)&&(wu(n,s,r,C),n[18]=(4294901760&n[18])+C+2),C++}function wu(n,r,s,a){const l=s[a]<0,h=s[a+1],w=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(w)}finally{}}}else try{h.call(w)}finally{}}class Ps{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function $o(n,r,s){const a=ar(n);let l=0;for(;l<s.length;){const h=s[l];if("number"==typeof h){if(0!==h)break;l++;const v=s[l++],w=s[l++],C=s[l++];a?n.setAttribute(r,w,C,v):r.setAttributeNS(v,w,C)}else{const v=h,w=s[++l];Ji(v)?a&&n.setProperty(r,v,w):a?n.setAttribute(r,v,w):r.setAttribute(v,w),l++}}return l}function Xs(n){return 3===n||4===n||6===n}function Ji(n){return 64===n.charCodeAt(0)}function Ho(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||Go(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function Go(n,r,s,a,l){let h=0,v=n.length;if(-1===r)v=-1;else for(;h<n.length;){const w=n[h++];if("number"==typeof w){if(w===r){v=-1;break}if(w>r){v=h-1;break}}}for(;h<n.length;){const w=n[h];if("number"==typeof w)break;if(w===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==v&&(n.splice(v,0,r),h=v+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Ta(n){return-1!==n}function wr(n){return 32767&n}function Ds(n,r){let s=function al(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Aa=!0;function vs(n){const r=Aa;return Aa=n,r}let co=0;function ho(n,r){const s=ct(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Fs(a.data,n),Fs(r,null),Fs(a.blueprint,null));const l=er(n,r),h=n.injectorIndex;if(Ta(l)){const v=wr(l),w=Ds(l,r),C=w[1].data;for(let L=0;L<8;L++)r[h+L]=w[v+L]|C[v+L]}return r[h+8]=l,h}function Fs(n,r){n.push(0,0,0,0,0,0,0,0,r)}function ct(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function er(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){const h=l[1],v=h.type;if(a=2===v?h.declTNode:1===v?l[6]:null,null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function I(n,r,s){!function ls(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Wt)&&(a=s[Wt]),null==a&&(a=s[Wt]=co++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function y(n,r,s){if(s&Nt.Optional)return n;J(r,"NodeInjector")}function b(n,r,s,a){if(s&Nt.Optional&&void 0===a&&(a=null),0==(s&(Nt.Self|Nt.Host))){const l=n[9],h=on(void 0);try{return l?l.get(r,a,s&Nt.Optional):mr(r,a,s&Nt.Optional)}finally{on(h)}}return y(a,r,s)}function N(n,r,s,a=Nt.Default,l){if(null!==n){const h=function Rn(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Wt)?n[Wt]:void 0;return"number"==typeof r?r>=0?255&r:$:r}(s);if("function"==typeof h){if(!Vo(r,n,a))return a&Nt.Host?y(l,s,a):b(r,s,a,l);try{const v=h(a);if(null!=v||a&Nt.Optional)return v;J(s)}finally{Is()}}else if("number"==typeof h){let v=null,w=ct(n,r),C=-1,L=a&Nt.Host?r[16][6]:null;for((-1===w||a&Nt.SkipSelf)&&(C=-1===w?er(n,r):r[w+8],-1!==C&&tr(a,!1)?(v=r[1],w=wr(C),r=Ds(C,r)):w=-1);-1!==w;){const G=r[1];if(zt(h,w,G.data)){const te=X(w,r,s,v,a,L);if(te!==B)return te}C=r[w+8],-1!==C&&tr(a,r[1].data[w+8]===L)&&zt(h,w,r)?(v=G,w=wr(C),r=Ds(C,r)):w=-1}}}return b(r,s,a,l)}const B={};function $(){return new Nn(dn(),F())}function X(n,r,s,a,l,h){const v=r[1],w=v.data[n+8],G=$e(w,v,s,null==a?ni(w)&&Aa:a!=v&&0!=(3&w.type),l&Nt.Host&&h===w);return null!==G?Dt(r,v,G,w):B}function $e(n,r,s,a,l){const h=n.providerIndexes,v=r.data,w=1048575&h,C=n.directiveStart,G=h>>20,ve=l?w+G:n.directiveEnd;for(let ke=a?w:w+G;ke<ve;ke++){const tt=v[ke];if(ke<C&&s===tt||ke>=C&&tt.type===s)return ke}if(l){const ke=v[C];if(ke&&oe(ke)&&ke.type===s)return C}return null}function Dt(n,r,s,a){let l=n[s];const h=r.data;if(function To(n){return n instanceof Ps}(l)){const v=l;v.resolving&&function mt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new He(-200,`Circular dependency in DI detected for ${n}${s}`)}(Re(h[s]));const w=vs(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?on(v.injectImpl):null;Vo(n,a,Nt.Default);try{l=n[s]=v.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Ca(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const v=as(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==C&&on(C),vs(w),v.resolving=!1,Is()}}return l}function zt(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function tr(n,r){return!(n&Nt.Self||n&Nt.Host&&r)}class Nn{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return N(this._tNode,this._lView,r,a,s)}}function Cs(n){return Yn(()=>{const r=n.prototype.constructor,s=r[Et]||cs(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[Et]||cs(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function cs(n){return nt(n)?()=>{const r=cs(Ie(n));return r&&r()}:$r(n)}function Wo(n){return function E(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Xs(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(dn(),n)}const Fr="__parameters__";function eo(n,r,s){return Yn(()=>{const a=function Cn(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const v=new l(...h);return w.annotation=v,w;function w(C,L,G){const te=C.hasOwnProperty(Fr)?C[Fr]:Object.defineProperty(C,Fr,{value:[]})[Fr];for(;te.length<=G;)te.push(null);return(te[G]=te[G]||[]).push(v),C}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Ft{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=rt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zc=new Ft("AnalyzeForEntryComponents");function Gi(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Gi(a,r)):r!==n&&r.push(a)}return r}function As(n,r){n.forEach(s=>Array.isArray(s)?As(s,r):r(s))}function Ma(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function zo(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Di(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function Ci(n,r,s){let a=po(n,r);return a>=0?n[1|a]=s:(a=~a,function Du(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function to(n,r){const s=po(n,r);if(s>=0)return n[1|s]}function po(n,r){return function Ko(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),v=n[h<<s];if(r===v)return h<<s;v>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const qo={},Ya="__NG_DI_FLAG__",hl="ngTempTokenPath",O=/\n/gm,ie="__source",Ce=De({provide:String,useValue:De});let je;function ht(n){const r=je;return je=n,r}function xt(n,r=Nt.Default){if(void 0===je)throw new He(203,"");return null===je?mr(n,void 0,r):je.get(n,r&Nt.Optional?null:void 0,r)}function Kt(n,r=Nt.Default){return(function In(){return Jt}()||xt)(Ie(n),r)}const Wn=Kt;function bn(n){const r=[];for(let s=0;s<n.length;s++){const a=Ie(n[s]);if(Array.isArray(a)){if(0===a.length)throw new He(900,"");let l,h=Nt.Default;for(let v=0;v<a.length;v++){const w=a[v],C=mi(w);"number"==typeof C?-1===C?l=w.token:h|=C:l=w}r.push(Kt(l,h))}else r.push(Kt(a))}return r}function Sr(n,r){return n[Ya]=r,n.prototype[Ya]=r,n}function mi(n){return n[Ya]}const es=Sr(eo("Inject",n=>({token:n})),-1),ro=Sr(eo("Optional"),8),go=Sr(eo("SkipSelf"),4);class Au{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Zo(n){return n instanceof Au?n.changingThisBreaksApplicationSecurity:n}const Ra=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,nh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Bn=(()=>((Bn=Bn||{})[Bn.NONE=0]="NONE",Bn[Bn.HTML=1]="HTML",Bn[Bn.STYLE=2]="STYLE",Bn[Bn.SCRIPT=3]="SCRIPT",Bn[Bn.URL=4]="URL",Bn[Bn.RESOURCE_URL=5]="RESOURCE_URL",Bn))();function Rr(n){const r=function Al(){const n=F();return n&&n[12]}();return r?r.sanitize(Bn.URL,n)||"":function Su(n,r){const s=function ed(n){return n instanceof Au&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?Zo(n):function tu(n){return(n=String(n)).match(Ra)||n.match(nh)?n:"unsafe:"+n}(Be(n))}const su="__ngContext__";function Pi(n,r){n[su]=r}function pc(n){const r=function Yo(n){return n[su]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Ol(n){return n.ngOriginalError}function Pu(n,...r){n.error(...r)}class Lr{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function ch(n){return n&&n.ngErrorLogger||Pu}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ol(r);for(;s&&Ol(s);)s=Ol(s);return s||null}}const kf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Tn))();function f(n){return n instanceof Function?n():n}var Qe=(()=>((Qe=Qe||{})[Qe.Important=1]="Important",Qe[Qe.DashCase=2]="DashCase",Qe))();function Zt(n,r){return undefined(n,r)}function oi(n){const r=n[3];return jr(r)?r[3]:r}function Pl(n){return yc(n[13])}function Pa(n){return yc(n[4])}function yc(n){for(;null!==n&&!jr(n);)n=n[4];return n}function ka(n,r,s,a,l){if(null!=a){let h,v=!1;jr(a)?h=a:Ar(a)&&(v=!0,a=a[0]);const w=M(a);0===n&&null!==s?null==l?et(r,s,w):Fu(r,s,w,l||null,!0):1===n&&null!==s?Fu(r,s,w,l||null,!0):2===n?function _h(n,r,s){const a=gh(n,r);a&&function aa(n,r,s,a){ar(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,w,v):3===n&&r.destroyNode(w),null!=h&&function Eh(n,r,s,a,l){const h=s[7];h!==M(s)&&ka(r,n,a,h,l);for(let w=10;w<s.length;w++){const C=s[w];Ec(C[1],C,n,r,a,h)}}(r,n,h,s,l)}}function _c(n,r,s){if(ar(n))return n.createElement(r,s);{const a=null!==s?function gs(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Ng(n,r){const s=n[9],a=s.indexOf(r),l=r[3];1024&r[2]&&(r[2]&=-1025,ri(l,-1)),s.splice(a,1)}function Uf(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&Ng(l,a),r>0&&(n[s-1][4]=a[4]);const h=zo(n,10+r);!function Lf(n,r){Ec(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=h[19];null!==v&&v.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Pg(n,r){if(!(256&r[2])){const s=r[11];ar(s)&&s.destroyNode&&Ec(n,r,s,3,null,null),function My(n){let r=n[13];if(!r)return ph(n[1],n);for(;r;){let s=null;if(Ar(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Ar(r)&&ph(r[1],r),r=r[3];null===r&&(r=n),Ar(r)&&ph(r[1],r),s=r&&r[4]}r=s}}(r)}}function ph(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function kg(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Ps)){const h=s[a+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const w=l[h[v]],C=h[v+1];try{C.call(w)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function Ry(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const v=s[h+1],w="function"==typeof v?v(r):M(r[v]),C=a[l=s[h+2]],L=s[h+3];"boolean"==typeof L?w.removeEventListener(s[h],C,L):L>=0?a[l=L]():a[l=-L].unsubscribe(),h+=2}else{const v=a[l=s[h+1]];s[h].call(v)}if(null!==a){for(let h=l+1;h<a.length;h++)a[h]();r[7]=null}}(n,r),1===r[1].type&&ar(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&jr(r[3])){s!==r[3]&&Ng(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function Fg(n,r,s){return function Bf(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===vt.None||l===vt.Emulated)return null}return Ye(a,s)}(n,r.parent,s)}function Fu(n,r,s,a,l){ar(n)?n.insertBefore(r,s,a,l):r.insertBefore(s,a,l)}function et(n,r,s){ar(n)?n.appendChild(r,s):r.appendChild(s)}function cd(n,r,s,a,l){null!==a?Fu(n,r,s,a,l):et(n,r,s)}function gh(n,r){return ar(n)?n.parentNode(r):r.parentNode}function Lu(n,r,s){return Vu(n,r,s)}let Vu=function Lg(n,r,s){return 40&n.type?Ye(n,s):null};function hd(n,r,s,a){const l=Fg(n,a,r),h=r[11],w=Lu(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let C=0;C<s.length;C++)cd(h,l,s[C],w,!1);else cd(h,l,s,w,!1)}function Wi(n,r){if(null!==r){const s=r.type;if(3&s)return Ye(r,n);if(4&s)return fd(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return Wi(n,a);{const l=n[r.index];return jr(l)?fd(-1,l):M(l)}}if(32&s)return Zt(r,n)()||M(n[r.index]);{const a=vh(n,r);return null!==a?Array.isArray(a)?a[0]:Wi(oi(n[16]),a):Wi(n,r.next)}}return null}function vh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function fd(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return Wi(a,l)}return r[7]}function Fa(n,r,s,a,l,h,v){for(;null!=s;){const w=a[s.index],C=s.type;if(v&&0===r&&(w&&Pi(M(w),a),s.flags|=4),64!=(64&s.flags))if(8&C)Fa(n,r,s.child,a,l,h,!1),ka(r,n,l,w,h);else if(32&C){const L=Zt(s,a);let G;for(;G=L();)ka(r,n,l,G,h);ka(r,n,l,w,h)}else 16&C?jf(n,r,a,s,l,h):ka(r,n,l,w,h);s=v?s.projectionNext:s.next}}function Ec(n,r,s,a,l,h){Fa(s,a,n.firstChild,r,l,h,!1)}function jf(n,r,s,a,l,h){const v=s[16],C=v[6].projection[a.projection];if(Array.isArray(C))for(let L=0;L<C.length;L++)ka(r,n,l,C[L],h);else Fa(n,r,C,v[3],l,h,!0)}function Uu(n,r,s){ar(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Bu(n,r,s){ar(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function wc(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const wh="ng-template";function $f(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==wc(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Hf(n){return 4===n.type&&n.value!==wh}function ky(n,r,s){return r===(4!==n.type||s?n.value:wh)}function Vg(n,r,s){let a=4;const l=n.attrs||[],h=function Fy(n){for(let r=0;r<n.length;r++)if(Xs(n[r]))return r;return n.length}(l);let v=!1;for(let w=0;w<r.length;w++){const C=r[w];if("number"!=typeof C){if(!v)if(4&a){if(a=2|1&a,""!==C&&!ky(n,C,s)||""===C&&1===r.length){if(Jo(a))return!1;v=!0}}else{const L=8&a?C:r[++w];if(8&a&&null!==n.attrs){if(!$f(n.attrs,L,s)){if(Jo(a))return!1;v=!0}continue}const te=Gf(8&a?"class":C,l,Hf(n),s);if(-1===te){if(Jo(a))return!1;v=!0;continue}if(""!==L){let ve;ve=te>h?"":l[te+1].toLowerCase();const ke=8&a?ve:null;if(ke&&-1!==wc(ke,L,0)||2&a&&L!==ve){if(Jo(a))return!1;v=!0}}}}else{if(!v&&!Jo(a)&&!Jo(C))return!1;if(v&&Jo(C))continue;v=!1,a=C|1&a}}return Jo(a)||v}function Jo(n){return 0==(1&n)}function Gf(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const v=r[l];if(v===n)return l;if(3===v||6===v)h=!0;else{if(1===v||2===v){let w=r[++l];for(;"string"==typeof w;)w=r[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=h?1:2}return-1}return function Ug(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Ic(n,r,s=!1){for(let a=0;a<r.length;a++)if(Vg(n,r[a],s))return!0;return!1}function Ly(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let l=0;l<n.length;l++)if(n[l]!==a[l])continue e;return!0}}return!1}function Bg(n,r){return n?":not("+r.trim()+")":r}function Vy(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let v=n[s];if("string"==typeof v)if(2&a){const w=n[++s];l+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&a?l+="."+v:4&a&&(l+=" "+v);else""!==l&&!Jo(v)&&(r+=Bg(h,l),l=""),a=v,h=h||!Jo(a);s++}return""!==l&&(r+=Bg(h,l)),r}const En={};function Wf(n){jg(Le(),F(),Wr()+n,_a())}function jg(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&lo(r,h,s)}else{const h=n.preOrderHooks;null!==h&&jo(r,h,0,s)}bo(s)}function Dc(n,r){return n<<17|r<<2}function $s(n){return n>>17&32767}function Ll(n){return 2|n}function Xo(n){return(131068&n)>>2}function Cc(n,r){return-131069&n|r<<2}function Hs(n){return 1|n}function Qg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const v=n.data[h];vu(l),v.contentQueries(2,r[h],h)}}}function Va(n,r,s,a,l,h,v,w,C,L){const G=r.blueprint.slice();return G[0]=l,G[2]=140|a,Ui(G),G[3]=G[15]=n,G[8]=s,G[10]=v||n&&n[10],G[11]=w||n&&n[11],G[12]=C||n&&n[12]||null,G[9]=L||n&&n[9]||null,G[6]=h,G[16]=2==r.type?n[16]:G,G}function la(n,r,s,a,l){let h=n.data[r];if(null===h)h=function yd(n,r,s,a,l){const h=hi(),v=Qs(),C=n.data[r]=function qy(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=C),null!==h&&(v?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(n,r,s,a,l),function ao(){return tn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const v=function Yr(){const n=tn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return Gr(h,!0),h}function lu(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Ac(n,r,s){Js(r);try{const a=n.viewQuery;null!==a&&dp(1,a,s);const l=n.template;null!==l&&em(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Qg(n,r),n.staticViewQueries&&dp(2,n.viewQuery,s);const h=n.components;null!==h&&function Ky(n,r){for(let s=0;s<r.length;s++)up(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,Co()}}function Bl(n,r,s,a){const l=r[2];if(256==(256&l))return;Js(r);const h=_a();try{Ui(r),function Do(n){return tn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&em(n,r,s,2,a);const v=3==(3&l);if(!h)if(v){const L=n.preOrderCheckHooks;null!==L&&lo(r,L,null)}else{const L=n.preOrderHooks;null!==L&&jo(r,L,0,null),zr(r,0)}if(function ap(n){for(let r=Pl(n);null!==r;r=Pa(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(1024&l[2])&&ri(h,1),l[2]|=1024}}}(r),function Sc(n){for(let r=Pl(n);null!==r;r=Pa(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];dr(a)&&Bl(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Qg(n,r),!h)if(v){const L=n.contentCheckHooks;null!==L&&lo(r,L)}else{const L=n.contentHooks;null!==L&&jo(r,L,1),zr(r,1)}!function Yg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)bo(~l);else{const h=l,v=s[++a],w=s[++a];Ea(v,h),w(2,r[h])}}}finally{bo(-1)}}(n,r);const w=n.components;null!==w&&function Jg(n,r){for(let s=0;s<r.length;s++)Vh(n,r[s])}(r,w);const C=n.viewQuery;if(null!==C&&dp(2,C,a),!h)if(v){const L=n.viewCheckHooks;null!==L&&lo(r,L)}else{const L=n.viewHooks;null!==L&&jo(r,L,2),zr(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),h||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,ri(r[3],-1))}finally{Co()}}function Xg(n,r,s,a){const l=r[10],h=!_a(),v=vn(r);try{h&&!v&&l.begin&&l.begin(),v&&Ac(n,r,a),Bl(n,r,s,a)}finally{h&&!v&&l.end&&l.end()}}function em(n,r,s,a,l){const h=Wr(),v=2&a;try{bo(-1),v&&r.length>20&&jg(n,r,20,_a()),s(a,l)}finally{bo(h)}}function Oh(n,r,s){if(is(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const v=n.data[h];v.contentQueries&&v.contentQueries(1,s[h],h)}}}function Qf(n,r,s){!R()||(function am(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||ho(s,r),Pi(a,r);const v=s.initialInputs;for(let w=l;w<h;w++){const C=n.data[w],L=oe(C);L&&Xy(r,s,C);const G=Dt(r,n,w,s);Pi(G,r),null!==v&&ev(0,w-l,G,C,0,v),L&&(cn(s.index,r)[8]=G)}}(n,r,s,Ye(s,r)),128==(128&s.flags)&&function Qy(n,r,s){const a=s.directiveStart,l=s.directiveEnd,v=s.index,w=function Pr(){return tn.lFrame.currentDirectiveIndex}();try{bo(v);for(let C=a;C<l;C++){const L=n.data[C],G=r[C];Lo(C),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&um(L,G)}}finally{bo(-1),Lo(w)}}(n,r,s))}function vd(n,r,s=Ye){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const v=a[h+1],w=-1===v?s(r,n):n[v];n[l++]=w}}}function tm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Rh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Rh(n,r,s,a,l,h,v,w,C,L){const G=20+a,te=G+l,ve=function Jf(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:En);return s}(G,te),ke="function"==typeof L?L():L;return ve[1]={type:n,blueprint:ve,template:s,queries:null,viewQuery:w,declTNode:r,data:ve.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:ke,incompleteFirstPass:!1}}function rm(n,r,s,a){const l=$h(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&hp(n).push(a,l.length-1))}function im(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function Ed(n,r,s,a){let l=!1;if(R()){const h=function Jy(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const v=a[h];Ic(s,v.selectors,!1)&&(l||(l=[]),I(ho(s,r),n,v.type),oe(v)?(ip(n,s),l.unshift(v)):l.push(v))}return l}(n,r,s),v=null===a?null:{"":-1};if(null!==h){l=!0,kh(s,n.data.length,h.length);for(let G=0;G<h.length;G++){const te=h[G];te.providersResolver&&te.providersResolver(te)}let w=!1,C=!1,L=lu(n,r,h.length,null);for(let G=0;G<h.length;G++){const te=h[G];s.mergedAttrs=Ho(s.mergedAttrs,te.hostAttrs),sp(n,s,r,L,te),wd(L,te,v),null!==te.contentQueries&&(s.flags|=8),(null!==te.hostBindings||null!==te.hostAttrs||0!==te.hostVars)&&(s.flags|=128);const ve=te.type.prototype;!w&&(ve.ngOnChanges||ve.ngOnInit||ve.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),w=!0),!C&&(ve.ngOnChanges||ve.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),C=!0),L++}!function Zy(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,v=[];let w=null,C=null;for(let L=r.directiveStart;L<a;L++){const G=l[L],te=G.inputs,ve=null===h||Hf(r)?null:tv(te,h);v.push(ve),w=im(te,L,w),C=im(G.outputs,L,C)}null!==w&&(w.hasOwnProperty("class")&&(r.flags|=16),w.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=w,r.outputs=C}(n,s)}v&&function Ph(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new He(-301,!1);a.push(r[l],h)}}}(s,a,v)}return s.mergedAttrs=Ho(s.mergedAttrs,s.attrs),l}function rp(n,r,s,a,l,h){const v=h.hostBindings;if(v){let w=n.hostBindingOpCodes;null===w&&(w=n.hostBindingOpCodes=[]);const C=~r.index;(function Yy(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(w)!=C&&w.push(C),w.push(a,l,v)}}function um(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function ip(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function wd(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;oe(r)&&(s[""]=n)}}function kh(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function sp(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=$r(l.type)),v=new Ps(h,oe(l),null);n.blueprint[a]=v,s[a]=v,rp(n,r,0,a,lu(n,s,l.hostVars,En),l)}function Xy(n,r,s){const a=Ye(r,n),l=tm(s),h=n[10],v=Mc(n,Va(n,l,null,s.onPush?64:16,a,r,h,h.createRenderer(a,s),null,null));n[r.index]=v}function Ua(n,r,s,a,l,h){const v=Ye(n,r);!function op(n,r,s,a,l,h,v){if(null==h)ar(n)?n.removeAttribute(r,l,s):r.removeAttribute(l);else{const w=null==v?Be(h):v(h,a||"",l);ar(n)?n.setAttribute(r,l,w,s):s?r.setAttributeNS(s,l,w):r.setAttribute(l,w)}}(r[11],v,h,n.value,s,a,l)}function ev(n,r,s,a,l,h){const v=h[r];if(null!==v){const w=a.setInput;for(let C=0;C<v.length;){const L=v[C++],G=v[C++],te=v[C++];null!==w?a.setInput(s,te,L,G):s[G]=te}}}function tv(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Lh(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Vh(n,r){const s=cn(r,n);if(dr(s)){const a=s[1];80&s[2]?Bl(a,s,a.template,s[8]):s[5]>0&&jl(s)}}function jl(n){for(let a=Pl(n);null!==a;a=Pa(a))for(let l=10;l<a.length;l++){const h=a[l];if(1024&h[2]){const v=h[1];Bl(v,h,v.template,h[8])}else h[5]>0&&jl(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=cn(s[a],n);dr(l)&&l[5]>0&&jl(l)}}function up(n,r){const s=cn(r,n),a=s[1];(function lm(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Ac(a,s,s[8])}function Mc(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Id(n){for(;n;){n[2]|=64;const r=oi(n);if(ae(n)&&!r)return n;n=r}return null}function lp(n,r,s){const a=r[10];a.begin&&a.begin();try{Bl(n,r,n.template,s)}catch(l){throw Hh(r,l),l}finally{a.end&&a.end()}}function Bh(n){!function Uh(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=pc(s),l=a[1];Xg(l,a,l.template,s)}}(n[8])}function dp(n,r,s){vu(0),r(n,s)}const jh=(()=>Promise.resolve(null))();function $h(n){return n[7]||(n[7]=[])}function hp(n){return n.cleanup||(n.cleanup=[])}function Hh(n,r){const s=n[9],a=s?s.get(Lr,null):null;a&&a.handleError(r)}function dm(n,r,s,a,l){for(let h=0;h<s.length;){const v=s[h++],w=s[h++],C=r[v],L=n.data[v];null!==L.setInput?L.setInput(C,l,a,w):C[w]=l}}function cu(n,r,s){const a=qe(r,n);!function ad(n,r,s){ar(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Dd(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let v=0;v<r.length;v++){const w=r[v];"number"==typeof w?h=w:1==h?l=Me(l,w):2==h&&(a=Me(a,w+": "+r[++v]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}const fp=new Ft("INJECTOR",-1);class Gh{get(r,s=qo){if(s===qo){const a=new Error(`NullInjectorError: No provider for ${Se(r)}!`);throw a.name="NullInjectorError",a}return s}}const pp=new Ft("Set Injector scope."),Hl={},iv={};let Cd;function gp(){return void 0===Cd&&(Cd=new Gh),Cd}function Wh(n,r=null,s=null,a){const l=zh(n,r,s,a);return l._resolveInjectorDefTypes(),l}function zh(n,r=null,s=null,a){return new mp(n,s,r||gp(),a)}class mp{constructor(r,s,a,l=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];s&&As(s,w=>this.processProvider(w,r,s)),As([r],w=>this.processInjectorType(w,[],h)),this.records.set(fp,ca(void 0,this));const v=this.records.get(pp);this.scope=null!=v?v.value:null,this.source=l||("object"==typeof r?null:Se(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=qo,a=Nt.Default){this.assertNotDestroyed();const l=ht(this),h=on(void 0);try{if(!(a&Nt.SkipSelf)){let w=this.records.get(r);if(void 0===w){const C=function Ip(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ft}(r)&&sn(r);w=C&&this.injectableDefInScope(C)?ca(Wu(r),Hl):null,this.records.set(r,w)}if(null!=w)return this.hydrate(r,w)}return(a&Nt.Self?gp():this.parent).get(r,s=a&Nt.Optional&&s===qo?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[hl]=v[hl]||[]).unshift(Se(r)),l)throw v;return function Oa(n,r,s,a){const l=n[hl];throw r[ie]&&l.unshift(r[ie]),n.message=function Qa(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let l=Se(r);if(Array.isArray(r))l=r.map(Se).join(" -> ");else if("object"==typeof r){let h=[];for(let v in r)if(r.hasOwnProperty(v)){let w=r[v];h.push(v+":"+("string"==typeof w?JSON.stringify(w):Se(w)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(O,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[hl]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{on(h),ht(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,l)=>r.push(Se(l))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new He(205,!1)}processInjectorType(r,s,a){if(!(r=Ie(r)))return!1;let l=Ln(r);const h=null==l&&r.ngModule||void 0,v=void 0===h?r:h,w=-1!==a.indexOf(v);if(void 0!==h&&(l=Ln(h)),null==l)return!1;if(null!=l.imports&&!w){let G;a.push(v);try{As(l.imports,te=>{this.processInjectorType(te,s,a)&&(void 0===G&&(G=[]),G.push(te))})}finally{}if(void 0!==G)for(let te=0;te<G.length;te++){const{ngModule:ve,providers:ke}=G[te];As(ke,tt=>this.processProvider(tt,ve,ke||Ht))}}this.injectorDefTypes.add(v);const C=$r(v)||(()=>new v);this.records.set(v,ca(C,Hl));const L=l.providers;if(null!=L&&!w){const G=r;As(L,te=>this.processProvider(te,G,L))}return void 0!==h&&void 0!==r.providers}processProvider(r,s,a){let l=Oc(r=Ie(r))?r:Ie(r&&r.provide);const h=function yp(n,r,s){return vp(n)?ca(void 0,n.useValue):ca(Gl(n),Hl)}(r);if(Oc(r)||!0!==r.multi)this.records.get(l);else{let v=this.records.get(l);v||(v=ca(void 0,Hl,!0),v.factory=()=>bn(v.multi),this.records.set(l,v)),l=r,v.multi.push(r)}this.records.set(l,h)}hydrate(r,s){return s.value===Hl&&(s.value=iv,s.value=s.factory()),"object"==typeof s.value&&s.value&&function wp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Ie(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Wu(n){const r=sn(n),s=null!==r?r.factory:$r(n);if(null!==s)return s;if(n instanceof Ft)throw new He(204,!1);if(n instanceof Function)return function zu(n){const r=n.length;if(r>0)throw Di(r,"?"),new He(204,!1);const s=function _n(n){const r=n&&(n[nr]||n[gr]);if(r){const s=function Jn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new He(204,!1)}function Gl(n,r,s){let a;if(Oc(n)){const l=Ie(n);return $r(l)||Wu(l)}if(vp(n))a=()=>Ie(n.useValue);else if(function sv(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...bn(n.deps||[]));else if(function xc(n){return!(!n||!n.useExisting)}(n))a=()=>Kt(Ie(n.useExisting));else{const l=Ie(n&&(n.useClass||n.provide));if(!function Ep(n){return!!n.deps}(n))return $r(l)||Wu(l);a=()=>new l(...bn(n.deps))}return a}function ca(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function vp(n){return null!==n&&"object"==typeof n&&Ce in n}function Oc(n){return"function"==typeof n}let da=(()=>{class n{static create(s,a){var l;if(Array.isArray(s))return Wh({name:""},a,s,"");{const h=null!==(l=s.name)&&void 0!==l?l:"";return Wh({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=qo,n.NULL=new Gh,n.\u0275prov=rt({token:n,providedIn:"any",factory:()=>Kt(fp)}),n.__NG_ELEMENT_ID__=-1,n})();function Tp(n,r){Yi(pc(n)[1],dn())}function Ap(n){let r=function Qh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(oe(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new He(903,"");l=r.\u0275dir}if(l){if(s){a.push(l);const v=n;v.inputs=Td(n.inputs),v.declaredInputs=Td(n.declaredInputs),v.outputs=Td(n.outputs);const w=l.hostBindings;w&&Tm(n,w);const C=l.viewQuery,L=l.contentQueries;if(C&&Mp(n,C),L&&Rc(n,L),Ae(n.inputs,l.inputs),Ae(n.declaredInputs,l.declaredInputs),Ae(n.outputs,l.outputs),oe(l)&&l.data.animation){const G=n.data;G.animation=(G.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let v=0;v<h.length;v++){const w=h[v];w&&w.ngInherit&&w(n),w===Ap&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Sp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Ho(l.hostAttrs,s=Ho(s,l.hostAttrs))}}(a)}function Td(n){return n===Hn?{}:n===Ht?[]:n}function Mp(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Rc(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function Tm(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let ta=null;function Ku(){if(!ta){const n=Tn.Symbol;if(n&&n.iterator)ta=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(ta=a)}}}return ta}function Wl(n){return!!Ad(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ku()in n)}function Ad(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ba(n,r,s){return n[r]=s}function Gs(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Xh(n,r,s,a){const l=F();return Gs(l,Rs(),r)&&(Le(),Ua(kr(),l,n,r,s,a)),Xh}function Om(n,r,s,a,l,h,v,w){const C=F(),L=Le(),G=n+20,te=L.firstCreatePass?function gv(n,r,s,a,l,h,v,w,C){const L=r.consts,G=la(r,n,4,v||null,Xn(L,w));Ed(r,s,G,Xn(L,C)),Yi(r,G);const te=G.tViews=Rh(2,G,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,L);return null!==r.queries&&(r.queries.template(r,G),te.queries=r.queries.embeddedTView(G)),G}(G,L,C,r,s,a,l,h,v):L.data[G];Gr(te,!1);const ve=C[11].createComment("");hd(L,C,ve,te),Pi(ve,C),Mc(C,C[G]=Lh(ve,C,ve,te)),ss(te)&&Qf(L,C,te),null!=v&&vd(C,te,w)}function tf(n){return Un(function yu(){return tn.lFrame.contextLView}(),20+n)}function ql(n,r=Nt.Default){const s=F();return null===s?Kt(n,r):N(dn(),s,Ie(n),r)}function Vm(){throw new Error("invalid")}function Kp(n,r,s){const a=F();return Gs(a,Rs(),r)&&function _o(n,r,s,a,l,h,v,w){const C=Ye(r,s);let G,L=r.inputs;!w&&null!=L&&(G=L[a])?(dm(n,s,G,a,l),ni(r)&&function sm(n,r){const s=cn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function Xf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=v?v(l,r.value||"",a):l,ar(h)?h.setProperty(C,a,l):Ji(a)||(C.setProperty?C.setProperty(a,l):C[a]=l))}(Le(),kr(),a,n,r,a[11],s,!1),Kp}function Jr(n,r,s,a,l){const v=l?"class":"style";dm(n,s,r.inputs[v],v,a)}function qp(n,r,s,a){const l=F(),h=Le(),v=20+n,w=l[11],C=l[v]=_c(w,r,function tc(){return tn.lFrame.currentNamespace}()),L=h.firstCreatePass?function X_(n,r,s,a,l,h,v){const w=r.consts,L=la(r,n,2,l,Xn(w,h));return Ed(r,s,L,Xn(w,v)),null!==L.attrs&&Dd(L,L.attrs,!1),null!==L.mergedAttrs&&Dd(L,L.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,L),L}(v,h,l,0,r,s,a):h.data[v];Gr(L,!0);const G=L.mergedAttrs;null!==G&&$o(w,C,G);const te=L.classes;null!==te&&Bu(w,C,te);const ve=L.styles;return null!==ve&&Uu(w,C,ve),64!=(64&L.flags)&&hd(h,l,C,L),0===function ji(){return tn.lFrame.elementDepthCount}()&&Pi(C,l),function Zs(){tn.lFrame.elementDepthCount++}(),ss(L)&&(Qf(h,l,L),Oh(h,L,l)),null!==a&&vd(l,L),qp}function Ai(){let n=dn();Qs()?ms():(n=n.parent,Gr(n,!1));const r=n;!function Ys(){tn.lFrame.elementDepthCount--}();const s=Le();return s.firstCreatePass&&(Yi(s,n),is(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ga(n){return 0!=(16&n.flags)}(r)&&Jr(s,r,F(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Iu(n){return 0!=(32&n.flags)}(r)&&Jr(s,r,F(),r.stylesWithoutHost,!1),Ai}function uf(n,r,s,a){return qp(n,r,s,a),Ai(),uf}function Nd(n,r,s){const a=F(),l=Le(),h=n+20,v=l.firstCreatePass?function Dv(n,r,s,a,l){const h=r.consts,v=Xn(h,a),w=la(r,n,8,"ng-container",v);return null!==v&&Dd(w,v,!0),Ed(r,s,w,Xn(h,l)),null!==r.queries&&r.queries.elementStart(r,w),w}(h,l,a,r,s):l.data[h];Gr(v,!0);const w=a[h]=a[11].createComment("");return hd(l,a,w,v),Pi(w,a),ss(v)&&(Qf(l,a,v),Oh(l,v,a)),null!=s&&vd(a,v),Nd}function lf(){let n=dn();const r=Le();return Qs()?ms():(n=n.parent,Gr(n,!1)),r.firstCreatePass&&(Yi(r,n),is(n)&&r.queries.elementEnd(n)),lf}function Bm(){return F()}function Zp(n){return!!n&&"function"==typeof n.then}function Cv(n){return!!n&&"function"==typeof n.subscribe}const jm=Cv;function Yp(n,r,s,a){const l=F(),h=Le(),v=dn();return function bv(n,r,s,a,l,h,v,w){const C=ss(a),G=n.firstCreatePass&&hp(n),te=r[8],ve=$h(r);let ke=!0;if(3&a.type||w){const Mt=Ye(a,r),Xt=w?w(Mt):Mt,ut=ve.length,mn=w?lr=>w(M(lr[a.index])):a.index;if(ar(s)){let lr=null;if(!w&&C&&(lr=function hu(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const v=l[h];if(v===s&&l[h+1]===a){const w=r[7],C=l[h+2];return w.length>C?w[C]:null}"string"==typeof v&&(h+=2)}return null}(n,r,l,a.index)),null!==lr)(lr.__ngLastListenerFn__||lr).__ngNextListenerFn__=h,lr.__ngLastListenerFn__=h,ke=!1;else{h=fu(a,r,te,h,!1);const Ur=s.listen(Xt,l,h);ve.push(h,Ur),G&&G.push(l,mn,ut,ut+1)}}else h=fu(a,r,te,h,!0),Xt.addEventListener(l,h,v),ve.push(h),G&&G.push(l,mn,ut,v)}else h=fu(a,r,te,h,!1);const tt=a.outputs;let _t;if(ke&&null!==tt&&(_t=tt[l])){const Mt=_t.length;if(Mt)for(let Xt=0;Xt<Mt;Xt+=2){const va=r[_t[Xt]][_t[Xt+1]].subscribe(h),Gd=ve.length;ve.push(h,va),G&&G.push(l,a.index,Gd,-(Gd+1))}}}(h,l,l[11],v,n,r,!!s,a),Yp}function fa(n,r,s,a){try{return!1!==s(a)}catch(l){return Hh(n,l),!1}}function fu(n,r,s,a,l){return function h(v){if(v===Function)return a;const w=2&n.flags?cn(n.index,r):r;0==(32&r[2])&&Id(w);let C=fa(r,0,a,v),L=h.__ngNextListenerFn__;for(;L;)C=fa(r,0,L,v)&&C,L=L.__ngNextListenerFn__;return l&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Pd(n=1){return function _u(n){return(tn.lFrame.contextLView=function ia(n,r){for(;n>0;)r=r[15],n--;return r}(n,tn.lFrame.contextLView))[8]}(n)}function Tv(n,r){let s=null;const a=function Fl(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let l=0;l<r.length;l++){const h=r[l];if("*"!==h){if(null===a?Ic(n,h,!0):Ly(a,h))return l}else s=l}return s}function $m(n){const r=F()[16][6];if(!r.projection){const a=r.projection=Di(n?n.length:1,null),l=a.slice();let h=r.child;for(;null!==h;){const v=n?Tv(h,n):0;null!==v&&(l[v]?l[v].projectionNext=h:a[v]=h,l[v]=h),h=h.next}}}function Jp(n,r=0,s){const a=F(),l=Le(),h=la(l,20+n,16,null,s||null);null===h.projection&&(h.projection=r),ms(),64!=(64&h.flags)&&function Ny(n,r,s){jf(r[11],0,r,s,Fg(n,s,r),Lu(s.parent||r[6],s,r))}(l,a,h)}function rg(n,r,s,a,l){const h=n[s+1],v=null===r;let w=a?$s(h):Xo(h),C=!1;for(;0!==w&&(!1===C||v);){const G=n[w+1];Zl(n[w],r)&&(C=!0,n[w+1]=a?Hs(G):Ll(G)),w=a?$s(G):Xo(G)}C&&(n[s+1]=a?Ll(h):Hs(h))}function Zl(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&po(n,r)>=0}function ff(n,r){return function ga(n,r,s,a){const l=F(),h=Le(),v=function ys(n){const r=tn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function ug(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[Wr()],v=function qm(n,r){return r>=n.expandoStartIndex}(n,s);(function Ud(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!v&&(r=!1),r=function Sv(n,r,s,a){const l=function na(n){const r=tn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Bc(s=lg(null,n,r,s,a),r.attrs,a),h=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==l)if(s=lg(l,n,r,s,a),null===h){let C=function Mv(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Xo(a))return n[$s(a)]}(n,r,a);void 0!==C&&Array.isArray(C)&&(C=lg(null,n,r,C[1],a),C=Bc(C,r.attrs,a),function Zm(n,r,s,a){n[$s(s?r.classBindings:r.styleBindings)]=a}(n,r,a,C))}else h=function xv(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Bc(a,n[h].hostAttrs,s);return Bc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function tg(n,r,s,a,l,h){let v=h?r.classBindings:r.styleBindings,w=$s(v),C=Xo(v);n[a]=s;let G,L=!1;if(Array.isArray(s)){const te=s;G=te[1],(null===G||po(te,G)>0)&&(L=!0)}else G=s;if(l)if(0!==C){const ve=$s(n[w+1]);n[a+1]=Dc(ve,w),0!==ve&&(n[ve+1]=Cc(n[ve+1],a)),n[w+1]=function Gg(n,r){return 131071&n|r<<17}(n[w+1],a)}else n[a+1]=Dc(w,0),0!==w&&(n[w+1]=Cc(n[w+1],a)),w=a;else n[a+1]=Dc(C,0),0===w?w=a:n[C+1]=Cc(n[C+1],a),C=a;L&&(n[a+1]=Ll(n[a+1])),rg(n,G,a,!0),rg(n,G,a,!1),function ng(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&po(h,r)>=0&&(s[a+1]=Hs(s[a+1]))}(r,G,n,a,h),v=Dc(w,C),h?r.classBindings=v:r.styleBindings=v}(l,h,r,s,v,a)}}(h,n,v,a),r!==En&&Gs(l,v,r)&&function cg(n,r,s,a,l,h,v,w){if(!(3&r.type))return;const C=n.data,L=C[w+1];Vd(function zf(n){return 1==(1&n)}(L)?dg(C,r,s,l,Xo(L),v):void 0)||(Vd(h)||function Hg(n){return 2==(2&n)}(L)&&(h=dg(C,null,s,l,w,v)),function kl(n,r,s,a,l){const h=ar(n);if(r)l?h?n.addClass(s,a):s.classList.add(a):h?n.removeClass(s,a):s.classList.remove(a);else{let v=-1===a.indexOf("-")?void 0:Qe.DashCase;if(null==l)h?n.removeStyle(s,a,v):s.style.removeProperty(a);else{const w="string"==typeof l&&l.endsWith("!important");w&&(l=l.slice(0,-10),v|=Qe.Important),h?n.setStyle(s,a,l,v):s.style.setProperty(a,l,w?"important":"")}}}(a,v,qe(Wr(),s),l,h))}(h,h.data[Wr()],l,l[11],n,l[v+1]=function hg(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Se(Zo(n)))),n}(r,s),a,v)}(n,r,null,!0),ff}function lg(n,r,s,a,l){let h=null;const v=s.directiveEnd;let w=s.directiveStylingLast;for(-1===w?w=s.directiveStart:w++;w<v&&(h=r[w],a=Bc(a,h.hostAttrs,l),h!==n);)w++;return null!==n&&(s.directiveStylingLast=w),a}function Bc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const v=r[h];"number"==typeof v?l=v:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ci(n,v,!!s||r[++h]))}return void 0===n?null:n}function dg(n,r,s,a,l,h){const v=null===r;let w;for(;l>0;){const C=n[l],L=Array.isArray(C),G=L?C[1]:C,te=null===G;let ve=s[l+1];ve===En&&(ve=te?Ht:void 0);let ke=te?to(ve,a):G===a?ve:void 0;if(L&&!Vd(ke)&&(ke=to(C,a)),Vd(ke)&&(w=ke,v))return w;const tt=n[l+1];l=v?$s(tt):Xo(tt)}if(null!==r){let C=h?r.residualClasses:r.residualStyles;null!=C&&(w=to(C,a))}return w}function Vd(n){return void 0!==n}function Jm(n,r=""){const s=F(),a=Le(),l=n+20,h=a.firstCreatePass?la(a,l,1,r,null):a.data[l],v=s[l]=function vc(n,r){return ar(n)?n.createText(r):n.createTextNode(r)}(s[11],r);hd(a,s,v,h),Gr(h,!1)}function pf(n){return ya("",n,""),pf}function ya(n,r,s){const a=F(),l=function Kl(n,r,s,a){return Gs(n,Rs(),s)?r+Be(s)+a:En}(a,n,r,s);return l!==En&&cu(a,Wr(),l),ya}const il=void 0;var Ql=["en",[["a","p"],["AM","PM"],il],[["AM","PM"],il,il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",il,"{1} 'at' {0}",il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hy(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Ss={};function yf(n){const r=function vg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Gc(r);if(s)return s;const a=r.split("-")[0];if(s=Gc(a),s)return s;if("en"===a)return Ql;throw new Error(`Missing locale data for the locale "${n}".`)}function Hc(n){return yf(n)[yn.PluralCase]}function Gc(n){return n in Ss||(Ss[n]=Tn.ng&&Tn.ng.common&&Tn.ng.common.locales&&Tn.ng.common.locales[n]),Ss[n]}var yn=(()=>((yn=yn||{})[yn.LocaleId=0]="LocaleId",yn[yn.DayPeriodsFormat=1]="DayPeriodsFormat",yn[yn.DayPeriodsStandalone=2]="DayPeriodsStandalone",yn[yn.DaysFormat=3]="DaysFormat",yn[yn.DaysStandalone=4]="DaysStandalone",yn[yn.MonthsFormat=5]="MonthsFormat",yn[yn.MonthsStandalone=6]="MonthsStandalone",yn[yn.Eras=7]="Eras",yn[yn.FirstDayOfWeek=8]="FirstDayOfWeek",yn[yn.WeekendRange=9]="WeekendRange",yn[yn.DateFormat=10]="DateFormat",yn[yn.TimeFormat=11]="TimeFormat",yn[yn.DateTimeFormat=12]="DateTimeFormat",yn[yn.NumberSymbols=13]="NumberSymbols",yn[yn.NumberFormats=14]="NumberFormats",yn[yn.CurrencyCode=15]="CurrencyCode",yn[yn.CurrencySymbol=16]="CurrencySymbol",yn[yn.CurrencyName=17]="CurrencyName",yn[yn.Currencies=18]="Currencies",yn[yn.Directionality=19]="Directionality",yn[yn.PluralCase=20]="PluralCase",yn[yn.ExtraData=21]="ExtraData",yn))();const zc="en-US";let fy=zc;function Qv(n,r,s,a,l){if(n=Ie(n),Array.isArray(n))for(let h=0;h<n.length;h++)Qv(n[h],r,s,a,l);else{const h=Le(),v=F();let w=Oc(n)?n:Ie(n.provide),C=Gl(n);const L=dn(),G=1048575&L.providerIndexes,te=L.directiveStart,ve=L.providerIndexes>>20;if(Oc(n)||!n.multi){const ke=new Ps(C,l,ql),tt=Xv(w,r,l?G:G+ve,te);-1===tt?(I(ho(L,v),h,w),Jv(h,n,r.length),r.push(w),L.directiveStart++,L.directiveEnd++,l&&(L.providerIndexes+=1048576),s.push(ke),v.push(ke)):(s[tt]=ke,v[tt]=ke)}else{const ke=Xv(w,r,G+ve,te),tt=Xv(w,r,G,G+ve),_t=ke>=0&&s[ke],Mt=tt>=0&&s[tt];if(l&&!Mt||!l&&!_t){I(ho(L,v),h,w);const Xt=function dw(n,r,s,a,l){const h=new Ps(n,s,ql);return h.multi=[],h.index=r,h.componentProviders=0,p0(h,l,a&&!s),h}(l?cw:lw,s.length,l,a,C);!l&&Mt&&(s[tt].providerFactory=Xt),Jv(h,n,r.length,0),r.push(w),L.directiveStart++,L.directiveEnd++,l&&(L.providerIndexes+=1048576),s.push(Xt),v.push(Xt)}else Jv(h,n,ke>-1?ke:tt,p0(s[l?tt:ke],C,!l&&a));!l&&a&&Mt&&s[tt].componentProviders++}}}function Jv(n,r,s,a){const l=Oc(r),h=function _p(n){return!!n.useClass}(r);if(l||h){const C=(h?Ie(r.useClass):r).prototype.ngOnDestroy;if(C){const L=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const G=L.indexOf(s);-1===G?L.push(s,[a,C]):L[G+1].push(a,C)}else L.push(s,C)}}}function p0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function Xv(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function lw(n,r,s,a){return e_(this.multi,[])}function cw(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Dt(s,s[1],this.providerFactory.index,a);h=w.slice(0,v),e_(l,h);for(let C=v;C<w.length;C++)h.push(w[C])}else h=[],e_(l,h);return h}function e_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function g0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function uw(n,r,s){const a=Le();if(a.firstCreatePass){const l=oe(n);Qv(s,a.data,a.blueprint,l,!0),Qv(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class m0{}class pw{resolveComponentFactory(r){throw function fw(n){const r=Error(`No component factory found for ${Se(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ey=(()=>{class n{}return n.NULL=new pw,n})();function gw(){return Df(dn(),F())}function Df(n,r){return new Dg(Ye(n,r))}let Dg=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=gw,n})();function mw(n){return n instanceof Dg?n.nativeElement:n}class v0{}let yw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function _w(){const n=F(),s=cn(dn().index,n);return function vw(n){return n[11]}(Ar(s)?s:n)}(),n})(),Ew=(()=>{class n{}return n.\u0275prov=rt({token:n,providedIn:"root",factory:()=>null}),n})();class _0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const E0=new _0("13.3.2"),t_={};function wy(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(M(h)),jr(h))for(let w=10;w<h.length;w++){const C=h[w],L=C[1].firstChild;null!==L&&wy(C[1],C,L,a)}const v=s.type;if(8&v)wy(n,r,s.child,a);else if(32&v){const w=Zt(s,r);let C;for(;C=w();)a.push(C)}else if(16&v){const w=vh(r,s);if(Array.isArray(w))a.push(...w);else{const C=oi(r[16]);wy(C[1],C,w,a,!0)}}s=l?s.projectionNext:s.next}return a}class Cg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return wy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(jr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Uf(r,a),zo(s,a))}this._attachedToViewContainer=!1}Pg(this._lView[1],this._lView)}onDestroy(r){rm(this._lView[1],this._lView,null,r)}markForCheck(){Id(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){lp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function nv(n,r,s){oo(!0);try{lp(n,r,s)}finally{oo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new He(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vf(n,r){Ec(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new He(902,"");this._appRef=r}}class ww extends Cg{constructor(r){super(r),this._view=r}detectChanges(){Bh(this._view)}checkNoChanges(){!function cp(n){oo(!0);try{Bh(n)}finally{oo(!1)}}(this._view)}get context(){return null}}class w0 extends Ey{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=ln(r);return new n_(s,this.ngModule)}}function I0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class n_ extends m0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function pd(n){return n.map(Vy).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return I0(this.componentDef.inputs)}get outputs(){return I0(this.componentDef.outputs)}create(r,s,a,l){const h=(l=l||this.ngModule)?function Dw(n,r){return{get:(s,a,l)=>{const h=n.get(s,t_,l);return h!==t_||a===t_?h:r.get(s,a,l)}}}(r,l.injector):r,v=h.get(v0,x),w=h.get(Ew,null),C=v.createRenderer(null,this.componentDef),L=this.componentDef.selectors[0][0]||"div",G=a?function nm(n,r,s){if(ar(n))return n.selectRootElement(r,s===vt.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(C,a,this.componentDef.encapsulation):_c(v.createRenderer(null,this.componentDef),L,function Iw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(L)),te=this.componentDef.onPush?576:528,ve=function bm(n,r){return{components:[],scheduler:n||kf,clean:jh,playerHandler:r||null,flags:0}}(),ke=Rh(0,null,null,1,0,null,null,null,null,null),tt=Va(null,ke,ve,te,null,null,v,C,w,h);let _t,Mt;Js(tt);try{const Xt=function Cm(n,r,s,a,l,h){const v=s[1];s[20]=n;const C=la(v,20,2,"#host",null),L=C.mergedAttrs=r.hostAttrs;null!==L&&(Dd(C,L,!0),null!==n&&($o(l,n,L),null!==C.classes&&Bu(l,n,C.classes),null!==C.styles&&Uu(l,n,C.styles)));const G=a.createRenderer(n,r),te=Va(s,tm(r),null,r.onPush?64:16,s[20],C,a,G,h||null,null);return v.firstCreatePass&&(I(ho(C,s),v,r.type),ip(v,C),kh(C,s.length,1)),Mc(s,te),s[20]=te}(G,this.componentDef,tt,v,C);if(G)if(a)$o(C,G,["ng-version",E0.full]);else{const{attrs:ut,classes:mn}=function ju(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!Jo(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);ut&&$o(C,G,ut),mn&&mn.length>0&&Bu(C,G,mn.join(" "))}if(Mt=Gn(ke,20),void 0!==s){const ut=Mt.projection=[];for(let mn=0;mn<this.ngContentSelectors.length;mn++){const lr=s[mn];ut.push(null!=lr?Array.from(lr):null)}}_t=function Yh(n,r,s,a,l){const h=s[1],v=function np(n,r,s){const a=dn();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),sp(n,a,r,lu(n,r,1,null),s));const l=Dt(r,n,a.directiveStart,a);Pi(l,r);const h=Ye(a,r);return h&&Pi(h,r),l}(h,s,r);if(a.components.push(v),n[8]=v,l&&l.forEach(C=>C(v,r)),r.contentQueries){const C=dn();r.contentQueries(1,v,C.directiveStart)}const w=dn();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(bo(w.index),rp(s[1],w,0,w.directiveStart,w.directiveEnd,r),um(r,v)),v}(Xt,this.componentDef,tt,ve,[Tp]),Ac(ke,tt,null)}finally{Co()}return new bw(this.componentType,_t,Df(Mt,tt),tt,Mt)}}class bw extends class hw{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new ww(l),this.componentType=r}get injector(){return new Nn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Cf{}class D0{}const bf=new Map;class T0 extends Cf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new w0(this);const a=On(r);this._bootstrapComponents=f(a.bootstrap),this._r3Injector=zh(r,s,[{provide:Cf,useValue:this},{provide:Ey,useValue:this.componentFactoryResolver}],Se(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=da.THROW_IF_NOT_FOUND,a=Nt.Default){return r===da||r===Cf||r===fp?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class r_ extends D0{constructor(r){super(),this.moduleType=r,null!==On(r)&&function Aw(n){const r=new Set;!function s(a){const l=On(a,!0),h=l.id;null!==h&&(function C0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Se(r)} vs ${Se(r.name)}`)}(h,bf.get(h),a),bf.set(h,a));const v=f(l.imports);for(const w of v)r.has(w)||(r.add(w),s(w))}(n)}(r)}create(r){return new T0(this.moduleType,r)}}function A0(n,r,s){const a=fi()+n,l=F();return l[a]===En?Ba(l,a,s?r.call(s):r()):function zl(n,r){return n[r]}(l,a)}function S0(n,r,s,a){return x0(F(),fi(),n,r,s,a)}function M0(n,r,s,a,l){return function O0(n,r,s,a,l,h,v){const w=r+s;return function du(n,r,s,a){const l=Gs(n,r,s);return Gs(n,r+1,a)||l}(n,w,l,h)?Ba(n,w+2,v?a.call(v,l,h):a(l,h)):bg(n,w+2)}(F(),fi(),n,r,s,a,l)}function bg(n,r){const s=n[r];return s===En?void 0:s}function x0(n,r,s,a,l,h){const v=r+s;return Gs(n,v,l)?Ba(n,v+1,h?a.call(h,l):a(l)):bg(n,v+1)}function k0(n,r){const s=Le();let a;const l=n+20;s.firstCreatePass?(a=function kw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=$r(a.type)),v=on(ql);try{const w=vs(!1),C=h();return vs(w),function Rm(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,F(),l,C),C}finally{on(v)}}function F0(n,r,s){const a=n+20,l=F(),h=Un(l,a);return function Tg(n,r){return n[1].data[r].pure}(l,a)?x0(l,fi(),r,h.transform,s,h):h.transform(s)}function i_(n){return r=>{setTimeout(n,void 0,r)}}const ol=class Bw extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var l,h,v;let w=r,C=s||(()=>null),L=a;if(r&&"object"==typeof r){const te=r;w=null===(l=te.next)||void 0===l?void 0:l.bind(te),C=null===(h=te.error)||void 0===h?void 0:h.bind(te),L=null===(v=te.complete)||void 0===v?void 0:v.bind(te)}this.__isAsync&&(C=i_(C),w&&(w=i_(w)),L&&(L=i_(L)));const G=super.subscribe({next:w,error:C,complete:L});return r instanceof K.w0&&r.add(G),G}};function jw(){return this._results[Ku()]()}class s_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ku(),a=s_.prototype;a[s]||(a[s]=jw)}get changes(){return this._changes||(this._changes=new ol)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=Gi(r);(this._changesDetected=!function Ao(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ag=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gw,n})();const $w=Ag,Hw=class extends $w{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=Va(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(a[19]=h.createEmbeddedView(s)),Ac(s,a,r),new Cg(a)}};function Gw(){return Iy(dn(),F())}function Iy(n,r){return 4&n.type?new Hw(r,n,Df(n,r)):null}let Dy=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ww,n})();function Ww(){return U0(dn(),F())}const zw=Dy,L0=class extends zw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Df(this._hostTNode,this._hostLView)}get injector(){return new Nn(this._hostTNode,this._hostLView)}get parentInjector(){const r=er(this._hostTNode,this._hostLView);if(Ta(r)){const s=Ds(r,this._hostLView),a=wr(r);return new Nn(s[1].data[a+8],s)}return new Nn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=V0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const l=r.createEmbeddedView(s||{});return this.insert(l,a),l}createComponent(r,s,a,l,h){const v=r&&!function Ts(n){return"function"==typeof n}(r);let w;if(v)w=s;else{const te=s||{};w=te.index,a=te.injector,l=te.projectableNodes,h=te.ngModuleRef}const C=v?r:new n_(ln(r)),L=a||this.parentInjector;if(!h&&null==C.ngModule){const ve=(v?L:this.parentInjector).get(Cf,null);ve&&(h=ve)}const G=C.create(L,l,void 0,h);return this.insert(G.hostView,w),G}insert(r,s){const a=r._lView,l=a[1];if(function qn(n){return jr(n[3])}(a)){const G=this.indexOf(r);if(-1!==G)this.detach(G);else{const te=a[3],ve=new L0(te,te[6],te[3]);ve.detach(ve.indexOf(r))}}const h=this._adjustIndex(s),v=this._lContainer;!function xy(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Ma(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const v=r[17];null!==v&&s!==v&&function Oy(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(v,r);const w=r[19];null!==w&&w.insertView(n),r[2]|=128}(l,a,v,h);const w=fd(h,v),C=a[11],L=gh(C,v[7]);return null!==L&&function ld(n,r,s,a,l,h){a[0]=l,a[6]=r,Ec(n,a,s,1,l,h)}(l,v[6],C,a,L,w),r.attachToViewContainerRef(),Ma(o_(v),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=V0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Uf(this._lContainer,s);a&&(zo(o_(this._lContainer),s),Pg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Uf(this._lContainer,s);return a&&null!=zo(o_(this._lContainer),s)?new Cg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function V0(n){return n[8]}function o_(n){return n[8]||(n[8]=[])}function U0(n,r){let s;const a=r[n.index];if(jr(a))s=a;else{let l;if(8&n.type)l=M(a);else{const h=r[11];l=h.createComment("");const v=Ye(n,r);Fu(h,gh(h,v),l,function dd(n,r){return ar(n)?n.nextSibling(r):r.nextSibling}(h,v),!1)}r[n.index]=s=Lh(a,r,l,n),Mc(r,s)}return new L0(s,n,r)}class a_{constructor(r){this.queryList=r,this.matches=null}clone(){return new a_(this.queryList)}setDirty(){this.queryList.setDirty()}}class u_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const v=s.getByIndex(h);l.push(this.queries[v.indexInDeclarationView].clone())}return new u_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==K0(r,s).matches&&this.queries[s].setDirty()}}class B0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class l_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new l_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class c_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new c_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,Zw(s,h)),this.matchTNodeWithReadOption(r,s,$e(s,r,h,!1,!1))}else a===Ag?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,$e(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Dg||l===Dy||l===Ag&&4&s.type)this.addMatch(s.index,-2);else{const h=$e(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Zw(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function Qw(n,r,s,a){return-1===s?function Yw(n,r){return 11&n.type?Df(n,r):4&n.type?Iy(n,r):null}(r,n):-2===s?function Jw(n,r,s){return s===Dg?Df(r,n):s===Ag?Iy(r,n):s===Dy?U0(r,n):void 0}(n,r,a):Dt(n,n[1],s,r)}function j0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,v=s.matches,w=[];for(let C=0;C<v.length;C+=2){const L=v[C];w.push(L<0?null:Qw(r,h[L],v[C+1],s.metadata.read))}l.matches=w}return l.matches}function d_(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const v=j0(n,r,l,s);for(let w=0;w<h.length;w+=2){const C=h[w];if(C>0)a.push(v[w/2]);else{const L=h[w+1],G=r[-C];for(let te=10;te<G.length;te++){const ve=G[te];ve[17]===ve[3]&&d_(ve[1],ve,L,a)}if(null!==G[9]){const te=G[9];for(let ve=0;ve<te.length;ve++){const ke=te[ve];d_(ke[1],ke,L,a)}}}}}return a}function $0(n){const r=F(),s=Le(),a=ra();vu(a+1);const l=K0(s,a);if(n.dirty&&vn(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?d_(s,r,a,[]):j0(s,r,l,a);n.reset(h,mw),n.notifyOnChanges()}return!0}return!1}function H0(n,r,s,a){const l=Le();if(l.firstCreatePass){const h=dn();(function z0(n,r,s){null===n.queries&&(n.queries=new l_),n.queries.track(new c_(r,s))})(l,new B0(r,s,a),h.index),function tI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function W0(n,r,s){const a=new s_(4==(4&s));rm(n,r,a,a.destroy),null===r[19]&&(r[19]=new u_),r[19].queries.push(new a_(a))}(l,F(),s)}function G0(){return function eI(n,r){return n[19].queries[r].queryList}(F(),ra())}function K0(n,r){return n.queries.getByIndex(r)}function q0(n,r){return Iy(n,r)}function Ty(...n){}const dE=new Ft("Application Initializer");let y_=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Ty,this.reject=Ty,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Zp(h))s.push(h);else if(jm(h)){const v=new Promise((w,C)=>{h.subscribe({complete:w,error:C})});s.push(v)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Kt(dE,8))},n.\u0275prov=rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hE=new Ft("AppId",{providedIn:"root",factory:function fE(){return`${v_()}${v_()}${v_()}`}});function v_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pE=new Ft("Platform Initializer"),gE=new Ft("Platform ID"),mE=new Ft("appBootstrapListener");let yE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=rt({token:n,factory:n.\u0275fac}),n})();const __=new Ft("LocaleId",{providedIn:"root",factory:()=>Wn(__,Nt.Optional|Nt.SkipSelf)||function vI(){return"undefined"!=typeof $localize&&$localize.locale||zc}()}),_I=new Ft("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class EI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let wI=(()=>{class n{compileModuleSync(s){return new r_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=f(On(s).declarations).reduce((v,w)=>{const C=ln(w);return C&&v.push(new n_(C)),v},[]);return new EI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DI=(()=>Promise.resolve(0))();function E_(n){"undefined"==typeof Zone?DI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class gu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ol(!1),this.onMicrotaskEmpty=new ol(!1),this.onStable=new ol(!1),this.onError=new ol(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function CI(){let n=Tn.requestAnimationFrame,r=Tn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function AI(n){const r=()=>{!function TI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Tn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,I_(n),n.isCheckStableRunning=!0,w_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),I_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,v,w)=>{try{return vE(n),s.invokeTask(l,h,v,w)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),_E(n)}},onInvoke:(s,a,l,h,v,w,C)=>{try{return vE(n),s.invoke(l,h,v,w,C)}finally{n.shouldCoalesceRunChangeDetection&&r(),_E(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,I_(n),w_(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+l,r,bI,Ty,Ty);try{return h.runTask(v,s,a)}finally{h.cancelTask(v)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const bI={};function w_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function I_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function vE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _E(n){n._nesting--,w_(n)}class SI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ol,this.onMicrotaskEmpty=new ol,this.onStable=new ol,this.onError=new ol}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}let EE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gu.assertNotInAngularZone(),E_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())E_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(Kt(gu))},n.\u0275prov=rt({token:n,factory:n.\u0275fac}),n})(),wE=(()=>{class n{constructor(){this._applications=new Map,D_.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return D_.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=rt({token:n,factory:n.\u0275fac}),n})();class MI{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function xI(n){D_=n}let mu,D_=new MI;const IE=new Ft("AllowMultipleToken");class NI{constructor(r,s){this.name=r,this.token=s}}function DE(n,r,s=[]){const a=`Platform: ${r}`,l=new Ft(a);return(h=[])=>{let v=CE();if(!v||v.injector.get(IE,!1))if(n)n(s.concat(h).concat({provide:l,useValue:!0}));else{const w=s.concat(h).concat({provide:l,useValue:!0},{provide:pp,useValue:"platform"});!function PI(n){if(mu&&!mu.destroyed&&!mu.injector.get(IE,!1))throw new He(400,"");mu=n.get(bE);const r=n.get(pE,null);r&&r.forEach(s=>s())}(da.create({providers:w,name:a}))}return function kI(n){const r=CE();if(!r)throw new He(401,"");return r}()}}function CE(){return mu&&!mu.destroyed?mu:null}let bE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const w=function FI(n,r){let s;return s="noop"===n?new SI:("zone.js"===n?void 0:n)||new gu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),C=[{provide:gu,useValue:w}];return w.run(()=>{const L=da.create({providers:C,parent:this.injector,name:s.moduleType.name}),G=s.create(L),te=G.injector.get(Lr,null);if(!te)throw new He(402,"");return w.runOutsideAngular(()=>{const ve=w.onError.subscribe({next:ke=>{te.handleError(ke)}});G.onDestroy(()=>{b_(this._modules,G),ve.unsubscribe()})}),function LI(n,r,s){try{const a=s();return Zp(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(te,w,()=>{const ve=G.injector.get(y_);return ve.runInitializers(),ve.donePromise.then(()=>(function Gv(n){dt(n,"Expected localeId to be defined"),"string"==typeof n&&(fy=n.toLowerCase().replace(/_/g,"-"))}(G.injector.get(__,zc)||zc),this._moduleDoBootstrap(G),G))})})}bootstrapModule(s,a=[]){const l=TE({},a);return function OI(n,r,s){const a=new r_(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(C_);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new He(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new He(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Kt(da))},n.\u0275prov=rt({token:n,factory:n.\u0275fac}),n})();function TE(n,r){return Array.isArray(r)?r.reduce(TE,n):Object.assign(Object.assign({},n),r)}let C_=(()=>{class n{constructor(s,a,l,h,v){this._zone=s,this._injector=a,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new Y.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),C=new Y.y(L=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{gu.assertNotInAngularZone(),E_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const te=this._zone.onUnstable.subscribe(()=>{gu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{G.unsubscribe(),te.unsubscribe()}});this.isStable=(0,ye.T)(w,C.pipe((0,fe.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new He(405,"");let l;l=s instanceof m0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(l.componentType);const h=function RI(n){return n.isBoundToModule}(l)?void 0:this._injector.get(Cf),w=l.create(da.NULL,[],a||l.selector,h),C=w.location.nativeElement,L=w.injector.get(EE,null),G=L&&w.injector.get(wE);return L&&G&&G.registerApplication(C,L),w.onDestroy(()=>{this.detachView(w.hostView),b_(this.components,w),G&&G.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new He(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;b_(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(mE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Kt(gu),Kt(da),Kt(Lr),Kt(Ey),Kt(y_))},n.\u0275prov=rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function b_(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let SE=!0,ME=!1;function UI(){return ME=!0,SE}function BI(){if(ME)throw new Error("Cannot enable prod mode after platform setup.");SE=!1}let jI=(()=>{class n{}return n.__NG_ELEMENT_ID__=$I,n})();function $I(n){return function HI(n,r,s){if(ni(n)&&!s){const a=cn(n.index,r);return new Cg(a,a)}return 47&n.type?new Cg(r[16],r):null}(dn(),F(),16==(16&n))}class NE{constructor(){}supports(r){return Wl(r)}create(r){return new ZI(r)}}const qI=(n,r)=>r;class ZI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const v=!a||s&&s.currentIndex<kE(a,l,h)?s:a,w=kE(v,l,h),C=v.currentIndex;if(v===a)l--,a=a._nextRemoved;else if(s=s._next,null==v.previousIndex)l++;else{h||(h=[]);const L=w-l,G=C-l;if(L!=G){for(let ve=0;ve<L;ve++){const ke=ve<h.length?h[ve]:h[ve]=0,tt=ke+ve;G<=tt&&tt<L&&(h[ve]=ke+1)}h[v.previousIndex]=G-L}}w!==C&&r(v,w,C)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Wl(r))throw new He(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,v,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let w=0;w<this.length;w++)h=r[w],v=this._trackByFn(w,h),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,h,v,w)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,v,w),a=!0),s=s._next}else l=0,function pv(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Ku()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,w=>{v=this._trackByFn(l,w),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,w,v,l)),Object.is(s.item,w)||this._addIdentityChange(s,w)):(s=this._mismatch(s,w,v,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new YI(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new PE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new PE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class YI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class PE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new QI,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class FE{constructor(){}supports(r){return r instanceof Map||Ad(r)}create(){return new JI}}class JI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Ad(r)))throw new He(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,v=l._next;return h&&(h._next=v),v&&(v._prev=h),l._next=null,l._prev=null,l}const a=new XI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class XI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function LE(){return new x_([new NE])}let x_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||LE()),deps:[[n,new go,new ro]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new He(901,"")}}return n.\u0275prov=rt({token:n,providedIn:"root",factory:LE}),n})();function VE(){return new O_([new FE])}let O_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||VE()),deps:[[n,new go,new ro]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(a)return a;throw new He(901,"")}}return n.\u0275prov=rt({token:n,providedIn:"root",factory:VE}),n})();const nD=DE(null,"core",[{provide:gE,useValue:"unknown"},{provide:bE,deps:[da]},{provide:wE,deps:[]},{provide:yE,deps:[]}]);let rD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Kt(C_))},n.\u0275mod=xe({type:n}),n.\u0275inj=Yt({}),n})()},2382:(wt,Ue,P)=>{P.d(Ue,{Fj:()=>U,NI:()=>cr,oH:()=>Ei,cw:()=>pr,sg:()=>xi,u5:()=>tn,Cf:()=>Oe,JU:()=>He,JJ:()=>yr,JL:()=>Kr,F:()=>Ar,On:()=>Qt,c5:()=>dr,UX:()=>Bi,Q7:()=>q,kI:()=>pe,_Y:()=>Dn});var p=P(5e3),K=P(9808),Y=P(9751),ye=P(4742),fe=P(8421),De=P(3269),Ae=P(5403),Se=P(3268),Me=P(1810),se=P(8996),Ie=P(4004);let nt=(()=>{class R{constructor(A,F){this._renderer=A,this._elementRef=F,this.onChange=Le=>{},this.onTouched=()=>{}}setProperty(A,F){this._renderer.setProperty(this._elementRef.nativeElement,A,F)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}}return R.\u0275fac=function(A){return new(A||R)(p.Y36(p.Qsj),p.Y36(p.SBq))},R.\u0275dir=p.lG2({type:R}),R})(),Ze=(()=>{class R extends nt{}return R.\u0275fac=function(){let S;return function(F){return(S||(S=p.n5z(R)))(F||R)}}(),R.\u0275dir=p.lG2({type:R,features:[p.qOj]}),R})();const He=new p.OlP("NgValueAccessor"),Re={provide:He,useExisting:(0,p.Gpc)(()=>U),multi:!0},j=new p.OlP("CompositionEventMode");let U=(()=>{class R extends nt{constructor(A,F,Le){super(A,F),this._compositionMode=Le,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mt(){const R=(0,K.q)()?(0,K.q)().getUserAgent():"";return/android (\d+)/.test(R.toLowerCase())}())}writeValue(A){this.setProperty("value",null==A?"":A)}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}}return R.\u0275fac=function(A){return new(A||R)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(j,8))},R.\u0275dir=p.lG2({type:R,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(A,F){1&A&&p.NdJ("input",function(Vt){return F._handleInput(Vt.target.value)})("blur",function(){return F.onTouched()})("compositionstart",function(){return F._compositionStart()})("compositionend",function(Vt){return F._compositionEnd(Vt.target.value)})},features:[p._Bn([Re]),p.qOj]}),R})();function J(R){return null==R||0===R.length}function he(R){return null!=R&&"number"==typeof R.length}const Oe=new p.OlP("NgValidators"),Pe=new p.OlP("NgAsyncValidators"),Te=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class pe{static min(S){return function Z(R){return S=>{if(J(S.value)||J(R))return null;const A=parseFloat(S.value);return!isNaN(A)&&A<R?{min:{min:R,actual:S.value}}:null}}(S)}static max(S){return function Ee(R){return S=>{if(J(S.value)||J(R))return null;const A=parseFloat(S.value);return!isNaN(A)&&A>R?{max:{max:R,actual:S.value}}:null}}(S)}static required(S){return ue(S)}static requiredTrue(S){return function We(R){return!0===R.value?null:{required:!0}}(S)}static email(S){return function Ne(R){return J(R.value)||Te.test(R.value)?null:{email:!0}}(S)}static minLength(S){return function Ot(R){return S=>J(S.value)||!he(S.value)?null:S.value.length<R?{minlength:{requiredLength:R,actualLength:S.value.length}}:null}(S)}static maxLength(S){return function gt(R){return S=>he(S.value)&&S.value.length>R?{maxlength:{requiredLength:R,actualLength:S.value.length}}:null}(S)}static pattern(S){return Bt(S)}static nullValidator(S){return null}static compose(S){return Yt(S)}static composeAsync(S){return wn(S)}}function ue(R){return J(R.value)?{required:!0}:null}function Bt(R){if(!R)return dt;let S,A;return"string"==typeof R?(A="","^"!==R.charAt(0)&&(A+="^"),A+=R,"$"!==R.charAt(R.length-1)&&(A+="$"),S=new RegExp(A)):(A=R.toString(),S=R),F=>{if(J(F.value))return null;const Le=F.value;return S.test(Le)?null:{pattern:{requiredPattern:A,actualValue:Le}}}}function dt(R){return null}function it(R){return null!=R}function $t(R){const S=(0,p.QGY)(R)?(0,se.D)(R):R;return(0,p.CqO)(S),S}function Ct(R){let S={};return R.forEach(A=>{S=null!=A?Object.assign(Object.assign({},S),A):S}),0===Object.keys(S).length?null:S}function At(R,S){return S.map(A=>A(R))}function nn(R){return R.map(S=>function rt(R){return!R.validate}(S)?S:A=>S.validate(A))}function Yt(R){if(!R)return null;const S=R.filter(it);return 0==S.length?null:function(A){return Ct(At(A,S))}}function sn(R){return null!=R?Yt(nn(R)):null}function wn(R){if(!R)return null;const S=R.filter(it);return 0==S.length?null:function(A){return function le(...R){const S=(0,De.jO)(R),{args:A,keys:F}=(0,ye.D)(R),Le=new Y.y(Vt=>{const{length:dn}=A;if(!dn)return void Vt.complete();const hi=new Array(dn);let Yr=dn,Gr=dn;for(let Qs=0;Qs<dn;Qs++){let ms=!1;(0,fe.Xf)(A[Qs]).subscribe((0,Ae.x)(Vt,Fo=>{ms||(ms=!0,Gr--),hi[Qs]=Fo},()=>Yr--,void 0,()=>{(!Yr||!ms)&&(Gr||Vt.next(F?(0,Me.n)(F,hi):hi),Vt.complete())}))}});return S?Le.pipe((0,Se.Z)(S)):Le}(At(A,S).map($t)).pipe((0,Ie.U)(Ct))}}function _n(R){return null!=R?wn(nn(R)):null}function Jn(R,S){return null===R?[S]:Array.isArray(R)?[...R,S]:[R,S]}function Ln(R){return R._rawValidators}function nr(R){return R._rawAsyncValidators}function $n(R){return R?Array.isArray(R)?R:[R]:[]}function gr(R,S){return Array.isArray(R)?R.includes(S):R===S}function jn(R,S){const A=$n(S);return $n(R).forEach(Le=>{gr(A,Le)||A.push(Le)}),A}function Nt(R,S){return $n(S).filter(A=>!gr(R,A))}class Jt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(S){this._rawValidators=S||[],this._composedValidatorFn=sn(this._rawValidators)}_setAsyncValidators(S){this._rawAsyncValidators=S||[],this._composedAsyncValidatorFn=_n(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(S){this._onDestroyCallbacks.push(S)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(S=>S()),this._onDestroyCallbacks=[]}reset(S){this.control&&this.control.reset(S)}hasError(S,A){return!!this.control&&this.control.hasError(S,A)}getError(S,A){return this.control?this.control.getError(S,A):null}}class In extends Jt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class on extends Jt{get formDirective(){return null}get path(){return null}}class mr{constructor(S){this._cd=S}is(S){var A,F,Le;return"submitted"===S?!!(null===(A=this._cd)||void 0===A?void 0:A.submitted):!!(null===(Le=null===(F=this._cd)||void 0===F?void 0:F.control)||void 0===Le?void 0:Le[S])}}let yr=(()=>{class R extends mr{constructor(A){super(A)}}return R.\u0275fac=function(A){return new(A||R)(p.Y36(In,2))},R.\u0275dir=p.lG2({type:R,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(A,F){2&A&&p.ekj("ng-untouched",F.is("untouched"))("ng-touched",F.is("touched"))("ng-pristine",F.is("pristine"))("ng-dirty",F.is("dirty"))("ng-valid",F.is("valid"))("ng-invalid",F.is("invalid"))("ng-pending",F.is("pending"))},features:[p.qOj]}),R})(),Kr=(()=>{class R extends mr{constructor(A){super(A)}}return R.\u0275fac=function(A){return new(A||R)(p.Y36(on,10))},R.\u0275dir=p.lG2({type:R,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(A,F){2&A&&p.ekj("ng-untouched",F.is("untouched"))("ng-touched",F.is("touched"))("ng-pristine",F.is("pristine"))("ng-dirty",F.is("dirty"))("ng-valid",F.is("valid"))("ng-invalid",F.is("invalid"))("ng-pending",F.is("pending"))("ng-submitted",F.is("submitted"))},features:[p.qOj]}),R})();function un(R,S){_e(R,S),S.valueAccessor.writeValue(R.value),function xe(R,S){S.valueAccessor.registerOnChange(A=>{R._pendingValue=A,R._pendingChange=!0,R._pendingDirty=!0,"change"===R.updateOn&&jt(R,S)})}(R,S),function gn(R,S){const A=(F,Le)=>{S.valueAccessor.writeValue(F),Le&&S.viewToModelUpdate(F)};R.registerOnChange(A),S._registerOnDestroy(()=>{R._unregisterOnChange(A)})}(R,S),function ft(R,S){S.valueAccessor.registerOnTouched(()=>{R._pendingTouched=!0,"blur"===R.updateOn&&R._pendingChange&&jt(R,S),"submit"!==R.updateOn&&R.markAsTouched()})}(R,S),function ne(R,S){if(S.valueAccessor.setDisabledState){const A=F=>{S.valueAccessor.setDisabledState(F)};R.registerOnDisabledChange(A),S._registerOnDestroy(()=>{R._unregisterOnDisabledChange(A)})}}(R,S)}function Lt(R,S,A=!0){const F=()=>{};S.valueAccessor&&(S.valueAccessor.registerOnChange(F),S.valueAccessor.registerOnTouched(F)),ze(R,S),R&&(S._invokeOnDestroyCallbacks(),R._registerOnCollectionChange(()=>{}))}function ce(R,S){R.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(S)})}function _e(R,S){const A=Ln(R);null!==S.validator?R.setValidators(Jn(A,S.validator)):"function"==typeof A&&R.setValidators([A]);const F=nr(R);null!==S.asyncValidator?R.setAsyncValidators(Jn(F,S.asyncValidator)):"function"==typeof F&&R.setAsyncValidators([F]);const Le=()=>R.updateValueAndValidity();ce(S._rawValidators,Le),ce(S._rawAsyncValidators,Le)}function ze(R,S){let A=!1;if(null!==R){if(null!==S.validator){const Le=Ln(R);if(Array.isArray(Le)&&Le.length>0){const Vt=Le.filter(dn=>dn!==S.validator);Vt.length!==Le.length&&(A=!0,R.setValidators(Vt))}}if(null!==S.asyncValidator){const Le=nr(R);if(Array.isArray(Le)&&Le.length>0){const Vt=Le.filter(dn=>dn!==S.asyncValidator);Vt.length!==Le.length&&(A=!0,R.setAsyncValidators(Vt))}}}const F=()=>{};return ce(S._rawValidators,F),ce(S._rawAsyncValidators,F),A}function jt(R,S){R._pendingDirty&&R.markAsDirty(),R.setValue(R._pendingValue,{emitModelToViewChange:!1}),S.viewToModelUpdate(R._pendingValue),R._pendingChange=!1}function qt(R,S){_e(R,S)}function ei(R,S){if(!R.hasOwnProperty("model"))return!1;const A=R.model;return!!A.isFirstChange()||!Object.is(S,A.currentValue)}function xr(R,S){R._syncPendingControls(),S.forEach(A=>{const F=A.control;"submit"===F.updateOn&&F._pendingChange&&(A.viewToModelUpdate(F._pendingValue),F._pendingChange=!1)})}function Tr(R,S){if(!S)return null;let A,F,Le;return Array.isArray(S),S.forEach(Vt=>{Vt.constructor===U?A=Vt:function Li(R){return Object.getPrototypeOf(R.constructor)===Ze}(Vt)?F=Vt:Le=Vt}),Le||F||A||null}function ir(R,S){const A=R.indexOf(S);A>-1&&R.splice(A,1)}const ot="VALID",Rt="INVALID",en="PENDING",Kn="DISABLED";function sr(R){return(di(R)?R.validators:R)||null}function ti(R){return Array.isArray(R)?sn(R):R||null}function Sn(R,S){return(di(S)?S.asyncValidators:R)||null}function or(R){return Array.isArray(R)?_n(R):R||null}function di(R){return null!=R&&!Array.isArray(R)&&"object"==typeof R}const an=R=>R instanceof cr,qr=R=>R instanceof pr;function vi(R){return an(R)?R.value:R.getRawValue()}function Br(R,S){const A=qr(R),F=R.controls;if(!(A?Object.keys(F):F).length)throw new p.vHH(1e3,"");if(!F[S])throw new p.vHH(1001,"")}function fr(R,S){qr(R),R._forEachChild((F,Le)=>{if(void 0===S[Le])throw new p.vHH(1002,"")})}class Qn{constructor(S,A){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=S,this._rawAsyncValidators=A,this._composedValidatorFn=ti(this._rawValidators),this._composedAsyncValidatorFn=or(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(S){this._rawValidators=this._composedValidatorFn=S}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(S){this._rawAsyncValidators=this._composedAsyncValidatorFn=S}get parent(){return this._parent}get valid(){return this.status===ot}get invalid(){return this.status===Rt}get pending(){return this.status==en}get disabled(){return this.status===Kn}get enabled(){return this.status!==Kn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(S){this._rawValidators=S,this._composedValidatorFn=ti(S)}setAsyncValidators(S){this._rawAsyncValidators=S,this._composedAsyncValidatorFn=or(S)}addValidators(S){this.setValidators(jn(S,this._rawValidators))}addAsyncValidators(S){this.setAsyncValidators(jn(S,this._rawAsyncValidators))}removeValidators(S){this.setValidators(Nt(S,this._rawValidators))}removeAsyncValidators(S){this.setAsyncValidators(Nt(S,this._rawAsyncValidators))}hasValidator(S){return gr(this._rawValidators,S)}hasAsyncValidator(S){return gr(this._rawAsyncValidators,S)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(S={}){this.touched=!0,this._parent&&!S.onlySelf&&this._parent.markAsTouched(S)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(S=>S.markAllAsTouched())}markAsUntouched(S={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!S.onlySelf&&this._parent._updateTouched(S)}markAsDirty(S={}){this.pristine=!1,this._parent&&!S.onlySelf&&this._parent.markAsDirty(S)}markAsPristine(S={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!S.onlySelf&&this._parent._updatePristine(S)}markAsPending(S={}){this.status=en,!1!==S.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!S.onlySelf&&this._parent.markAsPending(S)}disable(S={}){const A=this._parentMarkedDirty(S.onlySelf);this.status=Kn,this.errors=null,this._forEachChild(F=>{F.disable(Object.assign(Object.assign({},S),{onlySelf:!0}))}),this._updateValue(),!1!==S.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},S),{skipPristineCheck:A})),this._onDisabledChange.forEach(F=>F(!0))}enable(S={}){const A=this._parentMarkedDirty(S.onlySelf);this.status=ot,this._forEachChild(F=>{F.enable(Object.assign(Object.assign({},S),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:S.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},S),{skipPristineCheck:A})),this._onDisabledChange.forEach(F=>F(!1))}_updateAncestors(S){this._parent&&!S.onlySelf&&(this._parent.updateValueAndValidity(S),S.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(S){this._parent=S}updateValueAndValidity(S={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ot||this.status===en)&&this._runAsyncValidator(S.emitEvent)),!1!==S.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!S.onlySelf&&this._parent.updateValueAndValidity(S)}_updateTreeValidity(S={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(S)),this.updateValueAndValidity({onlySelf:!0,emitEvent:S.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kn:ot}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(S){if(this.asyncValidator){this.status=en,this._hasOwnPendingAsyncValidator=!0;const A=$t(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(F=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(F,{emitEvent:S})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(S,A={}){this.errors=S,this._updateControlsErrors(!1!==A.emitEvent)}get(S){return function ci(R,S,A){if(null==S||(Array.isArray(S)||(S=S.split(A)),Array.isArray(S)&&0===S.length))return null;let F=R;return S.forEach(Le=>{F=qr(F)?F.controls.hasOwnProperty(Le)?F.controls[Le]:null:(R=>R instanceof Pn)(F)&&F.at(Le)||null}),F}(this,S,".")}getError(S,A){const F=A?this.get(A):this;return F&&F.errors?F.errors[S]:null}hasError(S,A){return!!this.getError(S,A)}get root(){let S=this;for(;S._parent;)S=S._parent;return S}_updateControlsErrors(S){this.status=this._calculateStatus(),S&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(S)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Kn:this.errors?Rt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(en)?en:this._anyControlsHaveStatus(Rt)?Rt:ot}_anyControlsHaveStatus(S){return this._anyControls(A=>A.status===S)}_anyControlsDirty(){return this._anyControls(S=>S.dirty)}_anyControlsTouched(){return this._anyControls(S=>S.touched)}_updatePristine(S={}){this.pristine=!this._anyControlsDirty(),this._parent&&!S.onlySelf&&this._parent._updatePristine(S)}_updateTouched(S={}){this.touched=this._anyControlsTouched(),this._parent&&!S.onlySelf&&this._parent._updateTouched(S)}_isBoxedValue(S){return"object"==typeof S&&null!==S&&2===Object.keys(S).length&&"value"in S&&"disabled"in S}_registerOnCollectionChange(S){this._onCollectionChange=S}_setUpdateStrategy(S){di(S)&&null!=S.updateOn&&(this._updateOn=S.updateOn)}_parentMarkedDirty(S){return!S&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cr extends Qn{constructor(S=null,A,F){super(sr(A),Sn(F,A)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(S),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),di(A)&&A.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(S)?S.value:S)}setValue(S,A={}){this.value=this._pendingValue=S,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(F=>F(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(S,A={}){this.setValue(S,A)}reset(S=this.defaultValue,A={}){this._applyFormState(S),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(S){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(S){this._onChange.push(S)}_unregisterOnChange(S){ir(this._onChange,S)}registerOnDisabledChange(S){this._onDisabledChange.push(S)}_unregisterOnDisabledChange(S){ir(this._onDisabledChange,S)}_forEachChild(S){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(S){this._isBoxedValue(S)?(this.value=this._pendingValue=S.value,S.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=S}}class pr extends Qn{constructor(S,A,F){super(sr(A),Sn(F,A)),this.controls=S,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(S,A){return this.controls[S]?this.controls[S]:(this.controls[S]=A,A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange),A)}addControl(S,A,F={}){this.registerControl(S,A),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}removeControl(S,A={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),delete this.controls[S],this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}setControl(S,A,F={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),delete this.controls[S],A&&this.registerControl(S,A),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}contains(S){return this.controls.hasOwnProperty(S)&&this.controls[S].enabled}setValue(S,A={}){fr(this,S),Object.keys(S).forEach(F=>{Br(this,F),this.controls[F].setValue(S[F],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(S,A={}){null!=S&&(Object.keys(S).forEach(F=>{this.controls[F]&&this.controls[F].patchValue(S[F],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(S={},A={}){this._forEachChild((F,Le)=>{F.reset(S[Le],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this._reduceChildren({},(S,A,F)=>(S[F]=vi(A),S))}_syncPendingControls(){let S=this._reduceChildren(!1,(A,F)=>!!F._syncPendingControls()||A);return S&&this.updateValueAndValidity({onlySelf:!0}),S}_forEachChild(S){Object.keys(this.controls).forEach(A=>{const F=this.controls[A];F&&S(F,A)})}_setUpControls(){this._forEachChild(S=>{S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(S){for(const A of Object.keys(this.controls)){const F=this.controls[A];if(this.contains(A)&&S(F))return!0}return!1}_reduceValue(){return this._reduceChildren({},(S,A,F)=>((A.enabled||this.disabled)&&(S[F]=A.value),S))}_reduceChildren(S,A){let F=S;return this._forEachChild((Le,Vt)=>{F=A(F,Le,Vt)}),F}_allControlsDisabled(){for(const S of Object.keys(this.controls))if(this.controls[S].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Pn extends Qn{constructor(S,A,F){super(sr(A),Sn(F,A)),this.controls=S,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(S){return this.controls[S]}push(S,A={}){this.controls.push(S),this._registerControl(S),this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}insert(S,A,F={}){this.controls.splice(S,0,A),this._registerControl(A),this.updateValueAndValidity({emitEvent:F.emitEvent})}removeAt(S,A={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),this.controls.splice(S,1),this.updateValueAndValidity({emitEvent:A.emitEvent})}setControl(S,A,F={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),this.controls.splice(S,1),A&&(this.controls.splice(S,0,A),this._registerControl(A)),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(S,A={}){fr(this,S),S.forEach((F,Le)=>{Br(this,Le),this.at(Le).setValue(F,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(S,A={}){null!=S&&(S.forEach((F,Le)=>{this.at(Le)&&this.at(Le).patchValue(F,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(S=[],A={}){this._forEachChild((F,Le)=>{F.reset(S[Le],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this.controls.map(S=>vi(S))}clear(S={}){this.controls.length<1||(this._forEachChild(A=>A._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:S.emitEvent}))}_syncPendingControls(){let S=this.controls.reduce((A,F)=>!!F._syncPendingControls()||A,!1);return S&&this.updateValueAndValidity({onlySelf:!0}),S}_forEachChild(S){this.controls.forEach((A,F)=>{S(A,F)})}_updateValue(){this.value=this.controls.filter(S=>S.enabled||this.disabled).map(S=>S.value)}_anyControls(S){return this.controls.some(A=>A.enabled&&S(A))}_setUpControls(){this._forEachChild(S=>this._registerControl(S))}_allControlsDisabled(){for(const S of this.controls)if(S.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(S){S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange)}}const zi={provide:on,useExisting:(0,p.Gpc)(()=>Ar)},Dr=(()=>Promise.resolve(null))();let Ar=(()=>{class R extends on{constructor(A,F){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new pr({},sn(A),_n(F))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(A){Dr.then(()=>{const F=this._findContainer(A.path);A.control=F.registerControl(A.name,A.control),un(A.control,A),A.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(A)})}getControl(A){return this.form.get(A.path)}removeControl(A){Dr.then(()=>{const F=this._findContainer(A.path);F&&F.removeControl(A.name),this._directives.delete(A)})}addFormGroup(A){Dr.then(()=>{const F=this._findContainer(A.path),Le=new pr({});qt(Le,A),F.registerControl(A.name,Le),Le.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(A){Dr.then(()=>{const F=this._findContainer(A.path);F&&F.removeControl(A.name)})}getFormGroup(A){return this.form.get(A.path)}updateModel(A,F){Dr.then(()=>{this.form.get(A.path).setValue(F)})}setValue(A){this.control.setValue(A)}onSubmit(A){return this.submitted=!0,xr(this.form,this._directives),this.ngSubmit.emit(A),!1}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(A){return A.pop(),A.length?this.form.get(A):this.form}}return R.\u0275fac=function(A){return new(A||R)(p.Y36(Oe,10),p.Y36(Pe,10))},R.\u0275dir=p.lG2({type:R,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(A,F){1&A&&p.NdJ("submit",function(Vt){return F.onSubmit(Vt)})("reset",function(){return F.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([zi]),p.qOj]}),R})();const Ve={provide:In,useExisting:(0,p.Gpc)(()=>Qt)},Ke=(()=>Promise.resolve(null))();let Qt=(()=>{class R extends In{constructor(A,F,Le,Vt,dn){super(),this._changeDetectorRef=dn,this.control=new cr,this._registered=!1,this.update=new p.vpe,this._parent=A,this._setValidators(F),this._setAsyncValidators(Le),this.valueAccessor=Tr(0,Vt)}ngOnChanges(A){if(this._checkForErrors(),!this._registered||"name"in A){if(this._registered&&(this._checkName(),this.formDirective)){const F=A.name.previousValue;this.formDirective.removeControl({name:F,path:this._getPath(F)})}this._setUpControl()}"isDisabled"in A&&this._updateDisabled(A),ei(A,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){un(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(A){Ke.then(()=>{var F;this.control.setValue(A,{emitViewToModelChange:!1}),null===(F=this._changeDetectorRef)||void 0===F||F.markForCheck()})}_updateDisabled(A){const F=A.isDisabled.currentValue,Le=""===F||F&&"false"!==F;Ke.then(()=>{var Vt;Le&&!this.control.disabled?this.control.disable():!Le&&this.control.disabled&&this.control.enable(),null===(Vt=this._changeDetectorRef)||void 0===Vt||Vt.markForCheck()})}_getPath(A){return this._parent?function Wt(R,S){return[...S.path,R]}(A,this._parent):[A]}}return R.\u0275fac=function(A){return new(A||R)(p.Y36(on,9),p.Y36(Oe,10),p.Y36(Pe,10),p.Y36(He,10),p.Y36(p.sBO,8))},R.\u0275dir=p.lG2({type:R,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Ve]),p.qOj,p.TTD]}),R})(),Dn=(()=>{class R{}return R.\u0275fac=function(A){return new(A||R)},R.\u0275dir=p.lG2({type:R,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),R})(),lt=(()=>{class R{}return R.\u0275fac=function(A){return new(A||R)},R.\u0275mod=p.oAB({type:R}),R.\u0275inj=p.cJS({}),R})();const _i=new p.OlP("NgModelWithFormControlWarning"),Ki={provide:In,useExisting:(0,p.Gpc)(()=>Ei)};let Ei=(()=>{class R extends In{constructor(A,F,Le,Vt){super(),this._ngModelWarningConfig=Vt,this.update=new p.vpe,this._ngModelWarningSent=!1,this._setValidators(A),this._setAsyncValidators(F),this.valueAccessor=Tr(0,Le)}set isDisabled(A){}ngOnChanges(A){if(this._isControlChanged(A)){const F=A.form.previousValue;F&&Lt(F,this,!1),un(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}ei(A,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Lt(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_isControlChanged(A){return A.hasOwnProperty("form")}}return R._ngModelWarningSentOnce=!1,R.\u0275fac=function(A){return new(A||R)(p.Y36(Oe,10),p.Y36(Pe,10),p.Y36(He,10),p.Y36(_i,8))},R.\u0275dir=p.lG2({type:R,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[p._Bn([Ki]),p.qOj,p.TTD]}),R})();const qi={provide:on,useExisting:(0,p.Gpc)(()=>xi)};let xi=(()=>{class R extends on{constructor(A,F){super(),this.validators=A,this.asyncValidators=F,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(A),this._setAsyncValidators(F)}ngOnChanges(A){this._checkFormPresent(),A.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ze(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(A){const F=this.form.get(A.path);return un(F,A),F.updateValueAndValidity({emitEvent:!1}),this.directives.push(A),F}getControl(A){return this.form.get(A.path)}removeControl(A){Lt(A.control||null,A,!1),ir(this.directives,A)}addFormGroup(A){this._setUpFormContainer(A)}removeFormGroup(A){this._cleanUpFormContainer(A)}getFormGroup(A){return this.form.get(A.path)}addFormArray(A){this._setUpFormContainer(A)}removeFormArray(A){this._cleanUpFormContainer(A)}getFormArray(A){return this.form.get(A.path)}updateModel(A,F){this.form.get(A.path).setValue(F)}onSubmit(A){return this.submitted=!0,xr(this.form,this.directives),this.ngSubmit.emit(A),!1}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_updateDomValue(){this.directives.forEach(A=>{const F=A.control,Le=this.form.get(A.path);F!==Le&&(Lt(F||null,A),an(Le)&&(un(Le,A),A.control=Le))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(A){const F=this.form.get(A.path);qt(F,A),F.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(A){if(this.form){const F=this.form.get(A.path);F&&function ln(R,S){return ze(R,S)}(F,A)&&F.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_e(this.form,this),this._oldForm&&ze(this._oldForm,this)}_checkFormPresent(){}}return R.\u0275fac=function(A){return new(A||R)(p.Y36(Oe,10),p.Y36(Pe,10))},R.\u0275dir=p.lG2({type:R,selectors:[["","formGroup",""]],hostBindings:function(A,F){1&A&&p.NdJ("submit",function(Vt){return F.onSubmit(Vt)})("reset",function(){return F.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([qi]),p.qOj,p.TTD]}),R})(),Nr=(()=>{class R{constructor(){this._validator=dt}ngOnChanges(A){if(this.inputName in A){const F=this.normalizeInput(A[this.inputName].currentValue);this._enabled=this.enabled(F),this._validator=this._enabled?this.createValidator(F):dt,this._onChange&&this._onChange()}}validate(A){return this._validator(A)}registerOnValidatorChange(A){this._onChange=A}enabled(A){return null!=A}}return R.\u0275fac=function(A){return new(A||R)},R.\u0275dir=p.lG2({type:R,features:[p.TTD]}),R})();const H={provide:Oe,useExisting:(0,p.Gpc)(()=>q),multi:!0};let q=(()=>{class R extends Nr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=A=>function gs(R){return null!=R&&!1!==R&&"false"!=`${R}`}(A),this.createValidator=A=>ue}enabled(A){return A}}return R.\u0275fac=function(){let S;return function(F){return(S||(S=p.n5z(R)))(F||R)}}(),R.\u0275dir=p.lG2({type:R,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(A,F){2&A&&p.uIk("required",F._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([H]),p.qOj]}),R})();const vn={provide:Oe,useExisting:(0,p.Gpc)(()=>dr),multi:!0};let dr=(()=>{class R extends Nr{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=A=>A,this.createValidator=A=>Bt(A)}}return R.\u0275fac=function(){let S;return function(F){return(S||(S=p.n5z(R)))(F||R)}}(),R.\u0275dir=p.lG2({type:R,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(A,F){2&A&&p.uIk("pattern",F._enabled?F.pattern:null)},inputs:{pattern:"pattern"},features:[p._Bn([vn]),p.qOj]}),R})(),ri=(()=>{class R{}return R.\u0275fac=function(A){return new(A||R)},R.\u0275mod=p.oAB({type:R}),R.\u0275inj=p.cJS({imports:[[lt]]}),R})(),tn=(()=>{class R{}return R.\u0275fac=function(A){return new(A||R)},R.\u0275mod=p.oAB({type:R}),R.\u0275inj=p.cJS({imports:[ri]}),R})(),Bi=(()=>{class R{static withConfig(A){return{ngModule:R,providers:[{provide:_i,useValue:A.warnOnNgModelWithFormControl}]}}}return R.\u0275fac=function(A){return new(A||R)},R.\u0275mod=p.oAB({type:R}),R.\u0275inj=p.cJS({imports:[ri]}),R})()},441:(wt,Ue,P)=>{P.d(Ue,{gz:()=>Dr,gk:()=>nr,m2:()=>Ln,GH:()=>mr,xV:()=>on,F0:()=>pi,Od:()=>ks,yS:()=>To,Bz:()=>wr,lC:()=>gs});var p=P(5e3),K=P(9751),Y=P(4742),ye=P(8996),fe=P(4671),De=P(3268),Ae=P(3269),Se=P(1810),Me=P(5403),le=P(9672);function nt(I,E,y){I?(0,le.f)(y,I,E):E()}var Ze=P(576);function He(I,E){const y=(0,Ze.m)(I)?I:()=>I,b=N=>N.error(y());return new K.y(E?N=>E.schedule(b,0,N):b)}var pt=P(8421);function Be(I){return new K.y(E=>{(0,pt.Xf)(I()).subscribe(E)})}var Re=P(727),mt=P(4482);function j(){return(0,mt.e)((I,E)=>{let y=null;I._refCount++;const b=(0,Me.x)(E,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(y=null);const N=I._connection,B=y;y=null,N&&(!B||N===B)&&N.unsubscribe(),E.unsubscribe()});I.subscribe(b),b.closed||(y=I.connect())})}class U extends K.y{constructor(E,y){super(),this.source=E,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,mt.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,null==E||E.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new Re.w0;const y=this.getSubject();E.add(this.source.subscribe((0,Me.x)(y,void 0,()=>{this._teardown(),y.complete()},b=>{this._teardown(),y.error(b)},()=>this._teardown()))),E.closed&&(this._connection=null,E=Re.w0.EMPTY)}return E}refCount(){return j()(this)}}var J=P(9646),he=P(1135),Oe=P(6805),Pe=P(7272),Te=P(515),pe=P(7579);function Z(I){return(0,mt.e)((E,y)=>{let B,b=null,N=!1;b=E.subscribe((0,Me.x)(y,void 0,void 0,$=>{B=(0,pt.Xf)(I($,Z(I)(E))),b?(b.unsubscribe(),b=null,B.subscribe(y)):N=!0})),N&&(b.unsubscribe(),b=null,B.subscribe(y))})}var Ee=P(5577);function ue(I,E){return(0,Ze.m)(E)?(0,Ee.z)(I,E,1):(0,Ee.z)(I,1)}var We=P(9300);function Ne(I){return I<=0?()=>Te.E:(0,mt.e)((E,y)=>{let b=[];E.subscribe((0,Me.x)(y,N=>{b.push(N),I<b.length&&b.shift()},()=>{for(const N of b)y.next(N);y.complete()},void 0,()=>{b=null}))})}var Ot=P(8068),gt=P(6590),it=P(4004),$t=P(3900),Ct=P(5698),At=P(8675),rt=P(5026),nn=P(590),Yt=P(8505),sn=P(8189),wn=P(9808);class _n{constructor(E,y){this.id=E,this.url=y}}class Jn extends _n{constructor(E,y,b="imperative",N=null){super(E,y),this.navigationTrigger=b,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ln extends _n{constructor(E,y,b){super(E,y),this.urlAfterRedirects=b}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nr extends _n{constructor(E,y,b){super(E,y),this.reason=b}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $n extends _n{constructor(E,y,b){super(E,y),this.error=b}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gr extends _n{constructor(E,y,b,N){super(E,y),this.urlAfterRedirects=b,this.state=N}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jn extends _n{constructor(E,y,b,N){super(E,y),this.urlAfterRedirects=b,this.state=N}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nt extends _n{constructor(E,y,b,N,B){super(E,y),this.urlAfterRedirects=b,this.state=N,this.shouldActivate=B}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jt extends _n{constructor(E,y,b,N){super(E,y),this.urlAfterRedirects=b,this.state=N}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class In extends _n{constructor(E,y,b,N){super(E,y),this.urlAfterRedirects=b,this.state=N}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class on{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mr{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fi{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yn{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yr{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kr{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class br{constructor(E,y,b){this.routerEvent=E,this.position=y,this.anchor=b}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const vt="primary";class St{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Pt(I){return new St(I)}const rr="ngNavigationCancelingError";function Mr(I){const E=Error("NavigationCancelingError: "+I);return E[rr]=!0,E}function Mi(I,E,y){const b=y.path.split("/");if(b.length>I.length||"full"===y.pathMatch&&(E.hasChildren()||b.length<I.length))return null;const N={};for(let B=0;B<b.length;B++){const $=b[B],X=I[B];if($.startsWith(":"))N[$.substring(1)]=X;else if($!==X.path)return null}return{consumed:I.slice(0,b.length),posParams:N}}function Hn(I,E){const y=I?Object.keys(I):void 0,b=E?Object.keys(E):void 0;if(!y||!b||y.length!=b.length)return!1;let N;for(let B=0;B<y.length;B++)if(N=y[B],!Ht(I[N],E[N]))return!1;return!0}function Ht(I,E){if(Array.isArray(I)&&Array.isArray(E)){if(I.length!==E.length)return!1;const y=[...I].sort(),b=[...E].sort();return y.every((N,B)=>b[B]===N)}return I===E}function _r(I){return Array.prototype.concat.apply([],I)}function pn(I){return I.length>0?I[I.length-1]:null}function Je(I,E){for(const y in I)I.hasOwnProperty(y)&&E(I[y],y)}function Et(I){return(0,p.CqO)(I)?I:(0,p.QGY)(I)?(0,ye.D)(Promise.resolve(I)):(0,J.of)(I)}const un={exact:function _e(I,E,y){if(!rn(I.segments,E.segments)||!jt(I.segments,E.segments,y)||I.numberOfChildren!==E.numberOfChildren)return!1;for(const b in E.children)if(!I.children[b]||!_e(I.children[b],E.children[b],y))return!1;return!0},subset:xe},Lt={exact:function ne(I,E){return Hn(I,E)},subset:function ze(I,E){return Object.keys(E).length<=Object.keys(I).length&&Object.keys(E).every(y=>Ht(I[y],E[y]))},ignored:()=>!0};function ce(I,E,y){return un[y.paths](I.root,E.root,y.matrixParams)&&Lt[y.queryParams](I.queryParams,E.queryParams)&&!("exact"===y.fragment&&I.fragment!==E.fragment)}function xe(I,E,y){return ft(I,E,E.segments,y)}function ft(I,E,y,b){if(I.segments.length>y.length){const N=I.segments.slice(0,y.length);return!(!rn(N,y)||E.hasChildren()||!jt(N,y,b))}if(I.segments.length===y.length){if(!rn(I.segments,y)||!jt(I.segments,y,b))return!1;for(const N in E.children)if(!I.children[N]||!xe(I.children[N],E.children[N],b))return!1;return!0}{const N=y.slice(0,I.segments.length),B=y.slice(I.segments.length);return!!(rn(I.segments,N)&&jt(I.segments,N,b)&&I.children[vt])&&ft(I.children[vt],E,B,b)}}function jt(I,E,y){return E.every((b,N)=>Lt[y](I[N].parameters,b.parameters))}class gn{constructor(E,y,b){this.root=E,this.queryParams=y,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pt(this.queryParams)),this._queryParamMap}toString(){return Li.serialize(this)}}class qt{constructor(E,y){this.segments=E,this.children=y,this.parent=null,Je(y,(b,N)=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xr(this)}}class ln{constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Pt(this.parameters)),this._parameterMap}toString(){return Kn(this)}}function rn(I,E){return I.length===E.length&&I.every((y,b)=>y.path===E[b].path)}class Ir{}class ei{parse(E){const y=new Vi(E);return new gn(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){const y=`/${Tr(E.root,!0)}`,b=function sr(I){const E=Object.keys(I).map(y=>{const b=I[y];return Array.isArray(b)?b.map(N=>`${li(y)}=${li(N)}`).join("&"):`${li(y)}=${li(b)}`}).filter(y=>!!y);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${y}${b}${"string"==typeof E.fragment?`#${function Or(I){return encodeURI(I)}(E.fragment)}`:""}`}}const Li=new ei;function xr(I){return I.segments.map(E=>Kn(E)).join("/")}function Tr(I,E){if(!I.hasChildren())return xr(I);if(E){const y=I.children[vt]?Tr(I.children[vt],!1):"",b=[];return Je(I.children,(N,B)=>{B!==vt&&b.push(`${B}:${Tr(N,!1)}`)}),b.length>0?`${y}(${b.join("//")})`:y}{const y=function On(I,E){let y=[];return Je(I.children,(b,N)=>{N===vt&&(y=y.concat(E(b,N)))}),Je(I.children,(b,N)=>{N!==vt&&(y=y.concat(E(b,N)))}),y}(I,(b,N)=>N===vt?[Tr(I.children[vt],!1)]:[`${N}:${Tr(b,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[vt]?`${xr(I)}/${y[0]}`:`${xr(I)}/(${y.join("//")})`}}function ir(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function li(I){return ir(I).replace(/%3B/gi,";")}function ot(I){return ir(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rt(I){return decodeURIComponent(I)}function en(I){return Rt(I.replace(/\+/g,"%20"))}function Kn(I){return`${ot(I.path)}${function ci(I){return Object.keys(I).map(E=>`;${ot(E)}=${ot(I[E])}`).join("")}(I.parameters)}`}const ti=/^[^\/()?;=#]+/;function Sn(I){const E=I.match(ti);return E?E[0]:""}const or=/^[^=?&#]+/,an=/^[^&#]+/;class Vi{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(b[vt]=new qt(E,y)),b}parseSegment(){const E=Sn(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new ln(Rt(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=Sn(this.remaining);if(!y)return;this.capture(y);let b="";if(this.consumeOptional("=")){const N=Sn(this.remaining);N&&(b=N,this.capture(b))}E[Rt(y)]=Rt(b)}parseQueryParam(E){const y=function di(I){const E=I.match(or);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let b="";if(this.consumeOptional("=")){const $=function qr(I){const E=I.match(an);return E?E[0]:""}(this.remaining);$&&(b=$,this.capture(b))}const N=en(y),B=en(b);if(E.hasOwnProperty(N)){let $=E[N];Array.isArray($)||($=[$],E[N]=$),$.push(B)}else E[N]=B}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=Sn(this.remaining),N=this.remaining[b.length];if("/"!==N&&")"!==N&&";"!==N)throw new Error(`Cannot parse url '${this.url}'`);let B;b.indexOf(":")>-1?(B=b.substr(0,b.indexOf(":")),this.capture(B),this.capture(":")):E&&(B=vt);const $=this.parseChildren();y[B]=1===Object.keys($).length?$[vt]:new qt([],$),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class vi{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=Br(E,this._root);return y?y.children.map(b=>b.value):[]}firstChild(E){const y=Br(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=fr(E,this._root);return y.length<2?[]:y[y.length-2].children.map(N=>N.value).filter(N=>N!==E)}pathFromRoot(E){return fr(E,this._root).map(y=>y.value)}}function Br(I,E){if(I===E.value)return E;for(const y of E.children){const b=Br(I,y);if(b)return b}return null}function fr(I,E){if(I===E.value)return[E];for(const y of E.children){const b=fr(I,y);if(b.length)return b.unshift(E),b}return[]}class Qn{constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function cr(I){const E={};return I&&I.children.forEach(y=>E[y.value.outlet]=y),E}class pr extends vi{constructor(E,y){super(E),this.snapshot=y,ss(this,E)}toString(){return this.snapshot.toString()}}function Pn(I,E){const y=function zi(I,E){const $=new is([],{},{},"",{},vt,E,null,I.root,-1,{});return new ni("",new Qn($,[]))}(I,E),b=new he.X([new ln("",{})]),N=new he.X({}),B=new he.X({}),$=new he.X({}),X=new he.X(""),$e=new Dr(b,N,$,X,B,vt,E,y.root);return $e.snapshot=y.root,new pr(new Qn($e,[]),y)}class Dr{constructor(E,y,b,N,B,$,X,$e){this.url=E,this.params=y,this.queryParams=b,this.fragment=N,this.data=B,this.outlet=$,this.component=X,this._futureSnapshot=$e}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(E=>Pt(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(E=>Pt(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ar(I,E="emptyOnly"){const y=I.pathFromRoot;let b=0;if("always"!==E)for(b=y.length-1;b>=1;){const N=y[b],B=y[b-1];if(N.routeConfig&&""===N.routeConfig.path)b--;else{if(B.component)break;b--}}return function jr(I){return I.reduce((E,y)=>({params:Object.assign(Object.assign({},E.params),y.params),data:Object.assign(Object.assign({},E.data),y.data),resolve:Object.assign(Object.assign({},E.resolve),y._resolvedData)}),{params:{},data:{},resolve:{}})}(y.slice(b))}class is{constructor(E,y,b,N,B,$,X,$e,Dt,Rn,zt){this.url=E,this.params=y,this.queryParams=b,this.fragment=N,this.data=B,this.outlet=$,this.component=X,this.routeConfig=$e,this._urlSegment=Dt,this._lastPathIndex=Rn,this._resolve=zt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ni extends vi{constructor(E,y){super(y),this.url=E,ss(this,y)}toString(){return oe(this._root)}}function ss(I,E){E.value._routerState=I,E.children.forEach(y=>ss(I,y))}function oe(I){const E=I.children.length>0?` { ${I.children.map(oe).join(", ")} } `:"";return`${I.value}${E}`}function ae(I){if(I.snapshot){const E=I.snapshot,y=I._futureSnapshot;I.snapshot=y,Hn(E.queryParams,y.queryParams)||I.queryParams.next(y.queryParams),E.fragment!==y.fragment&&I.fragment.next(y.fragment),Hn(E.params,y.params)||I.params.next(y.params),function vr(I,E){if(I.length!==E.length)return!1;for(let y=0;y<I.length;++y)if(!Hn(I[y],E[y]))return!1;return!0}(E.url,y.url)||I.url.next(y.url),Hn(E.data,y.data)||I.data.next(y.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function ee(I,E){const y=Hn(I.params,E.params)&&function xn(I,E){return rn(I,E)&&I.every((y,b)=>Hn(y.parameters,E[b].parameters))}(I.url,E.url);return y&&!(!I.parent!=!E.parent)&&(!I.parent||ee(I.parent,E.parent))}function Ke(I,E,y){if(y&&I.shouldReuseRoute(E.value,y.value.snapshot)){const b=y.value;b._futureSnapshot=E.value;const N=function Qt(I,E,y){return E.children.map(b=>{for(const N of y.children)if(I.shouldReuseRoute(b.value,N.value.snapshot))return Ke(I,b,N);return Ke(I,b)})}(I,E,y);return new Qn(b,N)}{if(I.shouldAttach(E.value)){const B=I.retrieve(E.value);if(null!==B){const $=B.route;return $.value._futureSnapshot=E.value,$.children=E.children.map(X=>Ke(I,X)),$}}const b=function Dn(I){return new Dr(new he.X(I.url),new he.X(I.params),new he.X(I.queryParams),new he.X(I.fragment),new he.X(I.data),I.outlet,I.component,I)}(E.value),N=E.children.map(B=>Ke(I,B));return new Qn(b,N)}}function me(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Fe(I){return"object"==typeof I&&null!=I&&I.outlets}function Xe(I,E,y,b,N){let B={};if(b&&Je(b,(X,$e)=>{B[$e]=Array.isArray(X)?X.map(Dt=>`${Dt}`):`${X}`}),I===E)return new gn(y,B,N);const $=lt(I,E,y);return new gn($,B,N)}function lt(I,E,y){const b={};return Je(I.children,(N,B)=>{b[B]=N===E?y:lt(N,E,y)}),new qt(I.segments,b)}class kt{constructor(E,y,b){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=b,E&&b.length>0&&me(b[0]))throw new Error("Root segment cannot have matrix parameters");const N=b.find(Fe);if(N&&N!==pn(b))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cr{constructor(E,y,b){this.segmentGroup=E,this.processChildren=y,this.index=b}}function Ei(I,E,y){if(I||(I=new qt([],{})),0===I.segments.length&&I.hasChildren())return qi(I,E,y);const b=function xi(I,E,y){let b=0,N=E;const B={match:!1,pathIndex:0,commandIndex:0};for(;N<I.segments.length;){if(b>=y.length)return B;const $=I.segments[N],X=y[b];if(Fe(X))break;const $e=`${X}`,Dt=b<y.length-1?y[b+1]:null;if(N>0&&void 0===$e)break;if($e&&Dt&&"object"==typeof Dt&&void 0===Dt.outlets){if(!$r($e,Dt,$))return B;b+=2}else{if(!$r($e,{},$))return B;b++}N++}return{match:!0,pathIndex:N,commandIndex:b}}(I,E,y),N=y.slice(b.commandIndex);if(b.match&&b.pathIndex<I.segments.length){const B=new qt(I.segments.slice(0,b.pathIndex),{});return B.children[vt]=new qt(I.segments.slice(b.pathIndex),I.children),qi(B,0,N)}return b.match&&0===N.length?new qt(I.segments,{}):b.match&&!I.hasChildren()?Ks(I,E,y):b.match?qi(I,0,N):Ks(I,E,y)}function qi(I,E,y){if(0===y.length)return new qt(I.segments,{});{const b=function Ki(I){return Fe(I[0])?I[0].outlets:{[vt]:I}}(y),N={};return Je(b,(B,$)=>{"string"==typeof B&&(B=[B]),null!==B&&(N[$]=Ei(I.children[$],E,B))}),Je(I.children,(B,$)=>{void 0===b[$]&&(N[$]=B)}),new qt(I.segments,N)}}function Ks(I,E,y){const b=I.segments.slice(0,E);let N=0;for(;N<y.length;){const B=y[N];if(Fe(B)){const $e=fs(B.outlets);return new qt(b,$e)}if(0===N&&me(y[0])){b.push(new ln(I.segments[E].path,wi(y[0]))),N++;continue}const $=Fe(B)?B.outlets[vt]:`${B}`,X=N<y.length-1?y[N+1]:null;$&&X&&me(X)?(b.push(new ln($,wi(X))),N+=2):(b.push(new ln($,{})),N++)}return new qt(b,{})}function fs(I){const E={};return Je(I,(y,b)=>{"string"==typeof y&&(y=[y]),null!==y&&(E[b]=Ks(new qt([],{}),0,y))}),E}function wi(I){const E={};return Je(I,(y,b)=>E[b]=`${y}`),E}function $r(I,E,y){return I==y.path&&Hn(E,y.parameters)}class os{constructor(E,y,b,N){this.routeReuseStrategy=E,this.futureState=y,this.currState=b,this.forwardEvent=N}activate(E){const y=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,b,E),ae(this.futureState.root),this.activateChildRoutes(y,b,E)}deactivateChildRoutes(E,y,b){const N=cr(y);E.children.forEach(B=>{const $=B.value.outlet;this.deactivateRoutes(B,N[$],b),delete N[$]}),Je(N,(B,$)=>{this.deactivateRouteAndItsChildren(B,b)})}deactivateRoutes(E,y,b){const N=E.value,B=y?y.value:null;if(N===B)if(N.component){const $=b.getContext(N.outlet);$&&this.deactivateChildRoutes(E,y,$.children)}else this.deactivateChildRoutes(E,y,b);else B&&this.deactivateRouteAndItsChildren(y,b)}deactivateRouteAndItsChildren(E,y){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const b=y.getContext(E.value.outlet),N=b&&E.value.component?b.children:y,B=cr(E);for(const $ of Object.keys(B))this.deactivateRouteAndItsChildren(B[$],N);if(b&&b.outlet){const $=b.outlet.detach(),X=b.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:$,route:E,contexts:X})}}deactivateRouteAndOutlet(E,y){const b=y.getContext(E.value.outlet),N=b&&E.value.component?b.children:y,B=cr(E);for(const $ of Object.keys(B))this.deactivateRouteAndItsChildren(B[$],N);b&&b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated(),b.attachRef=null,b.resolver=null,b.route=null)}activateChildRoutes(E,y,b){const N=cr(y);E.children.forEach(B=>{this.activateRoutes(B,N[B.value.outlet],b),this.forwardEvent(new Kr(B.value.snapshot))}),E.children.length&&this.forwardEvent(new Yn(E.value.snapshot))}activateRoutes(E,y,b){const N=E.value,B=y?y.value:null;if(ae(N),N===B)if(N.component){const $=b.getOrCreateContext(N.outlet);this.activateChildRoutes(E,y,$.children)}else this.activateChildRoutes(E,y,b);else if(N.component){const $=b.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const X=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),$.children.onOutletReAttached(X.contexts),$.attachRef=X.componentRef,$.route=X.route.value,$.outlet&&$.outlet.attach(X.componentRef,X.route.value),ae(X.route.value),this.activateChildRoutes(E,null,$.children)}else{const X=function as(I){for(let E=I.parent;E;E=E.parent){const y=E.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig;if(y&&y.component)return null}return null}(N.snapshot),$e=X?X.module.componentFactoryResolver:null;$.attachRef=null,$.route=N,$.resolver=$e,$.outlet&&$.outlet.activateWith(N,$e),this.activateChildRoutes(E,null,$.children)}}else this.activateChildRoutes(E,null,b)}}class Ms{constructor(E,y){this.routes=E,this.module=y}}function us(I){return"function"==typeof I}function Hr(I){return I instanceof gn}const Er=Symbol("INITIAL_VALUE");function Ii(){return(0,$t.w)(I=>function se(...I){const E=(0,Ae.yG)(I),y=(0,Ae.jO)(I),{args:b,keys:N}=(0,Y.D)(I);if(0===b.length)return(0,ye.D)([],E);const B=new K.y(function Ie(I,E,y=fe.y){return b=>{nt(E,()=>{const{length:N}=I,B=new Array(N);let $=N,X=N;for(let $e=0;$e<N;$e++)nt(E,()=>{const Dt=(0,ye.D)(I[$e],E);let Rn=!1;Dt.subscribe((0,Me.x)(b,zt=>{B[$e]=zt,Rn||(Rn=!0,X--),X||b.next(y(B.slice()))},()=>{--$||b.complete()}))},b)},b)}}(b,E,N?$=>(0,Se.n)(N,$):fe.y));return y?B.pipe((0,De.Z)(y)):B}(I.map(E=>E.pipe((0,Ct.q)(1),(0,At.O)(Er)))).pipe((0,rt.R)((E,y)=>{let b=!1;return y.reduce((N,B,$)=>N!==Er?N:(B===Er&&(b=!0),b||!1!==B&&$!==y.length-1&&!Hr(B)?N:B),E)},Er),(0,We.h)(E=>E!==Er),(0,it.U)(E=>Hr(E)?E:!0===E),(0,Ct.q)(1)))}class Os{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ws,this.attachRef=null}}class ws{constructor(){this.contexts=new Map}onChildOutletCreated(E,y){const b=this.getOrCreateContext(E);b.outlet=y,this.contexts.set(E,b)}onChildOutletDestroyed(E){const y=this.getContext(E);y&&(y.outlet=null,y.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let y=this.getContext(E);return y||(y=new Os,this.contexts.set(E,y)),y}getContext(E){return this.contexts.get(E)||null}}let gs=(()=>{class I{constructor(y,b,N,B,$){this.parentContexts=y,this.location=b,this.resolver=N,this.changeDetector=$,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=B||vt,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,b){this.activated=y,this._activatedRoute=b,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,b){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;const $=(b=b||this.resolver).resolveComponentFactory(y._futureSnapshot.routeConfig.component),X=this.parentContexts.getOrCreateContext(this.name).children,$e=new Zi(y,X,this.location.injector);this.activated=this.location.createComponent($,this.location.length,$e),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(y){return new(y||I)(p.Y36(ws),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},I.\u0275dir=p.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),I})();class Zi{constructor(E,y,b){this.route=E,this.childContexts=y,this.parent=b}get(E,y){return E===Dr?this.route:E===ws?this.childContexts:this.parent.get(E,y)}}let Nr=(()=>{class I{}return I.\u0275fac=function(y){return new(y||I)},I.\u0275cmp=p.Xpm({type:I,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,b){1&y&&p._UZ(0,"router-outlet")},directives:[gs],encapsulation:2}),I})();function Ri(I,E=""){for(let y=0;y<I.length;y++){const b=I[y];qs(b,ar(E,b))}}function qs(I,E){I.children&&Ri(I.children,E)}function ar(I,E){return E?I||E.path?I&&!E.path?`${I}/`:!I&&E.path?E.path:`${I}/${E.path}`:"":I}function x(I){const E=I.children&&I.children.map(x),y=E?Object.assign(Object.assign({},I),{children:E}):Object.assign({},I);return!y.component&&(E||y.loadChildren)&&y.outlet&&y.outlet!==vt&&(y.component=Nr),y}function H(I){return I.outlet||vt}function M(I,E){const y=I.filter(b=>H(b)===E);return y.push(...I.filter(b=>H(b)!==E)),y}const q={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function de(I,E,y){var b;if(""===E.path)return"full"===E.pathMatch&&(I.hasChildren()||y.length>0)?Object.assign({},q):{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const B=(E.matcher||Mi)(y,I,E);if(!B)return Object.assign({},q);const $={};Je(B.posParams,($e,Dt)=>{$[Dt]=$e.path});const X=B.consumed.length>0?Object.assign(Object.assign({},$),B.consumed[B.consumed.length-1].parameters):$;return{matched:!0,consumedSegments:B.consumed,remainingSegments:y.slice(B.consumed.length),parameters:X,positionalParamSegments:null!==(b=B.posParams)&&void 0!==b?b:{}}}function qe(I,E,y,b,N="corrected"){if(y.length>0&&function Gn(I,E,y){return y.some(b=>cn(I,E,b)&&H(b)!==vt)}(I,y,b)){const $=new qt(E,function yt(I,E,y,b){const N={};N[vt]=b,b._sourceSegment=I,b._segmentIndexShift=E.length;for(const B of y)if(""===B.path&&H(B)!==vt){const $=new qt([],{});$._sourceSegment=I,$._segmentIndexShift=E.length,N[H(B)]=$}return N}(I,E,b,new qt(y,I.children)));return $._sourceSegment=I,$._segmentIndexShift=E.length,{segmentGroup:$,slicedSegments:[]}}if(0===y.length&&function Un(I,E,y){return y.some(b=>cn(I,E,b))}(I,y,b)){const $=new qt(I.segments,function Ye(I,E,y,b,N,B){const $={};for(const X of b)if(cn(I,y,X)&&!N[H(X)]){const $e=new qt([],{});$e._sourceSegment=I,$e._segmentIndexShift="legacy"===B?I.segments.length:E.length,$[H(X)]=$e}return Object.assign(Object.assign({},N),$)}(I,E,y,b,I.children,N));return $._sourceSegment=I,$._segmentIndexShift=E.length,{segmentGroup:$,slicedSegments:y}}const B=new qt(I.segments,I.children);return B._sourceSegment=I,B._segmentIndexShift=E.length,{segmentGroup:B,slicedSegments:y}}function cn(I,E,y){return(!(I.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}function vn(I,E,y,b){return!!(H(I)===b||b!==vt&&cn(E,y,I))&&("**"===I.path||de(E,I,y).matched)}function dr(I,E,y){return 0===E.length&&!I.children[y]}class qn{constructor(E){this.segmentGroup=E||null}}class Xn{constructor(E){this.urlTree=E}}function Ui(I){return He(new qn(I))}function ri(I){return He(new Xn(I))}class Zs{constructor(E,y,b,N,B){this.configLoader=y,this.urlSerializer=b,this.urlTree=N,this.config=B,this.allowRedirects=!0,this.ngModule=E.get(p.h0i)}apply(){const E=qe(this.urlTree.root,[],[],this.config).segmentGroup,y=new qt(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,y,vt).pipe((0,it.U)(B=>this.createUrlTree(R(B),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Z(B=>{if(B instanceof Xn)return this.allowRedirects=!1,this.match(B.urlTree);throw B instanceof qn?this.noMatchError(B):B}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,vt).pipe((0,it.U)(N=>this.createUrlTree(R(N),E.queryParams,E.fragment))).pipe(Z(N=>{throw N instanceof qn?this.noMatchError(N):N}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,y,b){const N=E.segments.length>0?new qt([],{[vt]:E}):E;return new gn(N,y,b)}expandSegmentGroup(E,y,b,N){return 0===b.segments.length&&b.hasChildren()?this.expandChildren(E,y,b).pipe((0,it.U)(B=>new qt([],B))):this.expandSegment(E,b,y,b.segments,N,!0)}expandChildren(E,y,b){const N=[];for(const B of Object.keys(b.children))"primary"===B?N.unshift(B):N.push(B);return(0,ye.D)(N).pipe(ue(B=>{const $=b.children[B],X=M(y,B);return this.expandSegmentGroup(E,X,$,B).pipe((0,it.U)($e=>({segment:$e,outlet:B})))}),(0,rt.R)((B,$)=>(B[$.outlet]=$.segment,B),{}),function Bt(I,E){const y=arguments.length>=2;return b=>b.pipe(I?(0,We.h)((N,B)=>I(N,B,b)):fe.y,Ne(1),y?(0,gt.d)(E):(0,Ot.T)(()=>new Oe.K))}())}expandSegment(E,y,b,N,B,$){return(0,ye.D)(b).pipe(ue(X=>this.expandSegmentAgainstRoute(E,y,b,X,N,B,$).pipe(Z(Dt=>{if(Dt instanceof qn)return(0,J.of)(null);throw Dt}))),(0,nn.P)(X=>!!X),Z((X,$e)=>{if(X instanceof Oe.K||"EmptyError"===X.name)return dr(y,N,B)?(0,J.of)(new qt([],{})):Ui(y);throw X}))}expandSegmentAgainstRoute(E,y,b,N,B,$,X){return vn(N,y,B,$)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(E,y,N,B,$):X&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,y,b,N,B,$):Ui(y):Ui(y)}expandSegmentAgainstRouteUsingRedirect(E,y,b,N,B,$){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,b,N,$):this.expandRegularSegmentAgainstRouteUsingRedirect(E,y,b,N,B,$)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,y,b,N){const B=this.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?ri(B):this.lineralizeSegments(b,B).pipe((0,Ee.z)($=>{const X=new qt($,{});return this.expandSegment(E,X,y,$,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,y,b,N,B,$){const{matched:X,consumedSegments:$e,remainingSegments:Dt,positionalParamSegments:Rn}=de(y,N,B);if(!X)return Ui(y);const zt=this.applyRedirectCommands($e,N.redirectTo,Rn);return N.redirectTo.startsWith("/")?ri(zt):this.lineralizeSegments(N,zt).pipe((0,Ee.z)(tr=>this.expandSegment(E,y,b,tr.concat(Dt),$,!1)))}matchSegmentAgainstRoute(E,y,b,N,B){if("**"===b.path)return b.loadChildren?(b._loadedConfig?(0,J.of)(b._loadedConfig):this.configLoader.load(E.injector,b)).pipe((0,it.U)(zt=>(b._loadedConfig=zt,new qt(N,{})))):(0,J.of)(new qt(N,{}));const{matched:$,consumedSegments:X,remainingSegments:$e}=de(y,b,N);return $?this.getChildConfig(E,b,N).pipe((0,Ee.z)(Rn=>{const zt=Rn.module,tr=Rn.routes,{segmentGroup:Nn,slicedSegments:Cs}=qe(y,X,$e,tr),cs=new qt(Nn.segments,Nn.children);if(0===Cs.length&&cs.hasChildren())return this.expandChildren(zt,tr,cs).pipe((0,it.U)(bs=>new qt(X,bs)));if(0===tr.length&&0===Cs.length)return(0,J.of)(new qt(X,{}));const Wo=H(b)===B;return this.expandSegment(zt,cs,tr,Cs,Wo?vt:B,!0).pipe((0,it.U)(Fr=>new qt(X.concat(Fr.segments),Fr.children)))})):Ui(y)}getChildConfig(E,y,b){return y.children?(0,J.of)(new Ms(y.children,E)):y.loadChildren?void 0!==y._loadedConfig?(0,J.of)(y._loadedConfig):this.runCanLoadGuards(E.injector,y,b).pipe((0,Ee.z)(N=>N?this.configLoader.load(E.injector,y).pipe((0,it.U)(B=>(y._loadedConfig=B,B))):function Bi(I){return He(Mr(`Cannot load children because the guard of the route "path: '${I.path}'" returned false`))}(y))):(0,J.of)(new Ms([],E))}runCanLoadGuards(E,y,b){const N=y.canLoad;if(!N||0===N.length)return(0,J.of)(!0);const B=N.map($=>{const X=E.get($);let $e;if(function Oi(I){return I&&us(I.canLoad)}(X))$e=X.canLoad(y,b);else{if(!us(X))throw new Error("Invalid CanLoad guard");$e=X(y,b)}return Et($e)});return(0,J.of)(B).pipe(Ii(),(0,Yt.b)($=>{if(!Hr($))return;const X=Mr(`Redirecting to "${this.urlSerializer.serialize($)}"`);throw X.url=$,X}),(0,it.U)($=>!0===$))}lineralizeSegments(E,y){let b=[],N=y.root;for(;;){if(b=b.concat(N.segments),0===N.numberOfChildren)return(0,J.of)(b);if(N.numberOfChildren>1||!N.children[vt])return He(new Error(`Only absolute redirects can have named outlets. redirectTo: '${E.redirectTo}'`));N=N.children[vt]}}applyRedirectCommands(E,y,b){return this.applyRedirectCreatreUrlTree(y,this.urlSerializer.parse(y),E,b)}applyRedirectCreatreUrlTree(E,y,b,N){const B=this.createSegmentGroup(E,y.root,b,N);return new gn(B,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const b={};return Je(E,(N,B)=>{if("string"==typeof N&&N.startsWith(":")){const X=N.substring(1);b[B]=y[X]}else b[B]=N}),b}createSegmentGroup(E,y,b,N){const B=this.createSegments(E,y.segments,b,N);let $={};return Je(y.children,(X,$e)=>{$[$e]=this.createSegmentGroup(E,X,b,N)}),new qt(B,$)}createSegments(E,y,b,N){return y.map(B=>B.path.startsWith(":")?this.findPosParam(E,B,N):this.findOrReturn(B,b))}findPosParam(E,y,b){const N=b[y.path.substring(1)];if(!N)throw new Error(`Cannot redirect to '${E}'. Cannot find '${y.path}'.`);return N}findOrReturn(E,y){let b=0;for(const N of y){if(N.path===E.path)return y.splice(b),N;b++}return E}}function R(I){const E={};for(const b of Object.keys(I.children)){const B=R(I.children[b]);(B.segments.length>0||B.hasChildren())&&(E[b]=B)}return function Ys(I){if(1===I.numberOfChildren&&I.children[vt]){const E=I.children[vt];return new qt(I.segments.concat(E.segments),E.children)}return I}(new qt(I.segments,E))}class A{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class F{constructor(E,y){this.component=E,this.route=y}}function Le(I,E,y){const b=I._root;return Yr(b,E?E._root:null,y,[b.value])}function dn(I,E,y){const b=function hi(I){if(!I)return null;for(let E=I.parent;E;E=E.parent){const y=E.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig}return null}(E);return(b?b.module.injector:y).get(I)}function Yr(I,E,y,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const B=cr(E);return I.children.forEach($=>{(function Gr(I,E,y,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const B=I.value,$=E?E.value:null,X=y?y.getContext(I.value.outlet):null;if($&&B.routeConfig===$.routeConfig){const $e=function Qs(I,E,y){if("function"==typeof y)return y(I,E);switch(y){case"pathParamsChange":return!rn(I.url,E.url);case"pathParamsOrQueryParamsChange":return!rn(I.url,E.url)||!Hn(I.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ee(I,E)||!Hn(I.queryParams,E.queryParams);default:return!ee(I,E)}}($,B,B.routeConfig.runGuardsAndResolvers);$e?N.canActivateChecks.push(new A(b)):(B.data=$.data,B._resolvedData=$._resolvedData),Yr(I,E,B.component?X?X.children:null:y,b,N),$e&&X&&X.outlet&&X.outlet.isActivated&&N.canDeactivateChecks.push(new F(X.outlet.component,$))}else $&&ms(E,X,N),N.canActivateChecks.push(new A(b)),Yr(I,null,B.component?X?X.children:null:y,b,N)})($,B[$.value.outlet],y,b.concat([$.value]),N),delete B[$.value.outlet]}),Je(B,($,X)=>ms($,y.getContext(X),N)),N}function ms(I,E,y){const b=cr(I),N=I.value;Je(b,(B,$)=>{ms(B,N.component?E?E.children.getContext($):null:E,y)}),y.canDeactivateChecks.push(new F(N.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,N))}class ys{}function ao(I){return new K.y(E=>E.error(I))}class Ea{constructor(E,y,b,N,B,$){this.rootComponentType=E,this.config=y,this.urlTree=b,this.url=N,this.paramsInheritanceStrategy=B,this.relativeLinkResolution=$}recognize(){const E=qe(this.urlTree.root,[],[],this.config.filter($=>void 0===$.redirectTo),this.relativeLinkResolution).segmentGroup,y=this.processSegmentGroup(this.config,E,vt);if(null===y)return null;const b=new is([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},vt,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Qn(b,y),B=new ni(this.url,N);return this.inheritParamsAndData(B._root),B}inheritParamsAndData(E){const y=E.value,b=Ar(y,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data),E.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(E,y,b){return 0===y.segments.length&&y.hasChildren()?this.processChildren(E,y):this.processSegment(E,y,y.segments,b)}processChildren(E,y){const b=[];for(const B of Object.keys(y.children)){const $=y.children[B],X=M(E,B),$e=this.processSegmentGroup(X,$,B);if(null===$e)return null;b.push(...$e)}const N=ra(b);return function Pr(I){I.sort((E,y)=>E.value.outlet===vt?-1:y.value.outlet===vt?1:E.value.outlet.localeCompare(y.value.outlet))}(N),N}processSegment(E,y,b,N){for(const B of E){const $=this.processSegmentAgainstRoute(B,y,b,N);if(null!==$)return $}return dr(y,b,N)?[]:null}processSegmentAgainstRoute(E,y,b,N){if(E.redirectTo||!vn(E,y,b,N))return null;let B,$=[],X=[];if("**"===E.path){const Nn=b.length>0?pn(b).parameters:{};B=new is(b,Nn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Js(E),H(E),E.component,E,wa(y),Vo(y)+b.length,Ia(E))}else{const Nn=de(y,E,b);if(!Nn.matched)return null;$=Nn.consumedSegments,X=Nn.remainingSegments,B=new is($,Nn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Js(E),H(E),E.component,E,wa(y),Vo(y)+$.length,Ia(E))}const $e=function Lo(I){return I.children?I.children:I.loadChildren?I._loadedConfig.routes:[]}(E),{segmentGroup:Dt,slicedSegments:Rn}=qe(y,$,X,$e.filter(Nn=>void 0===Nn.redirectTo),this.relativeLinkResolution);if(0===Rn.length&&Dt.hasChildren()){const Nn=this.processChildren($e,Dt);return null===Nn?null:[new Qn(B,Nn)]}if(0===$e.length&&0===Rn.length)return[new Qn(B,[])];const zt=H(E)===N,tr=this.processSegment($e,Dt,Rn,zt?vt:N);return null===tr?null:[new Qn(B,tr)]}}function na(I){const E=I.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function ra(I){const E=[],y=new Set;for(const b of I){if(!na(b)){E.push(b);continue}const N=E.find(B=>b.value.routeConfig===B.value.routeConfig);void 0!==N?(N.children.push(...b.children),y.add(N)):E.push(b)}for(const b of y){const N=ra(b.children);E.push(new Qn(b.value,N))}return E.filter(b=>!y.has(b))}function wa(I){let E=I;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Vo(I){let E=I,y=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,y+=E._segmentIndexShift?E._segmentIndexShift:0;return y-1}function Js(I){return I.data||{}}function Ia(I){return I.resolve||{}}function _u(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function Wr(I){return(0,$t.w)(E=>{const y=I(E);return y?(0,ye.D)(y).pipe((0,it.U)(()=>E)):(0,J.of)(E)})}class Uo extends class kr{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}{}const Eu=new p.OlP("ROUTES");class Ha{constructor(E,y,b,N){this.injector=E,this.compiler=y,this.onLoadStartListener=b,this.onLoadEndListener=N}load(E,y){if(y._loader$)return y._loader$;this.onLoadStartListener&&this.onLoadStartListener(y);const N=this.loadModuleFactory(y.loadChildren).pipe((0,it.U)(B=>{this.onLoadEndListener&&this.onLoadEndListener(y);const $=B.create(E);return new Ms(_r($.injector.get(Eu,void 0,p.XFs.Self|p.XFs.Optional)).map(x),$)}),Z(B=>{throw y._loader$=void 0,B}));return y._loader$=new U(N,()=>new pe.x).pipe(j()),y._loader$}loadModuleFactory(E){return Et(E()).pipe((0,Ee.z)(y=>y instanceof p.YKP?(0,J.of)(y):(0,ye.D)(this.compiler.compileModuleAsync(y))))}}class tc{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,y){return E}}function Ca(I){throw I}function Yi(I,E,y){return E.parse("/")}function lo(I,E){return(0,J.of)(null)}const jo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pi=(()=>{class I{constructor(y,b,N,B,$,X,$e){this.rootComponentType=y,this.urlSerializer=b,this.rootContexts=N,this.location=B,this.config=$e,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pe.x,this.errorHandler=Ca,this.malformedUriErrorHandler=Yi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:lo,afterPreactivation:lo},this.urlHandlingStrategy=new tc,this.routeReuseStrategy=new Uo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=$.get(p.h0i),this.console=$.get(p.c2e);const zt=$.get(p.R0b);this.isNgZoneEnabled=zt instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig($e),this.currentUrlTree=function Wt(){return new gn(new qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ha($,X,tr=>this.triggerEvent(new on(tr)),tr=>this.triggerEvent(new mr(tr))),this.routerState=Pn(this.currentUrlTree,this.rootComponentType),this.transitions=new he.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const b=this.events;return y.pipe((0,We.h)(N=>0!==N.id),(0,it.U)(N=>Object.assign(Object.assign({},N),{extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,$t.w)(N=>{let B=!1,$=!1;return(0,J.of)(N).pipe((0,Yt.b)(X=>{this.currentNavigation={id:X.id,initialUrl:X.currentRawUrl,extractedUrl:X.extractedUrl,trigger:X.source,extras:X.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,$t.w)(X=>{const $e=this.browserUrlTree.toString(),Dt=!this.navigated||X.extractedUrl.toString()!==$e||$e!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Dt)&&this.urlHandlingStrategy.shouldProcessUrl(X.rawUrl))return Qi(X.source)&&(this.browserUrlTree=X.extractedUrl),(0,J.of)(X).pipe((0,$t.w)(zt=>{const tr=this.transitions.getValue();return b.next(new Jn(zt.id,this.serializeUrl(zt.extractedUrl),zt.source,zt.restoredState)),tr!==this.transitions.getValue()?Te.E:Promise.resolve(zt)}),function S(I,E,y,b){return(0,$t.w)(N=>function ji(I,E,y,b,N){return new Zs(I,E,y,b,N).apply()}(I,E,y,N.extractedUrl,b).pipe((0,it.U)(B=>Object.assign(Object.assign({},N),{urlAfterRedirects:B}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yt.b)(zt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:zt.urlAfterRedirects})}),function Ns(I,E,y,b,N){return(0,Ee.z)(B=>function uo(I,E,y,b,N="emptyOnly",B="legacy"){try{const $=new Ea(I,E,y,b,N,B).recognize();return null===$?ao(new ys):(0,J.of)($)}catch($){return ao($)}}(I,E,B.urlAfterRedirects,y(B.urlAfterRedirects),b,N).pipe((0,it.U)($=>Object.assign(Object.assign({},B),{targetSnapshot:$}))))}(this.rootComponentType,this.config,zt=>this.serializeUrl(zt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yt.b)(zt=>{if("eager"===this.urlUpdateStrategy){if(!zt.extras.skipLocationChange){const Nn=this.urlHandlingStrategy.merge(zt.urlAfterRedirects,zt.rawUrl);this.setBrowserUrl(Nn,zt)}this.browserUrlTree=zt.urlAfterRedirects}const tr=new gr(zt.id,this.serializeUrl(zt.extractedUrl),this.serializeUrl(zt.urlAfterRedirects),zt.targetSnapshot);b.next(tr)}));if(Dt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:tr,extractedUrl:Nn,source:Cs,restoredState:cs,extras:Wo}=X,fo=new Jn(tr,this.serializeUrl(Nn),Cs,cs);b.next(fo);const Fr=Pn(Nn,this.rootComponentType).snapshot;return(0,J.of)(Object.assign(Object.assign({},X),{targetSnapshot:Fr,urlAfterRedirects:Nn,extras:Object.assign(Object.assign({},Wo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=X.rawUrl,X.resolve(null),Te.E}),Wr(X=>{const{targetSnapshot:$e,id:Dt,extractedUrl:Rn,rawUrl:zt,extras:{skipLocationChange:tr,replaceUrl:Nn}}=X;return this.hooks.beforePreactivation($e,{navigationId:Dt,appliedUrlTree:Rn,rawUrlTree:zt,skipLocationChange:!!tr,replaceUrl:!!Nn})}),(0,Yt.b)(X=>{const $e=new jn(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot);this.triggerEvent($e)}),(0,it.U)(X=>Object.assign(Object.assign({},X),{guards:Le(X.targetSnapshot,X.currentSnapshot,this.rootContexts)})),function Fo(I,E){return(0,Ee.z)(y=>{const{targetSnapshot:b,currentSnapshot:N,guards:{canActivateChecks:B,canDeactivateChecks:$}}=y;return 0===$.length&&0===B.length?(0,J.of)(Object.assign(Object.assign({},y),{guardsResult:!0})):function yu(I,E,y,b){return(0,ye.D)(I).pipe((0,Ee.z)(N=>function Rs(I,E,y,b,N){const B=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!B||0===B.length)return(0,J.of)(!0);const $=B.map(X=>{const $e=dn(X,E,N);let Dt;if(function Zr(I){return I&&us(I.canDeactivate)}($e))Dt=Et($e.canDeactivate(I,E,y,b));else{if(!us($e))throw new Error("Invalid CanDeactivate guard");Dt=Et($e(I,E,y,b))}return Dt.pipe((0,nn.P)())});return(0,J.of)($).pipe(Ii())}(N.component,N.route,y,E,b)),(0,nn.P)(N=>!0!==N,!0))}($,b,N,I).pipe((0,Ee.z)(X=>X&&function Es(I){return"boolean"==typeof I}(X)?function _a(I,E,y,b){return(0,ye.D)(E).pipe(ue(N=>(0,Pe.z)(function fi(I,E){return null!==I&&E&&E(new Fi(I)),(0,J.of)(!0)}(N.route.parent,b),function oo(I,E){return null!==I&&E&&E(new yr(I)),(0,J.of)(!0)}(N.route,b),function Do(I,E,y){const b=E[E.length-1],B=E.slice(0,E.length-1).reverse().map($=>function Vt(I){const E=I.routeConfig?I.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:I,guards:E}:null}($)).filter($=>null!==$).map($=>Be(()=>{const X=$.guards.map($e=>{const Dt=dn($e,$.node,y);let Rn;if(function xs(I){return I&&us(I.canActivateChild)}(Dt))Rn=Et(Dt.canActivateChild(b,I));else{if(!us(Dt))throw new Error("Invalid CanActivateChild guard");Rn=Et(Dt(b,I))}return Rn.pipe((0,nn.P)())});return(0,J.of)(X).pipe(Ii())}));return(0,J.of)(B).pipe(Ii())}(I,N.path,y),function Ni(I,E,y){const b=E.routeConfig?E.routeConfig.canActivate:null;if(!b||0===b.length)return(0,J.of)(!0);const N=b.map(B=>Be(()=>{const $=dn(B,E,y);let X;if(function ps(I){return I&&us(I.canActivate)}($))X=Et($.canActivate(E,I));else{if(!us($))throw new Error("Invalid CanActivate guard");X=Et($(E,I))}return X.pipe((0,nn.P)())}));return(0,J.of)(N).pipe(Ii())}(I,N.route,y))),(0,nn.P)(N=>!0!==N,!0))}(b,B,I,E):(0,J.of)(X)),(0,it.U)(X=>Object.assign(Object.assign({},y),{guardsResult:X})))})}(this.ngModule.injector,X=>this.triggerEvent(X)),(0,Yt.b)(X=>{if(Hr(X.guardsResult)){const Dt=Mr(`Redirecting to "${this.serializeUrl(X.guardsResult)}"`);throw Dt.url=X.guardsResult,Dt}const $e=new Nt(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot,!!X.guardsResult);this.triggerEvent($e)}),(0,We.h)(X=>!!X.guardsResult||(this.restoreHistory(X),this.cancelNavigationTransition(X,""),!1)),Wr(X=>{if(X.guards.canActivateChecks.length)return(0,J.of)(X).pipe((0,Yt.b)($e=>{const Dt=new Jt($e.id,this.serializeUrl($e.extractedUrl),this.serializeUrl($e.urlAfterRedirects),$e.targetSnapshot);this.triggerEvent(Dt)}),(0,$t.w)($e=>{let Dt=!1;return(0,J.of)($e).pipe(function Da(I,E){return(0,Ee.z)(y=>{const{targetSnapshot:b,guards:{canActivateChecks:N}}=y;if(!N.length)return(0,J.of)(y);let B=0;return(0,ye.D)(N).pipe(ue($=>function Is(I,E,y,b){return function Co(I,E,y,b){const N=_u(I);if(0===N.length)return(0,J.of)({});const B={};return(0,ye.D)(N).pipe((0,Ee.z)($=>function ia(I,E,y,b){const N=dn(I,E,b);return Et(N.resolve?N.resolve(E,y):N(E,y))}(I[$],E,y,b).pipe((0,Yt.b)(X=>{B[$]=X}))),Ne(1),(0,Ee.z)(()=>_u(B).length===N.length?(0,J.of)(B):Te.E))}(I._resolve,I,E,b).pipe((0,it.U)(B=>(I._resolvedData=B,I.data=Object.assign(Object.assign({},I.data),Ar(I,y).resolve),null)))}($.route,b,I,E)),(0,Yt.b)(()=>B++),Ne(1),(0,Ee.z)($=>B===N.length?(0,J.of)(y):Te.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yt.b)({next:()=>Dt=!0,complete:()=>{Dt||(this.restoreHistory($e),this.cancelNavigationTransition($e,"At least one route resolver didn't emit any value."))}}))}),(0,Yt.b)($e=>{const Dt=new In($e.id,this.serializeUrl($e.extractedUrl),this.serializeUrl($e.urlAfterRedirects),$e.targetSnapshot);this.triggerEvent(Dt)}))}),Wr(X=>{const{targetSnapshot:$e,id:Dt,extractedUrl:Rn,rawUrl:zt,extras:{skipLocationChange:tr,replaceUrl:Nn}}=X;return this.hooks.afterPreactivation($e,{navigationId:Dt,appliedUrlTree:Rn,rawUrlTree:zt,skipLocationChange:!!tr,replaceUrl:!!Nn})}),(0,it.U)(X=>{const $e=function Ve(I,E,y){const b=Ke(I,E._root,y?y._root:void 0);return new pr(b,E)}(this.routeReuseStrategy,X.targetSnapshot,X.currentRouterState);return Object.assign(Object.assign({},X),{targetRouterState:$e})}),(0,Yt.b)(X=>{this.currentUrlTree=X.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(X.urlAfterRedirects,X.rawUrl),this.routerState=X.targetRouterState,"deferred"===this.urlUpdateStrategy&&(X.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,X),this.browserUrlTree=X.urlAfterRedirects)}),((I,E,y)=>(0,it.U)(b=>(new os(E,b.targetRouterState,b.currentRouterState,y).activate(I),b)))(this.rootContexts,this.routeReuseStrategy,X=>this.triggerEvent(X)),(0,Yt.b)({next(){B=!0},complete(){B=!0}}),function dt(I){return(0,mt.e)((E,y)=>{try{E.subscribe(y)}finally{y.add(I)}})}(()=>{var X;B||$||this.cancelNavigationTransition(N,`Navigation ID ${N.id} is not equal to the current navigation id ${this.navigationId}`),(null===(X=this.currentNavigation)||void 0===X?void 0:X.id)===N.id&&(this.currentNavigation=null)}),Z(X=>{if($=!0,function Tn(I){return I&&I[rr]}(X)){const $e=Hr(X.url);$e||(this.navigated=!0,this.restoreHistory(N,!0));const Dt=new nr(N.id,this.serializeUrl(N.extractedUrl),X.message);b.next(Dt),$e?setTimeout(()=>{const Rn=this.urlHandlingStrategy.merge(X.url,this.rawUrlTree),zt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Qi(N.source)};this.scheduleNavigation(Rn,"imperative",null,zt,{resolve:N.resolve,reject:N.reject,promise:N.promise})},0):N.resolve(!1)}else{this.restoreHistory(N,!0);const $e=new $n(N.id,this.serializeUrl(N.extractedUrl),X);b.next($e);try{N.resolve(this.errorHandler(X))}catch(Dt){N.reject(Dt)}}return Te.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const b="popstate"===y.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{var N;const B={replaceUrl:!0},$=(null===(N=y.state)||void 0===N?void 0:N.navigationId)?y.state:null;if($){const $e=Object.assign({},$);delete $e.navigationId,delete $e.\u0275routerPageId,0!==Object.keys($e).length&&(B.state=$e)}const X=this.parseUrl(y.url);this.scheduleNavigation(X,b,$,B)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){Ri(y),this.config=y.map(x),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,b={}){const{relativeTo:N,queryParams:B,fragment:$,queryParamsHandling:X,preserveFragment:$e}=b,Dt=N||this.routerState.root,Rn=$e?this.currentUrlTree.fragment:$;let zt=null;switch(X){case"merge":zt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),B);break;case"preserve":zt=this.currentUrlTree.queryParams;break;default:zt=B||null}return null!==zt&&(zt=this.removeEmptyProps(zt)),function ge(I,E,y,b,N){if(0===y.length)return Xe(E.root,E.root,E.root,b,N);const B=function Vn(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new kt(!0,0,I);let E=0,y=!1;const b=I.reduce((N,B,$)=>{if("object"==typeof B&&null!=B){if(B.outlets){const X={};return Je(B.outlets,($e,Dt)=>{X[Dt]="string"==typeof $e?$e.split("/"):$e}),[...N,{outlets:X}]}if(B.segmentPath)return[...N,B.segmentPath]}return"string"!=typeof B?[...N,B]:0===$?(B.split("/").forEach((X,$e)=>{0==$e&&"."===X||(0==$e&&""===X?y=!0:".."===X?E++:""!=X&&N.push(X))}),N):[...N,B]},[]);return new kt(y,E,b)}(y);if(B.toRoot())return Xe(E.root,E.root,new qt([],{}),b,N);const $=function kn(I,E,y){if(I.isAbsolute)return new Cr(E.root,!0,0);if(-1===y.snapshot._lastPathIndex){const B=y.snapshot._urlSegment;return new Cr(B,B===E.root,0)}const b=me(I.commands[0])?0:1;return function _i(I,E,y){let b=I,N=E,B=y;for(;B>N;){if(B-=N,b=b.parent,!b)throw new Error("Invalid number of '../'");N=b.segments.length}return new Cr(b,!1,N-B)}(y.snapshot._urlSegment,y.snapshot._lastPathIndex+b,I.numberOfDoubleDots)}(B,E,I),X=$.processChildren?qi($.segmentGroup,$.index,B.commands):Ei($.segmentGroup,$.index,B.commands);return Xe(E.root,$.segmentGroup,X,b,N)}(Dt,this.currentUrlTree,y,zt,null!=Rn?Rn:null)}navigateByUrl(y,b={skipLocationChange:!1}){const N=Hr(y)?y:this.parseUrl(y),B=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(B,"imperative",null,b)}navigate(y,b={skipLocationChange:!1}){return function wu(I){for(let E=0;E<I.length;E++){const y=I[E];if(null==y)throw new Error(`The requested path contains ${y} segment at index ${E}`)}}(y),this.navigateByUrl(this.createUrlTree(y,b),b)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let b;try{b=this.urlSerializer.parse(y)}catch(N){b=this.malformedUriErrorHandler(N,this.urlSerializer,y)}return b}isActive(y,b){let N;if(N=!0===b?Object.assign({},jo):!1===b?Object.assign({},zr):b,Hr(y))return ce(this.currentUrlTree,y,N);const B=this.parseUrl(y);return ce(this.currentUrlTree,B,N)}removeEmptyProps(y){return Object.keys(y).reduce((b,N)=>{const B=y[N];return null!=B&&(b[N]=B),b},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new Ln(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,b,N,B,$){var X,$e;if(this.disposed)return Promise.resolve(!1);let Dt,Rn,zt;$?(Dt=$.resolve,Rn=$.reject,zt=$.promise):zt=new Promise((Cs,cs)=>{Dt=Cs,Rn=cs});const tr=++this.navigationId;let Nn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),Nn=N&&N.\u0275routerPageId?N.\u0275routerPageId:B.replaceUrl||B.skipLocationChange?null!==(X=this.browserPageId)&&void 0!==X?X:0:(null!==($e=this.browserPageId)&&void 0!==$e?$e:0)+1):Nn=0,this.setTransition({id:tr,targetPageId:Nn,source:b,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:B,resolve:Dt,reject:Rn,promise:zt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),zt.catch(Cs=>Promise.reject(Cs))}setBrowserUrl(y,b){const N=this.urlSerializer.serialize(y),B=Object.assign(Object.assign({},b.extras.state),this.generateNgRouterState(b.id,b.targetPageId));this.location.isCurrentPathEqualTo(N)||b.extras.replaceUrl?this.location.replaceState(N,"",B):this.location.go(N,"",B)}restoreHistory(y,b=!1){var N,B;if("computed"===this.canceledNavigationResolution){const $=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(N=this.currentNavigation)||void 0===N?void 0:N.finalUrl)||0===$?this.currentUrlTree===(null===(B=this.currentNavigation)||void 0===B?void 0:B.finalUrl)&&0===$&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($)}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,b){const N=new nr(y.id,this.serializeUrl(y.extractedUrl),b);this.triggerEvent(N),y.resolve(!1)}generateNgRouterState(y,b){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:b}:{navigationId:y}}}return I.\u0275fac=function(y){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function Qi(I){return"imperative"!==I}let Ps=(()=>{class I{constructor(y,b,N,B,$){this.router=y,this.route=b,this.tabIndexAttribute=N,this.renderer=B,this.el=$,this.commands=null,this.onChanges=new pe.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(y){if(null!=this.tabIndexAttribute)return;const b=this.renderer,N=this.el.nativeElement;null!==y?b.setAttribute(N,"tabindex",y):b.removeAttribute(N,"tabindex")}ngOnChanges(y){this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const y={skipLocationChange:$i(this.skipLocationChange),replaceUrl:$i(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:$i(this.preserveFragment)})}}return I.\u0275fac=function(y){return new(y||I)(p.Y36(pi),p.Y36(Dr),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},I.\u0275dir=p.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(y,b){1&y&&p.NdJ("click",function(){return b.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})(),To=(()=>{class I{constructor(y,b,N){this.router=y,this.route=b,this.locationStrategy=N,this.commands=null,this.href=null,this.onChanges=new pe.x,this.subscription=y.events.subscribe(B=>{B instanceof Ln&&this.updateTargetUrlAndHref()})}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,b,N,B,$){if(0!==y||b||N||B||$||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const X={skipLocationChange:$i(this.skipLocationChange),replaceUrl:$i(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,X),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:$i(this.preserveFragment)})}}return I.\u0275fac=function(y){return new(y||I)(p.Y36(pi),p.Y36(Dr),p.Y36(wn.S$))},I.\u0275dir=p.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,b){1&y&&p.NdJ("click",function(B){return b.onClick(B.button,B.ctrlKey,B.shiftKey,B.altKey,B.metaKey)}),2&y&&p.uIk("target",b.target)("href",b.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})();function $i(I){return""===I||!!I}let ks=(()=>{class I{constructor(y,b,N,B,$,X){this.router=y,this.element=b,this.renderer=N,this.cdr=B,this.link=$,this.linkWithHref=X,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=y.events.subscribe($e=>{$e instanceof Ln&&this.update()})}ngAfterContentInit(){(0,J.of)(this.links.changes,this.linksWithHrefs.changes,(0,J.of)(null)).pipe((0,sn.J)()).subscribe(y=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var y;null===(y=this.linkInputChangesSubscription)||void 0===y||y.unsubscribe();const b=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(N=>!!N).map(N=>N.onChanges);this.linkInputChangesSubscription=(0,ye.D)(b).pipe((0,sn.J)()).subscribe(N=>{this.isActive!==this.isLinkActive(this.router)(N)&&this.update()})}set routerLinkActive(y){const b=Array.isArray(y)?y:y.split(" ");this.classes=b.filter(N=>!!N)}ngOnChanges(y){this.update()}ngOnDestroy(){var y;this.routerEventsSubscription.unsubscribe(),null===(y=this.linkInputChangesSubscription)||void 0===y||y.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const y=this.hasActiveLinks();this.isActive!==y&&(this.isActive=y,this.cdr.markForCheck(),this.classes.forEach(b=>{y?this.renderer.addClass(this.element.nativeElement,b):this.renderer.removeClass(this.element.nativeElement,b)}),this.isActiveChange.emit(y))})}isLinkActive(y){const b=function ba(I){return!!I.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return N=>!!N.urlTree&&y.isActive(N.urlTree,b)}hasActiveLinks(){const y=this.isLinkActive(this.router);return this.link&&y(this.link)||this.linkWithHref&&y(this.linkWithHref)||this.links.some(y)||this.linksWithHrefs.some(y)}}return I.\u0275fac=function(y){return new(y||I)(p.Y36(pi),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(Ps,8),p.Y36(To,8))},I.\u0275dir=p.lG2({type:I,selectors:[["","routerLinkActive",""]],contentQueries:function(y,b,N){if(1&y&&(p.Suo(N,Ps,5),p.Suo(N,To,5)),2&y){let B;p.iGM(B=p.CRH())&&(b.links=B),p.iGM(B=p.CRH())&&(b.linksWithHrefs=B)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[p.TTD]}),I})();class Ga{}class Wa{preload(E,y){return(0,J.of)(null)}}let hr=(()=>{class I{constructor(y,b,N,B){this.router=y,this.injector=N,this.preloadingStrategy=B,this.loader=new Ha(N,b,$e=>y.triggerEvent(new on($e)),$e=>y.triggerEvent(new mr($e)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,We.h)(y=>y instanceof Ln),ue(()=>this.preload())).subscribe(()=>{})}preload(){const y=this.injector.get(p.h0i);return this.processRoutes(y,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,b){const N=[];for(const B of b)if(B.loadChildren&&!B.canLoad&&B._loadedConfig){const $=B._loadedConfig;N.push(this.processRoutes($.module,$.routes))}else B.loadChildren&&!B.canLoad?N.push(this.preloadConfig(y,B)):B.children&&N.push(this.processRoutes(y,B.children));return(0,ye.D)(N).pipe((0,sn.J)(),(0,it.U)(B=>{}))}preloadConfig(y,b){return this.preloadingStrategy.preload(b,()=>(b._loadedConfig?(0,J.of)(b._loadedConfig):this.loader.load(y.injector,b)).pipe((0,Ee.z)(B=>(b._loadedConfig=B,this.processRoutes(B.module,B.routes)))))}}return I.\u0275fac=function(y){return new(y||I)(p.LFG(pi),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Ga))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})(),$o=(()=>{class I{constructor(y,b,N={}){this.router=y,this.viewportScroller=b,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Jn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof Ln&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof br&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,b){this.router.triggerEvent(new br(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(y){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();const Ji=new p.OlP("ROUTER_CONFIGURATION"),Ho=new p.OlP("ROUTER_FORROOT_GUARD"),Go=[wn.Ye,{provide:Ir,useClass:ei},{provide:pi,useFactory:function nc(I,E,y,b,N,B,$={},X,$e){const Dt=new pi(null,I,E,y,b,N,_r(B));return X&&(Dt.urlHandlingStrategy=X),$e&&(Dt.routeReuseStrategy=$e),function za(I,E){I.errorHandler&&(E.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(E.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(E.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(E.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(E.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(E.canceledNavigationResolution=I.canceledNavigationResolution)}($,Dt),$.enableTracing&&Dt.events.subscribe(Rn=>{var zt,tr;null===(zt=console.group)||void 0===zt||zt.call(console,`Router Event: ${Rn.constructor.name}`),console.log(Rn.toString()),console.log(Rn),null===(tr=console.groupEnd)||void 0===tr||tr.call(console)}),Dt},deps:[Ir,ws,wn.Ye,p.zs3,p.Sil,Eu,Ji,[class Bo{},new p.FiY],[class bo{},new p.FiY]]},ws,{provide:Dr,useFactory:function ii(I){return I.routerState.root},deps:[pi]},hr,Wa,class Iu{preload(E,y){return y().pipe(Z(()=>(0,J.of)(null)))}},{provide:Ji,useValue:{enableTracing:!1}}];function Ta(){return new p.PXZ("Router",pi)}let wr=(()=>{class I{constructor(y,b){}static forRoot(y,b){return{ngModule:I,providers:[Go,vs(y),{provide:Ho,useFactory:Aa,deps:[[pi,new p.FiY,new p.tp0]]},{provide:Ji,useValue:b||{}},{provide:wn.S$,useFactory:Ds,deps:[wn.lw,[new p.tBr(wn.mr),new p.FiY],Ji]},{provide:$o,useFactory:al,deps:[pi,wn.EM,Ji]},{provide:Ga,useExisting:b&&b.preloadingStrategy?b.preloadingStrategy:Wa},{provide:p.PXZ,multi:!0,useFactory:Ta},[co,{provide:p.ip1,multi:!0,useFactory:ls,deps:[co]},{provide:Fs,useFactory:ho,deps:[co]},{provide:p.tb,multi:!0,useExisting:Fs}]]}}static forChild(y){return{ngModule:I,providers:[vs(y)]}}}return I.\u0275fac=function(y){return new(y||I)(p.LFG(Ho,8),p.LFG(pi,8))},I.\u0275mod=p.oAB({type:I}),I.\u0275inj=p.cJS({}),I})();function al(I,E,y){return y.scrollOffset&&E.setOffset(y.scrollOffset),new $o(I,E,y)}function Ds(I,E,y={}){return y.useHash?new wn.Do(I,E):new wn.b0(I,E)}function Aa(I){return"guarded"}function vs(I){return[{provide:p.deG,multi:!0,useValue:I},{provide:Eu,multi:!0,useValue:I}]}let co=(()=>{class I{constructor(y){this.injector=y,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new pe.x}appInitializer(){return this.injector.get(wn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let b=null;const N=new Promise(X=>b=X),B=this.injector.get(pi),$=this.injector.get(Ji);return"disabled"===$.initialNavigation?(B.setUpLocationChangeListener(),b(!0)):"enabled"===$.initialNavigation||"enabledBlocking"===$.initialNavigation?(B.hooks.afterPreactivation=()=>this.initNavigation?(0,J.of)(null):(this.initNavigation=!0,b(!0),this.resultOfPreactivationDone),B.initialNavigation()):b(!0),N})}bootstrapListener(y){const b=this.injector.get(Ji),N=this.injector.get(hr),B=this.injector.get($o),$=this.injector.get(pi),X=this.injector.get(p.z2F);y===X.components[0]&&(("enabledNonBlocking"===b.initialNavigation||void 0===b.initialNavigation)&&$.initialNavigation(),N.setUpPreloading(),B.init(),$.resetRootComponentType(X.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return I.\u0275fac=function(y){return new(y||I)(p.LFG(p.zs3))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function ls(I){return I.appInitializer.bind(I)}function ho(I){return I.bootstrapListener.bind(I)}const Fs=new p.OlP("Router Initializer")},3942:(wt,Ue,P)=>{P.d(Ue,{Z:()=>He});var p=P(2090),K=P(4859),Y=P(9681),ye=P(1877);class fe{constructor(Be,Re){this._delegate=Be,this.firebase=Re,(0,Y._addComponent)(Be,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(Be,Re=Y._DEFAULT_ENTRY_NAME){var mt;this._delegate.checkDestroyed();const j=this._delegate.container.getProvider(Be);return!j.isInitialized()&&"EXPLICIT"===(null===(mt=j.getComponent())||void 0===mt?void 0:mt.instantiationMode)&&j.initialize(),j.getImmediate({identifier:Re})}_removeServiceInstance(Be,Re=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(Re)}_addComponent(Be){(0,Y._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,Y._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function Me(){const pt=function Se(pt){const Be={},Re={__esModule:!0,initializeApp:function U(Pe,Te={}){const pe=Y.initializeApp(Pe,Te);if((0,p.r3)(Be,pe.name))return Be[pe.name];const Z=new pt(pe,Re);return Be[pe.name]=Z,Z},app:j,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function he(Pe){const Te=Pe.name,pe=Te.replace("-compat","");if(Y._registerComponent(Pe)&&"PUBLIC"===Pe.type){const Z=(Ee=j())=>{if("function"!=typeof Ee[pe])throw Ae.create("invalid-app-argument",{appName:Te});return Ee[pe]()};void 0!==Pe.serviceProps&&(0,p.ZB)(Z,Pe.serviceProps),Re[pe]=Z,pt.prototype[pe]=function(...Ee){return this._getService.bind(this,Te).apply(this,Pe.multipleInstances?Ee:[])}}return"PUBLIC"===Pe.type?Re[pe]:null},removeApp:function mt(Pe){delete Be[Pe]},useAsService:function Oe(Pe,Te){return"serverAuth"===Te?null:Te},modularAPIs:Y}};function j(Pe){if(!(0,p.r3)(Be,Pe=Pe||Y._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:Pe});return Be[Pe]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function J(){return Object.keys(Be).map(Pe=>Be[Pe])}}),j.App=pt,Re}(fe);return pt.INTERNAL=Object.assign(Object.assign({},pt.INTERNAL),{createFirebaseNamespace:Me,extendNamespace:function Be(Re){(0,p.ZB)(pt,Re)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),pt}(),se=new ye.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pt=self.firebase.SDK_VERSION;pt&&pt.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=le;!function Ze(pt){(0,Y.registerVersion)("@firebase/app-compat","0.1.22",pt)}()},9681:(wt,Ue,P)=>{P.r(Ue),P.d(Ue,{FirebaseError:()=>ye.ZR,SDK_VERSION:()=>Ln,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Ct,_addOrOverwriteComponent:()=>At,_apps:()=>it,_clearComponents:()=>sn,_components:()=>$t,_getProvider:()=>nn,_registerComponent:()=>rt,_removeServiceInstance:()=>Yt,deleteApp:()=>jn,getApp:()=>$n,getApps:()=>gr,initializeApp:()=>nr,onLog:()=>In,registerVersion:()=>Jt,setLogLevel:()=>on});var p=P(5861),K=P(4859),Y=P(1877),ye=P(2090);class fe{constructor(Je){this.container=Je}getPlatformInfoString(){return this.container.getProviders().map(Et=>{if(function De(Tt){const Je=Tt.getComponent();return"VERSION"===(null==Je?void 0:Je.type)}(Et)){const Wt=Et.getImmediate();return`${Wt.library}/${Wt.version}`}return null}).filter(Et=>Et).join(" ")}}const Ae="@firebase/app",Me=new Y.Yd("@firebase/app"),Bt="[DEFAULT]",dt={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},it=new Map,$t=new Map;function Ct(Tt,Je){try{Tt.container.addComponent(Je)}catch(Et){Me.debug(`Component ${Je.name} failed to register with FirebaseApp ${Tt.name}`,Et)}}function At(Tt,Je){Tt.container.addOrOverwriteComponent(Je)}function rt(Tt){const Je=Tt.name;if($t.has(Je))return Me.debug(`There were multiple attempts to register component ${Je}.`),!1;$t.set(Je,Tt);for(const Et of it.values())Ct(Et,Tt);return!0}function nn(Tt,Je){const Et=Tt.container.getProvider("heartbeat").getImmediate({optional:!0});return Et&&Et.triggerHeartbeat(),Tt.container.getProvider(Je)}function Yt(Tt,Je,Et=Bt){nn(Tt,Je).clearInstance(Et)}function sn(){$t.clear()}const _n=new ye.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Jn{constructor(Je,Et,Wt){this._isDeleted=!1,this._options=Object.assign({},Je),this._config=Object.assign({},Et),this._name=Et.name,this._automaticDataCollectionEnabled=Et.automaticDataCollectionEnabled,this._container=Wt,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this.checkDestroyed(),this._automaticDataCollectionEnabled=Je}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Je){this._isDeleted=Je}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}const Ln="9.6.11";function nr(Tt,Je={}){"object"!=typeof Je&&(Je={name:Je});const Et=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},Je),Wt=Et.name;if("string"!=typeof Wt||!Wt)throw _n.create("bad-app-name",{appName:String(Wt)});const un=it.get(Wt);if(un){if((0,ye.vZ)(Tt,un.options)&&(0,ye.vZ)(Et,un.config))return un;throw _n.create("duplicate-app",{appName:Wt})}const Lt=new K.H0(Wt);for(const ne of $t.values())Lt.addComponent(ne);const ce=new Jn(Tt,Et,Lt);return it.set(Wt,ce),ce}function $n(Tt=Bt){const Je=it.get(Tt);if(!Je)throw _n.create("no-app",{appName:Tt});return Je}function gr(){return Array.from(it.values())}function jn(Tt){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,p.Z)(function*(Tt){const Je=Tt.name;it.has(Je)&&(it.delete(Je),yield Promise.all(Tt.container.getProviders().map(Et=>Et.delete())),Tt.isDeleted=!0)})).apply(this,arguments)}function Jt(Tt,Je,Et){var Wt;let un=null!==(Wt=dt[Tt])&&void 0!==Wt?Wt:Tt;Et&&(un+=`-${Et}`);const Lt=un.match(/\s|\//),ce=Je.match(/\s|\//);if(Lt||ce){const ne=[`Unable to register library "${un}" with version "${Je}":`];return Lt&&ne.push(`library name "${un}" contains illegal characters (whitespace or "/")`),Lt&&ce&&ne.push("and"),ce&&ne.push(`version name "${Je}" contains illegal characters (whitespace or "/")`),void Me.warn(ne.join(" "))}rt(new K.wA(`${un}-version`,()=>({library:un,version:Je}),"VERSION"))}function In(Tt,Je){if(null!==Tt&&"function"!=typeof Tt)throw _n.create("invalid-log-argument");(0,Y.Am)(Tt,Je)}function on(Tt){(0,Y.Ub)(Tt)}const Yn="firebase-heartbeat-store";let yr=null;function Kr(){return yr||(yr=(0,ye.X3)("firebase-heartbeat-database",1,(Tt,Je)=>{0===Je&&Tt.createObjectStore(Yn)}).catch(Tt=>{throw _n.create("storage-open",{originalErrorMessage:Tt.message})})),yr}function vt(){return(vt=(0,p.Z)(function*(Tt){try{return(yield Kr()).transaction(Yn).objectStore(Yn).get(rr(Tt))}catch(Je){throw _n.create("storage-get",{originalErrorMessage:Je.message})}})).apply(this,arguments)}function St(Tt,Je){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,p.Z)(function*(Tt,Je){try{const Wt=(yield Kr()).transaction(Yn,"readwrite");return yield Wt.objectStore(Yn).put(Je,rr(Tt)),Wt.complete}catch(Et){throw _n.create("storage-set",{originalErrorMessage:Et.message})}})).apply(this,arguments)}function rr(Tt){return`${Tt.name}!${Tt.options.appId}`}class Mi{constructor(Je){this.container=Je,this._heartbeatsCache=null;const Et=this.container.getProvider("app").getImmediate();this._storage=new Ht(Et),this._heartbeatsCachePromise=this._storage.read().then(Wt=>(this._heartbeatsCache=Wt,Wt))}triggerHeartbeat(){var Je=this;return(0,p.Z)(function*(){const Wt=Je.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),un=vr();if(null===Je._heartbeatsCache&&(Je._heartbeatsCache=yield Je._heartbeatsCachePromise),Je._heartbeatsCache.lastSentHeartbeatDate!==un&&!Je._heartbeatsCache.heartbeats.some(Lt=>Lt.date===un))return Je._heartbeatsCache.heartbeats.push({date:un,agent:Wt}),Je._heartbeatsCache.heartbeats=Je._heartbeatsCache.heartbeats.filter(Lt=>{const ce=new Date(Lt.date).valueOf();return Date.now()-ce<=2592e6}),Je._storage.overwrite(Je._heartbeatsCache)})()}getHeartbeatsHeader(){var Je=this;return(0,p.Z)(function*(){if(null===Je._heartbeatsCache&&(yield Je._heartbeatsCachePromise),null===Je._heartbeatsCache||0===Je._heartbeatsCache.heartbeats.length)return"";const Et=vr(),{heartbeatsToSend:Wt,unsentEntries:un}=function Hn(Tt,Je=1024){const Et=[];let Wt=Tt.slice();for(const un of Tt){const Lt=Et.find(ce=>ce.agent===un.agent);if(Lt){if(Lt.dates.push(un.date),_r(Et)>Je){Lt.dates.pop();break}}else if(Et.push({agent:un.agent,dates:[un.date]}),_r(Et)>Je){Et.pop();break}Wt=Wt.slice(1)}return{heartbeatsToSend:Et,unsentEntries:Wt}}(Je._heartbeatsCache.heartbeats),Lt=(0,ye.L)(JSON.stringify({version:2,heartbeats:Wt}));return Je._heartbeatsCache.lastSentHeartbeatDate=Et,un.length>0?(Je._heartbeatsCache.heartbeats=un,yield Je._storage.overwrite(Je._heartbeatsCache)):(Je._heartbeatsCache.heartbeats=[],Je._storage.overwrite(Je._heartbeatsCache)),Lt})()}}function vr(){return(new Date).toISOString().substring(0,10)}class Ht{constructor(Je){this.app=Je,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ye.hl)()&&(0,ye.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Je=this;return(0,p.Z)(function*(){return(yield Je._canUseIndexedDBPromise)&&(yield function br(Tt){return vt.apply(this,arguments)}(Je.app))||{heartbeats:[]}})()}overwrite(Je){var Et=this;return(0,p.Z)(function*(){var Wt;if(yield Et._canUseIndexedDBPromise){const Lt=yield Et.read();return St(Et.app,{lastSentHeartbeatDate:null!==(Wt=Je.lastSentHeartbeatDate)&&void 0!==Wt?Wt:Lt.lastSentHeartbeatDate,heartbeats:Je.heartbeats})}})()}add(Je){var Et=this;return(0,p.Z)(function*(){var Wt;if(yield Et._canUseIndexedDBPromise){const Lt=yield Et.read();return St(Et.app,{lastSentHeartbeatDate:null!==(Wt=Je.lastSentHeartbeatDate)&&void 0!==Wt?Wt:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...Je.heartbeats]})}})()}}function _r(Tt){return(0,ye.L)(JSON.stringify({version:2,heartbeats:Tt})).length}!function pn(Tt){rt(new K.wA("platform-logger",Je=>new fe(Je),"PRIVATE")),rt(new K.wA("heartbeat",Je=>new Mi(Je),"PRIVATE")),Jt(Ae,"0.7.21",Tt),Jt(Ae,"0.7.21","esm2017"),Jt("fire-js","")}("")},4859:(wt,Ue,P)=>{P.d(Ue,{H0:()=>Se,wA:()=>Y});var p=P(5861),K=P(2090);class Y{constructor(le,se,Ie){this.name=le,this.instanceFactory=se,this.type=Ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const ye="[DEFAULT]";class fe{constructor(le,se){this.name=le,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const se=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(se)){const Ie=new K.BH;if(this.instancesDeferred.set(se,Ie),this.isInitialized(se)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:se});nt&&Ie.resolve(nt)}catch(nt){}}return this.instancesDeferred.get(se).promise}getImmediate(le){var se;const Ie=this.normalizeInstanceIdentifier(null==le?void 0:le.identifier),nt=null!==(se=null==le?void 0:le.optional)&&void 0!==se&&se;if(!this.isInitialized(Ie)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ie})}catch(Ze){if(nt)return null;throw Ze}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function Ae(Me){return"EAGER"===Me.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:ye})}catch(se){}for(const[se,Ie]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(se);try{const Ze=this.getOrInitializeService({instanceIdentifier:nt});Ie.resolve(Ze)}catch(Ze){}}}}clearInstance(le=ye){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,p.Z)(function*(){const se=Array.from(le.instances.values());yield Promise.all([...se.filter(Ie=>"INTERNAL"in Ie).map(Ie=>Ie.INTERNAL.delete()),...se.filter(Ie=>"_delete"in Ie).map(Ie=>Ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=ye){return this.instances.has(le)}getOptions(le=ye){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:se={}}=le,Ie=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(Ie))throw Error(`${this.name}(${Ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:Ie,options:se});for(const[Ze,He]of this.instancesDeferred.entries())Ie===this.normalizeInstanceIdentifier(Ze)&&He.resolve(nt);return nt}onInit(le,se){var Ie;const nt=this.normalizeInstanceIdentifier(se),Ze=null!==(Ie=this.onInitCallbacks.get(nt))&&void 0!==Ie?Ie:new Set;Ze.add(le),this.onInitCallbacks.set(nt,Ze);const He=this.instances.get(nt);return He&&le(He,nt),()=>{Ze.delete(le)}}invokeOnInitCallbacks(le,se){const Ie=this.onInitCallbacks.get(se);if(Ie)for(const nt of Ie)try{nt(le,se)}catch(Ze){}}getOrInitializeService({instanceIdentifier:le,options:se={}}){let Ie=this.instances.get(le);if(!Ie&&this.component&&(Ie=this.component.instanceFactory(this.container,{instanceIdentifier:(Me=le,Me===ye?void 0:Me),options:se}),this.instances.set(le,Ie),this.instancesOptions.set(le,se),this.invokeOnInitCallbacks(Ie,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,Ie)}catch(nt){}var Me;return Ie||null}normalizeInstanceIdentifier(le=ye){return this.component?this.component.multipleInstances?le:ye:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Se{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const se=this.getProvider(le.name);if(se.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);se.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const se=new fe(le,this);return this.providers.set(le,se),se}getProviders(){return Array.from(this.providers.values())}}},1877:(wt,Ue,P)=>{P.d(Ue,{Am:()=>Me,Ub:()=>Se,Yd:()=>Ae,in:()=>K});const p=[];var K=(()=>{return(le=K||(K={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",K;var le})();const Y={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},ye=K.INFO,fe={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},De=(le,se,...Ie)=>{if(se<le.logLevel)return;const nt=(new Date).toISOString(),Ze=fe[se];if(!Ze)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[Ze](`[${nt}]  ${le.name}:`,...Ie)};class Ae{constructor(se){this.name=se,this._logLevel=ye,this._logHandler=De,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in K))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?Y[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...se),this._logHandler(this,K.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...se),this._logHandler(this,K.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,K.INFO,...se),this._logHandler(this,K.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,K.WARN,...se),this._logHandler(this,K.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...se),this._logHandler(this,K.ERROR,...se)}}function Se(le){p.forEach(se=>{se.setLogLevel(le)})}function Me(le,se){for(const Ie of p){let nt=null;se&&se.level&&(nt=Y[se.level]),Ie.userLogHandler=null===le?null:(Ze,He,...pt)=>{const Be=pt.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch(mt){return null}}).filter(Re=>Re).join(" ");He>=(null!=nt?nt:Ze.logLevel)&&le({level:K[He].toLowerCase(),message:Be,args:pt,type:Ze.name})}}}},1470:(wt,Ue,P)=>{P.d(Ue,{hx:()=>nt,yI:()=>pt});var p=P(5e3),K=P(655),Y=P(2382),ye=P(9808);const fe=new p.OlP("ngx-mask config"),De=new p.OlP("new ngx-mask config"),Ae=new p.OlP("initial ngx-mask config"),Se={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new p.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Me=["Hh:m0:s0","Hh:m0","m0:s0"],le=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let se=(()=>{class Re{constructor(j){this._config=j,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(U,J,he,Oe)=>{var Pe,Te;let pe=[],Z="";if(Array.isArray(he)){const Ot=new RegExp(he.map(gt=>"[\\^$.|?*+()".indexOf(gt)>=0?`\\${gt}`:gt).join("|"));pe=U.split(Ot),Z=null!==(Te=null===(Pe=U.match(Ot))||void 0===Pe?void 0:Pe[0])&&void 0!==Te?Te:""}else pe=U.split(he),Z=he;const Ee=pe.length>1?`${Z}${pe[1]}`:"";let ue=pe[0];const We=this.separatorLimit.replace(/\s/g,"");We&&+We&&(ue="-"===ue[0]?`-${ue.slice(1,ue.length).slice(0,We.length)}`:ue.slice(0,We.length));const Ne=/(\d+)(\d{3})/;for(;J&&Ne.test(ue);)ue=ue.replace(Ne,"$1"+J+"$2");return void 0===Oe?ue+Ee:0===Oe?ue:ue+Ee.substr(0,Oe+1)},this.percentage=U=>Number(U)>=0&&Number(U)<=100,this.getPrecision=U=>{const J=U.split(".");return J.length>1?Number(J[J.length-1]):1/0},this.checkAndRemoveSuffix=U=>{var J,he,Oe;for(let Pe=(null===(J=this.suffix)||void 0===J?void 0:J.length)-1;Pe>=0;Pe--){const Te=this.suffix.substr(Pe,null===(he=this.suffix)||void 0===he?void 0:he.length);if(U.includes(Te)&&(Pe-1<0||!U.includes(this.suffix.substr(Pe-1,null===(Oe=this.suffix)||void 0===Oe?void 0:Oe.length))))return U.replace(Te,"")}return U},this.checkInputPrecision=(U,J,he)=>{if(J<1/0){if(Array.isArray(he)){const Te=he.find(pe=>pe!==this.thousandSeparator);he=Te||he[0]}const Oe=new RegExp(this._charToRegExpExpression(he)+`\\d{${J}}.*$`),Pe=U.match(Oe);Pe&&Pe[0].length-1>J&&(U=U.substring(0,U.length-(Pe[0].length-1-J))),0===J&&this._compareOrIncludes(U[U.length-1],he,this.thousandSeparator)&&(U=U.substring(0,U.length-1))}return U},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(j,U){const[J,he]=U;return this.customPattern=he,this.applyMask(j,J)}applyMask(j,U,J=0,he=!1,Oe=!1,Pe=(()=>{})){var Te,pe;if(!U||"string"!=typeof j)return"";let Z=0,Ee="",ue=!1,We=!1,Ne=1,Ot=!1;j.slice(0,this.prefix.length)===this.prefix&&(j=j.slice(this.prefix.length,j.length)),this.suffix&&(null==j?void 0:j.length)>0&&(j=this.checkAndRemoveSuffix(j));const gt=j.toString().split("");"IP"===U&&(this.ipError=gt.filter(At=>"."===At).length<3&&gt.length<7,U="099.099.099.099");const Bt=[];for(let At=0;At<j.length;At++)(null===(Te=j[At])||void 0===Te?void 0:Te.match("\\d"))&&Bt.push(j[At]);if("CPF_CNPJ"===U&&(this.cpfCnpjError=11!==Bt.length&&14!==Bt.length,U=Bt.length>11?"00.000.000/0000-00":"000.000.000-00"),U.startsWith("percent")){if(j.match("[a-z]|[A-Z]")||j.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){j=this._stripToDecimal(j);const At=this.getPrecision(U);j=this.checkInputPrecision(j,At,this.decimalMarker)}j.indexOf(".")>0&&!this.percentage(j.substring(0,j.indexOf(".")))&&(j=`${j.substring(0,j.indexOf(".")-1)}${j.substring(j.indexOf("."),j.length)}`),Ee=this.percentage(j)?j:j.substring(0,j.length-1)}else if(U.startsWith("separator")){(j.match("[w\u0430-\u044f\u0410-\u042f]")||j.match("[\u0401\u0451\u0410-\u044f]")||j.match("[a-z]|[A-Z]")||j.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||j.match("[^A-Za-z0-9,]"))&&(j=this._stripToDecimal(j)),j=j.length>1&&"0"===j[0]&&!this._compareOrIncludes(j[1],this.decimalMarker,this.thousandSeparator)&&!Oe?j.slice(1,j.length):j,Oe&&(j=this._compareOrIncludes(j[j.length-1],this.decimalMarker,this.thousandSeparator)?j.slice(0,j.length-1):j);const At=this._charToRegExpExpression(this.thousandSeparator);let rt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(At,"");if(Array.isArray(this.decimalMarker))for(const Jn of this.decimalMarker)rt=rt.replace(this._charToRegExpExpression(Jn),"");else rt=rt.replace(this._charToRegExpExpression(this.decimalMarker),"");const nn=new RegExp("["+rt+"]");(j.match(nn)||1===j.length&&this._compareOrIncludes(j,this.decimalMarker,this.thousandSeparator))&&(j=j.substring(0,j.length-1));const Yt=this.getPrecision(U),sn=(j=this.checkInputPrecision(j,Yt,this.decimalMarker)).replace(new RegExp(At,"g"),"");Ee=this._formatWithSeparators(sn,this.thousandSeparator,this.decimalMarker,Yt);const wn=Ee.indexOf(",")-j.indexOf(","),_n=Ee.length-j.length;if(_n>0&&","!==Ee[J]){We=!0;let Jn=0;do{this._shift.add(J+Jn),Jn++}while(Jn<_n)}else 0!==wn&&J>0&&!(Ee.indexOf(",")>=J&&J>3)||!(Ee.indexOf(".")>=J&&J>3)&&_n<=0?(this._shift.clear(),We=!0,Ne=_n,this._shift.add(J+=_n)):this._shift.clear()}else for(let At=0,rt=gt[0];At<gt.length&&Z!==U.length;At++,rt=gt[At])if(this._checkSymbolMask(rt,U[Z])&&"?"===U[Z+1])Ee+=rt,Z+=2;else if("*"===U[Z+1]&&ue&&this._checkSymbolMask(rt,U[Z+2]))Ee+=rt,Z+=3,ue=!1;else if(this._checkSymbolMask(rt,U[Z])&&"*"===U[Z+1])Ee+=rt,ue=!0;else if("?"===U[Z+1]&&this._checkSymbolMask(rt,U[Z+2]))Ee+=rt,Z+=3;else if(this._checkSymbolMask(rt,U[Z])){if("H"===U[Z]&&Number(rt)>2){Z+=1,this._shiftStep(U,Z,gt.length),At--,this.leadZeroDateTime&&(Ee+="0");continue}if("h"===U[Z]&&"2"===Ee&&Number(rt)>3){Z+=1,At--;continue}if("m"===U[Z]&&Number(rt)>5){Z+=1,this._shiftStep(U,Z,gt.length),At--,this.leadZeroDateTime&&(Ee+="0");continue}if("s"===U[Z]&&Number(rt)>5){Z+=1,this._shiftStep(U,Z,gt.length),At--,this.leadZeroDateTime&&(Ee+="0");continue}const nn=31;if("d"===U[Z]&&(Number(rt)>3&&this.leadZeroDateTime||Number(j.slice(Z,Z+2))>nn||"/"===j[Z+1])){Z+=1,this._shiftStep(U,Z,gt.length),At--,this.leadZeroDateTime&&(Ee+="0");continue}if("M"===U[Z]){const sn=0===Z&&(Number(rt)>2||Number(j.slice(Z,Z+2))>12||"/"===j[Z+1]),wn=j.slice(Z-3,Z-1).includes("/")&&("/"===j[Z-2]&&Number(j.slice(Z-1,Z+1))>12&&"/"!==j[Z]||"/"===j[Z]||"/"===j[Z-3]&&Number(j.slice(Z-2,Z))>12&&"/"!==j[Z-1]||"/"===j[Z-1]),_n=Number(j.slice(Z-3,Z-1))<=nn&&!j.slice(Z-3,Z-1).includes("/")&&"/"===j[Z-1]&&(Number(j.slice(Z,Z+2))>12||"/"===j[Z+1]),Jn=Number(j.slice(Z-3,Z-1))>nn&&!j.slice(Z-3,Z-1).includes("/")&&!j.slice(Z-2,Z).includes("/")&&Number(j.slice(Z-2,Z))>12,Ln=Number(j.slice(Z-3,Z-1))<=nn&&!j.slice(Z-3,Z-1).includes("/")&&"/"!==j[Z-1]&&Number(j.slice(Z-1,Z+1))>12;if(Number(rt)>1&&this.leadZeroDateTime||sn||wn||_n||Jn||Ln){Z+=1,this._shiftStep(U,Z,gt.length),At--,this.leadZeroDateTime&&(Ee+="0");continue}}Ee+=rt,Z++}else-1!==this.maskSpecialCharacters.indexOf(U[Z])?(Ee+=U[Z],Z++,this._shiftStep(U,Z,gt.length),At--):this.maskSpecialCharacters.indexOf(rt)>-1&&this.maskAvailablePatterns[U[Z]]&&(null===(pe=this.maskAvailablePatterns[U[Z]])||void 0===pe?void 0:pe.optional)?(!!gt[Z]&&"099.099.099.099"!==U&&"000.000.000-00"!==U&&"00.000.000/0000-00"!==U&&!U.match(/^9+\.0+$/)&&(Ee+=gt[Z]),Z++,At--):"*"===this.maskExpression[Z+1]&&this._findSpecialChar(this.maskExpression[Z+2])&&this._findSpecialChar(rt)===this.maskExpression[Z+2]&&ue||"?"===this.maskExpression[Z+1]&&this._findSpecialChar(this.maskExpression[Z+2])&&this._findSpecialChar(rt)===this.maskExpression[Z+2]&&ue?(Z+=3,Ee+=rt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(rt)<0&&rt!==this.placeHolderCharacter&&(Ot=!0);Ee.length+1===U.length&&-1!==this.maskSpecialCharacters.indexOf(U[U.length-1])&&(Ee+=U[U.length-1]);let dt=J+1;for(;this._shift.has(dt);)Ne++,dt++;let it=he?Z:this._shift.has(J)?Ne:0;Ot&&it--,Pe(it,We),Ne<0&&this._shift.clear();let $t=!1;Oe&&($t=gt.every(At=>this.maskSpecialCharacters.includes(At)));let Ct=`${this.prefix}${$t?"":Ee}${this.suffix}`;return 0===Ee.length&&(Ct=`${this.prefix}${Ee}`),Ct}_findSpecialChar(j){return this.maskSpecialCharacters.find(U=>U===j)}_checkSymbolMask(j,U){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[U]&&this.maskAvailablePatterns[U].pattern&&this.maskAvailablePatterns[U].pattern.test(j)}_stripToDecimal(j){return j.split("").filter((U,J)=>U.match("^-?\\d")||U.match("\\s")||"."===U||","===U||"-"===U&&0===J&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(j){return j&&(" "===j?"\\s":"[\\^$.|?*+()".indexOf(j)>=0?`\\${j}`:j)}_shiftStep(j,U,J){const he=/[*?]/g.test(j.slice(0,U))?J:U;this._shift.add(he+this.prefix.length||0)}_compareOrIncludes(j,U,J){return Array.isArray(U)?U.filter(he=>he!==J).includes(j):j===U}}return Re.\u0275fac=function(j){return new(j||Re)(p.LFG(fe))},Re.\u0275prov=p.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),Ie=(()=>{class Re extends se{constructor(j,U,J,he){super(U),this.document=j,this._config=U,this._elementRef=J,this._renderer=he,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=Oe=>{}}applyMask(j,U,J=0,he=!1,Oe=!1,Pe=(()=>{})){if(!U)return j!==this.actualValue?this.actualValue:j;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(j||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(j||"#")),!j&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const Te=j&&"number"==typeof this.selStart?j[this.selStart]:"";let pe="";if(this.hiddenInput&&!this.writingValue){let We=this.actualValue.split("");""!==j&&We.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(j.length>We.length?We.splice(this.selStart,0,Te):j.length<We.length&&(We.length-j.length==1?We.splice(this.selStart-1,1):We.splice(this.selStart,this.selEnd-this.selStart))):We=[],this.showMaskTyped&&(j=this.removeMask(j)),pe=this.actualValue.length&&We.length<=j.length?this.shiftTypedSymbols(We.join("")):j}pe=Boolean(pe)&&pe.length?pe:j;const Z=super.applyMask(pe,U,J,he,Oe,Pe);if(this.actualValue=this.getActualValue(Z),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(We=>!this._compareOrIncludes(We,this.decimalMarker,this.thousandSeparator))),this.formControlResult(Z),!this.showMaskTyped)return this.hiddenInput&&Z&&Z.length?this.hideInput(Z,this.maskExpression):Z;const Ee=Z.length,ue=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const We=this._numberSkipedSymbols(Z);return Z+ue.slice(Ee+We)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?Z+ue:Z+ue.slice(Ee)}_numberSkipedSymbols(j){const U=/(^|\D)(\d\D)/g;let J=U.exec(j),he=0;for(;null!=J;)he+=1,J=U.exec(j);return he}applyValueChanges(j,U,J,he=(()=>{})){const Oe=this._elementRef.nativeElement;Oe.value=this.applyMask(Oe.value,this.maskExpression,j,U,J,he),Oe!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(j,U){return j.split("").map((J,he)=>{var Oe,Pe;return this.maskAvailablePatterns&&this.maskAvailablePatterns[U[he]]&&(null===(Oe=this.maskAvailablePatterns[U[he]])||void 0===Oe?void 0:Oe.symbol)?null===(Pe=this.maskAvailablePatterns[U[he]])||void 0===Pe?void 0:Pe.symbol:J}).join("")}getActualValue(j){const U=j.split("").filter((J,he)=>this._checkSymbolMask(J,this.maskExpression[he])||this.maskSpecialCharacters.includes(this.maskExpression[he])&&J===this.maskExpression[he]);return U.join("")===j?U.join(""):j}shiftTypedSymbols(j){let U="";return(j&&j.split("").map((he,Oe)=>{if(this.maskSpecialCharacters.includes(j[Oe+1])&&j[Oe+1]!==this.maskExpression[Oe+1])return U=he,j[Oe+1];if(U.length){const Pe=U;return U="",Pe}return he})||[]).join("")}numberToString(j){return j||0===j?Number(j).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(j)}showMaskInInput(j){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(j){if("IP"===this.maskExpression)return this._checkForIp(j);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(j)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const j=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==j.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(j.value,this.maskExpression))}set formElementProperty([j,U]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,j,U))}checkSpecialCharAmount(j){return j.split("").filter(J=>this._findSpecialChar(J)).length}removeMask(j){return this._removeMask(this._removeSuffix(this._removePrefix(j)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(j){var U;if("#"===j)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const J=[];for(let he=0;he<j.length;he++)(null===(U=j[he])||void 0===U?void 0:U.match("\\d"))&&J.push(j[he]);return J.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:J.length>3&&J.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:J.length>6&&J.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(j){var U;const J=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,he=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===j)return J;const Oe=[];for(let Pe=0;Pe<j.length;Pe++)(null===(U=j[Pe])||void 0===U?void 0:U.match("\\d"))&&Oe.push(j[Pe]);return Oe.length<=3?J.slice(Oe.length,J.length):Oe.length>3&&Oe.length<=6?J.slice(Oe.length+1,J.length):Oe.length>6&&Oe.length<=9?J.slice(Oe.length+2,J.length):Oe.length>9&&Oe.length<11?J.slice(Oe.length+3,J.length):11===Oe.length?"":12===Oe.length?he.slice(17===j.length?16:15,he.length):Oe.length>12&&Oe.length<=14?he.slice(Oe.length+4,he.length):""}formControlResult(j){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(j)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(j)):this._removeSuffix(j))}_toNumber(j){if(!this.isNumberValue||""===j)return j;const U=Number(j);return Number.isNaN(U)?j:U}_removeMask(j,U){return j&&j.replace(this._regExpForRemove(U),"")}_removePrefix(j){return this.prefix?j&&j.replace(this.prefix,""):j}_removeSuffix(j){return this.suffix?j&&j.replace(this.suffix,""):j}_retrieveSeparatorValue(j){return this._removeMask(this._removeSuffix(this._removePrefix(j)),this.maskSpecialCharacters)}_regExpForRemove(j){return new RegExp(j.map(U=>`\\${U}`).join("|"),"gi")}_checkSymbols(j){if(""===j)return j;const U=this._retrieveSeparatorPrecision(this.maskExpression);let J=this._retrieveSeparatorValue(j);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(J=J.replace(this.decimalMarker,".")),this.isNumberValue?U?j===this.decimalMarker?null:this._checkPrecision(this.maskExpression,J):Number(J):J}_retrieveSeparatorPrecision(j){const U=j.match(new RegExp("^separator\\.([^d]*)"));return U?Number(U[1]):null}_checkPrecision(j,U){return j.indexOf("2")>0?Number(U).toFixed(2):Number(U)}}return Re.\u0275fac=function(j){return new(j||Re)(p.LFG(ye.K0),p.LFG(fe),p.LFG(p.SBq),p.LFG(p.Qsj))},Re.\u0275prov=p.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),nt=(()=>{class Re{constructor(j,U,J){this.document=j,this._maskService=U,this._config=J,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new p.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=he=>{},this.onTouch=()=>{}}ngOnChanges(j){const{maskExpression:U,specialCharacters:J,patterns:he,prefix:Oe,suffix:Pe,thousandSeparator:Te,decimalMarker:pe,dropSpecialCharacters:Z,hiddenInput:Ee,showMaskTyped:ue,placeHolderCharacter:We,shownMaskExpression:Ne,showTemplate:Ot,clearIfNotMatch:gt,validation:Bt,separatorLimit:dt,allowNegativeNumbers:it,leadZeroDateTime:$t,triggerOnMaskChange:Ct}=j;if(U&&(U.currentValue!==U.previousValue&&!U.firstChange&&(this._maskService.maskChanged=!0),U.currentValue&&U.currentValue.split("||").length>1?(this._maskExpressionArray=U.currentValue.split("||").sort((At,rt)=>At.length-rt.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0]):(this._maskExpressionArray=[],this._maskValue=U.currentValue||"",this._maskService.maskExpression=this._maskValue)),J){if(!J.currentValue||!Array.isArray(J.currentValue))return;this._maskService.maskSpecialCharacters=J.currentValue||[]}he&&he.currentValue&&(this._maskService.maskAvailablePatterns=he.currentValue),Oe&&(this._maskService.prefix=Oe.currentValue),Pe&&(this._maskService.suffix=Pe.currentValue),Te&&(this._maskService.thousandSeparator=Te.currentValue),pe&&(this._maskService.decimalMarker=pe.currentValue),Z&&(this._maskService.dropSpecialCharacters=Z.currentValue),Ee&&(this._maskService.hiddenInput=Ee.currentValue),ue&&(this._maskService.showMaskTyped=ue.currentValue),We&&(this._maskService.placeHolderCharacter=We.currentValue),Ne&&(this._maskService.shownMaskExpression=Ne.currentValue),Ot&&(this._maskService.showTemplate=Ot.currentValue),gt&&(this._maskService.clearIfNotMatch=gt.currentValue),Bt&&(this._maskService.validation=Bt.currentValue),dt&&(this._maskService.separatorLimit=dt.currentValue),it&&(this._maskService.allowNegativeNumbers=it.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(At=>"-"!==At))),$t&&(this._maskService.leadZeroDateTime=$t.currentValue),Ct&&(this._maskService.triggerOnMaskChange=Ct.currentValue),this._applyMask()}validate({value:j}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(j);if(this._maskService.cpfCnpjError)return this._createValidationError(j);if(this._maskValue.startsWith("separator")||le.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Me.includes(this._maskValue))return this._validateTime(j);if(j&&j.toString().length>=1){let U=0;for(const J in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[J].optional&&(this._maskValue.indexOf(J)!==this._maskValue.lastIndexOf(J)?U+=this._maskValue.split("").filter(Oe=>Oe===J).join("").length:-1!==this._maskValue.indexOf(J)&&U++,-1!==this._maskValue.indexOf(J)&&j.toString().length>=this._maskValue.indexOf(J)||U===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&j.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&j.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&j.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(j);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const J=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-U:this._maskValue.length-U;if(j.toString().length<J)return this._createValidationError(j)}}return j&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(j){!j&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(j){const U=j.target;if(this._inputValue=U.value,this._setMask(),!this._maskValue)return void this.onChange(U.value);const J=1===U.selectionStart?U.selectionStart+this._maskService.prefix.length:U.selectionStart;let he=0,Oe=!1;if(this._maskService.applyValueChanges(J,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(Te,pe)=>{this._justPasted=!1,he=Te,Oe=pe}),this.document.activeElement!==U)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let Pe=this._position?this._inputValue.length+J+he:J+("Backspace"!==this._code||Oe?he:0);Pe>this._getActualInputLength()&&(Pe=this._getActualInputLength()),Pe<0&&(Pe=0),U.setSelectionRange(Pe,Pe),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(j){if(!this._maskValue)return;const U=j.target;null!==U&&null!==U.selectionStart&&U.selectionStart===U.selectionEnd&&U.selectionStart>this._maskService.prefix.length&&38!==j.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),U.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===U.value?(U.focus(),U.setSelectionRange(0,0)):U.selectionStart>this._maskService.actualValue.length&&U.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const Oe=U.value&&U.value!==this._maskService.prefix?U.value:this._maskService.prefix+this._maskService.maskIsShown;U.value!==Oe&&(U.value=Oe),(U.selectionStart||U.selectionEnd)<=this._maskService.prefix.length?U.selectionStart=this._maskService.prefix.length:U.selectionEnd>this._getActualInputLength()&&(U.selectionEnd=this._getActualInputLength())}onKeyDown(j){var U;if(!this._maskValue)return;this._code=j.code?j.code:j.key;const J=j.target;if(this._inputValue=J.value,this._setMask(),38===j.keyCode&&j.preventDefault(),37===j.keyCode||8===j.keyCode||46===j.keyCode){if(8===j.keyCode&&0===J.value.length&&(J.selectionStart=J.selectionEnd),8===j.keyCode&&0!==J.selectionStart)if(this.specialCharacters=(null===(U=this.specialCharacters)||void 0===U?void 0:U.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&J.selectionStart<=this.prefix.length)J.setSelectionRange(this.prefix.length,J.selectionEnd);else if(this._inputValue.length!==J.selectionStart&&1!==J.selectionStart)for(;this.specialCharacters.includes(this._inputValue[J.selectionStart-1].toString())&&(this.prefix.length>=1&&J.selectionStart>this.prefix.length||0===this.prefix.length);)J.setSelectionRange(J.selectionStart-1,J.selectionEnd);this.checkSelectionOnDeletion(J),this._maskService.prefix.length&&J.selectionStart<=this._maskService.prefix.length&&J.selectionEnd<=this._maskService.prefix.length&&j.preventDefault();const he=J.selectionStart;8===j.keyCode&&!J.readOnly&&0===he&&J.selectionEnd===J.value.length&&0!==J.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<J.selectionStart?J.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===j.keyCode&&j.ctrlKey||65===j.keyCode&&j.metaKey)&&(J.setSelectionRange(0,this._getActualInputLength()),j.preventDefault()),this._maskService.selStart=J.selectionStart,this._maskService.selEnd=J.selectionEnd}writeValue(j){return(0,K.mG)(this,void 0,void 0,function*(){"object"==typeof j&&null!==j&&"value"in j&&("disable"in j&&this.setDisabledState(Boolean(j.disable)),j=j.value),("number"==typeof j||this._maskValue.startsWith("separator"))&&(j=this._maskService.numberToString(j),Array.isArray(this.decimalMarker)||(j="."!==this.decimalMarker?j.replace(".",this.decimalMarker):j),this._maskService.isNumberValue=!0),"string"!=typeof j&&(j=""),this._inputValue=j,this._setMask(),j&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(j,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",j],this._inputValue=j})}registerOnChange(j){this.onChange=j,this._maskService.onChange=this.onChange}registerOnTouched(j){this.onTouch=j}checkSelectionOnDeletion(j){j.selectionStart=Math.min(Math.max(this.prefix.length,j.selectionStart),this._inputValue.length-this.suffix.length),j.selectionEnd=Math.min(Math.max(this.prefix.length,j.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(j){this._maskService.formElementProperty=["disabled",j]}_repeatPatternSymbols(j){return j.match(/{[0-9]+}/)&&j.split("").reduce((U,J,he)=>{if(this._start="{"===J?he:this._start,"}"!==J)return this._maskService._findSpecialChar(J)?U+J:U;this._end=he;const Oe=Number(j.slice(this._start+1,this._end));return U+new Array(Oe+1).join(j[this._start-1])},"")||j}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(j){const U=this._maskValue.split("").filter(J=>":"!==J).length;return j&&(0==+j[j.length-1]&&j.length<U||j.length<=U-2)?this._createValidationError(j):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(j){return{mask:{requiredMask:this._maskValue,actualValue:j}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(j=>{var U,J;const he=(null===(U=this._maskService.removeMask(this._inputValue))||void 0===U?void 0:U.length)<=(null===(J=this._maskService.removeMask(j))||void 0===J?void 0:J.length);if(this._inputValue&&he)return this._maskValue=j,this.maskExpression=j,this._maskService.maskExpression=j,he;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return Re.\u0275fac=function(j){return new(j||Re)(p.Y36(ye.K0),p.Y36(Ie),p.Y36(fe))},Re.\u0275dir=p.lG2({type:Re,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(j,U){1&j&&p.NdJ("paste",function(){return U.onPaste()})("ngModelChange",function(he){return U.onModelChange(he)})("input",function(he){return U.onInput(he)})("blur",function(){return U.onBlur()})("click",function(he){return U.onClick(he)})("keydown",function(he){return U.onKeyDown(he)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[p._Bn([{provide:Y.JU,useExisting:(0,p.Gpc)(()=>Re),multi:!0},{provide:Y.Cf,useExisting:(0,p.Gpc)(()=>Re),multi:!0},Ie]),p.TTD]}),Re})();function He(Re,mt){return Object.assign(Object.assign({},Re),mt instanceof Function?mt():mt)}let pt=(()=>{class Re{static forRoot(j){return{ngModule:Re,providers:[{provide:De,useValue:j},{provide:Ae,useValue:Se},{provide:fe,useFactory:He,deps:[Ae,De]},se]}}static forChild(){return{ngModule:Re}}}return Re.\u0275fac=function(j){return new(j||Re)},Re.\u0275mod=p.oAB({type:Re}),Re.\u0275inj=p.cJS({}),Re})();const Be="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Be.KeyboardEvent||(Be.KeyboardEvent=function(Re,mt){})},5861:(wt,Ue,P)=>{function p(Y,ye,fe,De,Ae,Se,Me){try{var le=Y[Se](Me),se=le.value}catch(Ie){return void fe(Ie)}le.done?ye(se):Promise.resolve(se).then(De,Ae)}function K(Y){return function(){var ye=this,fe=arguments;return new Promise(function(De,Ae){var Se=Y.apply(ye,fe);function Me(se){p(Se,De,Ae,Me,le,"next",se)}function le(se){p(Se,De,Ae,Me,le,"throw",se)}Me(void 0)})}}P.d(Ue,{Z:()=>K})}},wt=>{wt(wt.s=6213)}]);