"use strict";(self.webpackChunkclipit=self.webpackChunkclipit||[]).push([[179],{440:(Pt,ze,N)=>{N.d(ze,{nm:()=>Qn});var p=N(5813);N(5e3),N(5867);var L=N(5861),ee=N(9681),me=N(4859),Ge=N(2090),We=N(1877);const Fe=new Map,_e={activated:!1,tokenObservers:[]},Q={initialized:!1,enabled:!1};function Me(Se){return Fe.get(Se)||_e}function ae(Se,Te){Fe.set(Se,Te)}function Xe(){return Q}class $t{constructor(Te,Ke,ot,Dt,qt){if(this.operation=Te,this.retryPolicy=Ke,this.getWaitDuration=ot,this.lowerBound=Dt,this.upperBound=qt,this.pending=null,this.nextErrorWaitInterval=Dt,Dt>qt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Te){var Ke=this;return(0,L.Z)(function*(){Ke.stop();try{Ke.pending=new Ge.BH,yield function Mt(Se){return new Promise(Te=>{setTimeout(Te,Se)})}(Ke.getNextRun(Te)),Ke.pending.resolve(),yield Ke.pending.promise,Ke.pending=new Ge.BH,yield Ke.operation(),Ke.pending.resolve(),yield Ke.pending.promise,Ke.process(!0).catch(()=>{})}catch(ot){Ke.retryPolicy(ot)?Ke.process(!1).catch(()=>{}):Ke.stop()}})()}getNextRun(Te){if(Te)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ke=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ke}}}const lt=new Ge.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function tn(Se){if(!Me(Se).activated)throw lt.create("use-before-activation",{appName:Se.name})}function ft(Se,Te){return nn.apply(this,arguments)}function nn(){return(nn=(0,L.Z)(function*({url:Se,body:Te},Ke){const ot={"Content-Type":"application/json"},Dt=Ke.getImmediate({optional:!0});if(Dt){const ki=yield Dt.getHeartbeatsHeader();ki&&(ot["X-Firebase-Client"]=ki)}const qt={method:"POST",body:JSON.stringify(Te),headers:ot};let Fn,Pr;try{Fn=yield fetch(Se,qt)}catch(ki){throw lt.create("fetch-network-error",{originalErrorMessage:ki.message})}if(200!==Fn.status)throw lt.create("fetch-status-error",{httpStatus:Fn.status});try{Pr=yield Fn.json()}catch(ki){throw lt.create("fetch-parse-error",{originalErrorMessage:ki.message})}const $n=Pr.ttl.match(/^([\d.]+)(s)$/);if(!$n||!$n[2]||isNaN(Number($n[1])))throw lt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Pr.ttl}`});const Pi=1e3*Number($n[1]),Ii=Date.now();return{token:Pr.attestationToken,expireTimeMillis:Ii+Pi,issuedAtTimeMillis:Ii}})).apply(this,arguments)}function ur(Se,Te){const{projectId:Ke,appId:ot,apiKey:Dt}=Se.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Ke}/apps/${ot}:exchangeDebugToken?key=${Dt}`,body:{debug_token:Te}}}const zt="firebase-app-check-store";let xt=null;function Hr(){return xt||(xt=new Promise((Se,Te)=>{try{const Ke=indexedDB.open("firebase-app-check-database",1);Ke.onsuccess=ot=>{Se(ot.target.result)},Ke.onerror=ot=>{var Dt;Te(lt.create("storage-open",{originalErrorMessage:null===(Dt=ot.target.error)||void 0===Dt?void 0:Dt.message}))},Ke.onupgradeneeded=ot=>{0===ot.oldVersion&&ot.target.result.createObjectStore(zt,{keyPath:"compositeKey"})}}catch(Ke){Te(lt.create("storage-open",{originalErrorMessage:Ke.message}))}}),xt)}function xn(){return(xn=(0,L.Z)(function*(Se,Te){const ot=(yield Hr()).transaction(zt,"readwrite"),qt=ot.objectStore(zt).put({compositeKey:Se,value:Te});return new Promise((Fn,Pr)=>{qt.onsuccess=$n=>{Fn()},ot.onerror=$n=>{var Pi;Pr(lt.create("storage-set",{originalErrorMessage:null===(Pi=$n.target.error)||void 0===Pi?void 0:Pi.message}))}})})).apply(this,arguments)}const Fr=new We.Yd("@firebase/app-check");function Bn(Se,Te){return(0,Ge.hl)()?function nr(Se,Te){return function ei(Se,Te){return xn.apply(this,arguments)}(function pr(Se){return`${Se.options.appId}-${Se.name}`}(Se),Te)}(Se,Te).catch(Ke=>{Fr.warn(`Failed to write token to IndexedDB. Error: ${Ke}`)}):Promise.resolve()}function lr(){return Xe().enabled}function wn(){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,L.Z)(function*(){const Se=Xe();if(Se.enabled&&Se.token)return Se.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Bt={error:"UNKNOWN_ERROR"};function Yt(Se){return Ge.US.encodeString(JSON.stringify(Se),!1)}function In(Se){return rn.apply(this,arguments)}function rn(){return(rn=(0,L.Z)(function*(Se,Te=!1){const Ke=Se.app;tn(Ke);const ot=Me(Ke);let qt,Dt=ot.token;if(!Dt){const $n=yield ot.cachedTokenPromise;$n&&At($n)&&(Dt=$n)}if(!Te&&Dt&&At(Dt))return{token:Dt.token};let Pr,Fn=!1;if(lr()){ot.exchangeTokenPromise||(ot.exchangeTokenPromise=ft(ur(Ke,yield wn()),Se.heartbeatServiceProvider).then(Pi=>(ot.exchangeTokenPromise=void 0,Pi)),Fn=!0);const $n=yield ot.exchangeTokenPromise;return yield Bn(Ke,$n),ae(Ke,Object.assign(Object.assign({},ot),{token:$n})),{token:$n.token}}try{ot.exchangeTokenPromise||(ot.exchangeTokenPromise=ot.provider.getToken().then($n=>(ot.exchangeTokenPromise=void 0,$n)),Fn=!0),Dt=yield ot.exchangeTokenPromise}catch($n){"appCheck/throttled"===$n.code?Fr.warn($n.message):Fr.error($n),qt=$n}return Dt?(Pr={token:Dt.token},ae(Ke,Object.assign(Object.assign({},ot),{token:Dt})),yield Bn(Ke,Dt)):Pr=we(qt),Fn&&Le(Ke,Pr),Pr})).apply(this,arguments)}function te(Se,Te){const Ke=Me(Se),ot=Ke.tokenObservers.filter(Dt=>Dt.next!==Te);0===ot.length&&Ke.tokenRefresher&&Ke.tokenRefresher.isRunning()&&Ke.tokenRefresher.stop(),ae(Se,Object.assign(Object.assign({},Ke),{tokenObservers:ot}))}function Ee(Se){const{app:Te}=Se,Ke=Me(Te);let ot=Ke.tokenRefresher;ot||(ot=function Ze(Se){const{app:Te}=Se;return new $t((0,L.Z)(function*(){let ot;if(ot=Me(Te).token?yield In(Se,!0):yield In(Se),ot.error)throw ot.error}),()=>!0,()=>{const Ke=Me(Te);if(Ke.token){let ot=Ke.token.issuedAtTimeMillis+.5*(Ke.token.expireTimeMillis-Ke.token.issuedAtTimeMillis)+3e5;return ot=Math.min(ot,Ke.token.expireTimeMillis-3e5),Math.max(0,ot-Date.now())}return 0},3e4,96e4)}(Se),ae(Te,Object.assign(Object.assign({},Ke),{tokenRefresher:ot}))),!ot.isRunning()&&Ke.isTokenAutoRefreshEnabled&&ot.start()}function Le(Se,Te){const Ke=Me(Se).tokenObservers;for(const ot of Ke)try{"EXTERNAL"===ot.type&&null!=Te.error?ot.error(Te.error):ot.next(Te)}catch(Dt){}}function At(Se){return Se.expireTimeMillis-Date.now()>0}function we(Se){return{token:Yt(Bt),error:Se}}class de{constructor(Te,Ke){this.app=Te,this.heartbeatServiceProvider=Ke}_delete(){const{tokenObservers:Te}=Me(this.app);for(const Ke of Te)te(this.app,Ke.next);return Promise.resolve()}}const Or="app-check-internal";!function Cr(){(0,ee._registerComponent)(new me.wA("app-check",Se=>function se(Se,Te){return new de(Se,Te)}(Se.getProvider("app").getImmediate(),Se.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Se,Te,Ke)=>{Se.getProvider(Or).initialize()})),(0,ee._registerComponent)(new me.wA(Or,Se=>function be(Se){return{getToken:Te=>In(Se,Te),addTokenListener:Te=>function he(Se,Te,Ke,ot){const{app:Dt}=Se,qt=Me(Dt),Fn={next:Ke,error:ot,type:Te};if(ae(Dt,Object.assign(Object.assign({},qt),{tokenObservers:[...qt.tokenObservers,Fn]})),qt.token&&At(qt.token)){const Pr=qt.token;Promise.resolve().then(()=>{Ke({token:Pr.token}),Ee(Se)}).catch(()=>{})}qt.cachedTokenPromise.then(()=>Ee(Se))}(Se,"INTERNAL",Te),removeTokenListener:Te=>te(Se.app,Te)}}(Se.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)("@firebase/app-check","0.5.6")}();class Qn{constructor(){return(0,p.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Pt,ze,N)=>{N.d(ze,{zQ:()=>Ue,ww:()=>Kt,rT:()=>Q,f7:()=>ae,L6:()=>Fe,_Q:()=>_e,lh:()=>Me,Qv:()=>We,nw:()=>Xe});var p=N(5e3),H=N(7579),Y=N(9646),ve=N(9751),pe=N(8996),Ce=N(6451),Oe=N(6063);class Ae extends H.x{constructor(Gt=1/0,mt=1/0,Tt=Oe.l){super(),this._bufferSize=Gt,this._windowTime=mt,this._timestampProvider=Tt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=mt===1/0,this._bufferSize=Math.max(1,Gt),this._windowTime=Math.max(1,mt)}next(Gt){const{isStopped:mt,_buffer:Tt,_infiniteTimeWindow:$t,_timestampProvider:Mt,_windowTime:Ft}=this;mt||(Tt.push(Gt),!$t&&Tt.push(Mt.now()+Ft)),this._trimBuffer(),super.next(Gt)}_subscribe(Gt){this._throwIfClosed(),this._trimBuffer();const mt=this._innerSubscribe(Gt),{_infiniteTimeWindow:Tt,_buffer:$t}=this,Mt=$t.slice();for(let Ft=0;Ft<Mt.length&&!Gt.closed;Ft+=Tt?1:2)Gt.next(Mt[Ft]);return this._checkFinalizedStatuses(Gt),mt}_trimBuffer(){const{_bufferSize:Gt,_timestampProvider:mt,_buffer:Tt,_infiniteTimeWindow:$t}=this,Mt=($t?1:2)*Gt;if(Gt<1/0&&Mt<Tt.length&&Tt.splice(0,Tt.length-Mt),!$t){const Ft=mt.now();let lt=0;for(let pn=1;pn<Tt.length&&Tt[pn]<=Ft;pn+=2)lt=pn;lt&&Tt.splice(0,lt+1)}}}var Ve=N(3099);function le(bt,Gt,mt){let Tt,$t=!1;return bt&&"object"==typeof bt?({bufferSize:Tt=1/0,windowTime:Gt=1/0,refCount:$t=!1,scheduler:mt}=bt):Tt=null!=bt?bt:1/0,(0,Ve.B)({connector:()=>new Ae(Tt,Gt,mt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$t})}var ie=N(3900),ge=N(576);function Be(bt,Gt){return(0,ge.m)(Gt)?(0,ie.w)(()=>bt,Gt):(0,ie.w)(()=>bt)}var je=N(5363),qe=N(4004),ht=N(590),Ne=N(9468),Re=N(9300),Et=N(5813),$=N(2011),L=N(9808),ee=N(440),me=N(127);const We=new p.OlP("angularfire2.auth.use-emulator"),Fe=new p.OlP("angularfire2.auth.settings"),_e=new p.OlP("angularfire2.auth.tenant-id"),Q=new p.OlP("angularfire2.auth.langugage-code"),Me=new p.OlP("angularfire2.auth.use-device-language"),ae=new p.OlP("angularfire.auth.persistence"),Xe=(bt,Gt,mt,Tt,$t,Mt,Ft,lt)=>(0,$.cc)(`${bt.name}.auth`,"AngularFireAuth",bt.name,()=>{const pn=Gt.runOutsideAngular(()=>bt.auth());if(mt&&pn.useEmulator(...mt),Tt&&(pn.tenantId=Tt),pn.languageCode=$t,Mt&&pn.useDeviceLanguage(),Ft)for(const[tn,yn]of Object.entries(Ft))pn.settings[tn]=yn;return lt&&pn.setPersistence(lt),pn},[mt,Tt,$t,Mt,Ft,lt]);let Ue=(()=>{class bt{constructor(mt,Tt,$t,Mt,Ft,lt,pn,tn,yn,qn,Vn,ft){const nn=new H.x,Lt=(0,Y.of)(void 0).pipe((0,je.Q)(Ft.outsideAngular),(0,ie.w)(()=>Mt.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,820)))),(0,qe.U)(()=>(0,$.on)(mt,Mt,Tt)),(0,qe.U)(En=>Xe(En,Mt,lt,tn,yn,qn,pn,Vn)),le({bufferSize:1,refCount:!1}));if((0,L.PM)($t))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Y.of)(null);else{Lt.pipe((0,ht.P)()).subscribe();const ur=Lt.pipe((0,ie.w)(zt=>zt.getRedirectResult().then(On=>On,()=>null)),Et.iC,le({bufferSize:1,refCount:!1})),Un=Lt.pipe((0,ie.w)(zt=>new ve.y(On=>({unsubscribe:Mt.runOutsideAngular(()=>zt.onAuthStateChanged(xt=>On.next(xt),xt=>On.error(xt),()=>On.complete()))})))),Wt=Lt.pipe((0,ie.w)(zt=>new ve.y(On=>({unsubscribe:Mt.runOutsideAngular(()=>zt.onIdTokenChanged(xt=>On.next(xt),xt=>On.error(xt),()=>On.complete()))}))));this.authState=ur.pipe(Be(Un),(0,Ne.R)(Ft.outsideAngular),(0,je.Q)(Ft.insideAngular)),this.user=ur.pipe(Be(Wt),(0,Ne.R)(Ft.outsideAngular),(0,je.Q)(Ft.insideAngular)),this.idToken=this.user.pipe((0,ie.w)(zt=>zt?(0,pe.D)(zt.getIdToken()):(0,Y.of)(null))),this.idTokenResult=this.user.pipe((0,ie.w)(zt=>zt?(0,pe.D)(zt.getIdTokenResult()):(0,Y.of)(null))),this.credential=(0,Ce.T)(ur,nn,this.authState.pipe((0,Re.h)(zt=>!zt))).pipe((0,qe.U)(zt=>(null==zt?void 0:zt.user)?zt:null),(0,Ne.R)(Ft.outsideAngular),(0,je.Q)(Ft.insideAngular))}return(0,$.pX)(this,Lt,Mt,{spy:{apply:(En,ur,Un)=>{(En.startsWith("signIn")||En.startsWith("createUser"))&&Un.then(Wt=>nn.next(Wt))}}})}}return bt.\u0275fac=function(mt){return new(mt||bt)(p.LFG($.Dh),p.LFG($.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Et.HU),p.LFG(We,8),p.LFG(Fe,8),p.LFG(_e,8),p.LFG(Q,8),p.LFG(Me,8),p.LFG(ae,8),p.LFG(ee.nm,8))},bt.\u0275prov=p.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"any"}),bt})(),Kt=(()=>{class bt{constructor(){me.Z.registerVersion("angularfire",Et.q4.full,"auth-compat")}}return bt.\u0275fac=function(mt){return new(mt||bt)},bt.\u0275mod=p.oAB({type:bt}),bt.\u0275inj=p.cJS({providers:[Ue]}),bt})()},7566:(Pt,ze,N)=>{N.d(ze,{ST:()=>Zc,yb:()=>q_});var p=N(5e3),H=N(4986),Y=N(9751),ve=N(8996),pe=N(9646),Ce=N(5813),Oe=N(4482),Ae=N(5403);function Ve(){return(0,Oe.e)((i,e)=>{let t,o=!1;i.subscribe((0,Ae.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var le=N(4671);function ge(i,e){return i===e}var Q,Be=N(8675),je=N(4004),qe=N(5026),ht=N(9300),Ne=N(2011),Re=N(9808),$=(N(820),N(3942)),L=N(5861),ee=N(9681),me=N(4859),Ge=N(1877),We=N(2090),Fe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_e={},Me=Me||{},ae=Fe||self;function Xe(){}function Ue(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Kt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Gt="closure_uid_"+(1e9*Math.random()>>>0),mt=0;function Tt(i,e,t){return i.call.apply(i.bind,arguments)}function $t(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Mt(i,e,t){return(Mt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Tt:$t).apply(null,arguments)}function Ft(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function lt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var m=Array(arguments.length-2),D=2;D<arguments.length;D++)m[D-2]=arguments[D];return e.prototype[u].apply(o,m)}}function pn(){this.s=this.s,this.o=this.o}var yn={};pn.prototype.s=!1,pn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function bt(i){return Object.prototype.hasOwnProperty.call(i,Gt)&&i[Gt]||(i[Gt]=++mt)}(this);delete yn[i]}},pn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Vn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function nn(i){return Array.prototype.concat.apply([],arguments)}function Lt(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function En(i){return/^[\s\xa0]*$/.test(i)}var zt,ur=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Un(i,e){return-1!=i.indexOf(e)}function Wt(i,e){return i<e?-1:i>e?1:0}e:{var On=ae.navigator;if(On){var xt=On.userAgent;if(xt){zt=xt;break e}}zt=""}function Hr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function Mr(i){const e={};for(const t in i)e[t]=i[t];return e}var nr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xr(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<nr.length;d++)t=nr[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function hi(i){return hi[" "](i),i}hi[" "]=Xe;var Bn,i,xn=Un(zt,"Opera"),Nt=Un(zt,"Trident")||Un(zt,"MSIE"),cn=Un(zt,"Edge"),pr=cn||Nt,Fr=Un(zt,"Gecko")&&!(Un(zt.toLowerCase(),"webkit")&&!Un(zt,"Edge"))&&!(Un(zt,"Trident")||Un(zt,"MSIE"))&&!Un(zt,"Edge"),_n=Un(zt.toLowerCase(),"webkit")&&!Un(zt,"Edge");function Yn(){var i=ae.document;return i?i.documentMode:void 0}e:{var gr="",Qt=(i=zt,Fr?/rv:([^\);]+)(\)|;)/.exec(i):cn?/Edge\/([\d\.]+)/.exec(i):Nt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):_n?/WebKit\/(\S+)/.exec(i):xn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Qt&&(gr=Qt?Qt[1]:""),Nt){var lr=Yn();if(null!=lr&&lr>parseFloat(gr)){Bn=String(lr);break e}}Bn=gr}var wn={};var Yt=ae.document&&Nt&&(Yn()||parseInt(Bn,10))||void 0,In=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ae.addEventListener("test",Xe,e),ae.removeEventListener("test",Xe,e)}catch(t){}return i}();function rn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function he(i,e){if(rn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Fr){e:{try{hi(e.nodeName);var u=!0;break e}catch(d){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:te[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&he.Z.h.call(this)}}rn.prototype.h=function(){this.defaultPrevented=!0},lt(he,rn);var te={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function Le(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++Ze,this.ca=this.fa=!1}function At(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function we(i){this.src=i,this.g={},this.h=0}function de(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=qn(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(At(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function se(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}we.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var m=se(i,e,o,u);return-1<m?(e=i[m],t||(e.fa=!1)):((e=new Le(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var be="closure_lm_"+(1e6*Math.random()|0),rt={};function Ct(i,e,t,o,u){if(o&&o.once)return rr(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Ct(i,e[d],t,o,u);return null}return t=yt(t),i&&i[Ee]?i.N(e,t,Kt(o)?!!o.capture:!!o,u):Jt(i,e,t,!1,o,u)}function Jt(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var m=Kt(u)?!!u.capture:!!u,D=wi(i);if(D||(i[be]=D=new we(i)),(t=D.add(e,t,o,m,d)).proxy)return t;if(o=function Pn(){var e=wr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)In||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(sr(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function rr(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)rr(i,e[d],t,o,u);return null}return t=yt(t),i&&i[Ee]?i.O(e,t,Kt(o)?!!o.capture:!!o,u):Jt(i,e,t,!0,o,u)}function ti(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)ti(i,e[d],t,o,u);else o=Kt(o)?!!o.capture:!!o,t=yt(t),i&&i[Ee]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=se(d=i.g[e],t,o,u))&&(At(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=wi(i))&&(e=i.g[e.toString()],i=-1,e&&(i=se(e,t,o,u)),(t=-1<i?e[i]:null)&&ir(t))}function ir(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Ee])de(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(sr(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=wi(e))?(de(t,i),0==t.h&&(t.src=null,e[be]=null)):At(i)}}}function sr(i){return i in rt?rt[i]:rt[i]="on"+i}function wr(i,e){if(i.ca)i=!0;else{e=new he(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&ir(i),i=t.call(o,e)}return i}function wi(i){return(i=i[be])instanceof we?i:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(i){return"function"==typeof i?i:(i[Kr]||(i[Kr]=function(e){return i.handleEvent(e)}),i[Kr])}function en(){pn.call(this),this.i=new we(this),this.P=this,this.I=null}function vn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new rn(e,i);else if(e instanceof rn)e.target=e.target||i;else{var u=e;xr(e=new rn(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];u=Dr(m,o,!0,e)&&u}if(u=Dr(m=e.g=i,o,!0,e)&&u,u=Dr(m,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=Dr(m=e.g=t[d],o,!1,e)&&u}function Dr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.ca&&m.capture==t){var D=m.listener,B=m.ia||m.src;m.fa&&de(i.i,m),u=!1!==D.call(B,o)&&u}}return u&&!o.defaultPrevented}lt(en,pn),en.prototype[Ee]=!0,en.prototype.removeEventListener=function(i,e,t,o){ti(this,i,e,t,o)},en.prototype.M=function(){if(en.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)At(t[o]);delete i.g[e],i.h--}}this.I=null},en.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},en.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var ni=ae.JSON.stringify;function Rr(){var i=Or;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Gr,Wn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new mr,i=>i.reset());class mr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Lr(i){ae.setTimeout(()=>{throw i},0)}function gn(i,e){Gr||function Ri(){var i=ae.Promise.resolve(void 0);Gr=function(){i.then(Cr)}}(),ns||(Gr(),ns=!0),Or.add(i,e)}var ns=!1,Or=new class ci{constructor(){this.h=this.g=null}add(e,t){const o=Wn.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Cr(){for(var i;i=Rr();){try{i.h.call(i.g)}catch(t){Lr(t)}var e=Wn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}ns=!1}function ri(i,e){en.call(this),this.h=i||1,this.g=e||ae,this.j=Mt(this.kb,this),this.l=Date.now()}function qr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Qn(i,e,t){if("function"==typeof i)t&&(i=Mt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Mt(i.handleEvent,i)}return 2147483647<Number(e)?-1:ae.setTimeout(i,e||0)}function zn(i){i.g=Qn(()=>{i.g=null,i.i&&(i.i=!1,zn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}lt(ri,en),(Q=ri.prototype).da=!1,Q.S=null,Q.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vn(this,"tick"),this.da&&(qr(this),this.start()))}},Q.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Q.M=function(){ri.Z.M.call(this),qr(this),delete this.g};class ls extends pn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zn(this)}M(){super.M(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ii(i){pn.call(this),this.h=i,this.g={}}lt(ii,pn);var Wr=[];function fi(i,e,t,o){Array.isArray(t)||(t&&(Wr[0]=t.toString()),t=Wr);for(var u=0;u<t.length;u++){var d=Ct(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function Wi(i){Hr(i.g,function(e,t){this.g.hasOwnProperty(t)&&ir(e)},i),i.g={}}function yr(){this.g=!0}function Oi(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _s(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<u.length;m++)u[m]=""}}}return ni(t)}catch(D){return e}}(i,t)+(o?" "+o:"")})}ii.prototype.M=function(){ii.Z.M.call(this),Wi(this)},ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yr.prototype.Aa=function(){this.g=!1},yr.prototype.info=function(){};var jn={},Os=null;function Ps(){return Os=Os||new en}function Se(i){rn.call(this,jn.Ma,i)}function Te(i){const e=Ps();vn(e,new Se(e,i))}function Ke(i,e){rn.call(this,jn.STAT_EVENT,i),this.stat=e}function ot(i){const e=Ps();vn(e,new Ke(e,i))}function Dt(i,e){rn.call(this,jn.Na,i),this.size=e}function qt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){i()},e)}jn.Ma="serverreachability",lt(Se,rn),jn.STAT_EVENT="statevent",lt(Ke,rn),jn.Na="timingevent",lt(Dt,rn);var Fn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Pr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $n(){}function Ii(){}$n.prototype.h=null;var bs,ki={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vs(){rn.call(this,"d")}function zi(){rn.call(this,"c")}function gi(){}function Di(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new ii(this),this.P=rs,this.W=new ri(i=pr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new br}function br(){this.i=null,this.g="",this.h=!1}lt(vs,rn),lt(zi,rn),lt(gi,$n),gi.prototype.g=function(){return new XMLHttpRequest},gi.prototype.i=function(){return{}},bs=new gi;var rs=45e3,Ki={},qi={};function ks(i,e,t){i.K=1,i.v=Rt(G(e)),i.s=t,i.U=!0,no(i,null)}function no(i,e){i.F=Date.now(),Zi(i),i.A=G(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),os(t.h,"t",o),i.C=0,t=i.l.H,i.h=new br,i.g=Ga(i.l,t?e:null,!i.s),0<i.O&&(i.L=new ls(Mt(i.Ia,i,i.g),i.O)),fi(i.V,i.g,"readystatechange",i.gb),e=i.H?Mr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Te(1),function Cs(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var m="",D=d.split("&"),B=0;B<D.length;B++){var z=D[B].split("=");if(1<z.length){var ue=z[0];z=z[1];var De=ue.split("_");m=2<=De.length&&"type"==De[1]?m+(ue+"=")+z+"&":m+(ue+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Ni(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function is(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Zr(i,t),u==qi){4==e&&(i.o=4,ot(14),o=!1),Oi(i.j,i.m,null,"[Incomplete Response]");break}if(u==Ki){i.o=4,ot(15),Oi(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Oi(i.j,i.m,u,null),As(i,u)}Ni(i)&&u!=qi&&u!=Ki&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,ot(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ia(e),e.L=!0,ot(11))):(Oi(i.j,i.m,t,"[Invalid Chunked Response]"),cs(i),Vr(i))}function Zr(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?qi:(t=Number(e.substring(t,o)),isNaN(t)?Ki:(o+=1)+t>e.length?qi:(e=e.substr(o,t),i.C=o+t,e))}function Zi(i){i.Y=Date.now()+i.P,Ts(i,i.P)}function Ts(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=qt(Mt(i.eb,i),e)}function Tr(i){i.B&&(ae.clearTimeout(i.B),i.B=null)}function Vr(i){0==i.l.G||i.I||oo(i.l,i)}function cs(i){Tr(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,qr(i.W),Wi(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function As(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Ye(t.i,i)))if(t.I=i.N,!i.J&&Ye(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(z){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=qt(Mt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;Es(t),Ro(t)}oi(t),ot(18)}if(1>=xe(t.i)&&t.ka){try{t.ka()}catch(z){}t.ka=void 0}}else xs(t,11)}else if((i.J||t.g==i)&&Es(t),!En(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let z=u[e];if(t.U=z[0],z=z[1],2==t.G)if("c"==z[0]){t.J=z[1],t.la=z[2];const ue=z[3];null!=ue&&(t.ma=ue,t.h.info("VER="+t.ma));const De=z[4];null!=De&&(t.za=De,t.h.info("SVER="+t.za));const et=z[5];null!=et&&"number"==typeof et&&0<et&&(t.K=o=1.5*et,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const vt=i.g;if(vt){const wt=vt.g?vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wt){var d=o.i;!d.g&&(Un(wt,"spdy")||Un(wt,"quic")||Un(wt,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(pt(d,d.h),d.h=null))}if(o.D){const ln=vt.g?vt.g.getResponseHeader("X-HTTP-Session-Id"):null;ln&&(o.sa=ln,tt(o.F,o.D,ln))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var m=i;if((o=t).oa=Gs(o,o.H?o.la:null,o.W),m.J){sn(o.i,m);var D=m,B=o.K;B&&D.setTimeout(B),D.B&&(Tr(D),Zi(D)),o.g=m}else Fs(o);0<t.l.length&&Ti(t)}else"stop"!=z[0]&&"close"!=z[0]||xs(t,7);else 3==t.G&&("stop"==z[0]||"close"==z[0]?"stop"==z[0]?xs(t,7):si(t):"noop"!=z[0]&&t.j&&t.j.wa(z),t.A=0)}Te(4)}catch(z){}}function Yr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ue(i)||"string"==typeof i)Vn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Ue(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function Ss(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ue(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function ss(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof ss)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function di(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];mi(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)mi(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function mi(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(Q=Di.prototype).setTimeout=function(i){this.P=i},Q.gb=function(i){i=i.target;const e=this.L;e&&3==Ns(i)?e.l():this.Ia(i)},Q.Ia=function(i){try{if(i==this.g)e:{const ue=Ns(this.g);var e=this.g.Da();const De=this.g.ba();if(!(3>ue)&&(3!=ue||pr||this.g&&(this.h.h||this.g.ga()||so(this.g)))){this.I||4!=ue||7==e||Te(8==e||0>=De?3:2),Tr(this);var t=this.g.ba();this.N=t;t:if(Ni(this)){var o=so(this.g);i="";var u=o.length,d=4==Ns(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){cs(this),Vr(this);var m="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.ga();if(this.i=200==t,function pi(i,e,t,o,u,d,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.X,ue,t),this.i){if(this.$&&!this.J){t:{if(this.g){var D,B=this.g;if((D=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!En(D)){var z=D;break t}}z=null}if(!(t=z)){this.i=!1,this.o=3,ot(12),cs(this),Vr(this);break e}Oi(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,As(this,t)}this.U?(is(this,ue,m),pr&&this.i&&3==ue&&(fi(this.V,this.W,"tick",this.fb),this.W.start())):(Oi(this.j,this.m,m,null),As(this,m)),4==ue&&cs(this),this.i&&!this.I&&(4==ue?oo(this.l,this):(this.i=!1,Zi(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,ot(12)):(this.o=0,ot(13)),cs(this),Vr(this)}}}catch(ue){}},Q.fb=function(){if(this.g){var i=Ns(this.g),e=this.g.ga();this.C<e.length&&(Tr(this),is(this,i,e),this.i&&4!=i&&Zi(this))}},Q.cancel=function(){this.I=!0,cs(this)},Q.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function ys(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Te(3),ot(17)),cs(this),this.o=2,Vr(this)):Ts(this,this.Y-i)},(Q=ss.prototype).R=function(){di(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},Q.T=function(){return di(this),this.g.concat()},Q.get=function(i,e){return mi(this.h,i)?this.h[i]:e},Q.set=function(i,e){mi(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},Q.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var Ms=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function R(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof R){this.g=void 0!==e?e:i.g,x(this,i.j),this.s=i.s,Z(this,i.i),fe(this,i.m),this.l=i.l,e=i.h;var t=new q;t.i=e.i,e.g&&(t.g=new ss(e.g),t.h=e.h),Je(this,t),this.o=i.o}else i&&(t=String(i).match(Ms))?(this.g=!!e,x(this,t[1]||"",!0),this.s=Cn(t[2]||""),Z(this,t[3]||"",!0),fe(this,t[4]),this.l=Cn(t[5]||"",!0),Je(this,t[6]||"",!0),this.o=Cn(t[7]||"")):(this.g=!!e,this.h=new q(null,this.g))}function G(i){return new R(i)}function x(i,e,t){i.j=t?Cn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Z(i,e,t){i.i=t?Cn(e,!0):e}function fe(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Je(i,e,t){e instanceof q?(i.h=e,function ro(i,e){e&&!i.j&&(nt(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(on(this,o),os(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Sn(e,A)),i.h=new q(e,i.g))}function tt(i,e,t){i.h.set(e,t)}function Rt(i){return tt(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Cn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Sn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Ur),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ur(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}R.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Sn(e,_r,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Sn(e,_r,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Sn(t,"/"==t.charAt(0)?k:vr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Sn(t,C)),i.join("")};var _r=/[#\/\?@]/g,vr=/[#\?:]/g,k=/[#\?]/g,A=/[#\?@]/g,C=/#/g;function q(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function nt(i){i.g||(i.g=new ss,i.h=0,i.i&&function cr(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function on(i,e){nt(i),e=Ci(i,e),mi(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,mi((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&di(i)))}function dr(i,e){return nt(i),e=Ci(i,e),mi(i.g.h,e)}function os(i,e,t){on(i,e),0<t.length&&(i.i=null,i.g.set(Ci(i,e),Lt(t)),i.h+=t.length)}function Ci(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function O(i){this.l=i||J,i=ae.PerformanceNavigationTiming?0<(i=ae.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ae.g&&ae.g.Ea&&ae.g.Ea()&&ae.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Q=q.prototype).add=function(i,e){nt(this),this.i=null,i=Ci(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Q.forEach=function(i,e){nt(this),this.g.forEach(function(t,o){Vn(t,function(u){i.call(e,u,o,this)},this)},this)},Q.T=function(){nt(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},Q.R=function(i){nt(this);var e=[];if("string"==typeof i)dr(this,i)&&(e=nn(e,this.g.get(Ci(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=nn(e,i[t])}return e},Q.set=function(i,e){return nt(this),this.i=null,dr(this,i=Ci(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Q.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var m=u;""!==o[d]&&(m+="="+encodeURIComponent(String(o[d]))),i.push(m)}}return this.i=i.join("&")};var J=10;function oe(i){return!!i.h||!!i.g&&i.g.size>=i.j}function xe(i){return i.h?1:i.g?i.g.size:0}function Ye(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function pt(i,e){i.g?i.g.add(e):i.h=e}function sn(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ht(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Lt(i.i)}function Dn(){}function Kn(){this.g=new Dn}function kr(i,e,t){const o=t||"";try{Yr(i,function(u,d){let m=u;Kt(u)&&(m=ni(u)),e.push(o+d+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Zn(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(d){}}function tr(i){this.l=i.$b||null,this.j=i.ib||!1}function yi(i,e){en.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Er,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}O.prototype.cancel=function(){if(this.i=Ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Dn.prototype.stringify=function(i){return ae.JSON.stringify(i,void 0)},Dn.prototype.parse=function(i){return ae.JSON.parse(i,void 0)},lt(tr,$n),tr.prototype.g=function(){return new yi(this.l,this.j)},tr.prototype.i=function(i){return function(){return i}}({}),lt(yi,en);var Er=0;function Qr(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Yi(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Br(i)}function Br(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Q=yi.prototype).open=function(i,e){if(this.readyState!=Er)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Br(this)},Q.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ae).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yi(this)),this.readyState=Er},Q.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Br(this)),this.g&&(this.readyState=3,Br(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ae.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qr(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Q.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Yi(this):Br(this),3==this.readyState&&Qr(this)}},Q.Ua=function(i){this.g&&(this.response=this.responseText=i,Yi(this))},Q.Ta=function(i){this.g&&(this.response=i,Yi(this))},Q.ha=function(){this.g&&Yi(this)},Q.setRequestHeader=function(i,e){this.v.append(i,e)},Q.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Q.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(yi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Xr=ae.JSON.parse;function Ir(i){en.call(this),this.headers=new ss,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ds,this.K=this.L=!1}lt(Ir,en);var ds="",io=/^https?$/i,js=["POST","PUT"];function $a(i){return"content-type"==i.toLowerCase()}function Ho(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,go(i),$s(i)}function go(i){i.D||(i.D=!0,vn(i,"complete"),vn(i,"error"))}function ta(i){if(i.h&&void 0!==Me&&(!i.C[1]||4!=Ns(i)||2!=i.ba()))if(i.v&&4==Ns(i))Qn(i.Fa,0,i);else if(vn(i,"readystatechange"),4==Ns(i)){i.h=!1;try{const D=i.ba();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(Ms)[1]||null;if(!u&&ae.self&&ae.self.location){var d=ae.self.location.protocol;u=d.substr(0,d.length-1)}o=!io.test(u?u.toLowerCase():"")}t=o}if(t)vn(i,"complete"),vn(i,"success");else{i.m=6;try{var m=2<Ns(i)?i.g.statusText:""}catch(B){m=""}i.j=m+" ["+i.ba()+"]",go(i)}}finally{$s(i)}}}function $s(i,e){if(i.g){Ia(i);const t=i.g,o=i.C[0]?Xe:null;i.g=null,i.C=null,e||vn(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function Ia(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ae.clearTimeout(i.A),i.A=null)}function Ns(i){return i.g?i.g.readyState:0}function so(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ds:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function na(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function mu(i){let e="";return Hr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):tt(i,e,t))}function bi(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function xo(i){this.za=0,this.l=[],this.h=new yr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bi("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bi("baseRetryDelayMs",5e3,i),this.$a=bi("retryDelaySeedMs",1e4,i),this.Ya=bi("forwardChannelMaxRetries",2,i),this.ra=bi("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new O(i&&i.concurrentRequestLimit),this.Ca=new Kn,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function si(i){if(Jl(i),3==i.G){var e=i.V++,t=G(i.F);tt(t,"SID",i.J),tt(t,"RID",e),tt(t,"TYPE","terminate"),Qi(i,t),(e=new Di(i,i.h,e,void 0)).K=2,e.v=Rt(G(t)),t=!1,ae.navigator&&ae.navigator.sendBeacon&&(t=ae.navigator.sendBeacon(e.v.toString(),"")),!t&&ae.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ga(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Zi(e)}mo(i)}function Ro(i){i.g&&(ia(i),i.g.cancel(),i.g=null)}function Jl(i){Ro(i),i.u&&(ae.clearTimeout(i.u),i.u=null),Es(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ae.clearTimeout(i.m),i.m=null)}function yu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Ti(i)}function Ti(i){oe(i.i)||i.m||(i.m=!0,gn(i.Ha,i),i.C=0)}function ra(i,e){var t;t=e?e.m:i.V++;const o=G(i.F);tt(o,"SID",i.J),tt(o,"RID",t),tt(o,"AID",i.U),Qi(i,o),i.o&&i.s&&na(o,i.o,i.s),t=new Di(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Hs(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),pt(i.i,t),ks(t,o,e)}function Qi(i,e){i.j&&Yr({},function(t,o){tt(e,o,t)})}function Hs(i,e,t){t=Math.min(i.l.length,t);var o=i.j?Mt(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=u[0].h,m.push("ofs="+d)):d=0:m.push("ofs="+d);let D=!0;for(let B=0;B<t;B++){let z=u[B].h;const ue=u[B].g;if(z-=d,0>z)d=Math.max(0,u[B].h-100),D=!1;else try{kr(ue,m,"req"+z+"_")}catch(De){o&&o(ue)}}if(D){o=m.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Fs(i){i.g||i.u||(i.Y=1,gn(i.Ga,i),i.A=0)}function oi(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=qt(Mt(i.Ga,i),sa(i,i.A)),i.A++,0))}function ia(i){null!=i.B&&(ae.clearTimeout(i.B),i.B=null)}function Ha(i){i.g=new Di(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=G(i.oa);tt(e,"RID","rpc"),tt(e,"SID",i.J),tt(e,"CI",i.N?"0":"1"),tt(e,"AID",i.U),Qi(i,e),tt(e,"TYPE","xmlhttp"),i.o&&i.s&&na(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Rt(G(e)),t.s=null,t.U=!0,no(t,i)}function Es(i){null!=i.v&&(ae.clearTimeout(i.v),i.v=null)}function oo(i,e){var t=null;if(i.g==e){Es(i),ia(i),i.g=null;var o=2}else{if(!Ye(i.i,e))return;t=e.D,sn(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;vn(o=Ps(),new Dt(o,t,e,u)),Ti(i)}else Fs(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function ec(i,e){return!(xe(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=qt(Mt(i.Ha,i,e),sa(i,i.C)),i.C++,0)))}(i,e)||2==o&&oi(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:xs(i,5);break;case 4:xs(i,10);break;case 3:xs(i,6);break;default:xs(i,2)}}function sa(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function xs(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=Mt(i.jb,i);t||(t=new R("//www.google.com/images/cleardot.gif"),ae.location&&"http"==ae.location.protocol||x(t,"https"),Rt(t)),function hr(i,e){const t=new yr;if(ae.Image){const o=new Image;o.onload=Ft(Zn,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Ft(Zn,t,o,"TestLoadImage: error",!1,e),o.onabort=Ft(Zn,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Ft(Zn,t,o,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else ot(2);i.G=0,i.j&&i.j.va(e),mo(i),Jl(i)}function mo(i){i.G=0,i.I=-1,i.j&&((0!=Ht(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Lt(i.l),i.l.length=0),i.j.ua())}function Gs(i,e,t){let o=function Xn(i){return i instanceof R?G(i):new R(i,void 0)}(t);if(""!=o.i)e&&Z(o,e+"."+o.i),fe(o,o.m);else{const u=ae.location;o=function Hn(i,e,t,o){var u=new R(null,void 0);return i&&x(u,i),e&&Z(u,e),t&&fe(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&Hr(i.aa,function(u,d){tt(o,d,u)}),t=i.sa,(e=i.D)&&t&&tt(o,e,t),tt(o,"VER",i.ma),Qi(i,o),o}function Ga(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ir(t&&i.Ba&&!i.qa?new tr({ib:!0}):i.qa)).L=i.H,e}function _u(){}function vu(){if(Nt&&!(10<=Number(Yt)))throw Error("Environmental error: no available transport.")}function Nr(i,e){en.call(this),this.g=new xo(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!En(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!En(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new yo(this)}function Da(i){vs.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ws(){zi.call(this),this.status=1}function yo(i){this.g=i}(Q=Ir.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():bs.g(),this.C=function Pi(i){return i.h||(i.h=i.i())}(this.u?this.u:bs),this.g.onreadystatechange=Mt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void Ho(this,d)}i=t||"";const u=new ss(this.headers);o&&Yr(o,function(d,m){u.set(m,d)}),o=function ft(i){e:{var e=$a;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=ae.FormData&&i instanceof ae.FormData,!(0<=qn(js,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,m){this.g.setRequestHeader(m,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ia(this),0<this.B&&((this.K=function Mo(i){return Nt&&function Ut(){return function ei(i){var e=wn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=ur(String(Bn)).split("."),t=ur("9").split("."),o=Math.max(e.length,t.length);for(let m=0;0==i&&m<o;m++){var u=e[m]||"",d=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=Wt(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||Wt(0==u[2].length,0==d[2].length)||Wt(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mt(this.pa,this)):this.A=Qn(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){Ho(this,d)}},Q.pa=function(){void 0!==Me&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vn(this,"timeout"),this.abort(8))},Q.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,vn(this,"complete"),vn(this,"abort"),$s(this))},Q.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$s(this,!0)),Ir.Z.M.call(this)},Q.Fa=function(){this.s||(this.F||this.v||this.l?ta(this):this.cb())},Q.cb=function(){ta(this)},Q.ba=function(){try{return 2<Ns(this)?this.g.status:-1}catch(i){return-1}},Q.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Q.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Xr(e)}},Q.Da=function(){return this.m},Q.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Q=xo.prototype).ma=8,Q.G=1,Q.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},Q.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new Di(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=Mr(d),xr(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Hs(this,u,e),tt(t=G(this.F),"RID",i),tt(t,"CVER",22),this.D&&tt(t,"X-HTTP-Session-Id",this.D),Qi(this,t),this.o&&d&&na(t,this.o,d),pt(this.i,u),this.Ra&&tt(t,"TYPE","init"),this.ja?(tt(t,"$req",e),tt(t,"SID","null"),u.$=!0,ks(u,t,null)):ks(u,t,e),this.G=2}}else 3==this.G&&(i?ra(this,i):0==this.l.length||oe(this.i)||ra(this))},Q.Ga=function(){if(this.u=null,Ha(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=qt(Mt(this.bb,this),i)}},Q.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ot(10),Ro(this),Ha(this))},Q.ab=function(){null!=this.v&&(this.v=null,Ro(this),oi(this),ot(19))},Q.jb=function(i){i?(this.h.info("Successfully pinged google.com"),ot(2)):(this.h.info("Failed to ping google.com"),ot(1))},(Q=_u.prototype).xa=function(){},Q.wa=function(){},Q.va=function(){},Q.ua=function(){},Q.Oa=function(){},vu.prototype.g=function(i,e){return new Nr(i,e)},lt(Nr,en),Nr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),gn(Mt(i.hb,i,e))),ot(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Gs(i,null,i.W),Ti(i)},Nr.prototype.close=function(){si(this.g)},Nr.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,yu(this.g,e)}else this.v?((e={}).__data__=ni(i),yu(this.g,e)):yu(this.g,i)},Nr.prototype.M=function(){this.g.j=null,delete this.j,si(this.g),delete this.g,Nr.Z.M.call(this)},lt(Da,vs),lt(Ws,zi),lt(yo,_u),yo.prototype.xa=function(){vn(this.g,"a")},yo.prototype.wa=function(i){vn(this.g,new Da(i))},yo.prototype.va=function(i){vn(this.g,new Ws(i))},yo.prototype.ua=function(){vn(this.g,"b")},vu.prototype.createWebChannel=vu.prototype.g,Nr.prototype.send=Nr.prototype.u,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,Fn.NO_ERROR=0,Fn.TIMEOUT=8,Fn.HTTP_ERROR=6,Pr.COMPLETE="complete",Ii.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",en.prototype.listen=en.prototype.N,Ir.prototype.listenOnce=Ir.prototype.O,Ir.prototype.getLastError=Ir.prototype.La,Ir.prototype.getLastErrorCode=Ir.prototype.Da,Ir.prototype.getStatus=Ir.prototype.ba,Ir.prototype.getResponseJson=Ir.prototype.Qa,Ir.prototype.getResponseText=Ir.prototype.ga,Ir.prototype.send=Ir.prototype.ea;var Go=_e.createWebChannelTransport=function(){return new vu},Wo=_e.getStatEventTarget=function(){return Ps()},Ca=_e.ErrorCode=Fn,jr=_e.EventType=Pr,Wa=_e.Event=jn,Ls=_e.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ba=_e.FetchXmlHttpFactory=tr,Rs=_e.WebChannel=Ii,tc=_e.XhrIo=Ir;const Eu="@firebase/firestore";class I{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}I.UNAUTHENTICATED=new I(null),I.GOOGLE_CREDENTIALS=new I("google-credentials-uid"),I.FIRST_PARTY=new I("first-party-uid"),I.MOCK_USER=new I("mock-user");let E="9.6.11";const _=new Ge.Yd("@firebase/firestore");function S(){return _.logLevel}function j(i,...e){if(_.logLevel<=Ge.in.DEBUG){const t=e.map(at);_.debug(`Firestore (${E}): ${i}`,...t)}}function ne(i,...e){if(_.logLevel<=Ge.in.ERROR){const t=e.map(at);_.error(`Firestore (${E}): ${i}`,...t)}}function ye(i,...e){if(_.logLevel<=Ge.in.WARN){const t=e.map(at);_.warn(`Firestore (${E}): ${i}`,...t)}}function at(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function st(i="Unexpected state"){const e=`FIRESTORE (${E}) INTERNAL ASSERTION FAILED: `+i;throw ne(e),new Error(e)}function Ot(i,e){i||st()}function _t(i,e){return i}const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gt extends We.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ws{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(I.UNAUTHENTICATED))}shutdown(){}}class _o{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Iu{constructor(e){this.t=e,this.currentUser=I.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=z=>this.i!==u?(u=this.i,t(z)):Promise.resolve();let m=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new $r,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const z=m;e.enqueueRetryable((0,L.Z)(function*(){yield z.promise,yield d(o.currentUser)}))},B=z=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=z,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(z=>B(z)),setTimeout(()=>{if(!this.auth){const z=this.t.getImmediate({optional:!0});z?B(z):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new $r)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ot("string"==typeof o.accessToken),new ws(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ot(null===e||"string"==typeof e),new I(e)}}class vo{constructor(e,t,o){this.type="FirstParty",this.user=I.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class nc{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new vo(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(I.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Du{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=d=>{null!=d.error&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.p;return this.p=d.token,j("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.g.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.g.getImmediate({optional:!0});d?u(d):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ot("string"==typeof t.token),this.p=t.token,new oa(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Xi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ao(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}Xi.A=-1;class rc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=ao(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function kn(i,e){return i<e?-1:i>e?1:0}function uo(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function za(i){return i+"\0"}class Fi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new gt($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new gt($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new gt($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gt($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fi.fromMillis(Date.now())}static fromDate(e){return Fi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Fi(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kn(this.nanoseconds,e.nanoseconds):kn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class an{constructor(e){this.timestamp=e}static fromTimestamp(e){return new an(e)}static min(){return new an(new Fi(0,0))}static max(){return new an(new Fi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Yc(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ka(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Qc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ta{constructor(e,t,o){void 0===t?t=0:t>e.length&&st(),void 0===o?o=e.length-t:o>e.length-t&&st(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Ta.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ta?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),m=t.get(u);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fr extends Ta{construct(e,t,o){return new fr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new gt($e.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new fr(t)}static emptyPath(){return new fr([])}}const zd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class as extends Ta{construct(e,t,o){return new as(e,t,o)}static isValidIdentifier(e){return zd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),as.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new as(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new gt($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let m=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new gt($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const B=e[u+1];if("\\"!==B&&"."!==B&&"`"!==B)throw new gt($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=B,u+=2}else"`"===D?(m=!m,u++):"."!==D||m?(o+=D,u++):(d(),u++)}if(d(),m)throw new gt($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new as(t)}static emptyPath(){return new as([])}}class zs{constructor(e){this.fields=e,e.sort(as.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Jn(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new Jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const ll=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(i){if(Ot(!!i),"string"==typeof i){let e=0;const t=ll.exec(i);if(Ot(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ai(i.seconds),nanos:Ai(i.nanos)}}function Ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Oo(i){return"string"==typeof i?Jn.fromBase64String(i):Jn.fromUint8Array(i)}function Ji(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Us(i){const e=i.mapValue.fields.__previous_value__;return Ji(e)?Us(e):e}function Aa(i){const e=Vs(i.mapValue.fields.__local_write_time__.timestampValue);return new Fi(e.seconds,e.nanos)}class zo{constructor(e,t,o,u,d,m,D,B){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=D,this.useFetchStreams=B}}class Ui{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ui("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ui&&e.projectId===this.projectId&&e.database===this.database}}function hs(i){return null==i}function Po(i){return 0===i&&1/i==-1/0}function Cu(i){return"number"==typeof i&&Number.isInteger(i)&&!Po(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Vt{constructor(e){this.path=e}static fromPath(e){return new Vt(fr.fromString(e))}static fromName(e){return new Vt(fr.fromString(e).popFirst(5))}static empty(){return new Vt(fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Vt(new fr(e.slice()))}}const cl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bu={nullValue:"NULL_VALUE"};function Bi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ji(i)?4:qo(i)?9:10:st()}function lo(i,e){if(i===e)return!0;const t=Bi(i);if(t!==Bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Aa(i).isEqual(Aa(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Vs(o.timestampValue),m=Vs(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Oo(i.bytesValue).isEqual(Oo(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Ai(o.geoPointValue.latitude)===Ai(u.geoPointValue.latitude)&&Ai(o.geoPointValue.longitude)===Ai(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ai(o.integerValue)===Ai(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Ai(o.doubleValue),m=Ai(u.doubleValue);return d===m?Po(d)===Po(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return uo(i.arrayValue.values||[],e.arrayValue.values||[],lo);case 10:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Yc(d)!==Yc(m))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===m[D]||!lo(d[D],m[D])))return!1;return!0}(i,e);default:return st()}var u}function Eo(i,e){return void 0!==(i.values||[]).find(t=>lo(t,e))}function ko(i,e){if(i===e)return 0;const t=Bi(i),o=Bi(e);if(t!==o)return kn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return kn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=Ai(u.integerValue||u.doubleValue),D=Ai(d.integerValue||d.doubleValue);return m<D?-1:m>D?1:m===D?0:isNaN(m)?isNaN(D)?0:-1:1}(i,e);case 3:return Ko(i.timestampValue,e.timestampValue);case 4:return Ko(Aa(i),Aa(e));case 5:return kn(i.stringValue,e.stringValue);case 6:return function(u,d){const m=Oo(u),D=Oo(d);return m.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),D=d.split("/");for(let B=0;B<m.length&&B<D.length;B++){const z=kn(m[B],D[B]);if(0!==z)return z}return kn(m.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=kn(Ai(u.latitude),Ai(d.latitude));return 0!==m?m:kn(Ai(u.longitude),Ai(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const m=u.values||[],D=d.values||[];for(let B=0;B<m.length&&B<D.length;++B){const z=ko(m[B],D[B]);if(z)return z}return kn(m.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){const m=u.fields||{},D=Object.keys(m),B=d.fields||{},z=Object.keys(B);D.sort(),z.sort();for(let ue=0;ue<D.length&&ue<z.length;++ue){const De=kn(D[ue],z[ue]);if(0!==De)return De;const et=ko(m[D[ue]],B[z[ue]]);if(0!==et)return et}return kn(D.length,z.length)}(i.mapValue,e.mapValue);default:throw st()}}function Ko(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return kn(i,e);const t=Vs(i),o=Vs(e),u=kn(t.seconds,o.seconds);return 0!==u?u:kn(t.nanos,o.nanos)}function No(i){return dl(i)}function dl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Vs(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Oo(i.bytesValue).toBase64():"referenceValue"in i?Vt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const m of o.values||[])d?d=!1:u+=",",u+=dl(m);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",m=!0;for(const D of u)m?m=!1:d+=",",d+=`${D}:${dl(o.fields[D])}`;return d+"}"}(i.mapValue):st();var e}function Fo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function co(i){return!!i&&"integerValue"in i}function qa(i){return!!i&&"arrayValue"in i}function Ks(i){return!!i&&"nullValue"in i}function Tu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Sa(i){return!!i&&"mapValue"in i}function ua(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ka(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=ua(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ua(i.arrayValue.values[t]);return e}return Object.assign({},i)}function qo(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Za(i){return"nullValue"in i?bu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Fo(Ui.empty(),Vt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:st()}function hl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Fo(Ui.empty(),Vt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?cl:st()}function T(i,e){return void 0===i?e:void 0===e||ko(i,e)>0?i:e}function P(i,e){return void 0===i?e:void 0===e||ko(i,e)<0?i:e}class K{constructor(e){this.value=e}static empty(){return new K({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Sa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(t)}setAll(e){let t=as.emptyPath(),o={},u=[];e.forEach((m,D)=>{if(!t.isImmediateParentOf(D)){const B=this.getFieldsMap(t);this.applyChanges(B,o,u),o={},u=[],t=D.popLast()}m?o[D.lastSegment()]=ua(m):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Sa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Sa(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ka(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new K(ua(this.value))}}function ce(i){const e=[];return Ka(i.fields,(t,o)=>{const u=new as([t]);if(Sa(o)){const d=ce(o.mapValue).fields;if(0===d.length)e.push(u);else for(const m of d)e.push(u.child(m))}else e.push(u)}),new zs(e)}class Pe{constructor(e,t,o,u,d,m){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Pe(e,0,an.min(),an.min(),K.empty(),0)}static newFoundDocument(e,t,o){return new Pe(e,1,t,an.min(),o,0)}static newNoDocument(e,t){return new Pe(e,2,t,an.min(),K.empty(),0)}static newUnknownDocument(e,t){return new Pe(e,3,t,an.min(),K.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=K.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=K.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pe(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qe{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function St(i){return i.fields.find(e=>2===e.kind)}function Xt(i){return i.fields.filter(e=>2!==e.kind)}Qe.UNKNOWN_ID=-1;class dn{constructor(e,t){this.fieldPath=e,this.kind=t}}class bn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bn(0,zr.min())}}function or(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=an.fromTimestamp(1e9===o?new Fi(t+1,0):new Fi(t,o));return new zr(u,Vt.empty(),e)}function Nn(i){return new zr(i.readTime,i.key,-1)}class zr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new zr(an.min(),Vt.empty(),-1)}static max(){return new zr(an.max(),Vt.empty(),-1)}}function Li(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Vt.comparator(i.documentKey,e.documentKey),0!==t?t:kn(i.largestBatchId,e.largestBatchId))}class Ma{constructor(e,t=null,o=[],u=[],d=null,m=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=D,this.P=null}}function Ya(i,e=null,t=[],o=[],u=null,d=null,m=null){return new Ma(i,e,t,o,u,d,m)}function fs(i){const e=_t(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+No(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),hs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>No(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>No(o)).join(",")),e.P=t}return e.P}function qs(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Pf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!lo(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Qd(i.startAt,e.startAt)&&Qd(i.endAt,e.endAt)}function wo(i){return Vt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function fl(i,e){return i.filters.filter(t=>t instanceof Vi&&t.field.isEqual(e))}function Xc(i,e,t){let o,u=!0;for(const d of fl(i,e)){let m,D=!0;switch(d.op){case"<":case"<=":m=Za(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,D=!1;break;case"!=":case"not-in":m=bu}T(o,m)===m&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];T(o,m)===m&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}function pl(i,e,t){let o,u=!0;for(const d of fl(i,e)){let m,D=!0;switch(d.op){case">=":case">":m=hl(d.value),D=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,D=!1;break;case"!=":case"not-in":m=cl}P(o,m)===m&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];P(o,m)===m&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}class Vi extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new qd(e,t,o):"array-contains"===t?new gl(e,o):"in"===t?new Rf(e,o):"not-in"===t?new Of(e,o):"array-contains-any"===t?new Zd(e,o):new Vi(e,t,o)}static V(e,t,o){return"in"===t?new Mf(e,o):new xf(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ko(t,this.value)):null!==t&&Bi(this.value)===Bi(t)&&this.v(ko(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class qd extends Vi{constructor(e,t,o){super(e,t,o),this.key=Vt.fromName(o.referenceValue)}matches(e){const t=Vt.comparator(e.key,this.key);return this.v(t)}}class Mf extends Vi{constructor(e,t){super(e,"in",t),this.keys=la(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xf extends Vi{constructor(e,t){super(e,"not-in",t),this.keys=la(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function la(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Vt.fromName(o.referenceValue))}class gl extends Vi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qa(t)&&Eo(t.arrayValue,this.value)}}class Rf extends Vi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Eo(this.value.arrayValue,t)}}class Of extends Vi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Eo(this.value.arrayValue,t)}}class Zd extends Vi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>Eo(this.value.arrayValue,o))}}class Lo{constructor(e,t){this.position=e,this.inclusive=t}}class ml{constructor(e,t="asc"){this.field=e,this.dir=t}}function Pf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Yd(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],m=i.position[u];if(o=d.field.isKeyField()?Vt.comparator(Vt.fromName(m.referenceValue),t.key):ko(m,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Qd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!lo(i.position[t],e.position[t]))return!1;return!0}class Io{constructor(e,t=null,o=[],u=[],d=null,m="F",D=null,B=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=D,this.endAt=B,this.D=null,this.C=null}}function ic(i,e,t,o,u,d,m,D){return new Io(i,e,t,o,u,d,m,D)}function Vo(i){return new Io(i)}function sc(i){return!hs(i.limit)&&"F"===i.limitType}function Au(i){return!hs(i.limit)&&"L"===i.limitType}function Xd(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Su(i){for(const e of i.filters)if(e.S())return e.field;return null}function yl(i){return null!==i.collectionGroup}function Qa(i){const e=_t(i);if(null===e.D){e.D=[];const t=Su(e),o=Xd(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new ml(t)),e.D.push(new ml(as.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.D.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ml(as.keyField(),d))}}}return e.D}function fo(i){const e=_t(i);if(!e.C)if("F"===e.limitType)e.C=Ya(e.path,e.collectionGroup,Qa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Qa(e))t.push(new ml(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Lo(e.endAt.position,!e.endAt.inclusive):null,u=e.startAt?new Lo(e.startAt.position,!e.startAt.inclusive):null;e.C=Ya(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function oc(i,e,t){return new Io(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Uo(i,e){return qs(fo(i),fo(e))&&i.limitType===e.limitType}function Jd(i){return`${fs(fo(i))}|lt:${i.limitType}`}function Jc(i){return`Query(target=${function ho(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${No(o.value)}`;var o}).join(", ")}]`),hs(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>No(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>No(t)).join(",")),`Target(${e})`}(fo(i))}; limitType=${i.limitType})`}function ed(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Vt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,m){const D=Yd(u,d,m);return u.inclusive?D<=0:D<0}(t.startAt,Qa(t),o)||t.endAt&&!function(u,d,m){const D=Yd(u,d,m);return u.inclusive?D>=0:D>0}(t.endAt,Qa(t),o)));var t,o}function ac(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function eh(i){return(e,t)=>{let o=!1;for(const u of Qa(i)){const d=Bo(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Bo(i,e,t){const o=i.field.isKeyField()?Vt.comparator(e.key,t.key):function(u,d,m){const D=d.data.field(u),B=m.data.field(u);return null!==D&&null!==B?ko(D,B):st()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return st()}}function Xa(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Po(e)?"-0":e}}function uc(i){return{integerValue:""+i}}function th(i,e){return Cu(e)?uc(e):Xa(i,e)}class Mu{constructor(){this._=void 0}}function kf(i,e,t){return i instanceof Ja?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof eu?rh(i,e):i instanceof xu?xa(i,e):function(o,u){const d=td(o,u),m=ih(d)+ih(o.k);return co(d)&&co(o.k)?uc(m):Xa(o.M,m)}(i,e)}function nh(i,e,t){return i instanceof eu?rh(i,e):i instanceof xu?xa(i,e):t}function td(i,e){return i instanceof _l?co(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Ja extends Mu{}class eu extends Mu{constructor(e){super(),this.elements=e}}function rh(i,e){const t=Ra(e);for(const o of i.elements)t.some(u=>lo(u,o))||t.push(o);return{arrayValue:{values:t}}}class xu extends Mu{constructor(e){super(),this.elements=e}}function xa(i,e){let t=Ra(e);for(const o of i.elements)t=t.filter(u=>!lo(u,o));return{arrayValue:{values:t}}}class _l extends Mu{constructor(e,t){super(),this.M=e,this.k=t}}function ih(i){return Ai(i.integerValue||i.doubleValue)}function Ra(i){return qa(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ru{constructor(e,t){this.field=e,this.transform=t}}class vl{constructor(e,t){this.version=e,this.transformResults=t}}class ji{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ji}static exists(e){return new ji(void 0,e)}static updateTime(e){return new ji(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class El{}function xg(i,e,t){i instanceof nu?function(o,u,d){const m=o.value.clone(),D=wl(o.fieldTransforms,u,d.transformResults);m.setAll(D),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof Ou?function(o,u,d){if(!tu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=wl(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(sh(o)),D.setAll(m),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function lc(i,e,t){var u;i instanceof nu?function(o,u,d){if(!tu(o.precondition,u))return;const m=o.value.clone(),D=oh(o.fieldTransforms,d,u);m.setAll(D),u.convertToFoundDocument(dc(u),m).setHasLocalMutations()}(i,e,t):i instanceof Ou?function(o,u,d){if(!tu(o.precondition,u))return;const m=oh(o.fieldTransforms,d,u),D=u.data;D.setAll(sh(o)),D.setAll(m),u.convertToFoundDocument(dc(u),D).setHasLocalMutations()}(i,e,t):tu(i.precondition,u=e)&&u.convertToNoDocument(an.min())}function Rg(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=td(o.transform,u||null);null!=d&&(null==t&&(t=K.empty()),t.set(o.field,d))}return t||null}function cc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&uo(t,o,(u,d)=>function Do(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof eu&&o instanceof eu||t instanceof xu&&o instanceof xu?uo(t.elements,o.elements,lo):t instanceof _l&&o instanceof _l?lo(t.k,o.k):t instanceof Ja&&o instanceof Ja);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function dc(i){return i.isFoundDocument()?i.version:an.min()}class nu extends El{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class Ou extends El{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}}function sh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function wl(i,e,t){const o=new Map;Ot(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],m=d.transform,D=e.data.field(d.field);o.set(d.field,nh(m,D,t[u]))}return o}function oh(i,e,t){const o=new Map;for(const u of i){const d=u.transform,m=t.data.field(u.field);o.set(u.field,kf(d,m,e))}return o}class Il extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Dl extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class nd{constructor(e){this.count=e}}var $i,ar;function Pu(i){switch(i){default:return st();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function hc(i){if(void 0===i)return ne("GRPC error has no .code"),$e.UNKNOWN;switch(i){case $i.OK:return $e.OK;case $i.CANCELLED:return $e.CANCELLED;case $i.UNKNOWN:return $e.UNKNOWN;case $i.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case $i.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case $i.INTERNAL:return $e.INTERNAL;case $i.UNAVAILABLE:return $e.UNAVAILABLE;case $i.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case $i.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case $i.NOT_FOUND:return $e.NOT_FOUND;case $i.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case $i.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case $i.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case $i.ABORTED:return $e.ABORTED;case $i.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case $i.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case $i.DATA_LOSS:return $e.DATA_LOSS;default:return st()}}(ar=$i||($i={}))[ar.OK=0]="OK",ar[ar.CANCELLED=1]="CANCELLED",ar[ar.UNKNOWN=2]="UNKNOWN",ar[ar.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ar[ar.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ar[ar.NOT_FOUND=5]="NOT_FOUND",ar[ar.ALREADY_EXISTS=6]="ALREADY_EXISTS",ar[ar.PERMISSION_DENIED=7]="PERMISSION_DENIED",ar[ar.UNAUTHENTICATED=16]="UNAUTHENTICATED",ar[ar.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ar[ar.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ar[ar.ABORTED=10]="ABORTED",ar[ar.OUT_OF_RANGE=11]="OUT_OF_RANGE",ar[ar.UNIMPLEMENTED=12]="UNIMPLEMENTED",ar[ar.INTERNAL=13]="INTERNAL",ar[ar.UNAVAILABLE=14]="UNAVAILABLE",ar[ar.DATA_LOSS=15]="DATA_LOSS";class Oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Qc(this.inner)}size(){return this.innerSize}}class er{constructor(e,t){this.comparator=e,this.root=t||Is.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Is.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Is.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cl(this.root,e,this.comparator,!0)}}class Cl{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Is{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=null!=o?o:Is.RED,this.left=null!=u?u:Is.EMPTY,this.right=null!=d?d:Is.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new Is(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Is.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Is.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Is.EMPTY=null,Is.RED=!0,Is.BLACK=!1,Is.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(i,e,t,o,u){return this}insert(i,e,t){return new Is(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jr{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rd(this.data.getIterator())}getIteratorFrom(e){return new rd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Jr)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Jr(this.comparator);return t.data=e,t}}class rd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ku(i){return i.hasNext()?i.getNext():void 0}const fc=new er(Vt.comparator);function Co(){return fc}const ah=new er(Vt.comparator);function id(){return ah}function pc(){return new Oa(i=>i.toString(),(i,e)=>i.isEqual(e))}const Og=new er(Vt.comparator),bl=new Jr(Vt.comparator);function Ln(...i){let e=bl;for(const t of i)e=e.add(t);return e}const Tl=new Jr(kn);function ru(){return Tl}class iu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,es.createSynthesizedTargetChangeForCurrentChange(e,t)),new iu(an.min(),o,ru(),Co(),Ln())}}class es{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new es(Jn.EMPTY_BYTE_STRING,t,Ln(),Ln(),Ln())}}class Zo{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class gc{constructor(e,t){this.targetId=e,this.$=t}}class Zs{constructor(e,t,o=Jn.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class Nu{constructor(){this.B=0,this.L=Al(),this.U=Jn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Ln(),t=Ln(),o=Ln();return this.L.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:st()}}),new es(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=Al()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class sd{constructor(e){this.nt=e,this.st=new Map,this.it=Co(),this.rt=uh(),this.ot=new Jr(kn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const d=u.target;if(wo(d))if(0===o){const m=new Vt(d.path);this.ct(t,m,Pe.newNoDocument(m,an.min()))}else Ot(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((d,m)=>{const D=this.wt(m);if(D){if(d.current&&wo(D.target)){const B=new Vt(D.target.path);null!==this.it.get(B)||this.It(m,B)||this.ct(m,B,Pe.newNoDocument(B,e))}d.j&&(t.set(m,d.H()),d.J())}});let o=Ln();this.rt.forEach((d,m)=>{let D=!0;m.forEachWhile(B=>{const z=this.wt(B);return!z||2===z.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.it.forEach((d,m)=>m.setReadTime(e));const u=new iu(e,t,this.ot,this.it,o);return this.it=Co(),this.rt=uh(),this.ot=new Jr(kn),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Nu,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Jr(kn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||j("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Nu),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function uh(){return new er(Vt.comparator)}function Al(){return new er(Vt.comparator)}const od={asc:"ASCENDING",desc:"DESCENDING"},lh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ch{constructor(e,t){this.databaseId=e,this.N=t}}function Sl(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jo(i,e){return i.N?e.toBase64():e.toUint8Array()}function dh(i,e){return Sl(i,e.toTimestamp())}function ps(i){return Ot(!!i),an.fromTimestamp(function(e){const t=Vs(e);return new Fi(t.seconds,t.nanos)}(i))}function Ml(i,e){return(t=i,new fr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function hh(i){const e=fr.fromString(i);return Ot(Tn(e)),e}function Fu(i,e){return Ml(i.databaseId,e.path)}function ai(i,e){const t=hh(e);if(t.get(1)!==i.databaseId.projectId)throw new gt($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new gt($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Vt(Yo(t))}function xl(i,e){return Ml(i.databaseId,e)}function mc(i){const e=hh(i);return 4===e.length?fr.emptyPath():Yo(e)}function Rl(i){return new fr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Yo(i){return Ot(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Lu(i,e,t){return{name:Fu(i,e),fields:t.value.mapValue.fields}}function yc(i,e,t){const o=ai(i,e.name),u=ps(e.updateTime),d=new K({mapValue:{fields:e.fields}}),m=Pe.newFoundDocument(o,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function su(i,e){let t;if(e instanceof nu)t={update:Lu(i,e.key,e.value)};else if(e instanceof Il)t={delete:Fu(i,e.key)};else if(e instanceof Ou)t={update:Lu(i,e.key,e.data),updateMask:fn(e.fieldMask)};else{if(!(e instanceof Dl))return st();t={verify:Fu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const m=d.transform;if(m instanceof Ja)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof eu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof xu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof _l)return{fieldPath:d.field.canonicalString(),increment:m.k};throw st()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:dh(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:st()),t;var u}function ad(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?ji.updateTime(ps(u.updateTime)):void 0!==u.exists?ji.exists(u.exists):ji.none():ji.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,m){let D=null;"setToServerValue"in m?(Ot("REQUEST_TIME"===m.setToServerValue),D=new Ja):"appendMissingElements"in m?D=new eu(m.appendMissingElements.values||[]):"removeAllFromArray"in m?D=new xu(m.removeAllFromArray.values||[]):"increment"in m?D=new _l(d,m.increment):st();const B=as.fromServerFormat(m.fieldPath);return new Ru(B,D)}(i,u)):[];var u;if(e.update){const u=ai(i,e.update.name),d=new K({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new zs((e.updateMask.fieldPaths||[]).map(z=>as.fromServerFormat(z)));return new Ou(u,d,m,t,o)}return new nu(u,d,t,o)}if(e.delete){const u=ai(i,e.delete);return new Il(u,t)}if(e.verify){const u=ai(i,e.verify);return new Dl(u,t)}return st()}function ph(i,e){return{documents:[xl(i,e.path)]}}function gh(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=xl(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xl(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(B){if(0===B.length)return;const z=B.map(ue=>function(De){if("=="===De.op){if(Tu(De.value))return{unaryFilter:{field:X(De.field),op:"IS_NAN"}};if(Ks(De.value))return{unaryFilter:{field:X(De.field),op:"IS_NULL"}}}else if("!="===De.op){if(Tu(De.value))return{unaryFilter:{field:X(De.field),op:"IS_NOT_NAN"}};if(Ks(De.value))return{unaryFilter:{field:X(De.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:X(De.field),op:V(De.op),value:De.value}}}(ue));return 1===z.length?z[0]:{compositeFilter:{op:"AND",filters:z}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(B){if(0!==B.length)return B.map(z=>{return{field:X((ue=z).field),direction:v(ue.dir)};var ue})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=(z=e.limit,i.N||hs(z)?z:{value:z});var z,D,B;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(B=e.endAt).inclusive,values:B.position}),t}function g(i){let e=mc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){Ot(1===o);const ue=t.from[0];ue.allDescendants?u=ue.collectionId:e=e.child(ue.collectionId)}let d=[];t.where&&(d=f(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(ue=>{return new ml(ke((De=ue).field),function(et){switch(et){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(De.direction));var De}));let D=null;t.limit&&(D=function(ue){let De;return De="object"==typeof ue?ue.value:ue,hs(De)?null:De}(t.limit));let B=null;var ue;t.startAt&&(B=new Lo((ue=t.startAt).values||[],!!ue.before));let z=null;return t.endAt&&(z=function(ue){return new Lo(ue.values||[],!ue.before)}(t.endAt)),ic(e,u,m,d,D,"F",B,z)}function f(i){return i?void 0!==i.unaryFilter?[jt(i)]:void 0!==i.fieldFilter?[it(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>f(e)).reduce((e,t)=>e.concat(t)):st():[]}function v(i){return od[i]}function V(i){return lh[i]}function X(i){return{fieldPath:i.canonicalString()}}function ke(i){return as.fromServerFormat(i.fieldPath)}function it(i){return Vi.create(ke(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(i.fieldFilter.op),i.fieldFilter.value)}function jt(i){switch(i.unaryFilter.op){case"IS_NAN":const e=ke(i.unaryFilter.field);return Vi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ke(i.unaryFilter.field);return Vi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ke(i.unaryFilter.field);return Vi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ke(i.unaryFilter.field);return Vi.create(u,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function fn(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Tn(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function un(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=po(e)),e=Si(i.get(t),e);return po(e)}function Si(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function po(i){return i+"\x01\x01"}function Ys(i){const e=i.length;if(Ot(e>=2),2===e)return Ot("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),fr.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const m=i.indexOf("\x01",d);switch((m<0||m>t)&&st(),i.charAt(m+1)){case"\x01":const D=i.substring(d,m);let B;0===u.length?B=D:(u+=D,B=u,u=""),o.push(B);break;case"\x10":u+=i.substring(d,m),u+="\0";break;case"\x11":u+=i.substring(d,m+1);break;default:st()}d=m+2}return new fr(o)}const Ol=["userId","batchId"];function Pa(i,e){return[i,un(e)]}function _c(i,e,t){return[i,un(e),t]}const Lf={},ka=["prefixPath","collectionGroup","readTime","documentId"],vc=["prefixPath","collectionGroup","documentId"],ud=["collectionGroup","readTime","prefixPath","documentId"],ld=["canonicalId","targetId"],Ec=["targetId","path"],Vf=["path","targetId"],cd=["collectionId","parent"],Uf=["indexId","uid"],My=["uid","sequenceNumber"],xy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ry=["indexId","uid","orderedDocumentKey"],Pg=["userId","collectionPath","documentId"],Bf=["userId","collectionPath","largestBatchId"],kg=["userId","collectionGroup","largestBatchId"],mh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oy=[...mh,"documentOverlays"],Ng=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fg=[...Ng,"indexConfiguration","indexState","indexEntries"],jf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ut{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ut((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ut?t:ut.resolve(t)}catch(t){return ut.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ut.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ut.reject(t)}static resolve(e){return new ut((t,o)=>{t(e)})}static reject(e){return new ut((t,o)=>{o(e)})}static waitFor(e){return new ut((t,o)=>{let u=0,d=0,m=!1;e.forEach(D=>{++u,D.next(()=>{++d,m&&d===u&&t()},B=>o(B))}),m=!0,d===u&&t()})}static or(e){let t=ut.resolve(!1);for(const o of e)t=t.next(u=>u?ut.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}}class dd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new $r,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new hd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=vh(o.target.error);this.At.reject(new hd(e,u))}}static open(e,t,o,u){try{return new dd(t,e.transaction(u,o))}catch(d){throw new hd(t,d)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lg(t)}}class ca{constructor(e,t,o){this.name=e,this.version=t,this.bt=o,12.2===ca.Vt((0,We.z$)())&&ne("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),Bu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,We.hl)())return!1;if(ca.St())return!0;const e=(0,We.z$)(),t=ca.Vt(e),o=0<t&&t<10,u=ca.Dt(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,L.Z)(function*(){return t.db||(j("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new hd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const D=m.target.error;u("VersionError"===D.name?new gt($e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new gt($e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new hd(e,D))},d.onupgradeneeded=m=>{j("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.bt.kt(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{j("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,L.Z)(function*(){const m="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.Nt(e);const B=dd.open(d.db,e,m?"readonly":"readwrite",o),z=u(B).next(ue=>(B.Pt(),ue)).catch(ue=>(B.abort(ue),ut.reject(ue))).toPromise();return z.catch(()=>{}),yield B.Rt,z}catch(B){const z="FirebaseError"!==B.name&&D<3;if(j("SimpleDb","Transaction failed with error:",B.message,"Retrying:",z),d.close(),!z)return Promise.reject(B)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class yh{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bu(this.Ft.delete())}}class hd extends gt{constructor(e,t){super($e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uu(i){return"IndexedDbTransactionError"===i.name}class Lg{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(j("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Bu(o)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),Bu(this.store.add(e))}get(e){return Bu(this.store.get(e)).next(t=>(void 0===t&&(t=null),j("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),Bu(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),Bu(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.Kt(u,(m,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new ut((d,m)=>{u.onerror=D=>{m(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new ut((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}Qt(e,t){j("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Kt(u,(d,m,D)=>D.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Kt(u,t)}zt(e){const t=this.cursor({});return new ut((o,u)=>{t.onerror=d=>{const m=vh(d.target.error);u(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(D=>{D?m.continue():o()}):o()}})}Kt(e,t){const o=[];return new ut((u,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const D=m.target.result;if(!D)return void u();const B=new yh(D),z=t(D.primaryKey,D.value,B);if(z instanceof ut){const ue=z.catch(De=>(B.done(),ut.reject(De)));o.push(ue)}B.isDone?u():null===B.Lt?D.continue():D.continue(B.Lt)}}).next(()=>ut.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bu(i){return new ut((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=vh(o.target.error);t(u)}})}let _h=!1;function vh(i){const e=ca.Vt((0,We.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _h||(_h=!0,setTimeout(()=>{throw o},0)),o}}return i}class fd extends Vu{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function us(i,e){const t=_t(i);return ca.xt(t.Ht,e)}class Eh{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&xg(d,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&lc(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&lc(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(an.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ln())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(t,o)=>cc(t,o))&&uo(this.baseMutations,e.baseMutations,(t,o)=>cc(t,o))}}class pd{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){Ot(e.mutations.length===o.length);let u=Og;const d=e.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new pd(e,t,o,u)}}class wh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Na{constructor(e,t,o,u,d=an.min(),m=an.min(),D=Jn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=D}withSequenceNumber(e){return new Na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wc{constructor(e){this.Jt=e}}function $f(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ih(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Fu(u=i.Jt,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Sl(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Pl(e.version)};else{if(!e.isUnknownDocument())return st();o.unknownDocument={path:t.path.toArray(),version:Pl(e.version)}}var u,d;return o}function Ih(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Pl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ju(i){const e=new Fi(i.seconds,i.nanoseconds);return an.fromTimestamp(e)}function $u(i,e){const t=(e.baseMutations||[]).map(d=>ad(i.Jt,d));for(let d=0;d<e.mutations.length-1;++d){const m=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(m.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>ad(i.Jt,d)),u=Fi.fromMillis(e.localWriteTimeMs);return new Eh(e.batchId,u,t,o)}function Ic(i){const e=ju(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ju(i.lastLimboFreeSnapshotVersion):an.min();let o;var u;return void 0!==i.query.documents?(Ot(1===(u=i.query).documents.length),o=fo(Vo(mc(u.documents[0])))):o=fo(g(i.query)),new Na(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Jn.fromBase64String(i.resumeToken))}function ky(i,e){const t=Pl(e.snapshotVersion),o=Pl(e.lastLimboFreeSnapshotVersion);let u;u=wo(e.target)?ph(i.Jt,e.target):gh(i.Jt,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fs(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Dh(i){const e=g({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?oc(e,e.limit,"L"):e}function Hf(i,e){return new wh(e.largestBatchId,ad(i.Jt,e.overlayMutation))}function Gf(i,e){const t=e.path.lastSegment();return[i,un(e.path.popLast()),t]}class Ny{getBundleMetadata(e,t){return Vg(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:ju(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Vg(e).put({bundleId:(o=t).id,createTime:Pl(ps(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Qo(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:Dh(u.bundledQuery),readTime:ju(u.readTime)};var u})}saveNamedQuery(e,t){return Qo(e).put({name:(o=t).name,readTime:Pl(ps(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Vg(i){return us(i,"bundles")}function Qo(i){return us(i,"namedQueries")}class Wf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Wf(e,t.uid||"")}getOverlay(e,t){return Dc(e).get(Gf(this.userId,t)).next(o=>o?Hf(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((d,m)=>{const D=new wh(t,m);u.push(this.Xt(e,D))}),ut.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(m=>u.add(un(m.getCollectionPath())));const d=[];return u.forEach(m=>{const D=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(Dc(e).Qt("collectionPathOverlayIndex",D))}),ut.waitFor(d)}getOverlaysForCollection(e,t,o){const u=pc(),d=un(t),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Dc(e).qt("collectionPathOverlayIndex",m).next(D=>{for(const B of D){const z=Hf(this.M,B);u.set(z.getKey(),z)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=pc();let m;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dc(e).Wt({index:"collectionGroupOverlayIndex",range:D},(B,z,ue)=>{const De=Hf(this.M,z);d.size()<u||De.largestBatchId===m?(d.set(De.getKey(),De),m=De.largestBatchId):ue.done()}).next(()=>d)}Xt(e,t){return Dc(e).put(function(o,u,d){const[m,D,B]=Gf(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:B,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:su(o.Jt,d.mutation)}}(this.M,this.userId,t))}}function Dc(i){return us(i,"documentOverlays")}class kl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ai(e.integerValue));else if("doubleValue"in e){const o=Ai(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),Po(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Oo(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?qo(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),Vt.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Fy(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ug(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=Fy(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}kl.fe=new kl;class Ly{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Bg{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Vy{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class gd{constructor(){this.De=new Ly,this.Ce=new Bg(this.De),this.xe=new Vy(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Hu{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Hu(this.indexId,this.documentKey,this.arrayValue,o)}}function Rn(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=zf(i.arrayValue,e.arrayValue),0!==t?t:(t=zf(i.directionalValue,e.directionalValue),0!==t?t:Vt.comparator(i.documentKey,e.documentKey)))}function zf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class jg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=St(e);if(void 0!==t&&!this.Be(t))return!1;const o=Xt(e);let u=0,d=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const m=o[u];if(!this.Le(this.Fe,m)||!this.Ue(this.Me[d++],m))return!1;++u}for(;u<o.length;++u){const m=o[u];if(d>=this.Me.length||!this.Ue(this.Me[d++],m))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class $g{constructor(){this.qe=new Cc}addToCollectionParentIndex(e,t){return this.qe.add(t),ut.resolve()}getCollectionParents(e,t){return ut.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ut.resolve()}deleteFieldIndex(e,t){return ut.resolve()}getDocumentsMatchingTarget(e,t){return ut.resolve(null)}getFieldIndex(e,t){return ut.resolve(null)}getFieldIndexes(e,t){return ut.resolve([])}getNextCollectionGroupToUpdate(e){return ut.resolve(null)}updateCollectionGroup(e,t,o){return ut.resolve()}updateIndexEntries(e,t){return ut.resolve()}}class Cc{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new Jr(fr.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Jr(fr.comparator)).toArray()}}const Qs=new Uint8Array(0);class Hg{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Cc,this.Ge=new Oa(o=>fs(o),(o,u)=>qs(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const d={collectionId:o,parent:un(u)};return Gg(e).put(d)}return ut.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[za(t),""],!1,!0);return Gg(e).qt(u).next(d=>{for(const m of d){if(m.collectionId!==t)break;o.push(Ys(m.parent))}return o})}addFieldIndex(e,t){const o=Xo(e),u={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=Xo(e),u=bc(e),d=Nl(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Nl(e);let u=!0;const d=new Map;return ut.forEach(this.Qe(t),m=>this.getFieldIndex(e,m).next(D=>{u&&(u=!!D),d.set(m,D)})).next(()=>{if(u){let m=Ln();const D=[];return ut.forEach(d,(B,z)=>{var ue;j("IndexedDbIndexManager",`Using index ${ue=B,`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map(ui=>`${ui.fieldPath}:${ui.kind}`).join(",")}`} to execute ${fs(t)}`);const De=function(ui,ms){const xi=St(ms);if(void 0===xi)return null;for(const Gi of fl(ui,xi.fieldPath))switch(Gi.op){case"array-contains-any":return Gi.value.arrayValue.values||[];case"array-contains":return[Gi.value]}return null}(z,B),et=function(ui,ms){const xi=new Map;for(const Gi of Xt(ms))for(const to of fl(ui,Gi.fieldPath))switch(to.op){case"==":case"in":xi.set(Gi.fieldPath.canonicalString(),to.value);break;case"not-in":case"!=":return xi.set(Gi.fieldPath.canonicalString(),to.value),Array.from(xi.values())}return null}(z,B),vt=function(ui,ms){const xi=[];let Gi=!0;for(const to of Xt(ms)){const al=0===to.kind?Xc(ui,to.fieldPath,ui.startAt):pl(ui,to.fieldPath,ui.startAt);if(!al.value)return null;xi.push(al.value),Gi&&(Gi=al.inclusive)}return new Lo(xi,Gi)}(z,B),wt=function(ui,ms){const xi=[];let Gi=!0;for(const to of Xt(ms)){const al=0===to.kind?pl(ui,to.fieldPath,ui.endAt):Xc(ui,to.fieldPath,ui.endAt);if(!al.value)return null;xi.push(al.value),Gi&&(Gi=al.inclusive)}return new Lo(xi,Gi)}(z,B),ln=this.je(B,z,vt),Gn=this.je(B,z,wt),Ei=this.We(B,z,et),Mi=this.ze(B.indexId,De,ln,!!vt&&vt.inclusive,Gn,!!wt&&wt.inclusive,Ei);return ut.forEach(Mi,ui=>o.Gt(ui,t.limit).next(ms=>{ms.forEach(xi=>{const Gi=Vt.fromSegments(xi.documentKey);m.has(Gi)||(m=m.add(Gi),D.push(Gi))})}))}).next(()=>D)}return ut.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,o,u,d,m,D){const B=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=d?d.length:1),z=B/(null!=t?t.length:1),ue=[];for(let De=0;De<B;++De){const et=t?this.He(t[De/z]):Qs,vt=o?this.Je(e,et,o[De%z],u):this.Ye(e),wt=d?this.Xe(e,et,d[De%z],m):this.Ye(e+1);ue.push(...this.createRange(vt,wt,D.map(ln=>this.Je(e,et,ln,!0))))}return ue}Je(e,t,o,u){const d=new Hu(e,Vt.empty(),t,o);return u?d:d.ke()}Xe(e,t,o,u){const d=new Hu(e,Vt.empty(),t,o);return u?d.ke():d}Ye(e){return new Hu(e,Vt.empty(),Qs,Qs)}getFieldIndex(e,t){const o=new jg(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{const m=d.filter(D=>o.$e(D));return m.sort((D,B)=>B.fields.length-D.fields.length),m.length>0?m[0]:null})}Ze(e,t){const o=new gd;for(const u of Xt(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const m=o.Ne(u.kind);kl.fe.Zt(d,m)}return o.Se()}He(e){const t=new gd;return kl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new gd;return kl.fe.Zt(Fo(this.databaseId,t),o.Ne(function(u){const d=Xt(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.Se()}We(e,t,o){if(null===o)return[];let u=[];u.push(new gd);let d=0;for(const m of Xt(e)){const D=o[d++];for(const B of u)if(this.en(t,m.fieldPath)&&qa(D))u=this.nn(u,m,D);else{const z=B.Ne(m.kind);kl.fe.Zt(D,z)}}return this.sn(u)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const u=[...e],d=[];for(const m of o.arrayValue.values||[])for(const D of u){const B=new gd;B.seed(D.Se()),kl.fe.Zt(m,B.Ne(t.kind)),d.push(B)}return d}en(e,t){return!!e.filters.find(o=>o instanceof Vi&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Xo(e),u=bc(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(d=>{const m=[];return ut.forEach(d,D=>u.get([D.indexId,this.uid]).next(B=>{m.push(function(z,ue){const De=ue?new bn(ue.sequenceNumber,new zr(ju(ue.readTime),new Vt(Ys(ue.documentKey)),ue.largestBatchId)):bn.empty(),et=z.fields.map(([vt,wt])=>new dn(as.fromServerFormat(vt),wt));return new Qe(z.indexId,z.collectionGroup,et,De)}(D,B))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:kn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Xo(e),d=bc(e);return this.rn(e).next(m=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>ut.forEach(D,B=>{return d.put({indexId:B.indexId,uid:this.user.uid||"",sequenceNumber:m,readTime:Pl((et=o).readTime),documentKey:un(et.documentKey.path),largestBatchId:et.largestBatchId});var et})))}updateIndexEntries(e,t){const o=new Map;return ut.forEach(t,(u,d)=>{const m=o.get(u.collectionGroup);return(m?ut.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),ut.forEach(D,B=>this.on(e,u,B).next(z=>{const ue=this.un(d,B);return z.isEqual(ue)?ut.resolve():this.an(e,d,B,z,ue)}))))})}cn(e,t,o,u){return Nl(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,u){return Nl(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const u=Nl(e);let d=new Jr(Rn);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(m,D)=>{d=d.add(new Hu(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}un(e,t){let o=new Jr(Rn);const u=this.Ze(t,e);if(null==u)return o;const d=St(t);if(null!=d){const m=e.data.field(d.fieldPath);if(qa(m))for(const D of m.arrayValue.values||[])o=o.add(new Hu(t.indexId,e.key,this.He(D),u))}else o=o.add(new Hu(t.indexId,e.key,Qs,u));return o}an(e,t,o,u,d){j("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(D,B,z,ue,De){const et=D.getIterator(),vt=B.getIterator();let wt=ku(et),ln=ku(vt);for(;wt||ln;){let Gn=!1,Ei=!1;if(wt&&ln){const Mi=z(wt,ln);Mi<0?Ei=!0:Mi>0&&(Gn=!0)}else null!=wt?Ei=!0:Gn=!0;Gn?(ue(ln),ln=ku(vt)):Ei?(De(wt),wt=ku(et)):(wt=ku(et),ln=ku(vt))}}(u,d,Rn,D=>{m.push(this.cn(e,t,o,D))},D=>{m.push(this.hn(e,t,o,D))}),ut.waitFor(m)}rn(e){let t=1;return bc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((m,D)=>Rn(m,D)).filter((m,D,B)=>!D||0!==Rn(m,B[D-1]));const u=[];u.push(e);for(const m of o){const D=Rn(m,e),B=Rn(m,t);if(0===D)u[0]=e.ke();else if(D>0&&B<0)u.push(m),u.push(m.ke());else if(B>0)break}u.push(t);const d=[];for(let m=0;m<u.length;m+=2)d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Qs,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Qs,[]]));return d}}function Gg(i){return us(i,"collectionParents")}function Nl(i){return us(i,"indexEntries")}function Xo(i){return us(i,"indexConfiguration")}function bc(i){return us(i,"indexState")}const Kf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xs{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Xs(e,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Uy(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],m=IDBKeyRange.only(t.batchId);let D=0;const B=o.Wt({range:m},(ue,De,et)=>(D++,et.delete()));d.push(B.next(()=>{Ot(1===D)}));const z=[];for(const ue of t.mutations){const De=_c(e,ue.key.path,t.batchId);d.push(u.delete(De)),z.push(ue.key)}return ut.waitFor(d).next(()=>z)}function md(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw st();e=i.noDocument}return JSON.stringify(e).length}Xs.DEFAULT_COLLECTION_PERCENTILE=10,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xs.DEFAULT=new Xs(41943040,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xs.DISABLED=new Xs(-1,0,0);class Wg{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.ln={}}static Yt(e,t,o,u){Ot(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Wg(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return da(e).Wt({index:"userMutationsIndex",range:o},(u,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=Gu(e),m=da(e);return m.add({}).next(D=>{Ot("number"==typeof D);const B=new Eh(D,t,o,u),z=function(et,vt,wt){const ln=wt.baseMutations.map(Ei=>su(et.Jt,Ei)),Gn=wt.mutations.map(Ei=>su(et.Jt,Ei));return{userId:vt,batchId:wt.batchId,localWriteTimeMs:wt.localWriteTime.toMillis(),baseMutations:ln,mutations:Gn}}(this.M,this.userId,B),ue=[];let De=new Jr((et,vt)=>kn(et.canonicalString(),vt.canonicalString()));for(const et of u){const vt=_c(this.userId,et.key.path,D);De=De.add(et.key.path.popLast()),ue.push(m.put(z)),ue.push(d.put(vt,Lf))}return De.forEach(et=>{ue.push(this.indexManager.addToCollectionParentIndex(e,et))}),e.addOnCommittedListener(()=>{this.ln[D]=B.keys()}),ut.waitFor(ue).next(()=>B)})}lookupMutationBatch(e,t){return da(e).get(t).next(o=>o?(Ot(o.userId===this.userId),$u(this.M,o)):null)}fn(e,t){return this.ln[t]?ut.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.ln[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return da(e).Wt({index:"userMutationsIndex",range:u},(m,D,B)=>{D.userId===this.userId&&(Ot(D.batchId>=o),d=$u(this.M,D)),B.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return da(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return da(e).qt("userMutationsIndex",t).next(o=>o.map(u=>$u(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Pa(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return Gu(e).Wt({range:u},(m,D,B)=>{const[z,ue,De]=m,et=Ys(ue);if(z===this.userId&&t.path.isEqual(et))return da(e).get(De).next(vt=>{if(!vt)throw st();Ot(vt.userId===this.userId),d.push($u(this.M,vt))});B.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Jr(kn);const u=[];return t.forEach(d=>{const m=Pa(this.userId,d.path),D=IDBKeyRange.lowerBound(m),B=Gu(e).Wt({range:D},(z,ue,De)=>{const[et,vt,wt]=z,ln=Ys(vt);et===this.userId&&d.path.isEqual(ln)?o=o.add(wt):De.done()});u.push(B)}),ut.waitFor(u).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=Pa(this.userId,o),m=IDBKeyRange.lowerBound(d);let D=new Jr(kn);return Gu(e).Wt({range:m},(B,z,ue)=>{const[De,et,vt]=B,wt=Ys(et);De===this.userId&&o.isPrefixOf(wt)?wt.length===u&&(D=D.add(vt)):ue.done()}).next(()=>this.dn(e,D))}dn(e,t){const o=[],u=[];return t.forEach(d=>{u.push(da(e).get(d).next(m=>{if(null===m)throw st();Ot(m.userId===this.userId),o.push($u(this.M,m))}))}),ut.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Uy(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ut.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ut.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Gu(e).Wt({range:o},(d,m,D)=>{if(d[0]===this.userId){const B=Ys(d[1]);u.push(B)}else D.done()}).next(()=>{Ot(0===u.length)})})}containsKey(e,t){return yd(e,this.userId,t)}wn(e){return Ch(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yd(i,e,t){const o=Pa(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Gu(i).Wt({range:d,jt:!0},(D,B,z)=>{const[ue,De,et]=D;ue===e&&De===u&&(m=!0),z.done()}).next(()=>m)}function da(i){return us(i,"mutations")}function Gu(i){return us(i,"documentMutations")}function Ch(i){return us(i,"mutationQueues")}class ou{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ou(0)}static yn(){return new ou(-1)}}class jv{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new ou(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>an.fromTimestamp(new Fi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.In(e,u)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Tc(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(Ot(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return Tc(e).Wt((m,D)=>{const B=Ic(D);B.sequenceNumber<=t&&null===o.get(B.targetId)&&(u++,d.push(this.removeTargetData(e,B)))}).next(()=>ut.waitFor(d)).next(()=>u)}forEachTarget(e,t){return Tc(e).Wt((o,u)=>{const d=Ic(u);t(d)})}pn(e){return zg(e).get("targetGlobalKey").next(t=>(Ot(null!==t),t))}In(e,t){return zg(e).put("targetGlobalKey",t)}Tn(e,t){return Tc(e).put(ky(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=fs(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Tc(e).Wt({range:u,index:"queryTargetsIndex"},(m,D,B)=>{const z=Ic(D);qs(t,z.target)&&(d=z,B.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=Wu(e);return t.forEach(m=>{const D=un(m.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,m))}),ut.waitFor(u)}removeMatchingKeys(e,t,o){const u=Wu(e);return ut.forEach(t,d=>{const m=un(d.path);return ut.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=Wu(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Wu(e);let d=Ln();return u.Wt({range:o,jt:!0},(m,D,B)=>{const z=Ys(m[1]),ue=new Vt(z);d=d.add(ue)}).next(()=>d)}containsKey(e,t){const o=un(t.path),u=IDBKeyRange.bound([o],[za(o)],!1,!0);let d=0;return Wu(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([m,D],B,z)=>{0!==m&&(d++,z.done())}).next(()=>d>0)}Et(e,t){return Tc(e).get(t).next(o=>o?Ic(o):null)}}function Tc(i){return us(i,"targets")}function zg(i){return us(i,"targetGlobal")}function Wu(i){return us(i,"targetDocuments")}function Fl(i){return bh.apply(this,arguments)}function bh(){return bh=(0,L.Z)(function*(i){if(i.code!==$e.FAILED_PRECONDITION||i.message!==jf)throw i;j("LocalStore","Unexpectedly lost primary lease")}),bh.apply(this,arguments)}function By([i,e],[t,o]){const u=kn(i,t);return 0===u?kn(e,o):u}class jy{constructor(e){this.An=e,this.buffer=new Jr(By),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();By(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $v{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;j("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,L.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){Uu(u)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Fl(u)}yield t.Sn(e)}))}}class Kg{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return ut.resolve(Xi.A);const o=new jy(t);return this.Dn.forEachTarget(e,u=>o.bn(u.sequenceNumber)).next(()=>this.Dn.xn(e,u=>o.bn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector","Garbage collection skipped; disabled"),ut.resolve(Kf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kf):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,u,d,m,D,B,z;const ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(De=>(De>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${De}`),u=this.params.maximumSequenceNumbersToCollect):u=De,m=Date.now(),this.nthSequenceNumber(e,u))).next(De=>(o=De,D=Date.now(),this.removeTargets(e,o,t))).next(De=>(d=De,B=Date.now(),this.removeOrphanedDocuments(e,o))).next(De=>(z=Date.now(),S()<=Ge.in.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-ue}ms\n\tDetermined least recently used ${u} in `+(D-m)+`ms\n\tRemoved ${d} targets in `+(B-D)+`ms\n\tRemoved ${De} documents in `+(z-B)+`ms\nTotal Duration: ${z-ue}ms`),ut.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:De})))}}class qg{constructor(e,t){this.db=e,this.garbageCollector=new Kg(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,u)=>t(u))}addReference(e,t,o){return Th(e,o)}removeReference(e,t,o){return Th(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Th(e,t)}On(e,t){return function(o,u){let d=!1;return Ch(o).zt(m=>yd(o,m,u).next(D=>(D&&(d=!0),ut.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Mn(e,(m,D)=>{if(D<=t){const B=this.On(e,m).next(z=>{if(!z)return d++,o.getEntry(e,m).next(()=>(o.removeEntry(m,an.min()),Wu(e).delete([0,un(m.path)])))});u.push(B)}}).next(()=>ut.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Th(e,t)}Mn(e,t){const o=Wu(e);let u,d=Xi.A;return o.Wt({index:"documentTargetsIndex"},([m,D],{path:B,sequenceNumber:z})=>{0===m?(d!==Xi.A&&t(new Vt(Ys(u)),d),d=z,u=B):d=Xi.A}).next(()=>{d!==Xi.A&&t(new Vt(Ys(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Th(i,e){return Wu(i).put((o=i.currentSequenceNumber,{targetId:0,path:un(e.path),sequenceNumber:o}));var o}class Ah{constructor(){this.changes=new Oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pe.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?ut.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hv{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Ac(e).put(o)}removeEntry(e,t,o){return Ac(e).delete(function(u,d){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Ih(d),m[m.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=Pe.newInvalidDocument(t);return Ac(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(t))},(u,d)=>{o=this.$n(t,d)}).next(()=>o)}Bn(e,t){let o={size:0,document:Pe.newInvalidDocument(t)};return Ac(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(t))},(u,d)=>{o={document:this.$n(t,d),size:md(d)}}).next(()=>o)}getEntries(e,t){let o=Co();return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);o=o.insert(u,m)}).next(()=>o)}Un(e,t){let o=Co(),u=new er(Vt.comparator);return this.Ln(e,t,(d,m)=>{const D=this.$n(d,m);o=o.insert(d,D),u=u.insert(d,md(m))}).next(()=>({documents:o,qn:u}))}Ln(e,t,o){if(t.isEmpty())return ut.resolve();let u=new Jr(Gy);t.forEach(B=>u=u.add(B));const d=IDBKeyRange.bound(Sh(u.first()),Sh(u.last())),m=u.getIterator();let D=m.getNext();return Ac(e).Wt({index:"documentKeyIndex",range:d},(B,z,ue)=>{const De=Vt.fromSegments([...z.prefixPath,z.collectionGroup,z.documentId]);for(;D&&Gy(D,De)<0;)o(D,null),D=m.getNext();D&&D.isEqual(De)&&(o(D,z),D=m.hasNext()?m.getNext():null),D?ue.Ut(Sh(D)):ue.done()}).next(()=>{for(;D;)o(D,null),D=m.hasNext()?m.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),Ih(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ac(e).qt(IDBKeyRange.bound(u,d,!0)).next(m=>{let D=Co();for(const B of m){const z=this.$n(Vt.fromSegments(B.prefixPath.concat(B.collectionGroup,B.documentId)),B);D=D.insert(z.key,z)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=Co();const m=Hy(t,o),D=Hy(t,zr.max());return Ac(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,D,!0)},(B,z,ue)=>{const De=this.$n(Vt.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);d=d.insert(De.key,De),d.size===u&&ue.done()}).next(()=>d)}newChangeBuffer(e){return new Gv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $y(e).get("remoteDocumentGlobalKey").next(t=>(Ot(!!t),t))}Fn(e,t){return $y(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function Py(i,e){let t;if(e.document)t=yc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Vt.fromSegments(e.noDocument.path),u=ju(e.noDocument.readTime);t=Pe.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const o=Vt.fromSegments(e.unknownDocument.path),u=ju(e.unknownDocument.version);t=Pe.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Fi(o[0],o[1]);return an.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(an.min()))return o}return Pe.newInvalidDocument(e)}}class Gv extends Ah{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Oa(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new Jr((d,m)=>kn(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const D=this.Gn.get(d);if(t.push(this.Kn.removeEntry(e,d,D.readTime)),m.isValidDocument()){const B=$f(this.Kn.M,m);u=u.add(d.path.popLast()),o+=md(B)-D.size,t.push(this.Kn.addEntry(e,d,B))}else if(o-=D.size,this.trackRemovals){const B=$f(this.Kn.M,m.convertToNoDocument(an.min()));t.push(this.Kn.addEntry(e,d,B))}}),u.forEach(d=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Kn.updateMetadata(e,o)),ut.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:u})=>(u.forEach((d,m)=>{this.Gn.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function $y(i){return us(i,"remoteDocumentGlobal")}function Ac(i){return us(i,"remoteDocumentsV14")}function Sh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Hy(i,e){const t=e.documentKey.path.toArray();return[i,Ih(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gy(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=kn(t[d],o[d]),u)return u;return u=kn(t.length,o.length),u||(u=kn(t[t.length-2],o[o.length-2]),u||kn(t[t.length-1],o[o.length-1]))}class Wv{constructor(e){this.M=e}kt(e,t,o,u){const d=new dd("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ol,{unique:!0}),D.createObjectStore("documentMutations"),Wy(e),function(D){D.createObjectStore("remoteDocuments")}(e));let m=ut.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),Wy(e)),m=m.next(()=>function(D){const B=D.store("targetGlobal"),z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:an.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",z)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(D,B){return B.store("mutations").qt().next(z=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ol,{unique:!0});const ue=B.store("mutations"),De=z.map(et=>ue.put(et));return ut.waitFor(De)})}(e,d))),m=m.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(m=m.next(()=>this.Qn(d))),o<6&&u>=6&&(m=m.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.jn(d)))),o<7&&u>=7&&(m=m.next(()=>this.Wn(d))),o<8&&u>=8&&(m=m.next(()=>this.zn(e,d))),o<9&&u>=9&&(m=m.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(m=m.next(()=>this.Hn(d))),o<11&&u>=11&&(m=m.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(m=m.next(()=>{!function(D){const B=D.createObjectStore("documentOverlays",{keyPath:Pg});B.createIndex("collectionPathOverlayIndex",Bf,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",kg,{unique:!1})}(e)})),o<13&&u>=13&&(m=m.next(()=>function(D){const B=D.createObjectStore("remoteDocumentsV14",{keyPath:ka});B.createIndex("documentKeyIndex",vc),B.createIndex("collectionGroupIndex",ud)}(e)).next(()=>this.Jn(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>{!function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Uf}).createIndex("sequenceNumberIndex",My,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:xy}).createIndex("documentKeyIndex",Ry,{unique:!1})}(e)})),m}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=md(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>ut.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",m).next(D=>ut.forEach(D,B=>{Ot(B.userId===d.userId);const z=$u(this.M,B);return Uy(e,d.userId,z).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Wt((m,D)=>{const B=new fr(m),z=[0,un(B)];d.push(t.get(z).next(ue=>ue?ut.resolve():t.put({targetId:0,path:un(B),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>ut.waitFor(d))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:cd});const o=t.store("collectionParents"),u=new Cc,d=m=>{if(u.add(m)){const D=m.lastSegment(),B=m.popLast();return o.put({collectionId:D,parent:un(B)})}};return t.store("remoteDocuments").Wt({jt:!0},(m,D)=>{const B=new fr(m);return d(B.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([m,D,B],z)=>{const ue=Ys(D);return d(ue.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,u)=>{const d=Ic(u),m=ky(this.M,d);return t.put(m)})}Jn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((d,m)=>{const D=t.store("remoteDocumentsV14"),B=(z=m,z.document?new Vt(fr.fromString(z.document.name).popFirst(5)):z.noDocument?Vt.fromSegments(z.noDocument.path):z.unknownDocument?Vt.fromSegments(z.unknownDocument.path):st()).path.toArray();var z;const ue={prefixPath:B.slice(0,B.length-2),collectionGroup:B[B.length-2],documentId:B[B.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};u.push(D.put(ue))}).next(()=>ut.waitFor(u))}}function Wy(i){i.createObjectStore("targetDocuments",{keyPath:Ec}).createIndex("documentTargetsIndex",Vf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ld,{unique:!0}),i.createObjectStore("targetGlobal")}const Zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fa{constructor(e,t,o,u,d,m,D,B,z,ue,De=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=d,this.window=m,this.document=D,this.Xn=z,this.Zn=ue,this.ts=De,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=et=>Promise.resolve(),!Fa.vt())throw new gt($e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qg(this,u),this.hs=t+"main",this.M=new wc(B),this.ls=new ca(this.hs,this.ts,new Wv(this.M)),this.fs=new jv(this.referenceDelegate,this.M),this.ds=new Hv(this.M),this._s=new Ny,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===ue&&ne("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gt($e.FAILED_PRECONDITION,Zg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Xi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,L.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,L.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,L.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Uu(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ll(e).get("owner").next(t=>ut.resolve(this.bs(t)))}Vs(e){return Mh(e).delete(this.clientId)}vs(){var e=this;return(0,L.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=us(o,"clientMetadata");return u.qt().next(d=>{const m=e.Ds(d,18e5),D=d.filter(B=>-1===m.indexOf(B));return ut.forEach(D,B=>u.delete(B.clientId)).next(()=>D)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ut.resolve(!0):Ll(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new gt($e.FAILED_PRECONDITION,Zg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mh(e).qt().next(o=>void 0===this.Ds(o,5e3).find(u=>{if(this.clientId!==u.clientId){const m=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||m&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&j("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,L.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new fd(t,Xi.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Mh(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Wg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Hg(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Wf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){j("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=14===(m=this.ts)?Fg:13===m?Ng:12===m?Oy:11===m?mh:void st();var m;let D;return this.ls.runTransaction(e,u,d,B=>(D=new fd(B,this.es?this.es.next():Xi.A),"readwrite-primary"===t?this.Es(D).next(z=>!!z||this.As(D)).next(z=>{if(!z)throw ne(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new gt($e.FAILED_PRECONDITION,jf);return o(D)}).next(z=>this.Ps(D).next(()=>z)):this.$s(D).next(()=>o(D)))).then(B=>(D.raiseOnCommittedEvent(),B))}$s(e){return Ll(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new gt($e.FAILED_PRECONDITION,Zg)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ll(e).put("owner",t)}static vt(){return ca.vt()}Rs(e){const t=Ll(e);return t.get("owner").next(o=>this.bs(o)?(j("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ut.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(ne(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,We.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return j("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return ne("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ne("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ll(i){return us(i,"owner")}function Mh(i){return us(i,"clientMetadata")}function xh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class qf{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(u=>{for(const d of o)d.applyToLocalView(u);return u})}qs(e,t){e.forEach((o,u)=>{for(const d of t)d.applyToLocalView(u)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return Vt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.js(e,t.path):yl(t)?this.Ws(e,t,o):this.zs(e,t,o);var u}js(e,t){return this.Ls(e,new Vt(t)).next(o=>{let u=id();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}Ws(e,t,o){const u=t.collectionGroup;let d=id();return this.indexManager.getCollectionParents(e,u).next(m=>ut.forEach(m,D=>{const B=(z=t,ue=D.child(u),new Io(ue,null,z.explicitOrderBy.slice(),z.filters.slice(),z.limit,z.limitType,z.startAt,z.endAt));var z,ue;return this.zs(e,B,o).next(z=>{z.forEach((ue,De)=>{d=d.insert(ue,De)})})}).next(()=>d))}zs(e,t,o){let u;return this.ds.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(d=>{for(const m of d)for(const D of m.mutations){const B=D.key;let z=u.get(B);null==z&&(z=Pe.newInvalidDocument(B),u=u.insert(B,z)),lc(D,z,m.localWriteTime),z.isFoundDocument()||(u=u.remove(B))}}).next(()=>(u.forEach((d,m)=>{ed(t,m)||(u=u.remove(d))}),u))}}class Rh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=u}static Ys(e,t){let o=Ln(),u=Ln();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Rh(e,t.fromCache,o,u)}}class Oh{Xs(e){this.Zs=e}Qs(e,t,o,u){return 0===(d=t).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||o.isEqual(an.min())?this.ti(e,t):this.Zs.Ks(e,u).next(d=>{const m=this.ei(t,d);return(sc(t)||Au(t))&&this.ni(t.limitType,m,u,o)?this.ti(e,t):(S()<=Ge.in.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Jc(t)),this.Zs.Qs(e,t,or(o,-1)).next(D=>(m.forEach(B=>{D=D.insert(B.key,B)}),D)))});var d}ei(e,t){let o=new Jr(eh(e));return t.forEach((u,d)=>{ed(e,d)&&(o=o.add(d))}),o}ni(e,t,o,u){if(o.size!==t.size)return!0;const d="F"===e?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}ti(e,t){return S()<=Ge.in.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Jc(t)),this.Zs.Qs(e,t,zr.min())}}class zy{constructor(e,t,o,u){this.persistence=e,this.si=t,this.M=u,this.ii=new er(kn),this.ri=new Oa(d=>fs(d),qs),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(o)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new qf(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function au(i,e,t,o){return new zy(i,e,t,o)}function Zf(i,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,L.Z)(function*(i,e){const t=_t(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.Bs.getAllMutationBatches(o).next(d=>(u=d,t.ai(e),t.Bs.getAllMutationBatches(o))).next(d=>{const m=[],D=[];let B=Ln();for(const z of u){m.push(z.batchId);for(const ue of z.mutations)B=B.add(ue.key)}for(const z of d){D.push(z.batchId);for(const ue of z.mutations)B=B.add(ue.key)}return t.ci.Ks(o,B).next(z=>({hi:z,removedBatchIds:m,addedBatchIds:D}))})})}),Yf.apply(this,arguments)}function Qf(i,e){const t=_t(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.ui.newChangeBuffer({trackRemovals:!0});return function(m,D,B,z){const ue=B.batch,De=ue.keys();let et=ut.resolve();return De.forEach(vt=>{et=et.next(()=>z.getEntry(D,vt)).next(wt=>{const ln=B.docVersions.get(vt);Ot(null!==ln),wt.version.compareTo(ln)<0&&(ue.applyToRemoteDocument(wt,B),wt.isValidDocument()&&(wt.setReadTime(B.commitVersion),z.addEntry(wt)))})}),et.next(()=>m.Bs.removeMutationBatch(D,ue))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.ci.Ks(o,u))})}function Yg(i){const e=_t(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Qg(i,e){const t=_t(i),o=e.snapshotVersion;let u=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.ui.newChangeBuffer({trackRemovals:!0});u=t.ii;const D=[];e.targetChanges.forEach((z,ue)=>{const De=u.get(ue);if(!De)return;D.push(t.fs.removeMatchingKeys(d,z.removedDocuments,ue).next(()=>t.fs.addMatchingKeys(d,z.addedDocuments,ue)));let et=De.withSequenceNumber(d.currentSequenceNumber);var vt,wt,ln;e.targetMismatches.has(ue)?et=et.withResumeToken(Jn.EMPTY_BYTE_STRING,an.min()).withLastLimboFreeSnapshotVersion(an.min()):z.resumeToken.approximateByteSize()>0&&(et=et.withResumeToken(z.resumeToken,o)),u=u.insert(ue,et),wt=et,ln=z,(0===(vt=De).resumeToken.approximateByteSize()||wt.snapshotVersion.toMicroseconds()-vt.snapshotVersion.toMicroseconds()>=3e8||ln.addedDocuments.size+ln.modifiedDocuments.size+ln.removedDocuments.size>0)&&D.push(t.fs.updateTargetData(d,et))});let B=Co();if(e.documentUpdates.forEach(z=>{e.resolvedLimboDocuments.has(z)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,z))}),D.push(Xg(d,m,e.documentUpdates).next(z=>{B=z})),!o.isEqual(an.min())){const z=t.fs.getLastRemoteSnapshotVersion(d).next(ue=>t.fs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(z)}return ut.waitFor(D).next(()=>m.apply(d)).next(()=>t.ci.Gs(d,B)).next(()=>B)}).then(d=>(t.ii=u,d))}function Xg(i,e,t){let o=Ln();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let d=Co();return t.forEach((m,D)=>{const B=u.get(m);D.isNoDocument()&&D.version.isEqual(an.min())?(e.removeEntry(m,D.readTime),d=d.insert(m,D)):!B.isValidDocument()||D.version.compareTo(B.version)>0||0===D.version.compareTo(B.version)&&B.hasPendingWrites?(e.addEntry(D),d=d.insert(m,D)):j("LocalStore","Ignoring outdated watch update for ",m,". Current version:",B.version," Watch version:",D.version)}),d})}function Ky(i,e){const t=_t(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function La(i,e){const t=_t(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.fs.getTargetData(o,e).next(d=>d?(u=d,ut.resolve(u)):t.fs.allocateTargetId(o).next(m=>(u=new Na(e,m,0,o.currentSequenceNumber),t.fs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.ii.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.ii=t.ii.insert(o.targetId,o),t.ri.set(e,o.targetId)),o})}function ha(i,e,t){return _d.apply(this,arguments)}function _d(){return _d=(0,L.Z)(function*(i,e,t){const o=_t(i),u=o.ii.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!Uu(m))throw m;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}o.ii=o.ii.remove(e),o.ri.delete(u.target)}),_d.apply(this,arguments)}function uu(i,e,t){const o=_t(i);let u=an.min(),d=Ln();return o.persistence.runTransaction("Execute query","readonly",m=>function(D,B,z){const ue=_t(D),De=ue.ri.get(z);return void 0!==De?ut.resolve(ue.ii.get(De)):ue.fs.getTargetData(B,z)}(o,m,fo(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(m,D.targetId).next(B=>{d=B})}).next(()=>o.si.Qs(m,e,t?u:an.min(),t?d:Ln())).next(D=>(Jg(o,ac(e),D),{documents:D,li:d})))}function Sc(i,e){const t=_t(i),o=_t(t.fs),u=t.ii.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.Et(d,e).next(m=>m?m.target:null))}function Vl(i,e){const t=_t(i),o=t.oi.get(e)||an.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.ui.getAllFromCollectionGroup(u,e,or(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Jg(t,e,u),u))}function Jg(i,e,t){let o=an.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.oi.set(e,o)}function Ph(){return Ph=(0,L.Z)(function*(i,e,t,o){const u=_t(i);let d=Ln(),m=Co();for(const z of t){const ue=e.fi(z.metadata.name);z.document&&(d=d.add(ue));const De=e.di(z);De.setReadTime(e._i(z.metadata.readTime)),m=m.insert(ue,De)}const D=u.ui.newChangeBuffer({trackRemovals:!0}),B=yield La(u,(z=o,fo(Vo(fr.fromString(`__bundle__/docs/${z}`)))));var z;return u.persistence.runTransaction("Apply bundle documents","readwrite",z=>Xg(z,D,m).next(ue=>(D.apply(z),ue)).next(ue=>u.fs.removeMatchingKeysForTargetId(z,B.targetId).next(()=>u.fs.addMatchingKeys(z,d,B.targetId)).next(()=>u.ci.Gs(z,ue)).next(()=>ue)))}),Ph.apply(this,arguments)}function Xf(i,e){return vd.apply(this,arguments)}function vd(){return vd=(0,L.Z)(function*(i,e,t=Ln()){const o=yield La(i,fo(Dh(e.bundledQuery))),u=_t(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=ps(e.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u._s.saveNamedQuery(d,e);const D=o.withResumeToken(Jn.EMPTY_BYTE_STRING,m);return u.ii=u.ii.insert(D.targetId,D),u.fs.updateTargetData(d,D).next(()=>u.fs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.fs.addMatchingKeys(d,t,o.targetId)).next(()=>u._s.saveNamedQuery(d,e))})}),vd.apply(this,arguments)}class tm{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return ut.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var o;return this.wi.set(t.id,{id:(o=t).id,version:o.version,createTime:ps(o.createTime)}),ut.resolve()}getNamedQuery(e,t){return ut.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(o=t).name,query:Dh(o.bundledQuery),readTime:ps(o.readTime)}),ut.resolve();var o}}class kh{constructor(){this.overlays=new er(Vt.comparator),this.gi=new Map}getOverlay(e,t){return ut.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.Xt(e,t,d)}),ut.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.gi.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.gi.delete(o)),ut.resolve()}getOverlaysForCollection(e,t,o){const u=pc(),d=t.length+1,m=new Vt(t.child("")),D=this.overlays.getIteratorFrom(m);for(;D.hasNext();){const B=D.getNext().value,z=B.getKey();if(!t.isPrefixOf(z.path))break;z.path.length===d&&B.largestBatchId>o&&u.set(B.getKey(),B)}return ut.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new er((z,ue)=>z-ue);const m=this.overlays.getIterator();for(;m.hasNext();){const z=m.getNext().value;if(z.getKey().getCollectionGroup()===t&&z.largestBatchId>o){let ue=d.get(z.largestBatchId);null===ue&&(ue=pc(),d=d.insert(z.largestBatchId,ue)),ue.set(z.getKey(),z)}}const D=pc(),B=d.getIterator();for(;B.hasNext()&&(B.getNext().value.forEach((z,ue)=>D.set(z,ue)),!(D.size()>=u)););return ut.resolve(D)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const m=this.gi.get(u.largestBatchId).delete(o.key);this.gi.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new wh(t,o));let d=this.gi.get(t);void 0===d&&(d=Ln(),this.gi.set(t,d)),this.gi.set(t,d.add(o.key))}}class Jf{constructor(){this.yi=new Jr(Ds.pi),this.Ii=new Jr(Ds.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const o=new Ds(e,t);this.yi=this.yi.add(o),this.Ii=this.Ii.add(o)}Ei(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ai(new Ds(e,t))}Ri(e,t){e.forEach(o=>this.removeReference(o,t))}Pi(e){const t=new Vt(new fr([])),o=new Ds(t,e),u=new Ds(t,e+1),d=[];return this.Ii.forEachInRange([o,u],m=>{this.Ai(m),d.push(m.key)}),d}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Vt(new fr([])),o=new Ds(t,e),u=new Ds(t,e+1);let d=Ln();return this.Ii.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new Ds(e,0),o=this.yi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Ds{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Vt.comparator(e.key,t.key)||kn(e.vi,t.vi)}static Ti(e,t){return kn(e.vi,t.vi)||Vt.comparator(e.key,t.key)}}class zv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Jr(Ds.pi)}checkEmpty(e){return ut.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,u){const d=this.Si;this.Si++;const m=new Eh(d,t,o,u);this.Bs.push(m);for(const D of u)this.Di=this.Di.add(new Ds(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return ut.resolve(m)}lookupMutationBatch(e,t){return ut.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.xi(t+1),d=u<0?0:u;return ut.resolve(this.Bs.length>d?this.Bs[d]:null)}getHighestUnacknowledgedBatchId(){return ut.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return ut.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Ds(t,0),u=new Ds(t,Number.POSITIVE_INFINITY),d=[];return this.Di.forEachInRange([o,u],m=>{const D=this.Ci(m.vi);d.push(D)}),ut.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Jr(kn);return t.forEach(u=>{const d=new Ds(u,0),m=new Ds(u,Number.POSITIVE_INFINITY);this.Di.forEachInRange([d,m],D=>{o=o.add(D.vi)})}),ut.resolve(this.Ni(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;Vt.isDocumentKey(d)||(d=d.child(""));const m=new Ds(new Vt(d),0);let D=new Jr(kn);return this.Di.forEachWhile(B=>{const z=B.key.path;return!!o.isPrefixOf(z)&&(z.length===u&&(D=D.add(B.vi)),!0)},m),ut.resolve(this.Ni(D))}Ni(e){const t=[];return e.forEach(o=>{const u=this.Ci(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){Ot(0===this.ki(t.batchId,"removed")),this.Bs.shift();let o=this.Di;return ut.forEach(t.mutations,u=>{const d=new Ds(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Di=o})}_n(e){}containsKey(e,t){const o=new Ds(t,0),u=this.Di.firstAfterOrEqual(o);return ut.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return ut.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class nm{constructor(e){this.Mi=e,this.docs=new er(Vt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mi(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ut.resolve(o?o.document.mutableCopy():Pe.newInvalidDocument(t))}getEntries(e,t){let o=Co();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():Pe.newInvalidDocument(u))}),ut.resolve(o)}getAllFromCollection(e,t,o){let u=Co();const d=new Vt(t.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:D,value:{document:B}}=m.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||Li(Nn(B),o)<=0||(u=u.insert(B.key,B.mutableCopy()))}return ut.resolve(u)}getAllFromCollectionGroup(e,t,o,u){st()}Oi(e,t){return ut.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new rm(this)}getSize(e){return ut.resolve(this.size)}}class rm extends Ah{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Kn.addEntry(e,u)):this.Kn.removeEntry(o)}),ut.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class qy{constructor(e){this.persistence=e,this.Fi=new Oa(t=>fs(t),qs),this.lastRemoteSnapshotVersion=an.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Jf,this.targetCount=0,this.Li=ou.gn()}forEachTarget(e,t){return this.Fi.forEach((o,u)=>t(u)),ut.resolve()}getLastRemoteSnapshotVersion(e){return ut.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ut.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),ut.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.$i&&(this.$i=t),ut.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new ou(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ut.resolve()}updateTargetData(e,t){return this.Tn(t),ut.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,ut.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Fi.forEach((m,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Fi.delete(m),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),ut.waitFor(d).next(()=>u)}getTargetCount(e){return ut.resolve(this.targetCount)}getTargetData(e,t){const o=this.Fi.get(t)||null;return ut.resolve(o)}addMatchingKeys(e,t,o){return this.Bi.Ei(t,o),ut.resolve()}removeMatchingKeys(e,t,o){this.Bi.Ri(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(m=>{d.push(u.markPotentiallyOrphaned(e,m))}),ut.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),ut.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Bi.Vi(t);return ut.resolve(o)}containsKey(e,t){return ut.resolve(this.Bi.containsKey(t))}}class im{constructor(e,t){this.Ui={},this.overlays={},this.es=new Xi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new qy(this),this.indexManager=new $g,this.ds=new nm(o=>this.referenceDelegate.qi(o)),this.M=new wc(t),this._s=new tm(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ui[e.toKey()];return o||(o=new zv(t,this.referenceDelegate),this.Ui[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){j("MemoryPersistence","Starting transaction:",e);const u=new Zy(this.es.next());return this.referenceDelegate.Ki(),o(u).next(d=>this.referenceDelegate.Gi(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Qi(e,t){return ut.or(Object.values(this.Ui).map(o=>()=>o.containsKey(e,t)))}}class Zy extends Vu{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.ji=new Jf,this.Wi=null}static zi(e){return new ep(e)}get Hi(){if(this.Wi)return this.Wi;throw st()}addReference(e,t,o){return this.ji.addReference(o,t),this.Hi.delete(o.toString()),ut.resolve()}removeReference(e,t,o){return this.ji.removeReference(o,t),this.Hi.add(o.toString()),ut.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),ut.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(u=>this.Hi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Hi.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ut.forEach(this.Hi,o=>{const u=Vt.fromPath(o);return this.Ji(e,u).next(d=>{d||t.removeEntry(u,an.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(o=>{o?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return ut.or([()=>ut.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function bo(i,e){return`firestore_clients_${i}_${e}`}function sm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function tp(i,e){return`firestore_targets_${i}_${e}`}class np{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Yi(e,t,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new gt(u.error.code,u.error.message))),m?new np(e,t,u.state,d):(ne("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Yi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new gt(o.error.code,o.error.message))),d?new Nh(e,o.state,u):(ne("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ed{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=ru();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=Cu(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Ed(e,d):(ne("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class om{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new om(t.clientId,t.onlineState):(ne("SharedClientState",`Failed to parse online state: ${e}`),null)}}class rp{constructor(){this.activeTargetIds=ru()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wd{constructor(e,t,o,u,d){this.window=e,this.Yn=t,this.persistenceKey=o,this.er=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new er(kn),this.started=!1,this.rr=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ur=bo(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new rp),this.cr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,L.Z)(function*(){const t=yield e.syncEngine.Fs();for(const u of t){if(u===e.er)continue;const d=e.getItem(bo(e.persistenceKey,u));if(d){const m=Ed.Yi(u,d);m&&(e.ir=e.ir.insert(m.clientId,m))}}e.wr();const o=e.storage.getItem(e.dr);if(o){const u=e.mr(o);u&&e.gr(u)}for(const u of e.rr)e.sr(u);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,o){this.pr(e,t,o),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(tp(this.persistenceKey,e));if(o){const u=Nh.Yi(e,o);u&&(t=u.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tp(this.persistenceKey,e))}updateQueryState(e,t,o){this.Er(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Ir(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return j("SharedClientState","READ",e,t),t}setItem(e,t){j("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(j("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ur)return void ne("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,L.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const u=t.Pr(o.key);return t.br(u,null)}{const u=t.Vr(o.key,o.newValue);if(u)return t.br(u.clientId,u)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const u=t.vr(o.key,o.newValue);if(u)return t.Sr(u)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(o.key===t.dr){if(null!==o.newValue){const u=t.mr(o.newValue);if(u)return t.gr(u)}}else if(o.key===t.ar){const u=function(d){let m=Xi.A;if(null!=d)try{const D=JSON.parse(d);Ot("number"==typeof D),m=D}catch(D){ne("SharedClientState","Failed to read sequence number from WebStorage",D)}return m}(o.newValue);u!==Xi.A&&t.sequenceNumberHandler(u)}else if(o.key===t._r){const u=t.Nr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.kr(d)))}}else t.rr.push(o)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,o){const u=new np(this.currentUser,e,t,o),d=sm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Xi())}Ir(e){const t=sm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,o){const u=tp(this.persistenceKey,e),d=new Nh(e,t,o);this.setItem(u,d.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.Pr(e);return Ed.Yi(o,t)}vr(e,t){const o=this.hr.exec(e),u=Number(o[1]);return np.Yi(new I(void 0!==o[2]?o[2]:null),u,t)}Dr(e,t){const o=this.lr.exec(e),u=Number(o[1]);return Nh.Yi(u,t)}mr(e){return om.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,L.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);j("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const o=t?this.ir.insert(e,t):this.ir.remove(e),u=this.yr(this.ir),d=this.yr(o),m=[],D=[];return d.forEach(B=>{u.has(B)||m.push(B)}),u.forEach(B=>{d.has(B)||D.push(B)}),this.syncEngine.Fr(m,D).then(()=>{this.ir=o})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=ru();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class ip{constructor(){this.$r=new rp,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,o){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new rp,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Yy{Lr(e){}shutdown(){}}class am{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Qy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class um{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Xy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,o,u,d){const m=this.uo(e,t);j("RestConnection","Sending: ",m,o);const D={};return this.ao(D,u,d),this.co(e,m,D,o).then(B=>(j("RestConnection","Received: ",B),B),B=>{throw ye("RestConnection",`${e} failed with error: `,B,"url: ",m,"request:",o),B})}ho(e,t,o,u,d){return this.oo(e,t,o,u,d)}ao(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+E,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}uo(e,t){return`${this.io}/v1/${t}:${Qy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,u){return new Promise((d,m)=>{const D=new tc;D.listenOnce(jr.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case Ca.NO_ERROR:const z=D.getResponseJson();j("Connection","XHR received:",JSON.stringify(z)),d(z);break;case Ca.TIMEOUT:j("Connection",'RPC "'+e+'" timed out'),m(new gt($e.DEADLINE_EXCEEDED,"Request time out"));break;case Ca.HTTP_ERROR:const ue=D.getStatus();if(j("Connection",'RPC "'+e+'" failed with status:',ue,"response text:",D.getResponseText()),ue>0){const De=D.getResponseJson().error;if(De&&De.status&&De.message){const et=function(vt){const wt=vt.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(wt)>=0?wt:$e.UNKNOWN}(De.status);m(new gt(et,De.message))}else m(new gt($e.UNKNOWN,"Server responded with status "+D.getStatus()))}else m(new gt($e.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{j("Connection",'RPC "'+e+'" completed.')}});const B=JSON.stringify(u);D.send(t,"POST",B,o,15)})}lo(e,t,o){const u=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Go(),m=Wo(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new ba({})),this.ao(D.initMessageHeaders,t,o),(0,We.uI)()||(0,We.b$)()||(0,We.d)()||(0,We.w1)()||(0,We.Mn)()||(0,We.ru)()||(D.httpHeadersOverwriteParam="$httpHeaders");const B=u.join("");j("Connection","Creating WebChannel: "+B,D);const z=d.createWebChannel(B,D);let ue=!1,De=!1;const et=new um({Wr:wt=>{De?j("Connection","Not sending because WebChannel is closed:",wt):(ue||(j("Connection","Opening WebChannel transport."),z.open(),ue=!0),j("Connection","WebChannel sending:",wt),z.send(wt))},zr:()=>z.close()}),vt=(wt,ln,Gn)=>{wt.listen(ln,Ei=>{try{Gn(Ei)}catch(Mi){setTimeout(()=>{throw Mi},0)}})};return vt(z,Rs.EventType.OPEN,()=>{De||j("Connection","WebChannel transport opened.")}),vt(z,Rs.EventType.CLOSE,()=>{De||(De=!0,j("Connection","WebChannel transport closed"),et.no())}),vt(z,Rs.EventType.ERROR,wt=>{De||(De=!0,ye("Connection","WebChannel transport errored:",wt),et.no(new gt($e.UNAVAILABLE,"The operation could not be completed")))}),vt(z,Rs.EventType.MESSAGE,wt=>{var ln;if(!De){const Gn=wt.data[0];Ot(!!Gn);const Ei=Gn,Mi=Ei.error||(null===(ln=Ei[0])||void 0===ln?void 0:ln.error);if(Mi){j("Connection","WebChannel received error:",Mi);const ui=Mi.status;let ms=function(Gi){const to=$i[Gi];if(void 0!==to)return hc(to)}(ui),xi=Mi.message;void 0===ms&&(ms=$e.INTERNAL,xi="Unknown error status: "+ui+" with message "+Mi.message),De=!0,et.no(new gt(ms,xi)),z.close()}else j("Connection","WebChannel received:",Gn),et.so(Gn)}}),vt(m,Wa.STAT_EVENT,wt=>{wt.stat===Ls.PROXY?j("Connection","Detected buffering proxy"):wt.stat===Ls.NOPROXY&&j("Connection","Detected no buffering proxy")}),setTimeout(()=>{et.eo()},0),et}}function sp(){return"undefined"!=typeof window?window:null}function Fh(){return"undefined"!=typeof document?document:null}function Id(i){return new ch(i,!0)}class Lh{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Yn=e,this.timerId=t,this.fo=o,this._o=u,this.wo=d,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),o=Math.max(0,Date.now()-this.po),u=Math.max(0,t-o);u>0&&j("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,u,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class op{constructor(e,t,o,u,d,m,D,B){this.Yn=e,this.Ro=o,this.Po=u,this.bo=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=D,this.listener=B,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Lh(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,L.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,L.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var o=this;return(0,L.Z)(function*(){o.$o(),o.Bo(),o.Do.cancel(),o.Vo++,4!==e?o.Do.reset():t&&t.code===$e.RESOURCE_EXHAUSTED?(ne(t.toString()),ne("Using maximum backoff delay to prevent overloading the backend."),o.Do.Io()):t&&t.code===$e.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Lo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Vo===t&&this.qo(o,u)},o=>{e(()=>{const u=new gt($e.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ko(u)})})}qo(e,t){const o=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{o(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(u=>{o(()=>this.Ko(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}No(){var e=this;this.state=5,this.Do.To((0,L.Z)(function*(){e.state=0,e.start()}))}Ko(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jy extends op{constructor(e,t,o,u,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,m),this.M=d}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Nf(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:st(),u=e.targetChange.targetIds||[],d=function(B,z){return B.N?(Ot(void 0===z||"string"==typeof z),Jn.fromBase64String(z||"")):(Ot(void 0===z||z instanceof Uint8Array),Jn.fromUint8Array(z||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,D=m&&function(B){const z=void 0===B.code?$e.UNKNOWN:hc(B.code);return new gt(z,B.message||"")}(m);t=new Zs(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=ai(i,o.document.name),d=ps(o.document.updateTime),m=new K({mapValue:{fields:o.document.fields}}),D=Pe.newFoundDocument(u,d,m);t=new Zo(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=ai(i,o.document),d=o.readTime?ps(o.readTime):an.min(),m=Pe.newNoDocument(u,d);t=new Zo([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const o=e.documentRemove,u=ai(i,o.document);t=new Zo([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return st();{const o=e.filter,d=new nd(o.count||0);t=new gc(o.targetId,d)}}var B;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return an.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?an.min():d.readTime?ps(d.readTime):an.min()}(e);return this.listener.Qo(t,o)}jo(e){const t={};t.database=Rl(this.M),t.addTarget=function(u,d){let m;const D=d.target;return m=wo(D)?{documents:ph(u,D)}:{query:gh(u,D)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=jo(u,d.resumeToken):d.snapshotVersion.compareTo(an.min())>0&&(m.readTime=Sl(u,d.snapshotVersion.toTimestamp())),m}(this.M,e);const o=function c(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=Rl(this.M),t.removeTarget=e,this.Fo(t)}}class Va extends op{constructor(e,t,o,u,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,m),this.M=d,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Ff(i,e){return i&&i.length>0?(Ot(void 0!==e),i.map(t=>function(o,u){let d=ps(o.updateTime?o.updateTime:u);return d.isEqual(an.min())&&(d=ps(u)),new vl(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=ps(e.commitTime);return this.listener.Yo(o,t)}return Ot(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Rl(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>su(this.M,o))};this.Fo(t)}}class ap extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=u,this.tu=!1}eu(){if(this.tu)throw new gt($e.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.oo(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new gt($e.UNKNOWN,u.toString())})}ho(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ho(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new gt($e.UNKNOWN,u.toString())})}terminate(){this.tu=!0}}class e_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(ne(t),this.iu=!1):j("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class t_{constructor(e,t,o,u,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=d,this._u.Lr(D=>{o.enqueueAndForget((0,L.Z)(function*(){var B;zu(m)&&(j("RemoteStore","Restarting streams for network reachability change."),yield(B=(0,L.Z)(function*(z){const ue=_t(z);ue.fu.add(4),yield Mc(ue),ue.wu.set("Unknown"),ue.fu.delete(4),yield Vh(ue)}),function(z){return B.apply(this,arguments)})(m))}))}),this.wu=new e_(o,u)}}function Vh(i){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,L.Z)(function*(i){if(zu(i))for(const e of i.du)yield e(!0)}),Uh.apply(this,arguments)}function Mc(i){return up.apply(this,arguments)}function up(){return up=(0,L.Z)(function*(i){for(const e of i.du)yield e(!1)}),up.apply(this,arguments)}function Bh(i,e){const t=_t(i);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Dd(t)?xc(t):Ku(t).xo()&&lp(t,e))}function Ul(i,e){const t=_t(i),o=Ku(t);t.lu.delete(e),o.xo()&&lm(t,e),0===t.lu.size&&(o.xo()?o.Mo():zu(t)&&t.wu.set("Unknown"))}function lp(i,e){i.mu.Z(e.targetId),Ku(i).jo(e)}function lm(i,e){i.mu.Z(e),Ku(i).Wo(e)}function xc(i){i.mu=new sd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.lu.get(e)||null}),Ku(i).start(),i.wu.ru()}function Dd(i){return zu(i)&&!Ku(i).Co()&&i.lu.size>0}function zu(i){return 0===_t(i).fu.size}function jh(i){i.mu=void 0}function cp(i){return $h.apply(this,arguments)}function $h(){return $h=(0,L.Z)(function*(i){i.lu.forEach((e,t)=>{lp(i,e)})}),$h.apply(this,arguments)}function n_(i,e){return dp.apply(this,arguments)}function dp(){return dp=(0,L.Z)(function*(i,e){jh(i),Dd(i)?(i.wu.au(e),xc(i)):i.wu.set("Unknown")}),dp.apply(this,arguments)}function hp(i,e,t){return cm.apply(this,arguments)}function cm(){return cm=(0,L.Z)(function*(i,e,t){if(i.wu.set("Online"),e instanceof Zs&&2===e.state&&e.cause)try{yield(o=(0,L.Z)(function*(u,d){const m=d.cause;for(const D of d.targetIds)u.lu.has(D)&&(yield u.remoteSyncer.rejectListen(D,m),u.lu.delete(D),u.mu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Hh(i,o)}else if(e instanceof Zo?i.mu.ut(e):e instanceof gc?i.mu._t(e):i.mu.ht(e),!t.isEqual(an.min()))try{const o=yield Yg(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const m=u.mu.yt(d);return m.targetChanges.forEach((D,B)=>{if(D.resumeToken.approximateByteSize()>0){const z=u.lu.get(B);z&&u.lu.set(B,z.withResumeToken(D.resumeToken,d))}}),m.targetMismatches.forEach(D=>{const B=u.lu.get(D);if(!B)return;u.lu.set(D,B.withResumeToken(Jn.EMPTY_BYTE_STRING,B.snapshotVersion)),lm(u,D);const z=new Na(B.target,D,1,B.sequenceNumber);lp(u,z)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t))}catch(o){j("RemoteStore","Failed to raise snapshot:",o),yield Hh(i,o)}var o}),cm.apply(this,arguments)}function Hh(i,e,t){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,L.Z)(function*(i,e,t){if(!Uu(e))throw e;i.fu.add(1),yield Mc(i),i.wu.set("Offline"),t||(t=()=>Yg(i.localStore)),i.asyncQueue.enqueueRetryable((0,L.Z)(function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),i.fu.delete(1),yield Vh(i)}))}),Gh.apply(this,arguments)}function fp(i,e){return e().catch(t=>Hh(i,t,e))}function Bl(i){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,L.Z)(function*(i){const e=_t(i),t=qu(e);let o=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;dm(e);)try{const u=yield Ky(e.localStore,o);if(null===u){0===e.hu.length&&t.Mo();break}o=u.batchId,lu(e,u)}catch(u){yield Hh(e,u)}Cd(e)&&hm(e)}),Wh.apply(this,arguments)}function dm(i){return zu(i)&&i.hu.length<10}function lu(i,e){i.hu.push(e);const t=qu(i);t.xo()&&t.Ho&&t.Jo(e.mutations)}function Cd(i){return zu(i)&&!qu(i).Co()&&i.hu.length>0}function hm(i){qu(i).start()}function r_(i){return fm.apply(this,arguments)}function fm(){return fm=(0,L.Z)(function*(i){qu(i).Zo()}),fm.apply(this,arguments)}function pp(i){return zh.apply(this,arguments)}function zh(){return zh=(0,L.Z)(function*(i){const e=qu(i);for(const t of i.hu)e.Jo(t.mutations)}),zh.apply(this,arguments)}function gp(i,e,t){return jl.apply(this,arguments)}function jl(){return jl=(0,L.Z)(function*(i,e,t){const o=i.hu.shift(),u=pd.from(o,e,t);yield fp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Bl(i)}),jl.apply(this,arguments)}function i_(i,e){return bd.apply(this,arguments)}function bd(){return bd=(0,L.Z)(function*(i,e){var t;e&&qu(i).Ho&&(yield(t=(0,L.Z)(function*(o,u){if(Pu(d=u.code)&&d!==$e.ABORTED){const m=o.hu.shift();qu(o).ko(),yield fp(o,()=>o.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield Bl(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Cd(i)&&hm(i)}),bd.apply(this,arguments)}function mp(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,L.Z)(function*(i,e){const t=_t(i);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const o=zu(t);t.fu.add(3),yield Mc(t),o&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Vh(t)}),Kh.apply(this,arguments)}function qh(i,e){return yp.apply(this,arguments)}function yp(){return yp=(0,L.Z)(function*(i,e){const t=_t(i);e?(t.fu.delete(2),yield Vh(t)):e||(t.fu.add(2),yield Mc(t),t.wu.set("Unknown"))}),yp.apply(this,arguments)}function Ku(i){return i.gu||(i.gu=function(e,t,o){const u=_t(e);return u.eu(),new Jy(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:cp.bind(null,i),Yr:n_.bind(null,i),Qo:hp.bind(null,i)}),i.du.push(function(){var e=(0,L.Z)(function*(t){t?(i.gu.ko(),Dd(i)?xc(i):i.wu.set("Unknown")):(yield i.gu.stop(),jh(i))});return function(t){return e.apply(this,arguments)}}())),i.gu}function qu(i){return i.yu||(i.yu=function(e,t,o){const u=_t(e);return u.eu(),new Va(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:r_.bind(null,i),Yr:i_.bind(null,i),Xo:pp.bind(null,i),Yo:gp.bind(null,i)}),i.du.push(function(){var e=(0,L.Z)(function*(t){t?(i.yu.ko(),yield Bl(i)):(yield i.yu.stop(),i.hu.length>0&&(j("RemoteStore",`Stopping write stream with ${i.hu.length} pending writes`),i.hu=[]))});return function(t){return e.apply(this,arguments)}}())),i.yu}class _p{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,o,u,d){const m=Date.now()+o,D=new _p(e,t,m,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gt($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $l(i,e){if(ne("AsyncQueue",`${e}: ${i}`),Uu(i))return new gt($e.UNAVAILABLE,`${e}: ${i}`);throw i}class fa{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Vt.comparator(t.key,o.key):(t,o)=>Vt.comparator(t.key,o.key),this.keyedMap=id(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new fa(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new fa;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class vp{constructor(){this.pu=new er(Vt.comparator)}track(e){const t=e.doc.key,o=this.pu.get(t);o?0!==e.type&&3===o.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==o.type?this.pu=this.pu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.pu=this.pu.remove(t):1===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):st():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Rc{constructor(e,t,o,u,d,m,D,B){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=D,this.excludesMetadataChanges=B}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Rc(e,t,fa.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class s_{constructor(){this.Tu=void 0,this.listeners=[]}}class Oc{constructor(){this.queries=new Oa(e=>Jd(e),Uo),this.onlineState="Unknown",this.Eu=new Set}}function Ep(i,e){return wp.apply(this,arguments)}function wp(){return wp=(0,L.Z)(function*(i,e){const t=_t(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new s_),u)try{d.Tu=yield t.onListen(o)}catch(m){const D=$l(m,`Initialization of query '${Jc(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.Au(t.onlineState),d.Tu&&e.Ru(d.Tu)&&Zh(t)}),wp.apply(this,arguments)}function Ip(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,L.Z)(function*(i,e){const t=_t(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Dp.apply(this,arguments)}function pa(i,e){const t=_t(i);let o=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const D of m.listeners)D.Ru(u)&&(o=!0);m.Tu=u}}o&&Zh(t)}function Cp(i,e,t){const o=_t(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Zh(i){i.Eu.forEach(e=>{e.next()})}class Yh{constructor(e,t,o){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}Ru(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Rc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class pm{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class bp{constructor(e){this.M=e}fi(e){return ai(this.M,e)}di(e){return e.metadata.exists?yc(this.M,e.document,!1):Pe.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return ps(e)}}class o_{constructor(e,t,o){this.Nu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gm(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=fr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new bp(this.M);for(const u of e)if(u.metadata.queries){const d=o.fi(u.metadata.name);for(const m of u.metadata.queries){const D=(t.get(m)||Ln()).add(d);t.set(m,D)}}return t}complete(){var e=this;return(0,L.Z)(function*(){const t=yield function em(i,e,t,o){return Ph.apply(this,arguments)}(e.localStore,new bp(e.M),e.documents,e.Nu.id),o=e.Mu(e.documents);for(const u of e.queries)yield Xf(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function gm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class mm{constructor(e){this.key=e}}class ym{constructor(e){this.key=e}}class Tp{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Ln(),this.mutatedKeys=Ln(),this.Uu=eh(e),this.qu=new fa(this.Uu)}get Ku(){return this.$u}Gu(e,t){const o=t?t.Qu:new vp,u=t?t.qu:this.qu;let d=t?t.mutatedKeys:this.mutatedKeys,m=u,D=!1;const B=sc(this.query)&&u.size===this.query.limit?u.last():null,z=Au(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ue,De)=>{const et=u.get(ue),vt=ed(this.query,De)?De:null,wt=!!et&&this.mutatedKeys.has(et.key),ln=!!vt&&(vt.hasLocalMutations||this.mutatedKeys.has(vt.key)&&vt.hasCommittedMutations);let Gn=!1;et&&vt?et.data.isEqual(vt.data)?wt!==ln&&(o.track({type:3,doc:vt}),Gn=!0):this.ju(et,vt)||(o.track({type:2,doc:vt}),Gn=!0,(B&&this.Uu(vt,B)>0||z&&this.Uu(vt,z)<0)&&(D=!0)):!et&&vt?(o.track({type:0,doc:vt}),Gn=!0):et&&!vt&&(o.track({type:1,doc:et}),Gn=!0,(B||z)&&(D=!0)),Gn&&(vt?(m=m.add(vt),d=ln?d.add(ue):d.delete(ue)):(m=m.delete(ue),d=d.delete(ue)))}),sc(this.query)||Au(this.query))for(;m.size>this.query.limit;){const ue=sc(this.query)?m.last():m.first();m=m.delete(ue.key),d=d.delete(ue.key),o.track({type:1,doc:ue})}return{qu:m,Qu:o,ni:D,mutatedKeys:d}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const d=e.Qu.Iu();d.sort((z,ue)=>function(De,et){const vt=wt=>{switch(wt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return vt(De)-vt(et)}(z.type,ue.type)||this.Uu(z.doc,ue.doc)),this.Wu(o);const m=t?this.zu():[],D=0===this.Lu.size&&this.current?1:0,B=D!==this.Bu;return this.Bu=D,0!==d.length||B?{snapshot:new Rc(this.query,e.qu,u,d,e.mutatedKeys,0===D,B,!1),Hu:m}:{Hu:m}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new vp,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Ln(),this.qu.forEach(o=>{this.Ju(o.key)&&(this.Lu=this.Lu.add(o.key))});const t=[];return e.forEach(o=>{this.Lu.has(o)||t.push(new ym(o))}),this.Lu.forEach(o=>{e.has(o)||t.push(new mm(o))}),t}Yu(e){this.$u=e.li,this.Lu=Ln();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Rc.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Kv{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class _m{constructor(e){this.key=e,this.Zu=!1}}class a_{constructor(e,t,o,u,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.ta={},this.ea=new Oa(D=>Jd(D),Uo),this.na=new Map,this.sa=new Set,this.ia=new er(Vt.comparator),this.ra=new Map,this.oa=new Jf,this.ua={},this.aa=new Map,this.ca=ou.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function u_(i,e){return vm.apply(this,arguments)}function vm(){return vm=(0,L.Z)(function*(i,e){const t=Ju(i);let o,u;const d=t.ea.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.Xu();else{const m=yield La(t.localStore,fo(e));t.isPrimaryClient&&Bh(t.remoteStore,m);const D=t.sharedClientState.addLocalQueryTarget(m.targetId);o=m.targetId,u=yield Em(t,e,o,"current"===D)}return u}),vm.apply(this,arguments)}function Em(i,e,t,o){return Td.apply(this,arguments)}function Td(){return Td=(0,L.Z)(function*(i,e,t,o){i.la=(ue,De,et)=>{return(vt=(0,L.Z)(function*(wt,ln,Gn,Ei){let Mi=ln.view.Gu(Gn);Mi.ni&&(Mi=yield uu(wt.localStore,ln.query,!1).then(({documents:xi})=>ln.view.Gu(xi,Mi)));const ui=Ei&&Ei.targetChanges.get(ln.targetId),ms=ln.view.applyChanges(Mi,wt.isPrimaryClient,ui);return Rp(wt,ln.targetId,ms.Hu),ms.snapshot}),function(wt,ln,Gn,Ei){return vt.apply(this,arguments)})(i,ue,De,et);var vt};const u=yield uu(i.localStore,e,!0),d=new Tp(e,u.li),m=d.Gu(u.documents),D=es.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),B=d.applyChanges(m,i.isPrimaryClient,D);Rp(i,t,B.Hu);const z=new Kv(e,t,d);return i.ea.set(e,z),i.na.has(t)?i.na.get(t).push(e):i.na.set(t,[e]),B.snapshot}),Td.apply(this,arguments)}function l_(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,L.Z)(function*(i,e){const t=_t(i),o=t.ea.get(e),u=t.na.get(o.targetId);if(u.length>1)return t.na.set(o.targetId,u.filter(d=>!Uo(d,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield ha(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Ul(t.remoteStore,o.targetId),Pc(t,o.targetId)}).catch(Fl))):(Pc(t,o.targetId),yield ha(t.localStore,o.targetId,!0))}),Qh.apply(this,arguments)}function Im(){return Im=(0,L.Z)(function*(i,e,t){const o=el(i);try{const u=yield function(d,m){const D=_t(d),B=Fi.now(),z=m.reduce((De,et)=>De.add(et.key),Ln());let ue;return D.persistence.runTransaction("Locally write mutations","readwrite",De=>D.ci.Ks(De,z).next(et=>{ue=et;const vt=[];for(const wt of m){const ln=Rg(wt,ue.get(wt.key));null!=ln&&vt.push(new Ou(wt.key,ln,ce(ln.value.mapValue),ji.exists(!0)))}return D.Bs.addMutationBatch(De,B,vt,m)})).then(De=>(De.applyToLocalDocumentSet(ue),{batchId:De.batchId,changes:ue}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,m,D){let B=d.ua[d.currentUser.toKey()];B||(B=new er(kn)),B=B.insert(m,D),d.ua[d.currentUser.toKey()]=B}(o,u.batchId,t),yield ea(o,u.changes),yield Bl(o.remoteStore)}catch(u){const d=$l(u,"Failed to persist write");t.reject(d)}}),Im.apply(this,arguments)}function Jo(i,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,L.Z)(function*(i,e){const t=_t(i);try{const o=yield Qg(t.localStore,e);e.targetChanges.forEach((u,d)=>{const m=t.ra.get(d);m&&(Ot(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.Zu=!0:u.modifiedDocuments.size>0?Ot(m.Zu):u.removedDocuments.size>0&&(Ot(m.Zu),m.Zu=!1))}),yield ea(t,o,e)}catch(o){yield Fl(o)}}),Dm.apply(this,arguments)}function c_(i,e,t){const o=_t(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ea.forEach((d,m)=>{const D=m.view.Au(e);D.snapshot&&u.push(D.snapshot)}),function(d,m){const D=_t(d);D.onlineState=m;let B=!1;D.queries.forEach((z,ue)=>{for(const De of ue.listeners)De.Au(m)&&(B=!0)}),B&&Zh(D)}(o.eventManager,e),u.length&&o.ta.Qo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Cm(i,e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,L.Z)(function*(i,e,t){const o=_t(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.ra.get(e),d=u&&u.key;if(d){let m=new er(Vt.comparator);m=m.insert(d,Pe.newNoDocument(d,an.min()));const D=Ln().add(d),B=new iu(an.min(),new Map,new Jr(kn),m,D);yield Jo(o,B),o.ia=o.ia.remove(d),o.ra.delete(e),Op(o)}else yield ha(o.localStore,e,!1).then(()=>Pc(o,e,t)).catch(Fl)}),Xh.apply(this,arguments)}function bm(i,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,L.Z)(function*(i,e){const t=_t(i),o=e.batch.batchId;try{const u=yield Qf(t.localStore,e);xp(t,o,null),Ad(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield ea(t,u)}catch(u){yield Fl(u)}}),Ap.apply(this,arguments)}function qv(i,e,t){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,L.Z)(function*(i,e,t){const o=_t(i);try{const u=yield function(d,m){const D=_t(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let z;return D.Bs.lookupMutationBatch(B,m).next(ue=>(Ot(null!==ue),z=ue.keys(),D.Bs.removeMutationBatch(B,ue))).next(()=>D.Bs.performConsistencyCheck(B)).next(()=>D.ci.Ks(B,z))})}(o.localStore,e);xp(o,e,t),Ad(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield ea(o,u)}catch(u){yield Fl(u)}}),Jh.apply(this,arguments)}function Mp(){return Mp=(0,L.Z)(function*(i,e){const t=_t(i);zu(t.remoteStore)||j("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const m=_t(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>m.Bs.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.aa.get(o)||[];u.push(e),t.aa.set(o,u)}catch(o){const u=$l(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Mp.apply(this,arguments)}function Ad(i,e){(i.aa.get(e)||[]).forEach(t=>{t.resolve()}),i.aa.delete(e)}function xp(i,e,t){const o=_t(i);let u=o.ua[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ua[o.currentUser.toKey()]=u}}function Pc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.na.get(e))i.ea.delete(o),t&&i.ta.fa(o,t);i.na.delete(e),i.isPrimaryClient&&i.oa.Pi(e).forEach(o=>{i.oa.containsKey(o)||Tm(i,o)})}function Tm(i,e){i.sa.delete(e.path.canonicalString());const t=i.ia.get(e);null!==t&&(Ul(i.remoteStore,t),i.ia=i.ia.remove(e),i.ra.delete(t),Op(i))}function Rp(i,e,t){for(const o of t)o instanceof mm?(i.oa.addReference(o.key,e),d_(i,o)):o instanceof ym?(j("SyncEngine","Document no longer in limbo: "+o.key),i.oa.removeReference(o.key,e),i.oa.containsKey(o.key)||Tm(i,o.key)):st()}function d_(i,e){const t=e.key,o=t.path.canonicalString();i.ia.get(t)||i.sa.has(o)||(j("SyncEngine","New document in limbo: "+t),i.sa.add(o),Op(i))}function Op(i){for(;i.sa.size>0&&i.ia.size<i.maxConcurrentLimboResolutions;){const e=i.sa.values().next().value;i.sa.delete(e);const t=new Vt(fr.fromString(e)),o=i.ca.next();i.ra.set(o,new _m(t)),i.ia=i.ia.insert(t,o),Bh(i.remoteStore,new Na(fo(Vo(t.path)),o,2,Xi.A))}}function ea(i,e,t){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,L.Z)(function*(i,e,t){const o=_t(i),u=[],d=[],m=[];var D;o.ea.isEmpty()||(o.ea.forEach((D,B)=>{m.push(o.la(B,e,t).then(z=>{if(z){o.isPrimaryClient&&o.sharedClientState.updateQueryState(B.targetId,z.fromCache?"not-current":"current"),u.push(z);const ue=Rh.Ys(B.targetId,z);d.push(ue)}}))}),yield Promise.all(m),o.ta.Qo(u),yield(D=(0,L.Z)(function*(B,z){const ue=_t(B);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",De=>ut.forEach(z,et=>ut.forEach(et.Hs,vt=>ue.persistence.referenceDelegate.addReference(De,et.targetId,vt)).next(()=>ut.forEach(et.Js,vt=>ue.persistence.referenceDelegate.removeReference(De,et.targetId,vt)))))}catch(De){if(!Uu(De))throw De;j("LocalStore","Failed to update sequence numbers: "+De)}for(const De of z){const et=De.targetId;if(!De.fromCache){const vt=ue.ii.get(et),ln=vt.withLastLimboFreeSnapshotVersion(vt.snapshotVersion);ue.ii=ue.ii.insert(et,ln)}}}),function(B,z){return D.apply(this,arguments)})(o.localStore,d))}),Zu.apply(this,arguments)}function h_(i,e){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,L.Z)(function*(i,e){const t=_t(i);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const o=yield Zf(t.localStore,e);t.currentUser=e,(u=t).aa.forEach(m=>{m.forEach(D=>{D.reject(new gt($e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.aa.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ea(t,o.hi)}var u}),Hl.apply(this,arguments)}function f_(i,e){const t=_t(i),o=t.ra.get(e);if(o&&o.Zu)return Ln().add(o.key);{let u=Ln();const d=t.na.get(e);if(!d)return u;for(const m of d){const D=t.ea.get(m);u=u.unionWith(D.view.Ku)}return u}}function p_(i,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,L.Z)(function*(i,e){const t=_t(i),o=yield uu(t.localStore,e.query,!0),u=e.view.Yu(o);return t.isPrimaryClient&&Rp(t,e.targetId,u.Hu),u}),Sd.apply(this,arguments)}function Ua(i,e){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,L.Z)(function*(i,e){const t=_t(i);return Vl(t.localStore,e).then(o=>ea(t,o))}),Gl.apply(this,arguments)}function Js(i,e,t,o){return cu.apply(this,arguments)}function cu(){return cu=(0,L.Z)(function*(i,e,t,o){const u=_t(i),d=yield function(m,D){const B=_t(m),z=_t(B.Bs);return B.persistence.runTransaction("Lookup mutation documents","readonly",ue=>z.fn(ue,D).next(De=>De?B.ci.Ks(ue,De):ut.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield Bl(u.remoteStore):"acknowledged"===t||"rejected"===t?(xp(u,e,o||null),Ad(u,e),D=e,_t(_t(u.localStore).Bs)._n(D)):st(),yield ea(u,d)):j("SyncEngine","Cannot apply mutation batch with id: "+e)}),cu.apply(this,arguments)}function To(){return To=(0,L.Z)(function*(i,e){const t=_t(i);if(Ju(t),el(t),!0===e&&!0!==t.ha){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield tf(t,o.toArray());t.ha=!0,yield qh(t.remoteStore,!0);for(const d of u)Bh(t.remoteStore,d)}else if(!1===e&&!1!==t.ha){const o=[];let u=Promise.resolve();t.na.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(Pc(t,m),ha(t.localStore,m,!0))),Ul(t.remoteStore,m)}),yield u,yield tf(t,o),function(d){const m=_t(d);m.ra.forEach((D,B)=>{Ul(m.remoteStore,B)}),m.oa.bi(),m.ra=new Map,m.ia=new er(Vt.comparator)}(t),t.ha=!1,yield qh(t.remoteStore,!1)}}),To.apply(this,arguments)}function tf(i,e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=(0,L.Z)(function*(i,e,t){const o=_t(i),u=[],d=[];for(const m of e){let D;const B=o.na.get(m);if(B&&0!==B.length){D=yield La(o.localStore,fo(B[0]));for(const z of B){const ue=o.ea.get(z),De=yield p_(o,ue);De.snapshot&&d.push(De.snapshot)}}else{const z=yield Sc(o.localStore,m);D=yield La(o.localStore,z),yield Em(o,Wl(z),m,!1)}u.push(D)}return o.ta.Qo(d),u}),Yu.apply(this,arguments)}function Wl(i){return ic(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function kc(i){const e=_t(i);return _t(_t(e.localStore).persistence).Fs()}function Nc(i,e,t,o){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,L.Z)(function*(i,e,t,o){const u=_t(i);if(u.ha)return void j("SyncEngine","Ignoring unexpected query state notification.");const d=u.na.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const m=yield Vl(u.localStore,ac(d[0])),D=iu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ea(u,m,D);break}case"rejected":yield ha(u.localStore,e,!0),Pc(u,e,o);break;default:st()}}),Qu.apply(this,arguments)}function Fc(i,e,t){return Xu.apply(this,arguments)}function Xu(){return Xu=(0,L.Z)(function*(i,e,t){const o=Ju(i);if(o.ha){for(const u of e){if(o.na.has(u)){j("SyncEngine","Adding an already active target "+u);continue}const d=yield Sc(o.localStore,u),m=yield La(o.localStore,d);yield Em(o,Wl(d),m.targetId,!1),Bh(o.remoteStore,m)}for(const u of t)o.na.has(u)&&(yield ha(o.localStore,u,!1).then(()=>{Ul(o.remoteStore,u),Pc(o,u)}).catch(Fl))}}),Xu.apply(this,arguments)}function Ju(i){const e=_t(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cm.bind(null,e),e.ta.Qo=pa.bind(null,e.eventManager),e.ta.fa=Cp.bind(null,e.eventManager),e}function el(i){const e=_t(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qv.bind(null,e),e}class Pp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,L.Z)(function*(){t.M=Id(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return au(this.persistence,new Oh,e.initialUser,this.M)}wa(e){return new im(ep.zi,this.M)}_a(e){return new ip}terminate(){var e=this;return(0,L.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kp extends Pp{constructor(e,t,o){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,L.Z)(function*(){yield t().call(o,e),yield o.ya.initialize(o,e),yield el(o.ya.syncEngine),yield Bl(o.ya.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ga(e){return au(this.persistence,new Oh,e.initialUser,this.M)}ma(e){return new $v(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=xh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Xs.withCacheSize(this.cacheSizeBytes):Xs.DEFAULT;return new Fa(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,sp(),Fh(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new ip}}class Sm extends kp{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,L.Z)(function*(){yield t().call(o,e);const u=o.ya.syncEngine;o.sharedClientState instanceof wd&&(o.sharedClientState.syncEngine={Mr:Js.bind(null,u),Or:Nc.bind(null,u),Fr:Fc.bind(null,u),Fs:kc.bind(null,u),kr:Ua.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var d=(0,L.Z)(function*(m){yield function ef(i,e){return To.apply(this,arguments)}(o.ya.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):m||o.gcScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}_a(e){const t=sp();if(!wd.vt(t))throw new gt($e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=xh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wd(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class nf{initialize(e,t){var o=this;return(0,L.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>c_(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=h_.bind(null,o.syncEngine),yield qh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Oc}createDatastore(e){const t=Id(e.databaseInfo.databaseId),o=new Xy(e.databaseInfo);return new ap(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>c_(this.syncEngine,D,0),m=am.vt()?new am:new Yy,new t_(t,o,u,d,m);var t,o,u,d,m}createSyncEngine(e,t){return function(o,u,d,m,D,B,z){const ue=new a_(o,u,d,m,D,B);return z&&(ue.ha=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,L.Z)(function*(t){const o=_t(t);j("RemoteStore","RemoteStore shutting down."),o.fu.add(5),yield Mc(o),o._u.shutdown(),o.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Np(i,e=10240){let t=0;return{read:()=>(0,L.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,L.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Md{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mm{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new $r,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(o=>{o&&o.xu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,L.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,L.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,L.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const o=e.Ea.decode(t),u=Number(o);isNaN(u)&&e.Pa(`length string (${o}) is not valid number`);const d=yield e.ba(u);return new pm(JSON.parse(d),t.length+u)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,L.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,L.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const o=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,L.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class xm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,L.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new gt($e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,L.Z)(function*(d,m){const D=_t(d),B=Rl(D.M)+"/documents",z={documents:m.map(vt=>Fu(D.M,vt))},ue=yield D.ho("BatchGetDocuments",B,z),De=new Map;ue.forEach(vt=>{const wt=function fh(i,e){return"found"in e?function(t,o){Ot(!!o.found);const u=ai(t,o.found.name),d=ps(o.found.updateTime),m=new K({mapValue:{fields:o.found.fields}});return Pe.newFoundDocument(u,d,m)}(i,e):"missing"in e?function(t,o){Ot(!!o.missing),Ot(!!o.readTime);const u=ai(t,o.missing),d=ps(o.readTime);return Pe.newNoDocument(u,d)}(i,e):st()}(D.M,vt);De.set(wt.key.toString(),wt)});const et=[];return m.forEach(vt=>{const wt=De.get(vt.toString());Ot(!!wt),et.push(wt)}),et}),function(d,m){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Il(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,L.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=Vt.fromPath(u);e.mutations.push(new Dl(d,e.precondition(d)))}),yield(o=(0,L.Z)(function*(u,d){const m=_t(u),D=Rl(m.M)+"/documents",B={writes:d.map(z=>su(m.M,z))};yield m.oo("Commit",D,B)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=an.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new gt($e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ji.updateTime(t):ji.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(an.min()))throw new gt($e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ji.updateTime(t)}return ji.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class g_{constructor(e,t,o,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=u,this.Sa=5,this.Do=new Lh(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,L.Z)(function*(){const t=new xm(e.datastore),o=e.Ca(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.xa(d)}))}).catch(u=>{e.xa(u)})}))}Ca(e){try{const t=this.updateFunction(e);return!hs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Pu(t)}return!1}}class Rm{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=I.UNAUTHENTICATED,this.clientId=rc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,L.Z)(function*(D){j("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(j("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,L.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new gt($e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,L.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=$l(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Om(i,e){return rf.apply(this,arguments)}function rf(){return rf=(0,L.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,L.Z)(function*(d){o.isEqual(d)||(yield Zf(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),rf.apply(this,arguments)}function Fp(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,L.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Vp(i);j("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>mp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>mp(e.remoteStore,d)),i.onlineComponents=e}),Lp.apply(this,arguments)}function Vp(i){return sf.apply(this,arguments)}function sf(){return sf=(0,L.Z)(function*(i){return i.offlineComponents||(j("FirestoreClient","Using default OfflineComponentProvider"),yield Om(i,new Pp)),i.offlineComponents}),sf.apply(this,arguments)}function af(i){return uf.apply(this,arguments)}function uf(){return uf=(0,L.Z)(function*(i){return i.onlineComponents||(j("FirestoreClient","Using default OnlineComponentProvider"),yield Fp(i,new nf)),i.onlineComponents}),uf.apply(this,arguments)}function Pm(i){return Vp(i).then(e=>e.persistence)}function Up(i){return Vp(i).then(e=>e.localStore)}function m_(i){return af(i).then(e=>e.remoteStore)}function Bp(i){return af(i).then(e=>e.syncEngine)}function tl(i){return xd.apply(this,arguments)}function xd(){return xd=(0,L.Z)(function*(i){const e=yield af(i),t=e.eventManager;return t.onListen=u_.bind(null,e.syncEngine),t.onUnlisten=l_.bind(null,e.syncEngine),t}),xd.apply(this,arguments)}function __(i,e,t={}){const o=new $r;return i.asyncQueue.enqueueAndForget((0,L.Z)(function*(){return function(u,d,m,D,B){const z=new Md({next:De=>{d.enqueueAndForget(()=>Ip(u,ue));const et=De.docs.has(m);!et&&De.fromCache?B.reject(new gt($e.UNAVAILABLE,"Failed to get document because the client is offline.")):et&&De.fromCache&&D&&"server"===D.source?B.reject(new gt($e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(De)},error:De=>B.reject(De)}),ue=new Yh(Vo(m.path),z,{includeMetadataChanges:!0,Cu:!0});return Ep(u,ue)}(yield tl(i),i.asyncQueue,e,t,o)})),o.promise}function jp(i,e,t={}){const o=new $r;return i.asyncQueue.enqueueAndForget((0,L.Z)(function*(){return function(u,d,m,D,B){const z=new Md({next:De=>{d.enqueueAndForget(()=>Ip(u,ue)),De.fromCache&&"server"===D.source?B.reject(new gt($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(De)},error:De=>B.reject(De)}),ue=new Yh(m,z,{includeMetadataChanges:!0,Cu:!0});return Ep(u,ue)}(yield tl(i),i.asyncQueue,e,t,o)})),o.promise}const $p=new Map;function Hp(i,e,t){if(!t)throw new gt($e.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Gp(i,e,t,o){if(!0===e&&!0===o)throw new gt($e.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Rd(i){if(!Vt.isDocumentKey(i))throw new gt($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function km(i){if(Vt.isDocumentKey(i))throw new gt($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Od(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":st()}function Ar(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new gt($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Od(i);throw new gt($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Nm(i,e){if(e<=0)throw new gt($e.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Fm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new gt($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gt($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Gp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fm({}),this._settingsFrozen=!1,e instanceof Ui?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new gt($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ui(u.options.projectId)}(e))}get app(){if(!this._app)throw new gt($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gt($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new wu;switch(t.type){case"gapi":const o=t.client;return Ot(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new nc(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new gt($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$p.get(e);t&&(j("ComponentProvider","Removing Datastore"),$p.delete(e),t.terminate())}(this),Promise.resolve()}}class _i{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ga(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _i(this.firestore,e,this._key)}}class eo{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new eo(this.firestore,e,this._query)}}class ga extends eo{constructor(e,t,o){super(e,t,Vo(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _i(this.firestore,null,new Vt(e))}withConverter(e){return new ga(this.firestore,e,this._path)}}function Wp(i,e,...t){if(i=(0,We.m9)(i),Hp("collection","path",e),i instanceof Pd){const o=fr.fromString(e,...t);return km(o),new ga(i,null,o)}{if(!(i instanceof _i||i instanceof ga))throw new gt($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(fr.fromString(e,...t));return km(o),new ga(i.firestore,null,o)}}function Kp(i,e,...t){if(i=(0,We.m9)(i),1===arguments.length&&(e=rc.R()),Hp("doc","path",e),i instanceof Pd){const o=fr.fromString(e,...t);return Rd(o),new _i(i,null,new Vt(o))}{if(!(i instanceof _i||i instanceof ga))throw new gt($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(fr.fromString(e,...t));return Rd(o),new _i(i.firestore,i instanceof ga?i.converter:null,new Vt(o))}}function lf(i,e){return i=(0,We.m9)(i),e=(0,We.m9)(e),(i instanceof _i||i instanceof ga)&&(e instanceof _i||e instanceof ga)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Lm(i,e){return i=(0,We.m9)(i),e=(0,We.m9)(e),i instanceof eo&&e instanceof eo&&i.firestore===e.firestore&&Uo(i._query,e._query)&&i.converter===e.converter}class Xv{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Lh(this,"async_queue_retry"),this.qa=()=>{const t=Fh();t&&j("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Fh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Fh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new $r;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,L.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Uu(t))throw t;j("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(o=>{throw this.$a=o,this.Ba=!1,ne("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(o)),o}).then(o=>(this.Ba=!1,o))));return this.ka=t,t}enqueueAfterDelay(e,t,o){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const u=_p.createAndSchedule(this,e,t,o,d=>this.ja(d));return this.Fa.push(u),u}Ka(){this.$a&&st()}verifyOperationInProgress(){}Wa(){var e=this;return(0,L.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function zl(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Vm{constructor(){this._progressObserver={},this._taskCompletionResolver=new $r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class vi extends Pd{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new Xv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cf(this),this._firestoreClient.terminate()}}function Hi(i){return i._firestoreClient||cf(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function cf(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new zo(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new Rm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function kd(i,e,t){const o=new $r;return i.asyncQueue.enqueue((0,L.Z)(function*(){try{yield Om(i,t),yield Fp(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(d=u).name?d.code===$e.FAILED_PRECONDITION||d.code===$e.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var d})).then(()=>o.promise)}function Xp(i){if(i._initialized||i._terminated)throw new gt($e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new gt($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new as(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ma(Jn.fromBase64String(e))}catch(t){throw new gt($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ma(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hu{constructor(e){this._methodName=e}}class Nd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new gt($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new gt($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kn(this._lat,e._lat)||kn(this._long,e._long)}}const T_=/^__.*__$/;class $m{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class Jp{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Vc{constructor(e,t,o,u,d,m){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===d&&this.Ya(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Vc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.nc(e),u}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.Ya(),u}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Ld(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(eg(this.Xa)&&T_.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Hm{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||Id(e)}ac(e,t,o,u=!1){return new Vc({Xa:e,methodName:t,uc:o,path:as.emptyPath(),ec:!1,oc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function nl(i){const e=i._freezeSettings(),t=Id(i._databaseId);return new Hm(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Fd(i,e,t,o,u,d={}){const m=i.ac(d.merge||d.mergeFields?2:0,e,t,u);og("Data must be an object, but it was:",m,o);const D=gs(o,m);let B,z;if(d.merge)B=new zs(m.fieldMask),z=m.fieldTransforms;else if(d.mergeFields){const ue=[];for(const De of d.mergeFields){const et=ag(e,De,t);if(!m.contains(et))throw new gt($e.INVALID_ARGUMENT,`Field '${et}' is specified in your field mask but missing from your input data.`);ug(ue,et)||ue.push(et)}B=new zs(ue),z=m.fieldTransforms.filter(De=>B.covers(De.field))}else B=null,z=m.fieldTransforms;return new $m(new K(D),B,z)}class Uc extends hu{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uc}}function tg(i,e,t){return new Vc({Xa:3,uc:e.settings.uc,methodName:i._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class hf extends hu{_toFieldTransform(e){return new Ru(e.path,new Ja)}isEqual(e){return e instanceof hf}}class Gm extends hu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=tg(this,e,!0),o=this.cc.map(d=>Kl(d,t)),u=new eu(o);return new Ru(e.path,u)}isEqual(e){return this===e}}class Wm extends hu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=tg(this,e,!0),o=this.cc.map(d=>Kl(d,t)),u=new xu(o);return new Ru(e.path,u)}isEqual(e){return this===e}}class t0 extends hu{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new _l(e.M,th(e.M,this.hc));return new Ru(e.path,t)}isEqual(e){return this===e}}function ng(i,e,t,o){const u=i.ac(1,e,t);og("Data must be an object, but it was:",u,o);const d=[],m=K.empty();Ka(o,(B,z)=>{const ue=ff(e,B,t);z=(0,We.m9)(z);const De=u.sc(ue);if(z instanceof Uc)d.push(ue);else{const et=Kl(z,De);null!=et&&(d.push(ue),m.set(ue,et))}});const D=new zs(d);return new Jp(m,D,u.fieldTransforms)}function rg(i,e,t,o,u,d){const m=i.ac(1,e,t),D=[ag(e,o,t)],B=[u];if(d.length%2!=0)throw new gt($e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let et=0;et<d.length;et+=2)D.push(ag(e,d[et])),B.push(d[et+1]);const z=[],ue=K.empty();for(let et=D.length-1;et>=0;--et)if(!ug(z,D[et])){const vt=D[et];let wt=B[et];wt=(0,We.m9)(wt);const ln=m.sc(vt);if(wt instanceof Uc)z.push(vt);else{const Gn=Kl(wt,ln);null!=Gn&&(z.push(vt),ue.set(vt,Gn))}}const De=new zs(z);return new Jp(ue,De,m.fieldTransforms)}function ig(i,e,t,o=!1){return Kl(t,i.ac(o?4:3,e))}function Kl(i,e){if(sg(i=(0,We.m9)(i)))return og("Unsupported field value:",e,i),gs(i,e);if(i instanceof hu)return function(t,o){if(!eg(o.Xa))throw o.rc(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.rc(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const m of t){let D=Kl(m,o.ic(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,We.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return th(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Fi.fromDate(t);return{timestampValue:Sl(o.M,u)}}if(t instanceof Fi){const u=new Fi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sl(o.M,u)}}if(t instanceof Nd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ma)return{bytesValue:jo(o.M,t._byteString)};if(t instanceof _i){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.rc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ml(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.rc(`Unsupported field value: ${Od(t)}`)}(i,e)}function gs(i,e){const t={};return Qc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(i,(o,u)=>{const d=Kl(u,e.tc(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function sg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Fi||i instanceof Nd||i instanceof ma||i instanceof _i||i instanceof hu)}function og(i,e,t){if(!sg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Od(t);throw e.rc("an object"===o?i+" a custom object":i+" "+o)}var o}function ag(i,e,t){if((e=(0,We.m9)(e))instanceof du)return e._internalPath;if("string"==typeof e)return ff(i,e);throw Ld("Field path arguments must be of type string or ",i,!1,void 0,t)}const zm=new RegExp("[~\\*/\\[\\]]");function ff(i,e,t){if(e.search(zm)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new du(...e.split("."))._internalPath}catch(o){throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Ld(i,e,t,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let B="";return(d||m)&&(B+=" (found",d&&(B+=` in field ${o}`),m&&(B+=` in document ${u}`),B+=")"),new gt($e.INVALID_ARGUMENT,D+i+B)}function ug(i,e){return i.some(t=>t.isEqual(e))}class Ba{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new _i(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new A_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class A_ extends Ba{data(){return super.data()}}function pf(i,e){return"string"==typeof e?ff(i,e):e instanceof du?e._internalPath:e._delegate._internalPath}class rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fu extends Ba{constructor(e,t,o,u,d,m){super(e,t,o,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(pf("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Bc extends fu{data(e={}){return super.data(e)}}class ql{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new rl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Bc(this._firestore,this._userDataWriter,o.key,o,new rl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gt($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>({type:"added",doc:new Bc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new rl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const D=new Bc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new rl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let B=-1,z=-1;return 0!==m.type&&(B=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),z=d.indexOf(m.doc.key)),{type:Km(m.type),doc:D,oldIndex:B,newIndex:z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Km(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function gf(i,e){return i instanceof fu&&e instanceof fu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ql&&e instanceof ql&&i._firestore===e._firestore&&Lm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ya(i){if(Au(i)&&0===i.explicitOrderBy.length)throw new gt($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vd{}function il(i,...e){for(const t of e)i=t._apply(i);return i}class ja extends Vd{constructor(e,t,o){super(),this.lc=e,this.fc=t,this.dc=o,this.type="where"}_apply(e){const t=nl(e.firestore),o=function(u,d,m,D,B,z,ue){let De;if(B.isKeyField()){if("array-contains"===z||"array-contains-any"===z)throw new gt($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${z}' queries on documentId().`);if("in"===z||"not-in"===z){hg(ue,z);const vt=[];for(const wt of ue)vt.push(dg(D,u,wt));De={arrayValue:{values:vt}}}else De=dg(D,u,ue)}else"in"!==z&&"not-in"!==z&&"array-contains-any"!==z||hg(ue,z),De=ig(m,"where",ue,"in"===z||"not-in"===z);const et=Vi.create(B,z,De);return function(vt,wt){if(wt.S()){const Gn=Su(vt);if(null!==Gn&&!Gn.isEqual(wt.field))throw new gt($e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Gn.toString()}' and '${wt.field.toString()}'`);const Ei=Xd(vt);null!==Ei&&Ud(0,wt.field,Ei)}const ln=function(Gn,Ei){for(const Mi of Gn.filters)if(Ei.indexOf(Mi.op)>=0)return Mi.op;return null}(vt,function(Gn){switch(Gn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(wt.op));if(null!==ln)throw new gt($e.INVALID_ARGUMENT,ln===wt.op?`Invalid query. You cannot use more than one '${wt.op.toString()}' filter.`:`Invalid query. You cannot use '${wt.op.toString()}' filters with '${ln.toString()}' filters.`)}(u,et),et}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new eo(e.firestore,e.converter,function(u,d){const m=u.filters.concat([d]);return new Io(u.path,u.collectionGroup,u.explicitOrderBy.slice(),m,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class va extends Vd{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new gt($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new gt($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new ml(u,d);return function(D,B){if(null===Xd(D)){const z=Su(D);null!==z&&Ud(0,z,B.field)}}(o,m),m}(e._query,this.lc,this._c);return new eo(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Io(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class lg extends Vd{constructor(e,t,o){super(),this.type=e,this.wc=t,this.mc=o}_apply(e){return new eo(e.firestore,e.converter,oc(e._query,this.wc,this.mc))}}class Zm extends Vd{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new eo(e.firestore,e.converter,(u=t,new Io((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class jc extends Vd{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new eo(e.firestore,e.converter,(u=t,new Io((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function Qm(i,e,t,o){if(t[0]=(0,We.m9)(t[0]),t[0]instanceof Ba)return function(u,d,m,D,B){if(!D)throw new gt($e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const z=[];for(const ue of Qa(u))if(ue.field.isKeyField())z.push(Fo(d,D.key));else{const De=D.data.field(ue.field);if(Ji(De))throw new gt($e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===De){const et=ue.field.canonicalString();throw new gt($e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${et}' (used as the orderBy) does not exist.`)}z.push(De)}return new Lo(z,B)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=nl(i.firestore);return function(d,m,D,B,z,ue){const De=d.explicitOrderBy;if(z.length>De.length)throw new gt($e.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const et=[];for(let vt=0;vt<z.length;vt++){const wt=z[vt];if(De[vt].field.isKeyField()){if("string"!=typeof wt)throw new gt($e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof wt}`);if(!yl(d)&&-1!==wt.indexOf("/"))throw new gt($e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${wt}' contains a slash.`);const ln=d.path.child(fr.fromString(wt));if(!Vt.isDocumentKey(ln))throw new gt($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${ln}' is not because it contains an odd number of segments.`);const Gn=new Vt(ln);et.push(Fo(m,Gn))}else{const ln=ig(D,B,wt);et.push(ln)}}return new Lo(et,ue)}(i._query,i.firestore._databaseId,u,e,t,o)}}function dg(i,e,t){if("string"==typeof(t=(0,We.m9)(t))){if(""===t)throw new gt($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yl(e)&&-1!==t.indexOf("/"))throw new gt($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(fr.fromString(t));if(!Vt.isDocumentKey(o))throw new gt($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Fo(i,new Vt(o))}if(t instanceof _i)return Fo(i,t._key);throw new gt($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Od(t)}.`)}function hg(i,e){if(!Array.isArray(i)||0===i.length)throw new gt($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new gt($e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ud(i,e,t){if(!t.isEqual(e))throw new gt($e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fg{convertValue(e,t="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const o={};return Ka(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Nd(Ai(e.latitude),Ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Us(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){const t=Vs(e);return new Fi(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=fr.fromString(e);Ot(Tn(o));const u=new Ui(o.get(1),o.get(3)),d=new Vt(o.popFirst(5));return u.isEqual(t)||ne(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Bd(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Xm extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _i(this.firestore,null,t)}}class mf{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nl(e)}set(e,t,o){this._verifyNotCommitted();const u=Ea(e,this._firestore),d=Bd(u.converter,t,o),m=Fd(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,ji.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=Ea(e,this._firestore);let m;return m="string"==typeof(t=(0,We.m9)(t))||t instanceof du?rg(this._dataReader,"WriteBatch.update",d._key,t,o,u):ng(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,ji.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ea(e,this._firestore);return this._mutations=this._mutations.concat(new Il(t._key,ji.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new gt($e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ea(i,e){if((i=(0,We.m9)(i)).firestore!==e)throw new gt($e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class sl extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _i(this.firestore,null,t)}}function pg(i,e,t){i=Ar(i,_i);const o=Ar(i.firestore,vi),u=Bd(i.converter,e,t);return $c(o,[Fd(nl(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,ji.none())])}function sy(i,e,t,...o){i=Ar(i,_i);const u=Ar(i.firestore,vi),d=nl(u);let m;return m="string"==typeof(e=(0,We.m9)(e))||e instanceof du?rg(d,"updateDoc",i._key,e,t,o):ng(d,"updateDoc",i._key,e),$c(u,[m.toMutation(i._key,ji.exists(!0))])}function oy(i,...e){var t,o,u;i=(0,We.m9)(i);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||zl(e[m])||(d=e[m],m++);const D={includeMetadataChanges:d.includeMetadataChanges};if(zl(e[m])){const De=e[m];e[m]=null===(t=De.next)||void 0===t?void 0:t.bind(De),e[m+1]=null===(o=De.error)||void 0===o?void 0:o.bind(De),e[m+2]=null===(u=De.complete)||void 0===u?void 0:u.bind(De)}let B,z,ue;if(i instanceof _i)z=Ar(i.firestore,vi),ue=Vo(i._key.path),B={next:De=>{e[m]&&e[m](gg(z,i,De))},error:e[m+1],complete:e[m+2]};else{const De=Ar(i,eo);z=Ar(De.firestore,vi),ue=De._query;const et=new sl(z);B={next:vt=>{e[m]&&e[m](new ql(z,et,De,vt))},error:e[m+1],complete:e[m+2]},ya(i._query)}return function(De,et,vt,wt){const ln=new Md(wt),Gn=new Yh(et,ln,vt);return De.asyncQueue.enqueueAndForget((0,L.Z)(function*(){return Ep(yield tl(De),Gn)})),()=>{ln.Ia(),De.asyncQueue.enqueueAndForget((0,L.Z)(function*(){return Ip(yield tl(De),Gn)}))}}(Hi(z),ue,D,B)}function $c(i,e){return function(t,o){const u=new $r;return t.asyncQueue.enqueueAndForget((0,L.Z)(function*(){return function wm(i,e,t){return Im.apply(this,arguments)}(yield Bp(t),o,u)})),u.promise}(Hi(i),e)}function gg(i,e,t){const o=t.docs.get(e._key),u=new sl(i);return new fu(i,u,e._key,o,new rl(t.hasPendingWrites,t.fromCache),e.converter)}class N_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=nl(e)}get(e){const t=Ea(e,this._firestore),o=new Xm(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return st();const d=u[0];if(d.isFoundDocument())return new Ba(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new Ba(this._firestore,o,t._key,null,t.converter);throw st()})}set(e,t,o){const u=Ea(e,this._firestore),d=Bd(u.converter,t,o),m=Fd(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,m),this}update(e,t,o,...u){const d=Ea(e,this._firestore);let m;return m="string"==typeof(t=(0,We.m9)(t))||t instanceof du?rg(this._dataReader,"Transaction.update",d._key,t,o,u):ng(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=Ea(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ea(e,this._firestore),o=new sl(this._firestore);return super.get(e).then(u=>new fu(this._firestore,o,t._key,u._document,new rl(!1,!1),t.converter))}}function yf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function mg(){if("undefined"==typeof Uint8Array)throw new gt("unimplemented","Uint8Arrays are not available in this environment.")}function yg(){if(!function Kd(){return"undefined"!=typeof atob}())throw new gt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){E=ee.SDK_VERSION,(0,ee._registerComponent)(new me.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),d=new vi(u,new Iu(t.getProvider("auth-internal")),new Du(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC")),(0,ee.registerVersion)(Eu,"3.4.8",i),(0,ee.registerVersion)(Eu,"3.4.8","esm2017")}();class Hc{constructor(e){this._delegate=e}static fromBase64String(e){return yg(),new Hc(ma.fromBase64String(e))}static fromUint8Array(e){return mg(),new Hc(ma.fromUint8Array(e))}toBase64(){return yg(),this._delegate.toBase64()}toUint8Array(){return mg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _f(i){return function ly(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class cy{enableIndexedDbPersistence(e,t){return function e0(i,e){Xp(i=Ar(i,vi));const t=Hi(i),o=i._freezeSettings(),u=new nf;return kd(t,u,new kp(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function D_(i){Xp(i=Ar(i,vi));const e=Hi(i),t=i._freezeSettings(),o=new nf;return kd(e,o,new Sm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function df(i){if(i._initialized&&!i._terminated)throw new gt($e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $r;return i._queue.enqueueAndForgetEvenWhileRestricted((0,L.Z)(function*(){try{yield(t=(0,L.Z)(function*(o){if(!ca.vt())return Promise.resolve();const u=o+"main";yield ca.delete(u)}),function(o){return t.apply(this,arguments)})(xh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _g{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ui||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ye("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function I_(i,e,t,o={}){var u;const d=(i=Ar(i,Pd))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&ye("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let m,D;if("string"==typeof o.mockUserToken)m=o.mockUserToken,D=I.MOCK_USER;else{m=(0,We.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const B=o.mockUserToken.sub||o.mockUserToken.user_id;if(!B)throw new gt($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new I(B)}i._authCredentials=new _o(new ws(m,D))}}(this._delegate,e,t,o)}enableNetwork(){return function Bm(i){return function y_(i){return i.asyncQueue.enqueue((0,L.Z)(function*(){const e=yield Pm(i),t=yield m_(i);return e.setNetworkEnabled(!0),function(o){const u=_t(o);return u.fu.delete(0),Vh(u)}(t)}))}(Hi(i=Ar(i,vi)))}(this._delegate)}disableNetwork(){return function Yp(i){return function Zv(i){return i.asyncQueue.enqueue((0,L.Z)(function*(){const e=yield Pm(i),t=yield m_(i);return e.setNetworkEnabled(!1),(o=(0,L.Z)(function*(u){const d=_t(u);d.fu.add(0),yield Mc(d),d.wu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Hi(i=Ar(i,vi)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Gp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Um(i){return function(e){const t=new $r;return e.asyncQueue.enqueueAndForget((0,L.Z)(function*(){return function Sp(i,e){return Mp.apply(this,arguments)}(yield Bp(e),t)})),t.promise}(Hi(i=Ar(i,vi)))}(this._delegate)}onSnapshotsInSync(e){return function k_(i,e){return function Qv(i,e){const t=new Md(e);return i.asyncQueue.enqueueAndForget((0,L.Z)(function*(){return o=yield tl(i),u=t,_t(o).Eu.add(u),void u.next();var o,u})),()=>{t.Ia(),i.asyncQueue.enqueueAndForget((0,L.Z)(function*(){return o=yield tl(i),u=t,void _t(o).Eu.delete(u);var o,u}))}}(Hi(i=Ar(i,vi)),zl(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new gt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zc(this,Wp(this._delegate,e))}catch(t){throw Ao(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bs(this,Kp(this._delegate,e))}catch(t){throw Ao(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new So(this,function zp(i,e){if(i=Ar(i,Pd),Hp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gt($e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new eo(i,null,(t=e,new Io(fr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ao(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F_(i,e){return function E_(i,e){const t=new $r;return i.asyncQueue.enqueueAndForget((0,L.Z)(function*(){const o=yield(u=i,af(u).then(d=>d.datastore));var u;new g_(i.asyncQueue,o,e,t).run()})),t.promise}(Hi(i=Ar(i,vi)),t=>e(new N_(i,t)))}(this._delegate,t=>e(new ol(this,t)))}batch(){return Hi(this._delegate),new hy(new mf(this._delegate,e=>$c(this._delegate,e)))}loadBundle(e){return function jm(i,e){const t=Hi(i=Ar(i,vi)),o=new Vm;return function Lc(i,e,t,o){const u=function(d,m){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,B=function(B,z){if(B instanceof Uint8Array)return Np(B,z);if(B instanceof ArrayBuffer)return Np(new Uint8Array(B),z);if(B instanceof ReadableStream)return B.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Mm(B,m);var B}(t,Id(e));i.asyncQueue.enqueueAndForget((0,L.Z)(function*(){!function Am(i,e,t){const o=_t(i);var u;(u=(0,L.Z)(function*(d,m,D){try{const B=yield m.getMetadata();if(yield function(et,vt){const wt=_t(et),ln=ps(vt.createTime);return wt.persistence.runTransaction("hasNewerBundle","readonly",Gn=>wt._s.getBundleMetadata(Gn,vt.id)).then(Gn=>!!Gn&&Gn.createTime.compareTo(ln)>=0)}(d.localStore,B))return yield m.close(),D._completeWith({taskState:"Success",documentsLoaded:(et=B).totalDocuments,bytesLoaded:et.totalBytes,totalDocuments:et.totalDocuments,totalBytes:et.totalBytes}),Promise.resolve(new Set);D._updateProgress(gm(B));const z=new o_(B,d.localStore,m.M);let ue=yield m.da();for(;ue;){const et=yield z.ku(ue);et&&D._updateProgress(et),ue=yield m.da()}const De=yield z.complete();return yield ea(d,De.Fu,void 0),yield function(et,vt){const wt=_t(et);return wt.persistence.runTransaction("Save bundle","readwrite",ln=>wt._s.saveBundleMetadata(ln,vt))}(d.localStore,B),D._completeWith(De.progress),Promise.resolve(De.Ou)}catch(B){return ye("SyncEngine",`Loading bundle failed with ${B}`),D._failWith(B),Promise.resolve(new Set)}var et}),function(d,m,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Bp(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Qp(i,e){return function w_(i,e){return i.asyncQueue.enqueue((0,L.Z)(function*(){return function(t,o){const u=_t(t);return u.persistence.runTransaction("Get named query","readonly",d=>u._s.getNamedQuery(d,o))}(yield Up(i),e)}))}(Hi(i=Ar(i,vi)),e).then(t=>t?new eo(i,null,t.query):null)}(this._delegate,e).then(t=>t?new So(this,t):null)}}class jd extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hc(new ma(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bs.forKey(t,this.firestore,null)}}class ol{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}get(e){const t=Yl(e);return this._delegate.get(t).then(o=>new Gc(this._firestore,new fu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Yl(e);return o?(yf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Yl(e);return this._delegate.delete(t),this}}class hy{constructor(e){this._delegate=e}set(e,t,o){const u=Yl(e);return o?(yf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Yl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Bc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wc(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Zl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Zl(e,new jd(e),t),u.set(t,d)),d}}Zl.INSTANCES=new WeakMap;class Bs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new gt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bs(t,new _i(t._delegate,o,new Vt(e)))}static forKey(e,t,o){return new Bs(t,new _i(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new zc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zc(this.firestore,Wp(this._delegate,e))}catch(t){throw Ao(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,We.m9)(e))instanceof _i&&lf(this._delegate,e)}set(e,t){t=yf("DocumentReference.set",t);try{return t?pg(this._delegate,e,t):pg(this._delegate,e)}catch(o){throw Ao(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?sy(this._delegate,e):sy(this._delegate,e,t,...o)}catch(u){throw Ao(u,"updateDoc()","DocumentReference.update()")}}delete(){return function O_(i){return $c(Ar(i.firestore,vi),[new Il(i._key,ji.none())])}(this._delegate)}onSnapshot(...e){const t=vf(e),o=H_(e,u=>new Gc(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return oy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ey(i){i=Ar(i,_i);const e=Ar(i.firestore,vi),t=Hi(e),o=new sl(e);return function Yv(i,e){const t=new $r;return i.asyncQueue.enqueueAndForget((0,L.Z)(function*(){return(o=(0,L.Z)(function*(u,d,m){try{const D=yield function(B,z){const ue=_t(B);return ue.persistence.runTransaction("read document","readonly",De=>ue.ci.Ls(De,z))}(u,d);D.isFoundDocument()?m.resolve(D):D.isNoDocument()?m.resolve(null):m.reject(new gt($e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const B=$l(D,`Failed to get document '${d} from cache`);m.reject(B)}}),function(u,d,m){return o.apply(this,arguments)})(yield Up(i),e,t);var o})),t.promise}(t,i._key).then(u=>new fu(e,o,i._key,u,new rl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ty(i){i=Ar(i,_i);const e=Ar(i.firestore,vi);return __(Hi(e),i._key,{source:"server"}).then(t=>gg(e,i,t))}(this._delegate):function Jm(i){i=Ar(i,_i);const e=Ar(i.firestore,vi);return __(Hi(e),i._key).then(t=>gg(e,i,t))}(this._delegate),t.then(o=>new Gc(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Bs(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function Ao(i,e,t){return i.message=i.message.replace(e,t),i}function vf(i){for(const e of i)if("object"==typeof e&&!_f(e))return e;return{}}function H_(i,e){var t,o;let u;return u=_f(i[0])?i[0]:_f(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Gc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gf(this._delegate,e._delegate)}}class Wc extends Gc{data(e){const t=this._delegate.data(e);return function hn(i,e){i||st()}(void 0!==t),t}}class So{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}where(e,t,o){try{return new So(this.firestore,il(this._delegate,function _a(i,e,t){const o=e,u=pf("where",i);return new ja(u,o,t)}(e,t,o)))}catch(u){throw Ao(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new So(this.firestore,il(this._delegate,function qm(i,e="asc"){const t=e,o=pf("orderBy",i);return new va(o,t)}(e,t)))}catch(o){throw Ao(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new So(this.firestore,il(this._delegate,function S_(i){return Nm("limit",i),new lg("limit",i,"F")}(e)))}catch(t){throw Ao(t,"limit()","Query.limit()")}}limitToLast(e){try{return new So(this.firestore,il(this._delegate,function M_(i){return Nm("limitToLast",i),new lg("limitToLast",i,"L")}(e)))}catch(t){throw Ao(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new So(this.firestore,il(this._delegate,function x_(...i){return new Zm("startAt",i,!0)}(...e)))}catch(t){throw Ao(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new So(this.firestore,il(this._delegate,function cg(...i){return new Zm("startAfter",i,!1)}(...e)))}catch(t){throw Ao(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new So(this.firestore,il(this._delegate,function R_(...i){return new jc("endBefore",i,!1)}(...e)))}catch(t){throw Ao(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new So(this.firestore,il(this._delegate,function Ym(...i){return new jc("endAt",i,!0)}(...e)))}catch(t){throw Ao(t,"endAt()","Query.endAt()")}}isEqual(e){return Lm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ry(i){i=Ar(i,eo);const e=Ar(i.firestore,vi),t=Hi(e),o=new sl(e);return function v_(i,e){const t=new $r;return i.asyncQueue.enqueueAndForget((0,L.Z)(function*(){return(o=(0,L.Z)(function*(u,d,m){try{const D=yield uu(u,d,!0),B=new Tp(d,D.li),z=B.Gu(D.documents),ue=B.applyChanges(z,!1);m.resolve(ue.snapshot)}catch(D){const B=$l(D,`Failed to execute query '${d} against cache`);m.reject(B)}}),function(u,d,m){return o.apply(this,arguments)})(yield Up(i),e,t);var o})),t.promise}(t,i._query).then(u=>new ql(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function iy(i){i=Ar(i,eo);const e=Ar(i.firestore,vi),t=Hi(e),o=new sl(e);return jp(t,i._query,{source:"server"}).then(u=>new ql(e,o,i,u))}(this._delegate):function ny(i){i=Ar(i,eo);const e=Ar(i.firestore,vi),t=Hi(e),o=new sl(e);return ya(i._query),jp(t,i._query).then(u=>new ql(e,o,i,u))}(this._delegate),t.then(o=>new vg(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=vf(e),o=H_(e,u=>new vg(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return oy(this._delegate,t,o)}withConverter(e){return new So(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}class Mn{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Wc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new So(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Mn(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Wc(this._firestore,o))})}isEqual(e){return gf(this._delegate,e._delegate)}}class zc extends So{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bs(this.firestore,e):null}doc(e){try{return new Bs(this.firestore,void 0===e?Kp(this._delegate):Kp(this._delegate,e))}catch(t){throw Ao(t,"doc()","CollectionReference.doc()")}}add(e){return function P_(i,e){const t=Ar(i.firestore,vi),o=Kp(i),u=Bd(i.converter,e);return $c(t,[Fd(nl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,ji.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Bs(this.firestore,t))}isEqual(e){return lf(this._delegate,e._delegate)}withConverter(e){return new zc(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function Yl(i){return Ar(i,_i)}class Kc{constructor(...e){this._delegate=new du(...e)}static documentId(){return new Kc(as.keyField().canonicalString())}isEqual(e){return(e=(0,We.m9)(e))instanceof du&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ql{constructor(e){this._delegate=e}static serverTimestamp(){const e=function V_(){return new hf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ql(e)}static delete(){const e=function L_(){return new Uc("deleteField")}();return e._methodName="FieldValue.delete",new Ql(e)}static arrayUnion(...e){const t=function U_(...i){return new Gm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Ql(t)}static arrayRemove(...e){const t=function B_(...i){return new Wm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Ql(t)}static increment(e){const t=function j_(i){return new t0("increment",i)}(e);return t._methodName="FieldValue.increment",new Ql(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ef={Firestore:_g,GeoPoint:Nd,Timestamp:Fi,Blob:Hc,Transaction:ol,WriteBatch:hy,DocumentReference:Bs,DocumentSnapshot:Gc,Query:So,QueryDocumentSnapshot:Wc,QuerySnapshot:vg,CollectionReference:zc,FieldPath:Kc,FieldValue:Ql,setLogLevel:function dy(i){!function F(i){_.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function ts(i){(function wf(i,e){i.INTERNAL.registerComponent(new me.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},Ef)))})(i,(e,t)=>new _g(e,t,new cy)),i.registerVersion("@firebase/firestore-compat","0.1.17")}($.Z);var Xl=N(1205),fy=N(440),G_=N(127);function Eg(i,e){return function W_(i,e=H.z){return new Y.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function If(i,e){return Eg(i,e).pipe((0,je.U)(t=>({payload:t,type:"query"})))}function $d(i,e){return If(i,e).pipe((0,Be.O)(void 0),Ve(),(0,je.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((m,D)=>{const B=u.find(ue=>ue.doc.ref.isEqual(m.ref)),z=null==t?void 0:t.payload.docs.find(ue=>ue.ref.isEqual(m.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(m.metadata)||!B&&z&&JSON.stringify(z.metadata)===JSON.stringify(m.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:m}})}),d}))}function gy(i,e,t){return $d(i,t).pipe((0,qe.R)((o,u)=>function z_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Hd(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return wg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function ie(i,e=le.y){return i=null!=i?i:ge,(0,Oe.e)((t,o)=>{let u,d=!0;t.subscribe((0,Ae.x)(o,m=>{const D=e(m);(d||!i(u,D))&&(d=!1,u=D,o.next(m))}))})}(),(0,je.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function wg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function my(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class yy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=$d(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,je.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,Be.O)(void 0),Ve(),(0,ht.h)(([o,u])=>u.length>0||!o),(0,je.U)(([o,u])=>u),Ce.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,qe.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}valueChanges(e={}){return If(this.query,this.afs.schedulers.outsideAngular).pipe((0,je.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Ce.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(Ce.iC)}add(e){return this.ref.add(e)}doc(e){return new _y(this.ref.doc(e),this.afs)}}class _y{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=qc(o,t);return new yy(u,d,this.afs)}snapshotChanges(){return function py(i,e){return Eg(i,e).pipe((0,Be.O)(void 0),Ve(),(0,je.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,je.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ve.D)(this.ref.get(e)).pipe(Ce.iC)}}class Df{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$d(this.query,this.afs.schedulers.outsideAngular).pipe((0,je.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,ht.h)(t=>t.length>0),Ce.iC):$d(this.query,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,qe.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}valueChanges(e={}){return If(this.query,this.afs.schedulers.outsideAngular).pipe((0,je.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Ce.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(Ce.iC)}}const Ig=new p.OlP("angularfire2.enableFirestorePersistence"),Dg=new p.OlP("angularfire2.firestore.persistenceSettings"),vy=new p.OlP("angularfire2.firestore.settings"),K_=new p.OlP("angularfire2.firestore.use-emulator");function qc(i,e=(t=>t)){return{query:e(i),ref:i}}let Zc=(()=>{class i{constructor(t,o,u,d,m,D,B,z,ue,De,et,vt,wt,ln,Gn,Ei,Mi){this.schedulers=B;const ui=(0,Ne.on)(t,D,o),ms=ue;De&&(0,Xl.nw)(ui,D,et,wt,ln,Gn,vt,Ei),[this.firestore,this.persistenceEnabled$]=(0,Ne.cc)(`${ui.name}.firestore`,"AngularFirestore",ui.name,()=>{const xi=D.runOutsideAngular(()=>ui.firestore());if(d&&xi.settings(d),ms&&xi.useEmulator(...ms),u&&!(0,Re.PM)(m)){const Gi=()=>{try{return(0,ve.D)(xi.enablePersistence(z||void 0).then(()=>!0,()=>!1))}catch(to){return"undefined"!=typeof console&&console.warn(to),(0,pe.of)(!1)}};return[xi,D.runOutsideAngular(Gi)]}return[xi,(0,pe.of)(!1)]},[d,ms,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:m}=qc(u,o),D=this.schedulers.ngZone.run(()=>d);return new yy(D,m,this)}collectionGroup(t,o){const u=o||(m=>m),d=this.firestore.collectionGroup(t);return new Df(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new _y(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Ne.Dh),p.LFG(Ne.xv,8),p.LFG(Ig,8),p.LFG(vy,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ce.HU),p.LFG(Dg,8),p.LFG(K_,8),p.LFG(Xl.zQ,8),p.LFG(Xl.Qv,8),p.LFG(Xl.L6,8),p.LFG(Xl._Q,8),p.LFG(Xl.rT,8),p.LFG(Xl.lh,8),p.LFG(Xl.f7,8),p.LFG(fy.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),q_=(()=>{class i{constructor(){G_.Z.registerVersion("angularfire",Ce.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:Ig,useValue:!0},{provide:Dg,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[Zc]}),i})()},2084:(Pt,ze,N)=>{N.d(ze,{Q1:()=>dr,TE:()=>ro});var p=N(9751),H=N(9646),Y=N(8996),ve=N(4986),pe=N(4482),Ce=N(5403),Ae=N(4004),Ve=N(3900),le=N(5813),ie=N(5e3),ge=N(2011),Be=N(3942),je=N(5861),qe=N(9681),ht=N(2090),Ne=N(4859);const Re="firebasestorage.googleapis.com",Et="storageBucket";class ee extends ht.ZR{constructor(O,J){super(me(O),`Firebase Storage: ${J} (${me(O)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ee.prototype)}_codeEquals(O){return me(O)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(O){this.customData.serverResponse=O,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function me(M){return"storage/"+M}function Ge(){return new ee("unknown","An unknown error occurred, please check the error payload for server response.")}function Xe(){return new ee("canceled","User canceled the upload/download.")}function Gt(){return new ee("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $t(M){return new ee("invalid-argument",M)}function Mt(){return new ee("app-deleted","The Firebase app was deleted.")}function Ft(M){return new ee("invalid-root-operation","The operation '"+M+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lt(M,O){return new ee("invalid-format","String does not match format '"+M+"': "+O)}function pn(M){throw new ee("internal-error","Internal error: "+M)}class tn{constructor(O,J){this.bucket=O,this.path_=J}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const O=encodeURIComponent;return"/b/"+O(this.bucket)+"/o/"+O(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(O,J){let oe;try{oe=tn.makeFromUrl(O,J)}catch(xe){return new tn(O,"")}if(""===oe.path)return oe;throw function Kt(M){return new ee("invalid-default-bucket","Invalid default bucket '"+M+"'.")}(O)}static makeFromUrl(O,J){let oe=null;const xe="([A-Za-z0-9.\\-_]+)",sn=new RegExp("^gs://"+xe+"(/(.*))?$","i");function Dn(Xr){Xr.path_=decodeURIComponent(Xr.path)}const kr=J.replace(/[.]/g,"\\."),Br=[{regex:sn,indices:{bucket:1,path:3},postModify:function Ye(Xr){"/"===Xr.path.charAt(Xr.path.length-1)&&(Xr.path_=Xr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${kr}/v[A-Za-z0-9_]+/b/${xe}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Dn},{regex:new RegExp(`^https?://${J===Re?"(?:storage.googleapis.com|storage.cloud.google.com)":J}/${xe}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Dn}];for(let Xr=0;Xr<Br.length;Xr++){const Ir=Br[Xr],ds=Ir.regex.exec(O);if(ds){let js=ds[Ir.indices.path];js||(js=""),oe=new tn(ds[Ir.indices.bucket],js),Ir.postModify(oe);break}}if(null==oe)throw function Ue(M){return new ee("invalid-url","Invalid URL '"+M+"'.")}(O);return oe}}class yn{constructor(O){this.promise_=Promise.reject(O)}getPromise(){return this.promise_}cancel(O=!1){}}function En(M){return"string"==typeof M||M instanceof String}function ur(M){return Un()&&M instanceof Blob}function Un(){return"undefined"!=typeof Blob}function Wt(M,O,J,oe){if(oe<O)throw $t(`Invalid value for '${M}'. Expected ${O} or greater.`);if(oe>J)throw $t(`Invalid value for '${M}'. Expected ${J} or less.`)}function zt(M,O,J){let oe=O;return null==J&&(oe=`https://${O}`),`${J}://${oe}/v0${M}`}function On(M){const O=encodeURIComponent;let J="?";for(const oe in M)M.hasOwnProperty(oe)&&(J=J+(O(oe)+"=")+O(M[oe])+"&");return J=J.slice(0,-1),J}var xt=(()=>{return(M=xt||(xt={}))[M.NO_ERROR=0]="NO_ERROR",M[M.NETWORK_ERROR=1]="NETWORK_ERROR",M[M.ABORT=2]="ABORT",xt;var M})();class Hr{constructor(O,J,oe,xe,Ye,pt,sn,Ht,Dn,Kn,kr){this.url_=O,this.method_=J,this.headers_=oe,this.body_=xe,this.successCodes_=Ye,this.additionalRetryCodes_=pt,this.callback_=sn,this.errorCallback_=Ht,this.timeout_=Dn,this.progressCallback_=Kn,this.connectionFactory_=kr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((hr,Zn)=>{this.resolve_=hr,this.reject_=Zn,this.start_()})}start_(){const J=(oe,xe)=>{const Ye=this.resolve_,pt=this.reject_,sn=xe.connection;if(xe.wasSuccessCode)try{const Ht=this.callback_(sn,sn.getResponse());!function ft(M){return void 0!==M}(Ht)?Ye():Ye(Ht)}catch(Ht){pt(Ht)}else if(null!==sn){const Ht=Ge();Ht.serverResponse=sn.getErrorText(),pt(this.errorCallback_?this.errorCallback_(sn,Ht):Ht)}else pt(xe.canceled?this.appDelete_?Mt():Xe():function ae(){return new ee("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?J(0,new Mr(!1,null,!0)):this.backoffId_=function qn(M,O,J){let oe=1,xe=null,Ye=null,pt=!1,sn=0;function Ht(){return 2===sn}let Dn=!1;function Kn(...Er){Dn||(Dn=!0,O.apply(null,Er))}function kr(Er){xe=setTimeout(()=>{xe=null,M(Zn,Ht())},Er)}function hr(){Ye&&clearTimeout(Ye)}function Zn(Er,...Qr){if(Dn)return void hr();if(Er)return hr(),void Kn.call(null,Er,...Qr);if(Ht()||pt)return hr(),void Kn.call(null,Er,...Qr);let Br;oe<64&&(oe*=2),1===sn?(sn=2,Br=0):Br=1e3*(oe+Math.random()),kr(Br)}let tr=!1;function yi(Er){tr||(tr=!0,hr(),!Dn&&(null!==xe?(Er||(sn=2),clearTimeout(xe),kr(0)):Er||(sn=1)))}return kr(0),Ye=setTimeout(()=>{pt=!0,yi(!0)},J),yi}((oe,xe)=>{if(xe)return void oe(!1,new Mr(!1,null,!0));const Ye=this.connectionFactory_();this.pendingConnection_=Ye;const pt=sn=>{null!==this.progressCallback_&&this.progressCallback_(sn.loaded,sn.lengthComputable?sn.total:-1)};null!==this.progressCallback_&&Ye.addUploadProgressListener(pt),Ye.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ye.removeUploadProgressListener(pt),this.pendingConnection_=null;const sn=Ye.getErrorCode()===xt.NO_ERROR,Ht=Ye.getStatus();if(!sn||this.isRetryStatusCode_(Ht)){const Kn=Ye.getErrorCode()===xt.ABORT;return void oe(!1,new Mr(!1,null,Kn))}const Dn=-1!==this.successCodes_.indexOf(Ht);oe(!0,new Mr(Dn,Ye))})},J,this.timeout_)}getPromise(){return this.promise_}cancel(O){this.canceled_=!0,this.appDelete_=O||!1,null!==this.backoffId_&&function Vn(M){M(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(O){const J=O>=500&&O<600,xe=-1!==[408,429].indexOf(O),Ye=-1!==this.additionalRetryCodes_.indexOf(O);return J||xe||Ye}}class Mr{constructor(O,J,oe){this.wasSuccessCode=O,this.connection=J,this.canceled=!!oe}}function cn(...M){const O=function Nt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==O){const J=new O;for(let oe=0;oe<M.length;oe++)J.append(M[oe]);return J.getBlob()}if(Un())return new Blob(M);throw new ee("unsupported-environment","This browser doesn't seem to support creating Blobs")}const _n={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Yn{constructor(O,J){this.data=O,this.contentType=J||null}}function Bn(M,O){switch(M){case _n.RAW:return new Yn(gr(O));case _n.BASE64:case _n.BASE64URL:return new Yn(lr(M,O));case _n.DATA_URL:return new Yn(function Ut(M){const O=new wn(M);return O.base64?lr(_n.BASE64,O.rest):function Qt(M){let O;try{O=decodeURIComponent(M)}catch(J){throw lt(_n.DATA_URL,"Malformed data URL.")}return gr(O)}(O.rest)}(O),function ct(M){return new wn(M).contentType}(O))}throw Ge()}function gr(M){const O=[];for(let J=0;J<M.length;J++){let oe=M.charCodeAt(J);oe<=127?O.push(oe):oe<=2047?O.push(192|oe>>6,128|63&oe):55296==(64512&oe)?J<M.length-1&&56320==(64512&M.charCodeAt(J+1))?(oe=65536|(1023&oe)<<10|1023&M.charCodeAt(++J),O.push(240|oe>>18,128|oe>>12&63,128|oe>>6&63,128|63&oe)):O.push(239,191,189):56320==(64512&oe)?O.push(239,191,189):O.push(224|oe>>12,128|oe>>6&63,128|63&oe)}return new Uint8Array(O)}function lr(M,O){switch(M){case _n.BASE64:{const xe=-1!==O.indexOf("-"),Ye=-1!==O.indexOf("_");if(xe||Ye)throw lt(M,"Invalid character '"+(xe?"-":"_")+"' found: is it base64url encoded?");break}case _n.BASE64URL:{const xe=-1!==O.indexOf("+"),Ye=-1!==O.indexOf("/");if(xe||Ye)throw lt(M,"Invalid character '"+(xe?"+":"/")+"' found: is it base64 encoded?");O=O.replace(/-/g,"+").replace(/_/g,"/");break}}let J;try{J=function Fr(M){return atob(M)}(O)}catch(xe){throw lt(M,"Invalid character found")}const oe=new Uint8Array(J.length);for(let xe=0;xe<J.length;xe++)oe[xe]=J.charCodeAt(xe);return oe}class wn{constructor(O){this.base64=!1,this.contentType=null;const J=O.match(/^data:([^,]+)?,/);if(null===J)throw lt(_n.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const oe=J[1]||null;null!=oe&&(this.base64=function Bt(M,O){return M.length>=O.length&&M.substring(M.length-O.length)===O}(oe,";base64"),this.contentType=this.base64?oe.substring(0,oe.length-7):oe),this.rest=O.substring(O.indexOf(",")+1)}}class Yt{constructor(O,J){let oe=0,xe="";ur(O)?(this.data_=O,oe=O.size,xe=O.type):O instanceof ArrayBuffer?(J?this.data_=new Uint8Array(O):(this.data_=new Uint8Array(O.byteLength),this.data_.set(new Uint8Array(O))),oe=this.data_.length):O instanceof Uint8Array&&(J?this.data_=O:(this.data_=new Uint8Array(O.length),this.data_.set(O)),oe=O.length),this.size_=oe,this.type_=xe}size(){return this.size_}type(){return this.type_}slice(O,J){if(ur(this.data_)){const xe=function pr(M,O,J){return M.webkitSlice?M.webkitSlice(O,J):M.mozSlice?M.mozSlice(O,J):M.slice?M.slice(O,J):null}(this.data_,O,J);return null===xe?null:new Yt(xe)}{const oe=new Uint8Array(this.data_.buffer,O,J-O);return new Yt(oe,!0)}}static getBlob(...O){if(Un()){const J=O.map(oe=>oe instanceof Yt?oe.data_:oe);return new Yt(cn.apply(null,J))}{const J=O.map(pt=>En(pt)?Bn(_n.RAW,pt).data:pt.data_);let oe=0;J.forEach(pt=>{oe+=pt.byteLength});const xe=new Uint8Array(oe);let Ye=0;return J.forEach(pt=>{for(let sn=0;sn<pt.length;sn++)xe[Ye++]=pt[sn]}),new Yt(xe,!0)}}uploadData(){return this.data_}}function In(M){let O;try{O=JSON.parse(M)}catch(J){return null}return function Lt(M){return"object"==typeof M&&!Array.isArray(M)}(O)?O:null}function te(M){const O=M.lastIndexOf("/",M.length-2);return-1===O?M:M.slice(O+1)}function Ee(M,O){return O}class Ze{constructor(O,J,oe,xe){this.server=O,this.local=J||O,this.writable=!!oe,this.xform=xe||Ee}}let Le=null;function we(){if(Le)return Le;const M=[];M.push(new Ze("bucket")),M.push(new Ze("generation")),M.push(new Ze("metageneration")),M.push(new Ze("name","fullPath",!0));const J=new Ze("name");J.xform=function O(Ye,pt){return function At(M){return!En(M)||M.length<2?M:te(M)}(pt)},M.push(J);const xe=new Ze("size");return xe.xform=function oe(Ye,pt){return void 0!==pt?Number(pt):pt},M.push(xe),M.push(new Ze("timeCreated")),M.push(new Ze("updated")),M.push(new Ze("md5Hash",null,!0)),M.push(new Ze("cacheControl",null,!0)),M.push(new Ze("contentDisposition",null,!0)),M.push(new Ze("contentEncoding",null,!0)),M.push(new Ze("contentLanguage",null,!0)),M.push(new Ze("contentType",null,!0)),M.push(new Ze("metadata","customMetadata",!0)),Le=M,Le}function be(M,O,J){const oe=In(O);return null===oe?null:function se(M,O,J){const oe={type:"file"},xe=J.length;for(let Ye=0;Ye<xe;Ye++){const pt=J[Ye];oe[pt.local]=pt.xform(oe,O[pt.server])}return function de(M,O){Object.defineProperty(M,"ref",{get:function J(){const Ye=new tn(M.bucket,M.fullPath);return O._makeStorageReference(Ye)}})}(oe,M),oe}(M,oe,J)}function Ct(M,O){const J={},oe=O.length;for(let xe=0;xe<oe;xe++){const Ye=O[xe];Ye.writable&&(J[Ye.server]=M[Ye.local])}return JSON.stringify(J)}const Jt="prefixes";class ir{constructor(O,J,oe,xe){this.url=O,this.method=J,this.handler=oe,this.timeout=xe,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function sr(M){if(!M)throw Ge()}function wr(M,O){return function J(oe,xe){const Ye=be(M,xe,O);return sr(null!==Ye),Ye}}function yt(M){return function O(J,oe){let xe;return xe=401===J.getStatus()?J.getErrorText().includes("Firebase App Check token is invalid")?function Q(){return new ee("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function _e(){return new ee("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===J.getStatus()?function Fe(M){return new ee("quota-exceeded","Quota for bucket '"+M+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(M.bucket):403===J.getStatus()?function Me(M){return new ee("unauthorized","User does not have permission to access '"+M+"'.")}(M.path):oe,xe.serverResponse=oe.serverResponse,xe}}function en(M){const O=yt(M);return function J(oe,xe){let Ye=O(oe,xe);return 404===oe.getStatus()&&(Ye=function We(M){return new ee("object-not-found","Object '"+M+"' does not exist.")}(M.path)),Ye.serverResponse=xe.serverResponse,Ye}}function vn(M,O,J){const xe=zt(O.fullServerUrl(),M.host,M._protocol),pt=M.maxOperationRetryTime,sn=new ir(xe,"GET",wr(M,J),pt);return sn.errorHandler=en(O),sn}function Dr(M,O,J,oe,xe){const Ye={};Ye.prefix=O.isRoot?"":O.path+"/",J&&J.length>0&&(Ye.delimiter=J),oe&&(Ye.pageToken=oe),xe&&(Ye.maxResults=xe);const sn=zt(O.bucketOnlyServerUrl(),M.host,M._protocol),Dn=M.maxOperationRetryTime,Kn=new ir(sn,"GET",function wi(M,O){return function J(oe,xe){const Ye=function ti(M,O,J){const oe=In(J);return null===oe?null:function rr(M,O,J){const oe={prefixes:[],items:[],nextPageToken:J.nextPageToken};if(J[Jt])for(const xe of J[Jt]){const Ye=xe.replace(/\/$/,""),pt=M._makeStorageReference(new tn(O,Ye));oe.prefixes.push(pt)}if(J.items)for(const xe of J.items){const Ye=M._makeStorageReference(new tn(O,xe.name));oe.items.push(Ye)}return oe}(M,O,oe)}(M,O,xe);return sr(null!==Ye),Ye}}(M,O.bucket),Dn);return Kn.urlParams=Ye,Kn.errorHandler=yt(O),Kn}function Lr(M,O,J){const oe=Object.assign({},J);return oe.fullPath=M.path,oe.size=O.size(),oe.contentType||(oe.contentType=function mr(M,O){return M&&M.contentType||O&&O.type()||"application/octet-stream"}(null,O)),oe}class Gr{constructor(O,J,oe,xe){this.current=O,this.total=J,this.finalized=!!oe,this.metadata=xe||null}}function Ri(M,O){let J=null;try{J=M.getResponseHeader("X-Goog-Upload-Status")}catch(xe){sr(!1)}return sr(!!J&&-1!==(O||["active"]).indexOf(J)),J}const qr={STATE_CHANGED:"state_changed"},Qn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zn(M){switch(M){case"running":case"pausing":case"canceling":return Qn.RUNNING;case"paused":return Qn.PAUSED;case"success":return Qn.SUCCESS;case"canceled":return Qn.CANCELED;default:return Qn.ERROR}}class ls{constructor(O,J,oe){if(function nn(M){return"function"==typeof M}(O)||null!=J||null!=oe)this.next=O,this.error=null!=J?J:void 0,this.complete=null!=oe?oe:void 0;else{const Ye=O;this.next=Ye.next,this.error=Ye.error,this.complete=Ye.complete}}}function ii(M){return(...O)=>{Promise.resolve().then(()=>M(...O))}}class Wi extends class fi{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xt.NO_ERROR,this.sendPromise_=new Promise(O=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xt.ABORT,O()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xt.NETWORK_ERROR,O()}),this.xhr_.addEventListener("load",()=>{O()})})}send(O,J,oe,xe){if(this.sent_)throw pn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(J,O,!0),void 0!==xe)for(const Ye in xe)xe.hasOwnProperty(Ye)&&this.xhr_.setRequestHeader(Ye,xe[Ye].toString());return void 0!==oe?this.xhr_.send(oe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(O){return-1}}getResponse(){if(!this.sent_)throw pn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(O){return this.xhr_.getResponseHeader(O)}addUploadProgressListener(O){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",O)}removeUploadProgressListener(O){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",O)}}{initXhr(){this.xhr_.responseType="text"}}function yr(){return new Wi}class _s{constructor(O,J,oe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=O,this._blob=J,this._metadata=oe,this._mappings=we(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=xe=>{this._request=void 0,this._chunkMultiplier=1,xe._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=xe,this._transition("error"))},this._metadataErrorHandler=xe=>{this._request=void 0,xe._codeEquals("canceled")?this.completeTransitions_():(this._error=xe,this._transition("error"))},this._promise=new Promise((xe,Ye)=>{this._resolve=xe,this._reject=Ye,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const O=this._transferred;return J=>this._updateProgress(O+J)}_shouldDoResumable(O){return O.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(O){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([J,oe])=>{switch(this._state){case"running":O(J,oe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((O,J)=>{const oe=function ns(M,O,J,oe,xe){const Ye=O.bucketOnlyServerUrl(),pt=Lr(O,oe,xe),sn={name:pt.fullPath},Ht=zt(Ye,M.host,M._protocol),Kn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${oe.size()}`,"X-Goog-Upload-Header-Content-Type":pt.contentType,"Content-Type":"application/json; charset=utf-8"},kr=Ct(pt,J),tr=new ir(Ht,"POST",function Zn(yi){let Er;Ri(yi);try{Er=yi.getResponseHeader("X-Goog-Upload-URL")}catch(Qr){sr(!1)}return sr(En(Er)),Er},M.maxUploadRetryTime);return tr.urlParams=sn,tr.headers=Kn,tr.body=kr,tr.errorHandler=yt(O),tr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),xe=this._ref.storage._makeRequest(oe,yr,O,J);this._request=xe,xe.getPromise().then(Ye=>{this._request=void 0,this._uploadUrl=Ye,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const O=this._uploadUrl;this._resolveToken((J,oe)=>{const xe=function Or(M,O,J,oe){const Ht=new ir(J,"POST",function Ye(Dn){const Kn=Ri(Dn,["active","final"]);let kr=null;try{kr=Dn.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Zn){sr(!1)}kr||sr(!1);const hr=Number(kr);return sr(!isNaN(hr)),new Gr(hr,oe.size(),"final"===Kn)},M.maxUploadRetryTime);return Ht.headers={"X-Goog-Upload-Command":"query"},Ht.errorHandler=yt(O),Ht}(this._ref.storage,this._ref._location,O,this._blob),Ye=this._ref.storage._makeRequest(xe,yr,J,oe);this._request=Ye,Ye.getPromise().then(pt=>{pt=pt,this._request=void 0,this._updateProgress(pt.current),this._needToFetchStatus=!1,pt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const O=262144*this._chunkMultiplier,J=new Gr(this._transferred,this._blob.size()),oe=this._uploadUrl;this._resolveToken((xe,Ye)=>{let pt;try{pt=function ri(M,O,J,oe,xe,Ye,pt,sn){const Ht=new Gr(0,0);if(pt?(Ht.current=pt.current,Ht.total=pt.total):(Ht.current=0,Ht.total=oe.size()),oe.size()!==Ht.total)throw function mt(){return new ee("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Dn=Ht.total-Ht.current;let Kn=Dn;xe>0&&(Kn=Math.min(Kn,xe));const kr=Ht.current,tr={"X-Goog-Upload-Command":Kn===Dn?"upload, finalize":"upload","X-Goog-Upload-Offset":`${Ht.current}`},yi=oe.slice(kr,kr+Kn);if(null===yi)throw Gt();const Br=new ir(J,"POST",function Er(Xr,Ir){const ds=Ri(Xr,["active","final"]),io=Ht.current+Kn,js=oe.size();let Mo;return Mo="final"===ds?wr(O,Ye)(Xr,Ir):null,new Gr(io,js,"final"===ds,Mo)},O.maxUploadRetryTime);return Br.headers=tr,Br.body=yi.uploadData(),Br.progressCallback=sn||null,Br.errorHandler=yt(M),Br}(this._ref._location,this._ref.storage,oe,this._blob,O,this._mappings,J,this._makeProgressCallback())}catch(Ht){return this._error=Ht,void this._transition("error")}const sn=this._ref.storage._makeRequest(pt,yr,xe,Ye);this._request=sn,sn.getPromise().then(Ht=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Ht.current),Ht.finalized?(this._metadata=Ht.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((O,J)=>{const oe=vn(this._ref.storage,this._ref._location,this._mappings),xe=this._ref.storage._makeRequest(oe,yr,O,J);this._request=xe,xe.getPromise().then(Ye=>{this._request=void 0,this._metadata=Ye,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((O,J)=>{const oe=function gn(M,O,J,oe,xe){const Ye=O.bucketOnlyServerUrl(),pt={"X-Goog-Upload-Protocol":"multipart"},Ht=function sn(){let Br="";for(let Xr=0;Xr<2;Xr++)Br+=Math.random().toString().slice(2);return Br}();pt["Content-Type"]="multipart/related; boundary="+Ht;const Dn=Lr(O,oe,xe),Kn=Ct(Dn,J),Zn=Yt.getBlob("--"+Ht+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Kn+"\r\n--"+Ht+"\r\nContent-Type: "+Dn.contentType+"\r\n\r\n",oe,"\r\n--"+Ht+"--");if(null===Zn)throw Gt();const tr={name:Dn.fullPath},yi=zt(Ye,M.host,M._protocol),Qr=M.maxUploadRetryTime,Yi=new ir(yi,"POST",wr(M,J),Qr);return Yi.urlParams=tr,Yi.headers=pt,Yi.body=Zn.uploadData(),Yi.errorHandler=yt(O),Yi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),xe=this._ref.storage._makeRequest(oe,yr,O,J);this._request=xe,xe.getPromise().then(Ye=>{this._request=void 0,this._metadata=Ye,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(O){const J=this._transferred;this._transferred=O,this._transferred!==J&&this._notifyObservers()}_transition(O){if(this._state!==O)switch(O){case"canceling":case"pausing":this._state=O,void 0!==this._request&&this._request.cancel();break;case"running":const J="paused"===this._state;this._state=O,J&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=O,this._notifyObservers();break;case"canceled":this._error=Xe(),this._state=O,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const O=zn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:O,metadata:this._metadata,task:this,ref:this._ref}}on(O,J,oe,xe){const Ye=new ls(J||void 0,oe||void 0,xe||void 0);return this._addObserver(Ye),()=>{this._removeObserver(Ye)}}then(O,J){return this._promise.then(O,J)}catch(O){return this.then(null,O)}_addObserver(O){this._observers.push(O),this._notifyObserver(O)}_removeObserver(O){const J=this._observers.indexOf(O);-1!==J&&this._observers.splice(J,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(J=>{this._notifyObserver(J)})}_finishPromise(){if(void 0!==this._resolve){let O=!0;switch(zn(this._state)){case Qn.SUCCESS:ii(this._resolve.bind(null,this.snapshot))();break;case Qn.CANCELED:case Qn.ERROR:ii(this._reject.bind(null,this._error))();break;default:O=!1}O&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(O){switch(zn(this._state)){case Qn.RUNNING:case Qn.PAUSED:O.next&&ii(O.next.bind(O,this.snapshot))();break;case Qn.SUCCESS:O.complete&&ii(O.complete.bind(O))();break;default:O.error&&ii(O.error.bind(O,this._error))()}}resume(){const O="paused"===this._state||"pausing"===this._state;return O&&this._transition("running"),O}pause(){const O="running"===this._state;return O&&this._transition("pausing"),O}cancel(){const O="running"===this._state||"pausing"===this._state;return O&&this._transition("canceling"),O}}class jn{constructor(O,J){this._service=O,this._location=J instanceof tn?J:tn.makeFromUrl(J,O.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(O,J){return new jn(O,J)}get root(){const O=new tn(this._location.bucket,"");return this._newRef(this._service,O)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return te(this._location.path)}get storage(){return this._service}get parent(){const O=function rn(M){if(0===M.length)return null;const O=M.lastIndexOf("/");return-1===O?"":M.slice(0,O)}(this._location.path);if(null===O)return null;const J=new tn(this._location.bucket,O);return new jn(this._service,J)}_throwIfRoot(O){if(""===this._location.path)throw Ft(O)}}function Dt(M,O,J){return qt.apply(this,arguments)}function qt(){return(qt=(0,je.Z)(function*(M,O,J){const xe=yield Fn(M,{pageToken:J});O.prefixes.push(...xe.prefixes),O.items.push(...xe.items),null!=xe.nextPageToken&&(yield Dt(M,O,xe.nextPageToken))})).apply(this,arguments)}function Fn(M,O){null!=O&&"number"==typeof O.maxResults&&Wt("options.maxResults",1,1e3,O.maxResults);const J=O||{},oe=Dr(M.storage,M._location,"/",J.pageToken,J.maxResults);return M.storage.makeRequestWithTokens(oe,yr)}function Pi(M){M._throwIfRoot("getDownloadURL");const O=function Rr(M,O,J){const xe=zt(O.fullServerUrl(),M.host,M._protocol),pt=M.maxOperationRetryTime,sn=new ir(xe,"GET",function Kr(M,O){return function J(oe,xe){const Ye=be(M,xe,O);return sr(null!==Ye),function rt(M,O,J,oe){const xe=In(O);if(null===xe||!En(xe.downloadTokens))return null;const Ye=xe.downloadTokens;if(0===Ye.length)return null;const pt=encodeURIComponent;return Ye.split(",").map(Dn=>{const kr=M.fullPath;return zt("/b/"+pt(M.bucket)+"/o/"+pt(kr),J,oe)+On({alt:"media",token:Dn})})[0]}(Ye,xe,M.host,M._protocol)}}(M,J),pt);return sn.errorHandler=en(O),sn}(M.storage,M._location,we());return M.storage.makeRequestWithTokens(O,yr).then(J=>{if(null===J)throw function Tt(){return new ee("no-download-url","The given file does not have any download URLs.")}();return J})}function ki(M,O){const J=function he(M,O){const J=O.split("/").filter(oe=>oe.length>0).join("/");return 0===M.length?J:M+"/"+J}(M._location.path,O),oe=new tn(M._location.bucket,J);return new jn(M.storage,oe)}function bs(M,O){if(M instanceof rs){const J=M;if(null==J._bucket)throw function bt(){return new ee("no-default-bucket","No default bucket found. Did you set the '"+Et+"' property when initializing the app?")}();const oe=new jn(J,J._bucket);return null!=O?bs(oe,O):oe}return void 0!==O?ki(M,O):M}function gi(M,O){if(O&&function vs(M){return/^[A-Za-z]+:\/\//.test(M)}(O)){if(M instanceof rs)return function zi(M,O){return new jn(M,O)}(M,O);throw $t("To use ref(service, url), the first argument must be a Storage instance.")}return bs(M,O)}function Di(M,O){const J=null==O?void 0:O[Et];return null==J?null:tn.makeFromBucketSpec(J,M)}class rs{constructor(O,J,oe,xe,Ye){this.app=O,this._authProvider=J,this._appCheckProvider=oe,this._url=xe,this._firebaseVersion=Ye,this._bucket=null,this._host=Re,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=xe?tn.makeFromBucketSpec(xe,this._host):Di(this._host,this.app.options)}get host(){return this._host}set host(O){this._host=O,this._bucket=null!=this._url?tn.makeFromBucketSpec(this._url,O):Di(O,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(O){Wt("time",0,Number.POSITIVE_INFINITY,O),this._maxUploadRetryTime=O}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(O){Wt("time",0,Number.POSITIVE_INFINITY,O),this._maxOperationRetryTime=O}_getAuthToken(){var O=this;return(0,je.Z)(function*(){if(O._overrideAuthToken)return O._overrideAuthToken;const J=O._authProvider.getImmediate({optional:!0});if(J){const oe=yield J.getToken();if(null!==oe)return oe.accessToken}return null})()}_getAppCheckToken(){var O=this;return(0,je.Z)(function*(){const J=O._appCheckProvider.getImmediate({optional:!0});return J?(yield J.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(O=>O.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(O){return new jn(this,O)}_makeRequest(O,J,oe,xe){if(this._deleted)return new yn(Mt());{const Ye=function xn(M,O,J,oe,xe,Ye){const pt=On(M.urlParams),sn=M.url+pt,Ht=Object.assign({},M.headers);return function hi(M,O){O&&(M["X-Firebase-GMPID"]=O)}(Ht,O),function nr(M,O){null!==O&&O.length>0&&(M.Authorization="Firebase "+O)}(Ht,J),function xr(M,O){M["X-Firebase-Storage-Version"]="webjs/"+(null!=O?O:"AppManager")}(Ht,Ye),function ei(M,O){null!==O&&(M["X-Firebase-AppCheck"]=O)}(Ht,oe),new Hr(sn,M.method,Ht,M.body,M.successCodes,M.additionalRetryCodes,M.handler,M.errorHandler,M.timeout,M.progressCallback,xe)}(O,this._appId,oe,xe,J,this._firebaseVersion);return this._requests.add(Ye),Ye.getPromise().then(()=>this._requests.delete(Ye),()=>this._requests.delete(Ye)),Ye}}makeRequestWithTokens(O,J){var oe=this;return(0,je.Z)(function*(){const[xe,Ye]=yield Promise.all([oe._getAuthToken(),oe._getAppCheckToken()]);return oe._makeRequest(O,J,xe,Ye).getPromise()})()}}const Ki="@firebase/storage";function Ss(M,O){return gi(M=(0,ht.m9)(M),O)}function cr(M,{instanceIdentifier:O}){const J=M.getProvider("app").getImmediate(),oe=M.getProvider("auth-internal"),xe=M.getProvider("app-check-internal");return new rs(J,oe,xe,O,qe.SDK_VERSION)}!function R(){(0,qe._registerComponent)(new Ne.wA("storage",cr,"PUBLIC").setMultipleInstances(!0)),(0,qe.registerVersion)(Ki,"0.9.5",""),(0,qe.registerVersion)(Ki,"0.9.5","esm2017")}();class G{constructor(O,J,oe){this._delegate=O,this.task=J,this.ref=oe}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class x{constructor(O,J){this._delegate=O,this._ref=J,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new G(this._delegate.snapshot,this,this._ref)}then(O,J){return this._delegate.then(oe=>{if(O)return O(new G(oe,this,this._ref))},J)}on(O,J,oe,xe){let Ye;return J&&(Ye="function"==typeof J?pt=>J(new G(pt,this,this._ref)):{next:J.next?pt=>J.next(new G(pt,this,this._ref)):void 0,complete:J.complete||void 0,error:J.error||void 0}),this._delegate.on(O,Ye,oe||void 0,xe||void 0)}}class Z{constructor(O,J){this._delegate=O,this._service=J}get prefixes(){return this._delegate.prefixes.map(O=>new fe(O,this._service))}get items(){return this._delegate.items.map(O=>new fe(O,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class fe{constructor(O,J){this._delegate=O,this.storage=J}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(O){const J=function Yr(M,O){return ki(M,O)}(this._delegate,O);return new fe(J,this.storage)}get root(){return new fe(this._delegate.root,this.storage)}get parent(){const O=this._delegate.parent;return null==O?null:new fe(O,this.storage)}put(O,J){return this._throwIfRoot("put"),new x(function Zr(M,O,J){return function Te(M,O,J){return M._throwIfRoot("uploadBytesResumable"),new _s(M,new Yt(O),J)}(M=(0,ht.m9)(M),O,J)}(this._delegate,O,J),this)}putString(O,J=_n.RAW,oe){this._throwIfRoot("putString");const xe=Bn(J,O),Ye=Object.assign({},oe);return null==Ye.contentType&&null!=xe.contentType&&(Ye.contentType=xe.contentType),new x(new _s(this._delegate,new Yt(xe.data,!0),Ye),this)}listAll(){return function Vr(M){return function ot(M){const O={prefixes:[],items:[]};return Dt(M,O).then(()=>O)}(M=(0,ht.m9)(M))}(this._delegate).then(O=>new Z(O,this.storage))}list(O){return function Tr(M,O){return Fn(M=(0,ht.m9)(M),O)}(this._delegate,O||void 0).then(J=>new Z(J,this.storage))}getMetadata(){return function Zi(M){return function Pr(M){M._throwIfRoot("getMetadata");const O=vn(M.storage,M._location,we());return M.storage.makeRequestWithTokens(O,yr)}(M=(0,ht.m9)(M))}(this._delegate)}updateMetadata(O){return function Ts(M,O){return function $n(M,O){M._throwIfRoot("updateMetadata");const J=function ci(M,O,J,oe){const Ye=zt(O.fullServerUrl(),M.host,M._protocol),sn=Ct(J,oe),Dn=M.maxOperationRetryTime,Kn=new ir(Ye,"PATCH",wr(M,oe),Dn);return Kn.headers={"Content-Type":"application/json; charset=utf-8"},Kn.body=sn,Kn.errorHandler=en(O),Kn}(M.storage,M._location,O,we());return M.storage.makeRequestWithTokens(J,yr)}(M=(0,ht.m9)(M),O)}(this._delegate,O)}getDownloadURL(){return function cs(M){return Pi(M=(0,ht.m9)(M))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function As(M){return function Ii(M){M._throwIfRoot("deleteObject");const O=function Wn(M,O){const oe=zt(O.fullServerUrl(),M.host,M._protocol),sn=new ir(oe,"DELETE",function pt(Ht,Dn){},M.maxOperationRetryTime);return sn.successCodes=[200,204],sn.errorHandler=en(O),sn}(M.storage,M._location);return M.storage.makeRequestWithTokens(O,yr)}(M=(0,ht.m9)(M))}(this._delegate)}_throwIfRoot(O){if(""===this._delegate._location.path)throw Ft(O)}}class Je{constructor(O,J){this.app=O,this._delegate=J}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(O){if(tt(O))throw $t("ref() expected a child path but got a URL, use refFromURL instead.");return new fe(Ss(this._delegate,O),this)}refFromURL(O){if(!tt(O))throw $t("refFromURL() expected a full URL but got a child path, use ref() instead.");try{tn.makeFromUrl(O,this._delegate.host)}catch(J){throw $t("refFromUrl() expected a valid full URL but got an invalid one.")}return new fe(Ss(this._delegate,O),this)}setMaxUploadRetryTime(O){this._delegate.maxUploadRetryTime=O}setMaxOperationRetryTime(O){this._delegate.maxOperationRetryTime=O}useEmulator(O,J,oe={}){!function di(M,O,J,oe={}){!function br(M,O,J,oe={}){M.host=`${O}:${J}`,M._protocol="http";const{mockUserToken:xe}=oe;xe&&(M._overrideAuthToken="string"==typeof xe?xe:(0,ht.Sg)(xe,M.app.options.projectId))}(M,O,J,oe)}(this._delegate,O,J,oe)}}function tt(M){return/^[A-Za-z]+:\/\//.test(M)}function Cn(M,{instanceIdentifier:O}){const J=M.getProvider("app-compat").getImmediate(),oe=M.getProvider("storage").getImmediate({identifier:O});return new Je(J,oe)}!function Sn(M){const O={TaskState:Qn,TaskEvent:qr,StringFormat:_n,Storage:Je,Reference:fe};M.INTERNAL.registerComponent(new Ne.wA("storage-compat",Cn,"PUBLIC").setServiceProps(O).setMultipleInstances(!0)),M.registerVersion("@firebase/storage-compat","0.1.13")}(Be.Z);var Ur=N(440),_r=N(127);function k(M){const O=function vr(M){return new p.y(O=>{const J=pt=>O.next(pt);J(M.snapshot);const Ye=M.on("state_changed",J);return M.then(pt=>{J(pt),O.complete()},pt=>{J(M.snapshot),(pt=>{O.error(pt)})(pt)}),function(){Ye()}}).pipe(function Oe(M,O=ve.z){return(0,pe.e)((J,oe)=>{let xe=null,Ye=null,pt=null;const sn=()=>{if(xe){xe.unsubscribe(),xe=null;const Dn=Ye;Ye=null,oe.next(Dn)}};function Ht(){const Dn=pt+M,Kn=O.now();if(Kn<Dn)return xe=this.schedule(void 0,Dn-Kn),void oe.add(xe);sn()}J.subscribe((0,Ce.x)(oe,Dn=>{Ye=Dn,pt=O.now(),xe||(xe=O.schedule(Ht,M),oe.add(xe))},()=>{sn(),oe.complete()},void 0,()=>{Ye=xe=null}))})}(0))}(M);return{task:M,then:M.then.bind(M),catch:M.catch.bind(M),pause:M.pause.bind(M),cancel:M.cancel.bind(M),resume:M.resume.bind(M),snapshotChanges:()=>O,percentageChanges:()=>O.pipe((0,Ae.U)(J=>J.bytesTransferred/J.totalBytes*100))}}function A(M){return{getDownloadURL:()=>(0,H.of)(void 0).pipe(le.fc,(0,Ve.w)(()=>M.getDownloadURL()),le.iC),getMetadata:()=>(0,H.of)(void 0).pipe(le.fc,(0,Ve.w)(()=>M.getMetadata()),le.iC),delete:()=>(0,Y.D)(M.delete()),child:O=>A(M.child(O)),updateMetadata:O=>(0,Y.D)(M.updateMetadata(O)),put:(O,J)=>k(M.put(O,J)),putString:(O,J,oe)=>k(M.putString(O,J,oe)),list:O=>(0,Y.D)(M.list(O)),listAll:()=>(0,Y.D)(M.listAll())}}const C=new ie.OlP("angularfire2.storageBucket"),q=new ie.OlP("angularfire2.storage.maxUploadRetryTime"),nt=new ie.OlP("angularfire2.storage.maxOperationRetryTime"),on=new ie.OlP("angularfire2.storage.use-emulator");let dr=(()=>{class M{constructor(J,oe,xe,Ye,pt,sn,Ht,Dn,Kn,kr){const hr=(0,ge.on)(J,pt,oe);this.storage=(0,ge.cc)(`${hr.name}.storage.${xe}`,"AngularFireStorage",hr.name,()=>{const Zn=pt.runOutsideAngular(()=>hr.storage(xe||void 0)),tr=Kn;return tr&&Zn.useEmulator(...tr),Ht&&Zn.setMaxUploadRetryTime(Ht),Dn&&Zn.setMaxOperationRetryTime(Dn),Zn},[Ht,Dn])}ref(J){return A(this.storage.ref(J))}refFromURL(J){return A(this.storage.refFromURL(J))}upload(J,oe,xe){return A(this.storage.ref(J)).put(oe,xe)}}return M.\u0275fac=function(J){return new(J||M)(ie.LFG(ge.Dh),ie.LFG(ge.xv,8),ie.LFG(C,8),ie.LFG(ie.Lbi),ie.LFG(ie.R0b),ie.LFG(le.HU),ie.LFG(q,8),ie.LFG(nt,8),ie.LFG(on,8),ie.LFG(Ur.nm,8))},M.\u0275prov=ie.Yz7({token:M,factory:M.\u0275fac,providedIn:"any"}),M})(),Ci=(()=>{class M{}return M.\u0275fac=function(J){return new(J||M)},M.\u0275mod=ie.oAB({type:M}),M.\u0275inj=ie.cJS({}),M})(),ro=(()=>{class M{constructor(){_r.Z.registerVersion("angularfire",le.q4.full,"gcs-compat")}}return M.\u0275fac=function(J){return new(J||M)},M.\u0275mod=ie.oAB({type:M}),M.\u0275inj=ie.cJS({providers:[dr],imports:[Ci]}),M})()},2011:(Pt,ze,N)=>{N.d(ze,{Dh:()=>Ae,GT:()=>Ce,cc:()=>je,hO:()=>Be,on:()=>le,pX:()=>pe,xv:()=>Ve});var p=N(5e3),H=N(127),Y=N(5813);Pt=N.hmd(Pt);const ve=["ngOnDestroy"],pe=(Re,Et,$,L={})=>new Proxy(Re,{get:(ee,me)=>$.runOutsideAngular(()=>{var Ge;if(Re[me])return(null===(Ge=null==L?void 0:L.spy)||void 0===Ge?void 0:Ge.get)&&L.spy.get(me,Re[me]),Re[me];if(ve.indexOf(me)>-1)return()=>{};const We=Et.toPromise().then(Fe=>{const _e=Fe&&Fe[me];return"function"==typeof _e?_e.bind(Fe):_e&&_e.then?_e.then(Q=>$.run(()=>Q)):$.run(()=>_e)});return new Proxy(()=>{},{get:(Fe,_e)=>We[_e],apply:(Fe,_e,Q)=>We.then(Me=>{var ae;const Xe=Me&&Me(...Q);return(null===(ae=null==L?void 0:L.spy)||void 0===ae?void 0:ae.apply)&&L.spy.apply(me,Q,Xe),Xe})})})}),Ce=(Re,Et)=>{Et.forEach($=>{Object.getOwnPropertyNames($.prototype||$).forEach(L=>{Object.defineProperty(Re.prototype,L,Object.getOwnPropertyDescriptor($.prototype||$,L))})})};class Oe{constructor(Et){return Et}}const Ae=new p.OlP("angularfire2.app.options"),Ve=new p.OlP("angularfire2.app.name");function le(Re,Et,$){const ee="object"==typeof $&&$||{};ee.name=ee.name||"string"==typeof $&&$||"[DEFAULT]";const Ge=H.Z.apps.filter(We=>We&&We.name===ee.name)[0]||Et.runOutsideAngular(()=>H.Z.initializeApp(Re,ee));try{JSON.stringify(Re)!==JSON.stringify(Ge.options)&&ie("error",`${Ge.name} Firebase App already initialized with different options${Pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(We){}return new Oe(Ge)}const ie=(Re,...Et)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Re](...Et)},ge={provide:Oe,useFactory:le,deps:[Ae,p.R0b,[new p.FiY,Ve]]};let Be=(()=>{class Re{constructor($){H.Z.registerVersion("angularfire",Y.q4.full,"core"),H.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),H.Z.registerVersion("angular",p.q4F.full,$.toString())}static initializeApp($,L){return{ngModule:Re,providers:[{provide:Ae,useValue:$},{provide:Ve,useValue:L}]}}}return Re.\u0275fac=function($){return new($||Re)(p.LFG(p.Lbi))},Re.\u0275mod=p.oAB({type:Re}),Re.\u0275inj=p.cJS({providers:[ge]}),Re})();function je(Re,Et,$,L,ee){const[,me,Ge]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===Re)||[];if(me)return function qe(Re,Et){try{return Re.toString()===Et.toString()}catch($){return Re===Et}}(ee,Ge)||(Ne("error",`${Et} was already initialized on the ${$} Firebase App with different settings.${ht?" You may need to reload as Firebase is not HMR aware.":""}`),Ne("warn",{is:ee,was:Ge})),me;{const We=L();return globalThis.\u0275AngularfireInstanceCache.push([Re,We,ee]),We}}const ht=!!Pt.hot,Ne=(Re,...Et)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Re](...Et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Pt,ze,N)=>{N.d(ze,{q4:()=>Aa,iC:()=>ua,fc:()=>Tu,HU:()=>Fo,vb:()=>ko,JM:()=>Eo});var p=N(5e3),H=N(5867),Y=N(5861),ve=N(9681),pe=N(2090),Ce=N(4859),Oe=N(1877);const Ae="@firebase/installations",ie="w:0.5.8",ge="FIS_v2",Re=new pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(T){return T instanceof pe.ZR&&T.code.includes("request-failed")}function $({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function L(T){return{token:T.token,requestStatus:2,expiresIn:Q(T.expiresIn),creationTime:Date.now()}}function ee(T,P){return me.apply(this,arguments)}function me(){return(me=(0,Y.Z)(function*(T,P){const ce=(yield P.json()).error;return Re.create("request-failed",{requestName:T,serverCode:ce.code,serverMessage:ce.message,serverStatus:ce.status})})).apply(this,arguments)}function Ge({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function We(T,{refreshToken:P}){const K=Ge(T);return K.append("Authorization",function Me(T){return`${ge} ${T}`}(P)),K}function Fe(T){return _e.apply(this,arguments)}function _e(){return(_e=(0,Y.Z)(function*(T){const P=yield T();return P.status>=500&&P.status<600?T():P})).apply(this,arguments)}function Q(T){return Number(T.replace("s","000"))}function ae(T,P){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,Y.Z)(function*({appConfig:T,heartbeatServiceProvider:P},{fid:K}){const ce=$(T),Pe=Ge(T),Qe=P.getImmediate({optional:!0});if(Qe){const bn=yield Qe.getHeartbeatsHeader();bn&&Pe.append("x-firebase-client",bn)}const Xt={method:"POST",headers:Pe,body:JSON.stringify({fid:K,authVersion:ge,appId:T.appId,sdkVersion:ie})},dn=yield Fe(()=>fetch(ce,Xt));if(dn.ok){const bn=yield dn.json();return{fid:bn.fid||K,registrationStatus:2,refreshToken:bn.refreshToken,authToken:L(bn.authToken)}}throw yield ee("Create Installation",dn)})).apply(this,arguments)}function Ue(T){return new Promise(P=>{setTimeout(P,T)})}const bt=/^[cdef][\w-]{21}$/;function mt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const K=function Tt(T){return function Kt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return bt.test(K)?K:""}catch(T){return""}}function $t(T){return`${T.appName}!${T.appId}`}const Mt=new Map;function Ft(T,P){const K=$t(T);tn(K,P),function yn(T,P){const K=function Vn(){return!qn&&"BroadcastChannel"in self&&(qn=new BroadcastChannel("[Firebase] FID Change"),qn.onmessage=T=>{tn(T.data.key,T.data.fid)}),qn}();K&&K.postMessage({key:T,fid:P}),function ft(){0===Mt.size&&qn&&(qn.close(),qn=null)}()}(K,P)}function tn(T,P){const K=Mt.get(T);if(K)for(const ce of K)ce(P)}let qn=null;const En="firebase-installations-store";let ur=null;function Un(){return ur||(ur=(0,pe.X3)("firebase-installations-database",1,(T,P)=>{0===P&&T.createObjectStore(En)})),ur}function Wt(T,P){return zt.apply(this,arguments)}function zt(){return(zt=(0,Y.Z)(function*(T,P){const K=$t(T),Pe=(yield Un()).transaction(En,"readwrite"),Qe=Pe.objectStore(En),St=yield Qe.get(K);return yield Qe.put(P,K),yield Pe.complete,(!St||St.fid!==P.fid)&&Ft(T,P.fid),P})).apply(this,arguments)}function On(T){return xt.apply(this,arguments)}function xt(){return(xt=(0,Y.Z)(function*(T){const P=$t(T),ce=(yield Un()).transaction(En,"readwrite");yield ce.objectStore(En).delete(P),yield ce.complete})).apply(this,arguments)}function Hr(T,P){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,Y.Z)(function*(T,P){const K=$t(T),Pe=(yield Un()).transaction(En,"readwrite"),Qe=Pe.objectStore(En),St=yield Qe.get(K),Xt=P(St);return void 0===Xt?yield Qe.delete(K):yield Qe.put(Xt,K),yield Pe.complete,Xt&&(!St||St.fid!==Xt.fid)&&Ft(T,Xt.fid),Xt})).apply(this,arguments)}function nr(T){return xr.apply(this,arguments)}function xr(){return(xr=(0,Y.Z)(function*(T){let P;const K=yield Hr(T.appConfig,ce=>{const Pe=hi(ce),Qe=ei(T,Pe);return P=Qe.registrationPromise,Qe.installationEntry});return""===K.fid?{installationEntry:yield P}:{installationEntry:K,registrationPromise:P}})).apply(this,arguments)}function hi(T){return _n(T||{fid:mt(),registrationStatus:0})}function ei(T,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(Re.create("app-offline"))};const K={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},ce=function xn(T,P){return Nt.apply(this,arguments)}(T,K);return{installationEntry:K,registrationPromise:ce}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:cn(T)}:{installationEntry:P}}function Nt(){return(Nt=(0,Y.Z)(function*(T,P){try{const K=yield ae(T,P);return Wt(T.appConfig,K)}catch(K){throw Et(K)&&409===K.customData.serverCode?yield On(T.appConfig):yield Wt(T.appConfig,{fid:P.fid,registrationStatus:0}),K}})).apply(this,arguments)}function cn(T){return pr.apply(this,arguments)}function pr(){return(pr=(0,Y.Z)(function*(T){let P=yield Fr(T.appConfig);for(;1===P.registrationStatus;)yield Ue(100),P=yield Fr(T.appConfig);if(0===P.registrationStatus){const{installationEntry:K,registrationPromise:ce}=yield nr(T);return ce||K}return P})).apply(this,arguments)}function Fr(T){return Hr(T,P=>{if(!P)throw Re.create("installation-not-found");return _n(P)})}function _n(T){return function Yn(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Bn(T,P){return gr.apply(this,arguments)}function gr(){return(gr=(0,Y.Z)(function*({appConfig:T,heartbeatServiceProvider:P},K){const ce=Qt(T,K),Pe=We(T,K),Qe=P.getImmediate({optional:!0});if(Qe){const bn=yield Qe.getHeartbeatsHeader();bn&&Pe.append("x-firebase-client",bn)}const Xt={method:"POST",headers:Pe,body:JSON.stringify({installation:{sdkVersion:ie,appId:T.appId}})},dn=yield Fe(()=>fetch(ce,Xt));if(dn.ok)return L(yield dn.json());throw yield ee("Generate Auth Token",dn)})).apply(this,arguments)}function Qt(T,{fid:P}){return`${$(T)}/${P}/authTokens:generate`}function lr(T){return wn.apply(this,arguments)}function wn(){return(wn=(0,Y.Z)(function*(T,P=!1){let K;const ce=yield Hr(T.appConfig,Qe=>{if(!rn(Qe))throw Re.create("not-registered");const St=Qe.authToken;if(!P&&he(St))return Qe;if(1===St.requestStatus)return K=Ut(T,P),Qe;{if(!navigator.onLine)throw Re.create("app-offline");const Xt=Ee(Qe);return K=Yt(T,Xt),Xt}});return K?yield K:ce.authToken})).apply(this,arguments)}function Ut(T,P){return ct.apply(this,arguments)}function ct(){return(ct=(0,Y.Z)(function*(T,P){let K=yield Bt(T.appConfig);for(;1===K.authToken.requestStatus;)yield Ue(100),K=yield Bt(T.appConfig);const ce=K.authToken;return 0===ce.requestStatus?lr(T,P):ce})).apply(this,arguments)}function Bt(T){return Hr(T,P=>{if(!rn(P))throw Re.create("not-registered");return function Ze(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function Yt(T,P){return In.apply(this,arguments)}function In(){return(In=(0,Y.Z)(function*(T,P){try{const K=yield Bn(T,P),ce=Object.assign(Object.assign({},P),{authToken:K});return yield Wt(T.appConfig,ce),K}catch(K){if(!Et(K)||401!==K.customData.serverCode&&404!==K.customData.serverCode){const ce=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield Wt(T.appConfig,ce)}else yield On(T.appConfig);throw K}})).apply(this,arguments)}function rn(T){return void 0!==T&&2===T.registrationStatus}function he(T){return 2===T.requestStatus&&!function te(T){const P=Date.now();return P<T.creationTime||T.creationTime+T.expiresIn<P+36e5}(T)}function Ee(T){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:P})}function At(){return(At=(0,Y.Z)(function*(T){const P=T,{installationEntry:K,registrationPromise:ce}=yield nr(P);return ce?ce.catch(console.error):lr(P).catch(console.error),K.fid})).apply(this,arguments)}function de(){return(de=(0,Y.Z)(function*(T,P=!1){const K=T;return yield se(K),(yield lr(K,P)).token})).apply(this,arguments)}function se(T){return be.apply(this,arguments)}function be(){return(be=(0,Y.Z)(function*(T){const{registrationPromise:P}=yield nr(T);P&&(yield P)})).apply(this,arguments)}function wr(T){return Re.create("missing-app-config-values",{valueName:T})}const wi="installations",yt=T=>{const P=T.getProvider("app").getImmediate(),K=function sr(T){if(!T||!T.options)throw wr("App Configuration");if(!T.name)throw wr("App Name");const P=["projectId","apiKey","appId"];for(const K of P)if(!T.options[K])throw wr(K);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(P);return{app:P,appConfig:K,heartbeatServiceProvider:(0,ve._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},en=T=>{const P=T.getProvider("app").getImmediate(),K=(0,ve._getProvider)(P,wi).getImmediate();return{getId:()=>function Le(T){return At.apply(this,arguments)}(K),getToken:Pe=>function we(T){return de.apply(this,arguments)}(K,Pe)}};(function vn(){(0,ve._registerComponent)(new Ce.wA(wi,yt,"PUBLIC")),(0,ve._registerComponent)(new Ce.wA("installations-internal",en,"PRIVATE"))})(),(0,ve.registerVersion)(Ae,"0.5.8"),(0,ve.registerVersion)(Ae,"0.5.8","esm2017");const Dr="@firebase/remote-config",mr=new pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Oi{constructor(P,K,ce,Pe){this.client=P,this.storage=K,this.storageCache=ce,this.logger=Pe}isCachedDataFresh(P,K){if(!K)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ce=Date.now()-K,Pe=ce<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ce}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${Pe}.`),Pe}fetch(P){var K=this;return(0,Y.Z)(function*(){const[ce,Pe]=yield Promise.all([K.storage.getLastSuccessfulFetchTimestampMillis(),K.storage.getLastSuccessfulFetchResponse()]);if(Pe&&K.isCachedDataFresh(P.cacheMaxAgeMillis,ce))return Pe;P.eTag=Pe&&Pe.eTag;const Qe=yield K.client.fetch(P),St=[K.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Qe.status&&St.push(K.storage.setLastSuccessfulFetchResponse(Qe)),yield Promise.all(St),Qe})()}}function ys(T=navigator){return T.languages&&T.languages[0]||T.language}class _s{constructor(P,K,ce,Pe,Qe,St){this.firebaseInstallations=P,this.sdkVersion=K,this.namespace=ce,this.projectId=Pe,this.apiKey=Qe,this.appId=St}fetch(P){var K=this;return(0,Y.Z)(function*(){const[ce,Pe]=yield Promise.all([K.firebaseInstallations.getId(),K.firebaseInstallations.getToken()]),St=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${K.projectId}/namespaces/${K.namespace}:fetch?key=${K.apiKey}`,Xt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},dn={sdk_version:K.sdkVersion,app_instance_id:ce,app_instance_id_token:Pe,app_id:K.appId,language_code:ys()},bn={method:"POST",headers:Xt,body:JSON.stringify(dn)},or=fetch(St,bn),Nn=new Promise((ho,qs)=>{P.signal.addEventListener(()=>{const wo=new Error("The operation was aborted.");wo.name="AbortError",qs(wo)})});let zr;try{yield Promise.race([or,Nn]),zr=yield or}catch(ho){let qs="fetch-client-network";throw"AbortError"===ho.name&&(qs="fetch-timeout"),mr.create(qs,{originalErrorMessage:ho.message})}let Li=zr.status;const Ma=zr.headers.get("ETag")||void 0;let Ya,fs;if(200===zr.status){let ho;try{ho=yield zr.json()}catch(qs){throw mr.create("fetch-client-parse",{originalErrorMessage:qs.message})}Ya=ho.entries,fs=ho.state}if("INSTANCE_STATE_UNSPECIFIED"===fs?Li=500:"NO_CHANGE"===fs?Li=304:("NO_TEMPLATE"===fs||"EMPTY_CONFIG"===fs)&&(Ya={}),304!==Li&&200!==Li)throw mr.create("fetch-status",{httpStatus:Li});return{status:Li,eTag:Ma,config:Ya}})()}}class Ps{constructor(P,K){this.client=P,this.storage=K}fetch(P){var K=this;return(0,Y.Z)(function*(){const ce=(yield K.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return K.attemptFetch(P,ce)})()}attemptFetch(P,{throttleEndTimeMillis:K,backoffCount:ce}){var Pe=this;return(0,Y.Z)(function*(){yield function jn(T,P){return new Promise((K,ce)=>{const Pe=Math.max(P-Date.now(),0),Qe=setTimeout(K,Pe);T.addEventListener(()=>{clearTimeout(Qe),ce(mr.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,K);try{const Qe=yield Pe.client.fetch(P);return yield Pe.storage.deleteThrottleMetadata(),Qe}catch(Qe){if(!function Os(T){if(!(T instanceof pe.ZR&&T.customData))return!1;const P=Number(T.customData.httpStatus);return 429===P||500===P||503===P||504===P}(Qe))throw Qe;const St={throttleEndTimeMillis:Date.now()+(0,pe.$s)(ce),backoffCount:ce+1};return yield Pe.storage.setThrottleMetadata(St),Pe.attemptFetch(P,St)}})()}}class Ke{constructor(P,K,ce,Pe,Qe){this.app=P,this._client=K,this._storageCache=ce,this._storage=Pe,this._logger=Qe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ot(T,P){const K=T.target.error||void 0;return mr.create(P,{originalErrorMessage:K&&K.message})}const Dt="app_namespace_store";class $n{constructor(P,K,ce,Pe=function Pr(){return new Promise((T,P)=>{try{const K=indexedDB.open("firebase_remote_config",1);K.onerror=ce=>{P(ot(ce,"storage-open"))},K.onsuccess=ce=>{T(ce.target.result)},K.onupgradeneeded=ce=>{0===ce.oldVersion&&ce.target.result.createObjectStore(Dt,{keyPath:"compositeKey"})}}catch(K){P(mr.create("storage-open",{originalErrorMessage:K}))}})}()){this.appId=P,this.appName=K,this.namespace=ce,this.openDbPromise=Pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var K=this;return(0,Y.Z)(function*(){const ce=yield K.openDbPromise;return new Promise((Pe,Qe)=>{const Xt=ce.transaction([Dt],"readonly").objectStore(Dt),dn=K.createCompositeKey(P);try{const bn=Xt.get(dn);bn.onerror=or=>{Qe(ot(or,"storage-get"))},bn.onsuccess=or=>{const Nn=or.target.result;Pe(Nn?Nn.value:void 0)}}catch(bn){Qe(mr.create("storage-get",{originalErrorMessage:bn&&bn.message}))}})})()}set(P,K){var ce=this;return(0,Y.Z)(function*(){const Pe=yield ce.openDbPromise;return new Promise((Qe,St)=>{const dn=Pe.transaction([Dt],"readwrite").objectStore(Dt),bn=ce.createCompositeKey(P);try{const or=dn.put({compositeKey:bn,value:K});or.onerror=Nn=>{St(ot(Nn,"storage-set"))},or.onsuccess=()=>{Qe()}}catch(or){St(mr.create("storage-set",{originalErrorMessage:or&&or.message}))}})})()}delete(P){var K=this;return(0,Y.Z)(function*(){const ce=yield K.openDbPromise;return new Promise((Pe,Qe)=>{const Xt=ce.transaction([Dt],"readwrite").objectStore(Dt),dn=K.createCompositeKey(P);try{const bn=Xt.delete(dn);bn.onerror=or=>{Qe(ot(or,"storage-delete"))},bn.onsuccess=()=>{Pe()}}catch(bn){Qe(mr.create("storage-delete",{originalErrorMessage:bn&&bn.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class Pi{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,Y.Z)(function*(){const K=P.storage.getLastFetchStatus(),ce=P.storage.getLastSuccessfulFetchTimestampMillis(),Pe=P.storage.getActiveConfig(),Qe=yield K;Qe&&(P.lastFetchStatus=Qe);const St=yield ce;St&&(P.lastSuccessfulFetchTimestampMillis=St);const Xt=yield Pe;Xt&&(P.activeConfig=Xt)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function zi(){return bs.apply(this,arguments)}function bs(){return(bs=(0,Y.Z)(function*(){if(!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Ii(){(0,ve._registerComponent)(new Ce.wA("remote-config",function T(P,{instanceIdentifier:K}){const ce=P.getProvider("app").getImmediate(),Pe=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw mr.create("registration-window");if(!(0,pe.hl)())throw mr.create("indexed-db-unavailable");const{projectId:Qe,apiKey:St,appId:Xt}=ce.options;if(!Qe)throw mr.create("registration-project-id");if(!St)throw mr.create("registration-api-key");if(!Xt)throw mr.create("registration-app-id");const dn=new $n(Xt,ce.name,K=K||"firebase"),bn=new Pi(dn),or=new Oe.Yd(Dr);or.logLevel=Oe.in.ERROR;const Nn=new _s(Pe,ve.SDK_VERSION,K,Qe,St,Xt),zr=new Ps(Nn,dn),Li=new Oi(zr,dn,bn,or),Ma=new Ke(ce,Li,bn,dn,or);return function Qn(T){const P=(0,pe.m9)(T);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(Ma),Ma},"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(Dr,"0.3.7"),(0,ve.registerVersion)(Dr,"0.3.7","esm2017")}();const gi="/firebase-messaging-sw.js",Di="/firebase-cloud-messaging-push-scope",br="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ki="google.c.a.c_id",qi="google.c.a.c_l",ks="google.c.a.ts",no="google.c.a.e";var is=(()=>{return(T=is||(is={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",is;var T})();function Zr(T){const P=new Uint8Array(T);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zi(T){const K=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ce=atob(K),Pe=new Uint8Array(ce.length);for(let Qe=0;Qe<ce.length;++Qe)Pe[Qe]=ce.charCodeAt(Qe);return Pe}const Ts="fcm_token_details_db",Vr="fcm_token_object_Store";function cs(T){return As.apply(this,arguments)}function As(){return As=(0,Y.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Qe=>Qe.name).includes(Ts))return null;let P=null;return(yield(0,pe.X3)(Ts,5,function(){var ce=(0,Y.Z)(function*(Pe,Qe,St,Xt){var dn;if(Qe<2||!Pe.objectStoreNames.contains(Vr))return;const bn=Xt.objectStore(Vr),or=yield bn.index("fcmSenderId").get(T);if(yield bn.clear(),or)if(2===Qe){const Nn=or;if(!Nn.auth||!Nn.p256dh||!Nn.endpoint)return;P={token:Nn.fcmToken,createTime:null!==(dn=Nn.createTime)&&void 0!==dn?dn:Date.now(),subscriptionOptions:{auth:Nn.auth,p256dh:Nn.p256dh,endpoint:Nn.endpoint,swScope:Nn.swScope,vapidKey:"string"==typeof Nn.vapidKey?Nn.vapidKey:Zr(Nn.vapidKey)}}}else if(3===Qe){const Nn=or;P={token:Nn.fcmToken,createTime:Nn.createTime,subscriptionOptions:{auth:Zr(Nn.auth),p256dh:Zr(Nn.p256dh),endpoint:Nn.endpoint,swScope:Nn.swScope,vapidKey:Zr(Nn.vapidKey)}}}else if(4===Qe){const Nn=or;P={token:Nn.fcmToken,createTime:Nn.createTime,subscriptionOptions:{auth:Zr(Nn.auth),p256dh:Zr(Nn.p256dh),endpoint:Nn.endpoint,swScope:Nn.swScope,vapidKey:Zr(Nn.vapidKey)}}}});return function(Pe,Qe,St,Xt){return ce.apply(this,arguments)}}())).close(),yield(0,pe.Lj)(Ts),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),Ss(P)?P:null}),As.apply(this,arguments)}function Ss(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:P}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const di="firebase-messaging-store";let mi=null;function Ms(){return mi||(mi=(0,pe.X3)("firebase-messaging-database",1,(T,P)=>{0===P&&T.createObjectStore(di)})),mi}function cr(T){return R.apply(this,arguments)}function R(){return(R=(0,Y.Z)(function*(T){const P=Je(T),ce=yield(yield Ms()).transaction(di).objectStore(di).get(P);if(ce)return ce;{const Pe=yield cs(T.appConfig.senderId);if(Pe)return yield G(T,Pe),Pe}})).apply(this,arguments)}function G(T,P){return x.apply(this,arguments)}function x(){return(x=(0,Y.Z)(function*(T,P){const K=Je(T),Pe=(yield Ms()).transaction(di,"readwrite");return yield Pe.objectStore(di).put(P,K),yield Pe.complete,P})).apply(this,arguments)}function Z(T){return fe.apply(this,arguments)}function fe(){return(fe=(0,Y.Z)(function*(T){const P=Je(T),ce=(yield Ms()).transaction(di,"readwrite");yield ce.objectStore(di).delete(P),yield ce.complete})).apply(this,arguments)}function Je({appConfig:T}){return T.appId}const Rt=new pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xn(T,P){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,Y.Z)(function*(T,P){const K=yield k(T),ce=C(P),Pe={method:"POST",headers:K,body:JSON.stringify(ce)};let Qe;try{Qe=yield(yield fetch(vr(T.appConfig),Pe)).json()}catch(St){throw Rt.create("token-subscribe-failed",{errorInfo:St})}if(Qe.error)throw Rt.create("token-subscribe-failed",{errorInfo:Qe.error.message});if(!Qe.token)throw Rt.create("token-subscribe-no-token");return Qe.token})).apply(this,arguments)}function Cn(T,P){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,Y.Z)(function*(T,P){const K=yield k(T),ce=C(P.subscriptionOptions),Pe={method:"PATCH",headers:K,body:JSON.stringify(ce)};let Qe;try{Qe=yield(yield fetch(`${vr(T.appConfig)}/${P.token}`,Pe)).json()}catch(St){throw Rt.create("token-update-failed",{errorInfo:St})}if(Qe.error)throw Rt.create("token-update-failed",{errorInfo:Qe.error.message});if(!Qe.token)throw Rt.create("token-update-no-token");return Qe.token})).apply(this,arguments)}function Ur(T,P){return _r.apply(this,arguments)}function _r(){return(_r=(0,Y.Z)(function*(T,P){const ce={method:"DELETE",headers:yield k(T)};try{const Qe=yield(yield fetch(`${vr(T.appConfig)}/${P}`,ce)).json();if(Qe.error)throw Rt.create("token-unsubscribe-failed",{errorInfo:Qe.error.message})}catch(Pe){throw Rt.create("token-unsubscribe-failed",{errorInfo:Pe})}})).apply(this,arguments)}function vr({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function k(T){return A.apply(this,arguments)}function A(){return(A=(0,Y.Z)(function*({appConfig:T,installations:P}){const K=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${K}`})})).apply(this,arguments)}function C({p256dh:T,auth:P,endpoint:K,vapidKey:ce}){const Pe={web:{endpoint:K,auth:P,p256dh:T}};return ce!==br&&(Pe.web.applicationPubKey=ce),Pe}const q=6048e5;function nt(T){return on.apply(this,arguments)}function on(){return(on=(0,Y.Z)(function*(T){const P=yield J(T.swRegistration,T.vapidKey),K={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:P.endpoint,auth:Zr(P.getKey("auth")),p256dh:Zr(P.getKey("p256dh"))},ce=yield cr(T.firebaseDependencies);if(ce){if(xe(ce.subscriptionOptions,K))return Date.now()>=ce.createTime+q?Ci(T,{token:ce.token,createTime:Date.now(),subscriptionOptions:K}):ce.token;try{yield Ur(T.firebaseDependencies,ce.token)}catch(Pe){console.warn(Pe)}return M(T.firebaseDependencies,K)}return M(T.firebaseDependencies,K)})).apply(this,arguments)}function dr(T){return os.apply(this,arguments)}function os(){return(os=(0,Y.Z)(function*(T){const P=yield cr(T.firebaseDependencies);P&&(yield Ur(T.firebaseDependencies,P.token),yield Z(T.firebaseDependencies));const K=yield T.swRegistration.pushManager.getSubscription();return!K||K.unsubscribe()})).apply(this,arguments)}function Ci(T,P){return ro.apply(this,arguments)}function ro(){return(ro=(0,Y.Z)(function*(T,P){try{const K=yield Cn(T.firebaseDependencies,P),ce=Object.assign(Object.assign({},P),{token:K,createTime:Date.now()});return yield G(T.firebaseDependencies,ce),K}catch(K){throw yield dr(T),K}})).apply(this,arguments)}function M(T,P){return O.apply(this,arguments)}function O(){return(O=(0,Y.Z)(function*(T,P){const ce={token:yield Xn(T,P),createTime:Date.now(),subscriptionOptions:P};return yield G(T,ce),ce.token})).apply(this,arguments)}function J(T,P){return oe.apply(this,arguments)}function oe(){return(oe=(0,Y.Z)(function*(T,P){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zi(P)})})).apply(this,arguments)}function xe(T,P){return P.vapidKey===T.vapidKey&&P.endpoint===T.endpoint&&P.auth===T.auth&&P.p256dh===T.p256dh}function Ye(T){const P={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function pt(T,P){if(!P.notification)return;T.notification={};const K=P.notification.title;K&&(T.notification.title=K);const ce=P.notification.body;ce&&(T.notification.body=ce);const Pe=P.notification.image;Pe&&(T.notification.image=Pe)}(P,T),function sn(T,P){!P.data||(T.data=P.data)}(P,T),function Ht(T,P){if(!P.fcmOptions)return;T.fcmOptions={};const K=P.fcmOptions.link;K&&(T.fcmOptions.link=K);const ce=P.fcmOptions.analytics_label;ce&&(T.fcmOptions.analyticsLabel=ce)}(P,T),P}function Dn(T){return"object"==typeof T&&!!T&&Ki in T}function Kn(T,P){const K=[];for(let ce=0;ce<T.length;ce++)K.push(T.charAt(ce)),ce<P.length&&K.push(P.charAt(ce));return K.join("")}function hr(T){return Rt.create("missing-app-config-values",{valueName:T})}Kn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Kn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zn{constructor(P,K,ce){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Pe=function kr(T){if(!T||!T.options)throw hr("App Configuration Object");if(!T.name)throw hr("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:K}=T;for(const ce of P)if(!K[ce])throw hr(ce);return{appName:T.name,projectId:K.projectId,apiKey:K.apiKey,appId:K.appId,senderId:K.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:Pe,installations:K,analyticsProvider:ce}}_delete(){return Promise.resolve()}}function tr(T){return yi.apply(this,arguments)}function yi(){return(yi=(0,Y.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(gi,{scope:Di}),T.swRegistration.update().catch(()=>{})}catch(P){throw Rt.create("failed-service-worker-registration",{browserErrorMessage:P.message})}})).apply(this,arguments)}function Er(T,P){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,Y.Z)(function*(T,P){if(!P&&!T.swRegistration&&(yield tr(T)),P||!T.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw Rt.create("invalid-sw-registration");T.swRegistration=P}})).apply(this,arguments)}function Yi(T,P){return Br.apply(this,arguments)}function Br(){return(Br=(0,Y.Z)(function*(T,P){P?T.vapidKey=P:T.vapidKey||(T.vapidKey=br)})).apply(this,arguments)}function Ir(){return(Ir=(0,Y.Z)(function*(T,P){if(!navigator)throw Rt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Rt.create("permission-blocked");return yield Yi(T,null==P?void 0:P.vapidKey),yield Er(T,null==P?void 0:P.serviceWorkerRegistration),nt(T)})).apply(this,arguments)}function ds(T,P,K){return io.apply(this,arguments)}function io(){return(io=(0,Y.Z)(function*(T,P,K){const ce=js(P);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(ce,{message_id:K[Ki],message_name:K[qi],message_time:K[ks],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function js(T){switch(T){case is.NOTIFICATION_CLICKED:return"notification_open";case is.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $a(){return($a=(0,Y.Z)(function*(T,P){const K=P.data;if(!K.isFirebaseMessaging)return;T.onMessageHandler&&K.messageType===is.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Ye(K)):T.onMessageHandler.next(Ye(K)));const ce=K.data;Dn(ce)&&"1"===ce[no]&&(yield ds(T,K.messageType,ce))})).apply(this,arguments)}const Ho="@firebase/messaging",ta=T=>{const P=new Zn(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",K=>function Mo(T,P){return $a.apply(this,arguments)}(P,K)),P},$s=T=>{const P=T.getProvider("messaging").getImmediate();return{getToken:ce=>function Xr(T,P){return Ir.apply(this,arguments)}(P,ce)}};function Ns(){return so.apply(this,arguments)}function so(){return(so=(0,Y.Z)(function*(){try{yield(0,pe.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,pe.hl)()&&(0,pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ia(){(0,ve._registerComponent)(new Ce.wA("messaging",ta,"PUBLIC")),(0,ve._registerComponent)(new Ce.wA("messaging-internal",$s,"PRIVATE")),(0,ve.registerVersion)(Ho,"0.9.12"),(0,ve.registerVersion)(Ho,"0.9.12","esm2017")}();const Ti="analytics",ec="firebase_id",Hs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fs="https://www.googletagmanager.com/gtag/js",oi=new Oe.Yd("@firebase/analytics");function ia(T){return Promise.all(T.map(P=>P.catch(K=>K)))}function Ha(T,P){const K=document.createElement("script");K.src=`${Fs}?l=${T}&id=${P}`,K.async=!0,document.head.appendChild(K)}function oo(T,P,K,ce,Pe,Qe){return sa.apply(this,arguments)}function sa(){return(sa=(0,Y.Z)(function*(T,P,K,ce,Pe,Qe){const St=ce[Pe];try{if(St)yield P[St];else{const dn=(yield ia(K)).find(bn=>bn.measurementId===Pe);dn&&(yield P[dn.appId])}}catch(Xt){oi.error(Xt)}T("config",Pe,Qe)})).apply(this,arguments)}function xs(T,P,K,ce,Pe){return mo.apply(this,arguments)}function mo(){return(mo=(0,Y.Z)(function*(T,P,K,ce,Pe){try{let Qe=[];if(Pe&&Pe.send_to){let St=Pe.send_to;Array.isArray(St)||(St=[St]);const Xt=yield ia(K);for(const dn of St){const bn=Xt.find(Nn=>Nn.measurementId===dn),or=bn&&P[bn.appId];if(!or){Qe=[];break}Qe.push(or)}}0===Qe.length&&(Qe=Object.values(P)),yield Promise.all(Qe),T("event",ce,Pe||{})}catch(Qe){oi.error(Qe)}})).apply(this,arguments)}function _u(){const T=window.document.getElementsByTagName("script");for(const P of Object.values(T))if(P.src&&P.src.includes(Fs))return P;return null}const Nr=new pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Go=new class yo{constructor(P={},K=1e3){this.throttleMetadata=P,this.intervalMillis=K}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,K){this.throttleMetadata[P]=K}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function Wo(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Ca(T){return jr.apply(this,arguments)}function jr(){return(jr=(0,Y.Z)(function*(T){var P;const{appId:K,apiKey:ce}=T,Pe={method:"GET",headers:Wo(ce)},Qe=Hs.replace("{app-id}",K),St=yield fetch(Qe,Pe);if(200!==St.status&&304!==St.status){let Xt="";try{const dn=yield St.json();(null===(P=dn.error)||void 0===P?void 0:P.message)&&(Xt=dn.error.message)}catch(dn){}throw Nr.create("config-fetch-failed",{httpStatus:St.status,responseMessage:Xt})}return St.json()})).apply(this,arguments)}function Wa(T){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,Y.Z)(function*(T,P=Go,K){const{appId:ce,apiKey:Pe,measurementId:Qe}=T.options;if(!ce)throw Nr.create("no-app-id");if(!Pe){if(Qe)return{measurementId:Qe,appId:ce};throw Nr.create("no-api-key")}const St=P.getThrottleMetadata(ce)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xt=new I;return setTimeout((0,Y.Z)(function*(){Xt.abort()}),void 0!==K?K:6e4),ba({appId:ce,apiKey:Pe,measurementId:Qe},St,Xt,P)})).apply(this,arguments)}function ba(T,P,K){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,Y.Z)(function*(T,{throttleEndTimeMillis:P,backoffCount:K},ce,Pe=Go){const{appId:Qe,measurementId:St}=T;try{yield tc(ce,P)}catch(Xt){if(St)return oi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${St} provided in the "measurementId" field in the local Firebase config. [${Xt.message}]`),{appId:Qe,measurementId:St};throw Xt}try{const Xt=yield Ca(T);return Pe.deleteThrottleMetadata(Qe),Xt}catch(Xt){if(!Eu(Xt)){if(Pe.deleteThrottleMetadata(Qe),St)return oi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${St} provided in the "measurementId" field in the local Firebase config. [${Xt.message}]`),{appId:Qe,measurementId:St};throw Xt}const dn=503===Number(Xt.customData.httpStatus)?(0,pe.$s)(K,Pe.intervalMillis,30):(0,pe.$s)(K,Pe.intervalMillis),bn={throttleEndTimeMillis:Date.now()+dn,backoffCount:K+1};return Pe.setThrottleMetadata(Qe,bn),oi.debug(`Calling attemptFetch again in ${dn} millis`),ba(T,bn,ce,Pe)}})).apply(this,arguments)}function tc(T,P){return new Promise((K,ce)=>{const Pe=Math.max(P-Date.now(),0),Qe=setTimeout(K,Pe);T.addEventListener(()=>{clearTimeout(Qe),ce(Nr.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function Eu(T){if(!(T instanceof pe.ZR&&T.customData))return!1;const P=Number(T.customData.httpStatus);return 429===P||500===P||503===P||504===P}class I{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}function E(){return _.apply(this,arguments)}function _(){return(_=(0,Y.Z)(function*(){if(!(0,pe.hl)())return oi.warn(Nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,pe.eu)()}catch(T){return oi.warn(Nr.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function F(){return(F=(0,Y.Z)(function*(T,P,K,ce,Pe,Qe,St){var Xt;const dn=Wa(T);dn.then(Li=>{K[Li.measurementId]=Li.appId,T.options.measurementId&&Li.measurementId!==T.options.measurementId&&oi.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Li.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Li=>oi.error(Li)),P.push(dn);const bn=E().then(Li=>{if(Li)return ce.getId()}),[or,Nn]=yield Promise.all([dn,bn]);_u()||Ha(Qe,or.measurementId),Pe("js",new Date);const zr=null!==(Xt=null==St?void 0:St.config)&&void 0!==Xt?Xt:{};return zr.origin="firebase",zr.update=!0,null!=Nn&&(zr[ec]=Nn),Pe("config",or.measurementId,zr),or.measurementId})).apply(this,arguments)}class j{constructor(P){this.app=P}_delete(){return delete ne[this.app.options.appId],Promise.resolve()}}let ne={},ye=[];const at={};let hn,_t,st="dataLayer",$e=!1;function ws(T,P,K){!function $r(){const T=[];if((0,pe.ru)()&&T.push("This is a browser extension environment."),(0,pe.zI)()||T.push("Cookies are not available."),T.length>0){const P=T.map((ce,Pe)=>`(${Pe+1}) ${ce}`).join(" "),K=Nr.create("invalid-analytics-context",{errorInfo:P});oi.warn(K.message)}}();const ce=T.options.appId;if(!ce)throw Nr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Nr.create("no-api-key");oi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ne[ce])throw Nr.create("already-exists",{id:ce});if(!$e){!function Es(T){let P=[];Array.isArray(window[T])?P=window[T]:window[T]=P}(st);const{wrappedGtag:Qe,gtagCore:St}=function Ga(T,P,K,ce,Pe){let Qe=function(...St){window[ce].push(arguments)};return window[Pe]&&"function"==typeof window[Pe]&&(Qe=window[Pe]),window[Pe]=function Gs(T,P,K,ce){function Qe(){return(Qe=(0,Y.Z)(function*(St,Xt,dn){try{"event"===St?yield xs(T,P,K,Xt,dn):"config"===St?yield oo(T,P,K,ce,Xt,dn):T("set",Xt)}catch(bn){oi.error(bn)}})).apply(this,arguments)}return function Pe(St,Xt,dn){return Qe.apply(this,arguments)}}(Qe,T,P,K),{gtagCore:Qe,wrappedGtag:window[Pe]}}(ne,ye,at,st,"gtag");_t=Qe,hn=St,$e=!0}return ne[ce]=function S(T,P,K,ce,Pe,Qe,St){return F.apply(this,arguments)}(T,ye,at,P,hn,st,K),new j(T)}function _o(){return(_o=(0,Y.Z)(function*(T,P,K,ce,Pe){if(Pe&&Pe.global)T("event",K,ce);else{const Qe=yield P;T("event",K,Object.assign(Object.assign({},ce),{send_to:Qe}))}})).apply(this,arguments)}function uo(){return za.apply(this,arguments)}function za(){return(za=(0,Y.Z)(function*(){if((0,pe.ru)()||!(0,pe.zI)()||!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch(T){return!1}})).apply(this,arguments)}const Ta="@firebase/analytics";!function zd(){(0,ve._registerComponent)(new Ce.wA(Ti,(P,{options:K})=>ws(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),K),"PUBLIC")),(0,ve._registerComponent)(new Ce.wA("analytics-internal",function T(P){try{const K=P.getProvider(Ti).getImmediate();return{logEvent:(ce,Pe,Qe)=>function Qc(T,P,K,ce){T=(0,pe.m9)(T),function wu(T,P,K,ce,Pe){return _o.apply(this,arguments)}(_t,ne[T.app.options.appId],P,K,ce).catch(Pe=>oi.error(Pe))}(K,ce,Pe,Qe)}}catch(K){throw Nr.create("interop-component-reg-failed",{reason:K})}},"PRIVATE")),(0,ve.registerVersion)(Ta,"0.7.8"),(0,ve.registerVersion)(Ta,"0.7.8","esm2017")}();var as=N(4408),Kd=N(7565);const ll=new class Jn extends Kd.v{}(class zs extends as.o{constructor(P,K){super(P,K),this.scheduler=P,this.work=K}schedule(P,K=0){return K>0?super.schedule(P,K):(this.delay=K,this.state=P,this.scheduler.flush(this),this)}execute(P,K){return K>0||this.closed?super.execute(P,K):this._execute(P,K)}requestAsyncId(P,K,ce=0){return null!=ce&&ce>0||null==ce&&this.delay>0?super.requestAsyncId(P,K,ce):P.flush(this)}});var Ai=N(4986),Oo=N(8505),Ji=N(5363),Us=N(9468);const Aa=new p.GfV("7.3.0"),zo="__angularfire_symbol__analyticsIsSupportedValue",Ui="__angularfire_symbol__analyticsIsSupported",hs="__angularfire_symbol__remoteConfigIsSupportedValue",Po="__angularfire_symbol__remoteConfigIsSupported",Cu="__angularfire_symbol__messagingIsSupportedValue",Vt="__angularfire_symbol__messagingIsSupported";function Eo(T,P,K){if(P){if(1===P.length)return P[0];const Qe=P.filter(St=>St.app===K);if(1===Qe.length)return Qe[0]}return K.container.getProvider(T).getImmediate({optional:!0})}globalThis[Ui]||(globalThis[Ui]=uo().then(T=>globalThis[zo]=T).catch(()=>globalThis[zo]=!1)),globalThis[Vt]||(globalThis[Vt]=Ns().then(T=>globalThis[Cu]=T).catch(()=>globalThis[Cu]=!1)),globalThis[Po]||(globalThis[Po]=zi().then(T=>globalThis[hs]=T).catch(()=>globalThis[hs]=!1));const ko=(T,P)=>{const K=P?[P]:(0,H.C6)(),ce=[];return K.forEach(Pe=>{Pe.container.getProvider(T).instances.forEach(St=>{ce.includes(St)||ce.push(St)})}),ce};function Ko(){}class No{constructor(P,K=ll){this.zone=P,this.delegate=K}now(){return this.delegate.now()}schedule(P,K,ce){const Pe=this.zone;return this.delegate.schedule(function(St){Pe.runGuarded(()=>{P.apply(this,[St])})},K,ce)}}class dl{constructor(P){this.zone=P,this.task=null}call(P,K){const ce=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko)),K.pipe((0,Oo.b)({next:ce,complete:ce,error:ce})).subscribe(P).add(ce)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fo=(()=>{class T{constructor(K){this.ngZone=K,this.outsideAngular=K.runOutsideAngular(()=>new No(Zone.current)),this.insideAngular=K.run(()=>new No(Zone.current,Ai.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(K){return new(K||T)(p.LFG(p.R0b))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function co(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Tu(T){return T.pipe((0,Ji.Q)(co().outsideAngular))}function ua(T){return co(),function qo(T){return function(K){return(K=K.lift(new dl(T.ngZone))).pipe((0,Us.R)(T.outsideAngular),(0,Ji.Q)(T.insideAngular))}}(co())(T)}},2090:(Pt,ze,N)=>{N.d(ze,{$s:()=>Yn,BH:()=>je,G6:()=>Fe,L:()=>Ve,LL:()=>Kt,Lj:()=>In,Mn:()=>Ge,Sg:()=>qe,UG:()=>Re,US:()=>Oe,X3:()=>Yt,ZB:()=>ge,ZR:()=>Ue,b$:()=>L,d:()=>ee,eu:()=>Q,hl:()=>_e,jU:()=>Et,m9:()=>Qt,ne:()=>Wt,pd:()=>ur,r3:()=>tn,ru:()=>$,tV:()=>le,uI:()=>Ne,vZ:()=>ft,w1:()=>me,xO:()=>Lt,xb:()=>qn,z$:()=>ht,zI:()=>Me,zd:()=>En});var p=N(5861);const pe=function(he){const te=[];let Ee=0;for(let Ze=0;Ze<he.length;Ze++){let Le=he.charCodeAt(Ze);Le<128?te[Ee++]=Le:Le<2048?(te[Ee++]=Le>>6|192,te[Ee++]=63&Le|128):55296==(64512&Le)&&Ze+1<he.length&&56320==(64512&he.charCodeAt(Ze+1))?(Le=65536+((1023&Le)<<10)+(1023&he.charCodeAt(++Ze)),te[Ee++]=Le>>18|240,te[Ee++]=Le>>12&63|128,te[Ee++]=Le>>6&63|128,te[Ee++]=63&Le|128):(te[Ee++]=Le>>12|224,te[Ee++]=Le>>6&63|128,te[Ee++]=63&Le|128)}return te},Oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(he,te){if(!Array.isArray(he))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ee=te?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ze=[];for(let Le=0;Le<he.length;Le+=3){const At=he[Le],we=Le+1<he.length,de=we?he[Le+1]:0,se=Le+2<he.length,be=se?he[Le+2]:0;let Jt=(15&de)<<2|be>>6,Pn=63&be;se||(Pn=64,we||(Jt=64)),Ze.push(Ee[At>>2],Ee[(3&At)<<4|de>>4],Ee[Jt],Ee[Pn])}return Ze.join("")},encodeString(he,te){return this.HAS_NATIVE_SUPPORT&&!te?btoa(he):this.encodeByteArray(pe(he),te)},decodeString(he,te){return this.HAS_NATIVE_SUPPORT&&!te?atob(he):function(he){const te=[];let Ee=0,Ze=0;for(;Ee<he.length;){const Le=he[Ee++];if(Le<128)te[Ze++]=String.fromCharCode(Le);else if(Le>191&&Le<224){const At=he[Ee++];te[Ze++]=String.fromCharCode((31&Le)<<6|63&At)}else if(Le>239&&Le<365){const se=((7&Le)<<18|(63&he[Ee++])<<12|(63&he[Ee++])<<6|63&he[Ee++])-65536;te[Ze++]=String.fromCharCode(55296+(se>>10)),te[Ze++]=String.fromCharCode(56320+(1023&se))}else{const At=he[Ee++],we=he[Ee++];te[Ze++]=String.fromCharCode((15&Le)<<12|(63&At)<<6|63&we)}}return te.join("")}(this.decodeStringToByteArray(he,te))},decodeStringToByteArray(he,te){this.init_();const Ee=te?this.charToByteMapWebSafe_:this.charToByteMap_,Ze=[];for(let Le=0;Le<he.length;){const At=Ee[he.charAt(Le++)],de=Le<he.length?Ee[he.charAt(Le)]:0;++Le;const be=Le<he.length?Ee[he.charAt(Le)]:64;++Le;const Ct=Le<he.length?Ee[he.charAt(Le)]:64;if(++Le,null==At||null==de||null==be||null==Ct)throw Error();Ze.push(At<<2|de>>4),64!==be&&(Ze.push(de<<4&240|be>>2),64!==Ct&&Ze.push(be<<6&192|Ct))}return Ze},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let he=0;he<this.ENCODED_VALS.length;he++)this.byteToCharMap_[he]=this.ENCODED_VALS.charAt(he),this.charToByteMap_[this.byteToCharMap_[he]]=he,this.byteToCharMapWebSafe_[he]=this.ENCODED_VALS_WEBSAFE.charAt(he),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[he]]=he,he>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(he)]=he,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(he)]=he)}}},Ve=function(he){return function(he){const te=pe(he);return Oe.encodeByteArray(te,!0)}(he).replace(/\./g,"")},le=function(he){try{return Oe.decodeString(he,!0)}catch(te){console.error("base64Decode failed: ",te)}return null};function ge(he,te){if(!(te instanceof Object))return te;switch(te.constructor){case Date:return new Date(te.getTime());case Object:void 0===he&&(he={});break;case Array:he=[];break;default:return te}for(const Ee in te)!te.hasOwnProperty(Ee)||!Be(Ee)||(he[Ee]=ge(he[Ee],te[Ee]));return he}function Be(he){return"__proto__"!==he}class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((te,Ee)=>{this.resolve=te,this.reject=Ee})}wrapCallback(te){return(Ee,Ze)=>{Ee?this.reject(Ee):this.resolve(Ze),"function"==typeof te&&(this.promise.catch(()=>{}),1===te.length?te(Ee):te(Ee,Ze))}}}function qe(he,te){if(he.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ze=te||"demo-project",Le=he.iat||0,At=he.sub||he.user_id;if(!At)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const we=Object.assign({iss:`https://securetoken.google.com/${Ze}`,aud:Ze,iat:Le,exp:Le+3600,auth_time:Le,sub:At,user_id:At,firebase:{sign_in_provider:"custom",identities:{}}},he);return[Ve(JSON.stringify({alg:"none",type:"JWT"})),Ve(JSON.stringify(we)),""].join(".")}function ht(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function Re(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(he){return!1}}function Et(){return"object"==typeof self&&self.self===self}function $(){const he="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof he&&void 0!==he.id}function L(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ee(){return ht().indexOf("Electron/")>=0}function me(){const he=ht();return he.indexOf("MSIE ")>=0||he.indexOf("Trident/")>=0}function Ge(){return ht().indexOf("MSAppHost/")>=0}function Fe(){return!Re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _e(){return"object"==typeof indexedDB}function Q(){return new Promise((he,te)=>{try{let Ee=!0;const Ze="validate-browser-context-for-indexeddb-analytics-module",Le=self.indexedDB.open(Ze);Le.onsuccess=()=>{Le.result.close(),Ee||self.indexedDB.deleteDatabase(Ze),he(!0)},Le.onupgradeneeded=()=>{Ee=!1},Le.onerror=()=>{var At;te((null===(At=Le.error)||void 0===At?void 0:At.message)||"")}}catch(Ee){te(Ee)}})}function Me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ue extends Error{constructor(te,Ee,Ze){super(Ee),this.code=te,this.customData=Ze,this.name="FirebaseError",Object.setPrototypeOf(this,Ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(te,Ee,Ze){this.service=te,this.serviceName=Ee,this.errors=Ze}create(te,...Ee){const Ze=Ee[0]||{},Le=`${this.service}/${te}`,At=this.errors[te],we=At?function bt(he,te){return he.replace(Gt,(Ee,Ze)=>{const Le=te[Ze];return null!=Le?String(Le):`<${Ze}?>`})}(At,Ze):"Error";return new Ue(Le,`${this.serviceName}: ${we} (${Le}).`,Ze)}}const Gt=/\{\$([^}]+)}/g;function tn(he,te){return Object.prototype.hasOwnProperty.call(he,te)}function qn(he){for(const te in he)if(Object.prototype.hasOwnProperty.call(he,te))return!1;return!0}function ft(he,te){if(he===te)return!0;const Ee=Object.keys(he),Ze=Object.keys(te);for(const Le of Ee){if(!Ze.includes(Le))return!1;const At=he[Le],we=te[Le];if(nn(At)&&nn(we)){if(!ft(At,we))return!1}else if(At!==we)return!1}for(const Le of Ze)if(!Ee.includes(Le))return!1;return!0}function nn(he){return null!==he&&"object"==typeof he}function Lt(he){const te=[];for(const[Ee,Ze]of Object.entries(he))Array.isArray(Ze)?Ze.forEach(Le=>{te.push(encodeURIComponent(Ee)+"="+encodeURIComponent(Le))}):te.push(encodeURIComponent(Ee)+"="+encodeURIComponent(Ze));return te.length?"&"+te.join("&"):""}function En(he){const te={};return he.replace(/^\?/,"").split("&").forEach(Ze=>{if(Ze){const[Le,At]=Ze.split("=");te[decodeURIComponent(Le)]=decodeURIComponent(At)}}),te}function ur(he){const te=he.indexOf("?");if(!te)return"";const Ee=he.indexOf("#",te);return he.substring(te,Ee>0?Ee:void 0)}function Wt(he,te){const Ee=new zt(he,te);return Ee.subscribe.bind(Ee)}class zt{constructor(te,Ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ee,this.task.then(()=>{te(this)}).catch(Ze=>{this.error(Ze)})}next(te){this.forEachObserver(Ee=>{Ee.next(te)})}error(te){this.forEachObserver(Ee=>{Ee.error(te)}),this.close(te)}complete(){this.forEachObserver(te=>{te.complete()}),this.close()}subscribe(te,Ee,Ze){let Le;if(void 0===te&&void 0===Ee&&void 0===Ze)throw new Error("Missing Observer.");Le=function xt(he,te){if("object"!=typeof he||null===he)return!1;for(const Ee of te)if(Ee in he&&"function"==typeof he[Ee])return!0;return!1}(te,["next","error","complete"])?te:{next:te,error:Ee,complete:Ze},void 0===Le.next&&(Le.next=Hr),void 0===Le.error&&(Le.error=Hr),void 0===Le.complete&&(Le.complete=Hr);const At=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Le.error(this.finalError):Le.complete()}catch(we){}}),this.observers.push(Le),At}unsubscribeOne(te){void 0===this.observers||void 0===this.observers[te]||(delete this.observers[te],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(te){if(!this.finalized)for(let Ee=0;Ee<this.observers.length;Ee++)this.sendOne(Ee,te)}sendOne(te,Ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[te])try{Ee(this.observers[te])}catch(Ze){"undefined"!=typeof console&&console.error&&console.error(Ze)}})}close(te){this.finalized||(this.finalized=!0,void 0!==te&&(this.finalError=te),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hr(){}function Yn(he,te=1e3,Ee=2){const Ze=te*Math.pow(Ee,he),Le=Math.round(.5*Ze*(Math.random()-.5)*2);return Math.min(144e5,Ze+Le)}function Qt(he){return he&&he._delegate?he._delegate:he}function lr(he,te){return new Promise((Ee,Ze)=>{he.onsuccess=Le=>{Ee(Le.target.result)},he.onerror=Le=>{var At;Ze(`${te}: ${null===(At=Le.target.error)||void 0===At?void 0:At.message}`)}})}class wn{constructor(te){this._db=te,this.objectStoreNames=this._db.objectStoreNames}transaction(te,Ee="readonly"){return new Ut(this._db.transaction.call(this._db,te,Ee))}createObjectStore(te,Ee){return new ct(this._db.createObjectStore(te,Ee))}close(){this._db.close()}}class Ut{constructor(te){this._transaction=te,this.complete=new Promise((Ee,Ze)=>{this._transaction.oncomplete=function(){Ee()},this._transaction.onerror=()=>{Ze(this._transaction.error)},this._transaction.onabort=()=>{Ze(this._transaction.error)}})}objectStore(te){return new ct(this._transaction.objectStore(te))}}class ct{constructor(te){this._store=te}index(te){return new Bt(this._store.index(te))}createIndex(te,Ee,Ze){return new Bt(this._store.createIndex(te,Ee,Ze))}get(te){return lr(this._store.get(te),"Error reading from IndexedDB")}put(te,Ee){return lr(this._store.put(te,Ee),"Error writing to IndexedDB")}delete(te){return lr(this._store.delete(te),"Error deleting from IndexedDB")}clear(){return lr(this._store.clear(),"Error clearing IndexedDB object store")}}class Bt{constructor(te){this._index=te}get(te){return lr(this._index.get(te),"Error reading from IndexedDB")}}function Yt(he,te,Ee){return new Promise((Ze,Le)=>{try{const At=indexedDB.open(he,te);At.onsuccess=we=>{Ze(new wn(we.target.result))},At.onerror=we=>{var de;Le(`Error opening indexedDB: ${null===(de=we.target.error)||void 0===de?void 0:de.message}`)},At.onupgradeneeded=we=>{Ee(new wn(At.result),we.oldVersion,we.newVersion,new Ut(At.transaction))}}catch(At){Le(`Error opening indexedDB: ${At.message}`)}})}function In(he){return rn.apply(this,arguments)}function rn(){return(rn=(0,p.Z)(function*(he){return new Promise((te,Ee)=>{try{const Ze=indexedDB.deleteDatabase(he);Ze.onsuccess=()=>{te()},Ze.onerror=Le=>{var At;Ee(`Error deleting indexedDB database "${he}": ${null===(At=Le.target.error)||void 0===At?void 0:At.message}`)}}catch(Ze){Ee(`Error deleting indexedDB database "${he}": ${Ze.message}`)}})})).apply(this,arguments)}},7556:(Pt,ze,N)=>{N.d(ze,{e:()=>le});var p=N(5861),H=N(9100),Y=N(4004),ve=N(9300),pe=N(3900),Ce=N(9646),Oe=N(5e3),Ae=N(1205),Ve=N(7566);let le=(()=>{class ie{constructor(Be,je,qe,ht){this.angularFireAuth=Be,this.angularFireStore=je,this.activatedRoute=qe,this.router=ht,this.redirectOnLoggedOutUrl=null,this.usersCollection=this.angularFireStore.collection("users"),this.isAuthenticated$=this.angularFireAuth.user.pipe((0,Y.U)(Ne=>!!Ne)),this.user$=this.angularFireAuth.user.pipe((0,Y.U)(Ne=>{var Re,Et,$;return Ne?{name:null!==(Re=Ne.displayName)&&void 0!==Re?Re:"unknown name",email:null!==(Et=Ne.email)&&void 0!==Et?Et:"unknow email",age:10,phoneNumber:null!==($=Ne.phoneNumber)&&void 0!==$?$:"unknown phone",uuid:Ne.uid}:null})),this.router.events.pipe((0,ve.h)(Ne=>Ne instanceof H.m2),(0,Y.U)(()=>this.activatedRoute.firstChild),(0,pe.w)(Ne=>{var Re;return null!==(Re=null==Ne?void 0:Ne.data)&&void 0!==Re?Re:(0,Ce.of)({})})).subscribe(Ne=>{this.redirectOnLoggedOutUrl=Ne.redirectOnLoggedOutUrl})}createUser(Be){var je=this;return(0,p.Z)(function*(){var qe;const{name:ht,email:Ne,password:Re,age:Et,phoneNumber:$}=Be,L=yield je.angularFireAuth.createUserWithEmailAndPassword(Ne,Re);if(!L.user)throw Error("User cannot be found");yield je.usersCollection.doc(null===(qe=L.user)||void 0===qe?void 0:qe.uid).set({name:ht,email:Ne,phoneNumber:$,age:Et}),yield L.user.updateProfile({displayName:ht})})()}login(Be){var je=this;return(0,p.Z)(function*(){const{email:qe,password:ht}=Be;yield je.angularFireAuth.signInWithEmailAndPassword(qe,ht)})()}logout(){var Be=this;return(0,p.Z)(function*(){yield Be.angularFireAuth.signOut(),Be.redirectOnLoggedOutUrl&&Be.router.navigateByUrl(Be.redirectOnLoggedOutUrl)})()}}return ie.\u0275fac=function(Be){return new(Be||ie)(Oe.LFG(Ae.zQ),Oe.LFG(Ve.ST),Oe.LFG(H.gz),Oe.LFG(H.F0))},ie.\u0275prov=Oe.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})()},4466:(Pt,ze,N)=>{N.d(ze,{m:()=>pe});var p=N(9808),H=N(3075),Y=N(1470),ve=N(5e3);let pe=(()=>{class Ce{}return Ce.\u0275fac=function(Ae){return new(Ae||Ce)},Ce.\u0275mod=ve.oAB({type:Ce}),Ce.\u0275inj=ve.cJS({imports:[[p.ez,H.UX,Y.yI.forRoot()]]}),Ce})()},2871:(Pt,ze,N)=>{var p=N(2313),H=N(5e3),Y=N(127),pe=(N(820),N(2011)),Ce=N(2084);const Oe_firebase={apiKey:"AIzaSyAcBedrPQWtwsBA-t8ZSjUk3y4SQ8eGRK8",authDomain:"clipit-31d1c.firebaseapp.com",projectId:"clipit-31d1c",storageBucket:"clipit-31d1c.appspot.com",messagingSenderId:"169059670918",appId:"1:169059670918:web:0da8e64eae1eddd785ea07"};var Ae=N(9100),Ve=N(9635),le=N(4004),ie=N(5698),ge=N(1205);const Be=(0,le.U)(ft=>!!ft);let je=(()=>{class ft{constructor(Lt,En){this.router=Lt,this.auth=En,this.canActivate=(ur,Un)=>{const Wt=ur.data.authGuardPipe||(()=>Be);return this.auth.user.pipe((0,ie.q)(1),Wt(ur,Un),(0,le.U)(zt=>"boolean"==typeof zt?zt:Array.isArray(zt)?this.router.createUrlTree(zt):this.router.parseUrl(zt)))}}}return ft.\u0275fac=function(Lt){return new(Lt||ft)(H.LFG(Ae.F0),H.LFG(ge.zQ))},ft.\u0275prov=H.Yz7({token:ft,factory:ft.\u0275fac,providedIn:"any"}),ft})();const _e=[{path:"",component:(()=>{class ft{constructor(){}ngOnInit(){}}return ft.\u0275fac=function(Lt){return new(Lt||ft)},ft.\u0275cmp=H.Xpm({type:ft,selectors:[["app-home"]],decls:2,vars:0,template:function(Lt,En){1&Lt&&(H.TgZ(0,"p"),H._uU(1,"home works!"),H.qZA())},styles:[""]}),ft})()},{path:"about",loadChildren:()=>N.e(630).then(N.bind(N,7630)).then(ft=>ft.AboutModule)},{path:"video",canActivate:[je],data:{redirectOnLoggedOutUrl:"/",authGuardPipe:()=>("/",(0,Ve.z)(Be,(0,le.U)(nn=>nn||"/")))},loadChildren:()=>Promise.all([N.e(592),N.e(982)]).then(N.bind(N,6982)).then(ft=>ft.VideoModule)},{path:"clips",loadChildren:()=>N.e(163).then(N.bind(N,9163)).then(ft=>ft.ClipsModule)},{path:"user",outlet:"modal",loadChildren:()=>Promise.all([N.e(592),N.e(983)]).then(N.bind(N,9983)).then(ft=>ft.UserModule)},{path:"**",loadChildren:()=>N.e(442).then(N.bind(N,2442)).then(ft=>ft.NotFoundModule)}];let Q=(()=>{class ft{}return ft.\u0275fac=function(Lt){return new(Lt||ft)},ft.\u0275mod=H.oAB({type:ft}),ft.\u0275inj=H.cJS({imports:[[Ae.Bz.forRoot(_e)],Ae.Bz]}),ft})();var Me=N(9646),ae=N(5861),Xe=N(7556),Ue=N(9808);const Kt=function(){return["user"]},bt=function(ft){return{modal:ft}},Gt=function(ft){return{outlets:ft}},mt=function(ft){return[ft]};function Tt(ft,nn){1&ft&&(H.TgZ(0,"li")(1,"a",14),H._uU(2,"Login / Register"),H.qZA()()),2&ft&&(H.xp6(1),H.Q6J("routerLink",H.VKq(6,mt,H.VKq(4,Gt,H.VKq(2,bt,H.DdM(1,Kt))))))}const $t=function(){return{sort:"asc"}};function Mt(ft,nn){if(1&ft){const Lt=H.EpF();H.TgZ(0,"li",7)(1,"a",15),H._uU(2,"Manage"),H.qZA()(),H.TgZ(3,"li",7)(4,"a",16),H._uU(5,"Upload"),H.qZA()(),H.TgZ(6,"li",7)(7,"a",17),H.NdJ("click",function(ur){return H.CHM(Lt),H.oxw().logout(ur)}),H._uU(8,"Logout"),H.qZA()()}2&ft&&(H.xp6(1),H.Q6J("queryParams",H.DdM(1,$t)))}let Ft=(()=>{class ft{constructor(Lt){this.authService=Lt}logout(Lt){var En=this;return(0,ae.Z)(function*(){Lt.preventDefault(),yield En.authService.logout()})()}}return ft.\u0275fac=function(Lt){return new(Lt||ft)(H.Y36(Xe.e))},ft.\u0275cmp=H.Xpm({type:ft,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","about",1,"px-2"],[1,"flex","flex-row","ml-auto"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],[1,"px-2",3,"routerLink"],["routerLink","video/manage",1,"px-2",3,"queryParams"],["routerLink","video/upload","href","javascript:void(0);",1,"px-2"],["href","javascript:void(0);",1,"px-2",3,"click"]],template:function(Lt,En){if(1&Lt&&(H.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),H._uU(3,"Clipit!"),H.qZA(),H.TgZ(4,"div",3)(5,"ul",4),H.YNc(6,Tt,3,8,"li",5),H.ALo(7,"async"),H.YNc(8,Mt,9,2,"ng-template",null,6,H.W1O),H.TgZ(10,"li",7)(11,"a",8),H._uU(12,"About"),H.qZA()()(),H.TgZ(13,"ul",9)(14,"li")(15,"a"),H._UZ(16,"img",10),H.TgZ(17,"span",11),H._uU(18,"English"),H.qZA()()(),H.TgZ(19,"li",12)(20,"a"),H._UZ(21,"img",13),H.TgZ(22,"span",11),H._uU(23,"French"),H.qZA()()()()()()()),2&Lt){const ur=H.MAs(9);H.xp6(6),H.Q6J("ngIf",!1===H.lcZ(7,2,En.authService.isAuthenticated$))("ngIfElse",ur)}},directives:[Ae.yS,Ue.O5,Ae.Od],pipes:[Ue.Ov],styles:[""],changeDetection:0}),ft})(),lt=(()=>{class ft{constructor(){}}return ft.\u0275fac=function(Lt){return new(Lt||ft)},ft.\u0275cmp=H.Xpm({type:ft,selectors:[["app-loading-spinner"]],decls:5,vars:0,consts:[[1,"loadingio-spinner-dual-ring-tosstnkrw7b"],[1,"ldio-stkcctj1ev"]],template:function(Lt,En){1&Lt&&(H.TgZ(0,"div",0)(1,"div",1),H._UZ(2,"div"),H.TgZ(3,"div"),H._UZ(4,"div"),H.qZA()()())},styles:['[_nghost-%COMP%]{display:block;position:fixed;top:0;right:0;width:100vw;height:100vh;background:rgba(82,118,154,.2)}@keyframes ldio-stkcctj1ev{0%{transform:rotate(0)}to{transform:rotate(360deg)}}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box!important}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:144px;height:144px;top:28px;left:28px;border-radius:50%;border:16px solid #000;border-color:#1c4595 transparent #1c4595 transparent;animation:ldio-stkcctj1ev 1s linear infinite}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-color:transparent}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;transform:rotate(45deg)}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:16px;height:16px;top:-16px;left:48px;background:#1c4595;border-radius:50%;box-shadow:0 128px #1c4595}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{left:-16px;top:48px;box-shadow:128px 0 #1c4595}[_nghost-%COMP%]   .loadingio-spinner-dual-ring-tosstnkrw7b[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;display:inline-block;overflow:hidden}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(1);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}'],changeDetection:0}),ft})();function pn(ft,nn){1&ft&&H._UZ(0,"app-loading-spinner")}let tn=(()=>{class ft{constructor(Lt){this.router=Lt,this.title="clipit",this.loading$=(0,Me.of)(!1),this.loading$=this.router.events.pipe((0,le.U)(En=>En instanceof Ae.xV))}}return ft.\u0275fac=function(Lt){return new(Lt||ft)(H.Y36(Ae.F0))},ft.\u0275cmp=H.Xpm({type:ft,selectors:[["app-root"]],decls:5,vars:3,consts:[["name","modal"],[4,"ngIf"]],template:function(Lt,En){1&Lt&&(H._UZ(0,"app-nav")(1,"router-outlet")(2,"router-outlet",0),H.YNc(3,pn,1,0,"app-loading-spinner",1),H.ALo(4,"async")),2&Lt&&(H.xp6(3),H.Q6J("ngIf",H.lcZ(4,1,En.loading$)))},directives:[Ft,Ae.lC,Ue.O5,lt],pipes:[Ue.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),ft})();var yn=N(4466);let qn=(()=>{class ft{}return ft.\u0275fac=function(Lt){return new(Lt||ft)},ft.\u0275mod=H.oAB({type:ft,bootstrap:[tn]}),ft.\u0275inj=H.cJS({providers:[],imports:[[p.b2,Q,pe.hO.initializeApp(Oe_firebase),yn.m,Ce.TE]]}),ft})();(0,H.G48)();let Vn=!1;Y.Z.initializeApp(Oe_firebase),Y.Z.auth().onAuthStateChanged(()=>{Vn||p.q6().bootstrapModule(qn).catch(ft=>console.error(ft)),Vn=!0})},5867:(Pt,ze,N)=>{N.d(ze,{C6:()=>p.getApps,Mq:()=>p.getApp,ZR:()=>p.FirebaseError});var p=N(9681);(0,p.registerVersion)("firebase","9.6.11","app")},127:(Pt,ze,N)=>{N.d(ze,{Z:()=>p.Z});var p=N(3942);p.Z.registerVersion("firebase","9.6.11","app-compat")},820:(Pt,ze,N)=>{N.r(ze);var p=N(5861),H=N(3942),Y=N(2090),ve=N(9681),pe=N(655),Ce=N(1877),Oe=N(4859);const qe=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ht=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ne=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Et=new Ce.Yd("@firebase/auth");function $(g,...c){Et.logLevel<=Ce.in.ERROR&&Et.error(`Auth (${ve.SDK_VERSION}): ${g}`,...c)}function L(g,...c){throw We(g,...c)}function ee(g,...c){return We(g,...c)}function me(g,c,f){const v=Object.assign(Object.assign({},ht()),{[c]:f});return new Y.LL("auth","Firebase",v).create(c,{appName:g.name})}function Ge(g,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&L(g,"argument-error"),me(g,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(g,...c){if("string"!=typeof g){const f=c[0],v=[...c.slice(1)];return v[0]&&(v[0].appName=g.name),g._errorFactory.create(f,...v)}return Ne.create(g,...c)}function Fe(g,c,...f){if(!g)throw We(c,...f)}function _e(g){const c="INTERNAL ASSERTION FAILED: "+g;throw $(c),new Error(c)}function Q(g,c){g||_e(c)}const Me=new Map;function ae(g){Q(g instanceof Function,"Expected a class definition");let c=Me.get(g);return c?(Q(c instanceof g,"Instance stored in cache mismatched with class"),c):(c=new g,Me.set(g,c),c)}function Kt(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function bt(){return"http:"===Gt()||"https:"===Gt()}function Gt(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class $t{constructor(c,f){this.shortDelay=c,this.longDelay=f,Q(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function mt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bt()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mt(g,c){Q(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class Ft{static initialize(c,f,v){this.fetchImpl=c,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},pn=new $t(3e4,6e4);function tn(g,c){return g.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:g.tenantId}):c}function yn(g,c,f,v){return qn.apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(g,c,f,v,V={}){return Vn(g,V,(0,p.Z)(function*(){let X={},ke={};v&&("GET"===c?ke=v:X={body:JSON.stringify(v)});const it=(0,Y.xO)(Object.assign({key:g.config.apiKey},ke)).slice(1),jt=yield g._getAdditionalHeaders();return jt["Content-Type"]="application/json",g.languageCode&&(jt["X-Firebase-Locale"]=g.languageCode),Ft.fetch()(En(g,g.config.apiHost,f,it),Object.assign({method:c,headers:jt,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function Vn(g,c,f){return ft.apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(g,c,f){g._canInitEmulator=!1;const v=Object.assign(Object.assign({},lt),c);try{const V=new ur(g),X=yield Promise.race([f(),V.promise]);V.clearNetworkTimeout();const ke=yield X.json();if("needConfirmation"in ke)throw Un(g,"account-exists-with-different-credential",ke);if(X.ok&&!("errorMessage"in ke))return ke;{const it=X.ok?ke.errorMessage:ke.error.message,[jt,fn]=it.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===jt)throw Un(g,"credential-already-in-use",ke);if("EMAIL_EXISTS"===jt)throw Un(g,"email-already-in-use",ke);const Tn=v[jt]||jt.toLowerCase().replace(/[_\s]+/g,"-");if(fn)throw me(g,Tn,fn);L(g,Tn)}}catch(V){if(V instanceof Y.ZR)throw V;L(g,"network-request-failed")}})).apply(this,arguments)}function nn(g,c,f,v){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,p.Z)(function*(g,c,f,v,V={}){const X=yield yn(g,c,f,v,V);return"mfaPendingCredential"in X&&L(g,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function En(g,c,f,v){const V=`${c}${f}?${v}`;return g.config.emulator?Mt(g.config,V):`${g.config.apiScheme}://${V}`}class ur{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(ee(this.auth,"network-request-failed")),pn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(g,c,f){const v={appName:g.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const V=ee(g,c,v);return V.customData._tokenResponse=f,V}function zt(){return(zt=(0,p.Z)(function*(g,c){return yn(g,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function On(g,c){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(g,c){return yn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Hr(g,c){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(g,c){return yn(g,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function nr(g){if(g)try{const c=new Date(Number(g));if(!isNaN(c.getTime()))return c.toUTCString()}catch(c){}}function ei(){return(ei=(0,p.Z)(function*(g,c=!1){const f=(0,Y.m9)(g),v=yield f.getIdToken(c),V=Nt(v);Fe(V&&V.exp&&V.auth_time&&V.iat,f.auth,"internal-error");const X="object"==typeof V.firebase?V.firebase:void 0,ke=null==X?void 0:X.sign_in_provider;return{claims:V,token:v,authTime:nr(xn(V.auth_time)),issuedAtTime:nr(xn(V.iat)),expirationTime:nr(xn(V.exp)),signInProvider:ke||null,signInSecondFactor:(null==X?void 0:X.sign_in_second_factor)||null}})).apply(this,arguments)}function xn(g){return 1e3*Number(g)}function Nt(g){const[c,f,v]=g.split(".");if(void 0===c||void 0===f||void 0===v)return $("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,Y.tV)(f);return V?JSON.parse(V):($("Failed to decode base64 JWT payload"),null)}catch(V){return $("Caught error parsing JWT payload as JSON",V),null}}function pr(g,c){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,p.Z)(function*(g,c,f=!1){if(f)return c;try{return yield c}catch(v){throw v instanceof Y.ZR&&_n(v)&&g.auth.currentUser===g&&(yield g.auth.signOut()),v}})).apply(this,arguments)}function _n({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class Yn{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const V=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),v)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&c.schedule(!0))}c.schedule()})()}}class Bn{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=nr(this.lastLoginAt),this.creationTime=nr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gr(g){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,p.Z)(function*(g){var c;const f=g.auth,v=yield g.getIdToken(),V=yield pr(g,Hr(f,{idToken:v}));Fe(null==V?void 0:V.users.length,f,"internal-error");const X=V.users[0];g._notifyReloadListener(X);const ke=(null===(c=X.providerUserInfo)||void 0===c?void 0:c.length)?ct(X.providerUserInfo):[],it=Ut(g.providerData,ke),Tn=!!g.isAnonymous&&!(g.email&&X.passwordHash||(null==it?void 0:it.length)),un={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:it,metadata:new Bn(X.createdAt,X.lastLoginAt),isAnonymous:Tn};Object.assign(g,un)})).apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(g){const c=(0,Y.m9)(g);yield gr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Ut(g,c){return[...g.filter(v=>!c.some(V=>V.providerId===v.providerId)),...c]}function ct(g){return g.map(c=>{var{providerId:f}=c,v=(0,pe._T)(c,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Yt(){return(Yt=(0,p.Z)(function*(g,c){const f=yield Vn(g,{},(0,p.Z)(function*(){const v=(0,Y.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:V,apiKey:X}=g.config,ke=En(g,V,"/v1/token",`key=${X}`),it=yield g._getAdditionalHeaders();return it["Content-Type"]="application/x-www-form-urlencoded",Ft.fetch()(ke,{method:"POST",headers:it,body:v})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class In{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Fe(c.idToken,"internal-error"),Fe(void 0!==c.idToken,"internal-error"),Fe(void 0!==c.refreshToken,"internal-error");const f="expiresIn"in c&&void 0!==c.expiresIn?Number(c.expiresIn):function cn(g){const c=Nt(g);return Fe(c,"internal-error"),Fe(void 0!==c.exp,"internal-error"),Fe(void 0!==c.iat,"internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var v=this;return(0,p.Z)(function*(){return Fe(!v.accessToken||v.refreshToken,c,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(c,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var v=this;return(0,p.Z)(function*(){const{accessToken:V,refreshToken:X,expiresIn:ke}=yield function Bt(g,c){return Yt.apply(this,arguments)}(c,f);v.updateTokensAndExpiration(V,X,Number(ke))})()}updateTokensAndExpiration(c,f,v){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(c,f){const{refreshToken:v,accessToken:V,expirationTime:X}=f,ke=new In;return v&&(Fe("string"==typeof v,"internal-error",{appName:c}),ke.refreshToken=v),V&&(Fe("string"==typeof V,"internal-error",{appName:c}),ke.accessToken=V),X&&(Fe("number"==typeof X,"internal-error",{appName:c}),ke.expirationTime=X),ke}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new In,this.toJSON())}_performRefresh(){return _e("not implemented")}}function rn(g,c){Fe("string"==typeof g||void 0===g,"internal-error",{appName:c})}class he{constructor(c){var{uid:f,auth:v,stsTokenManager:V}=c,X=(0,pe._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new Bn(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const v=yield pr(f,f.stsTokenManager.getToken(f.auth,c));return Fe(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(c){return function hi(g){return ei.apply(this,arguments)}(this,c)}reload(){return function lr(g){return wn.apply(this,arguments)}(this)}_assign(c){this!==c&&(Fe(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new he(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var v=this;return(0,p.Z)(function*(){let V=!1;c.idToken&&c.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(c),V=!0),f&&(yield gr(v)),yield v.auth._persistUserIfCurrent(v),V&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield pr(c,function Wt(g,c){return zt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var v,V,X,ke,it,jt,fn,Tn;const un=null!==(v=f.displayName)&&void 0!==v?v:void 0,Si=null!==(V=f.email)&&void 0!==V?V:void 0,po=null!==(X=f.phoneNumber)&&void 0!==X?X:void 0,Ys=null!==(ke=f.photoURL)&&void 0!==ke?ke:void 0,Ol=null!==(it=f.tenantId)&&void 0!==it?it:void 0,Pa=null!==(jt=f._redirectEventId)&&void 0!==jt?jt:void 0,_c=null!==(fn=f.createdAt)&&void 0!==fn?fn:void 0,Lf=null!==(Tn=f.lastLoginAt)&&void 0!==Tn?Tn:void 0,{uid:ka,emailVerified:vc,isAnonymous:ud,providerData:ld,stsTokenManager:Ec}=f;Fe(ka&&Ec,c,"internal-error");const Vf=In.fromJSON(this.name,Ec);Fe("string"==typeof ka,c,"internal-error"),rn(un,c.name),rn(Si,c.name),Fe("boolean"==typeof vc,c,"internal-error"),Fe("boolean"==typeof ud,c,"internal-error"),rn(po,c.name),rn(Ys,c.name),rn(Ol,c.name),rn(Pa,c.name),rn(_c,c.name),rn(Lf,c.name);const cd=new he({uid:ka,auth:c,email:Si,emailVerified:vc,displayName:un,isAnonymous:ud,photoURL:Ys,phoneNumber:po,tenantId:Ol,stsTokenManager:Vf,createdAt:_c,lastLoginAt:Lf});return ld&&Array.isArray(ld)&&(cd.providerData=ld.map(Uf=>Object.assign({},Uf))),Pa&&(cd._redirectEventId=Pa),cd}static _fromIdTokenResponse(c,f,v=!1){return(0,p.Z)(function*(){const V=new In;V.updateFromServerResponse(f);const X=new he({uid:f.localId,auth:c,stsTokenManager:V,isAnonymous:v});return yield gr(X),X})()}}const Ee=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,v){var V=this;return(0,p.Z)(function*(){V.storage[f]=v})()}_get(f){var v=this;return(0,p.Z)(function*(){const V=v.storage[f];return void 0===V?null:V})()}_remove(f){var v=this;return(0,p.Z)(function*(){delete v.storage[f]})()}_addListener(f,v){}_removeListener(f,v){}}return g.type="NONE",g})();function Ze(g,c,f){return`firebase:${g}:${c}:${f}`}class Le{constructor(c,f,v){this.persistence=c,this.auth=f,this.userKey=v;const{config:V,name:X}=this.auth;this.fullUserKey=Ze(this.userKey,V.apiKey,X),this.fullPersistenceKey=Ze("persistence",V.apiKey,X),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?he._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const v=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,v?f.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,v="authUser"){return(0,p.Z)(function*(){if(!f.length)return new Le(ae(Ee),c,v);const V=(yield Promise.all(f.map(function(){var fn=(0,p.Z)(function*(Tn){if(yield Tn._isAvailable())return Tn});return function(Tn){return fn.apply(this,arguments)}}()))).filter(fn=>fn);let X=V[0]||ae(Ee);const ke=Ze(v,c.config.apiKey,c.name);let it=null;for(const fn of f)try{const Tn=yield fn._get(ke);if(Tn){const un=he._fromJSON(c,Tn);fn!==X&&(it=un),X=fn;break}}catch(Tn){}const jt=V.filter(fn=>fn._shouldAllowMigration);return X._shouldAllowMigration&&jt.length?(X=jt[0],it&&(yield X._set(ke,it.toJSON())),yield Promise.all(f.map(function(){var fn=(0,p.Z)(function*(Tn){if(Tn!==X)try{yield Tn._remove(ke)}catch(un){}});return function(Tn){return fn.apply(this,arguments)}}())),new Le(X,c,v)):new Le(X,c,v)})()}}function At(g){const c=g.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(be(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(we(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Ct(c))return"Blackberry";if(Jt(c))return"Webos";if(de(c))return"Safari";if((c.includes("chrome/")||se(c))&&!c.includes("edge/"))return"Chrome";if(rt(c))return"Android";{const v=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function we(g=(0,Y.z$)()){return/firefox\//i.test(g)}function de(g=(0,Y.z$)()){const c=g.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function se(g=(0,Y.z$)()){return/crios\//i.test(g)}function be(g=(0,Y.z$)()){return/iemobile/i.test(g)}function rt(g=(0,Y.z$)()){return/android/i.test(g)}function Ct(g=(0,Y.z$)()){return/blackberry/i.test(g)}function Jt(g=(0,Y.z$)()){return/webos/i.test(g)}function Pn(g=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(g)}function sr(g=(0,Y.z$)()){return Pn(g)||rt(g)||Jt(g)||Ct(g)||/windows phone/i.test(g)||be(g)}function wi(g,c=[]){let f;switch(g){case"Browser":f=At((0,Y.z$)());break;case"Worker":f=`${At((0,Y.z$)())}-${g}`;break;default:f=g}const v=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${ve.SDK_VERSION}/${v}`}class Kr{constructor(c,f,v){this.app=c,this.heartbeatServiceProvider=f,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new en(this),this.idTokenSubscription=new en(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ne,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(c,f){var v=this;return f&&(this._popupRedirectResolver=ae(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var V,X;if(!v._deleted&&(v.persistenceManager=yield Le.create(v,c),!v._deleted)){if(null===(V=v._popupRedirectResolver)||void 0===V?void 0:V._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(ke){}yield v.initializeCurrentUser(f),v.lastNotifiedUid=(null===(X=v.currentUser)||void 0===X?void 0:X.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var v;let V=yield f.assertedPersistence.getCurrentUser();if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const X=null===(v=f.redirectUser)||void 0===v?void 0:v._redirectEventId,ke=null==V?void 0:V._redirectEventId,it=yield f.tryRedirectSignIn(c);(!X||X===ke)&&(null==it?void 0:it.user)&&(V=it.user)}return V?V._redirectEventId?(Fe(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===V._redirectEventId?f.directlySetCurrentUser(V):f.reloadAndSetCurrentUserOrClear(V)):f.reloadAndSetCurrentUserOrClear(V):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let v=null;try{v=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch(V){yield f._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){try{yield gr(c)}catch(v){if("auth/network-request-failed"!==v.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Tt(){if("undefined"==typeof navigator)return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const v=c?(0,Y.m9)(c):null;return v&&Fe(v.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(v&&v._clone(f))})()}_updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){if(!f._deleted)return c&&Fe(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),f.queue((0,p.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(ae(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new Y.LL("auth","Firebase",c())}onAuthStateChanged(c,f,v){return this.registerStateListener(this.authStateSubscription,c,f,v)}onIdTokenChanged(c,f,v){return this.registerStateListener(this.idTokenSubscription,c,f,v)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var v=this;return(0,p.Z)(function*(){const V=yield v.getOrInitRedirectPersistenceManager(f);return null===c?V.removeCurrentUser():V.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const v=c&&ae(c)||f._popupRedirectResolver;Fe(v,f,"argument-error"),f.redirectPersistenceManager=yield Le.create(f,[ae(v._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var v,V;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(v=f._currentUser)||void 0===v?void 0:v._redirectEventId)===c?f._currentUser:(null===(V=f.redirectUser)||void 0===V?void 0:V._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,v,V){if(this._deleted)return()=>{};const X="function"==typeof f?f:f.next.bind(f),ke=this._isInitialized?Promise.resolve():this._initializationPromise;return Fe(ke,this,"internal-error"),ke.then(()=>X(this.currentUser)),"function"==typeof f?c.addObserver(f,v,V):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&(f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh()),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=wi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const v={"X-Client-Version":c.clientVersion};c.app.options.appId&&(v["X-Firebase-gmpid"]=c.app.options.appId);const V=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return V&&(v["X-Firebase-Client"]=V),v})()}}function yt(g){return(0,Y.m9)(g)}class en{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,Y.ne)(f=>this.observer=f)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Dr(g){const c=g.indexOf(":");return c<0?"":g.substr(0,c+1)}function Rr(g){if(!g)return null;const c=Number(g);return isNaN(c)?null:c}class Wn{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return _e("not implemented")}_getIdTokenResponse(c){return _e("not implemented")}_linkToIdToken(c,f){return _e("not implemented")}_getReauthenticationResolver(c){return _e("not implemented")}}function mr(g,c){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,p.Z)(function*(g,c){return yn(g,"POST","/v1/accounts:resetPassword",tn(g,c))})).apply(this,arguments)}function gn(g,c){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,p.Z)(function*(g,c){return yn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ri(g,c){return ns.apply(this,arguments)}function ns(){return(ns=(0,p.Z)(function*(g,c){return yn(g,"POST","/v1/accounts:update",tn(g,c))})).apply(this,arguments)}function Cr(){return(Cr=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:signInWithPassword",tn(g,c))})).apply(this,arguments)}function ri(g,c){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.Z)(function*(g,c){return yn(g,"POST","/v1/accounts:sendOobCode",tn(g,c))})).apply(this,arguments)}function Qn(g,c){return zn.apply(this,arguments)}function zn(){return(zn=(0,p.Z)(function*(g,c){return ri(g,c)})).apply(this,arguments)}function ls(g,c){return ii.apply(this,arguments)}function ii(){return(ii=(0,p.Z)(function*(g,c){return ri(g,c)})).apply(this,arguments)}function Wr(g,c){return fi.apply(this,arguments)}function fi(){return(fi=(0,p.Z)(function*(g,c){return ri(g,c)})).apply(this,arguments)}function Wi(g,c){return yr.apply(this,arguments)}function yr(){return(yr=(0,p.Z)(function*(g,c){return ri(g,c)})).apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:signInWithEmailLink",tn(g,c))})).apply(this,arguments)}function ys(){return(ys=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:signInWithEmailLink",tn(g,c))})).apply(this,arguments)}class _s extends Wn{constructor(c,f,v,V=null){super("password",v),this._email=c,this._password=f,this._tenantId=V}static _fromEmailAndPassword(c,f){return new _s(c,f,"password")}static _fromEmailAndCode(c,f,v=null){return new _s(c,f,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Or(g,c){return Cr.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Cs(g,c){return pi.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:L(c,"internal-error")}})()}_linkToIdToken(c,f){var v=this;return(0,p.Z)(function*(){switch(v.signInMethod){case"password":return gn(c,{idToken:f,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Oi(g,c){return ys.apply(this,arguments)}(c,{idToken:f,email:v._email,oobCode:v._password});default:L(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function jn(g,c){return Os.apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:signInWithIdp",tn(g,c))})).apply(this,arguments)}class Se extends Wn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new Se(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):L("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:v,signInMethod:V}=f,X=(0,pe._T)(f,["providerId","signInMethod"]);if(!v||!V)return null;const ke=new Se(v,V);return ke.idToken=X.idToken||void 0,ke.accessToken=X.accessToken||void 0,ke.secret=X.secret,ke.nonce=X.nonce,ke.pendingToken=X.pendingToken||null,ke}_getIdTokenResponse(c){return jn(c,this.buildRequest())}_linkToIdToken(c,f){const v=this.buildRequest();return v.idToken=f,jn(c,v)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,jn(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,Y.xO)(f)}return c}}function Te(g,c){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,p.Z)(function*(g,c){return yn(g,"POST","/v1/accounts:sendVerificationCode",tn(g,c))})).apply(this,arguments)}function Dt(){return(Dt=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:signInWithPhoneNumber",tn(g,c))})).apply(this,arguments)}function Fn(){return(Fn=(0,p.Z)(function*(g,c){const f=yield nn(g,"POST","/v1/accounts:signInWithPhoneNumber",tn(g,c));if(f.temporaryProof)throw Un(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Pr={USER_NOT_FOUND:"user-not-found"};function Pi(){return(Pi=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:signInWithPhoneNumber",tn(g,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Pr)})).apply(this,arguments)}class Ii extends Wn{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new Ii({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new Ii({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function ot(g,c){return Dt.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function qt(g,c){return Fn.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function $n(g,c){return Pi.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:v,verificationCode:V}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:v,code:V}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:v,phoneNumber:V,temporaryProof:X}=c;return v||f||V||X?new Ii({verificationId:f,verificationCode:v,phoneNumber:V,temporaryProof:X}):null}}class zi{constructor(c){var f,v,V,X,ke,it;const jt=(0,Y.zd)((0,Y.pd)(c)),fn=null!==(f=jt.apiKey)&&void 0!==f?f:null,Tn=null!==(v=jt.oobCode)&&void 0!==v?v:null,un=function ki(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=jt.mode)&&void 0!==V?V:null);Fe(fn&&Tn&&un,"argument-error"),this.apiKey=fn,this.operation=un,this.code=Tn,this.continueUrl=null!==(X=jt.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(ke=jt.languageCode)&&void 0!==ke?ke:null,this.tenantId=null!==(it=jt.tenantId)&&void 0!==it?it:null}static parseLink(c){const f=function vs(g){const c=(0,Y.zd)((0,Y.pd)(g)).link,f=c?(0,Y.zd)((0,Y.pd)(c)).deep_link_id:null,v=(0,Y.zd)((0,Y.pd)(g)).deep_link_id;return(v?(0,Y.zd)((0,Y.pd)(v)).link:null)||v||f||c||g}(c);try{return new zi(f)}catch(v){return null}}}let gi=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,v){return _s._fromEmailAndPassword(f,v)}static credentialWithLink(f,v){const V=zi.parseLink(v);return Fe(V,"argument-error"),_s._fromEmailAndCode(f,V.code,V.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Di{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class br extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class rs extends br{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return Fe("providerId"in f&&"signInMethod"in f,"argument-error"),Se._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Fe(c.idToken||c.accessToken,"argument-error"),Se._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return rs.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return rs.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:V,pendingToken:X,nonce:ke,providerId:it}=c;if(!v&&!V&&!f&&!X||!it)return null;try{return new rs(it)._credential({idToken:f,accessToken:v,nonce:ke,pendingToken:X})}catch(jt){return null}}}let Ki=(()=>{class g extends br{constructor(){super("facebook.com")}static credential(f){return Se._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(v){return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),qi=(()=>{class g extends br{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return Se._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:V}=f;if(!v&&!V)return null;try{return g.credential(v,V)}catch(X){return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),ks=(()=>{class g extends br{constructor(){super("github.com")}static credential(f){return Se._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(v){return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Ni extends Wn{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return jn(c,this.buildRequest())}_linkToIdToken(c,f){const v=this.buildRequest();return v.idToken=f,jn(c,v)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,jn(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:v,signInMethod:V,pendingToken:X}=f;return v&&V&&X&&v===V?new Ni(v,X):null}static _create(c,f){return new Ni(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zr extends Di{constructor(c){Fe(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Zr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Zr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Ni.fromJSON(c);return Fe(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:v}=c;if(!f||!v)return null;try{return Ni._create(v,f)}catch(V){return null}}}let Zi=(()=>{class g extends br{constructor(){super("twitter.com")}static credential(f,v){return Se._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:V}=f;if(!v||!V)return null;try{return g.credential(v,V)}catch(X){return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Ts(g,c){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:signUp",tn(g,c))})).apply(this,arguments)}class Vr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,v,V=!1){return(0,p.Z)(function*(){const X=yield he._fromIdTokenResponse(c,v,V),ke=cs(v);return new Vr({user:X,providerId:ke,_tokenResponse:v,operationType:f})})()}static _forOperation(c,f,v){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(v,!0);const V=cs(v);return new Vr({user:c,providerId:V,_tokenResponse:v,operationType:f})})()}}function cs(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Ss(){return(Ss=(0,p.Z)(function*(g){var c;const f=yt(g);if(yield f._initializationPromise,null===(c=f.currentUser)||void 0===c?void 0:c.isAnonymous)return new Vr({user:f.currentUser,providerId:null,operationType:"signIn"});const v=yield Ts(f,{returnSecureToken:!0}),V=yield Vr._fromIdTokenResponse(f,"signIn",v,!0);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class Yr extends Y.ZR{constructor(c,f,v,V){var X;super(f.code,f.message),this.operationType=v,this.user=V,Object.setPrototypeOf(this,Yr.prototype),this.customData={appName:c.name,tenantId:null!==(X=c.tenantId)&&void 0!==X?X:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(c,f,v,V){return new Yr(c,f,v,V)}}function ss(g,c,f,v){return("reauthenticate"===c?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?Yr._fromErrorAndOperation(g,X,c,v):X})}function di(g){return new Set(g.map(({providerId:c})=>c).filter(c=>!!c))}function Ms(){return(Ms=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g);yield G(!0,f,c);const{providerUserInfo:v}=yield On(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),V=di(v||[]);return f.providerData=f.providerData.filter(X=>V.has(X.providerId)),V.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function cr(g,c){return R.apply(this,arguments)}function R(){return(R=(0,p.Z)(function*(g,c,f=!1){const v=yield pr(g,c._linkToIdToken(g.auth,yield g.getIdToken()),f);return Vr._forOperation(g,"link",v)})).apply(this,arguments)}function G(g,c,f){return x.apply(this,arguments)}function x(){return(x=(0,p.Z)(function*(g,c,f){yield gr(c);const V=!1===g?"provider-already-linked":"no-such-provider";Fe(di(c.providerData).has(f)===g,c.auth,V)})).apply(this,arguments)}function Z(g,c){return fe.apply(this,arguments)}function fe(){return(fe=(0,p.Z)(function*(g,c,f=!1){const{auth:v}=g,V="reauthenticate";try{const X=yield pr(g,ss(v,V,c,g),f);Fe(X.idToken,v,"internal-error");const ke=Nt(X.idToken);Fe(ke,v,"internal-error");const{sub:it}=ke;return Fe(g.uid===it,v,"user-mismatch"),Vr._forOperation(g,V,X)}catch(X){throw"auth/user-not-found"===(null==X?void 0:X.code)&&L(v,"user-mismatch"),X}})).apply(this,arguments)}function Je(g,c){return tt.apply(this,arguments)}function tt(){return(tt=(0,p.Z)(function*(g,c,f=!1){const v="signIn",V=yield ss(g,v,c),X=yield Vr._fromIdTokenResponse(g,v,V);return f||(yield g._updateCurrentUser(X.user)),X})).apply(this,arguments)}function Rt(g,c){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(g,c){return Je(yt(g),c)})).apply(this,arguments)}function Hn(g,c){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g);return yield G(!1,f,c.providerId),cr(f,c)})).apply(this,arguments)}function Sn(g,c){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,p.Z)(function*(g,c){return Z((0,Y.m9)(g),c)})).apply(this,arguments)}function _r(g,c){return vr.apply(this,arguments)}function vr(){return(vr=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:signInWithCustomToken",tn(g,c))})).apply(this,arguments)}function A(){return(A=(0,p.Z)(function*(g,c){const f=yt(g),v=yield _r(f,{token:c,returnSecureToken:!0}),V=yield Vr._fromIdTokenResponse(f,"signIn",v);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class C{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?q._fromServerResponse(c,f):L(c,"internal-error")}}class q extends C{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new q(f)}}function nt(g,c,f){var v;Fe((null===(v=f.url)||void 0===v?void 0:v.length)>0,g,"invalid-continue-uri"),Fe(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Fe(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(Fe(f.android.packageName.length>0,g,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function dr(){return(dr=(0,p.Z)(function*(g,c,f){const v=(0,Y.m9)(g),V={requestType:"PASSWORD_RESET",email:c};f&&nt(v,V,f),yield ls(v,V)})).apply(this,arguments)}function Ci(){return(Ci=(0,p.Z)(function*(g,c,f){yield mr((0,Y.m9)(g),{oobCode:c,newPassword:f})})).apply(this,arguments)}function M(){return(M=(0,p.Z)(function*(g,c){yield Ri((0,Y.m9)(g),{oobCode:c})})).apply(this,arguments)}function O(g,c){return J.apply(this,arguments)}function J(){return(J=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g),v=yield mr(f,{oobCode:c}),V=v.requestType;switch(Fe(V,f,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Fe(v.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Fe(v.mfaInfo,f,"internal-error");default:Fe(v.email,f,"internal-error")}let X=null;return v.mfaInfo&&(X=C._fromServerResponse(yt(f),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:X},operation:V}})).apply(this,arguments)}function xe(){return(xe=(0,p.Z)(function*(g,c){const{data:f}=yield O((0,Y.m9)(g),c);return f.email})).apply(this,arguments)}function pt(){return(pt=(0,p.Z)(function*(g,c,f){const v=yt(g),V=yield Ts(v,{returnSecureToken:!0,email:c,password:f}),X=yield Vr._fromIdTokenResponse(v,"signIn",V);return yield v._updateCurrentUser(X.user),X})).apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(g,c,f){const v=(0,Y.m9)(g),V={requestType:"EMAIL_SIGNIN",email:c};Fe(f.handleCodeInApp,v,"argument-error"),f&&nt(v,V,f),yield Wr(v,V)})).apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(g,c,f){const v=(0,Y.m9)(g),V=gi.credentialWithLink(c,f||Kt());return Fe(V._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Rt(v,V)})).apply(this,arguments)}function Zn(g,c){return tr.apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(g,c){return yn(g,"POST","/v1/accounts:createAuthUri",tn(g,c))})).apply(this,arguments)}function Er(){return(Er=(0,p.Z)(function*(g,c){const v={identifier:c,continueUri:bt()?Kt():"http://localhost"},{signinMethods:V}=yield Zn((0,Y.m9)(g),v);return V||[]})).apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g),V={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};c&&nt(f.auth,V,c);const{email:X}=yield Qn(f.auth,V);X!==g.email&&(yield g.reload())})).apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(g,c,f){const v=(0,Y.m9)(g),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:c};f&&nt(v.auth,X,f);const{email:ke}=yield Wi(v.auth,X);ke!==g.email&&(yield g.reload())})).apply(this,arguments)}function Ir(g,c){return ds.apply(this,arguments)}function ds(){return(ds=(0,p.Z)(function*(g,c){return yn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(g,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const v=(0,Y.m9)(g),X={idToken:yield v.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},ke=yield pr(v,Ir(v.auth,X));v.displayName=ke.displayName||null,v.photoURL=ke.photoUrl||null;const it=v.providerData.find(({providerId:jt})=>"password"===jt);it&&(it.displayName=v.displayName,it.photoURL=v.photoURL),yield v._updateTokensIfNecessary(ke)})).apply(this,arguments)}function Ho(g,c,f){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(g,c,f){const{auth:v}=g,X={idToken:yield g.getIdToken(),returnSecureToken:!0};c&&(X.email=c),f&&(X.password=f);const ke=yield pr(g,gn(v,X));yield g._updateTokensIfNecessary(ke,!0)})).apply(this,arguments)}class $s{constructor(c,f,v={}){this.isNewUser=c,this.providerId=f,this.profile=v}}class Ia extends $s{constructor(c,f,v,V){super(c,f,v),this.username=V}}class Ns extends $s{constructor(c,f){super(c,"facebook.com",f)}}class so extends Ia{constructor(c,f){super(c,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class mu extends $s{constructor(c,f){super(c,"google.com",f)}}class na extends Ia{constructor(c,f,v){super(c,"twitter.com",f,v)}}function bi(g){const{user:c,_tokenResponse:f}=g;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function ta(g){var c,f;if(!g)return null;const{providerId:v}=g,V=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},X=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!v&&(null==g?void 0:g.idToken)){const ke=null===(f=null===(c=Nt(g.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(ke)return new $s(X,"anonymous"!==ke&&"custom"!==ke?ke:null)}if(!v)return null;switch(v){case"facebook.com":return new Ns(X,V);case"github.com":return new so(X,V);case"google.com":return new mu(X,V);case"twitter.com":return new na(X,V,g.screenName||null);case"custom":case"anonymous":return new $s(X,null);default:return new $s(X,v,V)}}(f)}class Qi{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new Qi("enroll",c)}static _fromMfaPendingCredential(c){return new Qi("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,v;if(null==c?void 0:c.multiFactorSession){if(null===(f=c.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return Qi._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null===(v=c.multiFactorSession)||void 0===v?void 0:v.idToken)return Qi._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Hs{constructor(c,f,v){this.session=c,this.hints=f,this.signInResolver=v}static _fromError(c,f){const v=yt(c),V=f.customData._serverResponse,X=(V.mfaInfo||[]).map(it=>C._fromServerResponse(v,it));Fe(V.mfaPendingCredential,v,"internal-error");const ke=Qi._fromMfaPendingCredential(V.mfaPendingCredential);return new Hs(ke,X,function(){var it=(0,p.Z)(function*(jt){const fn=yield jt._process(v,ke);delete V.mfaInfo,delete V.mfaPendingCredential;const Tn=Object.assign(Object.assign({},V),{idToken:fn.idToken,refreshToken:fn.refreshToken});switch(f.operationType){case"signIn":const un=yield Vr._fromIdTokenResponse(v,f.operationType,Tn);return yield v._updateCurrentUser(un.user),un;case"reauthenticate":return Fe(f.user,v,"internal-error"),Vr._forOperation(f.user,f.operationType,Tn);default:L(v,"internal-error")}});return function(jt){return it.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function oi(g,c){return yn(g,"POST","/v2/accounts/mfaEnrollment:start",tn(g,c))}class Es{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>C._fromServerResponse(c.auth,v)))})}static _fromUser(c){return new Es(c)}getSession(){var c=this;return(0,p.Z)(function*(){return Qi._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var v=this;return(0,p.Z)(function*(){const V=c,X=yield v.getSession(),ke=yield pr(v.user,V._process(v.user.auth,X,f));return yield v.user._updateTokensIfNecessary(ke),v.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){const v="string"==typeof c?c:c.uid,V=yield f.user.getIdToken(),X=yield pr(f.user,function Ha(g,c){return yn(g,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(g,c))}(f.user.auth,{idToken:V,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:ke})=>ke!==v),yield f.user._updateTokensIfNecessary(X);try{yield f.user.reload()}catch(ke){if("auth/user-token-expired"!==ke.code)throw ke}})()}}const oo=new WeakMap,xs="__sak";class mo{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(xs,"1"),this.storage.removeItem(xs),Promise.resolve(!0)):Promise.resolve(!1)}catch(c){return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nr=(()=>{class g extends mo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Gs(){const g=(0,Y.z$)();return de(g)||Pn(g)}()&&function wr(){try{return!(!window||window===window.top)}catch(g){return!1}}(),this.fallbackToPolling=sr(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const V=this.storage.getItem(v),X=this.localCache[v];V!==X&&f(v,X,V)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((it,jt,fn)=>{this.notifyListeners(it,fn)});const V=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const it=this.storage.getItem(V);if(f.newValue!==it)null!==f.newValue?this.storage.setItem(V,f.newValue):this.storage.removeItem(V);else if(this.localCache[V]===f.newValue&&!v)return}const X=()=>{const it=this.storage.getItem(V);!v&&this.localCache[V]===it||this.notifyListeners(V,it)},ke=this.storage.getItem(V);!function ir(){return(0,Y.w1)()&&10===document.documentMode}()||ke===f.newValue||f.newValue===f.oldValue?X():setTimeout(X,10)}notifyListeners(f,v){this.localCache[f]=v;const V=this.listeners[f];if(V)for(const X of Array.from(V))X(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var V=()=>super._set,X=this;return(0,p.Z)(function*(){yield V().call(X,f,v),X.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,V=this;return(0,p.Z)(function*(){const X=yield v().call(V,f);return V.localCache[f]=JSON.stringify(X),X})()}_remove(f){var v=()=>super._remove,V=this;return(0,p.Z)(function*(){yield v().call(V,f),delete V.localCache[f]})()}}return g.type="LOCAL",g})(),Ws=(()=>{class g extends mo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return g.type="SESSION",g})();let Go=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const v=this.receivers.find(X=>X.isListeningto(f));if(v)return v;const V=new g(f);return this.receivers.push(V),V}isListeningto(f){return this.eventTarget===f}handleEvent(f){var v=this;return(0,p.Z)(function*(){const V=f,{eventId:X,eventType:ke,data:it}=V.data,jt=v.handlersMap[ke];if(!(null==jt?void 0:jt.size))return;V.ports[0].postMessage({status:"ack",eventId:X,eventType:ke});const fn=Array.from(jt).map(function(){var un=(0,p.Z)(function*(Si){return Si(V.origin,it)});return function(Si){return un.apply(this,arguments)}}()),Tn=yield function yo(g){return Promise.all(g.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(v){return{fulfilled:!1,reason:v}}});return function(f){return c.apply(this,arguments)}}()))}(fn);V.ports[0].postMessage({status:"done",eventId:X,eventType:ke,response:Tn})})()}_subscribe(f,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(v)}_unsubscribe(f,v){this.handlersMap[f]&&v&&this.handlersMap[f].delete(v),(!v||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Wo(g="",c=10){let f="";for(let v=0;v<c;v++)f+=Math.floor(10*Math.random());return g+f}class Ca{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,v=50){var V=this;return(0,p.Z)(function*(){const X="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let ke,it;return new Promise((jt,fn)=>{const Tn=Wo("",20);X.port1.start();const un=setTimeout(()=>{fn(new Error("unsupported_event"))},v);it={messageChannel:X,onMessage(Si){const po=Si;if(po.data.eventId===Tn)switch(po.data.status){case"ack":clearTimeout(un),ke=setTimeout(()=>{fn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ke),jt(po.data.response);break;default:clearTimeout(un),clearTimeout(ke),fn(new Error("invalid_response"))}}},V.handlers.add(it),X.port1.addEventListener("message",it.onMessage),V.target.postMessage({eventType:c,eventId:Tn,data:f},[X.port2])}).finally(()=>{it&&V.removeMessageHandler(it)})})()}}function jr(){return window}function Ls(){return void 0!==jr().WorkerGlobalScope&&"function"==typeof jr().importScripts}function Rs(){return(Rs=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(g){return null}})).apply(this,arguments)}const I="firebaseLocalStorageDb",_="firebaseLocalStorage",S="fbase_key";class F{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function j(g,c){return g.transaction([_],c?"readwrite":"readonly").objectStore(_)}function ye(){const g=indexedDB.open(I,1);return new Promise((c,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const v=g.result;try{v.createObjectStore(_,{keyPath:S})}catch(V){f(V)}}),g.addEventListener("success",(0,p.Z)(function*(){const v=g.result;v.objectStoreNames.contains(_)?c(v):(v.close(),yield function ne(){const g=indexedDB.deleteDatabase(I);return new F(g).toPromise()}(),c(yield ye()))}))})}function at(g,c,f){return st.apply(this,arguments)}function st(){return(st=(0,p.Z)(function*(g,c,f){const v=j(g,!0).put({[S]:c,value:f});return new F(v).toPromise()})).apply(this,arguments)}function hn(){return(hn=(0,p.Z)(function*(g,c){const f=j(g,!1).get(c),v=yield new F(f).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function _t(g,c){const f=j(g,!0).delete(c);return new F(f).toPromise()}const ws=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield ye()),f.db})()}_withRetries(f){var v=this;return(0,p.Z)(function*(){let V=0;for(;;)try{const X=yield v._openDb();return yield f(X)}catch(X){if(V++>3)throw X;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return Ls()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=Go._getInstance(function Eu(){return Ls()?self:null}()),f.receiver._subscribe("keyChanged",function(){var v=(0,p.Z)(function*(V,X){return{keyProcessed:(yield f._poll()).includes(X.key)}});return function(V,X){return v.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var v=(0,p.Z)(function*(V,X){return["keyChanged"]});return function(V,X){return v.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var v,V;if(f.activeServiceWorker=yield function ba(){return Rs.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Ca(f.activeServiceWorker);const X=yield f.sender._send("ping",{},800);!X||(null===(v=X[0])||void 0===v?void 0:v.fulfilled)&&(null===(V=X[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var v=this;return(0,p.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function tc(){var g;return(null===(g=null==navigator?void 0:navigator.serviceWorker)||void 0===g?void 0:g.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:f},v.serviceWorkerReceiverAvailable?800:50)}catch(V){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield ye();return yield at(f,xs,"1"),yield _t(f,xs),!0}catch(f){}return!1})()}_withPendingWrite(f){var v=this;return(0,p.Z)(function*(){v.pendingWrites++;try{yield f()}finally{v.pendingWrites--}})()}_set(f,v){var V=this;return(0,p.Z)(function*(){return V._withPendingWrite((0,p.Z)(function*(){return yield V._withRetries(X=>at(X,f,v)),V.localCache[f]=v,V.notifyServiceWorker(f)}))})()}_get(f){var v=this;return(0,p.Z)(function*(){const V=yield v._withRetries(X=>function Ot(g,c){return hn.apply(this,arguments)}(X,f));return v.localCache[f]=V,V})()}_remove(f){var v=this;return(0,p.Z)(function*(){return v._withPendingWrite((0,p.Z)(function*(){return yield v._withRetries(V=>_t(V,f)),delete v.localCache[f],v.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const v=yield f._withRetries(ke=>{const it=j(ke,!1).getAll();return new F(it).toPromise()});if(!v)return[];if(0!==f.pendingWrites)return[];const V=[],X=new Set;for(const{fbase_key:ke,value:it}of v)X.add(ke),JSON.stringify(f.localCache[ke])!==JSON.stringify(it)&&(f.notifyListeners(ke,it),V.push(ke));for(const ke of Object.keys(f.localCache))f.localCache[ke]&&!X.has(ke)&&(f.notifyListeners(ke,null),V.push(ke));return V})()}notifyListeners(f,v){this.localCache[f]=v;const V=this.listeners[f];if(V)for(const X of Array.from(V))X(v)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function wu(g,c){return yn(g,"POST","/v2/accounts/mfaSignIn:start",tn(g,c))}function vo(){return(vo=(0,p.Z)(function*(g){return(yield yn(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function oa(g){return new Promise((c,f)=>{const v=document.createElement("script");v.setAttribute("src",g),v.onload=c,v.onerror=V=>{const X=ee("internal-error");X.customData=V,f(X)},v.type="text/javascript",v.charset="UTF-8",function nc(){var g,c;return null!==(c=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==c?c:document}().appendChild(v)})}function Du(g){return`__${g}${Math.floor(1e6*Math.random())}`}const ao=1e12;class rc{constructor(c){this.auth=c,this.counter=ao,this._widgets=new Map}render(c,f){const v=this.counter;return this._widgets.set(v,new kn(c,this.auth.name,f||{})),this.counter++,v}reset(c){var f;const v=c||ao;null===(f=this._widgets.get(v))||void 0===f||f.delete(),this._widgets.delete(v)}getResponse(c){var f;return(null===(f=this._widgets.get(c||ao))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var v;return null===(v=f._widgets.get(c||ao))||void 0===v||v.execute(),""})()}}class kn{constructor(c,f,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof c?document.getElementById(c):c;Fe(V,"argument-error",{appName:f}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function uo(g){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<g;v++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const za=Du("rcb"),Fi=new $t(3e4,6e4);class Yc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!jr().grecaptcha}load(c,f=""){return Fe(function Ka(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(jr().grecaptcha):new Promise((v,V)=>{const X=jr().setTimeout(()=>{V(ee(c,"network-request-failed"))},Fi.get());jr()[za]=()=>{jr().clearTimeout(X),delete jr()[za];const it=jr().grecaptcha;if(!it)return void V(ee(c,"internal-error"));const jt=it.render;it.render=(fn,Tn)=>{const un=jt(fn,Tn);return this.counter++,un},this.hostLanguage=f,v(it)},oa(`https://www.google.com/recaptcha/api.js??${(0,Y.xO)({onload:za,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(X),V(ee(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){return!!jr().grecaptcha&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Qc{load(c){return(0,p.Z)(function*(){return new rc(c)})()}clearedOneInstance(){}}const Ta="recaptcha",fr={theme:"light",type:"image"};class zd{constructor(c,f=Object.assign({},fr),v){this.parameters=f,this.type=Ta,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yt(v),this.isInvisible="invisible"===this.parameters.size,Fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof c?document.getElementById(c):c;Fe(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qc:new Yc,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),v=c.getAssertedRecaptcha();return v.getResponse(f)||new Promise(X=>{const ke=it=>{!it||(c.tokenChangeListeners.delete(ke),X(it))};c.tokenChangeListeners.add(ke),c.isInvisible&&v.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Fe(!this.parameters.sitekey,this.auth,"argument-error"),Fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(v=>v(f)),"function"==typeof c)c(f);else if("string"==typeof c){const v=jr()[c];"function"==typeof v&&v(f)}}}assertNotDestroyed(){Fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const v=document.createElement("div");f.appendChild(v),f=v}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){Fe(bt()&&!Ls(),c.auth,"internal-error"),yield function as(){let g=null;return new Promise(c=>{"complete"!==document.readyState?(g=()=>c(),window.addEventListener("load",g)):c()}).catch(c=>{throw g&&window.removeEventListener("load",g),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Iu(g){return vo.apply(this,arguments)}(c.auth);Fe(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return Fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class zs{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=Ii._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Jn(){return(Jn=(0,p.Z)(function*(g,c,f){const v=yt(g),V=yield Ji(v,c,(0,Y.m9)(f));return new zs(V,X=>Rt(v,X))})).apply(this,arguments)}function Vs(){return(Vs=(0,p.Z)(function*(g,c,f){const v=(0,Y.m9)(g);yield G(!1,v,"phone");const V=yield Ji(v.auth,c,(0,Y.m9)(f));return new zs(V,X=>Hn(v,X))})).apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(g,c,f){const v=(0,Y.m9)(g),V=yield Ji(v.auth,c,(0,Y.m9)(f));return new zs(V,X=>Sn(v,X))})).apply(this,arguments)}function Ji(g,c,f){return Us.apply(this,arguments)}function Us(){return(Us=(0,p.Z)(function*(g,c,f){var v;const V=yield f.verify();try{let X;if(Fe("string"==typeof V,g,"argument-error"),Fe(f.type===Ta,g,"argument-error"),X="string"==typeof c?{phoneNumber:c}:c,"session"in X){const ke=X.session;if("phoneNumber"in X)return Fe("enroll"===ke.type,g,"internal-error"),(yield oi(g,{idToken:ke.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{Fe("signin"===ke.type,g,"internal-error");const it=(null===(v=X.multiFactorHint)||void 0===v?void 0:v.uid)||X.multiFactorUid;return Fe(it,g,"missing-multi-factor-info"),(yield wu(g,{mfaPendingCredential:ke.credential,mfaEnrollmentId:it,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ke}=yield Te(g,{phoneNumber:X.phoneNumber,recaptchaToken:V});return ke}}finally{f._reset()}})).apply(this,arguments)}function zo(){return(zo=(0,p.Z)(function*(g,c){yield cr((0,Y.m9)(g),c)})).apply(this,arguments)}let Ui=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=yt(f)}verifyPhoneNumber(f,v){return Ji(this.auth,f,(0,Y.m9)(v))}static credential(f,v){return Ii._fromVerification(f,v)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:V}=f;return v&&V?Ii._fromTokenResponse(v,V):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function hs(g,c){return c?ae(c):(Fe(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Po extends Wn{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return jn(c,this._buildIdpRequest())}_linkToIdToken(c,f){return jn(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return jn(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function Cu(g){return Je(g.auth,new Po(g),g.bypassAuthState)}function Vt(g){const{auth:c,user:f}=g;return Fe(f,c,"internal-error"),Z(f,new Po(g),g.bypassAuthState)}function cl(g){return bu.apply(this,arguments)}function bu(){return(bu=(0,p.Z)(function*(g){const{auth:c,user:f}=g;return Fe(f,c,"internal-error"),cr(f,new Po(g),g.bypassAuthState)})).apply(this,arguments)}class Bi{constructor(c,f,v,V,X=!1){this.auth=c,this.resolver=v,this.user=V,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(v,V){c.pendingPromise={resolve:v,reject:V};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(X){c.reject(X)}});return function(v,V){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:v,sessionId:V,postBody:X,tenantId:ke,error:it,type:jt}=c;if(it)return void f.reject(it);const fn={auth:f.auth,requestUri:v,sessionId:V,tenantId:ke||void 0,postBody:X||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(jt)(fn))}catch(Tn){f.reject(Tn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Cu;case"linkViaPopup":case"linkViaRedirect":return cl;case"reauthViaPopup":case"reauthViaRedirect":return Vt;default:L(this.auth,"internal-error")}}resolve(c){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lo=new $t(2e3,1e4);function ko(){return(ko=(0,p.Z)(function*(g,c,f){const v=yt(g);Ge(g,c,Di);const V=hs(v,f);return new co(v,"signInViaPopup",c,V).executeNotNull()})).apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(g,c,f){const v=(0,Y.m9)(g);Ge(v.auth,c,Di);const V=hs(v.auth,f);return new co(v.auth,"reauthViaPopup",c,V,v).executeNotNull()})).apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(g,c,f){const v=(0,Y.m9)(g);Ge(v.auth,c,Di);const V=hs(v.auth,f);return new co(v.auth,"linkViaPopup",c,V,v).executeNotNull()})).apply(this,arguments)}let co=(()=>{class g extends Bi{constructor(f,v,V,X,ke){super(f,v,X,ke),this.provider=V,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const v=yield f.execute();return Fe(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,p.Z)(function*(){Q(1===f.filter.length,"Popup operations only handle one event");const v=Wo();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(V=>{f.reject(V)}),f.resolver._isIframeWebStorageSupported(f.auth,V=>{V||f.reject(ee(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,V;this.pollId=(null===(V=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===V?void 0:V.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,lo.get())};f()}}return g.currentPopupAction=null,g})();const Ks=new Map;class Tu extends Bi{constructor(c,f,v=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let v=Ks.get(f.auth._key());if(!v){try{const X=(yield function Sa(g,c){return ua.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;v=()=>Promise.resolve(X)}catch(V){v=()=>Promise.reject(V)}Ks.set(f.auth._key(),v)}return f.bypassAuthState||Ks.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,v=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(v,c);if("unknown"!==c.type){if(c.eventId){const V=yield v.auth._redirectUserForId(c.eventId);if(V)return v.user=V,f().call(v,c);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ua(){return(ua=(0,p.Z)(function*(g,c){const f=P(c),v=T(g);if(!(yield v._isAvailable()))return!1;const V="true"===(yield v._get(f));return yield v._remove(f),V})).apply(this,arguments)}function qo(g,c){return Za.apply(this,arguments)}function Za(){return(Za=(0,p.Z)(function*(g,c){return T(g)._set(P(c),"true")})).apply(this,arguments)}function T(g){return ae(g._redirectPersistence)}function P(g){return Ze("pendingRedirect",g.config.apiKey,g.name)}function Pe(){return(Pe=(0,p.Z)(function*(g,c,f){const v=yt(g);Ge(g,c,Di);const V=hs(v,f);return yield qo(V,v),V._openRedirect(v,c,"signInViaRedirect")})).apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(g,c,f){const v=(0,Y.m9)(g);Ge(v.auth,c,Di);const V=hs(v.auth,f);yield qo(V,v.auth);const X=yield Ya(v);return V._openRedirect(v.auth,c,"reauthViaRedirect",X)})).apply(this,arguments)}function or(){return(or=(0,p.Z)(function*(g,c,f){const v=(0,Y.m9)(g);Ge(v.auth,c,Di);const V=hs(v.auth,f);yield G(!1,v,c.providerId),yield qo(V,v.auth);const X=yield Ya(v);return V._openRedirect(v.auth,c,"linkViaRedirect",X)})).apply(this,arguments)}function zr(){return(zr=(0,p.Z)(function*(g,c){return yield yt(g)._initializationPromise,Li(g,c,!1)})).apply(this,arguments)}function Li(g,c){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,p.Z)(function*(g,c,f=!1){const v=yt(g),V=hs(v,c),ke=yield new Tu(v,V,f).execute();return ke&&!f&&(delete ke.user._redirectEventId,yield v._persistUserIfCurrent(ke.user),yield v._setRedirectUser(null,c)),ke})).apply(this,arguments)}function Ya(g){return fs.apply(this,arguments)}function fs(){return(fs=(0,p.Z)(function*(g){const c=Wo(`${g.uid}:::`);return g._redirectEventId=c,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),c})).apply(this,arguments)}class qs{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(c,v)&&(f=!0,this.sendToConsumer(c,v),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Xc(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fl(g);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var v;if(c.error&&!fl(c)){const V=(null===(v=c.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(ee(this.auth,V))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const v=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&v}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wo(c))}saveEventToCache(c){this.cachedEventUids.add(wo(c)),this.lastProcessedEventTime=Date.now()}}function wo(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(c=>c).join("-")}function fl({type:g,error:c}){return"unknown"===g&&"auth/no-auth-event"===(null==c?void 0:c.code)}function pl(g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,p.Z)(function*(g,c={}){return yn(g,"GET","/v1/projects",c)})).apply(this,arguments)}const qd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mf=/^https?/;function la(){return(la=(0,p.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:c}=yield pl(g);for(const f of c)try{if(gl(f))return}catch(v){}L(g,"unauthorized-domain")})).apply(this,arguments)}function gl(g){const c=Kt(),{protocol:f,hostname:v}=new URL(c);if(g.startsWith("chrome-extension://")){const ke=new URL(g);return""===ke.hostname&&""===v?"chrome-extension:"===f&&g.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&ke.hostname===v}if(!Mf.test(f))return!1;if(qd.test(g))return v===g;const V=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(v)}const Rf=new $t(3e4,6e4);function Of(){const g=jr().___jsl;if(null==g?void 0:g.H)for(const c of Object.keys(g.H))if(g.H[c].r=g.H[c].r||[],g.H[c].L=g.H[c].L||[],g.H[c].r=[...g.H[c].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Lo=null;function ml(g){return Lo=Lo||function Zd(g){return new Promise((c,f)=>{var v,V,X;function ke(){Of(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Of(),f(ee(g,"network-request-failed"))},timeout:Rf.get()})}if(null===(V=null===(v=jr().gapi)||void 0===v?void 0:v.iframes)||void 0===V?void 0:V.Iframe)c(gapi.iframes.getContext());else{if(!(null===(X=jr().gapi)||void 0===X?void 0:X.load)){const it=Du("iframefcb");return jr()[it]=()=>{gapi.load?ke():f(ee(g,"network-request-failed"))},oa(`https://apis.google.com/js/api.js?onload=${it}`).catch(jt=>f(jt))}ke()}}).catch(c=>{throw Lo=null,c})}(g),Lo}const Pf=new $t(5e3,15e3),Io={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ic=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vo(g){const c=g.config;Fe(c.authDomain,g,"auth-domain-config-required");const f=c.emulator?Mt(c,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,v={apiKey:c.apiKey,appName:g.name,v:ve.SDK_VERSION},V=ic.get(g.config.apiHost);V&&(v.eid=V);const X=g._getFrameworks();return X.length&&(v.fw=X.join(",")),`${f}?${(0,Y.xO)(v).slice(1)}`}function Au(){return Au=(0,p.Z)(function*(g){const c=yield ml(g),f=jr().gapi;return Fe(f,g,"internal-error"),c.open({where:document.body,url:Vo(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Io,dontclear:!0},v=>new Promise(function(){var V=(0,p.Z)(function*(X,ke){yield v.restyle({setHideOnLeave:!1});const it=ee(g,"network-request-failed"),jt=jr().setTimeout(()=>{ke(it)},Pf.get());function fn(){jr().clearTimeout(jt),X(v)}v.ping(fn).then(fn,()=>{ke(it)})});return function(X,ke){return V.apply(this,arguments)}}()))}),Au.apply(this,arguments)}const Xd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oc{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(c){}}}function ac(g,c,f,v,V,X){Fe(g.config.authDomain,g,"auth-domain-config-required"),Fe(g.config.apiKey,g,"invalid-api-key");const ke={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:v,v:ve.SDK_VERSION,eventId:V};if(c instanceof Di){c.setDefaultLanguage(g.languageCode),ke.providerId=c.providerId||"",(0,Y.xb)(c.getCustomParameters())||(ke.customParameters=JSON.stringify(c.getCustomParameters()));for(const[jt,fn]of Object.entries(X||{}))ke[jt]=fn}if(c instanceof br){const jt=c.getScopes().filter(fn=>""!==fn);jt.length>0&&(ke.scopes=jt.join(","))}g.tenantId&&(ke.tid=g.tenantId);const it=ke;for(const jt of Object.keys(it))void 0===it[jt]&&delete it[jt];return`${function eh({config:g}){return g.emulator?Mt(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,Y.xO)(it).slice(1)}`}const Bo="webStorageSupport";class Mu extends class th{constructor(c){this.factorId=c}_process(c,f,v){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,v);case"signin":return this._finalizeSignIn(c,f.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Mu(c)}_finalizeEnroll(c,f,v){return function ia(g,c){return yn(g,"POST","/v2/accounts/mfaEnrollment:finalize",tn(g,c))}(c,{idToken:f,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function _o(g,c){return yn(g,"POST","/v2/accounts/mfaSignIn:finalize",tn(g,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kf=(()=>{class g{constructor(){}static assertion(f){return Mu._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var nh="@firebase/auth",td="0.19.12";class Ja{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(v=>{var V;c((null===(V=v)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xa(){return window}function Ra(){return(Ra=(0,p.Z)(function*(g,c,f){var v;const{BuildInfo:V}=xa();Q(c.sessionId,"AuthEvent did not contain a session ID");const X=yield xg(c.sessionId),ke={};return Pn()?ke.ibi=V.packageName:rt()?ke.apn=V.packageName:L(g,"operation-not-supported-in-this-environment"),V.displayName&&(ke.appDisplayName=V.displayName),ke.sessionId=X,ac(g,f,c.type,void 0,null!==(v=c.eventId)&&void 0!==v?v:void 0,ke)})).apply(this,arguments)}function Do(){return(Do=(0,p.Z)(function*(g){const{BuildInfo:c}=xa(),f={};Pn()?f.iosBundleId=c.packageName:rt()?f.androidPackageName=c.packageName:L(g,"operation-not-supported-in-this-environment"),yield pl(g,f)})).apply(this,arguments)}function tu(){return(tu=(0,p.Z)(function*(g,c,f){const{cordova:v}=xa();let V=()=>{};try{yield new Promise((X,ke)=>{let it=null;function jt(){var un;X();const Si=null===(un=v.plugins.browsertab)||void 0===un?void 0:un.close;"function"==typeof Si&&Si(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function fn(){it||(it=window.setTimeout(()=>{ke(ee(g,"redirect-cancelled-by-user"))},2e3))}function Tn(){"visible"===(null==document?void 0:document.visibilityState)&&fn()}c.addPassiveListener(jt),document.addEventListener("resume",fn,!1),rt()&&document.addEventListener("visibilitychange",Tn,!1),V=()=>{c.removePassiveListener(jt),document.removeEventListener("resume",fn,!1),document.removeEventListener("visibilitychange",Tn,!1),it&&window.clearTimeout(it)}})}finally{V()}})).apply(this,arguments)}function xg(g){return lc.apply(this,arguments)}function lc(){return(lc=(0,p.Z)(function*(g){const c=Rg(g),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Rg(g){if(Q(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(g);const c=new ArrayBuffer(g.length),f=new Uint8Array(c);for(let v=0;v<g.length;v++)f[v]=g.charCodeAt(v);return f}!function rh(g){(0,ve._registerComponent)(new Oe.wA("auth",(c,{options:f})=>{const v=c.getProvider("app").getImmediate(),V=c.getProvider("heartbeat"),{apiKey:X,authDomain:ke}=v.options;return((it,jt)=>{Fe(X&&!X.includes(":"),"invalid-api-key",{appName:it.name}),Fe(!(null==ke?void 0:ke.includes(":")),"argument-error",{appName:it.name});const fn={apiKey:X,authDomain:ke,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wi(g)},Tn=new Kr(it,jt,fn);return function Ue(g,c){const f=(null==c?void 0:c.persistence)||[],v=(Array.isArray(f)?f:[f]).map(ae);(null==c?void 0:c.errorMap)&&g._updateErrorMap(c.errorMap),g._initializeWithPersistence(v,null==c?void 0:c.popupRedirectResolver)}(Tn,f),Tn})(v,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,v)=>{c.getProvider("auth-internal").initialize()})),(0,ve._registerComponent)(new Oe.wA("auth-internal",c=>{const f=yt(c.getProvider("auth").getImmediate());return new Ja(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ve.registerVersion)(nh,td,function eu(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,ve.registerVersion)(nh,td,"esm2017")}("Browser");class dc extends qs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function sh(g){return wl.apply(this,arguments)}function wl(){return(wl=(0,p.Z)(function*(g){const c=yield Dl()._get(nd(g));return c&&(yield Dl()._remove(nd(g))),c})).apply(this,arguments)}function Il(){const g=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const v=Math.floor(Math.random()*c.length);g.push(c.charAt(v))}return g.join("")}function Dl(){return ae(Nr)}function nd(g){return Ze("authEvent",g.config.apiKey,g.name)}function Pu(g){if(!(null==g?void 0:g.includes("?")))return{};const[c,...f]=g.split("?");return(0,Y.zd)(f.join("?"))}function Cl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ee("no-auth-event")}}function fc(){var g;return(null===(g=null==self?void 0:self.location)||void 0===g?void 0:g.protocol)||null}function ah(g=(0,Y.z$)()){return!("file:"!==fc()&&"ionic:"!==fc()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ln(){try{const g=self.localStorage,c=Wo();if(g)return g.setItem(c,"1"),g.removeItem(c),!function bl(g=(0,Y.z$)()){return function pc(){return(0,Y.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Og(g=(0,Y.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,Y.hl)()}catch(g){return Tl()&&(0,Y.hl)()}return!1}function Tl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ru(){return(function Co(){return"http:"===fc()||"https:"===fc()}()||(0,Y.ru)()||ah())&&!function id(){return(0,Y.b$)()||(0,Y.UG)()}()&&Ln()&&!Tl()}function iu(){return ah()&&"undefined"!=typeof document}function Zo(){return(Zo=(0,p.Z)(function*(){return!!iu()&&new Promise(g=>{const c=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),g(!0)})})})).apply(this,arguments)}const Zs={LOCAL:"local",NONE:"none",SESSION:"session"},Nu=Fe,sd="persistence";function Al(g){return od.apply(this,arguments)}function od(){return(od=(0,p.Z)(function*(g){yield g._initializationPromise;const c=ch(),f=Ze(sd,g.config.apiKey,g.name);c&&c.setItem(f,g._getPersistence())})).apply(this,arguments)}function ch(){var g;try{return(null===(g=function gc(){return"undefined"!=typeof window?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch(c){return null}}const Sl=Fe;class jo{constructor(){this.browserResolver=ae(class Xa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=Li}_openPopup(c,f,v,V){var X=this;return(0,p.Z)(function*(){var ke;Q(null===(ke=X.eventManagers[c._key()])||void 0===ke?void 0:ke.manager,"_initialize() not called before _openPopup()");const it=ac(c,f,v,Kt(),V);return function Uo(g,c,f,v=500,V=600){const X=Math.max((window.screen.availHeight-V)/2,0).toString(),ke=Math.max((window.screen.availWidth-v)/2,0).toString();let it="";const jt=Object.assign(Object.assign({},Xd),{width:v.toString(),height:V.toString(),top:X,left:ke}),fn=(0,Y.z$)().toLowerCase();f&&(it=se(fn)?"_blank":f),we(fn)&&(c=c||"http://localhost",jt.scrollbars="yes");const Tn=Object.entries(jt).reduce((Si,[po,Ys])=>`${Si}${po}=${Ys},`,"");if(function ti(g=(0,Y.z$)()){var c;return Pn(g)&&!!(null===(c=window.navigator)||void 0===c?void 0:c.standalone)}(fn)&&"_self"!==it)return function Jd(g,c){const f=document.createElement("a");f.href=g,f.target=c;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(c||"",it),new oc(null);const un=window.open(c||"",it,Tn);Fe(un,g,"popup-blocked");try{un.focus()}catch(Si){}return new oc(un)}(c,it,Wo())})()}_openRedirect(c,f,v,V){var X=this;return(0,p.Z)(function*(){return yield X._originValidation(c),function Wa(g){jr().location.href=g}(ac(c,f,v,Kt(),V)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:V,promise:X}=this.eventManagers[f];return V?Promise.resolve(V):(Q(X,"If manager is not set, promise should be"),X)}const v=this.initAndGetManager(c);return this.eventManagers[f]={promise:v},v.catch(()=>{delete this.eventManagers[f]}),v}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const v=yield function sc(g){return Au.apply(this,arguments)}(c),V=new qs(c);return v.register("authEvent",X=>(Fe(null==X?void 0:X.authEvent,c,"invalid-auth-event"),{status:V.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:V},f.iframes[c._key()]=v,V})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(Bo,{type:Bo},V=>{var X;const ke=null===(X=null==V?void 0:V[0])||void 0===X?void 0:X[Bo];void 0!==ke&&f(!!ke),L(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function xf(g){return la.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return sr()||de()||Pn()}}),this.cordovaResolver=ae(class Oa{constructor(){this._redirectPersistence=Ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Li}_initialize(c){var f=this;return(0,p.Z)(function*(){const v=c._key();let V=f.eventManagers.get(v);return V||(V=new dc(c),f.eventManagers.set(v,V),f.attachCallbackListeners(c,V)),V})()}_openPopup(c){L(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,v,V){var X=this;return(0,p.Z)(function*(){!function El(g){var c,f,v,V,X,ke,it,jt,fn,Tn;const un=xa();Fe("function"==typeof(null===(c=null==un?void 0:un.universalLinks)||void 0===c?void 0:c.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Fe(void 0!==(null===(f=null==un?void 0:un.BuildInfo)||void 0===f?void 0:f.packageName),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Fe("function"==typeof(null===(X=null===(V=null===(v=null==un?void 0:un.cordova)||void 0===v?void 0:v.plugins)||void 0===V?void 0:V.browsertab)||void 0===X?void 0:X.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Fe("function"==typeof(null===(jt=null===(it=null===(ke=null==un?void 0:un.cordova)||void 0===ke?void 0:ke.plugins)||void 0===it?void 0:it.browsertab)||void 0===jt?void 0:jt.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Fe("function"==typeof(null===(Tn=null===(fn=null==un?void 0:un.cordova)||void 0===fn?void 0:fn.InAppBrowser)||void 0===Tn?void 0:Tn.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const ke=yield X._initialize(c);yield ke.initialized(),ke.resetRedirect(),function hl(){Ks.clear()}(),yield X._originValidation(c);const it=function nu(g,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:Il(),postBody:null,tenantId:g.tenantId,error:ee(g,"no-auth-event")}}(c,v,V);yield function Ou(g,c){return Dl()._set(nd(g),c)}(c,it);const jt=yield function ih(g,c,f){return Ra.apply(this,arguments)}(c,it,f),fn=yield function vl(g){const{cordova:c}=xa();return new Promise(f=>{c.plugins.browsertab.isAvailable(v=>{let V=null;v?c.plugins.browsertab.openUrl(g):V=c.InAppBrowser.open(g,function rr(g=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(V)})})}(jt);return function ji(g,c,f){return tu.apply(this,arguments)}(c,ke,fn)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Ru(g){return Do.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:v,handleOpenURL:V,BuildInfo:X}=xa(),ke=setTimeout((0,p.Z)(function*(){yield sh(c),f.onEvent(Cl())}),500),it=function(){var Tn=(0,p.Z)(function*(un){clearTimeout(ke);const Si=yield sh(c);let po=null;Si&&(null==un?void 0:un.url)&&(po=function oh(g,c){var f,v;const V=function ar(g){const c=Pu(g),f=c.link?decodeURIComponent(c.link):void 0,v=Pu(f).link,V=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Pu(V).link||V||v||f||g}(c);if(V.includes("/__/auth/callback")){const X=Pu(V),ke=X.firebaseError?function $i(g){try{return JSON.parse(g)}catch(c){return null}}(decodeURIComponent(X.firebaseError)):null,it=null===(v=null===(f=null==ke?void 0:ke.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],jt=it?ee(it):null;return jt?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:jt,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:V,postBody:null}}return null}(Si,un.url)),f.onEvent(po||Cl())});return function(Si){return Tn.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,it);const jt=V,fn=`${X.packageName.toLowerCase()}://`;xa().handleOpenURL=function(){var Tn=(0,p.Z)(function*(un){if(un.toLowerCase().startsWith(fn)&&it({url:un}),"function"==typeof jt)try{jt(un)}catch(Si){console.error(Si)}});return function(un){return Tn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ws,this._completeRedirectFn=Li}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,v,V){var X=this;return(0,p.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openPopup(c,f,v,V)})()}_openRedirect(c,f,v,V){var X=this;return(0,p.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openRedirect(c,f,v,V)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return iu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function es(){return Zo.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function dh(g){return g.unwrap()}function Ml(g){return Fu(g)}function Fu(g){const{_tokenResponse:c}=g instanceof Y.ZR?g.customData:g;if(!c)return null;if(!(g instanceof Y.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Ui.credentialFromResult(g);const f=c.providerId;if(!f||"password"===f)return null;let v;switch(f){case"google.com":v=qi;break;case"facebook.com":v=Ki;break;case"github.com":v=ks;break;case"twitter.com":v=Zi;break;default:const{oauthIdToken:V,oauthAccessToken:X,oauthTokenSecret:ke,pendingToken:it,nonce:jt}=c;return X||ke||V||it?it?f.startsWith("saml.")?Ni._create(f,it):Se._fromParams({providerId:f,signInMethod:f,pendingToken:it,idToken:V,accessToken:X}):new rs(f).credential({idToken:V,accessToken:X,rawNonce:jt}):null}return g instanceof Y.ZR?v.credentialFromError(g):v.credentialFromResult(g)}function ai(g,c){return c.catch(f=>{throw f instanceof Y.ZR&&function hh(g,c){var f;const v=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===c.code)c.resolver=new Rl(g,function Fs(g,c){var f;const v=(0,Y.m9)(g),V=c;return Fe(c.customData.operationType,v,"argument-error"),Fe(null===(f=V.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),Hs._fromError(v,V)}(g,c));else if(v){const V=Fu(c),X=c;V&&(X.credential=V,X.tenantId=v.tenantId||void 0,X.email=v.email||void 0,X.phoneNumber=v.phoneNumber||void 0)}}(g,f),f}).then(f=>{const V=f.user;return{operationType:f.operationType,credential:Ml(f),additionalUserInfo:bi(f),user:Yo.getOrCreate(V)}})}function xl(g,c){return mc.apply(this,arguments)}function mc(){return(mc=(0,p.Z)(function*(g,c){const f=yield c;return{verificationId:f.verificationId,confirm:v=>ai(g,f.confirm(v))}})).apply(this,arguments)}class Rl{constructor(c,f){this.resolver=f,this.auth=function ps(g){return g.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return ai(dh(this.auth),this.resolver.resolveSignIn(c))}}class Yo{constructor(c){this._delegate=c,this.multiFactor=function sa(g){const c=(0,Y.m9)(g);return oo.has(c)||oo.set(c,Es._fromUser(c)),oo.get(c)}(c)}static getOrCreate(c){return Yo.USER_MAP.has(c)||Yo.USER_MAP.set(c,new Yo(c)),Yo.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return ai(f.auth,Hn(f._delegate,c))})()}linkWithPhoneNumber(c,f){var v=this;return(0,p.Z)(function*(){return xl(v.auth,function ll(g,c,f){return Vs.apply(this,arguments)}(v._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return ai(f.auth,function dl(g,c,f){return Fo.apply(this,arguments)}(f._delegate,c,jo))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Al(yt(f.auth)),function dn(g,c,f){return function bn(g,c,f){return or.apply(this,arguments)}(g,c,f)}(f._delegate,c,jo)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return ai(f.auth,Sn(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return xl(this.auth,function Ai(g,c,f){return Oo.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return ai(this.auth,function Ko(g,c,f){return No.apply(this,arguments)}(this._delegate,c,jo))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Al(yt(f.auth)),function Qe(g,c,f){return function St(g,c,f){return Xt.apply(this,arguments)}(g,c,f)}(f._delegate,c,jo)})()}sendEmailVerification(c){return function Qr(g,c){return Yi.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function mi(g,c){return Ms.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function Mo(g,c){return Ho((0,Y.m9)(g),c,null)}(this._delegate,c)}updatePassword(c){return function $a(g,c){return Ho((0,Y.m9)(g),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Aa(g,c){return zo.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function io(g,c){return js.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Br(g,c,f){return Xr.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yo.USER_MAP=new WeakMap;const Lu=Fe;let yc=(()=>{class g{constructor(f,v){if(this.app=f,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=f.options;Lu(V,"invalid-api-key",{appName:f.name}),Lu(V,"invalid-api-key",{appName:f.name});const X="undefined"!=typeof window?jo:void 0;this._delegate=v.initialize({options:{persistence:Nf(V,f.name),popupRedirectResolver:X}}),this._delegate._updateErrorMap(qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,v){!function vn(g,c,f){const v=yt(g);Fe(v._canInitEmulator,v,"emulator-config-failed"),Fe(/^https?:\/\//.test(c),v,"invalid-emulator-scheme");const V=!!(null==f?void 0:f.disableWarnings),X=Dr(c),{host:ke,port:it}=function ni(g){const c=Dr(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(c.length));if(!f)return{host:"",port:null};const v=f[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(v);if(V){const X=V[1];return{host:X,port:Rr(v.substr(X.length+1))}}{const[X,ke]=v.split(":");return{host:X,port:Rr(ke)}}}(c);v.config.emulator={url:`${X}//${ke}${null===it?"":`:${it}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:ke,port:it,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function ci(){function g(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,v)}applyActionCode(f){return function ro(g,c){return M.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return O(this._delegate,f)}confirmPasswordReset(f,v){return function os(g,c,f){return Ci.apply(this,arguments)}(this._delegate,f,v)}createUserWithEmailAndPassword(f,v){var V=this;return(0,p.Z)(function*(){return ai(V._delegate,function Ye(g,c,f){return pt.apply(this,arguments)}(V._delegate,f,v))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function yi(g,c){return Er.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Kn(g,c){const f=zi.parseLink(c);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Lu(ru(),f._delegate,"operation-not-supported-in-this-environment");const v=yield function Nn(g,c){return zr.apply(this,arguments)}(f._delegate,jo);return v?ai(f._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Is(g,c){yt(g)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,v,V){const{next:X,error:ke,complete:it}=fh(f,v,V);return this._delegate.onAuthStateChanged(X,ke,it)}onIdTokenChanged(f,v,V){const{next:X,error:ke,complete:it}=fh(f,v,V);return this._delegate.onIdTokenChanged(X,ke,it)}sendSignInLinkToEmail(f,v){return function Ht(g,c,f){return Dn.apply(this,arguments)}(this._delegate,f,v)}sendPasswordResetEmail(f,v){return function on(g,c,f){return dr.apply(this,arguments)}(this._delegate,f,v||void 0)}setPersistence(f){var v=this;return(0,p.Z)(function*(){let V;switch(function uh(g,c){Nu(Object.values(Zs).includes(c),g,"invalid-persistence-type"),(0,Y.b$)()?Nu(c!==Zs.SESSION,g,"unsupported-persistence-type"):(0,Y.UG)()?Nu(c===Zs.NONE,g,"unsupported-persistence-type"):Tl()?Nu(c===Zs.NONE||c===Zs.LOCAL&&(0,Y.hl)(),g,"unsupported-persistence-type"):Nu(c===Zs.NONE||Ln(),g,"unsupported-persistence-type")}(v._delegate,f),f){case Zs.SESSION:V=Ws;break;case Zs.LOCAL:V=(yield ae(ws)._isAvailable())?ws:Nr;break;case Zs.NONE:V=Ee;break;default:return L("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return ai(this._delegate,function As(g){return Ss.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return ai(this._delegate,Rt(this._delegate,f))}signInWithCustomToken(f){return ai(this._delegate,function k(g,c){return A.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,v){return ai(this._delegate,function sn(g,c,f){return Rt((0,Y.m9)(g),gi.credential(c,f))}(this._delegate,f,v))}signInWithEmailLink(f,v){return ai(this._delegate,function kr(g,c,f){return hr.apply(this,arguments)}(this._delegate,f,v))}signInWithPhoneNumber(f,v){return xl(this._delegate,function Kd(g,c,f){return Jn.apply(this,arguments)}(this._delegate,f,v))}signInWithPopup(f){var v=this;return(0,p.Z)(function*(){return Lu(ru(),v._delegate,"operation-not-supported-in-this-environment"),ai(v._delegate,function Eo(g,c,f){return ko.apply(this,arguments)}(v._delegate,f,jo))})()}signInWithRedirect(f){var v=this;return(0,p.Z)(function*(){return Lu(ru(),v._delegate,"operation-not-supported-in-this-environment"),yield Al(v._delegate),function K(g,c,f){return function ce(g,c,f){return Pe.apply(this,arguments)}(g,c,f)}(v._delegate,f,jo)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function oe(g,c){return xe.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Zs,g})();function fh(g,c,f){let v=g;"function"!=typeof g&&({next:v,error:c,complete:f}=g);const V=v;return{next:ke=>V(ke&&Yo.getOrCreate(ke)),error:c,complete:f}}function Nf(g,c){const f=function lh(g,c){const f=ch();if(!f)return[];const v=Ze(sd,g,c);switch(f.getItem(v)){case Zs.NONE:return[Ee];case Zs.LOCAL:return[ws,Ws];case Zs.SESSION:return[Ws];default:return[]}}(g,c);if("undefined"!=typeof self&&!f.includes(ws)&&f.push(ws),"undefined"!=typeof window)for(const v of[Nr,Ws])f.includes(v)||f.push(v);return f.includes(Ee)||f.push(Ee),f}class su{constructor(){this.providerId="phone",this._delegate=new Ui(dh(H.Z.auth()))}static credential(c,f){return Ui.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}su.PHONE_SIGN_IN_METHOD=Ui.PHONE_SIGN_IN_METHOD,su.PROVIDER_ID=Ui.PROVIDER_ID;const ad=Fe;class Ff{constructor(c,f,v=H.Z.app()){var V;ad(null===(V=v.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new zd(c,f,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function gh(g){g.INTERNAL.registerComponent(new Oe.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),v=c.getProvider("auth");return new yc(f,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:gi,FacebookAuthProvider:Ki,GithubAuthProvider:ks,GoogleAuthProvider:qi,OAuthProvider:rs,SAMLAuthProvider:Zr,PhoneAuthProvider:su,PhoneMultiFactorGenerator:kf,RecaptchaVerifier:Ff,TwitterAuthProvider:Zi,Auth:yc,AuthCredential:Wn,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.12")}(H.Z)},1135:(Pt,ze,N)=>{N.d(ze,{X:()=>H});var p=N(7579);class H extends p.x{constructor(ve){super(),this._value=ve}get value(){return this.getValue()}_subscribe(ve){const pe=super._subscribe(ve);return!pe.closed&&ve.next(this._value),pe}getValue(){const{hasError:ve,thrownError:pe,_value:Ce}=this;if(ve)throw pe;return this._throwIfClosed(),Ce}next(ve){super.next(this._value=ve)}}},9751:(Pt,ze,N)=>{N.d(ze,{y:()=>Ae});var p=N(930),H=N(727),Y=N(8822),ve=N(9635),pe=N(2416),Ce=N(576),Oe=N(2806);let Ae=(()=>{class ge{constructor(je){je&&(this._subscribe=je)}lift(je){const qe=new ge;return qe.source=this,qe.operator=je,qe}subscribe(je,qe,ht){const Ne=function ie(ge){return ge&&ge instanceof p.Lv||function le(ge){return ge&&(0,Ce.m)(ge.next)&&(0,Ce.m)(ge.error)&&(0,Ce.m)(ge.complete)}(ge)&&(0,H.Nn)(ge)}(je)?je:new p.Hp(je,qe,ht);return(0,Oe.x)(()=>{const{operator:Re,source:Et}=this;Ne.add(Re?Re.call(Ne,Et):Et?this._subscribe(Ne):this._trySubscribe(Ne))}),Ne}_trySubscribe(je){try{return this._subscribe(je)}catch(qe){je.error(qe)}}forEach(je,qe){return new(qe=Ve(qe))((ht,Ne)=>{const Re=new p.Hp({next:Et=>{try{je(Et)}catch($){Ne($),Re.unsubscribe()}},error:Ne,complete:ht});this.subscribe(Re)})}_subscribe(je){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(je)}[Y.L](){return this}pipe(...je){return(0,ve.U)(je)(this)}toPromise(je){return new(je=Ve(je))((qe,ht)=>{let Ne;this.subscribe(Re=>Ne=Re,Re=>ht(Re),()=>qe(Ne))})}}return ge.create=Be=>new ge(Be),ge})();function Ve(ge){var Be;return null!==(Be=null!=ge?ge:pe.v.Promise)&&void 0!==Be?Be:Promise}},7579:(Pt,ze,N)=>{N.d(ze,{x:()=>Oe});var p=N(9751),H=N(727);const ve=(0,N(3888).d)(Ve=>function(){Ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=N(8737),Ce=N(2806);let Oe=(()=>{class Ve extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const ge=new Ae(this,this);return ge.operator=ie,ge}_throwIfClosed(){if(this.closed)throw new ve}next(ie){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ge of this.currentObservers)ge.next(ie)}})}error(ie){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:ge}=this;for(;ge.length;)ge.shift().error(ie)}})}complete(){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:ge,isStopped:Be,observers:je}=this;return ge||Be?H.Lc:(this.currentObservers=null,je.push(ie),new H.w0(()=>{this.currentObservers=null,(0,pe.P)(je,ie)}))}_checkFinalizedStatuses(ie){const{hasError:ge,thrownError:Be,isStopped:je}=this;ge?ie.error(Be):je&&ie.complete()}asObservable(){const ie=new p.y;return ie.source=this,ie}}return Ve.create=(le,ie)=>new Ae(le,ie),Ve})();class Ae extends Oe{constructor(le,ie){super(),this.destination=le,this.source=ie}next(le){var ie,ge;null===(ge=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===ge||ge.call(ie,le)}error(le){var ie,ge;null===(ge=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===ge||ge.call(ie,le)}complete(){var le,ie;null===(ie=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===ie||ie.call(le)}_subscribe(le){var ie,ge;return null!==(ge=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(le))&&void 0!==ge?ge:H.Lc}}},930:(Pt,ze,N)=>{N.d(ze,{Hp:()=>ht,Lv:()=>ge});var p=N(576),H=N(727),Y=N(2416),ve=N(7849),pe=N(5032);const Ce=Ve("C",void 0,void 0);function Ve(L,ee,me){return{kind:L,value:ee,error:me}}var le=N(3410),ie=N(2806);class ge extends H.w0{constructor(ee){super(),this.isStopped=!1,ee?(this.destination=ee,(0,H.Nn)(ee)&&ee.add(this)):this.destination=$}static create(ee,me,Ge){return new ht(ee,me,Ge)}next(ee){this.isStopped?Et(function Ae(L){return Ve("N",L,void 0)}(ee),this):this._next(ee)}error(ee){this.isStopped?Et(function Oe(L){return Ve("E",void 0,L)}(ee),this):(this.isStopped=!0,this._error(ee))}complete(){this.isStopped?Et(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ee){this.destination.next(ee)}_error(ee){try{this.destination.error(ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function je(L,ee){return Be.call(L,ee)}class qe{constructor(ee){this.partialObserver=ee}next(ee){const{partialObserver:me}=this;if(me.next)try{me.next(ee)}catch(Ge){Ne(Ge)}}error(ee){const{partialObserver:me}=this;if(me.error)try{me.error(ee)}catch(Ge){Ne(Ge)}else Ne(ee)}complete(){const{partialObserver:ee}=this;if(ee.complete)try{ee.complete()}catch(me){Ne(me)}}}class ht extends ge{constructor(ee,me,Ge){let We;if(super(),(0,p.m)(ee)||!ee)We={next:null!=ee?ee:void 0,error:null!=me?me:void 0,complete:null!=Ge?Ge:void 0};else{let Fe;this&&Y.v.useDeprecatedNextContext?(Fe=Object.create(ee),Fe.unsubscribe=()=>this.unsubscribe(),We={next:ee.next&&je(ee.next,Fe),error:ee.error&&je(ee.error,Fe),complete:ee.complete&&je(ee.complete,Fe)}):We=ee}this.destination=new qe(We)}}function Ne(L){Y.v.useDeprecatedSynchronousErrorHandling?(0,ie.O)(L):(0,ve.h)(L)}function Et(L,ee){const{onStoppedNotification:me}=Y.v;me&&le.z.setTimeout(()=>me(L,ee))}const $={closed:!0,next:pe.Z,error:function Re(L){throw L},complete:pe.Z}},727:(Pt,ze,N)=>{N.d(ze,{Lc:()=>Ce,w0:()=>pe,Nn:()=>Oe});var p=N(576);const Y=(0,N(3888).d)(Ve=>function(ie){Ve(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((ge,Be)=>`${Be+1}) ${ge.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var ve=N(8737);class pe{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const je of ie)je.remove(this);else ie.remove(this);const{initialTeardown:ge}=this;if((0,p.m)(ge))try{ge()}catch(je){le=je instanceof Y?je.errors:[je]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const je of Be)try{Ae(je)}catch(qe){le=null!=le?le:[],qe instanceof Y?le=[...le,...qe.errors]:le.push(qe)}}if(le)throw new Y(le)}}add(le){var ie;if(le&&le!==this)if(this.closed)Ae(le);else{if(le instanceof pe){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(le)}}_hasParent(le){const{_parentage:ie}=this;return ie===le||Array.isArray(ie)&&ie.includes(le)}_addParent(le){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(le),ie):ie?[ie,le]:le}_removeParent(le){const{_parentage:ie}=this;ie===le?this._parentage=null:Array.isArray(ie)&&(0,ve.P)(ie,le)}remove(le){const{_finalizers:ie}=this;ie&&(0,ve.P)(ie,le),le instanceof pe&&le._removeParent(this)}}pe.EMPTY=(()=>{const Ve=new pe;return Ve.closed=!0,Ve})();const Ce=pe.EMPTY;function Oe(Ve){return Ve instanceof pe||Ve&&"closed"in Ve&&(0,p.m)(Ve.remove)&&(0,p.m)(Ve.add)&&(0,p.m)(Ve.unsubscribe)}function Ae(Ve){(0,p.m)(Ve)?Ve():Ve.unsubscribe()}},2416:(Pt,ze,N)=>{N.d(ze,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Pt,ze,N)=>{N.d(ze,{a:()=>le});var p=N(9751),H=N(4742),Y=N(8996),ve=N(4671),pe=N(3268),Ce=N(3269),Oe=N(1810),Ae=N(5403),Ve=N(9672);function le(...Be){const je=(0,Ce.yG)(Be),qe=(0,Ce.jO)(Be),{args:ht,keys:Ne}=(0,H.D)(Be);if(0===ht.length)return(0,Y.D)([],je);const Re=new p.y(function ie(Be,je,qe=ve.y){return ht=>{ge(je,()=>{const{length:Ne}=Be,Re=new Array(Ne);let Et=Ne,$=Ne;for(let L=0;L<Ne;L++)ge(je,()=>{const ee=(0,Y.D)(Be[L],je);let me=!1;ee.subscribe((0,Ae.x)(ht,Ge=>{Re[L]=Ge,me||(me=!0,$--),$||ht.next(qe(Re.slice()))},()=>{--Et||ht.complete()}))},ht)},ht)}}(ht,je,Ne?Et=>(0,Oe.n)(Ne,Et):ve.y));return qe?Re.pipe((0,pe.Z)(qe)):Re}function ge(Be,je,qe){Be?(0,Ve.f)(qe,Be,je):je()}},7272:(Pt,ze,N)=>{N.d(ze,{z:()=>pe});var p=N(8189),Y=N(3269),ve=N(8996);function pe(...Ce){return function H(){return(0,p.J)(1)}()((0,ve.D)(Ce,(0,Y.yG)(Ce)))}},515:(Pt,ze,N)=>{N.d(ze,{E:()=>H});const H=new(N(9751).y)(pe=>pe.complete())},4128:(Pt,ze,N)=>{N.d(ze,{D:()=>Ae});var p=N(9751),H=N(4742),Y=N(8421),ve=N(3269),pe=N(5403),Ce=N(3268),Oe=N(1810);function Ae(...Ve){const le=(0,ve.jO)(Ve),{args:ie,keys:ge}=(0,H.D)(Ve),Be=new p.y(je=>{const{length:qe}=ie;if(!qe)return void je.complete();const ht=new Array(qe);let Ne=qe,Re=qe;for(let Et=0;Et<qe;Et++){let $=!1;(0,Y.Xf)(ie[Et]).subscribe((0,pe.x)(je,L=>{$||($=!0,Re--),ht[Et]=L},()=>Ne--,void 0,()=>{(!Ne||!$)&&(Re||je.next(ge?(0,Oe.n)(ge,ht):ht),je.complete())}))}});return le?Be.pipe((0,Ce.Z)(le)):Be}},8996:(Pt,ze,N)=>{N.d(ze,{D:()=>ee});var p=N(8421),H=N(5363),Y=N(9468),Ce=N(9751),Ae=N(2202),Ve=N(576),le=N(9672);function ge(me,Ge){if(!me)throw new Error("Iterable cannot be null");return new Ce.y(We=>{(0,le.f)(We,Ge,()=>{const Fe=me[Symbol.asyncIterator]();(0,le.f)(We,Ge,()=>{Fe.next().then(_e=>{_e.done?We.complete():We.next(_e.value)})},0,!0)})})}var Be=N(3670),je=N(8239),qe=N(1144),ht=N(6495),Ne=N(2206),Re=N(4532),Et=N(3260);function ee(me,Ge){return Ge?function L(me,Ge){if(null!=me){if((0,Be.c)(me))return function ve(me,Ge){return(0,p.Xf)(me).pipe((0,Y.R)(Ge),(0,H.Q)(Ge))}(me,Ge);if((0,qe.z)(me))return function Oe(me,Ge){return new Ce.y(We=>{let Fe=0;return Ge.schedule(function(){Fe===me.length?We.complete():(We.next(me[Fe++]),We.closed||this.schedule())})})}(me,Ge);if((0,je.t)(me))return function pe(me,Ge){return(0,p.Xf)(me).pipe((0,Y.R)(Ge),(0,H.Q)(Ge))}(me,Ge);if((0,Ne.D)(me))return ge(me,Ge);if((0,ht.T)(me))return function ie(me,Ge){return new Ce.y(We=>{let Fe;return(0,le.f)(We,Ge,()=>{Fe=me[Ae.h](),(0,le.f)(We,Ge,()=>{let _e,Q;try{({value:_e,done:Q}=Fe.next())}catch(Me){return void We.error(Me)}Q?We.complete():We.next(_e)},0,!0)}),()=>(0,Ve.m)(null==Fe?void 0:Fe.return)&&Fe.return()})}(me,Ge);if((0,Et.L)(me))return function $(me,Ge){return ge((0,Et.Q)(me),Ge)}(me,Ge)}throw(0,Re.z)(me)}(me,Ge):(0,p.Xf)(me)}},8421:(Pt,ze,N)=>{N.d(ze,{Xf:()=>Be});var p=N(655),H=N(1144),Y=N(8239),ve=N(9751),pe=N(3670),Ce=N(2206),Oe=N(4532),Ae=N(6495),Ve=N(3260),le=N(576),ie=N(7849),ge=N(8822);function Be(L){if(L instanceof ve.y)return L;if(null!=L){if((0,pe.c)(L))return function je(L){return new ve.y(ee=>{const me=L[ge.L]();if((0,le.m)(me.subscribe))return me.subscribe(ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(L);if((0,H.z)(L))return function qe(L){return new ve.y(ee=>{for(let me=0;me<L.length&&!ee.closed;me++)ee.next(L[me]);ee.complete()})}(L);if((0,Y.t)(L))return function ht(L){return new ve.y(ee=>{L.then(me=>{ee.closed||(ee.next(me),ee.complete())},me=>ee.error(me)).then(null,ie.h)})}(L);if((0,Ce.D)(L))return Re(L);if((0,Ae.T)(L))return function Ne(L){return new ve.y(ee=>{for(const me of L)if(ee.next(me),ee.closed)return;ee.complete()})}(L);if((0,Ve.L)(L))return function Et(L){return Re((0,Ve.Q)(L))}(L)}throw(0,Oe.z)(L)}function Re(L){return new ve.y(ee=>{(function $(L,ee){var me,Ge,We,Fe;return(0,p.mG)(this,void 0,void 0,function*(){try{for(me=(0,p.KL)(L);!(Ge=yield me.next()).done;)if(ee.next(Ge.value),ee.closed)return}catch(_e){We={error:_e}}finally{try{Ge&&!Ge.done&&(Fe=me.return)&&(yield Fe.call(me))}finally{if(We)throw We.error}}ee.complete()})})(L,ee).catch(me=>ee.error(me))})}},6451:(Pt,ze,N)=>{N.d(ze,{T:()=>Ce});var p=N(8189),H=N(8421),Y=N(515),ve=N(3269),pe=N(8996);function Ce(...Oe){const Ae=(0,ve.yG)(Oe),Ve=(0,ve._6)(Oe,1/0),le=Oe;return le.length?1===le.length?(0,H.Xf)(le[0]):(0,p.J)(Ve)((0,pe.D)(le,Ae)):Y.E}},9646:(Pt,ze,N)=>{N.d(ze,{of:()=>Y});var p=N(3269),H=N(8996);function Y(...ve){const pe=(0,p.yG)(ve);return(0,H.D)(ve,pe)}},5403:(Pt,ze,N)=>{N.d(ze,{x:()=>H});var p=N(930);function H(ve,pe,Ce,Oe,Ae){return new Y(ve,pe,Ce,Oe,Ae)}class Y extends p.Lv{constructor(pe,Ce,Oe,Ae,Ve,le){super(pe),this.onFinalize=Ve,this.shouldUnsubscribe=le,this._next=Ce?function(ie){try{Ce(ie)}catch(ge){pe.error(ge)}}:super._next,this._error=Ae?function(ie){try{Ae(ie)}catch(ge){pe.error(ge)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(ie){pe.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ce}=this;super.unsubscribe(),!Ce&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},6590:(Pt,ze,N)=>{N.d(ze,{d:()=>Y});var p=N(4482),H=N(5403);function Y(ve){return(0,p.e)((pe,Ce)=>{let Oe=!1;pe.subscribe((0,H.x)(Ce,Ae=>{Oe=!0,Ce.next(Ae)},()=>{Oe||Ce.next(ve),Ce.complete()}))})}},9300:(Pt,ze,N)=>{N.d(ze,{h:()=>Y});var p=N(4482),H=N(5403);function Y(ve,pe){return(0,p.e)((Ce,Oe)=>{let Ae=0;Ce.subscribe((0,H.x)(Oe,Ve=>ve.call(pe,Ve,Ae++)&&Oe.next(Ve)))})}},590:(Pt,ze,N)=>{N.d(ze,{P:()=>Oe});var p=N(6805),H=N(9300),Y=N(5698),ve=N(6590),pe=N(8068),Ce=N(4671);function Oe(Ae,Ve){const le=arguments.length>=2;return ie=>ie.pipe(Ae?(0,H.h)((ge,Be)=>Ae(ge,Be,ie)):Ce.y,(0,Y.q)(1),le?(0,ve.d)(Ve):(0,pe.T)(()=>new p.K))}},4004:(Pt,ze,N)=>{N.d(ze,{U:()=>Y});var p=N(4482),H=N(5403);function Y(ve,pe){return(0,p.e)((Ce,Oe)=>{let Ae=0;Ce.subscribe((0,H.x)(Oe,Ve=>{Oe.next(ve.call(pe,Ve,Ae++))}))})}},8189:(Pt,ze,N)=>{N.d(ze,{J:()=>Y});var p=N(5577),H=N(4671);function Y(ve=1/0){return(0,p.z)(H.y,ve)}},5577:(Pt,ze,N)=>{N.d(ze,{z:()=>Ae});var p=N(4004),H=N(8421),Y=N(4482),ve=N(9672),pe=N(5403),Oe=N(576);function Ae(Ve,le,ie=1/0){return(0,Oe.m)(le)?Ae((ge,Be)=>(0,p.U)((je,qe)=>le(ge,je,Be,qe))((0,H.Xf)(Ve(ge,Be))),ie):("number"==typeof le&&(ie=le),(0,Y.e)((ge,Be)=>function Ce(Ve,le,ie,ge,Be,je,qe,ht){const Ne=[];let Re=0,Et=0,$=!1;const L=()=>{$&&!Ne.length&&!Re&&le.complete()},ee=Ge=>Re<ge?me(Ge):Ne.push(Ge),me=Ge=>{je&&le.next(Ge),Re++;let We=!1;(0,H.Xf)(ie(Ge,Et++)).subscribe((0,pe.x)(le,Fe=>{null==Be||Be(Fe),je?ee(Fe):le.next(Fe)},()=>{We=!0},void 0,()=>{if(We)try{for(Re--;Ne.length&&Re<ge;){const Fe=Ne.shift();qe?(0,ve.f)(le,qe,()=>me(Fe)):me(Fe)}L()}catch(Fe){le.error(Fe)}}))};return Ve.subscribe((0,pe.x)(le,ee,()=>{$=!0,L()})),()=>{null==ht||ht()}}(ge,Be,Ve,ie)))}},5363:(Pt,ze,N)=>{N.d(ze,{Q:()=>ve});var p=N(9672),H=N(4482),Y=N(5403);function ve(pe,Ce=0){return(0,H.e)((Oe,Ae)=>{Oe.subscribe((0,Y.x)(Ae,Ve=>(0,p.f)(Ae,pe,()=>Ae.next(Ve),Ce),()=>(0,p.f)(Ae,pe,()=>Ae.complete(),Ce),Ve=>(0,p.f)(Ae,pe,()=>Ae.error(Ve),Ce)))})}},5026:(Pt,ze,N)=>{N.d(ze,{R:()=>ve});var p=N(4482),H=N(5403);function Y(pe,Ce,Oe,Ae,Ve){return(le,ie)=>{let ge=Oe,Be=Ce,je=0;le.subscribe((0,H.x)(ie,qe=>{const ht=je++;Be=ge?pe(Be,qe,ht):(ge=!0,qe),Ae&&ie.next(Be)},Ve&&(()=>{ge&&ie.next(Be),ie.complete()})))}}function ve(pe,Ce){return(0,p.e)(Y(pe,Ce,arguments.length>=2,!0))}},3099:(Pt,ze,N)=>{N.d(ze,{B:()=>Ce});var p=N(8996),H=N(5698),Y=N(7579),ve=N(930),pe=N(4482);function Ce(Ae={}){const{connector:Ve=(()=>new Y.x),resetOnError:le=!0,resetOnComplete:ie=!0,resetOnRefCountZero:ge=!0}=Ae;return Be=>{let je=null,qe=null,ht=null,Ne=0,Re=!1,Et=!1;const $=()=>{null==qe||qe.unsubscribe(),qe=null},L=()=>{$(),je=ht=null,Re=Et=!1},ee=()=>{const me=je;L(),null==me||me.unsubscribe()};return(0,pe.e)((me,Ge)=>{Ne++,!Et&&!Re&&$();const We=ht=null!=ht?ht:Ve();Ge.add(()=>{Ne--,0===Ne&&!Et&&!Re&&(qe=Oe(ee,ge))}),We.subscribe(Ge),je||(je=new ve.Hp({next:Fe=>We.next(Fe),error:Fe=>{Et=!0,$(),qe=Oe(L,le,Fe),We.error(Fe)},complete:()=>{Re=!0,$(),qe=Oe(L,ie),We.complete()}}),(0,p.D)(me).subscribe(je))})(Be)}}function Oe(Ae,Ve,...le){return!0===Ve?(Ae(),null):!1===Ve?null:Ve(...le).pipe((0,H.q)(1)).subscribe(()=>Ae())}},8675:(Pt,ze,N)=>{N.d(ze,{O:()=>ve});var p=N(7272),H=N(3269),Y=N(4482);function ve(...pe){const Ce=(0,H.yG)(pe);return(0,Y.e)((Oe,Ae)=>{(Ce?(0,p.z)(pe,Oe,Ce):(0,p.z)(pe,Oe)).subscribe(Ae)})}},9468:(Pt,ze,N)=>{N.d(ze,{R:()=>H});var p=N(4482);function H(Y,ve=0){return(0,p.e)((pe,Ce)=>{Ce.add(Y.schedule(()=>pe.subscribe(Ce),ve))})}},3900:(Pt,ze,N)=>{N.d(ze,{w:()=>ve});var p=N(8421),H=N(4482),Y=N(5403);function ve(pe,Ce){return(0,H.e)((Oe,Ae)=>{let Ve=null,le=0,ie=!1;const ge=()=>ie&&!Ve&&Ae.complete();Oe.subscribe((0,Y.x)(Ae,Be=>{null==Ve||Ve.unsubscribe();let je=0;const qe=le++;(0,p.Xf)(pe(Be,qe)).subscribe(Ve=(0,Y.x)(Ae,ht=>Ae.next(Ce?Ce(Be,ht,qe,je++):ht),()=>{Ve=null,ge()}))},()=>{ie=!0,ge()}))})}},5698:(Pt,ze,N)=>{N.d(ze,{q:()=>ve});var p=N(515),H=N(4482),Y=N(5403);function ve(pe){return pe<=0?()=>p.E:(0,H.e)((Ce,Oe)=>{let Ae=0;Ce.subscribe((0,Y.x)(Oe,Ve=>{++Ae<=pe&&(Oe.next(Ve),pe<=Ae&&Oe.complete())}))})}},8505:(Pt,ze,N)=>{N.d(ze,{b:()=>pe});var p=N(576),H=N(4482),Y=N(5403),ve=N(4671);function pe(Ce,Oe,Ae){const Ve=(0,p.m)(Ce)||Oe||Ae?{next:Ce,error:Oe,complete:Ae}:Ce;return Ve?(0,H.e)((le,ie)=>{var ge;null===(ge=Ve.subscribe)||void 0===ge||ge.call(Ve);let Be=!0;le.subscribe((0,Y.x)(ie,je=>{var qe;null===(qe=Ve.next)||void 0===qe||qe.call(Ve,je),ie.next(je)},()=>{var je;Be=!1,null===(je=Ve.complete)||void 0===je||je.call(Ve),ie.complete()},je=>{var qe;Be=!1,null===(qe=Ve.error)||void 0===qe||qe.call(Ve,je),ie.error(je)},()=>{var je,qe;Be&&(null===(je=Ve.unsubscribe)||void 0===je||je.call(Ve)),null===(qe=Ve.finalize)||void 0===qe||qe.call(Ve)}))}):ve.y}},8068:(Pt,ze,N)=>{N.d(ze,{T:()=>ve});var p=N(6805),H=N(4482),Y=N(5403);function ve(Ce=pe){return(0,H.e)((Oe,Ae)=>{let Ve=!1;Oe.subscribe((0,Y.x)(Ae,le=>{Ve=!0,Ae.next(le)},()=>Ve?Ae.complete():Ae.error(Ce())))})}function pe(){return new p.K}},4408:(Pt,ze,N)=>{N.d(ze,{o:()=>pe});var p=N(727);class H extends p.w0{constructor(Oe,Ae){super()}schedule(Oe,Ae=0){return this}}const Y={setInterval(Ce,Oe,...Ae){const{delegate:Ve}=Y;return(null==Ve?void 0:Ve.setInterval)?Ve.setInterval(Ce,Oe,...Ae):setInterval(Ce,Oe,...Ae)},clearInterval(Ce){const{delegate:Oe}=Y;return((null==Oe?void 0:Oe.clearInterval)||clearInterval)(Ce)},delegate:void 0};var ve=N(8737);class pe extends H{constructor(Oe,Ae){super(Oe,Ae),this.scheduler=Oe,this.work=Ae,this.pending=!1}schedule(Oe,Ae=0){if(this.closed)return this;this.state=Oe;const Ve=this.id,le=this.scheduler;return null!=Ve&&(this.id=this.recycleAsyncId(le,Ve,Ae)),this.pending=!0,this.delay=Ae,this.id=this.id||this.requestAsyncId(le,this.id,Ae),this}requestAsyncId(Oe,Ae,Ve=0){return Y.setInterval(Oe.flush.bind(Oe,this),Ve)}recycleAsyncId(Oe,Ae,Ve=0){if(null!=Ve&&this.delay===Ve&&!1===this.pending)return Ae;Y.clearInterval(Ae)}execute(Oe,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ve=this._execute(Oe,Ae);if(Ve)return Ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,Ae){let le,Ve=!1;try{this.work(Oe)}catch(ie){Ve=!0,le=ie||new Error("Scheduled action threw falsy error")}if(Ve)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:Ae}=this,{actions:Ve}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ve.P)(Ve,this),null!=Oe&&(this.id=this.recycleAsyncId(Ae,Oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Pt,ze,N)=>{N.d(ze,{v:()=>Y});var p=N(6063);class H{constructor(pe,Ce=H.now){this.schedulerActionCtor=pe,this.now=Ce}schedule(pe,Ce=0,Oe){return new this.schedulerActionCtor(this,pe).schedule(Oe,Ce)}}H.now=p.l.now;class Y extends H{constructor(pe,Ce=H.now){super(pe,Ce),this.actions=[],this._active=!1,this._scheduled=void 0}flush(pe){const{actions:Ce}=this;if(this._active)return void Ce.push(pe);let Oe;this._active=!0;do{if(Oe=pe.execute(pe.state,pe.delay))break}while(pe=Ce.shift());if(this._active=!1,Oe){for(;pe=Ce.shift();)pe.unsubscribe();throw Oe}}}},4986:(Pt,ze,N)=>{N.d(ze,{P:()=>ve,z:()=>Y});var p=N(4408);const Y=new(N(7565).v)(p.o),ve=Y},6063:(Pt,ze,N)=>{N.d(ze,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Pt,ze,N)=>{N.d(ze,{z:()=>p});const p={setTimeout(H,Y,...ve){const{delegate:pe}=p;return(null==pe?void 0:pe.setTimeout)?pe.setTimeout(H,Y,...ve):setTimeout(H,Y,...ve)},clearTimeout(H){const{delegate:Y}=p;return((null==Y?void 0:Y.clearTimeout)||clearTimeout)(H)},delegate:void 0}},2202:(Pt,ze,N)=>{N.d(ze,{h:()=>H});const H=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Pt,ze,N)=>{N.d(ze,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Pt,ze,N)=>{N.d(ze,{K:()=>H});const H=(0,N(3888).d)(Y=>function(){Y(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Pt,ze,N)=>{N.d(ze,{_6:()=>Ce,jO:()=>ve,yG:()=>pe});var p=N(576),H=N(3532);function Y(Oe){return Oe[Oe.length-1]}function ve(Oe){return(0,p.m)(Y(Oe))?Oe.pop():void 0}function pe(Oe){return(0,H.K)(Y(Oe))?Oe.pop():void 0}function Ce(Oe,Ae){return"number"==typeof Y(Oe)?Oe.pop():Ae}},4742:(Pt,ze,N)=>{N.d(ze,{D:()=>pe});const{isArray:p}=Array,{getPrototypeOf:H,prototype:Y,keys:ve}=Object;function pe(Oe){if(1===Oe.length){const Ae=Oe[0];if(p(Ae))return{args:Ae,keys:null};if(function Ce(Oe){return Oe&&"object"==typeof Oe&&H(Oe)===Y}(Ae)){const Ve=ve(Ae);return{args:Ve.map(le=>Ae[le]),keys:Ve}}}return{args:Oe,keys:null}}},8737:(Pt,ze,N)=>{function p(H,Y){if(H){const ve=H.indexOf(Y);0<=ve&&H.splice(ve,1)}}N.d(ze,{P:()=>p})},3888:(Pt,ze,N)=>{function p(H){const ve=H(pe=>{Error.call(pe),pe.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}N.d(ze,{d:()=>p})},1810:(Pt,ze,N)=>{function p(H,Y){return H.reduce((ve,pe,Ce)=>(ve[pe]=Y[Ce],ve),{})}N.d(ze,{n:()=>p})},2806:(Pt,ze,N)=>{N.d(ze,{O:()=>ve,x:()=>Y});var p=N(2416);let H=null;function Y(pe){if(p.v.useDeprecatedSynchronousErrorHandling){const Ce=!H;if(Ce&&(H={errorThrown:!1,error:null}),pe(),Ce){const{errorThrown:Oe,error:Ae}=H;if(H=null,Oe)throw Ae}}else pe()}function ve(pe){p.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=pe)}},9672:(Pt,ze,N)=>{function p(H,Y,ve,pe=0,Ce=!1){const Oe=Y.schedule(function(){ve(),Ce?H.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(H.add(Oe),!Ce)return Oe}N.d(ze,{f:()=>p})},4671:(Pt,ze,N)=>{function p(H){return H}N.d(ze,{y:()=>p})},1144:(Pt,ze,N)=>{N.d(ze,{z:()=>p});const p=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(Pt,ze,N)=>{N.d(ze,{D:()=>H});var p=N(576);function H(Y){return Symbol.asyncIterator&&(0,p.m)(null==Y?void 0:Y[Symbol.asyncIterator])}},576:(Pt,ze,N)=>{function p(H){return"function"==typeof H}N.d(ze,{m:()=>p})},3670:(Pt,ze,N)=>{N.d(ze,{c:()=>Y});var p=N(8822),H=N(576);function Y(ve){return(0,H.m)(ve[p.L])}},6495:(Pt,ze,N)=>{N.d(ze,{T:()=>Y});var p=N(2202),H=N(576);function Y(ve){return(0,H.m)(null==ve?void 0:ve[p.h])}},8239:(Pt,ze,N)=>{N.d(ze,{t:()=>H});var p=N(576);function H(Y){return(0,p.m)(null==Y?void 0:Y.then)}},3260:(Pt,ze,N)=>{N.d(ze,{L:()=>ve,Q:()=>Y});var p=N(655),H=N(576);function Y(pe){return(0,p.FC)(this,arguments,function*(){const Oe=pe.getReader();try{for(;;){const{value:Ae,done:Ve}=yield(0,p.qq)(Oe.read());if(Ve)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Ae)}}finally{Oe.releaseLock()}})}function ve(pe){return(0,H.m)(null==pe?void 0:pe.getReader)}},3532:(Pt,ze,N)=>{N.d(ze,{K:()=>H});var p=N(576);function H(Y){return Y&&(0,p.m)(Y.schedule)}},4482:(Pt,ze,N)=>{N.d(ze,{A:()=>H,e:()=>Y});var p=N(576);function H(ve){return(0,p.m)(null==ve?void 0:ve.lift)}function Y(ve){return pe=>{if(H(pe))return pe.lift(function(Ce){try{return ve(Ce,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Pt,ze,N)=>{N.d(ze,{Z:()=>ve});var p=N(4004);const{isArray:H}=Array;function ve(pe){return(0,p.U)(Ce=>function Y(pe,Ce){return H(Ce)?pe(...Ce):pe(Ce)}(pe,Ce))}},5032:(Pt,ze,N)=>{function p(){}N.d(ze,{Z:()=>p})},9635:(Pt,ze,N)=>{N.d(ze,{U:()=>Y,z:()=>H});var p=N(4671);function H(...ve){return Y(ve)}function Y(ve){return 0===ve.length?p.y:1===ve.length?ve[0]:function(Ce){return ve.reduce((Oe,Ae)=>Ae(Oe),Ce)}}},7849:(Pt,ze,N)=>{N.d(ze,{h:()=>Y});var p=N(2416),H=N(3410);function Y(ve){H.z.setTimeout(()=>{const{onUnhandledError:pe}=p.v;if(!pe)throw ve;pe(ve)})}},4532:(Pt,ze,N)=>{function p(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(ze,{z:()=>p})},655:(Pt,ze,N)=>{function ve(_e,Q){var Me={};for(var ae in _e)Object.prototype.hasOwnProperty.call(_e,ae)&&Q.indexOf(ae)<0&&(Me[ae]=_e[ae]);if(null!=_e&&"function"==typeof Object.getOwnPropertySymbols){var Xe=0;for(ae=Object.getOwnPropertySymbols(_e);Xe<ae.length;Xe++)Q.indexOf(ae[Xe])<0&&Object.prototype.propertyIsEnumerable.call(_e,ae[Xe])&&(Me[ae[Xe]]=_e[ae[Xe]])}return Me}function pe(_e,Q,Me,ae){var Kt,Xe=arguments.length,Ue=Xe<3?Q:null===ae?ae=Object.getOwnPropertyDescriptor(Q,Me):ae;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ue=Reflect.decorate(_e,Q,Me,ae);else for(var bt=_e.length-1;bt>=0;bt--)(Kt=_e[bt])&&(Ue=(Xe<3?Kt(Ue):Xe>3?Kt(Q,Me,Ue):Kt(Q,Me))||Ue);return Xe>3&&Ue&&Object.defineProperty(Q,Me,Ue),Ue}function Ae(_e,Q,Me,ae){return new(Me||(Me=Promise))(function(Ue,Kt){function bt(Tt){try{mt(ae.next(Tt))}catch($t){Kt($t)}}function Gt(Tt){try{mt(ae.throw(Tt))}catch($t){Kt($t)}}function mt(Tt){Tt.done?Ue(Tt.value):function Xe(Ue){return Ue instanceof Me?Ue:new Me(function(Kt){Kt(Ue)})}(Tt.value).then(bt,Gt)}mt((ae=ae.apply(_e,Q||[])).next())})}function Ne(_e){return this instanceof Ne?(this.v=_e,this):new Ne(_e)}function Re(_e,Q,Me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Xe,ae=Me.apply(_e,Q||[]),Ue=[];return Xe={},Kt("next"),Kt("throw"),Kt("return"),Xe[Symbol.asyncIterator]=function(){return this},Xe;function Kt(Mt){ae[Mt]&&(Xe[Mt]=function(Ft){return new Promise(function(lt,pn){Ue.push([Mt,Ft,lt,pn])>1||bt(Mt,Ft)})})}function bt(Mt,Ft){try{!function Gt(Mt){Mt.value instanceof Ne?Promise.resolve(Mt.value.v).then(mt,Tt):$t(Ue[0][2],Mt)}(ae[Mt](Ft))}catch(lt){$t(Ue[0][3],lt)}}function mt(Mt){bt("next",Mt)}function Tt(Mt){bt("throw",Mt)}function $t(Mt,Ft){Mt(Ft),Ue.shift(),Ue.length&&bt(Ue[0][0],Ue[0][1])}}function $(_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,Q=_e[Symbol.asyncIterator];return Q?Q.call(_e):(_e=function ge(_e){var Q="function"==typeof Symbol&&Symbol.iterator,Me=Q&&_e[Q],ae=0;if(Me)return Me.call(_e);if(_e&&"number"==typeof _e.length)return{next:function(){return _e&&ae>=_e.length&&(_e=void 0),{value:_e&&_e[ae++],done:!_e}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(_e),Me={},ae("next"),ae("throw"),ae("return"),Me[Symbol.asyncIterator]=function(){return this},Me);function ae(Ue){Me[Ue]=_e[Ue]&&function(Kt){return new Promise(function(bt,Gt){!function Xe(Ue,Kt,bt,Gt){Promise.resolve(Gt).then(function(mt){Ue({value:mt,done:bt})},Kt)}(bt,Gt,(Kt=_e[Ue](Kt)).done,Kt.value)})}}}N.d(ze,{FC:()=>Re,KL:()=>$,_T:()=>ve,gn:()=>pe,mG:()=>Ae,qq:()=>Ne})},9808:(Pt,ze,N)=>{N.d(ze,{Do:()=>L,EM:()=>Yr,HT:()=>pe,JF:()=>cr,K0:()=>Oe,Mx:()=>Gr,O5:()=>Qn,Ov:()=>Ke,PM:()=>Vr,S$:()=>Ne,Ts:()=>vs,V_:()=>le,Ye:()=>ee,Zx:()=>br,b0:()=>$,bD:()=>is,ez:()=>Ni,lw:()=>Ae,mk:()=>Ri,mr:()=>Et,q:()=>Y,sg:()=>Cr,w_:()=>Ce});var p=N(5e3);let H=null;function Y(){return H}function pe(R){H||(H=R)}class Ce{}const Oe=new p.OlP("DocumentToken");let Ae=(()=>{class R{historyGo(x){throw new Error("Not implemented")}}return R.\u0275fac=function(x){return new(x||R)},R.\u0275prov=p.Yz7({token:R,factory:function(){return function Ve(){return(0,p.LFG)(ie)}()},providedIn:"platform"}),R})();const le=new p.OlP("Location Initialized");let ie=(()=>{class R extends Ae{constructor(x){super(),this._doc=x,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState(x){const Z=Y().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("popstate",x,!1),()=>Z.removeEventListener("popstate",x)}onHashChange(x){const Z=Y().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("hashchange",x,!1),()=>Z.removeEventListener("hashchange",x)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(x){this.location.pathname=x}pushState(x,Z,fe){ge()?this._history.pushState(x,Z,fe):this.location.hash=fe}replaceState(x,Z,fe){ge()?this._history.replaceState(x,Z,fe):this.location.hash=fe}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return R.\u0275fac=function(x){return new(x||R)(p.LFG(Oe))},R.\u0275prov=p.Yz7({token:R,factory:function(){return function Be(){return new ie((0,p.LFG)(Oe))}()},providedIn:"platform"}),R})();function ge(){return!!window.history.pushState}function je(R,G){if(0==R.length)return G;if(0==G.length)return R;let x=0;return R.endsWith("/")&&x++,G.startsWith("/")&&x++,2==x?R+G.substring(1):1==x?R+G:R+"/"+G}function qe(R){const G=R.match(/#|\?|$/),x=G&&G.index||R.length;return R.slice(0,x-("/"===R[x-1]?1:0))+R.slice(x)}function ht(R){return R&&"?"!==R[0]?"?"+R:R}let Ne=(()=>{class R{historyGo(x){throw new Error("Not implemented")}}return R.\u0275fac=function(x){return new(x||R)},R.\u0275prov=p.Yz7({token:R,factory:function(){return function Re(R){const G=(0,p.LFG)(Oe).location;return new $((0,p.LFG)(Ae),G&&G.origin||"")}()},providedIn:"root"}),R})();const Et=new p.OlP("appBaseHref");let $=(()=>{class R extends Ne{constructor(x,Z){if(super(),this._platformLocation=x,this._removeListenerFns=[],null==Z&&(Z=this._platformLocation.getBaseHrefFromDOM()),null==Z)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Z}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return je(this._baseHref,x)}path(x=!1){const Z=this._platformLocation.pathname+ht(this._platformLocation.search),fe=this._platformLocation.hash;return fe&&x?`${Z}${fe}`:Z}pushState(x,Z,fe,Je){const tt=this.prepareExternalUrl(fe+ht(Je));this._platformLocation.pushState(x,Z,tt)}replaceState(x,Z,fe,Je){const tt=this.prepareExternalUrl(fe+ht(Je));this._platformLocation.replaceState(x,Z,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(x=0){var Z,fe;null===(fe=(Z=this._platformLocation).historyGo)||void 0===fe||fe.call(Z,x)}}return R.\u0275fac=function(x){return new(x||R)(p.LFG(Ae),p.LFG(Et,8))},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac}),R})(),L=(()=>{class R extends Ne{constructor(x,Z){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=Z&&(this._baseHref=Z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let Z=this._platformLocation.hash;return null==Z&&(Z="#"),Z.length>0?Z.substring(1):Z}prepareExternalUrl(x){const Z=je(this._baseHref,x);return Z.length>0?"#"+Z:Z}pushState(x,Z,fe,Je){let tt=this.prepareExternalUrl(fe+ht(Je));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.pushState(x,Z,tt)}replaceState(x,Z,fe,Je){let tt=this.prepareExternalUrl(fe+ht(Je));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.replaceState(x,Z,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(x=0){var Z,fe;null===(fe=(Z=this._platformLocation).historyGo)||void 0===fe||fe.call(Z,x)}}return R.\u0275fac=function(x){return new(x||R)(p.LFG(Ae),p.LFG(Et,8))},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac}),R})(),ee=(()=>{class R{constructor(x,Z){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=x;const fe=this._platformStrategy.getBaseHref();this._platformLocation=Z,this._baseHref=qe(We(fe)),this._platformStrategy.onPopState(Je=>{this._subject.emit({url:this.path(!0),pop:!0,state:Je.state,type:Je.type})})}path(x=!1){return this.normalize(this._platformStrategy.path(x))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(x,Z=""){return this.path()==this.normalize(x+ht(Z))}normalize(x){return R.stripTrailingSlash(function Ge(R,G){return R&&G.startsWith(R)?G.substring(R.length):G}(this._baseHref,We(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._platformStrategy.prepareExternalUrl(x)}go(x,Z="",fe=null){this._platformStrategy.pushState(fe,"",x,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+ht(Z)),fe)}replaceState(x,Z="",fe=null){this._platformStrategy.replaceState(fe,"",x,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+ht(Z)),fe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(x=0){var Z,fe;null===(fe=(Z=this._platformStrategy).historyGo)||void 0===fe||fe.call(Z,x)}onUrlChange(x){this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Z=>{this._notifyUrlChangeListeners(Z.url,Z.state)}))}_notifyUrlChangeListeners(x="",Z){this._urlChangeListeners.forEach(fe=>fe(x,Z))}subscribe(x,Z,fe){return this._subject.subscribe({next:x,error:Z,complete:fe})}}return R.normalizeQueryParams=ht,R.joinWithSlash=je,R.stripTrailingSlash=qe,R.\u0275fac=function(x){return new(x||R)(p.LFG(Ne),p.LFG(Ae))},R.\u0275prov=p.Yz7({token:R,factory:function(){return function me(){return new ee((0,p.LFG)(Ne),(0,p.LFG)(Ae))}()},providedIn:"root"}),R})();function We(R){return R.replace(/\/index.html$/,"")}var _e=(()=>((_e=_e||{})[_e.Decimal=0]="Decimal",_e[_e.Percent=1]="Percent",_e[_e.Currency=2]="Currency",_e[_e.Scientific=3]="Scientific",_e))(),Ue=(()=>((Ue=Ue||{})[Ue.Decimal=0]="Decimal",Ue[Ue.Group=1]="Group",Ue[Ue.List=2]="List",Ue[Ue.PercentSign=3]="PercentSign",Ue[Ue.PlusSign=4]="PlusSign",Ue[Ue.MinusSign=5]="MinusSign",Ue[Ue.Exponential=6]="Exponential",Ue[Ue.SuperscriptingExponent=7]="SuperscriptingExponent",Ue[Ue.PerMille=8]="PerMille",Ue[Ue.Infinity=9]="Infinity",Ue[Ue.NaN=10]="NaN",Ue[Ue.TimeSeparator=11]="TimeSeparator",Ue[Ue.CurrencyDecimal=12]="CurrencyDecimal",Ue[Ue.CurrencyGroup=13]="CurrencyGroup",Ue))();function yn(R,G){const x=(0,p.cg1)(R),Z=x[p.wAp.NumberSymbols][G];if(void 0===Z){if(G===Ue.CurrencyDecimal)return x[p.wAp.NumberSymbols][Ue.Decimal];if(G===Ue.CurrencyGroup)return x[p.wAp.NumberSymbols][Ue.Group]}return Z}const rt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ci(R){const G=parseInt(R);if(isNaN(G))throw new Error("Invalid integer literal when parsing "+R);return G}function Gr(R,G){G=encodeURIComponent(G);for(const x of R.split(";")){const Z=x.indexOf("="),[fe,Je]=-1==Z?[x,""]:[x.slice(0,Z),x.slice(Z+1)];if(fe.trim()===G)return decodeURIComponent(Je)}return null}let Ri=(()=>{class R{constructor(x,Z,fe,Je){this._iterableDiffers=x,this._keyValueDiffers=Z,this._ngEl=fe,this._renderer=Je,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(x){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof x?x.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(x){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof x?x.split(/\s+/):x,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const x=this._iterableDiffer.diff(this._rawClass);x&&this._applyIterableChanges(x)}else if(this._keyValueDiffer){const x=this._keyValueDiffer.diff(this._rawClass);x&&this._applyKeyValueChanges(x)}}_applyKeyValueChanges(x){x.forEachAddedItem(Z=>this._toggleClass(Z.key,Z.currentValue)),x.forEachChangedItem(Z=>this._toggleClass(Z.key,Z.currentValue)),x.forEachRemovedItem(Z=>{Z.previousValue&&this._toggleClass(Z.key,!1)})}_applyIterableChanges(x){x.forEachAddedItem(Z=>{if("string"!=typeof Z.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(Z.item)}`);this._toggleClass(Z.item,!0)}),x.forEachRemovedItem(Z=>this._toggleClass(Z.item,!1))}_applyClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(Z=>this._toggleClass(Z,!0)):Object.keys(x).forEach(Z=>this._toggleClass(Z,!!x[Z])))}_removeClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(Z=>this._toggleClass(Z,!1)):Object.keys(x).forEach(Z=>this._toggleClass(Z,!1)))}_toggleClass(x,Z){(x=x.trim())&&x.split(/\s+/g).forEach(fe=>{Z?this._renderer.addClass(this._ngEl.nativeElement,fe):this._renderer.removeClass(this._ngEl.nativeElement,fe)})}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},R.\u0275dir=p.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),R})();class Or{constructor(G,x,Z,fe){this.$implicit=G,this.ngForOf=x,this.index=Z,this.count=fe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cr=(()=>{class R{constructor(x,Z,fe){this._viewContainer=x,this._template=Z,this._differs=fe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const Z=this._viewContainer;x.forEachOperation((fe,Je,tt)=>{if(null==fe.previousIndex)Z.createEmbeddedView(this._template,new Or(fe.item,this._ngForOf,-1,-1),null===tt?void 0:tt);else if(null==tt)Z.remove(null===Je?void 0:Je);else if(null!==Je){const Rt=Z.get(Je);Z.move(Rt,tt),ri(Rt,fe)}});for(let fe=0,Je=Z.length;fe<Je;fe++){const Rt=Z.get(fe).context;Rt.index=fe,Rt.count=Je,Rt.ngForOf=this._ngForOf}x.forEachIdentityChange(fe=>{ri(Z.get(fe.currentIndex),fe)})}static ngTemplateContextGuard(x,Z){return!0}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},R.\u0275dir=p.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),R})();function ri(R,G){R.context.$implicit=G.item}let Qn=(()=>{class R{constructor(x,Z){this._viewContainer=x,this._context=new zn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Z}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){ls("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){ls("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,Z){return!0}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.s_b),p.Y36(p.Rgc))},R.\u0275dir=p.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),R})();class zn{constructor(){this.$implicit=null,this.ngIf=null}}function ls(R,G){if(G&&!G.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,p.AaK)(G)}'.`)}function jn(R,G){return new p.vHH(2100,"")}class Os{createSubscription(G,x){return G.subscribe({next:x,error:Z=>{throw Z}})}dispose(G){G.unsubscribe()}onDestroy(G){G.unsubscribe()}}class Ps{createSubscription(G,x){return G.then(x,Z=>{throw Z})}dispose(G){}onDestroy(G){}}const Se=new Ps,Te=new Os;let Ke=(()=>{class R{constructor(x){this._ref=x,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(x){return this._obj?x!==this._obj?(this._dispose(),this.transform(x)):this._latestValue:(x&&this._subscribe(x),this._latestValue)}_subscribe(x){this._obj=x,this._strategy=this._selectStrategy(x),this._subscription=this._strategy.createSubscription(x,Z=>this._updateLatestValue(x,Z))}_selectStrategy(x){if((0,p.QGY)(x))return Se;if((0,p.F4k)(x))return Te;throw jn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(x,Z){x===this._obj&&(this._latestValue=Z,this._ref.markForCheck())}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.sBO,16))},R.\u0275pipe=p.Yjl({name:"async",type:R,pure:!1}),R})(),vs=(()=>{class R{transform(x){return JSON.stringify(x,null,2)}}return R.\u0275fac=function(x){return new(x||R)},R.\u0275pipe=p.Yjl({name:"json",type:R,pure:!1}),R})(),br=(()=>{class R{constructor(x){this._locale=x}transform(x,Z,fe){if(!function Ki(R){return!(null==R||""===R||R!=R)}(x))return null;fe=fe||this._locale;try{return function yt(R,G,x){return function wi(R,G,x,Z,fe,Je,tt=!1){let Rt="",Xn=!1;if(isFinite(R)){let Hn=function ni(R){let Z,fe,Je,tt,Rt,G=Math.abs(R)+"",x=0;for((fe=G.indexOf("."))>-1&&(G=G.replace(".","")),(Je=G.search(/e/i))>0?(fe<0&&(fe=Je),fe+=+G.slice(Je+1),G=G.substring(0,Je)):fe<0&&(fe=G.length),Je=0;"0"===G.charAt(Je);Je++);if(Je===(Rt=G.length))Z=[0],fe=1;else{for(Rt--;"0"===G.charAt(Rt);)Rt--;for(fe-=Je,Z=[],tt=0;Je<=Rt;Je++,tt++)Z[tt]=Number(G.charAt(Je))}return fe>22&&(Z=Z.splice(0,21),x=fe-1,fe=1),{digits:Z,exponent:x,integerLen:fe}}(R);tt&&(Hn=function Dr(R){if(0===R.digits[0])return R;const G=R.digits.length-R.integerLen;return R.exponent?R.exponent+=2:(0===G?R.digits.push(0,0):1===G&&R.digits.push(0),R.integerLen+=2),R}(Hn));let Cn=G.minInt,Sn=G.minFrac,Ur=G.maxFrac;if(Je){const q=Je.match(rt);if(null===q)throw new Error(`${Je} is not a valid digit info`);const nt=q[1],on=q[3],dr=q[5];null!=nt&&(Cn=ci(nt)),null!=on&&(Sn=ci(on)),null!=dr?Ur=ci(dr):null!=on&&Sn>Ur&&(Ur=Sn)}!function Rr(R,G,x){if(G>x)throw new Error(`The minimum number of digits after fraction (${G}) is higher than the maximum (${x}).`);let Z=R.digits,fe=Z.length-R.integerLen;const Je=Math.min(Math.max(G,fe),x);let tt=Je+R.integerLen,Rt=Z[tt];if(tt>0){Z.splice(Math.max(R.integerLen,tt));for(let Sn=tt;Sn<Z.length;Sn++)Z[Sn]=0}else{fe=Math.max(0,fe),R.integerLen=1,Z.length=Math.max(1,tt=Je+1),Z[0]=0;for(let Sn=1;Sn<tt;Sn++)Z[Sn]=0}if(Rt>=5)if(tt-1<0){for(let Sn=0;Sn>tt;Sn--)Z.unshift(0),R.integerLen++;Z.unshift(1),R.integerLen++}else Z[tt-1]++;for(;fe<Math.max(0,Je);fe++)Z.push(0);let Xn=0!==Je;const Hn=G+R.integerLen,Cn=Z.reduceRight(function(Sn,Ur,_r,vr){return vr[_r]=(Ur+=Sn)<10?Ur:Ur-10,Xn&&(0===vr[_r]&&_r>=Hn?vr.pop():Xn=!1),Ur>=10?1:0},0);Cn&&(Z.unshift(Cn),R.integerLen++)}(Hn,Sn,Ur);let _r=Hn.digits,vr=Hn.integerLen;const k=Hn.exponent;let A=[];for(Xn=_r.every(q=>!q);vr<Cn;vr++)_r.unshift(0);for(;vr<0;vr++)_r.unshift(0);vr>0?A=_r.splice(vr,_r.length):(A=_r,_r=[0]);const C=[];for(_r.length>=G.lgSize&&C.unshift(_r.splice(-G.lgSize,_r.length).join(""));_r.length>G.gSize;)C.unshift(_r.splice(-G.gSize,_r.length).join(""));_r.length&&C.unshift(_r.join("")),Rt=C.join(yn(x,Z)),A.length&&(Rt+=yn(x,fe)+A.join("")),k&&(Rt+=yn(x,Ue.Exponential)+"+"+k)}else Rt=yn(x,Ue.Infinity);return Rt=R<0&&!Xn?G.negPre+Rt+G.negSuf:G.posPre+Rt+G.posSuf,Rt}(R,function vn(R,G="-"){const x={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Z=R.split(";"),fe=Z[0],Je=Z[1],tt=-1!==fe.indexOf(".")?fe.split("."):[fe.substring(0,fe.lastIndexOf("0")+1),fe.substring(fe.lastIndexOf("0")+1)],Rt=tt[0],Xn=tt[1]||"";x.posPre=Rt.substr(0,Rt.indexOf("#"));for(let Cn=0;Cn<Xn.length;Cn++){const Sn=Xn.charAt(Cn);"0"===Sn?x.minFrac=x.maxFrac=Cn+1:"#"===Sn?x.maxFrac=Cn+1:x.posSuf+=Sn}const Hn=Rt.split(",");if(x.gSize=Hn[1]?Hn[1].length:0,x.lgSize=Hn[2]||Hn[1]?(Hn[2]||Hn[1]).length:0,Je){const Cn=fe.length-x.posPre.length-x.posSuf.length,Sn=Je.indexOf("#");x.negPre=Je.substr(0,Sn).replace(/'/g,""),x.negSuf=Je.substr(Sn+Cn).replace(/'/g,"")}else x.negPre=G+x.posPre,x.negSuf=x.posSuf;return x}(function qn(R,G){return(0,p.cg1)(R)[p.wAp.NumberFormats][G]}(G,_e.Percent),yn(G,Ue.MinusSign)),G,Ue.Group,Ue.Decimal,x,!0).replace(new RegExp("%","g"),yn(G,Ue.PercentSign))}(function qi(R){if("string"==typeof R&&!isNaN(Number(R)-parseFloat(R)))return Number(R);if("number"!=typeof R)throw new Error(`${R} is not a number`);return R}(x),fe,Z)}catch(Je){throw jn()}}}return R.\u0275fac=function(x){return new(x||R)(p.Y36(p.soG,16))},R.\u0275pipe=p.Yjl({name:"percent",type:R,pure:!0}),R})();let Ni=(()=>{class R{}return R.\u0275fac=function(x){return new(x||R)},R.\u0275mod=p.oAB({type:R}),R.\u0275inj=p.cJS({}),R})();const is="browser";function Vr(R){return"server"===R}let Yr=(()=>{class R{}return R.\u0275prov=(0,p.Yz7)({token:R,providedIn:"root",factory:()=>new ss((0,p.LFG)(Oe),window)}),R})();class ss{constructor(G,x){this.document=G,this.window=x,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const x=function mi(R,G){const x=R.getElementById(G)||R.getElementsByName(G)[0];if(x)return x;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const Z=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let fe=Z.currentNode;for(;fe;){const Je=fe.shadowRoot;if(Je){const tt=Je.getElementById(G)||Je.querySelector(`[name="${G}"]`);if(tt)return tt}fe=Z.nextNode()}}return null}(this.document,G);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=G)}}scrollToElement(G){const x=G.getBoundingClientRect(),Z=x.left+this.window.pageXOffset,fe=x.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(Z-Je[0],fe-Je[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=di(this.window.history)||di(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch(G){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(G){return!1}}}function di(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class cr{}},5e3:(Pt,ze,N)=>{N.d(ze,{$8M:()=>Du,$Z:()=>Vm,AFp:()=>hE,ALo:()=>N0,AaK:()=>Ae,BQk:()=>df,CHM:()=>J,CRH:()=>G0,CZH:()=>yv,CqO:()=>jm,DdM:()=>A0,EJc:()=>vI,EiD:()=>Pu,EpF:()=>Bm,F$t:()=>$m,F4k:()=>C_,FYo:()=>_0,FiY:()=>ho,G48:()=>BI,GfV:()=>v0,Gpc:()=>ie,Hsn:()=>Jp,JOm:()=>it,JVY:()=>th,L6k:()=>Mu,LAX:()=>nh,LFG:()=>dn,LSH:()=>Jr,Lbi:()=>gE,MAs:()=>rf,NdJ:()=>Qp,O4$:()=>Ro,OlP:()=>an,Oqu:()=>mf,PXZ:()=>PI,Q6J:()=>qp,QGY:()=>Yp,Qsj:()=>yw,R0b:()=>pu,RDi:()=>di,Rgc:()=>Sg,SBq:()=>Cg,Sil:()=>wI,Suo:()=>H0,TTD:()=>Ki,TgZ:()=>Zp,VKq:()=>S0,VLi:()=>xI,W1O:()=>q0,WLB:()=>M0,X6Q:()=>UI,XFs:()=>Wt,Xpm:()=>rn,Y36:()=>zl,YKP:()=>D0,YNc:()=>Rm,Yjl:()=>se,Yz7:()=>lt,ZZ4:()=>xv,_Bn:()=>g0,_UZ:()=>cf,_Vd:()=>Ey,_c5:()=>nD,_uU:()=>Xm,aQg:()=>Rv,c2e:()=>yE,cJS:()=>tn,cg1:()=>vf,dDg:()=>EE,deG:()=>Yc,dqk:()=>_n,eBb:()=>kf,eFA:()=>DE,ekj:()=>gf,g9A:()=>pE,h0i:()=>Tf,hGG:()=>rD,hij:()=>Ea,iGM:()=>$0,ifc:()=>xn,ip1:()=>dE,kL8:()=>Gc,kcU:()=>yu,lG2:()=>de,lcZ:()=>F0,mCW:()=>Ra,n5z:()=>nc,oAB:()=>Le,oxw:()=>Nd,pB0:()=>td,q3G:()=>er,q4F:()=>E0,qLn:()=>ai,qOj:()=>Sp,qZA:()=>Hi,qzn:()=>Xa,sBO:()=>jI,sIi:()=>Hl,s_b:()=>Dy,soG:()=>vv,tBr:()=>fs,tb:()=>mE,tp0:()=>wo,uIk:()=>tf,vHH:()=>qe,vpe:()=>ul,wAp:()=>Mn,xp6:()=>zf,yhl:()=>uc,ynx:()=>kd,z2F:()=>Cv,z3N:()=>Bo,zSh:()=>gp,zs3:()=>pa});var p=N(7579),H=N(727),Y=N(9751),ve=N(6451),pe=N(3099);function Ce(n){for(let r in n)if(n[r]===Ce)return r;throw Error("Could not find renamed property on target object.")}function Oe(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Ae(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ae).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ve(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const le=Ce({__forward_ref__:Ce});function ie(n){return n.__forward_ref__=ie,n.toString=function(){return Ae(this())},n}function ge(n){return Be(n)?n():n}function Be(n){return"function"==typeof n&&n.hasOwnProperty(le)&&n.__forward_ref__===ie}class qe extends Error{constructor(r,s){super(function ht(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ne(n){return"string"==typeof n?n:null==n?"":String(n)}function Re(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ne(n)}function ee(n,r){const s=r?` in ${r}`:"";throw new qe(-201,`No provider for ${Re(n)} found${s}`)}function mt(n,r){null==n&&function Tt(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function lt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function yn(n){return qn(n,Lt)||qn(n,ur)}function qn(n,r){return n.hasOwnProperty(r)?n[r]:null}function nn(n){return n&&(n.hasOwnProperty(En)||n.hasOwnProperty(Un))?n[En]:null}const Lt=Ce({\u0275prov:Ce}),En=Ce({\u0275inj:Ce}),ur=Ce({ngInjectableDef:Ce}),Un=Ce({ngInjectorDef:Ce});var Wt=(()=>((Wt=Wt||{})[Wt.Default=0]="Default",Wt[Wt.Host=1]="Host",Wt[Wt.Self=2]="Self",Wt[Wt.SkipSelf=4]="SkipSelf",Wt[Wt.Optional=8]="Optional",Wt))();let zt;function xt(n){const r=zt;return zt=n,r}function Hr(n,r,s){const a=yn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Wt.Optional?null:void 0!==r?r:void ee(Ae(n),"Injector")}function nr(n){return{toString:n}.toString()}var xr=(()=>((xr=xr||{})[xr.OnPush=0]="OnPush",xr[xr.Default=1]="Default",xr))(),xn=(()=>{return(n=xn||(xn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",xn;var n})();const Nt="undefined"!=typeof globalThis&&globalThis,cn="undefined"!=typeof window&&window,pr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_n=Nt||"undefined"!=typeof global&&global||cn||pr,gr={},Qt=[],lr=Ce({\u0275cmp:Ce}),wn=Ce({\u0275dir:Ce}),Ut=Ce({\u0275pipe:Ce}),ct=Ce({\u0275mod:Ce}),Bt=Ce({\u0275fac:Ce}),Yt=Ce({__NG_ELEMENT_ID__:Ce});let In=0;function rn(n){return nr(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===xr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Qt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||xn.Emulated,id:"c",styles:n.styles||Qt,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.directives,h=n.features,y=n.pipes;return a.id+=In++,a.inputs=we(n.inputs,s),a.outputs=we(n.outputs),h&&h.forEach(w=>w(a)),a.directiveDefs=l?()=>("function"==typeof l?l():l).map(te):null,a.pipeDefs=y?()=>("function"==typeof y?y():y).map(Ee):null,a})}function te(n){return be(n)||function rt(n){return n[wn]||null}(n)}function Ee(n){return function Ct(n){return n[Ut]||null}(n)}const Ze={};function Le(n){return nr(()=>{const r={type:n.type,bootstrap:n.bootstrap||Qt,declarations:n.declarations||Qt,imports:n.imports||Qt,exports:n.exports||Qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Ze[n.id]=n.type),r})}function we(n,r){if(null==n)return gr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const de=rn;function se(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function be(n){return n[lr]||null}function Jt(n,r){const s=n[ct]||null;if(!s&&!0===r)throw new Error(`Type ${Ae(n)} does not have '\u0275mod' property.`);return s}function Wr(n){return Array.isArray(n)&&"object"==typeof n[1]}function fi(n){return Array.isArray(n)&&!0===n[1]}function Wi(n){return 0!=(8&n.flags)}function yr(n){return 2==(2&n.flags)}function Cs(n){return 1==(1&n.flags)}function pi(n){return null!==n.template}function Oi(n){return 0!=(512&n[2])}function br(n,r){return n.hasOwnProperty(Bt)?n[Bt]:null}class rs{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ki(){return qi}function qi(n){return n.type.prototype.ngOnChanges&&(n.setInput=no),ks}function ks(){const n=is(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===gr)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function no(n,r,s,a){const l=is(n)||function Zr(n,r){return n[Ni]=r}(n,{previous:gr,current:null}),h=l.current||(l.current={}),y=l.previous,w=this.declaredInputs[s],b=y[w];h[w]=new rs(b&&b.currentValue,r,y===gr),n[a]=r}Ki.ngInherit=!0;const Ni="__ngSimpleChanges__";function is(n){return n[Ni]||null}let ss;function di(n){ss=n}function cr(n){return!!n.listen}const R={createRenderer:(n,r)=>function mi(){return void 0!==ss?ss:"undefined"!=typeof document?document:void 0}()};function x(n){for(;Array.isArray(n);)n=n[0];return n}function Je(n,r){return x(r[n])}function tt(n,r){return x(r[n.index])}function Xn(n,r){return n.data[r]}function Hn(n,r){return n[r]}function Cn(n,r){const s=r[n];return Wr(s)?s:s[0]}function Sn(n){return 4==(4&n[2])}function Ur(n){return 128==(128&n[2])}function vr(n,r){return null==r?null:n[r]}function k(n){n[18]=0}function A(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const C={lFrame:$s(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function os(){return C.bindingsEnabled}function M(){return C.lFrame.lView}function O(){return C.lFrame.tView}function J(n){return C.lFrame.contextLView=n,n[8]}function oe(){let n=xe();for(;null!==n&&64===n.type;)n=n.parent;return n}function xe(){return C.lFrame.currentTNode}function pt(n,r){const s=C.lFrame;s.currentTNode=n,s.isParent=r}function sn(){return C.lFrame.isParent}function Ht(){C.lFrame.isParent=!1}function kr(){return C.isInCheckNoChangesMode}function hr(n){C.isInCheckNoChangesMode=n}function Zn(){const n=C.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Er(){return C.lFrame.bindingIndex++}function Xr(n,r){const s=C.lFrame;s.bindingIndex=s.bindingRootIndex=n,ds(r)}function ds(n){C.lFrame.currentDirectiveIndex=n}function js(){return C.lFrame.currentQueryIndex}function Mo(n){C.lFrame.currentQueryIndex=n}function $a(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Ho(n,r,s){if(s&Wt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&Wt.Host||(l=$a(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=C.lFrame=ta();return a.currentTNode=r,a.lView=n,!0}function go(n){const r=ta(),s=n[1];C.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ta(){const n=C.lFrame,r=null===n?null:n.child;return null===r?$s(n):r}function $s(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ia(){const n=C.lFrame;return C.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ns=Ia;function so(){const n=Ia();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function bi(){return C.lFrame.selectedIndex}function xo(n){C.lFrame.selectedIndex=n}function si(){const n=C.lFrame;return Xn(n.tView,n.selectedIndex)}function Ro(){C.lFrame.currentNamespace="svg"}function yu(){!function Ti(){C.lFrame.currentNamespace=null}()}function Qi(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:U,ngOnDestroy:W}=h;y&&(n.contentHooks||(n.contentHooks=[])).push(-s,y),w&&((n.contentHooks||(n.contentHooks=[])).push(s,w),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,w)),b&&(n.viewHooks||(n.viewHooks=[])).push(-s,b),U&&((n.viewHooks||(n.viewHooks=[])).push(s,U),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,U)),null!=W&&(n.destroyHooks||(n.destroyHooks=[])).push(s,W)}}function Hs(n,r,s){ia(n,r,3,s)}function Fs(n,r,s,a){(3&n[2])===s&&ia(n,r,s,a)}function oi(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function ia(n,r,s,a){const h=null!=a?a:-1,y=r.length-1;let w=0;for(let b=void 0!==a?65535&n[18]:0;b<y;b++)if("number"==typeof r[b+1]){if(w=r[b],null!=a&&w>=a)break}else r[b]<0&&(n[18]+=65536),(w<h||-1==h)&&(Ha(n,s,r,b),n[18]=(4294901760&n[18])+b+2),b++}function Ha(n,r,s,a){const l=s[a]<0,h=s[a+1],w=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(w)}finally{}}}else try{h.call(w)}finally{}}class oo{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Da(n,r,s){const a=cr(n);let l=0;for(;l<s.length;){const h=s[l];if("number"==typeof h){if(0!==h)break;l++;const y=s[l++],w=s[l++],b=s[l++];a?n.setAttribute(r,w,b,y):r.setAttributeNS(y,w,b)}else{const y=h,w=s[++l];yo(y)?a&&n.setProperty(r,y,w):a?n.setAttribute(r,y,w):r.setAttribute(y,w),l++}}return l}function Ws(n){return 3===n||4===n||6===n}function yo(n){return 64===n.charCodeAt(0)}function Go(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||Wo(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function Wo(n,r,s,a,l){let h=0,y=n.length;if(-1===r)y=-1;else for(;h<n.length;){const w=n[h++];if("number"==typeof w){if(w===r){y=-1;break}if(w>r){y=h-1;break}}}for(;h<n.length;){const w=n[h];if("number"==typeof w)break;if(w===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==y&&(n.splice(y,0,r),h=y+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Ca(n){return-1!==n}function jr(n){return 32767&n}function Ls(n,r){let s=function Wa(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let ba=!0;function Rs(n){const r=ba;return ba=n,r}let E=0;function S(n,r){const s=j(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,F(a.data,n),F(r,null),F(a.blueprint,null));const l=ne(n,r),h=n.injectorIndex;if(Ca(l)){const y=jr(l),w=Ls(l,r),b=w[1].data;for(let U=0;U<8;U++)r[h+U]=w[y+U]|b[y+U]}return r[h+8]=l,h}function F(n,r){n.push(0,0,0,0,0,0,0,0,r)}function j(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ne(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){const h=l[1],y=h.type;if(a=2===y?h.declTNode:1===y?l[6]:null,null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function ye(n,r,s){!function _(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Yt)&&(a=s[Yt]),null==a&&(a=s[Yt]=E++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function st(n,r,s){if(s&Wt.Optional)return n;ee(r,"NodeInjector")}function Ot(n,r,s,a){if(s&Wt.Optional&&void 0===a&&(a=null),0==(s&(Wt.Self|Wt.Host))){const l=n[9],h=xt(void 0);try{return l?l.get(r,a,s&Wt.Optional):Hr(r,a,s&Wt.Optional)}finally{xt(h)}}return st(a,r,s)}function hn(n,r,s,a=Wt.Default,l){if(null!==n){const h=function wu(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Yt)?n[Yt]:void 0;return"number"==typeof r?r>=0?255&r:$e:r}(s);if("function"==typeof h){if(!Ho(r,n,a))return a&Wt.Host?st(l,s,a):Ot(r,s,a,l);try{const y=h(a);if(null!=y||a&Wt.Optional)return y;ee(s)}finally{Ns()}}else if("number"==typeof h){let y=null,w=j(n,r),b=-1,U=a&Wt.Host?r[16][6]:null;for((-1===w||a&Wt.SkipSelf)&&(b=-1===w?ne(n,r):r[w+8],-1!==b&&Iu(a,!1)?(y=r[1],w=jr(b),r=Ls(b,r)):w=-1);-1!==w;){const W=r[1];if(_o(h,w,W.data)){const re=gt(w,r,s,y,a,U);if(re!==_t)return re}b=r[w+8],-1!==b&&Iu(a,r[1].data[w+8]===U)&&_o(h,w,r)?(y=W,w=jr(b),r=Ls(b,r)):w=-1}}}return Ot(r,s,a,l)}const _t={};function $e(){return new vo(oe(),M())}function gt(n,r,s,a,l,h){const y=r[1],w=y.data[n+8],W=$r(w,y,s,null==a?yr(w)&&ba:a!=y&&0!=(3&w.type),l&Wt.Host&&h===w);return null!==W?ws(r,y,W,w):_t}function $r(n,r,s,a,l){const h=n.providerIndexes,y=r.data,w=1048575&h,b=n.directiveStart,W=h>>20,Ie=l?w+W:n.directiveEnd;for(let He=a?w:w+W;He<Ie;He++){const dt=y[He];if(He<b&&s===dt||He>=b&&dt.type===s)return He}if(l){const He=y[b];if(He&&pi(He)&&He.type===s)return b}return null}function ws(n,r,s,a){let l=n[s];const h=r.data;if(function sa(n){return n instanceof oo}(l)){const y=l;y.resolving&&function Et(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new qe(-200,`Circular dependency in DI detected for ${n}${s}`)}(Re(h[s]));const w=Rs(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?xt(y.injectImpl):null;Ho(n,a,Wt.Default);try{l=n[s]=y.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function ra(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const y=qi(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==b&&xt(b),Rs(w),y.resolving=!1,Ns()}}return l}function _o(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Iu(n,r){return!(n&Wt.Self||n&Wt.Host&&r)}class vo{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return hn(this._tNode,this._lView,r,a,s)}}function nc(n){return nr(()=>{const r=n.prototype.constructor,s=r[Bt]||oa(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[Bt]||oa(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function oa(n){return Be(n)?()=>{const r=oa(ge(n));return r&&r()}:br(n)}function Du(n){return function at(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Ws(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(oe(),n)}const Xi="__parameters__";function uo(n,r,s){return nr(()=>{const a=function kn(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const y=new l(...h);return w.annotation=y,w;function w(b,U,W){const re=b.hasOwnProperty(Xi)?b[Xi]:Object.defineProperty(b,Xi,{value:[]})[Xi];for(;re.length<=W;)re.push(null);return(re[W]=re[W]||[]).push(y),b}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class an{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=lt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Yc=new an("AnalyzeForEntryComponents");function Ji(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Ji(a,r)):r!==n&&r.push(a)}return r}function Us(n,r){n.forEach(s=>Array.isArray(s)?Us(s,r):r(s))}function Aa(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function zo(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Ui(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function Bi(n,r,s){let a=Eo(n,r);return a>=0?n[1|a]=s:(a=~a,function Cu(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function lo(n,r){const s=Eo(n,r);if(s>=0)return n[1|s]}function Eo(n,r){return function Ko(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),y=n[h<<s];if(r===y)return h<<s;y>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const qo={},Za="__NG_DI_FLAG__",hl="ngTempTokenPath",P=/\n/gm,ce="__source",Pe=Ce({provide:String,useValue:Ce});let Qe;function St(n){const r=Qe;return Qe=n,r}function Xt(n,r=Wt.Default){if(void 0===Qe)throw new qe(203,"");return null===Qe?Hr(n,void 0,r):Qe.get(n,r&Wt.Optional?null:void 0,r)}function dn(n,r=Wt.Default){return(function On(){return zt}()||Xt)(ge(n),r)}const or=dn;function Nn(n){const r=[];for(let s=0;s<n.length;s++){const a=ge(n[s]);if(Array.isArray(a)){if(0===a.length)throw new qe(900,"");let l,h=Wt.Default;for(let y=0;y<a.length;y++){const w=a[y],b=Li(w);"number"==typeof b?-1===b?l=w.token:h|=b:l=w}r.push(dn(l,h))}else r.push(dn(a))}return r}function zr(n,r){return n[Za]=r,n.prototype[Za]=r,n}function Li(n){return n[Za]}const fs=zr(uo("Inject",n=>({token:n})),-1),ho=zr(uo("Optional"),8),wo=zr(uo("SkipSelf"),4);let Io;function Vo(n){var r;return(null===(r=function ic(){if(void 0===Io&&(Io=null,_n.trustedTypes))try{Io=_n.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Io}())||void 0===r?void 0:r.createHTML(n))||n}class Uo{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Jd extends Uo{getTypeName(){return"HTML"}}class Jc extends Uo{getTypeName(){return"Style"}}class ed extends Uo{getTypeName(){return"Script"}}class ac extends Uo{getTypeName(){return"URL"}}class eh extends Uo{getTypeName(){return"ResourceURL"}}function Bo(n){return n instanceof Uo?n.changingThisBreaksApplicationSecurity:n}function Xa(n,r){const s=uc(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function uc(n){return n instanceof Uo&&n.getTypeName()||null}function th(n){return new Jd(n)}function Mu(n){return new Jc(n)}function kf(n){return new ed(n)}function nh(n){return new ac(n)}function td(n){return new eh(n)}class eu{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Vo(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class rh{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=Vo(r),s;const a=this.inertDocument.createElement("body");return a.innerHTML=Vo(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const s=r.attributes;for(let l=s.length-1;0<l;l--){const y=s.item(l).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&r.removeAttribute(y)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const xa=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ih=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ra(n){return(n=String(n)).match(xa)||n.match(ih)?n:"unsafe:"+n}function Do(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function vl(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const ji=Do("area,br,col,hr,img,wbr"),tu=Do("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),El=Do("rp,rt"),cc=vl(ji,vl(tu,Do("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vl(El,Do("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vl(El,tu)),dc=Do("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),nu=Do("srcset"),wl=vl(dc,nu,Do("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Do("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),oh=Do("script,style,template");class Il{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!cc.hasOwnProperty(s))return this.sanitizedSomething=!0,!oh.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const h=a.item(l),y=h.name,w=y.toLowerCase();if(!wl.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let b=h.value;dc[w]&&(b=Ra(b)),nu[w]&&(n=b,b=(n=String(n)).split(",").map(r=>Ra(r.trim())).join(", ")),this.buf.push(" ",y,'="',$i(b),'"')}var n;return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();cc.hasOwnProperty(s)&&!ji.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push($i(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Dl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nd=/([^\#-~ |!])/g;function $i(n){return n.replace(/&/g,"&amp;").replace(Dl,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(nd,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ar;function Pu(n,r){let s=null;try{ar=ar||function Ja(n){const r=new rh(n);return function xu(){try{return!!(new window.DOMParser).parseFromString(Vo(""),"text/html")}catch(n){return!1}}()?new eu(r):r}(n);let a=r?String(r):"";s=ar.getInertBodyElement(a);let l=5,h=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=h,h=s.innerHTML,s=ar.getInertBodyElement(a)}while(a!==h);return Vo((new Il).sanitizeChildren(hc(s)||s))}finally{if(s){const a=hc(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function hc(n){return"content"in n&&function Oa(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var er=(()=>((er=er||{})[er.NONE=0]="NONE",er[er.HTML=1]="HTML",er[er.STYLE=2]="STYLE",er[er.SCRIPT=3]="SCRIPT",er[er.URL=4]="URL",er[er.RESOURCE_URL=5]="RESOURCE_URL",er))();function Jr(n){const r=function bl(){const n=M();return n&&n[12]}();return r?r.sanitize(er.URL,n)||"":Xa(n,"URL")?Bo(n):Ra(Ne(n))}const iu="__ngContext__";function es(n,r){n[iu]=r}function gc(n){const r=function Zo(n){return n[iu]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Ml(n){return n.ngOriginalError}function Fu(n,...r){n.error(...r)}class ai{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function hh(n){return n&&n.ngErrorLogger||Fu}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ml(r);for(;s&&Ml(s);)s=Ml(s);return s||null}}const Ff=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(_n))();function f(n){return n instanceof Function?n():n}var it=(()=>((it=it||{})[it.Important=1]="Important",it[it.DashCase=2]="DashCase",it))();function fn(n,r){return undefined(n,r)}function Si(n){const r=n[3];return fi(r)?r[3]:r}function Ol(n){return _c(n[13])}function Pa(n){return _c(n[4])}function _c(n){for(;null!==n&&!fi(n);)n=n[4];return n}function ka(n,r,s,a,l){if(null!=a){let h,y=!1;fi(a)?h=a:Wr(a)&&(y=!0,a=a[0]);const w=x(a);0===n&&null!==s?null==l?ut(r,s,w):Vu(r,s,w,l||null,!0):1===n&&null!==s?Vu(r,s,w,l||null,!0):2===n?function wh(n,r,s){const a=yh(n,r);a&&function ca(n,r,s,a){cr(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,w,y):3===n&&r.destroyNode(w),null!=h&&function Ih(n,r,s,a,l){const h=s[7];h!==x(s)&&ka(r,n,a,h,l);for(let w=10;w<s.length;w++){const b=s[w];wc(b[1],b,n,r,a,h)}}(r,n,h,s,l)}}function Ec(n,r,s){if(cr(n))return n.createElement(r,s);{const a=null!==s?function Yr(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Pg(n,r){const s=n[9],a=s.indexOf(r),l=r[3];1024&r[2]&&(r[2]&=-1025,A(l,-1)),s.splice(a,1)}function Bf(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&Pg(l,a),r>0&&(n[s-1][4]=a[4]);const h=zo(n,10+r);!function Vf(n,r){wc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const y=h[19];null!==y&&y.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function kg(n,r){if(!(256&r[2])){const s=r[11];cr(s)&&s.destroyNode&&wc(n,r,s,3,null,null),function My(n){let r=n[13];if(!r)return mh(n[1],n);for(;r;){let s=null;if(Wr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Wr(r)&&mh(r[1],r),r=r[3];null===r&&(r=n),Wr(r)&&mh(r[1],r),s=r&&r[4]}r=s}}(r)}}function mh(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Ng(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof oo)){const h=s[a+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const w=l[h[y]],b=h[y+1];try{b.call(w)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function Oy(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const y=s[h+1],w="function"==typeof y?y(r):x(r[y]),b=a[l=s[h+2]],U=s[h+3];"boolean"==typeof U?w.removeEventListener(s[h],b,U):U>=0?a[l=U]():a[l=-U].unsubscribe(),h+=2}else{const y=a[l=s[h+1]];s[h].call(y)}if(null!==a){for(let h=l+1;h<a.length;h++)a[h]();r[7]=null}}(n,r),1===r[1].type&&cr(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&fi(r[3])){s!==r[3]&&Pg(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function Fg(n,r,s){return function jf(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===xn.None||l===xn.Emulated)return null}return tt(a,s)}(n,r.parent,s)}function Vu(n,r,s,a,l){cr(n)?n.insertBefore(r,s,a,l):r.insertBefore(s,a,l)}function ut(n,r,s){cr(n)?n.appendChild(r,s):r.appendChild(s)}function dd(n,r,s,a,l){null!==a?Vu(n,r,s,a,l):ut(n,r,s)}function yh(n,r){return cr(n)?n.parentNode(r):r.parentNode}function Uu(n,r,s){return Bu(n,r,s)}let Bu=function Lg(n,r,s){return 40&n.type?tt(n,s):null};function fd(n,r,s,a){const l=Fg(n,a,r),h=r[11],w=Uu(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let b=0;b<s.length;b++)dd(h,l,s[b],w,!1);else dd(h,l,s,w,!1)}function us(n,r){if(null!==r){const s=r.type;if(3&s)return tt(r,n);if(4&s)return pd(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return us(n,a);{const l=n[r.index];return fi(l)?pd(-1,l):x(l)}}if(32&s)return fn(r,n)()||x(n[r.index]);{const a=Eh(n,r);return null!==a?Array.isArray(a)?a[0]:us(Si(n[16]),a):us(n,r.next)}}return null}function Eh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function pd(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return us(a,l)}return r[7]}function Na(n,r,s,a,l,h,y){for(;null!=s;){const w=a[s.index],b=s.type;if(y&&0===r&&(w&&es(x(w),a),s.flags|=4),64!=(64&s.flags))if(8&b)Na(n,r,s.child,a,l,h,!1),ka(r,n,l,w,h);else if(32&b){const U=fn(s,a);let W;for(;W=U();)ka(r,n,l,W,h);ka(r,n,l,w,h)}else 16&b?$f(n,r,a,s,l,h):ka(r,n,l,w,h);s=y?s.projectionNext:s.next}}function wc(n,r,s,a,l,h){Na(s,a,n.firstChild,r,l,h,!1)}function $f(n,r,s,a,l,h){const y=s[16],b=y[6].projection[a.projection];if(Array.isArray(b))for(let U=0;U<b.length;U++)ka(r,n,l,b[U],h);else Na(n,r,b,y[3],l,h,!0)}function ju(n,r,s){cr(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function $u(n,r,s){cr(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function Ic(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Dh="ng-template";function Hf(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==Ic(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Gf(n){return 4===n.type&&n.value!==Dh}function Ny(n,r,s){return r===(4!==n.type||s?n.value:Dh)}function Vg(n,r,s){let a=4;const l=n.attrs||[],h=function Fy(n){for(let r=0;r<n.length;r++)if(Ws(n[r]))return r;return n.length}(l);let y=!1;for(let w=0;w<r.length;w++){const b=r[w];if("number"!=typeof b){if(!y)if(4&a){if(a=2|1&a,""!==b&&!Ny(n,b,s)||""===b&&1===r.length){if(Qo(a))return!1;y=!0}}else{const U=8&a?b:r[++w];if(8&a&&null!==n.attrs){if(!Hf(n.attrs,U,s)){if(Qo(a))return!1;y=!0}continue}const re=Wf(8&a?"class":b,l,Gf(n),s);if(-1===re){if(Qo(a))return!1;y=!0;continue}if(""!==U){let Ie;Ie=re>h?"":l[re+1].toLowerCase();const He=8&a?Ie:null;if(He&&-1!==Ic(He,U,0)||2&a&&U!==Ie){if(Qo(a))return!1;y=!0}}}}else{if(!y&&!Qo(a)&&!Qo(b))return!1;if(y&&Qo(b))continue;y=!1,a=b|1&a}}return Qo(a)||y}function Qo(n){return 0==(1&n)}function Wf(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const y=r[l];if(y===n)return l;if(3===y||6===y)h=!0;else{if(1===y||2===y){let w=r[++l];for(;"string"==typeof w;)w=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=h?1:2}return-1}return function Ug(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Dc(n,r,s=!1){for(let a=0;a<r.length;a++)if(Vg(n,r[a],s))return!0;return!1}function Ly(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let l=0;l<n.length;l++)if(n[l]!==a[l])continue e;return!0}}return!1}function Bg(n,r){return n?":not("+r.trim()+")":r}function Vy(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let y=n[s];if("string"==typeof y)if(2&a){const w=n[++s];l+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!Qo(y)&&(r+=Bg(h,l),l=""),a=y,h=h||!Qo(a);s++}return""!==l&&(r+=Bg(h,l)),r}const Rn={};function zf(n){jg(O(),M(),bi()+n,kr())}function jg(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&Hs(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Fs(r,h,0,s)}xo(s)}function Cc(n,r){return n<<17|r<<2}function Qs(n){return n>>17&32767}function Nl(n){return 2|n}function Xo(n){return(131068&n)>>2}function bc(n,r){return-131069&n|r<<2}function Xs(n){return 1|n}function Qg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const y=n.data[h];Mo(l),y.contentQueries(2,r[h],h)}}}function La(n,r,s,a,l,h,y,w,b,U){const W=r.blueprint.slice();return W[0]=l,W[2]=140|a,k(W),W[3]=W[15]=n,W[8]=s,W[10]=y||n&&n[10],W[11]=w||n&&n[11],W[12]=b||n&&n[12]||null,W[9]=U||n&&n[9]||null,W[6]=h,W[16]=2==r.type?n[16]:W,W}function ha(n,r,s,a,l){let h=n.data[r];if(null===h)h=function _d(n,r,s,a,l){const h=xe(),y=sn(),b=n.data[r]=function qy(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=b),null!==h&&(y?null==h.child&&null!==b.parent&&(h.child=b):null===h.next&&(h.next=b)),b}(n,r,s,a,l),function Yi(){return C.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const y=function Ye(){const n=C.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return pt(h,!0),h}function uu(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Sc(n,r,s){go(r);try{const a=n.viewQuery;null!==a&&hp(1,a,s);const l=n.template;null!==l&&em(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Qg(n,r),n.staticViewQueries&&hp(2,n.viewQuery,s);const h=n.components;null!==h&&function Ky(n,r){for(let s=0;s<r.length;s++)lp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,so()}}function Vl(n,r,s,a){const l=r[2];if(256==(256&l))return;go(r);const h=kr();try{k(r),function yi(n){return C.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&em(n,r,s,2,a);const y=3==(3&l);if(!h)if(y){const U=n.preOrderCheckHooks;null!==U&&Hs(r,U,null)}else{const U=n.preOrderHooks;null!==U&&Fs(r,U,0,null),oi(r,0)}if(function up(n){for(let r=Ol(n);null!==r;r=Pa(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(1024&l[2])&&A(h,1),l[2]|=1024}}}(r),function Mc(n){for(let r=Ol(n);null!==r;r=Pa(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];Ur(a)&&Vl(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Qg(n,r),!h)if(y){const U=n.contentCheckHooks;null!==U&&Hs(r,U)}else{const U=n.contentHooks;null!==U&&Fs(r,U,1),oi(r,1)}!function Yg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)xo(~l);else{const h=l,y=s[++a],w=s[++a];Xr(y,h),w(2,r[h])}}}finally{xo(-1)}}(n,r);const w=n.components;null!==w&&function Xg(n,r){for(let s=0;s<r.length;s++)Bh(n,r[s])}(r,w);const b=n.viewQuery;if(null!==b&&hp(2,b,a),!h)if(y){const U=n.viewCheckHooks;null!==U&&Hs(r,U)}else{const U=n.viewHooks;null!==U&&Fs(r,U,2),oi(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),h||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,A(r[3],-1))}finally{so()}}function Jg(n,r,s,a){const l=r[10],h=!kr(),y=Sn(r);try{h&&!y&&l.begin&&l.begin(),y&&Sc(n,r,a),Vl(n,r,s,a)}finally{h&&!y&&l.end&&l.end()}}function em(n,r,s,a,l){const h=bi(),y=2&a;try{xo(-1),y&&r.length>20&&jg(n,r,20,kr()),s(a,l)}finally{xo(h)}}function Ph(n,r,s){if(Wi(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const y=n.data[h];y.contentQueries&&y.contentQueries(1,s[h],h)}}}function Xf(n,r,s){!os()||(function am(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||S(s,r),es(a,r);const y=s.initialInputs;for(let w=l;w<h;w++){const b=n.data[w],U=pi(b);U&&Jy(r,s,b);const W=ws(r,n,w,s);es(W,r),null!==y&&e_(0,w-l,W,b,0,y),U&&(Cn(s.index,r)[8]=W)}}(n,r,s,tt(s,r)),128==(128&s.flags)&&function Qy(n,r,s){const a=s.directiveStart,l=s.directiveEnd,y=s.index,w=function Ir(){return C.lFrame.currentDirectiveIndex}();try{xo(y);for(let b=a;b<l;b++){const U=n.data[b],W=r[b];ds(b),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&um(U,W)}}finally{xo(-1),ds(w)}}(n,r,s))}function vd(n,r,s=tt){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const y=a[h+1],w=-1===y?s(r,n):n[y];n[l++]=w}}}function tm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=kh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function kh(n,r,s,a,l,h,y,w,b,U){const W=20+a,re=W+l,Ie=function Jf(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Rn);return s}(W,re),He="function"==typeof U?U():U;return Ie[1]={type:n,blueprint:Ie,template:s,queries:null,viewQuery:w,declTNode:r,data:Ie.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:He,incompleteFirstPass:!1}}function rm(n,r,s,a){const l=Gh(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&fp(n).push(a,l.length-1))}function im(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function wd(n,r,s,a){let l=!1;if(os()){const h=function Xy(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const y=a[h];Dc(s,y.selectors,!1)&&(l||(l=[]),ye(S(s,r),n,y.type),pi(y)?(sp(n,s),l.unshift(y)):l.push(y))}return l}(n,r,s),y=null===a?null:{"":-1};if(null!==h){l=!0,Lh(s,n.data.length,h.length);for(let W=0;W<h.length;W++){const re=h[W];re.providersResolver&&re.providersResolver(re)}let w=!1,b=!1,U=uu(n,r,h.length,null);for(let W=0;W<h.length;W++){const re=h[W];s.mergedAttrs=Go(s.mergedAttrs,re.hostAttrs),op(n,s,r,U,re),Id(U,re,y),null!==re.contentQueries&&(s.flags|=8),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(s.flags|=128);const Ie=re.type.prototype;!w&&(Ie.ngOnChanges||Ie.ngOnInit||Ie.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),w=!0),!b&&(Ie.ngOnChanges||Ie.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),b=!0),U++}!function Zy(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,y=[];let w=null,b=null;for(let U=r.directiveStart;U<a;U++){const W=l[U],re=W.inputs,Ie=null===h||Gf(r)?null:t_(re,h);y.push(Ie),w=im(re,U,w),b=im(W.outputs,U,b)}null!==w&&(w.hasOwnProperty("class")&&(r.flags|=16),w.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=y,r.inputs=w,r.outputs=b}(n,s)}y&&function Fh(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new qe(-301,!1);a.push(r[l],h)}}}(s,a,y)}return s.mergedAttrs=Go(s.mergedAttrs,s.attrs),l}function ip(n,r,s,a,l,h){const y=h.hostBindings;if(y){let w=n.hostBindingOpCodes;null===w&&(w=n.hostBindingOpCodes=[]);const b=~r.index;(function Yy(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(w)!=b&&w.push(b),w.push(a,l,y)}}function um(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function sp(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Id(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;pi(r)&&(s[""]=n)}}function Lh(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function op(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=br(l.type)),y=new oo(h,pi(l),null);n.blueprint[a]=y,s[a]=y,ip(n,r,0,a,uu(n,s,l.hostVars,Rn),l)}function Jy(n,r,s){const a=tt(r,n),l=tm(s),h=n[10],y=xc(n,La(n,l,null,s.onPush?64:16,a,r,h,h.createRenderer(a,s),null,null));n[r.index]=y}function Va(n,r,s,a,l,h){const y=tt(n,r);!function ap(n,r,s,a,l,h,y){if(null==h)cr(n)?n.removeAttribute(r,l,s):r.removeAttribute(l);else{const w=null==y?Ne(h):y(h,a||"",l);cr(n)?n.setAttribute(r,l,w,s):s?r.setAttributeNS(s,l,w):r.setAttribute(l,w)}}(r[11],y,h,n.value,s,a,l)}function e_(n,r,s,a,l,h){const y=h[r];if(null!==y){const w=a.setInput;for(let b=0;b<y.length;){const U=y[b++],W=y[b++],re=y[b++];null!==w?a.setInput(s,re,U,W):s[W]=re}}}function t_(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Uh(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Bh(n,r){const s=Cn(r,n);if(Ur(s)){const a=s[1];80&s[2]?Vl(a,s,a.template,s[8]):s[5]>0&&Ul(s)}}function Ul(n){for(let a=Ol(n);null!==a;a=Pa(a))for(let l=10;l<a.length;l++){const h=a[l];if(1024&h[2]){const y=h[1];Vl(y,h,y.template,h[8])}else h[5]>0&&Ul(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=Cn(s[a],n);Ur(l)&&l[5]>0&&Ul(l)}}function lp(n,r){const s=Cn(r,n),a=s[1];(function lm(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Sc(a,s,s[8])}function xc(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Dd(n){for(;n;){n[2]|=64;const r=Si(n);if(Oi(n)&&!r)return n;n=r}return null}function cp(n,r,s){const a=r[10];a.begin&&a.begin();try{Vl(n,r,n.template,s)}catch(l){throw Wh(r,l),l}finally{a.end&&a.end()}}function $h(n){!function jh(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=gc(s),l=a[1];Jg(l,a,l.template,s)}}(n[8])}function hp(n,r,s){Mo(0),r(n,s)}const Hh=(()=>Promise.resolve(null))();function Gh(n){return n[7]||(n[7]=[])}function fp(n){return n.cleanup||(n.cleanup=[])}function Wh(n,r){const s=n[9],a=s?s.get(ai,null):null;a&&a.handleError(r)}function dm(n,r,s,a,l){for(let h=0;h<s.length;){const y=s[h++],w=s[h++],b=r[y],U=n.data[y];null!==U.setInput?U.setInput(b,l,a,w):b[w]=l}}function lu(n,r,s){const a=Je(r,n);!function ud(n,r,s){cr(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Cd(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let y=0;y<r.length;y++){const w=r[y];"number"==typeof w?h=w:1==h?l=Ve(l,w):2==h&&(a=Ve(a,w+": "+r[++y]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}const pp=new an("INJECTOR",-1);class zh{get(r,s=qo){if(s===qo){const a=new Error(`NullInjectorError: No provider for ${Ae(r)}!`);throw a.name="NullInjectorError",a}return s}}const gp=new an("Set Injector scope."),jl={},i_={};let bd;function mp(){return void 0===bd&&(bd=new zh),bd}function Kh(n,r=null,s=null,a){const l=qh(n,r,s,a);return l._resolveInjectorDefTypes(),l}function qh(n,r=null,s=null,a){return new yp(n,s,r||mp(),a)}class yp{constructor(r,s,a,l=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];s&&Us(s,w=>this.processProvider(w,r,s)),Us([r],w=>this.processInjectorType(w,[],h)),this.records.set(pp,fa(void 0,this));const y=this.records.get(gp);this.scope=null!=y?y.value:null,this.source=l||("object"==typeof r?null:Ae(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=qo,a=Wt.Default){this.assertNotDestroyed();const l=St(this),h=xt(void 0);try{if(!(a&Wt.SkipSelf)){let w=this.records.get(r);if(void 0===w){const b=function Dp(n){return"function"==typeof n||"object"==typeof n&&n instanceof an}(r)&&yn(r);w=b&&this.injectableDefInScope(b)?fa(Ku(r),jl):null,this.records.set(r,w)}if(null!=w)return this.hydrate(r,w)}return(a&Wt.Self?mp():this.parent).get(r,s=a&Wt.Optional&&s===qo?null:s)}catch(y){if("NullInjectorError"===y.name){if((y[hl]=y[hl]||[]).unshift(Ae(r)),l)throw y;return function Ma(n,r,s,a){const l=n[hl];throw r[ce]&&l.unshift(r[ce]),n.message=function Ya(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let l=Ae(r);if(Array.isArray(r))l=r.map(Ae).join(" -> ");else if("object"==typeof r){let h=[];for(let y in r)if(r.hasOwnProperty(y)){let w=r[y];h.push(y+":"+("string"==typeof w?JSON.stringify(w):Ae(w)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(P,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[hl]=null,n}(y,r,"R3InjectorError",this.source)}throw y}finally{xt(h),St(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,l)=>r.push(Ae(l))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new qe(205,!1)}processInjectorType(r,s,a){if(!(r=ge(r)))return!1;let l=nn(r);const h=null==l&&r.ngModule||void 0,y=void 0===h?r:h,w=-1!==a.indexOf(y);if(void 0!==h&&(l=nn(h)),null==l)return!1;if(null!=l.imports&&!w){let W;a.push(y);try{Us(l.imports,re=>{this.processInjectorType(re,s,a)&&(void 0===W&&(W=[]),W.push(re))})}finally{}if(void 0!==W)for(let re=0;re<W.length;re++){const{ngModule:Ie,providers:He}=W[re];Us(He,dt=>this.processProvider(dt,Ie,He||Qt))}}this.injectorDefTypes.add(y);const b=br(y)||(()=>new y);this.records.set(y,fa(b,jl));const U=l.providers;if(null!=U&&!w){const W=r;Us(U,re=>this.processProvider(re,W,U))}return void 0!==h&&void 0!==r.providers}processProvider(r,s,a){let l=Oc(r=ge(r))?r:ge(r&&r.provide);const h=function _p(n,r,s){return vp(n)?fa(void 0,n.useValue):fa($l(n),jl)}(r);if(Oc(r)||!0!==r.multi)this.records.get(l);else{let y=this.records.get(l);y||(y=fa(void 0,jl,!0),y.factory=()=>Nn(y.multi),this.records.set(l,y)),l=r,y.multi.push(r)}this.records.set(l,h)}hydrate(r,s){return s.value===jl&&(s.value=i_,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Ip(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ge(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Ku(n){const r=yn(n),s=null!==r?r.factory:br(n);if(null!==s)return s;if(n instanceof an)throw new qe(204,!1);if(n instanceof Function)return function qu(n){const r=n.length;if(r>0)throw Ui(r,"?"),new qe(204,!1);const s=function Vn(n){const r=n&&(n[Lt]||n[ur]);if(r){const s=function ft(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new qe(204,!1)}function $l(n,r,s){let a;if(Oc(n)){const l=ge(n);return br(l)||Ku(l)}if(vp(n))a=()=>ge(n.useValue);else if(function s_(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Nn(n.deps||[]));else if(function Rc(n){return!(!n||!n.useExisting)}(n))a=()=>dn(ge(n.useExisting));else{const l=ge(n&&(n.useClass||n.provide));if(!function wp(n){return!!n.deps}(n))return br(l)||Ku(l);a=()=>new l(...Nn(n.deps))}return a}function fa(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function vp(n){return null!==n&&"object"==typeof n&&Pe in n}function Oc(n){return"function"==typeof n}let pa=(()=>{class n{static create(s,a){var l;if(Array.isArray(s))return Kh({name:""},a,s,"");{const h=null!==(l=s.name)&&void 0!==l?l:"";return Kh({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=qo,n.NULL=new zh,n.\u0275prov=lt({token:n,providedIn:"any",factory:()=>dn(pp)}),n.__NG_ELEMENT_ID__=-1,n})();function Ap(n,r){Qi(gc(n)[1],oe())}function Sp(n){let r=function Jh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(pi(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new qe(903,"");l=r.\u0275dir}if(l){if(s){a.push(l);const y=n;y.inputs=Ad(n.inputs),y.declaredInputs=Ad(n.declaredInputs),y.outputs=Ad(n.outputs);const w=l.hostBindings;w&&Tm(n,w);const b=l.viewQuery,U=l.contentQueries;if(b&&xp(n,b),U&&Pc(n,U),Oe(n.inputs,l.inputs),Oe(n.declaredInputs,l.declaredInputs),Oe(n.outputs,l.outputs),pi(l)&&l.data.animation){const W=n.data;W.animation=(W.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let y=0;y<h.length;y++){const w=h[y];w&&w.ngInherit&&w(n),w===Sp&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Mp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Go(l.hostAttrs,s=Go(s,l.hostAttrs))}}(a)}function Ad(n){return n===gr?{}:n===Qt?[]:n}function xp(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Pc(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function Tm(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let ea=null;function Zu(){if(!ea){const n=_n.Symbol;if(n&&n.iterator)ea=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(ea=a)}}}return ea}function Hl(n){return!!Sd(n)&&(Array.isArray(n)||!(n instanceof Map)&&Zu()in n)}function Sd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ua(n,r,s){return n[r]=s}function Js(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function tf(n,r,s,a){const l=M();return Js(l,Er(),r)&&(O(),Va(si(),l,n,r,s,a)),tf}function Rm(n,r,s,a,l,h,y,w){const b=M(),U=O(),W=n+20,re=U.firstCreatePass?function g_(n,r,s,a,l,h,y,w,b){const U=r.consts,W=ha(r,n,4,y||null,vr(U,w));wd(r,s,W,vr(U,b)),Qi(r,W);const re=W.tViews=kh(2,W,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U);return null!==r.queries&&(r.queries.template(r,W),re.queries=r.queries.embeddedTView(W)),W}(W,U,b,r,s,a,l,h,y):U.data[W];pt(re,!1);const Ie=b[11].createComment("");fd(U,b,Ie,re),es(Ie,b),xc(b,b[W]=Uh(Ie,b,Ie,re)),Cs(re)&&Xf(U,b,re),null!=y&&vd(b,re,w)}function rf(n){return Hn(function Kn(){return C.lFrame.contextLView}(),20+n)}function zl(n,r=Wt.Default){const s=M();return null===s?dn(n,r):hn(oe(),s,ge(n),r)}function Vm(){throw new Error("invalid")}function qp(n,r,s){const a=M();return Js(a,Er(),r)&&function bo(n,r,s,a,l,h,y,w){const b=tt(r,s);let W,U=r.inputs;!w&&null!=U&&(W=U[a])?(dm(n,s,W,a,l),yr(r)&&function sm(n,r){const s=Cn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function ep(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=y?y(l,r.value||"",a):l,cr(h)?h.setProperty(b,a,l):yo(a)||(b.setProperty?b.setProperty(a,l):b[a]=l))}(O(),si(),a,n,r,a[11],s,!1),qp}function vi(n,r,s,a,l){const y=l?"class":"style";dm(n,s,r.inputs[y],y,a)}function Zp(n,r,s,a){const l=M(),h=O(),y=20+n,w=l[11],b=l[y]=Ec(w,r,function ec(){return C.lFrame.currentNamespace}()),U=h.firstCreatePass?function Jv(n,r,s,a,l,h,y){const w=r.consts,U=ha(r,n,2,l,vr(w,h));return wd(r,s,U,vr(w,y)),null!==U.attrs&&Cd(U,U.attrs,!1),null!==U.mergedAttrs&&Cd(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(y,h,l,0,r,s,a):h.data[y];pt(U,!0);const W=U.mergedAttrs;null!==W&&Da(w,b,W);const re=U.classes;null!==re&&$u(w,b,re);const Ie=U.styles;return null!==Ie&&ju(w,b,Ie),64!=(64&U.flags)&&fd(h,l,b,U),0===function nt(){return C.lFrame.elementDepthCount}()&&es(b,l),function on(){C.lFrame.elementDepthCount++}(),Cs(U)&&(Xf(h,l,U),Ph(h,U,l)),null!==a&&vd(l,U),Zp}function Hi(){let n=oe();sn()?Ht():(n=n.parent,pt(n,!1));const r=n;!function dr(){C.lFrame.elementDepthCount--}();const s=O();return s.firstCreatePass&&(Qi(s,n),Wi(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ga(n){return 0!=(16&n.flags)}(r)&&vi(s,r,M(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function _u(n){return 0!=(32&n.flags)}(r)&&vi(s,r,M(),r.stylesWithoutHost,!1),Hi}function cf(n,r,s,a){return Zp(n,r,s,a),Hi(),cf}function kd(n,r,s){const a=M(),l=O(),h=n+20,y=l.firstCreatePass?function D_(n,r,s,a,l){const h=r.consts,y=vr(h,a),w=ha(r,n,8,"ng-container",y);return null!==y&&Cd(w,y,!0),wd(r,s,w,vr(h,l)),null!==r.queries&&r.queries.elementStart(r,w),w}(h,l,a,r,s):l.data[h];pt(y,!0);const w=a[h]=a[11].createComment("");return fd(l,a,w,y),es(w,a),Cs(y)&&(Xf(l,a,y),Ph(l,y,a)),null!=s&&vd(a,y),kd}function df(){let n=oe();const r=O();return sn()?Ht():(n=n.parent,pt(n,!1)),r.firstCreatePass&&(Qi(r,n),Wi(n)&&r.queries.elementEnd(n)),df}function Bm(){return M()}function Yp(n){return!!n&&"function"==typeof n.then}function C_(n){return!!n&&"function"==typeof n.subscribe}const jm=C_;function Qp(n,r,s,a){const l=M(),h=O(),y=oe();return function b_(n,r,s,a,l,h,y,w){const b=Cs(a),W=n.firstCreatePass&&fp(n),re=r[8],Ie=Gh(r);let He=!0;if(3&a.type||w){const Zt=tt(a,r),mn=w?w(Zt):Zt,It=Ie.length,An=w?Sr=>w(x(Sr[a.index])):a.index;if(cr(s)){let Sr=null;if(!w&&b&&(Sr=function du(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const y=l[h];if(y===s&&l[h+1]===a){const w=r[7],b=l[h+2];return w.length>b?w[b]:null}"string"==typeof y&&(h+=2)}return null}(n,r,l,a.index)),null!==Sr)(Sr.__ngLastListenerFn__||Sr).__ngNextListenerFn__=h,Sr.__ngLastListenerFn__=h,He=!1;else{h=hu(a,r,re,h,!1);const li=s.listen(mn,l,h);Ie.push(h,li),W&&W.push(l,An,It,It+1)}}else h=hu(a,r,re,h,!0),mn.addEventListener(l,h,y),Ie.push(h),W&&W.push(l,An,It,y)}else h=hu(a,r,re,h,!1);const dt=a.outputs;let kt;if(He&&null!==dt&&(kt=dt[l])){const Zt=kt.length;if(Zt)for(let mn=0;mn<Zt;mn+=2){const wa=r[kt[mn]][kt[mn+1]].subscribe(h),Wd=Ie.length;Ie.push(h,wa),W&&W.push(l,a.index,Wd,-(Wd+1))}}}(h,l,l[11],y,n,r,!!s,a),Qp}function ma(n,r,s,a){try{return!1!==s(a)}catch(l){return Wh(n,l),!1}}function hu(n,r,s,a,l){return function h(y){if(y===Function)return a;const w=2&n.flags?Cn(n.index,r):r;0==(32&r[2])&&Dd(w);let b=ma(r,0,a,y),U=h.__ngNextListenerFn__;for(;U;)b=ma(r,0,U,y)&&b,U=U.__ngNextListenerFn__;return l&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function Nd(n=1){return function mu(n){return(C.lFrame.contextLView=function na(n,r){for(;n>0;)r=r[15],n--;return r}(n,C.lFrame.contextLView))[8]}(n)}function T_(n,r){let s=null;const a=function kl(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let l=0;l<r.length;l++){const h=r[l];if("*"!==h){if(null===a?Dc(n,h,!0):Ly(a,h))return l}else s=l}return s}function $m(n){const r=M()[16][6];if(!r.projection){const a=r.projection=Ui(n?n.length:1,null),l=a.slice();let h=r.child;for(;null!==h;){const y=n?T_(h,n):0;null!==y&&(l[y]?l[y].projectionNext=h:a[y]=h,l[y]=h),h=h.next}}}function Jp(n,r=0,s){const a=M(),l=O(),h=ha(l,20+n,16,null,s||null);null===h.projection&&(h.projection=r),Ht(),64!=(64&h.flags)&&function Py(n,r,s){$f(r[11],0,r,s,Fg(n,s,r),Uu(s.parent||r[6],s,r))}(l,a,h)}function ig(n,r,s,a,l){const h=n[s+1],y=null===r;let w=a?Qs(h):Xo(h),b=!1;for(;0!==w&&(!1===b||y);){const W=n[w+1];Kl(n[w],r)&&(b=!0,n[w+1]=a?Xs(W):Nl(W)),w=a?Qs(W):Xo(W)}b&&(n[s+1]=a?Nl(h):Xs(h))}function Kl(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Eo(n,r)>=0}function gf(n,r){return function _a(n,r,s,a){const l=M(),h=O(),y=function Qr(n){const r=C.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function lg(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[bi()],y=function qm(n,r){return r>=n.expandoStartIndex}(n,s);(function Bd(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!y&&(r=!1),r=function S_(n,r,s,a){const l=function io(n){const r=C.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=jc(s=cg(null,n,r,s,a),r.attrs,a),h=null);else{const y=r.directiveStylingLast;if(-1===y||n[y]!==l)if(s=cg(l,n,r,s,a),null===h){let b=function M_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Xo(a))return n[Qs(a)]}(n,r,a);void 0!==b&&Array.isArray(b)&&(b=cg(null,n,r,b[1],a),b=jc(b,r.attrs,a),function Zm(n,r,s,a){n[Qs(s?r.classBindings:r.styleBindings)]=a}(n,r,a,b))}else h=function x_(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=jc(a,n[h].hostAttrs,s);return jc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function ng(n,r,s,a,l,h){let y=h?r.classBindings:r.styleBindings,w=Qs(y),b=Xo(y);n[a]=s;let W,U=!1;if(Array.isArray(s)){const re=s;W=re[1],(null===W||Eo(re,W)>0)&&(U=!0)}else W=s;if(l)if(0!==b){const Ie=Qs(n[w+1]);n[a+1]=Cc(Ie,w),0!==Ie&&(n[Ie+1]=bc(n[Ie+1],a)),n[w+1]=function Gg(n,r){return 131071&n|r<<17}(n[w+1],a)}else n[a+1]=Cc(w,0),0!==w&&(n[w+1]=bc(n[w+1],a)),w=a;else n[a+1]=Cc(b,0),0===w?w=a:n[b+1]=bc(n[b+1],a),b=a;U&&(n[a+1]=Nl(n[a+1])),ig(n,W,a,!0),ig(n,W,a,!1),function rg(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&Eo(h,r)>=0&&(s[a+1]=Xs(s[a+1]))}(r,W,n,a,h),y=Cc(w,b),h?r.classBindings=y:r.styleBindings=y}(l,h,r,s,y,a)}}(h,n,y,a),r!==Rn&&Js(l,y,r)&&function dg(n,r,s,a,l,h,y,w){if(!(3&r.type))return;const b=n.data,U=b[w+1];Ud(function Kf(n){return 1==(1&n)}(U)?hg(b,r,s,l,Xo(U),y):void 0)||(Ud(h)||function Hg(n){return 2==(2&n)}(U)&&(h=hg(b,null,s,l,w,y)),function Pl(n,r,s,a,l){const h=cr(n);if(r)l?h?n.addClass(s,a):s.classList.add(a):h?n.removeClass(s,a):s.classList.remove(a);else{let y=-1===a.indexOf("-")?void 0:it.DashCase;if(null==l)h?n.removeStyle(s,a,y):s.style.removeProperty(a);else{const w="string"==typeof l&&l.endsWith("!important");w&&(l=l.slice(0,-10),y|=it.Important),h?n.setStyle(s,a,l,y):s.style.setProperty(a,l,w?"important":"")}}}(a,y,Je(bi(),s),l,h))}(h,h.data[bi()],l,l[11],n,l[y+1]=function fg(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ae(Bo(n)))),n}(r,s),a,y)}(n,r,null,!0),gf}function cg(n,r,s,a,l){let h=null;const y=s.directiveEnd;let w=s.directiveStylingLast;for(-1===w?w=s.directiveStart:w++;w<y&&(h=r[w],a=jc(a,h.hostAttrs,l),h!==n);)w++;return null!==n&&(s.directiveStylingLast=w),a}function jc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const y=r[h];"number"==typeof y?l=y:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Bi(n,y,!!s||r[++h]))}return void 0===n?null:n}function hg(n,r,s,a,l,h){const y=null===r;let w;for(;l>0;){const b=n[l],U=Array.isArray(b),W=U?b[1]:b,re=null===W;let Ie=s[l+1];Ie===Rn&&(Ie=re?Qt:void 0);let He=re?lo(Ie,a):W===a?Ie:void 0;if(U&&!Ud(He)&&(He=lo(b,a)),Ud(He)&&(w=He,y))return w;const dt=n[l+1];l=y?Qs(dt):Xo(dt)}if(null!==r){let b=h?r.residualClasses:r.residualStyles;null!=b&&(w=lo(b,a))}return w}function Ud(n){return void 0!==n}function Xm(n,r=""){const s=M(),a=O(),l=n+20,h=a.firstCreatePass?ha(a,l,1,r,null):a.data[l],y=s[l]=function vc(n,r){return cr(n)?n.createText(r):n.createTextNode(r)}(s[11],r);fd(a,s,y,h),pt(h,!1)}function mf(n){return Ea("",n,""),mf}function Ea(n,r,s){const a=M(),l=function Wl(n,r,s,a){return Js(n,Er(),s)?r+Ne(s)+a:Rn}(a,n,r,s);return l!==Rn&&lu(a,bi(),l),Ea}const ol=void 0;var Zl=["en",[["a","p"],["AM","PM"],ol],[["AM","PM"],ol,ol],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ol,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ol,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ol,"{1} 'at' {0}",ol],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hy(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Bs={};function vf(n){const r=function vg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Wc(r);if(s)return s;const a=r.split("-")[0];if(s=Wc(a),s)return s;if("en"===a)return Zl;throw new Error(`Missing locale data for the locale "${n}".`)}function Gc(n){return vf(n)[Mn.PluralCase]}function Wc(n){return n in Bs||(Bs[n]=_n.ng&&_n.ng.common&&_n.ng.common.locales&&_n.ng.common.locales[n]),Bs[n]}var Mn=(()=>((Mn=Mn||{})[Mn.LocaleId=0]="LocaleId",Mn[Mn.DayPeriodsFormat=1]="DayPeriodsFormat",Mn[Mn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mn[Mn.DaysFormat=3]="DaysFormat",Mn[Mn.DaysStandalone=4]="DaysStandalone",Mn[Mn.MonthsFormat=5]="MonthsFormat",Mn[Mn.MonthsStandalone=6]="MonthsStandalone",Mn[Mn.Eras=7]="Eras",Mn[Mn.FirstDayOfWeek=8]="FirstDayOfWeek",Mn[Mn.WeekendRange=9]="WeekendRange",Mn[Mn.DateFormat=10]="DateFormat",Mn[Mn.TimeFormat=11]="TimeFormat",Mn[Mn.DateTimeFormat=12]="DateTimeFormat",Mn[Mn.NumberSymbols=13]="NumberSymbols",Mn[Mn.NumberFormats=14]="NumberFormats",Mn[Mn.CurrencyCode=15]="CurrencyCode",Mn[Mn.CurrencySymbol=16]="CurrencySymbol",Mn[Mn.CurrencyName=17]="CurrencyName",Mn[Mn.Currencies=18]="Currencies",Mn[Mn.Directionality=19]="Directionality",Mn[Mn.PluralCase=20]="PluralCase",Mn[Mn.ExtraData=21]="ExtraData",Mn))();const Kc="en-US";let fy=Kc;function Q_(n,r,s,a,l){if(n=ge(n),Array.isArray(n))for(let h=0;h<n.length;h++)Q_(n[h],r,s,a,l);else{const h=O(),y=M();let w=Oc(n)?n:ge(n.provide),b=$l(n);const U=oe(),W=1048575&U.providerIndexes,re=U.directiveStart,Ie=U.providerIndexes>>20;if(Oc(n)||!n.multi){const He=new oo(b,l,zl),dt=J_(w,r,l?W:W+Ie,re);-1===dt?(ye(S(U,y),h,w),X_(h,n,r.length),r.push(w),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(He),y.push(He)):(s[dt]=He,y[dt]=He)}else{const He=J_(w,r,W+Ie,re),dt=J_(w,r,W,W+Ie),kt=He>=0&&s[He],Zt=dt>=0&&s[dt];if(l&&!Zt||!l&&!kt){ye(S(U,y),h,w);const mn=function dw(n,r,s,a,l){const h=new oo(n,s,zl);return h.multi=[],h.index=r,h.componentProviders=0,p0(h,l,a&&!s),h}(l?cw:lw,s.length,l,a,b);!l&&Zt&&(s[dt].providerFactory=mn),X_(h,n,r.length,0),r.push(w),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(mn),y.push(mn)}else X_(h,n,He>-1?He:dt,p0(s[l?dt:He],b,!l&&a));!l&&a&&Zt&&s[dt].componentProviders++}}}function X_(n,r,s,a){const l=Oc(r),h=function Ep(n){return!!n.useClass}(r);if(l||h){const b=(h?ge(r.useClass):r).prototype.ngOnDestroy;if(b){const U=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const W=U.indexOf(s);-1===W?U.push(s,[a,b]):U[W+1].push(a,b)}else U.push(s,b)}}}function p0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function J_(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function lw(n,r,s,a){return ev(this.multi,[])}function cw(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=ws(s,s[1],this.providerFactory.index,a);h=w.slice(0,y),ev(l,h);for(let b=y;b<w.length;b++)h.push(w[b])}else h=[],ev(l,h);return h}function ev(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function g0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function uw(n,r,s){const a=O();if(a.firstCreatePass){const l=pi(n);Q_(s,a.data,a.blueprint,l,!0),Q_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class m0{}class pw{resolveComponentFactory(r){throw function fw(n){const r=Error(`No component factory found for ${Ae(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ey=(()=>{class n{}return n.NULL=new pw,n})();function gw(){return bf(oe(),M())}function bf(n,r){return new Cg(tt(n,r))}let Cg=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=gw,n})();function mw(n){return n instanceof Cg?n.nativeElement:n}class _0{}let yw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function vw(){const n=M(),s=Cn(oe().index,n);return function _w(n){return n[11]}(Wr(s)?s:n)}(),n})(),Ew=(()=>{class n{}return n.\u0275prov=lt({token:n,providedIn:"root",factory:()=>null}),n})();class v0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const E0=new v0("13.3.2"),tv={};function wy(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(x(h)),fi(h))for(let w=10;w<h.length;w++){const b=h[w],U=b[1].firstChild;null!==U&&wy(b[1],b,U,a)}const y=s.type;if(8&y)wy(n,r,s.child,a);else if(32&y){const w=fn(s,r);let b;for(;b=w();)a.push(b)}else if(16&y){const w=Eh(r,s);if(Array.isArray(w))a.push(...w);else{const b=Si(r[16]);wy(b[1],b,w,a,!0)}}s=l?s.projectionNext:s.next}return a}class bg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return wy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(fi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Bf(r,a),zo(s,a))}this._attachedToViewContainer=!1}kg(this._lView[1],this._lView)}onDestroy(r){rm(this._lView[1],this._lView,null,r)}markForCheck(){Dd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function n_(n,r,s){hr(!0);try{cp(n,r,s)}finally{hr(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new qe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Uf(n,r){wc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new qe(902,"");this._appRef=r}}class ww extends bg{constructor(r){super(r),this._view=r}detectChanges(){$h(this._view)}checkNoChanges(){!function dp(n){hr(!0);try{$h(n)}finally{hr(!1)}}(this._view)}get context(){return null}}class w0 extends Ey{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=be(r);return new nv(s,this.ngModule)}}function I0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class nv extends m0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function gd(n){return n.map(Vy).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return I0(this.componentDef.inputs)}get outputs(){return I0(this.componentDef.outputs)}create(r,s,a,l){const h=(l=l||this.ngModule)?function Dw(n,r){return{get:(s,a,l)=>{const h=n.get(s,tv,l);return h!==tv||a===tv?h:r.get(s,a,l)}}}(r,l.injector):r,y=h.get(_0,R),w=h.get(Ew,null),b=y.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",W=a?function nm(n,r,s){if(cr(n))return n.selectRootElement(r,s===xn.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(b,a,this.componentDef.encapsulation):Ec(y.createRenderer(null,this.componentDef),U,function Iw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(U)),re=this.componentDef.onPush?576:528,Ie=function bm(n,r){return{components:[],scheduler:n||Ff,clean:Hh,playerHandler:r||null,flags:0}}(),He=kh(0,null,null,1,0,null,null,null,null,null),dt=La(null,He,Ie,re,null,null,y,b,w,h);let kt,Zt;go(dt);try{const mn=function Cm(n,r,s,a,l,h){const y=s[1];s[20]=n;const b=ha(y,20,2,"#host",null),U=b.mergedAttrs=r.hostAttrs;null!==U&&(Cd(b,U,!0),null!==n&&(Da(l,n,U),null!==b.classes&&$u(l,n,b.classes),null!==b.styles&&ju(l,n,b.styles)));const W=a.createRenderer(n,r),re=La(s,tm(r),null,r.onPush?64:16,s[20],b,a,W,h||null,null);return y.firstCreatePass&&(ye(S(b,s),y,r.type),sp(y,b),Lh(b,s.length,1)),xc(s,re),s[20]=re}(W,this.componentDef,dt,y,b);if(W)if(a)Da(b,W,["ng-version",E0.full]);else{const{attrs:It,classes:An}=function Hu(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!Qo(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);It&&Da(b,W,It),An&&An.length>0&&$u(b,W,An.join(" "))}if(Zt=Xn(He,20),void 0!==s){const It=Zt.projection=[];for(let An=0;An<this.ngContentSelectors.length;An++){const Sr=s[An];It.push(null!=Sr?Array.from(Sr):null)}}kt=function Xh(n,r,s,a,l){const h=s[1],y=function rp(n,r,s){const a=oe();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),op(n,a,r,uu(n,r,1,null),s));const l=ws(r,n,a.directiveStart,a);es(l,r);const h=tt(a,r);return h&&es(h,r),l}(h,s,r);if(a.components.push(y),n[8]=y,l&&l.forEach(b=>b(y,r)),r.contentQueries){const b=oe();r.contentQueries(1,y,b.directiveStart)}const w=oe();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(xo(w.index),ip(s[1],w,0,w.directiveStart,w.directiveEnd,r),um(r,y)),y}(mn,this.componentDef,dt,Ie,[Ap]),Sc(He,dt,null)}finally{so()}return new bw(this.componentType,kt,bf(Zt,dt),dt,Zt)}}class bw extends class hw{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new ww(l),this.componentType=r}get injector(){return new vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Tf{}class D0{}const Af=new Map;class T0 extends Tf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new w0(this);const a=Jt(r);this._bootstrapComponents=f(a.bootstrap),this._r3Injector=qh(r,s,[{provide:Tf,useValue:this},{provide:Ey,useValue:this.componentFactoryResolver}],Ae(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=pa.THROW_IF_NOT_FOUND,a=Wt.Default){return r===pa||r===Tf||r===pp?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class rv extends D0{constructor(r){super(),this.moduleType=r,null!==Jt(r)&&function Aw(n){const r=new Set;!function s(a){const l=Jt(a,!0),h=l.id;null!==h&&(function C0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Ae(r)} vs ${Ae(r.name)}`)}(h,Af.get(h),a),Af.set(h,a));const y=f(l.imports);for(const w of y)r.has(w)||(r.add(w),s(w))}(n)}(r)}create(r){return new T0(this.moduleType,r)}}function A0(n,r,s){const a=Zn()+n,l=M();return l[a]===Rn?Ua(l,a,s?r.call(s):r()):function Gl(n,r){return n[r]}(l,a)}function S0(n,r,s,a){return x0(M(),Zn(),n,r,s,a)}function M0(n,r,s,a,l){return function R0(n,r,s,a,l,h,y){const w=r+s;return function cu(n,r,s,a){const l=Js(n,r,s);return Js(n,r+1,a)||l}(n,w,l,h)?Ua(n,w+2,y?a.call(y,l,h):a(l,h)):Tg(n,w+2)}(M(),Zn(),n,r,s,a,l)}function Tg(n,r){const s=n[r];return s===Rn?void 0:s}function x0(n,r,s,a,l,h){const y=r+s;return Js(n,y,l)?Ua(n,y+1,h?a.call(h,l):a(l)):Tg(n,y+1)}function N0(n,r){const s=O();let a;const l=n+20;s.firstCreatePass?(a=function Nw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=br(a.type)),y=xt(zl);try{const w=Rs(!1),b=h();return Rs(w),function Om(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,M(),l,b),b}finally{xt(y)}}function F0(n,r,s){const a=n+20,l=M(),h=Hn(l,a);return function Ag(n,r){return n[1].data[r].pure}(l,a)?x0(l,Zn(),r,h.transform,s,h):h.transform(s)}function iv(n){return r=>{setTimeout(n,void 0,r)}}const ul=class Bw extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var l,h,y;let w=r,b=s||(()=>null),U=a;if(r&&"object"==typeof r){const re=r;w=null===(l=re.next)||void 0===l?void 0:l.bind(re),b=null===(h=re.error)||void 0===h?void 0:h.bind(re),U=null===(y=re.complete)||void 0===y?void 0:y.bind(re)}this.__isAsync&&(b=iv(b),w&&(w=iv(w)),U&&(U=iv(U)));const W=super.subscribe({next:w,error:b,complete:U});return r instanceof H.w0&&r.add(W),W}};function jw(){return this._results[Zu()]()}class sv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Zu(),a=sv.prototype;a[s]||(a[s]=jw)}get changes(){return this._changes||(this._changes=new ul)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=Ji(r);(this._changesDetected=!function Oo(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Sg=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gw,n})();const $w=Sg,Hw=class extends $w{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=La(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(a[19]=h.createEmbeddedView(s)),Sc(s,a,r),new bg(a)}};function Gw(){return Iy(oe(),M())}function Iy(n,r){return 4&n.type?new Hw(r,n,bf(n,r)):null}let Dy=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ww,n})();function Ww(){return U0(oe(),M())}const zw=Dy,L0=class extends zw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return bf(this._hostTNode,this._hostLView)}get injector(){return new vo(this._hostTNode,this._hostLView)}get parentInjector(){const r=ne(this._hostTNode,this._hostLView);if(Ca(r)){const s=Ls(r,this._hostLView),a=jr(r);return new vo(s[1].data[a+8],s)}return new vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=V0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const l=r.createEmbeddedView(s||{});return this.insert(l,a),l}createComponent(r,s,a,l,h){const y=r&&!function Vs(n){return"function"==typeof n}(r);let w;if(y)w=s;else{const re=s||{};w=re.index,a=re.injector,l=re.projectableNodes,h=re.ngModuleRef}const b=y?r:new nv(be(r)),U=a||this.parentInjector;if(!h&&null==b.ngModule){const Ie=(y?U:this.parentInjector).get(Tf,null);Ie&&(h=Ie)}const W=b.create(U,l,void 0,h);return this.insert(W.hostView,w),W}insert(r,s){const a=r._lView,l=a[1];if(function _r(n){return fi(n[3])}(a)){const W=this.indexOf(r);if(-1!==W)this.detach(W);else{const re=a[3],Ie=new L0(re,re[6],re[3]);Ie.detach(Ie.indexOf(r))}}const h=this._adjustIndex(s),y=this._lContainer;!function xy(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Aa(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const y=r[17];null!==y&&s!==y&&function Ry(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(y,r);const w=r[19];null!==w&&w.insertView(n),r[2]|=128}(l,a,y,h);const w=pd(h,y),b=a[11],U=yh(b,y[7]);return null!==U&&function cd(n,r,s,a,l,h){a[0]=l,a[6]=r,wc(n,a,s,1,l,h)}(l,y[6],b,a,U,w),r.attachToViewContainerRef(),Aa(ov(y),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=V0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Bf(this._lContainer,s);a&&(zo(ov(this._lContainer),s),kg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Bf(this._lContainer,s);return a&&null!=zo(ov(this._lContainer),s)?new bg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function V0(n){return n[8]}function ov(n){return n[8]||(n[8]=[])}function U0(n,r){let s;const a=r[n.index];if(fi(a))s=a;else{let l;if(8&n.type)l=x(a);else{const h=r[11];l=h.createComment("");const y=tt(n,r);Vu(h,yh(h,y),l,function hd(n,r){return cr(n)?n.nextSibling(r):r.nextSibling}(h,y),!1)}r[n.index]=s=Uh(a,r,l,n),xc(r,s)}return new L0(s,n,r)}class av{constructor(r){this.queryList=r,this.matches=null}clone(){return new av(this.queryList)}setDirty(){this.queryList.setDirty()}}class uv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const y=s.getByIndex(h);l.push(this.queries[y.indexInDeclarationView].clone())}return new uv(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==K0(r,s).matches&&this.queries[s].setDirty()}}class B0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class lv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new lv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class cv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new cv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,Zw(s,h)),this.matchTNodeWithReadOption(r,s,$r(s,r,h,!1,!1))}else a===Sg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,$r(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Cg||l===Dy||l===Sg&&4&s.type)this.addMatch(s.index,-2);else{const h=$r(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Zw(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function Qw(n,r,s,a){return-1===s?function Yw(n,r){return 11&n.type?bf(n,r):4&n.type?Iy(n,r):null}(r,n):-2===s?function Xw(n,r,s){return s===Cg?bf(r,n):s===Sg?Iy(r,n):s===Dy?U0(r,n):void 0}(n,r,a):ws(n,n[1],s,r)}function j0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,y=s.matches,w=[];for(let b=0;b<y.length;b+=2){const U=y[b];w.push(U<0?null:Qw(r,h[U],y[b+1],s.metadata.read))}l.matches=w}return l.matches}function dv(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const y=j0(n,r,l,s);for(let w=0;w<h.length;w+=2){const b=h[w];if(b>0)a.push(y[w/2]);else{const U=h[w+1],W=r[-b];for(let re=10;re<W.length;re++){const Ie=W[re];Ie[17]===Ie[3]&&dv(Ie[1],Ie,U,a)}if(null!==W[9]){const re=W[9];for(let Ie=0;Ie<re.length;Ie++){const He=re[Ie];dv(He[1],He,U,a)}}}}}return a}function $0(n){const r=M(),s=O(),a=js();Mo(a+1);const l=K0(s,a);if(n.dirty&&Sn(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?dv(s,r,a,[]):j0(s,r,l,a);n.reset(h,mw),n.notifyOnChanges()}return!0}return!1}function H0(n,r,s,a){const l=O();if(l.firstCreatePass){const h=oe();(function z0(n,r,s){null===n.queries&&(n.queries=new lv),n.queries.track(new cv(r,s))})(l,new B0(r,s,a),h.index),function tI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function W0(n,r,s){const a=new sv(4==(4&s));rm(n,r,a,a.destroy),null===r[19]&&(r[19]=new uv),r[19].queries.push(new av(a))}(l,M(),s)}function G0(){return function eI(n,r){return n[19].queries[r].queryList}(M(),js())}function K0(n,r){return n.queries.getByIndex(r)}function q0(n,r){return Iy(n,r)}function Ty(...n){}const dE=new an("Application Initializer");let yv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Ty,this.reject=Ty,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Yp(h))s.push(h);else if(jm(h)){const y=new Promise((w,b)=>{h.subscribe({complete:w,error:b})});s.push(y)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(dn(dE,8))},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hE=new an("AppId",{providedIn:"root",factory:function fE(){return`${_v()}${_v()}${_v()}`}});function _v(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pE=new an("Platform Initializer"),gE=new an("Platform ID"),mE=new an("appBootstrapListener");let yE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();const vv=new an("LocaleId",{providedIn:"root",factory:()=>or(vv,Wt.Optional|Wt.SkipSelf)||function _I(){return"undefined"!=typeof $localize&&$localize.locale||Kc}()}),vI=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class EI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let wI=(()=>{class n{compileModuleSync(s){return new rv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=f(Jt(s).declarations).reduce((y,w)=>{const b=be(w);return b&&y.push(new nv(b)),y},[]);return new EI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DI=(()=>Promise.resolve(0))();function Ev(n){"undefined"==typeof Zone?DI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ul(!1),this.onMicrotaskEmpty=new ul(!1),this.onStable=new ul(!1),this.onError=new ul(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function CI(){let n=_n.requestAnimationFrame,r=_n.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function AI(n){const r=()=>{!function TI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(_n,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Iv(n),n.isCheckStableRunning=!0,wv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Iv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,y,w)=>{try{return _E(n),s.invokeTask(l,h,y,w)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),vE(n)}},onInvoke:(s,a,l,h,y,w,b)=>{try{return _E(n),s.invoke(l,h,y,w,b)}finally{n.shouldCoalesceRunChangeDetection&&r(),vE(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,Iv(n),wv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+l,r,bI,Ty,Ty);try{return h.runTask(y,s,a)}finally{h.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const bI={};function wv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Iv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function _E(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function vE(n){n._nesting--,wv(n)}class SI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ul,this.onMicrotaskEmpty=new ul,this.onStable=new ul,this.onError=new ul}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}let EE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pu.assertNotInAngularZone(),Ev(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ev(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(dn(pu))},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})(),wE=(()=>{class n{constructor(){this._applications=new Map,Dv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Dv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();class MI{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function xI(n){Dv=n}let gu,Dv=new MI;const IE=new an("AllowMultipleToken");class PI{constructor(r,s){this.name=r,this.token=s}}function DE(n,r,s=[]){const a=`Platform: ${r}`,l=new an(a);return(h=[])=>{let y=CE();if(!y||y.injector.get(IE,!1))if(n)n(s.concat(h).concat({provide:l,useValue:!0}));else{const w=s.concat(h).concat({provide:l,useValue:!0},{provide:gp,useValue:"platform"});!function kI(n){if(gu&&!gu.destroyed&&!gu.injector.get(IE,!1))throw new qe(400,"");gu=n.get(bE);const r=n.get(pE,null);r&&r.forEach(s=>s())}(pa.create({providers:w,name:a}))}return function NI(n){const r=CE();if(!r)throw new qe(401,"");return r}()}}function CE(){return gu&&!gu.destroyed?gu:null}let bE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const w=function FI(n,r){let s;return s="noop"===n?new SI:("zone.js"===n?void 0:n)||new pu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),b=[{provide:pu,useValue:w}];return w.run(()=>{const U=pa.create({providers:b,parent:this.injector,name:s.moduleType.name}),W=s.create(U),re=W.injector.get(ai,null);if(!re)throw new qe(402,"");return w.runOutsideAngular(()=>{const Ie=w.onError.subscribe({next:He=>{re.handleError(He)}});W.onDestroy(()=>{bv(this._modules,W),Ie.unsubscribe()})}),function LI(n,r,s){try{const a=s();return Yp(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(re,w,()=>{const Ie=W.injector.get(yv);return Ie.runInitializers(),Ie.donePromise.then(()=>(function G_(n){mt(n,"Expected localeId to be defined"),"string"==typeof n&&(fy=n.toLowerCase().replace(/_/g,"-"))}(W.injector.get(vv,Kc)||Kc),this._moduleDoBootstrap(W),W))})})}bootstrapModule(s,a=[]){const l=TE({},a);return function RI(n,r,s){const a=new rv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Cv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new qe(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new qe(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(dn(pa))},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();function TE(n,r){return Array.isArray(r)?r.reduce(TE,n):Object.assign(Object.assign({},n),r)}let Cv=(()=>{class n{constructor(s,a,l,h,y){this._zone=s,this._injector=a,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new Y.y(U=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{U.next(this._stable),U.complete()})}),b=new Y.y(U=>{let W;this._zone.runOutsideAngular(()=>{W=this._zone.onStable.subscribe(()=>{pu.assertNotInAngularZone(),Ev(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,U.next(!0))})})});const re=this._zone.onUnstable.subscribe(()=>{pu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{U.next(!1)}))});return()=>{W.unsubscribe(),re.unsubscribe()}});this.isStable=(0,ve.T)(w,b.pipe((0,pe.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new qe(405,"");let l;l=s instanceof m0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(l.componentType);const h=function OI(n){return n.isBoundToModule}(l)?void 0:this._injector.get(Tf),w=l.create(pa.NULL,[],a||l.selector,h),b=w.location.nativeElement,U=w.injector.get(EE,null),W=U&&w.injector.get(wE);return U&&W&&W.registerApplication(b,U),w.onDestroy(()=>{this.detachView(w.hostView),bv(this.components,w),W&&W.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new qe(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;bv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(mE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(dn(pu),dn(pa),dn(ai),dn(Ey),dn(yv))},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let SE=!0,ME=!1;function UI(){return ME=!0,SE}function BI(){if(ME)throw new Error("Cannot enable prod mode after platform setup.");SE=!1}let jI=(()=>{class n{}return n.__NG_ELEMENT_ID__=$I,n})();function $I(n){return function HI(n,r,s){if(yr(n)&&!s){const a=Cn(n.index,r);return new bg(a,a)}return 47&n.type?new bg(r[16],r):null}(oe(),M(),16==(16&n))}class PE{constructor(){}supports(r){return Hl(r)}create(r){return new ZI(r)}}const qI=(n,r)=>r;class ZI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const y=!a||s&&s.currentIndex<NE(a,l,h)?s:a,w=NE(y,l,h),b=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{h||(h=[]);const U=w-l,W=b-l;if(U!=W){for(let Ie=0;Ie<U;Ie++){const He=Ie<h.length?h[Ie]:h[Ie]=0,dt=He+Ie;W<=dt&&dt<U&&(h[Ie]=He+1)}h[y.previousIndex]=W-U}}w!==b&&r(y,w,b)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Hl(r))throw new qe(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let w=0;w<this.length;w++)h=r[w],y=this._trackByFn(w,h),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,h,y,w)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,y,w),a=!0),s=s._next}else l=0,function p_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Zu()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,w=>{y=this._trackByFn(l,w),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,w,y,l)),Object.is(s.item,w)||this._addIdentityChange(s,w)):(s=this._mismatch(s,w,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new YI(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new kE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class YI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class kE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new QI,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class FE{constructor(){}supports(r){return r instanceof Map||Sd(r)}create(){return new XI}}class XI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Sd(r)))throw new qe(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,y=l._next;return h&&(h._next=y),y&&(y._prev=h),l._next=null,l._prev=null,l}const a=new JI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class JI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function LE(){return new xv([new PE])}let xv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||LE()),deps:[[n,new wo,new ho]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new qe(901,"")}}return n.\u0275prov=lt({token:n,providedIn:"root",factory:LE}),n})();function VE(){return new Rv([new FE])}let Rv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||VE()),deps:[[n,new wo,new ho]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(a)return a;throw new qe(901,"")}}return n.\u0275prov=lt({token:n,providedIn:"root",factory:VE}),n})();const nD=DE(null,"core",[{provide:gE,useValue:"unknown"},{provide:bE,deps:[pa]},{provide:wE,deps:[]},{provide:yE,deps:[]}]);let rD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(dn(Cv))},n.\u0275mod=Le({type:n}),n.\u0275inj=tn({}),n})()},3075:(Pt,ze,N)=>{N.d(ze,{Cf:()=>Ne,F:()=>Cr,Fj:()=>je,JJ:()=>Wt,JL:()=>zt,JU:()=>Ae,Kr:()=>is,NI:()=>gn,On:()=>yr,Q7:()=>di,UX:()=>Sn,YN:()=>rs,_Y:()=>Cs,c5:()=>Je,cw:()=>Gr,kI:()=>$,oH:()=>Dt,sg:()=>Fn,u5:()=>Cn});var p=N(5e3),H=N(9808),Y=N(8996),ve=N(4128),pe=N(4004);let Ce=(()=>{class k{constructor(C,q){this._renderer=C,this._elementRef=q,this.onChange=nt=>{},this.onTouched=()=>{}}setProperty(C,q){this._renderer.setProperty(this._elementRef.nativeElement,C,q)}registerOnTouched(C){this.onTouched=C}registerOnChange(C){this.onChange=C}setDisabledState(C){this.setProperty("disabled",C)}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(p.Qsj),p.Y36(p.SBq))},k.\u0275dir=p.lG2({type:k}),k})(),Oe=(()=>{class k extends Ce{}return k.\u0275fac=function(){let A;return function(q){return(A||(A=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,features:[p.qOj]}),k})();const Ae=new p.OlP("NgValueAccessor"),ie={provide:Ae,useExisting:(0,p.Gpc)(()=>je),multi:!0},Be=new p.OlP("CompositionEventMode");let je=(()=>{class k extends Ce{constructor(C,q,nt){super(C,q),this._compositionMode=nt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ge(){const k=(0,H.q)()?(0,H.q)().getUserAgent():"";return/android (\d+)/.test(k.toLowerCase())}())}writeValue(C){this.setProperty("value",null==C?"":C)}_handleInput(C){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(C)}_compositionStart(){this._composing=!0}_compositionEnd(C){this._composing=!1,this._compositionMode&&this.onChange(C)}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Be,8))},k.\u0275dir=p.lG2({type:k,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(C,q){1&C&&p.NdJ("input",function(on){return q._handleInput(on.target.value)})("blur",function(){return q.onTouched()})("compositionstart",function(){return q._compositionStart()})("compositionend",function(on){return q._compositionEnd(on.target.value)})},features:[p._Bn([ie]),p.qOj]}),k})();function qe(k){return null==k||0===k.length}function ht(k){return null!=k&&"number"==typeof k.length}const Ne=new p.OlP("NgValidators"),Re=new p.OlP("NgAsyncValidators"),Et=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ${static min(A){return function L(k){return A=>{if(qe(A.value)||qe(k))return null;const C=parseFloat(A.value);return!isNaN(C)&&C<k?{min:{min:k,actual:A.value}}:null}}(A)}static max(A){return function ee(k){return A=>{if(qe(A.value)||qe(k))return null;const C=parseFloat(A.value);return!isNaN(C)&&C>k?{max:{max:k,actual:A.value}}:null}}(A)}static required(A){return me(A)}static requiredTrue(A){return function Ge(k){return!0===k.value?null:{required:!0}}(A)}static email(A){return function We(k){return qe(k.value)||Et.test(k.value)?null:{email:!0}}(A)}static minLength(A){return function Fe(k){return A=>qe(A.value)||!ht(A.value)?null:A.value.length<k?{minlength:{requiredLength:k,actualLength:A.value.length}}:null}(A)}static maxLength(A){return function _e(k){return A=>ht(A.value)&&A.value.length>k?{maxlength:{requiredLength:k,actualLength:A.value.length}}:null}(A)}static pattern(A){return Q(A)}static nullValidator(A){return null}static compose(A){return mt(A)}static composeAsync(A){return $t(A)}}function me(k){return qe(k.value)?{required:!0}:null}function Q(k){if(!k)return Me;let A,C;return"string"==typeof k?(C="","^"!==k.charAt(0)&&(C+="^"),C+=k,"$"!==k.charAt(k.length-1)&&(C+="$"),A=new RegExp(C)):(C=k.toString(),A=k),q=>{if(qe(q.value))return null;const nt=q.value;return A.test(nt)?null:{pattern:{requiredPattern:C,actualValue:nt}}}}function Me(k){return null}function ae(k){return null!=k}function Xe(k){const A=(0,p.QGY)(k)?(0,Y.D)(k):k;return(0,p.CqO)(A),A}function Ue(k){let A={};return k.forEach(C=>{A=null!=C?Object.assign(Object.assign({},A),C):A}),0===Object.keys(A).length?null:A}function Kt(k,A){return A.map(C=>C(k))}function Gt(k){return k.map(A=>function bt(k){return!k.validate}(A)?A:C=>A.validate(C))}function mt(k){if(!k)return null;const A=k.filter(ae);return 0==A.length?null:function(C){return Ue(Kt(C,A))}}function Tt(k){return null!=k?mt(Gt(k)):null}function $t(k){if(!k)return null;const A=k.filter(ae);return 0==A.length?null:function(C){const q=Kt(C,A).map(Xe);return(0,ve.D)(q).pipe((0,pe.U)(Ue))}}function Mt(k){return null!=k?$t(Gt(k)):null}function Ft(k,A){return null===k?[A]:Array.isArray(k)?[...k,A]:[k,A]}function lt(k){return k._rawValidators}function pn(k){return k._rawAsyncValidators}function tn(k){return k?Array.isArray(k)?k:[k]:[]}function yn(k,A){return Array.isArray(k)?k.includes(A):k===A}function qn(k,A){const C=tn(A);return tn(k).forEach(nt=>{yn(C,nt)||C.push(nt)}),C}function Vn(k,A){return tn(A).filter(C=>!yn(k,C))}class ft{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(A){this._rawValidators=A||[],this._composedValidatorFn=Tt(this._rawValidators)}_setAsyncValidators(A){this._rawAsyncValidators=A||[],this._composedAsyncValidatorFn=Mt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(A){this._onDestroyCallbacks.push(A)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(A=>A()),this._onDestroyCallbacks=[]}reset(A){this.control&&this.control.reset(A)}hasError(A,C){return!!this.control&&this.control.hasError(A,C)}getError(A,C){return this.control?this.control.getError(A,C):null}}class nn extends ft{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Lt extends ft{get formDirective(){return null}get path(){return null}}class En{constructor(A){this._cd=A}is(A){var C,q,nt;return"submitted"===A?!!(null===(C=this._cd)||void 0===C?void 0:C.submitted):!!(null===(nt=null===(q=this._cd)||void 0===q?void 0:q.control)||void 0===nt?void 0:nt[A])}}let Wt=(()=>{class k extends En{constructor(C){super(C)}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(nn,2))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(C,q){2&C&&p.ekj("ng-untouched",q.is("untouched"))("ng-touched",q.is("touched"))("ng-pristine",q.is("pristine"))("ng-dirty",q.is("dirty"))("ng-valid",q.is("valid"))("ng-invalid",q.is("invalid"))("ng-pending",q.is("pending"))},features:[p.qOj]}),k})(),zt=(()=>{class k extends En{constructor(C){super(C)}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(Lt,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(C,q){2&C&&p.ekj("ng-untouched",q.is("untouched"))("ng-touched",q.is("touched"))("ng-pristine",q.is("pristine"))("ng-dirty",q.is("dirty"))("ng-valid",q.is("valid"))("ng-invalid",q.is("invalid"))("ng-pending",q.is("pending"))("ng-submitted",q.is("submitted"))},features:[p.qOj]}),k})();function Qt(k,A){ct(k,A),A.valueAccessor.writeValue(k.value),function Yt(k,A){A.valueAccessor.registerOnChange(C=>{k._pendingValue=C,k._pendingChange=!0,k._pendingDirty=!0,"change"===k.updateOn&&rn(k,A)})}(k,A),function he(k,A){const C=(q,nt)=>{A.valueAccessor.writeValue(q),nt&&A.viewToModelUpdate(q)};k.registerOnChange(C),A._registerOnDestroy(()=>{k._unregisterOnChange(C)})}(k,A),function In(k,A){A.valueAccessor.registerOnTouched(()=>{k._pendingTouched=!0,"blur"===k.updateOn&&k._pendingChange&&rn(k,A),"submit"!==k.updateOn&&k.markAsTouched()})}(k,A),function Ut(k,A){if(A.valueAccessor.setDisabledState){const C=q=>{A.valueAccessor.setDisabledState(q)};k.registerOnDisabledChange(C),A._registerOnDestroy(()=>{k._unregisterOnDisabledChange(C)})}}(k,A)}function lr(k,A,C=!0){const q=()=>{};A.valueAccessor&&(A.valueAccessor.registerOnChange(q),A.valueAccessor.registerOnTouched(q)),Bt(k,A),k&&(A._invokeOnDestroyCallbacks(),k._registerOnCollectionChange(()=>{}))}function wn(k,A){k.forEach(C=>{C.registerOnValidatorChange&&C.registerOnValidatorChange(A)})}function ct(k,A){const C=lt(k);null!==A.validator?k.setValidators(Ft(C,A.validator)):"function"==typeof C&&k.setValidators([C]);const q=pn(k);null!==A.asyncValidator?k.setAsyncValidators(Ft(q,A.asyncValidator)):"function"==typeof q&&k.setAsyncValidators([q]);const nt=()=>k.updateValueAndValidity();wn(A._rawValidators,nt),wn(A._rawAsyncValidators,nt)}function Bt(k,A){let C=!1;if(null!==k){if(null!==A.validator){const nt=lt(k);if(Array.isArray(nt)&&nt.length>0){const on=nt.filter(dr=>dr!==A.validator);on.length!==nt.length&&(C=!0,k.setValidators(on))}}if(null!==A.asyncValidator){const nt=pn(k);if(Array.isArray(nt)&&nt.length>0){const on=nt.filter(dr=>dr!==A.asyncValidator);on.length!==nt.length&&(C=!0,k.setAsyncValidators(on))}}}const q=()=>{};return wn(A._rawValidators,q),wn(A._rawAsyncValidators,q),C}function rn(k,A){k._pendingDirty&&k.markAsDirty(),k.setValue(k._pendingValue,{emitModelToViewChange:!1}),A.viewToModelUpdate(k._pendingValue),k._pendingChange=!1}function te(k,A){ct(k,A)}function de(k,A){if(!k.hasOwnProperty("model"))return!1;const C=k.model;return!!C.isFirstChange()||!Object.is(A,C.currentValue)}function be(k,A){k._syncPendingControls(),A.forEach(C=>{const q=C.control;"submit"===q.updateOn&&q._pendingChange&&(C.viewToModelUpdate(q._pendingValue),q._pendingChange=!1)})}function rt(k,A){if(!A)return null;let C,q,nt;return Array.isArray(A),A.forEach(on=>{on.constructor===je?C=on:function se(k){return Object.getPrototypeOf(k.constructor)===Oe}(on)?q=on:nt=on}),nt||q||C||null}function Ct(k,A){const C=k.indexOf(A);C>-1&&k.splice(C,1)}const rr="VALID",ti="INVALID",ir="PENDING",sr="DISABLED";function wi(k){return(vn(k)?k.validators:k)||null}function Kr(k){return Array.isArray(k)?Tt(k):k||null}function yt(k,A){return(vn(A)?A.asyncValidators:k)||null}function en(k){return Array.isArray(k)?Mt(k):k||null}function vn(k){return null!=k&&!Array.isArray(k)&&"object"==typeof k}const Dr=k=>k instanceof gn,ni=k=>k instanceof Gr;function ci(k){return Dr(k)?k.value:k.getRawValue()}function Wn(k,A){const C=ni(k),q=k.controls;if(!(C?Object.keys(q):q).length)throw new p.vHH(1e3,"");if(!q[A])throw new p.vHH(1001,"")}function mr(k,A){ni(k),k._forEachChild((q,nt)=>{if(void 0===A[nt])throw new p.vHH(1002,"")})}class Lr{constructor(A,C){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=A,this._rawAsyncValidators=C,this._composedValidatorFn=Kr(this._rawValidators),this._composedAsyncValidatorFn=en(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(A){this._rawValidators=this._composedValidatorFn=A}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(A){this._rawAsyncValidators=this._composedAsyncValidatorFn=A}get parent(){return this._parent}get valid(){return this.status===rr}get invalid(){return this.status===ti}get pending(){return this.status==ir}get disabled(){return this.status===sr}get enabled(){return this.status!==sr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(A){this._rawValidators=A,this._composedValidatorFn=Kr(A)}setAsyncValidators(A){this._rawAsyncValidators=A,this._composedAsyncValidatorFn=en(A)}addValidators(A){this.setValidators(qn(A,this._rawValidators))}addAsyncValidators(A){this.setAsyncValidators(qn(A,this._rawAsyncValidators))}removeValidators(A){this.setValidators(Vn(A,this._rawValidators))}removeAsyncValidators(A){this.setAsyncValidators(Vn(A,this._rawAsyncValidators))}hasValidator(A){return yn(this._rawValidators,A)}hasAsyncValidator(A){return yn(this._rawAsyncValidators,A)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(A={}){this.touched=!0,this._parent&&!A.onlySelf&&this._parent.markAsTouched(A)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(A=>A.markAllAsTouched())}markAsUntouched(A={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(C=>{C.markAsUntouched({onlySelf:!0})}),this._parent&&!A.onlySelf&&this._parent._updateTouched(A)}markAsDirty(A={}){this.pristine=!1,this._parent&&!A.onlySelf&&this._parent.markAsDirty(A)}markAsPristine(A={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(C=>{C.markAsPristine({onlySelf:!0})}),this._parent&&!A.onlySelf&&this._parent._updatePristine(A)}markAsPending(A={}){this.status=ir,!1!==A.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!A.onlySelf&&this._parent.markAsPending(A)}disable(A={}){const C=this._parentMarkedDirty(A.onlySelf);this.status=sr,this.errors=null,this._forEachChild(q=>{q.disable(Object.assign(Object.assign({},A),{onlySelf:!0}))}),this._updateValue(),!1!==A.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},A),{skipPristineCheck:C})),this._onDisabledChange.forEach(q=>q(!0))}enable(A={}){const C=this._parentMarkedDirty(A.onlySelf);this.status=rr,this._forEachChild(q=>{q.enable(Object.assign(Object.assign({},A),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:A.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},A),{skipPristineCheck:C})),this._onDisabledChange.forEach(q=>q(!1))}_updateAncestors(A){this._parent&&!A.onlySelf&&(this._parent.updateValueAndValidity(A),A.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(A){this._parent=A}updateValueAndValidity(A={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rr||this.status===ir)&&this._runAsyncValidator(A.emitEvent)),!1!==A.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!A.onlySelf&&this._parent.updateValueAndValidity(A)}_updateTreeValidity(A={emitEvent:!0}){this._forEachChild(C=>C._updateTreeValidity(A)),this.updateValueAndValidity({onlySelf:!0,emitEvent:A.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sr:rr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(A){if(this.asyncValidator){this.status=ir,this._hasOwnPendingAsyncValidator=!0;const C=Xe(this.asyncValidator(this));this._asyncValidationSubscription=C.subscribe(q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(q,{emitEvent:A})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(A,C={}){this.errors=A,this._updateControlsErrors(!1!==C.emitEvent)}get(A){return function wr(k,A,C){if(null==A||(Array.isArray(A)||(A=A.split(C)),Array.isArray(A)&&0===A.length))return null;let q=k;return A.forEach(nt=>{q=ni(q)?q.controls.hasOwnProperty(nt)?q.controls[nt]:null:(k=>k instanceof Ri)(q)&&q.at(nt)||null}),q}(this,A,".")}getError(A,C){const q=C?this.get(C):this;return q&&q.errors?q.errors[A]:null}hasError(A,C){return!!this.getError(A,C)}get root(){let A=this;for(;A._parent;)A=A._parent;return A}_updateControlsErrors(A){this.status=this._calculateStatus(),A&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(A)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?sr:this.errors?ti:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ir)?ir:this._anyControlsHaveStatus(ti)?ti:rr}_anyControlsHaveStatus(A){return this._anyControls(C=>C.status===A)}_anyControlsDirty(){return this._anyControls(A=>A.dirty)}_anyControlsTouched(){return this._anyControls(A=>A.touched)}_updatePristine(A={}){this.pristine=!this._anyControlsDirty(),this._parent&&!A.onlySelf&&this._parent._updatePristine(A)}_updateTouched(A={}){this.touched=this._anyControlsTouched(),this._parent&&!A.onlySelf&&this._parent._updateTouched(A)}_isBoxedValue(A){return"object"==typeof A&&null!==A&&2===Object.keys(A).length&&"value"in A&&"disabled"in A}_registerOnCollectionChange(A){this._onCollectionChange=A}_setUpdateStrategy(A){vn(A)&&null!=A.updateOn&&(this._updateOn=A.updateOn)}_parentMarkedDirty(A){return!A&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class gn extends Lr{constructor(A=null,C,q){super(wi(C),yt(q,C)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(A),this._setUpdateStrategy(C),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vn(C)&&C.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(A)?A.value:A)}setValue(A,C={}){this.value=this._pendingValue=A,this._onChange.length&&!1!==C.emitModelToViewChange&&this._onChange.forEach(q=>q(this.value,!1!==C.emitViewToModelChange)),this.updateValueAndValidity(C)}patchValue(A,C={}){this.setValue(A,C)}reset(A=this.defaultValue,C={}){this._applyFormState(A),this.markAsPristine(C),this.markAsUntouched(C),this.setValue(this.value,C),this._pendingChange=!1}_updateValue(){}_anyControls(A){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(A){this._onChange.push(A)}_unregisterOnChange(A){Ct(this._onChange,A)}registerOnDisabledChange(A){this._onDisabledChange.push(A)}_unregisterOnDisabledChange(A){Ct(this._onDisabledChange,A)}_forEachChild(A){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(A){this._isBoxedValue(A)?(this.value=this._pendingValue=A.value,A.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=A}}class Gr extends Lr{constructor(A,C,q){super(wi(C),yt(q,C)),this.controls=A,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(A,C){return this.controls[A]?this.controls[A]:(this.controls[A]=C,C.setParent(this),C._registerOnCollectionChange(this._onCollectionChange),C)}addControl(A,C,q={}){this.registerControl(A,C),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}removeControl(A,C={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),delete this.controls[A],this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}setControl(A,C,q={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),delete this.controls[A],C&&this.registerControl(A,C),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}contains(A){return this.controls.hasOwnProperty(A)&&this.controls[A].enabled}setValue(A,C={}){mr(this,A),Object.keys(A).forEach(q=>{Wn(this,q),this.controls[q].setValue(A[q],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(A,C={}){null!=A&&(Object.keys(A).forEach(q=>{this.controls[q]&&this.controls[q].patchValue(A[q],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(A={},C={}){this._forEachChild((q,nt)=>{q.reset(A[nt],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this._reduceChildren({},(A,C,q)=>(A[q]=ci(C),A))}_syncPendingControls(){let A=this._reduceChildren(!1,(C,q)=>!!q._syncPendingControls()||C);return A&&this.updateValueAndValidity({onlySelf:!0}),A}_forEachChild(A){Object.keys(this.controls).forEach(C=>{const q=this.controls[C];q&&A(q,C)})}_setUpControls(){this._forEachChild(A=>{A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(A){for(const C of Object.keys(this.controls)){const q=this.controls[C];if(this.contains(C)&&A(q))return!0}return!1}_reduceValue(){return this._reduceChildren({},(A,C,q)=>((C.enabled||this.disabled)&&(A[q]=C.value),A))}_reduceChildren(A,C){let q=A;return this._forEachChild((nt,on)=>{q=C(q,nt,on)}),q}_allControlsDisabled(){for(const A of Object.keys(this.controls))if(this.controls[A].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Ri extends Lr{constructor(A,C,q){super(wi(C),yt(q,C)),this.controls=A,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(A){return this.controls[A]}push(A,C={}){this.controls.push(A),this._registerControl(A),this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}insert(A,C,q={}){this.controls.splice(A,0,C),this._registerControl(C),this.updateValueAndValidity({emitEvent:q.emitEvent})}removeAt(A,C={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),this.controls.splice(A,1),this.updateValueAndValidity({emitEvent:C.emitEvent})}setControl(A,C,q={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),this.controls.splice(A,1),C&&(this.controls.splice(A,0,C),this._registerControl(C)),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(A,C={}){mr(this,A),A.forEach((q,nt)=>{Wn(this,nt),this.at(nt).setValue(q,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(A,C={}){null!=A&&(A.forEach((q,nt)=>{this.at(nt)&&this.at(nt).patchValue(q,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(A=[],C={}){this._forEachChild((q,nt)=>{q.reset(A[nt],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this.controls.map(A=>ci(A))}clear(A={}){this.controls.length<1||(this._forEachChild(C=>C._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:A.emitEvent}))}_syncPendingControls(){let A=this.controls.reduce((C,q)=>!!q._syncPendingControls()||C,!1);return A&&this.updateValueAndValidity({onlySelf:!0}),A}_forEachChild(A){this.controls.forEach((C,q)=>{A(C,q)})}_updateValue(){this.value=this.controls.filter(A=>A.enabled||this.disabled).map(A=>A.value)}_anyControls(A){return this.controls.some(C=>C.enabled&&A(C))}_setUpControls(){this._forEachChild(A=>this._registerControl(A))}_allControlsDisabled(){for(const A of this.controls)if(A.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(A){A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange)}}const ns={provide:Lt,useExisting:(0,p.Gpc)(()=>Cr)},Or=(()=>Promise.resolve(null))();let Cr=(()=>{class k extends Lt{constructor(C,q){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new Gr({},Tt(C),Mt(q))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(C){Or.then(()=>{const q=this._findContainer(C.path);C.control=q.registerControl(C.name,C.control),Qt(C.control,C),C.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(C)})}getControl(C){return this.form.get(C.path)}removeControl(C){Or.then(()=>{const q=this._findContainer(C.path);q&&q.removeControl(C.name),this._directives.delete(C)})}addFormGroup(C){Or.then(()=>{const q=this._findContainer(C.path),nt=new Gr({});te(nt,C),q.registerControl(C.name,nt),nt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(C){Or.then(()=>{const q=this._findContainer(C.path);q&&q.removeControl(C.name)})}getFormGroup(C){return this.form.get(C.path)}updateModel(C,q){Or.then(()=>{this.form.get(C.path).setValue(q)})}setValue(C){this.control.setValue(C)}onSubmit(C){return this.submitted=!0,be(this.form,this._directives),this.ngSubmit.emit(C),!1}onReset(){this.resetForm()}resetForm(C){this.form.reset(C),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(C){return C.pop(),C.length?this.form.get(C):this.form}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(Ne,10),p.Y36(Re,10))},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(C,q){1&C&&p.NdJ("submit",function(on){return q.onSubmit(on)})("reset",function(){return q.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([ns]),p.qOj]}),k})();const fi={provide:nn,useExisting:(0,p.Gpc)(()=>yr)},Wi=(()=>Promise.resolve(null))();let yr=(()=>{class k extends nn{constructor(C,q,nt,on,dr){super(),this._changeDetectorRef=dr,this.control=new gn,this._registered=!1,this.update=new p.vpe,this._parent=C,this._setValidators(q),this._setAsyncValidators(nt),this.valueAccessor=rt(0,on)}ngOnChanges(C){if(this._checkForErrors(),!this._registered||"name"in C){if(this._registered&&(this._checkName(),this.formDirective)){const q=C.name.previousValue;this.formDirective.removeControl({name:q,path:this._getPath(q)})}this._setUpControl()}"isDisabled"in C&&this._updateDisabled(C),de(C,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Qt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(C){Wi.then(()=>{var q;this.control.setValue(C,{emitViewToModelChange:!1}),null===(q=this._changeDetectorRef)||void 0===q||q.markForCheck()})}_updateDisabled(C){const q=C.isDisabled.currentValue,nt=""===q||q&&"false"!==q;Wi.then(()=>{var on;nt&&!this.control.disabled?this.control.disable():!nt&&this.control.disabled&&this.control.enable(),null===(on=this._changeDetectorRef)||void 0===on||on.markForCheck()})}_getPath(C){return this._parent?function gr(k,A){return[...A.path,k]}(C,this._parent):[C]}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(Lt,9),p.Y36(Ne,10),p.Y36(Re,10),p.Y36(Ae,10),p.Y36(p.sBO,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([fi]),p.qOj,p.TTD]}),k})(),Cs=(()=>{class k{}return k.\u0275fac=function(C){return new(C||k)},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),k})(),jn=(()=>{class k{}return k.\u0275fac=function(C){return new(C||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({}),k})();const Ke=new p.OlP("NgModelWithFormControlWarning"),ot={provide:nn,useExisting:(0,p.Gpc)(()=>Dt)};let Dt=(()=>{class k extends nn{constructor(C,q,nt,on){super(),this._ngModelWarningConfig=on,this.update=new p.vpe,this._ngModelWarningSent=!1,this._setValidators(C),this._setAsyncValidators(q),this.valueAccessor=rt(0,nt)}set isDisabled(C){}ngOnChanges(C){if(this._isControlChanged(C)){const q=C.form.previousValue;q&&lr(q,this,!1),Qt(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}de(C,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&lr(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}_isControlChanged(C){return C.hasOwnProperty("form")}}return k._ngModelWarningSentOnce=!1,k.\u0275fac=function(C){return new(C||k)(p.Y36(Ne,10),p.Y36(Re,10),p.Y36(Ae,10),p.Y36(Ke,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[p._Bn([ot]),p.qOj,p.TTD]}),k})();const qt={provide:Lt,useExisting:(0,p.Gpc)(()=>Fn)};let Fn=(()=>{class k extends Lt{constructor(C,q){super(),this.validators=C,this.asyncValidators=q,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(C),this._setAsyncValidators(q)}ngOnChanges(C){this._checkFormPresent(),C.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Bt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(C){const q=this.form.get(C.path);return Qt(q,C),q.updateValueAndValidity({emitEvent:!1}),this.directives.push(C),q}getControl(C){return this.form.get(C.path)}removeControl(C){lr(C.control||null,C,!1),Ct(this.directives,C)}addFormGroup(C){this._setUpFormContainer(C)}removeFormGroup(C){this._cleanUpFormContainer(C)}getFormGroup(C){return this.form.get(C.path)}addFormArray(C){this._setUpFormContainer(C)}removeFormArray(C){this._cleanUpFormContainer(C)}getFormArray(C){return this.form.get(C.path)}updateModel(C,q){this.form.get(C.path).setValue(q)}onSubmit(C){return this.submitted=!0,be(this.form,this.directives),this.ngSubmit.emit(C),!1}onReset(){this.resetForm()}resetForm(C){this.form.reset(C),this.submitted=!1}_updateDomValue(){this.directives.forEach(C=>{const q=C.control,nt=this.form.get(C.path);q!==nt&&(lr(q||null,C),Dr(nt)&&(Qt(nt,C),C.control=nt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(C){const q=this.form.get(C.path);te(q,C),q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(C){if(this.form){const q=this.form.get(C.path);q&&function Ee(k,A){return Bt(k,A)}(q,C)&&q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ct(this.form,this),this._oldForm&&Bt(this._oldForm,this)}_checkFormPresent(){}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(Ne,10),p.Y36(Re,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroup",""]],hostBindings:function(C,q){1&C&&p.NdJ("submit",function(on){return q.onSubmit(on)})("reset",function(){return q.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([qt]),p.qOj,p.TTD]}),k})();const bs={provide:Ae,useExisting:(0,p.Gpc)(()=>br),multi:!0};function gi(k,A){return null==k?`${A}`:(A&&"object"==typeof A&&(A="Object"),`${k}: ${A}`.slice(0,50))}let br=(()=>{class k extends Oe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(C){this._compareWith=C}writeValue(C){this.value=C;const nt=gi(this._getOptionId(C),C);this.setProperty("value",nt)}registerOnChange(C){this.onChange=q=>{this.value=this._getOptionValue(q),C(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(C){for(const q of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(q),C))return q;return null}_getOptionValue(C){const q=function Di(k){return k.split(":")[0]}(C);return this._optionMap.has(q)?this._optionMap.get(q):C}}return k.\u0275fac=function(){let A;return function(q){return(A||(A=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(C,q){1&C&&p.NdJ("change",function(on){return q.onChange(on.target.value)})("blur",function(){return q.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([bs]),p.qOj]}),k})(),rs=(()=>{class k{constructor(C,q,nt){this._element=C,this._renderer=q,this._select=nt,this._select&&(this.id=this._select._registerOption())}set ngValue(C){null!=this._select&&(this._select._optionMap.set(this.id,C),this._setElementValue(gi(this.id,C)),this._select.writeValue(this._select.value))}set value(C){this._setElementValue(C),this._select&&this._select.writeValue(this._select.value)}_setElementValue(C){this._renderer.setProperty(this._element.nativeElement,"value",C)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(br,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();const Ki={provide:Ae,useExisting:(0,p.Gpc)(()=>Ni),multi:!0};function qi(k,A){return null==k?`${A}`:("string"==typeof A&&(A=`'${A}'`),A&&"object"==typeof A&&(A="Object"),`${k}: ${A}`.slice(0,50))}let Ni=(()=>{class k extends Oe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(C){this._compareWith=C}writeValue(C){let q;if(this.value=C,Array.isArray(C)){const nt=C.map(on=>this._getOptionId(on));q=(on,dr)=>{on._setSelected(nt.indexOf(dr.toString())>-1)}}else q=(nt,on)=>{nt._setSelected(!1)};this._optionMap.forEach(q)}registerOnChange(C){this.onChange=q=>{const nt=[],on=q.selectedOptions;if(void 0!==on){const dr=on;for(let os=0;os<dr.length;os++){const ro=this._getOptionValue(dr[os].value);nt.push(ro)}}else{const dr=q.options;for(let os=0;os<dr.length;os++){const Ci=dr[os];if(Ci.selected){const ro=this._getOptionValue(Ci.value);nt.push(ro)}}}this.value=nt,C(nt)}}_registerOption(C){const q=(this._idCounter++).toString();return this._optionMap.set(q,C),q}_getOptionId(C){for(const q of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(q)._value,C))return q;return null}_getOptionValue(C){const q=function ks(k){return k.split(":")[0]}(C);return this._optionMap.has(q)?this._optionMap.get(q)._value:C}}return k.\u0275fac=function(){let A;return function(q){return(A||(A=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(C,q){1&C&&p.NdJ("change",function(on){return q.onChange(on.target)})("blur",function(){return q.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Ki]),p.qOj]}),k})(),is=(()=>{class k{constructor(C,q,nt){this._element=C,this._renderer=q,this._select=nt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(C){null!=this._select&&(this._value=C,this._setElementValue(qi(this.id,C)),this._select.writeValue(this._select.value))}set value(C){this._select?(this._value=C,this._setElementValue(qi(this.id,C)),this._select.writeValue(this._select.value)):this._setElementValue(C)}_setElementValue(C){this._renderer.setProperty(this._element.nativeElement,"value",C)}_setSelected(C){this._renderer.setProperty(this._element.nativeElement,"selected",C)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Ni,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})(),Tr=(()=>{class k{constructor(){this._validator=Me}ngOnChanges(C){if(this.inputName in C){const q=this.normalizeInput(C[this.inputName].currentValue);this._enabled=this.enabled(q),this._validator=this._enabled?this.createValidator(q):Me,this._onChange&&this._onChange()}}validate(C){return this._validator(C)}registerOnValidatorChange(C){this._onChange=C}enabled(C){return null!=C}}return k.\u0275fac=function(C){return new(C||k)},k.\u0275dir=p.lG2({type:k,features:[p.TTD]}),k})();const Yr={provide:Ne,useExisting:(0,p.Gpc)(()=>di),multi:!0};let di=(()=>{class k extends Tr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=C=>function Zi(k){return null!=k&&!1!==k&&"false"!=`${k}`}(C),this.createValidator=C=>me}enabled(C){return C}}return k.\u0275fac=function(){let A;return function(q){return(A||(A=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(C,q){2&C&&p.uIk("required",q._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([Yr]),p.qOj]}),k})();const fe={provide:Ne,useExisting:(0,p.Gpc)(()=>Je),multi:!0};let Je=(()=>{class k extends Tr{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=C=>C,this.createValidator=C=>Q(C)}}return k.\u0275fac=function(){let A;return function(q){return(A||(A=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(C,q){2&C&&p.uIk("pattern",q._enabled?q.pattern:null)},inputs:{pattern:"pattern"},features:[p._Bn([fe]),p.qOj]}),k})(),Hn=(()=>{class k{}return k.\u0275fac=function(C){return new(C||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[[jn]]}),k})(),Cn=(()=>{class k{}return k.\u0275fac=function(C){return new(C||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[Hn]}),k})(),Sn=(()=>{class k{static withConfig(C){return{ngModule:k,providers:[{provide:Ke,useValue:C.warnOnNgModelWithFormControl}]}}}return k.\u0275fac=function(C){return new(C||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[Hn]}),k})()},2313:(Pt,ze,N)=>{N.d(ze,{H7:()=>Ee,b2:()=>ur,q6:()=>Lt});var p=N(9808),H=N(5e3);class Y extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ve extends Y{static makeCurrent(){(0,p.HT)(new ve)}onAndCancel(de,se,be){return de.addEventListener(se,be,!1),()=>{de.removeEventListener(se,be,!1)}}dispatchEvent(de,se){de.dispatchEvent(se)}remove(de){de.parentNode&&de.parentNode.removeChild(de)}createElement(de,se){return(se=se||this.getDefaultDocument()).createElement(de)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(de){return de.nodeType===Node.ELEMENT_NODE}isShadowRoot(de){return de instanceof DocumentFragment}getGlobalEventTarget(de,se){return"window"===se?window:"document"===se?de:"body"===se?de.body:null}getBaseHref(de){const se=function Ce(){return pe=pe||document.querySelector("base"),pe?pe.getAttribute("href"):null}();return null==se?null:function Ae(we){Oe=Oe||document.createElement("a"),Oe.setAttribute("href",we);const de=Oe.pathname;return"/"===de.charAt(0)?de:`/${de}`}(se)}resetBaseElement(){pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(de){return(0,p.Mx)(document.cookie,de)}}let Oe,pe=null;const Ve=new H.OlP("TRANSITION_ID"),ie=[{provide:H.ip1,useFactory:function le(we,de,se){return()=>{se.get(H.CZH).donePromise.then(()=>{const be=(0,p.q)(),rt=de.querySelectorAll(`style[ng-transition="${we}"]`);for(let Ct=0;Ct<rt.length;Ct++)be.remove(rt[Ct])})}},deps:[Ve,p.K0,H.zs3],multi:!0}];class ge{static init(){(0,H.VLi)(new ge)}addToWindow(de){H.dqk.getAngularTestability=(be,rt=!0)=>{const Ct=de.findTestabilityInTree(be,rt);if(null==Ct)throw new Error("Could not find testability for element.");return Ct},H.dqk.getAllAngularTestabilities=()=>de.getAllTestabilities(),H.dqk.getAllAngularRootElements=()=>de.getAllRootElements(),H.dqk.frameworkStabilizers||(H.dqk.frameworkStabilizers=[]),H.dqk.frameworkStabilizers.push(be=>{const rt=H.dqk.getAllAngularTestabilities();let Ct=rt.length,Jt=!1;const Pn=function(rr){Jt=Jt||rr,Ct--,0==Ct&&be(Jt)};rt.forEach(function(rr){rr.whenStable(Pn)})})}findTestabilityInTree(de,se,be){if(null==se)return null;const rt=de.getTestability(se);return null!=rt?rt:be?(0,p.q)().isShadowRoot(se)?this.findTestabilityInTree(de,se.host,!0):this.findTestabilityInTree(de,se.parentElement,!0):null}}let Be=(()=>{class we{build(){return new XMLHttpRequest}}return we.\u0275fac=function(se){return new(se||we)},we.\u0275prov=H.Yz7({token:we,factory:we.\u0275fac}),we})();const je=new H.OlP("EventManagerPlugins");let qe=(()=>{class we{constructor(se,be){this._zone=be,this._eventNameToPlugin=new Map,se.forEach(rt=>rt.manager=this),this._plugins=se.slice().reverse()}addEventListener(se,be,rt){return this._findPluginFor(be).addEventListener(se,be,rt)}addGlobalEventListener(se,be,rt){return this._findPluginFor(be).addGlobalEventListener(se,be,rt)}getZone(){return this._zone}_findPluginFor(se){const be=this._eventNameToPlugin.get(se);if(be)return be;const rt=this._plugins;for(let Ct=0;Ct<rt.length;Ct++){const Jt=rt[Ct];if(Jt.supports(se))return this._eventNameToPlugin.set(se,Jt),Jt}throw new Error(`No event manager plugin found for event ${se}`)}}return we.\u0275fac=function(se){return new(se||we)(H.LFG(je),H.LFG(H.R0b))},we.\u0275prov=H.Yz7({token:we,factory:we.\u0275fac}),we})();class ht{constructor(de){this._doc=de}addGlobalEventListener(de,se,be){const rt=(0,p.q)().getGlobalEventTarget(this._doc,de);if(!rt)throw new Error(`Unsupported event target ${rt} for event ${se}`);return this.addEventListener(rt,se,be)}}let Ne=(()=>{class we{constructor(){this._stylesSet=new Set}addStyles(se){const be=new Set;se.forEach(rt=>{this._stylesSet.has(rt)||(this._stylesSet.add(rt),be.add(rt))}),this.onStylesAdded(be)}onStylesAdded(se){}getAllStyles(){return Array.from(this._stylesSet)}}return we.\u0275fac=function(se){return new(se||we)},we.\u0275prov=H.Yz7({token:we,factory:we.\u0275fac}),we})(),Re=(()=>{class we extends Ne{constructor(se){super(),this._doc=se,this._hostNodes=new Map,this._hostNodes.set(se.head,[])}_addStylesToHost(se,be,rt){se.forEach(Ct=>{const Jt=this._doc.createElement("style");Jt.textContent=Ct,rt.push(be.appendChild(Jt))})}addHost(se){const be=[];this._addStylesToHost(this._stylesSet,se,be),this._hostNodes.set(se,be)}removeHost(se){const be=this._hostNodes.get(se);be&&be.forEach(Et),this._hostNodes.delete(se)}onStylesAdded(se){this._hostNodes.forEach((be,rt)=>{this._addStylesToHost(se,rt,be)})}ngOnDestroy(){this._hostNodes.forEach(se=>se.forEach(Et))}}return we.\u0275fac=function(se){return new(se||we)(H.LFG(p.K0))},we.\u0275prov=H.Yz7({token:we,factory:we.\u0275fac}),we})();function Et(we){(0,p.q)().remove(we)}const $={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},L=/%COMP%/g;function Q(we,de,se){for(let be=0;be<de.length;be++){let rt=de[be];Array.isArray(rt)?Q(we,rt,se):(rt=rt.replace(L,we),se.push(rt))}return se}function Me(we){return de=>{if("__ngUnwrap__"===de)return we;!1===we(de)&&(de.preventDefault(),de.returnValue=!1)}}let Xe=(()=>{class we{constructor(se,be,rt){this.eventManager=se,this.sharedStylesHost=be,this.appId=rt,this.rendererByCompId=new Map,this.defaultRenderer=new Ue(se)}createRenderer(se,be){if(!se||!be)return this.defaultRenderer;switch(be.encapsulation){case H.ifc.Emulated:{let rt=this.rendererByCompId.get(be.id);return rt||(rt=new Gt(this.eventManager,this.sharedStylesHost,be,this.appId),this.rendererByCompId.set(be.id,rt)),rt.applyToHost(se),rt}case 1:case H.ifc.ShadowDom:return new mt(this.eventManager,this.sharedStylesHost,se,be);default:if(!this.rendererByCompId.has(be.id)){const rt=Q(be.id,be.styles,[]);this.sharedStylesHost.addStyles(rt),this.rendererByCompId.set(be.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return we.\u0275fac=function(se){return new(se||we)(H.LFG(qe),H.LFG(Re),H.LFG(H.AFp))},we.\u0275prov=H.Yz7({token:we,factory:we.\u0275fac}),we})();class Ue{constructor(de){this.eventManager=de,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(de,se){return se?document.createElementNS($[se]||se,de):document.createElement(de)}createComment(de){return document.createComment(de)}createText(de){return document.createTextNode(de)}appendChild(de,se){de.appendChild(se)}insertBefore(de,se,be){de&&de.insertBefore(se,be)}removeChild(de,se){de&&de.removeChild(se)}selectRootElement(de,se){let be="string"==typeof de?document.querySelector(de):de;if(!be)throw new Error(`The selector "${de}" did not match any elements`);return se||(be.textContent=""),be}parentNode(de){return de.parentNode}nextSibling(de){return de.nextSibling}setAttribute(de,se,be,rt){if(rt){se=rt+":"+se;const Ct=$[rt];Ct?de.setAttributeNS(Ct,se,be):de.setAttribute(se,be)}else de.setAttribute(se,be)}removeAttribute(de,se,be){if(be){const rt=$[be];rt?de.removeAttributeNS(rt,se):de.removeAttribute(`${be}:${se}`)}else de.removeAttribute(se)}addClass(de,se){de.classList.add(se)}removeClass(de,se){de.classList.remove(se)}setStyle(de,se,be,rt){rt&(H.JOm.DashCase|H.JOm.Important)?de.style.setProperty(se,be,rt&H.JOm.Important?"important":""):de.style[se]=be}removeStyle(de,se,be){be&H.JOm.DashCase?de.style.removeProperty(se):de.style[se]=""}setProperty(de,se,be){de[se]=be}setValue(de,se){de.nodeValue=se}listen(de,se,be){return"string"==typeof de?this.eventManager.addGlobalEventListener(de,se,Me(be)):this.eventManager.addEventListener(de,se,Me(be))}}class Gt extends Ue{constructor(de,se,be,rt){super(de),this.component=be;const Ct=Q(rt+"-"+be.id,be.styles,[]);se.addStyles(Ct),this.contentAttr=function Fe(we){return"_ngcontent-%COMP%".replace(L,we)}(rt+"-"+be.id),this.hostAttr=function _e(we){return"_nghost-%COMP%".replace(L,we)}(rt+"-"+be.id)}applyToHost(de){super.setAttribute(de,this.hostAttr,"")}createElement(de,se){const be=super.createElement(de,se);return super.setAttribute(be,this.contentAttr,""),be}}class mt extends Ue{constructor(de,se,be,rt){super(de),this.sharedStylesHost=se,this.hostEl=be,this.shadowRoot=be.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ct=Q(rt.id,rt.styles,[]);for(let Jt=0;Jt<Ct.length;Jt++){const Pn=document.createElement("style");Pn.textContent=Ct[Jt],this.shadowRoot.appendChild(Pn)}}nodeOrShadowRoot(de){return de===this.hostEl?this.shadowRoot:de}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(de,se){return super.appendChild(this.nodeOrShadowRoot(de),se)}insertBefore(de,se,be){return super.insertBefore(this.nodeOrShadowRoot(de),se,be)}removeChild(de,se){return super.removeChild(this.nodeOrShadowRoot(de),se)}parentNode(de){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(de)))}}let Tt=(()=>{class we extends ht{constructor(se){super(se)}supports(se){return!0}addEventListener(se,be,rt){return se.addEventListener(be,rt,!1),()=>this.removeEventListener(se,be,rt)}removeEventListener(se,be,rt){return se.removeEventListener(be,rt)}}return we.\u0275fac=function(se){return new(se||we)(H.LFG(p.K0))},we.\u0275prov=H.Yz7({token:we,factory:we.\u0275fac}),we})();const $t=["alt","control","meta","shift"],Ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pn={alt:we=>we.altKey,control:we=>we.ctrlKey,meta:we=>we.metaKey,shift:we=>we.shiftKey};let tn=(()=>{class we extends ht{constructor(se){super(se)}supports(se){return null!=we.parseEventName(se)}addEventListener(se,be,rt){const Ct=we.parseEventName(be),Jt=we.eventCallback(Ct.fullKey,rt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(se,Ct.domEventName,Jt))}static parseEventName(se){const be=se.toLowerCase().split("."),rt=be.shift();if(0===be.length||"keydown"!==rt&&"keyup"!==rt)return null;const Ct=we._normalizeKey(be.pop());let Jt="";if($t.forEach(rr=>{const ti=be.indexOf(rr);ti>-1&&(be.splice(ti,1),Jt+=rr+".")}),Jt+=Ct,0!=be.length||0===Ct.length)return null;const Pn={};return Pn.domEventName=rt,Pn.fullKey=Jt,Pn}static getEventFullKey(se){let be="",rt=function yn(we){let de=we.key;if(null==de){if(de=we.keyIdentifier,null==de)return"Unidentified";de.startsWith("U+")&&(de=String.fromCharCode(parseInt(de.substring(2),16)),3===we.location&&lt.hasOwnProperty(de)&&(de=lt[de]))}return Ft[de]||de}(se);return rt=rt.toLowerCase()," "===rt?rt="space":"."===rt&&(rt="dot"),$t.forEach(Ct=>{Ct!=rt&&pn[Ct](se)&&(be+=Ct+".")}),be+=rt,be}static eventCallback(se,be,rt){return Ct=>{we.getEventFullKey(Ct)===se&&rt.runGuarded(()=>be(Ct))}}static _normalizeKey(se){return"esc"===se?"escape":se}}return we.\u0275fac=function(se){return new(se||we)(H.LFG(p.K0))},we.\u0275prov=H.Yz7({token:we,factory:we.\u0275fac}),we})();const Lt=(0,H.eFA)(H._c5,"browser",[{provide:H.Lbi,useValue:p.bD},{provide:H.g9A,useValue:function qn(){ve.makeCurrent(),ge.init()},multi:!0},{provide:p.K0,useFactory:function ft(){return(0,H.RDi)(document),document},deps:[]}]),En=[{provide:H.zSh,useValue:"root"},{provide:H.qLn,useFactory:function Vn(){return new H.qLn},deps:[]},{provide:je,useClass:Tt,multi:!0,deps:[p.K0,H.R0b,H.Lbi]},{provide:je,useClass:tn,multi:!0,deps:[p.K0]},{provide:Xe,useClass:Xe,deps:[qe,Re,H.AFp]},{provide:H.FYo,useExisting:Xe},{provide:Ne,useExisting:Re},{provide:Re,useClass:Re,deps:[p.K0]},{provide:H.dDg,useClass:H.dDg,deps:[H.R0b]},{provide:qe,useClass:qe,deps:[je,H.R0b]},{provide:p.JF,useClass:Be,deps:[]}];let ur=(()=>{class we{constructor(se){if(se)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(se){return{ngModule:we,providers:[{provide:H.AFp,useValue:se.appId},{provide:Ve,useExisting:H.AFp},ie]}}}return we.\u0275fac=function(se){return new(se||we)(H.LFG(we,12))},we.\u0275mod=H.oAB({type:we}),we.\u0275inj=H.cJS({providers:En,imports:[p.ez,H.hGG]}),we})();"undefined"!=typeof window&&window;let Ee=(()=>{class we{}return we.\u0275fac=function(se){return new(se||we)},we.\u0275prov=H.Yz7({token:we,factory:function(se){let be=null;return be=se?new(se||we):H.LFG(Le),be},providedIn:"root"}),we})(),Le=(()=>{class we extends Ee{constructor(se){super(),this._doc=se}sanitize(se,be){if(null==be)return null;switch(se){case H.q3G.NONE:return be;case H.q3G.HTML:return(0,H.qzn)(be,"HTML")?(0,H.z3N)(be):(0,H.EiD)(this._doc,String(be)).toString();case H.q3G.STYLE:return(0,H.qzn)(be,"Style")?(0,H.z3N)(be):be;case H.q3G.SCRIPT:if((0,H.qzn)(be,"Script"))return(0,H.z3N)(be);throw new Error("unsafe value used in a script context");case H.q3G.URL:return(0,H.yhl)(be),(0,H.qzn)(be,"URL")?(0,H.z3N)(be):(0,H.mCW)(String(be));case H.q3G.RESOURCE_URL:if((0,H.qzn)(be,"ResourceURL"))return(0,H.z3N)(be);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${se} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(se){return(0,H.JVY)(se)}bypassSecurityTrustStyle(se){return(0,H.L6k)(se)}bypassSecurityTrustScript(se){return(0,H.eBb)(se)}bypassSecurityTrustUrl(se){return(0,H.LAX)(se)}bypassSecurityTrustResourceUrl(se){return(0,H.pB0)(se)}}return we.\u0275fac=function(se){return new(se||we)(H.LFG(p.K0))},we.\u0275prov=H.Yz7({token:we,factory:function(se){let be=null;return be=se?new se:function Ze(we){return new Le(we.get(p.K0))}(H.LFG(H.zs3)),be},providedIn:"root"}),we})()},9100:(Pt,ze,N)=>{N.d(ze,{gz:()=>Or,gk:()=>pn,m2:()=>lt,GH:()=>En,xV:()=>Lt,F0:()=>Ti,Od:()=>oi,yS:()=>Hs,Bz:()=>Nr,lC:()=>Zi});var p=N(5e3),H=N(9751),Y=N(576);function ve(I,E){const _=(0,Y.m)(I)?I:()=>I,S=F=>F.error(_());return new H.y(E?F=>E.schedule(S,0,F):S)}var pe=N(8421);function Ce(I){return new H.y(E=>{(0,pe.Xf)(I()).subscribe(E)})}var Oe=N(727),Ae=N(4482),Ve=N(5403);function le(){return(0,Ae.e)((I,E)=>{let _=null;I._refCount++;const S=(0,Ve.x)(E,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(_=null);const F=I._connection,j=_;_=null,F&&(!j||F===j)&&F.unsubscribe(),E.unsubscribe()});I.subscribe(S),S.closed||(_=I.connect())})}class ie extends H.y{constructor(E,_){super(),this.source=E,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,Ae.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,null==E||E.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new Oe.w0;const _=this.getSubject();E.add(this.source.subscribe((0,Ve.x)(_,void 0,()=>{this._teardown(),_.complete()},S=>{this._teardown(),_.error(S)},()=>this._teardown()))),E.closed&&(this._connection=null,E=Oe.w0.EMPTY)}return E}refCount(){return le()(this)}}var ge=N(8996),Be=N(9646),je=N(1135),qe=N(9841),ht=N(6805),Ne=N(7272),Re=N(515),Et=N(7579);function $(I){return(0,Ae.e)((E,_)=>{let j,S=null,F=!1;S=E.subscribe((0,Ve.x)(_,void 0,void 0,ne=>{j=(0,pe.Xf)(I(ne,$(I)(E))),S?(S.unsubscribe(),S=null,j.subscribe(_)):F=!0})),F&&(S.unsubscribe(),S=null,j.subscribe(_))})}var L=N(5577);function ee(I,E){return(0,Y.m)(E)?(0,L.z)(I,E,1):(0,L.z)(I,1)}var me=N(9300);function Ge(I){return I<=0?()=>Re.E:(0,Ae.e)((E,_)=>{let S=[];E.subscribe((0,Ve.x)(_,F=>{S.push(F),I<S.length&&S.shift()},()=>{for(const F of S)_.next(F);_.complete()},void 0,()=>{S=null}))})}var We=N(8068),Fe=N(6590),_e=N(4671),ae=N(4004),Xe=N(3900),Ue=N(5698),Kt=N(8675),bt=N(5026),Gt=N(590),mt=N(8505),Tt=N(8189),$t=N(9808);class Mt{constructor(E,_){this.id=E,this.url=_}}class Ft extends Mt{constructor(E,_,S="imperative",F=null){super(E,_),this.navigationTrigger=S,this.restoredState=F}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lt extends Mt{constructor(E,_,S){super(E,_),this.urlAfterRedirects=S}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pn extends Mt{constructor(E,_,S){super(E,_),this.reason=S}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tn extends Mt{constructor(E,_,S){super(E,_),this.error=S}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yn extends Mt{constructor(E,_,S,F){super(E,_),this.urlAfterRedirects=S,this.state=F}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qn extends Mt{constructor(E,_,S,F){super(E,_),this.urlAfterRedirects=S,this.state=F}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vn extends Mt{constructor(E,_,S,F,j){super(E,_),this.urlAfterRedirects=S,this.state=F,this.shouldActivate=j}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ft extends Mt{constructor(E,_,S,F){super(E,_),this.urlAfterRedirects=S,this.state=F}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nn extends Mt{constructor(E,_,S,F){super(E,_),this.urlAfterRedirects=S,this.state=F}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lt{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class En{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ur{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Un{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wt{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zt{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class On{constructor(E,_,S){this.routerEvent=E,this.position=_,this.anchor=S}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xt="primary";class Hr{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const _=this.params[E];return Array.isArray(_)?_[0]:_}return null}getAll(E){if(this.has(E)){const _=this.params[E];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Mr(I){return new Hr(I)}const nr="ngNavigationCancelingError";function xr(I){const E=Error("NavigationCancelingError: "+I);return E[nr]=!0,E}function ei(I,E,_){const S=_.path.split("/");if(S.length>I.length||"full"===_.pathMatch&&(E.hasChildren()||S.length<I.length))return null;const F={};for(let j=0;j<S.length;j++){const ne=S[j],ye=I[j];if(ne.startsWith(":"))F[ne.substring(1)]=ye;else if(ne!==ye.path)return null}return{consumed:I.slice(0,S.length),posParams:F}}function Nt(I,E){const _=I?Object.keys(I):void 0,S=E?Object.keys(E):void 0;if(!_||!S||_.length!=S.length)return!1;let F;for(let j=0;j<_.length;j++)if(F=_[j],!cn(I[F],E[F]))return!1;return!0}function cn(I,E){if(Array.isArray(I)&&Array.isArray(E)){if(I.length!==E.length)return!1;const _=[...I].sort(),S=[...E].sort();return _.every((F,j)=>S[j]===F)}return I===E}function pr(I){return Array.prototype.concat.apply([],I)}function Fr(I){return I.length>0?I[I.length-1]:null}function Yn(I,E){for(const _ in I)I.hasOwnProperty(_)&&E(I[_],_)}function Bn(I){return(0,p.CqO)(I)?I:(0,p.QGY)(I)?(0,ge.D)(Promise.resolve(I)):(0,Be.of)(I)}const Qt={exact:function ct(I,E,_){if(!Le(I.segments,E.segments)||!rn(I.segments,E.segments,_)||I.numberOfChildren!==E.numberOfChildren)return!1;for(const S in E.children)if(!I.children[S]||!ct(I.children[S],E.children[S],_))return!1;return!0},subset:Yt},lr={exact:function Ut(I,E){return Nt(I,E)},subset:function Bt(I,E){return Object.keys(E).length<=Object.keys(I).length&&Object.keys(E).every(_=>cn(I[_],E[_]))},ignored:()=>!0};function wn(I,E,_){return Qt[_.paths](I.root,E.root,_.matrixParams)&&lr[_.queryParams](I.queryParams,E.queryParams)&&!("exact"===_.fragment&&I.fragment!==E.fragment)}function Yt(I,E,_){return In(I,E,E.segments,_)}function In(I,E,_,S){if(I.segments.length>_.length){const F=I.segments.slice(0,_.length);return!(!Le(F,_)||E.hasChildren()||!rn(F,_,S))}if(I.segments.length===_.length){if(!Le(I.segments,_)||!rn(I.segments,_,S))return!1;for(const F in E.children)if(!I.children[F]||!Yt(I.children[F],E.children[F],S))return!1;return!0}{const F=_.slice(0,I.segments.length),j=_.slice(I.segments.length);return!!(Le(I.segments,F)&&rn(I.segments,F,S)&&I.children[xt])&&In(I.children[xt],E,j,S)}}function rn(I,E,_){return E.every((S,F)=>lr[_](I[F].parameters,S.parameters))}class he{constructor(E,_,S){this.root=E,this.queryParams=_,this.fragment=S}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mr(this.queryParams)),this._queryParamMap}toString(){return se.serialize(this)}}class te{constructor(E,_){this.segments=E,this.children=_,this.parent=null,Yn(_,(S,F)=>S.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return be(this)}}class Ee{constructor(E,_){this.path=E,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Mr(this.parameters)),this._parameterMap}toString(){return sr(this)}}function Le(I,E){return I.length===E.length&&I.every((_,S)=>_.path===E[S].path)}class we{}class de{parse(E){const _=new Rr(E);return new he(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(E){const _=`/${rt(E.root,!0)}`,S=function wi(I){const E=Object.keys(I).map(_=>{const S=I[_];return Array.isArray(S)?S.map(F=>`${Jt(_)}=${Jt(F)}`).join("&"):`${Jt(_)}=${Jt(S)}`}).filter(_=>!!_);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${_}${S}${"string"==typeof E.fragment?`#${function Pn(I){return encodeURI(I)}(E.fragment)}`:""}`}}const se=new de;function be(I){return I.segments.map(E=>sr(E)).join("/")}function rt(I,E){if(!I.hasChildren())return be(I);if(E){const _=I.children[xt]?rt(I.children[xt],!1):"",S=[];return Yn(I.children,(F,j)=>{j!==xt&&S.push(`${j}:${rt(F,!1)}`)}),S.length>0?`${_}(${S.join("//")})`:_}{const _=function At(I,E){let _=[];return Yn(I.children,(S,F)=>{F===xt&&(_=_.concat(E(S,F)))}),Yn(I.children,(S,F)=>{F!==xt&&(_=_.concat(E(S,F)))}),_}(I,(S,F)=>F===xt?[rt(I.children[xt],!1)]:[`${F}:${rt(S,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[xt]?`${be(I)}/${_[0]}`:`${be(I)}/(${_.join("//")})`}}function Ct(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jt(I){return Ct(I).replace(/%3B/gi,";")}function rr(I){return Ct(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ti(I){return decodeURIComponent(I)}function ir(I){return ti(I.replace(/\+/g,"%20"))}function sr(I){return`${rr(I.path)}${function wr(I){return Object.keys(I).map(E=>`;${rr(E)}=${rr(I[E])}`).join("")}(I.parameters)}`}const Kr=/^[^\/()?;=#]+/;function yt(I){const E=I.match(Kr);return E?E[0]:""}const en=/^[^=?&#]+/,Dr=/^[^&#]+/;class Rr{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new te([],{}):new te([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let S={};return this.peekStartsWith("(")&&(S=this.parseParens(!1)),(E.length>0||Object.keys(_).length>0)&&(S[xt]=new te(E,_)),S}parseSegment(){const E=yt(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new Ee(ti(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const _=yt(this.remaining);if(!_)return;this.capture(_);let S="";if(this.consumeOptional("=")){const F=yt(this.remaining);F&&(S=F,this.capture(S))}E[ti(_)]=ti(S)}parseQueryParam(E){const _=function vn(I){const E=I.match(en);return E?E[0]:""}(this.remaining);if(!_)return;this.capture(_);let S="";if(this.consumeOptional("=")){const ne=function ni(I){const E=I.match(Dr);return E?E[0]:""}(this.remaining);ne&&(S=ne,this.capture(S))}const F=ir(_),j=ir(S);if(E.hasOwnProperty(F)){let ne=E[F];Array.isArray(ne)||(ne=[ne],E[F]=ne),ne.push(j)}else E[F]=j}parseParens(E){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const S=yt(this.remaining),F=this.remaining[S.length];if("/"!==F&&")"!==F&&";"!==F)throw new Error(`Cannot parse url '${this.url}'`);let j;S.indexOf(":")>-1?(j=S.substr(0,S.indexOf(":")),this.capture(j),this.capture(":")):E&&(j=xt);const ne=this.parseChildren();_[j]=1===Object.keys(ne).length?ne[xt]:new te([],ne),this.consumeOptional("//")}return _}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class ci{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const _=this.pathFromRoot(E);return _.length>1?_[_.length-2]:null}children(E){const _=Wn(E,this._root);return _?_.children.map(S=>S.value):[]}firstChild(E){const _=Wn(E,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(E){const _=mr(E,this._root);return _.length<2?[]:_[_.length-2].children.map(F=>F.value).filter(F=>F!==E)}pathFromRoot(E){return mr(E,this._root).map(_=>_.value)}}function Wn(I,E){if(I===E.value)return E;for(const _ of E.children){const S=Wn(I,_);if(S)return S}return null}function mr(I,E){if(I===E.value)return[E];for(const _ of E.children){const S=mr(I,_);if(S.length)return S.unshift(E),S}return[]}class Lr{constructor(E,_){this.value=E,this.children=_}toString(){return`TreeNode(${this.value})`}}function gn(I){const E={};return I&&I.children.forEach(_=>E[_.value.outlet]=_),E}class Gr extends ci{constructor(E,_){super(E),this.snapshot=_,zn(this,E)}toString(){return this.snapshot.toString()}}function Ri(I,E){const _=function ns(I,E){const ne=new qr([],{},{},"",{},xt,E,null,I.root,-1,{});return new Qn("",new Lr(ne,[]))}(I,E),S=new je.X([new Ee("",{})]),F=new je.X({}),j=new je.X({}),ne=new je.X({}),ye=new je.X(""),at=new Or(S,F,ne,ye,j,xt,E,_.root);return at.snapshot=_.root,new Gr(new Lr(at,[]),_)}class Or{constructor(E,_,S,F,j,ne,ye,at){this.url=E,this.params=_,this.queryParams=S,this.fragment=F,this.data=j,this.outlet=ne,this.component=ye,this._futureSnapshot=at}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ae.U)(E=>Mr(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ae.U)(E=>Mr(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cr(I,E="emptyOnly"){const _=I.pathFromRoot;let S=0;if("always"!==E)for(S=_.length-1;S>=1;){const F=_[S],j=_[S-1];if(F.routeConfig&&""===F.routeConfig.path)S--;else{if(j.component)break;S--}}return function ri(I){return I.reduce((E,_)=>({params:Object.assign(Object.assign({},E.params),_.params),data:Object.assign(Object.assign({},E.data),_.data),resolve:Object.assign(Object.assign({},E.resolve),_._resolvedData)}),{params:{},data:{},resolve:{}})}(_.slice(S))}class qr{constructor(E,_,S,F,j,ne,ye,at,st,Ot,hn){this.url=E,this.params=_,this.queryParams=S,this.fragment=F,this.data=j,this.outlet=ne,this.component=ye,this.routeConfig=at,this._urlSegment=st,this._lastPathIndex=Ot,this._resolve=hn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(S=>S.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qn extends ci{constructor(E,_){super(_),this.url=E,zn(this,_)}toString(){return ls(this._root)}}function zn(I,E){E.value._routerState=I,E.children.forEach(_=>zn(I,_))}function ls(I){const E=I.children.length>0?` { ${I.children.map(ls).join(", ")} } `:"";return`${I.value}${E}`}function ii(I){if(I.snapshot){const E=I.snapshot,_=I._futureSnapshot;I.snapshot=_,Nt(E.queryParams,_.queryParams)||I.queryParams.next(_.queryParams),E.fragment!==_.fragment&&I.fragment.next(_.fragment),Nt(E.params,_.params)||I.params.next(_.params),function xn(I,E){if(I.length!==E.length)return!1;for(let _=0;_<I.length;++_)if(!Nt(I[_],E[_]))return!1;return!0}(E.url,_.url)||I.url.next(_.url),Nt(E.data,_.data)||I.data.next(_.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function Wr(I,E){const _=Nt(I.params,E.params)&&function Ze(I,E){return Le(I,E)&&I.every((_,S)=>Nt(_.parameters,E[S].parameters))}(I.url,E.url);return _&&!(!I.parent!=!E.parent)&&(!I.parent||Wr(I.parent,E.parent))}function Wi(I,E,_){if(_&&I.shouldReuseRoute(E.value,_.value.snapshot)){const S=_.value;S._futureSnapshot=E.value;const F=function yr(I,E,_){return E.children.map(S=>{for(const F of _.children)if(I.shouldReuseRoute(S.value,F.value.snapshot))return Wi(I,S,F);return Wi(I,S)})}(I,E,_);return new Lr(S,F)}{if(I.shouldAttach(E.value)){const j=I.retrieve(E.value);if(null!==j){const ne=j.route;return ne.value._futureSnapshot=E.value,ne.children=E.children.map(ye=>Wi(I,ye)),ne}}const S=function Cs(I){return new Or(new je.X(I.url),new je.X(I.params),new je.X(I.queryParams),new je.X(I.fragment),new je.X(I.data),I.outlet,I.component,I)}(E.value),F=E.children.map(j=>Wi(I,j));return new Lr(S,F)}}function Oi(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function ys(I){return"object"==typeof I&&null!=I&&I.outlets}function _s(I,E,_,S,F){let j={};if(S&&Yn(S,(ye,at)=>{j[at]=Array.isArray(ye)?ye.map(st=>`${st}`):`${ye}`}),I===E)return new he(_,j,F);const ne=jn(I,E,_);return new he(ne,j,F)}function jn(I,E,_){const S={};return Yn(I.children,(F,j)=>{S[j]=F===E?_:jn(F,E,_)}),new te(I.segments,S)}class Os{constructor(E,_,S){if(this.isAbsolute=E,this.numberOfDoubleDots=_,this.commands=S,E&&S.length>0&&Oi(S[0]))throw new Error("Root segment cannot have matrix parameters");const F=S.find(ys);if(F&&F!==Fr(S))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Se{constructor(E,_,S){this.segmentGroup=E,this.processChildren=_,this.index=S}}function Dt(I,E,_){if(I||(I=new te([],{})),0===I.segments.length&&I.hasChildren())return qt(I,E,_);const S=function Fn(I,E,_){let S=0,F=E;const j={match:!1,pathIndex:0,commandIndex:0};for(;F<I.segments.length;){if(S>=_.length)return j;const ne=I.segments[F],ye=_[S];if(ys(ye))break;const at=`${ye}`,st=S<_.length-1?_[S+1]:null;if(F>0&&void 0===at)break;if(at&&st&&"object"==typeof st&&void 0===st.outlets){if(!Ii(at,st,ne))return j;S+=2}else{if(!Ii(at,{},ne))return j;S++}F++}return{match:!0,pathIndex:F,commandIndex:S}}(I,E,_),F=_.slice(S.commandIndex);if(S.match&&S.pathIndex<I.segments.length){const j=new te(I.segments.slice(0,S.pathIndex),{});return j.children[xt]=new te(I.segments.slice(S.pathIndex),I.children),qt(j,0,F)}return S.match&&0===F.length?new te(I.segments,{}):S.match&&!I.hasChildren()?Pr(I,E,_):S.match?qt(I,0,F):Pr(I,E,_)}function qt(I,E,_){if(0===_.length)return new te(I.segments,{});{const S=function ot(I){return ys(I[0])?I[0].outlets:{[xt]:I}}(_),F={};return Yn(S,(j,ne)=>{"string"==typeof j&&(j=[j]),null!==j&&(F[ne]=Dt(I.children[ne],E,j))}),Yn(I.children,(j,ne)=>{void 0===S[ne]&&(F[ne]=j)}),new te(I.segments,F)}}function Pr(I,E,_){const S=I.segments.slice(0,E);let F=0;for(;F<_.length;){const j=_[F];if(ys(j)){const at=$n(j.outlets);return new te(S,at)}if(0===F&&Oi(_[0])){S.push(new Ee(I.segments[E].path,Pi(_[0]))),F++;continue}const ne=ys(j)?j.outlets[xt]:`${j}`,ye=F<_.length-1?_[F+1]:null;ne&&ye&&Oi(ye)?(S.push(new Ee(ne,Pi(ye))),F+=2):(S.push(new Ee(ne,{})),F++)}return new te(S,{})}function $n(I){const E={};return Yn(I,(_,S)=>{"string"==typeof _&&(_=[_]),null!==_&&(E[S]=Pr(new te([],{}),0,_))}),E}function Pi(I){const E={};return Yn(I,(_,S)=>E[S]=`${_}`),E}function Ii(I,E,_){return I==_.path&&Nt(E,_.parameters)}class vs{constructor(E,_,S,F){this.routeReuseStrategy=E,this.futureState=_,this.currState=S,this.forwardEvent=F}activate(E){const _=this.futureState._root,S=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,S,E),ii(this.futureState.root),this.activateChildRoutes(_,S,E)}deactivateChildRoutes(E,_,S){const F=gn(_);E.children.forEach(j=>{const ne=j.value.outlet;this.deactivateRoutes(j,F[ne],S),delete F[ne]}),Yn(F,(j,ne)=>{this.deactivateRouteAndItsChildren(j,S)})}deactivateRoutes(E,_,S){const F=E.value,j=_?_.value:null;if(F===j)if(F.component){const ne=S.getContext(F.outlet);ne&&this.deactivateChildRoutes(E,_,ne.children)}else this.deactivateChildRoutes(E,_,S);else j&&this.deactivateRouteAndItsChildren(_,S)}deactivateRouteAndItsChildren(E,_){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,_):this.deactivateRouteAndOutlet(E,_)}detachAndStoreRouteSubtree(E,_){const S=_.getContext(E.value.outlet),F=S&&E.value.component?S.children:_,j=gn(E);for(const ne of Object.keys(j))this.deactivateRouteAndItsChildren(j[ne],F);if(S&&S.outlet){const ne=S.outlet.detach(),ye=S.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:ne,route:E,contexts:ye})}}deactivateRouteAndOutlet(E,_){const S=_.getContext(E.value.outlet),F=S&&E.value.component?S.children:_,j=gn(E);for(const ne of Object.keys(j))this.deactivateRouteAndItsChildren(j[ne],F);S&&S.outlet&&(S.outlet.deactivate(),S.children.onOutletDeactivated(),S.attachRef=null,S.resolver=null,S.route=null)}activateChildRoutes(E,_,S){const F=gn(_);E.children.forEach(j=>{this.activateRoutes(j,F[j.value.outlet],S),this.forwardEvent(new zt(j.value.snapshot))}),E.children.length&&this.forwardEvent(new Un(E.value.snapshot))}activateRoutes(E,_,S){const F=E.value,j=_?_.value:null;if(ii(F),F===j)if(F.component){const ne=S.getOrCreateContext(F.outlet);this.activateChildRoutes(E,_,ne.children)}else this.activateChildRoutes(E,_,S);else if(F.component){const ne=S.getOrCreateContext(F.outlet);if(this.routeReuseStrategy.shouldAttach(F.snapshot)){const ye=this.routeReuseStrategy.retrieve(F.snapshot);this.routeReuseStrategy.store(F.snapshot,null),ne.children.onOutletReAttached(ye.contexts),ne.attachRef=ye.componentRef,ne.route=ye.route.value,ne.outlet&&ne.outlet.attach(ye.componentRef,ye.route.value),ii(ye.route.value),this.activateChildRoutes(E,null,ne.children)}else{const ye=function zi(I){for(let E=I.parent;E;E=E.parent){const _=E.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig;if(_&&_.component)return null}return null}(F.snapshot),at=ye?ye.module.componentFactoryResolver:null;ne.attachRef=null,ne.route=F,ne.resolver=at,ne.outlet&&ne.outlet.activateWith(F,at),this.activateChildRoutes(E,null,ne.children)}}else this.activateChildRoutes(E,null,S)}}class bs{constructor(E,_){this.routes=E,this.module=_}}function gi(I){return"function"==typeof I}function br(I){return I instanceof he}const no=Symbol("INITIAL_VALUE");function Ni(){return(0,Xe.w)(I=>(0,qe.a)(I.map(E=>E.pipe((0,Ue.q)(1),(0,Kt.O)(no)))).pipe((0,bt.R)((E,_)=>{let S=!1;return _.reduce((F,j,ne)=>F!==no?F:(j===no&&(S=!0),S||!1!==j&&ne!==_.length-1&&!br(j)?F:j),E)},no),(0,me.h)(E=>E!==no),(0,ae.U)(E=>br(E)?E:!0===E),(0,Ue.q)(1)))}class is{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Zr,this.attachRef=null}}class Zr{constructor(){this.contexts=new Map}onChildOutletCreated(E,_){const S=this.getOrCreateContext(E);S.outlet=_,this.contexts.set(E,S)}onChildOutletDestroyed(E){const _=this.getContext(E);_&&(_.outlet=null,_.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let _=this.getContext(E);return _||(_=new is,this.contexts.set(E,_)),_}getContext(E){return this.contexts.get(E)||null}}let Zi=(()=>{class I{constructor(_,S,F,j,ne){this.parentContexts=_,this.location=S,this.resolver=F,this.changeDetector=ne,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=j||xt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,S){this.activated=_,this._activatedRoute=S,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,S){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=_;const ne=(S=S||this.resolver).resolveComponentFactory(_._futureSnapshot.routeConfig.component),ye=this.parentContexts.getOrCreateContext(this.name).children,at=new Ts(_,ye,this.location.injector);this.activated=this.location.createComponent(ne,this.location.length,at),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Zr),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},I.\u0275dir=p.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),I})();class Ts{constructor(E,_,S){this.route=E,this.childContexts=_,this.parent=S}get(E,_){return E===Or?this.route:E===Zr?this.childContexts:this.parent.get(E,_)}}let Tr=(()=>{class I{}return I.\u0275fac=function(_){return new(_||I)},I.\u0275cmp=p.Xpm({type:I,selectors:[["ng-component"]],decls:1,vars:0,template:function(_,S){1&_&&p._UZ(0,"router-outlet")},directives:[Zi],encapsulation:2}),I})();function Vr(I,E=""){for(let _=0;_<I.length;_++){const S=I[_];cs(S,As(E,S))}}function cs(I,E){I.children&&Vr(I.children,E)}function As(I,E){return E?I||E.path?I&&!E.path?`${I}/`:!I&&E.path?E.path:`${I}/${E.path}`:"":I}function Ss(I){const E=I.children&&I.children.map(Ss),_=E?Object.assign(Object.assign({},I),{children:E}):Object.assign({},I);return!_.component&&(E||_.loadChildren)&&_.outlet&&_.outlet!==xt&&(_.component=Tr),_}function Yr(I){return I.outlet||xt}function ss(I,E){const _=I.filter(S=>Yr(S)===E);return _.push(...I.filter(S=>Yr(S)!==E)),_}const di={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mi(I,E,_){var S;if(""===E.path)return"full"===E.pathMatch&&(I.hasChildren()||_.length>0)?Object.assign({},di):{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const j=(E.matcher||ei)(_,I,E);if(!j)return Object.assign({},di);const ne={};Yn(j.posParams,(at,st)=>{ne[st]=at.path});const ye=j.consumed.length>0?Object.assign(Object.assign({},ne),j.consumed[j.consumed.length-1].parameters):ne;return{matched:!0,consumedSegments:j.consumed,remainingSegments:_.slice(j.consumed.length),parameters:ye,positionalParamSegments:null!==(S=j.posParams)&&void 0!==S?S:{}}}function Ms(I,E,_,S,F="corrected"){if(_.length>0&&function G(I,E,_){return _.some(S=>Z(I,E,S)&&Yr(S)!==xt)}(I,_,S)){const ne=new te(E,function R(I,E,_,S){const F={};F[xt]=S,S._sourceSegment=I,S._segmentIndexShift=E.length;for(const j of _)if(""===j.path&&Yr(j)!==xt){const ne=new te([],{});ne._sourceSegment=I,ne._segmentIndexShift=E.length,F[Yr(j)]=ne}return F}(I,E,S,new te(_,I.children)));return ne._sourceSegment=I,ne._segmentIndexShift=E.length,{segmentGroup:ne,slicedSegments:[]}}if(0===_.length&&function x(I,E,_){return _.some(S=>Z(I,E,S))}(I,_,S)){const ne=new te(I.segments,function cr(I,E,_,S,F,j){const ne={};for(const ye of S)if(Z(I,_,ye)&&!F[Yr(ye)]){const at=new te([],{});at._sourceSegment=I,at._segmentIndexShift="legacy"===j?I.segments.length:E.length,ne[Yr(ye)]=at}return Object.assign(Object.assign({},F),ne)}(I,E,_,S,I.children,F));return ne._sourceSegment=I,ne._segmentIndexShift=E.length,{segmentGroup:ne,slicedSegments:_}}const j=new te(I.segments,I.children);return j._sourceSegment=I,j._segmentIndexShift=E.length,{segmentGroup:j,slicedSegments:_}}function Z(I,E,_){return(!(I.hasChildren()||E.length>0)||"full"!==_.pathMatch)&&""===_.path}function fe(I,E,_,S){return!!(Yr(I)===S||S!==xt&&Z(E,_,I))&&("**"===I.path||mi(E,I,_).matched)}function Je(I,E,_){return 0===E.length&&!I.children[_]}class tt{constructor(E){this.segmentGroup=E||null}}class Rt{constructor(E){this.urlTree=E}}function Xn(I){return ve(new tt(I))}function Hn(I){return ve(new Rt(I))}class _r{constructor(E,_,S,F,j){this.configLoader=_,this.urlSerializer=S,this.urlTree=F,this.config=j,this.allowRedirects=!0,this.ngModule=E.get(p.h0i)}apply(){const E=Ms(this.urlTree.root,[],[],this.config).segmentGroup,_=new te(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,_,xt).pipe((0,ae.U)(j=>this.createUrlTree(k(j),this.urlTree.queryParams,this.urlTree.fragment))).pipe($(j=>{if(j instanceof Rt)return this.allowRedirects=!1,this.match(j.urlTree);throw j instanceof tt?this.noMatchError(j):j}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,xt).pipe((0,ae.U)(F=>this.createUrlTree(k(F),E.queryParams,E.fragment))).pipe($(F=>{throw F instanceof tt?this.noMatchError(F):F}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,_,S){const F=E.segments.length>0?new te([],{[xt]:E}):E;return new he(F,_,S)}expandSegmentGroup(E,_,S,F){return 0===S.segments.length&&S.hasChildren()?this.expandChildren(E,_,S).pipe((0,ae.U)(j=>new te([],j))):this.expandSegment(E,S,_,S.segments,F,!0)}expandChildren(E,_,S){const F=[];for(const j of Object.keys(S.children))"primary"===j?F.unshift(j):F.push(j);return(0,ge.D)(F).pipe(ee(j=>{const ne=S.children[j],ye=ss(_,j);return this.expandSegmentGroup(E,ye,ne,j).pipe((0,ae.U)(at=>({segment:at,outlet:j})))}),(0,bt.R)((j,ne)=>(j[ne.outlet]=ne.segment,j),{}),function Q(I,E){const _=arguments.length>=2;return S=>S.pipe(I?(0,me.h)((F,j)=>I(F,j,S)):_e.y,Ge(1),_?(0,Fe.d)(E):(0,We.T)(()=>new ht.K))}())}expandSegment(E,_,S,F,j,ne){return(0,ge.D)(S).pipe(ee(ye=>this.expandSegmentAgainstRoute(E,_,S,ye,F,j,ne).pipe($(st=>{if(st instanceof tt)return(0,Be.of)(null);throw st}))),(0,Gt.P)(ye=>!!ye),$((ye,at)=>{if(ye instanceof ht.K||"EmptyError"===ye.name)return Je(_,F,j)?(0,Be.of)(new te([],{})):Xn(_);throw ye}))}expandSegmentAgainstRoute(E,_,S,F,j,ne,ye){return fe(F,_,j,ne)?void 0===F.redirectTo?this.matchSegmentAgainstRoute(E,_,F,j,ne):ye&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,_,S,F,j,ne):Xn(_):Xn(_)}expandSegmentAgainstRouteUsingRedirect(E,_,S,F,j,ne){return"**"===F.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,S,F,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(E,_,S,F,j,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,_,S,F){const j=this.applyRedirectCommands([],S.redirectTo,{});return S.redirectTo.startsWith("/")?Hn(j):this.lineralizeSegments(S,j).pipe((0,L.z)(ne=>{const ye=new te(ne,{});return this.expandSegment(E,ye,_,ne,F,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,_,S,F,j,ne){const{matched:ye,consumedSegments:at,remainingSegments:st,positionalParamSegments:Ot}=mi(_,F,j);if(!ye)return Xn(_);const hn=this.applyRedirectCommands(at,F.redirectTo,Ot);return F.redirectTo.startsWith("/")?Hn(hn):this.lineralizeSegments(F,hn).pipe((0,L.z)(_t=>this.expandSegment(E,_,S,_t.concat(st),ne,!1)))}matchSegmentAgainstRoute(E,_,S,F,j){if("**"===S.path)return S.loadChildren?(S._loadedConfig?(0,Be.of)(S._loadedConfig):this.configLoader.load(E.injector,S)).pipe((0,ae.U)(hn=>(S._loadedConfig=hn,new te(F,{})))):(0,Be.of)(new te(F,{}));const{matched:ne,consumedSegments:ye,remainingSegments:at}=mi(_,S,F);return ne?this.getChildConfig(E,S,F).pipe((0,L.z)(Ot=>{const hn=Ot.module,_t=Ot.routes,{segmentGroup:$e,slicedSegments:gt}=Ms(_,ye,at,_t),$r=new te($e.segments,$e.children);if(0===gt.length&&$r.hasChildren())return this.expandChildren(hn,_t,$r).pipe((0,ae.U)(Iu=>new te(ye,Iu)));if(0===_t.length&&0===gt.length)return(0,Be.of)(new te(ye,{}));const ws=Yr(S)===j;return this.expandSegment(hn,$r,_t,gt,ws?xt:j,!0).pipe((0,ae.U)(_o=>new te(ye.concat(_o.segments),_o.children)))})):Xn(_)}getChildConfig(E,_,S){return _.children?(0,Be.of)(new bs(_.children,E)):_.loadChildren?void 0!==_._loadedConfig?(0,Be.of)(_._loadedConfig):this.runCanLoadGuards(E.injector,_,S).pipe((0,L.z)(F=>F?this.configLoader.load(E.injector,_).pipe((0,ae.U)(j=>(_._loadedConfig=j,j))):function Sn(I){return ve(xr(`Cannot load children because the guard of the route "path: '${I.path}'" returned false`))}(_))):(0,Be.of)(new bs([],E))}runCanLoadGuards(E,_,S){const F=_.canLoad;if(!F||0===F.length)return(0,Be.of)(!0);const j=F.map(ne=>{const ye=E.get(ne);let at;if(function rs(I){return I&&gi(I.canLoad)}(ye))at=ye.canLoad(_,S);else{if(!gi(ye))throw new Error("Invalid CanLoad guard");at=ye(_,S)}return Bn(at)});return(0,Be.of)(j).pipe(Ni(),(0,mt.b)(ne=>{if(!br(ne))return;const ye=xr(`Redirecting to "${this.urlSerializer.serialize(ne)}"`);throw ye.url=ne,ye}),(0,ae.U)(ne=>!0===ne))}lineralizeSegments(E,_){let S=[],F=_.root;for(;;){if(S=S.concat(F.segments),0===F.numberOfChildren)return(0,Be.of)(S);if(F.numberOfChildren>1||!F.children[xt])return ve(new Error(`Only absolute redirects can have named outlets. redirectTo: '${E.redirectTo}'`));F=F.children[xt]}}applyRedirectCommands(E,_,S){return this.applyRedirectCreatreUrlTree(_,this.urlSerializer.parse(_),E,S)}applyRedirectCreatreUrlTree(E,_,S,F){const j=this.createSegmentGroup(E,_.root,S,F);return new he(j,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(E,_){const S={};return Yn(E,(F,j)=>{if("string"==typeof F&&F.startsWith(":")){const ye=F.substring(1);S[j]=_[ye]}else S[j]=F}),S}createSegmentGroup(E,_,S,F){const j=this.createSegments(E,_.segments,S,F);let ne={};return Yn(_.children,(ye,at)=>{ne[at]=this.createSegmentGroup(E,ye,S,F)}),new te(j,ne)}createSegments(E,_,S,F){return _.map(j=>j.path.startsWith(":")?this.findPosParam(E,j,F):this.findOrReturn(j,S))}findPosParam(E,_,S){const F=S[_.path.substring(1)];if(!F)throw new Error(`Cannot redirect to '${E}'. Cannot find '${_.path}'.`);return F}findOrReturn(E,_){let S=0;for(const F of _){if(F.path===E.path)return _.splice(S),F;S++}return E}}function k(I){const E={};for(const S of Object.keys(I.children)){const j=k(I.children[S]);(j.segments.length>0||j.hasChildren())&&(E[S]=j)}return function vr(I){if(1===I.numberOfChildren&&I.children[xt]){const E=I.children[xt];return new te(I.segments.concat(E.segments),E.children)}return I}(new te(I.segments,E))}class C{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class q{constructor(E,_){this.component=E,this.route=_}}function nt(I,E,_){const S=I._root;return Ci(S,E?E._root:null,_,[S.value])}function dr(I,E,_){const S=function os(I){if(!I)return null;for(let E=I.parent;E;E=E.parent){const _=E.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig}return null}(E);return(S?S.module.injector:_).get(I)}function Ci(I,E,_,S,F={canDeactivateChecks:[],canActivateChecks:[]}){const j=gn(E);return I.children.forEach(ne=>{(function ro(I,E,_,S,F={canDeactivateChecks:[],canActivateChecks:[]}){const j=I.value,ne=E?E.value:null,ye=_?_.getContext(I.value.outlet):null;if(ne&&j.routeConfig===ne.routeConfig){const at=function M(I,E,_){if("function"==typeof _)return _(I,E);switch(_){case"pathParamsChange":return!Le(I.url,E.url);case"pathParamsOrQueryParamsChange":return!Le(I.url,E.url)||!Nt(I.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wr(I,E)||!Nt(I.queryParams,E.queryParams);default:return!Wr(I,E)}}(ne,j,j.routeConfig.runGuardsAndResolvers);at?F.canActivateChecks.push(new C(S)):(j.data=ne.data,j._resolvedData=ne._resolvedData),Ci(I,E,j.component?ye?ye.children:null:_,S,F),at&&ye&&ye.outlet&&ye.outlet.isActivated&&F.canDeactivateChecks.push(new q(ye.outlet.component,ne))}else ne&&O(E,ye,F),F.canActivateChecks.push(new C(S)),Ci(I,null,j.component?ye?ye.children:null:_,S,F)})(ne,j[ne.value.outlet],_,S.concat([ne.value]),F),delete j[ne.value.outlet]}),Yn(j,(ne,ye)=>O(ne,_.getContext(ye),F)),F}function O(I,E,_){const S=gn(I),F=I.value;Yn(S,(j,ne)=>{O(j,F.component?E?E.children.getContext(ne):null:E,_)}),_.canDeactivateChecks.push(new q(F.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,F))}class Kn{}function kr(I){return new H.y(E=>E.error(I))}class Zn{constructor(E,_,S,F,j,ne){this.rootComponentType=E,this.config=_,this.urlTree=S,this.url=F,this.paramsInheritanceStrategy=j,this.relativeLinkResolution=ne}recognize(){const E=Ms(this.urlTree.root,[],[],this.config.filter(ne=>void 0===ne.redirectTo),this.relativeLinkResolution).segmentGroup,_=this.processSegmentGroup(this.config,E,xt);if(null===_)return null;const S=new qr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),F=new Lr(S,_),j=new Qn(this.url,F);return this.inheritParamsAndData(j._root),j}inheritParamsAndData(E){const _=E.value,S=Cr(_,this.paramsInheritanceStrategy);_.params=Object.freeze(S.params),_.data=Object.freeze(S.data),E.children.forEach(F=>this.inheritParamsAndData(F))}processSegmentGroup(E,_,S){return 0===_.segments.length&&_.hasChildren()?this.processChildren(E,_):this.processSegment(E,_,_.segments,S)}processChildren(E,_){const S=[];for(const j of Object.keys(_.children)){const ne=_.children[j],ye=ss(E,j),at=this.processSegmentGroup(ye,ne,j);if(null===at)return null;S.push(...at)}const F=Qr(S);return function tr(I){I.sort((E,_)=>E.value.outlet===xt?-1:_.value.outlet===xt?1:E.value.outlet.localeCompare(_.value.outlet))}(F),F}processSegment(E,_,S,F){for(const j of E){const ne=this.processSegmentAgainstRoute(j,_,S,F);if(null!==ne)return ne}return Je(_,S,F)?[]:null}processSegmentAgainstRoute(E,_,S,F){if(E.redirectTo||!fe(E,_,S,F))return null;let j,ne=[],ye=[];if("**"===E.path){const $e=S.length>0?Fr(S).parameters:{};j=new qr(S,$e,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ir(E),Yr(E),E.component,E,Br(_),Xr(_)+S.length,ds(E))}else{const $e=mi(_,E,S);if(!$e.matched)return null;ne=$e.consumedSegments,ye=$e.remainingSegments,j=new qr(ne,$e.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ir(E),Yr(E),E.component,E,Br(_),Xr(_)+ne.length,ds(E))}const at=function yi(I){return I.children?I.children:I.loadChildren?I._loadedConfig.routes:[]}(E),{segmentGroup:st,slicedSegments:Ot}=Ms(_,ne,ye,at.filter($e=>void 0===$e.redirectTo),this.relativeLinkResolution);if(0===Ot.length&&st.hasChildren()){const $e=this.processChildren(at,st);return null===$e?null:[new Lr(j,$e)]}if(0===at.length&&0===Ot.length)return[new Lr(j,[])];const hn=Yr(E)===F,_t=this.processSegment(at,st,Ot,hn?xt:F);return null===_t?null:[new Lr(j,_t)]}}function Er(I){const E=I.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function Qr(I){const E=[],_=new Set;for(const S of I){if(!Er(S)){E.push(S);continue}const F=E.find(j=>S.value.routeConfig===j.value.routeConfig);void 0!==F?(F.children.push(...S.children),_.add(F)):E.push(S)}for(const S of _){const F=Qr(S.children);E.push(new Lr(S.value,F))}return E.filter(S=>!_.has(S))}function Br(I){let E=I;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Xr(I){let E=I,_=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,_+=E._segmentIndexShift?E._segmentIndexShift:0;return _-1}function Ir(I){return I.data||{}}function ds(I){return I.resolve||{}}function Ho(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function ta(I){return(0,Xe.w)(E=>{const _=I(E);return _?(0,ge.D)(_).pipe((0,ae.U)(()=>E)):(0,Be.of)(E)})}class Ns extends class Ia{shouldDetach(E){return!1}store(E,_){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,_){return E.routeConfig===_.routeConfig}}{}const so=new p.OlP("ROUTES");class mu{constructor(E,_,S,F){this.injector=E,this.compiler=_,this.onLoadStartListener=S,this.onLoadEndListener=F}load(E,_){if(_._loader$)return _._loader$;this.onLoadStartListener&&this.onLoadStartListener(_);const F=this.loadModuleFactory(_.loadChildren).pipe((0,ae.U)(j=>{this.onLoadEndListener&&this.onLoadEndListener(_);const ne=j.create(E);return new bs(pr(ne.injector.get(so,void 0,p.XFs.Self|p.XFs.Optional)).map(Ss),ne)}),$(j=>{throw _._loader$=void 0,j}));return _._loader$=new ie(F,()=>new Et.x).pipe(le()),_._loader$}loadModuleFactory(E){return Bn(E()).pipe((0,L.z)(_=>_ instanceof p.YKP?(0,Be.of)(_):(0,ge.D)(this.compiler.compileModuleAsync(_))))}}class bi{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,_){return E}}function xo(I){throw I}function si(I,E,_){return E.parse("/")}function Ro(I,E){return(0,Be.of)(null)}const Jl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ti=(()=>{class I{constructor(_,S,F,j,ne,ye,at){this.rootComponentType=_,this.urlSerializer=S,this.rootContexts=F,this.location=j,this.config=at,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Et.x,this.errorHandler=xo,this.malformedUriErrorHandler=si,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ro,afterPreactivation:Ro},this.urlHandlingStrategy=new bi,this.routeReuseStrategy=new Ns,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ne.get(p.h0i),this.console=ne.get(p.c2e);const hn=ne.get(p.R0b);this.isNgZoneEnabled=hn instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(at),this.currentUrlTree=function gr(){return new he(new te([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mu(ne,ye,_t=>this.triggerEvent(new Lt(_t)),_t=>this.triggerEvent(new En(_t))),this.routerState=Ri(this.currentUrlTree,this.rootComponentType),this.transitions=new je.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var _;return null===(_=this.location.getState())||void 0===_?void 0:_.\u0275routerPageId}setupNavigations(_){const S=this.events;return _.pipe((0,me.h)(F=>0!==F.id),(0,ae.U)(F=>Object.assign(Object.assign({},F),{extractedUrl:this.urlHandlingStrategy.extract(F.rawUrl)})),(0,Xe.w)(F=>{let j=!1,ne=!1;return(0,Be.of)(F).pipe((0,mt.b)(ye=>{this.currentNavigation={id:ye.id,initialUrl:ye.currentRawUrl,extractedUrl:ye.extractedUrl,trigger:ye.source,extras:ye.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Xe.w)(ye=>{const at=this.browserUrlTree.toString(),st=!this.navigated||ye.extractedUrl.toString()!==at||at!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||st)&&this.urlHandlingStrategy.shouldProcessUrl(ye.rawUrl))return ra(ye.source)&&(this.browserUrlTree=ye.extractedUrl),(0,Be.of)(ye).pipe((0,Xe.w)(hn=>{const _t=this.transitions.getValue();return S.next(new Ft(hn.id,this.serializeUrl(hn.extractedUrl),hn.source,hn.restoredState)),_t!==this.transitions.getValue()?Re.E:Promise.resolve(hn)}),function A(I,E,_,S){return(0,Xe.w)(F=>function Ur(I,E,_,S,F){return new _r(I,E,_,S,F).apply()}(I,E,_,F.extractedUrl,S).pipe((0,ae.U)(j=>Object.assign(Object.assign({},F),{urlAfterRedirects:j}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mt.b)(hn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:hn.urlAfterRedirects})}),function io(I,E,_,S,F){return(0,L.z)(j=>function hr(I,E,_,S,F="emptyOnly",j="legacy"){try{const ne=new Zn(I,E,_,S,F,j).recognize();return null===ne?kr(new Kn):(0,Be.of)(ne)}catch(ne){return kr(ne)}}(I,E,j.urlAfterRedirects,_(j.urlAfterRedirects),S,F).pipe((0,ae.U)(ne=>Object.assign(Object.assign({},j),{targetSnapshot:ne}))))}(this.rootComponentType,this.config,hn=>this.serializeUrl(hn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mt.b)(hn=>{if("eager"===this.urlUpdateStrategy){if(!hn.extras.skipLocationChange){const $e=this.urlHandlingStrategy.merge(hn.urlAfterRedirects,hn.rawUrl);this.setBrowserUrl($e,hn)}this.browserUrlTree=hn.urlAfterRedirects}const _t=new yn(hn.id,this.serializeUrl(hn.extractedUrl),this.serializeUrl(hn.urlAfterRedirects),hn.targetSnapshot);S.next(_t)}));if(st&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_t,extractedUrl:$e,source:gt,restoredState:$r,extras:ws}=ye,wu=new Ft(_t,this.serializeUrl($e),gt,$r);S.next(wu);const _o=Ri($e,this.rootComponentType).snapshot;return(0,Be.of)(Object.assign(Object.assign({},ye),{targetSnapshot:_o,urlAfterRedirects:$e,extras:Object.assign(Object.assign({},ws),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ye.rawUrl,ye.resolve(null),Re.E}),ta(ye=>{const{targetSnapshot:at,id:st,extractedUrl:Ot,rawUrl:hn,extras:{skipLocationChange:_t,replaceUrl:$e}}=ye;return this.hooks.beforePreactivation(at,{navigationId:st,appliedUrlTree:Ot,rawUrlTree:hn,skipLocationChange:!!_t,replaceUrl:!!$e})}),(0,mt.b)(ye=>{const at=new qn(ye.id,this.serializeUrl(ye.extractedUrl),this.serializeUrl(ye.urlAfterRedirects),ye.targetSnapshot);this.triggerEvent(at)}),(0,ae.U)(ye=>Object.assign(Object.assign({},ye),{guards:nt(ye.targetSnapshot,ye.currentSnapshot,this.rootContexts)})),function J(I,E){return(0,L.z)(_=>{const{targetSnapshot:S,currentSnapshot:F,guards:{canActivateChecks:j,canDeactivateChecks:ne}}=_;return 0===ne.length&&0===j.length?(0,Be.of)(Object.assign(Object.assign({},_),{guardsResult:!0})):function oe(I,E,_,S){return(0,ge.D)(I).pipe((0,L.z)(F=>function Dn(I,E,_,S,F){const j=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!j||0===j.length)return(0,Be.of)(!0);const ne=j.map(ye=>{const at=dr(ye,E,F);let st;if(function ks(I){return I&&gi(I.canDeactivate)}(at))st=Bn(at.canDeactivate(I,E,_,S));else{if(!gi(at))throw new Error("Invalid CanDeactivate guard");st=Bn(at(I,E,_,S))}return st.pipe((0,Gt.P)())});return(0,Be.of)(ne).pipe(Ni())}(F.component,F.route,_,E,S)),(0,Gt.P)(F=>!0!==F,!0))}(ne,S,F,I).pipe((0,L.z)(ye=>ye&&function Di(I){return"boolean"==typeof I}(ye)?function xe(I,E,_,S){return(0,ge.D)(E).pipe(ee(F=>(0,Ne.z)(function pt(I,E){return null!==I&&E&&E(new ur(I)),(0,Be.of)(!0)}(F.route.parent,S),function Ye(I,E){return null!==I&&E&&E(new Wt(I)),(0,Be.of)(!0)}(F.route,S),function Ht(I,E,_){const S=E[E.length-1],j=E.slice(0,E.length-1).reverse().map(ne=>function on(I){const E=I.routeConfig?I.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:I,guards:E}:null}(ne)).filter(ne=>null!==ne).map(ne=>Ce(()=>{const ye=ne.guards.map(at=>{const st=dr(at,ne.node,_);let Ot;if(function qi(I){return I&&gi(I.canActivateChild)}(st))Ot=Bn(st.canActivateChild(S,I));else{if(!gi(st))throw new Error("Invalid CanActivateChild guard");Ot=Bn(st(S,I))}return Ot.pipe((0,Gt.P)())});return(0,Be.of)(ye).pipe(Ni())}));return(0,Be.of)(j).pipe(Ni())}(I,F.path,_),function sn(I,E,_){const S=E.routeConfig?E.routeConfig.canActivate:null;if(!S||0===S.length)return(0,Be.of)(!0);const F=S.map(j=>Ce(()=>{const ne=dr(j,E,_);let ye;if(function Ki(I){return I&&gi(I.canActivate)}(ne))ye=Bn(ne.canActivate(E,I));else{if(!gi(ne))throw new Error("Invalid CanActivate guard");ye=Bn(ne(E,I))}return ye.pipe((0,Gt.P)())}));return(0,Be.of)(F).pipe(Ni())}(I,F.route,_))),(0,Gt.P)(F=>!0!==F,!0))}(S,j,I,E):(0,Be.of)(ye)),(0,ae.U)(ye=>Object.assign(Object.assign({},_),{guardsResult:ye})))})}(this.ngModule.injector,ye=>this.triggerEvent(ye)),(0,mt.b)(ye=>{if(br(ye.guardsResult)){const st=xr(`Redirecting to "${this.serializeUrl(ye.guardsResult)}"`);throw st.url=ye.guardsResult,st}const at=new Vn(ye.id,this.serializeUrl(ye.extractedUrl),this.serializeUrl(ye.urlAfterRedirects),ye.targetSnapshot,!!ye.guardsResult);this.triggerEvent(at)}),(0,me.h)(ye=>!!ye.guardsResult||(this.restoreHistory(ye),this.cancelNavigationTransition(ye,""),!1)),ta(ye=>{if(ye.guards.canActivateChecks.length)return(0,Be.of)(ye).pipe((0,mt.b)(at=>{const st=new ft(at.id,this.serializeUrl(at.extractedUrl),this.serializeUrl(at.urlAfterRedirects),at.targetSnapshot);this.triggerEvent(st)}),(0,Xe.w)(at=>{let st=!1;return(0,Be.of)(at).pipe(function js(I,E){return(0,L.z)(_=>{const{targetSnapshot:S,guards:{canActivateChecks:F}}=_;if(!F.length)return(0,Be.of)(_);let j=0;return(0,ge.D)(F).pipe(ee(ne=>function Mo(I,E,_,S){return function $a(I,E,_,S){const F=Ho(I);if(0===F.length)return(0,Be.of)({});const j={};return(0,ge.D)(F).pipe((0,L.z)(ne=>function go(I,E,_,S){const F=dr(I,E,S);return Bn(F.resolve?F.resolve(E,_):F(E,_))}(I[ne],E,_,S).pipe((0,mt.b)(ye=>{j[ne]=ye}))),Ge(1),(0,L.z)(()=>Ho(j).length===F.length?(0,Be.of)(j):Re.E))}(I._resolve,I,E,S).pipe((0,ae.U)(j=>(I._resolvedData=j,I.data=Object.assign(Object.assign({},I.data),Cr(I,_).resolve),null)))}(ne.route,S,I,E)),(0,mt.b)(()=>j++),Ge(1),(0,L.z)(ne=>j===F.length?(0,Be.of)(_):Re.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mt.b)({next:()=>st=!0,complete:()=>{st||(this.restoreHistory(at),this.cancelNavigationTransition(at,"At least one route resolver didn't emit any value."))}}))}),(0,mt.b)(at=>{const st=new nn(at.id,this.serializeUrl(at.extractedUrl),this.serializeUrl(at.urlAfterRedirects),at.targetSnapshot);this.triggerEvent(st)}))}),ta(ye=>{const{targetSnapshot:at,id:st,extractedUrl:Ot,rawUrl:hn,extras:{skipLocationChange:_t,replaceUrl:$e}}=ye;return this.hooks.afterPreactivation(at,{navigationId:st,appliedUrlTree:Ot,rawUrlTree:hn,skipLocationChange:!!_t,replaceUrl:!!$e})}),(0,ae.U)(ye=>{const at=function fi(I,E,_){const S=Wi(I,E._root,_?_._root:void 0);return new Gr(S,E)}(this.routeReuseStrategy,ye.targetSnapshot,ye.currentRouterState);return Object.assign(Object.assign({},ye),{targetRouterState:at})}),(0,mt.b)(ye=>{this.currentUrlTree=ye.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ye.urlAfterRedirects,ye.rawUrl),this.routerState=ye.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ye.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ye),this.browserUrlTree=ye.urlAfterRedirects)}),((I,E,_)=>(0,ae.U)(S=>(new vs(E,S.targetRouterState,S.currentRouterState,_).activate(I),S)))(this.rootContexts,this.routeReuseStrategy,ye=>this.triggerEvent(ye)),(0,mt.b)({next(){j=!0},complete(){j=!0}}),function Me(I){return(0,Ae.e)((E,_)=>{try{E.subscribe(_)}finally{_.add(I)}})}(()=>{var ye;j||ne||this.cancelNavigationTransition(F,`Navigation ID ${F.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ye=this.currentNavigation)||void 0===ye?void 0:ye.id)===F.id&&(this.currentNavigation=null)}),$(ye=>{if(ne=!0,function hi(I){return I&&I[nr]}(ye)){const at=br(ye.url);at||(this.navigated=!0,this.restoreHistory(F,!0));const st=new pn(F.id,this.serializeUrl(F.extractedUrl),ye.message);S.next(st),at?setTimeout(()=>{const Ot=this.urlHandlingStrategy.merge(ye.url,this.rawUrlTree),hn={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ra(F.source)};this.scheduleNavigation(Ot,"imperative",null,hn,{resolve:F.resolve,reject:F.reject,promise:F.promise})},0):F.resolve(!1)}else{this.restoreHistory(F,!0);const at=new tn(F.id,this.serializeUrl(F.extractedUrl),ye);S.next(at);try{F.resolve(this.errorHandler(ye))}catch(st){F.reject(st)}}return Re.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),_))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const S="popstate"===_.type?"popstate":"hashchange";"popstate"===S&&setTimeout(()=>{var F;const j={replaceUrl:!0},ne=(null===(F=_.state)||void 0===F?void 0:F.navigationId)?_.state:null;if(ne){const at=Object.assign({},ne);delete at.navigationId,delete at.\u0275routerPageId,0!==Object.keys(at).length&&(j.state=at)}const ye=this.parseUrl(_.url);this.scheduleNavigation(ye,S,ne,j)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){Vr(_),this.config=_.map(Ss),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,S={}){const{relativeTo:F,queryParams:j,fragment:ne,queryParamsHandling:ye,preserveFragment:at}=S,st=F||this.routerState.root,Ot=at?this.currentUrlTree.fragment:ne;let hn=null;switch(ye){case"merge":hn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),j);break;case"preserve":hn=this.currentUrlTree.queryParams;break;default:hn=j||null}return null!==hn&&(hn=this.removeEmptyProps(hn)),function pi(I,E,_,S,F){if(0===_.length)return _s(E.root,E.root,E.root,S,F);const j=function Ps(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Os(!0,0,I);let E=0,_=!1;const S=I.reduce((F,j,ne)=>{if("object"==typeof j&&null!=j){if(j.outlets){const ye={};return Yn(j.outlets,(at,st)=>{ye[st]="string"==typeof at?at.split("/"):at}),[...F,{outlets:ye}]}if(j.segmentPath)return[...F,j.segmentPath]}return"string"!=typeof j?[...F,j]:0===ne?(j.split("/").forEach((ye,at)=>{0==at&&"."===ye||(0==at&&""===ye?_=!0:".."===ye?E++:""!=ye&&F.push(ye))}),F):[...F,j]},[]);return new Os(_,E,S)}(_);if(j.toRoot())return _s(E.root,E.root,new te([],{}),S,F);const ne=function Te(I,E,_){if(I.isAbsolute)return new Se(E.root,!0,0);if(-1===_.snapshot._lastPathIndex){const j=_.snapshot._urlSegment;return new Se(j,j===E.root,0)}const S=Oi(I.commands[0])?0:1;return function Ke(I,E,_){let S=I,F=E,j=_;for(;j>F;){if(j-=F,S=S.parent,!S)throw new Error("Invalid number of '../'");F=S.segments.length}return new Se(S,!1,F-j)}(_.snapshot._urlSegment,_.snapshot._lastPathIndex+S,I.numberOfDoubleDots)}(j,E,I),ye=ne.processChildren?qt(ne.segmentGroup,ne.index,j.commands):Dt(ne.segmentGroup,ne.index,j.commands);return _s(E.root,ne.segmentGroup,ye,S,F)}(st,this.currentUrlTree,_,hn,null!=Ot?Ot:null)}navigateByUrl(_,S={skipLocationChange:!1}){const F=br(_)?_:this.parseUrl(_),j=this.urlHandlingStrategy.merge(F,this.rawUrlTree);return this.scheduleNavigation(j,"imperative",null,S)}navigate(_,S={skipLocationChange:!1}){return function ec(I){for(let E=0;E<I.length;E++){const _=I[E];if(null==_)throw new Error(`The requested path contains ${_} segment at index ${E}`)}}(_),this.navigateByUrl(this.createUrlTree(_,S),S)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let S;try{S=this.urlSerializer.parse(_)}catch(F){S=this.malformedUriErrorHandler(F,this.urlSerializer,_)}return S}isActive(_,S){let F;if(F=!0===S?Object.assign({},Jl):!1===S?Object.assign({},yu):S,br(_))return wn(this.currentUrlTree,_,F);const j=this.parseUrl(_);return wn(this.currentUrlTree,j,F)}removeEmptyProps(_){return Object.keys(_).reduce((S,F)=>{const j=_[F];return null!=j&&(S[F]=j),S},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new lt(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,S,F,j,ne){var ye,at;if(this.disposed)return Promise.resolve(!1);let st,Ot,hn;ne?(st=ne.resolve,Ot=ne.reject,hn=ne.promise):hn=new Promise((gt,$r)=>{st=gt,Ot=$r});const _t=++this.navigationId;let $e;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(F=this.location.getState()),$e=F&&F.\u0275routerPageId?F.\u0275routerPageId:j.replaceUrl||j.skipLocationChange?null!==(ye=this.browserPageId)&&void 0!==ye?ye:0:(null!==(at=this.browserPageId)&&void 0!==at?at:0)+1):$e=0,this.setTransition({id:_t,targetPageId:$e,source:S,restoredState:F,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:j,resolve:st,reject:Ot,promise:hn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),hn.catch(gt=>Promise.reject(gt))}setBrowserUrl(_,S){const F=this.urlSerializer.serialize(_),j=Object.assign(Object.assign({},S.extras.state),this.generateNgRouterState(S.id,S.targetPageId));this.location.isCurrentPathEqualTo(F)||S.extras.replaceUrl?this.location.replaceState(F,"",j):this.location.go(F,"",j)}restoreHistory(_,S=!1){var F,j;if("computed"===this.canceledNavigationResolution){const ne=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(F=this.currentNavigation)||void 0===F?void 0:F.finalUrl)||0===ne?this.currentUrlTree===(null===(j=this.currentNavigation)||void 0===j?void 0:j.finalUrl)&&0===ne&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ne)}else"replace"===this.canceledNavigationResolution&&(S&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,S){const F=new pn(_.id,this.serializeUrl(_.extractedUrl),S);this.triggerEvent(F),_.resolve(!1)}generateNgRouterState(_,S){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:S}:{navigationId:_}}}return I.\u0275fac=function(_){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function ra(I){return"imperative"!==I}let Qi=(()=>{class I{constructor(_,S,F,j,ne){this.router=_,this.route=S,this.tabIndexAttribute=F,this.renderer=j,this.el=ne,this.commands=null,this.onChanges=new Et.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(_){if(null!=this.tabIndexAttribute)return;const S=this.renderer,F=this.el.nativeElement;null!==_?S.setAttribute(F,"tabindex",_):S.removeAttribute(F,"tabindex")}ngOnChanges(_){this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const _={skipLocationChange:Fs(this.skipLocationChange),replaceUrl:Fs(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Fs(this.preserveFragment)})}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Ti),p.Y36(Or),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},I.\u0275dir=p.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(_,S){1&_&&p.NdJ("click",function(){return S.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})(),Hs=(()=>{class I{constructor(_,S,F){this.router=_,this.route=S,this.locationStrategy=F,this.commands=null,this.href=null,this.onChanges=new Et.x,this.subscription=_.events.subscribe(j=>{j instanceof lt&&this.updateTargetUrlAndHref()})}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,S,F,j,ne){if(0!==_||S||F||j||ne||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ye={skipLocationChange:Fs(this.skipLocationChange),replaceUrl:Fs(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ye),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Fs(this.preserveFragment)})}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Ti),p.Y36(Or),p.Y36($t.S$))},I.\u0275dir=p.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,S){1&_&&p.NdJ("click",function(j){return S.onClick(j.button,j.ctrlKey,j.shiftKey,j.altKey,j.metaKey)}),2&_&&p.uIk("target",S.target)("href",S.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})();function Fs(I){return""===I||!!I}let oi=(()=>{class I{constructor(_,S,F,j,ne,ye){this.router=_,this.element=S,this.renderer=F,this.cdr=j,this.link=ne,this.linkWithHref=ye,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=_.events.subscribe(at=>{at instanceof lt&&this.update()})}ngAfterContentInit(){(0,Be.of)(this.links.changes,this.linksWithHrefs.changes,(0,Be.of)(null)).pipe((0,Tt.J)()).subscribe(_=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var _;null===(_=this.linkInputChangesSubscription)||void 0===_||_.unsubscribe();const S=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(F=>!!F).map(F=>F.onChanges);this.linkInputChangesSubscription=(0,ge.D)(S).pipe((0,Tt.J)()).subscribe(F=>{this.isActive!==this.isLinkActive(this.router)(F)&&this.update()})}set routerLinkActive(_){const S=Array.isArray(_)?_:_.split(" ");this.classes=S.filter(F=>!!F)}ngOnChanges(_){this.update()}ngOnDestroy(){var _;this.routerEventsSubscription.unsubscribe(),null===(_=this.linkInputChangesSubscription)||void 0===_||_.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const _=this.hasActiveLinks();this.isActive!==_&&(this.isActive=_,this.cdr.markForCheck(),this.classes.forEach(S=>{_?this.renderer.addClass(this.element.nativeElement,S):this.renderer.removeClass(this.element.nativeElement,S)}),this.isActiveChange.emit(_))})}isLinkActive(_){const S=function ia(I){return!!I.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return F=>!!F.urlTree&&_.isActive(F.urlTree,S)}hasActiveLinks(){const _=this.isLinkActive(this.router);return this.link&&_(this.link)||this.linkWithHref&&_(this.linkWithHref)||this.links.some(_)||this.linksWithHrefs.some(_)}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Ti),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(Qi,8),p.Y36(Hs,8))},I.\u0275dir=p.lG2({type:I,selectors:[["","routerLinkActive",""]],contentQueries:function(_,S,F){if(1&_&&(p.Suo(F,Qi,5),p.Suo(F,Hs,5)),2&_){let j;p.iGM(j=p.CRH())&&(S.links=j),p.iGM(j=p.CRH())&&(S.linksWithHrefs=j)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[p.TTD]}),I})();class Ha{}class oo{preload(E,_){return(0,Be.of)(null)}}let sa=(()=>{class I{constructor(_,S,F,j){this.router=_,this.injector=F,this.preloadingStrategy=j,this.loader=new mu(F,S,at=>_.triggerEvent(new Lt(at)),at=>_.triggerEvent(new En(at)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,me.h)(_=>_ instanceof lt),ee(()=>this.preload())).subscribe(()=>{})}preload(){const _=this.injector.get(p.h0i);return this.processRoutes(_,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,S){const F=[];for(const j of S)if(j.loadChildren&&!j.canLoad&&j._loadedConfig){const ne=j._loadedConfig;F.push(this.processRoutes(ne.module,ne.routes))}else j.loadChildren&&!j.canLoad?F.push(this.preloadConfig(_,j)):j.children&&F.push(this.processRoutes(_,j.children));return(0,ge.D)(F).pipe((0,Tt.J)(),(0,ae.U)(j=>{}))}preloadConfig(_,S){return this.preloadingStrategy.preload(S,()=>(S._loadedConfig?(0,Be.of)(S._loadedConfig):this.loader.load(_.injector,S)).pipe((0,L.z)(j=>(S._loadedConfig=j,this.processRoutes(j.module,j.routes)))))}}return I.\u0275fac=function(_){return new(_||I)(p.LFG(Ti),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Ha))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})(),xs=(()=>{class I{constructor(_,S,F={}){this.router=_,this.viewportScroller=S,this.options=F,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},F.scrollPositionRestoration=F.scrollPositionRestoration||"disabled",F.anchorScrolling=F.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Ft?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof lt&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof On&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,S){this.router.triggerEvent(new On(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,S))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(_){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();const Gs=new p.OlP("ROUTER_CONFIGURATION"),Ga=new p.OlP("ROUTER_FORROOT_GUARD"),_u=[$t.Ye,{provide:we,useClass:de},{provide:Ti,useFactory:function Wo(I,E,_,S,F,j,ne={},ye,at){const st=new Ti(null,I,E,_,S,F,pr(j));return ye&&(st.urlHandlingStrategy=ye),at&&(st.routeReuseStrategy=at),function Ca(I,E){I.errorHandler&&(E.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(E.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(E.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(E.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(E.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(E.canceledNavigationResolution=I.canceledNavigationResolution)}(ne,st),ne.enableTracing&&st.events.subscribe(Ot=>{var hn,_t;null===(hn=console.group)||void 0===hn||hn.call(console,`Router Event: ${Ot.constructor.name}`),console.log(Ot.toString()),console.log(Ot),null===(_t=console.groupEnd)||void 0===_t||_t.call(console)}),st},deps:[we,Zr,$t.Ye,p.zs3,p.Sil,so,Gs,[class na{},new p.FiY],[class $s{},new p.FiY]]},Zr,{provide:Or,useFactory:function jr(I){return I.routerState.root},deps:[Ti]},sa,oo,class Es{preload(E,_){return _().pipe($(()=>(0,Be.of)(null)))}},{provide:Gs,useValue:{enableTracing:!1}}];function vu(){return new p.PXZ("Router",Ti)}let Nr=(()=>{class I{constructor(_,S){}static forRoot(_,S){return{ngModule:I,providers:[_u,Go(_),{provide:Ga,useFactory:yo,deps:[[Ti,new p.FiY,new p.tp0]]},{provide:Gs,useValue:S||{}},{provide:$t.S$,useFactory:Ws,deps:[$t.lw,[new p.tBr($t.mr),new p.FiY],Gs]},{provide:xs,useFactory:Da,deps:[Ti,$t.EM,Gs]},{provide:Ha,useExisting:S&&S.preloadingStrategy?S.preloadingStrategy:oo},{provide:p.PXZ,multi:!0,useFactory:vu},[Wa,{provide:p.ip1,multi:!0,useFactory:Ls,deps:[Wa]},{provide:Rs,useFactory:ba,deps:[Wa]},{provide:p.tb,multi:!0,useExisting:Rs}]]}}static forChild(_){return{ngModule:I,providers:[Go(_)]}}}return I.\u0275fac=function(_){return new(_||I)(p.LFG(Ga,8),p.LFG(Ti,8))},I.\u0275mod=p.oAB({type:I}),I.\u0275inj=p.cJS({}),I})();function Da(I,E,_){return _.scrollOffset&&E.setOffset(_.scrollOffset),new xs(I,E,_)}function Ws(I,E,_={}){return _.useHash?new $t.Do(I,E):new $t.b0(I,E)}function yo(I){return"guarded"}function Go(I){return[{provide:p.deG,multi:!0,useValue:I},{provide:so,multi:!0,useValue:I}]}let Wa=(()=>{class I{constructor(_){this.injector=_,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Et.x}appInitializer(){return this.injector.get($t.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let S=null;const F=new Promise(ye=>S=ye),j=this.injector.get(Ti),ne=this.injector.get(Gs);return"disabled"===ne.initialNavigation?(j.setUpLocationChangeListener(),S(!0)):"enabled"===ne.initialNavigation||"enabledBlocking"===ne.initialNavigation?(j.hooks.afterPreactivation=()=>this.initNavigation?(0,Be.of)(null):(this.initNavigation=!0,S(!0),this.resultOfPreactivationDone),j.initialNavigation()):S(!0),F})}bootstrapListener(_){const S=this.injector.get(Gs),F=this.injector.get(sa),j=this.injector.get(xs),ne=this.injector.get(Ti),ye=this.injector.get(p.z2F);_===ye.components[0]&&(("enabledNonBlocking"===S.initialNavigation||void 0===S.initialNavigation)&&ne.initialNavigation(),F.setUpPreloading(),j.init(),ne.resetRootComponentType(ye.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return I.\u0275fac=function(_){return new(_||I)(p.LFG(p.zs3))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function Ls(I){return I.appInitializer.bind(I)}function ba(I){return I.bootstrapListener.bind(I)}const Rs=new p.OlP("Router Initializer")},3942:(Pt,ze,N)=>{N.d(ze,{Z:()=>qe});var p=N(2090),H=N(4859),Y=N(9681),ve=N(1877);class pe{constructor(Ne,Re){this._delegate=Ne,this.firebase=Re,(0,Y._addComponent)(Ne,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=Ne.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this._delegate.automaticDataCollectionEnabled=Ne}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ne=>{this._delegate.checkDestroyed(),Ne()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(Ne,Re=Y._DEFAULT_ENTRY_NAME){var Et;this._delegate.checkDestroyed();const $=this._delegate.container.getProvider(Ne);return!$.isInitialized()&&"EXPLICIT"===(null===(Et=$.getComponent())||void 0===Et?void 0:Et.instantiationMode)&&$.initialize(),$.getImmediate({identifier:Re})}_removeServiceInstance(Ne,Re=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ne).clearInstance(Re)}_addComponent(Ne){(0,Y._addComponent)(this._delegate,Ne)}_addOrOverwriteComponent(Ne){(0,Y._addOrOverwriteComponent)(this._delegate,Ne)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function Ve(){const ht=function Ae(ht){const Ne={},Re={__esModule:!0,initializeApp:function L(We,Fe={}){const _e=Y.initializeApp(We,Fe);if((0,p.r3)(Ne,_e.name))return Ne[_e.name];const Q=new ht(_e,Re);return Ne[_e.name]=Q,Q},app:$,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function me(We){const Fe=We.name,_e=Fe.replace("-compat","");if(Y._registerComponent(We)&&"PUBLIC"===We.type){const Q=(Me=$())=>{if("function"!=typeof Me[_e])throw Oe.create("invalid-app-argument",{appName:Fe});return Me[_e]()};void 0!==We.serviceProps&&(0,p.ZB)(Q,We.serviceProps),Re[_e]=Q,ht.prototype[_e]=function(...Me){return this._getService.bind(this,Fe).apply(this,We.multipleInstances?Me:[])}}return"PUBLIC"===We.type?Re[_e]:null},removeApp:function Et(We){delete Ne[We]},useAsService:function Ge(We,Fe){return"serverAuth"===Fe?null:Fe},modularAPIs:Y}};function $(We){if(!(0,p.r3)(Ne,We=We||Y._DEFAULT_ENTRY_NAME))throw Oe.create("no-app",{appName:We});return Ne[We]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function ee(){return Object.keys(Ne).map(We=>Ne[We])}}),$.App=ht,Re}(pe);return ht.INTERNAL=Object.assign(Object.assign({},ht.INTERNAL),{createFirebaseNamespace:Ve,extendNamespace:function Ne(Re){(0,p.ZB)(ht,Re)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),ht}(),ie=new ve.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ht=self.firebase.SDK_VERSION;ht&&ht.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=le;!function je(ht){(0,Y.registerVersion)("@firebase/app-compat","0.1.22",ht)}()},9681:(Pt,ze,N)=>{N.r(ze),N.d(ze,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>nn,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>Mt,_addOrOverwriteComponent:()=>Ft,_apps:()=>Tt,_clearComponents:()=>yn,_components:()=>$t,_getProvider:()=>pn,_registerComponent:()=>lt,_removeServiceInstance:()=>tn,deleteApp:()=>Un,getApp:()=>En,getApps:()=>ur,initializeApp:()=>Lt,onLog:()=>On,registerVersion:()=>zt,setLogLevel:()=>xt});var p=N(5861),H=N(4859),Y=N(1877),ve=N(2090);class pe{constructor(ct){this.container=ct}getPlatformInfoString(){return this.container.getProviders().map(Bt=>{if(function Ce(Ut){const ct=Ut.getComponent();return"VERSION"===(null==ct?void 0:ct.type)}(Bt)){const Yt=Bt.getImmediate();return`${Yt.library}/${Yt.version}`}return null}).filter(Bt=>Bt).join(" ")}}const Oe="@firebase/app",Ve=new Y.Yd("@firebase/app"),Gt="[DEFAULT]",mt={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tt=new Map,$t=new Map;function Mt(Ut,ct){try{Ut.container.addComponent(ct)}catch(Bt){Ve.debug(`Component ${ct.name} failed to register with FirebaseApp ${Ut.name}`,Bt)}}function Ft(Ut,ct){Ut.container.addOrOverwriteComponent(ct)}function lt(Ut){const ct=Ut.name;if($t.has(ct))return Ve.debug(`There were multiple attempts to register component ${ct}.`),!1;$t.set(ct,Ut);for(const Bt of Tt.values())Mt(Bt,Ut);return!0}function pn(Ut,ct){const Bt=Ut.container.getProvider("heartbeat").getImmediate({optional:!0});return Bt&&Bt.triggerHeartbeat(),Ut.container.getProvider(ct)}function tn(Ut,ct,Bt=Gt){pn(Ut,ct).clearInstance(Bt)}function yn(){$t.clear()}const Vn=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ft{constructor(ct,Bt,Yt){this._isDeleted=!1,this._options=Object.assign({},ct),this._config=Object.assign({},Bt),this._name=Bt.name,this._automaticDataCollectionEnabled=Bt.automaticDataCollectionEnabled,this._container=Yt,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ct){this.checkDestroyed(),this._automaticDataCollectionEnabled=ct}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ct){this._isDeleted=ct}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}}const nn="9.6.11";function Lt(Ut,ct={}){"object"!=typeof ct&&(ct={name:ct});const Bt=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},ct),Yt=Bt.name;if("string"!=typeof Yt||!Yt)throw Vn.create("bad-app-name",{appName:String(Yt)});const In=Tt.get(Yt);if(In){if((0,ve.vZ)(Ut,In.options)&&(0,ve.vZ)(Bt,In.config))return In;throw Vn.create("duplicate-app",{appName:Yt})}const rn=new H.H0(Yt);for(const te of $t.values())rn.addComponent(te);const he=new ft(Ut,Bt,rn);return Tt.set(Yt,he),he}function En(Ut=Gt){const ct=Tt.get(Ut);if(!ct)throw Vn.create("no-app",{appName:Ut});return ct}function ur(){return Array.from(Tt.values())}function Un(Ut){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,p.Z)(function*(Ut){const ct=Ut.name;Tt.has(ct)&&(Tt.delete(ct),yield Promise.all(Ut.container.getProviders().map(Bt=>Bt.delete())),Ut.isDeleted=!0)})).apply(this,arguments)}function zt(Ut,ct,Bt){var Yt;let In=null!==(Yt=mt[Ut])&&void 0!==Yt?Yt:Ut;Bt&&(In+=`-${Bt}`);const rn=In.match(/\s|\//),he=ct.match(/\s|\//);if(rn||he){const te=[`Unable to register library "${In}" with version "${ct}":`];return rn&&te.push(`library name "${In}" contains illegal characters (whitespace or "/")`),rn&&he&&te.push("and"),he&&te.push(`version name "${ct}" contains illegal characters (whitespace or "/")`),void Ve.warn(te.join(" "))}lt(new H.wA(`${In}-version`,()=>({library:In,version:ct}),"VERSION"))}function On(Ut,ct){if(null!==Ut&&"function"!=typeof Ut)throw Vn.create("invalid-log-argument");(0,Y.Am)(Ut,ct)}function xt(Ut){(0,Y.Ub)(Ut)}const nr="firebase-heartbeat-store";let xr=null;function hi(){return xr||(xr=(0,ve.X3)("firebase-heartbeat-database",1,(Ut,ct)=>{0===ct&&Ut.createObjectStore(nr)}).catch(Ut=>{throw Vn.create("storage-open",{originalErrorMessage:Ut.message})})),xr}function xn(){return(xn=(0,p.Z)(function*(Ut){try{return(yield hi()).transaction(nr).objectStore(nr).get(pr(Ut))}catch(ct){throw Vn.create("storage-get",{originalErrorMessage:ct.message})}})).apply(this,arguments)}function Nt(Ut,ct){return cn.apply(this,arguments)}function cn(){return(cn=(0,p.Z)(function*(Ut,ct){try{const Yt=(yield hi()).transaction(nr,"readwrite");return yield Yt.objectStore(nr).put(ct,pr(Ut)),Yt.complete}catch(Bt){throw Vn.create("storage-set",{originalErrorMessage:Bt.message})}})).apply(this,arguments)}function pr(Ut){return`${Ut.name}!${Ut.options.appId}`}class Yn{constructor(ct){this.container=ct,this._heartbeatsCache=null;const Bt=this.container.getProvider("app").getImmediate();this._storage=new Qt(Bt),this._heartbeatsCachePromise=this._storage.read().then(Yt=>(this._heartbeatsCache=Yt,Yt))}triggerHeartbeat(){var ct=this;return(0,p.Z)(function*(){const Yt=ct.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),In=Bn();if(null===ct._heartbeatsCache&&(ct._heartbeatsCache=yield ct._heartbeatsCachePromise),ct._heartbeatsCache.lastSentHeartbeatDate!==In&&!ct._heartbeatsCache.heartbeats.some(rn=>rn.date===In))return ct._heartbeatsCache.heartbeats.push({date:In,agent:Yt}),ct._heartbeatsCache.heartbeats=ct._heartbeatsCache.heartbeats.filter(rn=>{const he=new Date(rn.date).valueOf();return Date.now()-he<=2592e6}),ct._storage.overwrite(ct._heartbeatsCache)})()}getHeartbeatsHeader(){var ct=this;return(0,p.Z)(function*(){if(null===ct._heartbeatsCache&&(yield ct._heartbeatsCachePromise),null===ct._heartbeatsCache||0===ct._heartbeatsCache.heartbeats.length)return"";const Bt=Bn(),{heartbeatsToSend:Yt,unsentEntries:In}=function gr(Ut,ct=1024){const Bt=[];let Yt=Ut.slice();for(const In of Ut){const rn=Bt.find(he=>he.agent===In.agent);if(rn){if(rn.dates.push(In.date),lr(Bt)>ct){rn.dates.pop();break}}else if(Bt.push({agent:In.agent,dates:[In.date]}),lr(Bt)>ct){Bt.pop();break}Yt=Yt.slice(1)}return{heartbeatsToSend:Bt,unsentEntries:Yt}}(ct._heartbeatsCache.heartbeats),rn=(0,ve.L)(JSON.stringify({version:2,heartbeats:Yt}));return ct._heartbeatsCache.lastSentHeartbeatDate=Bt,In.length>0?(ct._heartbeatsCache.heartbeats=In,yield ct._storage.overwrite(ct._heartbeatsCache)):(ct._heartbeatsCache.heartbeats=[],ct._storage.overwrite(ct._heartbeatsCache)),rn})()}}function Bn(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(ct){this.app=ct,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ct=this;return(0,p.Z)(function*(){return(yield ct._canUseIndexedDBPromise)&&(yield function ei(Ut){return xn.apply(this,arguments)}(ct.app))||{heartbeats:[]}})()}overwrite(ct){var Bt=this;return(0,p.Z)(function*(){var Yt;if(yield Bt._canUseIndexedDBPromise){const rn=yield Bt.read();return Nt(Bt.app,{lastSentHeartbeatDate:null!==(Yt=ct.lastSentHeartbeatDate)&&void 0!==Yt?Yt:rn.lastSentHeartbeatDate,heartbeats:ct.heartbeats})}})()}add(ct){var Bt=this;return(0,p.Z)(function*(){var Yt;if(yield Bt._canUseIndexedDBPromise){const rn=yield Bt.read();return Nt(Bt.app,{lastSentHeartbeatDate:null!==(Yt=ct.lastSentHeartbeatDate)&&void 0!==Yt?Yt:rn.lastSentHeartbeatDate,heartbeats:[...rn.heartbeats,...ct.heartbeats]})}})()}}function lr(Ut){return(0,ve.L)(JSON.stringify({version:2,heartbeats:Ut})).length}!function wn(Ut){lt(new H.wA("platform-logger",ct=>new pe(ct),"PRIVATE")),lt(new H.wA("heartbeat",ct=>new Yn(ct),"PRIVATE")),zt(Oe,"0.7.21",Ut),zt(Oe,"0.7.21","esm2017"),zt("fire-js","")}("")},4859:(Pt,ze,N)=>{N.d(ze,{H0:()=>Ae,wA:()=>Y});var p=N(5861),H=N(2090);class Y{constructor(le,ie,ge){this.name=le,this.instanceFactory=ie,this.type=ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const ve="[DEFAULT]";class pe{constructor(le,ie){this.name=le,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const ie=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(ie)){const ge=new H.BH;if(this.instancesDeferred.set(ie,ge),this.isInitialized(ie)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:ie});Be&&ge.resolve(Be)}catch(Be){}}return this.instancesDeferred.get(ie).promise}getImmediate(le){var ie;const ge=this.normalizeInstanceIdentifier(null==le?void 0:le.identifier),Be=null!==(ie=null==le?void 0:le.optional)&&void 0!==ie&&ie;if(!this.isInitialized(ge)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ge})}catch(je){if(Be)return null;throw je}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function Oe(Ve){return"EAGER"===Ve.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:ve})}catch(ie){}for(const[ie,ge]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(ie);try{const je=this.getOrInitializeService({instanceIdentifier:Be});ge.resolve(je)}catch(je){}}}}clearInstance(le=ve){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,p.Z)(function*(){const ie=Array.from(le.instances.values());yield Promise.all([...ie.filter(ge=>"INTERNAL"in ge).map(ge=>ge.INTERNAL.delete()),...ie.filter(ge=>"_delete"in ge).map(ge=>ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=ve){return this.instances.has(le)}getOptions(le=ve){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:ie={}}=le,ge=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(ge))throw Error(`${this.name}(${ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:ge,options:ie});for(const[je,qe]of this.instancesDeferred.entries())ge===this.normalizeInstanceIdentifier(je)&&qe.resolve(Be);return Be}onInit(le,ie){var ge;const Be=this.normalizeInstanceIdentifier(ie),je=null!==(ge=this.onInitCallbacks.get(Be))&&void 0!==ge?ge:new Set;je.add(le),this.onInitCallbacks.set(Be,je);const qe=this.instances.get(Be);return qe&&le(qe,Be),()=>{je.delete(le)}}invokeOnInitCallbacks(le,ie){const ge=this.onInitCallbacks.get(ie);if(ge)for(const Be of ge)try{Be(le,ie)}catch(je){}}getOrInitializeService({instanceIdentifier:le,options:ie={}}){let ge=this.instances.get(le);if(!ge&&this.component&&(ge=this.component.instanceFactory(this.container,{instanceIdentifier:(Ve=le,Ve===ve?void 0:Ve),options:ie}),this.instances.set(le,ge),this.instancesOptions.set(le,ie),this.invokeOnInitCallbacks(ge,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,ge)}catch(Be){}var Ve;return ge||null}normalizeInstanceIdentifier(le=ve){return this.component?this.component.multipleInstances?le:ve:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ae{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const ie=this.getProvider(le.name);if(ie.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);ie.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const ie=new pe(le,this);return this.providers.set(le,ie),ie}getProviders(){return Array.from(this.providers.values())}}},1877:(Pt,ze,N)=>{N.d(ze,{Am:()=>Ve,Ub:()=>Ae,Yd:()=>Oe,in:()=>H});const p=[];var H=(()=>{return(le=H||(H={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",H;var le})();const Y={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},ve=H.INFO,pe={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},Ce=(le,ie,...ge)=>{if(ie<le.logLevel)return;const Be=(new Date).toISOString(),je=pe[ie];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[je](`[${Be}]  ${le.name}:`,...ge)};class Oe{constructor(ie){this.name=ie,this._logLevel=ve,this._logHandler=Ce,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in H))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?Y[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...ie),this._logHandler(this,H.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...ie),this._logHandler(this,H.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,H.INFO,...ie),this._logHandler(this,H.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,H.WARN,...ie),this._logHandler(this,H.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...ie),this._logHandler(this,H.ERROR,...ie)}}function Ae(le){p.forEach(ie=>{ie.setLogLevel(le)})}function Ve(le,ie){for(const ge of p){let Be=null;ie&&ie.level&&(Be=Y[ie.level]),ge.userLogHandler=null===le?null:(je,qe,...ht)=>{const Ne=ht.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch(Et){return null}}).filter(Re=>Re).join(" ");qe>=(null!=Be?Be:je.logLevel)&&le({level:H[qe].toLowerCase(),message:Ne,args:ht,type:je.name})}}}},1470:(Pt,ze,N)=>{N.d(ze,{hx:()=>Be,yI:()=>ht});var p=N(5e3),H=N(655),Y=N(3075),ve=N(9808);const pe=new p.OlP("ngx-mask config"),Ce=new p.OlP("new ngx-mask config"),Oe=new p.OlP("initial ngx-mask config"),Ae={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new p.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Ve=["Hh:m0:s0","Hh:m0","m0:s0"],le=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let ie=(()=>{class Re{constructor($){this._config=$,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(L,ee,me,Ge)=>{var We,Fe;let _e=[],Q="";if(Array.isArray(me)){const Kt=new RegExp(me.map(bt=>"[\\^$.|?*+()".indexOf(bt)>=0?`\\${bt}`:bt).join("|"));_e=L.split(Kt),Q=null!==(Fe=null===(We=L.match(Kt))||void 0===We?void 0:We[0])&&void 0!==Fe?Fe:""}else _e=L.split(me),Q=me;const Me=_e.length>1?`${Q}${_e[1]}`:"";let ae=_e[0];const Xe=this.separatorLimit.replace(/\s/g,"");Xe&&+Xe&&(ae="-"===ae[0]?`-${ae.slice(1,ae.length).slice(0,Xe.length)}`:ae.slice(0,Xe.length));const Ue=/(\d+)(\d{3})/;for(;ee&&Ue.test(ae);)ae=ae.replace(Ue,"$1"+ee+"$2");return void 0===Ge?ae+Me:0===Ge?ae:ae+Me.substr(0,Ge+1)},this.percentage=L=>Number(L)>=0&&Number(L)<=100,this.getPrecision=L=>{const ee=L.split(".");return ee.length>1?Number(ee[ee.length-1]):1/0},this.checkAndRemoveSuffix=L=>{var ee,me,Ge;for(let We=(null===(ee=this.suffix)||void 0===ee?void 0:ee.length)-1;We>=0;We--){const Fe=this.suffix.substr(We,null===(me=this.suffix)||void 0===me?void 0:me.length);if(L.includes(Fe)&&(We-1<0||!L.includes(this.suffix.substr(We-1,null===(Ge=this.suffix)||void 0===Ge?void 0:Ge.length))))return L.replace(Fe,"")}return L},this.checkInputPrecision=(L,ee,me)=>{if(ee<1/0){if(Array.isArray(me)){const Fe=me.find(_e=>_e!==this.thousandSeparator);me=Fe||me[0]}const Ge=new RegExp(this._charToRegExpExpression(me)+`\\d{${ee}}.*$`),We=L.match(Ge);We&&We[0].length-1>ee&&(L=L.substring(0,L.length-(We[0].length-1-ee))),0===ee&&this._compareOrIncludes(L[L.length-1],me,this.thousandSeparator)&&(L=L.substring(0,L.length-1))}return L},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern($,L){const[ee,me]=L;return this.customPattern=me,this.applyMask($,ee)}applyMask($,L,ee=0,me=!1,Ge=!1,We=(()=>{})){var Fe,_e;if(!L||"string"!=typeof $)return"";let Q=0,Me="",ae=!1,Xe=!1,Ue=1,Kt=!1;$.slice(0,this.prefix.length)===this.prefix&&($=$.slice(this.prefix.length,$.length)),this.suffix&&(null==$?void 0:$.length)>0&&($=this.checkAndRemoveSuffix($));const bt=$.toString().split("");"IP"===L&&(this.ipError=bt.filter(Ft=>"."===Ft).length<3&&bt.length<7,L="099.099.099.099");const Gt=[];for(let Ft=0;Ft<$.length;Ft++)(null===(Fe=$[Ft])||void 0===Fe?void 0:Fe.match("\\d"))&&Gt.push($[Ft]);if("CPF_CNPJ"===L&&(this.cpfCnpjError=11!==Gt.length&&14!==Gt.length,L=Gt.length>11?"00.000.000/0000-00":"000.000.000-00"),L.startsWith("percent")){if($.match("[a-z]|[A-Z]")||$.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){$=this._stripToDecimal($);const Ft=this.getPrecision(L);$=this.checkInputPrecision($,Ft,this.decimalMarker)}$.indexOf(".")>0&&!this.percentage($.substring(0,$.indexOf(".")))&&($=`${$.substring(0,$.indexOf(".")-1)}${$.substring($.indexOf("."),$.length)}`),Me=this.percentage($)?$:$.substring(0,$.length-1)}else if(L.startsWith("separator")){($.match("[w\u0430-\u044f\u0410-\u042f]")||$.match("[\u0401\u0451\u0410-\u044f]")||$.match("[a-z]|[A-Z]")||$.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||$.match("[^A-Za-z0-9,]"))&&($=this._stripToDecimal($)),$=$.length>1&&"0"===$[0]&&!this._compareOrIncludes($[1],this.decimalMarker,this.thousandSeparator)&&!Ge?$.slice(1,$.length):$,Ge&&($=this._compareOrIncludes($[$.length-1],this.decimalMarker,this.thousandSeparator)?$.slice(0,$.length-1):$);const Ft=this._charToRegExpExpression(this.thousandSeparator);let lt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Ft,"");if(Array.isArray(this.decimalMarker))for(const ft of this.decimalMarker)lt=lt.replace(this._charToRegExpExpression(ft),"");else lt=lt.replace(this._charToRegExpExpression(this.decimalMarker),"");const pn=new RegExp("["+lt+"]");($.match(pn)||1===$.length&&this._compareOrIncludes($,this.decimalMarker,this.thousandSeparator))&&($=$.substring(0,$.length-1));const tn=this.getPrecision(L),yn=($=this.checkInputPrecision($,tn,this.decimalMarker)).replace(new RegExp(Ft,"g"),"");Me=this._formatWithSeparators(yn,this.thousandSeparator,this.decimalMarker,tn);const qn=Me.indexOf(",")-$.indexOf(","),Vn=Me.length-$.length;if(Vn>0&&","!==Me[ee]){Xe=!0;let ft=0;do{this._shift.add(ee+ft),ft++}while(ft<Vn)}else 0!==qn&&ee>0&&!(Me.indexOf(",")>=ee&&ee>3)||!(Me.indexOf(".")>=ee&&ee>3)&&Vn<=0?(this._shift.clear(),Xe=!0,Ue=Vn,this._shift.add(ee+=Vn)):this._shift.clear()}else for(let Ft=0,lt=bt[0];Ft<bt.length&&Q!==L.length;Ft++,lt=bt[Ft])if(this._checkSymbolMask(lt,L[Q])&&"?"===L[Q+1])Me+=lt,Q+=2;else if("*"===L[Q+1]&&ae&&this._checkSymbolMask(lt,L[Q+2]))Me+=lt,Q+=3,ae=!1;else if(this._checkSymbolMask(lt,L[Q])&&"*"===L[Q+1])Me+=lt,ae=!0;else if("?"===L[Q+1]&&this._checkSymbolMask(lt,L[Q+2]))Me+=lt,Q+=3;else if(this._checkSymbolMask(lt,L[Q])){if("H"===L[Q]&&Number(lt)>2){Q+=1,this._shiftStep(L,Q,bt.length),Ft--,this.leadZeroDateTime&&(Me+="0");continue}if("h"===L[Q]&&"2"===Me&&Number(lt)>3){Q+=1,Ft--;continue}if("m"===L[Q]&&Number(lt)>5){Q+=1,this._shiftStep(L,Q,bt.length),Ft--,this.leadZeroDateTime&&(Me+="0");continue}if("s"===L[Q]&&Number(lt)>5){Q+=1,this._shiftStep(L,Q,bt.length),Ft--,this.leadZeroDateTime&&(Me+="0");continue}const pn=31;if("d"===L[Q]&&(Number(lt)>3&&this.leadZeroDateTime||Number($.slice(Q,Q+2))>pn||"/"===$[Q+1])){Q+=1,this._shiftStep(L,Q,bt.length),Ft--,this.leadZeroDateTime&&(Me+="0");continue}if("M"===L[Q]){const yn=0===Q&&(Number(lt)>2||Number($.slice(Q,Q+2))>12||"/"===$[Q+1]),qn=$.slice(Q-3,Q-1).includes("/")&&("/"===$[Q-2]&&Number($.slice(Q-1,Q+1))>12&&"/"!==$[Q]||"/"===$[Q]||"/"===$[Q-3]&&Number($.slice(Q-2,Q))>12&&"/"!==$[Q-1]||"/"===$[Q-1]),Vn=Number($.slice(Q-3,Q-1))<=pn&&!$.slice(Q-3,Q-1).includes("/")&&"/"===$[Q-1]&&(Number($.slice(Q,Q+2))>12||"/"===$[Q+1]),ft=Number($.slice(Q-3,Q-1))>pn&&!$.slice(Q-3,Q-1).includes("/")&&!$.slice(Q-2,Q).includes("/")&&Number($.slice(Q-2,Q))>12,nn=Number($.slice(Q-3,Q-1))<=pn&&!$.slice(Q-3,Q-1).includes("/")&&"/"!==$[Q-1]&&Number($.slice(Q-1,Q+1))>12;if(Number(lt)>1&&this.leadZeroDateTime||yn||qn||Vn||ft||nn){Q+=1,this._shiftStep(L,Q,bt.length),Ft--,this.leadZeroDateTime&&(Me+="0");continue}}Me+=lt,Q++}else-1!==this.maskSpecialCharacters.indexOf(L[Q])?(Me+=L[Q],Q++,this._shiftStep(L,Q,bt.length),Ft--):this.maskSpecialCharacters.indexOf(lt)>-1&&this.maskAvailablePatterns[L[Q]]&&(null===(_e=this.maskAvailablePatterns[L[Q]])||void 0===_e?void 0:_e.optional)?(!!bt[Q]&&"099.099.099.099"!==L&&"000.000.000-00"!==L&&"00.000.000/0000-00"!==L&&!L.match(/^9+\.0+$/)&&(Me+=bt[Q]),Q++,Ft--):"*"===this.maskExpression[Q+1]&&this._findSpecialChar(this.maskExpression[Q+2])&&this._findSpecialChar(lt)===this.maskExpression[Q+2]&&ae||"?"===this.maskExpression[Q+1]&&this._findSpecialChar(this.maskExpression[Q+2])&&this._findSpecialChar(lt)===this.maskExpression[Q+2]&&ae?(Q+=3,Me+=lt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(lt)<0&&lt!==this.placeHolderCharacter&&(Kt=!0);Me.length+1===L.length&&-1!==this.maskSpecialCharacters.indexOf(L[L.length-1])&&(Me+=L[L.length-1]);let mt=ee+1;for(;this._shift.has(mt);)Ue++,mt++;let Tt=me?Q:this._shift.has(ee)?Ue:0;Kt&&Tt--,We(Tt,Xe),Ue<0&&this._shift.clear();let $t=!1;Ge&&($t=bt.every(Ft=>this.maskSpecialCharacters.includes(Ft)));let Mt=`${this.prefix}${$t?"":Me}${this.suffix}`;return 0===Me.length&&(Mt=`${this.prefix}${Me}`),Mt}_findSpecialChar($){return this.maskSpecialCharacters.find(L=>L===$)}_checkSymbolMask($,L){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[L]&&this.maskAvailablePatterns[L].pattern&&this.maskAvailablePatterns[L].pattern.test($)}_stripToDecimal($){return $.split("").filter((L,ee)=>L.match("^-?\\d")||L.match("\\s")||"."===L||","===L||"-"===L&&0===ee&&this.allowNegativeNumbers).join("")}_charToRegExpExpression($){return $&&(" "===$?"\\s":"[\\^$.|?*+()".indexOf($)>=0?`\\${$}`:$)}_shiftStep($,L,ee){const me=/[*?]/g.test($.slice(0,L))?ee:L;this._shift.add(me+this.prefix.length||0)}_compareOrIncludes($,L,ee){return Array.isArray(L)?L.filter(me=>me!==ee).includes($):$===L}}return Re.\u0275fac=function($){return new($||Re)(p.LFG(pe))},Re.\u0275prov=p.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),ge=(()=>{class Re extends ie{constructor($,L,ee,me){super(L),this.document=$,this._config=L,this._elementRef=ee,this._renderer=me,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=Ge=>{}}applyMask($,L,ee=0,me=!1,Ge=!1,We=(()=>{})){if(!L)return $!==this.actualValue?this.actualValue:$;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput($||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput($||"#")),!$&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const Fe=$&&"number"==typeof this.selStart?$[this.selStart]:"";let _e="";if(this.hiddenInput&&!this.writingValue){let Xe=this.actualValue.split("");""!==$&&Xe.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&($.length>Xe.length?Xe.splice(this.selStart,0,Fe):$.length<Xe.length&&(Xe.length-$.length==1?Xe.splice(this.selStart-1,1):Xe.splice(this.selStart,this.selEnd-this.selStart))):Xe=[],this.showMaskTyped&&($=this.removeMask($)),_e=this.actualValue.length&&Xe.length<=$.length?this.shiftTypedSymbols(Xe.join("")):$}_e=Boolean(_e)&&_e.length?_e:$;const Q=super.applyMask(_e,L,ee,me,Ge,We);if(this.actualValue=this.getActualValue(Q),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(Xe=>!this._compareOrIncludes(Xe,this.decimalMarker,this.thousandSeparator))),this.formControlResult(Q),!this.showMaskTyped)return this.hiddenInput&&Q&&Q.length?this.hideInput(Q,this.maskExpression):Q;const Me=Q.length,ae=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const Xe=this._numberSkipedSymbols(Q);return Q+ae.slice(Me+Xe)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?Q+ae:Q+ae.slice(Me)}_numberSkipedSymbols($){const L=/(^|\D)(\d\D)/g;let ee=L.exec($),me=0;for(;null!=ee;)me+=1,ee=L.exec($);return me}applyValueChanges($,L,ee,me=(()=>{})){const Ge=this._elementRef.nativeElement;Ge.value=this.applyMask(Ge.value,this.maskExpression,$,L,ee,me),Ge!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput($,L){return $.split("").map((ee,me)=>{var Ge,We;return this.maskAvailablePatterns&&this.maskAvailablePatterns[L[me]]&&(null===(Ge=this.maskAvailablePatterns[L[me]])||void 0===Ge?void 0:Ge.symbol)?null===(We=this.maskAvailablePatterns[L[me]])||void 0===We?void 0:We.symbol:ee}).join("")}getActualValue($){const L=$.split("").filter((ee,me)=>this._checkSymbolMask(ee,this.maskExpression[me])||this.maskSpecialCharacters.includes(this.maskExpression[me])&&ee===this.maskExpression[me]);return L.join("")===$?L.join(""):$}shiftTypedSymbols($){let L="";return($&&$.split("").map((me,Ge)=>{if(this.maskSpecialCharacters.includes($[Ge+1])&&$[Ge+1]!==this.maskExpression[Ge+1])return L=me,$[Ge+1];if(L.length){const We=L;return L="",We}return me})||[]).join("")}numberToString($){return $||0===$?Number($).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String($)}showMaskInInput($){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if($){if("IP"===this.maskExpression)return this._checkForIp($);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj($)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const $=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==$.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask($.value,this.maskExpression))}set formElementProperty([$,L]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,$,L))}checkSpecialCharAmount($){return $.split("").filter(ee=>this._findSpecialChar(ee)).length}removeMask($){return this._removeMask(this._removeSuffix(this._removePrefix($)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp($){var L;if("#"===$)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const ee=[];for(let me=0;me<$.length;me++)(null===(L=$[me])||void 0===L?void 0:L.match("\\d"))&&ee.push($[me]);return ee.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:ee.length>3&&ee.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:ee.length>6&&ee.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj($){var L;const ee=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,me=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===$)return ee;const Ge=[];for(let We=0;We<$.length;We++)(null===(L=$[We])||void 0===L?void 0:L.match("\\d"))&&Ge.push($[We]);return Ge.length<=3?ee.slice(Ge.length,ee.length):Ge.length>3&&Ge.length<=6?ee.slice(Ge.length+1,ee.length):Ge.length>6&&Ge.length<=9?ee.slice(Ge.length+2,ee.length):Ge.length>9&&Ge.length<11?ee.slice(Ge.length+3,ee.length):11===Ge.length?"":12===Ge.length?me.slice(17===$.length?16:15,me.length):Ge.length>12&&Ge.length<=14?me.slice(Ge.length+4,me.length):""}formControlResult($){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix($)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols($)):this._removeSuffix($))}_toNumber($){if(!this.isNumberValue||""===$)return $;const L=Number($);return Number.isNaN(L)?$:L}_removeMask($,L){return $&&$.replace(this._regExpForRemove(L),"")}_removePrefix($){return this.prefix?$&&$.replace(this.prefix,""):$}_removeSuffix($){return this.suffix?$&&$.replace(this.suffix,""):$}_retrieveSeparatorValue($){return this._removeMask(this._removeSuffix(this._removePrefix($)),this.maskSpecialCharacters)}_regExpForRemove($){return new RegExp($.map(L=>`\\${L}`).join("|"),"gi")}_checkSymbols($){if(""===$)return $;const L=this._retrieveSeparatorPrecision(this.maskExpression);let ee=this._retrieveSeparatorValue($);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(ee=ee.replace(this.decimalMarker,".")),this.isNumberValue?L?$===this.decimalMarker?null:this._checkPrecision(this.maskExpression,ee):Number(ee):ee}_retrieveSeparatorPrecision($){const L=$.match(new RegExp("^separator\\.([^d]*)"));return L?Number(L[1]):null}_checkPrecision($,L){return $.indexOf("2")>0?Number(L).toFixed(2):Number(L)}}return Re.\u0275fac=function($){return new($||Re)(p.LFG(ve.K0),p.LFG(pe),p.LFG(p.SBq),p.LFG(p.Qsj))},Re.\u0275prov=p.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),Be=(()=>{class Re{constructor($,L,ee){this.document=$,this._maskService=L,this._config=ee,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new p.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=me=>{},this.onTouch=()=>{}}ngOnChanges($){const{maskExpression:L,specialCharacters:ee,patterns:me,prefix:Ge,suffix:We,thousandSeparator:Fe,decimalMarker:_e,dropSpecialCharacters:Q,hiddenInput:Me,showMaskTyped:ae,placeHolderCharacter:Xe,shownMaskExpression:Ue,showTemplate:Kt,clearIfNotMatch:bt,validation:Gt,separatorLimit:mt,allowNegativeNumbers:Tt,leadZeroDateTime:$t,triggerOnMaskChange:Mt}=$;if(L&&(L.currentValue!==L.previousValue&&!L.firstChange&&(this._maskService.maskChanged=!0),L.currentValue&&L.currentValue.split("||").length>1?(this._maskExpressionArray=L.currentValue.split("||").sort((Ft,lt)=>Ft.length-lt.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0]):(this._maskExpressionArray=[],this._maskValue=L.currentValue||"",this._maskService.maskExpression=this._maskValue)),ee){if(!ee.currentValue||!Array.isArray(ee.currentValue))return;this._maskService.maskSpecialCharacters=ee.currentValue||[]}me&&me.currentValue&&(this._maskService.maskAvailablePatterns=me.currentValue),Ge&&(this._maskService.prefix=Ge.currentValue),We&&(this._maskService.suffix=We.currentValue),Fe&&(this._maskService.thousandSeparator=Fe.currentValue),_e&&(this._maskService.decimalMarker=_e.currentValue),Q&&(this._maskService.dropSpecialCharacters=Q.currentValue),Me&&(this._maskService.hiddenInput=Me.currentValue),ae&&(this._maskService.showMaskTyped=ae.currentValue),Xe&&(this._maskService.placeHolderCharacter=Xe.currentValue),Ue&&(this._maskService.shownMaskExpression=Ue.currentValue),Kt&&(this._maskService.showTemplate=Kt.currentValue),bt&&(this._maskService.clearIfNotMatch=bt.currentValue),Gt&&(this._maskService.validation=Gt.currentValue),mt&&(this._maskService.separatorLimit=mt.currentValue),Tt&&(this._maskService.allowNegativeNumbers=Tt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(Ft=>"-"!==Ft))),$t&&(this._maskService.leadZeroDateTime=$t.currentValue),Mt&&(this._maskService.triggerOnMaskChange=Mt.currentValue),this._applyMask()}validate({value:$}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError($);if(this._maskService.cpfCnpjError)return this._createValidationError($);if(this._maskValue.startsWith("separator")||le.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Ve.includes(this._maskValue))return this._validateTime($);if($&&$.toString().length>=1){let L=0;for(const ee in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[ee].optional&&(this._maskValue.indexOf(ee)!==this._maskValue.lastIndexOf(ee)?L+=this._maskValue.split("").filter(Ge=>Ge===ee).join("").length:-1!==this._maskValue.indexOf(ee)&&L++,-1!==this._maskValue.indexOf(ee)&&$.toString().length>=this._maskValue.indexOf(ee)||L===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&$.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&$.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&$.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError($);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const ee=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-L:this._maskValue.length-L;if($.toString().length<ee)return this._createValidationError($)}}return $&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange($){!$&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput($){const L=$.target;if(this._inputValue=L.value,this._setMask(),!this._maskValue)return void this.onChange(L.value);const ee=1===L.selectionStart?L.selectionStart+this._maskService.prefix.length:L.selectionStart;let me=0,Ge=!1;if(this._maskService.applyValueChanges(ee,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(Fe,_e)=>{this._justPasted=!1,me=Fe,Ge=_e}),this.document.activeElement!==L)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let We=this._position?this._inputValue.length+ee+me:ee+("Backspace"!==this._code||Ge?me:0);We>this._getActualInputLength()&&(We=this._getActualInputLength()),We<0&&(We=0),L.setSelectionRange(We,We),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick($){if(!this._maskValue)return;const L=$.target;null!==L&&null!==L.selectionStart&&L.selectionStart===L.selectionEnd&&L.selectionStart>this._maskService.prefix.length&&38!==$.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),L.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===L.value?(L.focus(),L.setSelectionRange(0,0)):L.selectionStart>this._maskService.actualValue.length&&L.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const Ge=L.value&&L.value!==this._maskService.prefix?L.value:this._maskService.prefix+this._maskService.maskIsShown;L.value!==Ge&&(L.value=Ge),(L.selectionStart||L.selectionEnd)<=this._maskService.prefix.length?L.selectionStart=this._maskService.prefix.length:L.selectionEnd>this._getActualInputLength()&&(L.selectionEnd=this._getActualInputLength())}onKeyDown($){var L;if(!this._maskValue)return;this._code=$.code?$.code:$.key;const ee=$.target;if(this._inputValue=ee.value,this._setMask(),38===$.keyCode&&$.preventDefault(),37===$.keyCode||8===$.keyCode||46===$.keyCode){if(8===$.keyCode&&0===ee.value.length&&(ee.selectionStart=ee.selectionEnd),8===$.keyCode&&0!==ee.selectionStart)if(this.specialCharacters=(null===(L=this.specialCharacters)||void 0===L?void 0:L.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&ee.selectionStart<=this.prefix.length)ee.setSelectionRange(this.prefix.length,ee.selectionEnd);else if(this._inputValue.length!==ee.selectionStart&&1!==ee.selectionStart)for(;this.specialCharacters.includes(this._inputValue[ee.selectionStart-1].toString())&&(this.prefix.length>=1&&ee.selectionStart>this.prefix.length||0===this.prefix.length);)ee.setSelectionRange(ee.selectionStart-1,ee.selectionEnd);this.checkSelectionOnDeletion(ee),this._maskService.prefix.length&&ee.selectionStart<=this._maskService.prefix.length&&ee.selectionEnd<=this._maskService.prefix.length&&$.preventDefault();const me=ee.selectionStart;8===$.keyCode&&!ee.readOnly&&0===me&&ee.selectionEnd===ee.value.length&&0!==ee.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<ee.selectionStart?ee.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===$.keyCode&&$.ctrlKey||65===$.keyCode&&$.metaKey)&&(ee.setSelectionRange(0,this._getActualInputLength()),$.preventDefault()),this._maskService.selStart=ee.selectionStart,this._maskService.selEnd=ee.selectionEnd}writeValue($){return(0,H.mG)(this,void 0,void 0,function*(){"object"==typeof $&&null!==$&&"value"in $&&("disable"in $&&this.setDisabledState(Boolean($.disable)),$=$.value),("number"==typeof $||this._maskValue.startsWith("separator"))&&($=this._maskService.numberToString($),Array.isArray(this.decimalMarker)||($="."!==this.decimalMarker?$.replace(".",this.decimalMarker):$),this._maskService.isNumberValue=!0),"string"!=typeof $&&($=""),this._inputValue=$,this._setMask(),$&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask($,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",$],this._inputValue=$})}registerOnChange($){this.onChange=$,this._maskService.onChange=this.onChange}registerOnTouched($){this.onTouch=$}checkSelectionOnDeletion($){$.selectionStart=Math.min(Math.max(this.prefix.length,$.selectionStart),this._inputValue.length-this.suffix.length),$.selectionEnd=Math.min(Math.max(this.prefix.length,$.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState($){this._maskService.formElementProperty=["disabled",$]}_repeatPatternSymbols($){return $.match(/{[0-9]+}/)&&$.split("").reduce((L,ee,me)=>{if(this._start="{"===ee?me:this._start,"}"!==ee)return this._maskService._findSpecialChar(ee)?L+ee:L;this._end=me;const Ge=Number($.slice(this._start+1,this._end));return L+new Array(Ge+1).join($[this._start-1])},"")||$}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime($){const L=this._maskValue.split("").filter(ee=>":"!==ee).length;return $&&(0==+$[$.length-1]&&$.length<L||$.length<=L-2)?this._createValidationError($):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError($){return{mask:{requiredMask:this._maskValue,actualValue:$}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some($=>{var L,ee;const me=(null===(L=this._maskService.removeMask(this._inputValue))||void 0===L?void 0:L.length)<=(null===(ee=this._maskService.removeMask($))||void 0===ee?void 0:ee.length);if(this._inputValue&&me)return this._maskValue=$,this.maskExpression=$,this._maskService.maskExpression=$,me;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return Re.\u0275fac=function($){return new($||Re)(p.Y36(ve.K0),p.Y36(ge),p.Y36(pe))},Re.\u0275dir=p.lG2({type:Re,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function($,L){1&$&&p.NdJ("paste",function(){return L.onPaste()})("ngModelChange",function(me){return L.onModelChange(me)})("input",function(me){return L.onInput(me)})("blur",function(){return L.onBlur()})("click",function(me){return L.onClick(me)})("keydown",function(me){return L.onKeyDown(me)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[p._Bn([{provide:Y.JU,useExisting:(0,p.Gpc)(()=>Re),multi:!0},{provide:Y.Cf,useExisting:(0,p.Gpc)(()=>Re),multi:!0},ge]),p.TTD]}),Re})();function qe(Re,Et){return Object.assign(Object.assign({},Re),Et instanceof Function?Et():Et)}let ht=(()=>{class Re{static forRoot($){return{ngModule:Re,providers:[{provide:Ce,useValue:$},{provide:Oe,useValue:Ae},{provide:pe,useFactory:qe,deps:[Oe,Ce]},ie]}}static forChild(){return{ngModule:Re}}}return Re.\u0275fac=function($){return new($||Re)},Re.\u0275mod=p.oAB({type:Re}),Re.\u0275inj=p.cJS({}),Re})();const Ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Ne.KeyboardEvent||(Ne.KeyboardEvent=function(Re,Et){})},5861:(Pt,ze,N)=>{function p(Y,ve,pe,Ce,Oe,Ae,Ve){try{var le=Y[Ae](Ve),ie=le.value}catch(ge){return void pe(ge)}le.done?ve(ie):Promise.resolve(ie).then(Ce,Oe)}function H(Y){return function(){var ve=this,pe=arguments;return new Promise(function(Ce,Oe){var Ae=Y.apply(ve,pe);function Ve(ie){p(Ae,Ce,Oe,Ve,le,"next",ie)}function le(ie){p(Ae,Ce,Oe,Ve,le,"throw",ie)}Ve(void 0)})}}N.d(ze,{Z:()=>H})}},Pt=>{Pt(Pt.s=2871)}]);