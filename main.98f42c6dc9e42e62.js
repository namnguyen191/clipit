"use strict";(self.webpackChunkclipit=self.webpackChunkclipit||[]).push([[179],{440:(Pt,We,R)=>{R.d(We,{nm:()=>Sr});var p=R(5813);R(5e3),R(5867);var N=R(5861),ne=R(9681),ue=R(4859),Ee=R(2090),Ne=R(1877);const Re=new Map,fe={activated:!1,tokenObservers:[]},X={initialized:!1,enabled:!1};function Oe(Pe){return Re.get(Pe)||fe}function ae(Pe,xe){Re.set(Pe,xe)}function $e(){return X}class Ut{constructor(xe,qe,ot,Tt,Yt){if(this.operation=xe,this.retryPolicy=qe,this.getWaitDuration=ot,this.lowerBound=Tt,this.upperBound=Yt,this.pending=null,this.nextErrorWaitInterval=Tt,Tt>Yt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(xe){var qe=this;return(0,N.Z)(function*(){qe.stop();try{qe.pending=new Ee.BH,yield function St(Pe){return new Promise(xe=>{setTimeout(xe,Pe)})}(qe.getNextRun(xe)),qe.pending.resolve(),yield qe.pending.promise,qe.pending=new Ee.BH,yield qe.operation(),qe.pending.resolve(),yield qe.pending.promise,qe.process(!0).catch(()=>{})}catch(ot){qe.retryPolicy(ot)?qe.process(!1).catch(()=>{}):qe.stop()}})()}getNextRun(xe){if(xe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const qe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),qe}}}const ht=new Ee.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _n(Pe){if(!Oe(Pe).activated)throw ht.create("use-before-activation",{appName:Pe.name})}function er(Pe,xe){return ct.apply(this,arguments)}function ct(){return(ct=(0,N.Z)(function*({url:Pe,body:xe},qe){const ot={"Content-Type":"application/json"},Tt=qe.getImmediate({optional:!0});if(Tt){const Oi=yield Tt.getHeartbeatsHeader();Oi&&(ot["X-Firebase-Client"]=Oi)}const Yt={method:"POST",body:JSON.stringify(xe),headers:ot};let $n,Rr;try{$n=yield fetch(Pe,Yt)}catch(Oi){throw ht.create("fetch-network-error",{originalErrorMessage:Oi.message})}if(200!==$n.status)throw ht.create("fetch-status-error",{httpStatus:$n.status});try{Rr=yield $n.json()}catch(Oi){throw ht.create("fetch-parse-error",{originalErrorMessage:Oi.message})}const Ln=Rr.ttl.match(/^([\d.]+)(s)$/);if(!Ln||!Ln[2]||isNaN(Number(Ln[1])))throw ht.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Rr.ttl}`});const Ri=1e3*Number(Ln[1]),Ii=Date.now();return{token:Rr.attestationToken,expireTimeMillis:Ii+Ri,issuedAtTimeMillis:Ii}})).apply(this,arguments)}function An(Pe,xe){const{projectId:qe,appId:ot,apiKey:Tt}=Pe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${qe}/apps/${ot}:exchangeDebugToken?key=${Tt}`,body:{debug_token:xe}}}const un="firebase-app-check-store";let jt=null;function Br(){return jt||(jt=new Promise((Pe,xe)=>{try{const qe=indexedDB.open("firebase-app-check-database",1);qe.onsuccess=ot=>{Pe(ot.target.result)},qe.onerror=ot=>{var Tt;xe(ht.create("storage-open",{originalErrorMessage:null===(Tt=ot.target.error)||void 0===Tt?void 0:Tt.message}))},qe.onupgradeneeded=ot=>{0===ot.oldVersion&&ot.target.result.createObjectStore(un,{keyPath:"compositeKey"})}}catch(qe){xe(ht.create("storage-open",{originalErrorMessage:qe.message}))}}),jt)}function Rn(){return(Rn=(0,N.Z)(function*(Pe,xe){const ot=(yield Br()).transaction(un,"readwrite"),Yt=ot.objectStore(un).put({compositeKey:Pe,value:xe});return new Promise(($n,Rr)=>{Yt.onsuccess=Ln=>{$n()},ot.onerror=Ln=>{var Ri;Rr(ht.create("storage-set",{originalErrorMessage:null===(Ri=Ln.target.error)||void 0===Ri?void 0:Ri.message}))}})})).apply(this,arguments)}const br=new Ne.Yd("@firebase/app-check");function zn(Pe,xe){return(0,Ee.hl)()?function tr(Pe,xe){return function ei(Pe,xe){return Rn.apply(this,arguments)}(function or(Pe){return`${Pe.options.appId}-${Pe.name}`}(Pe),xe)}(Pe,xe).catch(qe=>{br.warn(`Failed to write token to IndexedDB. Error: ${qe}`)}):Promise.resolve()}function pr(){return $e().enabled}function En(){return kt.apply(this,arguments)}function kt(){return(kt=(0,N.Z)(function*(){const Pe=$e();if(Pe.enabled&&Pe.token)return Pe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Gt={error:"UNKNOWN_ERROR"};function ln(Pe){return Ee.US.encodeString(JSON.stringify(Pe),!1)}function In(Pe){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,N.Z)(function*(Pe,xe=!1){const qe=Pe.app;_n(qe);const ot=Oe(qe);let Yt,Tt=ot.token;if(!Tt){const Ln=yield ot.cachedTokenPromise;Ln&&xt(Ln)&&(Tt=Ln)}if(!xe&&Tt&&xt(Tt))return{token:Tt.token};let Rr,$n=!1;if(pr()){ot.exchangeTokenPromise||(ot.exchangeTokenPromise=er(An(qe,yield En()),Pe.heartbeatServiceProvider).then(Ri=>(ot.exchangeTokenPromise=void 0,Ri)),$n=!0);const Ln=yield ot.exchangeTokenPromise;return yield zn(qe,Ln),ae(qe,Object.assign(Object.assign({},ot),{token:Ln})),{token:Ln.token}}try{ot.exchangeTokenPromise||(ot.exchangeTokenPromise=ot.provider.getToken().then(Ln=>(ot.exchangeTokenPromise=void 0,Ln)),$n=!0),Tt=yield ot.exchangeTokenPromise}catch(Ln){"appCheck/throttled"===Ln.code?br.warn(Ln.message):br.error(Ln),Yt=Ln}return Tt?(Rr={token:Tt.token},ae(qe,Object.assign(Object.assign({},ot),{token:Tt})),yield zn(qe,Tt)):Rr=Ae(Yt),$n&&He(qe,Rr),Rr})).apply(this,arguments)}function te(Pe,xe){const qe=Oe(Pe),ot=qe.tokenObservers.filter(Tt=>Tt.next!==xe);0===ot.length&&qe.tokenRefresher&&qe.tokenRefresher.isRunning()&&qe.tokenRefresher.stop(),ae(Pe,Object.assign(Object.assign({},qe),{tokenObservers:ot}))}function Ce(Pe){const{app:xe}=Pe,qe=Oe(xe);let ot=qe.tokenRefresher;ot||(ot=function Qe(Pe){const{app:xe}=Pe;return new Ut((0,N.Z)(function*(){let ot;if(ot=Oe(xe).token?yield In(Pe,!0):yield In(Pe),ot.error)throw ot.error}),()=>!0,()=>{const qe=Oe(xe);if(qe.token){let ot=qe.token.issuedAtTimeMillis+.5*(qe.token.expireTimeMillis-qe.token.issuedAtTimeMillis)+3e5;return ot=Math.min(ot,qe.token.expireTimeMillis-3e5),Math.max(0,ot-Date.now())}return 0},3e4,96e4)}(Pe),ae(xe,Object.assign(Object.assign({},qe),{tokenRefresher:ot}))),!ot.isRunning()&&qe.isTokenAutoRefreshEnabled&&ot.start()}function He(Pe,xe){const qe=Oe(Pe).tokenObservers;for(const ot of qe)try{"EXTERNAL"===ot.type&&null!=xe.error?ot.error(xe.error):ot.next(xe)}catch(Tt){}}function xt(Pe){return Pe.expireTimeMillis-Date.now()>0}function Ae(Pe){return{token:ln(Gt),error:Pe}}class ge{constructor(xe,qe){this.app=xe,this.heartbeatServiceProvider=qe}_delete(){const{tokenObservers:xe}=Oe(this.app);for(const qe of xe)te(this.app,qe.next);return Promise.resolve()}}const Ar="app-check-internal";!function Fn(){(0,ne._registerComponent)(new ue.wA("app-check",Pe=>function oe(Pe,xe){return new ge(Pe,xe)}(Pe.getProvider("app").getImmediate(),Pe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Pe,xe,qe)=>{Pe.getProvider(Ar).initialize()})),(0,ne._registerComponent)(new ue.wA(Ar,Pe=>function Me(Pe){return{getToken:xe=>In(Pe,xe),addTokenListener:xe=>function he(Pe,xe,qe,ot){const{app:Tt}=Pe,Yt=Oe(Tt),$n={next:qe,error:ot,type:xe};if(ae(Tt,Object.assign(Object.assign({},Yt),{tokenObservers:[...Yt.tokenObservers,$n]})),Yt.token&&xt(Yt.token)){const Rr=Yt.token;Promise.resolve().then(()=>{qe({token:Rr.token}),Ce(Pe)}).catch(()=>{})}Yt.cachedTokenPromise.then(()=>Ce(Pe))}(Pe,"INTERNAL",xe),removeTokenListener:xe=>te(Pe.app,xe)}}(Pe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)("@firebase/app-check","0.5.6")}();class Sr{constructor(){return(0,p.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Pt,We,R)=>{R.d(We,{zQ:()=>Be,ww:()=>_t,rT:()=>X,f7:()=>ae,L6:()=>Re,_Q:()=>fe,lh:()=>Oe,Qv:()=>Ne,nw:()=>$e});var p=R(5e3),H=R(7579),Z=R(9646),_e=R(9751),pe=R(8996),we=R(6451),be=R(6063);class ye extends H.x{constructor(Ot=1/0,gt=1/0,bt=be.l){super(),this._bufferSize=Ot,this._windowTime=gt,this._timestampProvider=bt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=gt===1/0,this._bufferSize=Math.max(1,Ot),this._windowTime=Math.max(1,gt)}next(Ot){const{isStopped:gt,_buffer:bt,_infiniteTimeWindow:Ut,_timestampProvider:St,_windowTime:Mt}=this;gt||(bt.push(Ot),!Ut&&bt.push(St.now()+Mt)),this._trimBuffer(),super.next(Ot)}_subscribe(Ot){this._throwIfClosed(),this._trimBuffer();const gt=this._innerSubscribe(Ot),{_infiniteTimeWindow:bt,_buffer:Ut}=this,St=Ut.slice();for(let Mt=0;Mt<St.length&&!Ot.closed;Mt+=bt?1:2)Ot.next(St[Mt]);return this._checkFinalizedStatuses(Ot),gt}_trimBuffer(){const{_bufferSize:Ot,_timestampProvider:gt,_buffer:bt,_infiniteTimeWindow:Ut}=this,St=(Ut?1:2)*Ot;if(Ot<1/0&&St<bt.length&&bt.splice(0,bt.length-St),!Ut){const Mt=gt.now();let ht=0;for(let mn=1;mn<bt.length&&bt[mn]<=Mt;mn+=2)ht=mn;ht&&bt.splice(0,ht+1)}}}var Fe=R(3099);function le(vt,Ot,gt){let bt,Ut=!1;return vt&&"object"==typeof vt?({bufferSize:bt=1/0,windowTime:Ot=1/0,refCount:Ut=!1,scheduler:gt}=vt):bt=null!=vt?vt:1/0,(0,Fe.B)({connector:()=>new ye(bt,Ot,gt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ut})}var re=R(3900),me=R(576);function je(vt,Ot){return(0,me.m)(Ot)?(0,re.w)(()=>vt,Ot):(0,re.w)(()=>vt)}var Ge=R(5363),Ze=R(4004),mt=R(590),Le=R(9468),ke=R(9300),at=R(5813),$=R(2011),N=R(9808),ne=R(440),ue=R(127);const Ne=new p.OlP("angularfire2.auth.use-emulator"),Re=new p.OlP("angularfire2.auth.settings"),fe=new p.OlP("angularfire2.auth.tenant-id"),X=new p.OlP("angularfire2.auth.langugage-code"),Oe=new p.OlP("angularfire2.auth.use-device-language"),ae=new p.OlP("angularfire.auth.persistence"),$e=(vt,Ot,gt,bt,Ut,St,Mt,ht)=>(0,$.cc)(`${vt.name}.auth`,"AngularFireAuth",vt.name,()=>{const mn=Ot.runOutsideAngular(()=>vt.auth());if(gt&&mn.useEmulator(...gt),bt&&(mn.tenantId=bt),mn.languageCode=Ut,St&&mn.useDeviceLanguage(),Mt)for(const[_n,pn]of Object.entries(Mt))mn.settings[_n]=pn;return ht&&mn.setPersistence(ht),mn},[gt,bt,Ut,St,Mt,ht]);let Be=(()=>{class vt{constructor(gt,bt,Ut,St,Mt,ht,mn,_n,pn,qn,Wn,er){const ct=new H.x,zt=(0,Z.of)(void 0).pipe((0,Ge.Q)(Mt.outsideAngular),(0,re.w)(()=>St.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,820)))),(0,Ze.U)(()=>(0,$.on)(gt,St,bt)),(0,Ze.U)(qt=>$e(qt,St,ht,_n,pn,qn,mn,Wn)),le({bufferSize:1,refCount:!1}));if((0,N.PM)(Ut))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Z.of)(null);else{zt.pipe((0,mt.P)()).subscribe();const An=zt.pipe((0,re.w)(un=>un.getRedirectResult().then(wn=>wn,()=>null)),at.iC,le({bufferSize:1,refCount:!1})),kn=zt.pipe((0,re.w)(un=>new _e.y(wn=>({unsubscribe:St.runOutsideAngular(()=>un.onAuthStateChanged(jt=>wn.next(jt),jt=>wn.error(jt),()=>wn.complete()))})))),Bt=zt.pipe((0,re.w)(un=>new _e.y(wn=>({unsubscribe:St.runOutsideAngular(()=>un.onIdTokenChanged(jt=>wn.next(jt),jt=>wn.error(jt),()=>wn.complete()))}))));this.authState=An.pipe(je(kn),(0,Le.R)(Mt.outsideAngular),(0,Ge.Q)(Mt.insideAngular)),this.user=An.pipe(je(Bt),(0,Le.R)(Mt.outsideAngular),(0,Ge.Q)(Mt.insideAngular)),this.idToken=this.user.pipe((0,re.w)(un=>un?(0,pe.D)(un.getIdToken()):(0,Z.of)(null))),this.idTokenResult=this.user.pipe((0,re.w)(un=>un?(0,pe.D)(un.getIdTokenResult()):(0,Z.of)(null))),this.credential=(0,we.T)(An,ct,this.authState.pipe((0,ke.h)(un=>!un))).pipe((0,Ze.U)(un=>(null==un?void 0:un.user)?un:null),(0,Le.R)(Mt.outsideAngular),(0,Ge.Q)(Mt.insideAngular))}return(0,$.pX)(this,zt,St,{spy:{apply:(qt,An,kn)=>{(qt.startsWith("signIn")||qt.startsWith("createUser"))&&kn.then(Bt=>ct.next(Bt))}}})}}return vt.\u0275fac=function(gt){return new(gt||vt)(p.LFG($.Dh),p.LFG($.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(at.HU),p.LFG(Ne,8),p.LFG(Re,8),p.LFG(fe,8),p.LFG(X,8),p.LFG(Oe,8),p.LFG(ae,8),p.LFG(ne.nm,8))},vt.\u0275prov=p.Yz7({token:vt,factory:vt.\u0275fac,providedIn:"any"}),vt})(),_t=(()=>{class vt{constructor(){ue.Z.registerVersion("angularfire",at.q4.full,"auth-compat")}}return vt.\u0275fac=function(gt){return new(gt||vt)},vt.\u0275mod=p.oAB({type:vt}),vt.\u0275inj=p.cJS({providers:[Be]}),vt})()},7566:(Pt,We,R)=>{R.d(We,{ST:()=>Zc,yb:()=>q_});var p=R(5e3),H=R(4986),Z=R(9751),_e=R(8996),pe=R(9646),we=R(5813),be=R(4482),ye=R(5403);function Fe(){return(0,be.e)((i,e)=>{let t,o=!1;i.subscribe((0,ye.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var le=R(4671);function me(i,e){return i===e}var X,je=R(8675),Ge=R(4004),Ze=R(5026),mt=R(9300),Le=R(2011),ke=R(9808),$=(R(820),R(3942)),N=R(5861),ne=R(9681),ue=R(4859),Ee=R(1877),Ne=R(2090),Re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fe={},Oe=Oe||{},ae=Re||self;function $e(){}function Be(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function _t(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ot="closure_uid_"+(1e9*Math.random()>>>0),gt=0;function bt(i,e,t){return i.call.apply(i.bind,arguments)}function Ut(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function St(i,e,t){return(St=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bt:Ut).apply(null,arguments)}function Mt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function ht(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var m=Array(arguments.length-2),D=2;D<arguments.length;D++)m[D-2]=arguments[D];return e.prototype[u].apply(o,m)}}function mn(){this.s=this.s,this.o=this.o}var pn={};mn.prototype.s=!1,mn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function vt(i){return Object.prototype.hasOwnProperty.call(i,Ot)&&i[Ot]||(i[Ot]=++gt)}(this);delete pn[i]}},mn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Wn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function ct(i){return Array.prototype.concat.apply([],arguments)}function zt(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function qt(i){return/^[\s\xa0]*$/.test(i)}var un,An=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function kn(i,e){return-1!=i.indexOf(e)}function Bt(i,e){return i<e?-1:i>e?1:0}e:{var wn=ae.navigator;if(wn){var jt=wn.userAgent;if(jt){un=jt;break e}}un=""}function Br(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function jr(i){const e={};for(const t in i)e[t]=i[t];return e}var tr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cr(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<tr.length;d++)t=tr[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function yi(i){return yi[" "](i),i}yi[" "]=$e;var zn,i,Rn=kn(un,"Opera"),Vt=kn(un,"Trident")||kn(un,"MSIE"),Kt=kn(un,"Edge"),or=Kt||Vt,br=kn(un,"Gecko")&&!(kn(un.toLowerCase(),"webkit")&&!kn(un,"Edge"))&&!(kn(un,"Trident")||kn(un,"MSIE"))&&!kn(un,"Edge"),On=kn(un.toLowerCase(),"webkit")&&!kn(un,"Edge");function nr(){var i=ae.document;return i?i.documentMode:void 0}e:{var fr="",Qt=(i=un,br?/rv:([^\);]+)(\)|;)/.exec(i):Kt?/Edge\/([\d\.]+)/.exec(i):Vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):On?/WebKit\/(\S+)/.exec(i):Rn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Qt&&(fr=Qt?Qt[1]:""),Vt){var pr=nr();if(null!=pr&&pr>parseFloat(fr)){zn=String(pr);break e}}zn=fr}var En={};var ln=ae.document&&Vt&&(nr()||parseInt(zn,10))||void 0,In=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ae.addEventListener("test",$e,e),ae.removeEventListener("test",$e,e)}catch(t){}return i}();function Jt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function he(i,e){if(Jt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(br){e:{try{yi(e.nodeName);var u=!0;break e}catch(d){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:te[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&he.Z.h.call(this)}}Jt.prototype.h=function(){this.defaultPrevented=!0},ht(he,Jt);var te={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function He(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++Qe,this.ca=this.fa=!1}function xt(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Ae(i){this.src=i,this.g={},this.h=0}function ge(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=qn(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(xt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function oe(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}Ae.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var m=oe(i,e,o,u);return-1<m?(e=i[m],t||(e.fa=!1)):((e=new He(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var Me="closure_lm_"+(1e6*Math.random()|0),nt={};function At(i,e,t,o,u){if(o&&o.once)return Nn(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)At(i,e[d],t,o,u);return null}return t=It(t),i&&i[Ce]?i.N(e,t,_t(o)?!!o.capture:!!o,u):en(i,e,t,!1,o,u)}function en(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var m=_t(u)?!!u.capture:!!u,D=Yr(i);if(D||(i[Me]=D=new Ae(i)),(t=D.add(e,t,o,m,d)).proxy)return t;if(o=function Dn(){var e=dr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)In||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Wr(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Nn(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Nn(i,e[d],t,o,u);return null}return t=It(t),i&&i[Ce]?i.O(e,t,_t(o)?!!o.capture:!!o,u):en(i,e,t,!0,o,u)}function $r(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)$r(i,e[d],t,o,u);else o=_t(o)?!!o.capture:!!o,t=It(t),i&&i[Ce]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=oe(d=i.g[e],t,o,u))&&(xt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=Yr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=oe(e,t,o,u)),(t=-1<i?e[i]:null)&&Gr(t))}function Gr(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Ce])ge(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Wr(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Yr(e))?(ge(t,i),0==t.h&&(t.src=null,e[Me]=null)):xt(i)}}}function Wr(i){return i in nt?nt[i]:nt[i]="on"+i}function dr(i,e){if(i.ca)i=!0;else{e=new he(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Gr(i),i=t.call(o,e)}return i}function Yr(i){return(i=i[Me])instanceof Ae?i:null}var zr="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(i){return"function"==typeof i?i:(i[zr]||(i[zr]=function(e){return i.handleEvent(e)}),i[zr])}function rn(){mn.call(this),this.i=new Ae(this),this.P=this,this.I=null}function yn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Jt(e,i);else if(e instanceof Jt)e.target=e.target||i;else{var u=e;Cr(e=new Jt(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];u=vr(m,o,!0,e)&&u}if(u=vr(m=e.g=i,o,!0,e)&&u,u=vr(m,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=vr(m=e.g=t[d],o,!1,e)&&u}function vr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.ca&&m.capture==t){var D=m.listener,B=m.ia||m.src;m.fa&&ge(i.i,m),u=!1!==D.call(B,o)&&u}}return u&&!o.defaultPrevented}ht(rn,mn),rn.prototype[Ce]=!0,rn.prototype.removeEventListener=function(i,e,t,o){$r(this,i,e,t,o)},rn.prototype.M=function(){if(rn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)xt(t[o]);delete i.g[e],i.h--}}this.I=null},rn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},rn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var di=ae.JSON.stringify;function Tr(){var i=Ar;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ni,jn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ir,i=>i.reset());class ir{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function xr(i){ae.setTimeout(()=>{throw i},0)}function gn(i,e){ni||function Fi(){var i=ae.Promise.resolve(void 0);ni=function(){i.then(Fn)}}(),ns||(ni(),ns=!0),Ar.add(i,e)}var ns=!1,Ar=new class ti{constructor(){this.h=this.g=null}add(e,t){const o=jn.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Fn(){for(var i;i=Tr();){try{i.h.call(i.g)}catch(t){xr(t)}var e=jn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}ns=!1}function Kr(i,e){rn.call(this),this.h=i||1,this.g=e||ae,this.j=St(this.kb,this),this.l=Date.now()}function Qr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Sr(i,e,t){if("function"==typeof i)t&&(i=St(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=St(i.handleEvent,i)}return 2147483647<Number(e)?-1:ae.setTimeout(i,e||0)}function Zn(i){i.g=Sr(()=>{i.g=null,i.i&&(i.i=!1,Zn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}ht(Kr,rn),(X=Kr.prototype).da=!1,X.S=null,X.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),yn(this,"tick"),this.da&&(Qr(this),this.start()))}},X.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},X.M=function(){Kr.Z.M.call(this),Qr(this),delete this.g};class os extends mn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Zn(this)}M(){super.M(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(i){mn.call(this),this.h=i,this.g={}}ht(Li,mn);var ar=[];function _i(i,e,t,o){Array.isArray(t)||(t&&(ar[0]=t.toString()),t=ar);for(var u=0;u<t.length;u++){var d=At(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function zi(i){Br(i.g,function(e,t){this.g.hasOwnProperty(t)&&Gr(e)},i),i.g={}}function hi(){this.g=!0}function qr(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Cs(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<u.length;m++)u[m]=""}}}return di(t)}catch(D){return e}}(i,t)+(o?" "+o:"")})}Li.prototype.M=function(){Li.Z.M.call(this),zi(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hi.prototype.Aa=function(){this.g=!1},hi.prototype.info=function(){};var rr={},Ss=null;function Ms(){return Ss=Ss||new rn}function Pe(i){Jt.call(this,rr.Ma,i)}function xe(i){const e=Ms();yn(e,new Pe(e,i))}function qe(i,e){Jt.call(this,rr.STAT_EVENT,i),this.stat=e}function ot(i){const e=Ms();yn(e,new qe(e,i))}function Tt(i,e){Jt.call(this,rr.Na,i),this.size=e}function Yt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){i()},e)}rr.Ma="serverreachability",ht(Pe,Jt),rr.STAT_EVENT="statevent",ht(qe,Jt),rr.Na="timingevent",ht(Tt,Jt);var $n={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Rr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ln(){}function Ii(){}Ln.prototype.h=null;var xs,Oi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ys(){Jt.call(this,"d")}function Vi(){Jt.call(this,"c")}function ri(){}function Di(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Li(this),this.P=as,this.W=new Kr(i=or?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _r}function _r(){this.i=null,this.g="",this.h=!1}ht(ys,Jt),ht(Vi,Jt),ht(ri,Ln),ri.prototype.g=function(){return new XMLHttpRequest},ri.prototype.i=function(){return{}},xs=new ri;var as=45e3,us={},ls={};function to(i,e,t){i.K=1,i.v=Nt(G(e)),i.s=t,i.U=!0,Bs(i,null)}function Bs(i,e){i.F=Date.now(),qi(i),i.A=G(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),L(t.h,"t",o),i.C=0,t=i.l.H,i.h=new _r,i.g=Ga(i.l,t?e:null,!i.s),0<i.O&&(i.L=new os(St(i.Ia,i,i.g),i.O)),_i(i.V,i.g,"readystatechange",i.gb),e=i.H?jr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),xe(1),function Ds(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var m="",D=d.split("&"),B=0;B<D.length;B++){var z=D[B].split("=");if(1<z.length){var ce=z[0];z=z[1];var Se=ce.split("_");m=2<=Se.length&&"type"==Se[1]?m+(ce+"=")+z+"&":m+(ce+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Ci(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Ki(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Xr(i,t),u==ls){4==e&&(i.o=4,ot(14),o=!1),qr(i.j,i.m,null,"[Incomplete Response]");break}if(u==us){i.o=4,ot(15),qr(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}qr(i.j,i.m,u,null),Rs(i,u)}Ci(i)&&u!=ls&&u!=us&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,ot(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),na(e),e.L=!0,ot(11))):(qr(i.j,i.m,t,"[Invalid Chunked Response]"),cs(i),Or(i))}function Xr(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?ls:(t=Number(e.substring(t,o)),isNaN(t)?us:(o+=1)+t>e.length?ls:(e=e.substr(o,t),i.C=o+t,e))}function qi(i){i.Y=Date.now()+i.P,bs(i,i.P)}function bs(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Yt(St(i.eb,i),e)}function Er(i){i.B&&(ae.clearTimeout(i.B),i.B=null)}function Or(i){0==i.l.G||i.I||io(i.l,i)}function cs(i){Er(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Qr(i.W),zi(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Rs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Ht(t.i,i)))if(t.I=i.N,!i.J&&Ht(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(z){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=Yt(St(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;vs(t),So(t)}ai(t),ot(18)}if(1>=sn(t.i)&&t.ka){try{t.ka()}catch(z){}t.ka=void 0}}else Ts(t,11)}else if((i.J||t.g==i)&&vs(t),!qt(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let z=u[e];if(t.U=z[0],z=z[1],2==t.G)if("c"==z[0]){t.J=z[1],t.la=z[2];const ce=z[3];null!=ce&&(t.ma=ce,t.h.info("VER="+t.ma));const Se=z[4];null!=Se&&(t.za=Se,t.h.info("SVER="+t.za));const et=z[5];null!=et&&"number"==typeof et&&0<et&&(t.K=o=1.5*et,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const wt=i.g;if(wt){const Dt=wt.g?wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dt){var d=o.i;!d.g&&(kn(Dt,"spdy")||kn(Dt,"quic")||kn(Dt,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(vn(d,d.h),d.h=null))}if(o.D){const an=wt.g?wt.g.getResponseHeader("X-HTTP-Session-Id"):null;an&&(o.sa=an,tt(o.F,o.D,an))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var m=i;if((o=t).oa=Hs(o,o.H?o.la:null,o.W),m.J){Yn(o.i,m);var D=m,B=o.K;B&&D.setTimeout(B),D.B&&(Er(D),qi(D)),o.g=m}else Ns(o);0<t.l.length&&Ti(t)}else"stop"!=z[0]&&"close"!=z[0]||Ts(t,7);else 3==t.G&&("stop"==z[0]||"close"==z[0]?"stop"==z[0]?Ts(t,7):oi(t):"noop"!=z[0]&&t.j&&t.j.wa(z),t.A=0)}xe(4)}catch(z){}}function ii(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Be(i)||"string"==typeof i)Wn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Be(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function Os(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Be(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function rs(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof rs)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function pi(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];gi(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)gi(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function gi(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(X=Di.prototype).setTimeout=function(i){this.P=i},X.gb=function(i){i=i.target;const e=this.L;e&&3==ks(i)?e.l():this.Ia(i)},X.Ia=function(i){try{if(i==this.g)e:{const ce=ks(this.g);var e=this.g.Da();const Se=this.g.ba();if(!(3>ce)&&(3!=ce||or||this.g&&(this.h.h||this.g.ga()||ro(this.g)))){this.I||4!=ce||7==e||xe(8==e||0>=Se?3:2),Er(this);var t=this.g.ba();this.N=t;t:if(Ci(this)){var o=ro(this.g);i="";var u=o.length,d=4==ks(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){cs(this),Or(this);var m="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.ga();if(this.i=200==t,function fi(i,e,t,o,u,d,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.X,ce,t),this.i){if(this.$&&!this.J){t:{if(this.g){var D,B=this.g;if((D=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qt(D)){var z=D;break t}}z=null}if(!(t=z)){this.i=!1,this.o=3,ot(12),cs(this),Or(this);break e}qr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rs(this,t)}this.U?(Ki(this,ce,m),or&&this.i&&3==ce&&(_i(this.V,this.W,"tick",this.fb),this.W.start())):(qr(this.j,this.m,m,null),Rs(this,m)),4==ce&&cs(this),this.i&&!this.I&&(4==ce?io(this.l,this):(this.i=!1,qi(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,ot(12)):(this.o=0,ot(13)),cs(this),Or(this)}}}catch(ce){}},X.fb=function(){if(this.g){var i=ks(this.g),e=this.g.ga();this.C<e.length&&(Er(this),Ki(this,i,e),this.i&&4!=i&&qi(this))}},X.cancel=function(){this.I=!0,cs(this)},X.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function ms(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xe(3),ot(17)),cs(this),this.o=2,Or(this)):bs(this,this.Y-i)},(X=rs.prototype).R=function(){pi(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},X.T=function(){return pi(this),this.g.concat()},X.get=function(i,e){return gi(this.h,i)?this.h[i]:e},X.set=function(i,e){gi(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},X.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var Zi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function x(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof x){this.g=void 0!==e?e:i.g,M(this,i.j),this.s=i.s,Y(this,i.i),Ie(this,i.m),this.l=i.l,e=i.h;var t=new q;t.i=e.i,e.g&&(t.g=new rs(e.g),t.h=e.h),Je(this,t),this.o=i.o}else i&&(t=String(i).match(Zi))?(this.g=!!e,M(this,t[1]||"",!0),this.s=Cn(t[2]||""),Y(this,t[3]||"",!0),Ie(this,t[4]),this.l=Cn(t[5]||"",!0),Je(this,t[6]||"",!0),this.o=Cn(t[7]||"")):(this.g=!!e,this.h=new q(null,this.g))}function G(i){return new x(i)}function M(i,e,t){i.j=t?Cn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Y(i,e,t){i.i=t?Cn(e,!0):e}function Ie(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Je(i,e,t){e instanceof q?(i.h=e,function ee(i,e){e&&!i.j&&(rt(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(tn(this,o),L(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Mn(e,A)),i.h=new q(e,i.g))}function tt(i,e,t){i.h.set(e,t)}function Nt(i){return tt(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Cn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Mn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Pr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Pr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}x.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Mn(e,sr,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Mn(e,sr,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Mn(t,"/"==t.charAt(0)?k:gr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Mn(t,C)),i.join("")};var sr=/[#\/\?@]/g,gr=/[#\?:]/g,k=/[#\?]/g,A=/[#\?@]/g,C=/#/g;function q(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function rt(i){i.g||(i.g=new rs,i.h=0,i.i&&function ur(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function tn(i,e){rt(i),e=O(i,e),gi(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,gi((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&pi(i)))}function mr(i,e){return rt(i),e=O(i,e),gi(i.g.h,e)}function L(i,e,t){tn(i,e),0<t.length&&(i.i=null,i.g.set(O(i,e),zt(t)),i.h+=t.length)}function O(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ve(i){this.l=i||Xe,i=ae.PerformanceNavigationTiming?0<(i=ae.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ae.g&&ae.g.Ea&&ae.g.Ea()&&ae.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(X=q.prototype).add=function(i,e){rt(this),this.i=null,i=O(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},X.forEach=function(i,e){rt(this),this.g.forEach(function(t,o){Wn(t,function(u){i.call(e,u,o,this)},this)},this)},X.T=function(){rt(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},X.R=function(i){rt(this);var e=[];if("string"==typeof i)mr(this,i)&&(e=ct(e,this.g.get(O(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=ct(e,i[t])}return e},X.set=function(i,e){return rt(this),this.i=null,mr(this,i=O(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},X.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},X.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var m=u;""!==o[d]&&(m+="="+encodeURIComponent(String(o[d]))),i.push(m)}}return this.i=i.join("&")};var Xe=10;function ft(i){return!!i.h||!!i.g&&i.g.size>=i.j}function sn(i){return i.h?1:i.g?i.g.size:0}function Ht(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function vn(i,e){i.g?i.g.add(e):i.h=e}function Yn(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Fr(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return zt(i.i)}function Mr(){}function si(){this.g=new Mr}function Hr(i,e,t){const o=t||"";try{ii(i,function(u,d){let m=u;_t(u)&&(m=di(u)),e.push(o+d+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Kn(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(d){}}function Lr(i){this.l=i.$b||null,this.j=i.ib||!1}function Ui(i,e){rn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=kr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ve.prototype.cancel=function(){if(this.i=Fr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Mr.prototype.stringify=function(i){return ae.JSON.stringify(i,void 0)},Mr.prototype.parse=function(i){return ae.JSON.parse(i,void 0)},ht(Lr,Ln),Lr.prototype.g=function(){return new Ui(this.l,this.j)},Lr.prototype.i=function(i){return function(){return i}}({}),ht(Ui,rn);var kr=0;function yr(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function _s(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Yi(i)}function Yi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(X=Ui.prototype).open=function(i,e){if(this.readyState!=kr)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Yi(this)},X.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ae).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},X.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_s(this)),this.readyState=kr},X.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ae.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yr(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},X.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?_s(this):Yi(this),3==this.readyState&&yr(this)}},X.Ua=function(i){this.g&&(this.response=this.responseText=i,_s(this))},X.Ta=function(i){this.g&&(this.response=i,_s(this))},X.ha=function(){this.g&&_s(this)},X.setRequestHeader=function(i,e){this.v.append(i,e)},X.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},X.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var no=ae.JSON.parse;function wr(i){rn.call(this),this.headers=new rs,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ps,this.K=this.L=!1}ht(wr,rn);var Ps="",Xo=/^https?$/i,Ea=["POST","PUT"];function $a(i){return"content-type"==i.toLowerCase()}function Bo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,fo(i),js(i)}function fo(i){i.D||(i.D=!0,yn(i,"complete"),yn(i,"error"))}function Jo(i){if(i.h&&void 0!==Oe&&(!i.C[1]||4!=ks(i)||2!=i.ba()))if(i.v&&4==ks(i))Sr(i.Fa,0,i);else if(yn(i,"readystatechange"),4==ks(i)){i.h=!1;try{const D=i.ba();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(Zi)[1]||null;if(!u&&ae.self&&ae.self.location){var d=ae.self.location.protocol;u=d.substr(0,d.length-1)}o=!Xo.test(u?u.toLowerCase():"")}t=o}if(t)yn(i,"complete"),yn(i,"success");else{i.m=6;try{var m=2<ks(i)?i.g.statusText:""}catch(B){m=""}i.j=m+" ["+i.ba()+"]",fo(i)}}finally{js(i)}}}function js(i,e){if(i.g){wa(i);const t=i.g,o=i.C[0]?$e:null;i.g=null,i.C=null,e||yn(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function wa(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ae.clearTimeout(i.A),i.A=null)}function ks(i){return i.g?i.g.readyState:0}function ro(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Ps:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ea(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function mu(i){let e="";return Br(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):tt(i,e,t))}function bi(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Ao(i){this.za=0,this.l=[],this.h=new hi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bi("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bi("baseRetryDelayMs",5e3,i),this.$a=bi("retryDelaySeedMs",1e4,i),this.Ya=bi("forwardChannelMaxRetries",2,i),this.ra=bi("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new ve(i&&i.concurrentRequestLimit),this.Ca=new si,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function oi(i){if(Jl(i),3==i.G){var e=i.V++,t=G(i.F);tt(t,"SID",i.J),tt(t,"RID",e),tt(t,"TYPE","terminate"),Qi(i,t),(e=new Di(i,i.h,e,void 0)).K=2,e.v=Nt(G(t)),t=!1,ae.navigator&&ae.navigator.sendBeacon&&(t=ae.navigator.sendBeacon(e.v.toString(),"")),!t&&ae.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ga(e.l,null),e.g.ea(e.v)),e.F=Date.now(),qi(e)}po(i)}function So(i){i.g&&(na(i),i.g.cancel(),i.g=null)}function Jl(i){So(i),i.u&&(ae.clearTimeout(i.u),i.u=null),vs(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ae.clearTimeout(i.m),i.m=null)}function yu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Ti(i)}function Ti(i){ft(i.i)||i.m||(i.m=!0,gn(i.Ha,i),i.C=0)}function ta(i,e){var t;t=e?e.m:i.V++;const o=G(i.F);tt(o,"SID",i.J),tt(o,"RID",t),tt(o,"AID",i.U),Qi(i,o),i.o&&i.s&&ea(o,i.o,i.s),t=new Di(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=$s(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),vn(i.i,t),to(t,o,e)}function Qi(i,e){i.j&&ii({},function(t,o){tt(e,o,t)})}function $s(i,e,t){t=Math.min(i.l.length,t);var o=i.j?St(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=u[0].h,m.push("ofs="+d)):d=0:m.push("ofs="+d);let D=!0;for(let B=0;B<t;B++){let z=u[B].h;const ce=u[B].g;if(z-=d,0>z)d=Math.max(0,u[B].h-100),D=!1;else try{Hr(ce,m,"req"+z+"_")}catch(Se){o&&o(ce)}}if(D){o=m.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Ns(i){i.g||i.u||(i.Y=1,gn(i.Ga,i),i.A=0)}function ai(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Yt(St(i.Ga,i),ra(i,i.A)),i.A++,0))}function na(i){null!=i.B&&(ae.clearTimeout(i.B),i.B=null)}function Ha(i){i.g=new Di(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=G(i.oa);tt(e,"RID","rpc"),tt(e,"SID",i.J),tt(e,"CI",i.N?"0":"1"),tt(e,"AID",i.U),Qi(i,e),tt(e,"TYPE","xmlhttp"),i.o&&i.s&&ea(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Nt(G(e)),t.s=null,t.U=!0,Bs(t,i)}function vs(i){null!=i.v&&(ae.clearTimeout(i.v),i.v=null)}function io(i,e){var t=null;if(i.g==e){vs(i),na(i),i.g=null;var o=2}else{if(!Ht(i.i,e))return;t=e.D,Yn(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;yn(o=Ms(),new Tt(o,t,e,u)),Ti(i)}else Ns(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function ec(i,e){return!(sn(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Yt(St(i.Ha,i,e),ra(i,i.C)),i.C++,0)))}(i,e)||2==o&&ai(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:Ts(i,5);break;case 4:Ts(i,10);break;case 3:Ts(i,6);break;default:Ts(i,2)}}function ra(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Ts(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=St(i.jb,i);t||(t=new x("//www.google.com/images/cleardot.gif"),ae.location&&"http"==ae.location.protocol||M(t,"https"),Nt(t)),function mi(i,e){const t=new hi;if(ae.Image){const o=new Image;o.onload=Mt(Kn,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Mt(Kn,t,o,"TestLoadImage: error",!1,e),o.onabort=Mt(Kn,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Mt(Kn,t,o,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else ot(2);i.G=0,i.j&&i.j.va(e),po(i),Jl(i)}function po(i){i.G=0,i.I=-1,i.j&&((0!=Fr(i.i).length||0!=i.l.length)&&(i.i.i.length=0,zt(i.l),i.l.length=0),i.j.ua())}function Hs(i,e,t){let o=function Qn(i){return i instanceof x?G(i):new x(i,void 0)}(t);if(""!=o.i)e&&Y(o,e+"."+o.i),Ie(o,o.m);else{const u=ae.location;o=function Hn(i,e,t,o){var u=new x(null,void 0);return i&&M(u,i),e&&Y(u,e),t&&Ie(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&Br(i.aa,function(u,d){tt(o,d,u)}),t=i.sa,(e=i.D)&&t&&tt(o,e,t),tt(o,"VER",i.ma),Qi(i,o),o}function Ga(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wr(t&&i.Ba&&!i.qa?new Lr({ib:!0}):i.qa)).L=i.H,e}function _u(){}function vu(){if(Vt&&!(10<=Number(ln)))throw Error("Environmental error: no available transport.")}function Nr(i,e){rn.call(this),this.g=new Ao(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!qt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new go(this)}function Ia(i){ys.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Gs(){Vi.call(this),this.status=1}function go(i){this.g=i}(X=wr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xs.g(),this.C=function Ri(i){return i.h||(i.h=i.i())}(this.u?this.u:xs),this.g.onreadystatechange=St(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void Bo(this,d)}i=t||"";const u=new rs(this.headers);o&&ii(o,function(d,m){u.set(m,d)}),o=function er(i){e:{var e=$a;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=ae.FormData&&i instanceof ae.FormData,!(0<=qn(Ea,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,m){this.g.setRequestHeader(m,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wa(this),0<this.B&&((this.K=function ja(i){return Vt&&function kt(){return function ei(i){var e=En;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=An(String(zn)).split("."),t=An("9").split("."),o=Math.max(e.length,t.length);for(let m=0;0==i&&m<o;m++){var u=e[m]||"",d=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=Bt(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||Bt(0==u[2].length,0==d[2].length)||Bt(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.pa,this)):this.A=Sr(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){Bo(this,d)}},X.pa=function(){void 0!==Oe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yn(this,"timeout"),this.abort(8))},X.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,yn(this,"complete"),yn(this,"abort"),js(this))},X.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),js(this,!0)),wr.Z.M.call(this)},X.Fa=function(){this.s||(this.F||this.v||this.l?Jo(this):this.cb())},X.cb=function(){Jo(this)},X.ba=function(){try{return 2<ks(this)?this.g.status:-1}catch(i){return-1}},X.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},X.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),no(e)}},X.Da=function(){return this.m},X.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(X=Ao.prototype).ma=8,X.G=1,X.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},X.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new Di(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=jr(d),Cr(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$s(this,u,e),tt(t=G(this.F),"RID",i),tt(t,"CVER",22),this.D&&tt(t,"X-HTTP-Session-Id",this.D),Qi(this,t),this.o&&d&&ea(t,this.o,d),vn(this.i,u),this.Ra&&tt(t,"TYPE","init"),this.ja?(tt(t,"$req",e),tt(t,"SID","null"),u.$=!0,to(u,t,null)):to(u,t,e),this.G=2}}else 3==this.G&&(i?ta(this,i):0==this.l.length||ft(this.i)||ta(this))},X.Ga=function(){if(this.u=null,Ha(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Yt(St(this.bb,this),i)}},X.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ot(10),So(this),Ha(this))},X.ab=function(){null!=this.v&&(this.v=null,So(this),ai(this),ot(19))},X.jb=function(i){i?(this.h.info("Successfully pinged google.com"),ot(2)):(this.h.info("Failed to ping google.com"),ot(1))},(X=_u.prototype).xa=function(){},X.wa=function(){},X.va=function(){},X.ua=function(){},X.Oa=function(){},vu.prototype.g=function(i,e){return new Nr(i,e)},ht(Nr,rn),Nr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),gn(St(i.hb,i,e))),ot(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Hs(i,null,i.W),Ti(i)},Nr.prototype.close=function(){oi(this.g)},Nr.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,yu(this.g,e)}else this.v?((e={}).__data__=di(i),yu(this.g,e)):yu(this.g,i)},Nr.prototype.M=function(){this.g.j=null,delete this.j,oi(this.g),delete this.g,Nr.Z.M.call(this)},ht(Ia,ys),ht(Gs,Vi),ht(go,_u),go.prototype.xa=function(){yn(this.g,"a")},go.prototype.wa=function(i){yn(this.g,new Ia(i))},go.prototype.va=function(i){yn(this.g,new Gs(i))},go.prototype.ua=function(){yn(this.g,"b")},vu.prototype.createWebChannel=vu.prototype.g,Nr.prototype.send=Nr.prototype.u,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,Rr.COMPLETE="complete",Ii.EventType=Oi,Oi.OPEN="a",Oi.CLOSE="b",Oi.ERROR="c",Oi.MESSAGE="d",rn.prototype.listen=rn.prototype.N,wr.prototype.listenOnce=wr.prototype.O,wr.prototype.getLastError=wr.prototype.La,wr.prototype.getLastErrorCode=wr.prototype.Da,wr.prototype.getStatus=wr.prototype.ba,wr.prototype.getResponseJson=wr.prototype.Qa,wr.prototype.getResponseText=wr.prototype.ga,wr.prototype.send=wr.prototype.ea;var jo=fe.createWebChannelTransport=function(){return new vu},$o=fe.getStatEventTarget=function(){return Ms()},Da=fe.ErrorCode=$n,Vr=fe.EventType=Rr,Wa=fe.Event=rr,Fs=fe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ca=fe.FetchXmlHttpFactory=Lr,As=fe.WebChannel=Ii,tc=fe.XhrIo=wr;const Eu="@firebase/firestore";class I{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}I.UNAUTHENTICATED=new I(null),I.GOOGLE_CREDENTIALS=new I("google-credentials-uid"),I.FIRST_PARTY=new I("first-party-uid"),I.MOCK_USER=new I("mock-user");let E="9.6.11";const _=new Ee.Yd("@firebase/firestore");function S(){return _.logLevel}function j(i,...e){if(_.logLevel<=Ee.in.DEBUG){const t=e.map(ut);_.debug(`Firestore (${E}): ${i}`,...t)}}function ie(i,...e){if(_.logLevel<=Ee.in.ERROR){const t=e.map(ut);_.error(`Firestore (${E}): ${i}`,...t)}}function De(i,...e){if(_.logLevel<=Ee.in.WARN){const t=e.map(ut);_.warn(`Firestore (${E}): ${i}`,...t)}}function ut(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function st(i="Unexpected state"){const e=`FIRESTORE (${E}) INTERNAL ASSERTION FAILED: `+i;throw ie(e),new Error(e)}function Ft(i,e){i||st()}function Et(i,e){return i}const ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends Ne.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Es{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(I.UNAUTHENTICATED))}shutdown(){}}class mo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Iu{constructor(e){this.t=e,this.currentUser=I.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=z=>this.i!==u?(u=this.i,t(z)):Promise.resolve();let m=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Ur,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const z=m;e.enqueueRetryable((0,N.Z)(function*(){yield z.promise,yield d(o.currentUser)}))},B=z=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=z,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(z=>B(z)),setTimeout(()=>{if(!this.auth){const z=this.t.getImmediate({optional:!0});z?B(z):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Ur)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ft("string"==typeof o.accessToken),new Es(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new I(e)}}class yo{constructor(e,t,o){this.type="FirstParty",this.user=I.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class nc{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new yo(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(I.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ia{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Du{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=d=>{null!=d.error&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.p;return this.p=d.token,j("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.g.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.g.getImmediate({optional:!0});d?u(d):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.p=t.token,new ia(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Xi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function so(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}Xi.A=-1;class rc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=so(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function Vn(i,e){return i<e?-1:i>e?1:0}function oo(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function za(i){return i+"\0"}class Pi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yt(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yt(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new yt(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yt(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pi.fromMillis(Date.now())}static fromDate(e){return Pi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Pi(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vn(this.nanoseconds,e.nanoseconds):Vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nn(e)}static min(){return new nn(new Pi(0,0))}static max(){return new nn(new Pi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Yc(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ka(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Qc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class ba{constructor(e,t,o){void 0===t?t=0:t>e.length&&st(),void 0===o?o=e.length-t:o>e.length-t&&st(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===ba.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ba?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),m=t.get(u);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hr extends ba{construct(e,t,o){return new hr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new yt(ze.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new hr(t)}static emptyPath(){return new hr([])}}const zd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class is extends ba{construct(e,t,o){return new is(e,t,o)}static isValidIdentifier(e){return zd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),is.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new is(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new yt(ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let m=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new yt(ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const B=e[u+1];if("\\"!==B&&"."!==B&&"`"!==B)throw new yt(ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=B,u+=2}else"`"===D?(m=!m,u++):"."!==D||m?(o+=D,u++):(d(),u++)}if(d(),m)throw new yt(ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new is(t)}static emptyPath(){return new is([])}}class Ws{constructor(e){this.fields=e,e.sort(is.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Xn(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new Xn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const ll=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(i){if(Ft(!!i),"string"==typeof i){let e=0;const t=ll.exec(i);if(Ft(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ai(i.seconds),nanos:Ai(i.nanos)}}function Ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Mo(i){return"string"==typeof i?Xn.fromBase64String(i):Xn.fromUint8Array(i)}function Ji(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Vs(i){const e=i.mapValue.fields.__previous_value__;return Ji(e)?Vs(e):e}function Ta(i){const e=Ls(i.mapValue.fields.__local_write_time__.timestampValue);return new Pi(e.seconds,e.nanos)}class Ho{constructor(e,t,o,u,d,m,D,B){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=D,this.useFetchStreams=B}}class Bi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Bi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Bi&&e.projectId===this.projectId&&e.database===this.database}}function ds(i){return null==i}function xo(i){return 0===i&&1/i==-1/0}function Cu(i){return"number"==typeof i&&Number.isInteger(i)&&!xo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class $t{constructor(e){this.path=e}static fromPath(e){return new $t(hr.fromString(e))}static fromName(e){return new $t(hr.fromString(e).popFirst(5))}static empty(){return new $t(hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $t(new hr(e.slice()))}}const cl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bu={nullValue:"NULL_VALUE"};function ji(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ji(i)?4:Wo(i)?9:10:st()}function ao(i,e){if(i===e)return!0;const t=ji(i);if(t!==ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ta(i).isEqual(Ta(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ls(o.timestampValue),m=Ls(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Mo(i.bytesValue).isEqual(Mo(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Ai(o.geoPointValue.latitude)===Ai(u.geoPointValue.latitude)&&Ai(o.geoPointValue.longitude)===Ai(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ai(o.integerValue)===Ai(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Ai(o.doubleValue),m=Ai(u.doubleValue);return d===m?xo(d)===xo(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return oo(i.arrayValue.values||[],e.arrayValue.values||[],ao);case 10:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Yc(d)!==Yc(m))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===m[D]||!ao(d[D],m[D])))return!1;return!0}(i,e);default:return st()}var u}function _o(i,e){return void 0!==(i.values||[]).find(t=>ao(t,e))}function Ro(i,e){if(i===e)return 0;const t=ji(i),o=ji(e);if(t!==o)return Vn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=Ai(u.integerValue||u.doubleValue),D=Ai(d.integerValue||d.doubleValue);return m<D?-1:m>D?1:m===D?0:isNaN(m)?isNaN(D)?0:-1:1}(i,e);case 3:return Go(i.timestampValue,e.timestampValue);case 4:return Go(Ta(i),Ta(e));case 5:return Vn(i.stringValue,e.stringValue);case 6:return function(u,d){const m=Mo(u),D=Mo(d);return m.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),D=d.split("/");for(let B=0;B<m.length&&B<D.length;B++){const z=Vn(m[B],D[B]);if(0!==z)return z}return Vn(m.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=Vn(Ai(u.latitude),Ai(d.latitude));return 0!==m?m:Vn(Ai(u.longitude),Ai(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const m=u.values||[],D=d.values||[];for(let B=0;B<m.length&&B<D.length;++B){const z=Ro(m[B],D[B]);if(z)return z}return Vn(m.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){const m=u.fields||{},D=Object.keys(m),B=d.fields||{},z=Object.keys(B);D.sort(),z.sort();for(let ce=0;ce<D.length&&ce<z.length;++ce){const Se=Vn(D[ce],z[ce]);if(0!==Se)return Se;const et=Ro(m[D[ce]],B[z[ce]]);if(0!==et)return et}return Vn(D.length,z.length)}(i.mapValue,e.mapValue);default:throw st()}}function Go(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Vn(i,e);const t=Ls(i),o=Ls(e),u=Vn(t.seconds,o.seconds);return 0!==u?u:Vn(t.nanos,o.nanos)}function Oo(i){return dl(i)}function dl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Ls(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Mo(i.bytesValue).toBase64():"referenceValue"in i?$t.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const m of o.values||[])d?d=!1:u+=",",u+=dl(m);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",m=!0;for(const D of u)m?m=!1:d+=",",d+=`${D}:${dl(o.fields[D])}`;return d+"}"}(i.mapValue):st();var e}function Po(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function uo(i){return!!i&&"integerValue"in i}function qa(i){return!!i&&"arrayValue"in i}function zs(i){return!!i&&"nullValue"in i}function Tu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Aa(i){return!!i&&"mapValue"in i}function oa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ka(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=oa(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oa(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Wo(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Za(i){return"nullValue"in i?bu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Po(Bi.empty(),$t.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:st()}function hl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Po(Bi.empty(),$t.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?cl:st()}function T(i,e){return void 0===i?e:void 0===e||Ro(i,e)>0?i:e}function P(i,e){return void 0===i?e:void 0===e||Ro(i,e)<0?i:e}class K{constructor(e){this.value=e}static empty(){return new K({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Aa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oa(t)}setAll(e){let t=is.emptyPath(),o={},u=[];e.forEach((m,D)=>{if(!t.isImmediateParentOf(D)){const B=this.getFieldsMap(t);this.applyChanges(B,o,u),o={},u=[],t=D.popLast()}m?o[D.lastSegment()]=oa(m):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Aa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Aa(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ka(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new K(oa(this.value))}}function de(i){const e=[];return Ka(i.fields,(t,o)=>{const u=new is([t]);if(Aa(o)){const d=de(o.mapValue).fields;if(0===d.length)e.push(u);else for(const m of d)e.push(u.child(m))}else e.push(u)}),new Ws(e)}class Ve{constructor(e,t,o,u,d,m){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Ve(e,0,nn.min(),nn.min(),K.empty(),0)}static newFoundDocument(e,t,o){return new Ve(e,1,t,nn.min(),o,0)}static newNoDocument(e,t){return new Ve(e,2,t,nn.min(),K.empty(),0)}static newUnknownDocument(e,t){return new Ve(e,3,t,nn.min(),K.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=K.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=K.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ve&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ve(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ye{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function Rt(i){return i.fields.find(e=>2===e.kind)}function Xt(i){return i.fields.filter(e=>2!==e.kind)}Ye.UNKNOWN_ID=-1;class cn{constructor(e,t){this.fieldPath=e,this.kind=t}}class bn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bn(0,Zr.min())}}function lr(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=nn.fromTimestamp(1e9===o?new Pi(t+1,0):new Pi(t,o));return new Zr(u,$t.empty(),e)}function Un(i){return new Zr(i.readTime,i.key,-1)}class Zr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Zr(nn.min(),$t.empty(),-1)}static max(){return new Zr(nn.max(),$t.empty(),-1)}}function ki(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=$t.comparator(i.documentKey,e.documentKey),0!==t?t:Vn(i.largestBatchId,e.largestBatchId))}class Sa{constructor(e,t=null,o=[],u=[],d=null,m=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=D,this.P=null}}function Ya(i,e=null,t=[],o=[],u=null,d=null,m=null){return new Sa(i,e,t,o,u,d,m)}function hs(i){const e=Et(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+Oo(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),ds(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Oo(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Oo(o)).join(",")),e.P=t}return e.P}function Ks(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Pf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!ao(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Qd(i.startAt,e.startAt)&&Qd(i.endAt,e.endAt)}function vo(i){return $t.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function fl(i,e){return i.filters.filter(t=>t instanceof Ni&&t.field.isEqual(e))}function Xc(i,e,t){let o,u=!0;for(const d of fl(i,e)){let m,D=!0;switch(d.op){case"<":case"<=":m=Za(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,D=!1;break;case"!=":case"not-in":m=bu}T(o,m)===m&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];T(o,m)===m&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}function pl(i,e,t){let o,u=!0;for(const d of fl(i,e)){let m,D=!0;switch(d.op){case">=":case">":m=hl(d.value),D=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,D=!1;break;case"!=":case"not-in":m=cl}P(o,m)===m&&(o=m,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];P(o,m)===m&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}class Ni extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new qd(e,t,o):"array-contains"===t?new gl(e,o):"in"===t?new Rf(e,o):"not-in"===t?new Of(e,o):"array-contains-any"===t?new Zd(e,o):new Ni(e,t,o)}static V(e,t,o){return"in"===t?new Mf(e,o):new xf(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ro(t,this.value)):null!==t&&ji(this.value)===ji(t)&&this.v(Ro(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class qd extends Ni{constructor(e,t,o){super(e,t,o),this.key=$t.fromName(o.referenceValue)}matches(e){const t=$t.comparator(e.key,this.key);return this.v(t)}}class Mf extends Ni{constructor(e,t){super(e,"in",t),this.keys=aa(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xf extends Ni{constructor(e,t){super(e,"not-in",t),this.keys=aa(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function aa(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>$t.fromName(o.referenceValue))}class gl extends Ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qa(t)&&_o(t.arrayValue,this.value)}}class Rf extends Ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_o(this.value.arrayValue,t)}}class Of extends Ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(_o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_o(this.value.arrayValue,t)}}class Zd extends Ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>_o(this.value.arrayValue,o))}}class ko{constructor(e,t){this.position=e,this.inclusive=t}}class ml{constructor(e,t="asc"){this.field=e,this.dir=t}}function Pf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Yd(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],m=i.position[u];if(o=d.field.isKeyField()?$t.comparator($t.fromName(m.referenceValue),t.key):Ro(m,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Qd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ao(i.position[t],e.position[t]))return!1;return!0}class Eo{constructor(e,t=null,o=[],u=[],d=null,m="F",D=null,B=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=D,this.endAt=B,this.D=null,this.C=null}}function ic(i,e,t,o,u,d,m,D){return new Eo(i,e,t,o,u,d,m,D)}function No(i){return new Eo(i)}function sc(i){return!ds(i.limit)&&"F"===i.limitType}function Au(i){return!ds(i.limit)&&"L"===i.limitType}function Xd(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Su(i){for(const e of i.filters)if(e.S())return e.field;return null}function yl(i){return null!==i.collectionGroup}function Qa(i){const e=Et(i);if(null===e.D){e.D=[];const t=Su(e),o=Xd(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new ml(t)),e.D.push(new ml(is.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.D.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ml(is.keyField(),d))}}}return e.D}function co(i){const e=Et(i);if(!e.C)if("F"===e.limitType)e.C=Ya(e.path,e.collectionGroup,Qa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Qa(e))t.push(new ml(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new ko(e.endAt.position,!e.endAt.inclusive):null,u=e.startAt?new ko(e.startAt.position,!e.startAt.inclusive):null;e.C=Ya(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function oc(i,e,t){return new Eo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Fo(i,e){return Ks(co(i),co(e))&&i.limitType===e.limitType}function Jd(i){return`${hs(co(i))}|lt:${i.limitType}`}function Jc(i){return`Query(target=${function lo(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${Oo(o.value)}`;var o}).join(", ")}]`),ds(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Oo(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Oo(t)).join(",")),`Target(${e})`}(co(i))}; limitType=${i.limitType})`}function ed(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):$t.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,m){const D=Yd(u,d,m);return u.inclusive?D<=0:D<0}(t.startAt,Qa(t),o)||t.endAt&&!function(u,d,m){const D=Yd(u,d,m);return u.inclusive?D>=0:D>0}(t.endAt,Qa(t),o)));var t,o}function ac(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function eh(i){return(e,t)=>{let o=!1;for(const u of Qa(i)){const d=Lo(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Lo(i,e,t){const o=i.field.isKeyField()?$t.comparator(e.key,t.key):function(u,d,m){const D=d.data.field(u),B=m.data.field(u);return null!==D&&null!==B?Ro(D,B):st()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return st()}}function Xa(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xo(e)?"-0":e}}function uc(i){return{integerValue:""+i}}function th(i,e){return Cu(e)?uc(e):Xa(i,e)}class Mu{constructor(){this._=void 0}}function kf(i,e,t){return i instanceof Ja?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof eu?rh(i,e):i instanceof xu?Ma(i,e):function(o,u){const d=td(o,u),m=ih(d)+ih(o.k);return uo(d)&&uo(o.k)?uc(m):Xa(o.M,m)}(i,e)}function nh(i,e,t){return i instanceof eu?rh(i,e):i instanceof xu?Ma(i,e):t}function td(i,e){return i instanceof _l?uo(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Ja extends Mu{}class eu extends Mu{constructor(e){super(),this.elements=e}}function rh(i,e){const t=xa(e);for(const o of i.elements)t.some(u=>ao(u,o))||t.push(o);return{arrayValue:{values:t}}}class xu extends Mu{constructor(e){super(),this.elements=e}}function Ma(i,e){let t=xa(e);for(const o of i.elements)t=t.filter(u=>!ao(u,o));return{arrayValue:{values:t}}}class _l extends Mu{constructor(e,t){super(),this.M=e,this.k=t}}function ih(i){return Ai(i.integerValue||i.doubleValue)}function xa(i){return qa(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ru{constructor(e,t){this.field=e,this.transform=t}}class vl{constructor(e,t){this.version=e,this.transformResults=t}}class $i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $i}static exists(e){return new $i(void 0,e)}static updateTime(e){return new $i(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class El{}function xg(i,e,t){i instanceof nu?function(o,u,d){const m=o.value.clone(),D=wl(o.fieldTransforms,u,d.transformResults);m.setAll(D),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof Ou?function(o,u,d){if(!tu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=wl(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(sh(o)),D.setAll(m),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function lc(i,e,t){var u;i instanceof nu?function(o,u,d){if(!tu(o.precondition,u))return;const m=o.value.clone(),D=oh(o.fieldTransforms,d,u);m.setAll(D),u.convertToFoundDocument(dc(u),m).setHasLocalMutations()}(i,e,t):i instanceof Ou?function(o,u,d){if(!tu(o.precondition,u))return;const m=oh(o.fieldTransforms,d,u),D=u.data;D.setAll(sh(o)),D.setAll(m),u.convertToFoundDocument(dc(u),D).setHasLocalMutations()}(i,e,t):tu(i.precondition,u=e)&&u.convertToNoDocument(nn.min())}function Rg(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=td(o.transform,u||null);null!=d&&(null==t&&(t=K.empty()),t.set(o.field,d))}return t||null}function cc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&oo(t,o,(u,d)=>function wo(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof eu&&o instanceof eu||t instanceof xu&&o instanceof xu?oo(t.elements,o.elements,ao):t instanceof _l&&o instanceof _l?ao(t.k,o.k):t instanceof Ja&&o instanceof Ja);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function dc(i){return i.isFoundDocument()?i.version:nn.min()}class nu extends El{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class Ou extends El{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}}function sh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function wl(i,e,t){const o=new Map;Ft(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],m=d.transform,D=e.data.field(d.field);o.set(d.field,nh(m,D,t[u]))}return o}function oh(i,e,t){const o=new Map;for(const u of i){const d=u.transform,m=t.data.field(u.field);o.set(u.field,kf(d,m,e))}return o}class Il extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Dl extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class nd{constructor(e){this.count=e}}var Hi,cr;function Pu(i){switch(i){default:return st();case ze.CANCELLED:case ze.UNKNOWN:case ze.DEADLINE_EXCEEDED:case ze.RESOURCE_EXHAUSTED:case ze.INTERNAL:case ze.UNAVAILABLE:case ze.UNAUTHENTICATED:return!1;case ze.INVALID_ARGUMENT:case ze.NOT_FOUND:case ze.ALREADY_EXISTS:case ze.PERMISSION_DENIED:case ze.FAILED_PRECONDITION:case ze.ABORTED:case ze.OUT_OF_RANGE:case ze.UNIMPLEMENTED:case ze.DATA_LOSS:return!0}}function hc(i){if(void 0===i)return ie("GRPC error has no .code"),ze.UNKNOWN;switch(i){case Hi.OK:return ze.OK;case Hi.CANCELLED:return ze.CANCELLED;case Hi.UNKNOWN:return ze.UNKNOWN;case Hi.DEADLINE_EXCEEDED:return ze.DEADLINE_EXCEEDED;case Hi.RESOURCE_EXHAUSTED:return ze.RESOURCE_EXHAUSTED;case Hi.INTERNAL:return ze.INTERNAL;case Hi.UNAVAILABLE:return ze.UNAVAILABLE;case Hi.UNAUTHENTICATED:return ze.UNAUTHENTICATED;case Hi.INVALID_ARGUMENT:return ze.INVALID_ARGUMENT;case Hi.NOT_FOUND:return ze.NOT_FOUND;case Hi.ALREADY_EXISTS:return ze.ALREADY_EXISTS;case Hi.PERMISSION_DENIED:return ze.PERMISSION_DENIED;case Hi.FAILED_PRECONDITION:return ze.FAILED_PRECONDITION;case Hi.ABORTED:return ze.ABORTED;case Hi.OUT_OF_RANGE:return ze.OUT_OF_RANGE;case Hi.UNIMPLEMENTED:return ze.UNIMPLEMENTED;case Hi.DATA_LOSS:return ze.DATA_LOSS;default:return st()}}(cr=Hi||(Hi={}))[cr.OK=0]="OK",cr[cr.CANCELLED=1]="CANCELLED",cr[cr.UNKNOWN=2]="UNKNOWN",cr[cr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cr[cr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cr[cr.NOT_FOUND=5]="NOT_FOUND",cr[cr.ALREADY_EXISTS=6]="ALREADY_EXISTS",cr[cr.PERMISSION_DENIED=7]="PERMISSION_DENIED",cr[cr.UNAUTHENTICATED=16]="UNAUTHENTICATED",cr[cr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cr[cr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cr[cr.ABORTED=10]="ABORTED",cr[cr.OUT_OF_RANGE=11]="OUT_OF_RANGE",cr[cr.UNIMPLEMENTED=12]="UNIMPLEMENTED",cr[cr.INTERNAL=13]="INTERNAL",cr[cr.UNAVAILABLE=14]="UNAVAILABLE",cr[cr.DATA_LOSS=15]="DATA_LOSS";class Ra{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Qc(this.inner)}size(){return this.innerSize}}class Jn{constructor(e,t){this.comparator=e,this.root=t||ws.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ws.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ws.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cl(this.root,e,this.comparator,!0)}}class Cl{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ws{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=null!=o?o:ws.RED,this.left=null!=u?u:ws.EMPTY,this.right=null!=d?d:ws.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new ws(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ws.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return ws.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ws.EMPTY=null,ws.RED=!0,ws.BLACK=!1,ws.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(i,e,t,o,u){return this}insert(i,e,t){return new ws(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jr{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rd(this.data.getIterator())}getIteratorFrom(e){return new rd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Jr)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Jr(this.comparator);return t.data=e,t}}class rd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ku(i){return i.hasNext()?i.getNext():void 0}const fc=new Jn($t.comparator);function Io(){return fc}const ah=new Jn($t.comparator);function id(){return ah}function pc(){return new Ra(i=>i.toString(),(i,e)=>i.isEqual(e))}const Og=new Jn($t.comparator),bl=new Jr($t.comparator);function Bn(...i){let e=bl;for(const t of i)e=e.add(t);return e}const Tl=new Jr(Vn);function ru(){return Tl}class iu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,es.createSynthesizedTargetChangeForCurrentChange(e,t)),new iu(nn.min(),o,ru(),Io(),Bn())}}class es{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new es(Xn.EMPTY_BYTE_STRING,t,Bn(),Bn(),Bn())}}class zo{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class gc{constructor(e,t){this.targetId=e,this.$=t}}class qs{constructor(e,t,o=Xn.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class Nu{constructor(){this.B=0,this.L=Al(),this.U=Xn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Bn(),t=Bn(),o=Bn();return this.L.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:st()}}),new es(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=Al()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class sd{constructor(e){this.nt=e,this.st=new Map,this.it=Io(),this.rt=uh(),this.ot=new Jr(Vn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const d=u.target;if(vo(d))if(0===o){const m=new $t(d.path);this.ct(t,m,Ve.newNoDocument(m,nn.min()))}else Ft(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((d,m)=>{const D=this.wt(m);if(D){if(d.current&&vo(D.target)){const B=new $t(D.target.path);null!==this.it.get(B)||this.It(m,B)||this.ct(m,B,Ve.newNoDocument(B,e))}d.j&&(t.set(m,d.H()),d.J())}});let o=Bn();this.rt.forEach((d,m)=>{let D=!0;m.forEachWhile(B=>{const z=this.wt(B);return!z||2===z.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.it.forEach((d,m)=>m.setReadTime(e));const u=new iu(e,t,this.ot,this.it,o);return this.it=Io(),this.rt=uh(),this.ot=new Jr(Vn),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Nu,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Jr(Vn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||j("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Nu),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function uh(){return new Jn($t.comparator)}function Al(){return new Jn($t.comparator)}const od={asc:"ASCENDING",desc:"DESCENDING"},lh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ch{constructor(e,t){this.databaseId=e,this.N=t}}function Sl(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vo(i,e){return i.N?e.toBase64():e.toUint8Array()}function dh(i,e){return Sl(i,e.toTimestamp())}function fs(i){return Ft(!!i),nn.fromTimestamp(function(e){const t=Ls(e);return new Pi(t.seconds,t.nanos)}(i))}function Ml(i,e){return(t=i,new hr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function hh(i){const e=hr.fromString(i);return Ft(Tn(e)),e}function Fu(i,e){return Ml(i.databaseId,e.path)}function ui(i,e){const t=hh(e);if(t.get(1)!==i.databaseId.projectId)throw new yt(ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new yt(ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new $t(Ko(t))}function xl(i,e){return Ml(i.databaseId,e)}function mc(i){const e=hh(i);return 4===e.length?hr.emptyPath():Ko(e)}function Rl(i){return new hr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ko(i){return Ft(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Lu(i,e,t){return{name:Fu(i,e),fields:t.value.mapValue.fields}}function yc(i,e,t){const o=ui(i,e.name),u=fs(e.updateTime),d=new K({mapValue:{fields:e.fields}}),m=Ve.newFoundDocument(o,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function su(i,e){let t;if(e instanceof nu)t={update:Lu(i,e.key,e.value)};else if(e instanceof Il)t={delete:Fu(i,e.key)};else if(e instanceof Ou)t={update:Lu(i,e.key,e.data),updateMask:hn(e.fieldMask)};else{if(!(e instanceof Dl))return st();t={verify:Fu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const m=d.transform;if(m instanceof Ja)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof eu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof xu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof _l)return{fieldPath:d.field.canonicalString(),increment:m.k};throw st()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:dh(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:st()),t;var u}function ad(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?$i.updateTime(fs(u.updateTime)):void 0!==u.exists?$i.exists(u.exists):$i.none():$i.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,m){let D=null;"setToServerValue"in m?(Ft("REQUEST_TIME"===m.setToServerValue),D=new Ja):"appendMissingElements"in m?D=new eu(m.appendMissingElements.values||[]):"removeAllFromArray"in m?D=new xu(m.removeAllFromArray.values||[]):"increment"in m?D=new _l(d,m.increment):st();const B=is.fromServerFormat(m.fieldPath);return new Ru(B,D)}(i,u)):[];var u;if(e.update){const u=ui(i,e.update.name),d=new K({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new Ws((e.updateMask.fieldPaths||[]).map(z=>is.fromServerFormat(z)));return new Ou(u,d,m,t,o)}return new nu(u,d,t,o)}if(e.delete){const u=ui(i,e.delete);return new Il(u,t)}if(e.verify){const u=ui(i,e.verify);return new Dl(u,t)}return st()}function ph(i,e){return{documents:[xl(i,e.path)]}}function gh(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=xl(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xl(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(B){if(0===B.length)return;const z=B.map(ce=>function(Se){if("=="===Se.op){if(Tu(Se.value))return{unaryFilter:{field:J(Se.field),op:"IS_NAN"}};if(zs(Se.value))return{unaryFilter:{field:J(Se.field),op:"IS_NULL"}}}else if("!="===Se.op){if(Tu(Se.value))return{unaryFilter:{field:J(Se.field),op:"IS_NOT_NAN"}};if(zs(Se.value))return{unaryFilter:{field:J(Se.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:J(Se.field),op:V(Se.op),value:Se.value}}}(ce));return 1===z.length?z[0]:{compositeFilter:{op:"AND",filters:z}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(B){if(0!==B.length)return B.map(z=>{return{field:J((ce=z).field),direction:v(ce.dir)};var ce})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=(z=e.limit,i.N||ds(z)?z:{value:z});var z,D,B;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(B=e.endAt).inclusive,values:B.position}),t}function g(i){let e=mc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){Ft(1===o);const ce=t.from[0];ce.allDescendants?u=ce.collectionId:e=e.child(ce.collectionId)}let d=[];t.where&&(d=f(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(ce=>{return new ml(Ue((Se=ce).field),function(et){switch(et){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Se.direction));var Se}));let D=null;t.limit&&(D=function(ce){let Se;return Se="object"==typeof ce?ce.value:ce,ds(Se)?null:Se}(t.limit));let B=null;var ce;t.startAt&&(B=new ko((ce=t.startAt).values||[],!!ce.before));let z=null;return t.endAt&&(z=function(ce){return new ko(ce.values||[],!ce.before)}(t.endAt)),ic(e,u,m,d,D,"F",B,z)}function f(i){return i?void 0!==i.unaryFilter?[Wt(i)]:void 0!==i.fieldFilter?[it(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>f(e)).reduce((e,t)=>e.concat(t)):st():[]}function v(i){return od[i]}function V(i){return lh[i]}function J(i){return{fieldPath:i.canonicalString()}}function Ue(i){return is.fromServerFormat(i.fieldPath)}function it(i){return Ni.create(Ue(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(i.fieldFilter.op),i.fieldFilter.value)}function Wt(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Ue(i.unaryFilter.field);return Ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ue(i.unaryFilter.field);return Ni.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ue(i.unaryFilter.field);return Ni.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ue(i.unaryFilter.field);return Ni.create(u,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function hn(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Tn(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function on(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=ho(e)),e=Si(i.get(t),e);return ho(e)}function Si(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function ho(i){return i+"\x01\x01"}function Zs(i){const e=i.length;if(Ft(e>=2),2===e)return Ft("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),hr.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const m=i.indexOf("\x01",d);switch((m<0||m>t)&&st(),i.charAt(m+1)){case"\x01":const D=i.substring(d,m);let B;0===u.length?B=D:(u+=D,B=u,u=""),o.push(B);break;case"\x10":u+=i.substring(d,m),u+="\0";break;case"\x11":u+=i.substring(d,m+1);break;default:st()}d=m+2}return new hr(o)}const Ol=["userId","batchId"];function Oa(i,e){return[i,on(e)]}function _c(i,e,t){return[i,on(e),t]}const Lf={},Pa=["prefixPath","collectionGroup","readTime","documentId"],vc=["prefixPath","collectionGroup","documentId"],ud=["collectionGroup","readTime","prefixPath","documentId"],ld=["canonicalId","targetId"],Ec=["targetId","path"],Vf=["path","targetId"],cd=["collectionId","parent"],Uf=["indexId","uid"],My=["uid","sequenceNumber"],xy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ry=["indexId","uid","orderedDocumentKey"],Pg=["userId","collectionPath","documentId"],Bf=["userId","collectionPath","largestBatchId"],kg=["userId","collectionGroup","largestBatchId"],mh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oy=[...mh,"documentOverlays"],Ng=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fg=[...Ng,"indexConfiguration","indexState","indexEntries"],jf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new lt((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof lt?t:lt.resolve(t)}catch(t){return lt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):lt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):lt.reject(t)}static resolve(e){return new lt((t,o)=>{t(e)})}static reject(e){return new lt((t,o)=>{o(e)})}static waitFor(e){return new lt((t,o)=>{let u=0,d=0,m=!1;e.forEach(D=>{++u,D.next(()=>{++d,m&&d===u&&t()},B=>o(B))}),m=!0,d===u&&t()})}static or(e){let t=lt.resolve(!1);for(const o of e)t=t.next(u=>u?lt.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}}class dd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ur,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new hd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=vh(o.target.error);this.At.reject(new hd(e,u))}}static open(e,t,o,u){try{return new dd(t,e.transaction(u,o))}catch(d){throw new hd(t,d)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lg(t)}}class ua{constructor(e,t,o){this.name=e,this.version=t,this.bt=o,12.2===ua.Vt((0,Ne.z$)())&&ie("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),Bu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ne.hl)())return!1;if(ua.St())return!0;const e=(0,Ne.z$)(),t=ua.Vt(e),o=0<t&&t<10,u=ua.Dt(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,N.Z)(function*(){return t.db||(j("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new hd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const D=m.target.error;u("VersionError"===D.name?new yt(ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new yt(ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new hd(e,D))},d.onupgradeneeded=m=>{j("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.bt.kt(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{j("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,N.Z)(function*(){const m="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.Nt(e);const B=dd.open(d.db,e,m?"readonly":"readwrite",o),z=u(B).next(ce=>(B.Pt(),ce)).catch(ce=>(B.abort(ce),lt.reject(ce))).toPromise();return z.catch(()=>{}),yield B.Rt,z}catch(B){const z="FirebaseError"!==B.name&&D<3;if(j("SimpleDb","Transaction failed with error:",B.message,"Retrying:",z),d.close(),!z)return Promise.reject(B)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class yh{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bu(this.Ft.delete())}}class hd extends yt{constructor(e,t){super(ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uu(i){return"IndexedDbTransactionError"===i.name}class Lg{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(j("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Bu(o)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),Bu(this.store.add(e))}get(e){return Bu(this.store.get(e)).next(t=>(void 0===t&&(t=null),j("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),Bu(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),Bu(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.Kt(u,(m,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new lt((d,m)=>{u.onerror=D=>{m(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new lt((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}Qt(e,t){j("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Kt(u,(d,m,D)=>D.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Kt(u,t)}zt(e){const t=this.cursor({});return new lt((o,u)=>{t.onerror=d=>{const m=vh(d.target.error);u(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(D=>{D?m.continue():o()}):o()}})}Kt(e,t){const o=[];return new lt((u,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const D=m.target.result;if(!D)return void u();const B=new yh(D),z=t(D.primaryKey,D.value,B);if(z instanceof lt){const ce=z.catch(Se=>(B.done(),lt.reject(Se)));o.push(ce)}B.isDone?u():null===B.Lt?D.continue():D.continue(B.Lt)}}).next(()=>lt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bu(i){return new lt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=vh(o.target.error);t(u)}})}let _h=!1;function vh(i){const e=ua.Vt((0,Ne.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new yt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _h||(_h=!0,setTimeout(()=>{throw o},0)),o}}return i}class fd extends Vu{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ss(i,e){const t=Et(i);return ua.xt(t.Ht,e)}class Eh{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&xg(d,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&lc(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&lc(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(nn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bn())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(t,o)=>cc(t,o))&&oo(this.baseMutations,e.baseMutations,(t,o)=>cc(t,o))}}class pd{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){Ft(e.mutations.length===o.length);let u=Og;const d=e.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new pd(e,t,o,u)}}class wh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ka{constructor(e,t,o,u,d=nn.min(),m=nn.min(),D=Xn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=D}withSequenceNumber(e){return new ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wc{constructor(e){this.Jt=e}}function $f(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ih(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Fu(u=i.Jt,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Sl(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Pl(e.version)};else{if(!e.isUnknownDocument())return st();o.unknownDocument={path:t.path.toArray(),version:Pl(e.version)}}var u,d;return o}function Ih(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Pl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ju(i){const e=new Pi(i.seconds,i.nanoseconds);return nn.fromTimestamp(e)}function $u(i,e){const t=(e.baseMutations||[]).map(d=>ad(i.Jt,d));for(let d=0;d<e.mutations.length-1;++d){const m=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(m.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>ad(i.Jt,d)),u=Pi.fromMillis(e.localWriteTimeMs);return new Eh(e.batchId,u,t,o)}function Ic(i){const e=ju(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ju(i.lastLimboFreeSnapshotVersion):nn.min();let o;var u;return void 0!==i.query.documents?(Ft(1===(u=i.query).documents.length),o=co(No(mc(u.documents[0])))):o=co(g(i.query)),new ka(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Xn.fromBase64String(i.resumeToken))}function ky(i,e){const t=Pl(e.snapshotVersion),o=Pl(e.lastLimboFreeSnapshotVersion);let u;u=vo(e.target)?ph(i.Jt,e.target):gh(i.Jt,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hs(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Dh(i){const e=g({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?oc(e,e.limit,"L"):e}function Hf(i,e){return new wh(e.largestBatchId,ad(i.Jt,e.overlayMutation))}function Gf(i,e){const t=e.path.lastSegment();return[i,on(e.path.popLast()),t]}class Ny{getBundleMetadata(e,t){return Vg(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:ju(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Vg(e).put({bundleId:(o=t).id,createTime:Pl(fs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return qo(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:Dh(u.bundledQuery),readTime:ju(u.readTime)};var u})}saveNamedQuery(e,t){return qo(e).put({name:(o=t).name,readTime:Pl(fs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Vg(i){return ss(i,"bundles")}function qo(i){return ss(i,"namedQueries")}class Wf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Wf(e,t.uid||"")}getOverlay(e,t){return Dc(e).get(Gf(this.userId,t)).next(o=>o?Hf(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((d,m)=>{const D=new wh(t,m);u.push(this.Xt(e,D))}),lt.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(m=>u.add(on(m.getCollectionPath())));const d=[];return u.forEach(m=>{const D=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(Dc(e).Qt("collectionPathOverlayIndex",D))}),lt.waitFor(d)}getOverlaysForCollection(e,t,o){const u=pc(),d=on(t),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Dc(e).qt("collectionPathOverlayIndex",m).next(D=>{for(const B of D){const z=Hf(this.M,B);u.set(z.getKey(),z)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=pc();let m;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dc(e).Wt({index:"collectionGroupOverlayIndex",range:D},(B,z,ce)=>{const Se=Hf(this.M,z);d.size()<u||Se.largestBatchId===m?(d.set(Se.getKey(),Se),m=Se.largestBatchId):ce.done()}).next(()=>d)}Xt(e,t){return Dc(e).put(function(o,u,d){const[m,D,B]=Gf(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:B,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:su(o.Jt,d.mutation)}}(this.M,this.userId,t))}}function Dc(i){return ss(i,"documentOverlays")}class kl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ai(e.integerValue));else if("doubleValue"in e){const o=Ai(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),xo(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Mo(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?Wo(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),$t.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Fy(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ug(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=Fy(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}kl.fe=new kl;class Ly{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Bg{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Vy{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class gd{constructor(){this.De=new Ly,this.Ce=new Bg(this.De),this.xe=new Vy(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Hu{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Hu(this.indexId,this.documentKey,this.arrayValue,o)}}function Pn(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=zf(i.arrayValue,e.arrayValue),0!==t?t:(t=zf(i.directionalValue,e.directionalValue),0!==t?t:$t.comparator(i.documentKey,e.documentKey)))}function zf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class jg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=Rt(e);if(void 0!==t&&!this.Be(t))return!1;const o=Xt(e);let u=0,d=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const m=o[u];if(!this.Le(this.Fe,m)||!this.Ue(this.Me[d++],m))return!1;++u}for(;u<o.length;++u){const m=o[u];if(d>=this.Me.length||!this.Ue(this.Me[d++],m))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class $g{constructor(){this.qe=new Cc}addToCollectionParentIndex(e,t){return this.qe.add(t),lt.resolve()}getCollectionParents(e,t){return lt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return lt.resolve()}deleteFieldIndex(e,t){return lt.resolve()}getDocumentsMatchingTarget(e,t){return lt.resolve(null)}getFieldIndex(e,t){return lt.resolve(null)}getFieldIndexes(e,t){return lt.resolve([])}getNextCollectionGroupToUpdate(e){return lt.resolve(null)}updateCollectionGroup(e,t,o){return lt.resolve()}updateIndexEntries(e,t){return lt.resolve()}}class Cc{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new Jr(hr.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Jr(hr.comparator)).toArray()}}const Ys=new Uint8Array(0);class Hg{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Cc,this.Ge=new Ra(o=>hs(o),(o,u)=>Ks(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const d={collectionId:o,parent:on(u)};return Gg(e).put(d)}return lt.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[za(t),""],!1,!0);return Gg(e).qt(u).next(d=>{for(const m of d){if(m.collectionId!==t)break;o.push(Zs(m.parent))}return o})}addFieldIndex(e,t){const o=Zo(e),u={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=Zo(e),u=bc(e),d=Nl(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Nl(e);let u=!0;const d=new Map;return lt.forEach(this.Qe(t),m=>this.getFieldIndex(e,m).next(D=>{u&&(u=!!D),d.set(m,D)})).next(()=>{if(u){let m=Bn();const D=[];return lt.forEach(d,(B,z)=>{var ce;j("IndexedDbIndexManager",`Using index ${ce=B,`id=${ce.indexId}|cg=${ce.collectionGroup}|f=${ce.fields.map(li=>`${li.fieldPath}:${li.kind}`).join(",")}`} to execute ${hs(t)}`);const Se=function(li,gs){const xi=Rt(gs);if(void 0===xi)return null;for(const Wi of fl(li,xi.fieldPath))switch(Wi.op){case"array-contains-any":return Wi.value.arrayValue.values||[];case"array-contains":return[Wi.value]}return null}(z,B),et=function(li,gs){const xi=new Map;for(const Wi of Xt(gs))for(const eo of fl(li,Wi.fieldPath))switch(eo.op){case"==":case"in":xi.set(Wi.fieldPath.canonicalString(),eo.value);break;case"not-in":case"!=":return xi.set(Wi.fieldPath.canonicalString(),eo.value),Array.from(xi.values())}return null}(z,B),wt=function(li,gs){const xi=[];let Wi=!0;for(const eo of Xt(gs)){const al=0===eo.kind?Xc(li,eo.fieldPath,li.startAt):pl(li,eo.fieldPath,li.startAt);if(!al.value)return null;xi.push(al.value),Wi&&(Wi=al.inclusive)}return new ko(xi,Wi)}(z,B),Dt=function(li,gs){const xi=[];let Wi=!0;for(const eo of Xt(gs)){const al=0===eo.kind?pl(li,eo.fieldPath,li.endAt):Xc(li,eo.fieldPath,li.endAt);if(!al.value)return null;xi.push(al.value),Wi&&(Wi=al.inclusive)}return new ko(xi,Wi)}(z,B),an=this.je(B,z,wt),Gn=this.je(B,z,Dt),wi=this.We(B,z,et),Mi=this.ze(B.indexId,Se,an,!!wt&&wt.inclusive,Gn,!!Dt&&Dt.inclusive,wi);return lt.forEach(Mi,li=>o.Gt(li,t.limit).next(gs=>{gs.forEach(xi=>{const Wi=$t.fromSegments(xi.documentKey);m.has(Wi)||(m=m.add(Wi),D.push(Wi))})}))}).next(()=>D)}return lt.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,o,u,d,m,D){const B=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=d?d.length:1),z=B/(null!=t?t.length:1),ce=[];for(let Se=0;Se<B;++Se){const et=t?this.He(t[Se/z]):Ys,wt=o?this.Je(e,et,o[Se%z],u):this.Ye(e),Dt=d?this.Xe(e,et,d[Se%z],m):this.Ye(e+1);ce.push(...this.createRange(wt,Dt,D.map(an=>this.Je(e,et,an,!0))))}return ce}Je(e,t,o,u){const d=new Hu(e,$t.empty(),t,o);return u?d:d.ke()}Xe(e,t,o,u){const d=new Hu(e,$t.empty(),t,o);return u?d.ke():d}Ye(e){return new Hu(e,$t.empty(),Ys,Ys)}getFieldIndex(e,t){const o=new jg(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{const m=d.filter(D=>o.$e(D));return m.sort((D,B)=>B.fields.length-D.fields.length),m.length>0?m[0]:null})}Ze(e,t){const o=new gd;for(const u of Xt(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const m=o.Ne(u.kind);kl.fe.Zt(d,m)}return o.Se()}He(e){const t=new gd;return kl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new gd;return kl.fe.Zt(Po(this.databaseId,t),o.Ne(function(u){const d=Xt(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.Se()}We(e,t,o){if(null===o)return[];let u=[];u.push(new gd);let d=0;for(const m of Xt(e)){const D=o[d++];for(const B of u)if(this.en(t,m.fieldPath)&&qa(D))u=this.nn(u,m,D);else{const z=B.Ne(m.kind);kl.fe.Zt(D,z)}}return this.sn(u)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const u=[...e],d=[];for(const m of o.arrayValue.values||[])for(const D of u){const B=new gd;B.seed(D.Se()),kl.fe.Zt(m,B.Ne(t.kind)),d.push(B)}return d}en(e,t){return!!e.filters.find(o=>o instanceof Ni&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Zo(e),u=bc(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(d=>{const m=[];return lt.forEach(d,D=>u.get([D.indexId,this.uid]).next(B=>{m.push(function(z,ce){const Se=ce?new bn(ce.sequenceNumber,new Zr(ju(ce.readTime),new $t(Zs(ce.documentKey)),ce.largestBatchId)):bn.empty(),et=z.fields.map(([wt,Dt])=>new cn(is.fromServerFormat(wt),Dt));return new Ye(z.indexId,z.collectionGroup,et,Se)}(D,B))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Vn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Zo(e),d=bc(e);return this.rn(e).next(m=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>lt.forEach(D,B=>{return d.put({indexId:B.indexId,uid:this.user.uid||"",sequenceNumber:m,readTime:Pl((et=o).readTime),documentKey:on(et.documentKey.path),largestBatchId:et.largestBatchId});var et})))}updateIndexEntries(e,t){const o=new Map;return lt.forEach(t,(u,d)=>{const m=o.get(u.collectionGroup);return(m?lt.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),lt.forEach(D,B=>this.on(e,u,B).next(z=>{const ce=this.un(d,B);return z.isEqual(ce)?lt.resolve():this.an(e,d,B,z,ce)}))))})}cn(e,t,o,u){return Nl(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,u){return Nl(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const u=Nl(e);let d=new Jr(Pn);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(m,D)=>{d=d.add(new Hu(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}un(e,t){let o=new Jr(Pn);const u=this.Ze(t,e);if(null==u)return o;const d=Rt(t);if(null!=d){const m=e.data.field(d.fieldPath);if(qa(m))for(const D of m.arrayValue.values||[])o=o.add(new Hu(t.indexId,e.key,this.He(D),u))}else o=o.add(new Hu(t.indexId,e.key,Ys,u));return o}an(e,t,o,u,d){j("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(D,B,z,ce,Se){const et=D.getIterator(),wt=B.getIterator();let Dt=ku(et),an=ku(wt);for(;Dt||an;){let Gn=!1,wi=!1;if(Dt&&an){const Mi=z(Dt,an);Mi<0?wi=!0:Mi>0&&(Gn=!0)}else null!=Dt?wi=!0:Gn=!0;Gn?(ce(an),an=ku(wt)):wi?(Se(Dt),Dt=ku(et)):(Dt=ku(et),an=ku(wt))}}(u,d,Pn,D=>{m.push(this.cn(e,t,o,D))},D=>{m.push(this.hn(e,t,o,D))}),lt.waitFor(m)}rn(e){let t=1;return bc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((m,D)=>Pn(m,D)).filter((m,D,B)=>!D||0!==Pn(m,B[D-1]));const u=[];u.push(e);for(const m of o){const D=Pn(m,e),B=Pn(m,t);if(0===D)u[0]=e.ke();else if(D>0&&B<0)u.push(m),u.push(m.ke());else if(B>0)break}u.push(t);const d=[];for(let m=0;m<u.length;m+=2)d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Ys,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Ys,[]]));return d}}function Gg(i){return ss(i,"collectionParents")}function Nl(i){return ss(i,"indexEntries")}function Zo(i){return ss(i,"indexConfiguration")}function bc(i){return ss(i,"indexState")}const Kf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qs{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Qs(e,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Uy(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],m=IDBKeyRange.only(t.batchId);let D=0;const B=o.Wt({range:m},(ce,Se,et)=>(D++,et.delete()));d.push(B.next(()=>{Ft(1===D)}));const z=[];for(const ce of t.mutations){const Se=_c(e,ce.key.path,t.batchId);d.push(u.delete(Se)),z.push(ce.key)}return lt.waitFor(d).next(()=>z)}function md(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw st();e=i.noDocument}return JSON.stringify(e).length}Qs.DEFAULT_COLLECTION_PERCENTILE=10,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qs.DEFAULT=new Qs(41943040,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qs.DISABLED=new Qs(-1,0,0);class Wg{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.ln={}}static Yt(e,t,o,u){Ft(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Wg(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return la(e).Wt({index:"userMutationsIndex",range:o},(u,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=Gu(e),m=la(e);return m.add({}).next(D=>{Ft("number"==typeof D);const B=new Eh(D,t,o,u),z=function(et,wt,Dt){const an=Dt.baseMutations.map(wi=>su(et.Jt,wi)),Gn=Dt.mutations.map(wi=>su(et.Jt,wi));return{userId:wt,batchId:Dt.batchId,localWriteTimeMs:Dt.localWriteTime.toMillis(),baseMutations:an,mutations:Gn}}(this.M,this.userId,B),ce=[];let Se=new Jr((et,wt)=>Vn(et.canonicalString(),wt.canonicalString()));for(const et of u){const wt=_c(this.userId,et.key.path,D);Se=Se.add(et.key.path.popLast()),ce.push(m.put(z)),ce.push(d.put(wt,Lf))}return Se.forEach(et=>{ce.push(this.indexManager.addToCollectionParentIndex(e,et))}),e.addOnCommittedListener(()=>{this.ln[D]=B.keys()}),lt.waitFor(ce).next(()=>B)})}lookupMutationBatch(e,t){return la(e).get(t).next(o=>o?(Ft(o.userId===this.userId),$u(this.M,o)):null)}fn(e,t){return this.ln[t]?lt.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.ln[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return la(e).Wt({index:"userMutationsIndex",range:u},(m,D,B)=>{D.userId===this.userId&&(Ft(D.batchId>=o),d=$u(this.M,D)),B.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return la(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return la(e).qt("userMutationsIndex",t).next(o=>o.map(u=>$u(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Oa(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return Gu(e).Wt({range:u},(m,D,B)=>{const[z,ce,Se]=m,et=Zs(ce);if(z===this.userId&&t.path.isEqual(et))return la(e).get(Se).next(wt=>{if(!wt)throw st();Ft(wt.userId===this.userId),d.push($u(this.M,wt))});B.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Jr(Vn);const u=[];return t.forEach(d=>{const m=Oa(this.userId,d.path),D=IDBKeyRange.lowerBound(m),B=Gu(e).Wt({range:D},(z,ce,Se)=>{const[et,wt,Dt]=z,an=Zs(wt);et===this.userId&&d.path.isEqual(an)?o=o.add(Dt):Se.done()});u.push(B)}),lt.waitFor(u).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=Oa(this.userId,o),m=IDBKeyRange.lowerBound(d);let D=new Jr(Vn);return Gu(e).Wt({range:m},(B,z,ce)=>{const[Se,et,wt]=B,Dt=Zs(et);Se===this.userId&&o.isPrefixOf(Dt)?Dt.length===u&&(D=D.add(wt)):ce.done()}).next(()=>this.dn(e,D))}dn(e,t){const o=[],u=[];return t.forEach(d=>{u.push(la(e).get(d).next(m=>{if(null===m)throw st();Ft(m.userId===this.userId),o.push($u(this.M,m))}))}),lt.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Uy(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),lt.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return lt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Gu(e).Wt({range:o},(d,m,D)=>{if(d[0]===this.userId){const B=Zs(d[1]);u.push(B)}else D.done()}).next(()=>{Ft(0===u.length)})})}containsKey(e,t){return yd(e,this.userId,t)}wn(e){return Ch(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yd(i,e,t){const o=Oa(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Gu(i).Wt({range:d,jt:!0},(D,B,z)=>{const[ce,Se,et]=D;ce===e&&Se===u&&(m=!0),z.done()}).next(()=>m)}function la(i){return ss(i,"mutations")}function Gu(i){return ss(i,"documentMutations")}function Ch(i){return ss(i,"mutationQueues")}class ou{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ou(0)}static yn(){return new ou(-1)}}class jv{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new ou(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>nn.fromTimestamp(new Pi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.In(e,u)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Tc(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(Ft(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return Tc(e).Wt((m,D)=>{const B=Ic(D);B.sequenceNumber<=t&&null===o.get(B.targetId)&&(u++,d.push(this.removeTargetData(e,B)))}).next(()=>lt.waitFor(d)).next(()=>u)}forEachTarget(e,t){return Tc(e).Wt((o,u)=>{const d=Ic(u);t(d)})}pn(e){return zg(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}In(e,t){return zg(e).put("targetGlobalKey",t)}Tn(e,t){return Tc(e).put(ky(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=hs(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Tc(e).Wt({range:u,index:"queryTargetsIndex"},(m,D,B)=>{const z=Ic(D);Ks(t,z.target)&&(d=z,B.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=Wu(e);return t.forEach(m=>{const D=on(m.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,m))}),lt.waitFor(u)}removeMatchingKeys(e,t,o){const u=Wu(e);return lt.forEach(t,d=>{const m=on(d.path);return lt.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=Wu(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Wu(e);let d=Bn();return u.Wt({range:o,jt:!0},(m,D,B)=>{const z=Zs(m[1]),ce=new $t(z);d=d.add(ce)}).next(()=>d)}containsKey(e,t){const o=on(t.path),u=IDBKeyRange.bound([o],[za(o)],!1,!0);let d=0;return Wu(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([m,D],B,z)=>{0!==m&&(d++,z.done())}).next(()=>d>0)}Et(e,t){return Tc(e).get(t).next(o=>o?Ic(o):null)}}function Tc(i){return ss(i,"targets")}function zg(i){return ss(i,"targetGlobal")}function Wu(i){return ss(i,"targetDocuments")}function Fl(i){return bh.apply(this,arguments)}function bh(){return bh=(0,N.Z)(function*(i){if(i.code!==ze.FAILED_PRECONDITION||i.message!==jf)throw i;j("LocalStore","Unexpectedly lost primary lease")}),bh.apply(this,arguments)}function By([i,e],[t,o]){const u=Vn(i,t);return 0===u?Vn(e,o):u}class jy{constructor(e){this.An=e,this.buffer=new Jr(By),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();By(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $v{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;j("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,N.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){Uu(u)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Fl(u)}yield t.Sn(e)}))}}class Kg{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return lt.resolve(Xi.A);const o=new jy(t);return this.Dn.forEachTarget(e,u=>o.bn(u.sequenceNumber)).next(()=>this.Dn.xn(e,u=>o.bn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(Kf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kf):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,u,d,m,D,B,z;const ce=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Se=>(Se>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Se}`),u=this.params.maximumSequenceNumbersToCollect):u=Se,m=Date.now(),this.nthSequenceNumber(e,u))).next(Se=>(o=Se,D=Date.now(),this.removeTargets(e,o,t))).next(Se=>(d=Se,B=Date.now(),this.removeOrphanedDocuments(e,o))).next(Se=>(z=Date.now(),S()<=Ee.in.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-ce}ms\n\tDetermined least recently used ${u} in `+(D-m)+`ms\n\tRemoved ${d} targets in `+(B-D)+`ms\n\tRemoved ${Se} documents in `+(z-B)+`ms\nTotal Duration: ${z-ce}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:Se})))}}class qg{constructor(e,t){this.db=e,this.garbageCollector=new Kg(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,u)=>t(u))}addReference(e,t,o){return Th(e,o)}removeReference(e,t,o){return Th(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Th(e,t)}On(e,t){return function(o,u){let d=!1;return Ch(o).zt(m=>yd(o,m,u).next(D=>(D&&(d=!0),lt.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Mn(e,(m,D)=>{if(D<=t){const B=this.On(e,m).next(z=>{if(!z)return d++,o.getEntry(e,m).next(()=>(o.removeEntry(m,nn.min()),Wu(e).delete([0,on(m.path)])))});u.push(B)}}).next(()=>lt.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Th(e,t)}Mn(e,t){const o=Wu(e);let u,d=Xi.A;return o.Wt({index:"documentTargetsIndex"},([m,D],{path:B,sequenceNumber:z})=>{0===m?(d!==Xi.A&&t(new $t(Zs(u)),d),d=z,u=B):d=Xi.A}).next(()=>{d!==Xi.A&&t(new $t(Zs(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Th(i,e){return Wu(i).put((o=i.currentSequenceNumber,{targetId:0,path:on(e.path),sequenceNumber:o}));var o}class Ah{constructor(){this.changes=new Ra(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ve.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?lt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hv{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Ac(e).put(o)}removeEntry(e,t,o){return Ac(e).delete(function(u,d){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Ih(d),m[m.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=Ve.newInvalidDocument(t);return Ac(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(t))},(u,d)=>{o=this.$n(t,d)}).next(()=>o)}Bn(e,t){let o={size:0,document:Ve.newInvalidDocument(t)};return Ac(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(t))},(u,d)=>{o={document:this.$n(t,d),size:md(d)}}).next(()=>o)}getEntries(e,t){let o=Io();return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);o=o.insert(u,m)}).next(()=>o)}Un(e,t){let o=Io(),u=new Jn($t.comparator);return this.Ln(e,t,(d,m)=>{const D=this.$n(d,m);o=o.insert(d,D),u=u.insert(d,md(m))}).next(()=>({documents:o,qn:u}))}Ln(e,t,o){if(t.isEmpty())return lt.resolve();let u=new Jr(Gy);t.forEach(B=>u=u.add(B));const d=IDBKeyRange.bound(Sh(u.first()),Sh(u.last())),m=u.getIterator();let D=m.getNext();return Ac(e).Wt({index:"documentKeyIndex",range:d},(B,z,ce)=>{const Se=$t.fromSegments([...z.prefixPath,z.collectionGroup,z.documentId]);for(;D&&Gy(D,Se)<0;)o(D,null),D=m.getNext();D&&D.isEqual(Se)&&(o(D,z),D=m.hasNext()?m.getNext():null),D?ce.Ut(Sh(D)):ce.done()}).next(()=>{for(;D;)o(D,null),D=m.hasNext()?m.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),Ih(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ac(e).qt(IDBKeyRange.bound(u,d,!0)).next(m=>{let D=Io();for(const B of m){const z=this.$n($t.fromSegments(B.prefixPath.concat(B.collectionGroup,B.documentId)),B);D=D.insert(z.key,z)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=Io();const m=Hy(t,o),D=Hy(t,Zr.max());return Ac(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,D,!0)},(B,z,ce)=>{const Se=this.$n($t.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);d=d.insert(Se.key,Se),d.size===u&&ce.done()}).next(()=>d)}newChangeBuffer(e){return new Gv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $y(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Fn(e,t){return $y(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function Py(i,e){let t;if(e.document)t=yc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=$t.fromSegments(e.noDocument.path),u=ju(e.noDocument.readTime);t=Ve.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const o=$t.fromSegments(e.unknownDocument.path),u=ju(e.unknownDocument.version);t=Ve.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Pi(o[0],o[1]);return nn.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(nn.min()))return o}return Ve.newInvalidDocument(e)}}class Gv extends Ah{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Ra(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new Jr((d,m)=>Vn(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const D=this.Gn.get(d);if(t.push(this.Kn.removeEntry(e,d,D.readTime)),m.isValidDocument()){const B=$f(this.Kn.M,m);u=u.add(d.path.popLast()),o+=md(B)-D.size,t.push(this.Kn.addEntry(e,d,B))}else if(o-=D.size,this.trackRemovals){const B=$f(this.Kn.M,m.convertToNoDocument(nn.min()));t.push(this.Kn.addEntry(e,d,B))}}),u.forEach(d=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Kn.updateMetadata(e,o)),lt.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:u})=>(u.forEach((d,m)=>{this.Gn.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function $y(i){return ss(i,"remoteDocumentGlobal")}function Ac(i){return ss(i,"remoteDocumentsV14")}function Sh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Hy(i,e){const t=e.documentKey.path.toArray();return[i,Ih(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gy(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=Vn(t[d],o[d]),u)return u;return u=Vn(t.length,o.length),u||(u=Vn(t[t.length-2],o[o.length-2]),u||Vn(t[t.length-1],o[o.length-1]))}class Wv{constructor(e){this.M=e}kt(e,t,o,u){const d=new dd("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ol,{unique:!0}),D.createObjectStore("documentMutations"),Wy(e),function(D){D.createObjectStore("remoteDocuments")}(e));let m=lt.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),Wy(e)),m=m.next(()=>function(D){const B=D.store("targetGlobal"),z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nn.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",z)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(D,B){return B.store("mutations").qt().next(z=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ol,{unique:!0});const ce=B.store("mutations"),Se=z.map(et=>ce.put(et));return lt.waitFor(Se)})}(e,d))),m=m.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(m=m.next(()=>this.Qn(d))),o<6&&u>=6&&(m=m.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.jn(d)))),o<7&&u>=7&&(m=m.next(()=>this.Wn(d))),o<8&&u>=8&&(m=m.next(()=>this.zn(e,d))),o<9&&u>=9&&(m=m.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(m=m.next(()=>this.Hn(d))),o<11&&u>=11&&(m=m.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(m=m.next(()=>{!function(D){const B=D.createObjectStore("documentOverlays",{keyPath:Pg});B.createIndex("collectionPathOverlayIndex",Bf,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",kg,{unique:!1})}(e)})),o<13&&u>=13&&(m=m.next(()=>function(D){const B=D.createObjectStore("remoteDocumentsV14",{keyPath:Pa});B.createIndex("documentKeyIndex",vc),B.createIndex("collectionGroupIndex",ud)}(e)).next(()=>this.Jn(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>{!function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Uf}).createIndex("sequenceNumberIndex",My,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:xy}).createIndex("documentKeyIndex",Ry,{unique:!1})}(e)})),m}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=md(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>lt.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",m).next(D=>lt.forEach(D,B=>{Ft(B.userId===d.userId);const z=$u(this.M,B);return Uy(e,d.userId,z).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Wt((m,D)=>{const B=new hr(m),z=[0,on(B)];d.push(t.get(z).next(ce=>ce?lt.resolve():t.put({targetId:0,path:on(B),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>lt.waitFor(d))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:cd});const o=t.store("collectionParents"),u=new Cc,d=m=>{if(u.add(m)){const D=m.lastSegment(),B=m.popLast();return o.put({collectionId:D,parent:on(B)})}};return t.store("remoteDocuments").Wt({jt:!0},(m,D)=>{const B=new hr(m);return d(B.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([m,D,B],z)=>{const ce=Zs(D);return d(ce.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,u)=>{const d=Ic(u),m=ky(this.M,d);return t.put(m)})}Jn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((d,m)=>{const D=t.store("remoteDocumentsV14"),B=(z=m,z.document?new $t(hr.fromString(z.document.name).popFirst(5)):z.noDocument?$t.fromSegments(z.noDocument.path):z.unknownDocument?$t.fromSegments(z.unknownDocument.path):st()).path.toArray();var z;const ce={prefixPath:B.slice(0,B.length-2),collectionGroup:B[B.length-2],documentId:B[B.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};u.push(D.put(ce))}).next(()=>lt.waitFor(u))}}function Wy(i){i.createObjectStore("targetDocuments",{keyPath:Ec}).createIndex("documentTargetsIndex",Vf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ld,{unique:!0}),i.createObjectStore("targetGlobal")}const Zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Na{constructor(e,t,o,u,d,m,D,B,z,ce,Se=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=d,this.window=m,this.document=D,this.Xn=z,this.Zn=ce,this.ts=Se,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=et=>Promise.resolve(),!Na.vt())throw new yt(ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qg(this,u),this.hs=t+"main",this.M=new wc(B),this.ls=new ua(this.hs,this.ts,new Wv(this.M)),this.fs=new jv(this.referenceDelegate,this.M),this.ds=new Hv(this.M),this._s=new Ny,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===ce&&ie("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new yt(ze.FAILED_PRECONDITION,Zg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Xi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,N.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,N.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,N.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Uu(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ll(e).get("owner").next(t=>lt.resolve(this.bs(t)))}Vs(e){return Mh(e).delete(this.clientId)}vs(){var e=this;return(0,N.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=ss(o,"clientMetadata");return u.qt().next(d=>{const m=e.Ds(d,18e5),D=d.filter(B=>-1===m.indexOf(B));return lt.forEach(D,B=>u.delete(B.clientId)).next(()=>D)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?lt.resolve(!0):Ll(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new yt(ze.FAILED_PRECONDITION,Zg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mh(e).qt().next(o=>void 0===this.Ds(o,5e3).find(u=>{if(this.clientId!==u.clientId){const m=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||m&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&j("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,N.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new fd(t,Xi.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Mh(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Wg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Hg(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Wf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){j("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=14===(m=this.ts)?Fg:13===m?Ng:12===m?Oy:11===m?mh:void st();var m;let D;return this.ls.runTransaction(e,u,d,B=>(D=new fd(B,this.es?this.es.next():Xi.A),"readwrite-primary"===t?this.Es(D).next(z=>!!z||this.As(D)).next(z=>{if(!z)throw ie(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new yt(ze.FAILED_PRECONDITION,jf);return o(D)}).next(z=>this.Ps(D).next(()=>z)):this.$s(D).next(()=>o(D)))).then(B=>(D.raiseOnCommittedEvent(),B))}$s(e){return Ll(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new yt(ze.FAILED_PRECONDITION,Zg)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ll(e).put("owner",t)}static vt(){return ua.vt()}Rs(e){const t=Ll(e);return t.get("owner").next(o=>this.bs(o)?(j("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):lt.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(ie(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Ne.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return j("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return ie("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ie("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ll(i){return ss(i,"owner")}function Mh(i){return ss(i,"clientMetadata")}function xh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class qf{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(u=>{for(const d of o)d.applyToLocalView(u);return u})}qs(e,t){e.forEach((o,u)=>{for(const d of t)d.applyToLocalView(u)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return $t.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.js(e,t.path):yl(t)?this.Ws(e,t,o):this.zs(e,t,o);var u}js(e,t){return this.Ls(e,new $t(t)).next(o=>{let u=id();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}Ws(e,t,o){const u=t.collectionGroup;let d=id();return this.indexManager.getCollectionParents(e,u).next(m=>lt.forEach(m,D=>{const B=(z=t,ce=D.child(u),new Eo(ce,null,z.explicitOrderBy.slice(),z.filters.slice(),z.limit,z.limitType,z.startAt,z.endAt));var z,ce;return this.zs(e,B,o).next(z=>{z.forEach((ce,Se)=>{d=d.insert(ce,Se)})})}).next(()=>d))}zs(e,t,o){let u;return this.ds.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(d=>{for(const m of d)for(const D of m.mutations){const B=D.key;let z=u.get(B);null==z&&(z=Ve.newInvalidDocument(B),u=u.insert(B,z)),lc(D,z,m.localWriteTime),z.isFoundDocument()||(u=u.remove(B))}}).next(()=>(u.forEach((d,m)=>{ed(t,m)||(u=u.remove(d))}),u))}}class Rh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=u}static Ys(e,t){let o=Bn(),u=Bn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Rh(e,t.fromCache,o,u)}}class Oh{Xs(e){this.Zs=e}Qs(e,t,o,u){return 0===(d=t).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||o.isEqual(nn.min())?this.ti(e,t):this.Zs.Ks(e,u).next(d=>{const m=this.ei(t,d);return(sc(t)||Au(t))&&this.ni(t.limitType,m,u,o)?this.ti(e,t):(S()<=Ee.in.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Jc(t)),this.Zs.Qs(e,t,lr(o,-1)).next(D=>(m.forEach(B=>{D=D.insert(B.key,B)}),D)))});var d}ei(e,t){let o=new Jr(eh(e));return t.forEach((u,d)=>{ed(e,d)&&(o=o.add(d))}),o}ni(e,t,o,u){if(o.size!==t.size)return!0;const d="F"===e?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}ti(e,t){return S()<=Ee.in.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Jc(t)),this.Zs.Qs(e,t,Zr.min())}}class zy{constructor(e,t,o,u){this.persistence=e,this.si=t,this.M=u,this.ii=new Jn(Vn),this.ri=new Ra(d=>hs(d),Ks),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(o)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new qf(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function au(i,e,t,o){return new zy(i,e,t,o)}function Zf(i,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,N.Z)(function*(i,e){const t=Et(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.Bs.getAllMutationBatches(o).next(d=>(u=d,t.ai(e),t.Bs.getAllMutationBatches(o))).next(d=>{const m=[],D=[];let B=Bn();for(const z of u){m.push(z.batchId);for(const ce of z.mutations)B=B.add(ce.key)}for(const z of d){D.push(z.batchId);for(const ce of z.mutations)B=B.add(ce.key)}return t.ci.Ks(o,B).next(z=>({hi:z,removedBatchIds:m,addedBatchIds:D}))})})}),Yf.apply(this,arguments)}function Qf(i,e){const t=Et(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.ui.newChangeBuffer({trackRemovals:!0});return function(m,D,B,z){const ce=B.batch,Se=ce.keys();let et=lt.resolve();return Se.forEach(wt=>{et=et.next(()=>z.getEntry(D,wt)).next(Dt=>{const an=B.docVersions.get(wt);Ft(null!==an),Dt.version.compareTo(an)<0&&(ce.applyToRemoteDocument(Dt,B),Dt.isValidDocument()&&(Dt.setReadTime(B.commitVersion),z.addEntry(Dt)))})}),et.next(()=>m.Bs.removeMutationBatch(D,ce))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.ci.Ks(o,u))})}function Yg(i){const e=Et(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Qg(i,e){const t=Et(i),o=e.snapshotVersion;let u=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.ui.newChangeBuffer({trackRemovals:!0});u=t.ii;const D=[];e.targetChanges.forEach((z,ce)=>{const Se=u.get(ce);if(!Se)return;D.push(t.fs.removeMatchingKeys(d,z.removedDocuments,ce).next(()=>t.fs.addMatchingKeys(d,z.addedDocuments,ce)));let et=Se.withSequenceNumber(d.currentSequenceNumber);var wt,Dt,an;e.targetMismatches.has(ce)?et=et.withResumeToken(Xn.EMPTY_BYTE_STRING,nn.min()).withLastLimboFreeSnapshotVersion(nn.min()):z.resumeToken.approximateByteSize()>0&&(et=et.withResumeToken(z.resumeToken,o)),u=u.insert(ce,et),Dt=et,an=z,(0===(wt=Se).resumeToken.approximateByteSize()||Dt.snapshotVersion.toMicroseconds()-wt.snapshotVersion.toMicroseconds()>=3e8||an.addedDocuments.size+an.modifiedDocuments.size+an.removedDocuments.size>0)&&D.push(t.fs.updateTargetData(d,et))});let B=Io();if(e.documentUpdates.forEach(z=>{e.resolvedLimboDocuments.has(z)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,z))}),D.push(Xg(d,m,e.documentUpdates).next(z=>{B=z})),!o.isEqual(nn.min())){const z=t.fs.getLastRemoteSnapshotVersion(d).next(ce=>t.fs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(z)}return lt.waitFor(D).next(()=>m.apply(d)).next(()=>t.ci.Gs(d,B)).next(()=>B)}).then(d=>(t.ii=u,d))}function Xg(i,e,t){let o=Bn();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let d=Io();return t.forEach((m,D)=>{const B=u.get(m);D.isNoDocument()&&D.version.isEqual(nn.min())?(e.removeEntry(m,D.readTime),d=d.insert(m,D)):!B.isValidDocument()||D.version.compareTo(B.version)>0||0===D.version.compareTo(B.version)&&B.hasPendingWrites?(e.addEntry(D),d=d.insert(m,D)):j("LocalStore","Ignoring outdated watch update for ",m,". Current version:",B.version," Watch version:",D.version)}),d})}function Ky(i,e){const t=Et(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function Fa(i,e){const t=Et(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.fs.getTargetData(o,e).next(d=>d?(u=d,lt.resolve(u)):t.fs.allocateTargetId(o).next(m=>(u=new ka(e,m,0,o.currentSequenceNumber),t.fs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.ii.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.ii=t.ii.insert(o.targetId,o),t.ri.set(e,o.targetId)),o})}function ca(i,e,t){return _d.apply(this,arguments)}function _d(){return _d=(0,N.Z)(function*(i,e,t){const o=Et(i),u=o.ii.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!Uu(m))throw m;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}o.ii=o.ii.remove(e),o.ri.delete(u.target)}),_d.apply(this,arguments)}function uu(i,e,t){const o=Et(i);let u=nn.min(),d=Bn();return o.persistence.runTransaction("Execute query","readonly",m=>function(D,B,z){const ce=Et(D),Se=ce.ri.get(z);return void 0!==Se?lt.resolve(ce.ii.get(Se)):ce.fs.getTargetData(B,z)}(o,m,co(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(m,D.targetId).next(B=>{d=B})}).next(()=>o.si.Qs(m,e,t?u:nn.min(),t?d:Bn())).next(D=>(Jg(o,ac(e),D),{documents:D,li:d})))}function Sc(i,e){const t=Et(i),o=Et(t.fs),u=t.ii.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.Et(d,e).next(m=>m?m.target:null))}function Vl(i,e){const t=Et(i),o=t.oi.get(e)||nn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.ui.getAllFromCollectionGroup(u,e,lr(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Jg(t,e,u),u))}function Jg(i,e,t){let o=nn.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.oi.set(e,o)}function Ph(){return Ph=(0,N.Z)(function*(i,e,t,o){const u=Et(i);let d=Bn(),m=Io();for(const z of t){const ce=e.fi(z.metadata.name);z.document&&(d=d.add(ce));const Se=e.di(z);Se.setReadTime(e._i(z.metadata.readTime)),m=m.insert(ce,Se)}const D=u.ui.newChangeBuffer({trackRemovals:!0}),B=yield Fa(u,(z=o,co(No(hr.fromString(`__bundle__/docs/${z}`)))));var z;return u.persistence.runTransaction("Apply bundle documents","readwrite",z=>Xg(z,D,m).next(ce=>(D.apply(z),ce)).next(ce=>u.fs.removeMatchingKeysForTargetId(z,B.targetId).next(()=>u.fs.addMatchingKeys(z,d,B.targetId)).next(()=>u.ci.Gs(z,ce)).next(()=>ce)))}),Ph.apply(this,arguments)}function Xf(i,e){return vd.apply(this,arguments)}function vd(){return vd=(0,N.Z)(function*(i,e,t=Bn()){const o=yield Fa(i,co(Dh(e.bundledQuery))),u=Et(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=fs(e.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u._s.saveNamedQuery(d,e);const D=o.withResumeToken(Xn.EMPTY_BYTE_STRING,m);return u.ii=u.ii.insert(D.targetId,D),u.fs.updateTargetData(d,D).next(()=>u.fs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.fs.addMatchingKeys(d,t,o.targetId)).next(()=>u._s.saveNamedQuery(d,e))})}),vd.apply(this,arguments)}class tm{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return lt.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var o;return this.wi.set(t.id,{id:(o=t).id,version:o.version,createTime:fs(o.createTime)}),lt.resolve()}getNamedQuery(e,t){return lt.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(o=t).name,query:Dh(o.bundledQuery),readTime:fs(o.readTime)}),lt.resolve();var o}}class kh{constructor(){this.overlays=new Jn($t.comparator),this.gi=new Map}getOverlay(e,t){return lt.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.Xt(e,t,d)}),lt.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.gi.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.gi.delete(o)),lt.resolve()}getOverlaysForCollection(e,t,o){const u=pc(),d=t.length+1,m=new $t(t.child("")),D=this.overlays.getIteratorFrom(m);for(;D.hasNext();){const B=D.getNext().value,z=B.getKey();if(!t.isPrefixOf(z.path))break;z.path.length===d&&B.largestBatchId>o&&u.set(B.getKey(),B)}return lt.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Jn((z,ce)=>z-ce);const m=this.overlays.getIterator();for(;m.hasNext();){const z=m.getNext().value;if(z.getKey().getCollectionGroup()===t&&z.largestBatchId>o){let ce=d.get(z.largestBatchId);null===ce&&(ce=pc(),d=d.insert(z.largestBatchId,ce)),ce.set(z.getKey(),z)}}const D=pc(),B=d.getIterator();for(;B.hasNext()&&(B.getNext().value.forEach((z,ce)=>D.set(z,ce)),!(D.size()>=u)););return lt.resolve(D)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const m=this.gi.get(u.largestBatchId).delete(o.key);this.gi.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new wh(t,o));let d=this.gi.get(t);void 0===d&&(d=Bn(),this.gi.set(t,d)),this.gi.set(t,d.add(o.key))}}class Jf{constructor(){this.yi=new Jr(Is.pi),this.Ii=new Jr(Is.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const o=new Is(e,t);this.yi=this.yi.add(o),this.Ii=this.Ii.add(o)}Ei(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ai(new Is(e,t))}Ri(e,t){e.forEach(o=>this.removeReference(o,t))}Pi(e){const t=new $t(new hr([])),o=new Is(t,e),u=new Is(t,e+1),d=[];return this.Ii.forEachInRange([o,u],m=>{this.Ai(m),d.push(m.key)}),d}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new $t(new hr([])),o=new Is(t,e),u=new Is(t,e+1);let d=Bn();return this.Ii.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new Is(e,0),o=this.yi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Is{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return $t.comparator(e.key,t.key)||Vn(e.vi,t.vi)}static Ti(e,t){return Vn(e.vi,t.vi)||$t.comparator(e.key,t.key)}}class zv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Jr(Is.pi)}checkEmpty(e){return lt.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,u){const d=this.Si;this.Si++;const m=new Eh(d,t,o,u);this.Bs.push(m);for(const D of u)this.Di=this.Di.add(new Is(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return lt.resolve(m)}lookupMutationBatch(e,t){return lt.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.xi(t+1),d=u<0?0:u;return lt.resolve(this.Bs.length>d?this.Bs[d]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return lt.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Is(t,0),u=new Is(t,Number.POSITIVE_INFINITY),d=[];return this.Di.forEachInRange([o,u],m=>{const D=this.Ci(m.vi);d.push(D)}),lt.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Jr(Vn);return t.forEach(u=>{const d=new Is(u,0),m=new Is(u,Number.POSITIVE_INFINITY);this.Di.forEachInRange([d,m],D=>{o=o.add(D.vi)})}),lt.resolve(this.Ni(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;$t.isDocumentKey(d)||(d=d.child(""));const m=new Is(new $t(d),0);let D=new Jr(Vn);return this.Di.forEachWhile(B=>{const z=B.key.path;return!!o.isPrefixOf(z)&&(z.length===u&&(D=D.add(B.vi)),!0)},m),lt.resolve(this.Ni(D))}Ni(e){const t=[];return e.forEach(o=>{const u=this.Ci(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){Ft(0===this.ki(t.batchId,"removed")),this.Bs.shift();let o=this.Di;return lt.forEach(t.mutations,u=>{const d=new Is(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Di=o})}_n(e){}containsKey(e,t){const o=new Is(t,0),u=this.Di.firstAfterOrEqual(o);return lt.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return lt.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class nm{constructor(e){this.Mi=e,this.docs=new Jn($t.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mi(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return lt.resolve(o?o.document.mutableCopy():Ve.newInvalidDocument(t))}getEntries(e,t){let o=Io();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():Ve.newInvalidDocument(u))}),lt.resolve(o)}getAllFromCollection(e,t,o){let u=Io();const d=new $t(t.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:D,value:{document:B}}=m.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||ki(Un(B),o)<=0||(u=u.insert(B.key,B.mutableCopy()))}return lt.resolve(u)}getAllFromCollectionGroup(e,t,o,u){st()}Oi(e,t){return lt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new rm(this)}getSize(e){return lt.resolve(this.size)}}class rm extends Ah{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Kn.addEntry(e,u)):this.Kn.removeEntry(o)}),lt.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class qy{constructor(e){this.persistence=e,this.Fi=new Ra(t=>hs(t),Ks),this.lastRemoteSnapshotVersion=nn.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Jf,this.targetCount=0,this.Li=ou.gn()}forEachTarget(e,t){return this.Fi.forEach((o,u)=>t(u)),lt.resolve()}getLastRemoteSnapshotVersion(e){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lt.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.$i&&(this.$i=t),lt.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new ou(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,lt.resolve()}updateTargetData(e,t){return this.Tn(t),lt.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,lt.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Fi.forEach((m,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Fi.delete(m),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),lt.waitFor(d).next(()=>u)}getTargetCount(e){return lt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Fi.get(t)||null;return lt.resolve(o)}addMatchingKeys(e,t,o){return this.Bi.Ei(t,o),lt.resolve()}removeMatchingKeys(e,t,o){this.Bi.Ri(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(m=>{d.push(u.markPotentiallyOrphaned(e,m))}),lt.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),lt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Bi.Vi(t);return lt.resolve(o)}containsKey(e,t){return lt.resolve(this.Bi.containsKey(t))}}class im{constructor(e,t){this.Ui={},this.overlays={},this.es=new Xi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new qy(this),this.indexManager=new $g,this.ds=new nm(o=>this.referenceDelegate.qi(o)),this.M=new wc(t),this._s=new tm(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ui[e.toKey()];return o||(o=new zv(t,this.referenceDelegate),this.Ui[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){j("MemoryPersistence","Starting transaction:",e);const u=new Zy(this.es.next());return this.referenceDelegate.Ki(),o(u).next(d=>this.referenceDelegate.Gi(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Qi(e,t){return lt.or(Object.values(this.Ui).map(o=>()=>o.containsKey(e,t)))}}class Zy extends Vu{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.ji=new Jf,this.Wi=null}static zi(e){return new ep(e)}get Hi(){if(this.Wi)return this.Wi;throw st()}addReference(e,t,o){return this.ji.addReference(o,t),this.Hi.delete(o.toString()),lt.resolve()}removeReference(e,t,o){return this.ji.removeReference(o,t),this.Hi.add(o.toString()),lt.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),lt.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(u=>this.Hi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Hi.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.Hi,o=>{const u=$t.fromPath(o);return this.Ji(e,u).next(d=>{d||t.removeEntry(u,nn.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(o=>{o?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return lt.or([()=>lt.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Do(i,e){return`firestore_clients_${i}_${e}`}function sm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function tp(i,e){return`firestore_targets_${i}_${e}`}class np{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Yi(e,t,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new yt(u.error.code,u.error.message))),m?new np(e,t,u.state,d):(ie("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Yi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new yt(o.error.code,o.error.message))),d?new Nh(e,o.state,u):(ie("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ed{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=ru();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=Cu(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Ed(e,d):(ie("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class om{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new om(t.clientId,t.onlineState):(ie("SharedClientState",`Failed to parse online state: ${e}`),null)}}class rp{constructor(){this.activeTargetIds=ru()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wd{constructor(e,t,o,u,d){this.window=e,this.Yn=t,this.persistenceKey=o,this.er=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Jn(Vn),this.started=!1,this.rr=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ur=Do(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new rp),this.cr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,N.Z)(function*(){const t=yield e.syncEngine.Fs();for(const u of t){if(u===e.er)continue;const d=e.getItem(Do(e.persistenceKey,u));if(d){const m=Ed.Yi(u,d);m&&(e.ir=e.ir.insert(m.clientId,m))}}e.wr();const o=e.storage.getItem(e.dr);if(o){const u=e.mr(o);u&&e.gr(u)}for(const u of e.rr)e.sr(u);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,o){this.pr(e,t,o),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(tp(this.persistenceKey,e));if(o){const u=Nh.Yi(e,o);u&&(t=u.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tp(this.persistenceKey,e))}updateQueryState(e,t,o){this.Er(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Ir(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return j("SharedClientState","READ",e,t),t}setItem(e,t){j("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(j("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ur)return void ie("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,N.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const u=t.Pr(o.key);return t.br(u,null)}{const u=t.Vr(o.key,o.newValue);if(u)return t.br(u.clientId,u)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const u=t.vr(o.key,o.newValue);if(u)return t.Sr(u)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(o.key===t.dr){if(null!==o.newValue){const u=t.mr(o.newValue);if(u)return t.gr(u)}}else if(o.key===t.ar){const u=function(d){let m=Xi.A;if(null!=d)try{const D=JSON.parse(d);Ft("number"==typeof D),m=D}catch(D){ie("SharedClientState","Failed to read sequence number from WebStorage",D)}return m}(o.newValue);u!==Xi.A&&t.sequenceNumberHandler(u)}else if(o.key===t._r){const u=t.Nr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.kr(d)))}}else t.rr.push(o)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,o){const u=new np(this.currentUser,e,t,o),d=sm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Xi())}Ir(e){const t=sm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,o){const u=tp(this.persistenceKey,e),d=new Nh(e,t,o);this.setItem(u,d.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.Pr(e);return Ed.Yi(o,t)}vr(e,t){const o=this.hr.exec(e),u=Number(o[1]);return np.Yi(new I(void 0!==o[2]?o[2]:null),u,t)}Dr(e,t){const o=this.lr.exec(e),u=Number(o[1]);return Nh.Yi(u,t)}mr(e){return om.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,N.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);j("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const o=t?this.ir.insert(e,t):this.ir.remove(e),u=this.yr(this.ir),d=this.yr(o),m=[],D=[];return d.forEach(B=>{u.has(B)||m.push(B)}),u.forEach(B=>{d.has(B)||D.push(B)}),this.syncEngine.Fr(m,D).then(()=>{this.ir=o})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=ru();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class ip{constructor(){this.$r=new rp,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,o){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new rp,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Yy{Lr(e){}shutdown(){}}class am{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Qy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class um{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Xy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,o,u,d){const m=this.uo(e,t);j("RestConnection","Sending: ",m,o);const D={};return this.ao(D,u,d),this.co(e,m,D,o).then(B=>(j("RestConnection","Received: ",B),B),B=>{throw De("RestConnection",`${e} failed with error: `,B,"url: ",m,"request:",o),B})}ho(e,t,o,u,d){return this.oo(e,t,o,u,d)}ao(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+E,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}uo(e,t){return`${this.io}/v1/${t}:${Qy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,u){return new Promise((d,m)=>{const D=new tc;D.listenOnce(Vr.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case Da.NO_ERROR:const z=D.getResponseJson();j("Connection","XHR received:",JSON.stringify(z)),d(z);break;case Da.TIMEOUT:j("Connection",'RPC "'+e+'" timed out'),m(new yt(ze.DEADLINE_EXCEEDED,"Request time out"));break;case Da.HTTP_ERROR:const ce=D.getStatus();if(j("Connection",'RPC "'+e+'" failed with status:',ce,"response text:",D.getResponseText()),ce>0){const Se=D.getResponseJson().error;if(Se&&Se.status&&Se.message){const et=function(wt){const Dt=wt.toLowerCase().replace(/_/g,"-");return Object.values(ze).indexOf(Dt)>=0?Dt:ze.UNKNOWN}(Se.status);m(new yt(et,Se.message))}else m(new yt(ze.UNKNOWN,"Server responded with status "+D.getStatus()))}else m(new yt(ze.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{j("Connection",'RPC "'+e+'" completed.')}});const B=JSON.stringify(u);D.send(t,"POST",B,o,15)})}lo(e,t,o){const u=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=jo(),m=$o(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new Ca({})),this.ao(D.initMessageHeaders,t,o),(0,Ne.uI)()||(0,Ne.b$)()||(0,Ne.d)()||(0,Ne.w1)()||(0,Ne.Mn)()||(0,Ne.ru)()||(D.httpHeadersOverwriteParam="$httpHeaders");const B=u.join("");j("Connection","Creating WebChannel: "+B,D);const z=d.createWebChannel(B,D);let ce=!1,Se=!1;const et=new um({Wr:Dt=>{Se?j("Connection","Not sending because WebChannel is closed:",Dt):(ce||(j("Connection","Opening WebChannel transport."),z.open(),ce=!0),j("Connection","WebChannel sending:",Dt),z.send(Dt))},zr:()=>z.close()}),wt=(Dt,an,Gn)=>{Dt.listen(an,wi=>{try{Gn(wi)}catch(Mi){setTimeout(()=>{throw Mi},0)}})};return wt(z,As.EventType.OPEN,()=>{Se||j("Connection","WebChannel transport opened.")}),wt(z,As.EventType.CLOSE,()=>{Se||(Se=!0,j("Connection","WebChannel transport closed"),et.no())}),wt(z,As.EventType.ERROR,Dt=>{Se||(Se=!0,De("Connection","WebChannel transport errored:",Dt),et.no(new yt(ze.UNAVAILABLE,"The operation could not be completed")))}),wt(z,As.EventType.MESSAGE,Dt=>{var an;if(!Se){const Gn=Dt.data[0];Ft(!!Gn);const wi=Gn,Mi=wi.error||(null===(an=wi[0])||void 0===an?void 0:an.error);if(Mi){j("Connection","WebChannel received error:",Mi);const li=Mi.status;let gs=function(Wi){const eo=Hi[Wi];if(void 0!==eo)return hc(eo)}(li),xi=Mi.message;void 0===gs&&(gs=ze.INTERNAL,xi="Unknown error status: "+li+" with message "+Mi.message),Se=!0,et.no(new yt(gs,xi)),z.close()}else j("Connection","WebChannel received:",Gn),et.so(Gn)}}),wt(m,Wa.STAT_EVENT,Dt=>{Dt.stat===Fs.PROXY?j("Connection","Detected buffering proxy"):Dt.stat===Fs.NOPROXY&&j("Connection","Detected no buffering proxy")}),setTimeout(()=>{et.eo()},0),et}}function sp(){return"undefined"!=typeof window?window:null}function Fh(){return"undefined"!=typeof document?document:null}function Id(i){return new ch(i,!0)}class Lh{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Yn=e,this.timerId=t,this.fo=o,this._o=u,this.wo=d,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),o=Math.max(0,Date.now()-this.po),u=Math.max(0,t-o);u>0&&j("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,u,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class op{constructor(e,t,o,u,d,m,D,B){this.Yn=e,this.Ro=o,this.Po=u,this.bo=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=D,this.listener=B,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Lh(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,N.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,N.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var o=this;return(0,N.Z)(function*(){o.$o(),o.Bo(),o.Do.cancel(),o.Vo++,4!==e?o.Do.reset():t&&t.code===ze.RESOURCE_EXHAUSTED?(ie(t.toString()),ie("Using maximum backoff delay to prevent overloading the backend."),o.Do.Io()):t&&t.code===ze.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Lo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Vo===t&&this.qo(o,u)},o=>{e(()=>{const u=new yt(ze.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ko(u)})})}qo(e,t){const o=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{o(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(u=>{o(()=>this.Ko(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}No(){var e=this;this.state=5,this.Do.To((0,N.Z)(function*(){e.state=0,e.start()}))}Ko(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jy extends op{constructor(e,t,o,u,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,m),this.M=d}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Nf(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:st(),u=e.targetChange.targetIds||[],d=function(B,z){return B.N?(Ft(void 0===z||"string"==typeof z),Xn.fromBase64String(z||"")):(Ft(void 0===z||z instanceof Uint8Array),Xn.fromUint8Array(z||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,D=m&&function(B){const z=void 0===B.code?ze.UNKNOWN:hc(B.code);return new yt(z,B.message||"")}(m);t=new qs(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=ui(i,o.document.name),d=fs(o.document.updateTime),m=new K({mapValue:{fields:o.document.fields}}),D=Ve.newFoundDocument(u,d,m);t=new zo(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=ui(i,o.document),d=o.readTime?fs(o.readTime):nn.min(),m=Ve.newNoDocument(u,d);t=new zo([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const o=e.documentRemove,u=ui(i,o.document);t=new zo([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return st();{const o=e.filter,d=new nd(o.count||0);t=new gc(o.targetId,d)}}var B;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return nn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?nn.min():d.readTime?fs(d.readTime):nn.min()}(e);return this.listener.Qo(t,o)}jo(e){const t={};t.database=Rl(this.M),t.addTarget=function(u,d){let m;const D=d.target;return m=vo(D)?{documents:ph(u,D)}:{query:gh(u,D)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=Vo(u,d.resumeToken):d.snapshotVersion.compareTo(nn.min())>0&&(m.readTime=Sl(u,d.snapshotVersion.toTimestamp())),m}(this.M,e);const o=function c(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=Rl(this.M),t.removeTarget=e,this.Fo(t)}}class La extends op{constructor(e,t,o,u,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,m),this.M=d,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Ff(i,e){return i&&i.length>0?(Ft(void 0!==e),i.map(t=>function(o,u){let d=fs(o.updateTime?o.updateTime:u);return d.isEqual(nn.min())&&(d=fs(u)),new vl(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=fs(e.commitTime);return this.listener.Yo(o,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Rl(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>su(this.M,o))};this.Fo(t)}}class ap extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=u,this.tu=!1}eu(){if(this.tu)throw new yt(ze.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.oo(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new yt(ze.UNKNOWN,u.toString())})}ho(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ho(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new yt(ze.UNKNOWN,u.toString())})}terminate(){this.tu=!0}}class e_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(ie(t),this.iu=!1):j("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class t_{constructor(e,t,o,u,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=d,this._u.Lr(D=>{o.enqueueAndForget((0,N.Z)(function*(){var B;zu(m)&&(j("RemoteStore","Restarting streams for network reachability change."),yield(B=(0,N.Z)(function*(z){const ce=Et(z);ce.fu.add(4),yield Mc(ce),ce.wu.set("Unknown"),ce.fu.delete(4),yield Vh(ce)}),function(z){return B.apply(this,arguments)})(m))}))}),this.wu=new e_(o,u)}}function Vh(i){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,N.Z)(function*(i){if(zu(i))for(const e of i.du)yield e(!0)}),Uh.apply(this,arguments)}function Mc(i){return up.apply(this,arguments)}function up(){return up=(0,N.Z)(function*(i){for(const e of i.du)yield e(!1)}),up.apply(this,arguments)}function Bh(i,e){const t=Et(i);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Dd(t)?xc(t):Ku(t).xo()&&lp(t,e))}function Ul(i,e){const t=Et(i),o=Ku(t);t.lu.delete(e),o.xo()&&lm(t,e),0===t.lu.size&&(o.xo()?o.Mo():zu(t)&&t.wu.set("Unknown"))}function lp(i,e){i.mu.Z(e.targetId),Ku(i).jo(e)}function lm(i,e){i.mu.Z(e),Ku(i).Wo(e)}function xc(i){i.mu=new sd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.lu.get(e)||null}),Ku(i).start(),i.wu.ru()}function Dd(i){return zu(i)&&!Ku(i).Co()&&i.lu.size>0}function zu(i){return 0===Et(i).fu.size}function jh(i){i.mu=void 0}function cp(i){return $h.apply(this,arguments)}function $h(){return $h=(0,N.Z)(function*(i){i.lu.forEach((e,t)=>{lp(i,e)})}),$h.apply(this,arguments)}function n_(i,e){return dp.apply(this,arguments)}function dp(){return dp=(0,N.Z)(function*(i,e){jh(i),Dd(i)?(i.wu.au(e),xc(i)):i.wu.set("Unknown")}),dp.apply(this,arguments)}function hp(i,e,t){return cm.apply(this,arguments)}function cm(){return cm=(0,N.Z)(function*(i,e,t){if(i.wu.set("Online"),e instanceof qs&&2===e.state&&e.cause)try{yield(o=(0,N.Z)(function*(u,d){const m=d.cause;for(const D of d.targetIds)u.lu.has(D)&&(yield u.remoteSyncer.rejectListen(D,m),u.lu.delete(D),u.mu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Hh(i,o)}else if(e instanceof zo?i.mu.ut(e):e instanceof gc?i.mu._t(e):i.mu.ht(e),!t.isEqual(nn.min()))try{const o=yield Yg(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const m=u.mu.yt(d);return m.targetChanges.forEach((D,B)=>{if(D.resumeToken.approximateByteSize()>0){const z=u.lu.get(B);z&&u.lu.set(B,z.withResumeToken(D.resumeToken,d))}}),m.targetMismatches.forEach(D=>{const B=u.lu.get(D);if(!B)return;u.lu.set(D,B.withResumeToken(Xn.EMPTY_BYTE_STRING,B.snapshotVersion)),lm(u,D);const z=new ka(B.target,D,1,B.sequenceNumber);lp(u,z)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t))}catch(o){j("RemoteStore","Failed to raise snapshot:",o),yield Hh(i,o)}var o}),cm.apply(this,arguments)}function Hh(i,e,t){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,N.Z)(function*(i,e,t){if(!Uu(e))throw e;i.fu.add(1),yield Mc(i),i.wu.set("Offline"),t||(t=()=>Yg(i.localStore)),i.asyncQueue.enqueueRetryable((0,N.Z)(function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),i.fu.delete(1),yield Vh(i)}))}),Gh.apply(this,arguments)}function fp(i,e){return e().catch(t=>Hh(i,t,e))}function Bl(i){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,N.Z)(function*(i){const e=Et(i),t=qu(e);let o=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;dm(e);)try{const u=yield Ky(e.localStore,o);if(null===u){0===e.hu.length&&t.Mo();break}o=u.batchId,lu(e,u)}catch(u){yield Hh(e,u)}Cd(e)&&hm(e)}),Wh.apply(this,arguments)}function dm(i){return zu(i)&&i.hu.length<10}function lu(i,e){i.hu.push(e);const t=qu(i);t.xo()&&t.Ho&&t.Jo(e.mutations)}function Cd(i){return zu(i)&&!qu(i).Co()&&i.hu.length>0}function hm(i){qu(i).start()}function r_(i){return fm.apply(this,arguments)}function fm(){return fm=(0,N.Z)(function*(i){qu(i).Zo()}),fm.apply(this,arguments)}function pp(i){return zh.apply(this,arguments)}function zh(){return zh=(0,N.Z)(function*(i){const e=qu(i);for(const t of i.hu)e.Jo(t.mutations)}),zh.apply(this,arguments)}function gp(i,e,t){return jl.apply(this,arguments)}function jl(){return jl=(0,N.Z)(function*(i,e,t){const o=i.hu.shift(),u=pd.from(o,e,t);yield fp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Bl(i)}),jl.apply(this,arguments)}function i_(i,e){return bd.apply(this,arguments)}function bd(){return bd=(0,N.Z)(function*(i,e){var t;e&&qu(i).Ho&&(yield(t=(0,N.Z)(function*(o,u){if(Pu(d=u.code)&&d!==ze.ABORTED){const m=o.hu.shift();qu(o).ko(),yield fp(o,()=>o.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield Bl(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Cd(i)&&hm(i)}),bd.apply(this,arguments)}function mp(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,N.Z)(function*(i,e){const t=Et(i);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const o=zu(t);t.fu.add(3),yield Mc(t),o&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Vh(t)}),Kh.apply(this,arguments)}function qh(i,e){return yp.apply(this,arguments)}function yp(){return yp=(0,N.Z)(function*(i,e){const t=Et(i);e?(t.fu.delete(2),yield Vh(t)):e||(t.fu.add(2),yield Mc(t),t.wu.set("Unknown"))}),yp.apply(this,arguments)}function Ku(i){return i.gu||(i.gu=function(e,t,o){const u=Et(e);return u.eu(),new Jy(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:cp.bind(null,i),Yr:n_.bind(null,i),Qo:hp.bind(null,i)}),i.du.push(function(){var e=(0,N.Z)(function*(t){t?(i.gu.ko(),Dd(i)?xc(i):i.wu.set("Unknown")):(yield i.gu.stop(),jh(i))});return function(t){return e.apply(this,arguments)}}())),i.gu}function qu(i){return i.yu||(i.yu=function(e,t,o){const u=Et(e);return u.eu(),new La(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:r_.bind(null,i),Yr:i_.bind(null,i),Xo:pp.bind(null,i),Yo:gp.bind(null,i)}),i.du.push(function(){var e=(0,N.Z)(function*(t){t?(i.yu.ko(),yield Bl(i)):(yield i.yu.stop(),i.hu.length>0&&(j("RemoteStore",`Stopping write stream with ${i.hu.length} pending writes`),i.hu=[]))});return function(t){return e.apply(this,arguments)}}())),i.yu}class _p{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,o,u,d){const m=Date.now()+o,D=new _p(e,t,m,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yt(ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $l(i,e){if(ie("AsyncQueue",`${e}: ${i}`),Uu(i))return new yt(ze.UNAVAILABLE,`${e}: ${i}`);throw i}class da{constructor(e){this.comparator=e?(t,o)=>e(t,o)||$t.comparator(t.key,o.key):(t,o)=>$t.comparator(t.key,o.key),this.keyedMap=id(),this.sortedSet=new Jn(this.comparator)}static emptySet(e){return new da(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new da;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class vp{constructor(){this.pu=new Jn($t.comparator)}track(e){const t=e.doc.key,o=this.pu.get(t);o?0!==e.type&&3===o.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==o.type?this.pu=this.pu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.pu=this.pu.remove(t):1===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):st():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Rc{constructor(e,t,o,u,d,m,D,B){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=D,this.excludesMetadataChanges=B}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Rc(e,t,da.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class s_{constructor(){this.Tu=void 0,this.listeners=[]}}class Oc{constructor(){this.queries=new Ra(e=>Jd(e),Fo),this.onlineState="Unknown",this.Eu=new Set}}function Ep(i,e){return wp.apply(this,arguments)}function wp(){return wp=(0,N.Z)(function*(i,e){const t=Et(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new s_),u)try{d.Tu=yield t.onListen(o)}catch(m){const D=$l(m,`Initialization of query '${Jc(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.Au(t.onlineState),d.Tu&&e.Ru(d.Tu)&&Zh(t)}),wp.apply(this,arguments)}function Ip(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,N.Z)(function*(i,e){const t=Et(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Dp.apply(this,arguments)}function ha(i,e){const t=Et(i);let o=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const D of m.listeners)D.Ru(u)&&(o=!0);m.Tu=u}}o&&Zh(t)}function Cp(i,e,t){const o=Et(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Zh(i){i.Eu.forEach(e=>{e.next()})}class Yh{constructor(e,t,o){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}Ru(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Rc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class pm{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class bp{constructor(e){this.M=e}fi(e){return ui(this.M,e)}di(e){return e.metadata.exists?yc(this.M,e.document,!1):Ve.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return fs(e)}}class o_{constructor(e,t,o){this.Nu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gm(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=hr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new bp(this.M);for(const u of e)if(u.metadata.queries){const d=o.fi(u.metadata.name);for(const m of u.metadata.queries){const D=(t.get(m)||Bn()).add(d);t.set(m,D)}}return t}complete(){var e=this;return(0,N.Z)(function*(){const t=yield function em(i,e,t,o){return Ph.apply(this,arguments)}(e.localStore,new bp(e.M),e.documents,e.Nu.id),o=e.Mu(e.documents);for(const u of e.queries)yield Xf(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function gm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class mm{constructor(e){this.key=e}}class ym{constructor(e){this.key=e}}class Tp{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Bn(),this.mutatedKeys=Bn(),this.Uu=eh(e),this.qu=new da(this.Uu)}get Ku(){return this.$u}Gu(e,t){const o=t?t.Qu:new vp,u=t?t.qu:this.qu;let d=t?t.mutatedKeys:this.mutatedKeys,m=u,D=!1;const B=sc(this.query)&&u.size===this.query.limit?u.last():null,z=Au(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ce,Se)=>{const et=u.get(ce),wt=ed(this.query,Se)?Se:null,Dt=!!et&&this.mutatedKeys.has(et.key),an=!!wt&&(wt.hasLocalMutations||this.mutatedKeys.has(wt.key)&&wt.hasCommittedMutations);let Gn=!1;et&&wt?et.data.isEqual(wt.data)?Dt!==an&&(o.track({type:3,doc:wt}),Gn=!0):this.ju(et,wt)||(o.track({type:2,doc:wt}),Gn=!0,(B&&this.Uu(wt,B)>0||z&&this.Uu(wt,z)<0)&&(D=!0)):!et&&wt?(o.track({type:0,doc:wt}),Gn=!0):et&&!wt&&(o.track({type:1,doc:et}),Gn=!0,(B||z)&&(D=!0)),Gn&&(wt?(m=m.add(wt),d=an?d.add(ce):d.delete(ce)):(m=m.delete(ce),d=d.delete(ce)))}),sc(this.query)||Au(this.query))for(;m.size>this.query.limit;){const ce=sc(this.query)?m.last():m.first();m=m.delete(ce.key),d=d.delete(ce.key),o.track({type:1,doc:ce})}return{qu:m,Qu:o,ni:D,mutatedKeys:d}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const d=e.Qu.Iu();d.sort((z,ce)=>function(Se,et){const wt=Dt=>{switch(Dt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return wt(Se)-wt(et)}(z.type,ce.type)||this.Uu(z.doc,ce.doc)),this.Wu(o);const m=t?this.zu():[],D=0===this.Lu.size&&this.current?1:0,B=D!==this.Bu;return this.Bu=D,0!==d.length||B?{snapshot:new Rc(this.query,e.qu,u,d,e.mutatedKeys,0===D,B,!1),Hu:m}:{Hu:m}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new vp,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Bn(),this.qu.forEach(o=>{this.Ju(o.key)&&(this.Lu=this.Lu.add(o.key))});const t=[];return e.forEach(o=>{this.Lu.has(o)||t.push(new ym(o))}),this.Lu.forEach(o=>{e.has(o)||t.push(new mm(o))}),t}Yu(e){this.$u=e.li,this.Lu=Bn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Rc.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Kv{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class _m{constructor(e){this.key=e,this.Zu=!1}}class a_{constructor(e,t,o,u,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.ta={},this.ea=new Ra(D=>Jd(D),Fo),this.na=new Map,this.sa=new Set,this.ia=new Jn($t.comparator),this.ra=new Map,this.oa=new Jf,this.ua={},this.aa=new Map,this.ca=ou.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function u_(i,e){return vm.apply(this,arguments)}function vm(){return vm=(0,N.Z)(function*(i,e){const t=Ju(i);let o,u;const d=t.ea.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.Xu();else{const m=yield Fa(t.localStore,co(e));t.isPrimaryClient&&Bh(t.remoteStore,m);const D=t.sharedClientState.addLocalQueryTarget(m.targetId);o=m.targetId,u=yield Em(t,e,o,"current"===D)}return u}),vm.apply(this,arguments)}function Em(i,e,t,o){return Td.apply(this,arguments)}function Td(){return Td=(0,N.Z)(function*(i,e,t,o){i.la=(ce,Se,et)=>{return(wt=(0,N.Z)(function*(Dt,an,Gn,wi){let Mi=an.view.Gu(Gn);Mi.ni&&(Mi=yield uu(Dt.localStore,an.query,!1).then(({documents:xi})=>an.view.Gu(xi,Mi)));const li=wi&&wi.targetChanges.get(an.targetId),gs=an.view.applyChanges(Mi,Dt.isPrimaryClient,li);return Rp(Dt,an.targetId,gs.Hu),gs.snapshot}),function(Dt,an,Gn,wi){return wt.apply(this,arguments)})(i,ce,Se,et);var wt};const u=yield uu(i.localStore,e,!0),d=new Tp(e,u.li),m=d.Gu(u.documents),D=es.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),B=d.applyChanges(m,i.isPrimaryClient,D);Rp(i,t,B.Hu);const z=new Kv(e,t,d);return i.ea.set(e,z),i.na.has(t)?i.na.get(t).push(e):i.na.set(t,[e]),B.snapshot}),Td.apply(this,arguments)}function l_(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,N.Z)(function*(i,e){const t=Et(i),o=t.ea.get(e),u=t.na.get(o.targetId);if(u.length>1)return t.na.set(o.targetId,u.filter(d=>!Fo(d,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield ca(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Ul(t.remoteStore,o.targetId),Pc(t,o.targetId)}).catch(Fl))):(Pc(t,o.targetId),yield ca(t.localStore,o.targetId,!0))}),Qh.apply(this,arguments)}function Im(){return Im=(0,N.Z)(function*(i,e,t){const o=el(i);try{const u=yield function(d,m){const D=Et(d),B=Pi.now(),z=m.reduce((Se,et)=>Se.add(et.key),Bn());let ce;return D.persistence.runTransaction("Locally write mutations","readwrite",Se=>D.ci.Ks(Se,z).next(et=>{ce=et;const wt=[];for(const Dt of m){const an=Rg(Dt,ce.get(Dt.key));null!=an&&wt.push(new Ou(Dt.key,an,de(an.value.mapValue),$i.exists(!0)))}return D.Bs.addMutationBatch(Se,B,wt,m)})).then(Se=>(Se.applyToLocalDocumentSet(ce),{batchId:Se.batchId,changes:ce}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,m,D){let B=d.ua[d.currentUser.toKey()];B||(B=new Jn(Vn)),B=B.insert(m,D),d.ua[d.currentUser.toKey()]=B}(o,u.batchId,t),yield Qo(o,u.changes),yield Bl(o.remoteStore)}catch(u){const d=$l(u,"Failed to persist write");t.reject(d)}}),Im.apply(this,arguments)}function Yo(i,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,N.Z)(function*(i,e){const t=Et(i);try{const o=yield Qg(t.localStore,e);e.targetChanges.forEach((u,d)=>{const m=t.ra.get(d);m&&(Ft(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.Zu=!0:u.modifiedDocuments.size>0?Ft(m.Zu):u.removedDocuments.size>0&&(Ft(m.Zu),m.Zu=!1))}),yield Qo(t,o,e)}catch(o){yield Fl(o)}}),Dm.apply(this,arguments)}function c_(i,e,t){const o=Et(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ea.forEach((d,m)=>{const D=m.view.Au(e);D.snapshot&&u.push(D.snapshot)}),function(d,m){const D=Et(d);D.onlineState=m;let B=!1;D.queries.forEach((z,ce)=>{for(const Se of ce.listeners)Se.Au(m)&&(B=!0)}),B&&Zh(D)}(o.eventManager,e),u.length&&o.ta.Qo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Cm(i,e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,N.Z)(function*(i,e,t){const o=Et(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.ra.get(e),d=u&&u.key;if(d){let m=new Jn($t.comparator);m=m.insert(d,Ve.newNoDocument(d,nn.min()));const D=Bn().add(d),B=new iu(nn.min(),new Map,new Jr(Vn),m,D);yield Yo(o,B),o.ia=o.ia.remove(d),o.ra.delete(e),Op(o)}else yield ca(o.localStore,e,!1).then(()=>Pc(o,e,t)).catch(Fl)}),Xh.apply(this,arguments)}function bm(i,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,N.Z)(function*(i,e){const t=Et(i),o=e.batch.batchId;try{const u=yield Qf(t.localStore,e);xp(t,o,null),Ad(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Qo(t,u)}catch(u){yield Fl(u)}}),Ap.apply(this,arguments)}function qv(i,e,t){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,N.Z)(function*(i,e,t){const o=Et(i);try{const u=yield function(d,m){const D=Et(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let z;return D.Bs.lookupMutationBatch(B,m).next(ce=>(Ft(null!==ce),z=ce.keys(),D.Bs.removeMutationBatch(B,ce))).next(()=>D.Bs.performConsistencyCheck(B)).next(()=>D.ci.Ks(B,z))})}(o.localStore,e);xp(o,e,t),Ad(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Qo(o,u)}catch(u){yield Fl(u)}}),Jh.apply(this,arguments)}function Mp(){return Mp=(0,N.Z)(function*(i,e){const t=Et(i);zu(t.remoteStore)||j("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const m=Et(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>m.Bs.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.aa.get(o)||[];u.push(e),t.aa.set(o,u)}catch(o){const u=$l(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Mp.apply(this,arguments)}function Ad(i,e){(i.aa.get(e)||[]).forEach(t=>{t.resolve()}),i.aa.delete(e)}function xp(i,e,t){const o=Et(i);let u=o.ua[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ua[o.currentUser.toKey()]=u}}function Pc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.na.get(e))i.ea.delete(o),t&&i.ta.fa(o,t);i.na.delete(e),i.isPrimaryClient&&i.oa.Pi(e).forEach(o=>{i.oa.containsKey(o)||Tm(i,o)})}function Tm(i,e){i.sa.delete(e.path.canonicalString());const t=i.ia.get(e);null!==t&&(Ul(i.remoteStore,t),i.ia=i.ia.remove(e),i.ra.delete(t),Op(i))}function Rp(i,e,t){for(const o of t)o instanceof mm?(i.oa.addReference(o.key,e),d_(i,o)):o instanceof ym?(j("SyncEngine","Document no longer in limbo: "+o.key),i.oa.removeReference(o.key,e),i.oa.containsKey(o.key)||Tm(i,o.key)):st()}function d_(i,e){const t=e.key,o=t.path.canonicalString();i.ia.get(t)||i.sa.has(o)||(j("SyncEngine","New document in limbo: "+t),i.sa.add(o),Op(i))}function Op(i){for(;i.sa.size>0&&i.ia.size<i.maxConcurrentLimboResolutions;){const e=i.sa.values().next().value;i.sa.delete(e);const t=new $t(hr.fromString(e)),o=i.ca.next();i.ra.set(o,new _m(t)),i.ia=i.ia.insert(t,o),Bh(i.remoteStore,new ka(co(No(t.path)),o,2,Xi.A))}}function Qo(i,e,t){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,N.Z)(function*(i,e,t){const o=Et(i),u=[],d=[],m=[];var D;o.ea.isEmpty()||(o.ea.forEach((D,B)=>{m.push(o.la(B,e,t).then(z=>{if(z){o.isPrimaryClient&&o.sharedClientState.updateQueryState(B.targetId,z.fromCache?"not-current":"current"),u.push(z);const ce=Rh.Ys(B.targetId,z);d.push(ce)}}))}),yield Promise.all(m),o.ta.Qo(u),yield(D=(0,N.Z)(function*(B,z){const ce=Et(B);try{yield ce.persistence.runTransaction("notifyLocalViewChanges","readwrite",Se=>lt.forEach(z,et=>lt.forEach(et.Hs,wt=>ce.persistence.referenceDelegate.addReference(Se,et.targetId,wt)).next(()=>lt.forEach(et.Js,wt=>ce.persistence.referenceDelegate.removeReference(Se,et.targetId,wt)))))}catch(Se){if(!Uu(Se))throw Se;j("LocalStore","Failed to update sequence numbers: "+Se)}for(const Se of z){const et=Se.targetId;if(!Se.fromCache){const wt=ce.ii.get(et),an=wt.withLastLimboFreeSnapshotVersion(wt.snapshotVersion);ce.ii=ce.ii.insert(et,an)}}}),function(B,z){return D.apply(this,arguments)})(o.localStore,d))}),Zu.apply(this,arguments)}function h_(i,e){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,N.Z)(function*(i,e){const t=Et(i);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const o=yield Zf(t.localStore,e);t.currentUser=e,(u=t).aa.forEach(m=>{m.forEach(D=>{D.reject(new yt(ze.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.aa.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Qo(t,o.hi)}var u}),Hl.apply(this,arguments)}function f_(i,e){const t=Et(i),o=t.ra.get(e);if(o&&o.Zu)return Bn().add(o.key);{let u=Bn();const d=t.na.get(e);if(!d)return u;for(const m of d){const D=t.ea.get(m);u=u.unionWith(D.view.Ku)}return u}}function p_(i,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,N.Z)(function*(i,e){const t=Et(i),o=yield uu(t.localStore,e.query,!0),u=e.view.Yu(o);return t.isPrimaryClient&&Rp(t,e.targetId,u.Hu),u}),Sd.apply(this,arguments)}function Va(i,e){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,N.Z)(function*(i,e){const t=Et(i);return Vl(t.localStore,e).then(o=>Qo(t,o))}),Gl.apply(this,arguments)}function Xs(i,e,t,o){return cu.apply(this,arguments)}function cu(){return cu=(0,N.Z)(function*(i,e,t,o){const u=Et(i),d=yield function(m,D){const B=Et(m),z=Et(B.Bs);return B.persistence.runTransaction("Lookup mutation documents","readonly",ce=>z.fn(ce,D).next(Se=>Se?B.ci.Ks(ce,Se):lt.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield Bl(u.remoteStore):"acknowledged"===t||"rejected"===t?(xp(u,e,o||null),Ad(u,e),D=e,Et(Et(u.localStore).Bs)._n(D)):st(),yield Qo(u,d)):j("SyncEngine","Cannot apply mutation batch with id: "+e)}),cu.apply(this,arguments)}function Co(){return Co=(0,N.Z)(function*(i,e){const t=Et(i);if(Ju(t),el(t),!0===e&&!0!==t.ha){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield tf(t,o.toArray());t.ha=!0,yield qh(t.remoteStore,!0);for(const d of u)Bh(t.remoteStore,d)}else if(!1===e&&!1!==t.ha){const o=[];let u=Promise.resolve();t.na.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(Pc(t,m),ca(t.localStore,m,!0))),Ul(t.remoteStore,m)}),yield u,yield tf(t,o),function(d){const m=Et(d);m.ra.forEach((D,B)=>{Ul(m.remoteStore,B)}),m.oa.bi(),m.ra=new Map,m.ia=new Jn($t.comparator)}(t),t.ha=!1,yield qh(t.remoteStore,!1)}}),Co.apply(this,arguments)}function tf(i,e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=(0,N.Z)(function*(i,e,t){const o=Et(i),u=[],d=[];for(const m of e){let D;const B=o.na.get(m);if(B&&0!==B.length){D=yield Fa(o.localStore,co(B[0]));for(const z of B){const ce=o.ea.get(z),Se=yield p_(o,ce);Se.snapshot&&d.push(Se.snapshot)}}else{const z=yield Sc(o.localStore,m);D=yield Fa(o.localStore,z),yield Em(o,Wl(z),m,!1)}u.push(D)}return o.ta.Qo(d),u}),Yu.apply(this,arguments)}function Wl(i){return ic(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function kc(i){const e=Et(i);return Et(Et(e.localStore).persistence).Fs()}function Nc(i,e,t,o){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,N.Z)(function*(i,e,t,o){const u=Et(i);if(u.ha)return void j("SyncEngine","Ignoring unexpected query state notification.");const d=u.na.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const m=yield Vl(u.localStore,ac(d[0])),D=iu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Qo(u,m,D);break}case"rejected":yield ca(u.localStore,e,!0),Pc(u,e,o);break;default:st()}}),Qu.apply(this,arguments)}function Fc(i,e,t){return Xu.apply(this,arguments)}function Xu(){return Xu=(0,N.Z)(function*(i,e,t){const o=Ju(i);if(o.ha){for(const u of e){if(o.na.has(u)){j("SyncEngine","Adding an already active target "+u);continue}const d=yield Sc(o.localStore,u),m=yield Fa(o.localStore,d);yield Em(o,Wl(d),m.targetId,!1),Bh(o.remoteStore,m)}for(const u of t)o.na.has(u)&&(yield ca(o.localStore,u,!1).then(()=>{Ul(o.remoteStore,u),Pc(o,u)}).catch(Fl))}}),Xu.apply(this,arguments)}function Ju(i){const e=Et(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cm.bind(null,e),e.ta.Qo=ha.bind(null,e.eventManager),e.ta.fa=Cp.bind(null,e.eventManager),e}function el(i){const e=Et(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qv.bind(null,e),e}class Pp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,N.Z)(function*(){t.M=Id(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return au(this.persistence,new Oh,e.initialUser,this.M)}wa(e){return new im(ep.zi,this.M)}_a(e){return new ip}terminate(){var e=this;return(0,N.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kp extends Pp{constructor(e,t,o){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,N.Z)(function*(){yield t().call(o,e),yield o.ya.initialize(o,e),yield el(o.ya.syncEngine),yield Bl(o.ya.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ga(e){return au(this.persistence,new Oh,e.initialUser,this.M)}ma(e){return new $v(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=xh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Qs.withCacheSize(this.cacheSizeBytes):Qs.DEFAULT;return new Na(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,sp(),Fh(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new ip}}class Sm extends kp{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,N.Z)(function*(){yield t().call(o,e);const u=o.ya.syncEngine;o.sharedClientState instanceof wd&&(o.sharedClientState.syncEngine={Mr:Xs.bind(null,u),Or:Nc.bind(null,u),Fr:Fc.bind(null,u),Fs:kc.bind(null,u),kr:Va.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var d=(0,N.Z)(function*(m){yield function ef(i,e){return Co.apply(this,arguments)}(o.ya.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):m||o.gcScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}_a(e){const t=sp();if(!wd.vt(t))throw new yt(ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=xh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wd(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class nf{initialize(e,t){var o=this;return(0,N.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>c_(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=h_.bind(null,o.syncEngine),yield qh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Oc}createDatastore(e){const t=Id(e.databaseInfo.databaseId),o=new Xy(e.databaseInfo);return new ap(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>c_(this.syncEngine,D,0),m=am.vt()?new am:new Yy,new t_(t,o,u,d,m);var t,o,u,d,m}createSyncEngine(e,t){return function(o,u,d,m,D,B,z){const ce=new a_(o,u,d,m,D,B);return z&&(ce.ha=!0),ce}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,N.Z)(function*(t){const o=Et(t);j("RemoteStore","RemoteStore shutting down."),o.fu.add(5),yield Mc(o),o._u.shutdown(),o.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Np(i,e=10240){let t=0;return{read:()=>(0,N.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,N.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Md{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mm{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Ur,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(o=>{o&&o.xu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,N.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,N.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,N.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const o=e.Ea.decode(t),u=Number(o);isNaN(u)&&e.Pa(`length string (${o}) is not valid number`);const d=yield e.ba(u);return new pm(JSON.parse(d),t.length+u)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,N.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,N.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const o=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,N.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class xm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,N.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new yt(ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,N.Z)(function*(d,m){const D=Et(d),B=Rl(D.M)+"/documents",z={documents:m.map(wt=>Fu(D.M,wt))},ce=yield D.ho("BatchGetDocuments",B,z),Se=new Map;ce.forEach(wt=>{const Dt=function fh(i,e){return"found"in e?function(t,o){Ft(!!o.found);const u=ui(t,o.found.name),d=fs(o.found.updateTime),m=new K({mapValue:{fields:o.found.fields}});return Ve.newFoundDocument(u,d,m)}(i,e):"missing"in e?function(t,o){Ft(!!o.missing),Ft(!!o.readTime);const u=ui(t,o.missing),d=fs(o.readTime);return Ve.newNoDocument(u,d)}(i,e):st()}(D.M,wt);Se.set(Dt.key.toString(),Dt)});const et=[];return m.forEach(wt=>{const Dt=Se.get(wt.toString());Ft(!!Dt),et.push(Dt)}),et}),function(d,m){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Il(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,N.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=$t.fromPath(u);e.mutations.push(new Dl(d,e.precondition(d)))}),yield(o=(0,N.Z)(function*(u,d){const m=Et(u),D=Rl(m.M)+"/documents",B={writes:d.map(z=>su(m.M,z))};yield m.oo("Commit",D,B)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=nn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new yt(ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$i.updateTime(t):$i.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nn.min()))throw new yt(ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $i.updateTime(t)}return $i.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class g_{constructor(e,t,o,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=u,this.Sa=5,this.Do=new Lh(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,N.Z)(function*(){const t=new xm(e.datastore),o=e.Ca(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.xa(d)}))}).catch(u=>{e.xa(u)})}))}Ca(e){try{const t=this.updateFunction(e);return!ds(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Pu(t)}return!1}}class Rm{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=I.UNAUTHENTICATED,this.clientId=rc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,N.Z)(function*(D){j("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(j("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,N.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new yt(ze.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,N.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=$l(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Om(i,e){return rf.apply(this,arguments)}function rf(){return rf=(0,N.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,N.Z)(function*(d){o.isEqual(d)||(yield Zf(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),rf.apply(this,arguments)}function Fp(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,N.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Vp(i);j("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>mp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>mp(e.remoteStore,d)),i.onlineComponents=e}),Lp.apply(this,arguments)}function Vp(i){return sf.apply(this,arguments)}function sf(){return sf=(0,N.Z)(function*(i){return i.offlineComponents||(j("FirestoreClient","Using default OfflineComponentProvider"),yield Om(i,new Pp)),i.offlineComponents}),sf.apply(this,arguments)}function af(i){return uf.apply(this,arguments)}function uf(){return uf=(0,N.Z)(function*(i){return i.onlineComponents||(j("FirestoreClient","Using default OnlineComponentProvider"),yield Fp(i,new nf)),i.onlineComponents}),uf.apply(this,arguments)}function Pm(i){return Vp(i).then(e=>e.persistence)}function Up(i){return Vp(i).then(e=>e.localStore)}function m_(i){return af(i).then(e=>e.remoteStore)}function Bp(i){return af(i).then(e=>e.syncEngine)}function tl(i){return xd.apply(this,arguments)}function xd(){return xd=(0,N.Z)(function*(i){const e=yield af(i),t=e.eventManager;return t.onListen=u_.bind(null,e.syncEngine),t.onUnlisten=l_.bind(null,e.syncEngine),t}),xd.apply(this,arguments)}function __(i,e,t={}){const o=new Ur;return i.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function(u,d,m,D,B){const z=new Md({next:Se=>{d.enqueueAndForget(()=>Ip(u,ce));const et=Se.docs.has(m);!et&&Se.fromCache?B.reject(new yt(ze.UNAVAILABLE,"Failed to get document because the client is offline.")):et&&Se.fromCache&&D&&"server"===D.source?B.reject(new yt(ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(Se)},error:Se=>B.reject(Se)}),ce=new Yh(No(m.path),z,{includeMetadataChanges:!0,Cu:!0});return Ep(u,ce)}(yield tl(i),i.asyncQueue,e,t,o)})),o.promise}function jp(i,e,t={}){const o=new Ur;return i.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function(u,d,m,D,B){const z=new Md({next:Se=>{d.enqueueAndForget(()=>Ip(u,ce)),Se.fromCache&&"server"===D.source?B.reject(new yt(ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(Se)},error:Se=>B.reject(Se)}),ce=new Yh(m,z,{includeMetadataChanges:!0,Cu:!0});return Ep(u,ce)}(yield tl(i),i.asyncQueue,e,t,o)})),o.promise}const $p=new Map;function Hp(i,e,t){if(!t)throw new yt(ze.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Gp(i,e,t,o){if(!0===e&&!0===o)throw new yt(ze.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Rd(i){if(!$t.isDocumentKey(i))throw new yt(ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function km(i){if($t.isDocumentKey(i))throw new yt(ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Od(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":st()}function Ir(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new yt(ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Od(i);throw new yt(ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Nm(i,e){if(e<=0)throw new yt(ze.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Fm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new yt(ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new yt(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Gp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fm({}),this._settingsFrozen=!1,e instanceof Bi?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new yt(ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bi(u.options.projectId)}(e))}get app(){if(!this._app)throw new yt(ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new yt(ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new wu;switch(t.type){case"gapi":const o=t.client;return Ft(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new nc(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new yt(ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$p.get(e);t&&(j("ComponentProvider","Removing Datastore"),$p.delete(e),t.terminate())}(this),Promise.resolve()}}class vi{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vi(this.firestore,e,this._key)}}class Js{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class fa extends Js{constructor(e,t,o){super(e,t,No(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vi(this.firestore,null,new $t(e))}withConverter(e){return new fa(this.firestore,e,this._path)}}function Wp(i,e,...t){if(i=(0,Ne.m9)(i),Hp("collection","path",e),i instanceof Pd){const o=hr.fromString(e,...t);return km(o),new fa(i,null,o)}{if(!(i instanceof vi||i instanceof fa))throw new yt(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(hr.fromString(e,...t));return km(o),new fa(i.firestore,null,o)}}function Kp(i,e,...t){if(i=(0,Ne.m9)(i),1===arguments.length&&(e=rc.R()),Hp("doc","path",e),i instanceof Pd){const o=hr.fromString(e,...t);return Rd(o),new vi(i,null,new $t(o))}{if(!(i instanceof vi||i instanceof fa))throw new yt(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(hr.fromString(e,...t));return Rd(o),new vi(i.firestore,i instanceof fa?i.converter:null,new $t(o))}}function lf(i,e){return i=(0,Ne.m9)(i),e=(0,Ne.m9)(e),(i instanceof vi||i instanceof fa)&&(e instanceof vi||e instanceof fa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Lm(i,e){return i=(0,Ne.m9)(i),e=(0,Ne.m9)(e),i instanceof Js&&e instanceof Js&&i.firestore===e.firestore&&Fo(i._query,e._query)&&i.converter===e.converter}class Xv{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Lh(this,"async_queue_retry"),this.qa=()=>{const t=Fh();t&&j("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Fh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Fh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Ur;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,N.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Uu(t))throw t;j("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(o=>{throw this.$a=o,this.Ba=!1,ie("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(o)),o}).then(o=>(this.Ba=!1,o))));return this.ka=t,t}enqueueAfterDelay(e,t,o){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const u=_p.createAndSchedule(this,e,t,o,d=>this.ja(d));return this.Fa.push(u),u}Ka(){this.$a&&st()}verifyOperationInProgress(){}Wa(){var e=this;return(0,N.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function zl(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Vm{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ei extends Pd{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new Xv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cf(this),this._firestoreClient.terminate()}}function Gi(i){return i._firestoreClient||cf(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function cf(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ho(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new Rm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function kd(i,e,t){const o=new Ur;return i.asyncQueue.enqueue((0,N.Z)(function*(){try{yield Om(i,t),yield Fp(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(d=u).name?d.code===ze.FAILED_PRECONDITION||d.code===ze.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var d})).then(()=>o.promise)}function Xp(i){if(i._initialized||i._terminated)throw new yt(ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new yt(ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new is(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pa(Xn.fromBase64String(e))}catch(t){throw new yt(ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pa(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hu{constructor(e){this._methodName=e}}class Nd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yt(ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yt(ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vn(this._lat,e._lat)||Vn(this._long,e._long)}}const T_=/^__.*__$/;class $m{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class Jp{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Vc{constructor(e,t,o,u,d,m){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===d&&this.Ya(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Vc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.nc(e),u}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.Ya(),u}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Ld(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(eg(this.Xa)&&T_.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Hm{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||Id(e)}ac(e,t,o,u=!1){return new Vc({Xa:e,methodName:t,uc:o,path:is.emptyPath(),ec:!1,oc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function nl(i){const e=i._freezeSettings(),t=Id(i._databaseId);return new Hm(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Fd(i,e,t,o,u,d={}){const m=i.ac(d.merge||d.mergeFields?2:0,e,t,u);og("Data must be an object, but it was:",m,o);const D=ps(o,m);let B,z;if(d.merge)B=new Ws(m.fieldMask),z=m.fieldTransforms;else if(d.mergeFields){const ce=[];for(const Se of d.mergeFields){const et=ag(e,Se,t);if(!m.contains(et))throw new yt(ze.INVALID_ARGUMENT,`Field '${et}' is specified in your field mask but missing from your input data.`);ug(ce,et)||ce.push(et)}B=new Ws(ce),z=m.fieldTransforms.filter(Se=>B.covers(Se.field))}else B=null,z=m.fieldTransforms;return new $m(new K(D),B,z)}class Uc extends hu{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uc}}function tg(i,e,t){return new Vc({Xa:3,uc:e.settings.uc,methodName:i._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class hf extends hu{_toFieldTransform(e){return new Ru(e.path,new Ja)}isEqual(e){return e instanceof hf}}class Gm extends hu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=tg(this,e,!0),o=this.cc.map(d=>Kl(d,t)),u=new eu(o);return new Ru(e.path,u)}isEqual(e){return this===e}}class Wm extends hu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=tg(this,e,!0),o=this.cc.map(d=>Kl(d,t)),u=new xu(o);return new Ru(e.path,u)}isEqual(e){return this===e}}class t0 extends hu{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new _l(e.M,th(e.M,this.hc));return new Ru(e.path,t)}isEqual(e){return this===e}}function ng(i,e,t,o){const u=i.ac(1,e,t);og("Data must be an object, but it was:",u,o);const d=[],m=K.empty();Ka(o,(B,z)=>{const ce=ff(e,B,t);z=(0,Ne.m9)(z);const Se=u.sc(ce);if(z instanceof Uc)d.push(ce);else{const et=Kl(z,Se);null!=et&&(d.push(ce),m.set(ce,et))}});const D=new Ws(d);return new Jp(m,D,u.fieldTransforms)}function rg(i,e,t,o,u,d){const m=i.ac(1,e,t),D=[ag(e,o,t)],B=[u];if(d.length%2!=0)throw new yt(ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let et=0;et<d.length;et+=2)D.push(ag(e,d[et])),B.push(d[et+1]);const z=[],ce=K.empty();for(let et=D.length-1;et>=0;--et)if(!ug(z,D[et])){const wt=D[et];let Dt=B[et];Dt=(0,Ne.m9)(Dt);const an=m.sc(wt);if(Dt instanceof Uc)z.push(wt);else{const Gn=Kl(Dt,an);null!=Gn&&(z.push(wt),ce.set(wt,Gn))}}const Se=new Ws(z);return new Jp(ce,Se,m.fieldTransforms)}function ig(i,e,t,o=!1){return Kl(t,i.ac(o?4:3,e))}function Kl(i,e){if(sg(i=(0,Ne.m9)(i)))return og("Unsupported field value:",e,i),ps(i,e);if(i instanceof hu)return function(t,o){if(!eg(o.Xa))throw o.rc(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.rc(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const m of t){let D=Kl(m,o.ic(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Ne.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return th(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Pi.fromDate(t);return{timestampValue:Sl(o.M,u)}}if(t instanceof Pi){const u=new Pi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sl(o.M,u)}}if(t instanceof Nd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pa)return{bytesValue:Vo(o.M,t._byteString)};if(t instanceof vi){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.rc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ml(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.rc(`Unsupported field value: ${Od(t)}`)}(i,e)}function ps(i,e){const t={};return Qc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(i,(o,u)=>{const d=Kl(u,e.tc(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function sg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Pi||i instanceof Nd||i instanceof pa||i instanceof vi||i instanceof hu)}function og(i,e,t){if(!sg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Od(t);throw e.rc("an object"===o?i+" a custom object":i+" "+o)}var o}function ag(i,e,t){if((e=(0,Ne.m9)(e))instanceof du)return e._internalPath;if("string"==typeof e)return ff(i,e);throw Ld("Field path arguments must be of type string or ",i,!1,void 0,t)}const zm=new RegExp("[~\\*/\\[\\]]");function ff(i,e,t){if(e.search(zm)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new du(...e.split("."))._internalPath}catch(o){throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Ld(i,e,t,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let B="";return(d||m)&&(B+=" (found",d&&(B+=` in field ${o}`),m&&(B+=` in document ${u}`),B+=")"),new yt(ze.INVALID_ARGUMENT,D+i+B)}function ug(i,e){return i.some(t=>t.isEqual(e))}class Ua{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new vi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new A_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class A_ extends Ua{data(){return super.data()}}function pf(i,e){return"string"==typeof e?ff(i,e):e instanceof du?e._internalPath:e._delegate._internalPath}class rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fu extends Ua{constructor(e,t,o,u,d,m){super(e,t,o,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(pf("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Bc extends fu{data(e={}){return super.data(e)}}class ql{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new rl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Bc(this._firestore,this._userDataWriter,o.key,o,new rl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yt(ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>({type:"added",doc:new Bc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new rl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const D=new Bc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new rl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let B=-1,z=-1;return 0!==m.type&&(B=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),z=d.indexOf(m.doc.key)),{type:Km(m.type),doc:D,oldIndex:B,newIndex:z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Km(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function gf(i,e){return i instanceof fu&&e instanceof fu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ql&&e instanceof ql&&i._firestore===e._firestore&&Lm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ga(i){if(Au(i)&&0===i.explicitOrderBy.length)throw new yt(ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vd{}function il(i,...e){for(const t of e)i=t._apply(i);return i}class Ba extends Vd{constructor(e,t,o){super(),this.lc=e,this.fc=t,this.dc=o,this.type="where"}_apply(e){const t=nl(e.firestore),o=function(u,d,m,D,B,z,ce){let Se;if(B.isKeyField()){if("array-contains"===z||"array-contains-any"===z)throw new yt(ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${z}' queries on documentId().`);if("in"===z||"not-in"===z){hg(ce,z);const wt=[];for(const Dt of ce)wt.push(dg(D,u,Dt));Se={arrayValue:{values:wt}}}else Se=dg(D,u,ce)}else"in"!==z&&"not-in"!==z&&"array-contains-any"!==z||hg(ce,z),Se=ig(m,"where",ce,"in"===z||"not-in"===z);const et=Ni.create(B,z,Se);return function(wt,Dt){if(Dt.S()){const Gn=Su(wt);if(null!==Gn&&!Gn.isEqual(Dt.field))throw new yt(ze.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Gn.toString()}' and '${Dt.field.toString()}'`);const wi=Xd(wt);null!==wi&&Ud(0,Dt.field,wi)}const an=function(Gn,wi){for(const Mi of Gn.filters)if(wi.indexOf(Mi.op)>=0)return Mi.op;return null}(wt,function(Gn){switch(Gn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Dt.op));if(null!==an)throw new yt(ze.INVALID_ARGUMENT,an===Dt.op?`Invalid query. You cannot use more than one '${Dt.op.toString()}' filter.`:`Invalid query. You cannot use '${Dt.op.toString()}' filters with '${an.toString()}' filters.`)}(u,et),et}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Js(e.firestore,e.converter,function(u,d){const m=u.filters.concat([d]);return new Eo(u.path,u.collectionGroup,u.explicitOrderBy.slice(),m,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class ya extends Vd{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new yt(ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new yt(ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new ml(u,d);return function(D,B){if(null===Xd(D)){const z=Su(D);null!==z&&Ud(0,z,B.field)}}(o,m),m}(e._query,this.lc,this._c);return new Js(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Eo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class lg extends Vd{constructor(e,t,o){super(),this.type=e,this.wc=t,this.mc=o}_apply(e){return new Js(e.firestore,e.converter,oc(e._query,this.wc,this.mc))}}class Zm extends Vd{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new Js(e.firestore,e.converter,(u=t,new Eo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class jc extends Vd{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new Js(e.firestore,e.converter,(u=t,new Eo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function Qm(i,e,t,o){if(t[0]=(0,Ne.m9)(t[0]),t[0]instanceof Ua)return function(u,d,m,D,B){if(!D)throw new yt(ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const z=[];for(const ce of Qa(u))if(ce.field.isKeyField())z.push(Po(d,D.key));else{const Se=D.data.field(ce.field);if(Ji(Se))throw new yt(ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ce.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Se){const et=ce.field.canonicalString();throw new yt(ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${et}' (used as the orderBy) does not exist.`)}z.push(Se)}return new ko(z,B)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=nl(i.firestore);return function(d,m,D,B,z,ce){const Se=d.explicitOrderBy;if(z.length>Se.length)throw new yt(ze.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const et=[];for(let wt=0;wt<z.length;wt++){const Dt=z[wt];if(Se[wt].field.isKeyField()){if("string"!=typeof Dt)throw new yt(ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof Dt}`);if(!yl(d)&&-1!==Dt.indexOf("/"))throw new yt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${Dt}' contains a slash.`);const an=d.path.child(hr.fromString(Dt));if(!$t.isDocumentKey(an))throw new yt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${an}' is not because it contains an odd number of segments.`);const Gn=new $t(an);et.push(Po(m,Gn))}else{const an=ig(D,B,Dt);et.push(an)}}return new ko(et,ce)}(i._query,i.firestore._databaseId,u,e,t,o)}}function dg(i,e,t){if("string"==typeof(t=(0,Ne.m9)(t))){if(""===t)throw new yt(ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yl(e)&&-1!==t.indexOf("/"))throw new yt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(hr.fromString(t));if(!$t.isDocumentKey(o))throw new yt(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Po(i,new $t(o))}if(t instanceof vi)return Po(i,t._key);throw new yt(ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Od(t)}.`)}function hg(i,e){if(!Array.isArray(i)||0===i.length)throw new yt(ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new yt(ze.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ud(i,e,t){if(!t.isEqual(e))throw new yt(ze.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fg{convertValue(e,t="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const o={};return Ka(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Nd(Ai(e.latitude),Ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Vs(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ta(e));default:return null}}convertTimestamp(e){const t=Ls(e);return new Pi(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=hr.fromString(e);Ft(Tn(o));const u=new Bi(o.get(1),o.get(3)),d=new $t(o.popFirst(5));return u.isEqual(t)||ie(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Bd(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Xm extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new pa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,t)}}class mf{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nl(e)}set(e,t,o){this._verifyNotCommitted();const u=_a(e,this._firestore),d=Bd(u.converter,t,o),m=Fd(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,$i.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=_a(e,this._firestore);let m;return m="string"==typeof(t=(0,Ne.m9)(t))||t instanceof du?rg(this._dataReader,"WriteBatch.update",d._key,t,o,u):ng(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,$i.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_a(e,this._firestore);return this._mutations=this._mutations.concat(new Il(t._key,$i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new yt(ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _a(i,e){if((i=(0,Ne.m9)(i)).firestore!==e)throw new yt(ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class sl extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new pa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,t)}}function pg(i,e,t){i=Ir(i,vi);const o=Ir(i.firestore,Ei),u=Bd(i.converter,e,t);return $c(o,[Fd(nl(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,$i.none())])}function sy(i,e,t,...o){i=Ir(i,vi);const u=Ir(i.firestore,Ei),d=nl(u);let m;return m="string"==typeof(e=(0,Ne.m9)(e))||e instanceof du?rg(d,"updateDoc",i._key,e,t,o):ng(d,"updateDoc",i._key,e),$c(u,[m.toMutation(i._key,$i.exists(!0))])}function oy(i,...e){var t,o,u;i=(0,Ne.m9)(i);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||zl(e[m])||(d=e[m],m++);const D={includeMetadataChanges:d.includeMetadataChanges};if(zl(e[m])){const Se=e[m];e[m]=null===(t=Se.next)||void 0===t?void 0:t.bind(Se),e[m+1]=null===(o=Se.error)||void 0===o?void 0:o.bind(Se),e[m+2]=null===(u=Se.complete)||void 0===u?void 0:u.bind(Se)}let B,z,ce;if(i instanceof vi)z=Ir(i.firestore,Ei),ce=No(i._key.path),B={next:Se=>{e[m]&&e[m](gg(z,i,Se))},error:e[m+1],complete:e[m+2]};else{const Se=Ir(i,Js);z=Ir(Se.firestore,Ei),ce=Se._query;const et=new sl(z);B={next:wt=>{e[m]&&e[m](new ql(z,et,Se,wt))},error:e[m+1],complete:e[m+2]},ga(i._query)}return function(Se,et,wt,Dt){const an=new Md(Dt),Gn=new Yh(et,an,wt);return Se.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return Ep(yield tl(Se),Gn)})),()=>{an.Ia(),Se.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return Ip(yield tl(Se),Gn)}))}}(Gi(z),ce,D,B)}function $c(i,e){return function(t,o){const u=new Ur;return t.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function wm(i,e,t){return Im.apply(this,arguments)}(yield Bp(t),o,u)})),u.promise}(Gi(i),e)}function gg(i,e,t){const o=t.docs.get(e._key),u=new sl(i);return new fu(i,u,e._key,o,new rl(t.hasPendingWrites,t.fromCache),e.converter)}class N_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=nl(e)}get(e){const t=_a(e,this._firestore),o=new Xm(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return st();const d=u[0];if(d.isFoundDocument())return new Ua(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new Ua(this._firestore,o,t._key,null,t.converter);throw st()})}set(e,t,o){const u=_a(e,this._firestore),d=Bd(u.converter,t,o),m=Fd(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,m),this}update(e,t,o,...u){const d=_a(e,this._firestore);let m;return m="string"==typeof(t=(0,Ne.m9)(t))||t instanceof du?rg(this._dataReader,"Transaction.update",d._key,t,o,u):ng(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=_a(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_a(e,this._firestore),o=new sl(this._firestore);return super.get(e).then(u=>new fu(this._firestore,o,t._key,u._document,new rl(!1,!1),t.converter))}}function yf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new yt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function mg(){if("undefined"==typeof Uint8Array)throw new yt("unimplemented","Uint8Arrays are not available in this environment.")}function yg(){if(!function Kd(){return"undefined"!=typeof atob}())throw new yt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){E=ne.SDK_VERSION,(0,ne._registerComponent)(new ue.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Ei(u,new Iu(t.getProvider("auth-internal")),new Du(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC")),(0,ne.registerVersion)(Eu,"3.4.8",i),(0,ne.registerVersion)(Eu,"3.4.8","esm2017")}();class Hc{constructor(e){this._delegate=e}static fromBase64String(e){return yg(),new Hc(pa.fromBase64String(e))}static fromUint8Array(e){return mg(),new Hc(pa.fromUint8Array(e))}toBase64(){return yg(),this._delegate.toBase64()}toUint8Array(){return mg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _f(i){return function ly(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class cy{enableIndexedDbPersistence(e,t){return function e0(i,e){Xp(i=Ir(i,Ei));const t=Gi(i),o=i._freezeSettings(),u=new nf;return kd(t,u,new kp(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function D_(i){Xp(i=Ir(i,Ei));const e=Gi(i),t=i._freezeSettings(),o=new nf;return kd(e,o,new Sm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function df(i){if(i._initialized&&!i._terminated)throw new yt(ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return i._queue.enqueueAndForgetEvenWhileRestricted((0,N.Z)(function*(){try{yield(t=(0,N.Z)(function*(o){if(!ua.vt())return Promise.resolve();const u=o+"main";yield ua.delete(u)}),function(o){return t.apply(this,arguments)})(xh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _g{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Bi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&De("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function I_(i,e,t,o={}){var u;const d=(i=Ir(i,Pd))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&De("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let m,D;if("string"==typeof o.mockUserToken)m=o.mockUserToken,D=I.MOCK_USER;else{m=(0,Ne.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const B=o.mockUserToken.sub||o.mockUserToken.user_id;if(!B)throw new yt(ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new I(B)}i._authCredentials=new mo(new Es(m,D))}}(this._delegate,e,t,o)}enableNetwork(){return function Bm(i){return function y_(i){return i.asyncQueue.enqueue((0,N.Z)(function*(){const e=yield Pm(i),t=yield m_(i);return e.setNetworkEnabled(!0),function(o){const u=Et(o);return u.fu.delete(0),Vh(u)}(t)}))}(Gi(i=Ir(i,Ei)))}(this._delegate)}disableNetwork(){return function Yp(i){return function Zv(i){return i.asyncQueue.enqueue((0,N.Z)(function*(){const e=yield Pm(i),t=yield m_(i);return e.setNetworkEnabled(!1),(o=(0,N.Z)(function*(u){const d=Et(u);d.fu.add(0),yield Mc(d),d.wu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Gi(i=Ir(i,Ei)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Gp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Um(i){return function(e){const t=new Ur;return e.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function Sp(i,e){return Mp.apply(this,arguments)}(yield Bp(e),t)})),t.promise}(Gi(i=Ir(i,Ei)))}(this._delegate)}onSnapshotsInSync(e){return function k_(i,e){return function Qv(i,e){const t=new Md(e);return i.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return o=yield tl(i),u=t,Et(o).Eu.add(u),void u.next();var o,u})),()=>{t.Ia(),i.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return o=yield tl(i),u=t,void Et(o).Eu.delete(u);var o,u}))}}(Gi(i=Ir(i,Ei)),zl(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new yt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zc(this,Wp(this._delegate,e))}catch(t){throw bo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Us(this,Kp(this._delegate,e))}catch(t){throw bo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new To(this,function zp(i,e){if(i=Ir(i,Pd),Hp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new yt(ze.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Js(i,null,(t=e,new Eo(hr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F_(i,e){return function E_(i,e){const t=new Ur;return i.asyncQueue.enqueueAndForget((0,N.Z)(function*(){const o=yield(u=i,af(u).then(d=>d.datastore));var u;new g_(i.asyncQueue,o,e,t).run()})),t.promise}(Gi(i=Ir(i,Ei)),t=>e(new N_(i,t)))}(this._delegate,t=>e(new ol(this,t)))}batch(){return Gi(this._delegate),new hy(new mf(this._delegate,e=>$c(this._delegate,e)))}loadBundle(e){return function jm(i,e){const t=Gi(i=Ir(i,Ei)),o=new Vm;return function Lc(i,e,t,o){const u=function(d,m){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,B=function(B,z){if(B instanceof Uint8Array)return Np(B,z);if(B instanceof ArrayBuffer)return Np(new Uint8Array(B),z);if(B instanceof ReadableStream)return B.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Mm(B,m);var B}(t,Id(e));i.asyncQueue.enqueueAndForget((0,N.Z)(function*(){!function Am(i,e,t){const o=Et(i);var u;(u=(0,N.Z)(function*(d,m,D){try{const B=yield m.getMetadata();if(yield function(et,wt){const Dt=Et(et),an=fs(wt.createTime);return Dt.persistence.runTransaction("hasNewerBundle","readonly",Gn=>Dt._s.getBundleMetadata(Gn,wt.id)).then(Gn=>!!Gn&&Gn.createTime.compareTo(an)>=0)}(d.localStore,B))return yield m.close(),D._completeWith({taskState:"Success",documentsLoaded:(et=B).totalDocuments,bytesLoaded:et.totalBytes,totalDocuments:et.totalDocuments,totalBytes:et.totalBytes}),Promise.resolve(new Set);D._updateProgress(gm(B));const z=new o_(B,d.localStore,m.M);let ce=yield m.da();for(;ce;){const et=yield z.ku(ce);et&&D._updateProgress(et),ce=yield m.da()}const Se=yield z.complete();return yield Qo(d,Se.Fu,void 0),yield function(et,wt){const Dt=Et(et);return Dt.persistence.runTransaction("Save bundle","readwrite",an=>Dt._s.saveBundleMetadata(an,wt))}(d.localStore,B),D._completeWith(Se.progress),Promise.resolve(Se.Ou)}catch(B){return De("SyncEngine",`Loading bundle failed with ${B}`),D._failWith(B),Promise.resolve(new Set)}var et}),function(d,m,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Bp(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Qp(i,e){return function w_(i,e){return i.asyncQueue.enqueue((0,N.Z)(function*(){return function(t,o){const u=Et(t);return u.persistence.runTransaction("Get named query","readonly",d=>u._s.getNamedQuery(d,o))}(yield Up(i),e)}))}(Gi(i=Ir(i,Ei)),e).then(t=>t?new Js(i,null,t.query):null)}(this._delegate,e).then(t=>t?new To(this,t):null)}}class jd extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hc(new pa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Us.forKey(t,this.firestore,null)}}class ol{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}get(e){const t=Yl(e);return this._delegate.get(t).then(o=>new Gc(this._firestore,new fu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Yl(e);return o?(yf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Yl(e);return this._delegate.delete(t),this}}class hy{constructor(e){this._delegate=e}set(e,t,o){const u=Yl(e);return o?(yf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Yl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Bc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wc(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Zl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Zl(e,new jd(e),t),u.set(t,d)),d}}Zl.INSTANCES=new WeakMap;class Us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new yt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Us(t,new vi(t._delegate,o,new $t(e)))}static forKey(e,t,o){return new Us(t,new vi(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new zc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zc(this.firestore,Wp(this._delegate,e))}catch(t){throw bo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ne.m9)(e))instanceof vi&&lf(this._delegate,e)}set(e,t){t=yf("DocumentReference.set",t);try{return t?pg(this._delegate,e,t):pg(this._delegate,e)}catch(o){throw bo(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?sy(this._delegate,e):sy(this._delegate,e,t,...o)}catch(u){throw bo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function O_(i){return $c(Ir(i.firestore,Ei),[new Il(i._key,$i.none())])}(this._delegate)}onSnapshot(...e){const t=vf(e),o=H_(e,u=>new Gc(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return oy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ey(i){i=Ir(i,vi);const e=Ir(i.firestore,Ei),t=Gi(e),o=new sl(e);return function Yv(i,e){const t=new Ur;return i.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return(o=(0,N.Z)(function*(u,d,m){try{const D=yield function(B,z){const ce=Et(B);return ce.persistence.runTransaction("read document","readonly",Se=>ce.ci.Ls(Se,z))}(u,d);D.isFoundDocument()?m.resolve(D):D.isNoDocument()?m.resolve(null):m.reject(new yt(ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const B=$l(D,`Failed to get document '${d} from cache`);m.reject(B)}}),function(u,d,m){return o.apply(this,arguments)})(yield Up(i),e,t);var o})),t.promise}(t,i._key).then(u=>new fu(e,o,i._key,u,new rl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ty(i){i=Ir(i,vi);const e=Ir(i.firestore,Ei);return __(Gi(e),i._key,{source:"server"}).then(t=>gg(e,i,t))}(this._delegate):function Jm(i){i=Ir(i,vi);const e=Ir(i.firestore,Ei);return __(Gi(e),i._key).then(t=>gg(e,i,t))}(this._delegate),t.then(o=>new Gc(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Us(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function bo(i,e,t){return i.message=i.message.replace(e,t),i}function vf(i){for(const e of i)if("object"==typeof e&&!_f(e))return e;return{}}function H_(i,e){var t,o;let u;return u=_f(i[0])?i[0]:_f(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Gc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Us(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gf(this._delegate,e._delegate)}}class Wc extends Gc{data(e){const t=this._delegate.data(e);return function dn(i,e){i||st()}(void 0!==t),t}}class To{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}where(e,t,o){try{return new To(this.firestore,il(this._delegate,function ma(i,e,t){const o=e,u=pf("where",i);return new Ba(u,o,t)}(e,t,o)))}catch(u){throw bo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new To(this.firestore,il(this._delegate,function qm(i,e="asc"){const t=e,o=pf("orderBy",i);return new ya(o,t)}(e,t)))}catch(o){throw bo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new To(this.firestore,il(this._delegate,function S_(i){return Nm("limit",i),new lg("limit",i,"F")}(e)))}catch(t){throw bo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new To(this.firestore,il(this._delegate,function M_(i){return Nm("limitToLast",i),new lg("limitToLast",i,"L")}(e)))}catch(t){throw bo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new To(this.firestore,il(this._delegate,function x_(...i){return new Zm("startAt",i,!0)}(...e)))}catch(t){throw bo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new To(this.firestore,il(this._delegate,function cg(...i){return new Zm("startAfter",i,!1)}(...e)))}catch(t){throw bo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new To(this.firestore,il(this._delegate,function R_(...i){return new jc("endBefore",i,!1)}(...e)))}catch(t){throw bo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new To(this.firestore,il(this._delegate,function Ym(...i){return new jc("endAt",i,!0)}(...e)))}catch(t){throw bo(t,"endAt()","Query.endAt()")}}isEqual(e){return Lm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ry(i){i=Ir(i,Js);const e=Ir(i.firestore,Ei),t=Gi(e),o=new sl(e);return function v_(i,e){const t=new Ur;return i.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return(o=(0,N.Z)(function*(u,d,m){try{const D=yield uu(u,d,!0),B=new Tp(d,D.li),z=B.Gu(D.documents),ce=B.applyChanges(z,!1);m.resolve(ce.snapshot)}catch(D){const B=$l(D,`Failed to execute query '${d} against cache`);m.reject(B)}}),function(u,d,m){return o.apply(this,arguments)})(yield Up(i),e,t);var o})),t.promise}(t,i._query).then(u=>new ql(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function iy(i){i=Ir(i,Js);const e=Ir(i.firestore,Ei),t=Gi(e),o=new sl(e);return jp(t,i._query,{source:"server"}).then(u=>new ql(e,o,i,u))}(this._delegate):function ny(i){i=Ir(i,Js);const e=Ir(i.firestore,Ei),t=Gi(e),o=new sl(e);return ga(i._query),jp(t,i._query).then(u=>new ql(e,o,i,u))}(this._delegate),t.then(o=>new vg(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=vf(e),o=H_(e,u=>new vg(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return oy(this._delegate,t,o)}withConverter(e){return new To(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}class xn{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Wc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new To(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xn(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Wc(this._firestore,o))})}isEqual(e){return gf(this._delegate,e._delegate)}}class zc extends To{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Us(this.firestore,e):null}doc(e){try{return new Us(this.firestore,void 0===e?Kp(this._delegate):Kp(this._delegate,e))}catch(t){throw bo(t,"doc()","CollectionReference.doc()")}}add(e){return function P_(i,e){const t=Ir(i.firestore,Ei),o=Kp(i),u=Bd(i.converter,e);return $c(t,[Fd(nl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,$i.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Us(this.firestore,t))}isEqual(e){return lf(this._delegate,e._delegate)}withConverter(e){return new zc(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function Yl(i){return Ir(i,vi)}class Kc{constructor(...e){this._delegate=new du(...e)}static documentId(){return new Kc(is.keyField().canonicalString())}isEqual(e){return(e=(0,Ne.m9)(e))instanceof du&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ql{constructor(e){this._delegate=e}static serverTimestamp(){const e=function V_(){return new hf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ql(e)}static delete(){const e=function L_(){return new Uc("deleteField")}();return e._methodName="FieldValue.delete",new Ql(e)}static arrayUnion(...e){const t=function U_(...i){return new Gm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Ql(t)}static arrayRemove(...e){const t=function B_(...i){return new Wm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Ql(t)}static increment(e){const t=function j_(i){return new t0("increment",i)}(e);return t._methodName="FieldValue.increment",new Ql(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ef={Firestore:_g,GeoPoint:Nd,Timestamp:Pi,Blob:Hc,Transaction:ol,WriteBatch:hy,DocumentReference:Us,DocumentSnapshot:Gc,Query:To,QueryDocumentSnapshot:Wc,QuerySnapshot:vg,CollectionReference:zc,FieldPath:Kc,FieldValue:Ql,setLogLevel:function dy(i){!function F(i){_.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function ts(i){(function wf(i,e){i.INTERNAL.registerComponent(new ue.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},Ef)))})(i,(e,t)=>new _g(e,t,new cy)),i.registerVersion("@firebase/firestore-compat","0.1.17")}($.Z);var Xl=R(1205),fy=R(440),G_=R(127);function Eg(i,e){return function W_(i,e=H.z){return new Z.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function If(i,e){return Eg(i,e).pipe((0,Ge.U)(t=>({payload:t,type:"query"})))}function $d(i,e){return If(i,e).pipe((0,je.O)(void 0),Fe(),(0,Ge.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((m,D)=>{const B=u.find(ce=>ce.doc.ref.isEqual(m.ref)),z=null==t?void 0:t.payload.docs.find(ce=>ce.ref.isEqual(m.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(m.metadata)||!B&&z&&JSON.stringify(z.metadata)===JSON.stringify(m.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:m}})}),d}))}function gy(i,e,t){return $d(i,t).pipe((0,Ze.R)((o,u)=>function z_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Hd(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return wg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function re(i,e=le.y){return i=null!=i?i:me,(0,be.e)((t,o)=>{let u,d=!0;t.subscribe((0,ye.x)(o,m=>{const D=e(m);(d||!i(u,D))&&(d=!1,u=D,o.next(m))}))})}(),(0,Ge.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function wg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function my(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class yy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=$d(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ge.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,je.O)(void 0),Fe(),(0,mt.h)(([o,u])=>u.length>0||!o),(0,Ge.U)(([o,u])=>u),we.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ze.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(e={}){return If(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),we.iC)}get(e){return(0,_e.D)(this.query.get(e)).pipe(we.iC)}add(e){return this.ref.add(e)}doc(e){return new _y(this.ref.doc(e),this.afs)}}class _y{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=qc(o,t);return new yy(u,d,this.afs)}snapshotChanges(){return function py(i,e){return Eg(i,e).pipe((0,je.O)(void 0),Fe(),(0,Ge.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ge.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_e.D)(this.ref.get(e)).pipe(we.iC)}}class Df{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$d(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,mt.h)(t=>t.length>0),we.iC):$d(this.query,this.afs.schedulers.outsideAngular).pipe(we.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ze.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(e={}){return If(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),we.iC)}get(e){return(0,_e.D)(this.query.get(e)).pipe(we.iC)}}const Ig=new p.OlP("angularfire2.enableFirestorePersistence"),Dg=new p.OlP("angularfire2.firestore.persistenceSettings"),vy=new p.OlP("angularfire2.firestore.settings"),K_=new p.OlP("angularfire2.firestore.use-emulator");function qc(i,e=(t=>t)){return{query:e(i),ref:i}}let Zc=(()=>{class i{constructor(t,o,u,d,m,D,B,z,ce,Se,et,wt,Dt,an,Gn,wi,Mi){this.schedulers=B;const li=(0,Le.on)(t,D,o),gs=ce;Se&&(0,Xl.nw)(li,D,et,Dt,an,Gn,wt,wi),[this.firestore,this.persistenceEnabled$]=(0,Le.cc)(`${li.name}.firestore`,"AngularFirestore",li.name,()=>{const xi=D.runOutsideAngular(()=>li.firestore());if(d&&xi.settings(d),gs&&xi.useEmulator(...gs),u&&!(0,ke.PM)(m)){const Wi=()=>{try{return(0,_e.D)(xi.enablePersistence(z||void 0).then(()=>!0,()=>!1))}catch(eo){return"undefined"!=typeof console&&console.warn(eo),(0,pe.of)(!1)}};return[xi,D.runOutsideAngular(Wi)]}return[xi,(0,pe.of)(!1)]},[d,gs,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:m}=qc(u,o),D=this.schedulers.ngZone.run(()=>d);return new yy(D,m,this)}collectionGroup(t,o){const u=o||(m=>m),d=this.firestore.collectionGroup(t);return new Df(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new _y(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Le.Dh),p.LFG(Le.xv,8),p.LFG(Ig,8),p.LFG(vy,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(we.HU),p.LFG(Dg,8),p.LFG(K_,8),p.LFG(Xl.zQ,8),p.LFG(Xl.Qv,8),p.LFG(Xl.L6,8),p.LFG(Xl._Q,8),p.LFG(Xl.rT,8),p.LFG(Xl.lh,8),p.LFG(Xl.f7,8),p.LFG(fy.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),q_=(()=>{class i{constructor(){G_.Z.registerVersion("angularfire",we.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:Ig,useValue:!0},{provide:Dg,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[Zc]}),i})()},4585:(Pt,We,R)=>{R.d(We,{Q1:()=>q,TE:()=>mr});var p=R(9751),H=R(9646),Z=R(8996),_e=R(8372),pe=R(4004),we=R(3900),be=R(5813),ye=R(5e3),Fe=R(2011),le=R(3942),re=R(5861),me=R(9681),je=R(2090),Ge=R(4859);const Ze="firebasestorage.googleapis.com",mt="storageBucket";class at extends je.ZR{constructor(O,ee){super($(O),`Firebase Storage: ${ee} (${$(O)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,at.prototype)}_codeEquals(O){return $(O)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(O){this.customData.serverResponse=O,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function $(L){return"storage/"+L}function N(){return new at("unknown","An unknown error occurred, please check the error payload for server response.")}function X(){return new at("canceled","User canceled the upload/download.")}function Be(){return new at("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ot(L){return new at("invalid-argument",L)}function gt(){return new at("app-deleted","The Firebase app was deleted.")}function bt(L){return new at("invalid-root-operation","The operation '"+L+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ut(L,O){return new at("invalid-format","String does not match format '"+L+"': "+O)}function St(L){throw new at("internal-error","Internal error: "+L)}class Mt{constructor(O,ee){this.bucket=O,this.path_=ee}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const O=encodeURIComponent;return"/b/"+O(this.bucket)+"/o/"+O(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(O,ee){let Q;try{Q=Mt.makeFromUrl(O,ee)}catch(ve){return new Mt(O,"")}if(""===Q.path)return Q;throw function ae(L){return new at("invalid-default-bucket","Invalid default bucket '"+L+"'.")}(O)}static makeFromUrl(O,ee){let Q=null;const ve="([A-Za-z0-9.\\-_]+)",sn=new RegExp("^gs://"+ve+"(/(.*))?$","i");function vn(yr){yr.path_=decodeURIComponent(yr.path)}const Fr=ee.replace(/[.]/g,"\\."),kr=[{regex:sn,indices:{bucket:1,path:3},postModify:function Xe(yr){"/"===yr.path.charAt(yr.path.length-1)&&(yr.path_=yr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Fr}/v[A-Za-z0-9_]+/b/${ve}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:vn},{regex:new RegExp(`^https?://${ee===Ze?"(?:storage.googleapis.com|storage.cloud.google.com)":ee}/${ve}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:vn}];for(let yr=0;yr<kr.length;yr++){const _s=kr[yr],Yi=_s.regex.exec(O);if(Yi){let wr=Yi[_s.indices.path];wr||(wr=""),Q=new Mt(Yi[_s.indices.bucket],wr),_s.postModify(Q);break}}if(null==Q)throw function Oe(L){return new at("invalid-url","Invalid URL '"+L+"'.")}(O);return Q}}class ht{constructor(O){this.promise_=Promise.reject(O)}getPromise(){return this.promise_}cancel(O=!1){}}function er(L){return"string"==typeof L||L instanceof String}function ct(L){return zt()&&L instanceof Blob}function zt(){return"undefined"!=typeof Blob}function qt(L,O,ee,Q){if(Q<O)throw Ot(`Invalid value for '${L}'. Expected ${O} or greater.`);if(Q>ee)throw Ot(`Invalid value for '${L}'. Expected ${ee} or less.`)}function An(L,O,ee){let Q=O;return null==ee&&(Q=`https://${O}`),`${ee}://${Q}/v0${L}`}function kn(L){const O=encodeURIComponent;let ee="?";for(const Q in L)L.hasOwnProperty(Q)&&(ee=ee+(O(Q)+"=")+O(L[Q])+"&");return ee=ee.slice(0,-1),ee}var Bt=(()=>{return(L=Bt||(Bt={}))[L.NO_ERROR=0]="NO_ERROR",L[L.NETWORK_ERROR=1]="NETWORK_ERROR",L[L.ABORT=2]="ABORT",Bt;var L})();class un{constructor(O,ee,Q,ve,Xe,ft,sn,Ht,vn,Yn,Fr){this.url_=O,this.method_=ee,this.headers_=Q,this.body_=ve,this.successCodes_=Xe,this.additionalRetryCodes_=ft,this.callback_=sn,this.errorCallback_=Ht,this.timeout_=vn,this.progressCallback_=Yn,this.connectionFactory_=Fr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Mr,si)=>{this.resolve_=Mr,this.reject_=si,this.start_()})}start_(){const ee=(Q,ve)=>{const Xe=this.resolve_,ft=this.reject_,sn=ve.connection;if(ve.wasSuccessCode)try{const Ht=this.callback_(sn,sn.getResponse());!function pn(L){return void 0!==L}(Ht)?Xe():Xe(Ht)}catch(Ht){ft(Ht)}else if(null!==sn){const Ht=N();Ht.serverResponse=sn.getErrorText(),ft(this.errorCallback_?this.errorCallback_(sn,Ht):Ht)}else ft(ve.canceled?this.appDelete_?gt():X():function fe(){return new at("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?ee(0,new wn(!1,null,!0)):this.backoffId_=function mn(L,O,ee){let Q=1,ve=null,Xe=null,ft=!1,sn=0;function Ht(){return 2===sn}let vn=!1;function Yn(...Kn){vn||(vn=!0,O.apply(null,Kn))}function Fr(Kn){ve=setTimeout(()=>{ve=null,L(si,Ht())},Kn)}function Mr(){Xe&&clearTimeout(Xe)}function si(Kn,...Lr){if(vn)return void Mr();if(Kn)return Mr(),void Yn.call(null,Kn,...Lr);if(Ht()||ft)return Mr(),void Yn.call(null,Kn,...Lr);let kr;Q<64&&(Q*=2),1===sn?(sn=2,kr=0):kr=1e3*(Q+Math.random()),Fr(kr)}let Hr=!1;function mi(Kn){Hr||(Hr=!0,Mr(),!vn&&(null!==ve?(Kn||(sn=2),clearTimeout(ve),Fr(0)):Kn||(sn=1)))}return Fr(0),Xe=setTimeout(()=>{ft=!0,mi(!0)},ee),mi}((Q,ve)=>{if(ve)return void Q(!1,new wn(!1,null,!0));const Xe=this.connectionFactory_();this.pendingConnection_=Xe;const ft=sn=>{null!==this.progressCallback_&&this.progressCallback_(sn.loaded,sn.lengthComputable?sn.total:-1)};null!==this.progressCallback_&&Xe.addUploadProgressListener(ft),Xe.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Xe.removeUploadProgressListener(ft),this.pendingConnection_=null;const sn=Xe.getErrorCode()===Bt.NO_ERROR,Ht=Xe.getStatus();if(!sn||this.isRetryStatusCode_(Ht)){const Yn=Xe.getErrorCode()===Bt.ABORT;return void Q(!1,new wn(!1,null,Yn))}const vn=-1!==this.successCodes_.indexOf(Ht);Q(!0,new wn(vn,Xe))})},ee,this.timeout_)}getPromise(){return this.promise_}cancel(O){this.canceled_=!0,this.appDelete_=O||!1,null!==this.backoffId_&&function _n(L){L(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(O){const ee=O>=500&&O<600,ve=-1!==[408,429].indexOf(O),Xe=-1!==this.additionalRetryCodes_.indexOf(O);return ee||ve||Xe}}class wn{constructor(O,ee,Q){this.wasSuccessCode=O,this.connection=ee,this.canceled=!!Q}}function ei(...L){const O=function yi(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==O){const ee=new O;for(let Q=0;Q<L.length;Q++)ee.append(L[Q]);return ee.getBlob()}if(zt())return new Blob(L);throw new at("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Kt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class or{constructor(O,ee){this.data=O,this.contentType=ee||null}}function br(L,O){switch(L){case Kt.RAW:return new or(On(O));case Kt.BASE64:case Kt.BASE64URL:return new or(zn(L,O));case Kt.DATA_URL:return new or(function Qt(L){const O=new fr(L);return O.base64?zn(Kt.BASE64,O.rest):function nr(L){let O;try{O=decodeURIComponent(L)}catch(ee){throw Ut(Kt.DATA_URL,"Malformed data URL.")}return On(O)}(O.rest)}(O),function pr(L){return new fr(L).contentType}(O))}throw N()}function On(L){const O=[];for(let ee=0;ee<L.length;ee++){let Q=L.charCodeAt(ee);Q<=127?O.push(Q):Q<=2047?O.push(192|Q>>6,128|63&Q):55296==(64512&Q)?ee<L.length-1&&56320==(64512&L.charCodeAt(ee+1))?(Q=65536|(1023&Q)<<10|1023&L.charCodeAt(++ee),O.push(240|Q>>18,128|Q>>12&63,128|Q>>6&63,128|63&Q)):O.push(239,191,189):56320==(64512&Q)?O.push(239,191,189):O.push(224|Q>>12,128|Q>>6&63,128|63&Q)}return new Uint8Array(O)}function zn(L,O){switch(L){case Kt.BASE64:{const ve=-1!==O.indexOf("-"),Xe=-1!==O.indexOf("_");if(ve||Xe)throw Ut(L,"Invalid character '"+(ve?"-":"_")+"' found: is it base64url encoded?");break}case Kt.BASE64URL:{const ve=-1!==O.indexOf("+"),Xe=-1!==O.indexOf("/");if(ve||Xe)throw Ut(L,"Invalid character '"+(ve?"+":"/")+"' found: is it base64 encoded?");O=O.replace(/-/g,"+").replace(/_/g,"/");break}}let ee;try{ee=function Vt(L){return atob(L)}(O)}catch(ve){throw Ut(L,"Invalid character found")}const Q=new Uint8Array(ee.length);for(let ve=0;ve<ee.length;ve++)Q[ve]=ee.charCodeAt(ve);return Q}class fr{constructor(O){this.base64=!1,this.contentType=null;const ee=O.match(/^data:([^,]+)?,/);if(null===ee)throw Ut(Kt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Q=ee[1]||null;null!=Q&&(this.base64=function En(L,O){return L.length>=O.length&&L.substring(L.length-O.length)===O}(Q,";base64"),this.contentType=this.base64?Q.substring(0,Q.length-7):Q),this.rest=O.substring(O.indexOf(",")+1)}}class kt{constructor(O,ee){let Q=0,ve="";ct(O)?(this.data_=O,Q=O.size,ve=O.type):O instanceof ArrayBuffer?(ee?this.data_=new Uint8Array(O):(this.data_=new Uint8Array(O.byteLength),this.data_.set(new Uint8Array(O))),Q=this.data_.length):O instanceof Uint8Array&&(ee?this.data_=O:(this.data_=new Uint8Array(O.length),this.data_.set(O)),Q=O.length),this.size_=Q,this.type_=ve}size(){return this.size_}type(){return this.type_}slice(O,ee){if(ct(this.data_)){const ve=function Rn(L,O,ee){return L.webkitSlice?L.webkitSlice(O,ee):L.mozSlice?L.mozSlice(O,ee):L.slice?L.slice(O,ee):null}(this.data_,O,ee);return null===ve?null:new kt(ve)}{const Q=new Uint8Array(this.data_.buffer,O,ee-O);return new kt(Q,!0)}}static getBlob(...O){if(zt()){const ee=O.map(Q=>Q instanceof kt?Q.data_:Q);return new kt(ei.apply(null,ee))}{const ee=O.map(ft=>er(ft)?br(Kt.RAW,ft).data:ft.data_);let Q=0;ee.forEach(ft=>{Q+=ft.byteLength});const ve=new Uint8Array(Q);let Xe=0;return ee.forEach(ft=>{for(let sn=0;sn<ft.length;sn++)ve[Xe++]=ft[sn]}),new kt(ve,!0)}}uploadData(){return this.data_}}function dt(L){let O;try{O=JSON.parse(L)}catch(ee){return null}return function Wn(L){return"object"==typeof L&&!Array.isArray(L)}(O)?O:null}function In(L){const O=L.lastIndexOf("/",L.length-2);return-1===O?L:L.slice(O+1)}function Jt(L,O){return O}class he{constructor(O,ee,Q,ve){this.server=O,this.local=ee||O,this.writable=!!Q,this.xform=ve||Jt}}let te=null;function Qe(){if(te)return te;const L=[];L.push(new he("bucket")),L.push(new he("generation")),L.push(new he("metageneration")),L.push(new he("name","fullPath",!0));const ee=new he("name");ee.xform=function O(Xe,ft){return function Ce(L){return!er(L)||L.length<2?L:In(L)}(ft)},L.push(ee);const ve=new he("size");return ve.xform=function Q(Xe,ft){return void 0!==ft?Number(ft):ft},L.push(ve),L.push(new he("timeCreated")),L.push(new he("updated")),L.push(new he("md5Hash",null,!0)),L.push(new he("cacheControl",null,!0)),L.push(new he("contentDisposition",null,!0)),L.push(new he("contentEncoding",null,!0)),L.push(new he("contentLanguage",null,!0)),L.push(new he("contentType",null,!0)),L.push(new he("metadata","customMetadata",!0)),te=L,te}function Ae(L,O,ee){const Q=dt(O);return null===Q?null:function xt(L,O,ee){const Q={type:"file"},ve=ee.length;for(let Xe=0;Xe<ve;Xe++){const ft=ee[Xe];Q[ft.local]=ft.xform(Q,O[ft.server])}return function He(L,O){Object.defineProperty(L,"ref",{get:function ee(){const Xe=new Mt(L.bucket,L.fullPath);return O._makeStorageReference(Xe)}})}(Q,L),Q}(L,Q,ee)}function oe(L,O){const ee={},Q=O.length;for(let ve=0;ve<Q;ve++){const Xe=O[ve];Xe.writable&&(ee[Xe.server]=L[Xe.local])}return JSON.stringify(ee)}const Me="prefixes";class Dn{constructor(O,ee,Q,ve){this.url=O,this.method=ee,this.handler=Q,this.timeout=ve,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Nn(L){if(!L)throw N()}function $r(L,O){return function ee(Q,ve){const Xe=Ae(L,ve,O);return Nn(null!==Xe),Xe}}function dr(L){return function O(ee,Q){let ve;return ve=401===ee.getStatus()?ee.getErrorText().includes("Firebase App Check token is invalid")?function Ne(){return new at("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Ee(){return new at("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===ee.getStatus()?function ue(L){return new at("quota-exceeded","Quota for bucket '"+L+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(L.bucket):403===ee.getStatus()?function Re(L){return new at("unauthorized","User does not have permission to access '"+L+"'.")}(L.path):Q,ve.serverResponse=Q.serverResponse,ve}}function Yr(L){const O=dr(L);return function ee(Q,ve){let Xe=O(Q,ve);return 404===Q.getStatus()&&(Xe=function ne(L){return new at("object-not-found","Object '"+L+"' does not exist.")}(L.path)),Xe.serverResponse=ve.serverResponse,Xe}}function zr(L,O,ee){const ve=An(O.fullServerUrl(),L.host,L._protocol),ft=L.maxOperationRetryTime,sn=new Dn(ve,"GET",$r(L,ee),ft);return sn.errorHandler=Yr(O),sn}function It(L,O,ee,Q,ve){const Xe={};Xe.prefix=O.isRoot?"":O.path+"/",ee&&ee.length>0&&(Xe.delimiter=ee),Q&&(Xe.pageToken=Q),ve&&(Xe.maxResults=ve);const sn=An(O.bucketOnlyServerUrl(),L.host,L._protocol),vn=L.maxOperationRetryTime,Yn=new Dn(sn,"GET",function Gr(L,O){return function ee(Q,ve){const Xe=function en(L,O,ee){const Q=dt(ee);return null===Q?null:function At(L,O,ee){const Q={prefixes:[],items:[],nextPageToken:ee.nextPageToken};if(ee[Me])for(const ve of ee[Me]){const Xe=ve.replace(/\/$/,""),ft=L._makeStorageReference(new Mt(O,Xe));Q.prefixes.push(ft)}if(ee.items)for(const ve of ee.items){const Xe=L._makeStorageReference(new Mt(O,ve.name));Q.items.push(Xe)}return Q}(L,O,Q)}(L,O,ve);return Nn(null!==Xe),Xe}}(L,O.bucket),vn);return Yn.urlParams=Xe,Yn.errorHandler=dr(O),Yn}function ti(L,O,ee){const Q=Object.assign({},ee);return Q.fullPath=L.path,Q.size=O.size(),Q.contentType||(Q.contentType=function Tr(L,O){return L&&L.contentType||O&&O.type()||"application/octet-stream"}(null,O)),Q}class ir{constructor(O,ee,Q,ve){this.current=O,this.total=ee,this.finalized=!!Q,this.metadata=ve||null}}function xr(L,O){let ee=null;try{ee=L.getResponseHeader("X-Goog-Upload-Status")}catch(ve){Nn(!1)}return Nn(!!ee&&-1!==(O||["active"]).indexOf(ee)),ee}const Ar={STATE_CHANGED:"state_changed"},Fn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Kr(L){switch(L){case"running":case"pausing":case"canceling":return Fn.RUNNING;case"paused":return Fn.PAUSED;case"success":return Fn.SUCCESS;case"canceled":return Fn.CANCELED;default:return Fn.ERROR}}class Qr{constructor(O,ee,Q){if(function qn(L){return"function"==typeof L}(O)||null!=ee||null!=Q)this.next=O,this.error=null!=ee?ee:void 0,this.complete=null!=Q?Q:void 0;else{const Xe=O;this.next=Xe.next,this.error=Xe.error,this.complete=Xe.complete}}}function Sr(L){return(...O)=>{Promise.resolve().then(()=>L(...O))}}class Li extends class os{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bt.NO_ERROR,this.sendPromise_=new Promise(O=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bt.ABORT,O()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bt.NETWORK_ERROR,O()}),this.xhr_.addEventListener("load",()=>{O()})})}send(O,ee,Q,ve){if(this.sent_)throw St("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ee,O,!0),void 0!==ve)for(const Xe in ve)ve.hasOwnProperty(Xe)&&this.xhr_.setRequestHeader(Xe,ve[Xe].toString());return void 0!==Q?this.xhr_.send(Q):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw St("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw St("cannot .getStatus() before sending");try{return this.xhr_.status}catch(O){return-1}}getResponse(){if(!this.sent_)throw St("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw St("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(O){return this.xhr_.getResponseHeader(O)}addUploadProgressListener(O){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",O)}removeUploadProgressListener(O){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",O)}}{initXhr(){this.xhr_.responseType="text"}}function ar(){return new Li}class fi{constructor(O,ee,Q=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=O,this._blob=ee,this._metadata=Q,this._mappings=Qe(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=ve=>{this._request=void 0,this._chunkMultiplier=1,ve._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=ve,this._transition("error"))},this._metadataErrorHandler=ve=>{this._request=void 0,ve._codeEquals("canceled")?this.completeTransitions_():(this._error=ve,this._transition("error"))},this._promise=new Promise((ve,Xe)=>{this._resolve=ve,this._reject=Xe,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const O=this._transferred;return ee=>this._updateProgress(O+ee)}_shouldDoResumable(O){return O.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(O){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([ee,Q])=>{switch(this._state){case"running":O(ee,Q);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((O,ee)=>{const Q=function gn(L,O,ee,Q,ve){const Xe=O.bucketOnlyServerUrl(),ft=ti(O,Q,ve),sn={name:ft.fullPath},Ht=An(Xe,L.host,L._protocol),Yn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Q.size()}`,"X-Goog-Upload-Header-Content-Type":ft.contentType,"Content-Type":"application/json; charset=utf-8"},Fr=oe(ft,ee),Hr=new Dn(Ht,"POST",function si(mi){let Kn;xr(mi);try{Kn=mi.getResponseHeader("X-Goog-Upload-URL")}catch(Lr){Nn(!1)}return Nn(er(Kn)),Kn},L.maxUploadRetryTime);return Hr.urlParams=sn,Hr.headers=Yn,Hr.body=Fr,Hr.errorHandler=dr(O),Hr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ve=this._ref.storage._makeRequest(Q,ar,O,ee);this._request=ve,ve.getPromise().then(Xe=>{this._request=void 0,this._uploadUrl=Xe,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const O=this._uploadUrl;this._resolveToken((ee,Q)=>{const ve=function ni(L,O,ee,Q){const Ht=new Dn(ee,"POST",function Xe(vn){const Yn=xr(vn,["active","final"]);let Fr=null;try{Fr=vn.getResponseHeader("X-Goog-Upload-Size-Received")}catch(si){Nn(!1)}Fr||Nn(!1);const Mr=Number(Fr);return Nn(!isNaN(Mr)),new ir(Mr,Q.size(),"final"===Yn)},L.maxUploadRetryTime);return Ht.headers={"X-Goog-Upload-Command":"query"},Ht.errorHandler=dr(O),Ht}(this._ref.storage,this._ref._location,O,this._blob),Xe=this._ref.storage._makeRequest(ve,ar,ee,Q);this._request=Xe,Xe.getPromise().then(ft=>{ft=ft,this._request=void 0,this._updateProgress(ft.current),this._needToFetchStatus=!1,ft.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const O=262144*this._chunkMultiplier,ee=new ir(this._transferred,this._blob.size()),Q=this._uploadUrl;this._resolveToken((ve,Xe)=>{let ft;try{ft=function ns(L,O,ee,Q,ve,Xe,ft,sn){const Ht=new ir(0,0);if(ft?(Ht.current=ft.current,Ht.total=ft.total):(Ht.current=0,Ht.total=Q.size()),Q.size()!==Ht.total)throw function _t(){return new at("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const vn=Ht.total-Ht.current;let Yn=vn;ve>0&&(Yn=Math.min(Yn,ve));const Fr=Ht.current,Hr={"X-Goog-Upload-Command":Yn===vn?"upload, finalize":"upload","X-Goog-Upload-Offset":`${Ht.current}`},mi=Q.slice(Fr,Fr+Yn);if(null===mi)throw Be();const kr=new Dn(ee,"POST",function Kn(yr,_s){const Yi=xr(yr,["active","final"]),no=Ht.current+Yn,wr=Q.size();let Ps;return Ps="final"===Yi?$r(O,Xe)(yr,_s):null,new ir(no,wr,"final"===Yi,Ps)},O.maxUploadRetryTime);return kr.headers=Hr,kr.body=mi.uploadData(),kr.progressCallback=sn||null,kr.errorHandler=dr(L),kr}(this._ref._location,this._ref.storage,Q,this._blob,O,this._mappings,ee,this._makeProgressCallback())}catch(Ht){return this._error=Ht,void this._transition("error")}const sn=this._ref.storage._makeRequest(ft,ar,ve,Xe);this._request=sn,sn.getPromise().then(Ht=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Ht.current),Ht.finalized?(this._metadata=Ht.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((O,ee)=>{const Q=zr(this._ref.storage,this._ref._location,this._mappings),ve=this._ref.storage._makeRequest(Q,ar,O,ee);this._request=ve,ve.getPromise().then(Xe=>{this._request=void 0,this._metadata=Xe,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((O,ee)=>{const Q=function jn(L,O,ee,Q,ve){const Xe=O.bucketOnlyServerUrl(),ft={"X-Goog-Upload-Protocol":"multipart"},Ht=function sn(){let kr="";for(let yr=0;yr<2;yr++)kr+=Math.random().toString().slice(2);return kr}();ft["Content-Type"]="multipart/related; boundary="+Ht;const vn=ti(O,Q,ve),Yn=oe(vn,ee),si=kt.getBlob("--"+Ht+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Yn+"\r\n--"+Ht+"\r\nContent-Type: "+vn.contentType+"\r\n\r\n",Q,"\r\n--"+Ht+"--");if(null===si)throw Be();const Hr={name:vn.fullPath},mi=An(Xe,L.host,L._protocol),Lr=L.maxUploadRetryTime,Ui=new Dn(mi,"POST",$r(L,ee),Lr);return Ui.urlParams=Hr,Ui.headers=ft,Ui.body=si.uploadData(),Ui.errorHandler=dr(O),Ui}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ve=this._ref.storage._makeRequest(Q,ar,O,ee);this._request=ve,ve.getPromise().then(Xe=>{this._request=void 0,this._metadata=Xe,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(O){const ee=this._transferred;this._transferred=O,this._transferred!==ee&&this._notifyObservers()}_transition(O){if(this._state!==O)switch(O){case"canceling":case"pausing":this._state=O,void 0!==this._request&&this._request.cancel();break;case"running":const ee="paused"===this._state;this._state=O,ee&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=O,this._notifyObservers();break;case"canceled":this._error=X(),this._state=O,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const O=Kr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:O,metadata:this._metadata,task:this,ref:this._ref}}on(O,ee,Q,ve){const Xe=new Qr(ee||void 0,Q||void 0,ve||void 0);return this._addObserver(Xe),()=>{this._removeObserver(Xe)}}then(O,ee){return this._promise.then(O,ee)}catch(O){return this.then(null,O)}_addObserver(O){this._observers.push(O),this._notifyObserver(O)}_removeObserver(O){const ee=this._observers.indexOf(O);-1!==ee&&this._observers.splice(ee,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(ee=>{this._notifyObserver(ee)})}_finishPromise(){if(void 0!==this._resolve){let O=!0;switch(Kr(this._state)){case Fn.SUCCESS:Sr(this._resolve.bind(null,this.snapshot))();break;case Fn.CANCELED:case Fn.ERROR:Sr(this._reject.bind(null,this._error))();break;default:O=!1}O&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(O){switch(Kr(this._state)){case Fn.RUNNING:case Fn.PAUSED:O.next&&Sr(O.next.bind(O,this.snapshot))();break;case Fn.SUCCESS:O.complete&&Sr(O.complete.bind(O))();break;default:O.error&&Sr(O.error.bind(O,this._error))()}}resume(){const O="paused"===this._state||"pausing"===this._state;return O&&this._transition("running"),O}pause(){const O="running"===this._state;return O&&this._transition("pausing"),O}cancel(){const O="running"===this._state||"pausing"===this._state;return O&&this._transition("canceling"),O}}class qr{constructor(O,ee){this._service=O,this._location=ee instanceof Mt?ee:Mt.makeFromUrl(ee,O.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(O,ee){return new qr(O,ee)}get root(){const O=new Mt(this._location.bucket,"");return this._newRef(this._service,O)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return In(this._location.path)}get storage(){return this._service}get parent(){const O=function Gt(L){if(0===L.length)return null;const O=L.lastIndexOf("/");return-1===O?"":L.slice(0,O)}(this._location.path);if(null===O)return null;const ee=new Mt(this._location.bucket,O);return new qr(this._service,ee)}_throwIfRoot(O){if(""===this._location.path)throw bt(O)}}function xe(L,O,ee){return qe.apply(this,arguments)}function qe(){return(qe=(0,re.Z)(function*(L,O,ee){const ve=yield ot(L,{pageToken:ee});O.prefixes.push(...ve.prefixes),O.items.push(...ve.items),null!=ve.nextPageToken&&(yield xe(L,O,ve.nextPageToken))})).apply(this,arguments)}function ot(L,O){null!=O&&"number"==typeof O.maxResults&&qt("options.maxResults",1,1e3,O.maxResults);const ee=O||{},Q=It(L.storage,L._location,"/",ee.pageToken,ee.maxResults);return L.storage.makeRequestWithTokens(Q,ar)}function $n(L){L._throwIfRoot("getDownloadURL");const O=function yn(L,O,ee){const ve=An(O.fullServerUrl(),L.host,L._protocol),ft=L.maxOperationRetryTime,sn=new Dn(ve,"GET",function Wr(L,O){return function ee(Q,ve){const Xe=Ae(L,ve,O);return Nn(null!==Xe),function ge(L,O,ee,Q){const ve=dt(O);if(null===ve||!er(ve.downloadTokens))return null;const Xe=ve.downloadTokens;if(0===Xe.length)return null;const ft=encodeURIComponent;return Xe.split(",").map(vn=>{const Fr=L.fullPath;return An("/b/"+ft(L.bucket)+"/o/"+ft(Fr),ee,Q)+kn({alt:"media",token:vn})})[0]}(Xe,ve,L.host,L._protocol)}}(L,ee),ft);return sn.errorHandler=Yr(O),sn}(L.storage,L._location,Qe());return L.storage.makeRequestWithTokens(O,ar).then(ee=>{if(null===ee)throw function vt(){return new at("no-download-url","The given file does not have any download URLs.")}();return ee})}function Ln(L,O){const ee=function ln(L,O){const ee=O.split("/").filter(Q=>Q.length>0).join("/");return 0===L.length?ee:L+"/"+ee}(L._location.path,O),Q=new Mt(L._location.bucket,ee);return new qr(L.storage,Q)}function Oi(L,O){if(L instanceof ri){const ee=L;if(null==ee._bucket)throw function $e(){return new at("no-default-bucket","No default bucket found. Did you set the '"+mt+"' property when initializing the app?")}();const Q=new qr(ee,ee._bucket);return null!=O?Oi(Q,O):Q}return void 0!==O?Ln(L,O):L}function ys(L,O){if(O&&function Ri(L){return/^[A-Za-z]+:\/\//.test(L)}(O)){if(L instanceof ri)return function Ii(L,O){return new qr(L,O)}(L,O);throw Ot("To use ref(service, url), the first argument must be a Storage instance.")}return Oi(L,O)}function Vi(L,O){const ee=null==O?void 0:O[mt];return null==ee?null:Mt.makeFromBucketSpec(ee,L)}class ri{constructor(O,ee,Q,ve,Xe){this.app=O,this._authProvider=ee,this._appCheckProvider=Q,this._url=ve,this._firebaseVersion=Xe,this._bucket=null,this._host=Ze,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=ve?Mt.makeFromBucketSpec(ve,this._host):Vi(this._host,this.app.options)}get host(){return this._host}set host(O){this._host=O,this._bucket=null!=this._url?Mt.makeFromBucketSpec(this._url,O):Vi(O,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(O){qt("time",0,Number.POSITIVE_INFINITY,O),this._maxUploadRetryTime=O}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(O){qt("time",0,Number.POSITIVE_INFINITY,O),this._maxOperationRetryTime=O}_getAuthToken(){var O=this;return(0,re.Z)(function*(){if(O._overrideAuthToken)return O._overrideAuthToken;const ee=O._authProvider.getImmediate({optional:!0});if(ee){const Q=yield ee.getToken();if(null!==Q)return Q.accessToken}return null})()}_getAppCheckToken(){var O=this;return(0,re.Z)(function*(){const ee=O._appCheckProvider.getImmediate({optional:!0});return ee?(yield ee.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(O=>O.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(O){return new qr(this,O)}_makeRequest(O,ee,Q,ve){if(this._deleted)return new ht(gt());{const Xe=function Cr(L,O,ee,Q,ve,Xe){const ft=kn(L.urlParams),sn=L.url+ft,Ht=Object.assign({},L.headers);return function jr(L,O){O&&(L["X-Firebase-GMPID"]=O)}(Ht,O),function jt(L,O){null!==O&&O.length>0&&(L.Authorization="Firebase "+O)}(Ht,ee),function Br(L,O){L["X-Firebase-Storage-Version"]="webjs/"+(null!=O?O:"AppManager")}(Ht,Xe),function tr(L,O){null!==O&&(L["X-Firebase-AppCheck"]=O)}(Ht,Q),new un(sn,L.method,Ht,L.body,L.successCodes,L.additionalRetryCodes,L.handler,L.errorHandler,L.timeout,L.progressCallback,ve)}(O,this._appId,Q,ve,ee,this._firebaseVersion);return this._requests.add(Xe),Xe.getPromise().then(()=>this._requests.delete(Xe),()=>this._requests.delete(Xe)),Xe}}makeRequestWithTokens(O,ee){var Q=this;return(0,re.Z)(function*(){const[ve,Xe]=yield Promise.all([Q._getAuthToken(),Q._getAppCheckToken()]);return Q._makeRequest(O,ee,ve,Xe).getPromise()})()}}const Di="@firebase/storage";function Or(L,O){return ys(L=(0,je.m9)(L),O)}function pi(L,{instanceIdentifier:O}){const ee=L.getProvider("app").getImmediate(),Q=L.getProvider("auth-internal"),ve=L.getProvider("app-check-internal");return new ri(ee,Q,ve,O,me.SDK_VERSION)}!function gi(){(0,me._registerComponent)(new Ge.wA("storage",pi,"PUBLIC").setMultipleInstances(!0)),(0,me.registerVersion)(Di,"0.9.5",""),(0,me.registerVersion)(Di,"0.9.5","esm2017")}();class Zi{constructor(O,ee,Q){this._delegate=O,this.task=ee,this.ref=Q}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ur{constructor(O,ee){this._delegate=O,this._ref=ee,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Zi(this._delegate.snapshot,this,this._ref)}then(O,ee){return this._delegate.then(Q=>{if(O)return O(new Zi(Q,this,this._ref))},ee)}on(O,ee,Q,ve){let Xe;return ee&&(Xe="function"==typeof ee?ft=>ee(new Zi(ft,this,this._ref)):{next:ee.next?ft=>ee.next(new Zi(ft,this,this._ref)):void 0,complete:ee.complete||void 0,error:ee.error||void 0}),this._delegate.on(O,Xe,Q||void 0,ve||void 0)}}class x{constructor(O,ee){this._delegate=O,this._service=ee}get prefixes(){return this._delegate.prefixes.map(O=>new G(O,this._service))}get items(){return this._delegate.items.map(O=>new G(O,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class G{constructor(O,ee){this._delegate=O,this.storage=ee}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(O){const ee=function cs(L,O){return Ln(L,O)}(this._delegate,O);return new G(ee,this.storage)}get root(){return new G(this._delegate.root,this.storage)}get parent(){const O=this._delegate.parent;return null==O?null:new G(O,this.storage)}put(O,ee){return this._throwIfRoot("put"),new ur(function Bs(L,O,ee){return function Ss(L,O,ee){return L._throwIfRoot("uploadBytesResumable"),new fi(L,new kt(O),ee)}(L=(0,je.m9)(L),O,ee)}(this._delegate,O,ee),this)}putString(O,ee=Kt.RAW,Q){this._throwIfRoot("putString");const ve=br(ee,O),Xe=Object.assign({},Q);return null==Xe.contentType&&null!=ve.contentType&&(Xe.contentType=ve.contentType),new ur(new fi(this._delegate,new kt(ve.data,!0),Xe),this)}listAll(){return function qi(L){return function Pe(L){const O={prefixes:[],items:[]};return xe(L,O).then(()=>O)}(L=(0,je.m9)(L))}(this._delegate).then(O=>new x(O,this.storage))}list(O){return function Xr(L,O){return ot(L=(0,je.m9)(L),O)}(this._delegate,O||void 0).then(ee=>new x(ee,this.storage))}getMetadata(){return function Ci(L){return function Tt(L){L._throwIfRoot("getMetadata");const O=zr(L.storage,L._location,Qe());return L.storage.makeRequestWithTokens(O,ar)}(L=(0,je.m9)(L))}(this._delegate)}updateMetadata(O){return function Ki(L,O){return function Yt(L,O){L._throwIfRoot("updateMetadata");const ee=function vr(L,O,ee,Q){const Xe=An(O.fullServerUrl(),L.host,L._protocol),sn=oe(ee,Q),vn=L.maxOperationRetryTime,Yn=new Dn(Xe,"PATCH",$r(L,Q),vn);return Yn.headers={"Content-Type":"application/json; charset=utf-8"},Yn.body=sn,Yn.errorHandler=Yr(O),Yn}(L.storage,L._location,O,Qe());return L.storage.makeRequestWithTokens(ee,ar)}(L=(0,je.m9)(L),O)}(this._delegate,O)}getDownloadURL(){return function bs(L){return $n(L=(0,je.m9)(L))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Er(L){return function Rr(L){L._throwIfRoot("deleteObject");const O=function di(L,O){const Q=An(O.fullServerUrl(),L.host,L._protocol),sn=new Dn(Q,"DELETE",function ft(Ht,vn){},L.maxOperationRetryTime);return sn.successCodes=[200,204],sn.errorHandler=Yr(O),sn}(L.storage,L._location);return L.storage.makeRequestWithTokens(O,ar)}(L=(0,je.m9)(L))}(this._delegate)}_throwIfRoot(O){if(""===this._delegate._location.path)throw bt(O)}}class M{constructor(O,ee){this.app=O,this._delegate=ee}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(O){if(Y(O))throw Ot("ref() expected a child path but got a URL, use refFromURL instead.");return new G(Or(this._delegate,O),this)}refFromURL(O){if(!Y(O))throw Ot("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Mt.makeFromUrl(O,this._delegate.host)}catch(ee){throw Ot("refFromUrl() expected a valid full URL but got an invalid one.")}return new G(Or(this._delegate,O),this)}setMaxUploadRetryTime(O){this._delegate.maxUploadRetryTime=O}setMaxOperationRetryTime(O){this._delegate.maxOperationRetryTime=O}useEmulator(O,ee,Q={}){!function Os(L,O,ee,Q={}){!function xs(L,O,ee,Q={}){L.host=`${O}:${ee}`,L._protocol="http";const{mockUserToken:ve}=Q;ve&&(L._overrideAuthToken="string"==typeof ve?ve:(0,je.Sg)(ve,L.app.options.projectId))}(L,O,ee,Q)}(this._delegate,O,ee,Q)}}function Y(L){return/^[A-Za-z]+:\/\//.test(L)}function Nt(L,{instanceIdentifier:O}){const ee=L.getProvider("app-compat").getImmediate(),Q=L.getProvider("storage").getImmediate({identifier:O});return new M(ee,Q)}!function Qn(L){const O={TaskState:Fn,TaskEvent:Ar,StringFormat:Kt,Storage:M,Reference:G};L.INTERNAL.registerComponent(new Ge.wA("storage-compat",Nt,"PUBLIC").setServiceProps(O).setMultipleInstances(!0)),L.registerVersion("@firebase/storage-compat","0.1.13")}(le.Z);var Hn=R(440),Cn=R(127);function Pr(L){const O=function Mn(L){return new p.y(O=>{const ee=ft=>O.next(ft);ee(L.snapshot);const Xe=L.on("state_changed",ee);return L.then(ft=>{ee(ft),O.complete()},ft=>{ee(L.snapshot),(ft=>{O.error(ft)})(ft)}),function(){Xe()}}).pipe((0,_e.b)(0))}(L);return{task:L,then:L.then.bind(L),catch:L.catch.bind(L),pause:L.pause.bind(L),cancel:L.cancel.bind(L),resume:L.resume.bind(L),snapshotChanges:()=>O,percentageChanges:()=>O.pipe((0,pe.U)(ee=>ee.bytesTransferred/ee.totalBytes*100))}}function sr(L){return{getDownloadURL:()=>(0,H.of)(void 0).pipe(be.fc,(0,we.w)(()=>L.getDownloadURL()),be.iC),getMetadata:()=>(0,H.of)(void 0).pipe(be.fc,(0,we.w)(()=>L.getMetadata()),be.iC),delete:()=>(0,Z.D)(L.delete()),child:O=>sr(L.child(O)),updateMetadata:O=>(0,Z.D)(L.updateMetadata(O)),put:(O,ee)=>Pr(L.put(O,ee)),putString:(O,ee,Q)=>Pr(L.putString(O,ee,Q)),list:O=>(0,Z.D)(L.list(O)),listAll:()=>(0,Z.D)(L.listAll())}}const gr=new ye.OlP("angularfire2.storageBucket"),k=new ye.OlP("angularfire2.storage.maxUploadRetryTime"),A=new ye.OlP("angularfire2.storage.maxOperationRetryTime"),C=new ye.OlP("angularfire2.storage.use-emulator");let q=(()=>{class L{constructor(ee,Q,ve,Xe,ft,sn,Ht,vn,Yn,Fr){const Mr=(0,Fe.on)(ee,ft,Q);this.storage=(0,Fe.cc)(`${Mr.name}.storage.${ve}`,"AngularFireStorage",Mr.name,()=>{const si=ft.runOutsideAngular(()=>Mr.storage(ve||void 0)),Hr=Yn;return Hr&&si.useEmulator(...Hr),Ht&&si.setMaxUploadRetryTime(Ht),vn&&si.setMaxOperationRetryTime(vn),si},[Ht,vn])}ref(ee){return sr(this.storage.ref(ee))}refFromURL(ee){return sr(this.storage.refFromURL(ee))}upload(ee,Q,ve){return sr(this.storage.ref(ee)).put(Q,ve)}}return L.\u0275fac=function(ee){return new(ee||L)(ye.LFG(Fe.Dh),ye.LFG(Fe.xv,8),ye.LFG(gr,8),ye.LFG(ye.Lbi),ye.LFG(ye.R0b),ye.LFG(be.HU),ye.LFG(k,8),ye.LFG(A,8),ye.LFG(C,8),ye.LFG(Hn.nm,8))},L.\u0275prov=ye.Yz7({token:L,factory:L.\u0275fac,providedIn:"any"}),L})(),tn=(()=>{class L{}return L.\u0275fac=function(ee){return new(ee||L)},L.\u0275mod=ye.oAB({type:L}),L.\u0275inj=ye.cJS({}),L})(),mr=(()=>{class L{constructor(){Cn.Z.registerVersion("angularfire",be.q4.full,"gcs-compat")}}return L.\u0275fac=function(ee){return new(ee||L)},L.\u0275mod=ye.oAB({type:L}),L.\u0275inj=ye.cJS({providers:[q],imports:[tn]}),L})()},2011:(Pt,We,R)=>{R.d(We,{Dh:()=>ye,GT:()=>we,cc:()=>Ge,hO:()=>je,on:()=>le,pX:()=>pe,xv:()=>Fe});var p=R(5e3),H=R(127),Z=R(5813);Pt=R.hmd(Pt);const _e=["ngOnDestroy"],pe=(ke,at,$,N={})=>new Proxy(ke,{get:(ne,ue)=>$.runOutsideAngular(()=>{var Ee;if(ke[ue])return(null===(Ee=null==N?void 0:N.spy)||void 0===Ee?void 0:Ee.get)&&N.spy.get(ue,ke[ue]),ke[ue];if(_e.indexOf(ue)>-1)return()=>{};const Ne=at.toPromise().then(Re=>{const fe=Re&&Re[ue];return"function"==typeof fe?fe.bind(Re):fe&&fe.then?fe.then(X=>$.run(()=>X)):$.run(()=>fe)});return new Proxy(()=>{},{get:(Re,fe)=>Ne[fe],apply:(Re,fe,X)=>Ne.then(Oe=>{var ae;const $e=Oe&&Oe(...X);return(null===(ae=null==N?void 0:N.spy)||void 0===ae?void 0:ae.apply)&&N.spy.apply(ue,X,$e),$e})})})}),we=(ke,at)=>{at.forEach($=>{Object.getOwnPropertyNames($.prototype||$).forEach(N=>{Object.defineProperty(ke.prototype,N,Object.getOwnPropertyDescriptor($.prototype||$,N))})})};class be{constructor(at){return at}}const ye=new p.OlP("angularfire2.app.options"),Fe=new p.OlP("angularfire2.app.name");function le(ke,at,$){const ne="object"==typeof $&&$||{};ne.name=ne.name||"string"==typeof $&&$||"[DEFAULT]";const Ee=H.Z.apps.filter(Ne=>Ne&&Ne.name===ne.name)[0]||at.runOutsideAngular(()=>H.Z.initializeApp(ke,ne));try{JSON.stringify(ke)!==JSON.stringify(Ee.options)&&re("error",`${Ee.name} Firebase App already initialized with different options${Pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ne){}return new be(Ee)}const re=(ke,...at)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[ke](...at)},me={provide:be,useFactory:le,deps:[ye,p.R0b,[new p.FiY,Fe]]};let je=(()=>{class ke{constructor($){H.Z.registerVersion("angularfire",Z.q4.full,"core"),H.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),H.Z.registerVersion("angular",p.q4F.full,$.toString())}static initializeApp($,N){return{ngModule:ke,providers:[{provide:ye,useValue:$},{provide:Fe,useValue:N}]}}}return ke.\u0275fac=function($){return new($||ke)(p.LFG(p.Lbi))},ke.\u0275mod=p.oAB({type:ke}),ke.\u0275inj=p.cJS({providers:[me]}),ke})();function Ge(ke,at,$,N,ne){const[,ue,Ee]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===ke)||[];if(ue)return function Ze(ke,at){try{return ke.toString()===at.toString()}catch($){return ke===at}}(ne,Ee)||(Le("error",`${at} was already initialized on the ${$} Firebase App with different settings.${mt?" You may need to reload as Firebase is not HMR aware.":""}`),Le("warn",{is:ne,was:Ee})),ue;{const Ne=N();return globalThis.\u0275AngularfireInstanceCache.push([ke,Ne,ne]),Ne}}const mt=!!Pt.hot,Le=(ke,...at)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[ke](...at)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Pt,We,R)=>{R.d(We,{q4:()=>Ta,iC:()=>oa,fc:()=>Tu,HU:()=>Po,vb:()=>Ro,JM:()=>_o});var p=R(5e3),H=R(5867),Z=R(5861),_e=R(9681),pe=R(2090),we=R(4859),be=R(1877);const ye="@firebase/installations",re="w:0.5.8",me="FIS_v2",ke=new pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function at(T){return T instanceof pe.ZR&&T.code.includes("request-failed")}function $({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function N(T){return{token:T.token,requestStatus:2,expiresIn:X(T.expiresIn),creationTime:Date.now()}}function ne(T,P){return ue.apply(this,arguments)}function ue(){return(ue=(0,Z.Z)(function*(T,P){const de=(yield P.json()).error;return ke.create("request-failed",{requestName:T,serverCode:de.code,serverMessage:de.message,serverStatus:de.status})})).apply(this,arguments)}function Ee({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Ne(T,{refreshToken:P}){const K=Ee(T);return K.append("Authorization",function Oe(T){return`${me} ${T}`}(P)),K}function Re(T){return fe.apply(this,arguments)}function fe(){return(fe=(0,Z.Z)(function*(T){const P=yield T();return P.status>=500&&P.status<600?T():P})).apply(this,arguments)}function X(T){return Number(T.replace("s","000"))}function ae(T,P){return $e.apply(this,arguments)}function $e(){return($e=(0,Z.Z)(function*({appConfig:T,heartbeatServiceProvider:P},{fid:K}){const de=$(T),Ve=Ee(T),Ye=P.getImmediate({optional:!0});if(Ye){const bn=yield Ye.getHeartbeatsHeader();bn&&Ve.append("x-firebase-client",bn)}const Xt={method:"POST",headers:Ve,body:JSON.stringify({fid:K,authVersion:me,appId:T.appId,sdkVersion:re})},cn=yield Re(()=>fetch(de,Xt));if(cn.ok){const bn=yield cn.json();return{fid:bn.fid||K,registrationStatus:2,refreshToken:bn.refreshToken,authToken:N(bn.authToken)}}throw yield ne("Create Installation",cn)})).apply(this,arguments)}function Be(T){return new Promise(P=>{setTimeout(P,T)})}const vt=/^[cdef][\w-]{21}$/;function gt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const K=function bt(T){return function _t(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return vt.test(K)?K:""}catch(T){return""}}function Ut(T){return`${T.appName}!${T.appId}`}const St=new Map;function Mt(T,P){const K=Ut(T);_n(K,P),function pn(T,P){const K=function Wn(){return!qn&&"BroadcastChannel"in self&&(qn=new BroadcastChannel("[Firebase] FID Change"),qn.onmessage=T=>{_n(T.data.key,T.data.fid)}),qn}();K&&K.postMessage({key:T,fid:P}),function er(){0===St.size&&qn&&(qn.close(),qn=null)}()}(K,P)}function _n(T,P){const K=St.get(T);if(K)for(const de of K)de(P)}let qn=null;const qt="firebase-installations-store";let An=null;function kn(){return An||(An=(0,pe.X3)("firebase-installations-database",1,(T,P)=>{0===P&&T.createObjectStore(qt)})),An}function Bt(T,P){return un.apply(this,arguments)}function un(){return(un=(0,Z.Z)(function*(T,P){const K=Ut(T),Ve=(yield kn()).transaction(qt,"readwrite"),Ye=Ve.objectStore(qt),Rt=yield Ye.get(K);return yield Ye.put(P,K),yield Ve.complete,(!Rt||Rt.fid!==P.fid)&&Mt(T,P.fid),P})).apply(this,arguments)}function wn(T){return jt.apply(this,arguments)}function jt(){return(jt=(0,Z.Z)(function*(T){const P=Ut(T),de=(yield kn()).transaction(qt,"readwrite");yield de.objectStore(qt).delete(P),yield de.complete})).apply(this,arguments)}function Br(T,P){return jr.apply(this,arguments)}function jr(){return(jr=(0,Z.Z)(function*(T,P){const K=Ut(T),Ve=(yield kn()).transaction(qt,"readwrite"),Ye=Ve.objectStore(qt),Rt=yield Ye.get(K),Xt=P(Rt);return void 0===Xt?yield Ye.delete(K):yield Ye.put(Xt,K),yield Ve.complete,Xt&&(!Rt||Rt.fid!==Xt.fid)&&Mt(T,Xt.fid),Xt})).apply(this,arguments)}function tr(T){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,Z.Z)(function*(T){let P;const K=yield Br(T.appConfig,de=>{const Ve=yi(de),Ye=ei(T,Ve);return P=Ye.registrationPromise,Ye.installationEntry});return""===K.fid?{installationEntry:yield P}:{installationEntry:K,registrationPromise:P}})).apply(this,arguments)}function yi(T){return On(T||{fid:gt(),registrationStatus:0})}function ei(T,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(ke.create("app-offline"))};const K={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},de=function Rn(T,P){return Vt.apply(this,arguments)}(T,K);return{installationEntry:K,registrationPromise:de}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:Kt(T)}:{installationEntry:P}}function Vt(){return(Vt=(0,Z.Z)(function*(T,P){try{const K=yield ae(T,P);return Bt(T.appConfig,K)}catch(K){throw at(K)&&409===K.customData.serverCode?yield wn(T.appConfig):yield Bt(T.appConfig,{fid:P.fid,registrationStatus:0}),K}})).apply(this,arguments)}function Kt(T){return or.apply(this,arguments)}function or(){return(or=(0,Z.Z)(function*(T){let P=yield br(T.appConfig);for(;1===P.registrationStatus;)yield Be(100),P=yield br(T.appConfig);if(0===P.registrationStatus){const{installationEntry:K,registrationPromise:de}=yield tr(T);return de||K}return P})).apply(this,arguments)}function br(T){return Br(T,P=>{if(!P)throw ke.create("installation-not-found");return On(P)})}function On(T){return function nr(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function zn(T,P){return fr.apply(this,arguments)}function fr(){return(fr=(0,Z.Z)(function*({appConfig:T,heartbeatServiceProvider:P},K){const de=Qt(T,K),Ve=Ne(T,K),Ye=P.getImmediate({optional:!0});if(Ye){const bn=yield Ye.getHeartbeatsHeader();bn&&Ve.append("x-firebase-client",bn)}const Xt={method:"POST",headers:Ve,body:JSON.stringify({installation:{sdkVersion:re,appId:T.appId}})},cn=yield Re(()=>fetch(de,Xt));if(cn.ok)return N(yield cn.json());throw yield ne("Generate Auth Token",cn)})).apply(this,arguments)}function Qt(T,{fid:P}){return`${$(T)}/${P}/authTokens:generate`}function pr(T){return En.apply(this,arguments)}function En(){return(En=(0,Z.Z)(function*(T,P=!1){let K;const de=yield Br(T.appConfig,Ye=>{if(!Jt(Ye))throw ke.create("not-registered");const Rt=Ye.authToken;if(!P&&he(Rt))return Ye;if(1===Rt.requestStatus)return K=kt(T,P),Ye;{if(!navigator.onLine)throw ke.create("app-offline");const Xt=Ce(Ye);return K=ln(T,Xt),Xt}});return K?yield K:de.authToken})).apply(this,arguments)}function kt(T,P){return dt.apply(this,arguments)}function dt(){return(dt=(0,Z.Z)(function*(T,P){let K=yield Gt(T.appConfig);for(;1===K.authToken.requestStatus;)yield Be(100),K=yield Gt(T.appConfig);const de=K.authToken;return 0===de.requestStatus?pr(T,P):de})).apply(this,arguments)}function Gt(T){return Br(T,P=>{if(!Jt(P))throw ke.create("not-registered");return function Qe(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function ln(T,P){return In.apply(this,arguments)}function In(){return(In=(0,Z.Z)(function*(T,P){try{const K=yield zn(T,P),de=Object.assign(Object.assign({},P),{authToken:K});return yield Bt(T.appConfig,de),K}catch(K){if(!at(K)||401!==K.customData.serverCode&&404!==K.customData.serverCode){const de=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield Bt(T.appConfig,de)}else yield wn(T.appConfig);throw K}})).apply(this,arguments)}function Jt(T){return void 0!==T&&2===T.registrationStatus}function he(T){return 2===T.requestStatus&&!function te(T){const P=Date.now();return P<T.creationTime||T.creationTime+T.expiresIn<P+36e5}(T)}function Ce(T){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:P})}function xt(){return(xt=(0,Z.Z)(function*(T){const P=T,{installationEntry:K,registrationPromise:de}=yield tr(P);return de?de.catch(console.error):pr(P).catch(console.error),K.fid})).apply(this,arguments)}function ge(){return(ge=(0,Z.Z)(function*(T,P=!1){const K=T;return yield oe(K),(yield pr(K,P)).token})).apply(this,arguments)}function oe(T){return Me.apply(this,arguments)}function Me(){return(Me=(0,Z.Z)(function*(T){const{registrationPromise:P}=yield tr(T);P&&(yield P)})).apply(this,arguments)}function dr(T){return ke.create("missing-app-config-values",{valueName:T})}const Yr="installations",It=T=>{const P=T.getProvider("app").getImmediate(),K=function Wr(T){if(!T||!T.options)throw dr("App Configuration");if(!T.name)throw dr("App Name");const P=["projectId","apiKey","appId"];for(const K of P)if(!T.options[K])throw dr(K);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(P);return{app:P,appConfig:K,heartbeatServiceProvider:(0,_e._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},rn=T=>{const P=T.getProvider("app").getImmediate(),K=(0,_e._getProvider)(P,Yr).getImmediate();return{getId:()=>function He(T){return xt.apply(this,arguments)}(K),getToken:Ve=>function Ae(T){return ge.apply(this,arguments)}(K,Ve)}};(function yn(){(0,_e._registerComponent)(new we.wA(Yr,It,"PUBLIC")),(0,_e._registerComponent)(new we.wA("installations-internal",rn,"PRIVATE"))})(),(0,_e.registerVersion)(ye,"0.5.8"),(0,_e.registerVersion)(ye,"0.5.8","esm2017");const vr="@firebase/remote-config",ir=new pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qr{constructor(P,K,de,Ve){this.client=P,this.storage=K,this.storageCache=de,this.logger=Ve}isCachedDataFresh(P,K){if(!K)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const de=Date.now()-K,Ve=de<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${de}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${Ve}.`),Ve}fetch(P){var K=this;return(0,Z.Z)(function*(){const[de,Ve]=yield Promise.all([K.storage.getLastSuccessfulFetchTimestampMillis(),K.storage.getLastSuccessfulFetchResponse()]);if(Ve&&K.isCachedDataFresh(P.cacheMaxAgeMillis,de))return Ve;P.eTag=Ve&&Ve.eTag;const Ye=yield K.client.fetch(P),Rt=[K.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ye.status&&Rt.push(K.storage.setLastSuccessfulFetchResponse(Ye)),yield Promise.all(Rt),Ye})()}}function ms(T=navigator){return T.languages&&T.languages[0]||T.language}class Cs{constructor(P,K,de,Ve,Ye,Rt){this.firebaseInstallations=P,this.sdkVersion=K,this.namespace=de,this.projectId=Ve,this.apiKey=Ye,this.appId=Rt}fetch(P){var K=this;return(0,Z.Z)(function*(){const[de,Ve]=yield Promise.all([K.firebaseInstallations.getId(),K.firebaseInstallations.getToken()]),Rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${K.projectId}/namespaces/${K.namespace}:fetch?key=${K.apiKey}`,Xt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},cn={sdk_version:K.sdkVersion,app_instance_id:de,app_instance_id_token:Ve,app_id:K.appId,language_code:ms()},bn={method:"POST",headers:Xt,body:JSON.stringify(cn)},lr=fetch(Rt,bn),Un=new Promise((lo,Ks)=>{P.signal.addEventListener(()=>{const vo=new Error("The operation was aborted.");vo.name="AbortError",Ks(vo)})});let Zr;try{yield Promise.race([lr,Un]),Zr=yield lr}catch(lo){let Ks="fetch-client-network";throw"AbortError"===lo.name&&(Ks="fetch-timeout"),ir.create(Ks,{originalErrorMessage:lo.message})}let ki=Zr.status;const Sa=Zr.headers.get("ETag")||void 0;let Ya,hs;if(200===Zr.status){let lo;try{lo=yield Zr.json()}catch(Ks){throw ir.create("fetch-client-parse",{originalErrorMessage:Ks.message})}Ya=lo.entries,hs=lo.state}if("INSTANCE_STATE_UNSPECIFIED"===hs?ki=500:"NO_CHANGE"===hs?ki=304:("NO_TEMPLATE"===hs||"EMPTY_CONFIG"===hs)&&(Ya={}),304!==ki&&200!==ki)throw ir.create("fetch-status",{httpStatus:ki});return{status:ki,eTag:Sa,config:Ya}})()}}class Ms{constructor(P,K){this.client=P,this.storage=K}fetch(P){var K=this;return(0,Z.Z)(function*(){const de=(yield K.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return K.attemptFetch(P,de)})()}attemptFetch(P,{throttleEndTimeMillis:K,backoffCount:de}){var Ve=this;return(0,Z.Z)(function*(){yield function rr(T,P){return new Promise((K,de)=>{const Ve=Math.max(P-Date.now(),0),Ye=setTimeout(K,Ve);T.addEventListener(()=>{clearTimeout(Ye),de(ir.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,K);try{const Ye=yield Ve.client.fetch(P);return yield Ve.storage.deleteThrottleMetadata(),Ye}catch(Ye){if(!function Ss(T){if(!(T instanceof pe.ZR&&T.customData))return!1;const P=Number(T.customData.httpStatus);return 429===P||500===P||503===P||504===P}(Ye))throw Ye;const Rt={throttleEndTimeMillis:Date.now()+(0,pe.$s)(de),backoffCount:de+1};return yield Ve.storage.setThrottleMetadata(Rt),Ve.attemptFetch(P,Rt)}})()}}class qe{constructor(P,K,de,Ve,Ye){this.app=P,this._client=K,this._storageCache=de,this._storage=Ve,this._logger=Ye,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ot(T,P){const K=T.target.error||void 0;return ir.create(P,{originalErrorMessage:K&&K.message})}const Tt="app_namespace_store";class Ln{constructor(P,K,de,Ve=function Rr(){return new Promise((T,P)=>{try{const K=indexedDB.open("firebase_remote_config",1);K.onerror=de=>{P(ot(de,"storage-open"))},K.onsuccess=de=>{T(de.target.result)},K.onupgradeneeded=de=>{0===de.oldVersion&&de.target.result.createObjectStore(Tt,{keyPath:"compositeKey"})}}catch(K){P(ir.create("storage-open",{originalErrorMessage:K}))}})}()){this.appId=P,this.appName=K,this.namespace=de,this.openDbPromise=Ve}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var K=this;return(0,Z.Z)(function*(){const de=yield K.openDbPromise;return new Promise((Ve,Ye)=>{const Xt=de.transaction([Tt],"readonly").objectStore(Tt),cn=K.createCompositeKey(P);try{const bn=Xt.get(cn);bn.onerror=lr=>{Ye(ot(lr,"storage-get"))},bn.onsuccess=lr=>{const Un=lr.target.result;Ve(Un?Un.value:void 0)}}catch(bn){Ye(ir.create("storage-get",{originalErrorMessage:bn&&bn.message}))}})})()}set(P,K){var de=this;return(0,Z.Z)(function*(){const Ve=yield de.openDbPromise;return new Promise((Ye,Rt)=>{const cn=Ve.transaction([Tt],"readwrite").objectStore(Tt),bn=de.createCompositeKey(P);try{const lr=cn.put({compositeKey:bn,value:K});lr.onerror=Un=>{Rt(ot(Un,"storage-set"))},lr.onsuccess=()=>{Ye()}}catch(lr){Rt(ir.create("storage-set",{originalErrorMessage:lr&&lr.message}))}})})()}delete(P){var K=this;return(0,Z.Z)(function*(){const de=yield K.openDbPromise;return new Promise((Ve,Ye)=>{const Xt=de.transaction([Tt],"readwrite").objectStore(Tt),cn=K.createCompositeKey(P);try{const bn=Xt.delete(cn);bn.onerror=lr=>{Ye(ot(lr,"storage-delete"))},bn.onsuccess=()=>{Ve()}}catch(bn){Ye(ir.create("storage-delete",{originalErrorMessage:bn&&bn.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class Ri{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,Z.Z)(function*(){const K=P.storage.getLastFetchStatus(),de=P.storage.getLastSuccessfulFetchTimestampMillis(),Ve=P.storage.getActiveConfig(),Ye=yield K;Ye&&(P.lastFetchStatus=Ye);const Rt=yield de;Rt&&(P.lastSuccessfulFetchTimestampMillis=Rt);const Xt=yield Ve;Xt&&(P.activeConfig=Xt)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function Vi(){return xs.apply(this,arguments)}function xs(){return(xs=(0,Z.Z)(function*(){if(!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Ii(){(0,_e._registerComponent)(new we.wA("remote-config",function T(P,{instanceIdentifier:K}){const de=P.getProvider("app").getImmediate(),Ve=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ir.create("registration-window");if(!(0,pe.hl)())throw ir.create("indexed-db-unavailable");const{projectId:Ye,apiKey:Rt,appId:Xt}=de.options;if(!Ye)throw ir.create("registration-project-id");if(!Rt)throw ir.create("registration-api-key");if(!Xt)throw ir.create("registration-app-id");const cn=new Ln(Xt,de.name,K=K||"firebase"),bn=new Ri(cn),lr=new be.Yd(vr);lr.logLevel=be.in.ERROR;const Un=new Cs(Ve,_e.SDK_VERSION,K,Ye,Rt,Xt),Zr=new Ms(Un,cn),ki=new qr(Zr,cn,bn,lr),Sa=new qe(de,ki,bn,cn,lr);return function Sr(T){const P=(0,pe.m9)(T);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(Sa),Sa},"PUBLIC").setMultipleInstances(!0)),(0,_e.registerVersion)(vr,"0.3.7"),(0,_e.registerVersion)(vr,"0.3.7","esm2017")}();const ri="/firebase-messaging-sw.js",Di="/firebase-cloud-messaging-push-scope",_r="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",us="google.c.a.c_id",ls="google.c.a.c_l",to="google.c.a.ts",Bs="google.c.a.e";var Ki=(()=>{return(T=Ki||(Ki={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Ki;var T})();function Xr(T){const P=new Uint8Array(T);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qi(T){const K=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),de=atob(K),Ve=new Uint8Array(de.length);for(let Ye=0;Ye<de.length;++Ye)Ve[Ye]=de.charCodeAt(Ye);return Ve}const bs="fcm_token_details_db",Or="fcm_token_object_Store";function cs(T){return Rs.apply(this,arguments)}function Rs(){return Rs=(0,Z.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ye=>Ye.name).includes(bs))return null;let P=null;return(yield(0,pe.X3)(bs,5,function(){var de=(0,Z.Z)(function*(Ve,Ye,Rt,Xt){var cn;if(Ye<2||!Ve.objectStoreNames.contains(Or))return;const bn=Xt.objectStore(Or),lr=yield bn.index("fcmSenderId").get(T);if(yield bn.clear(),lr)if(2===Ye){const Un=lr;if(!Un.auth||!Un.p256dh||!Un.endpoint)return;P={token:Un.fcmToken,createTime:null!==(cn=Un.createTime)&&void 0!==cn?cn:Date.now(),subscriptionOptions:{auth:Un.auth,p256dh:Un.p256dh,endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:"string"==typeof Un.vapidKey?Un.vapidKey:Xr(Un.vapidKey)}}}else if(3===Ye){const Un=lr;P={token:Un.fcmToken,createTime:Un.createTime,subscriptionOptions:{auth:Xr(Un.auth),p256dh:Xr(Un.p256dh),endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:Xr(Un.vapidKey)}}}else if(4===Ye){const Un=lr;P={token:Un.fcmToken,createTime:Un.createTime,subscriptionOptions:{auth:Xr(Un.auth),p256dh:Xr(Un.p256dh),endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:Xr(Un.vapidKey)}}}});return function(Ve,Ye,Rt,Xt){return de.apply(this,arguments)}}())).close(),yield(0,pe.Lj)(bs),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),Os(P)?P:null}),Rs.apply(this,arguments)}function Os(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:P}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const pi="firebase-messaging-store";let gi=null;function Zi(){return gi||(gi=(0,pe.X3)("firebase-messaging-database",1,(T,P)=>{0===P&&T.createObjectStore(pi)})),gi}function ur(T){return x.apply(this,arguments)}function x(){return(x=(0,Z.Z)(function*(T){const P=Je(T),de=yield(yield Zi()).transaction(pi).objectStore(pi).get(P);if(de)return de;{const Ve=yield cs(T.appConfig.senderId);if(Ve)return yield G(T,Ve),Ve}})).apply(this,arguments)}function G(T,P){return M.apply(this,arguments)}function M(){return(M=(0,Z.Z)(function*(T,P){const K=Je(T),Ve=(yield Zi()).transaction(pi,"readwrite");return yield Ve.objectStore(pi).put(P,K),yield Ve.complete,P})).apply(this,arguments)}function Y(T){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,Z.Z)(function*(T){const P=Je(T),de=(yield Zi()).transaction(pi,"readwrite");yield de.objectStore(pi).delete(P),yield de.complete})).apply(this,arguments)}function Je({appConfig:T}){return T.appId}const Nt=new pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qn(T,P){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,Z.Z)(function*(T,P){const K=yield k(T),de=C(P),Ve={method:"POST",headers:K,body:JSON.stringify(de)};let Ye;try{Ye=yield(yield fetch(gr(T.appConfig),Ve)).json()}catch(Rt){throw Nt.create("token-subscribe-failed",{errorInfo:Rt})}if(Ye.error)throw Nt.create("token-subscribe-failed",{errorInfo:Ye.error.message});if(!Ye.token)throw Nt.create("token-subscribe-no-token");return Ye.token})).apply(this,arguments)}function Cn(T,P){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,Z.Z)(function*(T,P){const K=yield k(T),de=C(P.subscriptionOptions),Ve={method:"PATCH",headers:K,body:JSON.stringify(de)};let Ye;try{Ye=yield(yield fetch(`${gr(T.appConfig)}/${P.token}`,Ve)).json()}catch(Rt){throw Nt.create("token-update-failed",{errorInfo:Rt})}if(Ye.error)throw Nt.create("token-update-failed",{errorInfo:Ye.error.message});if(!Ye.token)throw Nt.create("token-update-no-token");return Ye.token})).apply(this,arguments)}function Pr(T,P){return sr.apply(this,arguments)}function sr(){return(sr=(0,Z.Z)(function*(T,P){const de={method:"DELETE",headers:yield k(T)};try{const Ye=yield(yield fetch(`${gr(T.appConfig)}/${P}`,de)).json();if(Ye.error)throw Nt.create("token-unsubscribe-failed",{errorInfo:Ye.error.message})}catch(Ve){throw Nt.create("token-unsubscribe-failed",{errorInfo:Ve})}})).apply(this,arguments)}function gr({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function k(T){return A.apply(this,arguments)}function A(){return(A=(0,Z.Z)(function*({appConfig:T,installations:P}){const K=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${K}`})})).apply(this,arguments)}function C({p256dh:T,auth:P,endpoint:K,vapidKey:de}){const Ve={web:{endpoint:K,auth:P,p256dh:T}};return de!==_r&&(Ve.web.applicationPubKey=de),Ve}const q=6048e5;function rt(T){return tn.apply(this,arguments)}function tn(){return(tn=(0,Z.Z)(function*(T){const P=yield Xe(T.swRegistration,T.vapidKey),K={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:P.endpoint,auth:Xr(P.getKey("auth")),p256dh:Xr(P.getKey("p256dh"))},de=yield ur(T.firebaseDependencies);if(de){if(sn(de.subscriptionOptions,K))return Date.now()>=de.createTime+q?O(T,{token:de.token,createTime:Date.now(),subscriptionOptions:K}):de.token;try{yield Pr(T.firebaseDependencies,de.token)}catch(Ve){console.warn(Ve)}return Q(T.firebaseDependencies,K)}return Q(T.firebaseDependencies,K)})).apply(this,arguments)}function mr(T){return L.apply(this,arguments)}function L(){return(L=(0,Z.Z)(function*(T){const P=yield ur(T.firebaseDependencies);P&&(yield Pr(T.firebaseDependencies,P.token),yield Y(T.firebaseDependencies));const K=yield T.swRegistration.pushManager.getSubscription();return!K||K.unsubscribe()})).apply(this,arguments)}function O(T,P){return ee.apply(this,arguments)}function ee(){return(ee=(0,Z.Z)(function*(T,P){try{const K=yield Cn(T.firebaseDependencies,P),de=Object.assign(Object.assign({},P),{token:K,createTime:Date.now()});return yield G(T.firebaseDependencies,de),K}catch(K){throw yield mr(T),K}})).apply(this,arguments)}function Q(T,P){return ve.apply(this,arguments)}function ve(){return(ve=(0,Z.Z)(function*(T,P){const de={token:yield Qn(T,P),createTime:Date.now(),subscriptionOptions:P};return yield G(T,de),de.token})).apply(this,arguments)}function Xe(T,P){return ft.apply(this,arguments)}function ft(){return(ft=(0,Z.Z)(function*(T,P){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qi(P)})})).apply(this,arguments)}function sn(T,P){return P.vapidKey===T.vapidKey&&P.endpoint===T.endpoint&&P.auth===T.auth&&P.p256dh===T.p256dh}function Ht(T){const P={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function vn(T,P){if(!P.notification)return;T.notification={};const K=P.notification.title;K&&(T.notification.title=K);const de=P.notification.body;de&&(T.notification.body=de);const Ve=P.notification.image;Ve&&(T.notification.image=Ve)}(P,T),function Yn(T,P){!P.data||(T.data=P.data)}(P,T),function Fr(T,P){if(!P.fcmOptions)return;T.fcmOptions={};const K=P.fcmOptions.link;K&&(T.fcmOptions.link=K);const de=P.fcmOptions.analytics_label;de&&(T.fcmOptions.analyticsLabel=de)}(P,T),P}function Mr(T){return"object"==typeof T&&!!T&&us in T}function si(T,P){const K=[];for(let de=0;de<T.length;de++)K.push(T.charAt(de)),de<P.length&&K.push(P.charAt(de));return K.join("")}function mi(T){return Nt.create("missing-app-config-values",{valueName:T})}si("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),si("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Kn{constructor(P,K,de){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ve=function Hr(T){if(!T||!T.options)throw mi("App Configuration Object");if(!T.name)throw mi("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:K}=T;for(const de of P)if(!K[de])throw mi(de);return{appName:T.name,projectId:K.projectId,apiKey:K.apiKey,appId:K.appId,senderId:K.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:Ve,installations:K,analyticsProvider:de}}_delete(){return Promise.resolve()}}function Lr(T){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,Z.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(ri,{scope:Di}),T.swRegistration.update().catch(()=>{})}catch(P){throw Nt.create("failed-service-worker-registration",{browserErrorMessage:P.message})}})).apply(this,arguments)}function kr(T,P){return yr.apply(this,arguments)}function yr(){return(yr=(0,Z.Z)(function*(T,P){if(!P&&!T.swRegistration&&(yield Lr(T)),P||!T.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw Nt.create("invalid-sw-registration");T.swRegistration=P}})).apply(this,arguments)}function _s(T,P){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,Z.Z)(function*(T,P){P?T.vapidKey=P:T.vapidKey||(T.vapidKey=_r)})).apply(this,arguments)}function wr(){return(wr=(0,Z.Z)(function*(T,P){if(!navigator)throw Nt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nt.create("permission-blocked");return yield _s(T,null==P?void 0:P.vapidKey),yield kr(T,null==P?void 0:P.serviceWorkerRegistration),rt(T)})).apply(this,arguments)}function Ps(T,P,K){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,Z.Z)(function*(T,P,K){const de=Ea(P);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(de,{message_id:K[us],message_name:K[ls],message_time:K[to],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ea(T){switch(T){case Ki.NOTIFICATION_CLICKED:return"notification_open";case Ki.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $a(){return($a=(0,Z.Z)(function*(T,P){const K=P.data;if(!K.isFirebaseMessaging)return;T.onMessageHandler&&K.messageType===Ki.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Ht(K)):T.onMessageHandler.next(Ht(K)));const de=K.data;Mr(de)&&"1"===de[Bs]&&(yield Ps(T,K.messageType,de))})).apply(this,arguments)}const Bo="@firebase/messaging",Jo=T=>{const P=new Kn(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",K=>function ja(T,P){return $a.apply(this,arguments)}(P,K)),P},js=T=>{const P=T.getProvider("messaging").getImmediate();return{getToken:de=>function no(T,P){return wr.apply(this,arguments)}(P,de)}};function ks(){return ro.apply(this,arguments)}function ro(){return(ro=(0,Z.Z)(function*(){try{yield(0,pe.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,pe.hl)()&&(0,pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wa(){(0,_e._registerComponent)(new we.wA("messaging",Jo,"PUBLIC")),(0,_e._registerComponent)(new we.wA("messaging-internal",js,"PRIVATE")),(0,_e.registerVersion)(Bo,"0.9.12"),(0,_e.registerVersion)(Bo,"0.9.12","esm2017")}();const Ti="analytics",ec="firebase_id",$s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ns="https://www.googletagmanager.com/gtag/js",ai=new be.Yd("@firebase/analytics");function na(T){return Promise.all(T.map(P=>P.catch(K=>K)))}function Ha(T,P){const K=document.createElement("script");K.src=`${Ns}?l=${T}&id=${P}`,K.async=!0,document.head.appendChild(K)}function io(T,P,K,de,Ve,Ye){return ra.apply(this,arguments)}function ra(){return(ra=(0,Z.Z)(function*(T,P,K,de,Ve,Ye){const Rt=de[Ve];try{if(Rt)yield P[Rt];else{const cn=(yield na(K)).find(bn=>bn.measurementId===Ve);cn&&(yield P[cn.appId])}}catch(Xt){ai.error(Xt)}T("config",Ve,Ye)})).apply(this,arguments)}function Ts(T,P,K,de,Ve){return po.apply(this,arguments)}function po(){return(po=(0,Z.Z)(function*(T,P,K,de,Ve){try{let Ye=[];if(Ve&&Ve.send_to){let Rt=Ve.send_to;Array.isArray(Rt)||(Rt=[Rt]);const Xt=yield na(K);for(const cn of Rt){const bn=Xt.find(Un=>Un.measurementId===cn),lr=bn&&P[bn.appId];if(!lr){Ye=[];break}Ye.push(lr)}}0===Ye.length&&(Ye=Object.values(P)),yield Promise.all(Ye),T("event",de,Ve||{})}catch(Ye){ai.error(Ye)}})).apply(this,arguments)}function _u(){const T=window.document.getElementsByTagName("script");for(const P of Object.values(T))if(P.src&&P.src.includes(Ns))return P;return null}const Nr=new pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),jo=new class go{constructor(P={},K=1e3){this.throttleMetadata=P,this.intervalMillis=K}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,K){this.throttleMetadata[P]=K}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function $o(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Da(T){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,Z.Z)(function*(T){var P;const{appId:K,apiKey:de}=T,Ve={method:"GET",headers:$o(de)},Ye=$s.replace("{app-id}",K),Rt=yield fetch(Ye,Ve);if(200!==Rt.status&&304!==Rt.status){let Xt="";try{const cn=yield Rt.json();(null===(P=cn.error)||void 0===P?void 0:P.message)&&(Xt=cn.error.message)}catch(cn){}throw Nr.create("config-fetch-failed",{httpStatus:Rt.status,responseMessage:Xt})}return Rt.json()})).apply(this,arguments)}function Wa(T){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,Z.Z)(function*(T,P=jo,K){const{appId:de,apiKey:Ve,measurementId:Ye}=T.options;if(!de)throw Nr.create("no-app-id");if(!Ve){if(Ye)return{measurementId:Ye,appId:de};throw Nr.create("no-api-key")}const Rt=P.getThrottleMetadata(de)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xt=new I;return setTimeout((0,Z.Z)(function*(){Xt.abort()}),void 0!==K?K:6e4),Ca({appId:de,apiKey:Ve,measurementId:Ye},Rt,Xt,P)})).apply(this,arguments)}function Ca(T,P,K){return As.apply(this,arguments)}function As(){return(As=(0,Z.Z)(function*(T,{throttleEndTimeMillis:P,backoffCount:K},de,Ve=jo){const{appId:Ye,measurementId:Rt}=T;try{yield tc(de,P)}catch(Xt){if(Rt)return ai.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rt} provided in the "measurementId" field in the local Firebase config. [${Xt.message}]`),{appId:Ye,measurementId:Rt};throw Xt}try{const Xt=yield Da(T);return Ve.deleteThrottleMetadata(Ye),Xt}catch(Xt){if(!Eu(Xt)){if(Ve.deleteThrottleMetadata(Ye),Rt)return ai.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rt} provided in the "measurementId" field in the local Firebase config. [${Xt.message}]`),{appId:Ye,measurementId:Rt};throw Xt}const cn=503===Number(Xt.customData.httpStatus)?(0,pe.$s)(K,Ve.intervalMillis,30):(0,pe.$s)(K,Ve.intervalMillis),bn={throttleEndTimeMillis:Date.now()+cn,backoffCount:K+1};return Ve.setThrottleMetadata(Ye,bn),ai.debug(`Calling attemptFetch again in ${cn} millis`),Ca(T,bn,de,Ve)}})).apply(this,arguments)}function tc(T,P){return new Promise((K,de)=>{const Ve=Math.max(P-Date.now(),0),Ye=setTimeout(K,Ve);T.addEventListener(()=>{clearTimeout(Ye),de(Nr.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function Eu(T){if(!(T instanceof pe.ZR&&T.customData))return!1;const P=Number(T.customData.httpStatus);return 429===P||500===P||503===P||504===P}class I{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}function E(){return _.apply(this,arguments)}function _(){return(_=(0,Z.Z)(function*(){if(!(0,pe.hl)())return ai.warn(Nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,pe.eu)()}catch(T){return ai.warn(Nr.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function F(){return(F=(0,Z.Z)(function*(T,P,K,de,Ve,Ye,Rt){var Xt;const cn=Wa(T);cn.then(ki=>{K[ki.measurementId]=ki.appId,T.options.measurementId&&ki.measurementId!==T.options.measurementId&&ai.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${ki.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ki=>ai.error(ki)),P.push(cn);const bn=E().then(ki=>{if(ki)return de.getId()}),[lr,Un]=yield Promise.all([cn,bn]);_u()||Ha(Ye,lr.measurementId),Ve("js",new Date);const Zr=null!==(Xt=null==Rt?void 0:Rt.config)&&void 0!==Xt?Xt:{};return Zr.origin="firebase",Zr.update=!0,null!=Un&&(Zr[ec]=Un),Ve("config",lr.measurementId,Zr),lr.measurementId})).apply(this,arguments)}class j{constructor(P){this.app=P}_delete(){return delete ie[this.app.options.appId],Promise.resolve()}}let ie={},De=[];const ut={};let dn,Et,st="dataLayer",ze=!1;function Es(T,P,K){!function Ur(){const T=[];if((0,pe.ru)()&&T.push("This is a browser extension environment."),(0,pe.zI)()||T.push("Cookies are not available."),T.length>0){const P=T.map((de,Ve)=>`(${Ve+1}) ${de}`).join(" "),K=Nr.create("invalid-analytics-context",{errorInfo:P});ai.warn(K.message)}}();const de=T.options.appId;if(!de)throw Nr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Nr.create("no-api-key");ai.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ie[de])throw Nr.create("already-exists",{id:de});if(!ze){!function vs(T){let P=[];Array.isArray(window[T])?P=window[T]:window[T]=P}(st);const{wrappedGtag:Ye,gtagCore:Rt}=function Ga(T,P,K,de,Ve){let Ye=function(...Rt){window[de].push(arguments)};return window[Ve]&&"function"==typeof window[Ve]&&(Ye=window[Ve]),window[Ve]=function Hs(T,P,K,de){function Ye(){return(Ye=(0,Z.Z)(function*(Rt,Xt,cn){try{"event"===Rt?yield Ts(T,P,K,Xt,cn):"config"===Rt?yield io(T,P,K,de,Xt,cn):T("set",Xt)}catch(bn){ai.error(bn)}})).apply(this,arguments)}return function Ve(Rt,Xt,cn){return Ye.apply(this,arguments)}}(Ye,T,P,K),{gtagCore:Ye,wrappedGtag:window[Ve]}}(ie,De,ut,st,"gtag");Et=Ye,dn=Rt,ze=!0}return ie[de]=function S(T,P,K,de,Ve,Ye,Rt){return F.apply(this,arguments)}(T,De,ut,P,dn,st,K),new j(T)}function mo(){return(mo=(0,Z.Z)(function*(T,P,K,de,Ve){if(Ve&&Ve.global)T("event",K,de);else{const Ye=yield P;T("event",K,Object.assign(Object.assign({},de),{send_to:Ye}))}})).apply(this,arguments)}function oo(){return za.apply(this,arguments)}function za(){return(za=(0,Z.Z)(function*(){if((0,pe.ru)()||!(0,pe.zI)()||!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch(T){return!1}})).apply(this,arguments)}const ba="@firebase/analytics";!function zd(){(0,_e._registerComponent)(new we.wA(Ti,(P,{options:K})=>Es(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),K),"PUBLIC")),(0,_e._registerComponent)(new we.wA("analytics-internal",function T(P){try{const K=P.getProvider(Ti).getImmediate();return{logEvent:(de,Ve,Ye)=>function Qc(T,P,K,de){T=(0,pe.m9)(T),function wu(T,P,K,de,Ve){return mo.apply(this,arguments)}(Et,ie[T.app.options.appId],P,K,de).catch(Ve=>ai.error(Ve))}(K,de,Ve,Ye)}}catch(K){throw Nr.create("interop-component-reg-failed",{reason:K})}},"PRIVATE")),(0,_e.registerVersion)(ba,"0.7.8"),(0,_e.registerVersion)(ba,"0.7.8","esm2017")}();var is=R(4408),Kd=R(7565);const ll=new class Xn extends Kd.v{}(class Ws extends is.o{constructor(P,K){super(P,K),this.scheduler=P,this.work=K}schedule(P,K=0){return K>0?super.schedule(P,K):(this.delay=K,this.state=P,this.scheduler.flush(this),this)}execute(P,K){return K>0||this.closed?super.execute(P,K):this._execute(P,K)}requestAsyncId(P,K,de=0){return null!=de&&de>0||null==de&&this.delay>0?super.requestAsyncId(P,K,de):P.flush(this)}});var Ai=R(4986),Mo=R(8505),Ji=R(5363),Vs=R(9468);const Ta=new p.GfV("7.3.0"),Ho="__angularfire_symbol__analyticsIsSupportedValue",Bi="__angularfire_symbol__analyticsIsSupported",ds="__angularfire_symbol__remoteConfigIsSupportedValue",xo="__angularfire_symbol__remoteConfigIsSupported",Cu="__angularfire_symbol__messagingIsSupportedValue",$t="__angularfire_symbol__messagingIsSupported";function _o(T,P,K){if(P){if(1===P.length)return P[0];const Ye=P.filter(Rt=>Rt.app===K);if(1===Ye.length)return Ye[0]}return K.container.getProvider(T).getImmediate({optional:!0})}globalThis[Bi]||(globalThis[Bi]=oo().then(T=>globalThis[Ho]=T).catch(()=>globalThis[Ho]=!1)),globalThis[$t]||(globalThis[$t]=ks().then(T=>globalThis[Cu]=T).catch(()=>globalThis[Cu]=!1)),globalThis[xo]||(globalThis[xo]=Vi().then(T=>globalThis[ds]=T).catch(()=>globalThis[ds]=!1));const Ro=(T,P)=>{const K=P?[P]:(0,H.C6)(),de=[];return K.forEach(Ve=>{Ve.container.getProvider(T).instances.forEach(Rt=>{de.includes(Rt)||de.push(Rt)})}),de};function Go(){}class Oo{constructor(P,K=ll){this.zone=P,this.delegate=K}now(){return this.delegate.now()}schedule(P,K,de){const Ve=this.zone;return this.delegate.schedule(function(Rt){Ve.runGuarded(()=>{P.apply(this,[Rt])})},K,de)}}class dl{constructor(P){this.zone=P,this.task=null}call(P,K){const de=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Go,{},Go,Go)),K.pipe((0,Mo.b)({next:de,complete:de,error:de})).subscribe(P).add(de)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Po=(()=>{class T{constructor(K){this.ngZone=K,this.outsideAngular=K.runOutsideAngular(()=>new Oo(Zone.current)),this.insideAngular=K.run(()=>new Oo(Zone.current,Ai.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(K){return new(K||T)(p.LFG(p.R0b))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function uo(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Tu(T){return T.pipe((0,Ji.Q)(uo().outsideAngular))}function oa(T){return uo(),function Wo(T){return function(K){return(K=K.lift(new dl(T.ngZone))).pipe((0,Vs.R)(T.outsideAngular),(0,Ji.Q)(T.insideAngular))}}(uo())(T)}},2090:(Pt,We,R)=>{R.d(We,{$s:()=>nr,BH:()=>Ge,G6:()=>Re,L:()=>Fe,LL:()=>_t,Lj:()=>In,Mn:()=>Ee,Sg:()=>Ze,UG:()=>ke,US:()=>be,X3:()=>ln,ZB:()=>me,ZR:()=>Be,b$:()=>N,d:()=>ne,eu:()=>X,hl:()=>fe,jU:()=>at,m9:()=>Qt,ne:()=>Bt,pd:()=>An,r3:()=>_n,ru:()=>$,tV:()=>le,uI:()=>Le,vZ:()=>er,w1:()=>ue,xO:()=>zt,xb:()=>qn,z$:()=>mt,zI:()=>Oe,zd:()=>qt});var p=R(5861);const pe=function(he){const te=[];let Ce=0;for(let Qe=0;Qe<he.length;Qe++){let He=he.charCodeAt(Qe);He<128?te[Ce++]=He:He<2048?(te[Ce++]=He>>6|192,te[Ce++]=63&He|128):55296==(64512&He)&&Qe+1<he.length&&56320==(64512&he.charCodeAt(Qe+1))?(He=65536+((1023&He)<<10)+(1023&he.charCodeAt(++Qe)),te[Ce++]=He>>18|240,te[Ce++]=He>>12&63|128,te[Ce++]=He>>6&63|128,te[Ce++]=63&He|128):(te[Ce++]=He>>12|224,te[Ce++]=He>>6&63|128,te[Ce++]=63&He|128)}return te},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(he,te){if(!Array.isArray(he))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ce=te?this.byteToCharMapWebSafe_:this.byteToCharMap_,Qe=[];for(let He=0;He<he.length;He+=3){const xt=he[He],Ae=He+1<he.length,ge=Ae?he[He+1]:0,oe=He+2<he.length,Me=oe?he[He+2]:0;let en=(15&ge)<<2|Me>>6,Dn=63&Me;oe||(Dn=64,Ae||(en=64)),Qe.push(Ce[xt>>2],Ce[(3&xt)<<4|ge>>4],Ce[en],Ce[Dn])}return Qe.join("")},encodeString(he,te){return this.HAS_NATIVE_SUPPORT&&!te?btoa(he):this.encodeByteArray(pe(he),te)},decodeString(he,te){return this.HAS_NATIVE_SUPPORT&&!te?atob(he):function(he){const te=[];let Ce=0,Qe=0;for(;Ce<he.length;){const He=he[Ce++];if(He<128)te[Qe++]=String.fromCharCode(He);else if(He>191&&He<224){const xt=he[Ce++];te[Qe++]=String.fromCharCode((31&He)<<6|63&xt)}else if(He>239&&He<365){const oe=((7&He)<<18|(63&he[Ce++])<<12|(63&he[Ce++])<<6|63&he[Ce++])-65536;te[Qe++]=String.fromCharCode(55296+(oe>>10)),te[Qe++]=String.fromCharCode(56320+(1023&oe))}else{const xt=he[Ce++],Ae=he[Ce++];te[Qe++]=String.fromCharCode((15&He)<<12|(63&xt)<<6|63&Ae)}}return te.join("")}(this.decodeStringToByteArray(he,te))},decodeStringToByteArray(he,te){this.init_();const Ce=te?this.charToByteMapWebSafe_:this.charToByteMap_,Qe=[];for(let He=0;He<he.length;){const xt=Ce[he.charAt(He++)],ge=He<he.length?Ce[he.charAt(He)]:0;++He;const Me=He<he.length?Ce[he.charAt(He)]:64;++He;const At=He<he.length?Ce[he.charAt(He)]:64;if(++He,null==xt||null==ge||null==Me||null==At)throw Error();Qe.push(xt<<2|ge>>4),64!==Me&&(Qe.push(ge<<4&240|Me>>2),64!==At&&Qe.push(Me<<6&192|At))}return Qe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let he=0;he<this.ENCODED_VALS.length;he++)this.byteToCharMap_[he]=this.ENCODED_VALS.charAt(he),this.charToByteMap_[this.byteToCharMap_[he]]=he,this.byteToCharMapWebSafe_[he]=this.ENCODED_VALS_WEBSAFE.charAt(he),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[he]]=he,he>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(he)]=he,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(he)]=he)}}},Fe=function(he){return function(he){const te=pe(he);return be.encodeByteArray(te,!0)}(he).replace(/\./g,"")},le=function(he){try{return be.decodeString(he,!0)}catch(te){console.error("base64Decode failed: ",te)}return null};function me(he,te){if(!(te instanceof Object))return te;switch(te.constructor){case Date:return new Date(te.getTime());case Object:void 0===he&&(he={});break;case Array:he=[];break;default:return te}for(const Ce in te)!te.hasOwnProperty(Ce)||!je(Ce)||(he[Ce]=me(he[Ce],te[Ce]));return he}function je(he){return"__proto__"!==he}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((te,Ce)=>{this.resolve=te,this.reject=Ce})}wrapCallback(te){return(Ce,Qe)=>{Ce?this.reject(Ce):this.resolve(Qe),"function"==typeof te&&(this.promise.catch(()=>{}),1===te.length?te(Ce):te(Ce,Qe))}}}function Ze(he,te){if(he.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Qe=te||"demo-project",He=he.iat||0,xt=he.sub||he.user_id;if(!xt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ae=Object.assign({iss:`https://securetoken.google.com/${Qe}`,aud:Qe,iat:He,exp:He+3600,auth_time:He,sub:xt,user_id:xt,firebase:{sign_in_provider:"custom",identities:{}}},he);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(Ae)),""].join(".")}function mt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function ke(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(he){return!1}}function at(){return"object"==typeof self&&self.self===self}function $(){const he="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof he&&void 0!==he.id}function N(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ne(){return mt().indexOf("Electron/")>=0}function ue(){const he=mt();return he.indexOf("MSIE ")>=0||he.indexOf("Trident/")>=0}function Ee(){return mt().indexOf("MSAppHost/")>=0}function Re(){return!ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"object"==typeof indexedDB}function X(){return new Promise((he,te)=>{try{let Ce=!0;const Qe="validate-browser-context-for-indexeddb-analytics-module",He=self.indexedDB.open(Qe);He.onsuccess=()=>{He.result.close(),Ce||self.indexedDB.deleteDatabase(Qe),he(!0)},He.onupgradeneeded=()=>{Ce=!1},He.onerror=()=>{var xt;te((null===(xt=He.error)||void 0===xt?void 0:xt.message)||"")}}catch(Ce){te(Ce)}})}function Oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Be extends Error{constructor(te,Ce,Qe){super(Ce),this.code=te,this.customData=Qe,this.name="FirebaseError",Object.setPrototypeOf(this,Be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_t.prototype.create)}}class _t{constructor(te,Ce,Qe){this.service=te,this.serviceName=Ce,this.errors=Qe}create(te,...Ce){const Qe=Ce[0]||{},He=`${this.service}/${te}`,xt=this.errors[te],Ae=xt?function vt(he,te){return he.replace(Ot,(Ce,Qe)=>{const He=te[Qe];return null!=He?String(He):`<${Qe}?>`})}(xt,Qe):"Error";return new Be(He,`${this.serviceName}: ${Ae} (${He}).`,Qe)}}const Ot=/\{\$([^}]+)}/g;function _n(he,te){return Object.prototype.hasOwnProperty.call(he,te)}function qn(he){for(const te in he)if(Object.prototype.hasOwnProperty.call(he,te))return!1;return!0}function er(he,te){if(he===te)return!0;const Ce=Object.keys(he),Qe=Object.keys(te);for(const He of Ce){if(!Qe.includes(He))return!1;const xt=he[He],Ae=te[He];if(ct(xt)&&ct(Ae)){if(!er(xt,Ae))return!1}else if(xt!==Ae)return!1}for(const He of Qe)if(!Ce.includes(He))return!1;return!0}function ct(he){return null!==he&&"object"==typeof he}function zt(he){const te=[];for(const[Ce,Qe]of Object.entries(he))Array.isArray(Qe)?Qe.forEach(He=>{te.push(encodeURIComponent(Ce)+"="+encodeURIComponent(He))}):te.push(encodeURIComponent(Ce)+"="+encodeURIComponent(Qe));return te.length?"&"+te.join("&"):""}function qt(he){const te={};return he.replace(/^\?/,"").split("&").forEach(Qe=>{if(Qe){const[He,xt]=Qe.split("=");te[decodeURIComponent(He)]=decodeURIComponent(xt)}}),te}function An(he){const te=he.indexOf("?");if(!te)return"";const Ce=he.indexOf("#",te);return he.substring(te,Ce>0?Ce:void 0)}function Bt(he,te){const Ce=new un(he,te);return Ce.subscribe.bind(Ce)}class un{constructor(te,Ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ce,this.task.then(()=>{te(this)}).catch(Qe=>{this.error(Qe)})}next(te){this.forEachObserver(Ce=>{Ce.next(te)})}error(te){this.forEachObserver(Ce=>{Ce.error(te)}),this.close(te)}complete(){this.forEachObserver(te=>{te.complete()}),this.close()}subscribe(te,Ce,Qe){let He;if(void 0===te&&void 0===Ce&&void 0===Qe)throw new Error("Missing Observer.");He=function jt(he,te){if("object"!=typeof he||null===he)return!1;for(const Ce of te)if(Ce in he&&"function"==typeof he[Ce])return!0;return!1}(te,["next","error","complete"])?te:{next:te,error:Ce,complete:Qe},void 0===He.next&&(He.next=Br),void 0===He.error&&(He.error=Br),void 0===He.complete&&(He.complete=Br);const xt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?He.error(this.finalError):He.complete()}catch(Ae){}}),this.observers.push(He),xt}unsubscribeOne(te){void 0===this.observers||void 0===this.observers[te]||(delete this.observers[te],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(te){if(!this.finalized)for(let Ce=0;Ce<this.observers.length;Ce++)this.sendOne(Ce,te)}sendOne(te,Ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[te])try{Ce(this.observers[te])}catch(Qe){"undefined"!=typeof console&&console.error&&console.error(Qe)}})}close(te){this.finalized||(this.finalized=!0,void 0!==te&&(this.finalError=te),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Br(){}function nr(he,te=1e3,Ce=2){const Qe=te*Math.pow(Ce,he),He=Math.round(.5*Qe*(Math.random()-.5)*2);return Math.min(144e5,Qe+He)}function Qt(he){return he&&he._delegate?he._delegate:he}function pr(he,te){return new Promise((Ce,Qe)=>{he.onsuccess=He=>{Ce(He.target.result)},he.onerror=He=>{var xt;Qe(`${te}: ${null===(xt=He.target.error)||void 0===xt?void 0:xt.message}`)}})}class En{constructor(te){this._db=te,this.objectStoreNames=this._db.objectStoreNames}transaction(te,Ce="readonly"){return new kt(this._db.transaction.call(this._db,te,Ce))}createObjectStore(te,Ce){return new dt(this._db.createObjectStore(te,Ce))}close(){this._db.close()}}class kt{constructor(te){this._transaction=te,this.complete=new Promise((Ce,Qe)=>{this._transaction.oncomplete=function(){Ce()},this._transaction.onerror=()=>{Qe(this._transaction.error)},this._transaction.onabort=()=>{Qe(this._transaction.error)}})}objectStore(te){return new dt(this._transaction.objectStore(te))}}class dt{constructor(te){this._store=te}index(te){return new Gt(this._store.index(te))}createIndex(te,Ce,Qe){return new Gt(this._store.createIndex(te,Ce,Qe))}get(te){return pr(this._store.get(te),"Error reading from IndexedDB")}put(te,Ce){return pr(this._store.put(te,Ce),"Error writing to IndexedDB")}delete(te){return pr(this._store.delete(te),"Error deleting from IndexedDB")}clear(){return pr(this._store.clear(),"Error clearing IndexedDB object store")}}class Gt{constructor(te){this._index=te}get(te){return pr(this._index.get(te),"Error reading from IndexedDB")}}function ln(he,te,Ce){return new Promise((Qe,He)=>{try{const xt=indexedDB.open(he,te);xt.onsuccess=Ae=>{Qe(new En(Ae.target.result))},xt.onerror=Ae=>{var ge;He(`Error opening indexedDB: ${null===(ge=Ae.target.error)||void 0===ge?void 0:ge.message}`)},xt.onupgradeneeded=Ae=>{Ce(new En(xt.result),Ae.oldVersion,Ae.newVersion,new kt(xt.transaction))}}catch(xt){He(`Error opening indexedDB: ${xt.message}`)}})}function In(he){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,p.Z)(function*(he){return new Promise((te,Ce)=>{try{const Qe=indexedDB.deleteDatabase(he);Qe.onsuccess=()=>{te()},Qe.onerror=He=>{var xt;Ce(`Error deleting indexedDB database "${he}": ${null===(xt=He.target.error)||void 0===xt?void 0:xt.message}`)}}catch(Qe){Ce(`Error deleting indexedDB database "${he}": ${Qe.message}`)}})})).apply(this,arguments)}},7556:(Pt,We,R)=>{R.d(We,{e:()=>le});var p=R(5861),H=R(9100),Z=R(4004),_e=R(9300),pe=R(3900),we=R(9646),be=R(5e3),ye=R(1205),Fe=R(7566);let le=(()=>{class re{constructor(je,Ge,Ze,mt){this.angularFireAuth=je,this.angularFireStore=Ge,this.activatedRoute=Ze,this.router=mt,this.redirectOnLoggedOutUrl=null,this.usersCollection=this.angularFireStore.collection("users"),this.isAuthenticated$=this.angularFireAuth.user.pipe((0,Z.U)(Le=>!!Le)),this.user$=this.angularFireAuth.user.pipe((0,Z.U)(Le=>{var ke,at,$;return Le?{name:null!==(ke=Le.displayName)&&void 0!==ke?ke:"unknown name",email:null!==(at=Le.email)&&void 0!==at?at:"unknow email",age:10,phoneNumber:null!==($=Le.phoneNumber)&&void 0!==$?$:"unknown phone",uuid:Le.uid}:null})),this.router.events.pipe((0,_e.h)(Le=>Le instanceof H.m2),(0,Z.U)(()=>this.activatedRoute.firstChild),(0,pe.w)(Le=>{var ke;return null!==(ke=null==Le?void 0:Le.data)&&void 0!==ke?ke:(0,we.of)({})})).subscribe(Le=>{this.redirectOnLoggedOutUrl=Le.redirectOnLoggedOutUrl})}createUser(je){var Ge=this;return(0,p.Z)(function*(){var Ze;const{name:mt,email:Le,password:ke,age:at,phoneNumber:$}=je,N=yield Ge.angularFireAuth.createUserWithEmailAndPassword(Le,ke);if(!N.user)throw Error("User cannot be found");yield Ge.usersCollection.doc(null===(Ze=N.user)||void 0===Ze?void 0:Ze.uid).set({name:mt,email:Le,phoneNumber:$,age:at}),yield N.user.updateProfile({displayName:mt})})()}login(je){var Ge=this;return(0,p.Z)(function*(){const{email:Ze,password:mt}=je;yield Ge.angularFireAuth.signInWithEmailAndPassword(Ze,mt)})()}logout(){var je=this;return(0,p.Z)(function*(){yield je.angularFireAuth.signOut(),je.redirectOnLoggedOutUrl&&je.router.navigateByUrl(je.redirectOnLoggedOutUrl)})()}}return re.\u0275fac=function(je){return new(je||re)(be.LFG(ye.zQ),be.LFG(Fe.ST),be.LFG(H.gz),be.LFG(H.F0))},re.\u0275prov=be.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})()},9541:(Pt,We,R)=>{R.d(We,{Y:()=>ne});var pe,p=R(4004),H=R(3900),Z=R(9646),_e=R(4128),we=new Uint8Array(16);function be(){if(!pe&&!(pe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pe(we)}const ye=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,le=function Fe(ue){return"string"==typeof ue&&ye.test(ue)};for(var re=[],me=0;me<256;++me)re.push((me+256).toString(16).substr(1));const mt=function Ze(ue,Ee,Ne){var Re=(ue=ue||{}).random||(ue.rng||be)();if(Re[6]=15&Re[6]|64,Re[8]=63&Re[8]|128,Ee){Ne=Ne||0;for(var fe=0;fe<16;++fe)Ee[Ne+fe]=Re[fe];return Ee}return function je(ue){var Ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Ne=(re[ue[Ee+0]]+re[ue[Ee+1]]+re[ue[Ee+2]]+re[ue[Ee+3]]+"-"+re[ue[Ee+4]]+re[ue[Ee+5]]+"-"+re[ue[Ee+6]]+re[ue[Ee+7]]+"-"+re[ue[Ee+8]]+re[ue[Ee+9]]+"-"+re[ue[Ee+10]]+re[ue[Ee+11]]+re[ue[Ee+12]]+re[ue[Ee+13]]+re[ue[Ee+14]]+re[ue[Ee+15]]).toLowerCase();if(!le(Ne))throw TypeError("Stringified UUID is invalid");return Ne}(Re)};var Le=R(5e3),ke=R(7566),at=R(1205),$=R(4585),N=R(9100);let ne=(()=>{class ue{constructor(Ne,Re,fe,X){this.angularFirestore=Ne,this.angularFireAuth=Re,this.angularFireStorage=fe,this.router=X,this.CLIPS_COLLECTION_ID="clips",this._clipsCollection=this.angularFirestore.collection(this.CLIPS_COLLECTION_ID)}resolve(Ne,Re){return this._clipsCollection.doc(Ne.params.id).get().pipe((0,p.U)(fe=>fe.data()||(this.router.navigate([""]),null)))}createClip(Ne){return this._clipsCollection.add(Ne)}uploadClip(Ne){const fe=`clips/${mt()}.mp4`;return[this.angularFireStorage.upload(fe,Ne),this.angularFireStorage.ref(fe)]}uploadScreenshot(Ne){const fe=`screenshots/${mt()}.png`;return[this.angularFireStorage.upload(fe,Ne),this.angularFireStorage.ref(fe)]}updateClip(Ne){return this._clipsCollection.doc(Ne.docID).update(Ne)}getUserClips(){return this.angularFireAuth.user.pipe((0,H.w)(Ne=>Ne?this._clipsCollection.ref.where("uid","==",Ne.uid).get():(0,Z.of)(null)),(0,p.U)(Ne=>(null==Ne?void 0:Ne.docs)?Ne.docs.map(Re=>Object.assign(Object.assign({},Re.data()),{docID:Re.id})):[]))}deleteClip(Ne){const Re=this.angularFireStorage.ref(`clips/${Ne.fileName}`),fe=this.angularFireStorage.ref(`screenshots/${Ne.screenshotFileName}`);return(0,_e.D)([Re.delete(),fe.delete(),this._clipsCollection.doc(Ne.docID).delete()]).pipe((0,p.U)(()=>Ne.docID))}getClips(Ne){const{limit:Re=6,lastDocId:fe}=Ne,X=this._clipsCollection.ref.orderBy("timestamp","desc").limit(Re);return this._clipsCollection.doc(fe).get().pipe((0,H.w)(ae=>ae.exists?X.startAfter(ae).get():X.get()),(0,p.U)(ae=>(null==ae?void 0:ae.docs)?ae.docs.map($e=>Object.assign(Object.assign({},$e.data()),{docID:$e.id})):[]))}}return ue.\u0275fac=function(Ne){return new(Ne||ue)(Le.LFG(ke.ST),Le.LFG(at.zQ),Le.LFG($.Q1),Le.LFG(N.F0))},ue.\u0275prov=Le.Yz7({token:ue,factory:ue.\u0275fac,providedIn:"root"}),ue})()},914:(Pt,We,R)=>{R.d(We,{M:()=>ae});var p=R(9808),H=R(8421),Z=R(9751),_e=R(5577),pe=R(1144),we=R(576),be=R(3268);const ye=["addListener","removeListener"],Fe=["addEventListener","removeEventListener"],le=["on","off"];function re($e,Be,_t,vt){if((0,we.m)(_t)&&(vt=_t,_t=void 0),vt)return re($e,Be,_t).pipe((0,be.Z)(vt));const[Ot,gt]=function Ze($e){return(0,we.m)($e.addEventListener)&&(0,we.m)($e.removeEventListener)}($e)?Fe.map(bt=>Ut=>$e[bt](Be,Ut,_t)):function je($e){return(0,we.m)($e.addListener)&&(0,we.m)($e.removeListener)}($e)?ye.map(me($e,Be)):function Ge($e){return(0,we.m)($e.on)&&(0,we.m)($e.off)}($e)?le.map(me($e,Be)):[];if(!Ot&&(0,pe.z)($e))return(0,_e.z)(bt=>re(bt,Be,_t))((0,H.Xf)($e));if(!Ot)throw new TypeError("Invalid event target");return new Z.y(bt=>{const Ut=(...St)=>bt.next(1<St.length?St:St[0]);return Ot(Ut),()=>gt(Ut)})}function me($e,Be){return _t=>vt=>$e[_t](Be,vt)}var mt=R(4482),Le=R(5403),ke=R(5032),$=R(7579),N=R(1135),ne=R(8372),ue=R(8505),Ee=R(5e3),Ne=R(9541),Re=R(9100),fe=R(56);const X=function($e){return["/","clips",$e]};function Oe($e,Be){if(1&$e&&(Ee.TgZ(0,"a",2),Ee._UZ(1,"img",3),Ee.TgZ(2,"div",4)(3,"div",5)(4,"div",6),Ee.O4$(),Ee.TgZ(5,"svg",7),Ee._UZ(6,"path",8),Ee.qZA()()()(),Ee.kcU(),Ee.TgZ(7,"div",9)(8,"h2",10),Ee._uU(9),Ee.qZA(),Ee.TgZ(10,"p",11),Ee._uU(11),Ee.TgZ(12,"span",12),Ee._uU(13),Ee.ALo(14,"fpTimeStamp"),Ee.qZA()()()()),2&$e){const _t=Be.$implicit;Ee.Q6J("routerLink",Ee.VKq(7,X,_t.docID)),Ee.xp6(1),Ee.Q6J("src",_t.screenshotURL,Ee.LSH),Ee.xp6(8),Ee.Oqu(_t.title),Ee.xp6(2),Ee.hij(" ",_t.displayName," \xb7 "),Ee.xp6(2),Ee.Oqu(Ee.lcZ(14,5,_t.timestamp))}}let ae=(()=>{class $e{constructor(_t){this.clipsService=_t,this.ngDestroyed$=new $.x,this._clipsSource=new N.X([]),this.clips$=this._clipsSource.asObservable()}ngOnInit(){this.updateClips(),re(window,"scroll").pipe(function at($e){return(0,mt.e)((Be,_t)=>{(0,H.Xf)($e).subscribe((0,Le.x)(_t,()=>_t.complete(),ke.Z)),!_t.closed&&Be.subscribe(_t)})}(this.ngDestroyed$),(0,ne.b)(200),(0,ue.b)(()=>this.handleScroll())).subscribe()}ngOnDestroy(){this.ngDestroyed$.next(!0),this.ngDestroyed$.complete()}handleScroll(){console.log("Nam data is: handling scroll");const{scrollTop:_t,offsetHeight:vt}=document.documentElement,{innerHeight:Ot}=window;Math.round(_t)+Ot===vt&&this.updateClips()}updateClips(){var _t;const vt=this._clipsSource.getValue(),Ot=null===(_t=vt[vt.length-1])||void 0===_t?void 0:_t.docID;Ot&&Ot===this.prevDocId||this.clipsService.getClips({lastDocId:Ot}).subscribe(gt=>{this.prevDocId=Ot,this._clipsSource.next([...vt,...gt])})}}return $e.\u0275fac=function(_t){return new(_t||$e)(Ee.Y36(Ne.Y))},$e.\u0275cmp=Ee.Xpm({type:$e,selectors:[["app-clips-list"]],features:[Ee._Bn([p.uU])],decls:3,vars:3,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(_t,vt){1&_t&&(Ee.TgZ(0,"div",0),Ee.YNc(1,Oe,15,9,"a",1),Ee.ALo(2,"async"),Ee.qZA()),2&_t&&(Ee.xp6(1),Ee.Q6J("ngForOf",Ee.lcZ(2,1,vt.clips$)))},directives:[p.sg,Re.yS],pipes:[p.Ov,fe.N],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),$e})()},56:(Pt,We,R)=>{R.d(We,{N:()=>Z});var p=R(5e3),H=R(9808);let Z=(()=>{class _e{constructor(we){this.datePipe=we}transform(we){if(!we)return"";const be=we.toDate();return this.datePipe.transform(be,"mediumDate")}}return _e.\u0275fac=function(we){return new(we||_e)(p.Y36(H.uU,16))},_e.\u0275pipe=p.Yjl({name:"fpTimeStamp",type:_e,pure:!0}),_e})()},4466:(Pt,We,R)=>{R.d(We,{m:()=>we});var p=R(9808),H=R(3075),Z=R(9100),_e=R(1470),pe=R(5e3);let we=(()=>{class be{}return be.\u0275fac=function(Fe){return new(Fe||be)},be.\u0275mod=pe.oAB({type:be}),be.\u0275inj=pe.cJS({imports:[[p.ez,Z.Bz,H.UX,_e.yI.forRoot()]]}),be})()},2871:(Pt,We,R)=>{var p=R(2313),H=R(5e3),Z=R(127),pe=(R(820),R(2011)),we=R(4585);const be_firebase={apiKey:"AIzaSyAcBedrPQWtwsBA-t8ZSjUk3y4SQ8eGRK8",authDomain:"clipit-31d1c.firebaseapp.com",projectId:"clipit-31d1c",storageBucket:"clipit-31d1c.appspot.com",messagingSenderId:"169059670918",appId:"1:169059670918:web:0da8e64eae1eddd785ea07"};var ye=R(9100),Fe=R(9635),le=R(4004),re=R(5698),me=R(1205);const je=(0,le.U)(ct=>!!ct);let Ge=(()=>{class ct{constructor(qt,An){this.router=qt,this.auth=An,this.canActivate=(kn,Bt)=>{const un=kn.data.authGuardPipe||(()=>je);return this.auth.user.pipe((0,re.q)(1),un(kn,Bt),(0,le.U)(wn=>"boolean"==typeof wn?wn:Array.isArray(wn)?this.router.createUrlTree(wn):this.router.parseUrl(wn)))}}}return ct.\u0275fac=function(qt){return new(qt||ct)(H.LFG(ye.F0),H.LFG(me.zQ))},ct.\u0275prov=H.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"any"}),ct})();var Ee=R(914);const X=[{path:"",component:(()=>{class ct{constructor(){}ngOnInit(){}}return ct.\u0275fac=function(qt){return new(qt||ct)},ct.\u0275cmp=H.Xpm({type:ct,selectors:[["app-home"]],decls:4,vars:0,consts:[[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(qt,An){1&qt&&(H.TgZ(0,"section",0)(1,"h1",1),H._uU(2," Latest "),H.qZA(),H._UZ(3,"app-clips-list"),H.qZA())},directives:[Ee.M],styles:[""]}),ct})()},{path:"about",loadChildren:()=>R.e(630).then(R.bind(R,7630)).then(ct=>ct.AboutModule)},{path:"video",canActivate:[Ge],data:{redirectOnLoggedOutUrl:"/",authGuardPipe:()=>("/",(0,Fe.z)(je,(0,le.U)(zt=>zt||"/")))},loadChildren:()=>Promise.all([R.e(592),R.e(39)]).then(R.bind(R,5039)).then(ct=>ct.VideoModule)},{path:"clips",loadChildren:()=>R.e(755).then(R.bind(R,1755)).then(ct=>ct.ClipsModule)},{path:"user",outlet:"modal",loadChildren:()=>Promise.all([R.e(592),R.e(983)]).then(R.bind(R,9983)).then(ct=>ct.UserModule)},{path:"**",loadChildren:()=>R.e(442).then(R.bind(R,2442)).then(ct=>ct.NotFoundModule)}];let Oe=(()=>{class ct{}return ct.\u0275fac=function(qt){return new(qt||ct)},ct.\u0275mod=H.oAB({type:ct}),ct.\u0275inj=H.cJS({imports:[[ye.Bz.forRoot(X)],ye.Bz]}),ct})();var ae=R(9646),$e=R(5861),Be=R(7556),_t=R(9808);const vt=function(){return["user"]},Ot=function(ct){return{modal:ct}},gt=function(ct){return{outlets:ct}},bt=function(ct){return[ct]};function Ut(ct,zt){1&ct&&(H.TgZ(0,"li")(1,"a",14),H._uU(2,"Login / Register"),H.qZA()()),2&ct&&(H.xp6(1),H.Q6J("routerLink",H.VKq(6,bt,H.VKq(4,gt,H.VKq(2,Ot,H.DdM(1,vt))))))}const St=function(){return{sort:"asc"}};function Mt(ct,zt){if(1&ct){const qt=H.EpF();H.TgZ(0,"li",7)(1,"a",15),H._uU(2,"Manage"),H.qZA()(),H.TgZ(3,"li",7)(4,"a",16),H._uU(5,"Upload"),H.qZA()(),H.TgZ(6,"li",7)(7,"a",17),H.NdJ("click",function(kn){return H.CHM(qt),H.oxw().logout(kn)}),H._uU(8,"Logout"),H.qZA()()}2&ct&&(H.xp6(1),H.Q6J("queryParams",H.DdM(1,St)))}let ht=(()=>{class ct{constructor(qt){this.authService=qt}logout(qt){var An=this;return(0,$e.Z)(function*(){qt.preventDefault(),yield An.authService.logout()})()}}return ct.\u0275fac=function(qt){return new(qt||ct)(H.Y36(Be.e))},ct.\u0275cmp=H.Xpm({type:ct,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","about",1,"px-2"],[1,"flex","flex-row","ml-auto"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],[1,"px-2",3,"routerLink"],["routerLink","video/manage",1,"px-2",3,"queryParams"],["routerLink","video/upload","href","javascript:void(0);",1,"px-2"],["href","javascript:void(0);",1,"px-2",3,"click"]],template:function(qt,An){if(1&qt&&(H.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),H._uU(3,"Clipit!"),H.qZA(),H.TgZ(4,"div",3)(5,"ul",4),H.YNc(6,Ut,3,8,"li",5),H.ALo(7,"async"),H.YNc(8,Mt,9,2,"ng-template",null,6,H.W1O),H.TgZ(10,"li",7)(11,"a",8),H._uU(12,"About"),H.qZA()()(),H.TgZ(13,"ul",9)(14,"li")(15,"a"),H._UZ(16,"img",10),H.TgZ(17,"span",11),H._uU(18,"English"),H.qZA()()(),H.TgZ(19,"li",12)(20,"a"),H._UZ(21,"img",13),H.TgZ(22,"span",11),H._uU(23,"French"),H.qZA()()()()()()()),2&qt){const kn=H.MAs(9);H.xp6(6),H.Q6J("ngIf",!1===H.lcZ(7,2,An.authService.isAuthenticated$))("ngIfElse",kn)}},directives:[ye.yS,_t.O5,ye.Od],pipes:[_t.Ov],styles:[""],changeDetection:0}),ct})(),mn=(()=>{class ct{constructor(){}}return ct.\u0275fac=function(qt){return new(qt||ct)},ct.\u0275cmp=H.Xpm({type:ct,selectors:[["app-loading-spinner"]],decls:5,vars:0,consts:[[1,"loadingio-spinner-dual-ring-tosstnkrw7b"],[1,"ldio-stkcctj1ev"]],template:function(qt,An){1&qt&&(H.TgZ(0,"div",0)(1,"div",1),H._UZ(2,"div"),H.TgZ(3,"div"),H._UZ(4,"div"),H.qZA()()())},styles:['[_nghost-%COMP%]{display:block;position:fixed;top:0;right:0;width:100vw;height:100vh;background:rgba(82,118,154,.2)}@keyframes ldio-stkcctj1ev{0%{transform:rotate(0)}to{transform:rotate(360deg)}}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box!important}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:144px;height:144px;top:28px;left:28px;border-radius:50%;border:16px solid #000;border-color:#1c4595 transparent #1c4595 transparent;animation:ldio-stkcctj1ev 1s linear infinite}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-color:transparent}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;transform:rotate(45deg)}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:16px;height:16px;top:-16px;left:48px;background:#1c4595;border-radius:50%;box-shadow:0 128px #1c4595}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{left:-16px;top:48px;box-shadow:128px 0 #1c4595}[_nghost-%COMP%]   .loadingio-spinner-dual-ring-tosstnkrw7b[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;display:inline-block;overflow:hidden}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(1);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}'],changeDetection:0}),ct})();function _n(ct,zt){1&ct&&H._UZ(0,"app-loading-spinner")}let pn=(()=>{class ct{constructor(qt){this.router=qt,this.title="clipit",this.loading$=(0,ae.of)(!1),this.loading$=this.router.events.pipe((0,le.U)(An=>An instanceof ye.xV))}}return ct.\u0275fac=function(qt){return new(qt||ct)(H.Y36(ye.F0))},ct.\u0275cmp=H.Xpm({type:ct,selectors:[["app-root"]],decls:5,vars:3,consts:[["name","modal"],[4,"ngIf"]],template:function(qt,An){1&qt&&(H._UZ(0,"app-nav")(1,"router-outlet")(2,"router-outlet",0),H.YNc(3,_n,1,0,"app-loading-spinner",1),H.ALo(4,"async")),2&qt&&(H.xp6(3),H.Q6J("ngIf",H.lcZ(4,1,An.loading$)))},directives:[ht,ye.lC,_t.O5,mn],pipes:[_t.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),ct})();var qn=R(4466);let Wn=(()=>{class ct{}return ct.\u0275fac=function(qt){return new(qt||ct)},ct.\u0275mod=H.oAB({type:ct,bootstrap:[pn]}),ct.\u0275inj=H.cJS({providers:[],imports:[[p.b2,Oe,pe.hO.initializeApp(be_firebase),qn.m,we.TE]]}),ct})();(0,H.G48)();let er=!1;Z.Z.initializeApp(be_firebase),Z.Z.auth().onAuthStateChanged(()=>{er||p.q6().bootstrapModule(Wn).catch(ct=>console.error(ct)),er=!0})},5867:(Pt,We,R)=>{R.d(We,{C6:()=>p.getApps,Mq:()=>p.getApp,ZR:()=>p.FirebaseError});var p=R(9681);(0,p.registerVersion)("firebase","9.6.11","app")},127:(Pt,We,R)=>{R.d(We,{Z:()=>p.Z});var p=R(3942);p.Z.registerVersion("firebase","9.6.11","app-compat")},820:(Pt,We,R)=>{R.r(We);var p=R(5861),H=R(3942),Z=R(2090),_e=R(9681),pe=R(655),we=R(1877),be=R(4859);const Ze=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},mt=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Le=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),at=new we.Yd("@firebase/auth");function $(g,...c){at.logLevel<=we.in.ERROR&&at.error(`Auth (${_e.SDK_VERSION}): ${g}`,...c)}function N(g,...c){throw Ne(g,...c)}function ne(g,...c){return Ne(g,...c)}function ue(g,c,f){const v=Object.assign(Object.assign({},mt()),{[c]:f});return new Z.LL("auth","Firebase",v).create(c,{appName:g.name})}function Ee(g,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&N(g,"argument-error"),ue(g,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ne(g,...c){if("string"!=typeof g){const f=c[0],v=[...c.slice(1)];return v[0]&&(v[0].appName=g.name),g._errorFactory.create(f,...v)}return Le.create(g,...c)}function Re(g,c,...f){if(!g)throw Ne(c,...f)}function fe(g){const c="INTERNAL ASSERTION FAILED: "+g;throw $(c),new Error(c)}function X(g,c){g||fe(c)}const Oe=new Map;function ae(g){X(g instanceof Function,"Expected a class definition");let c=Oe.get(g);return c?(X(c instanceof g,"Instance stored in cache mismatched with class"),c):(c=new g,Oe.set(g,c),c)}function _t(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function vt(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Ut{constructor(c,f){this.shortDelay=c,this.longDelay=f,X(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function gt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vt()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function St(g,c){X(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class Mt{static initialize(c,f,v){this.fetchImpl=c,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ht={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},mn=new Ut(3e4,6e4);function _n(g,c){return g.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:g.tenantId}):c}function pn(g,c,f,v){return qn.apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(g,c,f,v,V={}){return Wn(g,V,(0,p.Z)(function*(){let J={},Ue={};v&&("GET"===c?Ue=v:J={body:JSON.stringify(v)});const it=(0,Z.xO)(Object.assign({key:g.config.apiKey},Ue)).slice(1),Wt=yield g._getAdditionalHeaders();return Wt["Content-Type"]="application/json",g.languageCode&&(Wt["X-Firebase-Locale"]=g.languageCode),Mt.fetch()(qt(g,g.config.apiHost,f,it),Object.assign({method:c,headers:Wt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function Wn(g,c,f){return er.apply(this,arguments)}function er(){return(er=(0,p.Z)(function*(g,c,f){g._canInitEmulator=!1;const v=Object.assign(Object.assign({},ht),c);try{const V=new An(g),J=yield Promise.race([f(),V.promise]);V.clearNetworkTimeout();const Ue=yield J.json();if("needConfirmation"in Ue)throw kn(g,"account-exists-with-different-credential",Ue);if(J.ok&&!("errorMessage"in Ue))return Ue;{const it=J.ok?Ue.errorMessage:Ue.error.message,[Wt,hn]=it.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Wt)throw kn(g,"credential-already-in-use",Ue);if("EMAIL_EXISTS"===Wt)throw kn(g,"email-already-in-use",Ue);const Tn=v[Wt]||Wt.toLowerCase().replace(/[_\s]+/g,"-");if(hn)throw ue(g,Tn,hn);N(g,Tn)}}catch(V){if(V instanceof Z.ZR)throw V;N(g,"network-request-failed")}})).apply(this,arguments)}function ct(g,c,f,v){return zt.apply(this,arguments)}function zt(){return(zt=(0,p.Z)(function*(g,c,f,v,V={}){const J=yield pn(g,c,f,v,V);return"mfaPendingCredential"in J&&N(g,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function qt(g,c,f,v){const V=`${c}${f}?${v}`;return g.config.emulator?St(g.config,V):`${g.config.apiScheme}://${V}`}class An{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(ne(this.auth,"network-request-failed")),mn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(g,c,f){const v={appName:g.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const V=ne(g,c,v);return V.customData._tokenResponse=f,V}function un(){return(un=(0,p.Z)(function*(g,c){return pn(g,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function wn(g,c){return jt.apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(g,c){return pn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Br(g,c){return jr.apply(this,arguments)}function jr(){return(jr=(0,p.Z)(function*(g,c){return pn(g,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function tr(g){if(g)try{const c=new Date(Number(g));if(!isNaN(c.getTime()))return c.toUTCString()}catch(c){}}function ei(){return(ei=(0,p.Z)(function*(g,c=!1){const f=(0,Z.m9)(g),v=yield f.getIdToken(c),V=Vt(v);Re(V&&V.exp&&V.auth_time&&V.iat,f.auth,"internal-error");const J="object"==typeof V.firebase?V.firebase:void 0,Ue=null==J?void 0:J.sign_in_provider;return{claims:V,token:v,authTime:tr(Rn(V.auth_time)),issuedAtTime:tr(Rn(V.iat)),expirationTime:tr(Rn(V.exp)),signInProvider:Ue||null,signInSecondFactor:(null==J?void 0:J.sign_in_second_factor)||null}})).apply(this,arguments)}function Rn(g){return 1e3*Number(g)}function Vt(g){const[c,f,v]=g.split(".");if(void 0===c||void 0===f||void 0===v)return $("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,Z.tV)(f);return V?JSON.parse(V):($("Failed to decode base64 JWT payload"),null)}catch(V){return $("Caught error parsing JWT payload as JSON",V),null}}function or(g,c){return br.apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(g,c,f=!1){if(f)return c;try{return yield c}catch(v){throw v instanceof Z.ZR&&On(v)&&g.auth.currentUser===g&&(yield g.auth.signOut()),v}})).apply(this,arguments)}function On({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class nr{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const V=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),v)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&c.schedule(!0))}c.schedule()})()}}class zn{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=tr(this.lastLoginAt),this.creationTime=tr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fr(g){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,p.Z)(function*(g){var c;const f=g.auth,v=yield g.getIdToken(),V=yield or(g,Br(f,{idToken:v}));Re(null==V?void 0:V.users.length,f,"internal-error");const J=V.users[0];g._notifyReloadListener(J);const Ue=(null===(c=J.providerUserInfo)||void 0===c?void 0:c.length)?dt(J.providerUserInfo):[],it=kt(g.providerData,Ue),Tn=!!g.isAnonymous&&!(g.email&&J.passwordHash||(null==it?void 0:it.length)),on={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:it,metadata:new zn(J.createdAt,J.lastLoginAt),isAnonymous:Tn};Object.assign(g,on)})).apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(g){const c=(0,Z.m9)(g);yield fr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function kt(g,c){return[...g.filter(v=>!c.some(V=>V.providerId===v.providerId)),...c]}function dt(g){return g.map(c=>{var{providerId:f}=c,v=(0,pe._T)(c,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ln(){return(ln=(0,p.Z)(function*(g,c){const f=yield Wn(g,{},(0,p.Z)(function*(){const v=(0,Z.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:V,apiKey:J}=g.config,Ue=qt(g,V,"/v1/token",`key=${J}`),it=yield g._getAdditionalHeaders();return it["Content-Type"]="application/x-www-form-urlencoded",Mt.fetch()(Ue,{method:"POST",headers:it,body:v})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class In{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Re(c.idToken,"internal-error"),Re(void 0!==c.idToken,"internal-error"),Re(void 0!==c.refreshToken,"internal-error");const f="expiresIn"in c&&void 0!==c.expiresIn?Number(c.expiresIn):function Kt(g){const c=Vt(g);return Re(c,"internal-error"),Re(void 0!==c.exp,"internal-error"),Re(void 0!==c.iat,"internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var v=this;return(0,p.Z)(function*(){return Re(!v.accessToken||v.refreshToken,c,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(c,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var v=this;return(0,p.Z)(function*(){const{accessToken:V,refreshToken:J,expiresIn:Ue}=yield function Gt(g,c){return ln.apply(this,arguments)}(c,f);v.updateTokensAndExpiration(V,J,Number(Ue))})()}updateTokensAndExpiration(c,f,v){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(c,f){const{refreshToken:v,accessToken:V,expirationTime:J}=f,Ue=new In;return v&&(Re("string"==typeof v,"internal-error",{appName:c}),Ue.refreshToken=v),V&&(Re("string"==typeof V,"internal-error",{appName:c}),Ue.accessToken=V),J&&(Re("number"==typeof J,"internal-error",{appName:c}),Ue.expirationTime=J),Ue}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new In,this.toJSON())}_performRefresh(){return fe("not implemented")}}function Jt(g,c){Re("string"==typeof g||void 0===g,"internal-error",{appName:c})}class he{constructor(c){var{uid:f,auth:v,stsTokenManager:V}=c,J=(0,pe._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new zn(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const v=yield or(f,f.stsTokenManager.getToken(f.auth,c));return Re(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(c){return function yi(g){return ei.apply(this,arguments)}(this,c)}reload(){return function pr(g){return En.apply(this,arguments)}(this)}_assign(c){this!==c&&(Re(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new he(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var v=this;return(0,p.Z)(function*(){let V=!1;c.idToken&&c.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(c),V=!0),f&&(yield fr(v)),yield v.auth._persistUserIfCurrent(v),V&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield or(c,function Bt(g,c){return un.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var v,V,J,Ue,it,Wt,hn,Tn;const on=null!==(v=f.displayName)&&void 0!==v?v:void 0,Si=null!==(V=f.email)&&void 0!==V?V:void 0,ho=null!==(J=f.phoneNumber)&&void 0!==J?J:void 0,Zs=null!==(Ue=f.photoURL)&&void 0!==Ue?Ue:void 0,Ol=null!==(it=f.tenantId)&&void 0!==it?it:void 0,Oa=null!==(Wt=f._redirectEventId)&&void 0!==Wt?Wt:void 0,_c=null!==(hn=f.createdAt)&&void 0!==hn?hn:void 0,Lf=null!==(Tn=f.lastLoginAt)&&void 0!==Tn?Tn:void 0,{uid:Pa,emailVerified:vc,isAnonymous:ud,providerData:ld,stsTokenManager:Ec}=f;Re(Pa&&Ec,c,"internal-error");const Vf=In.fromJSON(this.name,Ec);Re("string"==typeof Pa,c,"internal-error"),Jt(on,c.name),Jt(Si,c.name),Re("boolean"==typeof vc,c,"internal-error"),Re("boolean"==typeof ud,c,"internal-error"),Jt(ho,c.name),Jt(Zs,c.name),Jt(Ol,c.name),Jt(Oa,c.name),Jt(_c,c.name),Jt(Lf,c.name);const cd=new he({uid:Pa,auth:c,email:Si,emailVerified:vc,displayName:on,isAnonymous:ud,photoURL:Zs,phoneNumber:ho,tenantId:Ol,stsTokenManager:Vf,createdAt:_c,lastLoginAt:Lf});return ld&&Array.isArray(ld)&&(cd.providerData=ld.map(Uf=>Object.assign({},Uf))),Oa&&(cd._redirectEventId=Oa),cd}static _fromIdTokenResponse(c,f,v=!1){return(0,p.Z)(function*(){const V=new In;V.updateFromServerResponse(f);const J=new he({uid:f.localId,auth:c,stsTokenManager:V,isAnonymous:v});return yield fr(J),J})()}}const Ce=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,v){var V=this;return(0,p.Z)(function*(){V.storage[f]=v})()}_get(f){var v=this;return(0,p.Z)(function*(){const V=v.storage[f];return void 0===V?null:V})()}_remove(f){var v=this;return(0,p.Z)(function*(){delete v.storage[f]})()}_addListener(f,v){}_removeListener(f,v){}}return g.type="NONE",g})();function Qe(g,c,f){return`firebase:${g}:${c}:${f}`}class He{constructor(c,f,v){this.persistence=c,this.auth=f,this.userKey=v;const{config:V,name:J}=this.auth;this.fullUserKey=Qe(this.userKey,V.apiKey,J),this.fullPersistenceKey=Qe("persistence",V.apiKey,J),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?he._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const v=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,v?f.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,v="authUser"){return(0,p.Z)(function*(){if(!f.length)return new He(ae(Ce),c,v);const V=(yield Promise.all(f.map(function(){var hn=(0,p.Z)(function*(Tn){if(yield Tn._isAvailable())return Tn});return function(Tn){return hn.apply(this,arguments)}}()))).filter(hn=>hn);let J=V[0]||ae(Ce);const Ue=Qe(v,c.config.apiKey,c.name);let it=null;for(const hn of f)try{const Tn=yield hn._get(Ue);if(Tn){const on=he._fromJSON(c,Tn);hn!==J&&(it=on),J=hn;break}}catch(Tn){}const Wt=V.filter(hn=>hn._shouldAllowMigration);return J._shouldAllowMigration&&Wt.length?(J=Wt[0],it&&(yield J._set(Ue,it.toJSON())),yield Promise.all(f.map(function(){var hn=(0,p.Z)(function*(Tn){if(Tn!==J)try{yield Tn._remove(Ue)}catch(on){}});return function(Tn){return hn.apply(this,arguments)}}())),new He(J,c,v)):new He(J,c,v)})()}}function xt(g){const c=g.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Me(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Ae(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(At(c))return"Blackberry";if(en(c))return"Webos";if(ge(c))return"Safari";if((c.includes("chrome/")||oe(c))&&!c.includes("edge/"))return"Chrome";if(nt(c))return"Android";{const v=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function Ae(g=(0,Z.z$)()){return/firefox\//i.test(g)}function ge(g=(0,Z.z$)()){const c=g.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function oe(g=(0,Z.z$)()){return/crios\//i.test(g)}function Me(g=(0,Z.z$)()){return/iemobile/i.test(g)}function nt(g=(0,Z.z$)()){return/android/i.test(g)}function At(g=(0,Z.z$)()){return/blackberry/i.test(g)}function en(g=(0,Z.z$)()){return/webos/i.test(g)}function Dn(g=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(g)}function Wr(g=(0,Z.z$)()){return Dn(g)||nt(g)||en(g)||At(g)||/windows phone/i.test(g)||Me(g)}function Yr(g,c=[]){let f;switch(g){case"Browser":f=xt((0,Z.z$)());break;case"Worker":f=`${xt((0,Z.z$)())}-${g}`;break;default:f=g}const v=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${_e.SDK_VERSION}/${v}`}class zr{constructor(c,f,v){this.app=c,this.heartbeatServiceProvider=f,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rn(this),this.idTokenSubscription=new rn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(c,f){var v=this;return f&&(this._popupRedirectResolver=ae(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var V,J;if(!v._deleted&&(v.persistenceManager=yield He.create(v,c),!v._deleted)){if(null===(V=v._popupRedirectResolver)||void 0===V?void 0:V._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(Ue){}yield v.initializeCurrentUser(f),v.lastNotifiedUid=(null===(J=v.currentUser)||void 0===J?void 0:J.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var v;let V=yield f.assertedPersistence.getCurrentUser();if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const J=null===(v=f.redirectUser)||void 0===v?void 0:v._redirectEventId,Ue=null==V?void 0:V._redirectEventId,it=yield f.tryRedirectSignIn(c);(!J||J===Ue)&&(null==it?void 0:it.user)&&(V=it.user)}return V?V._redirectEventId?(Re(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===V._redirectEventId?f.directlySetCurrentUser(V):f.reloadAndSetCurrentUserOrClear(V)):f.reloadAndSetCurrentUserOrClear(V):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let v=null;try{v=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch(V){yield f._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){try{yield fr(c)}catch(v){if("auth/network-request-failed"!==v.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function bt(){if("undefined"==typeof navigator)return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const v=c?(0,Z.m9)(c):null;return v&&Re(v.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(v&&v._clone(f))})()}_updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){if(!f._deleted)return c&&Re(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),f.queue((0,p.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(ae(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new Z.LL("auth","Firebase",c())}onAuthStateChanged(c,f,v){return this.registerStateListener(this.authStateSubscription,c,f,v)}onIdTokenChanged(c,f,v){return this.registerStateListener(this.idTokenSubscription,c,f,v)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var v=this;return(0,p.Z)(function*(){const V=yield v.getOrInitRedirectPersistenceManager(f);return null===c?V.removeCurrentUser():V.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const v=c&&ae(c)||f._popupRedirectResolver;Re(v,f,"argument-error"),f.redirectPersistenceManager=yield He.create(f,[ae(v._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var v,V;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(v=f._currentUser)||void 0===v?void 0:v._redirectEventId)===c?f._currentUser:(null===(V=f.redirectUser)||void 0===V?void 0:V._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,v,V){if(this._deleted)return()=>{};const J="function"==typeof f?f:f.next.bind(f),Ue=this._isInitialized?Promise.resolve():this._initializationPromise;return Re(Ue,this,"internal-error"),Ue.then(()=>J(this.currentUser)),"function"==typeof f?c.addObserver(f,v,V):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&(f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh()),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Yr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const v={"X-Client-Version":c.clientVersion};c.app.options.appId&&(v["X-Firebase-gmpid"]=c.app.options.appId);const V=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return V&&(v["X-Firebase-Client"]=V),v})()}}function It(g){return(0,Z.m9)(g)}class rn{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,Z.ne)(f=>this.observer=f)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vr(g){const c=g.indexOf(":");return c<0?"":g.substr(0,c+1)}function Tr(g){if(!g)return null;const c=Number(g);return isNaN(c)?null:c}class jn{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return fe("not implemented")}_getIdTokenResponse(c){return fe("not implemented")}_linkToIdToken(c,f){return fe("not implemented")}_getReauthenticationResolver(c){return fe("not implemented")}}function ir(g,c){return xr.apply(this,arguments)}function xr(){return(xr=(0,p.Z)(function*(g,c){return pn(g,"POST","/v1/accounts:resetPassword",_n(g,c))})).apply(this,arguments)}function gn(g,c){return ni.apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*(g,c){return pn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Fi(g,c){return ns.apply(this,arguments)}function ns(){return(ns=(0,p.Z)(function*(g,c){return pn(g,"POST","/v1/accounts:update",_n(g,c))})).apply(this,arguments)}function Fn(){return(Fn=(0,p.Z)(function*(g,c){return ct(g,"POST","/v1/accounts:signInWithPassword",_n(g,c))})).apply(this,arguments)}function Kr(g,c){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,p.Z)(function*(g,c){return pn(g,"POST","/v1/accounts:sendOobCode",_n(g,c))})).apply(this,arguments)}function Sr(g,c){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,p.Z)(function*(g,c){return Kr(g,c)})).apply(this,arguments)}function os(g,c){return Li.apply(this,arguments)}function Li(){return(Li=(0,p.Z)(function*(g,c){return Kr(g,c)})).apply(this,arguments)}function ar(g,c){return _i.apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(g,c){return Kr(g,c)})).apply(this,arguments)}function zi(g,c){return hi.apply(this,arguments)}function hi(){return(hi=(0,p.Z)(function*(g,c){return Kr(g,c)})).apply(this,arguments)}function fi(){return(fi=(0,p.Z)(function*(g,c){return ct(g,"POST","/v1/accounts:signInWithEmailLink",_n(g,c))})).apply(this,arguments)}function ms(){return(ms=(0,p.Z)(function*(g,c){return ct(g,"POST","/v1/accounts:signInWithEmailLink",_n(g,c))})).apply(this,arguments)}class Cs extends jn{constructor(c,f,v,V=null){super("password",v),this._email=c,this._password=f,this._tenantId=V}static _fromEmailAndPassword(c,f){return new Cs(c,f,"password")}static _fromEmailAndCode(c,f,v=null){return new Cs(c,f,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Ar(g,c){return Fn.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Ds(g,c){return fi.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:N(c,"internal-error")}})()}_linkToIdToken(c,f){var v=this;return(0,p.Z)(function*(){switch(v.signInMethod){case"password":return gn(c,{idToken:f,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function qr(g,c){return ms.apply(this,arguments)}(c,{idToken:f,email:v._email,oobCode:v._password});default:N(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function rr(g,c){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,p.Z)(function*(g,c){return ct(g,"POST","/v1/accounts:signInWithIdp",_n(g,c))})).apply(this,arguments)}class Pe extends jn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new Pe(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):N("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:v,signInMethod:V}=f,J=(0,pe._T)(f,["providerId","signInMethod"]);if(!v||!V)return null;const Ue=new Pe(v,V);return Ue.idToken=J.idToken||void 0,Ue.accessToken=J.accessToken||void 0,Ue.secret=J.secret,Ue.nonce=J.nonce,Ue.pendingToken=J.pendingToken||null,Ue}_getIdTokenResponse(c){return rr(c,this.buildRequest())}_linkToIdToken(c,f){const v=this.buildRequest();return v.idToken=f,rr(c,v)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,rr(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,Z.xO)(f)}return c}}function xe(g,c){return qe.apply(this,arguments)}function qe(){return(qe=(0,p.Z)(function*(g,c){return pn(g,"POST","/v1/accounts:sendVerificationCode",_n(g,c))})).apply(this,arguments)}function Tt(){return(Tt=(0,p.Z)(function*(g,c){return ct(g,"POST","/v1/accounts:signInWithPhoneNumber",_n(g,c))})).apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(g,c){const f=yield ct(g,"POST","/v1/accounts:signInWithPhoneNumber",_n(g,c));if(f.temporaryProof)throw kn(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Rr={USER_NOT_FOUND:"user-not-found"};function Ri(){return(Ri=(0,p.Z)(function*(g,c){return ct(g,"POST","/v1/accounts:signInWithPhoneNumber",_n(g,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Rr)})).apply(this,arguments)}class Ii extends jn{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new Ii({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new Ii({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function ot(g,c){return Tt.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function Yt(g,c){return $n.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Ln(g,c){return Ri.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:v,verificationCode:V}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:v,code:V}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:v,phoneNumber:V,temporaryProof:J}=c;return v||f||V||J?new Ii({verificationId:f,verificationCode:v,phoneNumber:V,temporaryProof:J}):null}}class Vi{constructor(c){var f,v,V,J,Ue,it;const Wt=(0,Z.zd)((0,Z.pd)(c)),hn=null!==(f=Wt.apiKey)&&void 0!==f?f:null,Tn=null!==(v=Wt.oobCode)&&void 0!==v?v:null,on=function Oi(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=Wt.mode)&&void 0!==V?V:null);Re(hn&&Tn&&on,"argument-error"),this.apiKey=hn,this.operation=on,this.code=Tn,this.continueUrl=null!==(J=Wt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(Ue=Wt.languageCode)&&void 0!==Ue?Ue:null,this.tenantId=null!==(it=Wt.tenantId)&&void 0!==it?it:null}static parseLink(c){const f=function ys(g){const c=(0,Z.zd)((0,Z.pd)(g)).link,f=c?(0,Z.zd)((0,Z.pd)(c)).deep_link_id:null,v=(0,Z.zd)((0,Z.pd)(g)).deep_link_id;return(v?(0,Z.zd)((0,Z.pd)(v)).link:null)||v||f||c||g}(c);try{return new Vi(f)}catch(v){return null}}}let ri=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,v){return Cs._fromEmailAndPassword(f,v)}static credentialWithLink(f,v){const V=Vi.parseLink(v);return Re(V,"argument-error"),Cs._fromEmailAndCode(f,V.code,V.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Di{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class _r extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class as extends _r{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return Re("providerId"in f&&"signInMethod"in f,"argument-error"),Pe._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Re(c.idToken||c.accessToken,"argument-error"),Pe._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return as.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return as.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:V,pendingToken:J,nonce:Ue,providerId:it}=c;if(!v&&!V&&!f&&!J||!it)return null;try{return new as(it)._credential({idToken:f,accessToken:v,nonce:Ue,pendingToken:J})}catch(Wt){return null}}}let us=(()=>{class g extends _r{constructor(){super("facebook.com")}static credential(f){return Pe._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(v){return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),ls=(()=>{class g extends _r{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return Pe._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:V}=f;if(!v&&!V)return null;try{return g.credential(v,V)}catch(J){return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),to=(()=>{class g extends _r{constructor(){super("github.com")}static credential(f){return Pe._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(v){return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Ci extends jn{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return rr(c,this.buildRequest())}_linkToIdToken(c,f){const v=this.buildRequest();return v.idToken=f,rr(c,v)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,rr(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:v,signInMethod:V,pendingToken:J}=f;return v&&V&&J&&v===V?new Ci(v,J):null}static _create(c,f){return new Ci(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xr extends Di{constructor(c){Re(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Xr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Xr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Ci.fromJSON(c);return Re(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:v}=c;if(!f||!v)return null;try{return Ci._create(v,f)}catch(V){return null}}}let qi=(()=>{class g extends _r{constructor(){super("twitter.com")}static credential(f,v){return Pe._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:V}=f;if(!v||!V)return null;try{return g.credential(v,V)}catch(J){return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function bs(g,c){return Er.apply(this,arguments)}function Er(){return(Er=(0,p.Z)(function*(g,c){return ct(g,"POST","/v1/accounts:signUp",_n(g,c))})).apply(this,arguments)}class Or{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,v,V=!1){return(0,p.Z)(function*(){const J=yield he._fromIdTokenResponse(c,v,V),Ue=cs(v);return new Or({user:J,providerId:Ue,_tokenResponse:v,operationType:f})})()}static _forOperation(c,f,v){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(v,!0);const V=cs(v);return new Or({user:c,providerId:V,_tokenResponse:v,operationType:f})})()}}function cs(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Os(){return(Os=(0,p.Z)(function*(g){var c;const f=It(g);if(yield f._initializationPromise,null===(c=f.currentUser)||void 0===c?void 0:c.isAnonymous)return new Or({user:f.currentUser,providerId:null,operationType:"signIn"});const v=yield bs(f,{returnSecureToken:!0}),V=yield Or._fromIdTokenResponse(f,"signIn",v,!0);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class ii extends Z.ZR{constructor(c,f,v,V){var J;super(f.code,f.message),this.operationType=v,this.user=V,Object.setPrototypeOf(this,ii.prototype),this.customData={appName:c.name,tenantId:null!==(J=c.tenantId)&&void 0!==J?J:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(c,f,v,V){return new ii(c,f,v,V)}}function rs(g,c,f,v){return("reauthenticate"===c?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?ii._fromErrorAndOperation(g,J,c,v):J})}function pi(g){return new Set(g.map(({providerId:c})=>c).filter(c=>!!c))}function Zi(){return(Zi=(0,p.Z)(function*(g,c){const f=(0,Z.m9)(g);yield G(!0,f,c);const{providerUserInfo:v}=yield wn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),V=pi(v||[]);return f.providerData=f.providerData.filter(J=>V.has(J.providerId)),V.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function ur(g,c){return x.apply(this,arguments)}function x(){return(x=(0,p.Z)(function*(g,c,f=!1){const v=yield or(g,c._linkToIdToken(g.auth,yield g.getIdToken()),f);return Or._forOperation(g,"link",v)})).apply(this,arguments)}function G(g,c,f){return M.apply(this,arguments)}function M(){return(M=(0,p.Z)(function*(g,c,f){yield fr(c);const V=!1===g?"provider-already-linked":"no-such-provider";Re(pi(c.providerData).has(f)===g,c.auth,V)})).apply(this,arguments)}function Y(g,c){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,p.Z)(function*(g,c,f=!1){const{auth:v}=g,V="reauthenticate";try{const J=yield or(g,rs(v,V,c,g),f);Re(J.idToken,v,"internal-error");const Ue=Vt(J.idToken);Re(Ue,v,"internal-error");const{sub:it}=Ue;return Re(g.uid===it,v,"user-mismatch"),Or._forOperation(g,V,J)}catch(J){throw"auth/user-not-found"===(null==J?void 0:J.code)&&N(v,"user-mismatch"),J}})).apply(this,arguments)}function Je(g,c){return tt.apply(this,arguments)}function tt(){return(tt=(0,p.Z)(function*(g,c,f=!1){const v="signIn",V=yield rs(g,v,c),J=yield Or._fromIdTokenResponse(g,v,V);return f||(yield g._updateCurrentUser(J.user)),J})).apply(this,arguments)}function Nt(g,c){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,p.Z)(function*(g,c){return Je(It(g),c)})).apply(this,arguments)}function Hn(g,c){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(g,c){const f=(0,Z.m9)(g);return yield G(!1,f,c.providerId),ur(f,c)})).apply(this,arguments)}function Mn(g,c){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,p.Z)(function*(g,c){return Y((0,Z.m9)(g),c)})).apply(this,arguments)}function sr(g,c){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(g,c){return ct(g,"POST","/v1/accounts:signInWithCustomToken",_n(g,c))})).apply(this,arguments)}function A(){return(A=(0,p.Z)(function*(g,c){const f=It(g),v=yield sr(f,{token:c,returnSecureToken:!0}),V=yield Or._fromIdTokenResponse(f,"signIn",v);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class C{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?q._fromServerResponse(c,f):N(c,"internal-error")}}class q extends C{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new q(f)}}function rt(g,c,f){var v;Re((null===(v=f.url)||void 0===v?void 0:v.length)>0,g,"invalid-continue-uri"),Re(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Re(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(Re(f.android.packageName.length>0,g,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function mr(){return(mr=(0,p.Z)(function*(g,c,f){const v=(0,Z.m9)(g),V={requestType:"PASSWORD_RESET",email:c};f&&rt(v,V,f),yield os(v,V)})).apply(this,arguments)}function O(){return(O=(0,p.Z)(function*(g,c,f){yield ir((0,Z.m9)(g),{oobCode:c,newPassword:f})})).apply(this,arguments)}function Q(){return(Q=(0,p.Z)(function*(g,c){yield Fi((0,Z.m9)(g),{oobCode:c})})).apply(this,arguments)}function ve(g,c){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,p.Z)(function*(g,c){const f=(0,Z.m9)(g),v=yield ir(f,{oobCode:c}),V=v.requestType;switch(Re(V,f,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Re(v.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Re(v.mfaInfo,f,"internal-error");default:Re(v.email,f,"internal-error")}let J=null;return v.mfaInfo&&(J=C._fromServerResponse(It(f),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:J},operation:V}})).apply(this,arguments)}function sn(){return(sn=(0,p.Z)(function*(g,c){const{data:f}=yield ve((0,Z.m9)(g),c);return f.email})).apply(this,arguments)}function vn(){return(vn=(0,p.Z)(function*(g,c,f){const v=It(g),V=yield bs(v,{returnSecureToken:!0,email:c,password:f}),J=yield Or._fromIdTokenResponse(v,"signIn",V);return yield v._updateCurrentUser(J.user),J})).apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(g,c,f){const v=(0,Z.m9)(g),V={requestType:"EMAIL_SIGNIN",email:c};Re(f.handleCodeInApp,v,"argument-error"),f&&rt(v,V,f),yield ar(v,V)})).apply(this,arguments)}function mi(){return(mi=(0,p.Z)(function*(g,c,f){const v=(0,Z.m9)(g),V=ri.credentialWithLink(c,f||_t());return Re(V._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Nt(v,V)})).apply(this,arguments)}function Kn(g,c){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,p.Z)(function*(g,c){return pn(g,"POST","/v1/accounts:createAuthUri",_n(g,c))})).apply(this,arguments)}function kr(){return(kr=(0,p.Z)(function*(g,c){const v={identifier:c,continueUri:vt()?_t():"http://localhost"},{signinMethods:V}=yield Kn((0,Z.m9)(g),v);return V||[]})).apply(this,arguments)}function _s(){return(_s=(0,p.Z)(function*(g,c){const f=(0,Z.m9)(g),V={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};c&&rt(f.auth,V,c);const{email:J}=yield Sr(f.auth,V);J!==g.email&&(yield g.reload())})).apply(this,arguments)}function no(){return(no=(0,p.Z)(function*(g,c,f){const v=(0,Z.m9)(g),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:c};f&&rt(v.auth,J,f);const{email:Ue}=yield zi(v.auth,J);Ue!==g.email&&(yield g.reload())})).apply(this,arguments)}function wr(g,c){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,p.Z)(function*(g,c){return pn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ea(){return(Ea=(0,p.Z)(function*(g,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const v=(0,Z.m9)(g),J={idToken:yield v.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Ue=yield or(v,wr(v.auth,J));v.displayName=Ue.displayName||null,v.photoURL=Ue.photoUrl||null;const it=v.providerData.find(({providerId:Wt})=>"password"===Wt);it&&(it.displayName=v.displayName,it.photoURL=v.photoURL),yield v._updateTokensIfNecessary(Ue)})).apply(this,arguments)}function Bo(g,c,f){return fo.apply(this,arguments)}function fo(){return(fo=(0,p.Z)(function*(g,c,f){const{auth:v}=g,J={idToken:yield g.getIdToken(),returnSecureToken:!0};c&&(J.email=c),f&&(J.password=f);const Ue=yield or(g,gn(v,J));yield g._updateTokensIfNecessary(Ue,!0)})).apply(this,arguments)}class js{constructor(c,f,v={}){this.isNewUser=c,this.providerId=f,this.profile=v}}class wa extends js{constructor(c,f,v,V){super(c,f,v),this.username=V}}class ks extends js{constructor(c,f){super(c,"facebook.com",f)}}class ro extends wa{constructor(c,f){super(c,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class mu extends js{constructor(c,f){super(c,"google.com",f)}}class ea extends wa{constructor(c,f,v){super(c,"twitter.com",f,v)}}function bi(g){const{user:c,_tokenResponse:f}=g;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Jo(g){var c,f;if(!g)return null;const{providerId:v}=g,V=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},J=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!v&&(null==g?void 0:g.idToken)){const Ue=null===(f=null===(c=Vt(g.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Ue)return new js(J,"anonymous"!==Ue&&"custom"!==Ue?Ue:null)}if(!v)return null;switch(v){case"facebook.com":return new ks(J,V);case"github.com":return new ro(J,V);case"google.com":return new mu(J,V);case"twitter.com":return new ea(J,V,g.screenName||null);case"custom":case"anonymous":return new js(J,null);default:return new js(J,v,V)}}(f)}class Qi{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new Qi("enroll",c)}static _fromMfaPendingCredential(c){return new Qi("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,v;if(null==c?void 0:c.multiFactorSession){if(null===(f=c.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return Qi._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null===(v=c.multiFactorSession)||void 0===v?void 0:v.idToken)return Qi._fromIdtoken(c.multiFactorSession.idToken)}return null}}class $s{constructor(c,f,v){this.session=c,this.hints=f,this.signInResolver=v}static _fromError(c,f){const v=It(c),V=f.customData._serverResponse,J=(V.mfaInfo||[]).map(it=>C._fromServerResponse(v,it));Re(V.mfaPendingCredential,v,"internal-error");const Ue=Qi._fromMfaPendingCredential(V.mfaPendingCredential);return new $s(Ue,J,function(){var it=(0,p.Z)(function*(Wt){const hn=yield Wt._process(v,Ue);delete V.mfaInfo,delete V.mfaPendingCredential;const Tn=Object.assign(Object.assign({},V),{idToken:hn.idToken,refreshToken:hn.refreshToken});switch(f.operationType){case"signIn":const on=yield Or._fromIdTokenResponse(v,f.operationType,Tn);return yield v._updateCurrentUser(on.user),on;case"reauthenticate":return Re(f.user,v,"internal-error"),Or._forOperation(f.user,f.operationType,Tn);default:N(v,"internal-error")}});return function(Wt){return it.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function ai(g,c){return pn(g,"POST","/v2/accounts/mfaEnrollment:start",_n(g,c))}class vs{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>C._fromServerResponse(c.auth,v)))})}static _fromUser(c){return new vs(c)}getSession(){var c=this;return(0,p.Z)(function*(){return Qi._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var v=this;return(0,p.Z)(function*(){const V=c,J=yield v.getSession(),Ue=yield or(v.user,V._process(v.user.auth,J,f));return yield v.user._updateTokensIfNecessary(Ue),v.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){const v="string"==typeof c?c:c.uid,V=yield f.user.getIdToken(),J=yield or(f.user,function Ha(g,c){return pn(g,"POST","/v2/accounts/mfaEnrollment:withdraw",_n(g,c))}(f.user.auth,{idToken:V,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Ue})=>Ue!==v),yield f.user._updateTokensIfNecessary(J);try{yield f.user.reload()}catch(Ue){if("auth/user-token-expired"!==Ue.code)throw Ue}})()}}const io=new WeakMap,Ts="__sak";class po{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Ts,"1"),this.storage.removeItem(Ts),Promise.resolve(!0)):Promise.resolve(!1)}catch(c){return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nr=(()=>{class g extends po{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Hs(){const g=(0,Z.z$)();return ge(g)||Dn(g)}()&&function dr(){try{return!(!window||window===window.top)}catch(g){return!1}}(),this.fallbackToPolling=Wr(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const V=this.storage.getItem(v),J=this.localCache[v];V!==J&&f(v,J,V)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((it,Wt,hn)=>{this.notifyListeners(it,hn)});const V=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const it=this.storage.getItem(V);if(f.newValue!==it)null!==f.newValue?this.storage.setItem(V,f.newValue):this.storage.removeItem(V);else if(this.localCache[V]===f.newValue&&!v)return}const J=()=>{const it=this.storage.getItem(V);!v&&this.localCache[V]===it||this.notifyListeners(V,it)},Ue=this.storage.getItem(V);!function Gr(){return(0,Z.w1)()&&10===document.documentMode}()||Ue===f.newValue||f.newValue===f.oldValue?J():setTimeout(J,10)}notifyListeners(f,v){this.localCache[f]=v;const V=this.listeners[f];if(V)for(const J of Array.from(V))J(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var V=()=>super._set,J=this;return(0,p.Z)(function*(){yield V().call(J,f,v),J.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,V=this;return(0,p.Z)(function*(){const J=yield v().call(V,f);return V.localCache[f]=JSON.stringify(J),J})()}_remove(f){var v=()=>super._remove,V=this;return(0,p.Z)(function*(){yield v().call(V,f),delete V.localCache[f]})()}}return g.type="LOCAL",g})(),Gs=(()=>{class g extends po{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return g.type="SESSION",g})();let jo=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const v=this.receivers.find(J=>J.isListeningto(f));if(v)return v;const V=new g(f);return this.receivers.push(V),V}isListeningto(f){return this.eventTarget===f}handleEvent(f){var v=this;return(0,p.Z)(function*(){const V=f,{eventId:J,eventType:Ue,data:it}=V.data,Wt=v.handlersMap[Ue];if(!(null==Wt?void 0:Wt.size))return;V.ports[0].postMessage({status:"ack",eventId:J,eventType:Ue});const hn=Array.from(Wt).map(function(){var on=(0,p.Z)(function*(Si){return Si(V.origin,it)});return function(Si){return on.apply(this,arguments)}}()),Tn=yield function go(g){return Promise.all(g.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(v){return{fulfilled:!1,reason:v}}});return function(f){return c.apply(this,arguments)}}()))}(hn);V.ports[0].postMessage({status:"done",eventId:J,eventType:Ue,response:Tn})})()}_subscribe(f,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(v)}_unsubscribe(f,v){this.handlersMap[f]&&v&&this.handlersMap[f].delete(v),(!v||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function $o(g="",c=10){let f="";for(let v=0;v<c;v++)f+=Math.floor(10*Math.random());return g+f}class Da{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,v=50){var V=this;return(0,p.Z)(function*(){const J="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let Ue,it;return new Promise((Wt,hn)=>{const Tn=$o("",20);J.port1.start();const on=setTimeout(()=>{hn(new Error("unsupported_event"))},v);it={messageChannel:J,onMessage(Si){const ho=Si;if(ho.data.eventId===Tn)switch(ho.data.status){case"ack":clearTimeout(on),Ue=setTimeout(()=>{hn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ue),Wt(ho.data.response);break;default:clearTimeout(on),clearTimeout(Ue),hn(new Error("invalid_response"))}}},V.handlers.add(it),J.port1.addEventListener("message",it.onMessage),V.target.postMessage({eventType:c,eventId:Tn,data:f},[J.port2])}).finally(()=>{it&&V.removeMessageHandler(it)})})()}}function Vr(){return window}function Fs(){return void 0!==Vr().WorkerGlobalScope&&"function"==typeof Vr().importScripts}function As(){return(As=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(g){return null}})).apply(this,arguments)}const I="firebaseLocalStorageDb",_="firebaseLocalStorage",S="fbase_key";class F{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function j(g,c){return g.transaction([_],c?"readwrite":"readonly").objectStore(_)}function De(){const g=indexedDB.open(I,1);return new Promise((c,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const v=g.result;try{v.createObjectStore(_,{keyPath:S})}catch(V){f(V)}}),g.addEventListener("success",(0,p.Z)(function*(){const v=g.result;v.objectStoreNames.contains(_)?c(v):(v.close(),yield function ie(){const g=indexedDB.deleteDatabase(I);return new F(g).toPromise()}(),c(yield De()))}))})}function ut(g,c,f){return st.apply(this,arguments)}function st(){return(st=(0,p.Z)(function*(g,c,f){const v=j(g,!0).put({[S]:c,value:f});return new F(v).toPromise()})).apply(this,arguments)}function dn(){return(dn=(0,p.Z)(function*(g,c){const f=j(g,!1).get(c),v=yield new F(f).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Et(g,c){const f=j(g,!0).delete(c);return new F(f).toPromise()}const Es=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield De()),f.db})()}_withRetries(f){var v=this;return(0,p.Z)(function*(){let V=0;for(;;)try{const J=yield v._openDb();return yield f(J)}catch(J){if(V++>3)throw J;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return Fs()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=jo._getInstance(function Eu(){return Fs()?self:null}()),f.receiver._subscribe("keyChanged",function(){var v=(0,p.Z)(function*(V,J){return{keyProcessed:(yield f._poll()).includes(J.key)}});return function(V,J){return v.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var v=(0,p.Z)(function*(V,J){return["keyChanged"]});return function(V,J){return v.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var v,V;if(f.activeServiceWorker=yield function Ca(){return As.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Da(f.activeServiceWorker);const J=yield f.sender._send("ping",{},800);!J||(null===(v=J[0])||void 0===v?void 0:v.fulfilled)&&(null===(V=J[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var v=this;return(0,p.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function tc(){var g;return(null===(g=null==navigator?void 0:navigator.serviceWorker)||void 0===g?void 0:g.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:f},v.serviceWorkerReceiverAvailable?800:50)}catch(V){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield De();return yield ut(f,Ts,"1"),yield Et(f,Ts),!0}catch(f){}return!1})()}_withPendingWrite(f){var v=this;return(0,p.Z)(function*(){v.pendingWrites++;try{yield f()}finally{v.pendingWrites--}})()}_set(f,v){var V=this;return(0,p.Z)(function*(){return V._withPendingWrite((0,p.Z)(function*(){return yield V._withRetries(J=>ut(J,f,v)),V.localCache[f]=v,V.notifyServiceWorker(f)}))})()}_get(f){var v=this;return(0,p.Z)(function*(){const V=yield v._withRetries(J=>function Ft(g,c){return dn.apply(this,arguments)}(J,f));return v.localCache[f]=V,V})()}_remove(f){var v=this;return(0,p.Z)(function*(){return v._withPendingWrite((0,p.Z)(function*(){return yield v._withRetries(V=>Et(V,f)),delete v.localCache[f],v.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const v=yield f._withRetries(Ue=>{const it=j(Ue,!1).getAll();return new F(it).toPromise()});if(!v)return[];if(0!==f.pendingWrites)return[];const V=[],J=new Set;for(const{fbase_key:Ue,value:it}of v)J.add(Ue),JSON.stringify(f.localCache[Ue])!==JSON.stringify(it)&&(f.notifyListeners(Ue,it),V.push(Ue));for(const Ue of Object.keys(f.localCache))f.localCache[Ue]&&!J.has(Ue)&&(f.notifyListeners(Ue,null),V.push(Ue));return V})()}notifyListeners(f,v){this.localCache[f]=v;const V=this.listeners[f];if(V)for(const J of Array.from(V))J(v)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function wu(g,c){return pn(g,"POST","/v2/accounts/mfaSignIn:start",_n(g,c))}function yo(){return(yo=(0,p.Z)(function*(g){return(yield pn(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ia(g){return new Promise((c,f)=>{const v=document.createElement("script");v.setAttribute("src",g),v.onload=c,v.onerror=V=>{const J=ne("internal-error");J.customData=V,f(J)},v.type="text/javascript",v.charset="UTF-8",function nc(){var g,c;return null!==(c=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==c?c:document}().appendChild(v)})}function Du(g){return`__${g}${Math.floor(1e6*Math.random())}`}const so=1e12;class rc{constructor(c){this.auth=c,this.counter=so,this._widgets=new Map}render(c,f){const v=this.counter;return this._widgets.set(v,new Vn(c,this.auth.name,f||{})),this.counter++,v}reset(c){var f;const v=c||so;null===(f=this._widgets.get(v))||void 0===f||f.delete(),this._widgets.delete(v)}getResponse(c){var f;return(null===(f=this._widgets.get(c||so))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var v;return null===(v=f._widgets.get(c||so))||void 0===v||v.execute(),""})()}}class Vn{constructor(c,f,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof c?document.getElementById(c):c;Re(V,"argument-error",{appName:f}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oo(g){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<g;v++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const za=Du("rcb"),Pi=new Ut(3e4,6e4);class Yc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Vr().grecaptcha}load(c,f=""){return Re(function Ka(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Vr().grecaptcha):new Promise((v,V)=>{const J=Vr().setTimeout(()=>{V(ne(c,"network-request-failed"))},Pi.get());Vr()[za]=()=>{Vr().clearTimeout(J),delete Vr()[za];const it=Vr().grecaptcha;if(!it)return void V(ne(c,"internal-error"));const Wt=it.render;it.render=(hn,Tn)=>{const on=Wt(hn,Tn);return this.counter++,on},this.hostLanguage=f,v(it)},ia(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:za,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(J),V(ne(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){return!!Vr().grecaptcha&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Qc{load(c){return(0,p.Z)(function*(){return new rc(c)})()}clearedOneInstance(){}}const ba="recaptcha",hr={theme:"light",type:"image"};class zd{constructor(c,f=Object.assign({},hr),v){this.parameters=f,this.type=ba,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=It(v),this.isInvisible="invisible"===this.parameters.size,Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof c?document.getElementById(c):c;Re(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qc:new Yc,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),v=c.getAssertedRecaptcha();return v.getResponse(f)||new Promise(J=>{const Ue=it=>{!it||(c.tokenChangeListeners.delete(Ue),J(it))};c.tokenChangeListeners.add(Ue),c.isInvisible&&v.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Re(!this.parameters.sitekey,this.auth,"argument-error"),Re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(v=>v(f)),"function"==typeof c)c(f);else if("string"==typeof c){const v=Vr()[c];"function"==typeof v&&v(f)}}}assertNotDestroyed(){Re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const v=document.createElement("div");f.appendChild(v),f=v}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){Re(vt()&&!Fs(),c.auth,"internal-error"),yield function is(){let g=null;return new Promise(c=>{"complete"!==document.readyState?(g=()=>c(),window.addEventListener("load",g)):c()}).catch(c=>{throw g&&window.removeEventListener("load",g),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Iu(g){return yo.apply(this,arguments)}(c.auth);Re(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return Re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ws{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=Ii._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Xn(){return(Xn=(0,p.Z)(function*(g,c,f){const v=It(g),V=yield Ji(v,c,(0,Z.m9)(f));return new Ws(V,J=>Nt(v,J))})).apply(this,arguments)}function Ls(){return(Ls=(0,p.Z)(function*(g,c,f){const v=(0,Z.m9)(g);yield G(!1,v,"phone");const V=yield Ji(v.auth,c,(0,Z.m9)(f));return new Ws(V,J=>Hn(v,J))})).apply(this,arguments)}function Mo(){return(Mo=(0,p.Z)(function*(g,c,f){const v=(0,Z.m9)(g),V=yield Ji(v.auth,c,(0,Z.m9)(f));return new Ws(V,J=>Mn(v,J))})).apply(this,arguments)}function Ji(g,c,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,p.Z)(function*(g,c,f){var v;const V=yield f.verify();try{let J;if(Re("string"==typeof V,g,"argument-error"),Re(f.type===ba,g,"argument-error"),J="string"==typeof c?{phoneNumber:c}:c,"session"in J){const Ue=J.session;if("phoneNumber"in J)return Re("enroll"===Ue.type,g,"internal-error"),(yield ai(g,{idToken:Ue.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{Re("signin"===Ue.type,g,"internal-error");const it=(null===(v=J.multiFactorHint)||void 0===v?void 0:v.uid)||J.multiFactorUid;return Re(it,g,"missing-multi-factor-info"),(yield wu(g,{mfaPendingCredential:Ue.credential,mfaEnrollmentId:it,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ue}=yield xe(g,{phoneNumber:J.phoneNumber,recaptchaToken:V});return Ue}}finally{f._reset()}})).apply(this,arguments)}function Ho(){return(Ho=(0,p.Z)(function*(g,c){yield ur((0,Z.m9)(g),c)})).apply(this,arguments)}let Bi=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=It(f)}verifyPhoneNumber(f,v){return Ji(this.auth,f,(0,Z.m9)(v))}static credential(f,v){return Ii._fromVerification(f,v)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:V}=f;return v&&V?Ii._fromTokenResponse(v,V):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function ds(g,c){return c?ae(c):(Re(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class xo extends jn{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return rr(c,this._buildIdpRequest())}_linkToIdToken(c,f){return rr(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return rr(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function Cu(g){return Je(g.auth,new xo(g),g.bypassAuthState)}function $t(g){const{auth:c,user:f}=g;return Re(f,c,"internal-error"),Y(f,new xo(g),g.bypassAuthState)}function cl(g){return bu.apply(this,arguments)}function bu(){return(bu=(0,p.Z)(function*(g){const{auth:c,user:f}=g;return Re(f,c,"internal-error"),ur(f,new xo(g),g.bypassAuthState)})).apply(this,arguments)}class ji{constructor(c,f,v,V,J=!1){this.auth=c,this.resolver=v,this.user=V,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(v,V){c.pendingPromise={resolve:v,reject:V};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(J){c.reject(J)}});return function(v,V){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:v,sessionId:V,postBody:J,tenantId:Ue,error:it,type:Wt}=c;if(it)return void f.reject(it);const hn={auth:f.auth,requestUri:v,sessionId:V,tenantId:Ue||void 0,postBody:J||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Wt)(hn))}catch(Tn){f.reject(Tn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Cu;case"linkViaPopup":case"linkViaRedirect":return cl;case"reauthViaPopup":case"reauthViaRedirect":return $t;default:N(this.auth,"internal-error")}}resolve(c){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ao=new Ut(2e3,1e4);function Ro(){return(Ro=(0,p.Z)(function*(g,c,f){const v=It(g);Ee(g,c,Di);const V=ds(v,f);return new uo(v,"signInViaPopup",c,V).executeNotNull()})).apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(g,c,f){const v=(0,Z.m9)(g);Ee(v.auth,c,Di);const V=ds(v.auth,f);return new uo(v.auth,"reauthViaPopup",c,V,v).executeNotNull()})).apply(this,arguments)}function Po(){return(Po=(0,p.Z)(function*(g,c,f){const v=(0,Z.m9)(g);Ee(v.auth,c,Di);const V=ds(v.auth,f);return new uo(v.auth,"linkViaPopup",c,V,v).executeNotNull()})).apply(this,arguments)}let uo=(()=>{class g extends ji{constructor(f,v,V,J,Ue){super(f,v,J,Ue),this.provider=V,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const v=yield f.execute();return Re(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,p.Z)(function*(){X(1===f.filter.length,"Popup operations only handle one event");const v=$o();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(V=>{f.reject(V)}),f.resolver._isIframeWebStorageSupported(f.auth,V=>{V||f.reject(ne(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,V;this.pollId=(null===(V=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===V?void 0:V.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,ao.get())};f()}}return g.currentPopupAction=null,g})();const zs=new Map;class Tu extends ji{constructor(c,f,v=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let v=zs.get(f.auth._key());if(!v){try{const J=(yield function Aa(g,c){return oa.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;v=()=>Promise.resolve(J)}catch(V){v=()=>Promise.reject(V)}zs.set(f.auth._key(),v)}return f.bypassAuthState||zs.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,v=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(v,c);if("unknown"!==c.type){if(c.eventId){const V=yield v.auth._redirectUserForId(c.eventId);if(V)return v.user=V,f().call(v,c);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function oa(){return(oa=(0,p.Z)(function*(g,c){const f=P(c),v=T(g);if(!(yield v._isAvailable()))return!1;const V="true"===(yield v._get(f));return yield v._remove(f),V})).apply(this,arguments)}function Wo(g,c){return Za.apply(this,arguments)}function Za(){return(Za=(0,p.Z)(function*(g,c){return T(g)._set(P(c),"true")})).apply(this,arguments)}function T(g){return ae(g._redirectPersistence)}function P(g){return Qe("pendingRedirect",g.config.apiKey,g.name)}function Ve(){return(Ve=(0,p.Z)(function*(g,c,f){const v=It(g);Ee(g,c,Di);const V=ds(v,f);return yield Wo(V,v),V._openRedirect(v,c,"signInViaRedirect")})).apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(g,c,f){const v=(0,Z.m9)(g);Ee(v.auth,c,Di);const V=ds(v.auth,f);yield Wo(V,v.auth);const J=yield Ya(v);return V._openRedirect(v.auth,c,"reauthViaRedirect",J)})).apply(this,arguments)}function lr(){return(lr=(0,p.Z)(function*(g,c,f){const v=(0,Z.m9)(g);Ee(v.auth,c,Di);const V=ds(v.auth,f);yield G(!1,v,c.providerId),yield Wo(V,v.auth);const J=yield Ya(v);return V._openRedirect(v.auth,c,"linkViaRedirect",J)})).apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(g,c){return yield It(g)._initializationPromise,ki(g,c,!1)})).apply(this,arguments)}function ki(g,c){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,p.Z)(function*(g,c,f=!1){const v=It(g),V=ds(v,c),Ue=yield new Tu(v,V,f).execute();return Ue&&!f&&(delete Ue.user._redirectEventId,yield v._persistUserIfCurrent(Ue.user),yield v._setRedirectUser(null,c)),Ue})).apply(this,arguments)}function Ya(g){return hs.apply(this,arguments)}function hs(){return(hs=(0,p.Z)(function*(g){const c=$o(`${g.uid}:::`);return g._redirectEventId=c,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),c})).apply(this,arguments)}class Ks{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(c,v)&&(f=!0,this.sendToConsumer(c,v),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Xc(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fl(g);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var v;if(c.error&&!fl(c)){const V=(null===(v=c.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(ne(this.auth,V))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const v=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&v}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vo(c))}saveEventToCache(c){this.cachedEventUids.add(vo(c)),this.lastProcessedEventTime=Date.now()}}function vo(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(c=>c).join("-")}function fl({type:g,error:c}){return"unknown"===g&&"auth/no-auth-event"===(null==c?void 0:c.code)}function pl(g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,p.Z)(function*(g,c={}){return pn(g,"GET","/v1/projects",c)})).apply(this,arguments)}const qd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mf=/^https?/;function aa(){return(aa=(0,p.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:c}=yield pl(g);for(const f of c)try{if(gl(f))return}catch(v){}N(g,"unauthorized-domain")})).apply(this,arguments)}function gl(g){const c=_t(),{protocol:f,hostname:v}=new URL(c);if(g.startsWith("chrome-extension://")){const Ue=new URL(g);return""===Ue.hostname&&""===v?"chrome-extension:"===f&&g.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Ue.hostname===v}if(!Mf.test(f))return!1;if(qd.test(g))return v===g;const V=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(v)}const Rf=new Ut(3e4,6e4);function Of(){const g=Vr().___jsl;if(null==g?void 0:g.H)for(const c of Object.keys(g.H))if(g.H[c].r=g.H[c].r||[],g.H[c].L=g.H[c].L||[],g.H[c].r=[...g.H[c].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let ko=null;function ml(g){return ko=ko||function Zd(g){return new Promise((c,f)=>{var v,V,J;function Ue(){Of(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Of(),f(ne(g,"network-request-failed"))},timeout:Rf.get()})}if(null===(V=null===(v=Vr().gapi)||void 0===v?void 0:v.iframes)||void 0===V?void 0:V.Iframe)c(gapi.iframes.getContext());else{if(!(null===(J=Vr().gapi)||void 0===J?void 0:J.load)){const it=Du("iframefcb");return Vr()[it]=()=>{gapi.load?Ue():f(ne(g,"network-request-failed"))},ia(`https://apis.google.com/js/api.js?onload=${it}`).catch(Wt=>f(Wt))}Ue()}}).catch(c=>{throw ko=null,c})}(g),ko}const Pf=new Ut(5e3,15e3),Eo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ic=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function No(g){const c=g.config;Re(c.authDomain,g,"auth-domain-config-required");const f=c.emulator?St(c,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,v={apiKey:c.apiKey,appName:g.name,v:_e.SDK_VERSION},V=ic.get(g.config.apiHost);V&&(v.eid=V);const J=g._getFrameworks();return J.length&&(v.fw=J.join(",")),`${f}?${(0,Z.xO)(v).slice(1)}`}function Au(){return Au=(0,p.Z)(function*(g){const c=yield ml(g),f=Vr().gapi;return Re(f,g,"internal-error"),c.open({where:document.body,url:No(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Eo,dontclear:!0},v=>new Promise(function(){var V=(0,p.Z)(function*(J,Ue){yield v.restyle({setHideOnLeave:!1});const it=ne(g,"network-request-failed"),Wt=Vr().setTimeout(()=>{Ue(it)},Pf.get());function hn(){Vr().clearTimeout(Wt),J(v)}v.ping(hn).then(hn,()=>{Ue(it)})});return function(J,Ue){return V.apply(this,arguments)}}()))}),Au.apply(this,arguments)}const Xd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oc{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(c){}}}function ac(g,c,f,v,V,J){Re(g.config.authDomain,g,"auth-domain-config-required"),Re(g.config.apiKey,g,"invalid-api-key");const Ue={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:v,v:_e.SDK_VERSION,eventId:V};if(c instanceof Di){c.setDefaultLanguage(g.languageCode),Ue.providerId=c.providerId||"",(0,Z.xb)(c.getCustomParameters())||(Ue.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Wt,hn]of Object.entries(J||{}))Ue[Wt]=hn}if(c instanceof _r){const Wt=c.getScopes().filter(hn=>""!==hn);Wt.length>0&&(Ue.scopes=Wt.join(","))}g.tenantId&&(Ue.tid=g.tenantId);const it=Ue;for(const Wt of Object.keys(it))void 0===it[Wt]&&delete it[Wt];return`${function eh({config:g}){return g.emulator?St(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,Z.xO)(it).slice(1)}`}const Lo="webStorageSupport";class Mu extends class th{constructor(c){this.factorId=c}_process(c,f,v){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,v);case"signin":return this._finalizeSignIn(c,f.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Mu(c)}_finalizeEnroll(c,f,v){return function na(g,c){return pn(g,"POST","/v2/accounts/mfaEnrollment:finalize",_n(g,c))}(c,{idToken:f,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function mo(g,c){return pn(g,"POST","/v2/accounts/mfaSignIn:finalize",_n(g,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kf=(()=>{class g{constructor(){}static assertion(f){return Mu._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var nh="@firebase/auth",td="0.19.12";class Ja{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(v=>{var V;c((null===(V=v)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ma(){return window}function xa(){return(xa=(0,p.Z)(function*(g,c,f){var v;const{BuildInfo:V}=Ma();X(c.sessionId,"AuthEvent did not contain a session ID");const J=yield xg(c.sessionId),Ue={};return Dn()?Ue.ibi=V.packageName:nt()?Ue.apn=V.packageName:N(g,"operation-not-supported-in-this-environment"),V.displayName&&(Ue.appDisplayName=V.displayName),Ue.sessionId=J,ac(g,f,c.type,void 0,null!==(v=c.eventId)&&void 0!==v?v:void 0,Ue)})).apply(this,arguments)}function wo(){return(wo=(0,p.Z)(function*(g){const{BuildInfo:c}=Ma(),f={};Dn()?f.iosBundleId=c.packageName:nt()?f.androidPackageName=c.packageName:N(g,"operation-not-supported-in-this-environment"),yield pl(g,f)})).apply(this,arguments)}function tu(){return(tu=(0,p.Z)(function*(g,c,f){const{cordova:v}=Ma();let V=()=>{};try{yield new Promise((J,Ue)=>{let it=null;function Wt(){var on;J();const Si=null===(on=v.plugins.browsertab)||void 0===on?void 0:on.close;"function"==typeof Si&&Si(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function hn(){it||(it=window.setTimeout(()=>{Ue(ne(g,"redirect-cancelled-by-user"))},2e3))}function Tn(){"visible"===(null==document?void 0:document.visibilityState)&&hn()}c.addPassiveListener(Wt),document.addEventListener("resume",hn,!1),nt()&&document.addEventListener("visibilitychange",Tn,!1),V=()=>{c.removePassiveListener(Wt),document.removeEventListener("resume",hn,!1),document.removeEventListener("visibilitychange",Tn,!1),it&&window.clearTimeout(it)}})}finally{V()}})).apply(this,arguments)}function xg(g){return lc.apply(this,arguments)}function lc(){return(lc=(0,p.Z)(function*(g){const c=Rg(g),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Rg(g){if(X(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(g);const c=new ArrayBuffer(g.length),f=new Uint8Array(c);for(let v=0;v<g.length;v++)f[v]=g.charCodeAt(v);return f}!function rh(g){(0,_e._registerComponent)(new be.wA("auth",(c,{options:f})=>{const v=c.getProvider("app").getImmediate(),V=c.getProvider("heartbeat"),{apiKey:J,authDomain:Ue}=v.options;return((it,Wt)=>{Re(J&&!J.includes(":"),"invalid-api-key",{appName:it.name}),Re(!(null==Ue?void 0:Ue.includes(":")),"argument-error",{appName:it.name});const hn={apiKey:J,authDomain:Ue,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yr(g)},Tn=new zr(it,Wt,hn);return function Be(g,c){const f=(null==c?void 0:c.persistence)||[],v=(Array.isArray(f)?f:[f]).map(ae);(null==c?void 0:c.errorMap)&&g._updateErrorMap(c.errorMap),g._initializeWithPersistence(v,null==c?void 0:c.popupRedirectResolver)}(Tn,f),Tn})(v,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,v)=>{c.getProvider("auth-internal").initialize()})),(0,_e._registerComponent)(new be.wA("auth-internal",c=>{const f=It(c.getProvider("auth").getImmediate());return new Ja(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,_e.registerVersion)(nh,td,function eu(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,_e.registerVersion)(nh,td,"esm2017")}("Browser");class dc extends Ks{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function sh(g){return wl.apply(this,arguments)}function wl(){return(wl=(0,p.Z)(function*(g){const c=yield Dl()._get(nd(g));return c&&(yield Dl()._remove(nd(g))),c})).apply(this,arguments)}function Il(){const g=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const v=Math.floor(Math.random()*c.length);g.push(c.charAt(v))}return g.join("")}function Dl(){return ae(Nr)}function nd(g){return Qe("authEvent",g.config.apiKey,g.name)}function Pu(g){if(!(null==g?void 0:g.includes("?")))return{};const[c,...f]=g.split("?");return(0,Z.zd)(f.join("?"))}function Cl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ne("no-auth-event")}}function fc(){var g;return(null===(g=null==self?void 0:self.location)||void 0===g?void 0:g.protocol)||null}function ah(g=(0,Z.z$)()){return!("file:"!==fc()&&"ionic:"!==fc()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Bn(){try{const g=self.localStorage,c=$o();if(g)return g.setItem(c,"1"),g.removeItem(c),!function bl(g=(0,Z.z$)()){return function pc(){return(0,Z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Og(g=(0,Z.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,Z.hl)()}catch(g){return Tl()&&(0,Z.hl)()}return!1}function Tl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ru(){return(function Io(){return"http:"===fc()||"https:"===fc()}()||(0,Z.ru)()||ah())&&!function id(){return(0,Z.b$)()||(0,Z.UG)()}()&&Bn()&&!Tl()}function iu(){return ah()&&"undefined"!=typeof document}function zo(){return(zo=(0,p.Z)(function*(){return!!iu()&&new Promise(g=>{const c=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),g(!0)})})})).apply(this,arguments)}const qs={LOCAL:"local",NONE:"none",SESSION:"session"},Nu=Re,sd="persistence";function Al(g){return od.apply(this,arguments)}function od(){return(od=(0,p.Z)(function*(g){yield g._initializationPromise;const c=ch(),f=Qe(sd,g.config.apiKey,g.name);c&&c.setItem(f,g._getPersistence())})).apply(this,arguments)}function ch(){var g;try{return(null===(g=function gc(){return"undefined"!=typeof window?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch(c){return null}}const Sl=Re;class Vo{constructor(){this.browserResolver=ae(class Xa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gs,this._completeRedirectFn=ki}_openPopup(c,f,v,V){var J=this;return(0,p.Z)(function*(){var Ue;X(null===(Ue=J.eventManagers[c._key()])||void 0===Ue?void 0:Ue.manager,"_initialize() not called before _openPopup()");const it=ac(c,f,v,_t(),V);return function Fo(g,c,f,v=500,V=600){const J=Math.max((window.screen.availHeight-V)/2,0).toString(),Ue=Math.max((window.screen.availWidth-v)/2,0).toString();let it="";const Wt=Object.assign(Object.assign({},Xd),{width:v.toString(),height:V.toString(),top:J,left:Ue}),hn=(0,Z.z$)().toLowerCase();f&&(it=oe(hn)?"_blank":f),Ae(hn)&&(c=c||"http://localhost",Wt.scrollbars="yes");const Tn=Object.entries(Wt).reduce((Si,[ho,Zs])=>`${Si}${ho}=${Zs},`,"");if(function $r(g=(0,Z.z$)()){var c;return Dn(g)&&!!(null===(c=window.navigator)||void 0===c?void 0:c.standalone)}(hn)&&"_self"!==it)return function Jd(g,c){const f=document.createElement("a");f.href=g,f.target=c;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(c||"",it),new oc(null);const on=window.open(c||"",it,Tn);Re(on,g,"popup-blocked");try{on.focus()}catch(Si){}return new oc(on)}(c,it,$o())})()}_openRedirect(c,f,v,V){var J=this;return(0,p.Z)(function*(){return yield J._originValidation(c),function Wa(g){Vr().location.href=g}(ac(c,f,v,_t(),V)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:V,promise:J}=this.eventManagers[f];return V?Promise.resolve(V):(X(J,"If manager is not set, promise should be"),J)}const v=this.initAndGetManager(c);return this.eventManagers[f]={promise:v},v.catch(()=>{delete this.eventManagers[f]}),v}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const v=yield function sc(g){return Au.apply(this,arguments)}(c),V=new Ks(c);return v.register("authEvent",J=>(Re(null==J?void 0:J.authEvent,c,"invalid-auth-event"),{status:V.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:V},f.iframes[c._key()]=v,V})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(Lo,{type:Lo},V=>{var J;const Ue=null===(J=null==V?void 0:V[0])||void 0===J?void 0:J[Lo];void 0!==Ue&&f(!!Ue),N(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function xf(g){return aa.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return Wr()||ge()||Dn()}}),this.cordovaResolver=ae(class Ra{constructor(){this._redirectPersistence=Gs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ki}_initialize(c){var f=this;return(0,p.Z)(function*(){const v=c._key();let V=f.eventManagers.get(v);return V||(V=new dc(c),f.eventManagers.set(v,V),f.attachCallbackListeners(c,V)),V})()}_openPopup(c){N(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,v,V){var J=this;return(0,p.Z)(function*(){!function El(g){var c,f,v,V,J,Ue,it,Wt,hn,Tn;const on=Ma();Re("function"==typeof(null===(c=null==on?void 0:on.universalLinks)||void 0===c?void 0:c.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Re(void 0!==(null===(f=null==on?void 0:on.BuildInfo)||void 0===f?void 0:f.packageName),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Re("function"==typeof(null===(J=null===(V=null===(v=null==on?void 0:on.cordova)||void 0===v?void 0:v.plugins)||void 0===V?void 0:V.browsertab)||void 0===J?void 0:J.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(Wt=null===(it=null===(Ue=null==on?void 0:on.cordova)||void 0===Ue?void 0:Ue.plugins)||void 0===it?void 0:it.browsertab)||void 0===Wt?void 0:Wt.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(Tn=null===(hn=null==on?void 0:on.cordova)||void 0===hn?void 0:hn.InAppBrowser)||void 0===Tn?void 0:Tn.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Ue=yield J._initialize(c);yield Ue.initialized(),Ue.resetRedirect(),function hl(){zs.clear()}(),yield J._originValidation(c);const it=function nu(g,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:Il(),postBody:null,tenantId:g.tenantId,error:ne(g,"no-auth-event")}}(c,v,V);yield function Ou(g,c){return Dl()._set(nd(g),c)}(c,it);const Wt=yield function ih(g,c,f){return xa.apply(this,arguments)}(c,it,f),hn=yield function vl(g){const{cordova:c}=Ma();return new Promise(f=>{c.plugins.browsertab.isAvailable(v=>{let V=null;v?c.plugins.browsertab.openUrl(g):V=c.InAppBrowser.open(g,function Nn(g=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(V)})})}(Wt);return function $i(g,c,f){return tu.apply(this,arguments)}(c,Ue,hn)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Ru(g){return wo.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:v,handleOpenURL:V,BuildInfo:J}=Ma(),Ue=setTimeout((0,p.Z)(function*(){yield sh(c),f.onEvent(Cl())}),500),it=function(){var Tn=(0,p.Z)(function*(on){clearTimeout(Ue);const Si=yield sh(c);let ho=null;Si&&(null==on?void 0:on.url)&&(ho=function oh(g,c){var f,v;const V=function cr(g){const c=Pu(g),f=c.link?decodeURIComponent(c.link):void 0,v=Pu(f).link,V=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Pu(V).link||V||v||f||g}(c);if(V.includes("/__/auth/callback")){const J=Pu(V),Ue=J.firebaseError?function Hi(g){try{return JSON.parse(g)}catch(c){return null}}(decodeURIComponent(J.firebaseError)):null,it=null===(v=null===(f=null==Ue?void 0:Ue.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],Wt=it?ne(it):null;return Wt?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Wt,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:V,postBody:null}}return null}(Si,on.url)),f.onEvent(ho||Cl())});return function(Si){return Tn.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,it);const Wt=V,hn=`${J.packageName.toLowerCase()}://`;Ma().handleOpenURL=function(){var Tn=(0,p.Z)(function*(on){if(on.toLowerCase().startsWith(hn)&&it({url:on}),"function"==typeof Wt)try{Wt(on)}catch(Si){console.error(Si)}});return function(on){return Tn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Gs,this._completeRedirectFn=ki}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,v,V){var J=this;return(0,p.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openPopup(c,f,v,V)})()}_openRedirect(c,f,v,V){var J=this;return(0,p.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openRedirect(c,f,v,V)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return iu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function es(){return zo.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function dh(g){return g.unwrap()}function Ml(g){return Fu(g)}function Fu(g){const{_tokenResponse:c}=g instanceof Z.ZR?g.customData:g;if(!c)return null;if(!(g instanceof Z.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Bi.credentialFromResult(g);const f=c.providerId;if(!f||"password"===f)return null;let v;switch(f){case"google.com":v=ls;break;case"facebook.com":v=us;break;case"github.com":v=to;break;case"twitter.com":v=qi;break;default:const{oauthIdToken:V,oauthAccessToken:J,oauthTokenSecret:Ue,pendingToken:it,nonce:Wt}=c;return J||Ue||V||it?it?f.startsWith("saml.")?Ci._create(f,it):Pe._fromParams({providerId:f,signInMethod:f,pendingToken:it,idToken:V,accessToken:J}):new as(f).credential({idToken:V,accessToken:J,rawNonce:Wt}):null}return g instanceof Z.ZR?v.credentialFromError(g):v.credentialFromResult(g)}function ui(g,c){return c.catch(f=>{throw f instanceof Z.ZR&&function hh(g,c){var f;const v=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===c.code)c.resolver=new Rl(g,function Ns(g,c){var f;const v=(0,Z.m9)(g),V=c;return Re(c.customData.operationType,v,"argument-error"),Re(null===(f=V.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),$s._fromError(v,V)}(g,c));else if(v){const V=Fu(c),J=c;V&&(J.credential=V,J.tenantId=v.tenantId||void 0,J.email=v.email||void 0,J.phoneNumber=v.phoneNumber||void 0)}}(g,f),f}).then(f=>{const V=f.user;return{operationType:f.operationType,credential:Ml(f),additionalUserInfo:bi(f),user:Ko.getOrCreate(V)}})}function xl(g,c){return mc.apply(this,arguments)}function mc(){return(mc=(0,p.Z)(function*(g,c){const f=yield c;return{verificationId:f.verificationId,confirm:v=>ui(g,f.confirm(v))}})).apply(this,arguments)}class Rl{constructor(c,f){this.resolver=f,this.auth=function fs(g){return g.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return ui(dh(this.auth),this.resolver.resolveSignIn(c))}}class Ko{constructor(c){this._delegate=c,this.multiFactor=function ra(g){const c=(0,Z.m9)(g);return io.has(c)||io.set(c,vs._fromUser(c)),io.get(c)}(c)}static getOrCreate(c){return Ko.USER_MAP.has(c)||Ko.USER_MAP.set(c,new Ko(c)),Ko.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return ui(f.auth,Hn(f._delegate,c))})()}linkWithPhoneNumber(c,f){var v=this;return(0,p.Z)(function*(){return xl(v.auth,function ll(g,c,f){return Ls.apply(this,arguments)}(v._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return ui(f.auth,function dl(g,c,f){return Po.apply(this,arguments)}(f._delegate,c,Vo))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Al(It(f.auth)),function cn(g,c,f){return function bn(g,c,f){return lr.apply(this,arguments)}(g,c,f)}(f._delegate,c,Vo)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return ui(f.auth,Mn(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return xl(this.auth,function Ai(g,c,f){return Mo.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return ui(this.auth,function Go(g,c,f){return Oo.apply(this,arguments)}(this._delegate,c,Vo))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Al(It(f.auth)),function Ye(g,c,f){return function Rt(g,c,f){return Xt.apply(this,arguments)}(g,c,f)}(f._delegate,c,Vo)})()}sendEmailVerification(c){return function yr(g,c){return _s.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function gi(g,c){return Zi.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function ja(g,c){return Bo((0,Z.m9)(g),c,null)}(this._delegate,c)}updatePassword(c){return function $a(g,c){return Bo((0,Z.m9)(g),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Ta(g,c){return Ho.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Xo(g,c){return Ea.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Yi(g,c,f){return no.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ko.USER_MAP=new WeakMap;const Lu=Re;let yc=(()=>{class g{constructor(f,v){if(this.app=f,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=f.options;Lu(V,"invalid-api-key",{appName:f.name}),Lu(V,"invalid-api-key",{appName:f.name});const J="undefined"!=typeof window?Vo:void 0;this._delegate=v.initialize({options:{persistence:Nf(V,f.name),popupRedirectResolver:J}}),this._delegate._updateErrorMap(Ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ko.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,v){!function yn(g,c,f){const v=It(g);Re(v._canInitEmulator,v,"emulator-config-failed"),Re(/^https?:\/\//.test(c),v,"invalid-emulator-scheme");const V=!!(null==f?void 0:f.disableWarnings),J=vr(c),{host:Ue,port:it}=function di(g){const c=vr(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(c.length));if(!f)return{host:"",port:null};const v=f[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(v);if(V){const J=V[1];return{host:J,port:Tr(v.substr(J.length+1))}}{const[J,Ue]=v.split(":");return{host:J,port:Tr(Ue)}}}(c);v.config.emulator={url:`${J}//${Ue}${null===it?"":`:${it}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:Ue,port:it,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function ti(){function g(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,v)}applyActionCode(f){return function ee(g,c){return Q.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return ve(this._delegate,f)}confirmPasswordReset(f,v){return function L(g,c,f){return O.apply(this,arguments)}(this._delegate,f,v)}createUserWithEmailAndPassword(f,v){var V=this;return(0,p.Z)(function*(){return ui(V._delegate,function Ht(g,c,f){return vn.apply(this,arguments)}(V._delegate,f,v))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Ui(g,c){return kr.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function si(g,c){const f=Vi.parseLink(c);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Lu(ru(),f._delegate,"operation-not-supported-in-this-environment");const v=yield function Un(g,c){return Zr.apply(this,arguments)}(f._delegate,Vo);return v?ui(f._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function ws(g,c){It(g)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,v,V){const{next:J,error:Ue,complete:it}=fh(f,v,V);return this._delegate.onAuthStateChanged(J,Ue,it)}onIdTokenChanged(f,v,V){const{next:J,error:Ue,complete:it}=fh(f,v,V);return this._delegate.onIdTokenChanged(J,Ue,it)}sendSignInLinkToEmail(f,v){return function Fr(g,c,f){return Mr.apply(this,arguments)}(this._delegate,f,v)}sendPasswordResetEmail(f,v){return function tn(g,c,f){return mr.apply(this,arguments)}(this._delegate,f,v||void 0)}setPersistence(f){var v=this;return(0,p.Z)(function*(){let V;switch(function uh(g,c){Nu(Object.values(qs).includes(c),g,"invalid-persistence-type"),(0,Z.b$)()?Nu(c!==qs.SESSION,g,"unsupported-persistence-type"):(0,Z.UG)()?Nu(c===qs.NONE,g,"unsupported-persistence-type"):Tl()?Nu(c===qs.NONE||c===qs.LOCAL&&(0,Z.hl)(),g,"unsupported-persistence-type"):Nu(c===qs.NONE||Bn(),g,"unsupported-persistence-type")}(v._delegate,f),f){case qs.SESSION:V=Gs;break;case qs.LOCAL:V=(yield ae(Es)._isAvailable())?Es:Nr;break;case qs.NONE:V=Ce;break;default:return N("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return ui(this._delegate,function Rs(g){return Os.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return ui(this._delegate,Nt(this._delegate,f))}signInWithCustomToken(f){return ui(this._delegate,function k(g,c){return A.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,v){return ui(this._delegate,function Yn(g,c,f){return Nt((0,Z.m9)(g),ri.credential(c,f))}(this._delegate,f,v))}signInWithEmailLink(f,v){return ui(this._delegate,function Hr(g,c,f){return mi.apply(this,arguments)}(this._delegate,f,v))}signInWithPhoneNumber(f,v){return xl(this._delegate,function Kd(g,c,f){return Xn.apply(this,arguments)}(this._delegate,f,v))}signInWithPopup(f){var v=this;return(0,p.Z)(function*(){return Lu(ru(),v._delegate,"operation-not-supported-in-this-environment"),ui(v._delegate,function _o(g,c,f){return Ro.apply(this,arguments)}(v._delegate,f,Vo))})()}signInWithRedirect(f){var v=this;return(0,p.Z)(function*(){return Lu(ru(),v._delegate,"operation-not-supported-in-this-environment"),yield Al(v._delegate),function K(g,c,f){return function de(g,c,f){return Ve.apply(this,arguments)}(g,c,f)}(v._delegate,f,Vo)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function ft(g,c){return sn.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=qs,g})();function fh(g,c,f){let v=g;"function"!=typeof g&&({next:v,error:c,complete:f}=g);const V=v;return{next:Ue=>V(Ue&&Ko.getOrCreate(Ue)),error:c,complete:f}}function Nf(g,c){const f=function lh(g,c){const f=ch();if(!f)return[];const v=Qe(sd,g,c);switch(f.getItem(v)){case qs.NONE:return[Ce];case qs.LOCAL:return[Es,Gs];case qs.SESSION:return[Gs];default:return[]}}(g,c);if("undefined"!=typeof self&&!f.includes(Es)&&f.push(Es),"undefined"!=typeof window)for(const v of[Nr,Gs])f.includes(v)||f.push(v);return f.includes(Ce)||f.push(Ce),f}class su{constructor(){this.providerId="phone",this._delegate=new Bi(dh(H.Z.auth()))}static credential(c,f){return Bi.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}su.PHONE_SIGN_IN_METHOD=Bi.PHONE_SIGN_IN_METHOD,su.PROVIDER_ID=Bi.PROVIDER_ID;const ad=Re;class Ff{constructor(c,f,v=H.Z.app()){var V;ad(null===(V=v.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new zd(c,f,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function gh(g){g.INTERNAL.registerComponent(new be.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),v=c.getProvider("auth");return new yc(f,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ri,FacebookAuthProvider:us,GithubAuthProvider:to,GoogleAuthProvider:ls,OAuthProvider:as,SAMLAuthProvider:Xr,PhoneAuthProvider:su,PhoneMultiFactorGenerator:kf,RecaptchaVerifier:Ff,TwitterAuthProvider:qi,Auth:yc,AuthCredential:jn,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.12")}(H.Z)},1135:(Pt,We,R)=>{R.d(We,{X:()=>H});var p=R(7579);class H extends p.x{constructor(_e){super(),this._value=_e}get value(){return this.getValue()}_subscribe(_e){const pe=super._subscribe(_e);return!pe.closed&&_e.next(this._value),pe}getValue(){const{hasError:_e,thrownError:pe,_value:we}=this;if(_e)throw pe;return this._throwIfClosed(),we}next(_e){super.next(this._value=_e)}}},9751:(Pt,We,R)=>{R.d(We,{y:()=>ye});var p=R(930),H=R(727),Z=R(8822),_e=R(9635),pe=R(2416),we=R(576),be=R(2806);let ye=(()=>{class me{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const Ze=new me;return Ze.source=this,Ze.operator=Ge,Ze}subscribe(Ge,Ze,mt){const Le=function re(me){return me&&me instanceof p.Lv||function le(me){return me&&(0,we.m)(me.next)&&(0,we.m)(me.error)&&(0,we.m)(me.complete)}(me)&&(0,H.Nn)(me)}(Ge)?Ge:new p.Hp(Ge,Ze,mt);return(0,be.x)(()=>{const{operator:ke,source:at}=this;Le.add(ke?ke.call(Le,at):at?this._subscribe(Le):this._trySubscribe(Le))}),Le}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(Ze){Ge.error(Ze)}}forEach(Ge,Ze){return new(Ze=Fe(Ze))((mt,Le)=>{const ke=new p.Hp({next:at=>{try{Ge(at)}catch($){Le($),ke.unsubscribe()}},error:Le,complete:mt});this.subscribe(ke)})}_subscribe(Ge){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(Ge)}[Z.L](){return this}pipe(...Ge){return(0,_e.U)(Ge)(this)}toPromise(Ge){return new(Ge=Fe(Ge))((Ze,mt)=>{let Le;this.subscribe(ke=>Le=ke,ke=>mt(ke),()=>Ze(Le))})}}return me.create=je=>new me(je),me})();function Fe(me){var je;return null!==(je=null!=me?me:pe.v.Promise)&&void 0!==je?je:Promise}},7579:(Pt,We,R)=>{R.d(We,{x:()=>be});var p=R(9751),H=R(727);const _e=(0,R(3888).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=R(8737),we=R(2806);let be=(()=>{class Fe extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const me=new ye(this,this);return me.operator=re,me}_throwIfClosed(){if(this.closed)throw new _e}next(re){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const me of this.currentObservers)me.next(re)}})}error(re){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:me}=this;for(;me.length;)me.shift().error(re)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:me,isStopped:je,observers:Ge}=this;return me||je?H.Lc:(this.currentObservers=null,Ge.push(re),new H.w0(()=>{this.currentObservers=null,(0,pe.P)(Ge,re)}))}_checkFinalizedStatuses(re){const{hasError:me,thrownError:je,isStopped:Ge}=this;me?re.error(je):Ge&&re.complete()}asObservable(){const re=new p.y;return re.source=this,re}}return Fe.create=(le,re)=>new ye(le,re),Fe})();class ye extends be{constructor(le,re){super(),this.destination=le,this.source=re}next(le){var re,me;null===(me=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===me||me.call(re,le)}error(le){var re,me;null===(me=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===me||me.call(re,le)}complete(){var le,re;null===(re=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===re||re.call(le)}_subscribe(le){var re,me;return null!==(me=null===(re=this.source)||void 0===re?void 0:re.subscribe(le))&&void 0!==me?me:H.Lc}}},930:(Pt,We,R)=>{R.d(We,{Hp:()=>mt,Lv:()=>me});var p=R(576),H=R(727),Z=R(2416),_e=R(7849),pe=R(5032);const we=Fe("C",void 0,void 0);function Fe(N,ne,ue){return{kind:N,value:ne,error:ue}}var le=R(3410),re=R(2806);class me extends H.w0{constructor(ne){super(),this.isStopped=!1,ne?(this.destination=ne,(0,H.Nn)(ne)&&ne.add(this)):this.destination=$}static create(ne,ue,Ee){return new mt(ne,ue,Ee)}next(ne){this.isStopped?at(function ye(N){return Fe("N",N,void 0)}(ne),this):this._next(ne)}error(ne){this.isStopped?at(function be(N){return Fe("E",void 0,N)}(ne),this):(this.isStopped=!0,this._error(ne))}complete(){this.isStopped?at(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ne){this.destination.next(ne)}_error(ne){try{this.destination.error(ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Ge(N,ne){return je.call(N,ne)}class Ze{constructor(ne){this.partialObserver=ne}next(ne){const{partialObserver:ue}=this;if(ue.next)try{ue.next(ne)}catch(Ee){Le(Ee)}}error(ne){const{partialObserver:ue}=this;if(ue.error)try{ue.error(ne)}catch(Ee){Le(Ee)}else Le(ne)}complete(){const{partialObserver:ne}=this;if(ne.complete)try{ne.complete()}catch(ue){Le(ue)}}}class mt extends me{constructor(ne,ue,Ee){let Ne;if(super(),(0,p.m)(ne)||!ne)Ne={next:null!=ne?ne:void 0,error:null!=ue?ue:void 0,complete:null!=Ee?Ee:void 0};else{let Re;this&&Z.v.useDeprecatedNextContext?(Re=Object.create(ne),Re.unsubscribe=()=>this.unsubscribe(),Ne={next:ne.next&&Ge(ne.next,Re),error:ne.error&&Ge(ne.error,Re),complete:ne.complete&&Ge(ne.complete,Re)}):Ne=ne}this.destination=new Ze(Ne)}}function Le(N){Z.v.useDeprecatedSynchronousErrorHandling?(0,re.O)(N):(0,_e.h)(N)}function at(N,ne){const{onStoppedNotification:ue}=Z.v;ue&&le.z.setTimeout(()=>ue(N,ne))}const $={closed:!0,next:pe.Z,error:function ke(N){throw N},complete:pe.Z}},727:(Pt,We,R)=>{R.d(We,{Lc:()=>we,w0:()=>pe,Nn:()=>be});var p=R(576);const Z=(0,R(3888).d)(Fe=>function(re){Fe(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((me,je)=>`${je+1}) ${me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var _e=R(8737);class pe{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const Ge of re)Ge.remove(this);else re.remove(this);const{initialTeardown:me}=this;if((0,p.m)(me))try{me()}catch(Ge){le=Ge instanceof Z?Ge.errors:[Ge]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Ge of je)try{ye(Ge)}catch(Ze){le=null!=le?le:[],Ze instanceof Z?le=[...le,...Ze.errors]:le.push(Ze)}}if(le)throw new Z(le)}}add(le){var re;if(le&&le!==this)if(this.closed)ye(le);else{if(le instanceof pe){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(le)}}_hasParent(le){const{_parentage:re}=this;return re===le||Array.isArray(re)&&re.includes(le)}_addParent(le){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(le),re):re?[re,le]:le}_removeParent(le){const{_parentage:re}=this;re===le?this._parentage=null:Array.isArray(re)&&(0,_e.P)(re,le)}remove(le){const{_finalizers:re}=this;re&&(0,_e.P)(re,le),le instanceof pe&&le._removeParent(this)}}pe.EMPTY=(()=>{const Fe=new pe;return Fe.closed=!0,Fe})();const we=pe.EMPTY;function be(Fe){return Fe instanceof pe||Fe&&"closed"in Fe&&(0,p.m)(Fe.remove)&&(0,p.m)(Fe.add)&&(0,p.m)(Fe.unsubscribe)}function ye(Fe){(0,p.m)(Fe)?Fe():Fe.unsubscribe()}},2416:(Pt,We,R)=>{R.d(We,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Pt,We,R)=>{R.d(We,{a:()=>le});var p=R(9751),H=R(4742),Z=R(8996),_e=R(4671),pe=R(3268),we=R(3269),be=R(1810),ye=R(5403),Fe=R(9672);function le(...je){const Ge=(0,we.yG)(je),Ze=(0,we.jO)(je),{args:mt,keys:Le}=(0,H.D)(je);if(0===mt.length)return(0,Z.D)([],Ge);const ke=new p.y(function re(je,Ge,Ze=_e.y){return mt=>{me(Ge,()=>{const{length:Le}=je,ke=new Array(Le);let at=Le,$=Le;for(let N=0;N<Le;N++)me(Ge,()=>{const ne=(0,Z.D)(je[N],Ge);let ue=!1;ne.subscribe((0,ye.x)(mt,Ee=>{ke[N]=Ee,ue||(ue=!0,$--),$||mt.next(Ze(ke.slice()))},()=>{--at||mt.complete()}))},mt)},mt)}}(mt,Ge,Le?at=>(0,be.n)(Le,at):_e.y));return Ze?ke.pipe((0,pe.Z)(Ze)):ke}function me(je,Ge,Ze){je?(0,Fe.f)(Ze,je,Ge):Ge()}},7272:(Pt,We,R)=>{R.d(We,{z:()=>pe});var p=R(8189),Z=R(3269),_e=R(8996);function pe(...we){return function H(){return(0,p.J)(1)}()((0,_e.D)(we,(0,Z.yG)(we)))}},515:(Pt,We,R)=>{R.d(We,{E:()=>H});const H=new(R(9751).y)(pe=>pe.complete())},4128:(Pt,We,R)=>{R.d(We,{D:()=>ye});var p=R(9751),H=R(4742),Z=R(8421),_e=R(3269),pe=R(5403),we=R(3268),be=R(1810);function ye(...Fe){const le=(0,_e.jO)(Fe),{args:re,keys:me}=(0,H.D)(Fe),je=new p.y(Ge=>{const{length:Ze}=re;if(!Ze)return void Ge.complete();const mt=new Array(Ze);let Le=Ze,ke=Ze;for(let at=0;at<Ze;at++){let $=!1;(0,Z.Xf)(re[at]).subscribe((0,pe.x)(Ge,N=>{$||($=!0,ke--),mt[at]=N},()=>Le--,void 0,()=>{(!Le||!$)&&(ke||Ge.next(me?(0,be.n)(me,mt):mt),Ge.complete())}))}});return le?je.pipe((0,we.Z)(le)):je}},8996:(Pt,We,R)=>{R.d(We,{D:()=>ne});var p=R(8421),H=R(5363),Z=R(9468),we=R(9751),ye=R(2202),Fe=R(576),le=R(9672);function me(ue,Ee){if(!ue)throw new Error("Iterable cannot be null");return new we.y(Ne=>{(0,le.f)(Ne,Ee,()=>{const Re=ue[Symbol.asyncIterator]();(0,le.f)(Ne,Ee,()=>{Re.next().then(fe=>{fe.done?Ne.complete():Ne.next(fe.value)})},0,!0)})})}var je=R(3670),Ge=R(8239),Ze=R(1144),mt=R(6495),Le=R(2206),ke=R(4532),at=R(3260);function ne(ue,Ee){return Ee?function N(ue,Ee){if(null!=ue){if((0,je.c)(ue))return function _e(ue,Ee){return(0,p.Xf)(ue).pipe((0,Z.R)(Ee),(0,H.Q)(Ee))}(ue,Ee);if((0,Ze.z)(ue))return function be(ue,Ee){return new we.y(Ne=>{let Re=0;return Ee.schedule(function(){Re===ue.length?Ne.complete():(Ne.next(ue[Re++]),Ne.closed||this.schedule())})})}(ue,Ee);if((0,Ge.t)(ue))return function pe(ue,Ee){return(0,p.Xf)(ue).pipe((0,Z.R)(Ee),(0,H.Q)(Ee))}(ue,Ee);if((0,Le.D)(ue))return me(ue,Ee);if((0,mt.T)(ue))return function re(ue,Ee){return new we.y(Ne=>{let Re;return(0,le.f)(Ne,Ee,()=>{Re=ue[ye.h](),(0,le.f)(Ne,Ee,()=>{let fe,X;try{({value:fe,done:X}=Re.next())}catch(Oe){return void Ne.error(Oe)}X?Ne.complete():Ne.next(fe)},0,!0)}),()=>(0,Fe.m)(null==Re?void 0:Re.return)&&Re.return()})}(ue,Ee);if((0,at.L)(ue))return function $(ue,Ee){return me((0,at.Q)(ue),Ee)}(ue,Ee)}throw(0,ke.z)(ue)}(ue,Ee):(0,p.Xf)(ue)}},8421:(Pt,We,R)=>{R.d(We,{Xf:()=>je});var p=R(655),H=R(1144),Z=R(8239),_e=R(9751),pe=R(3670),we=R(2206),be=R(4532),ye=R(6495),Fe=R(3260),le=R(576),re=R(7849),me=R(8822);function je(N){if(N instanceof _e.y)return N;if(null!=N){if((0,pe.c)(N))return function Ge(N){return new _e.y(ne=>{const ue=N[me.L]();if((0,le.m)(ue.subscribe))return ue.subscribe(ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(N);if((0,H.z)(N))return function Ze(N){return new _e.y(ne=>{for(let ue=0;ue<N.length&&!ne.closed;ue++)ne.next(N[ue]);ne.complete()})}(N);if((0,Z.t)(N))return function mt(N){return new _e.y(ne=>{N.then(ue=>{ne.closed||(ne.next(ue),ne.complete())},ue=>ne.error(ue)).then(null,re.h)})}(N);if((0,we.D)(N))return ke(N);if((0,ye.T)(N))return function Le(N){return new _e.y(ne=>{for(const ue of N)if(ne.next(ue),ne.closed)return;ne.complete()})}(N);if((0,Fe.L)(N))return function at(N){return ke((0,Fe.Q)(N))}(N)}throw(0,be.z)(N)}function ke(N){return new _e.y(ne=>{(function $(N,ne){var ue,Ee,Ne,Re;return(0,p.mG)(this,void 0,void 0,function*(){try{for(ue=(0,p.KL)(N);!(Ee=yield ue.next()).done;)if(ne.next(Ee.value),ne.closed)return}catch(fe){Ne={error:fe}}finally{try{Ee&&!Ee.done&&(Re=ue.return)&&(yield Re.call(ue))}finally{if(Ne)throw Ne.error}}ne.complete()})})(N,ne).catch(ue=>ne.error(ue))})}},6451:(Pt,We,R)=>{R.d(We,{T:()=>we});var p=R(8189),H=R(8421),Z=R(515),_e=R(3269),pe=R(8996);function we(...be){const ye=(0,_e.yG)(be),Fe=(0,_e._6)(be,1/0),le=be;return le.length?1===le.length?(0,H.Xf)(le[0]):(0,p.J)(Fe)((0,pe.D)(le,ye)):Z.E}},9646:(Pt,We,R)=>{R.d(We,{of:()=>Z});var p=R(3269),H=R(8996);function Z(..._e){const pe=(0,p.yG)(_e);return(0,H.D)(_e,pe)}},5403:(Pt,We,R)=>{R.d(We,{x:()=>H});var p=R(930);function H(_e,pe,we,be,ye){return new Z(_e,pe,we,be,ye)}class Z extends p.Lv{constructor(pe,we,be,ye,Fe,le){super(pe),this.onFinalize=Fe,this.shouldUnsubscribe=le,this._next=we?function(re){try{we(re)}catch(me){pe.error(me)}}:super._next,this._error=ye?function(re){try{ye(re)}catch(me){pe.error(me)}finally{this.unsubscribe()}}:super._error,this._complete=be?function(){try{be()}catch(re){pe.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},8372:(Pt,We,R)=>{R.d(We,{b:()=>_e});var p=R(4986),H=R(4482),Z=R(5403);function _e(pe,we=p.z){return(0,H.e)((be,ye)=>{let Fe=null,le=null,re=null;const me=()=>{if(Fe){Fe.unsubscribe(),Fe=null;const Ge=le;le=null,ye.next(Ge)}};function je(){const Ge=re+pe,Ze=we.now();if(Ze<Ge)return Fe=this.schedule(void 0,Ge-Ze),void ye.add(Fe);me()}be.subscribe((0,Z.x)(ye,Ge=>{le=Ge,re=we.now(),Fe||(Fe=we.schedule(je,pe),ye.add(Fe))},()=>{me(),ye.complete()},void 0,()=>{le=Fe=null}))})}},6590:(Pt,We,R)=>{R.d(We,{d:()=>Z});var p=R(4482),H=R(5403);function Z(_e){return(0,p.e)((pe,we)=>{let be=!1;pe.subscribe((0,H.x)(we,ye=>{be=!0,we.next(ye)},()=>{be||we.next(_e),we.complete()}))})}},9300:(Pt,We,R)=>{R.d(We,{h:()=>Z});var p=R(4482),H=R(5403);function Z(_e,pe){return(0,p.e)((we,be)=>{let ye=0;we.subscribe((0,H.x)(be,Fe=>_e.call(pe,Fe,ye++)&&be.next(Fe)))})}},590:(Pt,We,R)=>{R.d(We,{P:()=>be});var p=R(6805),H=R(9300),Z=R(5698),_e=R(6590),pe=R(8068),we=R(4671);function be(ye,Fe){const le=arguments.length>=2;return re=>re.pipe(ye?(0,H.h)((me,je)=>ye(me,je,re)):we.y,(0,Z.q)(1),le?(0,_e.d)(Fe):(0,pe.T)(()=>new p.K))}},4004:(Pt,We,R)=>{R.d(We,{U:()=>Z});var p=R(4482),H=R(5403);function Z(_e,pe){return(0,p.e)((we,be)=>{let ye=0;we.subscribe((0,H.x)(be,Fe=>{be.next(_e.call(pe,Fe,ye++))}))})}},8189:(Pt,We,R)=>{R.d(We,{J:()=>Z});var p=R(5577),H=R(4671);function Z(_e=1/0){return(0,p.z)(H.y,_e)}},5577:(Pt,We,R)=>{R.d(We,{z:()=>ye});var p=R(4004),H=R(8421),Z=R(4482),_e=R(9672),pe=R(5403),be=R(576);function ye(Fe,le,re=1/0){return(0,be.m)(le)?ye((me,je)=>(0,p.U)((Ge,Ze)=>le(me,Ge,je,Ze))((0,H.Xf)(Fe(me,je))),re):("number"==typeof le&&(re=le),(0,Z.e)((me,je)=>function we(Fe,le,re,me,je,Ge,Ze,mt){const Le=[];let ke=0,at=0,$=!1;const N=()=>{$&&!Le.length&&!ke&&le.complete()},ne=Ee=>ke<me?ue(Ee):Le.push(Ee),ue=Ee=>{Ge&&le.next(Ee),ke++;let Ne=!1;(0,H.Xf)(re(Ee,at++)).subscribe((0,pe.x)(le,Re=>{null==je||je(Re),Ge?ne(Re):le.next(Re)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(ke--;Le.length&&ke<me;){const Re=Le.shift();Ze?(0,_e.f)(le,Ze,()=>ue(Re)):ue(Re)}N()}catch(Re){le.error(Re)}}))};return Fe.subscribe((0,pe.x)(le,ne,()=>{$=!0,N()})),()=>{null==mt||mt()}}(me,je,Fe,re)))}},5363:(Pt,We,R)=>{R.d(We,{Q:()=>_e});var p=R(9672),H=R(4482),Z=R(5403);function _e(pe,we=0){return(0,H.e)((be,ye)=>{be.subscribe((0,Z.x)(ye,Fe=>(0,p.f)(ye,pe,()=>ye.next(Fe),we),()=>(0,p.f)(ye,pe,()=>ye.complete(),we),Fe=>(0,p.f)(ye,pe,()=>ye.error(Fe),we)))})}},5026:(Pt,We,R)=>{R.d(We,{R:()=>_e});var p=R(4482),H=R(5403);function Z(pe,we,be,ye,Fe){return(le,re)=>{let me=be,je=we,Ge=0;le.subscribe((0,H.x)(re,Ze=>{const mt=Ge++;je=me?pe(je,Ze,mt):(me=!0,Ze),ye&&re.next(je)},Fe&&(()=>{me&&re.next(je),re.complete()})))}}function _e(pe,we){return(0,p.e)(Z(pe,we,arguments.length>=2,!0))}},3099:(Pt,We,R)=>{R.d(We,{B:()=>we});var p=R(8996),H=R(5698),Z=R(7579),_e=R(930),pe=R(4482);function we(ye={}){const{connector:Fe=(()=>new Z.x),resetOnError:le=!0,resetOnComplete:re=!0,resetOnRefCountZero:me=!0}=ye;return je=>{let Ge=null,Ze=null,mt=null,Le=0,ke=!1,at=!1;const $=()=>{null==Ze||Ze.unsubscribe(),Ze=null},N=()=>{$(),Ge=mt=null,ke=at=!1},ne=()=>{const ue=Ge;N(),null==ue||ue.unsubscribe()};return(0,pe.e)((ue,Ee)=>{Le++,!at&&!ke&&$();const Ne=mt=null!=mt?mt:Fe();Ee.add(()=>{Le--,0===Le&&!at&&!ke&&(Ze=be(ne,me))}),Ne.subscribe(Ee),Ge||(Ge=new _e.Hp({next:Re=>Ne.next(Re),error:Re=>{at=!0,$(),Ze=be(N,le,Re),Ne.error(Re)},complete:()=>{ke=!0,$(),Ze=be(N,re),Ne.complete()}}),(0,p.D)(ue).subscribe(Ge))})(je)}}function be(ye,Fe,...le){return!0===Fe?(ye(),null):!1===Fe?null:Fe(...le).pipe((0,H.q)(1)).subscribe(()=>ye())}},8675:(Pt,We,R)=>{R.d(We,{O:()=>_e});var p=R(7272),H=R(3269),Z=R(4482);function _e(...pe){const we=(0,H.yG)(pe);return(0,Z.e)((be,ye)=>{(we?(0,p.z)(pe,be,we):(0,p.z)(pe,be)).subscribe(ye)})}},9468:(Pt,We,R)=>{R.d(We,{R:()=>H});var p=R(4482);function H(Z,_e=0){return(0,p.e)((pe,we)=>{we.add(Z.schedule(()=>pe.subscribe(we),_e))})}},3900:(Pt,We,R)=>{R.d(We,{w:()=>_e});var p=R(8421),H=R(4482),Z=R(5403);function _e(pe,we){return(0,H.e)((be,ye)=>{let Fe=null,le=0,re=!1;const me=()=>re&&!Fe&&ye.complete();be.subscribe((0,Z.x)(ye,je=>{null==Fe||Fe.unsubscribe();let Ge=0;const Ze=le++;(0,p.Xf)(pe(je,Ze)).subscribe(Fe=(0,Z.x)(ye,mt=>ye.next(we?we(je,mt,Ze,Ge++):mt),()=>{Fe=null,me()}))},()=>{re=!0,me()}))})}},5698:(Pt,We,R)=>{R.d(We,{q:()=>_e});var p=R(515),H=R(4482),Z=R(5403);function _e(pe){return pe<=0?()=>p.E:(0,H.e)((we,be)=>{let ye=0;we.subscribe((0,Z.x)(be,Fe=>{++ye<=pe&&(be.next(Fe),pe<=ye&&be.complete())}))})}},8505:(Pt,We,R)=>{R.d(We,{b:()=>pe});var p=R(576),H=R(4482),Z=R(5403),_e=R(4671);function pe(we,be,ye){const Fe=(0,p.m)(we)||be||ye?{next:we,error:be,complete:ye}:we;return Fe?(0,H.e)((le,re)=>{var me;null===(me=Fe.subscribe)||void 0===me||me.call(Fe);let je=!0;le.subscribe((0,Z.x)(re,Ge=>{var Ze;null===(Ze=Fe.next)||void 0===Ze||Ze.call(Fe,Ge),re.next(Ge)},()=>{var Ge;je=!1,null===(Ge=Fe.complete)||void 0===Ge||Ge.call(Fe),re.complete()},Ge=>{var Ze;je=!1,null===(Ze=Fe.error)||void 0===Ze||Ze.call(Fe,Ge),re.error(Ge)},()=>{var Ge,Ze;je&&(null===(Ge=Fe.unsubscribe)||void 0===Ge||Ge.call(Fe)),null===(Ze=Fe.finalize)||void 0===Ze||Ze.call(Fe)}))}):_e.y}},8068:(Pt,We,R)=>{R.d(We,{T:()=>_e});var p=R(6805),H=R(4482),Z=R(5403);function _e(we=pe){return(0,H.e)((be,ye)=>{let Fe=!1;be.subscribe((0,Z.x)(ye,le=>{Fe=!0,ye.next(le)},()=>Fe?ye.complete():ye.error(we())))})}function pe(){return new p.K}},4408:(Pt,We,R)=>{R.d(We,{o:()=>pe});var p=R(727);class H extends p.w0{constructor(be,ye){super()}schedule(be,ye=0){return this}}const Z={setInterval(we,be,...ye){const{delegate:Fe}=Z;return(null==Fe?void 0:Fe.setInterval)?Fe.setInterval(we,be,...ye):setInterval(we,be,...ye)},clearInterval(we){const{delegate:be}=Z;return((null==be?void 0:be.clearInterval)||clearInterval)(we)},delegate:void 0};var _e=R(8737);class pe extends H{constructor(be,ye){super(be,ye),this.scheduler=be,this.work=ye,this.pending=!1}schedule(be,ye=0){if(this.closed)return this;this.state=be;const Fe=this.id,le=this.scheduler;return null!=Fe&&(this.id=this.recycleAsyncId(le,Fe,ye)),this.pending=!0,this.delay=ye,this.id=this.id||this.requestAsyncId(le,this.id,ye),this}requestAsyncId(be,ye,Fe=0){return Z.setInterval(be.flush.bind(be,this),Fe)}recycleAsyncId(be,ye,Fe=0){if(null!=Fe&&this.delay===Fe&&!1===this.pending)return ye;Z.clearInterval(ye)}execute(be,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(be,ye);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(be,ye){let le,Fe=!1;try{this.work(be)}catch(re){Fe=!0,le=re||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:be,scheduler:ye}=this,{actions:Fe}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,_e.P)(Fe,this),null!=be&&(this.id=this.recycleAsyncId(ye,be,null)),this.delay=null,super.unsubscribe()}}}},7565:(Pt,We,R)=>{R.d(We,{v:()=>Z});var p=R(6063);class H{constructor(pe,we=H.now){this.schedulerActionCtor=pe,this.now=we}schedule(pe,we=0,be){return new this.schedulerActionCtor(this,pe).schedule(be,we)}}H.now=p.l.now;class Z extends H{constructor(pe,we=H.now){super(pe,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(pe){const{actions:we}=this;if(this._active)return void we.push(pe);let be;this._active=!0;do{if(be=pe.execute(pe.state,pe.delay))break}while(pe=we.shift());if(this._active=!1,be){for(;pe=we.shift();)pe.unsubscribe();throw be}}}},4986:(Pt,We,R)=>{R.d(We,{P:()=>_e,z:()=>Z});var p=R(4408);const Z=new(R(7565).v)(p.o),_e=Z},6063:(Pt,We,R)=>{R.d(We,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Pt,We,R)=>{R.d(We,{z:()=>p});const p={setTimeout(H,Z,..._e){const{delegate:pe}=p;return(null==pe?void 0:pe.setTimeout)?pe.setTimeout(H,Z,..._e):setTimeout(H,Z,..._e)},clearTimeout(H){const{delegate:Z}=p;return((null==Z?void 0:Z.clearTimeout)||clearTimeout)(H)},delegate:void 0}},2202:(Pt,We,R)=>{R.d(We,{h:()=>H});const H=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Pt,We,R)=>{R.d(We,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Pt,We,R)=>{R.d(We,{K:()=>H});const H=(0,R(3888).d)(Z=>function(){Z(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Pt,We,R)=>{R.d(We,{_6:()=>we,jO:()=>_e,yG:()=>pe});var p=R(576),H=R(3532);function Z(be){return be[be.length-1]}function _e(be){return(0,p.m)(Z(be))?be.pop():void 0}function pe(be){return(0,H.K)(Z(be))?be.pop():void 0}function we(be,ye){return"number"==typeof Z(be)?be.pop():ye}},4742:(Pt,We,R)=>{R.d(We,{D:()=>pe});const{isArray:p}=Array,{getPrototypeOf:H,prototype:Z,keys:_e}=Object;function pe(be){if(1===be.length){const ye=be[0];if(p(ye))return{args:ye,keys:null};if(function we(be){return be&&"object"==typeof be&&H(be)===Z}(ye)){const Fe=_e(ye);return{args:Fe.map(le=>ye[le]),keys:Fe}}}return{args:be,keys:null}}},8737:(Pt,We,R)=>{function p(H,Z){if(H){const _e=H.indexOf(Z);0<=_e&&H.splice(_e,1)}}R.d(We,{P:()=>p})},3888:(Pt,We,R)=>{function p(H){const _e=H(pe=>{Error.call(pe),pe.stack=(new Error).stack});return _e.prototype=Object.create(Error.prototype),_e.prototype.constructor=_e,_e}R.d(We,{d:()=>p})},1810:(Pt,We,R)=>{function p(H,Z){return H.reduce((_e,pe,we)=>(_e[pe]=Z[we],_e),{})}R.d(We,{n:()=>p})},2806:(Pt,We,R)=>{R.d(We,{O:()=>_e,x:()=>Z});var p=R(2416);let H=null;function Z(pe){if(p.v.useDeprecatedSynchronousErrorHandling){const we=!H;if(we&&(H={errorThrown:!1,error:null}),pe(),we){const{errorThrown:be,error:ye}=H;if(H=null,be)throw ye}}else pe()}function _e(pe){p.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=pe)}},9672:(Pt,We,R)=>{function p(H,Z,_e,pe=0,we=!1){const be=Z.schedule(function(){_e(),we?H.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(H.add(be),!we)return be}R.d(We,{f:()=>p})},4671:(Pt,We,R)=>{function p(H){return H}R.d(We,{y:()=>p})},1144:(Pt,We,R)=>{R.d(We,{z:()=>p});const p=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(Pt,We,R)=>{R.d(We,{D:()=>H});var p=R(576);function H(Z){return Symbol.asyncIterator&&(0,p.m)(null==Z?void 0:Z[Symbol.asyncIterator])}},576:(Pt,We,R)=>{function p(H){return"function"==typeof H}R.d(We,{m:()=>p})},3670:(Pt,We,R)=>{R.d(We,{c:()=>Z});var p=R(8822),H=R(576);function Z(_e){return(0,H.m)(_e[p.L])}},6495:(Pt,We,R)=>{R.d(We,{T:()=>Z});var p=R(2202),H=R(576);function Z(_e){return(0,H.m)(null==_e?void 0:_e[p.h])}},8239:(Pt,We,R)=>{R.d(We,{t:()=>H});var p=R(576);function H(Z){return(0,p.m)(null==Z?void 0:Z.then)}},3260:(Pt,We,R)=>{R.d(We,{L:()=>_e,Q:()=>Z});var p=R(655),H=R(576);function Z(pe){return(0,p.FC)(this,arguments,function*(){const be=pe.getReader();try{for(;;){const{value:ye,done:Fe}=yield(0,p.qq)(be.read());if(Fe)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ye)}}finally{be.releaseLock()}})}function _e(pe){return(0,H.m)(null==pe?void 0:pe.getReader)}},3532:(Pt,We,R)=>{R.d(We,{K:()=>H});var p=R(576);function H(Z){return Z&&(0,p.m)(Z.schedule)}},4482:(Pt,We,R)=>{R.d(We,{A:()=>H,e:()=>Z});var p=R(576);function H(_e){return(0,p.m)(null==_e?void 0:_e.lift)}function Z(_e){return pe=>{if(H(pe))return pe.lift(function(we){try{return _e(we,this)}catch(be){this.error(be)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Pt,We,R)=>{R.d(We,{Z:()=>_e});var p=R(4004);const{isArray:H}=Array;function _e(pe){return(0,p.U)(we=>function Z(pe,we){return H(we)?pe(...we):pe(we)}(pe,we))}},5032:(Pt,We,R)=>{function p(){}R.d(We,{Z:()=>p})},9635:(Pt,We,R)=>{R.d(We,{U:()=>Z,z:()=>H});var p=R(4671);function H(..._e){return Z(_e)}function Z(_e){return 0===_e.length?p.y:1===_e.length?_e[0]:function(we){return _e.reduce((be,ye)=>ye(be),we)}}},7849:(Pt,We,R)=>{R.d(We,{h:()=>Z});var p=R(2416),H=R(3410);function Z(_e){H.z.setTimeout(()=>{const{onUnhandledError:pe}=p.v;if(!pe)throw _e;pe(_e)})}},4532:(Pt,We,R)=>{function p(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(We,{z:()=>p})},655:(Pt,We,R)=>{function _e(fe,X){var Oe={};for(var ae in fe)Object.prototype.hasOwnProperty.call(fe,ae)&&X.indexOf(ae)<0&&(Oe[ae]=fe[ae]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var $e=0;for(ae=Object.getOwnPropertySymbols(fe);$e<ae.length;$e++)X.indexOf(ae[$e])<0&&Object.prototype.propertyIsEnumerable.call(fe,ae[$e])&&(Oe[ae[$e]]=fe[ae[$e]])}return Oe}function pe(fe,X,Oe,ae){var _t,$e=arguments.length,Be=$e<3?X:null===ae?ae=Object.getOwnPropertyDescriptor(X,Oe):ae;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Be=Reflect.decorate(fe,X,Oe,ae);else for(var vt=fe.length-1;vt>=0;vt--)(_t=fe[vt])&&(Be=($e<3?_t(Be):$e>3?_t(X,Oe,Be):_t(X,Oe))||Be);return $e>3&&Be&&Object.defineProperty(X,Oe,Be),Be}function ye(fe,X,Oe,ae){return new(Oe||(Oe=Promise))(function(Be,_t){function vt(bt){try{gt(ae.next(bt))}catch(Ut){_t(Ut)}}function Ot(bt){try{gt(ae.throw(bt))}catch(Ut){_t(Ut)}}function gt(bt){bt.done?Be(bt.value):function $e(Be){return Be instanceof Oe?Be:new Oe(function(_t){_t(Be)})}(bt.value).then(vt,Ot)}gt((ae=ae.apply(fe,X||[])).next())})}function Le(fe){return this instanceof Le?(this.v=fe,this):new Le(fe)}function ke(fe,X,Oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,ae=Oe.apply(fe,X||[]),Be=[];return $e={},_t("next"),_t("throw"),_t("return"),$e[Symbol.asyncIterator]=function(){return this},$e;function _t(St){ae[St]&&($e[St]=function(Mt){return new Promise(function(ht,mn){Be.push([St,Mt,ht,mn])>1||vt(St,Mt)})})}function vt(St,Mt){try{!function Ot(St){St.value instanceof Le?Promise.resolve(St.value.v).then(gt,bt):Ut(Be[0][2],St)}(ae[St](Mt))}catch(ht){Ut(Be[0][3],ht)}}function gt(St){vt("next",St)}function bt(St){vt("throw",St)}function Ut(St,Mt){St(Mt),Be.shift(),Be.length&&vt(Be[0][0],Be[0][1])}}function $(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,X=fe[Symbol.asyncIterator];return X?X.call(fe):(fe=function me(fe){var X="function"==typeof Symbol&&Symbol.iterator,Oe=X&&fe[X],ae=0;if(Oe)return Oe.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&ae>=fe.length&&(fe=void 0),{value:fe&&fe[ae++],done:!fe}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),Oe={},ae("next"),ae("throw"),ae("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe);function ae(Be){Oe[Be]=fe[Be]&&function(_t){return new Promise(function(vt,Ot){!function $e(Be,_t,vt,Ot){Promise.resolve(Ot).then(function(gt){Be({value:gt,done:vt})},_t)}(vt,Ot,(_t=fe[Be](_t)).done,_t.value)})}}}R.d(We,{FC:()=>ke,KL:()=>$,_T:()=>_e,gn:()=>pe,mG:()=>ye,qq:()=>Le})},9808:(Pt,We,R)=>{R.d(We,{Do:()=>N,EM:()=>ii,HT:()=>pe,JF:()=>ur,K0:()=>be,Mx:()=>ni,O5:()=>Sr,Ov:()=>qe,PM:()=>Or,S$:()=>Le,Ts:()=>ys,V_:()=>le,Ye:()=>ne,Zx:()=>_r,b0:()=>$,bD:()=>Ki,ez:()=>Ci,lw:()=>ye,mk:()=>Fi,mr:()=>at,q:()=>Z,sg:()=>Fn,uU:()=>Ln,w_:()=>we});var p=R(5e3);let H=null;function Z(){return H}function pe(x){H||(H=x)}class we{}const be=new p.OlP("DocumentToken");let ye=(()=>{class x{historyGo(M){throw new Error("Not implemented")}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275prov=p.Yz7({token:x,factory:function(){return function Fe(){return(0,p.LFG)(re)}()},providedIn:"platform"}),x})();const le=new p.OlP("Location Initialized");let re=(()=>{class x extends ye{constructor(M){super(),this._doc=M,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState(M){const Y=Z().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",M,!1),()=>Y.removeEventListener("popstate",M)}onHashChange(M){const Y=Z().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",M,!1),()=>Y.removeEventListener("hashchange",M)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(M){this.location.pathname=M}pushState(M,Y,Ie){me()?this._history.pushState(M,Y,Ie):this.location.hash=Ie}replaceState(M,Y,Ie){me()?this._history.replaceState(M,Y,Ie):this.location.hash=Ie}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return x.\u0275fac=function(M){return new(M||x)(p.LFG(be))},x.\u0275prov=p.Yz7({token:x,factory:function(){return function je(){return new re((0,p.LFG)(be))}()},providedIn:"platform"}),x})();function me(){return!!window.history.pushState}function Ge(x,G){if(0==x.length)return G;if(0==G.length)return x;let M=0;return x.endsWith("/")&&M++,G.startsWith("/")&&M++,2==M?x+G.substring(1):1==M?x+G:x+"/"+G}function Ze(x){const G=x.match(/#|\?|$/),M=G&&G.index||x.length;return x.slice(0,M-("/"===x[M-1]?1:0))+x.slice(M)}function mt(x){return x&&"?"!==x[0]?"?"+x:x}let Le=(()=>{class x{historyGo(M){throw new Error("Not implemented")}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275prov=p.Yz7({token:x,factory:function(){return function ke(x){const G=(0,p.LFG)(be).location;return new $((0,p.LFG)(ye),G&&G.origin||"")}()},providedIn:"root"}),x})();const at=new p.OlP("appBaseHref");let $=(()=>{class x extends Le{constructor(M,Y){if(super(),this._platformLocation=M,this._removeListenerFns=[],null==Y&&(Y=this._platformLocation.getBaseHrefFromDOM()),null==Y)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Y}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return Ge(this._baseHref,M)}path(M=!1){const Y=this._platformLocation.pathname+mt(this._platformLocation.search),Ie=this._platformLocation.hash;return Ie&&M?`${Y}${Ie}`:Y}pushState(M,Y,Ie,Je){const tt=this.prepareExternalUrl(Ie+mt(Je));this._platformLocation.pushState(M,Y,tt)}replaceState(M,Y,Ie,Je){const tt=this.prepareExternalUrl(Ie+mt(Je));this._platformLocation.replaceState(M,Y,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(M=0){var Y,Ie;null===(Ie=(Y=this._platformLocation).historyGo)||void 0===Ie||Ie.call(Y,M)}}return x.\u0275fac=function(M){return new(M||x)(p.LFG(ye),p.LFG(at,8))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac}),x})(),N=(()=>{class x extends Le{constructor(M,Y){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(M){const Y=Ge(this._baseHref,M);return Y.length>0?"#"+Y:Y}pushState(M,Y,Ie,Je){let tt=this.prepareExternalUrl(Ie+mt(Je));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.pushState(M,Y,tt)}replaceState(M,Y,Ie,Je){let tt=this.prepareExternalUrl(Ie+mt(Je));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.replaceState(M,Y,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(M=0){var Y,Ie;null===(Ie=(Y=this._platformLocation).historyGo)||void 0===Ie||Ie.call(Y,M)}}return x.\u0275fac=function(M){return new(M||x)(p.LFG(ye),p.LFG(at,8))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac}),x})(),ne=(()=>{class x{constructor(M,Y){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=M;const Ie=this._platformStrategy.getBaseHref();this._platformLocation=Y,this._baseHref=Ze(Ne(Ie)),this._platformStrategy.onPopState(Je=>{this._subject.emit({url:this.path(!0),pop:!0,state:Je.state,type:Je.type})})}path(M=!1){return this.normalize(this._platformStrategy.path(M))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(M,Y=""){return this.path()==this.normalize(M+mt(Y))}normalize(M){return x.stripTrailingSlash(function Ee(x,G){return x&&G.startsWith(x)?G.substring(x.length):G}(this._baseHref,Ne(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._platformStrategy.prepareExternalUrl(M)}go(M,Y="",Ie=null){this._platformStrategy.pushState(Ie,"",M,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+mt(Y)),Ie)}replaceState(M,Y="",Ie=null){this._platformStrategy.replaceState(Ie,"",M,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+mt(Y)),Ie)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(M=0){var Y,Ie;null===(Ie=(Y=this._platformStrategy).historyGo)||void 0===Ie||Ie.call(Y,M)}onUrlChange(M){this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)}))}_notifyUrlChangeListeners(M="",Y){this._urlChangeListeners.forEach(Ie=>Ie(M,Y))}subscribe(M,Y,Ie){return this._subject.subscribe({next:M,error:Y,complete:Ie})}}return x.normalizeQueryParams=mt,x.joinWithSlash=Ge,x.stripTrailingSlash=Ze,x.\u0275fac=function(M){return new(M||x)(p.LFG(Le),p.LFG(ye))},x.\u0275prov=p.Yz7({token:x,factory:function(){return function ue(){return new ne((0,p.LFG)(Le),(0,p.LFG)(ye))}()},providedIn:"root"}),x})();function Ne(x){return x.replace(/\/index.html$/,"")}var fe=(()=>((fe=fe||{})[fe.Decimal=0]="Decimal",fe[fe.Percent=1]="Percent",fe[fe.Currency=2]="Currency",fe[fe.Scientific=3]="Scientific",fe))(),Oe=(()=>((Oe=Oe||{})[Oe.Format=0]="Format",Oe[Oe.Standalone=1]="Standalone",Oe))(),ae=(()=>((ae=ae||{})[ae.Narrow=0]="Narrow",ae[ae.Abbreviated=1]="Abbreviated",ae[ae.Wide=2]="Wide",ae[ae.Short=3]="Short",ae))(),$e=(()=>(($e=$e||{})[$e.Short=0]="Short",$e[$e.Medium=1]="Medium",$e[$e.Long=2]="Long",$e[$e.Full=3]="Full",$e))(),Be=(()=>((Be=Be||{})[Be.Decimal=0]="Decimal",Be[Be.Group=1]="Group",Be[Be.List=2]="List",Be[Be.PercentSign=3]="PercentSign",Be[Be.PlusSign=4]="PlusSign",Be[Be.MinusSign=5]="MinusSign",Be[Be.Exponential=6]="Exponential",Be[Be.SuperscriptingExponent=7]="SuperscriptingExponent",Be[Be.PerMille=8]="PerMille",Be[Be.Infinity=9]="Infinity",Be[Be.NaN=10]="NaN",Be[Be.TimeSeparator=11]="TimeSeparator",Be[Be.CurrencyDecimal=12]="CurrencyDecimal",Be[Be.CurrencyGroup=13]="CurrencyGroup",Be))();function ht(x,G){return wn((0,p.cg1)(x)[p.wAp.DateFormat],G)}function mn(x,G){return wn((0,p.cg1)(x)[p.wAp.TimeFormat],G)}function _n(x,G){return wn((0,p.cg1)(x)[p.wAp.DateTimeFormat],G)}function pn(x,G){const M=(0,p.cg1)(x),Y=M[p.wAp.NumberSymbols][G];if(void 0===Y){if(G===Be.CurrencyDecimal)return M[p.wAp.NumberSymbols][Be.Decimal];if(G===Be.CurrencyGroup)return M[p.wAp.NumberSymbols][Be.Group]}return Y}function An(x){if(!x[p.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${x[p.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function wn(x,G){for(let M=G;M>-1;M--)if(void 0!==x[M])return x[M];throw new Error("Locale data API: locale data undefined")}function jt(x){const[G,M]=x.split(":");return{hours:+G,minutes:+M}}const Cr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yi={},ei=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Rn=(()=>((Rn=Rn||{})[Rn.Short=0]="Short",Rn[Rn.ShortGMT=1]="ShortGMT",Rn[Rn.Long=2]="Long",Rn[Rn.Extended=3]="Extended",Rn))(),Vt=(()=>((Vt=Vt||{})[Vt.FullYear=0]="FullYear",Vt[Vt.Month=1]="Month",Vt[Vt.Date=2]="Date",Vt[Vt.Hours=3]="Hours",Vt[Vt.Minutes=4]="Minutes",Vt[Vt.Seconds=5]="Seconds",Vt[Vt.FractionalSeconds=6]="FractionalSeconds",Vt[Vt.Day=7]="Day",Vt))(),Kt=(()=>((Kt=Kt||{})[Kt.DayPeriods=0]="DayPeriods",Kt[Kt.Days=1]="Days",Kt[Kt.Months=2]="Months",Kt[Kt.Eras=3]="Eras",Kt))();function or(x,G,M,Y){let Ie=function ge(x){if(Me(x))return x;if("number"==typeof x&&!isNaN(x))return new Date(x);if("string"==typeof x){if(x=x.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(x)){const[Ie,Je=1,tt=1]=x.split("-").map(Nt=>+Nt);return br(Ie,Je-1,tt)}const M=parseFloat(x);if(!isNaN(x-M))return new Date(M);let Y;if(Y=x.match(Cr))return function oe(x){const G=new Date(0);let M=0,Y=0;const Ie=x[8]?G.setUTCFullYear:G.setFullYear,Je=x[8]?G.setUTCHours:G.setHours;x[9]&&(M=Number(x[9]+x[10]),Y=Number(x[9]+x[11])),Ie.call(G,Number(x[1]),Number(x[2])-1,Number(x[3]));const tt=Number(x[4]||0)-M,Nt=Number(x[5]||0)-Y,Qn=Number(x[6]||0),Hn=Math.floor(1e3*parseFloat("0."+(x[7]||0)));return Je.call(G,tt,Nt,Qn,Hn),G}(Y)}const G=new Date(x);if(!Me(G))throw new Error(`Unable to convert "${x}" into a date`);return G}(x);G=On(M,G)||G;let Nt,tt=[];for(;G;){if(Nt=ei.exec(G),!Nt){tt.push(G);break}{tt=tt.concat(Nt.slice(1));const Cn=tt.pop();if(!Cn)break;G=Cn}}let Qn=Ie.getTimezoneOffset();Y&&(Qn=He(Y,Qn),Ie=function Ae(x,G,M){const Y=M?-1:1,Ie=x.getTimezoneOffset();return function xt(x,G){return(x=new Date(x.getTime())).setMinutes(x.getMinutes()+G),x}(x,Y*(He(G,Ie)-Ie))}(Ie,Y,!0));let Hn="";return tt.forEach(Cn=>{const Mn=function Qe(x){if(Ce[x])return Ce[x];let G;switch(x){case"G":case"GG":case"GGG":G=En(Kt.Eras,ae.Abbreviated);break;case"GGGG":G=En(Kt.Eras,ae.Wide);break;case"GGGGG":G=En(Kt.Eras,ae.Narrow);break;case"y":G=Qt(Vt.FullYear,1,0,!1,!0);break;case"yy":G=Qt(Vt.FullYear,2,0,!0,!0);break;case"yyy":G=Qt(Vt.FullYear,3,0,!1,!0);break;case"yyyy":G=Qt(Vt.FullYear,4,0,!1,!0);break;case"Y":G=te(1);break;case"YY":G=te(2,!0);break;case"YYY":G=te(3);break;case"YYYY":G=te(4);break;case"M":case"L":G=Qt(Vt.Month,1,1);break;case"MM":case"LL":G=Qt(Vt.Month,2,1);break;case"MMM":G=En(Kt.Months,ae.Abbreviated);break;case"MMMM":G=En(Kt.Months,ae.Wide);break;case"MMMMM":G=En(Kt.Months,ae.Narrow);break;case"LLL":G=En(Kt.Months,ae.Abbreviated,Oe.Standalone);break;case"LLLL":G=En(Kt.Months,ae.Wide,Oe.Standalone);break;case"LLLLL":G=En(Kt.Months,ae.Narrow,Oe.Standalone);break;case"w":G=he(1);break;case"ww":G=he(2);break;case"W":G=he(1,!0);break;case"d":G=Qt(Vt.Date,1);break;case"dd":G=Qt(Vt.Date,2);break;case"c":case"cc":G=Qt(Vt.Day,1);break;case"ccc":G=En(Kt.Days,ae.Abbreviated,Oe.Standalone);break;case"cccc":G=En(Kt.Days,ae.Wide,Oe.Standalone);break;case"ccccc":G=En(Kt.Days,ae.Narrow,Oe.Standalone);break;case"cccccc":G=En(Kt.Days,ae.Short,Oe.Standalone);break;case"E":case"EE":case"EEE":G=En(Kt.Days,ae.Abbreviated);break;case"EEEE":G=En(Kt.Days,ae.Wide);break;case"EEEEE":G=En(Kt.Days,ae.Narrow);break;case"EEEEEE":G=En(Kt.Days,ae.Short);break;case"a":case"aa":case"aaa":G=En(Kt.DayPeriods,ae.Abbreviated);break;case"aaaa":G=En(Kt.DayPeriods,ae.Wide);break;case"aaaaa":G=En(Kt.DayPeriods,ae.Narrow);break;case"b":case"bb":case"bbb":G=En(Kt.DayPeriods,ae.Abbreviated,Oe.Standalone,!0);break;case"bbbb":G=En(Kt.DayPeriods,ae.Wide,Oe.Standalone,!0);break;case"bbbbb":G=En(Kt.DayPeriods,ae.Narrow,Oe.Standalone,!0);break;case"B":case"BB":case"BBB":G=En(Kt.DayPeriods,ae.Abbreviated,Oe.Format,!0);break;case"BBBB":G=En(Kt.DayPeriods,ae.Wide,Oe.Format,!0);break;case"BBBBB":G=En(Kt.DayPeriods,ae.Narrow,Oe.Format,!0);break;case"h":G=Qt(Vt.Hours,1,-12);break;case"hh":G=Qt(Vt.Hours,2,-12);break;case"H":G=Qt(Vt.Hours,1);break;case"HH":G=Qt(Vt.Hours,2);break;case"m":G=Qt(Vt.Minutes,1);break;case"mm":G=Qt(Vt.Minutes,2);break;case"s":G=Qt(Vt.Seconds,1);break;case"ss":G=Qt(Vt.Seconds,2);break;case"S":G=Qt(Vt.FractionalSeconds,1);break;case"SS":G=Qt(Vt.FractionalSeconds,2);break;case"SSS":G=Qt(Vt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":G=dt(Rn.Short);break;case"ZZZZZ":G=dt(Rn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":G=dt(Rn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":G=dt(Rn.Long);break;default:return null}return Ce[x]=G,G}(Cn);Hn+=Mn?Mn(Ie,M,Qn):"''"===Cn?"'":Cn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Hn}function br(x,G,M){const Y=new Date(0);return Y.setFullYear(x,G,M),Y.setHours(0,0,0),Y}function On(x,G){const M=function vt(x){return(0,p.cg1)(x)[p.wAp.LocaleId]}(x);if(yi[M]=yi[M]||{},yi[M][G])return yi[M][G];let Y="";switch(G){case"shortDate":Y=ht(x,$e.Short);break;case"mediumDate":Y=ht(x,$e.Medium);break;case"longDate":Y=ht(x,$e.Long);break;case"fullDate":Y=ht(x,$e.Full);break;case"shortTime":Y=mn(x,$e.Short);break;case"mediumTime":Y=mn(x,$e.Medium);break;case"longTime":Y=mn(x,$e.Long);break;case"fullTime":Y=mn(x,$e.Full);break;case"short":const Ie=On(x,"shortTime"),Je=On(x,"shortDate");Y=nr(_n(x,$e.Short),[Ie,Je]);break;case"medium":const tt=On(x,"mediumTime"),Nt=On(x,"mediumDate");Y=nr(_n(x,$e.Medium),[tt,Nt]);break;case"long":const Qn=On(x,"longTime"),Hn=On(x,"longDate");Y=nr(_n(x,$e.Long),[Qn,Hn]);break;case"full":const Cn=On(x,"fullTime"),Mn=On(x,"fullDate");Y=nr(_n(x,$e.Full),[Cn,Mn])}return Y&&(yi[M][G]=Y),Y}function nr(x,G){return G&&(x=x.replace(/\{([^}]+)}/g,function(M,Y){return null!=G&&Y in G?G[Y]:M})),x}function zn(x,G,M="-",Y,Ie){let Je="";(x<0||Ie&&x<=0)&&(Ie?x=1-x:(x=-x,Je=M));let tt=String(x);for(;tt.length<G;)tt="0"+tt;return Y&&(tt=tt.substr(tt.length-G)),Je+tt}function Qt(x,G,M=0,Y=!1,Ie=!1){return function(Je,tt){let Nt=function pr(x,G){switch(x){case Vt.FullYear:return G.getFullYear();case Vt.Month:return G.getMonth();case Vt.Date:return G.getDate();case Vt.Hours:return G.getHours();case Vt.Minutes:return G.getMinutes();case Vt.Seconds:return G.getSeconds();case Vt.FractionalSeconds:return G.getMilliseconds();case Vt.Day:return G.getDay();default:throw new Error(`Unknown DateType value "${x}".`)}}(x,Je);if((M>0||Nt>-M)&&(Nt+=M),x===Vt.Hours)0===Nt&&-12===M&&(Nt=12);else if(x===Vt.FractionalSeconds)return function fr(x,G){return zn(x,3).substr(0,G)}(Nt,G);const Qn=pn(tt,Be.MinusSign);return zn(Nt,G,Qn,Y,Ie)}}function En(x,G,M=Oe.Format,Y=!1){return function(Ie,Je){return function kt(x,G,M,Y,Ie,Je){switch(M){case Kt.Months:return function bt(x,G,M){const Y=(0,p.cg1)(x),Je=wn([Y[p.wAp.MonthsFormat],Y[p.wAp.MonthsStandalone]],G);return wn(Je,M)}(G,Ie,Y)[x.getMonth()];case Kt.Days:return function gt(x,G,M){const Y=(0,p.cg1)(x),Je=wn([Y[p.wAp.DaysFormat],Y[p.wAp.DaysStandalone]],G);return wn(Je,M)}(G,Ie,Y)[x.getDay()];case Kt.DayPeriods:const tt=x.getHours(),Nt=x.getMinutes();if(Je){const Hn=function kn(x){const G=(0,p.cg1)(x);return An(G),(G[p.wAp.ExtraData][2]||[]).map(Y=>"string"==typeof Y?jt(Y):[jt(Y[0]),jt(Y[1])])}(G),Cn=function Bt(x,G,M){const Y=(0,p.cg1)(x);An(Y);const Je=wn([Y[p.wAp.ExtraData][0],Y[p.wAp.ExtraData][1]],G)||[];return wn(Je,M)||[]}(G,Ie,Y),Mn=Hn.findIndex(Pr=>{if(Array.isArray(Pr)){const[sr,gr]=Pr,k=tt>=sr.hours&&Nt>=sr.minutes,A=tt<gr.hours||tt===gr.hours&&Nt<gr.minutes;if(sr.hours<gr.hours){if(k&&A)return!0}else if(k||A)return!0}else if(Pr.hours===tt&&Pr.minutes===Nt)return!0;return!1});if(-1!==Mn)return Cn[Mn]}return function Ot(x,G,M){const Y=(0,p.cg1)(x),Je=wn([Y[p.wAp.DayPeriodsFormat],Y[p.wAp.DayPeriodsStandalone]],G);return wn(Je,M)}(G,Ie,Y)[tt<12?0:1];case Kt.Eras:return function Ut(x,G){return wn((0,p.cg1)(x)[p.wAp.Eras],G)}(G,Y)[x.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${M}`)}}(Ie,Je,x,G,M,Y)}}function dt(x){return function(G,M,Y){const Ie=-1*Y,Je=pn(M,Be.MinusSign),tt=Ie>0?Math.floor(Ie/60):Math.ceil(Ie/60);switch(x){case Rn.Short:return(Ie>=0?"+":"")+zn(tt,2,Je)+zn(Math.abs(Ie%60),2,Je);case Rn.ShortGMT:return"GMT"+(Ie>=0?"+":"")+zn(tt,1,Je);case Rn.Long:return"GMT"+(Ie>=0?"+":"")+zn(tt,2,Je)+":"+zn(Math.abs(Ie%60),2,Je);case Rn.Extended:return 0===Y?"Z":(Ie>=0?"+":"")+zn(tt,2,Je)+":"+zn(Math.abs(Ie%60),2,Je);default:throw new Error(`Unknown zone width "${x}"`)}}}function Jt(x){return br(x.getFullYear(),x.getMonth(),x.getDate()+(4-x.getDay()))}function he(x,G=!1){return function(M,Y){let Ie;if(G){const Je=new Date(M.getFullYear(),M.getMonth(),1).getDay()-1,tt=M.getDate();Ie=1+Math.floor((tt+Je)/7)}else{const Je=Jt(M),tt=function In(x){const G=br(x,0,1).getDay();return br(x,0,1+(G<=4?4:11)-G)}(Je.getFullYear()),Nt=Je.getTime()-tt.getTime();Ie=1+Math.round(Nt/6048e5)}return zn(Ie,x,pn(Y,Be.MinusSign))}}function te(x,G=!1){return function(M,Y){return zn(Jt(M).getFullYear(),x,pn(Y,Be.MinusSign),G)}}const Ce={};function He(x,G){x=x.replace(/:/g,"");const M=Date.parse("Jan 01, 1970 00:00:00 "+x)/6e4;return isNaN(M)?G:M}function Me(x){return x instanceof Date&&!isNaN(x.valueOf())}const nt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ti(x){const G=parseInt(x);if(isNaN(G))throw new Error("Invalid integer literal when parsing "+x);return G}function ni(x,G){G=encodeURIComponent(G);for(const M of x.split(";")){const Y=M.indexOf("="),[Ie,Je]=-1==Y?[M,""]:[M.slice(0,Y),M.slice(Y+1)];if(Ie.trim()===G)return decodeURIComponent(Je)}return null}let Fi=(()=>{class x{constructor(M,Y,Ie,Je){this._iterableDiffers=M,this._keyValueDiffers=Y,this._ngEl=Ie,this._renderer=Je,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(M){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof M?M.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(M){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof M?M.split(/\s+/):M,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const M=this._iterableDiffer.diff(this._rawClass);M&&this._applyIterableChanges(M)}else if(this._keyValueDiffer){const M=this._keyValueDiffer.diff(this._rawClass);M&&this._applyKeyValueChanges(M)}}_applyKeyValueChanges(M){M.forEachAddedItem(Y=>this._toggleClass(Y.key,Y.currentValue)),M.forEachChangedItem(Y=>this._toggleClass(Y.key,Y.currentValue)),M.forEachRemovedItem(Y=>{Y.previousValue&&this._toggleClass(Y.key,!1)})}_applyIterableChanges(M){M.forEachAddedItem(Y=>{if("string"!=typeof Y.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(Y.item)}`);this._toggleClass(Y.item,!0)}),M.forEachRemovedItem(Y=>this._toggleClass(Y.item,!1))}_applyClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(Y=>this._toggleClass(Y,!0)):Object.keys(M).forEach(Y=>this._toggleClass(Y,!!M[Y])))}_removeClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(Y=>this._toggleClass(Y,!1)):Object.keys(M).forEach(Y=>this._toggleClass(Y,!1)))}_toggleClass(M,Y){(M=M.trim())&&M.split(/\s+/g).forEach(Ie=>{Y?this._renderer.addClass(this._ngEl.nativeElement,Ie):this._renderer.removeClass(this._ngEl.nativeElement,Ie)})}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),x})();class Ar{constructor(G,M,Y,Ie){this.$implicit=G,this.ngForOf=M,this.index=Y,this.count=Ie}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fn=(()=>{class x{constructor(M,Y,Ie){this._viewContainer=M,this._template=Y,this._differs=Ie,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const Y=this._viewContainer;M.forEachOperation((Ie,Je,tt)=>{if(null==Ie.previousIndex)Y.createEmbeddedView(this._template,new Ar(Ie.item,this._ngForOf,-1,-1),null===tt?void 0:tt);else if(null==tt)Y.remove(null===Je?void 0:Je);else if(null!==Je){const Nt=Y.get(Je);Y.move(Nt,tt),Kr(Nt,Ie)}});for(let Ie=0,Je=Y.length;Ie<Je;Ie++){const Nt=Y.get(Ie).context;Nt.index=Ie,Nt.count=Je,Nt.ngForOf=this._ngForOf}M.forEachIdentityChange(Ie=>{Kr(Y.get(Ie.currentIndex),Ie)})}static ngTemplateContextGuard(M,Y){return!0}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),x})();function Kr(x,G){x.context.$implicit=G.item}let Sr=(()=>{class x{constructor(M,Y){this._viewContainer=M,this._context=new Zn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){os("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){os("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,Y){return!0}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.s_b),p.Y36(p.Rgc))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),x})();class Zn{constructor(){this.$implicit=null,this.ngIf=null}}function os(x,G){if(G&&!G.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,p.AaK)(G)}'.`)}function rr(x,G){return new p.vHH(2100,"")}class Ss{createSubscription(G,M){return G.subscribe({next:M,error:Y=>{throw Y}})}dispose(G){G.unsubscribe()}onDestroy(G){G.unsubscribe()}}class Ms{createSubscription(G,M){return G.then(M,Y=>{throw Y})}dispose(G){}onDestroy(G){}}const Pe=new Ms,xe=new Ss;let qe=(()=>{class x{constructor(M){this._ref=M,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(M){return this._obj?M!==this._obj?(this._dispose(),this.transform(M)):this._latestValue:(M&&this._subscribe(M),this._latestValue)}_subscribe(M){this._obj=M,this._strategy=this._selectStrategy(M),this._subscription=this._strategy.createSubscription(M,Y=>this._updateLatestValue(M,Y))}_selectStrategy(M){if((0,p.QGY)(M))return Pe;if((0,p.F4k)(M))return xe;throw rr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(M,Y){M===this._obj&&(this._latestValue=Y,this._ref.markForCheck())}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.sBO,16))},x.\u0275pipe=p.Yjl({name:"async",type:x,pure:!1}),x})();const Rr=new p.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Ln=(()=>{class x{constructor(M,Y){this.locale=M,this.defaultTimezone=Y}transform(M,Y="mediumDate",Ie,Je){var tt;if(null==M||""===M||M!=M)return null;try{return or(M,Y,Je||this.locale,null!==(tt=null!=Ie?Ie:this.defaultTimezone)&&void 0!==tt?tt:void 0)}catch(Nt){throw rr()}}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.soG,16),p.Y36(Rr,24))},x.\u0275pipe=p.Yjl({name:"date",type:x,pure:!0}),x})(),ys=(()=>{class x{transform(M){return JSON.stringify(M,null,2)}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275pipe=p.Yjl({name:"json",type:x,pure:!1}),x})(),_r=(()=>{class x{constructor(M){this._locale=M}transform(M,Y,Ie){if(!function us(x){return!(null==x||""===x||x!=x)}(M))return null;Ie=Ie||this._locale;try{return function It(x,G,M){return function Yr(x,G,M,Y,Ie,Je,tt=!1){let Nt="",Qn=!1;if(isFinite(x)){let Hn=function di(x){let Y,Ie,Je,tt,Nt,G=Math.abs(x)+"",M=0;for((Ie=G.indexOf("."))>-1&&(G=G.replace(".","")),(Je=G.search(/e/i))>0?(Ie<0&&(Ie=Je),Ie+=+G.slice(Je+1),G=G.substring(0,Je)):Ie<0&&(Ie=G.length),Je=0;"0"===G.charAt(Je);Je++);if(Je===(Nt=G.length))Y=[0],Ie=1;else{for(Nt--;"0"===G.charAt(Nt);)Nt--;for(Ie-=Je,Y=[],tt=0;Je<=Nt;Je++,tt++)Y[tt]=Number(G.charAt(Je))}return Ie>22&&(Y=Y.splice(0,21),M=Ie-1,Ie=1),{digits:Y,exponent:M,integerLen:Ie}}(x);tt&&(Hn=function vr(x){if(0===x.digits[0])return x;const G=x.digits.length-x.integerLen;return x.exponent?x.exponent+=2:(0===G?x.digits.push(0,0):1===G&&x.digits.push(0),x.integerLen+=2),x}(Hn));let Cn=G.minInt,Mn=G.minFrac,Pr=G.maxFrac;if(Je){const q=Je.match(nt);if(null===q)throw new Error(`${Je} is not a valid digit info`);const rt=q[1],tn=q[3],mr=q[5];null!=rt&&(Cn=ti(rt)),null!=tn&&(Mn=ti(tn)),null!=mr?Pr=ti(mr):null!=tn&&Mn>Pr&&(Pr=Mn)}!function Tr(x,G,M){if(G>M)throw new Error(`The minimum number of digits after fraction (${G}) is higher than the maximum (${M}).`);let Y=x.digits,Ie=Y.length-x.integerLen;const Je=Math.min(Math.max(G,Ie),M);let tt=Je+x.integerLen,Nt=Y[tt];if(tt>0){Y.splice(Math.max(x.integerLen,tt));for(let Mn=tt;Mn<Y.length;Mn++)Y[Mn]=0}else{Ie=Math.max(0,Ie),x.integerLen=1,Y.length=Math.max(1,tt=Je+1),Y[0]=0;for(let Mn=1;Mn<tt;Mn++)Y[Mn]=0}if(Nt>=5)if(tt-1<0){for(let Mn=0;Mn>tt;Mn--)Y.unshift(0),x.integerLen++;Y.unshift(1),x.integerLen++}else Y[tt-1]++;for(;Ie<Math.max(0,Je);Ie++)Y.push(0);let Qn=0!==Je;const Hn=G+x.integerLen,Cn=Y.reduceRight(function(Mn,Pr,sr,gr){return gr[sr]=(Pr+=Mn)<10?Pr:Pr-10,Qn&&(0===gr[sr]&&sr>=Hn?gr.pop():Qn=!1),Pr>=10?1:0},0);Cn&&(Y.unshift(Cn),x.integerLen++)}(Hn,Mn,Pr);let sr=Hn.digits,gr=Hn.integerLen;const k=Hn.exponent;let A=[];for(Qn=sr.every(q=>!q);gr<Cn;gr++)sr.unshift(0);for(;gr<0;gr++)sr.unshift(0);gr>0?A=sr.splice(gr,sr.length):(A=sr,sr=[0]);const C=[];for(sr.length>=G.lgSize&&C.unshift(sr.splice(-G.lgSize,sr.length).join(""));sr.length>G.gSize;)C.unshift(sr.splice(-G.gSize,sr.length).join(""));sr.length&&C.unshift(sr.join("")),Nt=C.join(pn(M,Y)),A.length&&(Nt+=pn(M,Ie)+A.join("")),k&&(Nt+=pn(M,Be.Exponential)+"+"+k)}else Nt=pn(M,Be.Infinity);return Nt=x<0&&!Qn?G.negPre+Nt+G.negSuf:G.posPre+Nt+G.posSuf,Nt}(x,function yn(x,G="-"){const M={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Y=x.split(";"),Ie=Y[0],Je=Y[1],tt=-1!==Ie.indexOf(".")?Ie.split("."):[Ie.substring(0,Ie.lastIndexOf("0")+1),Ie.substring(Ie.lastIndexOf("0")+1)],Nt=tt[0],Qn=tt[1]||"";M.posPre=Nt.substr(0,Nt.indexOf("#"));for(let Cn=0;Cn<Qn.length;Cn++){const Mn=Qn.charAt(Cn);"0"===Mn?M.minFrac=M.maxFrac=Cn+1:"#"===Mn?M.maxFrac=Cn+1:M.posSuf+=Mn}const Hn=Nt.split(",");if(M.gSize=Hn[1]?Hn[1].length:0,M.lgSize=Hn[2]||Hn[1]?(Hn[2]||Hn[1]).length:0,Je){const Cn=Ie.length-M.posPre.length-M.posSuf.length,Mn=Je.indexOf("#");M.negPre=Je.substr(0,Mn).replace(/'/g,""),M.negSuf=Je.substr(Mn+Cn).replace(/'/g,"")}else M.negPre=G+M.posPre,M.negSuf=M.posSuf;return M}(function qn(x,G){return(0,p.cg1)(x)[p.wAp.NumberFormats][G]}(G,fe.Percent),pn(G,Be.MinusSign)),G,Be.Group,Be.Decimal,M,!0).replace(new RegExp("%","g"),pn(G,Be.PercentSign))}(function ls(x){if("string"==typeof x&&!isNaN(Number(x)-parseFloat(x)))return Number(x);if("number"!=typeof x)throw new Error(`${x} is not a number`);return x}(M),Ie,Y)}catch(Je){throw rr()}}}return x.\u0275fac=function(M){return new(M||x)(p.Y36(p.soG,16))},x.\u0275pipe=p.Yjl({name:"percent",type:x,pure:!0}),x})();let Ci=(()=>{class x{}return x.\u0275fac=function(M){return new(M||x)},x.\u0275mod=p.oAB({type:x}),x.\u0275inj=p.cJS({}),x})();const Ki="browser";function Or(x){return"server"===x}let ii=(()=>{class x{}return x.\u0275prov=(0,p.Yz7)({token:x,providedIn:"root",factory:()=>new rs((0,p.LFG)(be),window)}),x})();class rs{constructor(G,M){this.document=G,this.window=M,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const M=function gi(x,G){const M=x.getElementById(G)||x.getElementsByName(G)[0];if(M)return M;if("function"==typeof x.createTreeWalker&&x.body&&(x.body.createShadowRoot||x.body.attachShadow)){const Y=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let Ie=Y.currentNode;for(;Ie;){const Je=Ie.shadowRoot;if(Je){const tt=Je.getElementById(G)||Je.querySelector(`[name="${G}"]`);if(tt)return tt}Ie=Y.nextNode()}}return null}(this.document,G);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const M=this.window.history;M&&M.scrollRestoration&&(M.scrollRestoration=G)}}scrollToElement(G){const M=G.getBoundingClientRect(),Y=M.left+this.window.pageXOffset,Ie=M.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(Y-Je[0],Ie-Je[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=pi(this.window.history)||pi(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch(G){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(G){return!1}}}function pi(x){return Object.getOwnPropertyDescriptor(x,"scrollRestoration")}class ur{}},5e3:(Pt,We,R)=>{R.d(We,{$8M:()=>Du,$Z:()=>Vm,AFp:()=>fE,ALo:()=>N0,AaK:()=>ye,BQk:()=>df,CHM:()=>Xe,CRH:()=>W0,CZH:()=>yv,CqO:()=>jm,DdM:()=>A0,EJc:()=>vI,EiD:()=>Pu,EpF:()=>Bm,F$t:()=>$m,F4k:()=>C_,FYo:()=>_0,FiY:()=>lo,G48:()=>BI,Gf:()=>H0,GfV:()=>v0,Gpc:()=>re,Hsn:()=>Jp,JOm:()=>it,JVY:()=>th,L6k:()=>Mu,LAX:()=>nh,LFG:()=>cn,LSH:()=>Jr,Lbi:()=>mE,MAs:()=>rf,NdJ:()=>Qp,O4$:()=>So,OlP:()=>nn,Oqu:()=>mf,PXZ:()=>PI,Q6J:()=>qp,QGY:()=>Yp,Qsj:()=>_w,R0b:()=>pu,RDi:()=>pi,Rgc:()=>Sg,SBq:()=>Cg,Sil:()=>wI,Suo:()=>G0,TTD:()=>us,TgZ:()=>Zp,VKq:()=>S0,VLi:()=>xI,W1O:()=>Z0,WLB:()=>M0,X6Q:()=>UI,XFs:()=>Bt,Xpm:()=>Jt,Y36:()=>zl,YKP:()=>D0,YNc:()=>Rm,Yjl:()=>oe,Yz7:()=>ht,ZZ4:()=>xv,_Bn:()=>g0,_UZ:()=>cf,_Vd:()=>Ey,_c5:()=>nD,_uU:()=>Xm,aQg:()=>Rv,c2e:()=>_E,cJS:()=>_n,cg1:()=>vf,dDg:()=>wE,deG:()=>Yc,dqk:()=>On,eBb:()=>kf,eFA:()=>CE,ekj:()=>gf,g9A:()=>gE,h0i:()=>Tf,hGG:()=>rD,hij:()=>_a,iGM:()=>$0,ifc:()=>Rn,ip1:()=>hE,kL8:()=>Gc,kcU:()=>yu,lG2:()=>ge,lcZ:()=>F0,mCW:()=>xa,n5z:()=>nc,oAB:()=>He,oxw:()=>Nd,pB0:()=>td,q3G:()=>Jn,q4F:()=>E0,qLn:()=>ui,qOj:()=>Sp,qZA:()=>Gi,qzn:()=>Xa,sBO:()=>jI,sIi:()=>Hl,s_b:()=>Dy,soG:()=>vv,tBr:()=>hs,tb:()=>yE,tp0:()=>vo,uIk:()=>tf,vHH:()=>Ze,vpe:()=>ul,wAp:()=>xn,xp6:()=>zf,yhl:()=>uc,ynx:()=>kd,z2F:()=>Cv,z3N:()=>Lo,zSh:()=>gp,zs3:()=>ha});var p=R(7579),H=R(727),Z=R(9751),_e=R(6451),pe=R(3099);function we(n){for(let r in n)if(n[r]===we)return r;throw Error("Could not find renamed property on target object.")}function be(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function ye(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ye).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Fe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const le=we({__forward_ref__:we});function re(n){return n.__forward_ref__=re,n.toString=function(){return ye(this())},n}function me(n){return je(n)?n():n}function je(n){return"function"==typeof n&&n.hasOwnProperty(le)&&n.__forward_ref__===re}class Ze extends Error{constructor(r,s){super(function mt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Le(n){return"string"==typeof n?n:null==n?"":String(n)}function ke(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Le(n)}function ne(n,r){const s=r?` in ${r}`:"";throw new Ze(-201,`No provider for ${ke(n)} found${s}`)}function gt(n,r){null==n&&function bt(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function ht(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function _n(n){return{providers:n.providers||[],imports:n.imports||[]}}function pn(n){return qn(n,zt)||qn(n,An)}function qn(n,r){return n.hasOwnProperty(r)?n[r]:null}function ct(n){return n&&(n.hasOwnProperty(qt)||n.hasOwnProperty(kn))?n[qt]:null}const zt=we({\u0275prov:we}),qt=we({\u0275inj:we}),An=we({ngInjectableDef:we}),kn=we({ngInjectorDef:we});var Bt=(()=>((Bt=Bt||{})[Bt.Default=0]="Default",Bt[Bt.Host=1]="Host",Bt[Bt.Self=2]="Self",Bt[Bt.SkipSelf=4]="SkipSelf",Bt[Bt.Optional=8]="Optional",Bt))();let un;function jt(n){const r=un;return un=n,r}function Br(n,r,s){const a=pn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Bt.Optional?null:void 0!==r?r:void ne(ye(n),"Injector")}function tr(n){return{toString:n}.toString()}var Cr=(()=>((Cr=Cr||{})[Cr.OnPush=0]="OnPush",Cr[Cr.Default=1]="Default",Cr))(),Rn=(()=>{return(n=Rn||(Rn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Rn;var n})();const Vt="undefined"!=typeof globalThis&&globalThis,Kt="undefined"!=typeof window&&window,or="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,On=Vt||"undefined"!=typeof global&&global||Kt||or,fr={},Qt=[],pr=we({\u0275cmp:we}),En=we({\u0275dir:we}),kt=we({\u0275pipe:we}),dt=we({\u0275mod:we}),Gt=we({\u0275fac:we}),ln=we({__NG_ELEMENT_ID__:we});let In=0;function Jt(n){return tr(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Cr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Qt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Rn.Emulated,id:"c",styles:n.styles||Qt,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.directives,h=n.features,y=n.pipes;return a.id+=In++,a.inputs=Ae(n.inputs,s),a.outputs=Ae(n.outputs),h&&h.forEach(w=>w(a)),a.directiveDefs=l?()=>("function"==typeof l?l():l).map(te):null,a.pipeDefs=y?()=>("function"==typeof y?y():y).map(Ce):null,a})}function te(n){return Me(n)||function nt(n){return n[En]||null}(n)}function Ce(n){return function At(n){return n[kt]||null}(n)}const Qe={};function He(n){return tr(()=>{const r={type:n.type,bootstrap:n.bootstrap||Qt,declarations:n.declarations||Qt,imports:n.imports||Qt,exports:n.exports||Qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Qe[n.id]=n.type),r})}function Ae(n,r){if(null==n)return fr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const ge=Jt;function oe(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Me(n){return n[pr]||null}function en(n,r){const s=n[dt]||null;if(!s&&!0===r)throw new Error(`Type ${ye(n)} does not have '\u0275mod' property.`);return s}function ar(n){return Array.isArray(n)&&"object"==typeof n[1]}function _i(n){return Array.isArray(n)&&!0===n[1]}function zi(n){return 0!=(8&n.flags)}function hi(n){return 2==(2&n.flags)}function Ds(n){return 1==(1&n.flags)}function fi(n){return null!==n.template}function qr(n){return 0!=(512&n[2])}function _r(n,r){return n.hasOwnProperty(Gt)?n[Gt]:null}class as{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function us(){return ls}function ls(n){return n.type.prototype.ngOnChanges&&(n.setInput=Bs),to}function to(){const n=Ki(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===fr)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Bs(n,r,s,a){const l=Ki(n)||function Xr(n,r){return n[Ci]=r}(n,{previous:fr,current:null}),h=l.current||(l.current={}),y=l.previous,w=this.declaredInputs[s],b=y[w];h[w]=new as(b&&b.currentValue,r,y===fr),n[a]=r}us.ngInherit=!0;const Ci="__ngSimpleChanges__";function Ki(n){return n[Ci]||null}let rs;function pi(n){rs=n}function ur(n){return!!n.listen}const x={createRenderer:(n,r)=>function gi(){return void 0!==rs?rs:"undefined"!=typeof document?document:void 0}()};function M(n){for(;Array.isArray(n);)n=n[0];return n}function Je(n,r){return M(r[n])}function tt(n,r){return M(r[n.index])}function Qn(n,r){return n.data[r]}function Hn(n,r){return n[r]}function Cn(n,r){const s=r[n];return ar(s)?s:s[0]}function Mn(n){return 4==(4&n[2])}function Pr(n){return 128==(128&n[2])}function gr(n,r){return null==r?null:n[r]}function k(n){n[18]=0}function A(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const C={lFrame:js(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function L(){return C.bindingsEnabled}function Q(){return C.lFrame.lView}function ve(){return C.lFrame.tView}function Xe(n){return C.lFrame.contextLView=n,n[8]}function ft(){let n=sn();for(;null!==n&&64===n.type;)n=n.parent;return n}function sn(){return C.lFrame.currentTNode}function vn(n,r){const s=C.lFrame;s.currentTNode=n,s.isParent=r}function Yn(){return C.lFrame.isParent}function Fr(){C.lFrame.isParent=!1}function Hr(){return C.isInCheckNoChangesMode}function mi(n){C.isInCheckNoChangesMode=n}function Kn(){const n=C.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function kr(){return C.lFrame.bindingIndex++}function no(n,r){const s=C.lFrame;s.bindingIndex=s.bindingRootIndex=n,Ps(r)}function Ps(n){C.lFrame.currentDirectiveIndex=n}function Ea(){return C.lFrame.currentQueryIndex}function ja(n){C.lFrame.currentQueryIndex=n}function $a(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Bo(n,r,s){if(s&Bt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&Bt.Host||(l=$a(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=C.lFrame=Jo();return a.currentTNode=r,a.lView=n,!0}function fo(n){const r=Jo(),s=n[1];C.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Jo(){const n=C.lFrame,r=null===n?null:n.child;return null===r?js(n):r}function js(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function wa(){const n=C.lFrame;return C.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ks=wa;function ro(){const n=wa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function bi(){return C.lFrame.selectedIndex}function Ao(n){C.lFrame.selectedIndex=n}function oi(){const n=C.lFrame;return Qn(n.tView,n.selectedIndex)}function So(){C.lFrame.currentNamespace="svg"}function yu(){!function Ti(){C.lFrame.currentNamespace=null}()}function Qi(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:U,ngOnDestroy:W}=h;y&&(n.contentHooks||(n.contentHooks=[])).push(-s,y),w&&((n.contentHooks||(n.contentHooks=[])).push(s,w),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,w)),b&&(n.viewHooks||(n.viewHooks=[])).push(-s,b),U&&((n.viewHooks||(n.viewHooks=[])).push(s,U),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,U)),null!=W&&(n.destroyHooks||(n.destroyHooks=[])).push(s,W)}}function $s(n,r,s){na(n,r,3,s)}function Ns(n,r,s,a){(3&n[2])===s&&na(n,r,s,a)}function ai(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function na(n,r,s,a){const h=null!=a?a:-1,y=r.length-1;let w=0;for(let b=void 0!==a?65535&n[18]:0;b<y;b++)if("number"==typeof r[b+1]){if(w=r[b],null!=a&&w>=a)break}else r[b]<0&&(n[18]+=65536),(w<h||-1==h)&&(Ha(n,s,r,b),n[18]=(4294901760&n[18])+b+2),b++}function Ha(n,r,s,a){const l=s[a]<0,h=s[a+1],w=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(w)}finally{}}}else try{h.call(w)}finally{}}class io{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Ia(n,r,s){const a=ur(n);let l=0;for(;l<s.length;){const h=s[l];if("number"==typeof h){if(0!==h)break;l++;const y=s[l++],w=s[l++],b=s[l++];a?n.setAttribute(r,w,b,y):r.setAttributeNS(y,w,b)}else{const y=h,w=s[++l];go(y)?a&&n.setProperty(r,y,w):a?n.setAttribute(r,y,w):r.setAttribute(y,w),l++}}return l}function Gs(n){return 3===n||4===n||6===n}function go(n){return 64===n.charCodeAt(0)}function jo(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||$o(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function $o(n,r,s,a,l){let h=0,y=n.length;if(-1===r)y=-1;else for(;h<n.length;){const w=n[h++];if("number"==typeof w){if(w===r){y=-1;break}if(w>r){y=h-1;break}}}for(;h<n.length;){const w=n[h];if("number"==typeof w)break;if(w===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==y&&(n.splice(y,0,r),h=y+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Da(n){return-1!==n}function Vr(n){return 32767&n}function Fs(n,r){let s=function Wa(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Ca=!0;function As(n){const r=Ca;return Ca=n,r}let E=0;function S(n,r){const s=j(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,F(a.data,n),F(r,null),F(a.blueprint,null));const l=ie(n,r),h=n.injectorIndex;if(Da(l)){const y=Vr(l),w=Fs(l,r),b=w[1].data;for(let U=0;U<8;U++)r[h+U]=w[y+U]|b[y+U]}return r[h+8]=l,h}function F(n,r){n.push(0,0,0,0,0,0,0,0,r)}function j(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ie(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){const h=l[1],y=h.type;if(a=2===y?h.declTNode:1===y?l[6]:null,null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function De(n,r,s){!function _(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(ln)&&(a=s[ln]),null==a&&(a=s[ln]=E++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function st(n,r,s){if(s&Bt.Optional)return n;ne(r,"NodeInjector")}function Ft(n,r,s,a){if(s&Bt.Optional&&void 0===a&&(a=null),0==(s&(Bt.Self|Bt.Host))){const l=n[9],h=jt(void 0);try{return l?l.get(r,a,s&Bt.Optional):Br(r,a,s&Bt.Optional)}finally{jt(h)}}return st(a,r,s)}function dn(n,r,s,a=Bt.Default,l){if(null!==n){const h=function wu(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(ln)?n[ln]:void 0;return"number"==typeof r?r>=0?255&r:ze:r}(s);if("function"==typeof h){if(!Bo(r,n,a))return a&Bt.Host?st(l,s,a):Ft(r,s,a,l);try{const y=h(a);if(null!=y||a&Bt.Optional)return y;ne(s)}finally{ks()}}else if("number"==typeof h){let y=null,w=j(n,r),b=-1,U=a&Bt.Host?r[16][6]:null;for((-1===w||a&Bt.SkipSelf)&&(b=-1===w?ie(n,r):r[w+8],-1!==b&&Iu(a,!1)?(y=r[1],w=Vr(b),r=Fs(b,r)):w=-1);-1!==w;){const W=r[1];if(mo(h,w,W.data)){const se=yt(w,r,s,y,a,U);if(se!==Et)return se}b=r[w+8],-1!==b&&Iu(a,r[1].data[w+8]===U)&&mo(h,w,r)?(y=W,w=Vr(b),r=Fs(b,r)):w=-1}}}return Ft(r,s,a,l)}const Et={};function ze(){return new yo(ft(),Q())}function yt(n,r,s,a,l,h){const y=r[1],w=y.data[n+8],W=Ur(w,y,s,null==a?hi(w)&&Ca:a!=y&&0!=(3&w.type),l&Bt.Host&&h===w);return null!==W?Es(r,y,W,w):Et}function Ur(n,r,s,a,l){const h=n.providerIndexes,y=r.data,w=1048575&h,b=n.directiveStart,W=h>>20,Te=l?w+W:n.directiveEnd;for(let Ke=a?w:w+W;Ke<Te;Ke++){const pt=y[Ke];if(Ke<b&&s===pt||Ke>=b&&pt.type===s)return Ke}if(l){const Ke=y[b];if(Ke&&fi(Ke)&&Ke.type===s)return b}return null}function Es(n,r,s,a){let l=n[s];const h=r.data;if(function ra(n){return n instanceof io}(l)){const y=l;y.resolving&&function at(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ze(-200,`Circular dependency in DI detected for ${n}${s}`)}(ke(h[s]));const w=As(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?jt(y.injectImpl):null;Bo(n,a,Bt.Default);try{l=n[s]=y.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function ta(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const y=ls(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==b&&jt(b),As(w),y.resolving=!1,ks()}}return l}function mo(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Iu(n,r){return!(n&Bt.Self||n&Bt.Host&&r)}class yo{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return dn(this._tNode,this._lView,r,a,s)}}function nc(n){return tr(()=>{const r=n.prototype.constructor,s=r[Gt]||ia(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[Gt]||ia(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function ia(n){return je(n)?()=>{const r=ia(me(n));return r&&r()}:_r(n)}function Du(n){return function ut(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Gs(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(ft(),n)}const Xi="__parameters__";function oo(n,r,s){return tr(()=>{const a=function Vn(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const y=new l(...h);return w.annotation=y,w;function w(b,U,W){const se=b.hasOwnProperty(Xi)?b[Xi]:Object.defineProperty(b,Xi,{value:[]})[Xi];for(;se.length<=W;)se.push(null);return(se[W]=se[W]||[]).push(y),b}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class nn{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=ht({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Yc=new nn("AnalyzeForEntryComponents");function Ji(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Ji(a,r)):r!==n&&r.push(a)}return r}function Vs(n,r){n.forEach(s=>Array.isArray(s)?Vs(s,r):r(s))}function Ta(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ho(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Bi(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function ji(n,r,s){let a=_o(n,r);return a>=0?n[1|a]=s:(a=~a,function Cu(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function ao(n,r){const s=_o(n,r);if(s>=0)return n[1|s]}function _o(n,r){return function Go(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),y=n[h<<s];if(r===y)return h<<s;y>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Wo={},Za="__NG_DI_FLAG__",hl="ngTempTokenPath",P=/\n/gm,de="__source",Ve=we({provide:String,useValue:we});let Ye;function Rt(n){const r=Ye;return Ye=n,r}function Xt(n,r=Bt.Default){if(void 0===Ye)throw new Ze(203,"");return null===Ye?Br(n,void 0,r):Ye.get(n,r&Bt.Optional?null:void 0,r)}function cn(n,r=Bt.Default){return(function wn(){return un}()||Xt)(me(n),r)}const lr=cn;function Un(n){const r=[];for(let s=0;s<n.length;s++){const a=me(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ze(900,"");let l,h=Bt.Default;for(let y=0;y<a.length;y++){const w=a[y],b=ki(w);"number"==typeof b?-1===b?l=w.token:h|=b:l=w}r.push(cn(l,h))}else r.push(cn(a))}return r}function Zr(n,r){return n[Za]=r,n.prototype[Za]=r,n}function ki(n){return n[Za]}const hs=Zr(oo("Inject",n=>({token:n})),-1),lo=Zr(oo("Optional"),8),vo=Zr(oo("SkipSelf"),4);let Eo;function No(n){var r;return(null===(r=function ic(){if(void 0===Eo&&(Eo=null,On.trustedTypes))try{Eo=On.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Eo}())||void 0===r?void 0:r.createHTML(n))||n}class Fo{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Jd extends Fo{getTypeName(){return"HTML"}}class Jc extends Fo{getTypeName(){return"Style"}}class ed extends Fo{getTypeName(){return"Script"}}class ac extends Fo{getTypeName(){return"URL"}}class eh extends Fo{getTypeName(){return"ResourceURL"}}function Lo(n){return n instanceof Fo?n.changingThisBreaksApplicationSecurity:n}function Xa(n,r){const s=uc(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function uc(n){return n instanceof Fo&&n.getTypeName()||null}function th(n){return new Jd(n)}function Mu(n){return new Jc(n)}function kf(n){return new ed(n)}function nh(n){return new ac(n)}function td(n){return new eh(n)}class eu{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(No(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class rh{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=No(r),s;const a=this.inertDocument.createElement("body");return a.innerHTML=No(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const s=r.attributes;for(let l=s.length-1;0<l;l--){const y=s.item(l).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&r.removeAttribute(y)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const Ma=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ih=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function xa(n){return(n=String(n)).match(Ma)||n.match(ih)?n:"unsafe:"+n}function wo(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function vl(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const $i=wo("area,br,col,hr,img,wbr"),tu=wo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),El=wo("rp,rt"),cc=vl($i,vl(tu,wo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vl(El,wo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vl(El,tu)),dc=wo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),nu=wo("srcset"),wl=vl(dc,nu,wo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),oh=wo("script,style,template");class Il{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!cc.hasOwnProperty(s))return this.sanitizedSomething=!0,!oh.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const h=a.item(l),y=h.name,w=y.toLowerCase();if(!wl.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let b=h.value;dc[w]&&(b=xa(b)),nu[w]&&(n=b,b=(n=String(n)).split(",").map(r=>xa(r.trim())).join(", ")),this.buf.push(" ",y,'="',Hi(b),'"')}var n;return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();cc.hasOwnProperty(s)&&!$i.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Hi(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Dl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nd=/([^\#-~ |!])/g;function Hi(n){return n.replace(/&/g,"&amp;").replace(Dl,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(nd,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cr;function Pu(n,r){let s=null;try{cr=cr||function Ja(n){const r=new rh(n);return function xu(){try{return!!(new window.DOMParser).parseFromString(No(""),"text/html")}catch(n){return!1}}()?new eu(r):r}(n);let a=r?String(r):"";s=cr.getInertBodyElement(a);let l=5,h=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=h,h=s.innerHTML,s=cr.getInertBodyElement(a)}while(a!==h);return No((new Il).sanitizeChildren(hc(s)||s))}finally{if(s){const a=hc(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function hc(n){return"content"in n&&function Ra(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Jn=(()=>((Jn=Jn||{})[Jn.NONE=0]="NONE",Jn[Jn.HTML=1]="HTML",Jn[Jn.STYLE=2]="STYLE",Jn[Jn.SCRIPT=3]="SCRIPT",Jn[Jn.URL=4]="URL",Jn[Jn.RESOURCE_URL=5]="RESOURCE_URL",Jn))();function Jr(n){const r=function bl(){const n=Q();return n&&n[12]}();return r?r.sanitize(Jn.URL,n)||"":Xa(n,"URL")?Lo(n):xa(Le(n))}const iu="__ngContext__";function es(n,r){n[iu]=r}function gc(n){const r=function zo(n){return n[iu]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Ml(n){return n.ngOriginalError}function Fu(n,...r){n.error(...r)}class ui{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function hh(n){return n&&n.ngErrorLogger||Fu}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ml(r);for(;s&&Ml(s);)s=Ml(s);return s||null}}const Ff=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(On))();function f(n){return n instanceof Function?n():n}var it=(()=>((it=it||{})[it.Important=1]="Important",it[it.DashCase=2]="DashCase",it))();function hn(n,r){return undefined(n,r)}function Si(n){const r=n[3];return _i(r)?r[3]:r}function Ol(n){return _c(n[13])}function Oa(n){return _c(n[4])}function _c(n){for(;null!==n&&!_i(n);)n=n[4];return n}function Pa(n,r,s,a,l){if(null!=a){let h,y=!1;_i(a)?h=a:ar(a)&&(y=!0,a=a[0]);const w=M(a);0===n&&null!==s?null==l?lt(r,s,w):Vu(r,s,w,l||null,!0):1===n&&null!==s?Vu(r,s,w,l||null,!0):2===n?function wh(n,r,s){const a=yh(n,r);a&&function ua(n,r,s,a){ur(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,w,y):3===n&&r.destroyNode(w),null!=h&&function Ih(n,r,s,a,l){const h=s[7];h!==M(s)&&Pa(r,n,a,h,l);for(let w=10;w<s.length;w++){const b=s[w];wc(b[1],b,n,r,a,h)}}(r,n,h,s,l)}}function Ec(n,r,s){if(ur(n))return n.createElement(r,s);{const a=null!==s?function ii(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Pg(n,r){const s=n[9],a=s.indexOf(r),l=r[3];1024&r[2]&&(r[2]&=-1025,A(l,-1)),s.splice(a,1)}function Bf(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&Pg(l,a),r>0&&(n[s-1][4]=a[4]);const h=Ho(n,10+r);!function Vf(n,r){wc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const y=h[19];null!==y&&y.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function kg(n,r){if(!(256&r[2])){const s=r[11];ur(s)&&s.destroyNode&&wc(n,r,s,3,null,null),function My(n){let r=n[13];if(!r)return mh(n[1],n);for(;r;){let s=null;if(ar(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)ar(r)&&mh(r[1],r),r=r[3];null===r&&(r=n),ar(r)&&mh(r[1],r),s=r&&r[4]}r=s}}(r)}}function mh(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Ng(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof io)){const h=s[a+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const w=l[h[y]],b=h[y+1];try{b.call(w)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function Oy(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const y=s[h+1],w="function"==typeof y?y(r):M(r[y]),b=a[l=s[h+2]],U=s[h+3];"boolean"==typeof U?w.removeEventListener(s[h],b,U):U>=0?a[l=U]():a[l=-U].unsubscribe(),h+=2}else{const y=a[l=s[h+1]];s[h].call(y)}if(null!==a){for(let h=l+1;h<a.length;h++)a[h]();r[7]=null}}(n,r),1===r[1].type&&ur(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&_i(r[3])){s!==r[3]&&Pg(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function Fg(n,r,s){return function jf(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===Rn.None||l===Rn.Emulated)return null}return tt(a,s)}(n,r.parent,s)}function Vu(n,r,s,a,l){ur(n)?n.insertBefore(r,s,a,l):r.insertBefore(s,a,l)}function lt(n,r,s){ur(n)?n.appendChild(r,s):r.appendChild(s)}function dd(n,r,s,a,l){null!==a?Vu(n,r,s,a,l):lt(n,r,s)}function yh(n,r){return ur(n)?n.parentNode(r):r.parentNode}function Uu(n,r,s){return Bu(n,r,s)}let Bu=function Lg(n,r,s){return 40&n.type?tt(n,s):null};function fd(n,r,s,a){const l=Fg(n,a,r),h=r[11],w=Uu(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let b=0;b<s.length;b++)dd(h,l,s[b],w,!1);else dd(h,l,s,w,!1)}function ss(n,r){if(null!==r){const s=r.type;if(3&s)return tt(r,n);if(4&s)return pd(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return ss(n,a);{const l=n[r.index];return _i(l)?pd(-1,l):M(l)}}if(32&s)return hn(r,n)()||M(n[r.index]);{const a=Eh(n,r);return null!==a?Array.isArray(a)?a[0]:ss(Si(n[16]),a):ss(n,r.next)}}return null}function Eh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function pd(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return ss(a,l)}return r[7]}function ka(n,r,s,a,l,h,y){for(;null!=s;){const w=a[s.index],b=s.type;if(y&&0===r&&(w&&es(M(w),a),s.flags|=4),64!=(64&s.flags))if(8&b)ka(n,r,s.child,a,l,h,!1),Pa(r,n,l,w,h);else if(32&b){const U=hn(s,a);let W;for(;W=U();)Pa(r,n,l,W,h);Pa(r,n,l,w,h)}else 16&b?$f(n,r,a,s,l,h):Pa(r,n,l,w,h);s=y?s.projectionNext:s.next}}function wc(n,r,s,a,l,h){ka(s,a,n.firstChild,r,l,h,!1)}function $f(n,r,s,a,l,h){const y=s[16],b=y[6].projection[a.projection];if(Array.isArray(b))for(let U=0;U<b.length;U++)Pa(r,n,l,b[U],h);else ka(n,r,b,y[3],l,h,!0)}function ju(n,r,s){ur(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function $u(n,r,s){ur(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function Ic(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Dh="ng-template";function Hf(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==Ic(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Gf(n){return 4===n.type&&n.value!==Dh}function Ny(n,r,s){return r===(4!==n.type||s?n.value:Dh)}function Vg(n,r,s){let a=4;const l=n.attrs||[],h=function Fy(n){for(let r=0;r<n.length;r++)if(Gs(n[r]))return r;return n.length}(l);let y=!1;for(let w=0;w<r.length;w++){const b=r[w];if("number"!=typeof b){if(!y)if(4&a){if(a=2|1&a,""!==b&&!Ny(n,b,s)||""===b&&1===r.length){if(qo(a))return!1;y=!0}}else{const U=8&a?b:r[++w];if(8&a&&null!==n.attrs){if(!Hf(n.attrs,U,s)){if(qo(a))return!1;y=!0}continue}const se=Wf(8&a?"class":b,l,Gf(n),s);if(-1===se){if(qo(a))return!1;y=!0;continue}if(""!==U){let Te;Te=se>h?"":l[se+1].toLowerCase();const Ke=8&a?Te:null;if(Ke&&-1!==Ic(Ke,U,0)||2&a&&U!==Te){if(qo(a))return!1;y=!0}}}}else{if(!y&&!qo(a)&&!qo(b))return!1;if(y&&qo(b))continue;y=!1,a=b|1&a}}return qo(a)||y}function qo(n){return 0==(1&n)}function Wf(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const y=r[l];if(y===n)return l;if(3===y||6===y)h=!0;else{if(1===y||2===y){let w=r[++l];for(;"string"==typeof w;)w=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=h?1:2}return-1}return function Ug(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Dc(n,r,s=!1){for(let a=0;a<r.length;a++)if(Vg(n,r[a],s))return!0;return!1}function Ly(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let l=0;l<n.length;l++)if(n[l]!==a[l])continue e;return!0}}return!1}function Bg(n,r){return n?":not("+r.trim()+")":r}function Vy(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let y=n[s];if("string"==typeof y)if(2&a){const w=n[++s];l+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!qo(y)&&(r+=Bg(h,l),l=""),a=y,h=h||!qo(a);s++}return""!==l&&(r+=Bg(h,l)),r}const Pn={};function zf(n){jg(ve(),Q(),bi()+n,Hr())}function jg(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&$s(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Ns(r,h,0,s)}Ao(s)}function Cc(n,r){return n<<17|r<<2}function Ys(n){return n>>17&32767}function Nl(n){return 2|n}function Zo(n){return(131068&n)>>2}function bc(n,r){return-131069&n|r<<2}function Qs(n){return 1|n}function Qg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const y=n.data[h];ja(l),y.contentQueries(2,r[h],h)}}}function Fa(n,r,s,a,l,h,y,w,b,U){const W=r.blueprint.slice();return W[0]=l,W[2]=140|a,k(W),W[3]=W[15]=n,W[8]=s,W[10]=y||n&&n[10],W[11]=w||n&&n[11],W[12]=b||n&&n[12]||null,W[9]=U||n&&n[9]||null,W[6]=h,W[16]=2==r.type?n[16]:W,W}function ca(n,r,s,a,l){let h=n.data[r];if(null===h)h=function _d(n,r,s,a,l){const h=sn(),y=Yn(),b=n.data[r]=function qy(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=b),null!==h&&(y?null==h.child&&null!==b.parent&&(h.child=b):null===h.next&&(h.next=b)),b}(n,r,s,a,l),function _s(){return C.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const y=function Ht(){const n=C.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return vn(h,!0),h}function uu(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Sc(n,r,s){fo(r);try{const a=n.viewQuery;null!==a&&hp(1,a,s);const l=n.template;null!==l&&em(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Qg(n,r),n.staticViewQueries&&hp(2,n.viewQuery,s);const h=n.components;null!==h&&function Ky(n,r){for(let s=0;s<r.length;s++)lp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,ro()}}function Vl(n,r,s,a){const l=r[2];if(256==(256&l))return;fo(r);const h=Hr();try{k(r),function Ui(n){return C.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&em(n,r,s,2,a);const y=3==(3&l);if(!h)if(y){const U=n.preOrderCheckHooks;null!==U&&$s(r,U,null)}else{const U=n.preOrderHooks;null!==U&&Ns(r,U,0,null),ai(r,0)}if(function up(n){for(let r=Ol(n);null!==r;r=Oa(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(1024&l[2])&&A(h,1),l[2]|=1024}}}(r),function Mc(n){for(let r=Ol(n);null!==r;r=Oa(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];Pr(a)&&Vl(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Qg(n,r),!h)if(y){const U=n.contentCheckHooks;null!==U&&$s(r,U)}else{const U=n.contentHooks;null!==U&&Ns(r,U,1),ai(r,1)}!function Yg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Ao(~l);else{const h=l,y=s[++a],w=s[++a];no(y,h),w(2,r[h])}}}finally{Ao(-1)}}(n,r);const w=n.components;null!==w&&function Xg(n,r){for(let s=0;s<r.length;s++)Bh(n,r[s])}(r,w);const b=n.viewQuery;if(null!==b&&hp(2,b,a),!h)if(y){const U=n.viewCheckHooks;null!==U&&$s(r,U)}else{const U=n.viewHooks;null!==U&&Ns(r,U,2),ai(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),h||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,A(r[3],-1))}finally{ro()}}function Jg(n,r,s,a){const l=r[10],h=!Hr(),y=Mn(r);try{h&&!y&&l.begin&&l.begin(),y&&Sc(n,r,a),Vl(n,r,s,a)}finally{h&&!y&&l.end&&l.end()}}function em(n,r,s,a,l){const h=bi(),y=2&a;try{Ao(-1),y&&r.length>20&&jg(n,r,20,Hr()),s(a,l)}finally{Ao(h)}}function Ph(n,r,s){if(zi(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const y=n.data[h];y.contentQueries&&y.contentQueries(1,s[h],h)}}}function Xf(n,r,s){!L()||(function am(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||S(s,r),es(a,r);const y=s.initialInputs;for(let w=l;w<h;w++){const b=n.data[w],U=fi(b);U&&Jy(r,s,b);const W=Es(r,n,w,s);es(W,r),null!==y&&e_(0,w-l,W,b,0,y),U&&(Cn(s.index,r)[8]=W)}}(n,r,s,tt(s,r)),128==(128&s.flags)&&function Qy(n,r,s){const a=s.directiveStart,l=s.directiveEnd,y=s.index,w=function wr(){return C.lFrame.currentDirectiveIndex}();try{Ao(y);for(let b=a;b<l;b++){const U=n.data[b],W=r[b];Ps(b),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&um(U,W)}}finally{Ao(-1),Ps(w)}}(n,r,s))}function vd(n,r,s=tt){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const y=a[h+1],w=-1===y?s(r,n):n[y];n[l++]=w}}}function tm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=kh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function kh(n,r,s,a,l,h,y,w,b,U){const W=20+a,se=W+l,Te=function Jf(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Pn);return s}(W,se),Ke="function"==typeof U?U():U;return Te[1]={type:n,blueprint:Te,template:s,queries:null,viewQuery:w,declTNode:r,data:Te.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:Ke,incompleteFirstPass:!1}}function rm(n,r,s,a){const l=Gh(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&fp(n).push(a,l.length-1))}function im(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function wd(n,r,s,a){let l=!1;if(L()){const h=function Xy(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const y=a[h];Dc(s,y.selectors,!1)&&(l||(l=[]),De(S(s,r),n,y.type),fi(y)?(sp(n,s),l.unshift(y)):l.push(y))}return l}(n,r,s),y=null===a?null:{"":-1};if(null!==h){l=!0,Lh(s,n.data.length,h.length);for(let W=0;W<h.length;W++){const se=h[W];se.providersResolver&&se.providersResolver(se)}let w=!1,b=!1,U=uu(n,r,h.length,null);for(let W=0;W<h.length;W++){const se=h[W];s.mergedAttrs=jo(s.mergedAttrs,se.hostAttrs),op(n,s,r,U,se),Id(U,se,y),null!==se.contentQueries&&(s.flags|=8),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(s.flags|=128);const Te=se.type.prototype;!w&&(Te.ngOnChanges||Te.ngOnInit||Te.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),w=!0),!b&&(Te.ngOnChanges||Te.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),b=!0),U++}!function Zy(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,y=[];let w=null,b=null;for(let U=r.directiveStart;U<a;U++){const W=l[U],se=W.inputs,Te=null===h||Gf(r)?null:t_(se,h);y.push(Te),w=im(se,U,w),b=im(W.outputs,U,b)}null!==w&&(w.hasOwnProperty("class")&&(r.flags|=16),w.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=y,r.inputs=w,r.outputs=b}(n,s)}y&&function Fh(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new Ze(-301,!1);a.push(r[l],h)}}}(s,a,y)}return s.mergedAttrs=jo(s.mergedAttrs,s.attrs),l}function ip(n,r,s,a,l,h){const y=h.hostBindings;if(y){let w=n.hostBindingOpCodes;null===w&&(w=n.hostBindingOpCodes=[]);const b=~r.index;(function Yy(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(w)!=b&&w.push(b),w.push(a,l,y)}}function um(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function sp(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Id(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;fi(r)&&(s[""]=n)}}function Lh(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function op(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=_r(l.type)),y=new io(h,fi(l),null);n.blueprint[a]=y,s[a]=y,ip(n,r,0,a,uu(n,s,l.hostVars,Pn),l)}function Jy(n,r,s){const a=tt(r,n),l=tm(s),h=n[10],y=xc(n,Fa(n,l,null,s.onPush?64:16,a,r,h,h.createRenderer(a,s),null,null));n[r.index]=y}function La(n,r,s,a,l,h){const y=tt(n,r);!function ap(n,r,s,a,l,h,y){if(null==h)ur(n)?n.removeAttribute(r,l,s):r.removeAttribute(l);else{const w=null==y?Le(h):y(h,a||"",l);ur(n)?n.setAttribute(r,l,w,s):s?r.setAttributeNS(s,l,w):r.setAttribute(l,w)}}(r[11],y,h,n.value,s,a,l)}function e_(n,r,s,a,l,h){const y=h[r];if(null!==y){const w=a.setInput;for(let b=0;b<y.length;){const U=y[b++],W=y[b++],se=y[b++];null!==w?a.setInput(s,se,U,W):s[W]=se}}}function t_(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Uh(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Bh(n,r){const s=Cn(r,n);if(Pr(s)){const a=s[1];80&s[2]?Vl(a,s,a.template,s[8]):s[5]>0&&Ul(s)}}function Ul(n){for(let a=Ol(n);null!==a;a=Oa(a))for(let l=10;l<a.length;l++){const h=a[l];if(1024&h[2]){const y=h[1];Vl(y,h,y.template,h[8])}else h[5]>0&&Ul(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=Cn(s[a],n);Pr(l)&&l[5]>0&&Ul(l)}}function lp(n,r){const s=Cn(r,n),a=s[1];(function lm(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Sc(a,s,s[8])}function xc(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Dd(n){for(;n;){n[2]|=64;const r=Si(n);if(qr(n)&&!r)return n;n=r}return null}function cp(n,r,s){const a=r[10];a.begin&&a.begin();try{Vl(n,r,n.template,s)}catch(l){throw Wh(r,l),l}finally{a.end&&a.end()}}function $h(n){!function jh(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=gc(s),l=a[1];Jg(l,a,l.template,s)}}(n[8])}function hp(n,r,s){ja(0),r(n,s)}const Hh=(()=>Promise.resolve(null))();function Gh(n){return n[7]||(n[7]=[])}function fp(n){return n.cleanup||(n.cleanup=[])}function Wh(n,r){const s=n[9],a=s?s.get(ui,null):null;a&&a.handleError(r)}function dm(n,r,s,a,l){for(let h=0;h<s.length;){const y=s[h++],w=s[h++],b=r[y],U=n.data[y];null!==U.setInput?U.setInput(b,l,a,w):b[w]=l}}function lu(n,r,s){const a=Je(r,n);!function ud(n,r,s){ur(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Cd(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let y=0;y<r.length;y++){const w=r[y];"number"==typeof w?h=w:1==h?l=Fe(l,w):2==h&&(a=Fe(a,w+": "+r[++y]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}const pp=new nn("INJECTOR",-1);class zh{get(r,s=Wo){if(s===Wo){const a=new Error(`NullInjectorError: No provider for ${ye(r)}!`);throw a.name="NullInjectorError",a}return s}}const gp=new nn("Set Injector scope."),jl={},i_={};let bd;function mp(){return void 0===bd&&(bd=new zh),bd}function Kh(n,r=null,s=null,a){const l=qh(n,r,s,a);return l._resolveInjectorDefTypes(),l}function qh(n,r=null,s=null,a){return new yp(n,s,r||mp(),a)}class yp{constructor(r,s,a,l=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];s&&Vs(s,w=>this.processProvider(w,r,s)),Vs([r],w=>this.processInjectorType(w,[],h)),this.records.set(pp,da(void 0,this));const y=this.records.get(gp);this.scope=null!=y?y.value:null,this.source=l||("object"==typeof r?null:ye(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=Wo,a=Bt.Default){this.assertNotDestroyed();const l=Rt(this),h=jt(void 0);try{if(!(a&Bt.SkipSelf)){let w=this.records.get(r);if(void 0===w){const b=function Dp(n){return"function"==typeof n||"object"==typeof n&&n instanceof nn}(r)&&pn(r);w=b&&this.injectableDefInScope(b)?da(Ku(r),jl):null,this.records.set(r,w)}if(null!=w)return this.hydrate(r,w)}return(a&Bt.Self?mp():this.parent).get(r,s=a&Bt.Optional&&s===Wo?null:s)}catch(y){if("NullInjectorError"===y.name){if((y[hl]=y[hl]||[]).unshift(ye(r)),l)throw y;return function Sa(n,r,s,a){const l=n[hl];throw r[de]&&l.unshift(r[de]),n.message=function Ya(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let l=ye(r);if(Array.isArray(r))l=r.map(ye).join(" -> ");else if("object"==typeof r){let h=[];for(let y in r)if(r.hasOwnProperty(y)){let w=r[y];h.push(y+":"+("string"==typeof w?JSON.stringify(w):ye(w)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(P,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[hl]=null,n}(y,r,"R3InjectorError",this.source)}throw y}finally{jt(h),Rt(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,l)=>r.push(ye(l))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ze(205,!1)}processInjectorType(r,s,a){if(!(r=me(r)))return!1;let l=ct(r);const h=null==l&&r.ngModule||void 0,y=void 0===h?r:h,w=-1!==a.indexOf(y);if(void 0!==h&&(l=ct(h)),null==l)return!1;if(null!=l.imports&&!w){let W;a.push(y);try{Vs(l.imports,se=>{this.processInjectorType(se,s,a)&&(void 0===W&&(W=[]),W.push(se))})}finally{}if(void 0!==W)for(let se=0;se<W.length;se++){const{ngModule:Te,providers:Ke}=W[se];Vs(Ke,pt=>this.processProvider(pt,Te,Ke||Qt))}}this.injectorDefTypes.add(y);const b=_r(y)||(()=>new y);this.records.set(y,da(b,jl));const U=l.providers;if(null!=U&&!w){const W=r;Vs(U,se=>this.processProvider(se,W,U))}return void 0!==h&&void 0!==r.providers}processProvider(r,s,a){let l=Oc(r=me(r))?r:me(r&&r.provide);const h=function _p(n,r,s){return vp(n)?da(void 0,n.useValue):da($l(n),jl)}(r);if(Oc(r)||!0!==r.multi)this.records.get(l);else{let y=this.records.get(l);y||(y=da(void 0,jl,!0),y.factory=()=>Un(y.multi),this.records.set(l,y)),l=r,y.multi.push(r)}this.records.set(l,h)}hydrate(r,s){return s.value===jl&&(s.value=i_,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Ip(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=me(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Ku(n){const r=pn(n),s=null!==r?r.factory:_r(n);if(null!==s)return s;if(n instanceof nn)throw new Ze(204,!1);if(n instanceof Function)return function qu(n){const r=n.length;if(r>0)throw Bi(r,"?"),new Ze(204,!1);const s=function Wn(n){const r=n&&(n[zt]||n[An]);if(r){const s=function er(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ze(204,!1)}function $l(n,r,s){let a;if(Oc(n)){const l=me(n);return _r(l)||Ku(l)}if(vp(n))a=()=>me(n.useValue);else if(function s_(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Un(n.deps||[]));else if(function Rc(n){return!(!n||!n.useExisting)}(n))a=()=>cn(me(n.useExisting));else{const l=me(n&&(n.useClass||n.provide));if(!function wp(n){return!!n.deps}(n))return _r(l)||Ku(l);a=()=>new l(...Un(n.deps))}return a}function da(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function vp(n){return null!==n&&"object"==typeof n&&Ve in n}function Oc(n){return"function"==typeof n}let ha=(()=>{class n{static create(s,a){var l;if(Array.isArray(s))return Kh({name:""},a,s,"");{const h=null!==(l=s.name)&&void 0!==l?l:"";return Kh({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=Wo,n.NULL=new zh,n.\u0275prov=ht({token:n,providedIn:"any",factory:()=>cn(pp)}),n.__NG_ELEMENT_ID__=-1,n})();function Ap(n,r){Qi(gc(n)[1],ft())}function Sp(n){let r=function Jh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(fi(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ze(903,"");l=r.\u0275dir}if(l){if(s){a.push(l);const y=n;y.inputs=Ad(n.inputs),y.declaredInputs=Ad(n.declaredInputs),y.outputs=Ad(n.outputs);const w=l.hostBindings;w&&Tm(n,w);const b=l.viewQuery,U=l.contentQueries;if(b&&xp(n,b),U&&Pc(n,U),be(n.inputs,l.inputs),be(n.declaredInputs,l.declaredInputs),be(n.outputs,l.outputs),fi(l)&&l.data.animation){const W=n.data;W.animation=(W.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let y=0;y<h.length;y++){const w=h[y];w&&w.ngInherit&&w(n),w===Sp&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Mp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=jo(l.hostAttrs,s=jo(s,l.hostAttrs))}}(a)}function Ad(n){return n===fr?{}:n===Qt?[]:n}function xp(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Pc(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function Tm(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let Qo=null;function Zu(){if(!Qo){const n=On.Symbol;if(n&&n.iterator)Qo=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Qo=a)}}}return Qo}function Hl(n){return!!Sd(n)&&(Array.isArray(n)||!(n instanceof Map)&&Zu()in n)}function Sd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Va(n,r,s){return n[r]=s}function Xs(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function tf(n,r,s,a){const l=Q();return Xs(l,kr(),r)&&(ve(),La(oi(),l,n,r,s,a)),tf}function Rm(n,r,s,a,l,h,y,w){const b=Q(),U=ve(),W=n+20,se=U.firstCreatePass?function g_(n,r,s,a,l,h,y,w,b){const U=r.consts,W=ca(r,n,4,y||null,gr(U,w));wd(r,s,W,gr(U,b)),Qi(r,W);const se=W.tViews=kh(2,W,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U);return null!==r.queries&&(r.queries.template(r,W),se.queries=r.queries.embeddedTView(W)),W}(W,U,b,r,s,a,l,h,y):U.data[W];vn(se,!1);const Te=b[11].createComment("");fd(U,b,Te,se),es(Te,b),xc(b,b[W]=Uh(Te,b,Te,se)),Ds(se)&&Xf(U,b,se),null!=y&&vd(b,se,w)}function rf(n){return Hn(function si(){return C.lFrame.contextLView}(),20+n)}function zl(n,r=Bt.Default){const s=Q();return null===s?cn(n,r):dn(ft(),s,me(n),r)}function Vm(){throw new Error("invalid")}function qp(n,r,s){const a=Q();return Xs(a,kr(),r)&&function Do(n,r,s,a,l,h,y,w){const b=tt(r,s);let W,U=r.inputs;!w&&null!=U&&(W=U[a])?(dm(n,s,W,a,l),hi(r)&&function sm(n,r){const s=Cn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function ep(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=y?y(l,r.value||"",a):l,ur(h)?h.setProperty(b,a,l):go(a)||(b.setProperty?b.setProperty(a,l):b[a]=l))}(ve(),oi(),a,n,r,a[11],s,!1),qp}function Ei(n,r,s,a,l){const y=l?"class":"style";dm(n,s,r.inputs[y],y,a)}function Zp(n,r,s,a){const l=Q(),h=ve(),y=20+n,w=l[11],b=l[y]=Ec(w,r,function ec(){return C.lFrame.currentNamespace}()),U=h.firstCreatePass?function Jv(n,r,s,a,l,h,y){const w=r.consts,U=ca(r,n,2,l,gr(w,h));return wd(r,s,U,gr(w,y)),null!==U.attrs&&Cd(U,U.attrs,!1),null!==U.mergedAttrs&&Cd(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(y,h,l,0,r,s,a):h.data[y];vn(U,!0);const W=U.mergedAttrs;null!==W&&Ia(w,b,W);const se=U.classes;null!==se&&$u(w,b,se);const Te=U.styles;return null!==Te&&ju(w,b,Te),64!=(64&U.flags)&&fd(h,l,b,U),0===function rt(){return C.lFrame.elementDepthCount}()&&es(b,l),function tn(){C.lFrame.elementDepthCount++}(),Ds(U)&&(Xf(h,l,U),Ph(h,U,l)),null!==a&&vd(l,U),Zp}function Gi(){let n=ft();Yn()?Fr():(n=n.parent,vn(n,!1));const r=n;!function mr(){C.lFrame.elementDepthCount--}();const s=ve();return s.firstCreatePass&&(Qi(s,n),zi(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ga(n){return 0!=(16&n.flags)}(r)&&Ei(s,r,Q(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function _u(n){return 0!=(32&n.flags)}(r)&&Ei(s,r,Q(),r.stylesWithoutHost,!1),Gi}function cf(n,r,s,a){return Zp(n,r,s,a),Gi(),cf}function kd(n,r,s){const a=Q(),l=ve(),h=n+20,y=l.firstCreatePass?function D_(n,r,s,a,l){const h=r.consts,y=gr(h,a),w=ca(r,n,8,"ng-container",y);return null!==y&&Cd(w,y,!0),wd(r,s,w,gr(h,l)),null!==r.queries&&r.queries.elementStart(r,w),w}(h,l,a,r,s):l.data[h];vn(y,!0);const w=a[h]=a[11].createComment("");return fd(l,a,w,y),es(w,a),Ds(y)&&(Xf(l,a,y),Ph(l,y,a)),null!=s&&vd(a,y),kd}function df(){let n=ft();const r=ve();return Yn()?Fr():(n=n.parent,vn(n,!1)),r.firstCreatePass&&(Qi(r,n),zi(n)&&r.queries.elementEnd(n)),df}function Bm(){return Q()}function Yp(n){return!!n&&"function"==typeof n.then}function C_(n){return!!n&&"function"==typeof n.subscribe}const jm=C_;function Qp(n,r,s,a){const l=Q(),h=ve(),y=ft();return function b_(n,r,s,a,l,h,y,w){const b=Ds(a),W=n.firstCreatePass&&fp(n),se=r[8],Te=Gh(r);let Ke=!0;if(3&a.type||w){const Zt=tt(a,r),fn=w?w(Zt):Zt,Ct=Te.length,Sn=w?Dr=>w(M(Dr[a.index])):a.index;if(ur(s)){let Dr=null;if(!w&&b&&(Dr=function du(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const y=l[h];if(y===s&&l[h+1]===a){const w=r[7],b=l[h+2];return w.length>b?w[b]:null}"string"==typeof y&&(h+=2)}return null}(n,r,l,a.index)),null!==Dr)(Dr.__ngLastListenerFn__||Dr).__ngNextListenerFn__=h,Dr.__ngLastListenerFn__=h,Ke=!1;else{h=hu(a,r,se,h,!1);const ci=s.listen(fn,l,h);Te.push(h,ci),W&&W.push(l,Sn,Ct,Ct+1)}}else h=hu(a,r,se,h,!0),fn.addEventListener(l,h,y),Te.push(h),W&&W.push(l,Sn,Ct,y)}else h=hu(a,r,se,h,!1);const pt=a.outputs;let Lt;if(Ke&&null!==pt&&(Lt=pt[l])){const Zt=Lt.length;if(Zt)for(let fn=0;fn<Zt;fn+=2){const va=r[Lt[fn]][Lt[fn+1]].subscribe(h),Wd=Te.length;Te.push(h,va),W&&W.push(l,a.index,Wd,-(Wd+1))}}}(h,l,l[11],y,n,r,!!s,a),Qp}function pa(n,r,s,a){try{return!1!==s(a)}catch(l){return Wh(n,l),!1}}function hu(n,r,s,a,l){return function h(y){if(y===Function)return a;const w=2&n.flags?Cn(n.index,r):r;0==(32&r[2])&&Dd(w);let b=pa(r,0,a,y),U=h.__ngNextListenerFn__;for(;U;)b=pa(r,0,U,y)&&b,U=U.__ngNextListenerFn__;return l&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function Nd(n=1){return function mu(n){return(C.lFrame.contextLView=function ea(n,r){for(;n>0;)r=r[15],n--;return r}(n,C.lFrame.contextLView))[8]}(n)}function T_(n,r){let s=null;const a=function kl(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let l=0;l<r.length;l++){const h=r[l];if("*"!==h){if(null===a?Dc(n,h,!0):Ly(a,h))return l}else s=l}return s}function $m(n){const r=Q()[16][6];if(!r.projection){const a=r.projection=Bi(n?n.length:1,null),l=a.slice();let h=r.child;for(;null!==h;){const y=n?T_(h,n):0;null!==y&&(l[y]?l[y].projectionNext=h:a[y]=h,l[y]=h),h=h.next}}}function Jp(n,r=0,s){const a=Q(),l=ve(),h=ca(l,20+n,16,null,s||null);null===h.projection&&(h.projection=r),Fr(),64!=(64&h.flags)&&function Py(n,r,s){$f(r[11],0,r,s,Fg(n,s,r),Uu(s.parent||r[6],s,r))}(l,a,h)}function ig(n,r,s,a,l){const h=n[s+1],y=null===r;let w=a?Ys(h):Zo(h),b=!1;for(;0!==w&&(!1===b||y);){const W=n[w+1];Kl(n[w],r)&&(b=!0,n[w+1]=a?Qs(W):Nl(W)),w=a?Ys(W):Zo(W)}b&&(n[s+1]=a?Nl(h):Qs(h))}function Kl(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&_o(n,r)>=0}function gf(n,r){return function ma(n,r,s,a){const l=Q(),h=ve(),y=function yr(n){const r=C.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function lg(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[bi()],y=function qm(n,r){return r>=n.expandoStartIndex}(n,s);(function Bd(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!y&&(r=!1),r=function S_(n,r,s,a){const l=function Xo(n){const r=C.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=jc(s=cg(null,n,r,s,a),r.attrs,a),h=null);else{const y=r.directiveStylingLast;if(-1===y||n[y]!==l)if(s=cg(l,n,r,s,a),null===h){let b=function M_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Zo(a))return n[Ys(a)]}(n,r,a);void 0!==b&&Array.isArray(b)&&(b=cg(null,n,r,b[1],a),b=jc(b,r.attrs,a),function Zm(n,r,s,a){n[Ys(s?r.classBindings:r.styleBindings)]=a}(n,r,a,b))}else h=function x_(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=jc(a,n[h].hostAttrs,s);return jc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function ng(n,r,s,a,l,h){let y=h?r.classBindings:r.styleBindings,w=Ys(y),b=Zo(y);n[a]=s;let W,U=!1;if(Array.isArray(s)){const se=s;W=se[1],(null===W||_o(se,W)>0)&&(U=!0)}else W=s;if(l)if(0!==b){const Te=Ys(n[w+1]);n[a+1]=Cc(Te,w),0!==Te&&(n[Te+1]=bc(n[Te+1],a)),n[w+1]=function Gg(n,r){return 131071&n|r<<17}(n[w+1],a)}else n[a+1]=Cc(w,0),0!==w&&(n[w+1]=bc(n[w+1],a)),w=a;else n[a+1]=Cc(b,0),0===w?w=a:n[b+1]=bc(n[b+1],a),b=a;U&&(n[a+1]=Nl(n[a+1])),ig(n,W,a,!0),ig(n,W,a,!1),function rg(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&_o(h,r)>=0&&(s[a+1]=Qs(s[a+1]))}(r,W,n,a,h),y=Cc(w,b),h?r.classBindings=y:r.styleBindings=y}(l,h,r,s,y,a)}}(h,n,y,a),r!==Pn&&Xs(l,y,r)&&function dg(n,r,s,a,l,h,y,w){if(!(3&r.type))return;const b=n.data,U=b[w+1];Ud(function Kf(n){return 1==(1&n)}(U)?hg(b,r,s,l,Zo(U),y):void 0)||(Ud(h)||function Hg(n){return 2==(2&n)}(U)&&(h=hg(b,null,s,l,w,y)),function Pl(n,r,s,a,l){const h=ur(n);if(r)l?h?n.addClass(s,a):s.classList.add(a):h?n.removeClass(s,a):s.classList.remove(a);else{let y=-1===a.indexOf("-")?void 0:it.DashCase;if(null==l)h?n.removeStyle(s,a,y):s.style.removeProperty(a);else{const w="string"==typeof l&&l.endsWith("!important");w&&(l=l.slice(0,-10),y|=it.Important),h?n.setStyle(s,a,l,y):s.style.setProperty(a,l,w?"important":"")}}}(a,y,Je(bi(),s),l,h))}(h,h.data[bi()],l,l[11],n,l[y+1]=function fg(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ye(Lo(n)))),n}(r,s),a,y)}(n,r,null,!0),gf}function cg(n,r,s,a,l){let h=null;const y=s.directiveEnd;let w=s.directiveStylingLast;for(-1===w?w=s.directiveStart:w++;w<y&&(h=r[w],a=jc(a,h.hostAttrs,l),h!==n);)w++;return null!==n&&(s.directiveStylingLast=w),a}function jc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const y=r[h];"number"==typeof y?l=y:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ji(n,y,!!s||r[++h]))}return void 0===n?null:n}function hg(n,r,s,a,l,h){const y=null===r;let w;for(;l>0;){const b=n[l],U=Array.isArray(b),W=U?b[1]:b,se=null===W;let Te=s[l+1];Te===Pn&&(Te=se?Qt:void 0);let Ke=se?ao(Te,a):W===a?Te:void 0;if(U&&!Ud(Ke)&&(Ke=ao(b,a)),Ud(Ke)&&(w=Ke,y))return w;const pt=n[l+1];l=y?Ys(pt):Zo(pt)}if(null!==r){let b=h?r.residualClasses:r.residualStyles;null!=b&&(w=ao(b,a))}return w}function Ud(n){return void 0!==n}function Xm(n,r=""){const s=Q(),a=ve(),l=n+20,h=a.firstCreatePass?ca(a,l,1,r,null):a.data[l],y=s[l]=function vc(n,r){return ur(n)?n.createText(r):n.createTextNode(r)}(s[11],r);fd(a,s,y,h),vn(h,!1)}function mf(n){return _a("",n,""),mf}function _a(n,r,s){const a=Q(),l=function Wl(n,r,s,a){return Xs(n,kr(),s)?r+Le(s)+a:Pn}(a,n,r,s);return l!==Pn&&lu(a,bi(),l),_a}const ol=void 0;var Zl=["en",[["a","p"],["AM","PM"],ol],[["AM","PM"],ol,ol],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ol,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ol,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ol,"{1} 'at' {0}",ol],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hy(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Us={};function vf(n){const r=function vg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Wc(r);if(s)return s;const a=r.split("-")[0];if(s=Wc(a),s)return s;if("en"===a)return Zl;throw new Error(`Missing locale data for the locale "${n}".`)}function Gc(n){return vf(n)[xn.PluralCase]}function Wc(n){return n in Us||(Us[n]=On.ng&&On.ng.common&&On.ng.common.locales&&On.ng.common.locales[n]),Us[n]}var xn=(()=>((xn=xn||{})[xn.LocaleId=0]="LocaleId",xn[xn.DayPeriodsFormat=1]="DayPeriodsFormat",xn[xn.DayPeriodsStandalone=2]="DayPeriodsStandalone",xn[xn.DaysFormat=3]="DaysFormat",xn[xn.DaysStandalone=4]="DaysStandalone",xn[xn.MonthsFormat=5]="MonthsFormat",xn[xn.MonthsStandalone=6]="MonthsStandalone",xn[xn.Eras=7]="Eras",xn[xn.FirstDayOfWeek=8]="FirstDayOfWeek",xn[xn.WeekendRange=9]="WeekendRange",xn[xn.DateFormat=10]="DateFormat",xn[xn.TimeFormat=11]="TimeFormat",xn[xn.DateTimeFormat=12]="DateTimeFormat",xn[xn.NumberSymbols=13]="NumberSymbols",xn[xn.NumberFormats=14]="NumberFormats",xn[xn.CurrencyCode=15]="CurrencyCode",xn[xn.CurrencySymbol=16]="CurrencySymbol",xn[xn.CurrencyName=17]="CurrencyName",xn[xn.Currencies=18]="Currencies",xn[xn.Directionality=19]="Directionality",xn[xn.PluralCase=20]="PluralCase",xn[xn.ExtraData=21]="ExtraData",xn))();const Kc="en-US";let fy=Kc;function Q_(n,r,s,a,l){if(n=me(n),Array.isArray(n))for(let h=0;h<n.length;h++)Q_(n[h],r,s,a,l);else{const h=ve(),y=Q();let w=Oc(n)?n:me(n.provide),b=$l(n);const U=ft(),W=1048575&U.providerIndexes,se=U.directiveStart,Te=U.providerIndexes>>20;if(Oc(n)||!n.multi){const Ke=new io(b,l,zl),pt=J_(w,r,l?W:W+Te,se);-1===pt?(De(S(U,y),h,w),X_(h,n,r.length),r.push(w),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(Ke),y.push(Ke)):(s[pt]=Ke,y[pt]=Ke)}else{const Ke=J_(w,r,W+Te,se),pt=J_(w,r,W,W+Te),Lt=Ke>=0&&s[Ke],Zt=pt>=0&&s[pt];if(l&&!Zt||!l&&!Lt){De(S(U,y),h,w);const fn=function hw(n,r,s,a,l){const h=new io(n,s,zl);return h.multi=[],h.index=r,h.componentProviders=0,p0(h,l,a&&!s),h}(l?dw:cw,s.length,l,a,b);!l&&Zt&&(s[pt].providerFactory=fn),X_(h,n,r.length,0),r.push(w),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(fn),y.push(fn)}else X_(h,n,Ke>-1?Ke:pt,p0(s[l?pt:Ke],b,!l&&a));!l&&a&&Zt&&s[pt].componentProviders++}}}function X_(n,r,s,a){const l=Oc(r),h=function Ep(n){return!!n.useClass}(r);if(l||h){const b=(h?me(r.useClass):r).prototype.ngOnDestroy;if(b){const U=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const W=U.indexOf(s);-1===W?U.push(s,[a,b]):U[W+1].push(a,b)}else U.push(s,b)}}}function p0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function J_(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function cw(n,r,s,a){return ev(this.multi,[])}function dw(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Es(s,s[1],this.providerFactory.index,a);h=w.slice(0,y),ev(l,h);for(let b=y;b<w.length;b++)h.push(w[b])}else h=[],ev(l,h);return h}function ev(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function g0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function lw(n,r,s){const a=ve();if(a.firstCreatePass){const l=fi(n);Q_(s,a.data,a.blueprint,l,!0),Q_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class m0{}class gw{resolveComponentFactory(r){throw function pw(n){const r=Error(`No component factory found for ${ye(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ey=(()=>{class n{}return n.NULL=new gw,n})();function mw(){return bf(ft(),Q())}function bf(n,r){return new Cg(tt(n,r))}let Cg=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=mw,n})();function yw(n){return n instanceof Cg?n.nativeElement:n}class _0{}let _w=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ew(){const n=Q(),s=Cn(ft().index,n);return function vw(n){return n[11]}(ar(s)?s:n)}(),n})(),ww=(()=>{class n{}return n.\u0275prov=ht({token:n,providedIn:"root",factory:()=>null}),n})();class v0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const E0=new v0("13.3.2"),tv={};function wy(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(M(h)),_i(h))for(let w=10;w<h.length;w++){const b=h[w],U=b[1].firstChild;null!==U&&wy(b[1],b,U,a)}const y=s.type;if(8&y)wy(n,r,s.child,a);else if(32&y){const w=hn(s,r);let b;for(;b=w();)a.push(b)}else if(16&y){const w=Eh(r,s);if(Array.isArray(w))a.push(...w);else{const b=Si(r[16]);wy(b[1],b,w,a,!0)}}s=l?s.projectionNext:s.next}return a}class bg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return wy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(_i(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Bf(r,a),Ho(s,a))}this._attachedToViewContainer=!1}kg(this._lView[1],this._lView)}onDestroy(r){rm(this._lView[1],this._lView,null,r)}markForCheck(){Dd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function n_(n,r,s){mi(!0);try{cp(n,r,s)}finally{mi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ze(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Uf(n,r){wc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ze(902,"");this._appRef=r}}class Iw extends bg{constructor(r){super(r),this._view=r}detectChanges(){$h(this._view)}checkNoChanges(){!function dp(n){mi(!0);try{$h(n)}finally{mi(!1)}}(this._view)}get context(){return null}}class w0 extends Ey{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Me(r);return new nv(s,this.ngModule)}}function I0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class nv extends m0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function gd(n){return n.map(Vy).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return I0(this.componentDef.inputs)}get outputs(){return I0(this.componentDef.outputs)}create(r,s,a,l){const h=(l=l||this.ngModule)?function Cw(n,r){return{get:(s,a,l)=>{const h=n.get(s,tv,l);return h!==tv||a===tv?h:r.get(s,a,l)}}}(r,l.injector):r,y=h.get(_0,x),w=h.get(ww,null),b=y.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",W=a?function nm(n,r,s){if(ur(n))return n.selectRootElement(r,s===Rn.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(b,a,this.componentDef.encapsulation):Ec(y.createRenderer(null,this.componentDef),U,function Dw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(U)),se=this.componentDef.onPush?576:528,Te=function bm(n,r){return{components:[],scheduler:n||Ff,clean:Hh,playerHandler:r||null,flags:0}}(),Ke=kh(0,null,null,1,0,null,null,null,null,null),pt=Fa(null,Ke,Te,se,null,null,y,b,w,h);let Lt,Zt;fo(pt);try{const fn=function Cm(n,r,s,a,l,h){const y=s[1];s[20]=n;const b=ca(y,20,2,"#host",null),U=b.mergedAttrs=r.hostAttrs;null!==U&&(Cd(b,U,!0),null!==n&&(Ia(l,n,U),null!==b.classes&&$u(l,n,b.classes),null!==b.styles&&ju(l,n,b.styles)));const W=a.createRenderer(n,r),se=Fa(s,tm(r),null,r.onPush?64:16,s[20],b,a,W,h||null,null);return y.firstCreatePass&&(De(S(b,s),y,r.type),sp(y,b),Lh(b,s.length,1)),xc(s,se),s[20]=se}(W,this.componentDef,pt,y,b);if(W)if(a)Ia(b,W,["ng-version",E0.full]);else{const{attrs:Ct,classes:Sn}=function Hu(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!qo(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Ct&&Ia(b,W,Ct),Sn&&Sn.length>0&&$u(b,W,Sn.join(" "))}if(Zt=Qn(Ke,20),void 0!==s){const Ct=Zt.projection=[];for(let Sn=0;Sn<this.ngContentSelectors.length;Sn++){const Dr=s[Sn];Ct.push(null!=Dr?Array.from(Dr):null)}}Lt=function Xh(n,r,s,a,l){const h=s[1],y=function rp(n,r,s){const a=ft();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),op(n,a,r,uu(n,r,1,null),s));const l=Es(r,n,a.directiveStart,a);es(l,r);const h=tt(a,r);return h&&es(h,r),l}(h,s,r);if(a.components.push(y),n[8]=y,l&&l.forEach(b=>b(y,r)),r.contentQueries){const b=ft();r.contentQueries(1,y,b.directiveStart)}const w=ft();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ao(w.index),ip(s[1],w,0,w.directiveStart,w.directiveEnd,r),um(r,y)),y}(fn,this.componentDef,pt,Te,[Ap]),Sc(Ke,pt,null)}finally{ro()}return new Tw(this.componentType,Lt,bf(Zt,pt),pt,Zt)}}class Tw extends class fw{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new Iw(l),this.componentType=r}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Tf{}class D0{}const Af=new Map;class T0 extends Tf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new w0(this);const a=en(r);this._bootstrapComponents=f(a.bootstrap),this._r3Injector=qh(r,s,[{provide:Tf,useValue:this},{provide:Ey,useValue:this.componentFactoryResolver}],ye(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=ha.THROW_IF_NOT_FOUND,a=Bt.Default){return r===ha||r===Tf||r===pp?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class rv extends D0{constructor(r){super(),this.moduleType=r,null!==en(r)&&function Sw(n){const r=new Set;!function s(a){const l=en(a,!0),h=l.id;null!==h&&(function C0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${ye(r)} vs ${ye(r.name)}`)}(h,Af.get(h),a),Af.set(h,a));const y=f(l.imports);for(const w of y)r.has(w)||(r.add(w),s(w))}(n)}(r)}create(r){return new T0(this.moduleType,r)}}function A0(n,r,s){const a=Kn()+n,l=Q();return l[a]===Pn?Va(l,a,s?r.call(s):r()):function Gl(n,r){return n[r]}(l,a)}function S0(n,r,s,a){return x0(Q(),Kn(),n,r,s,a)}function M0(n,r,s,a,l){return function R0(n,r,s,a,l,h,y){const w=r+s;return function cu(n,r,s,a){const l=Xs(n,r,s);return Xs(n,r+1,a)||l}(n,w,l,h)?Va(n,w+2,y?a.call(y,l,h):a(l,h)):Tg(n,w+2)}(Q(),Kn(),n,r,s,a,l)}function Tg(n,r){const s=n[r];return s===Pn?void 0:s}function x0(n,r,s,a,l,h){const y=r+s;return Xs(n,y,l)?Va(n,y+1,h?a.call(h,l):a(l)):Tg(n,y+1)}function N0(n,r){const s=ve();let a;const l=n+20;s.firstCreatePass?(a=function Fw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=_r(a.type)),y=jt(zl);try{const w=As(!1),b=h();return As(w),function Om(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,Q(),l,b),b}finally{jt(y)}}function F0(n,r,s){const a=n+20,l=Q(),h=Hn(l,a);return function Ag(n,r){return n[1].data[r].pure}(l,a)?x0(l,Kn(),r,h.transform,s,h):h.transform(s)}function iv(n){return r=>{setTimeout(n,void 0,r)}}const ul=class jw extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var l,h,y;let w=r,b=s||(()=>null),U=a;if(r&&"object"==typeof r){const se=r;w=null===(l=se.next)||void 0===l?void 0:l.bind(se),b=null===(h=se.error)||void 0===h?void 0:h.bind(se),U=null===(y=se.complete)||void 0===y?void 0:y.bind(se)}this.__isAsync&&(b=iv(b),w&&(w=iv(w)),U&&(U=iv(U)));const W=super.subscribe({next:w,error:b,complete:U});return r instanceof H.w0&&r.add(W),W}};function $w(){return this._results[Zu()]()}class sv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Zu(),a=sv.prototype;a[s]||(a[s]=$w)}get changes(){return this._changes||(this._changes=new ul)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=Ji(r);(this._changesDetected=!function Mo(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Sg=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ww,n})();const Hw=Sg,Gw=class extends Hw{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=Fa(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(a[19]=h.createEmbeddedView(s)),Sc(s,a,r),new bg(a)}};function Ww(){return Iy(ft(),Q())}function Iy(n,r){return 4&n.type?new Gw(r,n,bf(n,r)):null}let Dy=(()=>{class n{}return n.__NG_ELEMENT_ID__=zw,n})();function zw(){return U0(ft(),Q())}const Kw=Dy,L0=class extends Kw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return bf(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){const r=ie(this._hostTNode,this._hostLView);if(Da(r)){const s=Fs(r,this._hostLView),a=Vr(r);return new yo(s[1].data[a+8],s)}return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=V0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const l=r.createEmbeddedView(s||{});return this.insert(l,a),l}createComponent(r,s,a,l,h){const y=r&&!function Ls(n){return"function"==typeof n}(r);let w;if(y)w=s;else{const se=s||{};w=se.index,a=se.injector,l=se.projectableNodes,h=se.ngModuleRef}const b=y?r:new nv(Me(r)),U=a||this.parentInjector;if(!h&&null==b.ngModule){const Te=(y?U:this.parentInjector).get(Tf,null);Te&&(h=Te)}const W=b.create(U,l,void 0,h);return this.insert(W.hostView,w),W}insert(r,s){const a=r._lView,l=a[1];if(function sr(n){return _i(n[3])}(a)){const W=this.indexOf(r);if(-1!==W)this.detach(W);else{const se=a[3],Te=new L0(se,se[6],se[3]);Te.detach(Te.indexOf(r))}}const h=this._adjustIndex(s),y=this._lContainer;!function xy(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Ta(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const y=r[17];null!==y&&s!==y&&function Ry(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(y,r);const w=r[19];null!==w&&w.insertView(n),r[2]|=128}(l,a,y,h);const w=pd(h,y),b=a[11],U=yh(b,y[7]);return null!==U&&function cd(n,r,s,a,l,h){a[0]=l,a[6]=r,wc(n,a,s,1,l,h)}(l,y[6],b,a,U,w),r.attachToViewContainerRef(),Ta(ov(y),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=V0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Bf(this._lContainer,s);a&&(Ho(ov(this._lContainer),s),kg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Bf(this._lContainer,s);return a&&null!=Ho(ov(this._lContainer),s)?new bg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function V0(n){return n[8]}function ov(n){return n[8]||(n[8]=[])}function U0(n,r){let s;const a=r[n.index];if(_i(a))s=a;else{let l;if(8&n.type)l=M(a);else{const h=r[11];l=h.createComment("");const y=tt(n,r);Vu(h,yh(h,y),l,function hd(n,r){return ur(n)?n.nextSibling(r):r.nextSibling}(h,y),!1)}r[n.index]=s=Uh(a,r,l,n),xc(r,s)}return new L0(s,n,r)}class av{constructor(r){this.queryList=r,this.matches=null}clone(){return new av(this.queryList)}setDirty(){this.queryList.setDirty()}}class uv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const y=s.getByIndex(h);l.push(this.queries[y.indexInDeclarationView].clone())}return new uv(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==q0(r,s).matches&&this.queries[s].setDirty()}}class B0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class lv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new lv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class cv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new cv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,Yw(s,h)),this.matchTNodeWithReadOption(r,s,Ur(s,r,h,!1,!1))}else a===Sg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Ur(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Cg||l===Dy||l===Sg&&4&s.type)this.addMatch(s.index,-2);else{const h=Ur(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Yw(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function Xw(n,r,s,a){return-1===s?function Qw(n,r){return 11&n.type?bf(n,r):4&n.type?Iy(n,r):null}(r,n):-2===s?function Jw(n,r,s){return s===Cg?bf(r,n):s===Sg?Iy(r,n):s===Dy?U0(r,n):void 0}(n,r,a):Es(n,n[1],s,r)}function j0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,y=s.matches,w=[];for(let b=0;b<y.length;b+=2){const U=y[b];w.push(U<0?null:Xw(r,h[U],y[b+1],s.metadata.read))}l.matches=w}return l.matches}function dv(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const y=j0(n,r,l,s);for(let w=0;w<h.length;w+=2){const b=h[w];if(b>0)a.push(y[w/2]);else{const U=h[w+1],W=r[-b];for(let se=10;se<W.length;se++){const Te=W[se];Te[17]===Te[3]&&dv(Te[1],Te,U,a)}if(null!==W[9]){const se=W[9];for(let Te=0;Te<se.length;Te++){const Ke=se[Te];dv(Ke[1],Ke,U,a)}}}}}return a}function $0(n){const r=Q(),s=ve(),a=Ea();ja(a+1);const l=q0(s,a);if(n.dirty&&Mn(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?dv(s,r,a,[]):j0(s,r,l,a);n.reset(h,yw),n.notifyOnChanges()}return!0}return!1}function H0(n,r,s){const a=ve();a.firstCreatePass&&(K0(a,new B0(n,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),z0(a,Q(),r)}function G0(n,r,s,a){const l=ve();if(l.firstCreatePass){const h=ft();K0(l,new B0(r,s,a),h.index),function tI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}z0(l,Q(),s)}function W0(){return function eI(n,r){return n[19].queries[r].queryList}(Q(),Ea())}function z0(n,r,s){const a=new sv(4==(4&s));rm(n,r,a,a.destroy),null===r[19]&&(r[19]=new uv),r[19].queries.push(new av(a))}function K0(n,r,s){null===n.queries&&(n.queries=new lv),n.queries.track(new cv(r,s))}function q0(n,r){return n.queries.getByIndex(r)}function Z0(n,r){return Iy(n,r)}function Ty(...n){}const hE=new nn("Application Initializer");let yv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Ty,this.reject=Ty,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Yp(h))s.push(h);else if(jm(h)){const y=new Promise((w,b)=>{h.subscribe({complete:w,error:b})});s.push(y)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(cn(hE,8))},n.\u0275prov=ht({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fE=new nn("AppId",{providedIn:"root",factory:function pE(){return`${_v()}${_v()}${_v()}`}});function _v(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gE=new nn("Platform Initializer"),mE=new nn("Platform ID"),yE=new nn("appBootstrapListener");let _E=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ht({token:n,factory:n.\u0275fac}),n})();const vv=new nn("LocaleId",{providedIn:"root",factory:()=>lr(vv,Bt.Optional|Bt.SkipSelf)||function _I(){return"undefined"!=typeof $localize&&$localize.locale||Kc}()}),vI=new nn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class EI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let wI=(()=>{class n{compileModuleSync(s){return new rv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=f(en(s).declarations).reduce((y,w)=>{const b=Me(w);return b&&y.push(new nv(b)),y},[]);return new EI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ht({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DI=(()=>Promise.resolve(0))();function Ev(n){"undefined"==typeof Zone?DI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ul(!1),this.onMicrotaskEmpty=new ul(!1),this.onStable=new ul(!1),this.onError=new ul(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function CI(){let n=On.requestAnimationFrame,r=On.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function AI(n){const r=()=>{!function TI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(On,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Iv(n),n.isCheckStableRunning=!0,wv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Iv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,y,w)=>{try{return vE(n),s.invokeTask(l,h,y,w)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),EE(n)}},onInvoke:(s,a,l,h,y,w,b)=>{try{return vE(n),s.invoke(l,h,y,w,b)}finally{n.shouldCoalesceRunChangeDetection&&r(),EE(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,Iv(n),wv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+l,r,bI,Ty,Ty);try{return h.runTask(y,s,a)}finally{h.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const bI={};function wv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Iv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function vE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function EE(n){n._nesting--,wv(n)}class SI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ul,this.onMicrotaskEmpty=new ul,this.onStable=new ul,this.onError=new ul}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}let wE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pu.assertNotInAngularZone(),Ev(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ev(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(cn(pu))},n.\u0275prov=ht({token:n,factory:n.\u0275fac}),n})(),IE=(()=>{class n{constructor(){this._applications=new Map,Dv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Dv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ht({token:n,factory:n.\u0275fac}),n})();class MI{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function xI(n){Dv=n}let gu,Dv=new MI;const DE=new nn("AllowMultipleToken");class PI{constructor(r,s){this.name=r,this.token=s}}function CE(n,r,s=[]){const a=`Platform: ${r}`,l=new nn(a);return(h=[])=>{let y=bE();if(!y||y.injector.get(DE,!1))if(n)n(s.concat(h).concat({provide:l,useValue:!0}));else{const w=s.concat(h).concat({provide:l,useValue:!0},{provide:gp,useValue:"platform"});!function kI(n){if(gu&&!gu.destroyed&&!gu.injector.get(DE,!1))throw new Ze(400,"");gu=n.get(TE);const r=n.get(gE,null);r&&r.forEach(s=>s())}(ha.create({providers:w,name:a}))}return function NI(n){const r=bE();if(!r)throw new Ze(401,"");return r}()}}function bE(){return gu&&!gu.destroyed?gu:null}let TE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const w=function FI(n,r){let s;return s="noop"===n?new SI:("zone.js"===n?void 0:n)||new pu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),b=[{provide:pu,useValue:w}];return w.run(()=>{const U=ha.create({providers:b,parent:this.injector,name:s.moduleType.name}),W=s.create(U),se=W.injector.get(ui,null);if(!se)throw new Ze(402,"");return w.runOutsideAngular(()=>{const Te=w.onError.subscribe({next:Ke=>{se.handleError(Ke)}});W.onDestroy(()=>{bv(this._modules,W),Te.unsubscribe()})}),function LI(n,r,s){try{const a=s();return Yp(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(se,w,()=>{const Te=W.injector.get(yv);return Te.runInitializers(),Te.donePromise.then(()=>(function G_(n){gt(n,"Expected localeId to be defined"),"string"==typeof n&&(fy=n.toLowerCase().replace(/_/g,"-"))}(W.injector.get(vv,Kc)||Kc),this._moduleDoBootstrap(W),W))})})}bootstrapModule(s,a=[]){const l=AE({},a);return function RI(n,r,s){const a=new rv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Cv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Ze(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ze(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(cn(ha))},n.\u0275prov=ht({token:n,factory:n.\u0275fac}),n})();function AE(n,r){return Array.isArray(r)?r.reduce(AE,n):Object.assign(Object.assign({},n),r)}let Cv=(()=>{class n{constructor(s,a,l,h,y){this._zone=s,this._injector=a,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new Z.y(U=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{U.next(this._stable),U.complete()})}),b=new Z.y(U=>{let W;this._zone.runOutsideAngular(()=>{W=this._zone.onStable.subscribe(()=>{pu.assertNotInAngularZone(),Ev(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,U.next(!0))})})});const se=this._zone.onUnstable.subscribe(()=>{pu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{U.next(!1)}))});return()=>{W.unsubscribe(),se.unsubscribe()}});this.isStable=(0,_e.T)(w,b.pipe((0,pe.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new Ze(405,"");let l;l=s instanceof m0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(l.componentType);const h=function OI(n){return n.isBoundToModule}(l)?void 0:this._injector.get(Tf),w=l.create(ha.NULL,[],a||l.selector,h),b=w.location.nativeElement,U=w.injector.get(wE,null),W=U&&w.injector.get(IE);return U&&W&&W.registerApplication(b,U),w.onDestroy(()=>{this.detachView(w.hostView),bv(this.components,w),W&&W.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ze(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;bv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(yE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(cn(pu),cn(ha),cn(ui),cn(Ey),cn(yv))},n.\u0275prov=ht({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let ME=!0,xE=!1;function UI(){return xE=!0,ME}function BI(){if(xE)throw new Error("Cannot enable prod mode after platform setup.");ME=!1}let jI=(()=>{class n{}return n.__NG_ELEMENT_ID__=$I,n})();function $I(n){return function HI(n,r,s){if(hi(n)&&!s){const a=Cn(n.index,r);return new bg(a,a)}return 47&n.type?new bg(r[16],r):null}(ft(),Q(),16==(16&n))}class kE{constructor(){}supports(r){return Hl(r)}create(r){return new ZI(r)}}const qI=(n,r)=>r;class ZI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const y=!a||s&&s.currentIndex<FE(a,l,h)?s:a,w=FE(y,l,h),b=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{h||(h=[]);const U=w-l,W=b-l;if(U!=W){for(let Te=0;Te<U;Te++){const Ke=Te<h.length?h[Te]:h[Te]=0,pt=Ke+Te;W<=pt&&pt<U&&(h[Te]=Ke+1)}h[y.previousIndex]=W-U}}w!==b&&r(y,w,b)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Hl(r))throw new Ze(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let w=0;w<this.length;w++)h=r[w],y=this._trackByFn(w,h),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,h,y,w)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,y,w),a=!0),s=s._next}else l=0,function p_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Zu()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,w=>{y=this._trackByFn(l,w),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,w,y,l)),Object.is(s.item,w)||this._addIdentityChange(s,w)):(s=this._mismatch(s,w,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new YI(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new NE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new NE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class YI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class NE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new QI,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class LE{constructor(){}supports(r){return r instanceof Map||Sd(r)}create(){return new XI}}class XI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Sd(r)))throw new Ze(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,y=l._next;return h&&(h._next=y),y&&(y._prev=h),l._next=null,l._prev=null,l}const a=new JI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class JI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VE(){return new xv([new kE])}let xv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||VE()),deps:[[n,new vo,new lo]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Ze(901,"")}}return n.\u0275prov=ht({token:n,providedIn:"root",factory:VE}),n})();function UE(){return new Rv([new LE])}let Rv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||UE()),deps:[[n,new vo,new lo]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(a)return a;throw new Ze(901,"")}}return n.\u0275prov=ht({token:n,providedIn:"root",factory:UE}),n})();const nD=CE(null,"core",[{provide:mE,useValue:"unknown"},{provide:TE,deps:[ha]},{provide:IE,deps:[]},{provide:_E,deps:[]}]);let rD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(cn(Cv))},n.\u0275mod=He({type:n}),n.\u0275inj=_n({}),n})()},3075:(Pt,We,R)=>{R.d(We,{Cf:()=>Le,F:()=>Fn,Fj:()=>Ge,JJ:()=>Bt,JL:()=>un,JU:()=>ye,Kr:()=>Ki,NI:()=>gn,On:()=>hi,Q7:()=>pi,UX:()=>Mn,YN:()=>as,_Y:()=>Ds,c5:()=>Je,cw:()=>ni,kI:()=>$,oH:()=>Tt,sg:()=>$n,u5:()=>Cn});var p=R(5e3),H=R(9808),Z=R(8996),_e=R(4128),pe=R(4004);let we=(()=>{class k{constructor(C,q){this._renderer=C,this._elementRef=q,this.onChange=rt=>{},this.onTouched=()=>{}}setProperty(C,q){this._renderer.setProperty(this._elementRef.nativeElement,C,q)}registerOnTouched(C){this.onTouched=C}registerOnChange(C){this.onChange=C}setDisabledState(C){this.setProperty("disabled",C)}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(p.Qsj),p.Y36(p.SBq))},k.\u0275dir=p.lG2({type:k}),k})(),be=(()=>{class k extends we{}return k.\u0275fac=function(){let A;return function(q){return(A||(A=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,features:[p.qOj]}),k})();const ye=new p.OlP("NgValueAccessor"),re={provide:ye,useExisting:(0,p.Gpc)(()=>Ge),multi:!0},je=new p.OlP("CompositionEventMode");let Ge=(()=>{class k extends we{constructor(C,q,rt){super(C,q),this._compositionMode=rt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function me(){const k=(0,H.q)()?(0,H.q)().getUserAgent():"";return/android (\d+)/.test(k.toLowerCase())}())}writeValue(C){this.setProperty("value",null==C?"":C)}_handleInput(C){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(C)}_compositionStart(){this._composing=!0}_compositionEnd(C){this._composing=!1,this._compositionMode&&this.onChange(C)}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(je,8))},k.\u0275dir=p.lG2({type:k,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(C,q){1&C&&p.NdJ("input",function(tn){return q._handleInput(tn.target.value)})("blur",function(){return q.onTouched()})("compositionstart",function(){return q._compositionStart()})("compositionend",function(tn){return q._compositionEnd(tn.target.value)})},features:[p._Bn([re]),p.qOj]}),k})();function Ze(k){return null==k||0===k.length}function mt(k){return null!=k&&"number"==typeof k.length}const Le=new p.OlP("NgValidators"),ke=new p.OlP("NgAsyncValidators"),at=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ${static min(A){return function N(k){return A=>{if(Ze(A.value)||Ze(k))return null;const C=parseFloat(A.value);return!isNaN(C)&&C<k?{min:{min:k,actual:A.value}}:null}}(A)}static max(A){return function ne(k){return A=>{if(Ze(A.value)||Ze(k))return null;const C=parseFloat(A.value);return!isNaN(C)&&C>k?{max:{max:k,actual:A.value}}:null}}(A)}static required(A){return ue(A)}static requiredTrue(A){return function Ee(k){return!0===k.value?null:{required:!0}}(A)}static email(A){return function Ne(k){return Ze(k.value)||at.test(k.value)?null:{email:!0}}(A)}static minLength(A){return function Re(k){return A=>Ze(A.value)||!mt(A.value)?null:A.value.length<k?{minlength:{requiredLength:k,actualLength:A.value.length}}:null}(A)}static maxLength(A){return function fe(k){return A=>mt(A.value)&&A.value.length>k?{maxlength:{requiredLength:k,actualLength:A.value.length}}:null}(A)}static pattern(A){return X(A)}static nullValidator(A){return null}static compose(A){return gt(A)}static composeAsync(A){return Ut(A)}}function ue(k){return Ze(k.value)?{required:!0}:null}function X(k){if(!k)return Oe;let A,C;return"string"==typeof k?(C="","^"!==k.charAt(0)&&(C+="^"),C+=k,"$"!==k.charAt(k.length-1)&&(C+="$"),A=new RegExp(C)):(C=k.toString(),A=k),q=>{if(Ze(q.value))return null;const rt=q.value;return A.test(rt)?null:{pattern:{requiredPattern:C,actualValue:rt}}}}function Oe(k){return null}function ae(k){return null!=k}function $e(k){const A=(0,p.QGY)(k)?(0,Z.D)(k):k;return(0,p.CqO)(A),A}function Be(k){let A={};return k.forEach(C=>{A=null!=C?Object.assign(Object.assign({},A),C):A}),0===Object.keys(A).length?null:A}function _t(k,A){return A.map(C=>C(k))}function Ot(k){return k.map(A=>function vt(k){return!k.validate}(A)?A:C=>A.validate(C))}function gt(k){if(!k)return null;const A=k.filter(ae);return 0==A.length?null:function(C){return Be(_t(C,A))}}function bt(k){return null!=k?gt(Ot(k)):null}function Ut(k){if(!k)return null;const A=k.filter(ae);return 0==A.length?null:function(C){const q=_t(C,A).map($e);return(0,_e.D)(q).pipe((0,pe.U)(Be))}}function St(k){return null!=k?Ut(Ot(k)):null}function Mt(k,A){return null===k?[A]:Array.isArray(k)?[...k,A]:[k,A]}function ht(k){return k._rawValidators}function mn(k){return k._rawAsyncValidators}function _n(k){return k?Array.isArray(k)?k:[k]:[]}function pn(k,A){return Array.isArray(k)?k.includes(A):k===A}function qn(k,A){const C=_n(A);return _n(k).forEach(rt=>{pn(C,rt)||C.push(rt)}),C}function Wn(k,A){return _n(A).filter(C=>!pn(k,C))}class er{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(A){this._rawValidators=A||[],this._composedValidatorFn=bt(this._rawValidators)}_setAsyncValidators(A){this._rawAsyncValidators=A||[],this._composedAsyncValidatorFn=St(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(A){this._onDestroyCallbacks.push(A)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(A=>A()),this._onDestroyCallbacks=[]}reset(A){this.control&&this.control.reset(A)}hasError(A,C){return!!this.control&&this.control.hasError(A,C)}getError(A,C){return this.control?this.control.getError(A,C):null}}class ct extends er{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class zt extends er{get formDirective(){return null}get path(){return null}}class qt{constructor(A){this._cd=A}is(A){var C,q,rt;return"submitted"===A?!!(null===(C=this._cd)||void 0===C?void 0:C.submitted):!!(null===(rt=null===(q=this._cd)||void 0===q?void 0:q.control)||void 0===rt?void 0:rt[A])}}let Bt=(()=>{class k extends qt{constructor(C){super(C)}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(ct,2))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(C,q){2&C&&p.ekj("ng-untouched",q.is("untouched"))("ng-touched",q.is("touched"))("ng-pristine",q.is("pristine"))("ng-dirty",q.is("dirty"))("ng-valid",q.is("valid"))("ng-invalid",q.is("invalid"))("ng-pending",q.is("pending"))},features:[p.qOj]}),k})(),un=(()=>{class k extends qt{constructor(C){super(C)}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(zt,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(C,q){2&C&&p.ekj("ng-untouched",q.is("untouched"))("ng-touched",q.is("touched"))("ng-pristine",q.is("pristine"))("ng-dirty",q.is("dirty"))("ng-valid",q.is("valid"))("ng-invalid",q.is("invalid"))("ng-pending",q.is("pending"))("ng-submitted",q.is("submitted"))},features:[p.qOj]}),k})();function Qt(k,A){dt(k,A),A.valueAccessor.writeValue(k.value),function ln(k,A){A.valueAccessor.registerOnChange(C=>{k._pendingValue=C,k._pendingChange=!0,k._pendingDirty=!0,"change"===k.updateOn&&Jt(k,A)})}(k,A),function he(k,A){const C=(q,rt)=>{A.valueAccessor.writeValue(q),rt&&A.viewToModelUpdate(q)};k.registerOnChange(C),A._registerOnDestroy(()=>{k._unregisterOnChange(C)})}(k,A),function In(k,A){A.valueAccessor.registerOnTouched(()=>{k._pendingTouched=!0,"blur"===k.updateOn&&k._pendingChange&&Jt(k,A),"submit"!==k.updateOn&&k.markAsTouched()})}(k,A),function kt(k,A){if(A.valueAccessor.setDisabledState){const C=q=>{A.valueAccessor.setDisabledState(q)};k.registerOnDisabledChange(C),A._registerOnDestroy(()=>{k._unregisterOnDisabledChange(C)})}}(k,A)}function pr(k,A,C=!0){const q=()=>{};A.valueAccessor&&(A.valueAccessor.registerOnChange(q),A.valueAccessor.registerOnTouched(q)),Gt(k,A),k&&(A._invokeOnDestroyCallbacks(),k._registerOnCollectionChange(()=>{}))}function En(k,A){k.forEach(C=>{C.registerOnValidatorChange&&C.registerOnValidatorChange(A)})}function dt(k,A){const C=ht(k);null!==A.validator?k.setValidators(Mt(C,A.validator)):"function"==typeof C&&k.setValidators([C]);const q=mn(k);null!==A.asyncValidator?k.setAsyncValidators(Mt(q,A.asyncValidator)):"function"==typeof q&&k.setAsyncValidators([q]);const rt=()=>k.updateValueAndValidity();En(A._rawValidators,rt),En(A._rawAsyncValidators,rt)}function Gt(k,A){let C=!1;if(null!==k){if(null!==A.validator){const rt=ht(k);if(Array.isArray(rt)&&rt.length>0){const tn=rt.filter(mr=>mr!==A.validator);tn.length!==rt.length&&(C=!0,k.setValidators(tn))}}if(null!==A.asyncValidator){const rt=mn(k);if(Array.isArray(rt)&&rt.length>0){const tn=rt.filter(mr=>mr!==A.asyncValidator);tn.length!==rt.length&&(C=!0,k.setAsyncValidators(tn))}}}const q=()=>{};return En(A._rawValidators,q),En(A._rawAsyncValidators,q),C}function Jt(k,A){k._pendingDirty&&k.markAsDirty(),k.setValue(k._pendingValue,{emitModelToViewChange:!1}),A.viewToModelUpdate(k._pendingValue),k._pendingChange=!1}function te(k,A){dt(k,A)}function ge(k,A){if(!k.hasOwnProperty("model"))return!1;const C=k.model;return!!C.isFirstChange()||!Object.is(A,C.currentValue)}function Me(k,A){k._syncPendingControls(),A.forEach(C=>{const q=C.control;"submit"===q.updateOn&&q._pendingChange&&(C.viewToModelUpdate(q._pendingValue),q._pendingChange=!1)})}function nt(k,A){if(!A)return null;let C,q,rt;return Array.isArray(A),A.forEach(tn=>{tn.constructor===Ge?C=tn:function oe(k){return Object.getPrototypeOf(k.constructor)===be}(tn)?q=tn:rt=tn}),rt||q||C||null}function At(k,A){const C=k.indexOf(A);C>-1&&k.splice(C,1)}const Nn="VALID",$r="INVALID",Gr="PENDING",Wr="DISABLED";function Yr(k){return(yn(k)?k.validators:k)||null}function zr(k){return Array.isArray(k)?bt(k):k||null}function It(k,A){return(yn(A)?A.asyncValidators:k)||null}function rn(k){return Array.isArray(k)?St(k):k||null}function yn(k){return null!=k&&!Array.isArray(k)&&"object"==typeof k}const vr=k=>k instanceof gn,di=k=>k instanceof ni;function ti(k){return vr(k)?k.value:k.getRawValue()}function jn(k,A){const C=di(k),q=k.controls;if(!(C?Object.keys(q):q).length)throw new p.vHH(1e3,"");if(!q[A])throw new p.vHH(1001,"")}function ir(k,A){di(k),k._forEachChild((q,rt)=>{if(void 0===A[rt])throw new p.vHH(1002,"")})}class xr{constructor(A,C){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=A,this._rawAsyncValidators=C,this._composedValidatorFn=zr(this._rawValidators),this._composedAsyncValidatorFn=rn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(A){this._rawValidators=this._composedValidatorFn=A}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(A){this._rawAsyncValidators=this._composedAsyncValidatorFn=A}get parent(){return this._parent}get valid(){return this.status===Nn}get invalid(){return this.status===$r}get pending(){return this.status==Gr}get disabled(){return this.status===Wr}get enabled(){return this.status!==Wr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(A){this._rawValidators=A,this._composedValidatorFn=zr(A)}setAsyncValidators(A){this._rawAsyncValidators=A,this._composedAsyncValidatorFn=rn(A)}addValidators(A){this.setValidators(qn(A,this._rawValidators))}addAsyncValidators(A){this.setAsyncValidators(qn(A,this._rawAsyncValidators))}removeValidators(A){this.setValidators(Wn(A,this._rawValidators))}removeAsyncValidators(A){this.setAsyncValidators(Wn(A,this._rawAsyncValidators))}hasValidator(A){return pn(this._rawValidators,A)}hasAsyncValidator(A){return pn(this._rawAsyncValidators,A)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(A={}){this.touched=!0,this._parent&&!A.onlySelf&&this._parent.markAsTouched(A)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(A=>A.markAllAsTouched())}markAsUntouched(A={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(C=>{C.markAsUntouched({onlySelf:!0})}),this._parent&&!A.onlySelf&&this._parent._updateTouched(A)}markAsDirty(A={}){this.pristine=!1,this._parent&&!A.onlySelf&&this._parent.markAsDirty(A)}markAsPristine(A={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(C=>{C.markAsPristine({onlySelf:!0})}),this._parent&&!A.onlySelf&&this._parent._updatePristine(A)}markAsPending(A={}){this.status=Gr,!1!==A.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!A.onlySelf&&this._parent.markAsPending(A)}disable(A={}){const C=this._parentMarkedDirty(A.onlySelf);this.status=Wr,this.errors=null,this._forEachChild(q=>{q.disable(Object.assign(Object.assign({},A),{onlySelf:!0}))}),this._updateValue(),!1!==A.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},A),{skipPristineCheck:C})),this._onDisabledChange.forEach(q=>q(!0))}enable(A={}){const C=this._parentMarkedDirty(A.onlySelf);this.status=Nn,this._forEachChild(q=>{q.enable(Object.assign(Object.assign({},A),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:A.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},A),{skipPristineCheck:C})),this._onDisabledChange.forEach(q=>q(!1))}_updateAncestors(A){this._parent&&!A.onlySelf&&(this._parent.updateValueAndValidity(A),A.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(A){this._parent=A}updateValueAndValidity(A={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nn||this.status===Gr)&&this._runAsyncValidator(A.emitEvent)),!1!==A.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!A.onlySelf&&this._parent.updateValueAndValidity(A)}_updateTreeValidity(A={emitEvent:!0}){this._forEachChild(C=>C._updateTreeValidity(A)),this.updateValueAndValidity({onlySelf:!0,emitEvent:A.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wr:Nn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(A){if(this.asyncValidator){this.status=Gr,this._hasOwnPendingAsyncValidator=!0;const C=$e(this.asyncValidator(this));this._asyncValidationSubscription=C.subscribe(q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(q,{emitEvent:A})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(A,C={}){this.errors=A,this._updateControlsErrors(!1!==C.emitEvent)}get(A){return function dr(k,A,C){if(null==A||(Array.isArray(A)||(A=A.split(C)),Array.isArray(A)&&0===A.length))return null;let q=k;return A.forEach(rt=>{q=di(q)?q.controls.hasOwnProperty(rt)?q.controls[rt]:null:(k=>k instanceof Fi)(q)&&q.at(rt)||null}),q}(this,A,".")}getError(A,C){const q=C?this.get(C):this;return q&&q.errors?q.errors[A]:null}hasError(A,C){return!!this.getError(A,C)}get root(){let A=this;for(;A._parent;)A=A._parent;return A}_updateControlsErrors(A){this.status=this._calculateStatus(),A&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(A)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Wr:this.errors?$r:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gr)?Gr:this._anyControlsHaveStatus($r)?$r:Nn}_anyControlsHaveStatus(A){return this._anyControls(C=>C.status===A)}_anyControlsDirty(){return this._anyControls(A=>A.dirty)}_anyControlsTouched(){return this._anyControls(A=>A.touched)}_updatePristine(A={}){this.pristine=!this._anyControlsDirty(),this._parent&&!A.onlySelf&&this._parent._updatePristine(A)}_updateTouched(A={}){this.touched=this._anyControlsTouched(),this._parent&&!A.onlySelf&&this._parent._updateTouched(A)}_isBoxedValue(A){return"object"==typeof A&&null!==A&&2===Object.keys(A).length&&"value"in A&&"disabled"in A}_registerOnCollectionChange(A){this._onCollectionChange=A}_setUpdateStrategy(A){yn(A)&&null!=A.updateOn&&(this._updateOn=A.updateOn)}_parentMarkedDirty(A){return!A&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class gn extends xr{constructor(A=null,C,q){super(Yr(C),It(q,C)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(A),this._setUpdateStrategy(C),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yn(C)&&C.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(A)?A.value:A)}setValue(A,C={}){this.value=this._pendingValue=A,this._onChange.length&&!1!==C.emitModelToViewChange&&this._onChange.forEach(q=>q(this.value,!1!==C.emitViewToModelChange)),this.updateValueAndValidity(C)}patchValue(A,C={}){this.setValue(A,C)}reset(A=this.defaultValue,C={}){this._applyFormState(A),this.markAsPristine(C),this.markAsUntouched(C),this.setValue(this.value,C),this._pendingChange=!1}_updateValue(){}_anyControls(A){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(A){this._onChange.push(A)}_unregisterOnChange(A){At(this._onChange,A)}registerOnDisabledChange(A){this._onDisabledChange.push(A)}_unregisterOnDisabledChange(A){At(this._onDisabledChange,A)}_forEachChild(A){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(A){this._isBoxedValue(A)?(this.value=this._pendingValue=A.value,A.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=A}}class ni extends xr{constructor(A,C,q){super(Yr(C),It(q,C)),this.controls=A,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(A,C){return this.controls[A]?this.controls[A]:(this.controls[A]=C,C.setParent(this),C._registerOnCollectionChange(this._onCollectionChange),C)}addControl(A,C,q={}){this.registerControl(A,C),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}removeControl(A,C={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),delete this.controls[A],this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}setControl(A,C,q={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),delete this.controls[A],C&&this.registerControl(A,C),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}contains(A){return this.controls.hasOwnProperty(A)&&this.controls[A].enabled}setValue(A,C={}){ir(this,A),Object.keys(A).forEach(q=>{jn(this,q),this.controls[q].setValue(A[q],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(A,C={}){null!=A&&(Object.keys(A).forEach(q=>{this.controls[q]&&this.controls[q].patchValue(A[q],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(A={},C={}){this._forEachChild((q,rt)=>{q.reset(A[rt],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this._reduceChildren({},(A,C,q)=>(A[q]=ti(C),A))}_syncPendingControls(){let A=this._reduceChildren(!1,(C,q)=>!!q._syncPendingControls()||C);return A&&this.updateValueAndValidity({onlySelf:!0}),A}_forEachChild(A){Object.keys(this.controls).forEach(C=>{const q=this.controls[C];q&&A(q,C)})}_setUpControls(){this._forEachChild(A=>{A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(A){for(const C of Object.keys(this.controls)){const q=this.controls[C];if(this.contains(C)&&A(q))return!0}return!1}_reduceValue(){return this._reduceChildren({},(A,C,q)=>((C.enabled||this.disabled)&&(A[q]=C.value),A))}_reduceChildren(A,C){let q=A;return this._forEachChild((rt,tn)=>{q=C(q,rt,tn)}),q}_allControlsDisabled(){for(const A of Object.keys(this.controls))if(this.controls[A].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Fi extends xr{constructor(A,C,q){super(Yr(C),It(q,C)),this.controls=A,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(A){return this.controls[A]}push(A,C={}){this.controls.push(A),this._registerControl(A),this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}insert(A,C,q={}){this.controls.splice(A,0,C),this._registerControl(C),this.updateValueAndValidity({emitEvent:q.emitEvent})}removeAt(A,C={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),this.controls.splice(A,1),this.updateValueAndValidity({emitEvent:C.emitEvent})}setControl(A,C,q={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),this.controls.splice(A,1),C&&(this.controls.splice(A,0,C),this._registerControl(C)),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(A,C={}){ir(this,A),A.forEach((q,rt)=>{jn(this,rt),this.at(rt).setValue(q,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(A,C={}){null!=A&&(A.forEach((q,rt)=>{this.at(rt)&&this.at(rt).patchValue(q,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(A=[],C={}){this._forEachChild((q,rt)=>{q.reset(A[rt],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this.controls.map(A=>ti(A))}clear(A={}){this.controls.length<1||(this._forEachChild(C=>C._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:A.emitEvent}))}_syncPendingControls(){let A=this.controls.reduce((C,q)=>!!q._syncPendingControls()||C,!1);return A&&this.updateValueAndValidity({onlySelf:!0}),A}_forEachChild(A){this.controls.forEach((C,q)=>{A(C,q)})}_updateValue(){this.value=this.controls.filter(A=>A.enabled||this.disabled).map(A=>A.value)}_anyControls(A){return this.controls.some(C=>C.enabled&&A(C))}_setUpControls(){this._forEachChild(A=>this._registerControl(A))}_allControlsDisabled(){for(const A of this.controls)if(A.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(A){A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange)}}const ns={provide:zt,useExisting:(0,p.Gpc)(()=>Fn)},Ar=(()=>Promise.resolve(null))();let Fn=(()=>{class k extends zt{constructor(C,q){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new ni({},bt(C),St(q))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(C){Ar.then(()=>{const q=this._findContainer(C.path);C.control=q.registerControl(C.name,C.control),Qt(C.control,C),C.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(C)})}getControl(C){return this.form.get(C.path)}removeControl(C){Ar.then(()=>{const q=this._findContainer(C.path);q&&q.removeControl(C.name),this._directives.delete(C)})}addFormGroup(C){Ar.then(()=>{const q=this._findContainer(C.path),rt=new ni({});te(rt,C),q.registerControl(C.name,rt),rt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(C){Ar.then(()=>{const q=this._findContainer(C.path);q&&q.removeControl(C.name)})}getFormGroup(C){return this.form.get(C.path)}updateModel(C,q){Ar.then(()=>{this.form.get(C.path).setValue(q)})}setValue(C){this.control.setValue(C)}onSubmit(C){return this.submitted=!0,Me(this.form,this._directives),this.ngSubmit.emit(C),!1}onReset(){this.resetForm()}resetForm(C){this.form.reset(C),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(C){return C.pop(),C.length?this.form.get(C):this.form}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(Le,10),p.Y36(ke,10))},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(C,q){1&C&&p.NdJ("submit",function(tn){return q.onSubmit(tn)})("reset",function(){return q.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([ns]),p.qOj]}),k})();const _i={provide:ct,useExisting:(0,p.Gpc)(()=>hi)},zi=(()=>Promise.resolve(null))();let hi=(()=>{class k extends ct{constructor(C,q,rt,tn,mr){super(),this._changeDetectorRef=mr,this.control=new gn,this._registered=!1,this.update=new p.vpe,this._parent=C,this._setValidators(q),this._setAsyncValidators(rt),this.valueAccessor=nt(0,tn)}ngOnChanges(C){if(this._checkForErrors(),!this._registered||"name"in C){if(this._registered&&(this._checkName(),this.formDirective)){const q=C.name.previousValue;this.formDirective.removeControl({name:q,path:this._getPath(q)})}this._setUpControl()}"isDisabled"in C&&this._updateDisabled(C),ge(C,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Qt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(C){zi.then(()=>{var q;this.control.setValue(C,{emitViewToModelChange:!1}),null===(q=this._changeDetectorRef)||void 0===q||q.markForCheck()})}_updateDisabled(C){const q=C.isDisabled.currentValue,rt=""===q||q&&"false"!==q;zi.then(()=>{var tn;rt&&!this.control.disabled?this.control.disable():!rt&&this.control.disabled&&this.control.enable(),null===(tn=this._changeDetectorRef)||void 0===tn||tn.markForCheck()})}_getPath(C){return this._parent?function fr(k,A){return[...A.path,k]}(C,this._parent):[C]}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(zt,9),p.Y36(Le,10),p.Y36(ke,10),p.Y36(ye,10),p.Y36(p.sBO,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([_i]),p.qOj,p.TTD]}),k})(),Ds=(()=>{class k{}return k.\u0275fac=function(C){return new(C||k)},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),k})(),rr=(()=>{class k{}return k.\u0275fac=function(C){return new(C||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({}),k})();const qe=new p.OlP("NgModelWithFormControlWarning"),ot={provide:ct,useExisting:(0,p.Gpc)(()=>Tt)};let Tt=(()=>{class k extends ct{constructor(C,q,rt,tn){super(),this._ngModelWarningConfig=tn,this.update=new p.vpe,this._ngModelWarningSent=!1,this._setValidators(C),this._setAsyncValidators(q),this.valueAccessor=nt(0,rt)}set isDisabled(C){}ngOnChanges(C){if(this._isControlChanged(C)){const q=C.form.previousValue;q&&pr(q,this,!1),Qt(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}ge(C,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&pr(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}_isControlChanged(C){return C.hasOwnProperty("form")}}return k._ngModelWarningSentOnce=!1,k.\u0275fac=function(C){return new(C||k)(p.Y36(Le,10),p.Y36(ke,10),p.Y36(ye,10),p.Y36(qe,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[p._Bn([ot]),p.qOj,p.TTD]}),k})();const Yt={provide:zt,useExisting:(0,p.Gpc)(()=>$n)};let $n=(()=>{class k extends zt{constructor(C,q){super(),this.validators=C,this.asyncValidators=q,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(C),this._setAsyncValidators(q)}ngOnChanges(C){this._checkFormPresent(),C.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Gt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(C){const q=this.form.get(C.path);return Qt(q,C),q.updateValueAndValidity({emitEvent:!1}),this.directives.push(C),q}getControl(C){return this.form.get(C.path)}removeControl(C){pr(C.control||null,C,!1),At(this.directives,C)}addFormGroup(C){this._setUpFormContainer(C)}removeFormGroup(C){this._cleanUpFormContainer(C)}getFormGroup(C){return this.form.get(C.path)}addFormArray(C){this._setUpFormContainer(C)}removeFormArray(C){this._cleanUpFormContainer(C)}getFormArray(C){return this.form.get(C.path)}updateModel(C,q){this.form.get(C.path).setValue(q)}onSubmit(C){return this.submitted=!0,Me(this.form,this.directives),this.ngSubmit.emit(C),!1}onReset(){this.resetForm()}resetForm(C){this.form.reset(C),this.submitted=!1}_updateDomValue(){this.directives.forEach(C=>{const q=C.control,rt=this.form.get(C.path);q!==rt&&(pr(q||null,C),vr(rt)&&(Qt(rt,C),C.control=rt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(C){const q=this.form.get(C.path);te(q,C),q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(C){if(this.form){const q=this.form.get(C.path);q&&function Ce(k,A){return Gt(k,A)}(q,C)&&q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){dt(this.form,this),this._oldForm&&Gt(this._oldForm,this)}_checkFormPresent(){}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(Le,10),p.Y36(ke,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroup",""]],hostBindings:function(C,q){1&C&&p.NdJ("submit",function(tn){return q.onSubmit(tn)})("reset",function(){return q.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Yt]),p.qOj,p.TTD]}),k})();const xs={provide:ye,useExisting:(0,p.Gpc)(()=>_r),multi:!0};function ri(k,A){return null==k?`${A}`:(A&&"object"==typeof A&&(A="Object"),`${k}: ${A}`.slice(0,50))}let _r=(()=>{class k extends be{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(C){this._compareWith=C}writeValue(C){this.value=C;const rt=ri(this._getOptionId(C),C);this.setProperty("value",rt)}registerOnChange(C){this.onChange=q=>{this.value=this._getOptionValue(q),C(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(C){for(const q of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(q),C))return q;return null}_getOptionValue(C){const q=function Di(k){return k.split(":")[0]}(C);return this._optionMap.has(q)?this._optionMap.get(q):C}}return k.\u0275fac=function(){let A;return function(q){return(A||(A=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(C,q){1&C&&p.NdJ("change",function(tn){return q.onChange(tn.target.value)})("blur",function(){return q.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([xs]),p.qOj]}),k})(),as=(()=>{class k{constructor(C,q,rt){this._element=C,this._renderer=q,this._select=rt,this._select&&(this.id=this._select._registerOption())}set ngValue(C){null!=this._select&&(this._select._optionMap.set(this.id,C),this._setElementValue(ri(this.id,C)),this._select.writeValue(this._select.value))}set value(C){this._setElementValue(C),this._select&&this._select.writeValue(this._select.value)}_setElementValue(C){this._renderer.setProperty(this._element.nativeElement,"value",C)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(_r,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();const us={provide:ye,useExisting:(0,p.Gpc)(()=>Ci),multi:!0};function ls(k,A){return null==k?`${A}`:("string"==typeof A&&(A=`'${A}'`),A&&"object"==typeof A&&(A="Object"),`${k}: ${A}`.slice(0,50))}let Ci=(()=>{class k extends be{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(C){this._compareWith=C}writeValue(C){let q;if(this.value=C,Array.isArray(C)){const rt=C.map(tn=>this._getOptionId(tn));q=(tn,mr)=>{tn._setSelected(rt.indexOf(mr.toString())>-1)}}else q=(rt,tn)=>{rt._setSelected(!1)};this._optionMap.forEach(q)}registerOnChange(C){this.onChange=q=>{const rt=[],tn=q.selectedOptions;if(void 0!==tn){const mr=tn;for(let L=0;L<mr.length;L++){const ee=this._getOptionValue(mr[L].value);rt.push(ee)}}else{const mr=q.options;for(let L=0;L<mr.length;L++){const O=mr[L];if(O.selected){const ee=this._getOptionValue(O.value);rt.push(ee)}}}this.value=rt,C(rt)}}_registerOption(C){const q=(this._idCounter++).toString();return this._optionMap.set(q,C),q}_getOptionId(C){for(const q of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(q)._value,C))return q;return null}_getOptionValue(C){const q=function to(k){return k.split(":")[0]}(C);return this._optionMap.has(q)?this._optionMap.get(q)._value:C}}return k.\u0275fac=function(){let A;return function(q){return(A||(A=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(C,q){1&C&&p.NdJ("change",function(tn){return q.onChange(tn.target)})("blur",function(){return q.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([us]),p.qOj]}),k})(),Ki=(()=>{class k{constructor(C,q,rt){this._element=C,this._renderer=q,this._select=rt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(C){null!=this._select&&(this._value=C,this._setElementValue(ls(this.id,C)),this._select.writeValue(this._select.value))}set value(C){this._select?(this._value=C,this._setElementValue(ls(this.id,C)),this._select.writeValue(this._select.value)):this._setElementValue(C)}_setElementValue(C){this._renderer.setProperty(this._element.nativeElement,"value",C)}_setSelected(C){this._renderer.setProperty(this._element.nativeElement,"selected",C)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(C){return new(C||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Ci,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})(),Er=(()=>{class k{constructor(){this._validator=Oe}ngOnChanges(C){if(this.inputName in C){const q=this.normalizeInput(C[this.inputName].currentValue);this._enabled=this.enabled(q),this._validator=this._enabled?this.createValidator(q):Oe,this._onChange&&this._onChange()}}validate(C){return this._validator(C)}registerOnValidatorChange(C){this._onChange=C}enabled(C){return null!=C}}return k.\u0275fac=function(C){return new(C||k)},k.\u0275dir=p.lG2({type:k,features:[p.TTD]}),k})();const ii={provide:Le,useExisting:(0,p.Gpc)(()=>pi),multi:!0};let pi=(()=>{class k extends Er{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=C=>function qi(k){return null!=k&&!1!==k&&"false"!=`${k}`}(C),this.createValidator=C=>ue}enabled(C){return C}}return k.\u0275fac=function(){let A;return function(q){return(A||(A=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(C,q){2&C&&p.uIk("required",q._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([ii]),p.qOj]}),k})();const Ie={provide:Le,useExisting:(0,p.Gpc)(()=>Je),multi:!0};let Je=(()=>{class k extends Er{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=C=>C,this.createValidator=C=>X(C)}}return k.\u0275fac=function(){let A;return function(q){return(A||(A=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(C,q){2&C&&p.uIk("pattern",q._enabled?q.pattern:null)},inputs:{pattern:"pattern"},features:[p._Bn([Ie]),p.qOj]}),k})(),Hn=(()=>{class k{}return k.\u0275fac=function(C){return new(C||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[[rr]]}),k})(),Cn=(()=>{class k{}return k.\u0275fac=function(C){return new(C||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[Hn]}),k})(),Mn=(()=>{class k{static withConfig(C){return{ngModule:k,providers:[{provide:qe,useValue:C.warnOnNgModelWithFormControl}]}}}return k.\u0275fac=function(C){return new(C||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[Hn]}),k})()},2313:(Pt,We,R)=>{R.d(We,{H7:()=>Ce,b2:()=>An,q6:()=>zt});var p=R(9808),H=R(5e3);class Z extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class _e extends Z{static makeCurrent(){(0,p.HT)(new _e)}onAndCancel(ge,oe,Me){return ge.addEventListener(oe,Me,!1),()=>{ge.removeEventListener(oe,Me,!1)}}dispatchEvent(ge,oe){ge.dispatchEvent(oe)}remove(ge){ge.parentNode&&ge.parentNode.removeChild(ge)}createElement(ge,oe){return(oe=oe||this.getDefaultDocument()).createElement(ge)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ge){return ge.nodeType===Node.ELEMENT_NODE}isShadowRoot(ge){return ge instanceof DocumentFragment}getGlobalEventTarget(ge,oe){return"window"===oe?window:"document"===oe?ge:"body"===oe?ge.body:null}getBaseHref(ge){const oe=function we(){return pe=pe||document.querySelector("base"),pe?pe.getAttribute("href"):null}();return null==oe?null:function ye(Ae){be=be||document.createElement("a"),be.setAttribute("href",Ae);const ge=be.pathname;return"/"===ge.charAt(0)?ge:`/${ge}`}(oe)}resetBaseElement(){pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ge){return(0,p.Mx)(document.cookie,ge)}}let be,pe=null;const Fe=new H.OlP("TRANSITION_ID"),re=[{provide:H.ip1,useFactory:function le(Ae,ge,oe){return()=>{oe.get(H.CZH).donePromise.then(()=>{const Me=(0,p.q)(),nt=ge.querySelectorAll(`style[ng-transition="${Ae}"]`);for(let At=0;At<nt.length;At++)Me.remove(nt[At])})}},deps:[Fe,p.K0,H.zs3],multi:!0}];class me{static init(){(0,H.VLi)(new me)}addToWindow(ge){H.dqk.getAngularTestability=(Me,nt=!0)=>{const At=ge.findTestabilityInTree(Me,nt);if(null==At)throw new Error("Could not find testability for element.");return At},H.dqk.getAllAngularTestabilities=()=>ge.getAllTestabilities(),H.dqk.getAllAngularRootElements=()=>ge.getAllRootElements(),H.dqk.frameworkStabilizers||(H.dqk.frameworkStabilizers=[]),H.dqk.frameworkStabilizers.push(Me=>{const nt=H.dqk.getAllAngularTestabilities();let At=nt.length,en=!1;const Dn=function(Nn){en=en||Nn,At--,0==At&&Me(en)};nt.forEach(function(Nn){Nn.whenStable(Dn)})})}findTestabilityInTree(ge,oe,Me){if(null==oe)return null;const nt=ge.getTestability(oe);return null!=nt?nt:Me?(0,p.q)().isShadowRoot(oe)?this.findTestabilityInTree(ge,oe.host,!0):this.findTestabilityInTree(ge,oe.parentElement,!0):null}}let je=(()=>{class Ae{build(){return new XMLHttpRequest}}return Ae.\u0275fac=function(oe){return new(oe||Ae)},Ae.\u0275prov=H.Yz7({token:Ae,factory:Ae.\u0275fac}),Ae})();const Ge=new H.OlP("EventManagerPlugins");let Ze=(()=>{class Ae{constructor(oe,Me){this._zone=Me,this._eventNameToPlugin=new Map,oe.forEach(nt=>nt.manager=this),this._plugins=oe.slice().reverse()}addEventListener(oe,Me,nt){return this._findPluginFor(Me).addEventListener(oe,Me,nt)}addGlobalEventListener(oe,Me,nt){return this._findPluginFor(Me).addGlobalEventListener(oe,Me,nt)}getZone(){return this._zone}_findPluginFor(oe){const Me=this._eventNameToPlugin.get(oe);if(Me)return Me;const nt=this._plugins;for(let At=0;At<nt.length;At++){const en=nt[At];if(en.supports(oe))return this._eventNameToPlugin.set(oe,en),en}throw new Error(`No event manager plugin found for event ${oe}`)}}return Ae.\u0275fac=function(oe){return new(oe||Ae)(H.LFG(Ge),H.LFG(H.R0b))},Ae.\u0275prov=H.Yz7({token:Ae,factory:Ae.\u0275fac}),Ae})();class mt{constructor(ge){this._doc=ge}addGlobalEventListener(ge,oe,Me){const nt=(0,p.q)().getGlobalEventTarget(this._doc,ge);if(!nt)throw new Error(`Unsupported event target ${nt} for event ${oe}`);return this.addEventListener(nt,oe,Me)}}let Le=(()=>{class Ae{constructor(){this._stylesSet=new Set}addStyles(oe){const Me=new Set;oe.forEach(nt=>{this._stylesSet.has(nt)||(this._stylesSet.add(nt),Me.add(nt))}),this.onStylesAdded(Me)}onStylesAdded(oe){}getAllStyles(){return Array.from(this._stylesSet)}}return Ae.\u0275fac=function(oe){return new(oe||Ae)},Ae.\u0275prov=H.Yz7({token:Ae,factory:Ae.\u0275fac}),Ae})(),ke=(()=>{class Ae extends Le{constructor(oe){super(),this._doc=oe,this._hostNodes=new Map,this._hostNodes.set(oe.head,[])}_addStylesToHost(oe,Me,nt){oe.forEach(At=>{const en=this._doc.createElement("style");en.textContent=At,nt.push(Me.appendChild(en))})}addHost(oe){const Me=[];this._addStylesToHost(this._stylesSet,oe,Me),this._hostNodes.set(oe,Me)}removeHost(oe){const Me=this._hostNodes.get(oe);Me&&Me.forEach(at),this._hostNodes.delete(oe)}onStylesAdded(oe){this._hostNodes.forEach((Me,nt)=>{this._addStylesToHost(oe,nt,Me)})}ngOnDestroy(){this._hostNodes.forEach(oe=>oe.forEach(at))}}return Ae.\u0275fac=function(oe){return new(oe||Ae)(H.LFG(p.K0))},Ae.\u0275prov=H.Yz7({token:Ae,factory:Ae.\u0275fac}),Ae})();function at(Ae){(0,p.q)().remove(Ae)}const $={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},N=/%COMP%/g;function X(Ae,ge,oe){for(let Me=0;Me<ge.length;Me++){let nt=ge[Me];Array.isArray(nt)?X(Ae,nt,oe):(nt=nt.replace(N,Ae),oe.push(nt))}return oe}function Oe(Ae){return ge=>{if("__ngUnwrap__"===ge)return Ae;!1===Ae(ge)&&(ge.preventDefault(),ge.returnValue=!1)}}let $e=(()=>{class Ae{constructor(oe,Me,nt){this.eventManager=oe,this.sharedStylesHost=Me,this.appId=nt,this.rendererByCompId=new Map,this.defaultRenderer=new Be(oe)}createRenderer(oe,Me){if(!oe||!Me)return this.defaultRenderer;switch(Me.encapsulation){case H.ifc.Emulated:{let nt=this.rendererByCompId.get(Me.id);return nt||(nt=new Ot(this.eventManager,this.sharedStylesHost,Me,this.appId),this.rendererByCompId.set(Me.id,nt)),nt.applyToHost(oe),nt}case 1:case H.ifc.ShadowDom:return new gt(this.eventManager,this.sharedStylesHost,oe,Me);default:if(!this.rendererByCompId.has(Me.id)){const nt=X(Me.id,Me.styles,[]);this.sharedStylesHost.addStyles(nt),this.rendererByCompId.set(Me.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ae.\u0275fac=function(oe){return new(oe||Ae)(H.LFG(Ze),H.LFG(ke),H.LFG(H.AFp))},Ae.\u0275prov=H.Yz7({token:Ae,factory:Ae.\u0275fac}),Ae})();class Be{constructor(ge){this.eventManager=ge,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ge,oe){return oe?document.createElementNS($[oe]||oe,ge):document.createElement(ge)}createComment(ge){return document.createComment(ge)}createText(ge){return document.createTextNode(ge)}appendChild(ge,oe){ge.appendChild(oe)}insertBefore(ge,oe,Me){ge&&ge.insertBefore(oe,Me)}removeChild(ge,oe){ge&&ge.removeChild(oe)}selectRootElement(ge,oe){let Me="string"==typeof ge?document.querySelector(ge):ge;if(!Me)throw new Error(`The selector "${ge}" did not match any elements`);return oe||(Me.textContent=""),Me}parentNode(ge){return ge.parentNode}nextSibling(ge){return ge.nextSibling}setAttribute(ge,oe,Me,nt){if(nt){oe=nt+":"+oe;const At=$[nt];At?ge.setAttributeNS(At,oe,Me):ge.setAttribute(oe,Me)}else ge.setAttribute(oe,Me)}removeAttribute(ge,oe,Me){if(Me){const nt=$[Me];nt?ge.removeAttributeNS(nt,oe):ge.removeAttribute(`${Me}:${oe}`)}else ge.removeAttribute(oe)}addClass(ge,oe){ge.classList.add(oe)}removeClass(ge,oe){ge.classList.remove(oe)}setStyle(ge,oe,Me,nt){nt&(H.JOm.DashCase|H.JOm.Important)?ge.style.setProperty(oe,Me,nt&H.JOm.Important?"important":""):ge.style[oe]=Me}removeStyle(ge,oe,Me){Me&H.JOm.DashCase?ge.style.removeProperty(oe):ge.style[oe]=""}setProperty(ge,oe,Me){ge[oe]=Me}setValue(ge,oe){ge.nodeValue=oe}listen(ge,oe,Me){return"string"==typeof ge?this.eventManager.addGlobalEventListener(ge,oe,Oe(Me)):this.eventManager.addEventListener(ge,oe,Oe(Me))}}class Ot extends Be{constructor(ge,oe,Me,nt){super(ge),this.component=Me;const At=X(nt+"-"+Me.id,Me.styles,[]);oe.addStyles(At),this.contentAttr=function Re(Ae){return"_ngcontent-%COMP%".replace(N,Ae)}(nt+"-"+Me.id),this.hostAttr=function fe(Ae){return"_nghost-%COMP%".replace(N,Ae)}(nt+"-"+Me.id)}applyToHost(ge){super.setAttribute(ge,this.hostAttr,"")}createElement(ge,oe){const Me=super.createElement(ge,oe);return super.setAttribute(Me,this.contentAttr,""),Me}}class gt extends Be{constructor(ge,oe,Me,nt){super(ge),this.sharedStylesHost=oe,this.hostEl=Me,this.shadowRoot=Me.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const At=X(nt.id,nt.styles,[]);for(let en=0;en<At.length;en++){const Dn=document.createElement("style");Dn.textContent=At[en],this.shadowRoot.appendChild(Dn)}}nodeOrShadowRoot(ge){return ge===this.hostEl?this.shadowRoot:ge}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ge,oe){return super.appendChild(this.nodeOrShadowRoot(ge),oe)}insertBefore(ge,oe,Me){return super.insertBefore(this.nodeOrShadowRoot(ge),oe,Me)}removeChild(ge,oe){return super.removeChild(this.nodeOrShadowRoot(ge),oe)}parentNode(ge){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ge)))}}let bt=(()=>{class Ae extends mt{constructor(oe){super(oe)}supports(oe){return!0}addEventListener(oe,Me,nt){return oe.addEventListener(Me,nt,!1),()=>this.removeEventListener(oe,Me,nt)}removeEventListener(oe,Me,nt){return oe.removeEventListener(Me,nt)}}return Ae.\u0275fac=function(oe){return new(oe||Ae)(H.LFG(p.K0))},Ae.\u0275prov=H.Yz7({token:Ae,factory:Ae.\u0275fac}),Ae})();const Ut=["alt","control","meta","shift"],Mt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ht={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mn={alt:Ae=>Ae.altKey,control:Ae=>Ae.ctrlKey,meta:Ae=>Ae.metaKey,shift:Ae=>Ae.shiftKey};let _n=(()=>{class Ae extends mt{constructor(oe){super(oe)}supports(oe){return null!=Ae.parseEventName(oe)}addEventListener(oe,Me,nt){const At=Ae.parseEventName(Me),en=Ae.eventCallback(At.fullKey,nt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(oe,At.domEventName,en))}static parseEventName(oe){const Me=oe.toLowerCase().split("."),nt=Me.shift();if(0===Me.length||"keydown"!==nt&&"keyup"!==nt)return null;const At=Ae._normalizeKey(Me.pop());let en="";if(Ut.forEach(Nn=>{const $r=Me.indexOf(Nn);$r>-1&&(Me.splice($r,1),en+=Nn+".")}),en+=At,0!=Me.length||0===At.length)return null;const Dn={};return Dn.domEventName=nt,Dn.fullKey=en,Dn}static getEventFullKey(oe){let Me="",nt=function pn(Ae){let ge=Ae.key;if(null==ge){if(ge=Ae.keyIdentifier,null==ge)return"Unidentified";ge.startsWith("U+")&&(ge=String.fromCharCode(parseInt(ge.substring(2),16)),3===Ae.location&&ht.hasOwnProperty(ge)&&(ge=ht[ge]))}return Mt[ge]||ge}(oe);return nt=nt.toLowerCase()," "===nt?nt="space":"."===nt&&(nt="dot"),Ut.forEach(At=>{At!=nt&&mn[At](oe)&&(Me+=At+".")}),Me+=nt,Me}static eventCallback(oe,Me,nt){return At=>{Ae.getEventFullKey(At)===oe&&nt.runGuarded(()=>Me(At))}}static _normalizeKey(oe){return"esc"===oe?"escape":oe}}return Ae.\u0275fac=function(oe){return new(oe||Ae)(H.LFG(p.K0))},Ae.\u0275prov=H.Yz7({token:Ae,factory:Ae.\u0275fac}),Ae})();const zt=(0,H.eFA)(H._c5,"browser",[{provide:H.Lbi,useValue:p.bD},{provide:H.g9A,useValue:function qn(){_e.makeCurrent(),me.init()},multi:!0},{provide:p.K0,useFactory:function er(){return(0,H.RDi)(document),document},deps:[]}]),qt=[{provide:H.zSh,useValue:"root"},{provide:H.qLn,useFactory:function Wn(){return new H.qLn},deps:[]},{provide:Ge,useClass:bt,multi:!0,deps:[p.K0,H.R0b,H.Lbi]},{provide:Ge,useClass:_n,multi:!0,deps:[p.K0]},{provide:$e,useClass:$e,deps:[Ze,ke,H.AFp]},{provide:H.FYo,useExisting:$e},{provide:Le,useExisting:ke},{provide:ke,useClass:ke,deps:[p.K0]},{provide:H.dDg,useClass:H.dDg,deps:[H.R0b]},{provide:Ze,useClass:Ze,deps:[Ge,H.R0b]},{provide:p.JF,useClass:je,deps:[]}];let An=(()=>{class Ae{constructor(oe){if(oe)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(oe){return{ngModule:Ae,providers:[{provide:H.AFp,useValue:oe.appId},{provide:Fe,useExisting:H.AFp},re]}}}return Ae.\u0275fac=function(oe){return new(oe||Ae)(H.LFG(Ae,12))},Ae.\u0275mod=H.oAB({type:Ae}),Ae.\u0275inj=H.cJS({providers:qt,imports:[p.ez,H.hGG]}),Ae})();"undefined"!=typeof window&&window;let Ce=(()=>{class Ae{}return Ae.\u0275fac=function(oe){return new(oe||Ae)},Ae.\u0275prov=H.Yz7({token:Ae,factory:function(oe){let Me=null;return Me=oe?new(oe||Ae):H.LFG(He),Me},providedIn:"root"}),Ae})(),He=(()=>{class Ae extends Ce{constructor(oe){super(),this._doc=oe}sanitize(oe,Me){if(null==Me)return null;switch(oe){case H.q3G.NONE:return Me;case H.q3G.HTML:return(0,H.qzn)(Me,"HTML")?(0,H.z3N)(Me):(0,H.EiD)(this._doc,String(Me)).toString();case H.q3G.STYLE:return(0,H.qzn)(Me,"Style")?(0,H.z3N)(Me):Me;case H.q3G.SCRIPT:if((0,H.qzn)(Me,"Script"))return(0,H.z3N)(Me);throw new Error("unsafe value used in a script context");case H.q3G.URL:return(0,H.yhl)(Me),(0,H.qzn)(Me,"URL")?(0,H.z3N)(Me):(0,H.mCW)(String(Me));case H.q3G.RESOURCE_URL:if((0,H.qzn)(Me,"ResourceURL"))return(0,H.z3N)(Me);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${oe} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(oe){return(0,H.JVY)(oe)}bypassSecurityTrustStyle(oe){return(0,H.L6k)(oe)}bypassSecurityTrustScript(oe){return(0,H.eBb)(oe)}bypassSecurityTrustUrl(oe){return(0,H.LAX)(oe)}bypassSecurityTrustResourceUrl(oe){return(0,H.pB0)(oe)}}return Ae.\u0275fac=function(oe){return new(oe||Ae)(H.LFG(p.K0))},Ae.\u0275prov=H.Yz7({token:Ae,factory:function(oe){let Me=null;return Me=oe?new oe:function Qe(Ae){return new He(Ae.get(p.K0))}(H.LFG(H.zs3)),Me},providedIn:"root"}),Ae})()},9100:(Pt,We,R)=>{R.d(We,{gz:()=>Ar,gk:()=>mn,m2:()=>ht,GH:()=>qt,xV:()=>zt,F0:()=>Ti,Od:()=>ai,yS:()=>$s,Bz:()=>Nr,lC:()=>qi});var p=R(5e3),H=R(9751),Z=R(576);function _e(I,E){const _=(0,Z.m)(I)?I:()=>I,S=F=>F.error(_());return new H.y(E?F=>E.schedule(S,0,F):S)}var pe=R(8421);function we(I){return new H.y(E=>{(0,pe.Xf)(I()).subscribe(E)})}var be=R(727),ye=R(4482),Fe=R(5403);function le(){return(0,ye.e)((I,E)=>{let _=null;I._refCount++;const S=(0,Fe.x)(E,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(_=null);const F=I._connection,j=_;_=null,F&&(!j||F===j)&&F.unsubscribe(),E.unsubscribe()});I.subscribe(S),S.closed||(_=I.connect())})}class re extends H.y{constructor(E,_){super(),this.source=E,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,ye.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,null==E||E.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new be.w0;const _=this.getSubject();E.add(this.source.subscribe((0,Fe.x)(_,void 0,()=>{this._teardown(),_.complete()},S=>{this._teardown(),_.error(S)},()=>this._teardown()))),E.closed&&(this._connection=null,E=be.w0.EMPTY)}return E}refCount(){return le()(this)}}var me=R(8996),je=R(9646),Ge=R(1135),Ze=R(9841),mt=R(6805),Le=R(7272),ke=R(515),at=R(7579);function $(I){return(0,ye.e)((E,_)=>{let j,S=null,F=!1;S=E.subscribe((0,Fe.x)(_,void 0,void 0,ie=>{j=(0,pe.Xf)(I(ie,$(I)(E))),S?(S.unsubscribe(),S=null,j.subscribe(_)):F=!0})),F&&(S.unsubscribe(),S=null,j.subscribe(_))})}var N=R(5577);function ne(I,E){return(0,Z.m)(E)?(0,N.z)(I,E,1):(0,N.z)(I,1)}var ue=R(9300);function Ee(I){return I<=0?()=>ke.E:(0,ye.e)((E,_)=>{let S=[];E.subscribe((0,Fe.x)(_,F=>{S.push(F),I<S.length&&S.shift()},()=>{for(const F of S)_.next(F);_.complete()},void 0,()=>{S=null}))})}var Ne=R(8068),Re=R(6590),fe=R(4671),ae=R(4004),$e=R(3900),Be=R(5698),_t=R(8675),vt=R(5026),Ot=R(590),gt=R(8505),bt=R(8189),Ut=R(9808);class St{constructor(E,_){this.id=E,this.url=_}}class Mt extends St{constructor(E,_,S="imperative",F=null){super(E,_),this.navigationTrigger=S,this.restoredState=F}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ht extends St{constructor(E,_,S){super(E,_),this.urlAfterRedirects=S}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mn extends St{constructor(E,_,S){super(E,_),this.reason=S}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _n extends St{constructor(E,_,S){super(E,_),this.error=S}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pn extends St{constructor(E,_,S,F){super(E,_),this.urlAfterRedirects=S,this.state=F}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qn extends St{constructor(E,_,S,F){super(E,_),this.urlAfterRedirects=S,this.state=F}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wn extends St{constructor(E,_,S,F,j){super(E,_),this.urlAfterRedirects=S,this.state=F,this.shouldActivate=j}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class er extends St{constructor(E,_,S,F){super(E,_),this.urlAfterRedirects=S,this.state=F}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ct extends St{constructor(E,_,S,F){super(E,_),this.urlAfterRedirects=S,this.state=F}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zt{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qt{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class An{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kn{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bt{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class un{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wn{constructor(E,_,S){this.routerEvent=E,this.position=_,this.anchor=S}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class Br{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const _=this.params[E];return Array.isArray(_)?_[0]:_}return null}getAll(E){if(this.has(E)){const _=this.params[E];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function jr(I){return new Br(I)}const tr="ngNavigationCancelingError";function Cr(I){const E=Error("NavigationCancelingError: "+I);return E[tr]=!0,E}function ei(I,E,_){const S=_.path.split("/");if(S.length>I.length||"full"===_.pathMatch&&(E.hasChildren()||S.length<I.length))return null;const F={};for(let j=0;j<S.length;j++){const ie=S[j],De=I[j];if(ie.startsWith(":"))F[ie.substring(1)]=De;else if(ie!==De.path)return null}return{consumed:I.slice(0,S.length),posParams:F}}function Vt(I,E){const _=I?Object.keys(I):void 0,S=E?Object.keys(E):void 0;if(!_||!S||_.length!=S.length)return!1;let F;for(let j=0;j<_.length;j++)if(F=_[j],!Kt(I[F],E[F]))return!1;return!0}function Kt(I,E){if(Array.isArray(I)&&Array.isArray(E)){if(I.length!==E.length)return!1;const _=[...I].sort(),S=[...E].sort();return _.every((F,j)=>S[j]===F)}return I===E}function or(I){return Array.prototype.concat.apply([],I)}function br(I){return I.length>0?I[I.length-1]:null}function nr(I,E){for(const _ in I)I.hasOwnProperty(_)&&E(I[_],_)}function zn(I){return(0,p.CqO)(I)?I:(0,p.QGY)(I)?(0,me.D)(Promise.resolve(I)):(0,je.of)(I)}const Qt={exact:function dt(I,E,_){if(!He(I.segments,E.segments)||!Jt(I.segments,E.segments,_)||I.numberOfChildren!==E.numberOfChildren)return!1;for(const S in E.children)if(!I.children[S]||!dt(I.children[S],E.children[S],_))return!1;return!0},subset:ln},pr={exact:function kt(I,E){return Vt(I,E)},subset:function Gt(I,E){return Object.keys(E).length<=Object.keys(I).length&&Object.keys(E).every(_=>Kt(I[_],E[_]))},ignored:()=>!0};function En(I,E,_){return Qt[_.paths](I.root,E.root,_.matrixParams)&&pr[_.queryParams](I.queryParams,E.queryParams)&&!("exact"===_.fragment&&I.fragment!==E.fragment)}function ln(I,E,_){return In(I,E,E.segments,_)}function In(I,E,_,S){if(I.segments.length>_.length){const F=I.segments.slice(0,_.length);return!(!He(F,_)||E.hasChildren()||!Jt(F,_,S))}if(I.segments.length===_.length){if(!He(I.segments,_)||!Jt(I.segments,_,S))return!1;for(const F in E.children)if(!I.children[F]||!ln(I.children[F],E.children[F],S))return!1;return!0}{const F=_.slice(0,I.segments.length),j=_.slice(I.segments.length);return!!(He(I.segments,F)&&Jt(I.segments,F,S)&&I.children[jt])&&In(I.children[jt],E,j,S)}}function Jt(I,E,_){return E.every((S,F)=>pr[_](I[F].parameters,S.parameters))}class he{constructor(E,_,S){this.root=E,this.queryParams=_,this.fragment=S}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jr(this.queryParams)),this._queryParamMap}toString(){return oe.serialize(this)}}class te{constructor(E,_){this.segments=E,this.children=_,this.parent=null,nr(_,(S,F)=>S.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Me(this)}}class Ce{constructor(E,_){this.path=E,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=jr(this.parameters)),this._parameterMap}toString(){return Wr(this)}}function He(I,E){return I.length===E.length&&I.every((_,S)=>_.path===E[S].path)}class Ae{}class ge{parse(E){const _=new Tr(E);return new he(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(E){const _=`/${nt(E.root,!0)}`,S=function Yr(I){const E=Object.keys(I).map(_=>{const S=I[_];return Array.isArray(S)?S.map(F=>`${en(_)}=${en(F)}`).join("&"):`${en(_)}=${en(S)}`}).filter(_=>!!_);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${_}${S}${"string"==typeof E.fragment?`#${function Dn(I){return encodeURI(I)}(E.fragment)}`:""}`}}const oe=new ge;function Me(I){return I.segments.map(E=>Wr(E)).join("/")}function nt(I,E){if(!I.hasChildren())return Me(I);if(E){const _=I.children[jt]?nt(I.children[jt],!1):"",S=[];return nr(I.children,(F,j)=>{j!==jt&&S.push(`${j}:${nt(F,!1)}`)}),S.length>0?`${_}(${S.join("//")})`:_}{const _=function xt(I,E){let _=[];return nr(I.children,(S,F)=>{F===jt&&(_=_.concat(E(S,F)))}),nr(I.children,(S,F)=>{F!==jt&&(_=_.concat(E(S,F)))}),_}(I,(S,F)=>F===jt?[nt(I.children[jt],!1)]:[`${F}:${nt(S,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[jt]?`${Me(I)}/${_[0]}`:`${Me(I)}/(${_.join("//")})`}}function At(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function en(I){return At(I).replace(/%3B/gi,";")}function Nn(I){return At(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $r(I){return decodeURIComponent(I)}function Gr(I){return $r(I.replace(/\+/g,"%20"))}function Wr(I){return`${Nn(I.path)}${function dr(I){return Object.keys(I).map(E=>`;${Nn(E)}=${Nn(I[E])}`).join("")}(I.parameters)}`}const zr=/^[^\/()?;=#]+/;function It(I){const E=I.match(zr);return E?E[0]:""}const rn=/^[^=?&#]+/,vr=/^[^&#]+/;class Tr{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new te([],{}):new te([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let S={};return this.peekStartsWith("(")&&(S=this.parseParens(!1)),(E.length>0||Object.keys(_).length>0)&&(S[jt]=new te(E,_)),S}parseSegment(){const E=It(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new Ce($r(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const _=It(this.remaining);if(!_)return;this.capture(_);let S="";if(this.consumeOptional("=")){const F=It(this.remaining);F&&(S=F,this.capture(S))}E[$r(_)]=$r(S)}parseQueryParam(E){const _=function yn(I){const E=I.match(rn);return E?E[0]:""}(this.remaining);if(!_)return;this.capture(_);let S="";if(this.consumeOptional("=")){const ie=function di(I){const E=I.match(vr);return E?E[0]:""}(this.remaining);ie&&(S=ie,this.capture(S))}const F=Gr(_),j=Gr(S);if(E.hasOwnProperty(F)){let ie=E[F];Array.isArray(ie)||(ie=[ie],E[F]=ie),ie.push(j)}else E[F]=j}parseParens(E){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const S=It(this.remaining),F=this.remaining[S.length];if("/"!==F&&")"!==F&&";"!==F)throw new Error(`Cannot parse url '${this.url}'`);let j;S.indexOf(":")>-1?(j=S.substr(0,S.indexOf(":")),this.capture(j),this.capture(":")):E&&(j=jt);const ie=this.parseChildren();_[j]=1===Object.keys(ie).length?ie[jt]:new te([],ie),this.consumeOptional("//")}return _}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class ti{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const _=this.pathFromRoot(E);return _.length>1?_[_.length-2]:null}children(E){const _=jn(E,this._root);return _?_.children.map(S=>S.value):[]}firstChild(E){const _=jn(E,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(E){const _=ir(E,this._root);return _.length<2?[]:_[_.length-2].children.map(F=>F.value).filter(F=>F!==E)}pathFromRoot(E){return ir(E,this._root).map(_=>_.value)}}function jn(I,E){if(I===E.value)return E;for(const _ of E.children){const S=jn(I,_);if(S)return S}return null}function ir(I,E){if(I===E.value)return[E];for(const _ of E.children){const S=ir(I,_);if(S.length)return S.unshift(E),S}return[]}class xr{constructor(E,_){this.value=E,this.children=_}toString(){return`TreeNode(${this.value})`}}function gn(I){const E={};return I&&I.children.forEach(_=>E[_.value.outlet]=_),E}class ni extends ti{constructor(E,_){super(E),this.snapshot=_,Zn(this,E)}toString(){return this.snapshot.toString()}}function Fi(I,E){const _=function ns(I,E){const ie=new Qr([],{},{},"",{},jt,E,null,I.root,-1,{});return new Sr("",new xr(ie,[]))}(I,E),S=new Ge.X([new Ce("",{})]),F=new Ge.X({}),j=new Ge.X({}),ie=new Ge.X({}),De=new Ge.X(""),ut=new Ar(S,F,ie,De,j,jt,E,_.root);return ut.snapshot=_.root,new ni(new xr(ut,[]),_)}class Ar{constructor(E,_,S,F,j,ie,De,ut){this.url=E,this.params=_,this.queryParams=S,this.fragment=F,this.data=j,this.outlet=ie,this.component=De,this._futureSnapshot=ut}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ae.U)(E=>jr(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ae.U)(E=>jr(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fn(I,E="emptyOnly"){const _=I.pathFromRoot;let S=0;if("always"!==E)for(S=_.length-1;S>=1;){const F=_[S],j=_[S-1];if(F.routeConfig&&""===F.routeConfig.path)S--;else{if(j.component)break;S--}}return function Kr(I){return I.reduce((E,_)=>({params:Object.assign(Object.assign({},E.params),_.params),data:Object.assign(Object.assign({},E.data),_.data),resolve:Object.assign(Object.assign({},E.resolve),_._resolvedData)}),{params:{},data:{},resolve:{}})}(_.slice(S))}class Qr{constructor(E,_,S,F,j,ie,De,ut,st,Ft,dn){this.url=E,this.params=_,this.queryParams=S,this.fragment=F,this.data=j,this.outlet=ie,this.component=De,this.routeConfig=ut,this._urlSegment=st,this._lastPathIndex=Ft,this._resolve=dn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(S=>S.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sr extends ti{constructor(E,_){super(_),this.url=E,Zn(this,_)}toString(){return os(this._root)}}function Zn(I,E){E.value._routerState=I,E.children.forEach(_=>Zn(I,_))}function os(I){const E=I.children.length>0?` { ${I.children.map(os).join(", ")} } `:"";return`${I.value}${E}`}function Li(I){if(I.snapshot){const E=I.snapshot,_=I._futureSnapshot;I.snapshot=_,Vt(E.queryParams,_.queryParams)||I.queryParams.next(_.queryParams),E.fragment!==_.fragment&&I.fragment.next(_.fragment),Vt(E.params,_.params)||I.params.next(_.params),function Rn(I,E){if(I.length!==E.length)return!1;for(let _=0;_<I.length;++_)if(!Vt(I[_],E[_]))return!1;return!0}(E.url,_.url)||I.url.next(_.url),Vt(E.data,_.data)||I.data.next(_.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function ar(I,E){const _=Vt(I.params,E.params)&&function Qe(I,E){return He(I,E)&&I.every((_,S)=>Vt(_.parameters,E[S].parameters))}(I.url,E.url);return _&&!(!I.parent!=!E.parent)&&(!I.parent||ar(I.parent,E.parent))}function zi(I,E,_){if(_&&I.shouldReuseRoute(E.value,_.value.snapshot)){const S=_.value;S._futureSnapshot=E.value;const F=function hi(I,E,_){return E.children.map(S=>{for(const F of _.children)if(I.shouldReuseRoute(S.value,F.value.snapshot))return zi(I,S,F);return zi(I,S)})}(I,E,_);return new xr(S,F)}{if(I.shouldAttach(E.value)){const j=I.retrieve(E.value);if(null!==j){const ie=j.route;return ie.value._futureSnapshot=E.value,ie.children=E.children.map(De=>zi(I,De)),ie}}const S=function Ds(I){return new Ar(new Ge.X(I.url),new Ge.X(I.params),new Ge.X(I.queryParams),new Ge.X(I.fragment),new Ge.X(I.data),I.outlet,I.component,I)}(E.value),F=E.children.map(j=>zi(I,j));return new xr(S,F)}}function qr(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function ms(I){return"object"==typeof I&&null!=I&&I.outlets}function Cs(I,E,_,S,F){let j={};if(S&&nr(S,(De,ut)=>{j[ut]=Array.isArray(De)?De.map(st=>`${st}`):`${De}`}),I===E)return new he(_,j,F);const ie=rr(I,E,_);return new he(ie,j,F)}function rr(I,E,_){const S={};return nr(I.children,(F,j)=>{S[j]=F===E?_:rr(F,E,_)}),new te(I.segments,S)}class Ss{constructor(E,_,S){if(this.isAbsolute=E,this.numberOfDoubleDots=_,this.commands=S,E&&S.length>0&&qr(S[0]))throw new Error("Root segment cannot have matrix parameters");const F=S.find(ms);if(F&&F!==br(S))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pe{constructor(E,_,S){this.segmentGroup=E,this.processChildren=_,this.index=S}}function Tt(I,E,_){if(I||(I=new te([],{})),0===I.segments.length&&I.hasChildren())return Yt(I,E,_);const S=function $n(I,E,_){let S=0,F=E;const j={match:!1,pathIndex:0,commandIndex:0};for(;F<I.segments.length;){if(S>=_.length)return j;const ie=I.segments[F],De=_[S];if(ms(De))break;const ut=`${De}`,st=S<_.length-1?_[S+1]:null;if(F>0&&void 0===ut)break;if(ut&&st&&"object"==typeof st&&void 0===st.outlets){if(!Ii(ut,st,ie))return j;S+=2}else{if(!Ii(ut,{},ie))return j;S++}F++}return{match:!0,pathIndex:F,commandIndex:S}}(I,E,_),F=_.slice(S.commandIndex);if(S.match&&S.pathIndex<I.segments.length){const j=new te(I.segments.slice(0,S.pathIndex),{});return j.children[jt]=new te(I.segments.slice(S.pathIndex),I.children),Yt(j,0,F)}return S.match&&0===F.length?new te(I.segments,{}):S.match&&!I.hasChildren()?Rr(I,E,_):S.match?Yt(I,0,F):Rr(I,E,_)}function Yt(I,E,_){if(0===_.length)return new te(I.segments,{});{const S=function ot(I){return ms(I[0])?I[0].outlets:{[jt]:I}}(_),F={};return nr(S,(j,ie)=>{"string"==typeof j&&(j=[j]),null!==j&&(F[ie]=Tt(I.children[ie],E,j))}),nr(I.children,(j,ie)=>{void 0===S[ie]&&(F[ie]=j)}),new te(I.segments,F)}}function Rr(I,E,_){const S=I.segments.slice(0,E);let F=0;for(;F<_.length;){const j=_[F];if(ms(j)){const ut=Ln(j.outlets);return new te(S,ut)}if(0===F&&qr(_[0])){S.push(new Ce(I.segments[E].path,Ri(_[0]))),F++;continue}const ie=ms(j)?j.outlets[jt]:`${j}`,De=F<_.length-1?_[F+1]:null;ie&&De&&qr(De)?(S.push(new Ce(ie,Ri(De))),F+=2):(S.push(new Ce(ie,{})),F++)}return new te(S,{})}function Ln(I){const E={};return nr(I,(_,S)=>{"string"==typeof _&&(_=[_]),null!==_&&(E[S]=Rr(new te([],{}),0,_))}),E}function Ri(I){const E={};return nr(I,(_,S)=>E[S]=`${_}`),E}function Ii(I,E,_){return I==_.path&&Vt(E,_.parameters)}class ys{constructor(E,_,S,F){this.routeReuseStrategy=E,this.futureState=_,this.currState=S,this.forwardEvent=F}activate(E){const _=this.futureState._root,S=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,S,E),Li(this.futureState.root),this.activateChildRoutes(_,S,E)}deactivateChildRoutes(E,_,S){const F=gn(_);E.children.forEach(j=>{const ie=j.value.outlet;this.deactivateRoutes(j,F[ie],S),delete F[ie]}),nr(F,(j,ie)=>{this.deactivateRouteAndItsChildren(j,S)})}deactivateRoutes(E,_,S){const F=E.value,j=_?_.value:null;if(F===j)if(F.component){const ie=S.getContext(F.outlet);ie&&this.deactivateChildRoutes(E,_,ie.children)}else this.deactivateChildRoutes(E,_,S);else j&&this.deactivateRouteAndItsChildren(_,S)}deactivateRouteAndItsChildren(E,_){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,_):this.deactivateRouteAndOutlet(E,_)}detachAndStoreRouteSubtree(E,_){const S=_.getContext(E.value.outlet),F=S&&E.value.component?S.children:_,j=gn(E);for(const ie of Object.keys(j))this.deactivateRouteAndItsChildren(j[ie],F);if(S&&S.outlet){const ie=S.outlet.detach(),De=S.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:ie,route:E,contexts:De})}}deactivateRouteAndOutlet(E,_){const S=_.getContext(E.value.outlet),F=S&&E.value.component?S.children:_,j=gn(E);for(const ie of Object.keys(j))this.deactivateRouteAndItsChildren(j[ie],F);S&&S.outlet&&(S.outlet.deactivate(),S.children.onOutletDeactivated(),S.attachRef=null,S.resolver=null,S.route=null)}activateChildRoutes(E,_,S){const F=gn(_);E.children.forEach(j=>{this.activateRoutes(j,F[j.value.outlet],S),this.forwardEvent(new un(j.value.snapshot))}),E.children.length&&this.forwardEvent(new kn(E.value.snapshot))}activateRoutes(E,_,S){const F=E.value,j=_?_.value:null;if(Li(F),F===j)if(F.component){const ie=S.getOrCreateContext(F.outlet);this.activateChildRoutes(E,_,ie.children)}else this.activateChildRoutes(E,_,S);else if(F.component){const ie=S.getOrCreateContext(F.outlet);if(this.routeReuseStrategy.shouldAttach(F.snapshot)){const De=this.routeReuseStrategy.retrieve(F.snapshot);this.routeReuseStrategy.store(F.snapshot,null),ie.children.onOutletReAttached(De.contexts),ie.attachRef=De.componentRef,ie.route=De.route.value,ie.outlet&&ie.outlet.attach(De.componentRef,De.route.value),Li(De.route.value),this.activateChildRoutes(E,null,ie.children)}else{const De=function Vi(I){for(let E=I.parent;E;E=E.parent){const _=E.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig;if(_&&_.component)return null}return null}(F.snapshot),ut=De?De.module.componentFactoryResolver:null;ie.attachRef=null,ie.route=F,ie.resolver=ut,ie.outlet&&ie.outlet.activateWith(F,ut),this.activateChildRoutes(E,null,ie.children)}}else this.activateChildRoutes(E,null,S)}}class xs{constructor(E,_){this.routes=E,this.module=_}}function ri(I){return"function"==typeof I}function _r(I){return I instanceof he}const Bs=Symbol("INITIAL_VALUE");function Ci(){return(0,$e.w)(I=>(0,Ze.a)(I.map(E=>E.pipe((0,Be.q)(1),(0,_t.O)(Bs)))).pipe((0,vt.R)((E,_)=>{let S=!1;return _.reduce((F,j,ie)=>F!==Bs?F:(j===Bs&&(S=!0),S||!1!==j&&ie!==_.length-1&&!_r(j)?F:j),E)},Bs),(0,ue.h)(E=>E!==Bs),(0,ae.U)(E=>_r(E)?E:!0===E),(0,Be.q)(1)))}class Ki{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Xr,this.attachRef=null}}class Xr{constructor(){this.contexts=new Map}onChildOutletCreated(E,_){const S=this.getOrCreateContext(E);S.outlet=_,this.contexts.set(E,S)}onChildOutletDestroyed(E){const _=this.getContext(E);_&&(_.outlet=null,_.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let _=this.getContext(E);return _||(_=new Ki,this.contexts.set(E,_)),_}getContext(E){return this.contexts.get(E)||null}}let qi=(()=>{class I{constructor(_,S,F,j,ie){this.parentContexts=_,this.location=S,this.resolver=F,this.changeDetector=ie,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=j||jt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,S){this.activated=_,this._activatedRoute=S,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,S){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=_;const ie=(S=S||this.resolver).resolveComponentFactory(_._futureSnapshot.routeConfig.component),De=this.parentContexts.getOrCreateContext(this.name).children,ut=new bs(_,De,this.location.injector);this.activated=this.location.createComponent(ie,this.location.length,ut),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Xr),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},I.\u0275dir=p.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),I})();class bs{constructor(E,_,S){this.route=E,this.childContexts=_,this.parent=S}get(E,_){return E===Ar?this.route:E===Xr?this.childContexts:this.parent.get(E,_)}}let Er=(()=>{class I{}return I.\u0275fac=function(_){return new(_||I)},I.\u0275cmp=p.Xpm({type:I,selectors:[["ng-component"]],decls:1,vars:0,template:function(_,S){1&_&&p._UZ(0,"router-outlet")},directives:[qi],encapsulation:2}),I})();function Or(I,E=""){for(let _=0;_<I.length;_++){const S=I[_];cs(S,Rs(E,S))}}function cs(I,E){I.children&&Or(I.children,E)}function Rs(I,E){return E?I||E.path?I&&!E.path?`${I}/`:!I&&E.path?E.path:`${I}/${E.path}`:"":I}function Os(I){const E=I.children&&I.children.map(Os),_=E?Object.assign(Object.assign({},I),{children:E}):Object.assign({},I);return!_.component&&(E||_.loadChildren)&&_.outlet&&_.outlet!==jt&&(_.component=Er),_}function ii(I){return I.outlet||jt}function rs(I,E){const _=I.filter(S=>ii(S)===E);return _.push(...I.filter(S=>ii(S)!==E)),_}const pi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gi(I,E,_){var S;if(""===E.path)return"full"===E.pathMatch&&(I.hasChildren()||_.length>0)?Object.assign({},pi):{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const j=(E.matcher||ei)(_,I,E);if(!j)return Object.assign({},pi);const ie={};nr(j.posParams,(ut,st)=>{ie[st]=ut.path});const De=j.consumed.length>0?Object.assign(Object.assign({},ie),j.consumed[j.consumed.length-1].parameters):ie;return{matched:!0,consumedSegments:j.consumed,remainingSegments:_.slice(j.consumed.length),parameters:De,positionalParamSegments:null!==(S=j.posParams)&&void 0!==S?S:{}}}function Zi(I,E,_,S,F="corrected"){if(_.length>0&&function G(I,E,_){return _.some(S=>Y(I,E,S)&&ii(S)!==jt)}(I,_,S)){const ie=new te(E,function x(I,E,_,S){const F={};F[jt]=S,S._sourceSegment=I,S._segmentIndexShift=E.length;for(const j of _)if(""===j.path&&ii(j)!==jt){const ie=new te([],{});ie._sourceSegment=I,ie._segmentIndexShift=E.length,F[ii(j)]=ie}return F}(I,E,S,new te(_,I.children)));return ie._sourceSegment=I,ie._segmentIndexShift=E.length,{segmentGroup:ie,slicedSegments:[]}}if(0===_.length&&function M(I,E,_){return _.some(S=>Y(I,E,S))}(I,_,S)){const ie=new te(I.segments,function ur(I,E,_,S,F,j){const ie={};for(const De of S)if(Y(I,_,De)&&!F[ii(De)]){const ut=new te([],{});ut._sourceSegment=I,ut._segmentIndexShift="legacy"===j?I.segments.length:E.length,ie[ii(De)]=ut}return Object.assign(Object.assign({},F),ie)}(I,E,_,S,I.children,F));return ie._sourceSegment=I,ie._segmentIndexShift=E.length,{segmentGroup:ie,slicedSegments:_}}const j=new te(I.segments,I.children);return j._sourceSegment=I,j._segmentIndexShift=E.length,{segmentGroup:j,slicedSegments:_}}function Y(I,E,_){return(!(I.hasChildren()||E.length>0)||"full"!==_.pathMatch)&&""===_.path}function Ie(I,E,_,S){return!!(ii(I)===S||S!==jt&&Y(E,_,I))&&("**"===I.path||gi(E,I,_).matched)}function Je(I,E,_){return 0===E.length&&!I.children[_]}class tt{constructor(E){this.segmentGroup=E||null}}class Nt{constructor(E){this.urlTree=E}}function Qn(I){return _e(new tt(I))}function Hn(I){return _e(new Nt(I))}class sr{constructor(E,_,S,F,j){this.configLoader=_,this.urlSerializer=S,this.urlTree=F,this.config=j,this.allowRedirects=!0,this.ngModule=E.get(p.h0i)}apply(){const E=Zi(this.urlTree.root,[],[],this.config).segmentGroup,_=new te(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,_,jt).pipe((0,ae.U)(j=>this.createUrlTree(k(j),this.urlTree.queryParams,this.urlTree.fragment))).pipe($(j=>{if(j instanceof Nt)return this.allowRedirects=!1,this.match(j.urlTree);throw j instanceof tt?this.noMatchError(j):j}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,jt).pipe((0,ae.U)(F=>this.createUrlTree(k(F),E.queryParams,E.fragment))).pipe($(F=>{throw F instanceof tt?this.noMatchError(F):F}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,_,S){const F=E.segments.length>0?new te([],{[jt]:E}):E;return new he(F,_,S)}expandSegmentGroup(E,_,S,F){return 0===S.segments.length&&S.hasChildren()?this.expandChildren(E,_,S).pipe((0,ae.U)(j=>new te([],j))):this.expandSegment(E,S,_,S.segments,F,!0)}expandChildren(E,_,S){const F=[];for(const j of Object.keys(S.children))"primary"===j?F.unshift(j):F.push(j);return(0,me.D)(F).pipe(ne(j=>{const ie=S.children[j],De=rs(_,j);return this.expandSegmentGroup(E,De,ie,j).pipe((0,ae.U)(ut=>({segment:ut,outlet:j})))}),(0,vt.R)((j,ie)=>(j[ie.outlet]=ie.segment,j),{}),function X(I,E){const _=arguments.length>=2;return S=>S.pipe(I?(0,ue.h)((F,j)=>I(F,j,S)):fe.y,Ee(1),_?(0,Re.d)(E):(0,Ne.T)(()=>new mt.K))}())}expandSegment(E,_,S,F,j,ie){return(0,me.D)(S).pipe(ne(De=>this.expandSegmentAgainstRoute(E,_,S,De,F,j,ie).pipe($(st=>{if(st instanceof tt)return(0,je.of)(null);throw st}))),(0,Ot.P)(De=>!!De),$((De,ut)=>{if(De instanceof mt.K||"EmptyError"===De.name)return Je(_,F,j)?(0,je.of)(new te([],{})):Qn(_);throw De}))}expandSegmentAgainstRoute(E,_,S,F,j,ie,De){return Ie(F,_,j,ie)?void 0===F.redirectTo?this.matchSegmentAgainstRoute(E,_,F,j,ie):De&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,_,S,F,j,ie):Qn(_):Qn(_)}expandSegmentAgainstRouteUsingRedirect(E,_,S,F,j,ie){return"**"===F.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,S,F,ie):this.expandRegularSegmentAgainstRouteUsingRedirect(E,_,S,F,j,ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,_,S,F){const j=this.applyRedirectCommands([],S.redirectTo,{});return S.redirectTo.startsWith("/")?Hn(j):this.lineralizeSegments(S,j).pipe((0,N.z)(ie=>{const De=new te(ie,{});return this.expandSegment(E,De,_,ie,F,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,_,S,F,j,ie){const{matched:De,consumedSegments:ut,remainingSegments:st,positionalParamSegments:Ft}=gi(_,F,j);if(!De)return Qn(_);const dn=this.applyRedirectCommands(ut,F.redirectTo,Ft);return F.redirectTo.startsWith("/")?Hn(dn):this.lineralizeSegments(F,dn).pipe((0,N.z)(Et=>this.expandSegment(E,_,S,Et.concat(st),ie,!1)))}matchSegmentAgainstRoute(E,_,S,F,j){if("**"===S.path)return S.loadChildren?(S._loadedConfig?(0,je.of)(S._loadedConfig):this.configLoader.load(E.injector,S)).pipe((0,ae.U)(dn=>(S._loadedConfig=dn,new te(F,{})))):(0,je.of)(new te(F,{}));const{matched:ie,consumedSegments:De,remainingSegments:ut}=gi(_,S,F);return ie?this.getChildConfig(E,S,F).pipe((0,N.z)(Ft=>{const dn=Ft.module,Et=Ft.routes,{segmentGroup:ze,slicedSegments:yt}=Zi(_,De,ut,Et),Ur=new te(ze.segments,ze.children);if(0===yt.length&&Ur.hasChildren())return this.expandChildren(dn,Et,Ur).pipe((0,ae.U)(Iu=>new te(De,Iu)));if(0===Et.length&&0===yt.length)return(0,je.of)(new te(De,{}));const Es=ii(S)===j;return this.expandSegment(dn,Ur,Et,yt,Es?jt:j,!0).pipe((0,ae.U)(mo=>new te(De.concat(mo.segments),mo.children)))})):Qn(_)}getChildConfig(E,_,S){return _.children?(0,je.of)(new xs(_.children,E)):_.loadChildren?void 0!==_._loadedConfig?(0,je.of)(_._loadedConfig):this.runCanLoadGuards(E.injector,_,S).pipe((0,N.z)(F=>F?this.configLoader.load(E.injector,_).pipe((0,ae.U)(j=>(_._loadedConfig=j,j))):function Mn(I){return _e(Cr(`Cannot load children because the guard of the route "path: '${I.path}'" returned false`))}(_))):(0,je.of)(new xs([],E))}runCanLoadGuards(E,_,S){const F=_.canLoad;if(!F||0===F.length)return(0,je.of)(!0);const j=F.map(ie=>{const De=E.get(ie);let ut;if(function as(I){return I&&ri(I.canLoad)}(De))ut=De.canLoad(_,S);else{if(!ri(De))throw new Error("Invalid CanLoad guard");ut=De(_,S)}return zn(ut)});return(0,je.of)(j).pipe(Ci(),(0,gt.b)(ie=>{if(!_r(ie))return;const De=Cr(`Redirecting to "${this.urlSerializer.serialize(ie)}"`);throw De.url=ie,De}),(0,ae.U)(ie=>!0===ie))}lineralizeSegments(E,_){let S=[],F=_.root;for(;;){if(S=S.concat(F.segments),0===F.numberOfChildren)return(0,je.of)(S);if(F.numberOfChildren>1||!F.children[jt])return _e(new Error(`Only absolute redirects can have named outlets. redirectTo: '${E.redirectTo}'`));F=F.children[jt]}}applyRedirectCommands(E,_,S){return this.applyRedirectCreatreUrlTree(_,this.urlSerializer.parse(_),E,S)}applyRedirectCreatreUrlTree(E,_,S,F){const j=this.createSegmentGroup(E,_.root,S,F);return new he(j,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(E,_){const S={};return nr(E,(F,j)=>{if("string"==typeof F&&F.startsWith(":")){const De=F.substring(1);S[j]=_[De]}else S[j]=F}),S}createSegmentGroup(E,_,S,F){const j=this.createSegments(E,_.segments,S,F);let ie={};return nr(_.children,(De,ut)=>{ie[ut]=this.createSegmentGroup(E,De,S,F)}),new te(j,ie)}createSegments(E,_,S,F){return _.map(j=>j.path.startsWith(":")?this.findPosParam(E,j,F):this.findOrReturn(j,S))}findPosParam(E,_,S){const F=S[_.path.substring(1)];if(!F)throw new Error(`Cannot redirect to '${E}'. Cannot find '${_.path}'.`);return F}findOrReturn(E,_){let S=0;for(const F of _){if(F.path===E.path)return _.splice(S),F;S++}return E}}function k(I){const E={};for(const S of Object.keys(I.children)){const j=k(I.children[S]);(j.segments.length>0||j.hasChildren())&&(E[S]=j)}return function gr(I){if(1===I.numberOfChildren&&I.children[jt]){const E=I.children[jt];return new te(I.segments.concat(E.segments),E.children)}return I}(new te(I.segments,E))}class C{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class q{constructor(E,_){this.component=E,this.route=_}}function rt(I,E,_){const S=I._root;return O(S,E?E._root:null,_,[S.value])}function mr(I,E,_){const S=function L(I){if(!I)return null;for(let E=I.parent;E;E=E.parent){const _=E.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig}return null}(E);return(S?S.module.injector:_).get(I)}function O(I,E,_,S,F={canDeactivateChecks:[],canActivateChecks:[]}){const j=gn(E);return I.children.forEach(ie=>{(function ee(I,E,_,S,F={canDeactivateChecks:[],canActivateChecks:[]}){const j=I.value,ie=E?E.value:null,De=_?_.getContext(I.value.outlet):null;if(ie&&j.routeConfig===ie.routeConfig){const ut=function Q(I,E,_){if("function"==typeof _)return _(I,E);switch(_){case"pathParamsChange":return!He(I.url,E.url);case"pathParamsOrQueryParamsChange":return!He(I.url,E.url)||!Vt(I.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ar(I,E)||!Vt(I.queryParams,E.queryParams);default:return!ar(I,E)}}(ie,j,j.routeConfig.runGuardsAndResolvers);ut?F.canActivateChecks.push(new C(S)):(j.data=ie.data,j._resolvedData=ie._resolvedData),O(I,E,j.component?De?De.children:null:_,S,F),ut&&De&&De.outlet&&De.outlet.isActivated&&F.canDeactivateChecks.push(new q(De.outlet.component,ie))}else ie&&ve(E,De,F),F.canActivateChecks.push(new C(S)),O(I,null,j.component?De?De.children:null:_,S,F)})(ie,j[ie.value.outlet],_,S.concat([ie.value]),F),delete j[ie.value.outlet]}),nr(j,(ie,De)=>ve(ie,_.getContext(De),F)),F}function ve(I,E,_){const S=gn(I),F=I.value;nr(S,(j,ie)=>{ve(j,F.component?E?E.children.getContext(ie):null:E,_)}),_.canDeactivateChecks.push(new q(F.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,F))}class si{}function Hr(I){return new H.y(E=>E.error(I))}class Kn{constructor(E,_,S,F,j,ie){this.rootComponentType=E,this.config=_,this.urlTree=S,this.url=F,this.paramsInheritanceStrategy=j,this.relativeLinkResolution=ie}recognize(){const E=Zi(this.urlTree.root,[],[],this.config.filter(ie=>void 0===ie.redirectTo),this.relativeLinkResolution).segmentGroup,_=this.processSegmentGroup(this.config,E,jt);if(null===_)return null;const S=new Qr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),F=new xr(S,_),j=new Sr(this.url,F);return this.inheritParamsAndData(j._root),j}inheritParamsAndData(E){const _=E.value,S=Fn(_,this.paramsInheritanceStrategy);_.params=Object.freeze(S.params),_.data=Object.freeze(S.data),E.children.forEach(F=>this.inheritParamsAndData(F))}processSegmentGroup(E,_,S){return 0===_.segments.length&&_.hasChildren()?this.processChildren(E,_):this.processSegment(E,_,_.segments,S)}processChildren(E,_){const S=[];for(const j of Object.keys(_.children)){const ie=_.children[j],De=rs(E,j),ut=this.processSegmentGroup(De,ie,j);if(null===ut)return null;S.push(...ut)}const F=yr(S);return function Lr(I){I.sort((E,_)=>E.value.outlet===jt?-1:_.value.outlet===jt?1:E.value.outlet.localeCompare(_.value.outlet))}(F),F}processSegment(E,_,S,F){for(const j of E){const ie=this.processSegmentAgainstRoute(j,_,S,F);if(null!==ie)return ie}return Je(_,S,F)?[]:null}processSegmentAgainstRoute(E,_,S,F){if(E.redirectTo||!Ie(E,_,S,F))return null;let j,ie=[],De=[];if("**"===E.path){const ze=S.length>0?br(S).parameters:{};j=new Qr(S,ze,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wr(E),ii(E),E.component,E,Yi(_),no(_)+S.length,Ps(E))}else{const ze=gi(_,E,S);if(!ze.matched)return null;ie=ze.consumedSegments,De=ze.remainingSegments,j=new Qr(ie,ze.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wr(E),ii(E),E.component,E,Yi(_),no(_)+ie.length,Ps(E))}const ut=function Ui(I){return I.children?I.children:I.loadChildren?I._loadedConfig.routes:[]}(E),{segmentGroup:st,slicedSegments:Ft}=Zi(_,ie,De,ut.filter(ze=>void 0===ze.redirectTo),this.relativeLinkResolution);if(0===Ft.length&&st.hasChildren()){const ze=this.processChildren(ut,st);return null===ze?null:[new xr(j,ze)]}if(0===ut.length&&0===Ft.length)return[new xr(j,[])];const dn=ii(E)===F,Et=this.processSegment(ut,st,Ft,dn?jt:F);return null===Et?null:[new xr(j,Et)]}}function kr(I){const E=I.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function yr(I){const E=[],_=new Set;for(const S of I){if(!kr(S)){E.push(S);continue}const F=E.find(j=>S.value.routeConfig===j.value.routeConfig);void 0!==F?(F.children.push(...S.children),_.add(F)):E.push(S)}for(const S of _){const F=yr(S.children);E.push(new xr(S.value,F))}return E.filter(S=>!_.has(S))}function Yi(I){let E=I;for(;E._sourceSegment;)E=E._sourceSegment;return E}function no(I){let E=I,_=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,_+=E._segmentIndexShift?E._segmentIndexShift:0;return _-1}function wr(I){return I.data||{}}function Ps(I){return I.resolve||{}}function Bo(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function Jo(I){return(0,$e.w)(E=>{const _=I(E);return _?(0,me.D)(_).pipe((0,ae.U)(()=>E)):(0,je.of)(E)})}class ks extends class wa{shouldDetach(E){return!1}store(E,_){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,_){return E.routeConfig===_.routeConfig}}{}const ro=new p.OlP("ROUTES");class mu{constructor(E,_,S,F){this.injector=E,this.compiler=_,this.onLoadStartListener=S,this.onLoadEndListener=F}load(E,_){if(_._loader$)return _._loader$;this.onLoadStartListener&&this.onLoadStartListener(_);const F=this.loadModuleFactory(_.loadChildren).pipe((0,ae.U)(j=>{this.onLoadEndListener&&this.onLoadEndListener(_);const ie=j.create(E);return new xs(or(ie.injector.get(ro,void 0,p.XFs.Self|p.XFs.Optional)).map(Os),ie)}),$(j=>{throw _._loader$=void 0,j}));return _._loader$=new re(F,()=>new at.x).pipe(le()),_._loader$}loadModuleFactory(E){return zn(E()).pipe((0,N.z)(_=>_ instanceof p.YKP?(0,je.of)(_):(0,me.D)(this.compiler.compileModuleAsync(_))))}}class bi{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,_){return E}}function Ao(I){throw I}function oi(I,E,_){return E.parse("/")}function So(I,E){return(0,je.of)(null)}const Jl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ti=(()=>{class I{constructor(_,S,F,j,ie,De,ut){this.rootComponentType=_,this.urlSerializer=S,this.rootContexts=F,this.location=j,this.config=ut,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new at.x,this.errorHandler=Ao,this.malformedUriErrorHandler=oi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:So,afterPreactivation:So},this.urlHandlingStrategy=new bi,this.routeReuseStrategy=new ks,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ie.get(p.h0i),this.console=ie.get(p.c2e);const dn=ie.get(p.R0b);this.isNgZoneEnabled=dn instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(ut),this.currentUrlTree=function fr(){return new he(new te([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mu(ie,De,Et=>this.triggerEvent(new zt(Et)),Et=>this.triggerEvent(new qt(Et))),this.routerState=Fi(this.currentUrlTree,this.rootComponentType),this.transitions=new Ge.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var _;return null===(_=this.location.getState())||void 0===_?void 0:_.\u0275routerPageId}setupNavigations(_){const S=this.events;return _.pipe((0,ue.h)(F=>0!==F.id),(0,ae.U)(F=>Object.assign(Object.assign({},F),{extractedUrl:this.urlHandlingStrategy.extract(F.rawUrl)})),(0,$e.w)(F=>{let j=!1,ie=!1;return(0,je.of)(F).pipe((0,gt.b)(De=>{this.currentNavigation={id:De.id,initialUrl:De.currentRawUrl,extractedUrl:De.extractedUrl,trigger:De.source,extras:De.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,$e.w)(De=>{const ut=this.browserUrlTree.toString(),st=!this.navigated||De.extractedUrl.toString()!==ut||ut!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||st)&&this.urlHandlingStrategy.shouldProcessUrl(De.rawUrl))return ta(De.source)&&(this.browserUrlTree=De.extractedUrl),(0,je.of)(De).pipe((0,$e.w)(dn=>{const Et=this.transitions.getValue();return S.next(new Mt(dn.id,this.serializeUrl(dn.extractedUrl),dn.source,dn.restoredState)),Et!==this.transitions.getValue()?ke.E:Promise.resolve(dn)}),function A(I,E,_,S){return(0,$e.w)(F=>function Pr(I,E,_,S,F){return new sr(I,E,_,S,F).apply()}(I,E,_,F.extractedUrl,S).pipe((0,ae.U)(j=>Object.assign(Object.assign({},F),{urlAfterRedirects:j}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,gt.b)(dn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:dn.urlAfterRedirects})}),function Xo(I,E,_,S,F){return(0,N.z)(j=>function mi(I,E,_,S,F="emptyOnly",j="legacy"){try{const ie=new Kn(I,E,_,S,F,j).recognize();return null===ie?Hr(new si):(0,je.of)(ie)}catch(ie){return Hr(ie)}}(I,E,j.urlAfterRedirects,_(j.urlAfterRedirects),S,F).pipe((0,ae.U)(ie=>Object.assign(Object.assign({},j),{targetSnapshot:ie}))))}(this.rootComponentType,this.config,dn=>this.serializeUrl(dn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,gt.b)(dn=>{if("eager"===this.urlUpdateStrategy){if(!dn.extras.skipLocationChange){const ze=this.urlHandlingStrategy.merge(dn.urlAfterRedirects,dn.rawUrl);this.setBrowserUrl(ze,dn)}this.browserUrlTree=dn.urlAfterRedirects}const Et=new pn(dn.id,this.serializeUrl(dn.extractedUrl),this.serializeUrl(dn.urlAfterRedirects),dn.targetSnapshot);S.next(Et)}));if(st&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Et,extractedUrl:ze,source:yt,restoredState:Ur,extras:Es}=De,wu=new Mt(Et,this.serializeUrl(ze),yt,Ur);S.next(wu);const mo=Fi(ze,this.rootComponentType).snapshot;return(0,je.of)(Object.assign(Object.assign({},De),{targetSnapshot:mo,urlAfterRedirects:ze,extras:Object.assign(Object.assign({},Es),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=De.rawUrl,De.resolve(null),ke.E}),Jo(De=>{const{targetSnapshot:ut,id:st,extractedUrl:Ft,rawUrl:dn,extras:{skipLocationChange:Et,replaceUrl:ze}}=De;return this.hooks.beforePreactivation(ut,{navigationId:st,appliedUrlTree:Ft,rawUrlTree:dn,skipLocationChange:!!Et,replaceUrl:!!ze})}),(0,gt.b)(De=>{const ut=new qn(De.id,this.serializeUrl(De.extractedUrl),this.serializeUrl(De.urlAfterRedirects),De.targetSnapshot);this.triggerEvent(ut)}),(0,ae.U)(De=>Object.assign(Object.assign({},De),{guards:rt(De.targetSnapshot,De.currentSnapshot,this.rootContexts)})),function Xe(I,E){return(0,N.z)(_=>{const{targetSnapshot:S,currentSnapshot:F,guards:{canActivateChecks:j,canDeactivateChecks:ie}}=_;return 0===ie.length&&0===j.length?(0,je.of)(Object.assign(Object.assign({},_),{guardsResult:!0})):function ft(I,E,_,S){return(0,me.D)(I).pipe((0,N.z)(F=>function Mr(I,E,_,S,F){const j=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!j||0===j.length)return(0,je.of)(!0);const ie=j.map(De=>{const ut=mr(De,E,F);let st;if(function to(I){return I&&ri(I.canDeactivate)}(ut))st=zn(ut.canDeactivate(I,E,_,S));else{if(!ri(ut))throw new Error("Invalid CanDeactivate guard");st=zn(ut(I,E,_,S))}return st.pipe((0,Ot.P)())});return(0,je.of)(ie).pipe(Ci())}(F.component,F.route,_,E,S)),(0,Ot.P)(F=>!0!==F,!0))}(ie,S,F,I).pipe((0,N.z)(De=>De&&function Di(I){return"boolean"==typeof I}(De)?function sn(I,E,_,S){return(0,me.D)(E).pipe(ne(F=>(0,Le.z)(function vn(I,E){return null!==I&&E&&E(new An(I)),(0,je.of)(!0)}(F.route.parent,S),function Ht(I,E){return null!==I&&E&&E(new Bt(I)),(0,je.of)(!0)}(F.route,S),function Fr(I,E,_){const S=E[E.length-1],j=E.slice(0,E.length-1).reverse().map(ie=>function tn(I){const E=I.routeConfig?I.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:I,guards:E}:null}(ie)).filter(ie=>null!==ie).map(ie=>we(()=>{const De=ie.guards.map(ut=>{const st=mr(ut,ie.node,_);let Ft;if(function ls(I){return I&&ri(I.canActivateChild)}(st))Ft=zn(st.canActivateChild(S,I));else{if(!ri(st))throw new Error("Invalid CanActivateChild guard");Ft=zn(st(S,I))}return Ft.pipe((0,Ot.P)())});return(0,je.of)(De).pipe(Ci())}));return(0,je.of)(j).pipe(Ci())}(I,F.path,_),function Yn(I,E,_){const S=E.routeConfig?E.routeConfig.canActivate:null;if(!S||0===S.length)return(0,je.of)(!0);const F=S.map(j=>we(()=>{const ie=mr(j,E,_);let De;if(function us(I){return I&&ri(I.canActivate)}(ie))De=zn(ie.canActivate(E,I));else{if(!ri(ie))throw new Error("Invalid CanActivate guard");De=zn(ie(E,I))}return De.pipe((0,Ot.P)())}));return(0,je.of)(F).pipe(Ci())}(I,F.route,_))),(0,Ot.P)(F=>!0!==F,!0))}(S,j,I,E):(0,je.of)(De)),(0,ae.U)(De=>Object.assign(Object.assign({},_),{guardsResult:De})))})}(this.ngModule.injector,De=>this.triggerEvent(De)),(0,gt.b)(De=>{if(_r(De.guardsResult)){const st=Cr(`Redirecting to "${this.serializeUrl(De.guardsResult)}"`);throw st.url=De.guardsResult,st}const ut=new Wn(De.id,this.serializeUrl(De.extractedUrl),this.serializeUrl(De.urlAfterRedirects),De.targetSnapshot,!!De.guardsResult);this.triggerEvent(ut)}),(0,ue.h)(De=>!!De.guardsResult||(this.restoreHistory(De),this.cancelNavigationTransition(De,""),!1)),Jo(De=>{if(De.guards.canActivateChecks.length)return(0,je.of)(De).pipe((0,gt.b)(ut=>{const st=new er(ut.id,this.serializeUrl(ut.extractedUrl),this.serializeUrl(ut.urlAfterRedirects),ut.targetSnapshot);this.triggerEvent(st)}),(0,$e.w)(ut=>{let st=!1;return(0,je.of)(ut).pipe(function Ea(I,E){return(0,N.z)(_=>{const{targetSnapshot:S,guards:{canActivateChecks:F}}=_;if(!F.length)return(0,je.of)(_);let j=0;return(0,me.D)(F).pipe(ne(ie=>function ja(I,E,_,S){return function $a(I,E,_,S){const F=Bo(I);if(0===F.length)return(0,je.of)({});const j={};return(0,me.D)(F).pipe((0,N.z)(ie=>function fo(I,E,_,S){const F=mr(I,E,S);return zn(F.resolve?F.resolve(E,_):F(E,_))}(I[ie],E,_,S).pipe((0,gt.b)(De=>{j[ie]=De}))),Ee(1),(0,N.z)(()=>Bo(j).length===F.length?(0,je.of)(j):ke.E))}(I._resolve,I,E,S).pipe((0,ae.U)(j=>(I._resolvedData=j,I.data=Object.assign(Object.assign({},I.data),Fn(I,_).resolve),null)))}(ie.route,S,I,E)),(0,gt.b)(()=>j++),Ee(1),(0,N.z)(ie=>j===F.length?(0,je.of)(_):ke.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,gt.b)({next:()=>st=!0,complete:()=>{st||(this.restoreHistory(ut),this.cancelNavigationTransition(ut,"At least one route resolver didn't emit any value."))}}))}),(0,gt.b)(ut=>{const st=new ct(ut.id,this.serializeUrl(ut.extractedUrl),this.serializeUrl(ut.urlAfterRedirects),ut.targetSnapshot);this.triggerEvent(st)}))}),Jo(De=>{const{targetSnapshot:ut,id:st,extractedUrl:Ft,rawUrl:dn,extras:{skipLocationChange:Et,replaceUrl:ze}}=De;return this.hooks.afterPreactivation(ut,{navigationId:st,appliedUrlTree:Ft,rawUrlTree:dn,skipLocationChange:!!Et,replaceUrl:!!ze})}),(0,ae.U)(De=>{const ut=function _i(I,E,_){const S=zi(I,E._root,_?_._root:void 0);return new ni(S,E)}(this.routeReuseStrategy,De.targetSnapshot,De.currentRouterState);return Object.assign(Object.assign({},De),{targetRouterState:ut})}),(0,gt.b)(De=>{this.currentUrlTree=De.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(De.urlAfterRedirects,De.rawUrl),this.routerState=De.targetRouterState,"deferred"===this.urlUpdateStrategy&&(De.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,De),this.browserUrlTree=De.urlAfterRedirects)}),((I,E,_)=>(0,ae.U)(S=>(new ys(E,S.targetRouterState,S.currentRouterState,_).activate(I),S)))(this.rootContexts,this.routeReuseStrategy,De=>this.triggerEvent(De)),(0,gt.b)({next(){j=!0},complete(){j=!0}}),function Oe(I){return(0,ye.e)((E,_)=>{try{E.subscribe(_)}finally{_.add(I)}})}(()=>{var De;j||ie||this.cancelNavigationTransition(F,`Navigation ID ${F.id} is not equal to the current navigation id ${this.navigationId}`),(null===(De=this.currentNavigation)||void 0===De?void 0:De.id)===F.id&&(this.currentNavigation=null)}),$(De=>{if(ie=!0,function yi(I){return I&&I[tr]}(De)){const ut=_r(De.url);ut||(this.navigated=!0,this.restoreHistory(F,!0));const st=new mn(F.id,this.serializeUrl(F.extractedUrl),De.message);S.next(st),ut?setTimeout(()=>{const Ft=this.urlHandlingStrategy.merge(De.url,this.rawUrlTree),dn={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ta(F.source)};this.scheduleNavigation(Ft,"imperative",null,dn,{resolve:F.resolve,reject:F.reject,promise:F.promise})},0):F.resolve(!1)}else{this.restoreHistory(F,!0);const ut=new _n(F.id,this.serializeUrl(F.extractedUrl),De);S.next(ut);try{F.resolve(this.errorHandler(De))}catch(st){F.reject(st)}}return ke.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),_))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const S="popstate"===_.type?"popstate":"hashchange";"popstate"===S&&setTimeout(()=>{var F;const j={replaceUrl:!0},ie=(null===(F=_.state)||void 0===F?void 0:F.navigationId)?_.state:null;if(ie){const ut=Object.assign({},ie);delete ut.navigationId,delete ut.\u0275routerPageId,0!==Object.keys(ut).length&&(j.state=ut)}const De=this.parseUrl(_.url);this.scheduleNavigation(De,S,ie,j)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){Or(_),this.config=_.map(Os),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,S={}){const{relativeTo:F,queryParams:j,fragment:ie,queryParamsHandling:De,preserveFragment:ut}=S,st=F||this.routerState.root,Ft=ut?this.currentUrlTree.fragment:ie;let dn=null;switch(De){case"merge":dn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),j);break;case"preserve":dn=this.currentUrlTree.queryParams;break;default:dn=j||null}return null!==dn&&(dn=this.removeEmptyProps(dn)),function fi(I,E,_,S,F){if(0===_.length)return Cs(E.root,E.root,E.root,S,F);const j=function Ms(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Ss(!0,0,I);let E=0,_=!1;const S=I.reduce((F,j,ie)=>{if("object"==typeof j&&null!=j){if(j.outlets){const De={};return nr(j.outlets,(ut,st)=>{De[st]="string"==typeof ut?ut.split("/"):ut}),[...F,{outlets:De}]}if(j.segmentPath)return[...F,j.segmentPath]}return"string"!=typeof j?[...F,j]:0===ie?(j.split("/").forEach((De,ut)=>{0==ut&&"."===De||(0==ut&&""===De?_=!0:".."===De?E++:""!=De&&F.push(De))}),F):[...F,j]},[]);return new Ss(_,E,S)}(_);if(j.toRoot())return Cs(E.root,E.root,new te([],{}),S,F);const ie=function xe(I,E,_){if(I.isAbsolute)return new Pe(E.root,!0,0);if(-1===_.snapshot._lastPathIndex){const j=_.snapshot._urlSegment;return new Pe(j,j===E.root,0)}const S=qr(I.commands[0])?0:1;return function qe(I,E,_){let S=I,F=E,j=_;for(;j>F;){if(j-=F,S=S.parent,!S)throw new Error("Invalid number of '../'");F=S.segments.length}return new Pe(S,!1,F-j)}(_.snapshot._urlSegment,_.snapshot._lastPathIndex+S,I.numberOfDoubleDots)}(j,E,I),De=ie.processChildren?Yt(ie.segmentGroup,ie.index,j.commands):Tt(ie.segmentGroup,ie.index,j.commands);return Cs(E.root,ie.segmentGroup,De,S,F)}(st,this.currentUrlTree,_,dn,null!=Ft?Ft:null)}navigateByUrl(_,S={skipLocationChange:!1}){const F=_r(_)?_:this.parseUrl(_),j=this.urlHandlingStrategy.merge(F,this.rawUrlTree);return this.scheduleNavigation(j,"imperative",null,S)}navigate(_,S={skipLocationChange:!1}){return function ec(I){for(let E=0;E<I.length;E++){const _=I[E];if(null==_)throw new Error(`The requested path contains ${_} segment at index ${E}`)}}(_),this.navigateByUrl(this.createUrlTree(_,S),S)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let S;try{S=this.urlSerializer.parse(_)}catch(F){S=this.malformedUriErrorHandler(F,this.urlSerializer,_)}return S}isActive(_,S){let F;if(F=!0===S?Object.assign({},Jl):!1===S?Object.assign({},yu):S,_r(_))return En(this.currentUrlTree,_,F);const j=this.parseUrl(_);return En(this.currentUrlTree,j,F)}removeEmptyProps(_){return Object.keys(_).reduce((S,F)=>{const j=_[F];return null!=j&&(S[F]=j),S},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new ht(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,S,F,j,ie){var De,ut;if(this.disposed)return Promise.resolve(!1);let st,Ft,dn;ie?(st=ie.resolve,Ft=ie.reject,dn=ie.promise):dn=new Promise((yt,Ur)=>{st=yt,Ft=Ur});const Et=++this.navigationId;let ze;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(F=this.location.getState()),ze=F&&F.\u0275routerPageId?F.\u0275routerPageId:j.replaceUrl||j.skipLocationChange?null!==(De=this.browserPageId)&&void 0!==De?De:0:(null!==(ut=this.browserPageId)&&void 0!==ut?ut:0)+1):ze=0,this.setTransition({id:Et,targetPageId:ze,source:S,restoredState:F,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:j,resolve:st,reject:Ft,promise:dn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),dn.catch(yt=>Promise.reject(yt))}setBrowserUrl(_,S){const F=this.urlSerializer.serialize(_),j=Object.assign(Object.assign({},S.extras.state),this.generateNgRouterState(S.id,S.targetPageId));this.location.isCurrentPathEqualTo(F)||S.extras.replaceUrl?this.location.replaceState(F,"",j):this.location.go(F,"",j)}restoreHistory(_,S=!1){var F,j;if("computed"===this.canceledNavigationResolution){const ie=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(F=this.currentNavigation)||void 0===F?void 0:F.finalUrl)||0===ie?this.currentUrlTree===(null===(j=this.currentNavigation)||void 0===j?void 0:j.finalUrl)&&0===ie&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ie)}else"replace"===this.canceledNavigationResolution&&(S&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,S){const F=new mn(_.id,this.serializeUrl(_.extractedUrl),S);this.triggerEvent(F),_.resolve(!1)}generateNgRouterState(_,S){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:S}:{navigationId:_}}}return I.\u0275fac=function(_){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function ta(I){return"imperative"!==I}let Qi=(()=>{class I{constructor(_,S,F,j,ie){this.router=_,this.route=S,this.tabIndexAttribute=F,this.renderer=j,this.el=ie,this.commands=null,this.onChanges=new at.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(_){if(null!=this.tabIndexAttribute)return;const S=this.renderer,F=this.el.nativeElement;null!==_?S.setAttribute(F,"tabindex",_):S.removeAttribute(F,"tabindex")}ngOnChanges(_){this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const _={skipLocationChange:Ns(this.skipLocationChange),replaceUrl:Ns(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ns(this.preserveFragment)})}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Ti),p.Y36(Ar),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},I.\u0275dir=p.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(_,S){1&_&&p.NdJ("click",function(){return S.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})(),$s=(()=>{class I{constructor(_,S,F){this.router=_,this.route=S,this.locationStrategy=F,this.commands=null,this.href=null,this.onChanges=new at.x,this.subscription=_.events.subscribe(j=>{j instanceof ht&&this.updateTargetUrlAndHref()})}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,S,F,j,ie){if(0!==_||S||F||j||ie||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const De={skipLocationChange:Ns(this.skipLocationChange),replaceUrl:Ns(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,De),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ns(this.preserveFragment)})}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Ti),p.Y36(Ar),p.Y36(Ut.S$))},I.\u0275dir=p.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,S){1&_&&p.NdJ("click",function(j){return S.onClick(j.button,j.ctrlKey,j.shiftKey,j.altKey,j.metaKey)}),2&_&&p.uIk("target",S.target)("href",S.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})();function Ns(I){return""===I||!!I}let ai=(()=>{class I{constructor(_,S,F,j,ie,De){this.router=_,this.element=S,this.renderer=F,this.cdr=j,this.link=ie,this.linkWithHref=De,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=_.events.subscribe(ut=>{ut instanceof ht&&this.update()})}ngAfterContentInit(){(0,je.of)(this.links.changes,this.linksWithHrefs.changes,(0,je.of)(null)).pipe((0,bt.J)()).subscribe(_=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var _;null===(_=this.linkInputChangesSubscription)||void 0===_||_.unsubscribe();const S=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(F=>!!F).map(F=>F.onChanges);this.linkInputChangesSubscription=(0,me.D)(S).pipe((0,bt.J)()).subscribe(F=>{this.isActive!==this.isLinkActive(this.router)(F)&&this.update()})}set routerLinkActive(_){const S=Array.isArray(_)?_:_.split(" ");this.classes=S.filter(F=>!!F)}ngOnChanges(_){this.update()}ngOnDestroy(){var _;this.routerEventsSubscription.unsubscribe(),null===(_=this.linkInputChangesSubscription)||void 0===_||_.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const _=this.hasActiveLinks();this.isActive!==_&&(this.isActive=_,this.cdr.markForCheck(),this.classes.forEach(S=>{_?this.renderer.addClass(this.element.nativeElement,S):this.renderer.removeClass(this.element.nativeElement,S)}),this.isActiveChange.emit(_))})}isLinkActive(_){const S=function na(I){return!!I.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return F=>!!F.urlTree&&_.isActive(F.urlTree,S)}hasActiveLinks(){const _=this.isLinkActive(this.router);return this.link&&_(this.link)||this.linkWithHref&&_(this.linkWithHref)||this.links.some(_)||this.linksWithHrefs.some(_)}}return I.\u0275fac=function(_){return new(_||I)(p.Y36(Ti),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(Qi,8),p.Y36($s,8))},I.\u0275dir=p.lG2({type:I,selectors:[["","routerLinkActive",""]],contentQueries:function(_,S,F){if(1&_&&(p.Suo(F,Qi,5),p.Suo(F,$s,5)),2&_){let j;p.iGM(j=p.CRH())&&(S.links=j),p.iGM(j=p.CRH())&&(S.linksWithHrefs=j)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[p.TTD]}),I})();class Ha{}class io{preload(E,_){return(0,je.of)(null)}}let ra=(()=>{class I{constructor(_,S,F,j){this.router=_,this.injector=F,this.preloadingStrategy=j,this.loader=new mu(F,S,ut=>_.triggerEvent(new zt(ut)),ut=>_.triggerEvent(new qt(ut)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ue.h)(_=>_ instanceof ht),ne(()=>this.preload())).subscribe(()=>{})}preload(){const _=this.injector.get(p.h0i);return this.processRoutes(_,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,S){const F=[];for(const j of S)if(j.loadChildren&&!j.canLoad&&j._loadedConfig){const ie=j._loadedConfig;F.push(this.processRoutes(ie.module,ie.routes))}else j.loadChildren&&!j.canLoad?F.push(this.preloadConfig(_,j)):j.children&&F.push(this.processRoutes(_,j.children));return(0,me.D)(F).pipe((0,bt.J)(),(0,ae.U)(j=>{}))}preloadConfig(_,S){return this.preloadingStrategy.preload(S,()=>(S._loadedConfig?(0,je.of)(S._loadedConfig):this.loader.load(_.injector,S)).pipe((0,N.z)(j=>(S._loadedConfig=j,this.processRoutes(j.module,j.routes)))))}}return I.\u0275fac=function(_){return new(_||I)(p.LFG(Ti),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Ha))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})(),Ts=(()=>{class I{constructor(_,S,F={}){this.router=_,this.viewportScroller=S,this.options=F,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},F.scrollPositionRestoration=F.scrollPositionRestoration||"disabled",F.anchorScrolling=F.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Mt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof ht&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof wn&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,S){this.router.triggerEvent(new wn(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,S))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(_){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();const Hs=new p.OlP("ROUTER_CONFIGURATION"),Ga=new p.OlP("ROUTER_FORROOT_GUARD"),_u=[Ut.Ye,{provide:Ae,useClass:ge},{provide:Ti,useFactory:function $o(I,E,_,S,F,j,ie={},De,ut){const st=new Ti(null,I,E,_,S,F,or(j));return De&&(st.urlHandlingStrategy=De),ut&&(st.routeReuseStrategy=ut),function Da(I,E){I.errorHandler&&(E.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(E.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(E.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(E.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(E.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(E.canceledNavigationResolution=I.canceledNavigationResolution)}(ie,st),ie.enableTracing&&st.events.subscribe(Ft=>{var dn,Et;null===(dn=console.group)||void 0===dn||dn.call(console,`Router Event: ${Ft.constructor.name}`),console.log(Ft.toString()),console.log(Ft),null===(Et=console.groupEnd)||void 0===Et||Et.call(console)}),st},deps:[Ae,Xr,Ut.Ye,p.zs3,p.Sil,ro,Hs,[class ea{},new p.FiY],[class js{},new p.FiY]]},Xr,{provide:Ar,useFactory:function Vr(I){return I.routerState.root},deps:[Ti]},ra,io,class vs{preload(E,_){return _().pipe($(()=>(0,je.of)(null)))}},{provide:Hs,useValue:{enableTracing:!1}}];function vu(){return new p.PXZ("Router",Ti)}let Nr=(()=>{class I{constructor(_,S){}static forRoot(_,S){return{ngModule:I,providers:[_u,jo(_),{provide:Ga,useFactory:go,deps:[[Ti,new p.FiY,new p.tp0]]},{provide:Hs,useValue:S||{}},{provide:Ut.S$,useFactory:Gs,deps:[Ut.lw,[new p.tBr(Ut.mr),new p.FiY],Hs]},{provide:Ts,useFactory:Ia,deps:[Ti,Ut.EM,Hs]},{provide:Ha,useExisting:S&&S.preloadingStrategy?S.preloadingStrategy:io},{provide:p.PXZ,multi:!0,useFactory:vu},[Wa,{provide:p.ip1,multi:!0,useFactory:Fs,deps:[Wa]},{provide:As,useFactory:Ca,deps:[Wa]},{provide:p.tb,multi:!0,useExisting:As}]]}}static forChild(_){return{ngModule:I,providers:[jo(_)]}}}return I.\u0275fac=function(_){return new(_||I)(p.LFG(Ga,8),p.LFG(Ti,8))},I.\u0275mod=p.oAB({type:I}),I.\u0275inj=p.cJS({}),I})();function Ia(I,E,_){return _.scrollOffset&&E.setOffset(_.scrollOffset),new Ts(I,E,_)}function Gs(I,E,_={}){return _.useHash?new Ut.Do(I,E):new Ut.b0(I,E)}function go(I){return"guarded"}function jo(I){return[{provide:p.deG,multi:!0,useValue:I},{provide:ro,multi:!0,useValue:I}]}let Wa=(()=>{class I{constructor(_){this.injector=_,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new at.x}appInitializer(){return this.injector.get(Ut.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let S=null;const F=new Promise(De=>S=De),j=this.injector.get(Ti),ie=this.injector.get(Hs);return"disabled"===ie.initialNavigation?(j.setUpLocationChangeListener(),S(!0)):"enabled"===ie.initialNavigation||"enabledBlocking"===ie.initialNavigation?(j.hooks.afterPreactivation=()=>this.initNavigation?(0,je.of)(null):(this.initNavigation=!0,S(!0),this.resultOfPreactivationDone),j.initialNavigation()):S(!0),F})}bootstrapListener(_){const S=this.injector.get(Hs),F=this.injector.get(ra),j=this.injector.get(Ts),ie=this.injector.get(Ti),De=this.injector.get(p.z2F);_===De.components[0]&&(("enabledNonBlocking"===S.initialNavigation||void 0===S.initialNavigation)&&ie.initialNavigation(),F.setUpPreloading(),j.init(),ie.resetRootComponentType(De.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return I.\u0275fac=function(_){return new(_||I)(p.LFG(p.zs3))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function Fs(I){return I.appInitializer.bind(I)}function Ca(I){return I.bootstrapListener.bind(I)}const As=new p.OlP("Router Initializer")},3942:(Pt,We,R)=>{R.d(We,{Z:()=>Ze});var p=R(2090),H=R(4859),Z=R(9681),_e=R(1877);class pe{constructor(Le,ke){this._delegate=Le,this.firebase=ke,(0,Z._addComponent)(Le,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=Le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this._delegate.automaticDataCollectionEnabled=Le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Le=>{this._delegate.checkDestroyed(),Le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(Le,ke=Z._DEFAULT_ENTRY_NAME){var at;this._delegate.checkDestroyed();const $=this._delegate.container.getProvider(Le);return!$.isInitialized()&&"EXPLICIT"===(null===(at=$.getComponent())||void 0===at?void 0:at.instantiationMode)&&$.initialize(),$.getImmediate({identifier:ke})}_removeServiceInstance(Le,ke=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Le).clearInstance(ke)}_addComponent(Le){(0,Z._addComponent)(this._delegate,Le)}_addOrOverwriteComponent(Le){(0,Z._addOrOverwriteComponent)(this._delegate,Le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function Fe(){const mt=function ye(mt){const Le={},ke={__esModule:!0,initializeApp:function N(Ne,Re={}){const fe=Z.initializeApp(Ne,Re);if((0,p.r3)(Le,fe.name))return Le[fe.name];const X=new mt(fe,ke);return Le[fe.name]=X,X},app:$,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function ue(Ne){const Re=Ne.name,fe=Re.replace("-compat","");if(Z._registerComponent(Ne)&&"PUBLIC"===Ne.type){const X=(Oe=$())=>{if("function"!=typeof Oe[fe])throw be.create("invalid-app-argument",{appName:Re});return Oe[fe]()};void 0!==Ne.serviceProps&&(0,p.ZB)(X,Ne.serviceProps),ke[fe]=X,mt.prototype[fe]=function(...Oe){return this._getService.bind(this,Re).apply(this,Ne.multipleInstances?Oe:[])}}return"PUBLIC"===Ne.type?ke[fe]:null},removeApp:function at(Ne){delete Le[Ne]},useAsService:function Ee(Ne,Re){return"serverAuth"===Re?null:Re},modularAPIs:Z}};function $(Ne){if(!(0,p.r3)(Le,Ne=Ne||Z._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:Ne});return Le[Ne]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function ne(){return Object.keys(Le).map(Ne=>Le[Ne])}}),$.App=mt,ke}(pe);return mt.INTERNAL=Object.assign(Object.assign({},mt.INTERNAL),{createFirebaseNamespace:Fe,extendNamespace:function Le(ke){(0,p.ZB)(mt,ke)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),mt}(),re=new _e.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const mt=self.firebase.SDK_VERSION;mt&&mt.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=le;!function Ge(mt){(0,Z.registerVersion)("@firebase/app-compat","0.1.22",mt)}()},9681:(Pt,We,R)=>{R.r(We),R.d(We,{FirebaseError:()=>_e.ZR,SDK_VERSION:()=>ct,_DEFAULT_ENTRY_NAME:()=>Ot,_addComponent:()=>St,_addOrOverwriteComponent:()=>Mt,_apps:()=>bt,_clearComponents:()=>pn,_components:()=>Ut,_getProvider:()=>mn,_registerComponent:()=>ht,_removeServiceInstance:()=>_n,deleteApp:()=>kn,getApp:()=>qt,getApps:()=>An,initializeApp:()=>zt,onLog:()=>wn,registerVersion:()=>un,setLogLevel:()=>jt});var p=R(5861),H=R(4859),Z=R(1877),_e=R(2090);class pe{constructor(dt){this.container=dt}getPlatformInfoString(){return this.container.getProviders().map(Gt=>{if(function we(kt){const dt=kt.getComponent();return"VERSION"===(null==dt?void 0:dt.type)}(Gt)){const ln=Gt.getImmediate();return`${ln.library}/${ln.version}`}return null}).filter(Gt=>Gt).join(" ")}}const be="@firebase/app",Fe=new Z.Yd("@firebase/app"),Ot="[DEFAULT]",gt={[be]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bt=new Map,Ut=new Map;function St(kt,dt){try{kt.container.addComponent(dt)}catch(Gt){Fe.debug(`Component ${dt.name} failed to register with FirebaseApp ${kt.name}`,Gt)}}function Mt(kt,dt){kt.container.addOrOverwriteComponent(dt)}function ht(kt){const dt=kt.name;if(Ut.has(dt))return Fe.debug(`There were multiple attempts to register component ${dt}.`),!1;Ut.set(dt,kt);for(const Gt of bt.values())St(Gt,kt);return!0}function mn(kt,dt){const Gt=kt.container.getProvider("heartbeat").getImmediate({optional:!0});return Gt&&Gt.triggerHeartbeat(),kt.container.getProvider(dt)}function _n(kt,dt,Gt=Ot){mn(kt,dt).clearInstance(Gt)}function pn(){Ut.clear()}const Wn=new _e.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class er{constructor(dt,Gt,ln){this._isDeleted=!1,this._options=Object.assign({},dt),this._config=Object.assign({},Gt),this._name=Gt.name,this._automaticDataCollectionEnabled=Gt.automaticDataCollectionEnabled,this._container=ln,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(dt){this.checkDestroyed(),this._automaticDataCollectionEnabled=dt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(dt){this._isDeleted=dt}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}const ct="9.6.11";function zt(kt,dt={}){"object"!=typeof dt&&(dt={name:dt});const Gt=Object.assign({name:Ot,automaticDataCollectionEnabled:!1},dt),ln=Gt.name;if("string"!=typeof ln||!ln)throw Wn.create("bad-app-name",{appName:String(ln)});const In=bt.get(ln);if(In){if((0,_e.vZ)(kt,In.options)&&(0,_e.vZ)(Gt,In.config))return In;throw Wn.create("duplicate-app",{appName:ln})}const Jt=new H.H0(ln);for(const te of Ut.values())Jt.addComponent(te);const he=new er(kt,Gt,Jt);return bt.set(ln,he),he}function qt(kt=Ot){const dt=bt.get(kt);if(!dt)throw Wn.create("no-app",{appName:kt});return dt}function An(){return Array.from(bt.values())}function kn(kt){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,p.Z)(function*(kt){const dt=kt.name;bt.has(dt)&&(bt.delete(dt),yield Promise.all(kt.container.getProviders().map(Gt=>Gt.delete())),kt.isDeleted=!0)})).apply(this,arguments)}function un(kt,dt,Gt){var ln;let In=null!==(ln=gt[kt])&&void 0!==ln?ln:kt;Gt&&(In+=`-${Gt}`);const Jt=In.match(/\s|\//),he=dt.match(/\s|\//);if(Jt||he){const te=[`Unable to register library "${In}" with version "${dt}":`];return Jt&&te.push(`library name "${In}" contains illegal characters (whitespace or "/")`),Jt&&he&&te.push("and"),he&&te.push(`version name "${dt}" contains illegal characters (whitespace or "/")`),void Fe.warn(te.join(" "))}ht(new H.wA(`${In}-version`,()=>({library:In,version:dt}),"VERSION"))}function wn(kt,dt){if(null!==kt&&"function"!=typeof kt)throw Wn.create("invalid-log-argument");(0,Z.Am)(kt,dt)}function jt(kt){(0,Z.Ub)(kt)}const tr="firebase-heartbeat-store";let Cr=null;function yi(){return Cr||(Cr=(0,_e.X3)("firebase-heartbeat-database",1,(kt,dt)=>{0===dt&&kt.createObjectStore(tr)}).catch(kt=>{throw Wn.create("storage-open",{originalErrorMessage:kt.message})})),Cr}function Rn(){return(Rn=(0,p.Z)(function*(kt){try{return(yield yi()).transaction(tr).objectStore(tr).get(or(kt))}catch(dt){throw Wn.create("storage-get",{originalErrorMessage:dt.message})}})).apply(this,arguments)}function Vt(kt,dt){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,p.Z)(function*(kt,dt){try{const ln=(yield yi()).transaction(tr,"readwrite");return yield ln.objectStore(tr).put(dt,or(kt)),ln.complete}catch(Gt){throw Wn.create("storage-set",{originalErrorMessage:Gt.message})}})).apply(this,arguments)}function or(kt){return`${kt.name}!${kt.options.appId}`}class nr{constructor(dt){this.container=dt,this._heartbeatsCache=null;const Gt=this.container.getProvider("app").getImmediate();this._storage=new Qt(Gt),this._heartbeatsCachePromise=this._storage.read().then(ln=>(this._heartbeatsCache=ln,ln))}triggerHeartbeat(){var dt=this;return(0,p.Z)(function*(){const ln=dt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),In=zn();if(null===dt._heartbeatsCache&&(dt._heartbeatsCache=yield dt._heartbeatsCachePromise),dt._heartbeatsCache.lastSentHeartbeatDate!==In&&!dt._heartbeatsCache.heartbeats.some(Jt=>Jt.date===In))return dt._heartbeatsCache.heartbeats.push({date:In,agent:ln}),dt._heartbeatsCache.heartbeats=dt._heartbeatsCache.heartbeats.filter(Jt=>{const he=new Date(Jt.date).valueOf();return Date.now()-he<=2592e6}),dt._storage.overwrite(dt._heartbeatsCache)})()}getHeartbeatsHeader(){var dt=this;return(0,p.Z)(function*(){if(null===dt._heartbeatsCache&&(yield dt._heartbeatsCachePromise),null===dt._heartbeatsCache||0===dt._heartbeatsCache.heartbeats.length)return"";const Gt=zn(),{heartbeatsToSend:ln,unsentEntries:In}=function fr(kt,dt=1024){const Gt=[];let ln=kt.slice();for(const In of kt){const Jt=Gt.find(he=>he.agent===In.agent);if(Jt){if(Jt.dates.push(In.date),pr(Gt)>dt){Jt.dates.pop();break}}else if(Gt.push({agent:In.agent,dates:[In.date]}),pr(Gt)>dt){Gt.pop();break}ln=ln.slice(1)}return{heartbeatsToSend:Gt,unsentEntries:ln}}(dt._heartbeatsCache.heartbeats),Jt=(0,_e.L)(JSON.stringify({version:2,heartbeats:ln}));return dt._heartbeatsCache.lastSentHeartbeatDate=Gt,In.length>0?(dt._heartbeatsCache.heartbeats=In,yield dt._storage.overwrite(dt._heartbeatsCache)):(dt._heartbeatsCache.heartbeats=[],dt._storage.overwrite(dt._heartbeatsCache)),Jt})()}}function zn(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(dt){this.app=dt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,_e.hl)()&&(0,_e.eu)().then(()=>!0).catch(()=>!1)})()}read(){var dt=this;return(0,p.Z)(function*(){return(yield dt._canUseIndexedDBPromise)&&(yield function ei(kt){return Rn.apply(this,arguments)}(dt.app))||{heartbeats:[]}})()}overwrite(dt){var Gt=this;return(0,p.Z)(function*(){var ln;if(yield Gt._canUseIndexedDBPromise){const Jt=yield Gt.read();return Vt(Gt.app,{lastSentHeartbeatDate:null!==(ln=dt.lastSentHeartbeatDate)&&void 0!==ln?ln:Jt.lastSentHeartbeatDate,heartbeats:dt.heartbeats})}})()}add(dt){var Gt=this;return(0,p.Z)(function*(){var ln;if(yield Gt._canUseIndexedDBPromise){const Jt=yield Gt.read();return Vt(Gt.app,{lastSentHeartbeatDate:null!==(ln=dt.lastSentHeartbeatDate)&&void 0!==ln?ln:Jt.lastSentHeartbeatDate,heartbeats:[...Jt.heartbeats,...dt.heartbeats]})}})()}}function pr(kt){return(0,_e.L)(JSON.stringify({version:2,heartbeats:kt})).length}!function En(kt){ht(new H.wA("platform-logger",dt=>new pe(dt),"PRIVATE")),ht(new H.wA("heartbeat",dt=>new nr(dt),"PRIVATE")),un(be,"0.7.21",kt),un(be,"0.7.21","esm2017"),un("fire-js","")}("")},4859:(Pt,We,R)=>{R.d(We,{H0:()=>ye,wA:()=>Z});var p=R(5861),H=R(2090);class Z{constructor(le,re,me){this.name=le,this.instanceFactory=re,this.type=me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const _e="[DEFAULT]";class pe{constructor(le,re){this.name=le,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const re=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(re)){const me=new H.BH;if(this.instancesDeferred.set(re,me),this.isInitialized(re)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:re});je&&me.resolve(je)}catch(je){}}return this.instancesDeferred.get(re).promise}getImmediate(le){var re;const me=this.normalizeInstanceIdentifier(null==le?void 0:le.identifier),je=null!==(re=null==le?void 0:le.optional)&&void 0!==re&&re;if(!this.isInitialized(me)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:me})}catch(Ge){if(je)return null;throw Ge}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function be(Fe){return"EAGER"===Fe.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:_e})}catch(re){}for(const[re,me]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(re);try{const Ge=this.getOrInitializeService({instanceIdentifier:je});me.resolve(Ge)}catch(Ge){}}}}clearInstance(le=_e){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,p.Z)(function*(){const re=Array.from(le.instances.values());yield Promise.all([...re.filter(me=>"INTERNAL"in me).map(me=>me.INTERNAL.delete()),...re.filter(me=>"_delete"in me).map(me=>me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=_e){return this.instances.has(le)}getOptions(le=_e){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:re={}}=le,me=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(me))throw Error(`${this.name}(${me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:me,options:re});for(const[Ge,Ze]of this.instancesDeferred.entries())me===this.normalizeInstanceIdentifier(Ge)&&Ze.resolve(je);return je}onInit(le,re){var me;const je=this.normalizeInstanceIdentifier(re),Ge=null!==(me=this.onInitCallbacks.get(je))&&void 0!==me?me:new Set;Ge.add(le),this.onInitCallbacks.set(je,Ge);const Ze=this.instances.get(je);return Ze&&le(Ze,je),()=>{Ge.delete(le)}}invokeOnInitCallbacks(le,re){const me=this.onInitCallbacks.get(re);if(me)for(const je of me)try{je(le,re)}catch(Ge){}}getOrInitializeService({instanceIdentifier:le,options:re={}}){let me=this.instances.get(le);if(!me&&this.component&&(me=this.component.instanceFactory(this.container,{instanceIdentifier:(Fe=le,Fe===_e?void 0:Fe),options:re}),this.instances.set(le,me),this.instancesOptions.set(le,re),this.invokeOnInitCallbacks(me,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,me)}catch(je){}var Fe;return me||null}normalizeInstanceIdentifier(le=_e){return this.component?this.component.multipleInstances?le:_e:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const re=this.getProvider(le.name);if(re.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);re.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const re=new pe(le,this);return this.providers.set(le,re),re}getProviders(){return Array.from(this.providers.values())}}},1877:(Pt,We,R)=>{R.d(We,{Am:()=>Fe,Ub:()=>ye,Yd:()=>be,in:()=>H});const p=[];var H=(()=>{return(le=H||(H={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",H;var le})();const Z={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},_e=H.INFO,pe={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},we=(le,re,...me)=>{if(re<le.logLevel)return;const je=(new Date).toISOString(),Ge=pe[re];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[Ge](`[${je}]  ${le.name}:`,...me)};class be{constructor(re){this.name=re,this._logLevel=_e,this._logHandler=we,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in H))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?Z[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...re),this._logHandler(this,H.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...re),this._logHandler(this,H.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,H.INFO,...re),this._logHandler(this,H.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,H.WARN,...re),this._logHandler(this,H.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...re),this._logHandler(this,H.ERROR,...re)}}function ye(le){p.forEach(re=>{re.setLogLevel(le)})}function Fe(le,re){for(const me of p){let je=null;re&&re.level&&(je=Z[re.level]),me.userLogHandler=null===le?null:(Ge,Ze,...mt)=>{const Le=mt.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch(at){return null}}).filter(ke=>ke).join(" ");Ze>=(null!=je?je:Ge.logLevel)&&le({level:H[Ze].toLowerCase(),message:Le,args:mt,type:Ge.name})}}}},1470:(Pt,We,R)=>{R.d(We,{hx:()=>je,yI:()=>mt});var p=R(5e3),H=R(655),Z=R(3075),_e=R(9808);const pe=new p.OlP("ngx-mask config"),we=new p.OlP("new ngx-mask config"),be=new p.OlP("initial ngx-mask config"),ye={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new p.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Fe=["Hh:m0:s0","Hh:m0","m0:s0"],le=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let re=(()=>{class ke{constructor($){this._config=$,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(N,ne,ue,Ee)=>{var Ne,Re;let fe=[],X="";if(Array.isArray(ue)){const _t=new RegExp(ue.map(vt=>"[\\^$.|?*+()".indexOf(vt)>=0?`\\${vt}`:vt).join("|"));fe=N.split(_t),X=null!==(Re=null===(Ne=N.match(_t))||void 0===Ne?void 0:Ne[0])&&void 0!==Re?Re:""}else fe=N.split(ue),X=ue;const Oe=fe.length>1?`${X}${fe[1]}`:"";let ae=fe[0];const $e=this.separatorLimit.replace(/\s/g,"");$e&&+$e&&(ae="-"===ae[0]?`-${ae.slice(1,ae.length).slice(0,$e.length)}`:ae.slice(0,$e.length));const Be=/(\d+)(\d{3})/;for(;ne&&Be.test(ae);)ae=ae.replace(Be,"$1"+ne+"$2");return void 0===Ee?ae+Oe:0===Ee?ae:ae+Oe.substr(0,Ee+1)},this.percentage=N=>Number(N)>=0&&Number(N)<=100,this.getPrecision=N=>{const ne=N.split(".");return ne.length>1?Number(ne[ne.length-1]):1/0},this.checkAndRemoveSuffix=N=>{var ne,ue,Ee;for(let Ne=(null===(ne=this.suffix)||void 0===ne?void 0:ne.length)-1;Ne>=0;Ne--){const Re=this.suffix.substr(Ne,null===(ue=this.suffix)||void 0===ue?void 0:ue.length);if(N.includes(Re)&&(Ne-1<0||!N.includes(this.suffix.substr(Ne-1,null===(Ee=this.suffix)||void 0===Ee?void 0:Ee.length))))return N.replace(Re,"")}return N},this.checkInputPrecision=(N,ne,ue)=>{if(ne<1/0){if(Array.isArray(ue)){const Re=ue.find(fe=>fe!==this.thousandSeparator);ue=Re||ue[0]}const Ee=new RegExp(this._charToRegExpExpression(ue)+`\\d{${ne}}.*$`),Ne=N.match(Ee);Ne&&Ne[0].length-1>ne&&(N=N.substring(0,N.length-(Ne[0].length-1-ne))),0===ne&&this._compareOrIncludes(N[N.length-1],ue,this.thousandSeparator)&&(N=N.substring(0,N.length-1))}return N},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern($,N){const[ne,ue]=N;return this.customPattern=ue,this.applyMask($,ne)}applyMask($,N,ne=0,ue=!1,Ee=!1,Ne=(()=>{})){var Re,fe;if(!N||"string"!=typeof $)return"";let X=0,Oe="",ae=!1,$e=!1,Be=1,_t=!1;$.slice(0,this.prefix.length)===this.prefix&&($=$.slice(this.prefix.length,$.length)),this.suffix&&(null==$?void 0:$.length)>0&&($=this.checkAndRemoveSuffix($));const vt=$.toString().split("");"IP"===N&&(this.ipError=vt.filter(Mt=>"."===Mt).length<3&&vt.length<7,N="099.099.099.099");const Ot=[];for(let Mt=0;Mt<$.length;Mt++)(null===(Re=$[Mt])||void 0===Re?void 0:Re.match("\\d"))&&Ot.push($[Mt]);if("CPF_CNPJ"===N&&(this.cpfCnpjError=11!==Ot.length&&14!==Ot.length,N=Ot.length>11?"00.000.000/0000-00":"000.000.000-00"),N.startsWith("percent")){if($.match("[a-z]|[A-Z]")||$.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){$=this._stripToDecimal($);const Mt=this.getPrecision(N);$=this.checkInputPrecision($,Mt,this.decimalMarker)}$.indexOf(".")>0&&!this.percentage($.substring(0,$.indexOf(".")))&&($=`${$.substring(0,$.indexOf(".")-1)}${$.substring($.indexOf("."),$.length)}`),Oe=this.percentage($)?$:$.substring(0,$.length-1)}else if(N.startsWith("separator")){($.match("[w\u0430-\u044f\u0410-\u042f]")||$.match("[\u0401\u0451\u0410-\u044f]")||$.match("[a-z]|[A-Z]")||$.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||$.match("[^A-Za-z0-9,]"))&&($=this._stripToDecimal($)),$=$.length>1&&"0"===$[0]&&!this._compareOrIncludes($[1],this.decimalMarker,this.thousandSeparator)&&!Ee?$.slice(1,$.length):$,Ee&&($=this._compareOrIncludes($[$.length-1],this.decimalMarker,this.thousandSeparator)?$.slice(0,$.length-1):$);const Mt=this._charToRegExpExpression(this.thousandSeparator);let ht='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Mt,"");if(Array.isArray(this.decimalMarker))for(const er of this.decimalMarker)ht=ht.replace(this._charToRegExpExpression(er),"");else ht=ht.replace(this._charToRegExpExpression(this.decimalMarker),"");const mn=new RegExp("["+ht+"]");($.match(mn)||1===$.length&&this._compareOrIncludes($,this.decimalMarker,this.thousandSeparator))&&($=$.substring(0,$.length-1));const _n=this.getPrecision(N),pn=($=this.checkInputPrecision($,_n,this.decimalMarker)).replace(new RegExp(Mt,"g"),"");Oe=this._formatWithSeparators(pn,this.thousandSeparator,this.decimalMarker,_n);const qn=Oe.indexOf(",")-$.indexOf(","),Wn=Oe.length-$.length;if(Wn>0&&","!==Oe[ne]){$e=!0;let er=0;do{this._shift.add(ne+er),er++}while(er<Wn)}else 0!==qn&&ne>0&&!(Oe.indexOf(",")>=ne&&ne>3)||!(Oe.indexOf(".")>=ne&&ne>3)&&Wn<=0?(this._shift.clear(),$e=!0,Be=Wn,this._shift.add(ne+=Wn)):this._shift.clear()}else for(let Mt=0,ht=vt[0];Mt<vt.length&&X!==N.length;Mt++,ht=vt[Mt])if(this._checkSymbolMask(ht,N[X])&&"?"===N[X+1])Oe+=ht,X+=2;else if("*"===N[X+1]&&ae&&this._checkSymbolMask(ht,N[X+2]))Oe+=ht,X+=3,ae=!1;else if(this._checkSymbolMask(ht,N[X])&&"*"===N[X+1])Oe+=ht,ae=!0;else if("?"===N[X+1]&&this._checkSymbolMask(ht,N[X+2]))Oe+=ht,X+=3;else if(this._checkSymbolMask(ht,N[X])){if("H"===N[X]&&Number(ht)>2){X+=1,this._shiftStep(N,X,vt.length),Mt--,this.leadZeroDateTime&&(Oe+="0");continue}if("h"===N[X]&&"2"===Oe&&Number(ht)>3){X+=1,Mt--;continue}if("m"===N[X]&&Number(ht)>5){X+=1,this._shiftStep(N,X,vt.length),Mt--,this.leadZeroDateTime&&(Oe+="0");continue}if("s"===N[X]&&Number(ht)>5){X+=1,this._shiftStep(N,X,vt.length),Mt--,this.leadZeroDateTime&&(Oe+="0");continue}const mn=31;if("d"===N[X]&&(Number(ht)>3&&this.leadZeroDateTime||Number($.slice(X,X+2))>mn||"/"===$[X+1])){X+=1,this._shiftStep(N,X,vt.length),Mt--,this.leadZeroDateTime&&(Oe+="0");continue}if("M"===N[X]){const pn=0===X&&(Number(ht)>2||Number($.slice(X,X+2))>12||"/"===$[X+1]),qn=$.slice(X-3,X-1).includes("/")&&("/"===$[X-2]&&Number($.slice(X-1,X+1))>12&&"/"!==$[X]||"/"===$[X]||"/"===$[X-3]&&Number($.slice(X-2,X))>12&&"/"!==$[X-1]||"/"===$[X-1]),Wn=Number($.slice(X-3,X-1))<=mn&&!$.slice(X-3,X-1).includes("/")&&"/"===$[X-1]&&(Number($.slice(X,X+2))>12||"/"===$[X+1]),er=Number($.slice(X-3,X-1))>mn&&!$.slice(X-3,X-1).includes("/")&&!$.slice(X-2,X).includes("/")&&Number($.slice(X-2,X))>12,ct=Number($.slice(X-3,X-1))<=mn&&!$.slice(X-3,X-1).includes("/")&&"/"!==$[X-1]&&Number($.slice(X-1,X+1))>12;if(Number(ht)>1&&this.leadZeroDateTime||pn||qn||Wn||er||ct){X+=1,this._shiftStep(N,X,vt.length),Mt--,this.leadZeroDateTime&&(Oe+="0");continue}}Oe+=ht,X++}else-1!==this.maskSpecialCharacters.indexOf(N[X])?(Oe+=N[X],X++,this._shiftStep(N,X,vt.length),Mt--):this.maskSpecialCharacters.indexOf(ht)>-1&&this.maskAvailablePatterns[N[X]]&&(null===(fe=this.maskAvailablePatterns[N[X]])||void 0===fe?void 0:fe.optional)?(!!vt[X]&&"099.099.099.099"!==N&&"000.000.000-00"!==N&&"00.000.000/0000-00"!==N&&!N.match(/^9+\.0+$/)&&(Oe+=vt[X]),X++,Mt--):"*"===this.maskExpression[X+1]&&this._findSpecialChar(this.maskExpression[X+2])&&this._findSpecialChar(ht)===this.maskExpression[X+2]&&ae||"?"===this.maskExpression[X+1]&&this._findSpecialChar(this.maskExpression[X+2])&&this._findSpecialChar(ht)===this.maskExpression[X+2]&&ae?(X+=3,Oe+=ht):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(ht)<0&&ht!==this.placeHolderCharacter&&(_t=!0);Oe.length+1===N.length&&-1!==this.maskSpecialCharacters.indexOf(N[N.length-1])&&(Oe+=N[N.length-1]);let gt=ne+1;for(;this._shift.has(gt);)Be++,gt++;let bt=ue?X:this._shift.has(ne)?Be:0;_t&&bt--,Ne(bt,$e),Be<0&&this._shift.clear();let Ut=!1;Ee&&(Ut=vt.every(Mt=>this.maskSpecialCharacters.includes(Mt)));let St=`${this.prefix}${Ut?"":Oe}${this.suffix}`;return 0===Oe.length&&(St=`${this.prefix}${Oe}`),St}_findSpecialChar($){return this.maskSpecialCharacters.find(N=>N===$)}_checkSymbolMask($,N){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[N]&&this.maskAvailablePatterns[N].pattern&&this.maskAvailablePatterns[N].pattern.test($)}_stripToDecimal($){return $.split("").filter((N,ne)=>N.match("^-?\\d")||N.match("\\s")||"."===N||","===N||"-"===N&&0===ne&&this.allowNegativeNumbers).join("")}_charToRegExpExpression($){return $&&(" "===$?"\\s":"[\\^$.|?*+()".indexOf($)>=0?`\\${$}`:$)}_shiftStep($,N,ne){const ue=/[*?]/g.test($.slice(0,N))?ne:N;this._shift.add(ue+this.prefix.length||0)}_compareOrIncludes($,N,ne){return Array.isArray(N)?N.filter(ue=>ue!==ne).includes($):$===N}}return ke.\u0275fac=function($){return new($||ke)(p.LFG(pe))},ke.\u0275prov=p.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),me=(()=>{class ke extends re{constructor($,N,ne,ue){super(N),this.document=$,this._config=N,this._elementRef=ne,this._renderer=ue,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=Ee=>{}}applyMask($,N,ne=0,ue=!1,Ee=!1,Ne=(()=>{})){if(!N)return $!==this.actualValue?this.actualValue:$;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput($||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput($||"#")),!$&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const Re=$&&"number"==typeof this.selStart?$[this.selStart]:"";let fe="";if(this.hiddenInput&&!this.writingValue){let $e=this.actualValue.split("");""!==$&&$e.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&($.length>$e.length?$e.splice(this.selStart,0,Re):$.length<$e.length&&($e.length-$.length==1?$e.splice(this.selStart-1,1):$e.splice(this.selStart,this.selEnd-this.selStart))):$e=[],this.showMaskTyped&&($=this.removeMask($)),fe=this.actualValue.length&&$e.length<=$.length?this.shiftTypedSymbols($e.join("")):$}fe=Boolean(fe)&&fe.length?fe:$;const X=super.applyMask(fe,N,ne,ue,Ee,Ne);if(this.actualValue=this.getActualValue(X),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter($e=>!this._compareOrIncludes($e,this.decimalMarker,this.thousandSeparator))),this.formControlResult(X),!this.showMaskTyped)return this.hiddenInput&&X&&X.length?this.hideInput(X,this.maskExpression):X;const Oe=X.length,ae=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const $e=this._numberSkipedSymbols(X);return X+ae.slice(Oe+$e)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?X+ae:X+ae.slice(Oe)}_numberSkipedSymbols($){const N=/(^|\D)(\d\D)/g;let ne=N.exec($),ue=0;for(;null!=ne;)ue+=1,ne=N.exec($);return ue}applyValueChanges($,N,ne,ue=(()=>{})){const Ee=this._elementRef.nativeElement;Ee.value=this.applyMask(Ee.value,this.maskExpression,$,N,ne,ue),Ee!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput($,N){return $.split("").map((ne,ue)=>{var Ee,Ne;return this.maskAvailablePatterns&&this.maskAvailablePatterns[N[ue]]&&(null===(Ee=this.maskAvailablePatterns[N[ue]])||void 0===Ee?void 0:Ee.symbol)?null===(Ne=this.maskAvailablePatterns[N[ue]])||void 0===Ne?void 0:Ne.symbol:ne}).join("")}getActualValue($){const N=$.split("").filter((ne,ue)=>this._checkSymbolMask(ne,this.maskExpression[ue])||this.maskSpecialCharacters.includes(this.maskExpression[ue])&&ne===this.maskExpression[ue]);return N.join("")===$?N.join(""):$}shiftTypedSymbols($){let N="";return($&&$.split("").map((ue,Ee)=>{if(this.maskSpecialCharacters.includes($[Ee+1])&&$[Ee+1]!==this.maskExpression[Ee+1])return N=ue,$[Ee+1];if(N.length){const Ne=N;return N="",Ne}return ue})||[]).join("")}numberToString($){return $||0===$?Number($).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String($)}showMaskInInput($){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if($){if("IP"===this.maskExpression)return this._checkForIp($);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj($)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const $=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==$.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask($.value,this.maskExpression))}set formElementProperty([$,N]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,$,N))}checkSpecialCharAmount($){return $.split("").filter(ne=>this._findSpecialChar(ne)).length}removeMask($){return this._removeMask(this._removeSuffix(this._removePrefix($)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp($){var N;if("#"===$)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const ne=[];for(let ue=0;ue<$.length;ue++)(null===(N=$[ue])||void 0===N?void 0:N.match("\\d"))&&ne.push($[ue]);return ne.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:ne.length>3&&ne.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:ne.length>6&&ne.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj($){var N;const ne=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,ue=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===$)return ne;const Ee=[];for(let Ne=0;Ne<$.length;Ne++)(null===(N=$[Ne])||void 0===N?void 0:N.match("\\d"))&&Ee.push($[Ne]);return Ee.length<=3?ne.slice(Ee.length,ne.length):Ee.length>3&&Ee.length<=6?ne.slice(Ee.length+1,ne.length):Ee.length>6&&Ee.length<=9?ne.slice(Ee.length+2,ne.length):Ee.length>9&&Ee.length<11?ne.slice(Ee.length+3,ne.length):11===Ee.length?"":12===Ee.length?ue.slice(17===$.length?16:15,ue.length):Ee.length>12&&Ee.length<=14?ue.slice(Ee.length+4,ue.length):""}formControlResult($){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix($)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols($)):this._removeSuffix($))}_toNumber($){if(!this.isNumberValue||""===$)return $;const N=Number($);return Number.isNaN(N)?$:N}_removeMask($,N){return $&&$.replace(this._regExpForRemove(N),"")}_removePrefix($){return this.prefix?$&&$.replace(this.prefix,""):$}_removeSuffix($){return this.suffix?$&&$.replace(this.suffix,""):$}_retrieveSeparatorValue($){return this._removeMask(this._removeSuffix(this._removePrefix($)),this.maskSpecialCharacters)}_regExpForRemove($){return new RegExp($.map(N=>`\\${N}`).join("|"),"gi")}_checkSymbols($){if(""===$)return $;const N=this._retrieveSeparatorPrecision(this.maskExpression);let ne=this._retrieveSeparatorValue($);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(ne=ne.replace(this.decimalMarker,".")),this.isNumberValue?N?$===this.decimalMarker?null:this._checkPrecision(this.maskExpression,ne):Number(ne):ne}_retrieveSeparatorPrecision($){const N=$.match(new RegExp("^separator\\.([^d]*)"));return N?Number(N[1]):null}_checkPrecision($,N){return $.indexOf("2")>0?Number(N).toFixed(2):Number(N)}}return ke.\u0275fac=function($){return new($||ke)(p.LFG(_e.K0),p.LFG(pe),p.LFG(p.SBq),p.LFG(p.Qsj))},ke.\u0275prov=p.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),je=(()=>{class ke{constructor($,N,ne){this.document=$,this._maskService=N,this._config=ne,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new p.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=ue=>{},this.onTouch=()=>{}}ngOnChanges($){const{maskExpression:N,specialCharacters:ne,patterns:ue,prefix:Ee,suffix:Ne,thousandSeparator:Re,decimalMarker:fe,dropSpecialCharacters:X,hiddenInput:Oe,showMaskTyped:ae,placeHolderCharacter:$e,shownMaskExpression:Be,showTemplate:_t,clearIfNotMatch:vt,validation:Ot,separatorLimit:gt,allowNegativeNumbers:bt,leadZeroDateTime:Ut,triggerOnMaskChange:St}=$;if(N&&(N.currentValue!==N.previousValue&&!N.firstChange&&(this._maskService.maskChanged=!0),N.currentValue&&N.currentValue.split("||").length>1?(this._maskExpressionArray=N.currentValue.split("||").sort((Mt,ht)=>Mt.length-ht.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0]):(this._maskExpressionArray=[],this._maskValue=N.currentValue||"",this._maskService.maskExpression=this._maskValue)),ne){if(!ne.currentValue||!Array.isArray(ne.currentValue))return;this._maskService.maskSpecialCharacters=ne.currentValue||[]}ue&&ue.currentValue&&(this._maskService.maskAvailablePatterns=ue.currentValue),Ee&&(this._maskService.prefix=Ee.currentValue),Ne&&(this._maskService.suffix=Ne.currentValue),Re&&(this._maskService.thousandSeparator=Re.currentValue),fe&&(this._maskService.decimalMarker=fe.currentValue),X&&(this._maskService.dropSpecialCharacters=X.currentValue),Oe&&(this._maskService.hiddenInput=Oe.currentValue),ae&&(this._maskService.showMaskTyped=ae.currentValue),$e&&(this._maskService.placeHolderCharacter=$e.currentValue),Be&&(this._maskService.shownMaskExpression=Be.currentValue),_t&&(this._maskService.showTemplate=_t.currentValue),vt&&(this._maskService.clearIfNotMatch=vt.currentValue),Ot&&(this._maskService.validation=Ot.currentValue),gt&&(this._maskService.separatorLimit=gt.currentValue),bt&&(this._maskService.allowNegativeNumbers=bt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(Mt=>"-"!==Mt))),Ut&&(this._maskService.leadZeroDateTime=Ut.currentValue),St&&(this._maskService.triggerOnMaskChange=St.currentValue),this._applyMask()}validate({value:$}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError($);if(this._maskService.cpfCnpjError)return this._createValidationError($);if(this._maskValue.startsWith("separator")||le.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Fe.includes(this._maskValue))return this._validateTime($);if($&&$.toString().length>=1){let N=0;for(const ne in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[ne].optional&&(this._maskValue.indexOf(ne)!==this._maskValue.lastIndexOf(ne)?N+=this._maskValue.split("").filter(Ee=>Ee===ne).join("").length:-1!==this._maskValue.indexOf(ne)&&N++,-1!==this._maskValue.indexOf(ne)&&$.toString().length>=this._maskValue.indexOf(ne)||N===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&$.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&$.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&$.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError($);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const ne=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-N:this._maskValue.length-N;if($.toString().length<ne)return this._createValidationError($)}}return $&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange($){!$&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput($){const N=$.target;if(this._inputValue=N.value,this._setMask(),!this._maskValue)return void this.onChange(N.value);const ne=1===N.selectionStart?N.selectionStart+this._maskService.prefix.length:N.selectionStart;let ue=0,Ee=!1;if(this._maskService.applyValueChanges(ne,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(Re,fe)=>{this._justPasted=!1,ue=Re,Ee=fe}),this.document.activeElement!==N)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let Ne=this._position?this._inputValue.length+ne+ue:ne+("Backspace"!==this._code||Ee?ue:0);Ne>this._getActualInputLength()&&(Ne=this._getActualInputLength()),Ne<0&&(Ne=0),N.setSelectionRange(Ne,Ne),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick($){if(!this._maskValue)return;const N=$.target;null!==N&&null!==N.selectionStart&&N.selectionStart===N.selectionEnd&&N.selectionStart>this._maskService.prefix.length&&38!==$.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),N.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===N.value?(N.focus(),N.setSelectionRange(0,0)):N.selectionStart>this._maskService.actualValue.length&&N.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const Ee=N.value&&N.value!==this._maskService.prefix?N.value:this._maskService.prefix+this._maskService.maskIsShown;N.value!==Ee&&(N.value=Ee),(N.selectionStart||N.selectionEnd)<=this._maskService.prefix.length?N.selectionStart=this._maskService.prefix.length:N.selectionEnd>this._getActualInputLength()&&(N.selectionEnd=this._getActualInputLength())}onKeyDown($){var N;if(!this._maskValue)return;this._code=$.code?$.code:$.key;const ne=$.target;if(this._inputValue=ne.value,this._setMask(),38===$.keyCode&&$.preventDefault(),37===$.keyCode||8===$.keyCode||46===$.keyCode){if(8===$.keyCode&&0===ne.value.length&&(ne.selectionStart=ne.selectionEnd),8===$.keyCode&&0!==ne.selectionStart)if(this.specialCharacters=(null===(N=this.specialCharacters)||void 0===N?void 0:N.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&ne.selectionStart<=this.prefix.length)ne.setSelectionRange(this.prefix.length,ne.selectionEnd);else if(this._inputValue.length!==ne.selectionStart&&1!==ne.selectionStart)for(;this.specialCharacters.includes(this._inputValue[ne.selectionStart-1].toString())&&(this.prefix.length>=1&&ne.selectionStart>this.prefix.length||0===this.prefix.length);)ne.setSelectionRange(ne.selectionStart-1,ne.selectionEnd);this.checkSelectionOnDeletion(ne),this._maskService.prefix.length&&ne.selectionStart<=this._maskService.prefix.length&&ne.selectionEnd<=this._maskService.prefix.length&&$.preventDefault();const ue=ne.selectionStart;8===$.keyCode&&!ne.readOnly&&0===ue&&ne.selectionEnd===ne.value.length&&0!==ne.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<ne.selectionStart?ne.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===$.keyCode&&$.ctrlKey||65===$.keyCode&&$.metaKey)&&(ne.setSelectionRange(0,this._getActualInputLength()),$.preventDefault()),this._maskService.selStart=ne.selectionStart,this._maskService.selEnd=ne.selectionEnd}writeValue($){return(0,H.mG)(this,void 0,void 0,function*(){"object"==typeof $&&null!==$&&"value"in $&&("disable"in $&&this.setDisabledState(Boolean($.disable)),$=$.value),("number"==typeof $||this._maskValue.startsWith("separator"))&&($=this._maskService.numberToString($),Array.isArray(this.decimalMarker)||($="."!==this.decimalMarker?$.replace(".",this.decimalMarker):$),this._maskService.isNumberValue=!0),"string"!=typeof $&&($=""),this._inputValue=$,this._setMask(),$&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask($,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",$],this._inputValue=$})}registerOnChange($){this.onChange=$,this._maskService.onChange=this.onChange}registerOnTouched($){this.onTouch=$}checkSelectionOnDeletion($){$.selectionStart=Math.min(Math.max(this.prefix.length,$.selectionStart),this._inputValue.length-this.suffix.length),$.selectionEnd=Math.min(Math.max(this.prefix.length,$.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState($){this._maskService.formElementProperty=["disabled",$]}_repeatPatternSymbols($){return $.match(/{[0-9]+}/)&&$.split("").reduce((N,ne,ue)=>{if(this._start="{"===ne?ue:this._start,"}"!==ne)return this._maskService._findSpecialChar(ne)?N+ne:N;this._end=ue;const Ee=Number($.slice(this._start+1,this._end));return N+new Array(Ee+1).join($[this._start-1])},"")||$}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime($){const N=this._maskValue.split("").filter(ne=>":"!==ne).length;return $&&(0==+$[$.length-1]&&$.length<N||$.length<=N-2)?this._createValidationError($):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError($){return{mask:{requiredMask:this._maskValue,actualValue:$}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some($=>{var N,ne;const ue=(null===(N=this._maskService.removeMask(this._inputValue))||void 0===N?void 0:N.length)<=(null===(ne=this._maskService.removeMask($))||void 0===ne?void 0:ne.length);if(this._inputValue&&ue)return this._maskValue=$,this.maskExpression=$,this._maskService.maskExpression=$,ue;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return ke.\u0275fac=function($){return new($||ke)(p.Y36(_e.K0),p.Y36(me),p.Y36(pe))},ke.\u0275dir=p.lG2({type:ke,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function($,N){1&$&&p.NdJ("paste",function(){return N.onPaste()})("ngModelChange",function(ue){return N.onModelChange(ue)})("input",function(ue){return N.onInput(ue)})("blur",function(){return N.onBlur()})("click",function(ue){return N.onClick(ue)})("keydown",function(ue){return N.onKeyDown(ue)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[p._Bn([{provide:Z.JU,useExisting:(0,p.Gpc)(()=>ke),multi:!0},{provide:Z.Cf,useExisting:(0,p.Gpc)(()=>ke),multi:!0},me]),p.TTD]}),ke})();function Ze(ke,at){return Object.assign(Object.assign({},ke),at instanceof Function?at():at)}let mt=(()=>{class ke{static forRoot($){return{ngModule:ke,providers:[{provide:we,useValue:$},{provide:be,useValue:ye},{provide:pe,useFactory:Ze,deps:[be,we]},re]}}static forChild(){return{ngModule:ke}}}return ke.\u0275fac=function($){return new($||ke)},ke.\u0275mod=p.oAB({type:ke}),ke.\u0275inj=p.cJS({}),ke})();const Le="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Le.KeyboardEvent||(Le.KeyboardEvent=function(ke,at){})},5861:(Pt,We,R)=>{function p(Z,_e,pe,we,be,ye,Fe){try{var le=Z[ye](Fe),re=le.value}catch(me){return void pe(me)}le.done?_e(re):Promise.resolve(re).then(we,be)}function H(Z){return function(){var _e=this,pe=arguments;return new Promise(function(we,be){var ye=Z.apply(_e,pe);function Fe(re){p(ye,we,be,Fe,le,"next",re)}function le(re){p(ye,we,be,Fe,le,"throw",re)}Fe(void 0)})}}R.d(We,{Z:()=>H})}},Pt=>{Pt(Pt.s=2871)}]);