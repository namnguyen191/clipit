"use strict";(self.webpackChunkclipit=self.webpackChunkclipit||[]).push([[179],{440:(Tt,We,F)=>{F.d(We,{nm:()=>xn});var p=F(5813);F(5e3),F(5867);var U=F(5861),Y=F(9681),ve=F(4859),Ve=F(2090),$e=F(1877);const ke=new Map,we={activated:!1,tokenObservers:[]},X={initialized:!1,enabled:!1};function Ce(de){return ke.get(de)||we}function pe(de,_e){ke.set(de,_e)}function Ge(){return X}class $t{constructor(_e,Be,nt,_t,Bt){if(this.operation=_e,this.retryPolicy=Be,this.getWaitDuration=nt,this.lowerBound=_t,this.upperBound=Bt,this.pending=null,this.nextErrorWaitInterval=_t,_t>Bt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(_e){var Be=this;return(0,U.Z)(function*(){Be.stop();try{Be.pending=new Ve.BH,yield function It(de){return new Promise(_e=>{setTimeout(_e,de)})}(Be.getNextRun(_e)),Be.pending.resolve(),yield Be.pending.promise,Be.pending=new Ve.BH,yield Be.operation(),Be.pending.resolve(),yield Be.pending.promise,Be.process(!0).catch(()=>{})}catch(nt){Be.retryPolicy(nt)?Be.process(!1).catch(()=>{}):Be.stop()}})()}getNextRun(_e){if(_e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Be=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Be}}}const lt=new Ve.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kt(de){if(!Ce(de).activated)throw lt.create("use-before-activation",{appName:de.name})}function lr(de,_e){return tr.apply(this,arguments)}function tr(){return(tr=(0,U.Z)(function*({url:de,body:_e},Be){const nt={"Content-Type":"application/json"},_t=Be.getImmediate({optional:!0});if(_t){const Ci=yield _t.getHeartbeatsHeader();Ci&&(nt["X-Firebase-Client"]=Ci)}const Bt={method:"POST",body:JSON.stringify(_e),headers:nt};let Un,Gr;try{Un=yield fetch(de,Bt)}catch(Ci){throw lt.create("fetch-network-error",{originalErrorMessage:Ci.message})}if(200!==Un.status)throw lt.create("fetch-status-error",{httpStatus:Un.status});try{Gr=yield Un.json()}catch(Ci){throw lt.create("fetch-parse-error",{originalErrorMessage:Ci.message})}const Bn=Gr.ttl.match(/^([\d.]+)(s)$/);if(!Bn||!Bn[2]||isNaN(Number(Bn[1])))throw lt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Gr.ttl}`});const mi=1e3*Number(Bn[1]),Di=Date.now();return{token:Gr.attestationToken,expireTimeMillis:Di+mi,issuedAtTimeMillis:Di}})).apply(this,arguments)}function wr(de,_e){const{projectId:Be,appId:nt,apiKey:_t}=de.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Be}/apps/${nt}:exchangeDebugToken?key=${_t}`,body:{debug_token:_e}}}const Ht="firebase-app-check-store";let sn=null;function Pr(){return sn||(sn=new Promise((de,_e)=>{try{const Be=indexedDB.open("firebase-app-check-database",1);Be.onsuccess=nt=>{de(nt.target.result)},Be.onerror=nt=>{var _t;_e(lt.create("storage-open",{originalErrorMessage:null===(_t=nt.target.error)||void 0===_t?void 0:_t.message}))},Be.onupgradeneeded=nt=>{0===nt.oldVersion&&nt.target.result.createObjectStore(Ht,{keyPath:"compositeKey"})}}catch(Be){_e(lt.create("storage-open",{originalErrorMessage:Be.message}))}}),sn)}function gn(){return(gn=(0,U.Z)(function*(de,_e){const nt=(yield Pr()).transaction(Ht,"readwrite"),Bt=nt.objectStore(Ht).put({compositeKey:de,value:_e});return new Promise((Un,Gr)=>{Bt.onsuccess=Bn=>{Un()},nt.onerror=Bn=>{var mi;Gr(lt.create("storage-set",{originalErrorMessage:null===(mi=Bn.target.error)||void 0===mi?void 0:mi.message}))}})})).apply(this,arguments)}const Qr=new $e.Yd("@firebase/app-check");function pr(de,_e){return(0,Ve.hl)()?function nr(de,_e){return function Hr(de,_e){return gn.apply(this,arguments)}(function mr(de){return`${de.options.appId}-${de.name}`}(de),_e)}(de,_e).catch(Be=>{Qr.warn(`Failed to write token to IndexedDB. Error: ${Be}`)}):Promise.resolve()}function kr(){return Ge().enabled}function Xt(){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,U.Z)(function*(){const de=Ge();if(de.enabled&&de.token)return de.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Pt={error:"UNKNOWN_ERROR"};function Nt(de){return Ve.US.encodeString(JSON.stringify(de),!1)}function pn(de){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,U.Z)(function*(de,_e=!1){const Be=de.app;kt(Be);const nt=Ce(Be);let Bt,_t=nt.token;if(!_t){const Bn=yield nt.cachedTokenPromise;Bn&&yt(Bn)&&(_t=Bn)}if(!_e&&_t&&yt(_t))return{token:_t.token};let Gr,Un=!1;if(kr()){nt.exchangeTokenPromise||(nt.exchangeTokenPromise=lr(wr(Be,yield Xt()),de.heartbeatServiceProvider).then(mi=>(nt.exchangeTokenPromise=void 0,mi)),Un=!0);const Bn=yield nt.exchangeTokenPromise;return yield pr(Be,Bn),pe(Be,Object.assign(Object.assign({},nt),{token:Bn})),{token:Bn.token}}try{nt.exchangeTokenPromise||(nt.exchangeTokenPromise=nt.provider.getToken().then(Bn=>(nt.exchangeTokenPromise=void 0,Bn)),Un=!0),_t=yield nt.exchangeTokenPromise}catch(Bn){"appCheck/throttled"===Bn.code?Qr.warn(Bn.message):Qr.error(Bn),Bt=Bn}return _t?(Gr={token:_t.token},pe(Be,Object.assign(Object.assign({},nt),{token:_t})),yield pr(Be,_t)):Gr=pt(Bt),Un&&Fe(Be,Gr),Gr})).apply(this,arguments)}function ae(de,_e){const Be=Ce(de),nt=Be.tokenObservers.filter(_t=>_t.next!==_e);0===nt.length&&Be.tokenRefresher&&Be.tokenRefresher.isRunning()&&Be.tokenRefresher.stop(),pe(de,Object.assign(Object.assign({},Be),{tokenObservers:nt}))}function Ie(de){const{app:_e}=de,Be=Ce(_e);let nt=Be.tokenRefresher;nt||(nt=function qe(de){const{app:_e}=de;return new $t((0,U.Z)(function*(){let nt;if(nt=Ce(_e).token?yield pn(de,!0):yield pn(de),nt.error)throw nt.error}),()=>!0,()=>{const Be=Ce(_e);if(Be.token){let nt=Be.token.issuedAtTimeMillis+.5*(Be.token.expireTimeMillis-Be.token.issuedAtTimeMillis)+3e5;return nt=Math.min(nt,Be.token.expireTimeMillis-3e5),Math.max(0,nt-Date.now())}return 0},3e4,96e4)}(de),pe(_e,Object.assign(Object.assign({},Be),{tokenRefresher:nt}))),!nt.isRunning()&&Be.isTokenAutoRefreshEnabled&&nt.start()}function Fe(de,_e){const Be=Ce(de).tokenObservers;for(const nt of Be)try{"EXTERNAL"===nt.type&&null!=_e.error?nt.error(_e.error):nt.next(_e)}catch(_t){}}function yt(de){return de.expireTimeMillis-Date.now()>0}function pt(de){return{token:Nt(Pt),error:de}}class Cn{constructor(_e,Be){this.app=_e,this.heartbeatServiceProvider=Be}_delete(){const{tokenObservers:_e}=Ce(this.app);for(const Be of _e)ae(this.app,Be.next);return Promise.resolve()}}const Cr="app-check-internal";!function sr(){(0,Y._registerComponent)(new ve.wA("app-check",de=>function Rr(de,_e){return new Cn(de,_e)}(de.getProvider("app").getImmediate(),de.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((de,_e,Be)=>{de.getProvider(Cr).initialize()})),(0,Y._registerComponent)(new ve.wA(Cr,de=>function yn(de){return{getToken:_e=>pn(de,_e),addTokenListener:_e=>function ge(de,_e,Be,nt){const{app:_t}=de,Bt=Ce(_t),Un={next:Be,error:nt,type:_e};if(pe(_t,Object.assign(Object.assign({},Bt),{tokenObservers:[...Bt.tokenObservers,Un]})),Bt.token&&yt(Bt.token)){const Gr=Bt.token;Promise.resolve().then(()=>{Be({token:Gr.token}),Ie(de)}).catch(()=>{})}Bt.cachedTokenPromise.then(()=>Ie(de))}(de,"INTERNAL",_e),removeTokenListener:_e=>ae(de.app,_e)}}(de.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Y.registerVersion)("@firebase/app-check","0.5.6")}();class xn{constructor(){return(0,p.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Tt,We,F)=>{F.d(We,{zQ:()=>Ue,ww:()=>Vt,rT:()=>X,f7:()=>pe,L6:()=>ke,_Q:()=>we,lh:()=>Ce,Qv:()=>$e,nw:()=>Ge});var p=F(5e3),q=F(7579),Q=F(9646),Ee=F(9751),ye=F(8996),Se=F(6451),Oe=F(6063);class Pe extends q.x{constructor(Wt=1/0,mt=1/0,Dt=Oe.l){super(),this._bufferSize=Wt,this._windowTime=mt,this._timestampProvider=Dt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=mt===1/0,this._bufferSize=Math.max(1,Wt),this._windowTime=Math.max(1,mt)}next(Wt){const{isStopped:mt,_buffer:Dt,_infiniteTimeWindow:$t,_timestampProvider:It,_windowTime:xt}=this;mt||(Dt.push(Wt),!$t&&Dt.push(It.now()+xt)),this._trimBuffer(),super.next(Wt)}_subscribe(Wt){this._throwIfClosed(),this._trimBuffer();const mt=this._innerSubscribe(Wt),{_infiniteTimeWindow:Dt,_buffer:$t}=this,It=$t.slice();for(let xt=0;xt<It.length&&!Wt.closed;xt+=Dt?1:2)Wt.next(It[xt]);return this._checkFinalizedStatuses(Wt),mt}_trimBuffer(){const{_bufferSize:Wt,_timestampProvider:mt,_buffer:Dt,_infiniteTimeWindow:$t}=this,It=($t?1:2)*Wt;if(Wt<1/0&&It<Dt.length&&Dt.splice(0,Dt.length-It),!$t){const xt=mt.now();let lt=0;for(let ln=1;ln<Dt.length&&Dt[ln]<=xt;ln+=2)lt=ln;lt&&Dt.splice(0,lt+1)}}}var Ne=F(3099);function ce(wt,Wt,mt){let Dt,$t=!1;return wt&&"object"==typeof wt?({bufferSize:Dt=1/0,windowTime:Wt=1/0,refCount:$t=!1,scheduler:mt}=wt):Dt=null!=wt?wt:1/0,(0,Ne.B)({connector:()=>new Pe(Dt,Wt,mt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$t})}var ie=F(3900),Te=F(576);function ut(wt,Wt){return(0,Te.m)(Wt)?(0,ie.w)(()=>wt,Wt):(0,ie.w)(()=>wt)}var Qe=F(5363),Ze=F(4004),gt=F(590),ze=F(9468),Le=F(9300),Et=F(5813),j=F(2011),U=F(9808),Y=F(440),ve=F(127);const $e=new p.OlP("angularfire2.auth.use-emulator"),ke=new p.OlP("angularfire2.auth.settings"),we=new p.OlP("angularfire2.auth.tenant-id"),X=new p.OlP("angularfire2.auth.langugage-code"),Ce=new p.OlP("angularfire2.auth.use-device-language"),pe=new p.OlP("angularfire.auth.persistence"),Ge=(wt,Wt,mt,Dt,$t,It,xt,lt)=>(0,j.cc)(`${wt.name}.auth`,"AngularFireAuth",wt.name,()=>{const ln=Wt.runOutsideAngular(()=>wt.auth());if(mt&&ln.useEmulator(...mt),Dt&&(ln.tenantId=Dt),ln.languageCode=$t,It&&ln.useDeviceLanguage(),xt)for(const[kt,nn]of Object.entries(xt))ln.settings[kt]=nn;return lt&&ln.setPersistence(lt),ln},[mt,Dt,$t,It,xt,lt]);let Ue=(()=>{class wt{constructor(mt,Dt,$t,It,xt,lt,ln,kt,nn,Hn,Mn,lr){const tr=new q.x,Er=(0,Q.of)(void 0).pipe((0,Qe.Q)(xt.outsideAngular),(0,ie.w)(()=>It.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,820)))),(0,Ze.U)(()=>(0,j.on)(mt,It,Dt)),(0,Ze.U)(Gn=>Ge(Gn,It,lt,kt,nn,Hn,ln,Mn)),ce({bufferSize:1,refCount:!1}));if((0,U.PM)($t))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Q.of)(null);else{Er.pipe((0,gt.P)()).subscribe();const wr=Er.pipe((0,ie.w)(Ht=>Ht.getRedirectResult().then(wn=>wn,()=>null)),Et.iC,ce({bufferSize:1,refCount:!1})),Ln=Er.pipe((0,ie.w)(Ht=>new Ee.y(wn=>({unsubscribe:It.runOutsideAngular(()=>Ht.onAuthStateChanged(sn=>wn.next(sn),sn=>wn.error(sn),()=>wn.complete()))})))),Ut=Er.pipe((0,ie.w)(Ht=>new Ee.y(wn=>({unsubscribe:It.runOutsideAngular(()=>Ht.onIdTokenChanged(sn=>wn.next(sn),sn=>wn.error(sn),()=>wn.complete()))}))));this.authState=wr.pipe(ut(Ln),(0,ze.R)(xt.outsideAngular),(0,Qe.Q)(xt.insideAngular)),this.user=wr.pipe(ut(Ut),(0,ze.R)(xt.outsideAngular),(0,Qe.Q)(xt.insideAngular)),this.idToken=this.user.pipe((0,ie.w)(Ht=>Ht?(0,ye.D)(Ht.getIdToken()):(0,Q.of)(null))),this.idTokenResult=this.user.pipe((0,ie.w)(Ht=>Ht?(0,ye.D)(Ht.getIdTokenResult()):(0,Q.of)(null))),this.credential=(0,Se.T)(wr,tr,this.authState.pipe((0,Le.h)(Ht=>!Ht))).pipe((0,Ze.U)(Ht=>(null==Ht?void 0:Ht.user)?Ht:null),(0,ze.R)(xt.outsideAngular),(0,Qe.Q)(xt.insideAngular))}return(0,j.pX)(this,Er,It,{spy:{apply:(Gn,wr,Ln)=>{(Gn.startsWith("signIn")||Gn.startsWith("createUser"))&&Ln.then(Ut=>tr.next(Ut))}}})}}return wt.\u0275fac=function(mt){return new(mt||wt)(p.LFG(j.Dh),p.LFG(j.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Et.HU),p.LFG($e,8),p.LFG(ke,8),p.LFG(we,8),p.LFG(X,8),p.LFG(Ce,8),p.LFG(pe,8),p.LFG(Y.nm,8))},wt.\u0275prov=p.Yz7({token:wt,factory:wt.\u0275fac,providedIn:"any"}),wt})(),Vt=(()=>{class wt{constructor(){ve.Z.registerVersion("angularfire",Et.q4.full,"auth-compat")}}return wt.\u0275fac=function(mt){return new(mt||wt)},wt.\u0275mod=p.oAB({type:wt}),wt.\u0275inj=p.cJS({providers:[Ue]}),wt})()},7566:(Tt,We,F)=>{F.d(We,{ST:()=>qc,yb:()=>q_});var p=F(5e3),q=F(4986),Q=F(9751),Ee=F(8996),ye=F(9646),Se=F(5813),Oe=F(4482),Pe=F(5403);function Ne(){return(0,Oe.e)((i,e)=>{let t,o=!1;i.subscribe((0,Pe.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var ce=F(4671);function Te(i,e){return i===e}var X,ut=F(8675),Qe=F(4004),Ze=F(5026),gt=F(9300),ze=F(2011),Le=F(9808),j=(F(820),F(3942)),U=F(5861),Y=F(9681),ve=F(4859),Ve=F(1877),$e=F(2090),ke="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},we={},Ce=Ce||{},pe=ke||self;function Ge(){}function Ue(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Vt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Wt="closure_uid_"+(1e9*Math.random()>>>0),mt=0;function Dt(i,e,t){return i.call.apply(i.bind,arguments)}function $t(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function It(i,e,t){return(It=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Dt:$t).apply(null,arguments)}function xt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function lt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var y=Array(arguments.length-2),b=2;b<arguments.length;b++)y[b-2]=arguments[b];return e.prototype[u].apply(o,y)}}function ln(){this.s=this.s,this.o=this.o}var nn={};ln.prototype.s=!1,ln.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function wt(i){return Object.prototype.hasOwnProperty.call(i,Wt)&&i[Wt]||(i[Wt]=++mt)}(this);delete nn[i]}},ln.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Mn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function tr(i){return Array.prototype.concat.apply([],arguments)}function Er(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Gn(i){return/^[\s\xa0]*$/.test(i)}var Ht,wr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Ln(i,e){return-1!=i.indexOf(e)}function Ut(i,e){return i<e?-1:i>e?1:0}e:{var wn=pe.navigator;if(wn){var sn=wn.userAgent;if(sn){Ht=sn;break e}}Ht=""}function Pr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function pi(i){const e={};for(const t in i)e[t]=i[t];return e}var nr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ir(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<nr.length;d++)t=nr[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function an(i){return an[" "](i),i}an[" "]=Ge;var pr,i,gn=Ln(Ht,"Opera"),Ot=Ln(Ht,"Trident")||Ln(Ht,"MSIE"),Zt=Ln(Ht,"Edge"),mr=Zt||Ot,Qr=Ln(Ht,"Gecko")&&!(Ln(Ht.toLowerCase(),"webkit")&&!Ln(Ht,"Edge"))&&!(Ln(Ht,"Trident")||Ln(Ht,"MSIE"))&&!Ln(Ht,"Edge"),fn=Ln(Ht.toLowerCase(),"webkit")&&!Ln(Ht,"Edge");function Dr(){var i=pe.document;return i?i.documentMode:void 0}e:{var xr="",Yt=(i=Ht,Qr?/rv:([^\);]+)(\)|;)/.exec(i):Zt?/Edge\/([\d\.]+)/.exec(i):Ot?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):fn?/WebKit\/(\S+)/.exec(i):gn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Yt&&(xr=Yt?Yt[1]:""),Ot){var kr=Dr();if(null!=kr&&kr>parseFloat(xr)){pr=String(kr);break e}}pr=xr}var Xt={};var Nt=pe.document&&Ot&&(Dr()||parseInt(pr,10))||void 0,pn=function(){if(!pe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{pe.addEventListener("test",Ge,e),pe.removeEventListener("test",Ge,e)}catch(t){}return i}();function Kt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function ge(i,e){if(Kt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Qr){e:{try{an(e.nodeName);var u=!0;break e}catch(d){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ae[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ge.Z.h.call(this)}}Kt.prototype.h=function(){this.defaultPrevented=!0},lt(ge,Kt);var ae={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),qe=0;function Fe(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++qe,this.ca=this.fa=!1}function yt(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function pt(i){this.src=i,this.g={},this.h=0}function Cn(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=Hn(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(yt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Rr(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}pt.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var y=Rr(i,e,o,u);return-1<y?(e=i[y],t||(e.fa=!1)):((e=new Fe(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var yn="closure_lm_"+(1e6*Math.random()|0),Xn={};function Jt(i,e,t,o,u){if(o&&o.once)return Xr(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Jt(i,e[d],t,o,u);return null}return t=ct(t),i&&i[Ie]?i.N(e,t,Vt(o)?!!o.capture:!!o,u):Nn(i,e,t,!1,o,u)}function Nn(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var y=Vt(u)?!!u.capture:!!u,b=Ii(i);if(b||(i[yn]=b=new pt(i)),(t=b.add(e,t,o,y,d)).proxy)return t;if(o=function yr(){var e=ir;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)pn||(u=y),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(qn(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Xr(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Xr(i,e[d],t,o,u);return null}return t=ct(t),i&&i[Ie]?i.O(e,t,Vt(o)?!!o.capture:!!o,u):Nn(i,e,t,!0,o,u)}function wi(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)wi(i,e[d],t,o,u);else o=Vt(o)?!!o.capture:!!o,t=ct(t),i&&i[Ie]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Rr(d=i.g[e],t,o,u))&&(yt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=Ii(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Rr(e,t,o,u)),(t=-1<i?e[i]:null)&&rr(t))}function rr(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Ie])Cn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(qn(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Ii(e))?(Cn(t,i),0==t.h&&(t.src=null,e[yn]=null)):yt(i)}}}function qn(i){return i in Xn?Xn[i]:Xn[i]="on"+i}function ir(i,e){if(i.ca)i=!0;else{e=new ge(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&rr(i),i=t.call(o,e)}return i}function Ii(i){return(i=i[yn])instanceof pt?i:null}var Or="__closure_events_fn_"+(1e9*Math.random()>>>0);function ct(i){return"function"==typeof i?i:(i[Or]||(i[Or]=function(e){return i.handleEvent(e)}),i[Or])}function Ft(){ln.call(this),this.i=new pt(this),this.P=this,this.I=null}function cn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Kt(e,i);else if(e instanceof Kt)e.target=e.target||i;else{var u=e;Ir(e=new Kt(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var y=e.g=t[d];u=Jn(y,o,!0,e)&&u}if(u=Jn(y=e.g=i,o,!0,e)&&u,u=Jn(y,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=Jn(y=e.g=t[d],o,!1,e)&&u}function Jn(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var y=e[d];if(y&&!y.ca&&y.capture==t){var b=y.listener,B=y.ia||y.src;y.fa&&Cn(i.i,y),u=!1!==b.call(B,o)&&u}}return u&&!o.defaultPrevented}lt(Ft,ln),Ft.prototype[Ie]=!0,Ft.prototype.removeEventListener=function(i,e,t,o){wi(this,i,e,t,o)},Ft.prototype.M=function(){if(Ft.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)yt(t[o]);delete i.g[e],i.h--}}this.I=null},Ft.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Ft.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var li=pe.JSON.stringify;function er(){var i=Cr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Nr,Vn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new _r,i=>i.reset());class _r{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function di(i){pe.setTimeout(()=>{throw i},0)}function mn(i,e){Nr||function hi(){var i=pe.Promise.resolve(void 0);Nr=function(){i.then(sr)}}(),gi||(Nr(),gi=!0),Cr.add(i,e)}var gi=!1,Cr=new class ci{constructor(){this.h=this.g=null}add(e,t){const o=Vn.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function sr(){for(var i;i=er();){try{i.h.call(i.g)}catch(t){di(t)}var e=Vn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}gi=!1}function Fr(i,e){Ft.call(this),this.h=i||1,this.g=e||pe,this.j=It(this.kb,this),this.l=Date.now()}function Lr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function xn(i,e,t){if("function"==typeof i)t&&(i=It(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=It(i.handleEvent,i)}return 2147483647<Number(e)?-1:pe.setTimeout(i,e||0)}function Tn(i){i.g=xn(()=>{i.g=null,i.i&&(i.i=!1,Tn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}lt(Fr,Ft),(X=Fr.prototype).da=!1,X.S=null,X.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),cn(this,"tick"),this.da&&(Lr(this),this.start()))}},X.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},X.M=function(){Fr.Z.M.call(this),Lr(this),delete this.g};class Bi extends ln{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Tn(this)}M(){super.M(),this.g&&(pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(i){ln.call(this),this.h=i,this.g={}}lt(Vr,ln);var br=[];function zr(i,e,t,o){Array.isArray(t)||(t&&(br[0]=t.toString()),t=br);for(var u=0;u<t.length;u++){var d=Jt(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function hs(i){Pr(i.g,function(e,t){this.g.hasOwnProperty(t)&&rr(e)},i),i.g={}}function gr(){this.g=!0}function he(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ne(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var y=1;y<u.length;y++)u[y]=""}}}return li(t)}catch(b){return e}}(i,t)+(o?" "+o:"")})}Vr.prototype.M=function(){Vr.Z.M.call(this),hs(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gr.prototype.Aa=function(){this.g=!1},gr.prototype.info=function(){};var xe={},st=null;function en(){return st=st||new Ft}function de(i){Kt.call(this,xe.Ma,i)}function _e(i){const e=en();cn(e,new de(e,i))}function Be(i,e){Kt.call(this,xe.STAT_EVENT,i),this.stat=e}function nt(i){const e=en();cn(e,new Be(e,i))}function _t(i,e){Kt.call(this,xe.Na,i),this.size=e}function Bt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return pe.setTimeout(function(){i()},e)}xe.Ma="serverreachability",lt(de,Kt),xe.STAT_EVENT="statevent",lt(Be,Kt),xe.Na="timingevent",lt(_t,Kt);var Un={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Gr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Bn(){}function Di(){}Bn.prototype.h=null;var Ns,Ci={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function os(){Kt.call(this,"d")}function Ni(){Kt.call(this,"c")}function as(){}function bi(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Vr(this),this.P=us,this.W=new Fr(i=mr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Jr}function Jr(){this.i=null,this.g="",this.h=!1}lt(os,Kt),lt(Ni,Kt),lt(as,Bn),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},Ns=new as;var us=45e3,Fi={},ei={};function Fs(i,e,t){i.K=1,i.v=bt(H(e)),i.s=t,i.U=!0,Cs(i,null)}function Cs(i,e){i.F=Date.now(),ps(i),i.A=H(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),N(t.h,"t",o),i.C=0,t=i.l.H,i.h=new Jr,i.g=Za(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Bi(It(i.Ia,i,i.g),i.O)),zr(i.V,i.g,"readystatechange",i.gb),e=i.H?pi(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),_e(1),function fs(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var y="",b=d.split("&"),B=0;B<b.length;B++){var W=b[B].split("=");if(1<W.length){var ue=W[0];W=W[1];var Ae=ue.split("_");y=2<=Ae.length&&"type"==Ae[1]?y+(ue+"=")+W+"&":y+(ue+"=redacted&")}}else y=null;else y=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+y})}(i.j,i.u,i.A,i.m,i.X,i.s)}function xs(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Yi(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Ti(i,t),u==ei){4==e&&(i.o=4,nt(14),o=!1),he(i.j,i.m,null,"[Incomplete Response]");break}if(u==Fi){i.o=4,nt(15),he(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}he(i.j,i.m,u,null),ls(i,u)}xs(i)&&u!=ei&&u!=Fi&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,nt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),zo(e),e.L=!0,nt(11))):(he(i.j,i.m,t,"[Invalid Chunked Response]"),Ai(i),qr(i))}function Ti(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?ei:(t=Number(e.substring(t,o)),isNaN(t)?Fi:(o+=1)+t>e.length?ei:(e=e.substr(o,t),i.C=o+t,e))}function ps(i){i.Y=Date.now()+i.P,Qi(i,i.P)}function Qi(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Bt(It(i.eb,i),e)}function Ur(i){i.B&&(pe.clearTimeout(i.B),i.B=null)}function qr(i){0==i.l.G||i.I||As(i.l,i)}function Ai(i){Ur(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Lr(i.W),hs(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function ls(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Ke(t.i,i)))if(t.I=i.N,!i.J&&Ke(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(W){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=Bt(It(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;es(t),Oo(t)}fi(t),nt(18)}if(1>=De(t.i)&&t.ka){try{t.ka()}catch(W){}t.ka=void 0}}else zs(t,11)}else if((i.J||t.g==i)&&es(t),!Gn(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let W=u[e];if(t.U=W[0],W=W[1],2==t.G)if("c"==W[0]){t.J=W[1],t.la=W[2];const ue=W[3];null!=ue&&(t.ma=ue,t.h.info("VER="+t.ma));const Ae=W[4];null!=Ae&&(t.za=Ae,t.h.info("SVER="+t.za));const Xe=W[5];null!=Xe&&"number"==typeof Xe&&0<Xe&&(t.K=o=1.5*Xe,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const dt=i.g;if(dt){const ht=dt.g?dt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ht){var d=o.i;!d.g&&(Ln(ht,"spdy")||Ln(ht,"quic")||Ln(ht,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(it(d,d.h),d.h=null))}if(o.D){const tn=dt.g?dt.g.getResponseHeader("X-HTTP-Session-Id"):null;tn&&(o.sa=tn,et(o.F,o.D,tn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var y=i;if((o=t).oa=Aa(o,o.H?o.la:null,o.W),y.J){Lt(o.i,y);var b=y,B=o.K;B&&b.setTimeout(B),b.B&&(Ur(b),ps(b)),o.g=y}else Mi(o);0<t.l.length&&Wo(t)}else"stop"!=W[0]&&"close"!=W[0]||zs(t,7);else 3==t.G&&("stop"==W[0]||"close"==W[0]?"stop"==W[0]?zs(t,7):Zr(t):"noop"!=W[0]&&t.j&&t.j.wa(W),t.A=0)}_e(4)}catch(W){}}function bs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ue(i)||"string"==typeof i)Mn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Ue(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function Gs(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ue(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function Xi(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Xi)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function ti(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Ji(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)Ji(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function Ji(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(X=bi.prototype).setTimeout=function(i){this.P=i},X.gb=function(i){i=i.target;const e=this.L;e&&3==ks(i)?e.l():this.Ia(i)},X.Ia=function(i){try{if(i==this.g)e:{const ue=ks(this.g);var e=this.g.Da();const Ae=this.g.ba();if(!(3>ue)&&(3!=ue||mr||this.g&&(this.h.h||this.g.ga()||xo(this.g)))){this.I||4!=ue||7==e||_e(8==e||0>=Ae?3:2),Ur(this);var t=this.g.ba();this.N=t;t:if(xs(this)){var o=xo(this.g);i="";var u=o.length,d=4==ks(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ai(this),qr(this);var y="";break t}this.h.i=new pe.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,y=this.h.g}else y=this.g.ga();if(this.i=200==t,function Kr(i,e,t,o,u,d,y){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+y})}(this.j,this.u,this.A,this.m,this.X,ue,t),this.i){if(this.$&&!this.J){t:{if(this.g){var b,B=this.g;if((b=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gn(b)){var W=b;break t}}W=null}if(!(t=W)){this.i=!1,this.o=3,nt(12),Ai(this),qr(this);break e}he(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ls(this,t)}this.U?(Yi(this,ue,y),mr&&this.i&&3==ue&&(zr(this.V,this.W,"tick",this.fb),this.W.start())):(he(this.j,this.m,y,null),ls(this,y)),4==ue&&Ai(this),this.i&&!this.I&&(4==ue?As(this.l,this):(this.i=!1,ps(this)))}else 400==t&&0<y.indexOf("Unknown SID")?(this.o=3,nt(12)):(this.o=0,nt(13)),Ai(this),qr(this)}}}catch(ue){}},X.fb=function(){if(this.g){var i=ks(this.g),e=this.g.ga();this.C<e.length&&(Ur(this),Yi(this,i,e),this.i&&4!=i&&ps(this))}},X.cancel=function(){this.I=!0,Ai(this)},X.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function fe(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_e(3),nt(17)),Ai(this),this.o=2,qr(this)):Qi(this,this.Y-i)},(X=Xi.prototype).R=function(){ti(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},X.T=function(){return ti(this),this.g.concat()},X.get=function(i,e){return Ji(this.h,i)?this.h[i]:e},X.set=function(i,e){Ji(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},X.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var Rs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function O(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof O){this.g=void 0!==e?e:i.g,x(this,i.j),this.s=i.s,Z(this,i.i),me(this,i.m),this.l=i.l,e=i.h;var t=new ji;t.i=e.i,e.g&&(t.g=new Xi(e.g),t.h=e.h),Je(this,t),this.o=i.o}else i&&(t=String(i).match(Rs))?(this.g=!!e,x(this,t[1]||"",!0),this.s=vn(t[2]||""),Z(this,t[3]||"",!0),me(this,t[4]),this.l=vn(t[5]||"",!0),Je(this,t[6]||"",!0),this.o=vn(t[7]||"")):(this.g=!!e,this.h=new ji(null,this.g))}function H(i){return new O(i)}function x(i,e,t){i.j=t?vn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Z(i,e,t){i.i=t?vn(e,!0):e}function me(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Je(i,e,t){e instanceof ji?(i.h=e,function S(i,e){e&&!i.j&&($i(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Ts(this,o),N(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=En(e,ni)),i.h=new ji(e,i.g))}function et(i,e,t){i.h.set(e,t)}function bt(i){return et(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function vn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function En(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,vr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function vr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}O.prototype.toString=function(){var i=[],e=this.j;e&&i.push(En(e,Qn,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(En(e,Qn,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(En(t,"/"==t.charAt(0)?gs:cr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",En(t,un)),i.join("")};var Qn=/[#\/\?@]/g,cr=/[#\?:]/g,gs=/[#\?]/g,ni=/[#\?@]/g,un=/#/g;function ji(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function $i(i){i.g||(i.g=new Xi,i.h=0,i.i&&function Rn(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ts(i,e){$i(i),e=M(i,e),Ji(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Ji((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&ti(i)))}function Os(i,e){return $i(i),e=M(i,e),Ji(i.g.h,e)}function N(i,e,t){Ts(i,e),0<t.length&&(i.i=null,i.g.set(M(i,e),Er(t)),i.h+=t.length)}function M(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function C(i){this.l=i||K,i=pe.PerformanceNavigationTiming?0<(i=pe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(pe.g&&pe.g.Ea&&pe.g.Ea()&&pe.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(X=ji.prototype).add=function(i,e){$i(this),this.i=null,i=M(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},X.forEach=function(i,e){$i(this),this.g.forEach(function(t,o){Mn(t,function(u){i.call(e,u,o,this)},this)},this)},X.T=function(){$i(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},X.R=function(i){$i(this);var e=[];if("string"==typeof i)Os(this,i)&&(e=tr(e,this.g.get(M(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=tr(e,i[t])}return e},X.set=function(i,e){return $i(this),this.i=null,Os(this,i=M(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},X.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},X.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var y=u;""!==o[d]&&(y+="="+encodeURIComponent(String(o[d]))),i.push(y)}}return this.i=i.join("&")};var K=10;function ee(i){return!!i.h||!!i.g&&i.g.size>=i.j}function De(i){return i.h?1:i.g?i.g.size:0}function Ke(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function it(i,e){i.g?i.g.add(e):i.h=e}function Lt(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function St(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Er(i.i)}function _n(){}function $n(){this.g=new _n}function Br(i,e,t){const o=t||"";try{bs(i,function(u,d){let y=u;Vt(u)&&(y=li(u)),e.push(o+d+"="+encodeURIComponent(y))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function zn(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(d){}}function Zn(i){this.l=i.$b||null,this.j=i.ib||!1}function yi(i,e){Ft.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=hr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}C.prototype.cancel=function(){if(this.i=St(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},_n.prototype.stringify=function(i){return pe.JSON.stringify(i,void 0)},_n.prototype.parse=function(i){return pe.JSON.parse(i,void 0)},lt(Zn,Bn),Zn.prototype.g=function(){return new yi(this.l,this.j)},Zn.prototype.i=function(i){return function(){return i}}({}),lt(yi,Ft);var hr=0;function ii(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Hi(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Wr(i)}function Wr(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(X=yi.prototype).open=function(i,e){if(this.readyState!=hr)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Wr(this)},X.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||pe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},X.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hi(this)),this.readyState=hr},X.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==pe.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ii(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},X.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Hi(this):Wr(this),3==this.readyState&&ii(this)}},X.Ua=function(i){this.g&&(this.response=this.responseText=i,Hi(this))},X.Ta=function(i){this.g&&(this.response=i,Hi(this))},X.ha=function(){this.g&&Hi(this)},X.setRequestHeader=function(i,e){this.v.append(i,e)},X.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},X.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(yi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var si=pe.JSON.parse;function Tr(i){Ft.call(this),this.headers=new Xi,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ms,this.K=this.L=!1}lt(Tr,Ft);var ms="",fo=/^https?$/i,Ls=["POST","PUT"];function Ca(i){return"content-type"==i.toLowerCase()}function Go(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,go(i),Ws(i)}function go(i){i.D||(i.D=!0,cn(i,"complete"),cn(i,"error"))}function Ka(i){if(i.h&&void 0!==Ce&&(!i.C[1]||4!=ks(i)||2!=i.ba()))if(i.v&&4==ks(i))xn(i.Fa,0,i);else if(cn(i,"readystatechange"),4==ks(i)){i.h=!1;try{const b=i.ba();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===b){var u=String(i.H).match(Rs)[1]||null;if(!u&&pe.self&&pe.self.location){var d=pe.self.location.protocol;u=d.substr(0,d.length-1)}o=!fo.test(u?u.toLowerCase():"")}t=o}if(t)cn(i,"complete"),cn(i,"success");else{i.m=6;try{var y=2<ks(i)?i.g.statusText:""}catch(B){y=""}i.j=y+" ["+i.ba()+"]",go(i)}}finally{Ws(i)}}}function Ws(i,e){if(i.g){ba(i);const t=i.g,o=i.C[0]?Ge:null;i.g=null,i.C=null,e||cn(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function ba(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(pe.clearTimeout(i.A),i.A=null)}function ks(i){return i.g?i.g.readyState:0}function xo(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ms:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function sa(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function qa(i){let e="";return Pr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):et(i,e,t))}function Si(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Ro(i){this.za=0,this.l=[],this.h=new gr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Si("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Si("baseRetryDelayMs",5e3,i),this.$a=Si("retryDelaySeedMs",1e4,i),this.Ya=Si("forwardChannelMaxRetries",2,i),this.ra=Si("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new C(i&&i.concurrentRequestLimit),this.Ca=new $n,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Zr(i){if(ec(i),3==i.G){var e=i.V++,t=H(i.F);et(t,"SID",i.J),et(t,"RID",e),et(t,"TYPE","terminate"),ys(i,t),(e=new bi(i,i.h,e,void 0)).K=2,e.v=bt(H(t)),t=!1,pe.navigator&&pe.navigator.sendBeacon&&(t=pe.navigator.sendBeacon(e.v.toString(),"")),!t&&pe.Image&&((new Image).src=e.v,t=!0),t||(e.g=Za(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ps(e)}Ks(i)}function Oo(i){i.g&&(zo(i),i.g.cancel(),i.g=null)}function ec(i){Oo(i),i.u&&(pe.clearTimeout(i.u),i.u=null),es(i),i.i.cancel(),i.m&&("number"==typeof i.m&&pe.clearTimeout(i.m),i.m=null)}function wu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Wo(i)}function Wo(i){ee(i.i)||i.m||(i.m=!0,mn(i.Ha,i),i.C=0)}function oa(i,e){var t;t=e?e.m:i.V++;const o=H(i.F);et(o,"SID",i.J),et(o,"RID",t),et(o,"AID",i.U),ys(i,o),i.o&&i.s&&sa(o,i.o,i.s),t=new bi(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=ko(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),it(i.i,t),Fs(t,o,e)}function ys(i,e){i.j&&bs({},function(t,o){et(e,o,t)})}function ko(i,e,t){t=Math.min(i.l.length,t);var o=i.j?It(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const y=["count="+t];-1==d?0<t?(d=u[0].h,y.push("ofs="+d)):d=0:y.push("ofs="+d);let b=!0;for(let B=0;B<t;B++){let W=u[B].h;const ue=u[B].g;if(W-=d,0>W)d=Math.max(0,u[B].h-100),b=!1;else try{Br(ue,y,"req"+W+"_")}catch(Ae){o&&o(ue)}}if(b){o=y.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Mi(i){i.g||i.u||(i.Y=1,mn(i.Ga,i),i.A=0)}function fi(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Bt(It(i.Ga,i),aa(i,i.A)),i.A++,0))}function zo(i){null!=i.B&&(pe.clearTimeout(i.B),i.B=null)}function Ta(i){i.g=new bi(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=H(i.oa);et(e,"RID","rpc"),et(e,"SID",i.J),et(e,"CI",i.N?"0":"1"),et(e,"AID",i.U),ys(i,e),et(e,"TYPE","xmlhttp"),i.o&&i.s&&sa(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=bt(H(e)),t.s=null,t.U=!0,Cs(t,i)}function es(i){null!=i.v&&(pe.clearTimeout(i.v),i.v=null)}function As(i,e){var t=null;if(i.g==e){es(i),zo(i),i.g=null;var o=2}else{if(!Ke(i.i,e))return;t=e.D,Lt(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;cn(o=en(),new _t(o,t,e,u)),Wo(i)}else Mi(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function tc(i,e){return!(De(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Bt(It(i.Ha,i,e),aa(i,i.C)),i.C++,0)))}(i,e)||2==o&&fi(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:zs(i,5);break;case 4:zs(i,10);break;case 3:zs(i,6);break;default:zs(i,2)}}function aa(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function zs(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=It(i.jb,i);t||(t=new O("//www.google.com/images/cleardot.gif"),pe.location&&"http"==pe.location.protocol||x(t,"https"),bt(t)),function dr(i,e){const t=new gr;if(pe.Image){const o=new Image;o.onload=xt(zn,t,o,"TestLoadImage: loaded",!0,e),o.onerror=xt(zn,t,o,"TestLoadImage: error",!1,e),o.onabort=xt(zn,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=xt(zn,t,o,"TestLoadImage: timeout",!1,e),pe.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else nt(2);i.G=0,i.j&&i.j.va(e),Ks(i),ec(i)}function Ks(i){i.G=0,i.I=-1,i.j&&((0!=St(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Er(i.l),i.l.length=0),i.j.ua())}function Aa(i,e,t){let o=function Wn(i){return i instanceof O?H(i):new O(i,void 0)}(t);if(""!=o.i)e&&Z(o,e+"."+o.i),me(o,o.m);else{const u=pe.location;o=function jn(i,e,t,o){var u=new O(null,void 0);return i&&x(u,i),e&&Z(u,e),t&&me(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&Pr(i.aa,function(u,d){et(o,d,u)}),t=i.sa,(e=i.D)&&t&&et(o,e,t),et(o,"VER",i.ma),ys(i,o),o}function Za(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tr(t&&i.Ba&&!i.qa?new Zn({ib:!0}):i.qa)).L=i.H,e}function Ya(){}function Sa(){if(Ot&&!(10<=Number(Nt)))throw Error("Environmental error: no available transport.")}function jr(i,e){Ft.call(this),this.g=new Ro(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Gn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new mo(this)}function qs(i){os.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Vs(){Ni.call(this),this.status=1}function mo(i){this.g=i}(X=Tr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ns.g(),this.C=function mi(i){return i.h||(i.h=i.i())}(this.u?this.u:Ns),this.g.onreadystatechange=It(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void Go(this,d)}i=t||"";const u=new Xi(this.headers);o&&bs(o,function(d,y){u.set(y,d)}),o=function lr(i){e:{var e=Ca;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=pe.FormData&&i instanceof pe.FormData,!(0<=Hn(Ls,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,y){this.g.setRequestHeader(y,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ba(this),0<this.B&&((this.K=function po(i){return Ot&&function Ct(){return function Hr(i){var e=Xt;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=wr(String(pr)).split("."),t=wr("9").split("."),o=Math.max(e.length,t.length);for(let y=0;0==i&&y<o;y++){var u=e[y]||"",d=t[y]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=Ut(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||Ut(0==u[2].length,0==d[2].length)||Ut(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=It(this.pa,this)):this.A=xn(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){Go(this,d)}},X.pa=function(){void 0!==Ce&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cn(this,"timeout"),this.abort(8))},X.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,cn(this,"complete"),cn(this,"abort"),Ws(this))},X.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ws(this,!0)),Tr.Z.M.call(this)},X.Fa=function(){this.s||(this.F||this.v||this.l?Ka(this):this.cb())},X.cb=function(){Ka(this)},X.ba=function(){try{return 2<ks(this)?this.g.status:-1}catch(i){return-1}},X.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},X.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),si(e)}},X.Da=function(){return this.m},X.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(X=Ro.prototype).ma=8,X.G=1,X.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},X.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new bi(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=pi(d),Ir(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ko(this,u,e),et(t=H(this.F),"RID",i),et(t,"CVER",22),this.D&&et(t,"X-HTTP-Session-Id",this.D),ys(this,t),this.o&&d&&sa(t,this.o,d),it(this.i,u),this.Ra&&et(t,"TYPE","init"),this.ja?(et(t,"$req",e),et(t,"SID","null"),u.$=!0,Fs(u,t,null)):Fs(u,t,e),this.G=2}}else 3==this.G&&(i?oa(this,i):0==this.l.length||ee(this.i)||oa(this))},X.Ga=function(){if(this.u=null,Ta(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Bt(It(this.bb,this),i)}},X.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,nt(10),Oo(this),Ta(this))},X.ab=function(){null!=this.v&&(this.v=null,Oo(this),fi(this),nt(19))},X.jb=function(i){i?(this.h.info("Successfully pinged google.com"),nt(2)):(this.h.info("Failed to ping google.com"),nt(1))},(X=Ya.prototype).xa=function(){},X.wa=function(){},X.va=function(){},X.ua=function(){},X.Oa=function(){},Sa.prototype.g=function(i,e){return new jr(i,e)},lt(jr,Ft),jr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),mn(It(i.hb,i,e))),nt(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Aa(i,null,i.W),Wo(i)},jr.prototype.close=function(){Zr(this.g)},jr.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,wu(this.g,e)}else this.v?((e={}).__data__=li(i),wu(this.g,e)):wu(this.g,i)},jr.prototype.M=function(){this.g.j=null,delete this.j,Zr(this.g),delete this.g,jr.Z.M.call(this)},lt(qs,os),lt(Vs,Ni),lt(mo,Ya),mo.prototype.xa=function(){cn(this.g,"a")},mo.prototype.wa=function(i){cn(this.g,new qs(i))},mo.prototype.va=function(i){cn(this.g,new Vs(i))},mo.prototype.ua=function(){cn(this.g,"b")},Sa.prototype.createWebChannel=Sa.prototype.g,jr.prototype.send=jr.prototype.u,jr.prototype.open=jr.prototype.m,jr.prototype.close=jr.prototype.close,Un.NO_ERROR=0,Un.TIMEOUT=8,Un.HTTP_ERROR=6,Gr.COMPLETE="complete",Di.EventType=Ci,Ci.OPEN="a",Ci.CLOSE="b",Ci.ERROR="c",Ci.MESSAGE="d",Ft.prototype.listen=Ft.prototype.N,Tr.prototype.listenOnce=Tr.prototype.O,Tr.prototype.getLastError=Tr.prototype.La,Tr.prototype.getLastErrorCode=Tr.prototype.Da,Tr.prototype.getStatus=Tr.prototype.ba,Tr.prototype.getResponseJson=Tr.prototype.Qa,Tr.prototype.getResponseText=Tr.prototype.ga,Tr.prototype.send=Tr.prototype.ea;var ua=we.createWebChannelTransport=function(){return new Sa},Ko=we.getStatEventTarget=function(){return en()},Ma=we.ErrorCode=Un,$r=we.EventType=Gr,al=we.Event=xe,Ps=we.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},xa=we.FetchXmlHttpFactory=Zn,Us=we.WebChannel=Di,nc=we.XhrIo=Tr;const la="@firebase/firestore";class xi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");let qo="9.6.11";const _s=new Ve.Yd("@firebase/firestore");function yo(){return _s.logLevel}function I(i,...e){if(_s.logLevel<=Ve.in.DEBUG){const t=e.map(R);_s.debug(`Firestore (${qo}): ${i}`,...t)}}function E(i,...e){if(_s.logLevel<=Ve.in.ERROR){const t=e.map(R);_s.error(`Firestore (${qo}): ${i}`,...t)}}function v(i,...e){if(_s.logLevel<=Ve.in.WARN){const t=e.map(R);_s.warn(`Firestore (${qo}): ${i}`,...t)}}function R(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function k(i="Unexpected state"){const e=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: `+i;throw E(e),new Error(e)}function $(i,e){i||k()}function te(i,e){return i}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends $e.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class dn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class zt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ar{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xi.UNAUTHENTICATED))}shutdown(){}}class or{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Bs{constructor(e){this.t=e,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=W=>this.i!==u?(u=this.i,t(W)):Promise.resolve();let y=new dn;this.o=()=>{this.i++,this.currentUser=this.u(),y.resolve(),y=new dn,e.enqueueRetryable(()=>d(this.currentUser))};const b=()=>{const W=y;e.enqueueRetryable((0,U.Z)(function*(){yield W.promise,yield d(o.currentUser)}))},B=W=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=W,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit(W=>B(W)),setTimeout(()=>{if(!this.auth){const W=this.t.getImmediate({optional:!0});W?B(W):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),y.resolve(),y=new dn)}},0),b()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?($("string"==typeof o.accessToken),new zt(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $(null===e||"string"==typeof e),new xi(e)}}class ts{constructor(e,t,o){this.type="FirstParty",this.user=xi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class Ra{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new ts(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Eo{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=d=>{null!=d.error&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const y=d.token!==this.p;return this.p=d.token,I("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.g.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.g.getImmediate({optional:!0});d?u(d):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($("string"==typeof t.token),this.p=t.token,new vo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ns{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function so(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}ns.A=-1;class rc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=so(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function On(i,e){return i<e?-1:i>e?1:0}function oo(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function Qa(i){return i+"\0"}class Li{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new je(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Li.fromMillis(Date.now())}static fromDate(e){return Li.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Li(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?On(this.nanoseconds,e.nanoseconds):On(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qt(e)}static min(){return new qt(new Li(0,0))}static max(){return new qt(new Li(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Zc(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Xa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Yc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Oa{constructor(e,t,o){void 0===t?t=0:t>e.length&&k(),void 0===o?o=e.length-t:o>e.length-t&&k(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Oa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oa?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),y=t.get(u);if(d<y)return-1;if(d>y)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fr extends Oa{construct(e,t,o){return new fr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new je(se.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new fr(t)}static emptyPath(){return new fr([])}}const Wd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cs extends Oa{construct(e,t,o){return new cs(e,t,o)}static isValidIdentifier(e){return Wd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cs(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new je(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let y=!1;for(;u<e.length;){const b=e[u];if("\\"===b){if(u+1===e.length)throw new je(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const B=e[u+1];if("\\"!==B&&"."!==B&&"`"!==B)throw new je(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=B,u+=2}else"`"===b?(y=!y,u++):"."!==b||y?(o+=b,u++):(d(),u++)}if(d(),y)throw new je(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cs(t)}static emptyPath(){return new cs([])}}class Zs{constructor(e){this.fields=e,e.sort(cs.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Kn(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new Kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return On(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const ul=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function js(i){if($(!!i),"string"==typeof i){let e=0;const t=ul.exec(i);if($(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ri(i.seconds),nanos:Ri(i.nanos)}}function Ri(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function No(i){return"string"==typeof i?Kn.fromBase64String(i):Kn.fromUint8Array(i)}function rs(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $s(i){const e=i.mapValue.fields.__previous_value__;return rs(e)?$s(e):e}function ka(i){const e=js(i.mapValue.fields.__local_write_time__.timestampValue);return new Li(e.seconds,e.nanos)}class Zo{constructor(e,t,o,u,d,y,b,B){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=y,this.autoDetectLongPolling=b,this.useFetchStreams=B}}class Gi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gi&&e.projectId===this.projectId&&e.database===this.database}}function vs(i){return null==i}function Fo(i){return 0===i&&1/i==-1/0}function Iu(i){return"number"==typeof i&&Number.isInteger(i)&&!Fo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(fr.fromString(e))}static fromName(e){return new Mt(fr.fromString(e).popFirst(5))}static empty(){return new Mt(fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new fr(e.slice()))}}const ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Du={nullValue:"NULL_VALUE"};function Wi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?rs(i)?4:Qo(i)?9:10:k()}function ao(i,e){if(i===e)return!0;const t=Wi(i);if(t!==Wi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ka(i).isEqual(ka(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=js(o.timestampValue),y=js(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,No(i.bytesValue).isEqual(No(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Ri(o.geoPointValue.latitude)===Ri(u.geoPointValue.latitude)&&Ri(o.geoPointValue.longitude)===Ri(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ri(o.integerValue)===Ri(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Ri(o.doubleValue),y=Ri(u.doubleValue);return d===y?Fo(d)===Fo(y):isNaN(d)&&isNaN(y)}return!1}(i,e);case 9:return oo(i.arrayValue.values||[],e.arrayValue.values||[],ao);case 10:return function(o,u){const d=o.mapValue.fields||{},y=u.mapValue.fields||{};if(Zc(d)!==Zc(y))return!1;for(const b in d)if(d.hasOwnProperty(b)&&(void 0===y[b]||!ao(d[b],y[b])))return!1;return!0}(i,e);default:return k()}var u}function wo(i,e){return void 0!==(i.values||[]).find(t=>ao(t,e))}function Lo(i,e){if(i===e)return 0;const t=Wi(i),o=Wi(e);if(t!==o)return On(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return On(i.booleanValue,e.booleanValue);case 2:return function(u,d){const y=Ri(u.integerValue||u.doubleValue),b=Ri(d.integerValue||d.doubleValue);return y<b?-1:y>b?1:y===b?0:isNaN(y)?isNaN(b)?0:-1:1}(i,e);case 3:return Yo(i.timestampValue,e.timestampValue);case 4:return Yo(ka(i),ka(e));case 5:return On(i.stringValue,e.stringValue);case 6:return function(u,d){const y=No(u),b=No(d);return y.compareTo(b)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const y=u.split("/"),b=d.split("/");for(let B=0;B<y.length&&B<b.length;B++){const W=On(y[B],b[B]);if(0!==W)return W}return On(y.length,b.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const y=On(Ri(u.latitude),Ri(d.latitude));return 0!==y?y:On(Ri(u.longitude),Ri(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const y=u.values||[],b=d.values||[];for(let B=0;B<y.length&&B<b.length;++B){const W=Lo(y[B],b[B]);if(W)return W}return On(y.length,b.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){const y=u.fields||{},b=Object.keys(y),B=d.fields||{},W=Object.keys(B);b.sort(),W.sort();for(let ue=0;ue<b.length&&ue<W.length;++ue){const Ae=On(b[ue],W[ue]);if(0!==Ae)return Ae;const Xe=Lo(y[b[ue]],B[W[ue]]);if(0!==Xe)return Xe}return On(b.length,W.length)}(i.mapValue,e.mapValue);default:throw k()}}function Yo(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return On(i,e);const t=js(i),o=js(e),u=On(t.seconds,o.seconds);return 0!==u?u:On(t.nanos,o.nanos)}function Vo(i){return cl(i)}function cl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=js(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?No(i.bytesValue).toBase64():"referenceValue"in i?Mt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const y of o.values||[])d?d=!1:u+=",",u+=cl(y);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",y=!0;for(const b of u)y?y=!1:d+=",",d+=`${b}:${cl(o.fields[b])}`;return d+"}"}(i.mapValue):k();var e}function Uo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function uo(i){return!!i&&"integerValue"in i}function Ja(i){return!!i&&"arrayValue"in i}function Ys(i){return!!i&&"nullValue"in i}function Cu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Pa(i){return!!i&&"mapValue"in i}function ca(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Xa(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=ca(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ca(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Qo(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function eu(i){return"nullValue"in i?Du:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Uo(Gi.empty(),Mt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:k()}function dl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Uo(Gi.empty(),Mt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ll:k()}function A(i,e){return void 0===i?e:void 0===e||Lo(i,e)>0?i:e}function P(i,e){return void 0===i?e:void 0===e||Lo(i,e)<0?i:e}class z{constructor(e){this.value=e}static empty(){return new z({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Pa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ca(t)}setAll(e){let t=cs.emptyPath(),o={},u=[];e.forEach((y,b)=>{if(!t.isImmediateParentOf(b)){const B=this.getFieldsMap(t);this.applyChanges(B,o,u),o={},u=[],t=b.popLast()}y?o[b.lastSegment()]=ca(y):u.push(b.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Pa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Pa(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Xa(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new z(ca(this.value))}}function le(i){const e=[];return Xa(i.fields,(t,o)=>{const u=new cs([t]);if(Pa(o)){const d=le(o.mapValue).fields;if(0===d.length)e.push(u);else for(const y of d)e.push(u.child(y))}else e.push(u)}),new Zs(e)}class Me{constructor(e,t,o,u,d,y){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=y}static newInvalidDocument(e){return new Me(e,0,qt.min(),qt.min(),z.empty(),0)}static newFoundDocument(e,t,o){return new Me(e,1,t,qt.min(),o,0)}static newNoDocument(e,t){return new Me(e,2,t,qt.min(),z.empty(),0)}static newUnknownDocument(e,t){return new Me(e,3,t,qt.min(),z.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=z.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=z.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Me&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ye{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function vt(i){return i.fields.find(e=>2===e.kind)}function Gt(i){return i.fields.filter(e=>2!==e.kind)}Ye.UNKNOWN_ID=-1;class rn{constructor(e,t){this.fieldPath=e,this.kind=t}}class In{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new In(0,Yr.min())}}function ar(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=qt.fromTimestamp(1e9===o?new Li(t+1,0):new Li(t,o));return new Yr(u,Mt.empty(),e)}function kn(i){return new Yr(i.readTime,i.key,-1)}class Yr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Yr(qt.min(),Mt.empty(),-1)}static max(){return new Yr(qt.max(),Mt.empty(),-1)}}function Vi(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Mt.comparator(i.documentKey,e.documentKey),0!==t?t:On(i.largestBatchId,e.largestBatchId))}class Na{constructor(e,t=null,o=[],u=[],d=null,y=null,b=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=y,this.endAt=b,this.P=null}}function tu(i,e=null,t=[],o=[],u=null,d=null,y=null){return new Na(i,e,t,o,u,d,y)}function Es(i){const e=te(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+Vo(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),vs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Vo(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Vo(o)).join(",")),e.P=t}return e.P}function Qs(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Rf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!ao(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Yd(i.startAt,e.startAt)&&Yd(i.endAt,e.endAt)}function Io(i){return Mt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function hl(i,e){return i.filters.filter(t=>t instanceof Ui&&t.field.isEqual(e))}function Qc(i,e,t){let o,u=!0;for(const d of hl(i,e)){let y,b=!0;switch(d.op){case"<":case"<=":y=eu(d.value);break;case"==":case"in":case">=":y=d.value;break;case">":y=d.value,b=!1;break;case"!=":case"not-in":y=Du}A(o,y)===y&&(o=y,u=b)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const y=t.position[d];A(o,y)===y&&(o=y,u=t.inclusive);break}return{value:o,inclusive:u}}function fl(i,e,t){let o,u=!0;for(const d of hl(i,e)){let y,b=!0;switch(d.op){case">=":case">":y=dl(d.value),b=!1;break;case"==":case"in":case"<=":y=d.value;break;case"<":y=d.value,b=!1;break;case"!=":case"not-in":y=ll}P(o,y)===y&&(o=y,u=b)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const y=t.position[d];P(o,y)===y&&(o=y,u=t.inclusive);break}return{value:o,inclusive:u}}class Ui extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new Kd(e,t,o):"array-contains"===t?new pl(e,o):"in"===t?new Mf(e,o):"not-in"===t?new xf(e,o):"array-contains-any"===t?new qd(e,o):new Ui(e,t,o)}static V(e,t,o){return"in"===t?new Af(e,o):new Sf(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Lo(t,this.value)):null!==t&&Wi(this.value)===Wi(t)&&this.v(Lo(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return k()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Kd extends Ui{constructor(e,t,o){super(e,t,o),this.key=Mt.fromName(o.referenceValue)}matches(e){const t=Mt.comparator(e.key,this.key);return this.v(t)}}class Af extends Ui{constructor(e,t){super(e,"in",t),this.keys=da(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sf extends Ui{constructor(e,t){super(e,"not-in",t),this.keys=da(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function da(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Mt.fromName(o.referenceValue))}class pl extends Ui{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ja(t)&&wo(t.arrayValue,this.value)}}class Mf extends Ui{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wo(this.value.arrayValue,t)}}class xf extends Ui{constructor(e,t){super(e,"not-in",t)}matches(e){if(wo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wo(this.value.arrayValue,t)}}class qd extends Ui{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ja(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>wo(this.value.arrayValue,o))}}class Bo{constructor(e,t){this.position=e,this.inclusive=t}}class gl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Rf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Zd(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],y=i.position[u];if(o=d.field.isKeyField()?Mt.comparator(Mt.fromName(y.referenceValue),t.key):Lo(y,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Yd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ao(i.position[t],e.position[t]))return!1;return!0}class Do{constructor(e,t=null,o=[],u=[],d=null,y="F",b=null,B=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=y,this.startAt=b,this.endAt=B,this.D=null,this.C=null}}function ic(i,e,t,o,u,d,y,b){return new Do(i,e,t,o,u,d,y,b)}function jo(i){return new Do(i)}function sc(i){return!vs(i.limit)&&"F"===i.limitType}function bu(i){return!vs(i.limit)&&"L"===i.limitType}function Qd(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Tu(i){for(const e of i.filters)if(e.S())return e.field;return null}function ml(i){return null!==i.collectionGroup}function nu(i){const e=te(i);if(null===e.D){e.D=[];const t=Tu(e),o=Qd(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new gl(t)),e.D.push(new gl(cs.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.D.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new gl(cs.keyField(),d))}}}return e.D}function co(i){const e=te(i);if(!e.C)if("F"===e.limitType)e.C=tu(e.path,e.collectionGroup,nu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of nu(e))t.push(new gl(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Bo(e.endAt.position,!e.endAt.inclusive):null,u=e.startAt?new Bo(e.startAt.position,!e.startAt.inclusive):null;e.C=tu(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function oc(i,e,t){return new Do(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Au(i,e){return Qs(co(i),co(e))&&i.limitType===e.limitType}function Xd(i){return`${Es(co(i))}|lt:${i.limitType}`}function Xc(i){return`Query(target=${function lo(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${Vo(o.value)}`;var o}).join(", ")}]`),vs(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Vo(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Vo(t)).join(",")),`Target(${e})`}(co(i))}; limitType=${i.limitType})`}function Jc(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Mt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,y){const b=Zd(u,d,y);return u.inclusive?b<=0:b<0}(t.startAt,nu(t),o)||t.endAt&&!function(u,d,y){const b=Zd(u,d,y);return u.inclusive?b>=0:b>0}(t.endAt,nu(t),o)));var t,o}function ac(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Jd(i){return(e,t)=>{let o=!1;for(const u of nu(i)){const d=Xo(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Xo(i,e,t){const o=i.field.isKeyField()?Mt.comparator(e.key,t.key):function(u,d,y){const b=d.data.field(u),B=y.data.field(u);return null!==b&&null!==B?Lo(b,B):k()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return k()}}function Su(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fo(e)?"-0":e}}function ed(i){return{integerValue:""+i}}function Of(i,e){return Iu(e)?ed(e):Su(i,e)}class yl{constructor(){this._=void 0}}function Mg(i,e,t){return i instanceof ru?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof iu?th(i,e):i instanceof Mu?Fa(i,e):function(o,u){const d=eh(o,u),y=nh(d)+nh(o.k);return uo(d)&&uo(o.k)?ed(y):Su(o.M,y)}(i,e)}function kf(i,e,t){return i instanceof iu?th(i,e):i instanceof Mu?Fa(i,e):t}function eh(i,e){return i instanceof _l?uo(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class ru extends yl{}class iu extends yl{constructor(e){super(),this.elements=e}}function th(i,e){const t=su(e);for(const o of i.elements)t.some(u=>ao(u,o))||t.push(o);return{arrayValue:{values:t}}}class Mu extends yl{constructor(e){super(),this.elements=e}}function Fa(i,e){let t=su(e);for(const o of i.elements)t=t.filter(u=>!ao(u,o));return{arrayValue:{values:t}}}class _l extends yl{constructor(e,t){super(),this.M=e,this.k=t}}function nh(i){return Ri(i.integerValue||i.doubleValue)}function su(i){return Ja(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xu{constructor(e,t){this.field=e,this.transform=t}}class vl{constructor(e,t){this.version=e,this.transformResults=t}}class zi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zi}static exists(e){return new zi(void 0,e)}static updateTime(e){return new zi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ou(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class El{}function xg(i,e,t){i instanceof au?function(o,u,d){const y=o.value.clone(),b=wl(o.fieldTransforms,u,d.transformResults);y.setAll(b),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(i,e,t):i instanceof Ru?function(o,u,d){if(!ou(o.precondition,u))return void u.convertToUnknownDocument(d.version);const y=wl(o.fieldTransforms,u,d.transformResults),b=u.data;b.setAll(rh(o)),b.setAll(y),u.convertToFoundDocument(d.version,b).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uc(i,e,t){var u;i instanceof au?function(o,u,d){if(!ou(o.precondition,u))return;const y=o.value.clone(),b=ih(o.fieldTransforms,d,u);y.setAll(b),u.convertToFoundDocument(cc(u),y).setHasLocalMutations()}(i,e,t):i instanceof Ru?function(o,u,d){if(!ou(o.precondition,u))return;const y=ih(o.fieldTransforms,d,u),b=u.data;b.setAll(rh(o)),b.setAll(y),u.convertToFoundDocument(cc(u),b).setHasLocalMutations()}(i,e,t):ou(i.precondition,u=e)&&u.convertToNoDocument(qt.min())}function Rg(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=eh(o.transform,u||null);null!=d&&(null==t&&(t=z.empty()),t.set(o.field,d))}return t||null}function lc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&oo(t,o,(u,d)=>function Co(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof iu&&o instanceof iu||t instanceof Mu&&o instanceof Mu?oo(t.elements,o.elements,ao):t instanceof _l&&o instanceof _l?ao(t.k,o.k):t instanceof ru&&o instanceof ru);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function cc(i){return i.isFoundDocument()?i.version:qt.min()}class au extends El{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class Ru extends El{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}}function rh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function wl(i,e,t){const o=new Map;$(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],y=d.transform,b=e.data.field(d.field);o.set(d.field,kf(y,b,t[u]))}return o}function ih(i,e,t){const o=new Map;for(const u of i){const d=u.transform,y=t.data.field(u.field);o.set(u.field,Mg(d,y,e))}return o}class Il extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Dl extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class td{constructor(e){this.count=e}}var Ki,ur;function Cl(i){switch(i){default:return k();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function dc(i){if(void 0===i)return E("GRPC error has no .code"),se.UNKNOWN;switch(i){case Ki.OK:return se.OK;case Ki.CANCELLED:return se.CANCELLED;case Ki.UNKNOWN:return se.UNKNOWN;case Ki.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Ki.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Ki.INTERNAL:return se.INTERNAL;case Ki.UNAVAILABLE:return se.UNAVAILABLE;case Ki.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Ki.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Ki.NOT_FOUND:return se.NOT_FOUND;case Ki.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Ki.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Ki.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Ki.ABORTED:return se.ABORTED;case Ki.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Ki.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Ki.DATA_LOSS:return se.DATA_LOSS;default:return k()}}(ur=Ki||(Ki={}))[ur.OK=0]="OK",ur[ur.CANCELLED=1]="CANCELLED",ur[ur.UNKNOWN=2]="UNKNOWN",ur[ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ur[ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ur[ur.NOT_FOUND=5]="NOT_FOUND",ur[ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",ur[ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",ur[ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",ur[ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ur[ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ur[ur.ABORTED=10]="ABORTED",ur[ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",ur[ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",ur[ur.INTERNAL=13]="INTERNAL",ur[ur.UNAVAILABLE=14]="UNAVAILABLE",ur[ur.DATA_LOSS=15]="DATA_LOSS";class La{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Xa(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Yc(this.inner)}size(){return this.innerSize}}class Yn{constructor(e,t){this.comparator=e,this.root=t||Ss.EMPTY}insert(e,t){return new Yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ss.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bl(this.root,e,this.comparator,!0)}}class bl{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ss{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=null!=o?o:Ss.RED,this.left=null!=u?u:Ss.EMPTY,this.right=null!=d?d:Ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new Ss(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Ss.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw k();const e=this.left.check();if(e!==this.right.check())throw k();return e+(this.isRed()?0:1)}}Ss.EMPTY=null,Ss.RED=!0,Ss.BLACK=!1,Ss.EMPTY=new class{constructor(){this.size=0}get key(){throw k()}get value(){throw k()}get color(){throw k()}get left(){throw k()}get right(){throw k()}copy(i,e,t,o,u){return this}insert(i,e,t){return new Ss(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ri{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nd(this.data.getIterator())}getIteratorFrom(e){return new nd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof ri)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ri(this.comparator);return t.data=e,t}}class nd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ou(i){return i.hasNext()?i.getNext():void 0}const hc=new Yn(Mt.comparator);function bo(){return hc}const sh=new Yn(Mt.comparator);function rd(){return sh}function fc(){return new La(i=>i.toString(),(i,e)=>i.isEqual(e))}const Og=new Yn(Mt.comparator),Tl=new ri(Mt.comparator);function Pn(...i){let e=Tl;for(const t of i)e=e.add(t);return e}const Al=new ri(On);function uu(){return Al}class lu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,is.createSynthesizedTargetChangeForCurrentChange(e,t)),new lu(qt.min(),o,uu(),bo(),Pn())}}class is{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new is(Kn.EMPTY_BYTE_STRING,t,Pn(),Pn(),Pn())}}class Jo{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class pc{constructor(e,t){this.targetId=e,this.$=t}}class Xs{constructor(e,t,o=Kn.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class ku{constructor(){this.B=0,this.L=Sl(),this.U=Kn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Pn(),t=Pn(),o=Pn();return this.L.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:k()}}),new is(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=Sl()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class id{constructor(e){this.nt=e,this.st=new Map,this.it=bo(),this.rt=oh(),this.ot=new ri(On)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:k()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const d=u.target;if(Io(d))if(0===o){const y=new Mt(d.path);this.ct(t,y,Me.newNoDocument(y,qt.min()))}else $(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((d,y)=>{const b=this.wt(y);if(b){if(d.current&&Io(b.target)){const B=new Mt(b.target.path);null!==this.it.get(B)||this.It(y,B)||this.ct(y,B,Me.newNoDocument(B,e))}d.j&&(t.set(y,d.H()),d.J())}});let o=Pn();this.rt.forEach((d,y)=>{let b=!0;y.forEachWhile(B=>{const W=this.wt(B);return!W||2===W.purpose||(b=!1,!1)}),b&&(o=o.add(d))}),this.it.forEach((d,y)=>y.setReadTime(e));const u=new lu(e,t,this.ot,this.it,o);return this.it=bo(),this.rt=oh(),this.ot=new ri(On),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new ku,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new ri(On),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||I("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new ku),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function oh(){return new Yn(Mt.comparator)}function Sl(){return new Yn(Mt.comparator)}const sd={asc:"ASCENDING",desc:"DESCENDING"},ah={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class uh{constructor(e,t){this.databaseId=e,this.N=t}}function Ml(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $o(i,e){return i.N?e.toBase64():e.toUint8Array()}function lh(i,e){return Ml(i,e.toTimestamp())}function ws(i){return $(!!i),qt.fromTimestamp(function(e){const t=js(e);return new Li(t.seconds,t.nanos)}(i))}function xl(i,e){return(t=i,new fr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ch(i){const e=fr.fromString(i);return $(Dn(e)),e}function Pu(i,e){return xl(i.databaseId,e.path)}function oi(i,e){const t=ch(e);if(t.get(1)!==i.databaseId.projectId)throw new je(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new je(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Mt(ea(t))}function Rl(i,e){return xl(i.databaseId,e)}function gc(i){const e=ch(i);return 4===e.length?fr.emptyPath():ea(e)}function Ol(i){return new fr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ea(i){return $(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Nu(i,e,t){return{name:Pu(i,e),fields:t.value.mapValue.fields}}function mc(i,e,t){const o=oi(i,e.name),u=ws(e.updateTime),d=new z({mapValue:{fields:e.fields}}),y=Me.newFoundDocument(o,u,d);return t&&y.setHasCommittedMutations(),t?y.setHasCommittedMutations():y}function cu(i,e){let t;if(e instanceof au)t={update:Nu(i,e.key,e.value)};else if(e instanceof Il)t={delete:Pu(i,e.key)};else if(e instanceof Ru)t={update:Nu(i,e.key,e.data),updateMask:on(e.fieldMask)};else{if(!(e instanceof Dl))return k();t={verify:Pu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const y=d.transform;if(y instanceof ru)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof iu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Mu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof _l)return{fieldPath:d.field.canonicalString(),increment:y.k};throw k()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:lh(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:k()),t;var u}function od(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?zi.updateTime(ws(u.updateTime)):void 0!==u.exists?zi.exists(u.exists):zi.none():zi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,y){let b=null;"setToServerValue"in y?($("REQUEST_TIME"===y.setToServerValue),b=new ru):"appendMissingElements"in y?b=new iu(y.appendMissingElements.values||[]):"removeAllFromArray"in y?b=new Mu(y.removeAllFromArray.values||[]):"increment"in y?b=new _l(d,y.increment):k();const B=cs.fromServerFormat(y.fieldPath);return new xu(B,b)}(i,u)):[];var u;if(e.update){const u=oi(i,e.update.name),d=new z({mapValue:{fields:e.update.fields}});if(e.updateMask){const y=new Zs((e.updateMask.fieldPaths||[]).map(W=>cs.fromServerFormat(W)));return new Ru(u,d,y,t,o)}return new au(u,d,t,o)}if(e.delete){const u=oi(i,e.delete);return new Il(u,t)}if(e.verify){const u=oi(i,e.verify);return new Dl(u,t)}return k()}function hh(i,e){return{documents:[Rl(i,e.path)]}}function fh(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Rl(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Rl(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(B){if(0===B.length)return;const W=B.map(ue=>function(Ae){if("=="===Ae.op){if(Cu(Ae.value))return{unaryFilter:{field:J(Ae.field),op:"IS_NAN"}};if(Ys(Ae.value))return{unaryFilter:{field:J(Ae.field),op:"IS_NULL"}}}else if("!="===Ae.op){if(Cu(Ae.value))return{unaryFilter:{field:J(Ae.field),op:"IS_NOT_NAN"}};if(Ys(Ae.value))return{unaryFilter:{field:J(Ae.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:J(Ae.field),op:L(Ae.op),value:Ae.value}}}(ue));return 1===W.length?W[0]:{compositeFilter:{op:"AND",filters:W}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(B){if(0!==B.length)return B.map(W=>{return{field:J((ue=W).field),direction:w(ue.dir)};var ue})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const y=(W=e.limit,i.N||vs(W)?W:{value:W});var W,b,B;return null!==y&&(t.structuredQuery.limit=y),e.startAt&&(t.structuredQuery.startAt={before:(b=e.startAt).inclusive,values:b.position}),e.endAt&&(t.structuredQuery.endAt={before:!(B=e.endAt).inclusive,values:B.position}),t}function g(i){let e=gc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){$(1===o);const ue=t.from[0];ue.allDescendants?u=ue.collectionId:e=e.child(ue.collectionId)}let d=[];t.where&&(d=f(t.where));let y=[];t.orderBy&&(y=t.orderBy.map(ue=>{return new gl(Re((Ae=ue).field),function(Xe){switch(Xe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ae.direction));var Ae}));let b=null;t.limit&&(b=function(ue){let Ae;return Ae="object"==typeof ue?ue.value:ue,vs(Ae)?null:Ae}(t.limit));let B=null;var ue;t.startAt&&(B=new Bo((ue=t.startAt).values||[],!!ue.before));let W=null;return t.endAt&&(W=function(ue){return new Bo(ue.values||[],!ue.before)}(t.endAt)),ic(e,u,y,d,b,"F",B,W)}function f(i){return i?void 0!==i.unaryFilter?[Rt(i)]:void 0!==i.fieldFilter?[tt(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>f(e)).reduce((e,t)=>e.concat(t)):k():[]}function w(i){return sd[i]}function L(i){return ah[i]}function J(i){return{fieldPath:i.canonicalString()}}function Re(i){return cs.fromServerFormat(i.fieldPath)}function tt(i){return Ui.create(Re(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return k()}}(i.fieldFilter.op),i.fieldFilter.value)}function Rt(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Re(i.unaryFilter.field);return Ui.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Re(i.unaryFilter.field);return Ui.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Re(i.unaryFilter.field);return Ui.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Re(i.unaryFilter.field);return Ui.create(u,"!=",{nullValue:"NULL_VALUE"});default:return k()}}function on(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Dn(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Qt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=ho(e)),e=Oi(i.get(t),e);return ho(e)}function Oi(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function ho(i){return i+"\x01\x01"}function Js(i){const e=i.length;if($(e>=2),2===e)return $("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),fr.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const y=i.indexOf("\x01",d);switch((y<0||y>t)&&k(),i.charAt(y+1)){case"\x01":const b=i.substring(d,y);let B;0===u.length?B=b:(u+=b,B=u,u=""),o.push(B);break;case"\x10":u+=i.substring(d,y),u+="\0";break;case"\x11":u+=i.substring(d,y+1);break;default:k()}d=y+2}return new fr(o)}const kl=["userId","batchId"];function Va(i,e){return[i,Qt(e)]}function yc(i,e,t){return[i,Qt(e),t]}const Ff={},Ua=["prefixPath","collectionGroup","readTime","documentId"],_c=["prefixPath","collectionGroup","documentId"],ad=["collectionGroup","readTime","prefixPath","documentId"],ud=["canonicalId","targetId"],vc=["targetId","path"],Lf=["path","targetId"],ld=["collectionId","parent"],Vf=["indexId","uid"],My=["uid","sequenceNumber"],xy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ry=["indexId","uid","orderedDocumentKey"],kg=["userId","collectionPath","documentId"],Uf=["userId","collectionPath","largestBatchId"],Pg=["userId","collectionGroup","largestBatchId"],ph=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oy=[...ph,"documentOverlays"],Ng=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fg=[...Ng,"indexConfiguration","indexState","indexEntries"],Bf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&k(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rt((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof rt?t:rt.resolve(t)}catch(t){return rt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):rt.reject(t)}static resolve(e){return new rt((t,o)=>{t(e)})}static reject(e){return new rt((t,o)=>{o(e)})}static waitFor(e){return new rt((t,o)=>{let u=0,d=0,y=!1;e.forEach(b=>{++u,b.next(()=>{++d,y&&d===u&&t()},B=>o(B))}),y=!0,d===u&&t()})}static or(e){let t=rt.resolve(!1);for(const o of e)t=t.next(u=>u?rt.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}}class cd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new dn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new dd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=yh(o.target.error);this.At.reject(new dd(e,u))}}static open(e,t,o,u){try{return new cd(t,e.transaction(u,o))}catch(d){throw new dd(t,d)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lg(t)}}class ha{constructor(e,t,o){this.name=e,this.version=t,this.bt=o,12.2===ha.Vt((0,$e.z$)())&&E("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),Vu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,$e.hl)())return!1;if(ha.St())return!0;const e=(0,$e.z$)(),t=ha.Vt(e),o=0<t&&t<10,u=ha.Dt(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,U.Z)(function*(){return t.db||(I("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=y=>{o(y.target.result)},d.onblocked=()=>{u(new dd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=y=>{const b=y.target.error;u("VersionError"===b.name?new je(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new je(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new dd(e,b))},d.onupgradeneeded=y=>{I("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',y.oldVersion),t.bt.kt(y.target.result,d.transaction,y.oldVersion,t.version).next(()=>{I("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,U.Z)(function*(){const y="readonly"===t;let b=0;for(;;){++b;try{d.db=yield d.Nt(e);const B=cd.open(d.db,e,y?"readonly":"readwrite",o),W=u(B).next(ue=>(B.Pt(),ue)).catch(ue=>(B.abort(ue),rt.reject(ue))).toPromise();return W.catch(()=>{}),yield B.Rt,W}catch(B){const W="FirebaseError"!==B.name&&b<3;if(I("SimpleDb","Transaction failed with error:",B.message,"Retrying:",W),d.close(),!W)return Promise.reject(B)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gh{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Vu(this.Ft.delete())}}class dd extends je{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Lu(i){return"IndexedDbTransactionError"===i.name}class Lg{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(I("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Vu(o)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),Vu(this.store.add(e))}get(e){return Vu(this.store.get(e)).next(t=>(void 0===t&&(t=null),I("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),Vu(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),Vu(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.Kt(u,(y,b)=>{d.push(b)}).next(()=>d)}{const u=this.store.getAll(o.range);return new rt((d,y)=>{u.onerror=b=>{y(b.target.error)},u.onsuccess=b=>{d(b.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new rt((u,d)=>{o.onerror=y=>{d(y.target.error)},o.onsuccess=y=>{u(y.target.result)}})}Qt(e,t){I("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Kt(u,(d,y,b)=>b.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Kt(u,t)}zt(e){const t=this.cursor({});return new rt((o,u)=>{t.onerror=d=>{const y=yh(d.target.error);u(y)},t.onsuccess=d=>{const y=d.target.result;y?e(y.primaryKey,y.value).next(b=>{b?y.continue():o()}):o()}})}Kt(e,t){const o=[];return new rt((u,d)=>{e.onerror=y=>{d(y.target.error)},e.onsuccess=y=>{const b=y.target.result;if(!b)return void u();const B=new gh(b),W=t(b.primaryKey,b.value,B);if(W instanceof rt){const ue=W.catch(Ae=>(B.done(),rt.reject(Ae)));o.push(ue)}B.isDone?u():null===B.Lt?b.continue():b.continue(B.Lt)}}).next(()=>rt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vu(i){return new rt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=yh(o.target.error);t(u)}})}let mh=!1;function yh(i){const e=ha.Vt((0,$e.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mh||(mh=!0,setTimeout(()=>{throw o},0)),o}}return i}class hd extends Fu{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ds(i,e){const t=te(i);return ha.xt(t.Ht,e)}class _h{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&xg(d,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&uc(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&uc(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(qt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pn())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(t,o)=>lc(t,o))&&oo(this.baseMutations,e.baseMutations,(t,o)=>lc(t,o))}}class fd{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){$(e.mutations.length===o.length);let u=Og;const d=e.mutations;for(let y=0;y<d.length;y++)u=u.insert(d[y].key,o[y].version);return new fd(e,t,o,u)}}class vh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ba{constructor(e,t,o,u,d=qt.min(),y=qt.min(),b=Kn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=b}withSequenceNumber(e){return new Ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ec{constructor(e){this.Jt=e}}function jf(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Eh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Pu(u=i.Jt,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Ml(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Pl(e.version)};else{if(!e.isUnknownDocument())return k();o.unknownDocument={path:t.path.toArray(),version:Pl(e.version)}}var u,d;return o}function Eh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Pl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uu(i){const e=new Li(i.seconds,i.nanoseconds);return qt.fromTimestamp(e)}function Bu(i,e){const t=(e.baseMutations||[]).map(d=>od(i.Jt,d));for(let d=0;d<e.mutations.length-1;++d){const y=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(y.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>od(i.Jt,d)),u=Li.fromMillis(e.localWriteTimeMs);return new _h(e.batchId,u,t,o)}function wc(i){const e=Uu(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Uu(i.lastLimboFreeSnapshotVersion):qt.min();let o;var u;return void 0!==i.query.documents?($(1===(u=i.query).documents.length),o=co(jo(gc(u.documents[0])))):o=co(g(i.query)),new Ba(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Kn.fromBase64String(i.resumeToken))}function Py(i,e){const t=Pl(e.snapshotVersion),o=Pl(e.lastLimboFreeSnapshotVersion);let u;u=Io(e.target)?hh(i.Jt,e.target):fh(i.Jt,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Es(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function wh(i){const e=g({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?oc(e,e.limit,"L"):e}function $f(i,e){return new vh(e.largestBatchId,od(i.Jt,e.overlayMutation))}function Hf(i,e){const t=e.path.lastSegment();return[i,Qt(e.path.popLast()),t]}class Ny{getBundleMetadata(e,t){return Vg(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Uu(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Vg(e).put({bundleId:(o=t).id,createTime:Pl(ws(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return ta(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:wh(u.bundledQuery),readTime:Uu(u.readTime)};var u})}saveNamedQuery(e,t){return ta(e).put({name:(o=t).name,readTime:Pl(ws(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Vg(i){return ds(i,"bundles")}function ta(i){return ds(i,"namedQueries")}class Gf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Gf(e,t.uid||"")}getOverlay(e,t){return Ic(e).get(Hf(this.userId,t)).next(o=>o?$f(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((d,y)=>{const b=new vh(t,y);u.push(this.Xt(e,b))}),rt.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(y=>u.add(Qt(y.getCollectionPath())));const d=[];return u.forEach(y=>{const b=IDBKeyRange.bound([this.userId,y,o],[this.userId,y,o+1],!1,!0);d.push(Ic(e).Qt("collectionPathOverlayIndex",b))}),rt.waitFor(d)}getOverlaysForCollection(e,t,o){const u=fc(),d=Qt(t),y=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Ic(e).qt("collectionPathOverlayIndex",y).next(b=>{for(const B of b){const W=$f(this.M,B);u.set(W.getKey(),W)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=fc();let y;const b=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ic(e).Wt({index:"collectionGroupOverlayIndex",range:b},(B,W,ue)=>{const Ae=$f(this.M,W);d.size()<u||Ae.largestBatchId===y?(d.set(Ae.getKey(),Ae),y=Ae.largestBatchId):ue.done()}).next(()=>d)}Xt(e,t){return Ic(e).put(function(o,u,d){const[y,b,B]=Hf(u,d.mutation.key);return{userId:u,collectionPath:b,documentId:B,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:cu(o.Jt,d.mutation)}}(this.M,this.userId,t))}}function Ic(i){return ds(i,"documentOverlays")}class Nl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ri(e.integerValue));else if("doubleValue"in e){const o=Ri(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),Fo(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(No(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?Qo(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):k()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),Mt.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Fy(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ug(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=Fy(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}Nl.fe=new Nl;class Ly{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Bg{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Vy{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class pd{constructor(){this.De=new Ly,this.Ce=new Bg(this.De),this.xe=new Vy(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ju{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new ju(this.indexId,this.documentKey,this.arrayValue,o)}}function Sn(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Wf(i.arrayValue,e.arrayValue),0!==t?t:(t=Wf(i.directionalValue,e.directionalValue),0!==t?t:Mt.comparator(i.documentKey,e.documentKey)))}function Wf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class jg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=vt(e);if(void 0!==t&&!this.Be(t))return!1;const o=Gt(e);let u=0,d=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const y=o[u];if(!this.Le(this.Fe,y)||!this.Ue(this.Me[d++],y))return!1;++u}for(;u<o.length;++u){const y=o[u];if(d>=this.Me.length||!this.Ue(this.Me[d++],y))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class $g{constructor(){this.qe=new Dc}addToCollectionParentIndex(e,t){return this.qe.add(t),rt.resolve()}getCollectionParents(e,t){return rt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return rt.resolve()}deleteFieldIndex(e,t){return rt.resolve()}getDocumentsMatchingTarget(e,t){return rt.resolve(null)}getFieldIndex(e,t){return rt.resolve(null)}getFieldIndexes(e,t){return rt.resolve([])}getNextCollectionGroupToUpdate(e){return rt.resolve(null)}updateCollectionGroup(e,t,o){return rt.resolve()}updateIndexEntries(e,t){return rt.resolve()}}class Dc{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new ri(fr.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new ri(fr.comparator)).toArray()}}const eo=new Uint8Array(0);class Hg{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Dc,this.Ge=new La(o=>Es(o),(o,u)=>Qs(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const d={collectionId:o,parent:Qt(u)};return Gg(e).put(d)}return rt.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[Qa(t),""],!1,!0);return Gg(e).qt(u).next(d=>{for(const y of d){if(y.collectionId!==t)break;o.push(Js(y.parent))}return o})}addFieldIndex(e,t){const o=na(e),u={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var d;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=na(e),u=Cc(e),d=Fl(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Fl(e);let u=!0;const d=new Map;return rt.forEach(this.Qe(t),y=>this.getFieldIndex(e,y).next(b=>{u&&(u=!!b),d.set(y,b)})).next(()=>{if(u){let y=Pn();const b=[];return rt.forEach(d,(B,W)=>{var ue;I("IndexedDbIndexManager",`Using index ${ue=B,`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map(ai=>`${ai.fieldPath}:${ai.kind}`).join(",")}`} to execute ${Es(t)}`);const Ae=function(ai,Ds){const Pi=vt(Ds);if(void 0===Pi)return null;for(const Zi of hl(ai,Pi.fieldPath))switch(Zi.op){case"array-contains-any":return Zi.value.arrayValue.values||[];case"array-contains":return[Zi.value]}return null}(W,B),Xe=function(ai,Ds){const Pi=new Map;for(const Zi of Gt(Ds))for(const io of hl(ai,Zi.fieldPath))switch(io.op){case"==":case"in":Pi.set(Zi.fieldPath.canonicalString(),io.value);break;case"not-in":case"!=":return Pi.set(Zi.fieldPath.canonicalString(),io.value),Array.from(Pi.values())}return null}(W,B),dt=function(ai,Ds){const Pi=[];let Zi=!0;for(const io of Gt(Ds)){const sl=0===io.kind?Qc(ai,io.fieldPath,ai.startAt):fl(ai,io.fieldPath,ai.startAt);if(!sl.value)return null;Pi.push(sl.value),Zi&&(Zi=sl.inclusive)}return new Bo(Pi,Zi)}(W,B),ht=function(ai,Ds){const Pi=[];let Zi=!0;for(const io of Gt(Ds)){const sl=0===io.kind?fl(ai,io.fieldPath,ai.endAt):Qc(ai,io.fieldPath,ai.endAt);if(!sl.value)return null;Pi.push(sl.value),Zi&&(Zi=sl.inclusive)}return new Bo(Pi,Zi)}(W,B),tn=this.je(B,W,dt),Fn=this.je(B,W,ht),Ei=this.We(B,W,Xe),ki=this.ze(B.indexId,Ae,tn,!!dt&&dt.inclusive,Fn,!!ht&&ht.inclusive,Ei);return rt.forEach(ki,ai=>o.Gt(ai,t.limit).next(Ds=>{Ds.forEach(Pi=>{const Zi=Mt.fromSegments(Pi.documentKey);y.has(Zi)||(y=y.add(Zi),b.push(Zi))})}))}).next(()=>b)}return rt.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,o,u,d,y,b){const B=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=d?d.length:1),W=B/(null!=t?t.length:1),ue=[];for(let Ae=0;Ae<B;++Ae){const Xe=t?this.He(t[Ae/W]):eo,dt=o?this.Je(e,Xe,o[Ae%W],u):this.Ye(e),ht=d?this.Xe(e,Xe,d[Ae%W],y):this.Ye(e+1);ue.push(...this.createRange(dt,ht,b.map(tn=>this.Je(e,Xe,tn,!0))))}return ue}Je(e,t,o,u){const d=new ju(e,Mt.empty(),t,o);return u?d:d.ke()}Xe(e,t,o,u){const d=new ju(e,Mt.empty(),t,o);return u?d.ke():d}Ye(e){return new ju(e,Mt.empty(),eo,eo)}getFieldIndex(e,t){const o=new jg(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{const y=d.filter(b=>o.$e(b));return y.sort((b,B)=>B.fields.length-b.fields.length),y.length>0?y[0]:null})}Ze(e,t){const o=new pd;for(const u of Gt(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const y=o.Ne(u.kind);Nl.fe.Zt(d,y)}return o.Se()}He(e){const t=new pd;return Nl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new pd;return Nl.fe.Zt(Uo(this.databaseId,t),o.Ne(function(u){const d=Gt(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.Se()}We(e,t,o){if(null===o)return[];let u=[];u.push(new pd);let d=0;for(const y of Gt(e)){const b=o[d++];for(const B of u)if(this.en(t,y.fieldPath)&&Ja(b))u=this.nn(u,y,b);else{const W=B.Ne(y.kind);Nl.fe.Zt(b,W)}}return this.sn(u)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const u=[...e],d=[];for(const y of o.arrayValue.values||[])for(const b of u){const B=new pd;B.seed(b.Se()),Nl.fe.Zt(y,B.Ne(t.kind)),d.push(B)}return d}en(e,t){return!!e.filters.find(o=>o instanceof Ui&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=na(e),u=Cc(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(d=>{const y=[];return rt.forEach(d,b=>u.get([b.indexId,this.uid]).next(B=>{y.push(function(W,ue){const Ae=ue?new In(ue.sequenceNumber,new Yr(Uu(ue.readTime),new Mt(Js(ue.documentKey)),ue.largestBatchId)):In.empty(),Xe=W.fields.map(([dt,ht])=>new rn(cs.fromServerFormat(dt),ht));return new Ye(W.indexId,W.collectionGroup,Xe,Ae)}(b,B))})).next(()=>y)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:On(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=na(e),d=Cc(e);return this.rn(e).next(y=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(b=>rt.forEach(b,B=>{return d.put({indexId:B.indexId,uid:this.user.uid||"",sequenceNumber:y,readTime:Pl((Xe=o).readTime),documentKey:Qt(Xe.documentKey.path),largestBatchId:Xe.largestBatchId});var Xe})))}updateIndexEntries(e,t){const o=new Map;return rt.forEach(t,(u,d)=>{const y=o.get(u.collectionGroup);return(y?rt.resolve(y):this.getFieldIndexes(e,u.collectionGroup)).next(b=>(o.set(u.collectionGroup,b),rt.forEach(b,B=>this.on(e,u,B).next(W=>{const ue=this.un(d,B);return W.isEqual(ue)?rt.resolve():this.an(e,d,B,W,ue)}))))})}cn(e,t,o,u){return Fl(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,u){return Fl(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const u=Fl(e);let d=new ri(Sn);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(y,b)=>{d=d.add(new ju(o.indexId,t,b.arrayValue,b.directionalValue))}).next(()=>d)}un(e,t){let o=new ri(Sn);const u=this.Ze(t,e);if(null==u)return o;const d=vt(t);if(null!=d){const y=e.data.field(d.fieldPath);if(Ja(y))for(const b of y.arrayValue.values||[])o=o.add(new ju(t.indexId,e.key,this.He(b),u))}else o=o.add(new ju(t.indexId,e.key,eo,u));return o}an(e,t,o,u,d){I("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const y=[];return function(b,B,W,ue,Ae){const Xe=b.getIterator(),dt=B.getIterator();let ht=Ou(Xe),tn=Ou(dt);for(;ht||tn;){let Fn=!1,Ei=!1;if(ht&&tn){const ki=W(ht,tn);ki<0?Ei=!0:ki>0&&(Fn=!0)}else null!=ht?Ei=!0:Fn=!0;Fn?(ue(tn),tn=Ou(dt)):Ei?(Ae(ht),ht=Ou(Xe)):(ht=Ou(Xe),tn=Ou(dt))}}(u,d,Sn,b=>{y.push(this.cn(e,t,o,b))},b=>{y.push(this.hn(e,t,o,b))}),rt.waitFor(y)}rn(e){let t=1;return Cc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((y,b)=>Sn(y,b)).filter((y,b,B)=>!b||0!==Sn(y,B[b-1]));const u=[];u.push(e);for(const y of o){const b=Sn(y,e),B=Sn(y,t);if(0===b)u[0]=e.ke();else if(b>0&&B<0)u.push(y),u.push(y.ke());else if(B>0)break}u.push(t);const d=[];for(let y=0;y<u.length;y+=2)d.push(IDBKeyRange.bound([u[y].indexId,this.uid,u[y].arrayValue,u[y].directionalValue,eo,[]],[u[y+1].indexId,this.uid,u[y+1].arrayValue,u[y+1].directionalValue,eo,[]]));return d}}function Gg(i){return ds(i,"collectionParents")}function Fl(i){return ds(i,"indexEntries")}function na(i){return ds(i,"indexConfiguration")}function Cc(i){return ds(i,"indexState")}const zf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class to{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new to(e,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Uy(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],y=IDBKeyRange.only(t.batchId);let b=0;const B=o.Wt({range:y},(ue,Ae,Xe)=>(b++,Xe.delete()));d.push(B.next(()=>{$(1===b)}));const W=[];for(const ue of t.mutations){const Ae=yc(e,ue.key.path,t.batchId);d.push(u.delete(Ae)),W.push(ue.key)}return rt.waitFor(d).next(()=>W)}function gd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw k();e=i.noDocument}return JSON.stringify(e).length}to.DEFAULT_COLLECTION_PERCENTILE=10,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,to.DEFAULT=new to(41943040,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),to.DISABLED=new to(-1,0,0);class Wg{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.ln={}}static Yt(e,t,o,u){$(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Wg(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fa(e).Wt({index:"userMutationsIndex",range:o},(u,d,y)=>{t=!1,y.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=$u(e),y=fa(e);return y.add({}).next(b=>{$("number"==typeof b);const B=new _h(b,t,o,u),W=function(Xe,dt,ht){const tn=ht.baseMutations.map(Ei=>cu(Xe.Jt,Ei)),Fn=ht.mutations.map(Ei=>cu(Xe.Jt,Ei));return{userId:dt,batchId:ht.batchId,localWriteTimeMs:ht.localWriteTime.toMillis(),baseMutations:tn,mutations:Fn}}(this.M,this.userId,B),ue=[];let Ae=new ri((Xe,dt)=>On(Xe.canonicalString(),dt.canonicalString()));for(const Xe of u){const dt=yc(this.userId,Xe.key.path,b);Ae=Ae.add(Xe.key.path.popLast()),ue.push(y.put(W)),ue.push(d.put(dt,Ff))}return Ae.forEach(Xe=>{ue.push(this.indexManager.addToCollectionParentIndex(e,Xe))}),e.addOnCommittedListener(()=>{this.ln[b]=B.keys()}),rt.waitFor(ue).next(()=>B)})}lookupMutationBatch(e,t){return fa(e).get(t).next(o=>o?($(o.userId===this.userId),Bu(this.M,o)):null)}fn(e,t){return this.ln[t]?rt.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.ln[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return fa(e).Wt({index:"userMutationsIndex",range:u},(y,b,B)=>{b.userId===this.userId&&($(b.batchId>=o),d=Bu(this.M,b)),B.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return fa(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,d,y)=>{o=d.batchId,y.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fa(e).qt("userMutationsIndex",t).next(o=>o.map(u=>Bu(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Va(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return $u(e).Wt({range:u},(y,b,B)=>{const[W,ue,Ae]=y,Xe=Js(ue);if(W===this.userId&&t.path.isEqual(Xe))return fa(e).get(Ae).next(dt=>{if(!dt)throw k();$(dt.userId===this.userId),d.push(Bu(this.M,dt))});B.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new ri(On);const u=[];return t.forEach(d=>{const y=Va(this.userId,d.path),b=IDBKeyRange.lowerBound(y),B=$u(e).Wt({range:b},(W,ue,Ae)=>{const[Xe,dt,ht]=W,tn=Js(dt);Xe===this.userId&&d.path.isEqual(tn)?o=o.add(ht):Ae.done()});u.push(B)}),rt.waitFor(u).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=Va(this.userId,o),y=IDBKeyRange.lowerBound(d);let b=new ri(On);return $u(e).Wt({range:y},(B,W,ue)=>{const[Ae,Xe,dt]=B,ht=Js(Xe);Ae===this.userId&&o.isPrefixOf(ht)?ht.length===u&&(b=b.add(dt)):ue.done()}).next(()=>this.dn(e,b))}dn(e,t){const o=[],u=[];return t.forEach(d=>{u.push(fa(e).get(d).next(y=>{if(null===y)throw k();$(y.userId===this.userId),o.push(Bu(this.M,y))}))}),rt.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Uy(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),rt.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return rt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return $u(e).Wt({range:o},(d,y,b)=>{if(d[0]===this.userId){const B=Js(d[1]);u.push(B)}else b.done()}).next(()=>{$(0===u.length)})})}containsKey(e,t){return md(e,this.userId,t)}wn(e){return Ih(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function md(i,e,t){const o=Va(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let y=!1;return $u(i).Wt({range:d,jt:!0},(b,B,W)=>{const[ue,Ae,Xe]=b;ue===e&&Ae===u&&(y=!0),W.done()}).next(()=>y)}function fa(i){return ds(i,"mutations")}function $u(i){return ds(i,"documentMutations")}function Ih(i){return ds(i,"mutationQueues")}class du{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new du(0)}static yn(){return new du(-1)}}class jv{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new du(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>qt.fromTimestamp(new Li(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.In(e,u)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bc(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>($(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return bc(e).Wt((y,b)=>{const B=wc(b);B.sequenceNumber<=t&&null===o.get(B.targetId)&&(u++,d.push(this.removeTargetData(e,B)))}).next(()=>rt.waitFor(d)).next(()=>u)}forEachTarget(e,t){return bc(e).Wt((o,u)=>{const d=wc(u);t(d)})}pn(e){return zg(e).get("targetGlobalKey").next(t=>($(null!==t),t))}In(e,t){return zg(e).put("targetGlobalKey",t)}Tn(e,t){return bc(e).put(Py(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Es(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return bc(e).Wt({range:u,index:"queryTargetsIndex"},(y,b,B)=>{const W=wc(b);Qs(t,W.target)&&(d=W,B.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=Hu(e);return t.forEach(y=>{const b=Qt(y.path);u.push(d.put({targetId:o,path:b})),u.push(this.referenceDelegate.addReference(e,o,y))}),rt.waitFor(u)}removeMatchingKeys(e,t,o){const u=Hu(e);return rt.forEach(t,d=>{const y=Qt(d.path);return rt.waitFor([u.delete([o,y]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=Hu(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Hu(e);let d=Pn();return u.Wt({range:o,jt:!0},(y,b,B)=>{const W=Js(y[1]),ue=new Mt(W);d=d.add(ue)}).next(()=>d)}containsKey(e,t){const o=Qt(t.path),u=IDBKeyRange.bound([o],[Qa(o)],!1,!0);let d=0;return Hu(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([y,b],B,W)=>{0!==y&&(d++,W.done())}).next(()=>d>0)}Et(e,t){return bc(e).get(t).next(o=>o?wc(o):null)}}function bc(i){return ds(i,"targets")}function zg(i){return ds(i,"targetGlobal")}function Hu(i){return ds(i,"targetDocuments")}function Ll(i){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,U.Z)(function*(i){if(i.code!==se.FAILED_PRECONDITION||i.message!==Bf)throw i;I("LocalStore","Unexpectedly lost primary lease")}),Dh.apply(this,arguments)}function By([i,e],[t,o]){const u=On(i,t);return 0===u?On(e,o):u}class jy{constructor(e){this.An=e,this.buffer=new ri(By),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();By(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $v{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;I("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,U.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){Lu(u)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Ll(u)}yield t.Sn(e)}))}}class Kg{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return rt.resolve(ns.A);const o=new jy(t);return this.Dn.forEachTarget(e,u=>o.bn(u.sequenceNumber)).next(()=>this.Dn.xn(e,u=>o.bn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(zf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zf):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,u,d,y,b,B,W;const ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ae=>(Ae>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ae}`),u=this.params.maximumSequenceNumbersToCollect):u=Ae,y=Date.now(),this.nthSequenceNumber(e,u))).next(Ae=>(o=Ae,b=Date.now(),this.removeTargets(e,o,t))).next(Ae=>(d=Ae,B=Date.now(),this.removeOrphanedDocuments(e,o))).next(Ae=>(W=Date.now(),yo()<=Ve.in.DEBUG&&I("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${y-ue}ms\n\tDetermined least recently used ${u} in `+(b-y)+`ms\n\tRemoved ${d} targets in `+(B-b)+`ms\n\tRemoved ${Ae} documents in `+(W-B)+`ms\nTotal Duration: ${W-ue}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:Ae})))}}class qg{constructor(e,t){this.db=e,this.garbageCollector=new Kg(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,u)=>t(u))}addReference(e,t,o){return Ch(e,o)}removeReference(e,t,o){return Ch(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Ch(e,t)}On(e,t){return function(o,u){let d=!1;return Ih(o).zt(y=>md(o,y,u).next(b=>(b&&(d=!0),rt.resolve(!b)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Mn(e,(y,b)=>{if(b<=t){const B=this.On(e,y).next(W=>{if(!W)return d++,o.getEntry(e,y).next(()=>(o.removeEntry(y,qt.min()),Hu(e).delete([0,Qt(y.path)])))});u.push(B)}}).next(()=>rt.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Ch(e,t)}Mn(e,t){const o=Hu(e);let u,d=ns.A;return o.Wt({index:"documentTargetsIndex"},([y,b],{path:B,sequenceNumber:W})=>{0===y?(d!==ns.A&&t(new Mt(Js(u)),d),d=W,u=B):d=ns.A}).next(()=>{d!==ns.A&&t(new Mt(Js(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ch(i,e){return Hu(i).put((o=i.currentSequenceNumber,{targetId:0,path:Qt(e.path),sequenceNumber:o}));var o}class bh{constructor(){this.changes=new La(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?rt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hv{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Tc(e).put(o)}removeEntry(e,t,o){return Tc(e).delete(function(u,d){const y=u.path.toArray();return[y.slice(0,y.length-2),y[y.length-2],Eh(d),y[y.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=Me.newInvalidDocument(t);return Tc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Th(t))},(u,d)=>{o=this.$n(t,d)}).next(()=>o)}Bn(e,t){let o={size:0,document:Me.newInvalidDocument(t)};return Tc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Th(t))},(u,d)=>{o={document:this.$n(t,d),size:gd(d)}}).next(()=>o)}getEntries(e,t){let o=bo();return this.Ln(e,t,(u,d)=>{const y=this.$n(u,d);o=o.insert(u,y)}).next(()=>o)}Un(e,t){let o=bo(),u=new Yn(Mt.comparator);return this.Ln(e,t,(d,y)=>{const b=this.$n(d,y);o=o.insert(d,b),u=u.insert(d,gd(y))}).next(()=>({documents:o,qn:u}))}Ln(e,t,o){if(t.isEmpty())return rt.resolve();let u=new ri(Gy);t.forEach(B=>u=u.add(B));const d=IDBKeyRange.bound(Th(u.first()),Th(u.last())),y=u.getIterator();let b=y.getNext();return Tc(e).Wt({index:"documentKeyIndex",range:d},(B,W,ue)=>{const Ae=Mt.fromSegments([...W.prefixPath,W.collectionGroup,W.documentId]);for(;b&&Gy(b,Ae)<0;)o(b,null),b=y.getNext();b&&b.isEqual(Ae)&&(o(b,W),b=y.hasNext()?y.getNext():null),b?ue.Ut(Th(b)):ue.done()}).next(()=>{for(;b;)o(b,null),b=y.hasNext()?y.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),Eh(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tc(e).qt(IDBKeyRange.bound(u,d,!0)).next(y=>{let b=bo();for(const B of y){const W=this.$n(Mt.fromSegments(B.prefixPath.concat(B.collectionGroup,B.documentId)),B);b=b.insert(W.key,W)}return b})}getAllFromCollectionGroup(e,t,o,u){let d=bo();const y=Hy(t,o),b=Hy(t,Yr.max());return Tc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(y,b,!0)},(B,W,ue)=>{const Ae=this.$n(Mt.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);d=d.insert(Ae.key,Ae),d.size===u&&ue.done()}).next(()=>d)}newChangeBuffer(e){return new Gv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $y(e).get("remoteDocumentGlobalKey").next(t=>($(!!t),t))}Fn(e,t){return $y(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function ky(i,e){let t;if(e.document)t=mc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Mt.fromSegments(e.noDocument.path),u=Uu(e.noDocument.readTime);t=Me.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return k();{const o=Mt.fromSegments(e.unknownDocument.path),u=Uu(e.unknownDocument.version);t=Me.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Li(o[0],o[1]);return qt.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(qt.min()))return o}return Me.newInvalidDocument(e)}}class Gv extends bh{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new La(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new ri((d,y)=>On(d.canonicalString(),y.canonicalString()));return this.changes.forEach((d,y)=>{const b=this.Gn.get(d);if(t.push(this.Kn.removeEntry(e,d,b.readTime)),y.isValidDocument()){const B=jf(this.Kn.M,y);u=u.add(d.path.popLast()),o+=gd(B)-b.size,t.push(this.Kn.addEntry(e,d,B))}else if(o-=b.size,this.trackRemovals){const B=jf(this.Kn.M,y.convertToNoDocument(qt.min()));t.push(this.Kn.addEntry(e,d,B))}}),u.forEach(d=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Kn.updateMetadata(e,o)),rt.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:u})=>(u.forEach((d,y)=>{this.Gn.set(d,{size:y,readTime:o.get(d).readTime})}),o))}}function $y(i){return ds(i,"remoteDocumentGlobal")}function Tc(i){return ds(i,"remoteDocumentsV14")}function Th(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Hy(i,e){const t=e.documentKey.path.toArray();return[i,Eh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gy(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=On(t[d],o[d]),u)return u;return u=On(t.length,o.length),u||(u=On(t[t.length-2],o[o.length-2]),u||On(t[t.length-1],o[o.length-1]))}class Wv{constructor(e){this.M=e}kt(e,t,o,u){const d=new cd("createOrUpgrade",t);var b;o<1&&u>=1&&(e.createObjectStore("owner"),(b=e).createObjectStore("mutationQueues",{keyPath:"userId"}),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kl,{unique:!0}),b.createObjectStore("documentMutations"),Wy(e),function(b){b.createObjectStore("remoteDocuments")}(e));let y=rt.resolve();return o<3&&u>=3&&(0!==o&&(function(b){b.deleteObjectStore("targetDocuments"),b.deleteObjectStore("targets"),b.deleteObjectStore("targetGlobal")}(e),Wy(e)),y=y.next(()=>function(b){const B=b.store("targetGlobal"),W={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qt.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",W)}(d))),o<4&&u>=4&&(0!==o&&(y=y.next(()=>function(b,B){return B.store("mutations").qt().next(W=>{b.deleteObjectStore("mutations"),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kl,{unique:!0});const ue=B.store("mutations"),Ae=W.map(Xe=>ue.put(Xe));return rt.waitFor(Ae)})}(e,d))),y=y.next(()=>{!function(b){b.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(y=y.next(()=>this.Qn(d))),o<6&&u>=6&&(y=y.next(()=>(function(b){b.createObjectStore("remoteDocumentGlobal")}(e),this.jn(d)))),o<7&&u>=7&&(y=y.next(()=>this.Wn(d))),o<8&&u>=8&&(y=y.next(()=>this.zn(e,d))),o<9&&u>=9&&(y=y.next(()=>{!function(b){b.objectStoreNames.contains("remoteDocumentChanges")&&b.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(y=y.next(()=>this.Hn(d))),o<11&&u>=11&&(y=y.next(()=>{(function(b){b.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(b){b.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(y=y.next(()=>{!function(b){const B=b.createObjectStore("documentOverlays",{keyPath:kg});B.createIndex("collectionPathOverlayIndex",Uf,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",Pg,{unique:!1})}(e)})),o<13&&u>=13&&(y=y.next(()=>function(b){const B=b.createObjectStore("remoteDocumentsV14",{keyPath:Ua});B.createIndex("documentKeyIndex",_c),B.createIndex("collectionGroupIndex",ad)}(e)).next(()=>this.Jn(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(y=y.next(()=>{!function(b){b.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),b.createObjectStore("indexState",{keyPath:Vf}).createIndex("sequenceNumberIndex",My,{unique:!1}),b.createObjectStore("indexEntries",{keyPath:xy}).createIndex("documentKeyIndex",Ry,{unique:!1})}(e)})),y}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=gd(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>rt.forEach(u,d=>{const y=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",y).next(b=>rt.forEach(b,B=>{$(B.userId===d.userId);const W=Bu(this.M,B);return Uy(e,d.userId,W).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Wt((y,b)=>{const B=new fr(y),W=[0,Qt(B)];d.push(t.get(W).next(ue=>ue?rt.resolve():t.put({targetId:0,path:Qt(B),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>rt.waitFor(d))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:ld});const o=t.store("collectionParents"),u=new Dc,d=y=>{if(u.add(y)){const b=y.lastSegment(),B=y.popLast();return o.put({collectionId:b,parent:Qt(B)})}};return t.store("remoteDocuments").Wt({jt:!0},(y,b)=>{const B=new fr(y);return d(B.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([y,b,B],W)=>{const ue=Js(b);return d(ue.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,u)=>{const d=wc(u),y=Py(this.M,d);return t.put(y)})}Jn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((d,y)=>{const b=t.store("remoteDocumentsV14"),B=(W=y,W.document?new Mt(fr.fromString(W.document.name).popFirst(5)):W.noDocument?Mt.fromSegments(W.noDocument.path):W.unknownDocument?Mt.fromSegments(W.unknownDocument.path):k()).path.toArray();var W;const ue={prefixPath:B.slice(0,B.length-2),collectionGroup:B[B.length-2],documentId:B[B.length-1],readTime:y.readTime||[0,0],unknownDocument:y.unknownDocument,noDocument:y.noDocument,document:y.document,hasCommittedMutations:!!y.hasCommittedMutations};u.push(b.put(ue))}).next(()=>rt.waitFor(u))}}function Wy(i){i.createObjectStore("targetDocuments",{keyPath:vc}).createIndex("documentTargetsIndex",Lf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ud,{unique:!0}),i.createObjectStore("targetGlobal")}const Zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ja{constructor(e,t,o,u,d,y,b,B,W,ue,Ae=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=d,this.window=y,this.document=b,this.Xn=W,this.Zn=ue,this.ts=Ae,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=Xe=>Promise.resolve(),!ja.vt())throw new je(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qg(this,u),this.hs=t+"main",this.M=new Ec(B),this.ls=new ha(this.hs,this.ts,new Wv(this.M)),this.fs=new jv(this.referenceDelegate,this.M),this.ds=new Hv(this.M),this._s=new Ny,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===ue&&E("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new je(se.FAILED_PRECONDITION,Zg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ns(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,U.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,U.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,U.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ah(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Lu(e))return I("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Vl(e).get("owner").next(t=>rt.resolve(this.bs(t)))}Vs(e){return Ah(e).delete(this.clientId)}vs(){var e=this;return(0,U.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=ds(o,"clientMetadata");return u.qt().next(d=>{const y=e.Ds(d,18e5),b=d.filter(B=>-1===y.indexOf(B));return rt.forEach(b,B=>u.delete(B.clientId)).next(()=>b)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?rt.resolve(!0):Vl(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new je(se.FAILED_PRECONDITION,Zg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ah(e).qt().next(o=>void 0===this.Ds(o,5e3).find(u=>{if(this.clientId!==u.clientId){const y=!this.inForeground&&u.inForeground,b=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||y&&b)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&I("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,U.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new hd(t,ns.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Ah(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Wg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Hg(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Gf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){I("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=14===(y=this.ts)?Fg:13===y?Ng:12===y?Oy:11===y?ph:void k();var y;let b;return this.ls.runTransaction(e,u,d,B=>(b=new hd(B,this.es?this.es.next():ns.A),"readwrite-primary"===t?this.Es(b).next(W=>!!W||this.As(b)).next(W=>{if(!W)throw E(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new je(se.FAILED_PRECONDITION,Bf);return o(b)}).next(W=>this.Ps(b).next(()=>W)):this.$s(b).next(()=>o(b)))).then(B=>(b.raiseOnCommittedEvent(),B))}$s(e){return Vl(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new je(se.FAILED_PRECONDITION,Zg)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vl(e).put("owner",t)}static vt(){return ha.vt()}Rs(e){const t=Vl(e);return t.get("owner").next(o=>this.bs(o)?(I("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):rt.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(E(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,$e.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return I("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return E("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){E("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vl(i){return ds(i,"owner")}function Ah(i){return ds(i,"clientMetadata")}function Sh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Kf{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(u=>{for(const d of o)d.applyToLocalView(u);return u})}qs(e,t){e.forEach((o,u)=>{for(const d of t)d.applyToLocalView(u)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return Mt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.js(e,t.path):ml(t)?this.Ws(e,t,o):this.zs(e,t,o);var u}js(e,t){return this.Ls(e,new Mt(t)).next(o=>{let u=rd();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}Ws(e,t,o){const u=t.collectionGroup;let d=rd();return this.indexManager.getCollectionParents(e,u).next(y=>rt.forEach(y,b=>{const B=(W=t,ue=b.child(u),new Do(ue,null,W.explicitOrderBy.slice(),W.filters.slice(),W.limit,W.limitType,W.startAt,W.endAt));var W,ue;return this.zs(e,B,o).next(W=>{W.forEach((ue,Ae)=>{d=d.insert(ue,Ae)})})}).next(()=>d))}zs(e,t,o){let u;return this.ds.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(d=>{for(const y of d)for(const b of y.mutations){const B=b.key;let W=u.get(B);null==W&&(W=Me.newInvalidDocument(B),u=u.insert(B,W)),uc(b,W,y.localWriteTime),W.isFoundDocument()||(u=u.remove(B))}}).next(()=>(u.forEach((d,y)=>{Jc(t,y)||(u=u.remove(d))}),u))}}class Mh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=u}static Ys(e,t){let o=Pn(),u=Pn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Mh(e,t.fromCache,o,u)}}class xh{Xs(e){this.Zs=e}Qs(e,t,o,u){return 0===(d=t).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||o.isEqual(qt.min())?this.ti(e,t):this.Zs.Ks(e,u).next(d=>{const y=this.ei(t,d);return(sc(t)||bu(t))&&this.ni(t.limitType,y,u,o)?this.ti(e,t):(yo()<=Ve.in.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xc(t)),this.Zs.Qs(e,t,ar(o,-1)).next(b=>(y.forEach(B=>{b=b.insert(B.key,B)}),b)))});var d}ei(e,t){let o=new ri(Jd(e));return t.forEach((u,d)=>{Jc(e,d)&&(o=o.add(d))}),o}ni(e,t,o,u){if(o.size!==t.size)return!0;const d="F"===e?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}ti(e,t){return yo()<=Ve.in.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",Xc(t)),this.Zs.Qs(e,t,Yr.min())}}class zy{constructor(e,t,o,u){this.persistence=e,this.si=t,this.M=u,this.ii=new Yn(On),this.ri=new La(d=>Es(d),Qs),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(o)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Kf(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function hu(i,e,t,o){return new zy(i,e,t,o)}function qf(i,e){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,U.Z)(function*(i,e){const t=te(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.Bs.getAllMutationBatches(o).next(d=>(u=d,t.ai(e),t.Bs.getAllMutationBatches(o))).next(d=>{const y=[],b=[];let B=Pn();for(const W of u){y.push(W.batchId);for(const ue of W.mutations)B=B.add(ue.key)}for(const W of d){b.push(W.batchId);for(const ue of W.mutations)B=B.add(ue.key)}return t.ci.Ks(o,B).next(W=>({hi:W,removedBatchIds:y,addedBatchIds:b}))})})}),Zf.apply(this,arguments)}function Yf(i,e){const t=te(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.ui.newChangeBuffer({trackRemovals:!0});return function(y,b,B,W){const ue=B.batch,Ae=ue.keys();let Xe=rt.resolve();return Ae.forEach(dt=>{Xe=Xe.next(()=>W.getEntry(b,dt)).next(ht=>{const tn=B.docVersions.get(dt);$(null!==tn),ht.version.compareTo(tn)<0&&(ue.applyToRemoteDocument(ht,B),ht.isValidDocument()&&(ht.setReadTime(B.commitVersion),W.addEntry(ht)))})}),Xe.next(()=>y.Bs.removeMutationBatch(b,ue))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.ci.Ks(o,u))})}function Yg(i){const e=te(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Qg(i,e){const t=te(i),o=e.snapshotVersion;let u=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const y=t.ui.newChangeBuffer({trackRemovals:!0});u=t.ii;const b=[];e.targetChanges.forEach((W,ue)=>{const Ae=u.get(ue);if(!Ae)return;b.push(t.fs.removeMatchingKeys(d,W.removedDocuments,ue).next(()=>t.fs.addMatchingKeys(d,W.addedDocuments,ue)));let Xe=Ae.withSequenceNumber(d.currentSequenceNumber);var dt,ht,tn;e.targetMismatches.has(ue)?Xe=Xe.withResumeToken(Kn.EMPTY_BYTE_STRING,qt.min()).withLastLimboFreeSnapshotVersion(qt.min()):W.resumeToken.approximateByteSize()>0&&(Xe=Xe.withResumeToken(W.resumeToken,o)),u=u.insert(ue,Xe),ht=Xe,tn=W,(0===(dt=Ae).resumeToken.approximateByteSize()||ht.snapshotVersion.toMicroseconds()-dt.snapshotVersion.toMicroseconds()>=3e8||tn.addedDocuments.size+tn.modifiedDocuments.size+tn.removedDocuments.size>0)&&b.push(t.fs.updateTargetData(d,Xe))});let B=bo();if(e.documentUpdates.forEach(W=>{e.resolvedLimboDocuments.has(W)&&b.push(t.persistence.referenceDelegate.updateLimboDocument(d,W))}),b.push(Xg(d,y,e.documentUpdates).next(W=>{B=W})),!o.isEqual(qt.min())){const W=t.fs.getLastRemoteSnapshotVersion(d).next(ue=>t.fs.setTargetsMetadata(d,d.currentSequenceNumber,o));b.push(W)}return rt.waitFor(b).next(()=>y.apply(d)).next(()=>t.ci.Gs(d,B)).next(()=>B)}).then(d=>(t.ii=u,d))}function Xg(i,e,t){let o=Pn();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let d=bo();return t.forEach((y,b)=>{const B=u.get(y);b.isNoDocument()&&b.version.isEqual(qt.min())?(e.removeEntry(y,b.readTime),d=d.insert(y,b)):!B.isValidDocument()||b.version.compareTo(B.version)>0||0===b.version.compareTo(B.version)&&B.hasPendingWrites?(e.addEntry(b),d=d.insert(y,b)):I("LocalStore","Ignoring outdated watch update for ",y,". Current version:",B.version," Watch version:",b.version)}),d})}function Ky(i,e){const t=te(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function $a(i,e){const t=te(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.fs.getTargetData(o,e).next(d=>d?(u=d,rt.resolve(u)):t.fs.allocateTargetId(o).next(y=>(u=new Ba(e,y,0,o.currentSequenceNumber),t.fs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.ii.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.ii=t.ii.insert(o.targetId,o),t.ri.set(e,o.targetId)),o})}function pa(i,e,t){return yd.apply(this,arguments)}function yd(){return yd=(0,U.Z)(function*(i,e,t){const o=te(i),u=o.ii.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,y=>o.persistence.referenceDelegate.removeTarget(y,u)))}catch(y){if(!Lu(y))throw y;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${y}`)}o.ii=o.ii.remove(e),o.ri.delete(u.target)}),yd.apply(this,arguments)}function fu(i,e,t){const o=te(i);let u=qt.min(),d=Pn();return o.persistence.runTransaction("Execute query","readonly",y=>function(b,B,W){const ue=te(b),Ae=ue.ri.get(W);return void 0!==Ae?rt.resolve(ue.ii.get(Ae)):ue.fs.getTargetData(B,W)}(o,y,co(e)).next(b=>{if(b)return u=b.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(y,b.targetId).next(B=>{d=B})}).next(()=>o.si.Qs(y,e,t?u:qt.min(),t?d:Pn())).next(b=>(Jg(o,ac(e),b),{documents:b,li:d})))}function Ac(i,e){const t=te(i),o=te(t.fs),u=t.ii.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.Et(d,e).next(y=>y?y.target:null))}function Ul(i,e){const t=te(i),o=t.oi.get(e)||qt.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.ui.getAllFromCollectionGroup(u,e,ar(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Jg(t,e,u),u))}function Jg(i,e,t){let o=qt.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.oi.set(e,o)}function Rh(){return Rh=(0,U.Z)(function*(i,e,t,o){const u=te(i);let d=Pn(),y=bo();for(const W of t){const ue=e.fi(W.metadata.name);W.document&&(d=d.add(ue));const Ae=e.di(W);Ae.setReadTime(e._i(W.metadata.readTime)),y=y.insert(ue,Ae)}const b=u.ui.newChangeBuffer({trackRemovals:!0}),B=yield $a(u,(W=o,co(jo(fr.fromString(`__bundle__/docs/${W}`)))));var W;return u.persistence.runTransaction("Apply bundle documents","readwrite",W=>Xg(W,b,y).next(ue=>(b.apply(W),ue)).next(ue=>u.fs.removeMatchingKeysForTargetId(W,B.targetId).next(()=>u.fs.addMatchingKeys(W,d,B.targetId)).next(()=>u.ci.Gs(W,ue)).next(()=>ue)))}),Rh.apply(this,arguments)}function Qf(i,e){return _d.apply(this,arguments)}function _d(){return _d=(0,U.Z)(function*(i,e,t=Pn()){const o=yield $a(i,co(wh(e.bundledQuery))),u=te(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const y=ws(e.readTime);if(o.snapshotVersion.compareTo(y)>=0)return u._s.saveNamedQuery(d,e);const b=o.withResumeToken(Kn.EMPTY_BYTE_STRING,y);return u.ii=u.ii.insert(b.targetId,b),u.fs.updateTargetData(d,b).next(()=>u.fs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.fs.addMatchingKeys(d,t,o.targetId)).next(()=>u._s.saveNamedQuery(d,e))})}),_d.apply(this,arguments)}class tm{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return rt.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var o;return this.wi.set(t.id,{id:(o=t).id,version:o.version,createTime:ws(o.createTime)}),rt.resolve()}getNamedQuery(e,t){return rt.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(o=t).name,query:wh(o.bundledQuery),readTime:ws(o.readTime)}),rt.resolve();var o}}class Oh{constructor(){this.overlays=new Yn(Mt.comparator),this.gi=new Map}getOverlay(e,t){return rt.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.Xt(e,t,d)}),rt.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.gi.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.gi.delete(o)),rt.resolve()}getOverlaysForCollection(e,t,o){const u=fc(),d=t.length+1,y=new Mt(t.child("")),b=this.overlays.getIteratorFrom(y);for(;b.hasNext();){const B=b.getNext().value,W=B.getKey();if(!t.isPrefixOf(W.path))break;W.path.length===d&&B.largestBatchId>o&&u.set(B.getKey(),B)}return rt.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Yn((W,ue)=>W-ue);const y=this.overlays.getIterator();for(;y.hasNext();){const W=y.getNext().value;if(W.getKey().getCollectionGroup()===t&&W.largestBatchId>o){let ue=d.get(W.largestBatchId);null===ue&&(ue=fc(),d=d.insert(W.largestBatchId,ue)),ue.set(W.getKey(),W)}}const b=fc(),B=d.getIterator();for(;B.hasNext()&&(B.getNext().value.forEach((W,ue)=>b.set(W,ue)),!(b.size()>=u)););return rt.resolve(b)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const y=this.gi.get(u.largestBatchId).delete(o.key);this.gi.set(u.largestBatchId,y)}this.overlays=this.overlays.insert(o.key,new vh(t,o));let d=this.gi.get(t);void 0===d&&(d=Pn(),this.gi.set(t,d)),this.gi.set(t,d.add(o.key))}}class Xf{constructor(){this.yi=new ri(Ms.pi),this.Ii=new ri(Ms.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const o=new Ms(e,t);this.yi=this.yi.add(o),this.Ii=this.Ii.add(o)}Ei(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ai(new Ms(e,t))}Ri(e,t){e.forEach(o=>this.removeReference(o,t))}Pi(e){const t=new Mt(new fr([])),o=new Ms(t,e),u=new Ms(t,e+1),d=[];return this.Ii.forEachInRange([o,u],y=>{this.Ai(y),d.push(y.key)}),d}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Mt(new fr([])),o=new Ms(t,e),u=new Ms(t,e+1);let d=Pn();return this.Ii.forEachInRange([o,u],y=>{d=d.add(y.key)}),d}containsKey(e){const t=new Ms(e,0),o=this.yi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Ms{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Mt.comparator(e.key,t.key)||On(e.vi,t.vi)}static Ti(e,t){return On(e.vi,t.vi)||Mt.comparator(e.key,t.key)}}class zv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new ri(Ms.pi)}checkEmpty(e){return rt.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,u){const d=this.Si;this.Si++;const y=new _h(d,t,o,u);this.Bs.push(y);for(const b of u)this.Di=this.Di.add(new Ms(b.key,d)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return rt.resolve(y)}lookupMutationBatch(e,t){return rt.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.xi(t+1),d=u<0?0:u;return rt.resolve(this.Bs.length>d?this.Bs[d]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return rt.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Ms(t,0),u=new Ms(t,Number.POSITIVE_INFINITY),d=[];return this.Di.forEachInRange([o,u],y=>{const b=this.Ci(y.vi);d.push(b)}),rt.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new ri(On);return t.forEach(u=>{const d=new Ms(u,0),y=new Ms(u,Number.POSITIVE_INFINITY);this.Di.forEachInRange([d,y],b=>{o=o.add(b.vi)})}),rt.resolve(this.Ni(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;Mt.isDocumentKey(d)||(d=d.child(""));const y=new Ms(new Mt(d),0);let b=new ri(On);return this.Di.forEachWhile(B=>{const W=B.key.path;return!!o.isPrefixOf(W)&&(W.length===u&&(b=b.add(B.vi)),!0)},y),rt.resolve(this.Ni(b))}Ni(e){const t=[];return e.forEach(o=>{const u=this.Ci(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){$(0===this.ki(t.batchId,"removed")),this.Bs.shift();let o=this.Di;return rt.forEach(t.mutations,u=>{const d=new Ms(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Di=o})}_n(e){}containsKey(e,t){const o=new Ms(t,0),u=this.Di.firstAfterOrEqual(o);return rt.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return rt.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class nm{constructor(e){this.Mi=e,this.docs=new Yn(Mt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,y=this.Mi(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:y}),this.size+=y-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return rt.resolve(o?o.document.mutableCopy():Me.newInvalidDocument(t))}getEntries(e,t){let o=bo();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():Me.newInvalidDocument(u))}),rt.resolve(o)}getAllFromCollection(e,t,o){let u=bo();const d=new Mt(t.child("")),y=this.docs.getIteratorFrom(d);for(;y.hasNext();){const{key:b,value:{document:B}}=y.getNext();if(!t.isPrefixOf(b.path))break;b.path.length>t.length+1||Vi(kn(B),o)<=0||(u=u.insert(B.key,B.mutableCopy()))}return rt.resolve(u)}getAllFromCollectionGroup(e,t,o,u){k()}Oi(e,t){return rt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new rm(this)}getSize(e){return rt.resolve(this.size)}}class rm extends bh{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Kn.addEntry(e,u)):this.Kn.removeEntry(o)}),rt.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class qy{constructor(e){this.persistence=e,this.Fi=new La(t=>Es(t),Qs),this.lastRemoteSnapshotVersion=qt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Xf,this.targetCount=0,this.Li=du.gn()}forEachTarget(e,t){return this.Fi.forEach((o,u)=>t(u)),rt.resolve()}getLastRemoteSnapshotVersion(e){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rt.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.$i&&(this.$i=t),rt.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new du(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,rt.resolve()}updateTargetData(e,t){return this.Tn(t),rt.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,rt.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Fi.forEach((y,b)=>{b.sequenceNumber<=t&&null===o.get(b.targetId)&&(this.Fi.delete(y),d.push(this.removeMatchingKeysForTargetId(e,b.targetId)),u++)}),rt.waitFor(d).next(()=>u)}getTargetCount(e){return rt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Fi.get(t)||null;return rt.resolve(o)}addMatchingKeys(e,t,o){return this.Bi.Ei(t,o),rt.resolve()}removeMatchingKeys(e,t,o){this.Bi.Ri(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(y=>{d.push(u.markPotentiallyOrphaned(e,y))}),rt.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),rt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Bi.Vi(t);return rt.resolve(o)}containsKey(e,t){return rt.resolve(this.Bi.containsKey(t))}}class im{constructor(e,t){this.Ui={},this.overlays={},this.es=new ns(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new qy(this),this.indexManager=new $g,this.ds=new nm(o=>this.referenceDelegate.qi(o)),this.M=new Ec(t),this._s=new tm(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Oh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ui[e.toKey()];return o||(o=new zv(t,this.referenceDelegate),this.Ui[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){I("MemoryPersistence","Starting transaction:",e);const u=new Zy(this.es.next());return this.referenceDelegate.Ki(),o(u).next(d=>this.referenceDelegate.Gi(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Qi(e,t){return rt.or(Object.values(this.Ui).map(o=>()=>o.containsKey(e,t)))}}class Zy extends Fu{constructor(e){super(),this.currentSequenceNumber=e}}class Jf{constructor(e){this.persistence=e,this.ji=new Xf,this.Wi=null}static zi(e){return new Jf(e)}get Hi(){if(this.Wi)return this.Wi;throw k()}addReference(e,t,o){return this.ji.addReference(o,t),this.Hi.delete(o.toString()),rt.resolve()}removeReference(e,t,o){return this.ji.removeReference(o,t),this.Hi.add(o.toString()),rt.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),rt.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(u=>this.Hi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Hi.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.Hi,o=>{const u=Mt.fromPath(o);return this.Ji(e,u).next(d=>{d||t.removeEntry(u,qt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(o=>{o?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return rt.or([()=>rt.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function To(i,e){return`firestore_clients_${i}_${e}`}function sm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function ep(i,e){return`firestore_targets_${i}_${e}`}class tp{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Yi(e,t,o){const u=JSON.parse(o);let d,y="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return y&&u.error&&(y="string"==typeof u.error.message&&"string"==typeof u.error.code,y&&(d=new je(u.error.code,u.error.message))),y?new tp(e,t,u.state,d):(E("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Yi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new je(o.error.code,o.error.message))),d?new kh(e,o.state,u):(E("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=uu();for(let y=0;u&&y<o.activeTargetIds.length;++y)u=Iu(o.activeTargetIds[y]),d=d.add(o.activeTargetIds[y]);return u?new vd(e,d):(E("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class om{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new om(t.clientId,t.onlineState):(E("SharedClientState",`Failed to parse online state: ${e}`),null)}}class np{constructor(){this.activeTargetIds=uu()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ed{constructor(e,t,o,u,d){this.window=e,this.Yn=t,this.persistenceKey=o,this.er=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Yn(On),this.started=!1,this.rr=[];const y=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ur=To(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new np),this.cr=new RegExp(`^firestore_clients_${y}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${y}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${y}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(b){return`firestore_bundle_loaded_v2_${b}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,U.Z)(function*(){const t=yield e.syncEngine.Fs();for(const u of t){if(u===e.er)continue;const d=e.getItem(To(e.persistenceKey,u));if(d){const y=vd.Yi(u,d);y&&(e.ir=e.ir.insert(y.clientId,y))}}e.wr();const o=e.storage.getItem(e.dr);if(o){const u=e.mr(o);u&&e.gr(u)}for(const u of e.rr)e.sr(u);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,o){this.pr(e,t,o),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(ep(this.persistenceKey,e));if(o){const u=kh.Yi(e,o);u&&(t=u.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ep(this.persistenceKey,e))}updateQueryState(e,t,o){this.Er(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Ir(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return I("SharedClientState","READ",e,t),t}setItem(e,t){I("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){I("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(I("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ur)return void E("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,U.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const u=t.Pr(o.key);return t.br(u,null)}{const u=t.Vr(o.key,o.newValue);if(u)return t.br(u.clientId,u)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const u=t.vr(o.key,o.newValue);if(u)return t.Sr(u)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(o.key===t.dr){if(null!==o.newValue){const u=t.mr(o.newValue);if(u)return t.gr(u)}}else if(o.key===t.ar){const u=function(d){let y=ns.A;if(null!=d)try{const b=JSON.parse(d);$("number"==typeof b),y=b}catch(b){E("SharedClientState","Failed to read sequence number from WebStorage",b)}return y}(o.newValue);u!==ns.A&&t.sequenceNumberHandler(u)}else if(o.key===t._r){const u=t.Nr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.kr(d)))}}else t.rr.push(o)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,o){const u=new tp(this.currentUser,e,t,o),d=sm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Xi())}Ir(e){const t=sm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,o){const u=ep(this.persistenceKey,e),d=new kh(e,t,o);this.setItem(u,d.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.Pr(e);return vd.Yi(o,t)}vr(e,t){const o=this.hr.exec(e),u=Number(o[1]);return tp.Yi(new xi(void 0!==o[2]?o[2]:null),u,t)}Dr(e,t){const o=this.lr.exec(e),u=Number(o[1]);return kh.Yi(u,t)}mr(e){return om.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,U.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);I("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const o=t?this.ir.insert(e,t):this.ir.remove(e),u=this.yr(this.ir),d=this.yr(o),y=[],b=[];return d.forEach(B=>{u.has(B)||y.push(B)}),u.forEach(B=>{d.has(B)||b.push(B)}),this.syncEngine.Fr(y,b).then(()=>{this.ir=o})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=uu();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class rp{constructor(){this.$r=new np,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,o){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new np,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Yy{Lr(e){}shutdown(){}}class am{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Qy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class um{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Xy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,o,u,d){const y=this.uo(e,t);I("RestConnection","Sending: ",y,o);const b={};return this.ao(b,u,d),this.co(e,y,b,o).then(B=>(I("RestConnection","Received: ",B),B),B=>{throw v("RestConnection",`${e} failed with error: `,B,"url: ",y,"request:",o),B})}ho(e,t,o,u,d){return this.oo(e,t,o,u,d)}ao(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+qo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}uo(e,t){return`${this.io}/v1/${t}:${Qy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,u){return new Promise((d,y)=>{const b=new nc;b.listenOnce($r.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case Ma.NO_ERROR:const W=b.getResponseJson();I("Connection","XHR received:",JSON.stringify(W)),d(W);break;case Ma.TIMEOUT:I("Connection",'RPC "'+e+'" timed out'),y(new je(se.DEADLINE_EXCEEDED,"Request time out"));break;case Ma.HTTP_ERROR:const ue=b.getStatus();if(I("Connection",'RPC "'+e+'" failed with status:',ue,"response text:",b.getResponseText()),ue>0){const Ae=b.getResponseJson().error;if(Ae&&Ae.status&&Ae.message){const Xe=function(dt){const ht=dt.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(ht)>=0?ht:se.UNKNOWN}(Ae.status);y(new je(Xe,Ae.message))}else y(new je(se.UNKNOWN,"Server responded with status "+b.getStatus()))}else y(new je(se.UNAVAILABLE,"Connection failed."));break;default:k()}}finally{I("Connection",'RPC "'+e+'" completed.')}});const B=JSON.stringify(u);b.send(t,"POST",B,o,15)})}lo(e,t,o){const u=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=ua(),y=Ko(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(b.xmlHttpFactory=new xa({})),this.ao(b.initMessageHeaders,t,o),(0,$e.uI)()||(0,$e.b$)()||(0,$e.d)()||(0,$e.w1)()||(0,$e.Mn)()||(0,$e.ru)()||(b.httpHeadersOverwriteParam="$httpHeaders");const B=u.join("");I("Connection","Creating WebChannel: "+B,b);const W=d.createWebChannel(B,b);let ue=!1,Ae=!1;const Xe=new um({Wr:ht=>{Ae?I("Connection","Not sending because WebChannel is closed:",ht):(ue||(I("Connection","Opening WebChannel transport."),W.open(),ue=!0),I("Connection","WebChannel sending:",ht),W.send(ht))},zr:()=>W.close()}),dt=(ht,tn,Fn)=>{ht.listen(tn,Ei=>{try{Fn(Ei)}catch(ki){setTimeout(()=>{throw ki},0)}})};return dt(W,Us.EventType.OPEN,()=>{Ae||I("Connection","WebChannel transport opened.")}),dt(W,Us.EventType.CLOSE,()=>{Ae||(Ae=!0,I("Connection","WebChannel transport closed"),Xe.no())}),dt(W,Us.EventType.ERROR,ht=>{Ae||(Ae=!0,v("Connection","WebChannel transport errored:",ht),Xe.no(new je(se.UNAVAILABLE,"The operation could not be completed")))}),dt(W,Us.EventType.MESSAGE,ht=>{var tn;if(!Ae){const Fn=ht.data[0];$(!!Fn);const Ei=Fn,ki=Ei.error||(null===(tn=Ei[0])||void 0===tn?void 0:tn.error);if(ki){I("Connection","WebChannel received error:",ki);const ai=ki.status;let Ds=function(Zi){const io=Ki[Zi];if(void 0!==io)return dc(io)}(ai),Pi=ki.message;void 0===Ds&&(Ds=se.INTERNAL,Pi="Unknown error status: "+ai+" with message "+ki.message),Ae=!0,Xe.no(new je(Ds,Pi)),W.close()}else I("Connection","WebChannel received:",Fn),Xe.so(Fn)}}),dt(y,al.STAT_EVENT,ht=>{ht.stat===Ps.PROXY?I("Connection","Detected buffering proxy"):ht.stat===Ps.NOPROXY&&I("Connection","Detected no buffering proxy")}),setTimeout(()=>{Xe.eo()},0),Xe}}function ip(){return"undefined"!=typeof window?window:null}function Ph(){return"undefined"!=typeof document?document:null}function wd(i){return new uh(i,!0)}class Nh{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Yn=e,this.timerId=t,this.fo=o,this._o=u,this.wo=d,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),o=Math.max(0,Date.now()-this.po),u=Math.max(0,t-o);u>0&&I("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,u,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class sp{constructor(e,t,o,u,d,y,b,B){this.Yn=e,this.Ro=o,this.Po=u,this.bo=d,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=b,this.listener=B,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Nh(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,U.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,U.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var o=this;return(0,U.Z)(function*(){o.$o(),o.Bo(),o.Do.cancel(),o.Vo++,4!==e?o.Do.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(E(t.toString()),E("Using maximum backoff delay to prevent overloading the backend."),o.Do.Io()):t&&t.code===se.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Lo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Vo===t&&this.qo(o,u)},o=>{e(()=>{const u=new je(se.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ko(u)})})}qo(e,t){const o=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{o(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(u=>{o(()=>this.Ko(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}No(){var e=this;this.state=5,this.Do.To((0,U.Z)(function*(){e.state=0,e.start()}))}Ko(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jy extends sp{constructor(e,t,o,u,d,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,y),this.M=d}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Pf(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:k(),u=e.targetChange.targetIds||[],d=function(B,W){return B.N?($(void 0===W||"string"==typeof W),Kn.fromBase64String(W||"")):($(void 0===W||W instanceof Uint8Array),Kn.fromUint8Array(W||new Uint8Array))}(i,e.targetChange.resumeToken),y=e.targetChange.cause,b=y&&function(B){const W=void 0===B.code?se.UNKNOWN:dc(B.code);return new je(W,B.message||"")}(y);t=new Xs(o,u,d,b||null)}else if("documentChange"in e){const o=e.documentChange,u=oi(i,o.document.name),d=ws(o.document.updateTime),y=new z({mapValue:{fields:o.document.fields}}),b=Me.newFoundDocument(u,d,y);t=new Jo(o.targetIds||[],o.removedTargetIds||[],b.key,b)}else if("documentDelete"in e){const o=e.documentDelete,u=oi(i,o.document),d=o.readTime?ws(o.readTime):qt.min(),y=Me.newNoDocument(u,d);t=new Jo([],o.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){const o=e.documentRemove,u=oi(i,o.document);t=new Jo([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return k();{const o=e.filter,d=new td(o.count||0);t=new pc(o.targetId,d)}}var B;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return qt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?qt.min():d.readTime?ws(d.readTime):qt.min()}(e);return this.listener.Qo(t,o)}jo(e){const t={};t.database=Ol(this.M),t.addTarget=function(u,d){let y;const b=d.target;return y=Io(b)?{documents:hh(u,b)}:{query:fh(u,b)},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?y.resumeToken=$o(u,d.resumeToken):d.snapshotVersion.compareTo(qt.min())>0&&(y.readTime=Ml(u,d.snapshotVersion.toTimestamp())),y}(this.M,e);const o=function c(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return k()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=Ol(this.M),t.removeTarget=e,this.Fo(t)}}class Ha extends sp{constructor(e,t,o,u,d,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,y),this.M=d,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if($(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Nf(i,e){return i&&i.length>0?($(void 0!==e),i.map(t=>function(o,u){let d=ws(o.updateTime?o.updateTime:u);return d.isEqual(qt.min())&&(d=ws(u)),new vl(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=ws(e.commitTime);return this.listener.Yo(o,t)}return $(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Ol(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>cu(this.M,o))};this.Fo(t)}}class op extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=u,this.tu=!1}eu(){if(this.tu)throw new je(se.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.oo(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new je(se.UNKNOWN,u.toString())})}ho(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ho(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new je(se.UNKNOWN,u.toString())})}terminate(){this.tu=!0}}class e_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(E(t),this.iu=!1):I("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class t_{constructor(e,t,o,u,d){var y=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=d,this._u.Lr(b=>{o.enqueueAndForget((0,U.Z)(function*(){var B;Gu(y)&&(I("RemoteStore","Restarting streams for network reachability change."),yield(B=(0,U.Z)(function*(W){const ue=te(W);ue.fu.add(4),yield Sc(ue),ue.wu.set("Unknown"),ue.fu.delete(4),yield Fh(ue)}),function(W){return B.apply(this,arguments)})(y))}))}),this.wu=new e_(o,u)}}function Fh(i){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,U.Z)(function*(i){if(Gu(i))for(const e of i.du)yield e(!0)}),Lh.apply(this,arguments)}function Sc(i){return ap.apply(this,arguments)}function ap(){return ap=(0,U.Z)(function*(i){for(const e of i.du)yield e(!1)}),ap.apply(this,arguments)}function Vh(i,e){const t=te(i);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Id(t)?Mc(t):Wu(t).xo()&&up(t,e))}function Bl(i,e){const t=te(i),o=Wu(t);t.lu.delete(e),o.xo()&&lm(t,e),0===t.lu.size&&(o.xo()?o.Mo():Gu(t)&&t.wu.set("Unknown"))}function up(i,e){i.mu.Z(e.targetId),Wu(i).jo(e)}function lm(i,e){i.mu.Z(e),Wu(i).Wo(e)}function Mc(i){i.mu=new id({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.lu.get(e)||null}),Wu(i).start(),i.wu.ru()}function Id(i){return Gu(i)&&!Wu(i).Co()&&i.lu.size>0}function Gu(i){return 0===te(i).fu.size}function Uh(i){i.mu=void 0}function lp(i){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,U.Z)(function*(i){i.lu.forEach((e,t)=>{up(i,e)})}),Bh.apply(this,arguments)}function n_(i,e){return cp.apply(this,arguments)}function cp(){return cp=(0,U.Z)(function*(i,e){Uh(i),Id(i)?(i.wu.au(e),Mc(i)):i.wu.set("Unknown")}),cp.apply(this,arguments)}function dp(i,e,t){return cm.apply(this,arguments)}function cm(){return cm=(0,U.Z)(function*(i,e,t){if(i.wu.set("Online"),e instanceof Xs&&2===e.state&&e.cause)try{yield(o=(0,U.Z)(function*(u,d){const y=d.cause;for(const b of d.targetIds)u.lu.has(b)&&(yield u.remoteSyncer.rejectListen(b,y),u.lu.delete(b),u.mu.removeTarget(b))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield jh(i,o)}else if(e instanceof Jo?i.mu.ut(e):e instanceof pc?i.mu._t(e):i.mu.ht(e),!t.isEqual(qt.min()))try{const o=yield Yg(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const y=u.mu.yt(d);return y.targetChanges.forEach((b,B)=>{if(b.resumeToken.approximateByteSize()>0){const W=u.lu.get(B);W&&u.lu.set(B,W.withResumeToken(b.resumeToken,d))}}),y.targetMismatches.forEach(b=>{const B=u.lu.get(b);if(!B)return;u.lu.set(b,B.withResumeToken(Kn.EMPTY_BYTE_STRING,B.snapshotVersion)),lm(u,b);const W=new Ba(B.target,b,1,B.sequenceNumber);up(u,W)}),u.remoteSyncer.applyRemoteEvent(y)}(i,t))}catch(o){I("RemoteStore","Failed to raise snapshot:",o),yield jh(i,o)}var o}),cm.apply(this,arguments)}function jh(i,e,t){return $h.apply(this,arguments)}function $h(){return $h=(0,U.Z)(function*(i,e,t){if(!Lu(e))throw e;i.fu.add(1),yield Sc(i),i.wu.set("Offline"),t||(t=()=>Yg(i.localStore)),i.asyncQueue.enqueueRetryable((0,U.Z)(function*(){I("RemoteStore","Retrying IndexedDB access"),yield t(),i.fu.delete(1),yield Fh(i)}))}),$h.apply(this,arguments)}function hp(i,e){return e().catch(t=>jh(i,t,e))}function jl(i){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,U.Z)(function*(i){const e=te(i),t=zu(e);let o=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;dm(e);)try{const u=yield Ky(e.localStore,o);if(null===u){0===e.hu.length&&t.Mo();break}o=u.batchId,pu(e,u)}catch(u){yield jh(e,u)}Dd(e)&&hm(e)}),Hh.apply(this,arguments)}function dm(i){return Gu(i)&&i.hu.length<10}function pu(i,e){i.hu.push(e);const t=zu(i);t.xo()&&t.Ho&&t.Jo(e.mutations)}function Dd(i){return Gu(i)&&!zu(i).Co()&&i.hu.length>0}function hm(i){zu(i).start()}function r_(i){return fm.apply(this,arguments)}function fm(){return fm=(0,U.Z)(function*(i){zu(i).Zo()}),fm.apply(this,arguments)}function fp(i){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,U.Z)(function*(i){const e=zu(i);for(const t of i.hu)e.Jo(t.mutations)}),Gh.apply(this,arguments)}function pp(i,e,t){return $l.apply(this,arguments)}function $l(){return $l=(0,U.Z)(function*(i,e,t){const o=i.hu.shift(),u=fd.from(o,e,t);yield hp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield jl(i)}),$l.apply(this,arguments)}function i_(i,e){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,U.Z)(function*(i,e){var t;e&&zu(i).Ho&&(yield(t=(0,U.Z)(function*(o,u){if(Cl(d=u.code)&&d!==se.ABORTED){const y=o.hu.shift();zu(o).ko(),yield hp(o,()=>o.remoteSyncer.rejectFailedWrite(y.batchId,u)),yield jl(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Dd(i)&&hm(i)}),Cd.apply(this,arguments)}function gp(i,e){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,U.Z)(function*(i,e){const t=te(i);t.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");const o=Gu(t);t.fu.add(3),yield Sc(t),o&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Fh(t)}),Wh.apply(this,arguments)}function zh(i,e){return mp.apply(this,arguments)}function mp(){return mp=(0,U.Z)(function*(i,e){const t=te(i);e?(t.fu.delete(2),yield Fh(t)):e||(t.fu.add(2),yield Sc(t),t.wu.set("Unknown"))}),mp.apply(this,arguments)}function Wu(i){return i.gu||(i.gu=function(e,t,o){const u=te(e);return u.eu(),new Jy(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:lp.bind(null,i),Yr:n_.bind(null,i),Qo:dp.bind(null,i)}),i.du.push(function(){var e=(0,U.Z)(function*(t){t?(i.gu.ko(),Id(i)?Mc(i):i.wu.set("Unknown")):(yield i.gu.stop(),Uh(i))});return function(t){return e.apply(this,arguments)}}())),i.gu}function zu(i){return i.yu||(i.yu=function(e,t,o){const u=te(e);return u.eu(),new Ha(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:r_.bind(null,i),Yr:i_.bind(null,i),Xo:fp.bind(null,i),Yo:pp.bind(null,i)}),i.du.push(function(){var e=(0,U.Z)(function*(t){t?(i.yu.ko(),yield jl(i)):(yield i.yu.stop(),i.hu.length>0&&(I("RemoteStore",`Stopping write stream with ${i.hu.length} pending writes`),i.hu=[]))});return function(t){return e.apply(this,arguments)}}())),i.yu}class yp{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}static createAndSchedule(e,t,o,u,d){const y=Date.now()+o,b=new yp(e,t,y,u,d);return b.start(o),b}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new je(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hl(i,e){if(E("AsyncQueue",`${e}: ${i}`),Lu(i))return new je(se.UNAVAILABLE,`${e}: ${i}`);throw i}class ga{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Mt.comparator(t.key,o.key):(t,o)=>Mt.comparator(t.key,o.key),this.keyedMap=rd(),this.sortedSet=new Yn(this.comparator)}static emptySet(e){return new ga(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new ga;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class _p{constructor(){this.pu=new Yn(Mt.comparator)}track(e){const t=e.doc.key,o=this.pu.get(t);o?0!==e.type&&3===o.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==o.type?this.pu=this.pu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.pu=this.pu.remove(t):1===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):k():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,o)=>{e.push(o)}),e}}class xc{constructor(e,t,o,u,d,y,b,B){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=y,this.syncStateChanged=b,this.excludesMetadataChanges=B}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(y=>{d.push({type:0,doc:y})}),new xc(e,t,ga.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class s_{constructor(){this.Tu=void 0,this.listeners=[]}}class Rc{constructor(){this.queries=new La(e=>Xd(e),Au),this.onlineState="Unknown",this.Eu=new Set}}function vp(i,e){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,U.Z)(function*(i,e){const t=te(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new s_),u)try{d.Tu=yield t.onListen(o)}catch(y){const b=Hl(y,`Initialization of query '${Xc(e.query)}' failed`);return void e.onError(b)}t.queries.set(o,d),d.listeners.push(e),e.Au(t.onlineState),d.Tu&&e.Ru(d.Tu)&&Kh(t)}),Ep.apply(this,arguments)}function wp(i,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,U.Z)(function*(i,e){const t=te(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const y=d.listeners.indexOf(e);y>=0&&(d.listeners.splice(y,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Ip.apply(this,arguments)}function ma(i,e){const t=te(i);let o=!1;for(const u of e){const y=t.queries.get(u.query);if(y){for(const b of y.listeners)b.Ru(u)&&(o=!0);y.Tu=u}}o&&Kh(t)}function Dp(i,e,t){const o=te(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Kh(i){i.Eu.forEach(e=>{e.next()})}class qh{constructor(e,t,o){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}Ru(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new xc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class pm{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class Cp{constructor(e){this.M=e}fi(e){return oi(this.M,e)}di(e){return e.metadata.exists?mc(this.M,e.document,!1):Me.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return ws(e)}}class o_{constructor(e,t,o){this.Nu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gm(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=fr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new Cp(this.M);for(const u of e)if(u.metadata.queries){const d=o.fi(u.metadata.name);for(const y of u.metadata.queries){const b=(t.get(y)||Pn()).add(d);t.set(y,b)}}return t}complete(){var e=this;return(0,U.Z)(function*(){const t=yield function em(i,e,t,o){return Rh.apply(this,arguments)}(e.localStore,new Cp(e.M),e.documents,e.Nu.id),o=e.Mu(e.documents);for(const u of e.queries)yield Qf(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function gm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class mm{constructor(e){this.key=e}}class ym{constructor(e){this.key=e}}class bp{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Pn(),this.mutatedKeys=Pn(),this.Uu=Jd(e),this.qu=new ga(this.Uu)}get Ku(){return this.$u}Gu(e,t){const o=t?t.Qu:new _p,u=t?t.qu:this.qu;let d=t?t.mutatedKeys:this.mutatedKeys,y=u,b=!1;const B=sc(this.query)&&u.size===this.query.limit?u.last():null,W=bu(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ue,Ae)=>{const Xe=u.get(ue),dt=Jc(this.query,Ae)?Ae:null,ht=!!Xe&&this.mutatedKeys.has(Xe.key),tn=!!dt&&(dt.hasLocalMutations||this.mutatedKeys.has(dt.key)&&dt.hasCommittedMutations);let Fn=!1;Xe&&dt?Xe.data.isEqual(dt.data)?ht!==tn&&(o.track({type:3,doc:dt}),Fn=!0):this.ju(Xe,dt)||(o.track({type:2,doc:dt}),Fn=!0,(B&&this.Uu(dt,B)>0||W&&this.Uu(dt,W)<0)&&(b=!0)):!Xe&&dt?(o.track({type:0,doc:dt}),Fn=!0):Xe&&!dt&&(o.track({type:1,doc:Xe}),Fn=!0,(B||W)&&(b=!0)),Fn&&(dt?(y=y.add(dt),d=tn?d.add(ue):d.delete(ue)):(y=y.delete(ue),d=d.delete(ue)))}),sc(this.query)||bu(this.query))for(;y.size>this.query.limit;){const ue=sc(this.query)?y.last():y.first();y=y.delete(ue.key),d=d.delete(ue.key),o.track({type:1,doc:ue})}return{qu:y,Qu:o,ni:b,mutatedKeys:d}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const d=e.Qu.Iu();d.sort((W,ue)=>function(Ae,Xe){const dt=ht=>{switch(ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return k()}};return dt(Ae)-dt(Xe)}(W.type,ue.type)||this.Uu(W.doc,ue.doc)),this.Wu(o);const y=t?this.zu():[],b=0===this.Lu.size&&this.current?1:0,B=b!==this.Bu;return this.Bu=b,0!==d.length||B?{snapshot:new xc(this.query,e.qu,u,d,e.mutatedKeys,0===b,B,!1),Hu:y}:{Hu:y}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new _p,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Pn(),this.qu.forEach(o=>{this.Ju(o.key)&&(this.Lu=this.Lu.add(o.key))});const t=[];return e.forEach(o=>{this.Lu.has(o)||t.push(new ym(o))}),this.Lu.forEach(o=>{e.has(o)||t.push(new mm(o))}),t}Yu(e){this.$u=e.li,this.Lu=Pn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return xc.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Kv{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class _m{constructor(e){this.key=e,this.Zu=!1}}class a_{constructor(e,t,o,u,d,y){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=y,this.ta={},this.ea=new La(b=>Xd(b),Au),this.na=new Map,this.sa=new Set,this.ia=new Yn(Mt.comparator),this.ra=new Map,this.oa=new Xf,this.ua={},this.aa=new Map,this.ca=du.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function u_(i,e){return vm.apply(this,arguments)}function vm(){return vm=(0,U.Z)(function*(i,e){const t=Qu(i);let o,u;const d=t.ea.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.Xu();else{const y=yield $a(t.localStore,co(e));t.isPrimaryClient&&Vh(t.remoteStore,y);const b=t.sharedClientState.addLocalQueryTarget(y.targetId);o=y.targetId,u=yield Em(t,e,o,"current"===b)}return u}),vm.apply(this,arguments)}function Em(i,e,t,o){return bd.apply(this,arguments)}function bd(){return bd=(0,U.Z)(function*(i,e,t,o){i.la=(ue,Ae,Xe)=>{return(dt=(0,U.Z)(function*(ht,tn,Fn,Ei){let ki=tn.view.Gu(Fn);ki.ni&&(ki=yield fu(ht.localStore,tn.query,!1).then(({documents:Pi})=>tn.view.Gu(Pi,ki)));const ai=Ei&&Ei.targetChanges.get(tn.targetId),Ds=tn.view.applyChanges(ki,ht.isPrimaryClient,ai);return xp(ht,tn.targetId,Ds.Hu),Ds.snapshot}),function(ht,tn,Fn,Ei){return dt.apply(this,arguments)})(i,ue,Ae,Xe);var dt};const u=yield fu(i.localStore,e,!0),d=new bp(e,u.li),y=d.Gu(u.documents),b=is.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),B=d.applyChanges(y,i.isPrimaryClient,b);xp(i,t,B.Hu);const W=new Kv(e,t,d);return i.ea.set(e,W),i.na.has(t)?i.na.get(t).push(e):i.na.set(t,[e]),B.snapshot}),bd.apply(this,arguments)}function l_(i,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,U.Z)(function*(i,e){const t=te(i),o=t.ea.get(e),u=t.na.get(o.targetId);if(u.length>1)return t.na.set(o.targetId,u.filter(d=>!Au(d,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield pa(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Bl(t.remoteStore,o.targetId),Oc(t,o.targetId)}).catch(Ll))):(Oc(t,o.targetId),yield pa(t.localStore,o.targetId,!0))}),Zh.apply(this,arguments)}function Im(){return Im=(0,U.Z)(function*(i,e,t){const o=Xu(i);try{const u=yield function(d,y){const b=te(d),B=Li.now(),W=y.reduce((Ae,Xe)=>Ae.add(Xe.key),Pn());let ue;return b.persistence.runTransaction("Locally write mutations","readwrite",Ae=>b.ci.Ks(Ae,W).next(Xe=>{ue=Xe;const dt=[];for(const ht of y){const tn=Rg(ht,ue.get(ht.key));null!=tn&&dt.push(new Ru(ht.key,tn,le(tn.value.mapValue),zi.exists(!0)))}return b.Bs.addMutationBatch(Ae,B,dt,y)})).then(Ae=>(Ae.applyToLocalDocumentSet(ue),{batchId:Ae.batchId,changes:ue}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,y,b){let B=d.ua[d.currentUser.toKey()];B||(B=new Yn(On)),B=B.insert(y,b),d.ua[d.currentUser.toKey()]=B}(o,u.batchId,t),yield ia(o,u.changes),yield jl(o.remoteStore)}catch(u){const d=Hl(u,"Failed to persist write");t.reject(d)}}),Im.apply(this,arguments)}function ra(i,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,U.Z)(function*(i,e){const t=te(i);try{const o=yield Qg(t.localStore,e);e.targetChanges.forEach((u,d)=>{const y=t.ra.get(d);y&&($(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?y.Zu=!0:u.modifiedDocuments.size>0?$(y.Zu):u.removedDocuments.size>0&&($(y.Zu),y.Zu=!1))}),yield ia(t,o,e)}catch(o){yield Ll(o)}}),Dm.apply(this,arguments)}function c_(i,e,t){const o=te(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ea.forEach((d,y)=>{const b=y.view.Au(e);b.snapshot&&u.push(b.snapshot)}),function(d,y){const b=te(d);b.onlineState=y;let B=!1;b.queries.forEach((W,ue)=>{for(const Ae of ue.listeners)Ae.Au(y)&&(B=!0)}),B&&Kh(b)}(o.eventManager,e),u.length&&o.ta.Qo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Cm(i,e,t){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,U.Z)(function*(i,e,t){const o=te(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.ra.get(e),d=u&&u.key;if(d){let y=new Yn(Mt.comparator);y=y.insert(d,Me.newNoDocument(d,qt.min()));const b=Pn().add(d),B=new lu(qt.min(),new Map,new ri(On),y,b);yield ra(o,B),o.ia=o.ia.remove(d),o.ra.delete(e),Rp(o)}else yield pa(o.localStore,e,!1).then(()=>Oc(o,e,t)).catch(Ll)}),Yh.apply(this,arguments)}function bm(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,U.Z)(function*(i,e){const t=te(i),o=e.batch.batchId;try{const u=yield Yf(t.localStore,e);Mp(t,o,null),Td(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield ia(t,u)}catch(u){yield Ll(u)}}),Tp.apply(this,arguments)}function qv(i,e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,U.Z)(function*(i,e,t){const o=te(i);try{const u=yield function(d,y){const b=te(d);return b.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let W;return b.Bs.lookupMutationBatch(B,y).next(ue=>($(null!==ue),W=ue.keys(),b.Bs.removeMutationBatch(B,ue))).next(()=>b.Bs.performConsistencyCheck(B)).next(()=>b.ci.Ks(B,W))})}(o.localStore,e);Mp(o,e,t),Td(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield ia(o,u)}catch(u){yield Ll(u)}}),Qh.apply(this,arguments)}function Sp(){return Sp=(0,U.Z)(function*(i,e){const t=te(i);Gu(t.remoteStore)||I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const y=te(d);return y.persistence.runTransaction("Get highest unacknowledged batch id","readonly",b=>y.Bs.getHighestUnacknowledgedBatchId(b))}(t.localStore);if(-1===o)return void e.resolve();const u=t.aa.get(o)||[];u.push(e),t.aa.set(o,u)}catch(o){const u=Hl(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Sp.apply(this,arguments)}function Td(i,e){(i.aa.get(e)||[]).forEach(t=>{t.resolve()}),i.aa.delete(e)}function Mp(i,e,t){const o=te(i);let u=o.ua[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ua[o.currentUser.toKey()]=u}}function Oc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.na.get(e))i.ea.delete(o),t&&i.ta.fa(o,t);i.na.delete(e),i.isPrimaryClient&&i.oa.Pi(e).forEach(o=>{i.oa.containsKey(o)||Tm(i,o)})}function Tm(i,e){i.sa.delete(e.path.canonicalString());const t=i.ia.get(e);null!==t&&(Bl(i.remoteStore,t),i.ia=i.ia.remove(e),i.ra.delete(t),Rp(i))}function xp(i,e,t){for(const o of t)o instanceof mm?(i.oa.addReference(o.key,e),d_(i,o)):o instanceof ym?(I("SyncEngine","Document no longer in limbo: "+o.key),i.oa.removeReference(o.key,e),i.oa.containsKey(o.key)||Tm(i,o.key)):k()}function d_(i,e){const t=e.key,o=t.path.canonicalString();i.ia.get(t)||i.sa.has(o)||(I("SyncEngine","New document in limbo: "+t),i.sa.add(o),Rp(i))}function Rp(i){for(;i.sa.size>0&&i.ia.size<i.maxConcurrentLimboResolutions;){const e=i.sa.values().next().value;i.sa.delete(e);const t=new Mt(fr.fromString(e)),o=i.ca.next();i.ra.set(o,new _m(t)),i.ia=i.ia.insert(t,o),Vh(i.remoteStore,new Ba(co(jo(t.path)),o,2,ns.A))}}function ia(i,e,t){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,U.Z)(function*(i,e,t){const o=te(i),u=[],d=[],y=[];var b;o.ea.isEmpty()||(o.ea.forEach((b,B)=>{y.push(o.la(B,e,t).then(W=>{if(W){o.isPrimaryClient&&o.sharedClientState.updateQueryState(B.targetId,W.fromCache?"not-current":"current"),u.push(W);const ue=Mh.Ys(B.targetId,W);d.push(ue)}}))}),yield Promise.all(y),o.ta.Qo(u),yield(b=(0,U.Z)(function*(B,W){const ue=te(B);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ae=>rt.forEach(W,Xe=>rt.forEach(Xe.Hs,dt=>ue.persistence.referenceDelegate.addReference(Ae,Xe.targetId,dt)).next(()=>rt.forEach(Xe.Js,dt=>ue.persistence.referenceDelegate.removeReference(Ae,Xe.targetId,dt)))))}catch(Ae){if(!Lu(Ae))throw Ae;I("LocalStore","Failed to update sequence numbers: "+Ae)}for(const Ae of W){const Xe=Ae.targetId;if(!Ae.fromCache){const dt=ue.ii.get(Xe),tn=dt.withLastLimboFreeSnapshotVersion(dt.snapshotVersion);ue.ii=ue.ii.insert(Xe,tn)}}}),function(B,W){return b.apply(this,arguments)})(o.localStore,d))}),Ku.apply(this,arguments)}function h_(i,e){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,U.Z)(function*(i,e){const t=te(i);if(!t.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());const o=yield qf(t.localStore,e);t.currentUser=e,(u=t).aa.forEach(y=>{y.forEach(b=>{b.reject(new je(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.aa.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ia(t,o.hi)}var u}),Gl.apply(this,arguments)}function f_(i,e){const t=te(i),o=t.ra.get(e);if(o&&o.Zu)return Pn().add(o.key);{let u=Pn();const d=t.na.get(e);if(!d)return u;for(const y of d){const b=t.ea.get(y);u=u.unionWith(b.view.Ku)}return u}}function p_(i,e){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,U.Z)(function*(i,e){const t=te(i),o=yield fu(t.localStore,e.query,!0),u=e.view.Yu(o);return t.isPrimaryClient&&xp(t,e.targetId,u.Hu),u}),Ad.apply(this,arguments)}function Ga(i,e){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,U.Z)(function*(i,e){const t=te(i);return Ul(t.localStore,e).then(o=>ia(t,o))}),Wl.apply(this,arguments)}function no(i,e,t,o){return gu.apply(this,arguments)}function gu(){return gu=(0,U.Z)(function*(i,e,t,o){const u=te(i),d=yield function(y,b){const B=te(y),W=te(B.Bs);return B.persistence.runTransaction("Lookup mutation documents","readonly",ue=>W.fn(ue,b).next(Ae=>Ae?B.ci.Ks(ue,Ae):rt.resolve(null)))}(u.localStore,e);var b;null!==d?("pending"===t?yield jl(u.remoteStore):"acknowledged"===t||"rejected"===t?(Mp(u,e,o||null),Td(u,e),b=e,te(te(u.localStore).Bs)._n(b)):k(),yield ia(u,d)):I("SyncEngine","Cannot apply mutation batch with id: "+e)}),gu.apply(this,arguments)}function Ao(){return Ao=(0,U.Z)(function*(i,e){const t=te(i);if(Qu(t),Xu(t),!0===e&&!0!==t.ha){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield Jh(t,o.toArray());t.ha=!0,yield zh(t.remoteStore,!0);for(const d of u)Vh(t.remoteStore,d)}else if(!1===e&&!1!==t.ha){const o=[];let u=Promise.resolve();t.na.forEach((d,y)=>{t.sharedClientState.isLocalQueryTarget(y)?o.push(y):u=u.then(()=>(Oc(t,y),pa(t.localStore,y,!0))),Bl(t.remoteStore,y)}),yield u,yield Jh(t,o),function(d){const y=te(d);y.ra.forEach((b,B)=>{Bl(y.remoteStore,B)}),y.oa.bi(),y.ra=new Map,y.ia=new Yn(Mt.comparator)}(t),t.ha=!1,yield zh(t.remoteStore,!1)}}),Ao.apply(this,arguments)}function Jh(i,e,t){return qu.apply(this,arguments)}function qu(){return qu=(0,U.Z)(function*(i,e,t){const o=te(i),u=[],d=[];for(const y of e){let b;const B=o.na.get(y);if(B&&0!==B.length){b=yield $a(o.localStore,co(B[0]));for(const W of B){const ue=o.ea.get(W),Ae=yield p_(o,ue);Ae.snapshot&&d.push(Ae.snapshot)}}else{const W=yield Ac(o.localStore,y);b=yield $a(o.localStore,W),yield Em(o,zl(W),y,!1)}u.push(b)}return o.ta.Qo(d),u}),qu.apply(this,arguments)}function zl(i){return ic(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function kc(i){const e=te(i);return te(te(e.localStore).persistence).Fs()}function Pc(i,e,t,o){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,U.Z)(function*(i,e,t,o){const u=te(i);if(u.ha)return void I("SyncEngine","Ignoring unexpected query state notification.");const d=u.na.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const y=yield Ul(u.localStore,ac(d[0])),b=lu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ia(u,y,b);break}case"rejected":yield pa(u.localStore,e,!0),Oc(u,e,o);break;default:k()}}),Zu.apply(this,arguments)}function Nc(i,e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=(0,U.Z)(function*(i,e,t){const o=Qu(i);if(o.ha){for(const u of e){if(o.na.has(u)){I("SyncEngine","Adding an already active target "+u);continue}const d=yield Ac(o.localStore,u),y=yield $a(o.localStore,d);yield Em(o,zl(d),y.targetId,!1),Vh(o.remoteStore,y)}for(const u of t)o.na.has(u)&&(yield pa(o.localStore,u,!1).then(()=>{Bl(o.remoteStore,u),Oc(o,u)}).catch(Ll))}}),Yu.apply(this,arguments)}function Qu(i){const e=te(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ra.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cm.bind(null,e),e.ta.Qo=ma.bind(null,e.eventManager),e.ta.fa=Dp.bind(null,e.eventManager),e}function Xu(i){const e=te(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qv.bind(null,e),e}class Op{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,U.Z)(function*(){t.M=wd(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return hu(this.persistence,new xh,e.initialUser,this.M)}wa(e){return new im(Jf.zi,this.M)}_a(e){return new rp}terminate(){var e=this;return(0,U.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kp extends Op{constructor(e,t,o){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,U.Z)(function*(){yield t().call(o,e),yield o.ya.initialize(o,e),yield Xu(o.ya.syncEngine),yield jl(o.ya.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ga(e){return hu(this.persistence,new xh,e.initialUser,this.M)}ma(e){return new $v(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?to.withCacheSize(this.cacheSizeBytes):to.DEFAULT;return new ja(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,ip(),Ph(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new rp}}class Sm extends kp{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,U.Z)(function*(){yield t().call(o,e);const u=o.ya.syncEngine;o.sharedClientState instanceof Ed&&(o.sharedClientState.syncEngine={Mr:no.bind(null,u),Or:Pc.bind(null,u),Fr:Nc.bind(null,u),Fs:kc.bind(null,u),kr:Ga.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var d=(0,U.Z)(function*(y){yield function Xh(i,e){return Ao.apply(this,arguments)}(o.ya.syncEngine,y),o.gcScheduler&&(y&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):y||o.gcScheduler.stop())});return function(y){return d.apply(this,arguments)}}())})()}_a(e){const t=ip();if(!Ed.vt(t))throw new je(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ed(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class ef{initialize(e,t){var o=this;return(0,U.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>c_(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=h_.bind(null,o.syncEngine),yield zh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Rc}createDatastore(e){const t=wd(e.databaseInfo.databaseId),o=new Xy(e.databaseInfo);return new op(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=b=>c_(this.syncEngine,b,0),y=am.vt()?new am:new Yy,new t_(t,o,u,d,y);var t,o,u,d,y}createSyncEngine(e,t){return function(o,u,d,y,b,B,W){const ue=new a_(o,u,d,y,b,B);return W&&(ue.ha=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,U.Z)(function*(t){const o=te(t);I("RemoteStore","RemoteStore shutting down."),o.fu.add(5),yield Sc(o),o._u.shutdown(),o.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Pp(i,e=10240){let t=0;return{read:()=>(0,U.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,U.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Sd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mm{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new dn,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(o=>{o&&o.xu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,U.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,U.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,U.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const o=e.Ea.decode(t),u=Number(o);isNaN(u)&&e.Pa(`length string (${o}) is not valid number`);const d=yield e.ba(u);return new pm(JSON.parse(d),t.length+u)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,U.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,U.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const o=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,U.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class xm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,U.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new je(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,U.Z)(function*(d,y){const b=te(d),B=Ol(b.M)+"/documents",W={documents:y.map(dt=>Pu(b.M,dt))},ue=yield b.ho("BatchGetDocuments",B,W),Ae=new Map;ue.forEach(dt=>{const ht=function dh(i,e){return"found"in e?function(t,o){$(!!o.found);const u=oi(t,o.found.name),d=ws(o.found.updateTime),y=new z({mapValue:{fields:o.found.fields}});return Me.newFoundDocument(u,d,y)}(i,e):"missing"in e?function(t,o){$(!!o.missing),$(!!o.readTime);const u=oi(t,o.missing),d=ws(o.readTime);return Me.newNoDocument(u,d)}(i,e):k()}(b.M,dt);Ae.set(ht.key.toString(),ht)});const Xe=[];return y.forEach(dt=>{const ht=Ae.get(dt.toString());$(!!ht),Xe.push(ht)}),Xe}),function(d,y){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Il(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,U.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=Mt.fromPath(u);e.mutations.push(new Dl(d,e.precondition(d)))}),yield(o=(0,U.Z)(function*(u,d){const y=te(u),b=Ol(y.M)+"/documents",B={writes:d.map(W=>cu(y.M,W))};yield y.oo("Commit",b,B)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw k();t=qt.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new je(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?zi.updateTime(t):zi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qt.min()))throw new je(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zi.updateTime(t)}return zi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class g_{constructor(e,t,o,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=u,this.Sa=5,this.Do=new Nh(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,U.Z)(function*(){const t=new xm(e.datastore),o=e.Ca(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.xa(d)}))}).catch(u=>{e.xa(u)})}))}Ca(e){try{const t=this.updateFunction(e);return!vs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Cl(t)}return!1}}class Rm{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=xi.UNAUTHENTICATED,this.clientId=rc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var y=(0,U.Z)(function*(b){I("FirestoreClient","Received user=",b.uid),yield d.authCredentialListener(b),d.user=b});return function(b){return y.apply(this,arguments)}}()),this.appCheckCredentials.start(o,y=>(I("FirestoreClient","Received new app check token=",y),this.appCheckCredentialListener(y,this.user)))}getConfiguration(){var e=this;return(0,U.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new je(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,U.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=Hl(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Om(i,e){return tf.apply(this,arguments)}function tf(){return tf=(0,U.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,U.Z)(function*(d){o.isEqual(d)||(yield qf(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),tf.apply(this,arguments)}function Np(i,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,U.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Lp(i);I("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>gp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>gp(e.remoteStore,d)),i.onlineComponents=e}),Fp.apply(this,arguments)}function Lp(i){return nf.apply(this,arguments)}function nf(){return nf=(0,U.Z)(function*(i){return i.offlineComponents||(I("FirestoreClient","Using default OfflineComponentProvider"),yield Om(i,new Op)),i.offlineComponents}),nf.apply(this,arguments)}function rf(i){return sf.apply(this,arguments)}function sf(){return sf=(0,U.Z)(function*(i){return i.onlineComponents||(I("FirestoreClient","Using default OnlineComponentProvider"),yield Np(i,new ef)),i.onlineComponents}),sf.apply(this,arguments)}function km(i){return Lp(i).then(e=>e.persistence)}function Vp(i){return Lp(i).then(e=>e.localStore)}function m_(i){return rf(i).then(e=>e.remoteStore)}function Up(i){return rf(i).then(e=>e.syncEngine)}function Ju(i){return Md.apply(this,arguments)}function Md(){return Md=(0,U.Z)(function*(i){const e=yield rf(i),t=e.eventManager;return t.onListen=u_.bind(null,e.syncEngine),t.onUnlisten=l_.bind(null,e.syncEngine),t}),Md.apply(this,arguments)}function __(i,e,t={}){const o=new dn;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function(u,d,y,b,B){const W=new Sd({next:Ae=>{d.enqueueAndForget(()=>wp(u,ue));const Xe=Ae.docs.has(y);!Xe&&Ae.fromCache?B.reject(new je(se.UNAVAILABLE,"Failed to get document because the client is offline.")):Xe&&Ae.fromCache&&b&&"server"===b.source?B.reject(new je(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(Ae)},error:Ae=>B.reject(Ae)}),ue=new qh(jo(y.path),W,{includeMetadataChanges:!0,Cu:!0});return vp(u,ue)}(yield Ju(i),i.asyncQueue,e,t,o)})),o.promise}function Bp(i,e,t={}){const o=new dn;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function(u,d,y,b,B){const W=new Sd({next:Ae=>{d.enqueueAndForget(()=>wp(u,ue)),Ae.fromCache&&"server"===b.source?B.reject(new je(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(Ae)},error:Ae=>B.reject(Ae)}),ue=new qh(y,W,{includeMetadataChanges:!0,Cu:!0});return vp(u,ue)}(yield Ju(i),i.asyncQueue,e,t,o)})),o.promise}const jp=new Map;function $p(i,e,t){if(!t)throw new je(se.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Hp(i,e,t,o){if(!0===e&&!0===o)throw new je(se.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function xd(i){if(!Mt.isDocumentKey(i))throw new je(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Pm(i){if(Mt.isDocumentKey(i))throw new je(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Rd(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":k()}function Sr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new je(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rd(i);throw new je(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Nm(i,e){if(e<=0)throw new je(se.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Fm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new je(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new je(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Hp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fm({}),this._settingsFrozen=!1,e instanceof Gi?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new je(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gi(u.options.projectId)}(e))}get app(){if(!this._app)throw new je(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new je(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ar;switch(t.type){case"gapi":const o=t.client;return $(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new Ra(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new je(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jp.get(e);t&&(I("ComponentProvider","Removing Datastore"),jp.delete(e),t.terminate())}(this),Promise.resolve()}}class _i{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _i(this.firestore,e,this._key)}}class ro{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ro(this.firestore,e,this._query)}}class ya extends ro{constructor(e,t,o){super(e,t,jo(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _i(this.firestore,null,new Mt(e))}withConverter(e){return new ya(this.firestore,e,this._path)}}function Gp(i,e,...t){if(i=(0,$e.m9)(i),$p("collection","path",e),i instanceof Od){const o=fr.fromString(e,...t);return Pm(o),new ya(i,null,o)}{if(!(i instanceof _i||i instanceof ya))throw new je(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(fr.fromString(e,...t));return Pm(o),new ya(i.firestore,null,o)}}function zp(i,e,...t){if(i=(0,$e.m9)(i),1===arguments.length&&(e=rc.R()),$p("doc","path",e),i instanceof Od){const o=fr.fromString(e,...t);return xd(o),new _i(i,null,new Mt(o))}{if(!(i instanceof _i||i instanceof ya))throw new je(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(fr.fromString(e,...t));return xd(o),new _i(i.firestore,i instanceof ya?i.converter:null,new Mt(o))}}function af(i,e){return i=(0,$e.m9)(i),e=(0,$e.m9)(e),(i instanceof _i||i instanceof ya)&&(e instanceof _i||e instanceof ya)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Lm(i,e){return i=(0,$e.m9)(i),e=(0,$e.m9)(e),i instanceof ro&&e instanceof ro&&i.firestore===e.firestore&&Au(i._query,e._query)&&i.converter===e.converter}class Xv{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Nh(this,"async_queue_retry"),this.qa=()=>{const t=Ph();t&&I("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Ph();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Ph();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new dn;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,U.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Lu(t))throw t;I("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(o=>{throw this.$a=o,this.Ba=!1,E("INTERNAL UNHANDLED ERROR: ",function(d){let y=d.message||"";return d.stack&&(y=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),y}(o)),o}).then(o=>(this.Ba=!1,o))));return this.ka=t,t}enqueueAfterDelay(e,t,o){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const u=yp.createAndSchedule(this,e,t,o,d=>this.ja(d));return this.Fa.push(u),u}Ka(){this.$a&&k()}verifyOperationInProgress(){}Wa(){var e=this;return(0,U.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function Kl(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Vm{constructor(){this._progressObserver={},this._taskCompletionResolver=new dn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class vi extends Od{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new Xv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||uf(this),this._firestoreClient.terminate()}}function qi(i){return i._firestoreClient||uf(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function uf(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Zo(i._databaseId,d,i._persistenceKey,(b=t).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,b.useFetchStreams));var d,b;i._firestoreClient=new Rm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function kd(i,e,t){const o=new dn;return i.asyncQueue.enqueue((0,U.Z)(function*(){try{yield Om(i,t),yield Np(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(d=u).name?d.code===se.FAILED_PRECONDITION||d.code===se.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var d})).then(()=>o.promise)}function Qp(i){if(i._initialized||i._terminated)throw new je(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new je(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _a{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _a(Kn.fromBase64String(e))}catch(t){throw new je(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _a(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yu{constructor(e){this._methodName=e}}class Pd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return On(this._lat,e._lat)||On(this._long,e._long)}}const T_=/^__.*__$/;class $m{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Ru(e,this.data,this.fieldMask,t,this.fieldTransforms):new au(e,this.data,t,this.fieldTransforms)}}class Xp{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Ru(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k()}}class Lc{constructor(e,t,o,u,d,y){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===d&&this.Ya(),this.fieldTransforms=d||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Lc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.nc(e),u}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.Ya(),u}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Fd(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(Jp(this.Xa)&&T_.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Hm{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||wd(e)}ac(e,t,o,u=!1){return new Lc({Xa:e,methodName:t,uc:o,path:cs.emptyPath(),ec:!1,oc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function el(i){const e=i._freezeSettings(),t=wd(i._databaseId);return new Hm(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Nd(i,e,t,o,u,d={}){const y=i.ac(d.merge||d.mergeFields?2:0,e,t,u);sg("Data must be an object, but it was:",y,o);const b=Is(o,y);let B,W;if(d.merge)B=new Zs(y.fieldMask),W=y.fieldTransforms;else if(d.mergeFields){const ue=[];for(const Ae of d.mergeFields){const Xe=og(e,Ae,t);if(!y.contains(Xe))throw new je(se.INVALID_ARGUMENT,`Field '${Xe}' is specified in your field mask but missing from your input data.`);ag(ue,Xe)||ue.push(Xe)}B=new Zs(ue),W=y.fieldTransforms.filter(Ae=>B.covers(Ae.field))}else B=null,W=y.fieldTransforms;return new $m(new z(b),B,W)}class Vc extends yu{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vc}}function eg(i,e,t){return new Lc({Xa:3,uc:e.settings.uc,methodName:i._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class cf extends yu{_toFieldTransform(e){return new xu(e.path,new ru)}isEqual(e){return e instanceof cf}}class Gm extends yu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=eg(this,e,!0),o=this.cc.map(d=>ql(d,t)),u=new iu(o);return new xu(e.path,u)}isEqual(e){return this===e}}class Wm extends yu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=eg(this,e,!0),o=this.cc.map(d=>ql(d,t)),u=new Mu(o);return new xu(e.path,u)}isEqual(e){return this===e}}class t0 extends yu{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new _l(e.M,Of(e.M,this.hc));return new xu(e.path,t)}isEqual(e){return this===e}}function tg(i,e,t,o){const u=i.ac(1,e,t);sg("Data must be an object, but it was:",u,o);const d=[],y=z.empty();Xa(o,(B,W)=>{const ue=df(e,B,t);W=(0,$e.m9)(W);const Ae=u.sc(ue);if(W instanceof Vc)d.push(ue);else{const Xe=ql(W,Ae);null!=Xe&&(d.push(ue),y.set(ue,Xe))}});const b=new Zs(d);return new Xp(y,b,u.fieldTransforms)}function ng(i,e,t,o,u,d){const y=i.ac(1,e,t),b=[og(e,o,t)],B=[u];if(d.length%2!=0)throw new je(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Xe=0;Xe<d.length;Xe+=2)b.push(og(e,d[Xe])),B.push(d[Xe+1]);const W=[],ue=z.empty();for(let Xe=b.length-1;Xe>=0;--Xe)if(!ag(W,b[Xe])){const dt=b[Xe];let ht=B[Xe];ht=(0,$e.m9)(ht);const tn=y.sc(dt);if(ht instanceof Vc)W.push(dt);else{const Fn=ql(ht,tn);null!=Fn&&(W.push(dt),ue.set(dt,Fn))}}const Ae=new Zs(W);return new Xp(ue,Ae,y.fieldTransforms)}function rg(i,e,t,o=!1){return ql(t,i.ac(o?4:3,e))}function ql(i,e){if(ig(i=(0,$e.m9)(i)))return sg("Unsupported field value:",e,i),Is(i,e);if(i instanceof yu)return function(t,o){if(!Jp(o.Xa))throw o.rc(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.rc(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const y of t){let b=ql(y,o.ic(d));null==b&&(b={nullValue:"NULL_VALUE"}),u.push(b),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,$e.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Of(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Li.fromDate(t);return{timestampValue:Ml(o.M,u)}}if(t instanceof Li){const u=new Li(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ml(o.M,u)}}if(t instanceof Pd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _a)return{bytesValue:$o(o.M,t._byteString)};if(t instanceof _i){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.rc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:xl(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.rc(`Unsupported field value: ${Rd(t)}`)}(i,e)}function Is(i,e){const t={};return Yc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xa(i,(o,u)=>{const d=ql(u,e.tc(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function ig(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Li||i instanceof Pd||i instanceof _a||i instanceof _i||i instanceof yu)}function sg(i,e,t){if(!ig(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Rd(t);throw e.rc("an object"===o?i+" a custom object":i+" "+o)}var o}function og(i,e,t){if((e=(0,$e.m9)(e))instanceof mu)return e._internalPath;if("string"==typeof e)return df(i,e);throw Fd("Field path arguments must be of type string or ",i,!1,void 0,t)}const zm=new RegExp("[~\\*/\\[\\]]");function df(i,e,t){if(e.search(zm)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new mu(...e.split("."))._internalPath}catch(o){throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Fd(i,e,t,o,u){const d=o&&!o.isEmpty(),y=void 0!==u;let b=`Function ${e}() called with invalid data`;t&&(b+=" (via `toFirestore()`)"),b+=". ";let B="";return(d||y)&&(B+=" (found",d&&(B+=` in field ${o}`),y&&(B+=` in document ${u}`),B+=")"),new je(se.INVALID_ARGUMENT,b+i+B)}function ag(i,e){return i.some(t=>t.isEqual(e))}class Wa{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new _i(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new A_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class A_ extends Wa{data(){return super.data()}}function hf(i,e){return"string"==typeof e?df(i,e):e instanceof mu?e._internalPath:e._delegate._internalPath}class tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _u extends Wa{constructor(e,t,o,u,d,y){super(e,t,o,u,y),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(hf("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Uc extends _u{data(e={}){return super.data(e)}}class Zl{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new tl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Uc(this._firestore,this._userDataWriter,o.key,o,new tl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(y=>({type:"added",doc:new Uc(o._firestore,o._userDataWriter,y.doc.key,y.doc,new tl(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(y=>u||3!==y.type).map(y=>{const b=new Uc(o._firestore,o._userDataWriter,y.doc.key,y.doc,new tl(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let B=-1,W=-1;return 0!==y.type&&(B=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),1!==y.type&&(d=d.add(y.doc),W=d.indexOf(y.doc.key)),{type:Km(y.type),doc:b,oldIndex:B,newIndex:W}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Km(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return k()}}function ff(i,e){return i instanceof _u&&e instanceof _u?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Zl&&e instanceof Zl&&i._firestore===e._firestore&&Lm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function va(i){if(bu(i)&&0===i.explicitOrderBy.length)throw new je(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ld{}function nl(i,...e){for(const t of e)i=t._apply(i);return i}class za extends Ld{constructor(e,t,o){super(),this.lc=e,this.fc=t,this.dc=o,this.type="where"}_apply(e){const t=el(e.firestore),o=function(u,d,y,b,B,W,ue){let Ae;if(B.isKeyField()){if("array-contains"===W||"array-contains-any"===W)throw new je(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${W}' queries on documentId().`);if("in"===W||"not-in"===W){dg(ue,W);const dt=[];for(const ht of ue)dt.push(cg(b,u,ht));Ae={arrayValue:{values:dt}}}else Ae=cg(b,u,ue)}else"in"!==W&&"not-in"!==W&&"array-contains-any"!==W||dg(ue,W),Ae=rg(y,"where",ue,"in"===W||"not-in"===W);const Xe=Ui.create(B,W,Ae);return function(dt,ht){if(ht.S()){const Fn=Tu(dt);if(null!==Fn&&!Fn.isEqual(ht.field))throw new je(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Fn.toString()}' and '${ht.field.toString()}'`);const Ei=Qd(dt);null!==Ei&&Vd(0,ht.field,Ei)}const tn=function(Fn,Ei){for(const ki of Fn.filters)if(Ei.indexOf(ki.op)>=0)return ki.op;return null}(dt,function(Fn){switch(Fn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ht.op));if(null!==tn)throw new je(se.INVALID_ARGUMENT,tn===ht.op?`Invalid query. You cannot use more than one '${ht.op.toString()}' filter.`:`Invalid query. You cannot use '${ht.op.toString()}' filters with '${tn.toString()}' filters.`)}(u,Xe),Xe}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new ro(e.firestore,e.converter,function(u,d){const y=u.filters.concat([d]);return new Do(u.path,u.collectionGroup,u.explicitOrderBy.slice(),y,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class wa extends Ld{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new je(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new je(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const y=new gl(u,d);return function(b,B){if(null===Qd(b)){const W=Tu(b);null!==W&&Vd(0,W,B.field)}}(o,y),y}(e._query,this.lc,this._c);return new ro(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Do(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ug extends Ld{constructor(e,t,o){super(),this.type=e,this.wc=t,this.mc=o}_apply(e){return new ro(e.firestore,e.converter,oc(e._query,this.wc,this.mc))}}class Zm extends Ld{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new ro(e.firestore,e.converter,(u=t,new Do((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class Bc extends Ld{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new ro(e.firestore,e.converter,(u=t,new Do((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function Qm(i,e,t,o){if(t[0]=(0,$e.m9)(t[0]),t[0]instanceof Wa)return function(u,d,y,b,B){if(!b)throw new je(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${y}().`);const W=[];for(const ue of nu(u))if(ue.field.isKeyField())W.push(Uo(d,b.key));else{const Ae=b.data.field(ue.field);if(rs(Ae))throw new je(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ae){const Xe=ue.field.canonicalString();throw new je(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Xe}' (used as the orderBy) does not exist.`)}W.push(Ae)}return new Bo(W,B)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=el(i.firestore);return function(d,y,b,B,W,ue){const Ae=d.explicitOrderBy;if(W.length>Ae.length)throw new je(se.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Xe=[];for(let dt=0;dt<W.length;dt++){const ht=W[dt];if(Ae[dt].field.isKeyField()){if("string"!=typeof ht)throw new je(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof ht}`);if(!ml(d)&&-1!==ht.indexOf("/"))throw new je(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${ht}' contains a slash.`);const tn=d.path.child(fr.fromString(ht));if(!Mt.isDocumentKey(tn))throw new je(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${tn}' is not because it contains an odd number of segments.`);const Fn=new Mt(tn);Xe.push(Uo(y,Fn))}else{const tn=rg(b,B,ht);Xe.push(tn)}}return new Bo(Xe,ue)}(i._query,i.firestore._databaseId,u,e,t,o)}}function cg(i,e,t){if("string"==typeof(t=(0,$e.m9)(t))){if(""===t)throw new je(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ml(e)&&-1!==t.indexOf("/"))throw new je(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(fr.fromString(t));if(!Mt.isDocumentKey(o))throw new je(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Uo(i,new Mt(o))}if(t instanceof _i)return Uo(i,t._key);throw new je(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(t)}.`)}function dg(i,e){if(!Array.isArray(i)||0===i.length)throw new je(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new je(se.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Vd(i,e,t){if(!t.isEqual(e))throw new je(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class hg{convertValue(e,t="none"){switch(Wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw k()}}convertObject(e,t){const o={};return Xa(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Pd(Ri(e.latitude),Ri(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=$s(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(ka(e));default:return null}}convertTimestamp(e){const t=js(e);return new Li(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=fr.fromString(e);$(Dn(o));const u=new Gi(o.get(1),o.get(3)),d=new Mt(o.popFirst(5));return u.isEqual(t)||E(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Ud(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Xm extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new _a(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _i(this.firestore,null,t)}}class pf{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=el(e)}set(e,t,o){this._verifyNotCommitted();const u=Ia(e,this._firestore),d=Ud(u.converter,t,o),y=Nd(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(y.toMutation(u._key,zi.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=Ia(e,this._firestore);let y;return y="string"==typeof(t=(0,$e.m9)(t))||t instanceof mu?ng(this._dataReader,"WriteBatch.update",d._key,t,o,u):tg(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(y.toMutation(d._key,zi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ia(e,this._firestore);return this._mutations=this._mutations.concat(new Il(t._key,zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new je(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ia(i,e){if((i=(0,$e.m9)(i)).firestore!==e)throw new je(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class rl extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new _a(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _i(this.firestore,null,t)}}function fg(i,e,t){i=Sr(i,_i);const o=Sr(i.firestore,vi),u=Ud(i.converter,e,t);return jc(o,[Nd(el(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,zi.none())])}function sy(i,e,t,...o){i=Sr(i,_i);const u=Sr(i.firestore,vi),d=el(u);let y;return y="string"==typeof(e=(0,$e.m9)(e))||e instanceof mu?ng(d,"updateDoc",i._key,e,t,o):tg(d,"updateDoc",i._key,e),jc(u,[y.toMutation(i._key,zi.exists(!0))])}function oy(i,...e){var t,o,u;i=(0,$e.m9)(i);let d={includeMetadataChanges:!1},y=0;"object"!=typeof e[y]||Kl(e[y])||(d=e[y],y++);const b={includeMetadataChanges:d.includeMetadataChanges};if(Kl(e[y])){const Ae=e[y];e[y]=null===(t=Ae.next)||void 0===t?void 0:t.bind(Ae),e[y+1]=null===(o=Ae.error)||void 0===o?void 0:o.bind(Ae),e[y+2]=null===(u=Ae.complete)||void 0===u?void 0:u.bind(Ae)}let B,W,ue;if(i instanceof _i)W=Sr(i.firestore,vi),ue=jo(i._key.path),B={next:Ae=>{e[y]&&e[y](pg(W,i,Ae))},error:e[y+1],complete:e[y+2]};else{const Ae=Sr(i,ro);W=Sr(Ae.firestore,vi),ue=Ae._query;const Xe=new rl(W);B={next:dt=>{e[y]&&e[y](new Zl(W,Xe,Ae,dt))},error:e[y+1],complete:e[y+2]},va(i._query)}return function(Ae,Xe,dt,ht){const tn=new Sd(ht),Fn=new qh(Xe,tn,dt);return Ae.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return vp(yield Ju(Ae),Fn)})),()=>{tn.Ia(),Ae.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return wp(yield Ju(Ae),Fn)}))}}(qi(W),ue,b,B)}function jc(i,e){return function(t,o){const u=new dn;return t.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function wm(i,e,t){return Im.apply(this,arguments)}(yield Up(t),o,u)})),u.promise}(qi(i),e)}function pg(i,e,t){const o=t.docs.get(e._key),u=new rl(i);return new _u(i,u,e._key,o,new tl(t.hasPendingWrites,t.fromCache),e.converter)}class N_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=el(e)}get(e){const t=Ia(e,this._firestore),o=new Xm(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return k();const d=u[0];if(d.isFoundDocument())return new Wa(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new Wa(this._firestore,o,t._key,null,t.converter);throw k()})}set(e,t,o){const u=Ia(e,this._firestore),d=Ud(u.converter,t,o),y=Nd(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,y),this}update(e,t,o,...u){const d=Ia(e,this._firestore);let y;return y="string"==typeof(t=(0,$e.m9)(t))||t instanceof mu?ng(this._dataReader,"Transaction.update",d._key,t,o,u):tg(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,y),this}delete(e){const t=Ia(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ia(e,this._firestore),o=new rl(this._firestore);return super.get(e).then(u=>new _u(this._firestore,o,t._key,u._document,new tl(!1,!1),t.converter))}}function gf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new je("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function gg(){if("undefined"==typeof Uint8Array)throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function mg(){if(!function zd(){return"undefined"!=typeof atob}())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){qo=Y.SDK_VERSION,(0,Y._registerComponent)(new ve.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),d=new vi(u,new Bs(t.getProvider("auth-internal")),new Eo(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC")),(0,Y.registerVersion)(la,"3.4.8",i),(0,Y.registerVersion)(la,"3.4.8","esm2017")}();class $c{constructor(e){this._delegate=e}static fromBase64String(e){return mg(),new $c(_a.fromBase64String(e))}static fromUint8Array(e){return gg(),new $c(_a.fromUint8Array(e))}toBase64(){return mg(),this._delegate.toBase64()}toUint8Array(){return gg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mf(i){return function ly(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class cy{enableIndexedDbPersistence(e,t){return function e0(i,e){Qp(i=Sr(i,vi));const t=qi(i),o=i._freezeSettings(),u=new ef;return kd(t,u,new kp(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function D_(i){Qp(i=Sr(i,vi));const e=qi(i),t=i._freezeSettings(),o=new ef;return kd(e,o,new Sm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function lf(i){if(i._initialized&&!i._terminated)throw new je(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new dn;return i._queue.enqueueAndForgetEvenWhileRestricted((0,U.Z)(function*(){try{yield(t=(0,U.Z)(function*(o){if(!ha.vt())return Promise.resolve();const u=o+"main";yield ha.delete(u)}),function(o){return t.apply(this,arguments)})(Sh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class yg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&v("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function I_(i,e,t,o={}){var u;const d=(i=Sr(i,Od))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&v("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let y,b;if("string"==typeof o.mockUserToken)y=o.mockUserToken,b=xi.MOCK_USER;else{y=(0,$e.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const B=o.mockUserToken.sub||o.mockUserToken.user_id;if(!B)throw new je(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new xi(B)}i._authCredentials=new or(new zt(y,b))}}(this._delegate,e,t,o)}enableNetwork(){return function Bm(i){return function y_(i){return i.asyncQueue.enqueue((0,U.Z)(function*(){const e=yield km(i),t=yield m_(i);return e.setNetworkEnabled(!0),function(o){const u=te(o);return u.fu.delete(0),Fh(u)}(t)}))}(qi(i=Sr(i,vi)))}(this._delegate)}disableNetwork(){return function Zp(i){return function Zv(i){return i.asyncQueue.enqueue((0,U.Z)(function*(){const e=yield km(i),t=yield m_(i);return e.setNetworkEnabled(!1),(o=(0,U.Z)(function*(u){const d=te(u);d.fu.add(0),yield Sc(d),d.wu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(qi(i=Sr(i,vi)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Hp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Um(i){return function(e){const t=new dn;return e.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function Ap(i,e){return Sp.apply(this,arguments)}(yield Up(e),t)})),t.promise}(qi(i=Sr(i,vi)))}(this._delegate)}onSnapshotsInSync(e){return function P_(i,e){return function Qv(i,e){const t=new Sd(e);return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return o=yield Ju(i),u=t,te(o).Eu.add(u),void u.next();var o,u})),()=>{t.Ia(),i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return o=yield Ju(i),u=t,void te(o).Eu.delete(u);var o,u}))}}(qi(i=Sr(i,vi)),Kl(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wc(this,Gp(this._delegate,e))}catch(t){throw So(t,"collection()","Firestore.collection()")}}doc(e){try{return new Hs(this,zp(this._delegate,e))}catch(t){throw So(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Mo(this,function Wp(i,e){if(i=Sr(i,Od),$p("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new je(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ro(i,null,(t=e,new Do(fr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw So(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F_(i,e){return function E_(i,e){const t=new dn;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){const o=yield(u=i,rf(u).then(d=>d.datastore));var u;new g_(i.asyncQueue,o,e,t).run()})),t.promise}(qi(i=Sr(i,vi)),t=>e(new N_(i,t)))}(this._delegate,t=>e(new il(this,t)))}batch(){return qi(this._delegate),new hy(new pf(this._delegate,e=>jc(this._delegate,e)))}loadBundle(e){return function jm(i,e){const t=qi(i=Sr(i,vi)),o=new Vm;return function Fc(i,e,t,o){const u=function(d,y){let b;return b="string"==typeof d?(new TextEncoder).encode(d):d,B=function(B,W){if(B instanceof Uint8Array)return Pp(B,W);if(B instanceof ArrayBuffer)return Pp(new Uint8Array(B),W);if(B instanceof ReadableStream)return B.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(b),new Mm(B,y);var B}(t,wd(e));i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){!function Am(i,e,t){const o=te(i);var u;(u=(0,U.Z)(function*(d,y,b){try{const B=yield y.getMetadata();if(yield function(Xe,dt){const ht=te(Xe),tn=ws(dt.createTime);return ht.persistence.runTransaction("hasNewerBundle","readonly",Fn=>ht._s.getBundleMetadata(Fn,dt.id)).then(Fn=>!!Fn&&Fn.createTime.compareTo(tn)>=0)}(d.localStore,B))return yield y.close(),b._completeWith({taskState:"Success",documentsLoaded:(Xe=B).totalDocuments,bytesLoaded:Xe.totalBytes,totalDocuments:Xe.totalDocuments,totalBytes:Xe.totalBytes}),Promise.resolve(new Set);b._updateProgress(gm(B));const W=new o_(B,d.localStore,y.M);let ue=yield y.da();for(;ue;){const Xe=yield W.ku(ue);Xe&&b._updateProgress(Xe),ue=yield y.da()}const Ae=yield W.complete();return yield ia(d,Ae.Fu,void 0),yield function(Xe,dt){const ht=te(Xe);return ht.persistence.runTransaction("Save bundle","readwrite",tn=>ht._s.saveBundleMetadata(tn,dt))}(d.localStore,B),b._completeWith(Ae.progress),Promise.resolve(Ae.Ou)}catch(B){return v("SyncEngine",`Loading bundle failed with ${B}`),b._failWith(B),Promise.resolve(new Set)}var Xe}),function(d,y,b){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Up(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Yp(i,e){return function w_(i,e){return i.asyncQueue.enqueue((0,U.Z)(function*(){return function(t,o){const u=te(t);return u.persistence.runTransaction("Get named query","readonly",d=>u._s.getNamedQuery(d,o))}(yield Vp(i),e)}))}(qi(i=Sr(i,vi)),e).then(t=>t?new ro(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Mo(this,t):null)}}class Bd extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new $c(new _a(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Hs.forKey(t,this.firestore,null)}}class il{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}get(e){const t=Ql(e);return this._delegate.get(t).then(o=>new Hc(this._firestore,new _u(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Ql(e);return o?(gf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Ql(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Ql(e);return this._delegate.delete(t),this}}class hy{constructor(e){this._delegate=e}set(e,t,o){const u=Ql(e);return o?(gf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Ql(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Ql(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Yl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Uc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gc(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Yl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Yl(e,new Bd(e),t),u.set(t,d)),d}}Yl.INSTANCES=new WeakMap;class Hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Hs(t,new _i(t._delegate,o,new Mt(e)))}static forKey(e,t,o){return new Hs(t,new _i(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Wc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wc(this.firestore,Gp(this._delegate,e))}catch(t){throw So(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,$e.m9)(e))instanceof _i&&af(this._delegate,e)}set(e,t){t=gf("DocumentReference.set",t);try{return t?fg(this._delegate,e,t):fg(this._delegate,e)}catch(o){throw So(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?sy(this._delegate,e):sy(this._delegate,e,t,...o)}catch(u){throw So(u,"updateDoc()","DocumentReference.update()")}}delete(){return function O_(i){return jc(Sr(i.firestore,vi),[new Il(i._key,zi.none())])}(this._delegate)}onSnapshot(...e){const t=yf(e),o=H_(e,u=>new Hc(this.firestore,new _u(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return oy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ey(i){i=Sr(i,_i);const e=Sr(i.firestore,vi),t=qi(e),o=new rl(e);return function Yv(i,e){const t=new dn;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return(o=(0,U.Z)(function*(u,d,y){try{const b=yield function(B,W){const ue=te(B);return ue.persistence.runTransaction("read document","readonly",Ae=>ue.ci.Ls(Ae,W))}(u,d);b.isFoundDocument()?y.resolve(b):b.isNoDocument()?y.resolve(null):y.reject(new je(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(b){const B=Hl(b,`Failed to get document '${d} from cache`);y.reject(B)}}),function(u,d,y){return o.apply(this,arguments)})(yield Vp(i),e,t);var o})),t.promise}(t,i._key).then(u=>new _u(e,o,i._key,u,new tl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ty(i){i=Sr(i,_i);const e=Sr(i.firestore,vi);return __(qi(e),i._key,{source:"server"}).then(t=>pg(e,i,t))}(this._delegate):function Jm(i){i=Sr(i,_i);const e=Sr(i.firestore,vi);return __(qi(e),i._key).then(t=>pg(e,i,t))}(this._delegate),t.then(o=>new Hc(this.firestore,new _u(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Hs(this.firestore,this._delegate.withConverter(e?Yl.getInstance(this.firestore,e):null))}}function So(i,e,t){return i.message=i.message.replace(e,t),i}function yf(i){for(const e of i)if("object"==typeof e&&!mf(e))return e;return{}}function H_(i,e){var t,o;let u;return u=mf(i[0])?i[0]:mf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Hc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Hs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ff(this._delegate,e._delegate)}}class Gc extends Hc{data(e){const t=this._delegate.data(e);return function oe(i,e){i||k()}(void 0!==t),t}}class Mo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}where(e,t,o){try{return new Mo(this.firestore,nl(this._delegate,function Ea(i,e,t){const o=e,u=hf("where",i);return new za(u,o,t)}(e,t,o)))}catch(u){throw So(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Mo(this.firestore,nl(this._delegate,function qm(i,e="asc"){const t=e,o=hf("orderBy",i);return new wa(o,t)}(e,t)))}catch(o){throw So(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Mo(this.firestore,nl(this._delegate,function S_(i){return Nm("limit",i),new ug("limit",i,"F")}(e)))}catch(t){throw So(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Mo(this.firestore,nl(this._delegate,function M_(i){return Nm("limitToLast",i),new ug("limitToLast",i,"L")}(e)))}catch(t){throw So(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Mo(this.firestore,nl(this._delegate,function x_(...i){return new Zm("startAt",i,!0)}(...e)))}catch(t){throw So(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Mo(this.firestore,nl(this._delegate,function lg(...i){return new Zm("startAfter",i,!1)}(...e)))}catch(t){throw So(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Mo(this.firestore,nl(this._delegate,function R_(...i){return new Bc("endBefore",i,!1)}(...e)))}catch(t){throw So(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Mo(this.firestore,nl(this._delegate,function Ym(...i){return new Bc("endAt",i,!0)}(...e)))}catch(t){throw So(t,"endAt()","Query.endAt()")}}isEqual(e){return Lm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ry(i){i=Sr(i,ro);const e=Sr(i.firestore,vi),t=qi(e),o=new rl(e);return function v_(i,e){const t=new dn;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return(o=(0,U.Z)(function*(u,d,y){try{const b=yield fu(u,d,!0),B=new bp(d,b.li),W=B.Gu(b.documents),ue=B.applyChanges(W,!1);y.resolve(ue.snapshot)}catch(b){const B=Hl(b,`Failed to execute query '${d} against cache`);y.reject(B)}}),function(u,d,y){return o.apply(this,arguments)})(yield Vp(i),e,t);var o})),t.promise}(t,i._query).then(u=>new Zl(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function iy(i){i=Sr(i,ro);const e=Sr(i.firestore,vi),t=qi(e),o=new rl(e);return Bp(t,i._query,{source:"server"}).then(u=>new Zl(e,o,i,u))}(this._delegate):function ny(i){i=Sr(i,ro);const e=Sr(i.firestore,vi),t=qi(e),o=new rl(e);return va(i._query),Bp(t,i._query).then(u=>new Zl(e,o,i,u))}(this._delegate),t.then(o=>new _g(this.firestore,new Zl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=yf(e),o=H_(e,u=>new _g(this.firestore,new Zl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return oy(this._delegate,t,o)}withConverter(e){return new Mo(this.firestore,this._delegate.withConverter(e?Yl.getInstance(this.firestore,e):null))}}class An{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _g{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Mo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new An(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Gc(this._firestore,o))})}isEqual(e){return ff(this._delegate,e._delegate)}}class Wc extends Mo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Hs(this.firestore,e):null}doc(e){try{return new Hs(this.firestore,void 0===e?zp(this._delegate):zp(this._delegate,e))}catch(t){throw So(t,"doc()","CollectionReference.doc()")}}add(e){return function k_(i,e){const t=Sr(i.firestore,vi),o=zp(i),u=Ud(i.converter,e);return jc(t,[Nd(el(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,zi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Hs(this.firestore,t))}isEqual(e){return af(this._delegate,e._delegate)}withConverter(e){return new Wc(this.firestore,this._delegate.withConverter(e?Yl.getInstance(this.firestore,e):null))}}function Ql(i){return Sr(i,_i)}class zc{constructor(...e){this._delegate=new mu(...e)}static documentId(){return new zc(cs.keyField().canonicalString())}isEqual(e){return(e=(0,$e.m9)(e))instanceof mu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function V_(){return new cf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xl(e)}static delete(){const e=function L_(){return new Vc("deleteField")}();return e._methodName="FieldValue.delete",new Xl(e)}static arrayUnion(...e){const t=function U_(...i){return new Gm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Xl(t)}static arrayRemove(...e){const t=function B_(...i){return new Wm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Xl(t)}static increment(e){const t=function j_(i){return new t0("increment",i)}(e);return t._methodName="FieldValue.increment",new Xl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _f={Firestore:yg,GeoPoint:Pd,Timestamp:Li,Blob:$c,Transaction:il,WriteBatch:hy,DocumentReference:Hs,DocumentSnapshot:Hc,Query:Mo,QueryDocumentSnapshot:Gc,QuerySnapshot:_g,CollectionReference:Wc,FieldPath:zc,FieldValue:Xl,setLogLevel:function dy(i){!function _o(i){_s.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function ss(i){(function vf(i,e){i.INTERNAL.registerComponent(new ve.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},_f)))})(i,(e,t)=>new yg(e,t,new cy)),i.registerVersion("@firebase/firestore-compat","0.1.17")}(j.Z);var Jl=F(1205),fy=F(440),G_=F(127);function vg(i,e){return function W_(i,e=q.z){return new Q.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function Ef(i,e){return vg(i,e).pipe((0,Qe.U)(t=>({payload:t,type:"query"})))}function jd(i,e){return Ef(i,e).pipe((0,ut.O)(void 0),Ne(),(0,Qe.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(y=>({type:y.type,payload:y}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((y,b)=>{const B=u.find(ue=>ue.doc.ref.isEqual(y.ref)),W=null==t?void 0:t.payload.docs.find(ue=>ue.ref.isEqual(y.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(y.metadata)||!B&&W&&JSON.stringify(W.metadata)===JSON.stringify(y.metadata)||d.push({type:"modified",payload:{oldIndex:b,newIndex:b,type:"modified",doc:y}})}),d}))}function gy(i,e,t){return jd(i,t).pipe((0,Ze.R)((o,u)=>function z_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function $d(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Eg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Eg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Eg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function ie(i,e=ce.y){return i=null!=i?i:Te,(0,Oe.e)((t,o)=>{let u,d=!0;t.subscribe((0,Pe.x)(o,y=>{const b=e(y);(d||!i(u,b))&&(d=!1,u=b,o.next(y))}))})}(),(0,Qe.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Eg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function my(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class yy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=jd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Qe.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,ut.O)(void 0),Ne(),(0,gt.h)(([o,u])=>u.length>0||!o),(0,Qe.U)(([o,u])=>u),Se.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ze.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return Ef(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Se.iC)}get(e){return(0,Ee.D)(this.query.get(e)).pipe(Se.iC)}add(e){return this.ref.add(e)}doc(e){return new _y(this.ref.doc(e),this.afs)}}class _y{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=Kc(o,t);return new yy(u,d,this.afs)}snapshotChanges(){return function py(i,e){return vg(i,e).pipe((0,ut.O)(void 0),Ne(),(0,Qe.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Qe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ee.D)(this.ref.get(e)).pipe(Se.iC)}}class wf{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jd(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,gt.h)(t=>t.length>0),Se.iC):jd(this.query,this.afs.schedulers.outsideAngular).pipe(Se.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ze.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return Ef(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Se.iC)}get(e){return(0,Ee.D)(this.query.get(e)).pipe(Se.iC)}}const wg=new p.OlP("angularfire2.enableFirestorePersistence"),Ig=new p.OlP("angularfire2.firestore.persistenceSettings"),vy=new p.OlP("angularfire2.firestore.settings"),K_=new p.OlP("angularfire2.firestore.use-emulator");function Kc(i,e=(t=>t)){return{query:e(i),ref:i}}let qc=(()=>{class i{constructor(t,o,u,d,y,b,B,W,ue,Ae,Xe,dt,ht,tn,Fn,Ei,ki){this.schedulers=B;const ai=(0,ze.on)(t,b,o),Ds=ue;Ae&&(0,Jl.nw)(ai,b,Xe,ht,tn,Fn,dt,Ei),[this.firestore,this.persistenceEnabled$]=(0,ze.cc)(`${ai.name}.firestore`,"AngularFirestore",ai.name,()=>{const Pi=b.runOutsideAngular(()=>ai.firestore());if(d&&Pi.settings(d),Ds&&Pi.useEmulator(...Ds),u&&!(0,Le.PM)(y)){const Zi=()=>{try{return(0,Ee.D)(Pi.enablePersistence(W||void 0).then(()=>!0,()=>!1))}catch(io){return"undefined"!=typeof console&&console.warn(io),(0,ye.of)(!1)}};return[Pi,b.runOutsideAngular(Zi)]}return[Pi,(0,ye.of)(!1)]},[d,Ds,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:y}=Kc(u,o),b=this.schedulers.ngZone.run(()=>d);return new yy(b,y,this)}collectionGroup(t,o){const u=o||(y=>y),d=this.firestore.collectionGroup(t);return new wf(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new _y(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(ze.Dh),p.LFG(ze.xv,8),p.LFG(wg,8),p.LFG(vy,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Se.HU),p.LFG(Ig,8),p.LFG(K_,8),p.LFG(Jl.zQ,8),p.LFG(Jl.Qv,8),p.LFG(Jl.L6,8),p.LFG(Jl._Q,8),p.LFG(Jl.rT,8),p.LFG(Jl.lh,8),p.LFG(Jl.f7,8),p.LFG(fy.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),q_=(()=>{class i{constructor(){G_.Z.registerVersion("angularfire",Se.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:wg,useValue:!0},{provide:Ig,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[qc]}),i})()},2084:(Tt,We,F)=>{F.d(We,{Q1:()=>Os,TE:()=>S});var p=F(9751),q=F(9646),Q=F(8996),Ee=F(4986),ye=F(4482),Se=F(5403),Pe=F(4004),Ne=F(3900),ce=F(5813),ie=F(5e3),Te=F(2011),ut=F(3942),Qe=F(5861),Ze=F(9681),gt=F(2090),ze=F(4859);const Le="firebasestorage.googleapis.com",Et="storageBucket";class Y extends gt.ZR{constructor(C,K){super(ve(C),`Firebase Storage: ${K} (${ve(C)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Y.prototype)}_codeEquals(C){return ve(C)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(C){this.customData.serverResponse=C,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ve(m){return"storage/"+m}function Ve(){return new Y("unknown","An unknown error occurred, please check the error payload for server response.")}function Ge(){return new Y("canceled","User canceled the upload/download.")}function Wt(){return new Y("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $t(m){return new Y("invalid-argument",m)}function It(){return new Y("app-deleted","The Firebase app was deleted.")}function xt(m){return new Y("invalid-root-operation","The operation '"+m+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lt(m,C){return new Y("invalid-format","String does not match format '"+m+"': "+C)}function ln(m){throw new Y("internal-error","Internal error: "+m)}class kt{constructor(C,K){this.bucket=C,this.path_=K}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const C=encodeURIComponent;return"/b/"+C(this.bucket)+"/o/"+C(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(C,K){let ee;try{ee=kt.makeFromUrl(C,K)}catch(De){return new kt(C,"")}if(""===ee.path)return ee;throw function Vt(m){return new Y("invalid-default-bucket","Invalid default bucket '"+m+"'.")}(C)}static makeFromUrl(C,K){let ee=null;const De="([A-Za-z0-9.\\-_]+)",Lt=new RegExp("^gs://"+De+"(/(.*))?$","i");function _n(si){si.path_=decodeURIComponent(si.path)}const Br=K.replace(/[.]/g,"\\."),Wr=[{regex:Lt,indices:{bucket:1,path:3},postModify:function Ke(si){"/"===si.path.charAt(si.path.length-1)&&(si.path_=si.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Br}/v[A-Za-z0-9_]+/b/${De}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_n},{regex:new RegExp(`^https?://${K===Le?"(?:storage.googleapis.com|storage.cloud.google.com)":K}/${De}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_n}];for(let si=0;si<Wr.length;si++){const Tr=Wr[si],ms=Tr.regex.exec(C);if(ms){let Ls=ms[Tr.indices.path];Ls||(Ls=""),ee=new kt(ms[Tr.indices.bucket],Ls),Tr.postModify(ee);break}}if(null==ee)throw function Ue(m){return new Y("invalid-url","Invalid URL '"+m+"'.")}(C);return ee}}class nn{constructor(C){this.promise_=Promise.reject(C)}getPromise(){return this.promise_}cancel(C=!1){}}function Gn(m){return"string"==typeof m||m instanceof String}function wr(m){return Ln()&&m instanceof Blob}function Ln(){return"undefined"!=typeof Blob}function Ut(m,C,K,ee){if(ee<C)throw $t(`Invalid value for '${m}'. Expected ${C} or greater.`);if(ee>K)throw $t(`Invalid value for '${m}'. Expected ${K} or less.`)}function Ht(m,C,K){let ee=C;return null==K&&(ee=`https://${C}`),`${K}://${ee}/v0${m}`}function wn(m){const C=encodeURIComponent;let K="?";for(const ee in m)m.hasOwnProperty(ee)&&(K=K+(C(ee)+"=")+C(m[ee])+"&");return K=K.slice(0,-1),K}var sn=(()=>{return(m=sn||(sn={}))[m.NO_ERROR=0]="NO_ERROR",m[m.NETWORK_ERROR=1]="NETWORK_ERROR",m[m.ABORT=2]="ABORT",sn;var m})();class Pr{constructor(C,K,ee,De,Ke,it,Lt,St,_n,$n,Br){this.url_=C,this.method_=K,this.headers_=ee,this.body_=De,this.successCodes_=Ke,this.additionalRetryCodes_=it,this.callback_=Lt,this.errorCallback_=St,this.timeout_=_n,this.progressCallback_=$n,this.connectionFactory_=Br,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((dr,zn)=>{this.resolve_=dr,this.reject_=zn,this.start_()})}start_(){const K=(ee,De)=>{const Ke=this.resolve_,it=this.reject_,Lt=De.connection;if(De.wasSuccessCode)try{const St=this.callback_(Lt,Lt.getResponse());!function lr(m){return void 0!==m}(St)?Ke():Ke(St)}catch(St){it(St)}else if(null!==Lt){const St=Ve();St.serverResponse=Lt.getErrorText(),it(this.errorCallback_?this.errorCallback_(Lt,St):St)}else it(De.canceled?this.appDelete_?It():Ge():function pe(){return new Y("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?K(0,new pi(!1,null,!0)):this.backoffId_=function Hn(m,C,K){let ee=1,De=null,Ke=null,it=!1,Lt=0;function St(){return 2===Lt}let _n=!1;function $n(...hr){_n||(_n=!0,C.apply(null,hr))}function Br(hr){De=setTimeout(()=>{De=null,m(zn,St())},hr)}function dr(){Ke&&clearTimeout(Ke)}function zn(hr,...ii){if(_n)return void dr();if(hr)return dr(),void $n.call(null,hr,...ii);if(St()||it)return dr(),void $n.call(null,hr,...ii);let Wr;ee<64&&(ee*=2),1===Lt?(Lt=2,Wr=0):Wr=1e3*(ee+Math.random()),Br(Wr)}let Zn=!1;function yi(hr){Zn||(Zn=!0,dr(),!_n&&(null!==De?(hr||(Lt=2),clearTimeout(De),Br(0)):hr||(Lt=1)))}return Br(0),Ke=setTimeout(()=>{it=!0,yi(!0)},K),yi}((ee,De)=>{if(De)return void ee(!1,new pi(!1,null,!0));const Ke=this.connectionFactory_();this.pendingConnection_=Ke;const it=Lt=>{null!==this.progressCallback_&&this.progressCallback_(Lt.loaded,Lt.lengthComputable?Lt.total:-1)};null!==this.progressCallback_&&Ke.addUploadProgressListener(it),Ke.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ke.removeUploadProgressListener(it),this.pendingConnection_=null;const Lt=Ke.getErrorCode()===sn.NO_ERROR,St=Ke.getStatus();if(!Lt||this.isRetryStatusCode_(St)){const $n=Ke.getErrorCode()===sn.ABORT;return void ee(!1,new pi(!1,null,$n))}const _n=-1!==this.successCodes_.indexOf(St);ee(!0,new pi(_n,Ke))})},K,this.timeout_)}getPromise(){return this.promise_}cancel(C){this.canceled_=!0,this.appDelete_=C||!1,null!==this.backoffId_&&function Mn(m){m(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(C){const K=C>=500&&C<600,De=-1!==[408,429].indexOf(C),Ke=-1!==this.additionalRetryCodes_.indexOf(C);return K||De||Ke}}class pi{constructor(C,K,ee){this.wasSuccessCode=C,this.connection=K,this.canceled=!!ee}}function Zt(...m){const C=function Ot(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==C){const K=new C;for(let ee=0;ee<m.length;ee++)K.append(m[ee]);return K.getBlob()}if(Ln())return new Blob(m);throw new Y("unsupported-environment","This browser doesn't seem to support creating Blobs")}const fn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dr{constructor(C,K){this.data=C,this.contentType=K||null}}function pr(m,C){switch(m){case fn.RAW:return new Dr(xr(C));case fn.BASE64:case fn.BASE64URL:return new Dr(kr(m,C));case fn.DATA_URL:return new Dr(function Ct(m){const C=new Xt(m);return C.base64?kr(fn.BASE64,C.rest):function Yt(m){let C;try{C=decodeURIComponent(m)}catch(K){throw lt(fn.DATA_URL,"Malformed data URL.")}return xr(C)}(C.rest)}(C),function ot(m){return new Xt(m).contentType}(C))}throw Ve()}function xr(m){const C=[];for(let K=0;K<m.length;K++){let ee=m.charCodeAt(K);ee<=127?C.push(ee):ee<=2047?C.push(192|ee>>6,128|63&ee):55296==(64512&ee)?K<m.length-1&&56320==(64512&m.charCodeAt(K+1))?(ee=65536|(1023&ee)<<10|1023&m.charCodeAt(++K),C.push(240|ee>>18,128|ee>>12&63,128|ee>>6&63,128|63&ee)):C.push(239,191,189):56320==(64512&ee)?C.push(239,191,189):C.push(224|ee>>12,128|ee>>6&63,128|63&ee)}return new Uint8Array(C)}function kr(m,C){switch(m){case fn.BASE64:{const De=-1!==C.indexOf("-"),Ke=-1!==C.indexOf("_");if(De||Ke)throw lt(m,"Invalid character '"+(De?"-":"_")+"' found: is it base64url encoded?");break}case fn.BASE64URL:{const De=-1!==C.indexOf("+"),Ke=-1!==C.indexOf("/");if(De||Ke)throw lt(m,"Invalid character '"+(De?"+":"/")+"' found: is it base64 encoded?");C=C.replace(/-/g,"+").replace(/_/g,"/");break}}let K;try{K=function Qr(m){return atob(m)}(C)}catch(De){throw lt(m,"Invalid character found")}const ee=new Uint8Array(K.length);for(let De=0;De<K.length;De++)ee[De]=K.charCodeAt(De);return ee}class Xt{constructor(C){this.base64=!1,this.contentType=null;const K=C.match(/^data:([^,]+)?,/);if(null===K)throw lt(fn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const ee=K[1]||null;null!=ee&&(this.base64=function Pt(m,C){return m.length>=C.length&&m.substring(m.length-C.length)===C}(ee,";base64"),this.contentType=this.base64?ee.substring(0,ee.length-7):ee),this.rest=C.substring(C.indexOf(",")+1)}}class Nt{constructor(C,K){let ee=0,De="";wr(C)?(this.data_=C,ee=C.size,De=C.type):C instanceof ArrayBuffer?(K?this.data_=new Uint8Array(C):(this.data_=new Uint8Array(C.byteLength),this.data_.set(new Uint8Array(C))),ee=this.data_.length):C instanceof Uint8Array&&(K?this.data_=C:(this.data_=new Uint8Array(C.length),this.data_.set(C)),ee=C.length),this.size_=ee,this.type_=De}size(){return this.size_}type(){return this.type_}slice(C,K){if(wr(this.data_)){const De=function mr(m,C,K){return m.webkitSlice?m.webkitSlice(C,K):m.mozSlice?m.mozSlice(C,K):m.slice?m.slice(C,K):null}(this.data_,C,K);return null===De?null:new Nt(De)}{const ee=new Uint8Array(this.data_.buffer,C,K-C);return new Nt(ee,!0)}}static getBlob(...C){if(Ln()){const K=C.map(ee=>ee instanceof Nt?ee.data_:ee);return new Nt(Zt.apply(null,K))}{const K=C.map(it=>Gn(it)?pr(fn.RAW,it).data:it.data_);let ee=0;K.forEach(it=>{ee+=it.byteLength});const De=new Uint8Array(ee);let Ke=0;return K.forEach(it=>{for(let Lt=0;Lt<it.length;Lt++)De[Ke++]=it[Lt]}),new Nt(De,!0)}}uploadData(){return this.data_}}function pn(m){let C;try{C=JSON.parse(m)}catch(K){return null}return function Er(m){return"object"==typeof m&&!Array.isArray(m)}(C)?C:null}function ae(m){const C=m.lastIndexOf("/",m.length-2);return-1===C?m:m.slice(C+1)}function Ie(m,C){return C}class qe{constructor(C,K,ee,De){this.server=C,this.local=K||C,this.writable=!!ee,this.xform=De||Ie}}let Fe=null;function pt(){if(Fe)return Fe;const m=[];m.push(new qe("bucket")),m.push(new qe("generation")),m.push(new qe("metageneration")),m.push(new qe("name","fullPath",!0));const K=new qe("name");K.xform=function C(Ke,it){return function yt(m){return!Gn(m)||m.length<2?m:ae(m)}(it)},m.push(K);const De=new qe("size");return De.xform=function ee(Ke,it){return void 0!==it?Number(it):it},m.push(De),m.push(new qe("timeCreated")),m.push(new qe("updated")),m.push(new qe("md5Hash",null,!0)),m.push(new qe("cacheControl",null,!0)),m.push(new qe("contentDisposition",null,!0)),m.push(new qe("contentEncoding",null,!0)),m.push(new qe("contentLanguage",null,!0)),m.push(new qe("contentType",null,!0)),m.push(new qe("metadata","customMetadata",!0)),Fe=m,Fe}function yn(m,C,K){const ee=pn(C);return null===ee?null:function Rr(m,C,K){const ee={type:"file"},De=K.length;for(let Ke=0;Ke<De;Ke++){const it=K[Ke];ee[it.local]=it.xform(ee,C[it.server])}return function Cn(m,C){Object.defineProperty(m,"ref",{get:function K(){const Ke=new kt(m.bucket,m.fullPath);return C._makeStorageReference(Ke)}})}(ee,m),ee}(m,ee,K)}function Jt(m,C){const K={},ee=C.length;for(let De=0;De<ee;De++){const Ke=C[De];Ke.writable&&(K[Ke.server]=m[Ke.local])}return JSON.stringify(K)}const Nn="prefixes";class rr{constructor(C,K,ee,De){this.url=C,this.method=K,this.handler=ee,this.timeout=De,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qn(m){if(!m)throw Ve()}function ir(m,C){return function K(ee,De){const Ke=yn(m,De,C);return qn(null!==Ke),Ke}}function ct(m){return function C(K,ee){let De;return De=401===K.getStatus()?K.getErrorText().includes("Firebase App Check token is invalid")?function X(){return new Y("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function we(){return new Y("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===K.getStatus()?function ke(m){return new Y("quota-exceeded","Quota for bucket '"+m+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(m.bucket):403===K.getStatus()?function Ce(m){return new Y("unauthorized","User does not have permission to access '"+m+"'.")}(m.path):ee,De.serverResponse=ee.serverResponse,De}}function Ft(m){const C=ct(m);return function K(ee,De){let Ke=C(ee,De);return 404===ee.getStatus()&&(Ke=function $e(m){return new Y("object-not-found","Object '"+m+"' does not exist.")}(m.path)),Ke.serverResponse=De.serverResponse,Ke}}function cn(m,C,K){const De=Ht(C.fullServerUrl(),m.host,m._protocol),it=m.maxOperationRetryTime,Lt=new rr(De,"GET",ir(m,K),it);return Lt.errorHandler=Ft(C),Lt}function Jn(m,C,K,ee,De){const Ke={};Ke.prefix=C.isRoot?"":C.path+"/",K&&K.length>0&&(Ke.delimiter=K),ee&&(Ke.pageToken=ee),De&&(Ke.maxResults=De);const Lt=Ht(C.bucketOnlyServerUrl(),m.host,m._protocol),_n=m.maxOperationRetryTime,$n=new rr(Lt,"GET",function Ii(m,C){return function K(ee,De){const Ke=function wi(m,C,K){const ee=pn(K);return null===ee?null:function Xr(m,C,K){const ee={prefixes:[],items:[],nextPageToken:K.nextPageToken};if(K[Nn])for(const De of K[Nn]){const Ke=De.replace(/\/$/,""),it=m._makeStorageReference(new kt(C,Ke));ee.prefixes.push(it)}if(K.items)for(const De of K.items){const Ke=m._makeStorageReference(new kt(C,De.name));ee.items.push(Ke)}return ee}(m,C,ee)}(m,C,De);return qn(null!==Ke),Ke}}(m,C.bucket),_n);return $n.urlParams=Ke,$n.errorHandler=ct(C),$n}function di(m,C,K){const ee=Object.assign({},K);return ee.fullPath=m.path,ee.size=C.size(),ee.contentType||(ee.contentType=function _r(m,C){return m&&m.contentType||C&&C.type()||"application/octet-stream"}(null,C)),ee}class Nr{constructor(C,K,ee,De){this.current=C,this.total=K,this.finalized=!!ee,this.metadata=De||null}}function hi(m,C){let K=null;try{K=m.getResponseHeader("X-Goog-Upload-Status")}catch(De){qn(!1)}return qn(!!K&&-1!==(C||["active"]).indexOf(K)),K}const Lr={STATE_CHANGED:"state_changed"},xn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Tn(m){switch(m){case"running":case"pausing":case"canceling":return xn.RUNNING;case"paused":return xn.PAUSED;case"success":return xn.SUCCESS;case"canceled":return xn.CANCELED;default:return xn.ERROR}}class Bi{constructor(C,K,ee){if(function tr(m){return"function"==typeof m}(C)||null!=K||null!=ee)this.next=C,this.error=null!=K?K:void 0,this.complete=null!=ee?ee:void 0;else{const Ke=C;this.next=Ke.next,this.error=Ke.error,this.complete=Ke.complete}}}function Vr(m){return(...C)=>{Promise.resolve().then(()=>m(...C))}}class hs extends class zr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sn.NO_ERROR,this.sendPromise_=new Promise(C=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sn.ABORT,C()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sn.NETWORK_ERROR,C()}),this.xhr_.addEventListener("load",()=>{C()})})}send(C,K,ee,De){if(this.sent_)throw ln("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(K,C,!0),void 0!==De)for(const Ke in De)De.hasOwnProperty(Ke)&&this.xhr_.setRequestHeader(Ke,De[Ke].toString());return void 0!==ee?this.xhr_.send(ee):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ln("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ln("cannot .getStatus() before sending");try{return this.xhr_.status}catch(C){return-1}}getResponse(){if(!this.sent_)throw ln("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ln("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(C){return this.xhr_.getResponseHeader(C)}addUploadProgressListener(C){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",C)}removeUploadProgressListener(C){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",C)}}{initXhr(){this.xhr_.responseType="text"}}function gr(){return new hs}class ne{constructor(C,K,ee=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=C,this._blob=K,this._metadata=ee,this._mappings=pt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=De=>{this._request=void 0,this._chunkMultiplier=1,De._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=De,this._transition("error"))},this._metadataErrorHandler=De=>{this._request=void 0,De._codeEquals("canceled")?this.completeTransitions_():(this._error=De,this._transition("error"))},this._promise=new Promise((De,Ke)=>{this._resolve=De,this._reject=Ke,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const C=this._transferred;return K=>this._updateProgress(C+K)}_shouldDoResumable(C){return C.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(C){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([K,ee])=>{switch(this._state){case"running":C(K,ee);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((C,K)=>{const ee=function gi(m,C,K,ee,De){const Ke=C.bucketOnlyServerUrl(),it=di(C,ee,De),Lt={name:it.fullPath},St=Ht(Ke,m.host,m._protocol),$n={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${ee.size()}`,"X-Goog-Upload-Header-Content-Type":it.contentType,"Content-Type":"application/json; charset=utf-8"},Br=Jt(it,K),Zn=new rr(St,"POST",function zn(yi){let hr;hi(yi);try{hr=yi.getResponseHeader("X-Goog-Upload-URL")}catch(ii){qn(!1)}return qn(Gn(hr)),hr},m.maxUploadRetryTime);return Zn.urlParams=Lt,Zn.headers=$n,Zn.body=Br,Zn.errorHandler=ct(C),Zn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),De=this._ref.storage._makeRequest(ee,gr,C,K);this._request=De,De.getPromise().then(Ke=>{this._request=void 0,this._uploadUrl=Ke,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const C=this._uploadUrl;this._resolveToken((K,ee)=>{const De=function Cr(m,C,K,ee){const St=new rr(K,"POST",function Ke(_n){const $n=hi(_n,["active","final"]);let Br=null;try{Br=_n.getResponseHeader("X-Goog-Upload-Size-Received")}catch(zn){qn(!1)}Br||qn(!1);const dr=Number(Br);return qn(!isNaN(dr)),new Nr(dr,ee.size(),"final"===$n)},m.maxUploadRetryTime);return St.headers={"X-Goog-Upload-Command":"query"},St.errorHandler=ct(C),St}(this._ref.storage,this._ref._location,C,this._blob),Ke=this._ref.storage._makeRequest(De,gr,K,ee);this._request=Ke,Ke.getPromise().then(it=>{it=it,this._request=void 0,this._updateProgress(it.current),this._needToFetchStatus=!1,it.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const C=262144*this._chunkMultiplier,K=new Nr(this._transferred,this._blob.size()),ee=this._uploadUrl;this._resolveToken((De,Ke)=>{let it;try{it=function Fr(m,C,K,ee,De,Ke,it,Lt){const St=new Nr(0,0);if(it?(St.current=it.current,St.total=it.total):(St.current=0,St.total=ee.size()),ee.size()!==St.total)throw function mt(){return new Y("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _n=St.total-St.current;let $n=_n;De>0&&($n=Math.min($n,De));const Br=St.current,Zn={"X-Goog-Upload-Command":$n===_n?"upload, finalize":"upload","X-Goog-Upload-Offset":`${St.current}`},yi=ee.slice(Br,Br+$n);if(null===yi)throw Wt();const Wr=new rr(K,"POST",function hr(si,Tr){const ms=hi(si,["active","final"]),fo=St.current+$n,Ls=ee.size();let po;return po="final"===ms?ir(C,Ke)(si,Tr):null,new Nr(fo,Ls,"final"===ms,po)},C.maxUploadRetryTime);return Wr.headers=Zn,Wr.body=yi.uploadData(),Wr.progressCallback=Lt||null,Wr.errorHandler=ct(m),Wr}(this._ref._location,this._ref.storage,ee,this._blob,C,this._mappings,K,this._makeProgressCallback())}catch(St){return this._error=St,void this._transition("error")}const Lt=this._ref.storage._makeRequest(it,gr,De,Ke);this._request=Lt,Lt.getPromise().then(St=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(St.current),St.finalized?(this._metadata=St.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((C,K)=>{const ee=cn(this._ref.storage,this._ref._location,this._mappings),De=this._ref.storage._makeRequest(ee,gr,C,K);this._request=De,De.getPromise().then(Ke=>{this._request=void 0,this._metadata=Ke,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((C,K)=>{const ee=function mn(m,C,K,ee,De){const Ke=C.bucketOnlyServerUrl(),it={"X-Goog-Upload-Protocol":"multipart"},St=function Lt(){let Wr="";for(let si=0;si<2;si++)Wr+=Math.random().toString().slice(2);return Wr}();it["Content-Type"]="multipart/related; boundary="+St;const _n=di(C,ee,De),$n=Jt(_n,K),zn=Nt.getBlob("--"+St+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$n+"\r\n--"+St+"\r\nContent-Type: "+_n.contentType+"\r\n\r\n",ee,"\r\n--"+St+"--");if(null===zn)throw Wt();const Zn={name:_n.fullPath},yi=Ht(Ke,m.host,m._protocol),ii=m.maxUploadRetryTime,Hi=new rr(yi,"POST",ir(m,K),ii);return Hi.urlParams=Zn,Hi.headers=it,Hi.body=zn.uploadData(),Hi.errorHandler=ct(C),Hi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),De=this._ref.storage._makeRequest(ee,gr,C,K);this._request=De,De.getPromise().then(Ke=>{this._request=void 0,this._metadata=Ke,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(C){const K=this._transferred;this._transferred=C,this._transferred!==K&&this._notifyObservers()}_transition(C){if(this._state!==C)switch(C){case"canceling":case"pausing":this._state=C,void 0!==this._request&&this._request.cancel();break;case"running":const K="paused"===this._state;this._state=C,K&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=C,this._notifyObservers();break;case"canceled":this._error=Ge(),this._state=C,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const C=Tn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:C,metadata:this._metadata,task:this,ref:this._ref}}on(C,K,ee,De){const Ke=new Bi(K||void 0,ee||void 0,De||void 0);return this._addObserver(Ke),()=>{this._removeObserver(Ke)}}then(C,K){return this._promise.then(C,K)}catch(C){return this.then(null,C)}_addObserver(C){this._observers.push(C),this._notifyObserver(C)}_removeObserver(C){const K=this._observers.indexOf(C);-1!==K&&this._observers.splice(K,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(K=>{this._notifyObserver(K)})}_finishPromise(){if(void 0!==this._resolve){let C=!0;switch(Tn(this._state)){case xn.SUCCESS:Vr(this._resolve.bind(null,this.snapshot))();break;case xn.CANCELED:case xn.ERROR:Vr(this._reject.bind(null,this._error))();break;default:C=!1}C&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(C){switch(Tn(this._state)){case xn.RUNNING:case xn.PAUSED:C.next&&Vr(C.next.bind(C,this.snapshot))();break;case xn.SUCCESS:C.complete&&Vr(C.complete.bind(C))();break;default:C.error&&Vr(C.error.bind(C,this._error))()}}resume(){const C="paused"===this._state||"pausing"===this._state;return C&&this._transition("running"),C}pause(){const C="running"===this._state;return C&&this._transition("pausing"),C}cancel(){const C="running"===this._state||"pausing"===this._state;return C&&this._transition("canceling"),C}}class xe{constructor(C,K){this._service=C,this._location=K instanceof kt?K:kt.makeFromUrl(K,C.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(C,K){return new xe(C,K)}get root(){const C=new kt(this._location.bucket,"");return this._newRef(this._service,C)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ae(this._location.path)}get storage(){return this._service}get parent(){const C=function Kt(m){if(0===m.length)return null;const C=m.lastIndexOf("/");return-1===C?"":m.slice(0,C)}(this._location.path);if(null===C)return null;const K=new kt(this._location.bucket,C);return new xe(this._service,K)}_throwIfRoot(C){if(""===this._location.path)throw xt(C)}}function _t(m,C,K){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,Qe.Z)(function*(m,C,K){const De=yield Un(m,{pageToken:K});C.prefixes.push(...De.prefixes),C.items.push(...De.items),null!=De.nextPageToken&&(yield _t(m,C,De.nextPageToken))})).apply(this,arguments)}function Un(m,C){null!=C&&"number"==typeof C.maxResults&&Ut("options.maxResults",1,1e3,C.maxResults);const K=C||{},ee=Jn(m.storage,m._location,"/",K.pageToken,K.maxResults);return m.storage.makeRequestWithTokens(ee,gr)}function mi(m){m._throwIfRoot("getDownloadURL");const C=function er(m,C,K){const De=Ht(C.fullServerUrl(),m.host,m._protocol),it=m.maxOperationRetryTime,Lt=new rr(De,"GET",function Or(m,C){return function K(ee,De){const Ke=yn(m,De,C);return qn(null!==Ke),function Xn(m,C,K,ee){const De=pn(C);if(null===De||!Gn(De.downloadTokens))return null;const Ke=De.downloadTokens;if(0===Ke.length)return null;const it=encodeURIComponent;return Ke.split(",").map(_n=>{const Br=m.fullPath;return Ht("/b/"+it(m.bucket)+"/o/"+it(Br),K,ee)+wn({alt:"media",token:_n})})[0]}(Ke,De,m.host,m._protocol)}}(m,K),it);return Lt.errorHandler=Ft(C),Lt}(m.storage,m._location,pt());return m.storage.makeRequestWithTokens(C,gr).then(K=>{if(null===K)throw function Dt(){return new Y("no-download-url","The given file does not have any download URLs.")}();return K})}function Ci(m,C){const K=function ge(m,C){const K=C.split("/").filter(ee=>ee.length>0).join("/");return 0===m.length?K:m+"/"+K}(m._location.path,C),ee=new kt(m._location.bucket,K);return new xe(m.storage,ee)}function Ns(m,C){if(m instanceof us){const K=m;if(null==K._bucket)throw function wt(){return new Y("no-default-bucket","No default bucket found. Did you set the '"+Et+"' property when initializing the app?")}();const ee=new xe(K,K._bucket);return null!=C?Ns(ee,C):ee}return void 0!==C?Ci(m,C):m}function as(m,C){if(C&&function os(m){return/^[A-Za-z]+:\/\//.test(m)}(C)){if(m instanceof us)return function Ni(m,C){return new xe(m,C)}(m,C);throw $t("To use ref(service, url), the first argument must be a Storage instance.")}return Ns(m,C)}function bi(m,C){const K=null==C?void 0:C[Et];return null==K?null:kt.makeFromBucketSpec(K,m)}class us{constructor(C,K,ee,De,Ke){this.app=C,this._authProvider=K,this._appCheckProvider=ee,this._url=De,this._firebaseVersion=Ke,this._bucket=null,this._host=Le,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=De?kt.makeFromBucketSpec(De,this._host):bi(this._host,this.app.options)}get host(){return this._host}set host(C){this._host=C,this._bucket=null!=this._url?kt.makeFromBucketSpec(this._url,C):bi(C,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(C){Ut("time",0,Number.POSITIVE_INFINITY,C),this._maxUploadRetryTime=C}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(C){Ut("time",0,Number.POSITIVE_INFINITY,C),this._maxOperationRetryTime=C}_getAuthToken(){var C=this;return(0,Qe.Z)(function*(){if(C._overrideAuthToken)return C._overrideAuthToken;const K=C._authProvider.getImmediate({optional:!0});if(K){const ee=yield K.getToken();if(null!==ee)return ee.accessToken}return null})()}_getAppCheckToken(){var C=this;return(0,Qe.Z)(function*(){const K=C._appCheckProvider.getImmediate({optional:!0});return K?(yield K.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(C=>C.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(C){return new xe(this,C)}_makeRequest(C,K,ee,De){if(this._deleted)return new nn(It());{const Ke=function gn(m,C,K,ee,De,Ke){const it=wn(m.urlParams),Lt=m.url+it,St=Object.assign({},m.headers);return function an(m,C){C&&(m["X-Firebase-GMPID"]=C)}(St,C),function nr(m,C){null!==C&&C.length>0&&(m.Authorization="Firebase "+C)}(St,K),function Ir(m,C){m["X-Firebase-Storage-Version"]="webjs/"+(null!=C?C:"AppManager")}(St,Ke),function Hr(m,C){null!==C&&(m["X-Firebase-AppCheck"]=C)}(St,ee),new Pr(Lt,m.method,St,m.body,m.successCodes,m.additionalRetryCodes,m.handler,m.errorHandler,m.timeout,m.progressCallback,De)}(C,this._appId,ee,De,K,this._firebaseVersion);return this._requests.add(Ke),Ke.getPromise().then(()=>this._requests.delete(Ke),()=>this._requests.delete(Ke)),Ke}}makeRequestWithTokens(C,K){var ee=this;return(0,Qe.Z)(function*(){const[De,Ke]=yield Promise.all([ee._getAuthToken(),ee._getAppCheckToken()]);return ee._makeRequest(C,K,De,Ke).getPromise()})()}}const Fi="@firebase/storage";function Gs(m,C){return as(m=(0,gt.m9)(m),C)}function Rn(m,{instanceIdentifier:C}){const K=m.getProvider("app").getImmediate(),ee=m.getProvider("auth-internal"),De=m.getProvider("app-check-internal");return new us(K,ee,De,C,Ze.SDK_VERSION)}!function O(){(0,Ze._registerComponent)(new ze.wA("storage",Rn,"PUBLIC").setMultipleInstances(!0)),(0,Ze.registerVersion)(Fi,"0.9.5",""),(0,Ze.registerVersion)(Fi,"0.9.5","esm2017")}();class H{constructor(C,K,ee){this._delegate=C,this.task=K,this.ref=ee}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class x{constructor(C,K){this._delegate=C,this._ref=K,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new H(this._delegate.snapshot,this,this._ref)}then(C,K){return this._delegate.then(ee=>{if(C)return C(new H(ee,this,this._ref))},K)}on(C,K,ee,De){let Ke;return K&&(Ke="function"==typeof K?it=>K(new H(it,this,this._ref)):{next:K.next?it=>K.next(new H(it,this,this._ref)):void 0,complete:K.complete||void 0,error:K.error||void 0}),this._delegate.on(C,Ke,ee||void 0,De||void 0)}}class Z{constructor(C,K){this._delegate=C,this._service=K}get prefixes(){return this._delegate.prefixes.map(C=>new me(C,this._service))}get items(){return this._delegate.items.map(C=>new me(C,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class me{constructor(C,K){this._delegate=C,this.storage=K}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(C){const K=function bs(m,C){return Ci(m,C)}(this._delegate,C);return new me(K,this.storage)}get root(){return new me(this._delegate.root,this.storage)}get parent(){const C=this._delegate.parent;return null==C?null:new me(C,this.storage)}put(C,K){return this._throwIfRoot("put"),new x(function Ti(m,C,K){return function _e(m,C,K){return m._throwIfRoot("uploadBytesResumable"),new ne(m,new Nt(C),K)}(m=(0,gt.m9)(m),C,K)}(this._delegate,C,K),this)}putString(C,K=fn.RAW,ee){this._throwIfRoot("putString");const De=pr(K,C),Ke=Object.assign({},ee);return null==Ke.contentType&&null!=De.contentType&&(Ke.contentType=De.contentType),new x(new ne(this._delegate,new Nt(De.data,!0),Ke),this)}listAll(){return function qr(m){return function nt(m){const C={prefixes:[],items:[]};return _t(m,C).then(()=>C)}(m=(0,gt.m9)(m))}(this._delegate).then(C=>new Z(C,this.storage))}list(C){return function Ur(m,C){return Un(m=(0,gt.m9)(m),C)}(this._delegate,C||void 0).then(K=>new Z(K,this.storage))}getMetadata(){return function ps(m){return function Gr(m){m._throwIfRoot("getMetadata");const C=cn(m.storage,m._location,pt());return m.storage.makeRequestWithTokens(C,gr)}(m=(0,gt.m9)(m))}(this._delegate)}updateMetadata(C){return function Qi(m,C){return function Bn(m,C){m._throwIfRoot("updateMetadata");const K=function ci(m,C,K,ee){const Ke=Ht(C.fullServerUrl(),m.host,m._protocol),Lt=Jt(K,ee),_n=m.maxOperationRetryTime,$n=new rr(Ke,"PATCH",ir(m,ee),_n);return $n.headers={"Content-Type":"application/json; charset=utf-8"},$n.body=Lt,$n.errorHandler=Ft(C),$n}(m.storage,m._location,C,pt());return m.storage.makeRequestWithTokens(K,gr)}(m=(0,gt.m9)(m),C)}(this._delegate,C)}getDownloadURL(){return function Ai(m){return mi(m=(0,gt.m9)(m))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ls(m){return function Di(m){m._throwIfRoot("deleteObject");const C=function Vn(m,C){const ee=Ht(C.fullServerUrl(),m.host,m._protocol),Lt=new rr(ee,"DELETE",function it(St,_n){},m.maxOperationRetryTime);return Lt.successCodes=[200,204],Lt.errorHandler=Ft(C),Lt}(m.storage,m._location);return m.storage.makeRequestWithTokens(C,gr)}(m=(0,gt.m9)(m))}(this._delegate)}_throwIfRoot(C){if(""===this._delegate._location.path)throw xt(C)}}class Je{constructor(C,K){this.app=C,this._delegate=K}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(C){if(et(C))throw $t("ref() expected a child path but got a URL, use refFromURL instead.");return new me(Gs(this._delegate,C),this)}refFromURL(C){if(!et(C))throw $t("refFromURL() expected a full URL but got a child path, use ref() instead.");try{kt.makeFromUrl(C,this._delegate.host)}catch(K){throw $t("refFromUrl() expected a valid full URL but got an invalid one.")}return new me(Gs(this._delegate,C),this)}setMaxUploadRetryTime(C){this._delegate.maxUploadRetryTime=C}setMaxOperationRetryTime(C){this._delegate.maxOperationRetryTime=C}useEmulator(C,K,ee={}){!function ti(m,C,K,ee={}){!function Jr(m,C,K,ee={}){m.host=`${C}:${K}`,m._protocol="http";const{mockUserToken:De}=ee;De&&(m._overrideAuthToken="string"==typeof De?De:(0,gt.Sg)(De,m.app.options.projectId))}(m,C,K,ee)}(this._delegate,C,K,ee)}}function et(m){return/^[A-Za-z]+:\/\//.test(m)}function vn(m,{instanceIdentifier:C}){const K=m.getProvider("app-compat").getImmediate(),ee=m.getProvider("storage").getImmediate({identifier:C});return new Je(K,ee)}!function En(m){const C={TaskState:xn,TaskEvent:Lr,StringFormat:fn,Storage:Je,Reference:me};m.INTERNAL.registerComponent(new ze.wA("storage-compat",vn,"PUBLIC").setServiceProps(C).setMultipleInstances(!0)),m.registerVersion("@firebase/storage-compat","0.1.13")}(ut.Z);var vr=F(440),Qn=F(127);function gs(m){const C=function cr(m){return new p.y(C=>{const K=it=>C.next(it);K(m.snapshot);const Ke=m.on("state_changed",K);return m.then(it=>{K(it),C.complete()},it=>{K(m.snapshot),(it=>{C.error(it)})(it)}),function(){Ke()}}).pipe(function Oe(m,C=Ee.z){return(0,ye.e)((K,ee)=>{let De=null,Ke=null,it=null;const Lt=()=>{if(De){De.unsubscribe(),De=null;const _n=Ke;Ke=null,ee.next(_n)}};function St(){const _n=it+m,$n=C.now();if($n<_n)return De=this.schedule(void 0,_n-$n),void ee.add(De);Lt()}K.subscribe((0,Se.x)(ee,_n=>{Ke=_n,it=C.now(),De||(De=C.schedule(St,m),ee.add(De))},()=>{Lt(),ee.complete()},void 0,()=>{Ke=De=null}))})}(0))}(m);return{task:m,then:m.then.bind(m),catch:m.catch.bind(m),pause:m.pause.bind(m),cancel:m.cancel.bind(m),resume:m.resume.bind(m),snapshotChanges:()=>C,percentageChanges:()=>C.pipe((0,Pe.U)(K=>K.bytesTransferred/K.totalBytes*100))}}function ni(m){return{getDownloadURL:()=>(0,q.of)(void 0).pipe(ce.fc,(0,Ne.w)(()=>m.getDownloadURL()),ce.iC),getMetadata:()=>(0,q.of)(void 0).pipe(ce.fc,(0,Ne.w)(()=>m.getMetadata()),ce.iC),delete:()=>(0,Q.D)(m.delete()),child:C=>ni(m.child(C)),updateMetadata:C=>(0,Q.D)(m.updateMetadata(C)),put:(C,K)=>gs(m.put(C,K)),putString:(C,K,ee)=>gs(m.putString(C,K,ee)),list:C=>(0,Q.D)(m.list(C)),listAll:()=>(0,Q.D)(m.listAll())}}const un=new ie.OlP("angularfire2.storageBucket"),ji=new ie.OlP("angularfire2.storage.maxUploadRetryTime"),$i=new ie.OlP("angularfire2.storage.maxOperationRetryTime"),Ts=new ie.OlP("angularfire2.storage.use-emulator");let Os=(()=>{class m{constructor(K,ee,De,Ke,it,Lt,St,_n,$n,Br){const dr=(0,Te.on)(K,it,ee);this.storage=(0,Te.cc)(`${dr.name}.storage.${De}`,"AngularFireStorage",dr.name,()=>{const zn=it.runOutsideAngular(()=>dr.storage(De||void 0)),Zn=$n;return Zn&&zn.useEmulator(...Zn),St&&zn.setMaxUploadRetryTime(St),_n&&zn.setMaxOperationRetryTime(_n),zn},[St,_n])}ref(K){return ni(this.storage.ref(K))}refFromURL(K){return ni(this.storage.refFromURL(K))}upload(K,ee,De){return ni(this.storage.ref(K)).put(ee,De)}}return m.\u0275fac=function(K){return new(K||m)(ie.LFG(Te.Dh),ie.LFG(Te.xv,8),ie.LFG(un,8),ie.LFG(ie.Lbi),ie.LFG(ie.R0b),ie.LFG(ce.HU),ie.LFG(ji,8),ie.LFG($i,8),ie.LFG(Ts,8),ie.LFG(vr.nm,8))},m.\u0275prov=ie.Yz7({token:m,factory:m.\u0275fac,providedIn:"any"}),m})(),M=(()=>{class m{}return m.\u0275fac=function(K){return new(K||m)},m.\u0275mod=ie.oAB({type:m}),m.\u0275inj=ie.cJS({}),m})(),S=(()=>{class m{constructor(){Qn.Z.registerVersion("angularfire",ce.q4.full,"gcs-compat")}}return m.\u0275fac=function(K){return new(K||m)},m.\u0275mod=ie.oAB({type:m}),m.\u0275inj=ie.cJS({providers:[Os],imports:[M]}),m})()},2011:(Tt,We,F)=>{F.d(We,{Dh:()=>Pe,GT:()=>Se,cc:()=>Qe,hO:()=>ut,on:()=>ce,pX:()=>ye,xv:()=>Ne});var p=F(5e3),q=F(127),Q=F(5813);Tt=F.hmd(Tt);const Ee=["ngOnDestroy"],ye=(Le,Et,j,U={})=>new Proxy(Le,{get:(Y,ve)=>j.runOutsideAngular(()=>{var Ve;if(Le[ve])return(null===(Ve=null==U?void 0:U.spy)||void 0===Ve?void 0:Ve.get)&&U.spy.get(ve,Le[ve]),Le[ve];if(Ee.indexOf(ve)>-1)return()=>{};const $e=Et.toPromise().then(ke=>{const we=ke&&ke[ve];return"function"==typeof we?we.bind(ke):we&&we.then?we.then(X=>j.run(()=>X)):j.run(()=>we)});return new Proxy(()=>{},{get:(ke,we)=>$e[we],apply:(ke,we,X)=>$e.then(Ce=>{var pe;const Ge=Ce&&Ce(...X);return(null===(pe=null==U?void 0:U.spy)||void 0===pe?void 0:pe.apply)&&U.spy.apply(ve,X,Ge),Ge})})})}),Se=(Le,Et)=>{Et.forEach(j=>{Object.getOwnPropertyNames(j.prototype||j).forEach(U=>{Object.defineProperty(Le.prototype,U,Object.getOwnPropertyDescriptor(j.prototype||j,U))})})};class Oe{constructor(Et){return Et}}const Pe=new p.OlP("angularfire2.app.options"),Ne=new p.OlP("angularfire2.app.name");function ce(Le,Et,j){const Y="object"==typeof j&&j||{};Y.name=Y.name||"string"==typeof j&&j||"[DEFAULT]";const Ve=q.Z.apps.filter($e=>$e&&$e.name===Y.name)[0]||Et.runOutsideAngular(()=>q.Z.initializeApp(Le,Y));try{JSON.stringify(Le)!==JSON.stringify(Ve.options)&&ie("error",`${Ve.name} Firebase App already initialized with different options${Tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new Oe(Ve)}const ie=(Le,...Et)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Le](...Et)},Te={provide:Oe,useFactory:ce,deps:[Pe,p.R0b,[new p.FiY,Ne]]};let ut=(()=>{class Le{constructor(j){q.Z.registerVersion("angularfire",Q.q4.full,"core"),q.Z.registerVersion("angularfire",Q.q4.full,"app-compat"),q.Z.registerVersion("angular",p.q4F.full,j.toString())}static initializeApp(j,U){return{ngModule:Le,providers:[{provide:Pe,useValue:j},{provide:Ne,useValue:U}]}}}return Le.\u0275fac=function(j){return new(j||Le)(p.LFG(p.Lbi))},Le.\u0275mod=p.oAB({type:Le}),Le.\u0275inj=p.cJS({providers:[Te]}),Le})();function Qe(Le,Et,j,U,Y){const[,ve,Ve]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Le)||[];if(ve)return function Ze(Le,Et){try{return Le.toString()===Et.toString()}catch(j){return Le===Et}}(Y,Ve)||(ze("error",`${Et} was already initialized on the ${j} Firebase App with different settings.${gt?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:Y,was:Ve})),ve;{const $e=U();return globalThis.\u0275AngularfireInstanceCache.push([Le,$e,Y]),$e}}const gt=!!Tt.hot,ze=(Le,...Et)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Le](...Et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Tt,We,F)=>{F.d(We,{q4:()=>ka,iC:()=>ca,fc:()=>Cu,HU:()=>Uo,vb:()=>Lo,JM:()=>wo});var p=F(5e3),q=F(5867),Q=F(5861),Ee=F(9681),ye=F(2090),Se=F(4859),Oe=F(1877);const Pe="@firebase/installations",ie="w:0.5.8",Te="FIS_v2",Le=new ye.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(A){return A instanceof ye.ZR&&A.code.includes("request-failed")}function j({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function U(A){return{token:A.token,requestStatus:2,expiresIn:X(A.expiresIn),creationTime:Date.now()}}function Y(A,P){return ve.apply(this,arguments)}function ve(){return(ve=(0,Q.Z)(function*(A,P){const le=(yield P.json()).error;return Le.create("request-failed",{requestName:A,serverCode:le.code,serverMessage:le.message,serverStatus:le.status})})).apply(this,arguments)}function Ve({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function $e(A,{refreshToken:P}){const z=Ve(A);return z.append("Authorization",function Ce(A){return`${Te} ${A}`}(P)),z}function ke(A){return we.apply(this,arguments)}function we(){return(we=(0,Q.Z)(function*(A){const P=yield A();return P.status>=500&&P.status<600?A():P})).apply(this,arguments)}function X(A){return Number(A.replace("s","000"))}function pe(A,P){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,Q.Z)(function*({appConfig:A,heartbeatServiceProvider:P},{fid:z}){const le=j(A),Me=Ve(A),Ye=P.getImmediate({optional:!0});if(Ye){const In=yield Ye.getHeartbeatsHeader();In&&Me.append("x-firebase-client",In)}const Gt={method:"POST",headers:Me,body:JSON.stringify({fid:z,authVersion:Te,appId:A.appId,sdkVersion:ie})},rn=yield ke(()=>fetch(le,Gt));if(rn.ok){const In=yield rn.json();return{fid:In.fid||z,registrationStatus:2,refreshToken:In.refreshToken,authToken:U(In.authToken)}}throw yield Y("Create Installation",rn)})).apply(this,arguments)}function Ue(A){return new Promise(P=>{setTimeout(P,A)})}const wt=/^[cdef][\w-]{21}$/;function mt(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const z=function Dt(A){return function Vt(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return wt.test(z)?z:""}catch(A){return""}}function $t(A){return`${A.appName}!${A.appId}`}const It=new Map;function xt(A,P){const z=$t(A);kt(z,P),function nn(A,P){const z=function Mn(){return!Hn&&"BroadcastChannel"in self&&(Hn=new BroadcastChannel("[Firebase] FID Change"),Hn.onmessage=A=>{kt(A.data.key,A.data.fid)}),Hn}();z&&z.postMessage({key:A,fid:P}),function lr(){0===It.size&&Hn&&(Hn.close(),Hn=null)}()}(z,P)}function kt(A,P){const z=It.get(A);if(z)for(const le of z)le(P)}let Hn=null;const Gn="firebase-installations-store";let wr=null;function Ln(){return wr||(wr=(0,ye.X3)("firebase-installations-database",1,(A,P)=>{0===P&&A.createObjectStore(Gn)})),wr}function Ut(A,P){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,Q.Z)(function*(A,P){const z=$t(A),Me=(yield Ln()).transaction(Gn,"readwrite"),Ye=Me.objectStore(Gn),vt=yield Ye.get(z);return yield Ye.put(P,z),yield Me.complete,(!vt||vt.fid!==P.fid)&&xt(A,P.fid),P})).apply(this,arguments)}function wn(A){return sn.apply(this,arguments)}function sn(){return(sn=(0,Q.Z)(function*(A){const P=$t(A),le=(yield Ln()).transaction(Gn,"readwrite");yield le.objectStore(Gn).delete(P),yield le.complete})).apply(this,arguments)}function Pr(A,P){return pi.apply(this,arguments)}function pi(){return(pi=(0,Q.Z)(function*(A,P){const z=$t(A),Me=(yield Ln()).transaction(Gn,"readwrite"),Ye=Me.objectStore(Gn),vt=yield Ye.get(z),Gt=P(vt);return void 0===Gt?yield Ye.delete(z):yield Ye.put(Gt,z),yield Me.complete,Gt&&(!vt||vt.fid!==Gt.fid)&&xt(A,Gt.fid),Gt})).apply(this,arguments)}function nr(A){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,Q.Z)(function*(A){let P;const z=yield Pr(A.appConfig,le=>{const Me=an(le),Ye=Hr(A,Me);return P=Ye.registrationPromise,Ye.installationEntry});return""===z.fid?{installationEntry:yield P}:{installationEntry:z,registrationPromise:P}})).apply(this,arguments)}function an(A){return fn(A||{fid:mt(),registrationStatus:0})}function Hr(A,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(Le.create("app-offline"))};const z={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},le=function gn(A,P){return Ot.apply(this,arguments)}(A,z);return{installationEntry:z,registrationPromise:le}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:Zt(A)}:{installationEntry:P}}function Ot(){return(Ot=(0,Q.Z)(function*(A,P){try{const z=yield pe(A,P);return Ut(A.appConfig,z)}catch(z){throw Et(z)&&409===z.customData.serverCode?yield wn(A.appConfig):yield Ut(A.appConfig,{fid:P.fid,registrationStatus:0}),z}})).apply(this,arguments)}function Zt(A){return mr.apply(this,arguments)}function mr(){return(mr=(0,Q.Z)(function*(A){let P=yield Qr(A.appConfig);for(;1===P.registrationStatus;)yield Ue(100),P=yield Qr(A.appConfig);if(0===P.registrationStatus){const{installationEntry:z,registrationPromise:le}=yield nr(A);return le||z}return P})).apply(this,arguments)}function Qr(A){return Pr(A,P=>{if(!P)throw Le.create("installation-not-found");return fn(P)})}function fn(A){return function Dr(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function pr(A,P){return xr.apply(this,arguments)}function xr(){return(xr=(0,Q.Z)(function*({appConfig:A,heartbeatServiceProvider:P},z){const le=Yt(A,z),Me=$e(A,z),Ye=P.getImmediate({optional:!0});if(Ye){const In=yield Ye.getHeartbeatsHeader();In&&Me.append("x-firebase-client",In)}const Gt={method:"POST",headers:Me,body:JSON.stringify({installation:{sdkVersion:ie,appId:A.appId}})},rn=yield ke(()=>fetch(le,Gt));if(rn.ok)return U(yield rn.json());throw yield Y("Generate Auth Token",rn)})).apply(this,arguments)}function Yt(A,{fid:P}){return`${j(A)}/${P}/authTokens:generate`}function kr(A){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,Q.Z)(function*(A,P=!1){let z;const le=yield Pr(A.appConfig,Ye=>{if(!Kt(Ye))throw Le.create("not-registered");const vt=Ye.authToken;if(!P&&ge(vt))return Ye;if(1===vt.requestStatus)return z=Ct(A,P),Ye;{if(!navigator.onLine)throw Le.create("app-offline");const Gt=Ie(Ye);return z=Nt(A,Gt),Gt}});return z?yield z:le.authToken})).apply(this,arguments)}function Ct(A,P){return ot.apply(this,arguments)}function ot(){return(ot=(0,Q.Z)(function*(A,P){let z=yield Pt(A.appConfig);for(;1===z.authToken.requestStatus;)yield Ue(100),z=yield Pt(A.appConfig);const le=z.authToken;return 0===le.requestStatus?kr(A,P):le})).apply(this,arguments)}function Pt(A){return Pr(A,P=>{if(!Kt(P))throw Le.create("not-registered");return function qe(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function Nt(A,P){return pn.apply(this,arguments)}function pn(){return(pn=(0,Q.Z)(function*(A,P){try{const z=yield pr(A,P),le=Object.assign(Object.assign({},P),{authToken:z});return yield Ut(A.appConfig,le),z}catch(z){if(!Et(z)||401!==z.customData.serverCode&&404!==z.customData.serverCode){const le=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield Ut(A.appConfig,le)}else yield wn(A.appConfig);throw z}})).apply(this,arguments)}function Kt(A){return void 0!==A&&2===A.registrationStatus}function ge(A){return 2===A.requestStatus&&!function ae(A){const P=Date.now();return P<A.creationTime||A.creationTime+A.expiresIn<P+36e5}(A)}function Ie(A){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:P})}function yt(){return(yt=(0,Q.Z)(function*(A){const P=A,{installationEntry:z,registrationPromise:le}=yield nr(P);return le?le.catch(console.error):kr(P).catch(console.error),z.fid})).apply(this,arguments)}function Cn(){return(Cn=(0,Q.Z)(function*(A,P=!1){const z=A;return yield Rr(z),(yield kr(z,P)).token})).apply(this,arguments)}function Rr(A){return yn.apply(this,arguments)}function yn(){return(yn=(0,Q.Z)(function*(A){const{registrationPromise:P}=yield nr(A);P&&(yield P)})).apply(this,arguments)}function ir(A){return Le.create("missing-app-config-values",{valueName:A})}const Ii="installations",ct=A=>{const P=A.getProvider("app").getImmediate(),z=function qn(A){if(!A||!A.options)throw ir("App Configuration");if(!A.name)throw ir("App Name");const P=["projectId","apiKey","appId"];for(const z of P)if(!A.options[z])throw ir(z);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(P);return{app:P,appConfig:z,heartbeatServiceProvider:(0,Ee._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},Ft=A=>{const P=A.getProvider("app").getImmediate(),z=(0,Ee._getProvider)(P,Ii).getImmediate();return{getId:()=>function Fe(A){return yt.apply(this,arguments)}(z),getToken:Me=>function pt(A){return Cn.apply(this,arguments)}(z,Me)}};(function cn(){(0,Ee._registerComponent)(new Se.wA(Ii,ct,"PUBLIC")),(0,Ee._registerComponent)(new Se.wA("installations-internal",Ft,"PRIVATE"))})(),(0,Ee.registerVersion)(Pe,"0.5.8"),(0,Ee.registerVersion)(Pe,"0.5.8","esm2017");const Jn="@firebase/remote-config",_r=new ye.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class he{constructor(P,z,le,Me){this.client=P,this.storage=z,this.storageCache=le,this.logger=Me}isCachedDataFresh(P,z){if(!z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const le=Date.now()-z,Me=le<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${le}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${Me}.`),Me}fetch(P){var z=this;return(0,Q.Z)(function*(){const[le,Me]=yield Promise.all([z.storage.getLastSuccessfulFetchTimestampMillis(),z.storage.getLastSuccessfulFetchResponse()]);if(Me&&z.isCachedDataFresh(P.cacheMaxAgeMillis,le))return Me;P.eTag=Me&&Me.eTag;const Ye=yield z.client.fetch(P),vt=[z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ye.status&&vt.push(z.storage.setLastSuccessfulFetchResponse(Ye)),yield Promise.all(vt),Ye})()}}function fe(A=navigator){return A.languages&&A.languages[0]||A.language}class ne{constructor(P,z,le,Me,Ye,vt){this.firebaseInstallations=P,this.sdkVersion=z,this.namespace=le,this.projectId=Me,this.apiKey=Ye,this.appId=vt}fetch(P){var z=this;return(0,Q.Z)(function*(){const[le,Me]=yield Promise.all([z.firebaseInstallations.getId(),z.firebaseInstallations.getToken()]),vt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${z.projectId}/namespaces/${z.namespace}:fetch?key=${z.apiKey}`,Gt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},rn={sdk_version:z.sdkVersion,app_instance_id:le,app_instance_id_token:Me,app_id:z.appId,language_code:fe()},In={method:"POST",headers:Gt,body:JSON.stringify(rn)},ar=fetch(vt,In),kn=new Promise((lo,Qs)=>{P.signal.addEventListener(()=>{const Io=new Error("The operation was aborted.");Io.name="AbortError",Qs(Io)})});let Yr;try{yield Promise.race([ar,kn]),Yr=yield ar}catch(lo){let Qs="fetch-client-network";throw"AbortError"===lo.name&&(Qs="fetch-timeout"),_r.create(Qs,{originalErrorMessage:lo.message})}let Vi=Yr.status;const Na=Yr.headers.get("ETag")||void 0;let tu,Es;if(200===Yr.status){let lo;try{lo=yield Yr.json()}catch(Qs){throw _r.create("fetch-client-parse",{originalErrorMessage:Qs.message})}tu=lo.entries,Es=lo.state}if("INSTANCE_STATE_UNSPECIFIED"===Es?Vi=500:"NO_CHANGE"===Es?Vi=304:("NO_TEMPLATE"===Es||"EMPTY_CONFIG"===Es)&&(tu={}),304!==Vi&&200!==Vi)throw _r.create("fetch-status",{httpStatus:Vi});return{status:Vi,eTag:Na,config:tu}})()}}class en{constructor(P,z){this.client=P,this.storage=z}fetch(P){var z=this;return(0,Q.Z)(function*(){const le=(yield z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return z.attemptFetch(P,le)})()}attemptFetch(P,{throttleEndTimeMillis:z,backoffCount:le}){var Me=this;return(0,Q.Z)(function*(){yield function xe(A,P){return new Promise((z,le)=>{const Me=Math.max(P-Date.now(),0),Ye=setTimeout(z,Me);A.addEventListener(()=>{clearTimeout(Ye),le(_r.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,z);try{const Ye=yield Me.client.fetch(P);return yield Me.storage.deleteThrottleMetadata(),Ye}catch(Ye){if(!function st(A){if(!(A instanceof ye.ZR&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}(Ye))throw Ye;const vt={throttleEndTimeMillis:Date.now()+(0,ye.$s)(le),backoffCount:le+1};return yield Me.storage.setThrottleMetadata(vt),Me.attemptFetch(P,vt)}})()}}class Be{constructor(P,z,le,Me,Ye){this.app=P,this._client=z,this._storageCache=le,this._storage=Me,this._logger=Ye,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function nt(A,P){const z=A.target.error||void 0;return _r.create(P,{originalErrorMessage:z&&z.message})}const _t="app_namespace_store";class Bn{constructor(P,z,le,Me=function Gr(){return new Promise((A,P)=>{try{const z=indexedDB.open("firebase_remote_config",1);z.onerror=le=>{P(nt(le,"storage-open"))},z.onsuccess=le=>{A(le.target.result)},z.onupgradeneeded=le=>{0===le.oldVersion&&le.target.result.createObjectStore(_t,{keyPath:"compositeKey"})}}catch(z){P(_r.create("storage-open",{originalErrorMessage:z}))}})}()){this.appId=P,this.appName=z,this.namespace=le,this.openDbPromise=Me}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var z=this;return(0,Q.Z)(function*(){const le=yield z.openDbPromise;return new Promise((Me,Ye)=>{const Gt=le.transaction([_t],"readonly").objectStore(_t),rn=z.createCompositeKey(P);try{const In=Gt.get(rn);In.onerror=ar=>{Ye(nt(ar,"storage-get"))},In.onsuccess=ar=>{const kn=ar.target.result;Me(kn?kn.value:void 0)}}catch(In){Ye(_r.create("storage-get",{originalErrorMessage:In&&In.message}))}})})()}set(P,z){var le=this;return(0,Q.Z)(function*(){const Me=yield le.openDbPromise;return new Promise((Ye,vt)=>{const rn=Me.transaction([_t],"readwrite").objectStore(_t),In=le.createCompositeKey(P);try{const ar=rn.put({compositeKey:In,value:z});ar.onerror=kn=>{vt(nt(kn,"storage-set"))},ar.onsuccess=()=>{Ye()}}catch(ar){vt(_r.create("storage-set",{originalErrorMessage:ar&&ar.message}))}})})()}delete(P){var z=this;return(0,Q.Z)(function*(){const le=yield z.openDbPromise;return new Promise((Me,Ye)=>{const Gt=le.transaction([_t],"readwrite").objectStore(_t),rn=z.createCompositeKey(P);try{const In=Gt.delete(rn);In.onerror=ar=>{Ye(nt(ar,"storage-delete"))},In.onsuccess=()=>{Me()}}catch(In){Ye(_r.create("storage-delete",{originalErrorMessage:In&&In.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class mi{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,Q.Z)(function*(){const z=P.storage.getLastFetchStatus(),le=P.storage.getLastSuccessfulFetchTimestampMillis(),Me=P.storage.getActiveConfig(),Ye=yield z;Ye&&(P.lastFetchStatus=Ye);const vt=yield le;vt&&(P.lastSuccessfulFetchTimestampMillis=vt);const Gt=yield Me;Gt&&(P.activeConfig=Gt)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function Ni(){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,Q.Z)(function*(){if(!(0,ye.hl)())return!1;try{return yield(0,ye.eu)()}catch(A){return!1}})).apply(this,arguments)}!function Di(){(0,Ee._registerComponent)(new Se.wA("remote-config",function A(P,{instanceIdentifier:z}){const le=P.getProvider("app").getImmediate(),Me=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw _r.create("registration-window");if(!(0,ye.hl)())throw _r.create("indexed-db-unavailable");const{projectId:Ye,apiKey:vt,appId:Gt}=le.options;if(!Ye)throw _r.create("registration-project-id");if(!vt)throw _r.create("registration-api-key");if(!Gt)throw _r.create("registration-app-id");const rn=new Bn(Gt,le.name,z=z||"firebase"),In=new mi(rn),ar=new Oe.Yd(Jn);ar.logLevel=Oe.in.ERROR;const kn=new ne(Me,Ee.SDK_VERSION,z,Ye,vt,Gt),Yr=new en(kn,rn),Vi=new he(Yr,rn,In,ar),Na=new Be(le,Vi,In,rn,ar);return function xn(A){const P=(0,ye.m9)(A);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(Na),Na},"PUBLIC").setMultipleInstances(!0)),(0,Ee.registerVersion)(Jn,"0.3.7"),(0,Ee.registerVersion)(Jn,"0.3.7","esm2017")}();const as="/firebase-messaging-sw.js",bi="/firebase-cloud-messaging-push-scope",Jr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Fi="google.c.a.c_id",ei="google.c.a.c_l",Fs="google.c.a.ts",Cs="google.c.a.e";var Yi=(()=>{return(A=Yi||(Yi={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",Yi;var A})();function Ti(A){const P=new Uint8Array(A);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ps(A){const z=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),le=atob(z),Me=new Uint8Array(le.length);for(let Ye=0;Ye<le.length;++Ye)Me[Ye]=le.charCodeAt(Ye);return Me}const Qi="fcm_token_details_db",qr="fcm_token_object_Store";function Ai(A){return ls.apply(this,arguments)}function ls(){return ls=(0,Q.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ye=>Ye.name).includes(Qi))return null;let P=null;return(yield(0,ye.X3)(Qi,5,function(){var le=(0,Q.Z)(function*(Me,Ye,vt,Gt){var rn;if(Ye<2||!Me.objectStoreNames.contains(qr))return;const In=Gt.objectStore(qr),ar=yield In.index("fcmSenderId").get(A);if(yield In.clear(),ar)if(2===Ye){const kn=ar;if(!kn.auth||!kn.p256dh||!kn.endpoint)return;P={token:kn.fcmToken,createTime:null!==(rn=kn.createTime)&&void 0!==rn?rn:Date.now(),subscriptionOptions:{auth:kn.auth,p256dh:kn.p256dh,endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:"string"==typeof kn.vapidKey?kn.vapidKey:Ti(kn.vapidKey)}}}else if(3===Ye){const kn=ar;P={token:kn.fcmToken,createTime:kn.createTime,subscriptionOptions:{auth:Ti(kn.auth),p256dh:Ti(kn.p256dh),endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:Ti(kn.vapidKey)}}}else if(4===Ye){const kn=ar;P={token:kn.fcmToken,createTime:kn.createTime,subscriptionOptions:{auth:Ti(kn.auth),p256dh:Ti(kn.p256dh),endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:Ti(kn.vapidKey)}}}});return function(Me,Ye,vt,Gt){return le.apply(this,arguments)}}())).close(),yield(0,ye.Lj)(Qi),yield(0,ye.Lj)("fcm_vapid_details_db"),yield(0,ye.Lj)("undefined"),Gs(P)?P:null}),ls.apply(this,arguments)}function Gs(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:P}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const ti="firebase-messaging-store";let Ji=null;function Rs(){return Ji||(Ji=(0,ye.X3)("firebase-messaging-database",1,(A,P)=>{0===P&&A.createObjectStore(ti)})),Ji}function Rn(A){return O.apply(this,arguments)}function O(){return(O=(0,Q.Z)(function*(A){const P=Je(A),le=yield(yield Rs()).transaction(ti).objectStore(ti).get(P);if(le)return le;{const Me=yield Ai(A.appConfig.senderId);if(Me)return yield H(A,Me),Me}})).apply(this,arguments)}function H(A,P){return x.apply(this,arguments)}function x(){return(x=(0,Q.Z)(function*(A,P){const z=Je(A),Me=(yield Rs()).transaction(ti,"readwrite");return yield Me.objectStore(ti).put(P,z),yield Me.complete,P})).apply(this,arguments)}function Z(A){return me.apply(this,arguments)}function me(){return(me=(0,Q.Z)(function*(A){const P=Je(A),le=(yield Rs()).transaction(ti,"readwrite");yield le.objectStore(ti).delete(P),yield le.complete})).apply(this,arguments)}function Je({appConfig:A}){return A.appId}const bt=new ye.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Wn(A,P){return jn.apply(this,arguments)}function jn(){return(jn=(0,Q.Z)(function*(A,P){const z=yield gs(A),le=un(P),Me={method:"POST",headers:z,body:JSON.stringify(le)};let Ye;try{Ye=yield(yield fetch(cr(A.appConfig),Me)).json()}catch(vt){throw bt.create("token-subscribe-failed",{errorInfo:vt})}if(Ye.error)throw bt.create("token-subscribe-failed",{errorInfo:Ye.error.message});if(!Ye.token)throw bt.create("token-subscribe-no-token");return Ye.token})).apply(this,arguments)}function vn(A,P){return En.apply(this,arguments)}function En(){return(En=(0,Q.Z)(function*(A,P){const z=yield gs(A),le=un(P.subscriptionOptions),Me={method:"PATCH",headers:z,body:JSON.stringify(le)};let Ye;try{Ye=yield(yield fetch(`${cr(A.appConfig)}/${P.token}`,Me)).json()}catch(vt){throw bt.create("token-update-failed",{errorInfo:vt})}if(Ye.error)throw bt.create("token-update-failed",{errorInfo:Ye.error.message});if(!Ye.token)throw bt.create("token-update-no-token");return Ye.token})).apply(this,arguments)}function vr(A,P){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,Q.Z)(function*(A,P){const le={method:"DELETE",headers:yield gs(A)};try{const Ye=yield(yield fetch(`${cr(A.appConfig)}/${P}`,le)).json();if(Ye.error)throw bt.create("token-unsubscribe-failed",{errorInfo:Ye.error.message})}catch(Me){throw bt.create("token-unsubscribe-failed",{errorInfo:Me})}})).apply(this,arguments)}function cr({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function gs(A){return ni.apply(this,arguments)}function ni(){return(ni=(0,Q.Z)(function*({appConfig:A,installations:P}){const z=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${z}`})})).apply(this,arguments)}function un({p256dh:A,auth:P,endpoint:z,vapidKey:le}){const Me={web:{endpoint:z,auth:P,p256dh:A}};return le!==Jr&&(Me.web.applicationPubKey=le),Me}const ji=6048e5;function $i(A){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,Q.Z)(function*(A){const P=yield K(A.swRegistration,A.vapidKey),z={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:P.endpoint,auth:Ti(P.getKey("auth")),p256dh:Ti(P.getKey("p256dh"))},le=yield Rn(A.firebaseDependencies);if(le){if(De(le.subscriptionOptions,z))return Date.now()>=le.createTime+ji?M(A,{token:le.token,createTime:Date.now(),subscriptionOptions:z}):le.token;try{yield vr(A.firebaseDependencies,le.token)}catch(Me){console.warn(Me)}return m(A.firebaseDependencies,z)}return m(A.firebaseDependencies,z)})).apply(this,arguments)}function Os(A){return N.apply(this,arguments)}function N(){return(N=(0,Q.Z)(function*(A){const P=yield Rn(A.firebaseDependencies);P&&(yield vr(A.firebaseDependencies,P.token),yield Z(A.firebaseDependencies));const z=yield A.swRegistration.pushManager.getSubscription();return!z||z.unsubscribe()})).apply(this,arguments)}function M(A,P){return S.apply(this,arguments)}function S(){return(S=(0,Q.Z)(function*(A,P){try{const z=yield vn(A.firebaseDependencies,P),le=Object.assign(Object.assign({},P),{token:z,createTime:Date.now()});return yield H(A.firebaseDependencies,le),z}catch(z){throw yield Os(A),z}})).apply(this,arguments)}function m(A,P){return C.apply(this,arguments)}function C(){return(C=(0,Q.Z)(function*(A,P){const le={token:yield Wn(A,P),createTime:Date.now(),subscriptionOptions:P};return yield H(A,le),le.token})).apply(this,arguments)}function K(A,P){return ee.apply(this,arguments)}function ee(){return(ee=(0,Q.Z)(function*(A,P){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ps(P)})})).apply(this,arguments)}function De(A,P){return P.vapidKey===A.vapidKey&&P.endpoint===A.endpoint&&P.auth===A.auth&&P.p256dh===A.p256dh}function Ke(A){const P={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function it(A,P){if(!P.notification)return;A.notification={};const z=P.notification.title;z&&(A.notification.title=z);const le=P.notification.body;le&&(A.notification.body=le);const Me=P.notification.image;Me&&(A.notification.image=Me)}(P,A),function Lt(A,P){!P.data||(A.data=P.data)}(P,A),function St(A,P){if(!P.fcmOptions)return;A.fcmOptions={};const z=P.fcmOptions.link;z&&(A.fcmOptions.link=z);const le=P.fcmOptions.analytics_label;le&&(A.fcmOptions.analyticsLabel=le)}(P,A),P}function _n(A){return"object"==typeof A&&!!A&&Fi in A}function $n(A,P){const z=[];for(let le=0;le<A.length;le++)z.push(A.charAt(le)),le<P.length&&z.push(P.charAt(le));return z.join("")}function dr(A){return bt.create("missing-app-config-values",{valueName:A})}$n("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$n("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zn{constructor(P,z,le){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Me=function Br(A){if(!A||!A.options)throw dr("App Configuration Object");if(!A.name)throw dr("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:z}=A;for(const le of P)if(!z[le])throw dr(le);return{appName:A.name,projectId:z.projectId,apiKey:z.apiKey,appId:z.appId,senderId:z.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:Me,installations:z,analyticsProvider:le}}_delete(){return Promise.resolve()}}function Zn(A){return yi.apply(this,arguments)}function yi(){return(yi=(0,Q.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(as,{scope:bi}),A.swRegistration.update().catch(()=>{})}catch(P){throw bt.create("failed-service-worker-registration",{browserErrorMessage:P.message})}})).apply(this,arguments)}function hr(A,P){return ii.apply(this,arguments)}function ii(){return(ii=(0,Q.Z)(function*(A,P){if(!P&&!A.swRegistration&&(yield Zn(A)),P||!A.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw bt.create("invalid-sw-registration");A.swRegistration=P}})).apply(this,arguments)}function Hi(A,P){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,Q.Z)(function*(A,P){P?A.vapidKey=P:A.vapidKey||(A.vapidKey=Jr)})).apply(this,arguments)}function Tr(){return(Tr=(0,Q.Z)(function*(A,P){if(!navigator)throw bt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw bt.create("permission-blocked");return yield Hi(A,null==P?void 0:P.vapidKey),yield hr(A,null==P?void 0:P.serviceWorkerRegistration),$i(A)})).apply(this,arguments)}function ms(A,P,z){return fo.apply(this,arguments)}function fo(){return(fo=(0,Q.Z)(function*(A,P,z){const le=Ls(P);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(le,{message_id:z[Fi],message_name:z[ei],message_time:z[Fs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ls(A){switch(A){case Yi.NOTIFICATION_CLICKED:return"notification_open";case Yi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ca(){return(Ca=(0,Q.Z)(function*(A,P){const z=P.data;if(!z.isFirebaseMessaging)return;A.onMessageHandler&&z.messageType===Yi.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Ke(z)):A.onMessageHandler.next(Ke(z)));const le=z.data;_n(le)&&"1"===le[Cs]&&(yield ms(A,z.messageType,le))})).apply(this,arguments)}const Go="@firebase/messaging",Ka=A=>{const P=new zn(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",z=>function po(A,P){return Ca.apply(this,arguments)}(P,z)),P},Ws=A=>{const P=A.getProvider("messaging").getImmediate();return{getToken:le=>function si(A,P){return Tr.apply(this,arguments)}(P,le)}};function ks(){return xo.apply(this,arguments)}function xo(){return(xo=(0,Q.Z)(function*(){try{yield(0,ye.eu)()}catch(A){return!1}return"undefined"!=typeof window&&(0,ye.hl)()&&(0,ye.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ba(){(0,Ee._registerComponent)(new Se.wA("messaging",Ka,"PUBLIC")),(0,Ee._registerComponent)(new Se.wA("messaging-internal",Ws,"PRIVATE")),(0,Ee.registerVersion)(Go,"0.9.12"),(0,Ee.registerVersion)(Go,"0.9.12","esm2017")}();const Wo="analytics",tc="firebase_id",ko="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mi="https://www.googletagmanager.com/gtag/js",fi=new Oe.Yd("@firebase/analytics");function zo(A){return Promise.all(A.map(P=>P.catch(z=>z)))}function Ta(A,P){const z=document.createElement("script");z.src=`${Mi}?l=${A}&id=${P}`,z.async=!0,document.head.appendChild(z)}function As(A,P,z,le,Me,Ye){return aa.apply(this,arguments)}function aa(){return(aa=(0,Q.Z)(function*(A,P,z,le,Me,Ye){const vt=le[Me];try{if(vt)yield P[vt];else{const rn=(yield zo(z)).find(In=>In.measurementId===Me);rn&&(yield P[rn.appId])}}catch(Gt){fi.error(Gt)}A("config",Me,Ye)})).apply(this,arguments)}function zs(A,P,z,le,Me){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,Q.Z)(function*(A,P,z,le,Me){try{let Ye=[];if(Me&&Me.send_to){let vt=Me.send_to;Array.isArray(vt)||(vt=[vt]);const Gt=yield zo(z);for(const rn of vt){const In=Gt.find(kn=>kn.measurementId===rn),ar=In&&P[In.appId];if(!ar){Ye=[];break}Ye.push(ar)}}0===Ye.length&&(Ye=Object.values(P)),yield Promise.all(Ye),A("event",le,Me||{})}catch(Ye){fi.error(Ye)}})).apply(this,arguments)}function Ya(){const A=window.document.getElementsByTagName("script");for(const P of Object.values(A))if(P.src&&P.src.includes(Mi))return P;return null}const jr=new ye.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ua=new class mo{constructor(P={},z=1e3){this.throttleMetadata=P,this.intervalMillis=z}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,z){this.throttleMetadata[P]=z}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function Ko(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function Ma(A){return $r.apply(this,arguments)}function $r(){return($r=(0,Q.Z)(function*(A){var P;const{appId:z,apiKey:le}=A,Me={method:"GET",headers:Ko(le)},Ye=ko.replace("{app-id}",z),vt=yield fetch(Ye,Me);if(200!==vt.status&&304!==vt.status){let Gt="";try{const rn=yield vt.json();(null===(P=rn.error)||void 0===P?void 0:P.message)&&(Gt=rn.error.message)}catch(rn){}throw jr.create("config-fetch-failed",{httpStatus:vt.status,responseMessage:Gt})}return vt.json()})).apply(this,arguments)}function al(A){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,Q.Z)(function*(A,P=ua,z){const{appId:le,apiKey:Me,measurementId:Ye}=A.options;if(!le)throw jr.create("no-app-id");if(!Me){if(Ye)return{measurementId:Ye,appId:le};throw jr.create("no-api-key")}const vt=P.getThrottleMetadata(le)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Gt=new xi;return setTimeout((0,Q.Z)(function*(){Gt.abort()}),void 0!==z?z:6e4),xa({appId:le,apiKey:Me,measurementId:Ye},vt,Gt,P)})).apply(this,arguments)}function xa(A,P,z){return Us.apply(this,arguments)}function Us(){return(Us=(0,Q.Z)(function*(A,{throttleEndTimeMillis:P,backoffCount:z},le,Me=ua){const{appId:Ye,measurementId:vt}=A;try{yield nc(le,P)}catch(Gt){if(vt)return fi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${vt} provided in the "measurementId" field in the local Firebase config. [${Gt.message}]`),{appId:Ye,measurementId:vt};throw Gt}try{const Gt=yield Ma(A);return Me.deleteThrottleMetadata(Ye),Gt}catch(Gt){if(!la(Gt)){if(Me.deleteThrottleMetadata(Ye),vt)return fi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${vt} provided in the "measurementId" field in the local Firebase config. [${Gt.message}]`),{appId:Ye,measurementId:vt};throw Gt}const rn=503===Number(Gt.customData.httpStatus)?(0,ye.$s)(z,Me.intervalMillis,30):(0,ye.$s)(z,Me.intervalMillis),In={throttleEndTimeMillis:Date.now()+rn,backoffCount:z+1};return Me.setThrottleMetadata(Ye,In),fi.debug(`Calling attemptFetch again in ${rn} millis`),xa(A,In,le,Me)}})).apply(this,arguments)}function nc(A,P){return new Promise((z,le)=>{const Me=Math.max(P-Date.now(),0),Ye=setTimeout(z,Me);A.addEventListener(()=>{clearTimeout(Ye),le(jr.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function la(A){if(!(A instanceof ye.ZR&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}class xi{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}function qo(){return _s.apply(this,arguments)}function _s(){return(_s=(0,Q.Z)(function*(){if(!(0,ye.hl)())return fi.warn(jr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ye.eu)()}catch(A){return fi.warn(jr.create("indexeddb-unavailable",{errorInfo:A}).message),!1}return!0})).apply(this,arguments)}function _o(){return(_o=(0,Q.Z)(function*(A,P,z,le,Me,Ye,vt){var Gt;const rn=al(A);rn.then(Vi=>{z[Vi.measurementId]=Vi.appId,A.options.measurementId&&Vi.measurementId!==A.options.measurementId&&fi.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${Vi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Vi=>fi.error(Vi)),P.push(rn);const In=qo().then(Vi=>{if(Vi)return le.getId()}),[ar,kn]=yield Promise.all([rn,In]);Ya()||Ta(Ye,ar.measurementId),Me("js",new Date);const Yr=null!==(Gt=null==vt?void 0:vt.config)&&void 0!==Gt?Gt:{};return Yr.origin="firebase",Yr.update=!0,null!=kn&&(Yr[tc]=kn),Me("config",ar.measurementId,Yr),ar.measurementId})).apply(this,arguments)}class I{constructor(P){this.app=P}_delete(){return delete E[this.app.options.appId],Promise.resolve()}}let E={},v=[];const R={};let oe,te,k="dataLayer",se=!1;function zt(A,P,z){!function dn(){const A=[];if((0,ye.ru)()&&A.push("This is a browser extension environment."),(0,ye.zI)()||A.push("Cookies are not available."),A.length>0){const P=A.map((le,Me)=>`(${Me+1}) ${le}`).join(" "),z=jr.create("invalid-analytics-context",{errorInfo:P});fi.warn(z.message)}}();const le=A.options.appId;if(!le)throw jr.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw jr.create("no-api-key");fi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=E[le])throw jr.create("already-exists",{id:le});if(!se){!function es(A){let P=[];Array.isArray(window[A])?P=window[A]:window[A]=P}(k);const{wrappedGtag:Ye,gtagCore:vt}=function Za(A,P,z,le,Me){let Ye=function(...vt){window[le].push(arguments)};return window[Me]&&"function"==typeof window[Me]&&(Ye=window[Me]),window[Me]=function Aa(A,P,z,le){function Ye(){return(Ye=(0,Q.Z)(function*(vt,Gt,rn){try{"event"===vt?yield zs(A,P,z,Gt,rn):"config"===vt?yield As(A,P,z,le,Gt,rn):A("set",Gt)}catch(In){fi.error(In)}})).apply(this,arguments)}return function Me(vt,Gt,rn){return Ye.apply(this,arguments)}}(Ye,A,P,z),{gtagCore:Ye,wrappedGtag:window[Me]}}(E,v,R,k,"gtag");te=Ye,oe=vt,se=!0}return E[le]=function yo(A,P,z,le,Me,Ye,vt){return _o.apply(this,arguments)}(A,v,R,P,oe,k,z),new I(A)}function or(){return(or=(0,Q.Z)(function*(A,P,z,le,Me){if(Me&&Me.global)A("event",z,le);else{const Ye=yield P;A("event",z,Object.assign(Object.assign({},le),{send_to:Ye}))}})).apply(this,arguments)}function oo(){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,Q.Z)(function*(){if((0,ye.ru)()||!(0,ye.zI)()||!(0,ye.hl)())return!1;try{return yield(0,ye.eu)()}catch(A){return!1}})).apply(this,arguments)}const Oa="@firebase/analytics";!function Wd(){(0,Ee._registerComponent)(new Se.wA(Wo,(P,{options:z})=>zt(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),z),"PUBLIC")),(0,Ee._registerComponent)(new Se.wA("analytics-internal",function A(P){try{const z=P.getProvider(Wo).getImmediate();return{logEvent:(le,Me,Ye)=>function Yc(A,P,z,le){A=(0,ye.m9)(A),function Ar(A,P,z,le,Me){return or.apply(this,arguments)}(te,E[A.app.options.appId],P,z,le).catch(Me=>fi.error(Me))}(z,le,Me,Ye)}}catch(z){throw jr.create("interop-component-reg-failed",{reason:z})}},"PRIVATE")),(0,Ee.registerVersion)(Oa,"0.7.8"),(0,Ee.registerVersion)(Oa,"0.7.8","esm2017")}();var cs=F(4408),zd=F(9490);const ul=new class Kn extends zd.v{}(class Zs extends cs.o{constructor(P,z){super(P,z),this.scheduler=P,this.work=z}schedule(P,z=0){return z>0?super.schedule(P,z):(this.delay=z,this.state=P,this.scheduler.flush(this),this)}execute(P,z){return z>0||this.closed?super.execute(P,z):this._execute(P,z)}requestAsyncId(P,z,le=0){return null!=le&&le>0||null==le&&this.delay>0?super.requestAsyncId(P,z,le):P.flush(this)}});var Ri=F(4986),No=F(8505),rs=F(5363),$s=F(9468);const ka=new p.GfV("7.3.0"),Zo="__angularfire_symbol__analyticsIsSupportedValue",Gi="__angularfire_symbol__analyticsIsSupported",vs="__angularfire_symbol__remoteConfigIsSupportedValue",Fo="__angularfire_symbol__remoteConfigIsSupported",Iu="__angularfire_symbol__messagingIsSupportedValue",Mt="__angularfire_symbol__messagingIsSupported";function wo(A,P,z){if(P){if(1===P.length)return P[0];const Ye=P.filter(vt=>vt.app===z);if(1===Ye.length)return Ye[0]}return z.container.getProvider(A).getImmediate({optional:!0})}globalThis[Gi]||(globalThis[Gi]=oo().then(A=>globalThis[Zo]=A).catch(()=>globalThis[Zo]=!1)),globalThis[Mt]||(globalThis[Mt]=ks().then(A=>globalThis[Iu]=A).catch(()=>globalThis[Iu]=!1)),globalThis[Fo]||(globalThis[Fo]=Ni().then(A=>globalThis[vs]=A).catch(()=>globalThis[vs]=!1));const Lo=(A,P)=>{const z=P?[P]:(0,q.C6)(),le=[];return z.forEach(Me=>{Me.container.getProvider(A).instances.forEach(vt=>{le.includes(vt)||le.push(vt)})}),le};function Yo(){}class Vo{constructor(P,z=ul){this.zone=P,this.delegate=z}now(){return this.delegate.now()}schedule(P,z,le){const Me=this.zone;return this.delegate.schedule(function(vt){Me.runGuarded(()=>{P.apply(this,[vt])})},z,le)}}class cl{constructor(P){this.zone=P,this.task=null}call(P,z){const le=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yo,{},Yo,Yo)),z.pipe((0,No.b)({next:le,complete:le,error:le})).subscribe(P).add(le)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Uo=(()=>{class A{constructor(z){this.ngZone=z,this.outsideAngular=z.runOutsideAngular(()=>new Vo(Zone.current)),this.insideAngular=z.run(()=>new Vo(Zone.current,Ri.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(z){return new(z||A)(p.LFG(p.R0b))},A.\u0275prov=p.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function uo(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function Cu(A){return A.pipe((0,rs.Q)(uo().outsideAngular))}function ca(A){return uo(),function Qo(A){return function(z){return(z=z.lift(new cl(A.ngZone))).pipe((0,$s.R)(A.outsideAngular),(0,rs.Q)(A.insideAngular))}}(uo())(A)}},2090:(Tt,We,F)=>{F.d(We,{$s:()=>Dr,BH:()=>Qe,G6:()=>ke,L:()=>Ne,LL:()=>Vt,Lj:()=>pn,Mn:()=>Ve,Sg:()=>Ze,UG:()=>Le,US:()=>Oe,X3:()=>Nt,ZB:()=>Te,ZR:()=>Ue,b$:()=>U,d:()=>Y,eu:()=>X,hl:()=>we,jU:()=>Et,m9:()=>Yt,ne:()=>Ut,pd:()=>wr,r3:()=>kt,ru:()=>j,tV:()=>ce,uI:()=>ze,vZ:()=>lr,w1:()=>ve,xO:()=>Er,xb:()=>Hn,z$:()=>gt,zI:()=>Ce,zd:()=>Gn});var p=F(5861);const ye=function(ge){const ae=[];let Ie=0;for(let qe=0;qe<ge.length;qe++){let Fe=ge.charCodeAt(qe);Fe<128?ae[Ie++]=Fe:Fe<2048?(ae[Ie++]=Fe>>6|192,ae[Ie++]=63&Fe|128):55296==(64512&Fe)&&qe+1<ge.length&&56320==(64512&ge.charCodeAt(qe+1))?(Fe=65536+((1023&Fe)<<10)+(1023&ge.charCodeAt(++qe)),ae[Ie++]=Fe>>18|240,ae[Ie++]=Fe>>12&63|128,ae[Ie++]=Fe>>6&63|128,ae[Ie++]=63&Fe|128):(ae[Ie++]=Fe>>12|224,ae[Ie++]=Fe>>6&63|128,ae[Ie++]=63&Fe|128)}return ae},Oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,ae){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ie=ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,qe=[];for(let Fe=0;Fe<ge.length;Fe+=3){const yt=ge[Fe],pt=Fe+1<ge.length,Cn=pt?ge[Fe+1]:0,Rr=Fe+2<ge.length,yn=Rr?ge[Fe+2]:0;let Nn=(15&Cn)<<2|yn>>6,yr=63&yn;Rr||(yr=64,pt||(Nn=64)),qe.push(Ie[yt>>2],Ie[(3&yt)<<4|Cn>>4],Ie[Nn],Ie[yr])}return qe.join("")},encodeString(ge,ae){return this.HAS_NATIVE_SUPPORT&&!ae?btoa(ge):this.encodeByteArray(ye(ge),ae)},decodeString(ge,ae){return this.HAS_NATIVE_SUPPORT&&!ae?atob(ge):function(ge){const ae=[];let Ie=0,qe=0;for(;Ie<ge.length;){const Fe=ge[Ie++];if(Fe<128)ae[qe++]=String.fromCharCode(Fe);else if(Fe>191&&Fe<224){const yt=ge[Ie++];ae[qe++]=String.fromCharCode((31&Fe)<<6|63&yt)}else if(Fe>239&&Fe<365){const Rr=((7&Fe)<<18|(63&ge[Ie++])<<12|(63&ge[Ie++])<<6|63&ge[Ie++])-65536;ae[qe++]=String.fromCharCode(55296+(Rr>>10)),ae[qe++]=String.fromCharCode(56320+(1023&Rr))}else{const yt=ge[Ie++],pt=ge[Ie++];ae[qe++]=String.fromCharCode((15&Fe)<<12|(63&yt)<<6|63&pt)}}return ae.join("")}(this.decodeStringToByteArray(ge,ae))},decodeStringToByteArray(ge,ae){this.init_();const Ie=ae?this.charToByteMapWebSafe_:this.charToByteMap_,qe=[];for(let Fe=0;Fe<ge.length;){const yt=Ie[ge.charAt(Fe++)],Cn=Fe<ge.length?Ie[ge.charAt(Fe)]:0;++Fe;const yn=Fe<ge.length?Ie[ge.charAt(Fe)]:64;++Fe;const Jt=Fe<ge.length?Ie[ge.charAt(Fe)]:64;if(++Fe,null==yt||null==Cn||null==yn||null==Jt)throw Error();qe.push(yt<<2|Cn>>4),64!==yn&&(qe.push(Cn<<4&240|yn>>2),64!==Jt&&qe.push(yn<<6&192|Jt))}return qe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}},Ne=function(ge){return function(ge){const ae=ye(ge);return Oe.encodeByteArray(ae,!0)}(ge).replace(/\./g,"")},ce=function(ge){try{return Oe.decodeString(ge,!0)}catch(ae){console.error("base64Decode failed: ",ae)}return null};function Te(ge,ae){if(!(ae instanceof Object))return ae;switch(ae.constructor){case Date:return new Date(ae.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return ae}for(const Ie in ae)!ae.hasOwnProperty(Ie)||!ut(Ie)||(ge[Ie]=Te(ge[Ie],ae[Ie]));return ge}function ut(ge){return"__proto__"!==ge}class Qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ae,Ie)=>{this.resolve=ae,this.reject=Ie})}wrapCallback(ae){return(Ie,qe)=>{Ie?this.reject(Ie):this.resolve(qe),"function"==typeof ae&&(this.promise.catch(()=>{}),1===ae.length?ae(Ie):ae(Ie,qe))}}}function Ze(ge,ae){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const qe=ae||"demo-project",Fe=ge.iat||0,yt=ge.sub||ge.user_id;if(!yt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pt=Object.assign({iss:`https://securetoken.google.com/${qe}`,aud:qe,iat:Fe,exp:Fe+3600,auth_time:Fe,sub:yt,user_id:yt,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[Ne(JSON.stringify({alg:"none",type:"JWT"})),Ne(JSON.stringify(pt)),""].join(".")}function gt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ze(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function Le(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ge){return!1}}function Et(){return"object"==typeof self&&self.self===self}function j(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function U(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Y(){return gt().indexOf("Electron/")>=0}function ve(){const ge=gt();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function Ve(){return gt().indexOf("MSAppHost/")>=0}function ke(){return!Le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function we(){return"object"==typeof indexedDB}function X(){return new Promise((ge,ae)=>{try{let Ie=!0;const qe="validate-browser-context-for-indexeddb-analytics-module",Fe=self.indexedDB.open(qe);Fe.onsuccess=()=>{Fe.result.close(),Ie||self.indexedDB.deleteDatabase(qe),ge(!0)},Fe.onupgradeneeded=()=>{Ie=!1},Fe.onerror=()=>{var yt;ae((null===(yt=Fe.error)||void 0===yt?void 0:yt.message)||"")}}catch(Ie){ae(Ie)}})}function Ce(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ue extends Error{constructor(ae,Ie,qe){super(Ie),this.code=ae,this.customData=qe,this.name="FirebaseError",Object.setPrototypeOf(this,Ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vt.prototype.create)}}class Vt{constructor(ae,Ie,qe){this.service=ae,this.serviceName=Ie,this.errors=qe}create(ae,...Ie){const qe=Ie[0]||{},Fe=`${this.service}/${ae}`,yt=this.errors[ae],pt=yt?function wt(ge,ae){return ge.replace(Wt,(Ie,qe)=>{const Fe=ae[qe];return null!=Fe?String(Fe):`<${qe}?>`})}(yt,qe):"Error";return new Ue(Fe,`${this.serviceName}: ${pt} (${Fe}).`,qe)}}const Wt=/\{\$([^}]+)}/g;function kt(ge,ae){return Object.prototype.hasOwnProperty.call(ge,ae)}function Hn(ge){for(const ae in ge)if(Object.prototype.hasOwnProperty.call(ge,ae))return!1;return!0}function lr(ge,ae){if(ge===ae)return!0;const Ie=Object.keys(ge),qe=Object.keys(ae);for(const Fe of Ie){if(!qe.includes(Fe))return!1;const yt=ge[Fe],pt=ae[Fe];if(tr(yt)&&tr(pt)){if(!lr(yt,pt))return!1}else if(yt!==pt)return!1}for(const Fe of qe)if(!Ie.includes(Fe))return!1;return!0}function tr(ge){return null!==ge&&"object"==typeof ge}function Er(ge){const ae=[];for(const[Ie,qe]of Object.entries(ge))Array.isArray(qe)?qe.forEach(Fe=>{ae.push(encodeURIComponent(Ie)+"="+encodeURIComponent(Fe))}):ae.push(encodeURIComponent(Ie)+"="+encodeURIComponent(qe));return ae.length?"&"+ae.join("&"):""}function Gn(ge){const ae={};return ge.replace(/^\?/,"").split("&").forEach(qe=>{if(qe){const[Fe,yt]=qe.split("=");ae[decodeURIComponent(Fe)]=decodeURIComponent(yt)}}),ae}function wr(ge){const ae=ge.indexOf("?");if(!ae)return"";const Ie=ge.indexOf("#",ae);return ge.substring(ae,Ie>0?Ie:void 0)}function Ut(ge,ae){const Ie=new Ht(ge,ae);return Ie.subscribe.bind(Ie)}class Ht{constructor(ae,Ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ie,this.task.then(()=>{ae(this)}).catch(qe=>{this.error(qe)})}next(ae){this.forEachObserver(Ie=>{Ie.next(ae)})}error(ae){this.forEachObserver(Ie=>{Ie.error(ae)}),this.close(ae)}complete(){this.forEachObserver(ae=>{ae.complete()}),this.close()}subscribe(ae,Ie,qe){let Fe;if(void 0===ae&&void 0===Ie&&void 0===qe)throw new Error("Missing Observer.");Fe=function sn(ge,ae){if("object"!=typeof ge||null===ge)return!1;for(const Ie of ae)if(Ie in ge&&"function"==typeof ge[Ie])return!0;return!1}(ae,["next","error","complete"])?ae:{next:ae,error:Ie,complete:qe},void 0===Fe.next&&(Fe.next=Pr),void 0===Fe.error&&(Fe.error=Pr),void 0===Fe.complete&&(Fe.complete=Pr);const yt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Fe.error(this.finalError):Fe.complete()}catch(pt){}}),this.observers.push(Fe),yt}unsubscribeOne(ae){void 0===this.observers||void 0===this.observers[ae]||(delete this.observers[ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ae){if(!this.finalized)for(let Ie=0;Ie<this.observers.length;Ie++)this.sendOne(Ie,ae)}sendOne(ae,Ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ae])try{Ie(this.observers[ae])}catch(qe){"undefined"!=typeof console&&console.error&&console.error(qe)}})}close(ae){this.finalized||(this.finalized=!0,void 0!==ae&&(this.finalError=ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pr(){}function Dr(ge,ae=1e3,Ie=2){const qe=ae*Math.pow(Ie,ge),Fe=Math.round(.5*qe*(Math.random()-.5)*2);return Math.min(144e5,qe+Fe)}function Yt(ge){return ge&&ge._delegate?ge._delegate:ge}function kr(ge,ae){return new Promise((Ie,qe)=>{ge.onsuccess=Fe=>{Ie(Fe.target.result)},ge.onerror=Fe=>{var yt;qe(`${ae}: ${null===(yt=Fe.target.error)||void 0===yt?void 0:yt.message}`)}})}class Xt{constructor(ae){this._db=ae,this.objectStoreNames=this._db.objectStoreNames}transaction(ae,Ie="readonly"){return new Ct(this._db.transaction.call(this._db,ae,Ie))}createObjectStore(ae,Ie){return new ot(this._db.createObjectStore(ae,Ie))}close(){this._db.close()}}class Ct{constructor(ae){this._transaction=ae,this.complete=new Promise((Ie,qe)=>{this._transaction.oncomplete=function(){Ie()},this._transaction.onerror=()=>{qe(this._transaction.error)},this._transaction.onabort=()=>{qe(this._transaction.error)}})}objectStore(ae){return new ot(this._transaction.objectStore(ae))}}class ot{constructor(ae){this._store=ae}index(ae){return new Pt(this._store.index(ae))}createIndex(ae,Ie,qe){return new Pt(this._store.createIndex(ae,Ie,qe))}get(ae){return kr(this._store.get(ae),"Error reading from IndexedDB")}put(ae,Ie){return kr(this._store.put(ae,Ie),"Error writing to IndexedDB")}delete(ae){return kr(this._store.delete(ae),"Error deleting from IndexedDB")}clear(){return kr(this._store.clear(),"Error clearing IndexedDB object store")}}class Pt{constructor(ae){this._index=ae}get(ae){return kr(this._index.get(ae),"Error reading from IndexedDB")}}function Nt(ge,ae,Ie){return new Promise((qe,Fe)=>{try{const yt=indexedDB.open(ge,ae);yt.onsuccess=pt=>{qe(new Xt(pt.target.result))},yt.onerror=pt=>{var Cn;Fe(`Error opening indexedDB: ${null===(Cn=pt.target.error)||void 0===Cn?void 0:Cn.message}`)},yt.onupgradeneeded=pt=>{Ie(new Xt(yt.result),pt.oldVersion,pt.newVersion,new Ct(yt.transaction))}}catch(yt){Fe(`Error opening indexedDB: ${yt.message}`)}})}function pn(ge){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,p.Z)(function*(ge){return new Promise((ae,Ie)=>{try{const qe=indexedDB.deleteDatabase(ge);qe.onsuccess=()=>{ae()},qe.onerror=Fe=>{var yt;Ie(`Error deleting indexedDB database "${ge}": ${null===(yt=Fe.target.error)||void 0===yt?void 0:yt.message}`)}}catch(qe){Ie(`Error deleting indexedDB database "${ge}": ${qe.message}`)}})})).apply(this,arguments)}},7556:(Tt,We,F)=>{F.d(We,{e:()=>ce});var p=F(5861),q=F(7565),Q=F(4004),Ee=F(9300),ye=F(3900),Se=F(9646),Oe=F(5e3),Pe=F(1205),Ne=F(7566);let ce=(()=>{class ie{constructor(ut,Qe,Ze,gt){this.angularFireAuth=ut,this.angularFireStore=Qe,this.activatedRoute=Ze,this.router=gt,this.redirectOnLoggedOutUrl=null,this.usersCollection=this.angularFireStore.collection("users"),this.isAuthenticated$=this.angularFireAuth.user.pipe((0,Q.U)(ze=>!!ze)),this.user$=this.angularFireAuth.user.pipe((0,Q.U)(ze=>{var Le,Et,j;return ze?{name:null!==(Le=ze.displayName)&&void 0!==Le?Le:"unknown name",email:null!==(Et=ze.email)&&void 0!==Et?Et:"unknow email",age:10,phoneNumber:null!==(j=ze.phoneNumber)&&void 0!==j?j:"unknown phone",uuid:ze.uid}:null})),this.router.events.pipe((0,Ee.h)(ze=>ze instanceof q.m2),(0,Q.U)(()=>this.activatedRoute.firstChild),(0,ye.w)(ze=>{var Le;return null!==(Le=null==ze?void 0:ze.data)&&void 0!==Le?Le:(0,Se.of)({})})).subscribe(ze=>{this.redirectOnLoggedOutUrl=ze.redirectOnLoggedOutUrl})}createUser(ut){var Qe=this;return(0,p.Z)(function*(){var Ze;const{name:gt,email:ze,password:Le,age:Et,phoneNumber:j}=ut,U=yield Qe.angularFireAuth.createUserWithEmailAndPassword(ze,Le);if(!U.user)throw Error("User cannot be found");yield Qe.usersCollection.doc(null===(Ze=U.user)||void 0===Ze?void 0:Ze.uid).set({name:gt,email:ze,phoneNumber:j,age:Et}),yield U.user.updateProfile({displayName:gt})})()}login(ut){var Qe=this;return(0,p.Z)(function*(){const{email:Ze,password:gt}=ut;yield Qe.angularFireAuth.signInWithEmailAndPassword(Ze,gt)})()}logout(){var ut=this;return(0,p.Z)(function*(){yield ut.angularFireAuth.signOut(),ut.redirectOnLoggedOutUrl&&ut.router.navigateByUrl(ut.redirectOnLoggedOutUrl)})()}}return ie.\u0275fac=function(ut){return new(ut||ie)(Oe.LFG(Pe.zQ),Oe.LFG(Ne.ST),Oe.LFG(q.gz),Oe.LFG(q.F0))},ie.\u0275prov=Oe.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})()},4466:(Tt,We,F)=>{F.d(We,{m:()=>ye});var p=F(9808),q=F(2382),Q=F(1470),Ee=F(5e3);let ye=(()=>{class Se{}return Se.\u0275fac=function(Pe){return new(Pe||Se)},Se.\u0275mod=Ee.oAB({type:Se}),Se.\u0275inj=Ee.cJS({imports:[[p.ez,q.UX,Q.yI.forRoot()]]}),Se})()},6213:(Tt,We,F)=>{var p=F(9808),q=F(5e3);class Q extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ee extends Q{static makeCurrent(){(0,p.HT)(new Ee)}onAndCancel(fe,ne,xe){return fe.addEventListener(ne,xe,!1),()=>{fe.removeEventListener(ne,xe,!1)}}dispatchEvent(fe,ne){fe.dispatchEvent(ne)}remove(fe){fe.parentNode&&fe.parentNode.removeChild(fe)}createElement(fe,ne){return(ne=ne||this.getDefaultDocument()).createElement(fe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(fe){return fe.nodeType===Node.ELEMENT_NODE}isShadowRoot(fe){return fe instanceof DocumentFragment}getGlobalEventTarget(fe,ne){return"window"===ne?window:"document"===ne?fe:"body"===ne?fe.body:null}getBaseHref(fe){const ne=function Se(){return ye=ye||document.querySelector("base"),ye?ye.getAttribute("href"):null}();return null==ne?null:function Pe(he){Oe=Oe||document.createElement("a"),Oe.setAttribute("href",he);const fe=Oe.pathname;return"/"===fe.charAt(0)?fe:`/${fe}`}(ne)}resetBaseElement(){ye=null}getUserAgent(){return window.navigator.userAgent}getCookie(fe){return(0,p.Mx)(document.cookie,fe)}}let Oe,ye=null;const Ne=new q.OlP("TRANSITION_ID"),ie=[{provide:q.ip1,useFactory:function ce(he,fe,ne){return()=>{ne.get(q.CZH).donePromise.then(()=>{const xe=(0,p.q)(),st=fe.querySelectorAll(`style[ng-transition="${he}"]`);for(let en=0;en<st.length;en++)xe.remove(st[en])})}},deps:[Ne,p.K0,q.zs3],multi:!0}];class Te{static init(){(0,q.VLi)(new Te)}addToWindow(fe){q.dqk.getAngularTestability=(xe,st=!0)=>{const en=fe.findTestabilityInTree(xe,st);if(null==en)throw new Error("Could not find testability for element.");return en},q.dqk.getAllAngularTestabilities=()=>fe.getAllTestabilities(),q.dqk.getAllAngularRootElements=()=>fe.getAllRootElements(),q.dqk.frameworkStabilizers||(q.dqk.frameworkStabilizers=[]),q.dqk.frameworkStabilizers.push(xe=>{const st=q.dqk.getAllAngularTestabilities();let en=st.length,de=!1;const _e=function(Be){de=de||Be,en--,0==en&&xe(de)};st.forEach(function(Be){Be.whenStable(_e)})})}findTestabilityInTree(fe,ne,xe){if(null==ne)return null;const st=fe.getTestability(ne);return null!=st?st:xe?(0,p.q)().isShadowRoot(ne)?this.findTestabilityInTree(fe,ne.host,!0):this.findTestabilityInTree(fe,ne.parentElement,!0):null}}let ut=(()=>{class he{build(){return new XMLHttpRequest}}return he.\u0275fac=function(ne){return new(ne||he)},he.\u0275prov=q.Yz7({token:he,factory:he.\u0275fac}),he})();const Qe=new q.OlP("EventManagerPlugins");let Ze=(()=>{class he{constructor(ne,xe){this._zone=xe,this._eventNameToPlugin=new Map,ne.forEach(st=>st.manager=this),this._plugins=ne.slice().reverse()}addEventListener(ne,xe,st){return this._findPluginFor(xe).addEventListener(ne,xe,st)}addGlobalEventListener(ne,xe,st){return this._findPluginFor(xe).addGlobalEventListener(ne,xe,st)}getZone(){return this._zone}_findPluginFor(ne){const xe=this._eventNameToPlugin.get(ne);if(xe)return xe;const st=this._plugins;for(let en=0;en<st.length;en++){const de=st[en];if(de.supports(ne))return this._eventNameToPlugin.set(ne,de),de}throw new Error(`No event manager plugin found for event ${ne}`)}}return he.\u0275fac=function(ne){return new(ne||he)(q.LFG(Qe),q.LFG(q.R0b))},he.\u0275prov=q.Yz7({token:he,factory:he.\u0275fac}),he})();class gt{constructor(fe){this._doc=fe}addGlobalEventListener(fe,ne,xe){const st=(0,p.q)().getGlobalEventTarget(this._doc,fe);if(!st)throw new Error(`Unsupported event target ${st} for event ${ne}`);return this.addEventListener(st,ne,xe)}}let ze=(()=>{class he{constructor(){this._stylesSet=new Set}addStyles(ne){const xe=new Set;ne.forEach(st=>{this._stylesSet.has(st)||(this._stylesSet.add(st),xe.add(st))}),this.onStylesAdded(xe)}onStylesAdded(ne){}getAllStyles(){return Array.from(this._stylesSet)}}return he.\u0275fac=function(ne){return new(ne||he)},he.\u0275prov=q.Yz7({token:he,factory:he.\u0275fac}),he})(),Le=(()=>{class he extends ze{constructor(ne){super(),this._doc=ne,this._hostNodes=new Map,this._hostNodes.set(ne.head,[])}_addStylesToHost(ne,xe,st){ne.forEach(en=>{const de=this._doc.createElement("style");de.textContent=en,st.push(xe.appendChild(de))})}addHost(ne){const xe=[];this._addStylesToHost(this._stylesSet,ne,xe),this._hostNodes.set(ne,xe)}removeHost(ne){const xe=this._hostNodes.get(ne);xe&&xe.forEach(Et),this._hostNodes.delete(ne)}onStylesAdded(ne){this._hostNodes.forEach((xe,st)=>{this._addStylesToHost(ne,st,xe)})}ngOnDestroy(){this._hostNodes.forEach(ne=>ne.forEach(Et))}}return he.\u0275fac=function(ne){return new(ne||he)(q.LFG(p.K0))},he.\u0275prov=q.Yz7({token:he,factory:he.\u0275fac}),he})();function Et(he){(0,p.q)().remove(he)}const j={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},U=/%COMP%/g;function X(he,fe,ne){for(let xe=0;xe<fe.length;xe++){let st=fe[xe];Array.isArray(st)?X(he,st,ne):(st=st.replace(U,he),ne.push(st))}return ne}function Ce(he){return fe=>{if("__ngUnwrap__"===fe)return he;!1===he(fe)&&(fe.preventDefault(),fe.returnValue=!1)}}let Ge=(()=>{class he{constructor(ne,xe,st){this.eventManager=ne,this.sharedStylesHost=xe,this.appId=st,this.rendererByCompId=new Map,this.defaultRenderer=new Ue(ne)}createRenderer(ne,xe){if(!ne||!xe)return this.defaultRenderer;switch(xe.encapsulation){case q.ifc.Emulated:{let st=this.rendererByCompId.get(xe.id);return st||(st=new Wt(this.eventManager,this.sharedStylesHost,xe,this.appId),this.rendererByCompId.set(xe.id,st)),st.applyToHost(ne),st}case 1:case q.ifc.ShadowDom:return new mt(this.eventManager,this.sharedStylesHost,ne,xe);default:if(!this.rendererByCompId.has(xe.id)){const st=X(xe.id,xe.styles,[]);this.sharedStylesHost.addStyles(st),this.rendererByCompId.set(xe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return he.\u0275fac=function(ne){return new(ne||he)(q.LFG(Ze),q.LFG(Le),q.LFG(q.AFp))},he.\u0275prov=q.Yz7({token:he,factory:he.\u0275fac}),he})();class Ue{constructor(fe){this.eventManager=fe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(fe,ne){return ne?document.createElementNS(j[ne]||ne,fe):document.createElement(fe)}createComment(fe){return document.createComment(fe)}createText(fe){return document.createTextNode(fe)}appendChild(fe,ne){fe.appendChild(ne)}insertBefore(fe,ne,xe){fe&&fe.insertBefore(ne,xe)}removeChild(fe,ne){fe&&fe.removeChild(ne)}selectRootElement(fe,ne){let xe="string"==typeof fe?document.querySelector(fe):fe;if(!xe)throw new Error(`The selector "${fe}" did not match any elements`);return ne||(xe.textContent=""),xe}parentNode(fe){return fe.parentNode}nextSibling(fe){return fe.nextSibling}setAttribute(fe,ne,xe,st){if(st){ne=st+":"+ne;const en=j[st];en?fe.setAttributeNS(en,ne,xe):fe.setAttribute(ne,xe)}else fe.setAttribute(ne,xe)}removeAttribute(fe,ne,xe){if(xe){const st=j[xe];st?fe.removeAttributeNS(st,ne):fe.removeAttribute(`${xe}:${ne}`)}else fe.removeAttribute(ne)}addClass(fe,ne){fe.classList.add(ne)}removeClass(fe,ne){fe.classList.remove(ne)}setStyle(fe,ne,xe,st){st&(q.JOm.DashCase|q.JOm.Important)?fe.style.setProperty(ne,xe,st&q.JOm.Important?"important":""):fe.style[ne]=xe}removeStyle(fe,ne,xe){xe&q.JOm.DashCase?fe.style.removeProperty(ne):fe.style[ne]=""}setProperty(fe,ne,xe){fe[ne]=xe}setValue(fe,ne){fe.nodeValue=ne}listen(fe,ne,xe){return"string"==typeof fe?this.eventManager.addGlobalEventListener(fe,ne,Ce(xe)):this.eventManager.addEventListener(fe,ne,Ce(xe))}}class Wt extends Ue{constructor(fe,ne,xe,st){super(fe),this.component=xe;const en=X(st+"-"+xe.id,xe.styles,[]);ne.addStyles(en),this.contentAttr=function ke(he){return"_ngcontent-%COMP%".replace(U,he)}(st+"-"+xe.id),this.hostAttr=function we(he){return"_nghost-%COMP%".replace(U,he)}(st+"-"+xe.id)}applyToHost(fe){super.setAttribute(fe,this.hostAttr,"")}createElement(fe,ne){const xe=super.createElement(fe,ne);return super.setAttribute(xe,this.contentAttr,""),xe}}class mt extends Ue{constructor(fe,ne,xe,st){super(fe),this.sharedStylesHost=ne,this.hostEl=xe,this.shadowRoot=xe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const en=X(st.id,st.styles,[]);for(let de=0;de<en.length;de++){const _e=document.createElement("style");_e.textContent=en[de],this.shadowRoot.appendChild(_e)}}nodeOrShadowRoot(fe){return fe===this.hostEl?this.shadowRoot:fe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(fe,ne){return super.appendChild(this.nodeOrShadowRoot(fe),ne)}insertBefore(fe,ne,xe){return super.insertBefore(this.nodeOrShadowRoot(fe),ne,xe)}removeChild(fe,ne){return super.removeChild(this.nodeOrShadowRoot(fe),ne)}parentNode(fe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(fe)))}}let Dt=(()=>{class he extends gt{constructor(ne){super(ne)}supports(ne){return!0}addEventListener(ne,xe,st){return ne.addEventListener(xe,st,!1),()=>this.removeEventListener(ne,xe,st)}removeEventListener(ne,xe,st){return ne.removeEventListener(xe,st)}}return he.\u0275fac=function(ne){return new(ne||he)(q.LFG(p.K0))},he.\u0275prov=q.Yz7({token:he,factory:he.\u0275fac}),he})();const $t=["alt","control","meta","shift"],xt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ln={alt:he=>he.altKey,control:he=>he.ctrlKey,meta:he=>he.metaKey,shift:he=>he.shiftKey};let kt=(()=>{class he extends gt{constructor(ne){super(ne)}supports(ne){return null!=he.parseEventName(ne)}addEventListener(ne,xe,st){const en=he.parseEventName(xe),de=he.eventCallback(en.fullKey,st,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(ne,en.domEventName,de))}static parseEventName(ne){const xe=ne.toLowerCase().split("."),st=xe.shift();if(0===xe.length||"keydown"!==st&&"keyup"!==st)return null;const en=he._normalizeKey(xe.pop());let de="";if($t.forEach(Be=>{const nt=xe.indexOf(Be);nt>-1&&(xe.splice(nt,1),de+=Be+".")}),de+=en,0!=xe.length||0===en.length)return null;const _e={};return _e.domEventName=st,_e.fullKey=de,_e}static getEventFullKey(ne){let xe="",st=function nn(he){let fe=he.key;if(null==fe){if(fe=he.keyIdentifier,null==fe)return"Unidentified";fe.startsWith("U+")&&(fe=String.fromCharCode(parseInt(fe.substring(2),16)),3===he.location&&lt.hasOwnProperty(fe)&&(fe=lt[fe]))}return xt[fe]||fe}(ne);return st=st.toLowerCase()," "===st?st="space":"."===st&&(st="dot"),$t.forEach(en=>{en!=st&&ln[en](ne)&&(xe+=en+".")}),xe+=st,xe}static eventCallback(ne,xe,st){return en=>{he.getEventFullKey(en)===ne&&st.runGuarded(()=>xe(en))}}static _normalizeKey(ne){return"esc"===ne?"escape":ne}}return he.\u0275fac=function(ne){return new(ne||he)(q.LFG(p.K0))},he.\u0275prov=q.Yz7({token:he,factory:he.\u0275fac}),he})();const Er=(0,q.eFA)(q._c5,"browser",[{provide:q.Lbi,useValue:p.bD},{provide:q.g9A,useValue:function Hn(){Ee.makeCurrent(),Te.init()},multi:!0},{provide:p.K0,useFactory:function lr(){return(0,q.RDi)(document),document},deps:[]}]),Gn=[{provide:q.zSh,useValue:"root"},{provide:q.qLn,useFactory:function Mn(){return new q.qLn},deps:[]},{provide:Qe,useClass:Dt,multi:!0,deps:[p.K0,q.R0b,q.Lbi]},{provide:Qe,useClass:kt,multi:!0,deps:[p.K0]},{provide:Ge,useClass:Ge,deps:[Ze,Le,q.AFp]},{provide:q.FYo,useExisting:Ge},{provide:ze,useExisting:Le},{provide:Le,useClass:Le,deps:[p.K0]},{provide:q.dDg,useClass:q.dDg,deps:[q.R0b]},{provide:Ze,useClass:Ze,deps:[Qe,q.R0b]},{provide:p.JF,useClass:ut,deps:[]}];let wr=(()=>{class he{constructor(ne){if(ne)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ne){return{ngModule:he,providers:[{provide:q.AFp,useValue:ne.appId},{provide:Ne,useExisting:q.AFp},ie]}}}return he.\u0275fac=function(ne){return new(ne||he)(q.LFG(he,12))},he.\u0275mod=q.oAB({type:he}),he.\u0275inj=q.cJS({providers:Gn,imports:[p.ez,q.hGG]}),he})();"undefined"!=typeof window&&window;var pt=F(127),Rr=(F(820),F(2011)),yn=F(2084);const Xn_firebase={apiKey:"AIzaSyAcBedrPQWtwsBA-t8ZSjUk3y4SQ8eGRK8",authDomain:"clipit-31d1c.firebaseapp.com",projectId:"clipit-31d1c",storageBucket:"clipit-31d1c.appspot.com",messagingSenderId:"169059670918",appId:"1:169059670918:web:0da8e64eae1eddd785ea07"};var Jt=F(7565),Nn=F(9635),yr=F(4004),Xr=F(5698),wi=F(1205);const rr=(0,yr.U)(he=>!!he);let qn=(()=>{class he{constructor(ne,xe){this.router=ne,this.auth=xe,this.canActivate=(st,en)=>{const de=st.data.authGuardPipe||(()=>rr);return this.auth.user.pipe((0,Xr.q)(1),de(st,en),(0,yr.U)(_e=>"boolean"==typeof _e?_e:Array.isArray(_e)?this.router.createUrlTree(_e):this.router.parseUrl(_e)))}}}return he.\u0275fac=function(ne){return new(ne||he)(q.LFG(Jt.F0),q.LFG(wi.zQ))},he.\u0275prov=q.Yz7({token:he,factory:he.\u0275fac,providedIn:"any"}),he})();const di=[{path:"",component:(()=>{class he{constructor(){}ngOnInit(){}}return he.\u0275fac=function(ne){return new(ne||he)},he.\u0275cmp=q.Xpm({type:he,selectors:[["app-home"]],decls:2,vars:0,template:function(ne,xe){1&ne&&(q.TgZ(0,"p"),q._uU(1,"home works!"),q.qZA())},styles:[""]}),he})()},{path:"about",loadChildren:()=>F.e(630).then(F.bind(F,7630)).then(he=>he.AboutModule)},{path:"video",canActivate:[qn],data:{redirectOnLoggedOutUrl:"/",authGuardPipe:()=>("/",(0,Nn.z)(rr,(0,yr.U)(fe=>fe||"/")))},loadChildren:()=>Promise.all([F.e(592),F.e(562)]).then(F.bind(F,6562)).then(he=>he.VideoModule)},{path:"clips",loadChildren:()=>F.e(163).then(F.bind(F,9163)).then(he=>he.ClipsModule)},{path:"user",outlet:"modal",loadChildren:()=>Promise.all([F.e(592),F.e(515)]).then(F.bind(F,2515)).then(he=>he.UserModule)},{path:"**",loadChildren:()=>F.e(442).then(F.bind(F,2442)).then(he=>he.NotFoundModule)}];let mn=(()=>{class he{}return he.\u0275fac=function(ne){return new(ne||he)},he.\u0275mod=q.oAB({type:he}),he.\u0275inj=q.cJS({imports:[[Jt.Bz.forRoot(di)],Jt.Bz]}),he})();var Nr=F(9646),hi=F(5861),gi=F(7556);const Cr=function(){return["user"]},sr=function(he){return{modal:he}},Fr=function(he){return{outlets:he}},Lr=function(he){return[he]};function xn(he,fe){1&he&&(q.TgZ(0,"li")(1,"a",14),q._uU(2,"Login / Register"),q.qZA()()),2&he&&(q.xp6(1),q.Q6J("routerLink",q.VKq(6,Lr,q.VKq(4,Fr,q.VKq(2,sr,q.DdM(1,Cr))))))}const Tn=function(){return{sort:"asc"}};function Bi(he,fe){if(1&he){const ne=q.EpF();q.TgZ(0,"li",7)(1,"a",15),q._uU(2,"Manage"),q.qZA()(),q.TgZ(3,"li",7)(4,"a",16),q._uU(5,"Upload"),q.qZA()(),q.TgZ(6,"li",7)(7,"a",17),q.NdJ("click",function(st){return q.CHM(ne),q.oxw().logout(st)}),q._uU(8,"Logout"),q.qZA()()}2&he&&(q.xp6(1),q.Q6J("queryParams",q.DdM(1,Tn)))}let Vr=(()=>{class he{constructor(ne){this.authService=ne}logout(ne){var xe=this;return(0,hi.Z)(function*(){ne.preventDefault(),yield xe.authService.logout()})()}}return he.\u0275fac=function(ne){return new(ne||he)(q.Y36(gi.e))},he.\u0275cmp=q.Xpm({type:he,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","about",1,"px-2"],[1,"flex","flex-row","ml-auto"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],[1,"px-2",3,"routerLink"],["routerLink","video/manage",1,"px-2",3,"queryParams"],["routerLink","video/upload","href","javascript:void(0);",1,"px-2"],["href","javascript:void(0);",1,"px-2",3,"click"]],template:function(ne,xe){if(1&ne&&(q.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),q._uU(3,"Clipit!"),q.qZA(),q.TgZ(4,"div",3)(5,"ul",4),q.YNc(6,xn,3,8,"li",5),q.ALo(7,"async"),q.YNc(8,Bi,9,2,"ng-template",null,6,q.W1O),q.TgZ(10,"li",7)(11,"a",8),q._uU(12,"About"),q.qZA()()(),q.TgZ(13,"ul",9)(14,"li")(15,"a"),q._UZ(16,"img",10),q.TgZ(17,"span",11),q._uU(18,"English"),q.qZA()()(),q.TgZ(19,"li",12)(20,"a"),q._UZ(21,"img",13),q.TgZ(22,"span",11),q._uU(23,"French"),q.qZA()()()()()()()),2&ne){const st=q.MAs(9);q.xp6(6),q.Q6J("ngIf",!1===q.lcZ(7,2,xe.authService.isAuthenticated$))("ngIfElse",st)}},directives:[Jt.yS,p.O5,Jt.Od],pipes:[p.Ov],styles:[""],changeDetection:0}),he})(),br=(()=>{class he{constructor(){}ngOnInit(){}}return he.\u0275fac=function(ne){return new(ne||he)},he.\u0275cmp=q.Xpm({type:he,selectors:[["app-loading-spinner"]],decls:5,vars:0,consts:[[1,"loadingio-spinner-dual-ring-tosstnkrw7b"],[1,"ldio-stkcctj1ev"]],template:function(ne,xe){1&ne&&(q.TgZ(0,"div",0)(1,"div",1),q._UZ(2,"div"),q.TgZ(3,"div"),q._UZ(4,"div"),q.qZA()()())},styles:['[_nghost-%COMP%]{display:block;position:fixed;top:0;right:0;width:100vw;height:100vh;background:rgba(82,118,154,.2)}@keyframes ldio-stkcctj1ev{0%{transform:rotate(0)}to{transform:rotate(360deg)}}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box!important}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:144px;height:144px;top:28px;left:28px;border-radius:50%;border:16px solid #000;border-color:#1c4595 transparent #1c4595 transparent;animation:ldio-stkcctj1ev 1s linear infinite}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-color:transparent}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;transform:rotate(45deg)}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:16px;height:16px;top:-16px;left:48px;background:#1c4595;border-radius:50%;box-shadow:0 128px #1c4595}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{left:-16px;top:48px;box-shadow:128px 0 #1c4595}[_nghost-%COMP%]   .loadingio-spinner-dual-ring-tosstnkrw7b[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;display:inline-block;overflow:hidden}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(1);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}'],changeDetection:0}),he})();function zr(he,fe){1&he&&q._UZ(0,"app-loading-spinner")}let hs=(()=>{class he{constructor(ne){this.router=ne,this.title="clipit",this.loading$=(0,Nr.of)(!1),this.loading$=this.router.events.pipe((0,yr.U)(xe=>xe instanceof Jt.xV))}}return he.\u0275fac=function(ne){return new(ne||he)(q.Y36(Jt.F0))},he.\u0275cmp=q.Xpm({type:he,selectors:[["app-root"]],decls:5,vars:3,consts:[["name","modal"],[4,"ngIf"]],template:function(ne,xe){1&ne&&(q._UZ(0,"app-nav")(1,"router-outlet")(2,"router-outlet",0),q.YNc(3,zr,1,0,"app-loading-spinner",1),q.ALo(4,"async")),2&ne&&(q.xp6(3),q.Q6J("ngIf",q.lcZ(4,1,xe.loading$)))},directives:[Vr,Jt.lC,p.O5,br],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),he})();var gr=F(4466);let fs=(()=>{class he{}return he.\u0275fac=function(ne){return new(ne||he)},he.\u0275mod=q.oAB({type:he,bootstrap:[hs]}),he.\u0275inj=q.cJS({providers:[],imports:[[wr,mn,Rr.hO.initializeApp(Xn_firebase),gr.m,yn.TE]]}),he})();(0,q.G48)();let Kr=!1;pt.Z.initializeApp(Xn_firebase),pt.Z.auth().onAuthStateChanged(()=>{Kr||Er().bootstrapModule(fs).catch(he=>console.error(he)),Kr=!0})},5867:(Tt,We,F)=>{F.d(We,{C6:()=>p.getApps,Mq:()=>p.getApp,ZR:()=>p.FirebaseError});var p=F(9681);(0,p.registerVersion)("firebase","9.6.11","app")},127:(Tt,We,F)=>{F.d(We,{Z:()=>p.Z});var p=F(3942);p.Z.registerVersion("firebase","9.6.11","app-compat")},820:(Tt,We,F)=>{F.r(We);var p=F(5861),q=F(3942),Q=F(2090),Ee=F(9681),ye=F(655),Se=F(1877),Oe=F(4859);const Ze=function ut(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},gt=function Qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new Q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Et=new Se.Yd("@firebase/auth");function j(g,...c){Et.logLevel<=Se.in.ERROR&&Et.error(`Auth (${Ee.SDK_VERSION}): ${g}`,...c)}function U(g,...c){throw $e(g,...c)}function Y(g,...c){return $e(g,...c)}function ve(g,c,f){const w=Object.assign(Object.assign({},gt()),{[c]:f});return new Q.LL("auth","Firebase",w).create(c,{appName:g.name})}function Ve(g,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&U(g,"argument-error"),ve(g,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(g,...c){if("string"!=typeof g){const f=c[0],w=[...c.slice(1)];return w[0]&&(w[0].appName=g.name),g._errorFactory.create(f,...w)}return ze.create(g,...c)}function ke(g,c,...f){if(!g)throw $e(c,...f)}function we(g){const c="INTERNAL ASSERTION FAILED: "+g;throw j(c),new Error(c)}function X(g,c){g||we(c)}const Ce=new Map;function pe(g){X(g instanceof Function,"Expected a class definition");let c=Ce.get(g);return c?(X(c instanceof g,"Instance stored in cache mismatched with class"),c):(c=new g,Ce.set(g,c),c)}function Vt(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function wt(){return"http:"===Wt()||"https:"===Wt()}function Wt(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class $t{constructor(c,f){this.shortDelay=c,this.longDelay=f,X(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,Q.uI)()||(0,Q.b$)()}get(){return function mt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wt()||(0,Q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function It(g,c){X(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class xt{static initialize(c,f,w){this.fetchImpl=c,f&&(this.headersImpl=f),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ln=new $t(3e4,6e4);function kt(g,c){return g.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:g.tenantId}):c}function nn(g,c,f,w){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(g,c,f,w,L={}){return Mn(g,L,(0,p.Z)(function*(){let J={},Re={};w&&("GET"===c?Re=w:J={body:JSON.stringify(w)});const tt=(0,Q.xO)(Object.assign({key:g.config.apiKey},Re)).slice(1),Rt=yield g._getAdditionalHeaders();return Rt["Content-Type"]="application/json",g.languageCode&&(Rt["X-Firebase-Locale"]=g.languageCode),xt.fetch()(Gn(g,g.config.apiHost,f,tt),Object.assign({method:c,headers:Rt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function Mn(g,c,f){return lr.apply(this,arguments)}function lr(){return(lr=(0,p.Z)(function*(g,c,f){g._canInitEmulator=!1;const w=Object.assign(Object.assign({},lt),c);try{const L=new wr(g),J=yield Promise.race([f(),L.promise]);L.clearNetworkTimeout();const Re=yield J.json();if("needConfirmation"in Re)throw Ln(g,"account-exists-with-different-credential",Re);if(J.ok&&!("errorMessage"in Re))return Re;{const tt=J.ok?Re.errorMessage:Re.error.message,[Rt,on]=tt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Rt)throw Ln(g,"credential-already-in-use",Re);if("EMAIL_EXISTS"===Rt)throw Ln(g,"email-already-in-use",Re);const Dn=w[Rt]||Rt.toLowerCase().replace(/[_\s]+/g,"-");if(on)throw ve(g,Dn,on);U(g,Dn)}}catch(L){if(L instanceof Q.ZR)throw L;U(g,"network-request-failed")}})).apply(this,arguments)}function tr(g,c,f,w){return Er.apply(this,arguments)}function Er(){return(Er=(0,p.Z)(function*(g,c,f,w,L={}){const J=yield nn(g,c,f,w,L);return"mfaPendingCredential"in J&&U(g,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function Gn(g,c,f,w){const L=`${c}${f}?${w}`;return g.config.emulator?It(g.config,L):`${g.config.apiScheme}://${L}`}class wr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,w)=>{this.timer=setTimeout(()=>w(Y(this.auth,"network-request-failed")),ln.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ln(g,c,f){const w={appName:g.name};f.email&&(w.email=f.email),f.phoneNumber&&(w.phoneNumber=f.phoneNumber);const L=Y(g,c,w);return L.customData._tokenResponse=f,L}function Ht(){return(Ht=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function wn(g,c){return sn.apply(this,arguments)}function sn(){return(sn=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Pr(g,c){return pi.apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function nr(g){if(g)try{const c=new Date(Number(g));if(!isNaN(c.getTime()))return c.toUTCString()}catch(c){}}function Hr(){return(Hr=(0,p.Z)(function*(g,c=!1){const f=(0,Q.m9)(g),w=yield f.getIdToken(c),L=Ot(w);ke(L&&L.exp&&L.auth_time&&L.iat,f.auth,"internal-error");const J="object"==typeof L.firebase?L.firebase:void 0,Re=null==J?void 0:J.sign_in_provider;return{claims:L,token:w,authTime:nr(gn(L.auth_time)),issuedAtTime:nr(gn(L.iat)),expirationTime:nr(gn(L.exp)),signInProvider:Re||null,signInSecondFactor:(null==J?void 0:J.sign_in_second_factor)||null}})).apply(this,arguments)}function gn(g){return 1e3*Number(g)}function Ot(g){const[c,f,w]=g.split(".");if(void 0===c||void 0===f||void 0===w)return j("JWT malformed, contained fewer than 3 sections"),null;try{const L=(0,Q.tV)(f);return L?JSON.parse(L):(j("Failed to decode base64 JWT payload"),null)}catch(L){return j("Caught error parsing JWT payload as JSON",L),null}}function mr(g,c){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,p.Z)(function*(g,c,f=!1){if(f)return c;try{return yield c}catch(w){throw w instanceof Q.ZR&&fn(w)&&g.auth.currentUser===g&&(yield g.auth.signOut()),w}})).apply(this,arguments)}function fn({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class Dr{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const L=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,L)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const w=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),w)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&c.schedule(!0))}c.schedule()})()}}class pr{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=nr(this.lastLoginAt),this.creationTime=nr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xr(g){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,p.Z)(function*(g){var c;const f=g.auth,w=yield g.getIdToken(),L=yield mr(g,Pr(f,{idToken:w}));ke(null==L?void 0:L.users.length,f,"internal-error");const J=L.users[0];g._notifyReloadListener(J);const Re=(null===(c=J.providerUserInfo)||void 0===c?void 0:c.length)?ot(J.providerUserInfo):[],tt=Ct(g.providerData,Re),Dn=!!g.isAnonymous&&!(g.email&&J.passwordHash||(null==tt?void 0:tt.length)),Qt={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:tt,metadata:new pr(J.createdAt,J.lastLoginAt),isAnonymous:Dn};Object.assign(g,Qt)})).apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(g){const c=(0,Q.m9)(g);yield xr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Ct(g,c){return[...g.filter(w=>!c.some(L=>L.providerId===w.providerId)),...c]}function ot(g){return g.map(c=>{var{providerId:f}=c,w=(0,ye._T)(c,["providerId"]);return{providerId:f,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Nt(){return(Nt=(0,p.Z)(function*(g,c){const f=yield Mn(g,{},(0,p.Z)(function*(){const w=(0,Q.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:L,apiKey:J}=g.config,Re=Gn(g,L,"/v1/token",`key=${J}`),tt=yield g._getAdditionalHeaders();return tt["Content-Type"]="application/x-www-form-urlencoded",xt.fetch()(Re,{method:"POST",headers:tt,body:w})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class pn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ke(c.idToken,"internal-error"),ke(void 0!==c.idToken,"internal-error"),ke(void 0!==c.refreshToken,"internal-error");const f="expiresIn"in c&&void 0!==c.expiresIn?Number(c.expiresIn):function Zt(g){const c=Ot(g);return ke(c,"internal-error"),ke(void 0!==c.exp,"internal-error"),ke(void 0!==c.iat,"internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var w=this;return(0,p.Z)(function*(){return ke(!w.accessToken||w.refreshToken,c,"user-token-expired"),f||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(c,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var w=this;return(0,p.Z)(function*(){const{accessToken:L,refreshToken:J,expiresIn:Re}=yield function Pt(g,c){return Nt.apply(this,arguments)}(c,f);w.updateTokensAndExpiration(L,J,Number(Re))})()}updateTokensAndExpiration(c,f,w){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(c,f){const{refreshToken:w,accessToken:L,expirationTime:J}=f,Re=new pn;return w&&(ke("string"==typeof w,"internal-error",{appName:c}),Re.refreshToken=w),L&&(ke("string"==typeof L,"internal-error",{appName:c}),Re.accessToken=L),J&&(ke("number"==typeof J,"internal-error",{appName:c}),Re.expirationTime=J),Re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new pn,this.toJSON())}_performRefresh(){return we("not implemented")}}function Kt(g,c){ke("string"==typeof g||void 0===g,"internal-error",{appName:c})}class ge{constructor(c){var{uid:f,auth:w,stsTokenManager:L}=c,J=(0,ye._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=w,this.stsTokenManager=L,this.accessToken=L.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new pr(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const w=yield mr(f,f.stsTokenManager.getToken(f.auth,c));return ke(w,f.auth,"internal-error"),f.accessToken!==w&&(f.accessToken=w,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),w})()}getIdTokenResult(c){return function an(g){return Hr.apply(this,arguments)}(this,c)}reload(){return function kr(g){return Xt.apply(this,arguments)}(this)}_assign(c){this!==c&&(ke(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new ge(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var w=this;return(0,p.Z)(function*(){let L=!1;c.idToken&&c.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(c),L=!0),f&&(yield xr(w)),yield w.auth._persistUserIfCurrent(w),L&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield mr(c,function Ut(g,c){return Ht.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var w,L,J,Re,tt,Rt,on,Dn;const Qt=null!==(w=f.displayName)&&void 0!==w?w:void 0,Oi=null!==(L=f.email)&&void 0!==L?L:void 0,ho=null!==(J=f.phoneNumber)&&void 0!==J?J:void 0,Js=null!==(Re=f.photoURL)&&void 0!==Re?Re:void 0,kl=null!==(tt=f.tenantId)&&void 0!==tt?tt:void 0,Va=null!==(Rt=f._redirectEventId)&&void 0!==Rt?Rt:void 0,yc=null!==(on=f.createdAt)&&void 0!==on?on:void 0,Ff=null!==(Dn=f.lastLoginAt)&&void 0!==Dn?Dn:void 0,{uid:Ua,emailVerified:_c,isAnonymous:ad,providerData:ud,stsTokenManager:vc}=f;ke(Ua&&vc,c,"internal-error");const Lf=pn.fromJSON(this.name,vc);ke("string"==typeof Ua,c,"internal-error"),Kt(Qt,c.name),Kt(Oi,c.name),ke("boolean"==typeof _c,c,"internal-error"),ke("boolean"==typeof ad,c,"internal-error"),Kt(ho,c.name),Kt(Js,c.name),Kt(kl,c.name),Kt(Va,c.name),Kt(yc,c.name),Kt(Ff,c.name);const ld=new ge({uid:Ua,auth:c,email:Oi,emailVerified:_c,displayName:Qt,isAnonymous:ad,photoURL:Js,phoneNumber:ho,tenantId:kl,stsTokenManager:Lf,createdAt:yc,lastLoginAt:Ff});return ud&&Array.isArray(ud)&&(ld.providerData=ud.map(Vf=>Object.assign({},Vf))),Va&&(ld._redirectEventId=Va),ld}static _fromIdTokenResponse(c,f,w=!1){return(0,p.Z)(function*(){const L=new pn;L.updateFromServerResponse(f);const J=new ge({uid:f.localId,auth:c,stsTokenManager:L,isAnonymous:w});return yield xr(J),J})()}}const Ie=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,w){var L=this;return(0,p.Z)(function*(){L.storage[f]=w})()}_get(f){var w=this;return(0,p.Z)(function*(){const L=w.storage[f];return void 0===L?null:L})()}_remove(f){var w=this;return(0,p.Z)(function*(){delete w.storage[f]})()}_addListener(f,w){}_removeListener(f,w){}}return g.type="NONE",g})();function qe(g,c,f){return`firebase:${g}:${c}:${f}`}class Fe{constructor(c,f,w){this.persistence=c,this.auth=f,this.userKey=w;const{config:L,name:J}=this.auth;this.fullUserKey=qe(this.userKey,L.apiKey,J),this.fullPersistenceKey=qe("persistence",L.apiKey,J),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?ge._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const w=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,w?f.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,w="authUser"){return(0,p.Z)(function*(){if(!f.length)return new Fe(pe(Ie),c,w);const L=(yield Promise.all(f.map(function(){var on=(0,p.Z)(function*(Dn){if(yield Dn._isAvailable())return Dn});return function(Dn){return on.apply(this,arguments)}}()))).filter(on=>on);let J=L[0]||pe(Ie);const Re=qe(w,c.config.apiKey,c.name);let tt=null;for(const on of f)try{const Dn=yield on._get(Re);if(Dn){const Qt=ge._fromJSON(c,Dn);on!==J&&(tt=Qt),J=on;break}}catch(Dn){}const Rt=L.filter(on=>on._shouldAllowMigration);return J._shouldAllowMigration&&Rt.length?(J=Rt[0],tt&&(yield J._set(Re,tt.toJSON())),yield Promise.all(f.map(function(){var on=(0,p.Z)(function*(Dn){if(Dn!==J)try{yield Dn._remove(Re)}catch(Qt){}});return function(Dn){return on.apply(this,arguments)}}())),new Fe(J,c,w)):new Fe(J,c,w)})()}}function yt(g){const c=g.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(yn(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(pt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Jt(c))return"Blackberry";if(Nn(c))return"Webos";if(Cn(c))return"Safari";if((c.includes("chrome/")||Rr(c))&&!c.includes("edge/"))return"Chrome";if(Xn(c))return"Android";{const w=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function pt(g=(0,Q.z$)()){return/firefox\//i.test(g)}function Cn(g=(0,Q.z$)()){const c=g.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Rr(g=(0,Q.z$)()){return/crios\//i.test(g)}function yn(g=(0,Q.z$)()){return/iemobile/i.test(g)}function Xn(g=(0,Q.z$)()){return/android/i.test(g)}function Jt(g=(0,Q.z$)()){return/blackberry/i.test(g)}function Nn(g=(0,Q.z$)()){return/webos/i.test(g)}function yr(g=(0,Q.z$)()){return/iphone|ipad|ipod/i.test(g)}function qn(g=(0,Q.z$)()){return yr(g)||Xn(g)||Nn(g)||Jt(g)||/windows phone/i.test(g)||yn(g)}function Ii(g,c=[]){let f;switch(g){case"Browser":f=yt((0,Q.z$)());break;case"Worker":f=`${yt((0,Q.z$)())}-${g}`;break;default:f=g}const w=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${Ee.SDK_VERSION}/${w}`}class Or{constructor(c,f,w){this.app=c,this.heartbeatServiceProvider=f,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ft(this),this.idTokenSubscription=new Ft(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(c,f){var w=this;return f&&(this._popupRedirectResolver=pe(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var L,J;if(!w._deleted&&(w.persistenceManager=yield Fe.create(w,c),!w._deleted)){if(null===(L=w._popupRedirectResolver)||void 0===L?void 0:L._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(Re){}yield w.initializeCurrentUser(f),w.lastNotifiedUid=(null===(J=w.currentUser)||void 0===J?void 0:J.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var w;let L=yield f.assertedPersistence.getCurrentUser();if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const J=null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId,Re=null==L?void 0:L._redirectEventId,tt=yield f.tryRedirectSignIn(c);(!J||J===Re)&&(null==tt?void 0:tt.user)&&(L=tt.user)}return L?L._redirectEventId?(ke(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===L._redirectEventId?f.directlySetCurrentUser(L):f.reloadAndSetCurrentUserOrClear(L)):f.reloadAndSetCurrentUserOrClear(L):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let w=null;try{w=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch(L){yield f._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){try{yield xr(c)}catch(w){if("auth/network-request-failed"!==w.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Dt(){if("undefined"==typeof navigator)return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const w=c?(0,Q.m9)(c):null;return w&&ke(w.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(w&&w._clone(f))})()}_updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){if(!f._deleted)return c&&ke(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),f.queue((0,p.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(pe(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new Q.LL("auth","Firebase",c())}onAuthStateChanged(c,f,w){return this.registerStateListener(this.authStateSubscription,c,f,w)}onIdTokenChanged(c,f,w){return this.registerStateListener(this.idTokenSubscription,c,f,w)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var w=this;return(0,p.Z)(function*(){const L=yield w.getOrInitRedirectPersistenceManager(f);return null===c?L.removeCurrentUser():L.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const w=c&&pe(c)||f._popupRedirectResolver;ke(w,f,"argument-error"),f.redirectPersistenceManager=yield Fe.create(f,[pe(w._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var w,L;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(w=f._currentUser)||void 0===w?void 0:w._redirectEventId)===c?f._currentUser:(null===(L=f.redirectUser)||void 0===L?void 0:L._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,w,L){if(this._deleted)return()=>{};const J="function"==typeof f?f:f.next.bind(f),Re=this._isInitialized?Promise.resolve():this._initializationPromise;return ke(Re,this,"internal-error"),Re.then(()=>J(this.currentUser)),"function"==typeof f?c.addObserver(f,w,L):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&(f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh()),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Ii(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const w={"X-Client-Version":c.clientVersion};c.app.options.appId&&(w["X-Firebase-gmpid"]=c.app.options.appId);const L=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return L&&(w["X-Firebase-Client"]=L),w})()}}function ct(g){return(0,Q.m9)(g)}class Ft{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,Q.ne)(f=>this.observer=f)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Jn(g){const c=g.indexOf(":");return c<0?"":g.substr(0,c+1)}function er(g){if(!g)return null;const c=Number(g);return isNaN(c)?null:c}class Vn{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return we("not implemented")}_getIdTokenResponse(c){return we("not implemented")}_linkToIdToken(c,f){return we("not implemented")}_getReauthenticationResolver(c){return we("not implemented")}}function _r(g,c){return di.apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:resetPassword",kt(g,c))})).apply(this,arguments)}function mn(g,c){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function hi(g,c){return gi.apply(this,arguments)}function gi(){return(gi=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:update",kt(g,c))})).apply(this,arguments)}function sr(){return(sr=(0,p.Z)(function*(g,c){return tr(g,"POST","/v1/accounts:signInWithPassword",kt(g,c))})).apply(this,arguments)}function Fr(g,c){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:sendOobCode",kt(g,c))})).apply(this,arguments)}function xn(g,c){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,p.Z)(function*(g,c){return Fr(g,c)})).apply(this,arguments)}function Bi(g,c){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,p.Z)(function*(g,c){return Fr(g,c)})).apply(this,arguments)}function br(g,c){return zr.apply(this,arguments)}function zr(){return(zr=(0,p.Z)(function*(g,c){return Fr(g,c)})).apply(this,arguments)}function hs(g,c){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(g,c){return Fr(g,c)})).apply(this,arguments)}function Kr(){return(Kr=(0,p.Z)(function*(g,c){return tr(g,"POST","/v1/accounts:signInWithEmailLink",kt(g,c))})).apply(this,arguments)}function fe(){return(fe=(0,p.Z)(function*(g,c){return tr(g,"POST","/v1/accounts:signInWithEmailLink",kt(g,c))})).apply(this,arguments)}class ne extends Vn{constructor(c,f,w,L=null){super("password",w),this._email=c,this._password=f,this._tenantId=L}static _fromEmailAndPassword(c,f){return new ne(c,f,"password")}static _fromEmailAndCode(c,f,w=null){return new ne(c,f,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Cr(g,c){return sr.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function fs(g,c){return Kr.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:U(c,"internal-error")}})()}_linkToIdToken(c,f){var w=this;return(0,p.Z)(function*(){switch(w.signInMethod){case"password":return mn(c,{idToken:f,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function he(g,c){return fe.apply(this,arguments)}(c,{idToken:f,email:w._email,oobCode:w._password});default:U(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function xe(g,c){return st.apply(this,arguments)}function st(){return(st=(0,p.Z)(function*(g,c){return tr(g,"POST","/v1/accounts:signInWithIdp",kt(g,c))})).apply(this,arguments)}class de extends Vn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new de(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):U("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:w,signInMethod:L}=f,J=(0,ye._T)(f,["providerId","signInMethod"]);if(!w||!L)return null;const Re=new de(w,L);return Re.idToken=J.idToken||void 0,Re.accessToken=J.accessToken||void 0,Re.secret=J.secret,Re.nonce=J.nonce,Re.pendingToken=J.pendingToken||null,Re}_getIdTokenResponse(c){return xe(c,this.buildRequest())}_linkToIdToken(c,f){const w=this.buildRequest();return w.idToken=f,xe(c,w)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,xe(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,Q.xO)(f)}return c}}function _e(g,c){return Be.apply(this,arguments)}function Be(){return(Be=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:sendVerificationCode",kt(g,c))})).apply(this,arguments)}function _t(){return(_t=(0,p.Z)(function*(g,c){return tr(g,"POST","/v1/accounts:signInWithPhoneNumber",kt(g,c))})).apply(this,arguments)}function Un(){return(Un=(0,p.Z)(function*(g,c){const f=yield tr(g,"POST","/v1/accounts:signInWithPhoneNumber",kt(g,c));if(f.temporaryProof)throw Ln(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Gr={USER_NOT_FOUND:"user-not-found"};function mi(){return(mi=(0,p.Z)(function*(g,c){return tr(g,"POST","/v1/accounts:signInWithPhoneNumber",kt(g,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Gr)})).apply(this,arguments)}class Di extends Vn{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new Di({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new Di({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function nt(g,c){return _t.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function Bt(g,c){return Un.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Bn(g,c){return mi.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:w,verificationCode:L}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:w,code:L}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:w,phoneNumber:L,temporaryProof:J}=c;return w||f||L||J?new Di({verificationId:f,verificationCode:w,phoneNumber:L,temporaryProof:J}):null}}class Ni{constructor(c){var f,w,L,J,Re,tt;const Rt=(0,Q.zd)((0,Q.pd)(c)),on=null!==(f=Rt.apiKey)&&void 0!==f?f:null,Dn=null!==(w=Rt.oobCode)&&void 0!==w?w:null,Qt=function Ci(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(L=Rt.mode)&&void 0!==L?L:null);ke(on&&Dn&&Qt,"argument-error"),this.apiKey=on,this.operation=Qt,this.code=Dn,this.continueUrl=null!==(J=Rt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(Re=Rt.languageCode)&&void 0!==Re?Re:null,this.tenantId=null!==(tt=Rt.tenantId)&&void 0!==tt?tt:null}static parseLink(c){const f=function os(g){const c=(0,Q.zd)((0,Q.pd)(g)).link,f=c?(0,Q.zd)((0,Q.pd)(c)).deep_link_id:null,w=(0,Q.zd)((0,Q.pd)(g)).deep_link_id;return(w?(0,Q.zd)((0,Q.pd)(w)).link:null)||w||f||c||g}(c);try{return new Ni(f)}catch(w){return null}}}let as=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,w){return ne._fromEmailAndPassword(f,w)}static credentialWithLink(f,w){const L=Ni.parseLink(w);return ke(L,"argument-error"),ne._fromEmailAndCode(f,L.code,L.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class bi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Jr extends bi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class us extends Jr{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return ke("providerId"in f&&"signInMethod"in f,"argument-error"),de._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ke(c.idToken||c.accessToken,"argument-error"),de._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return us.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return us.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:w,oauthTokenSecret:L,pendingToken:J,nonce:Re,providerId:tt}=c;if(!w&&!L&&!f&&!J||!tt)return null;try{return new us(tt)._credential({idToken:f,accessToken:w,nonce:Re,pendingToken:J})}catch(Rt){return null}}}let Fi=(()=>{class g extends Jr{constructor(){super("facebook.com")}static credential(f){return de._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(w){return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),ei=(()=>{class g extends Jr{constructor(){super("google.com"),this.addScope("profile")}static credential(f,w){return de._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:w})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:w,oauthAccessToken:L}=f;if(!w&&!L)return null;try{return g.credential(w,L)}catch(J){return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Fs=(()=>{class g extends Jr{constructor(){super("github.com")}static credential(f){return de._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(w){return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class xs extends Vn{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return xe(c,this.buildRequest())}_linkToIdToken(c,f){const w=this.buildRequest();return w.idToken=f,xe(c,w)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,xe(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:w,signInMethod:L,pendingToken:J}=f;return w&&L&&J&&w===L?new xs(w,J):null}static _create(c,f){return new xs(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ti extends bi{constructor(c){ke(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Ti.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Ti.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=xs.fromJSON(c);return ke(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:w}=c;if(!f||!w)return null;try{return xs._create(w,f)}catch(L){return null}}}let ps=(()=>{class g extends Jr{constructor(){super("twitter.com")}static credential(f,w){return de._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:w})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:w,oauthTokenSecret:L}=f;if(!w||!L)return null;try{return g.credential(w,L)}catch(J){return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Qi(g,c){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,p.Z)(function*(g,c){return tr(g,"POST","/v1/accounts:signUp",kt(g,c))})).apply(this,arguments)}class qr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,w,L=!1){return(0,p.Z)(function*(){const J=yield ge._fromIdTokenResponse(c,w,L),Re=Ai(w);return new qr({user:J,providerId:Re,_tokenResponse:w,operationType:f})})()}static _forOperation(c,f,w){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(w,!0);const L=Ai(w);return new qr({user:c,providerId:L,_tokenResponse:w,operationType:f})})()}}function Ai(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Gs(){return(Gs=(0,p.Z)(function*(g){var c;const f=ct(g);if(yield f._initializationPromise,null===(c=f.currentUser)||void 0===c?void 0:c.isAnonymous)return new qr({user:f.currentUser,providerId:null,operationType:"signIn"});const w=yield Qi(f,{returnSecureToken:!0}),L=yield qr._fromIdTokenResponse(f,"signIn",w,!0);return yield f._updateCurrentUser(L.user),L})).apply(this,arguments)}class bs extends Q.ZR{constructor(c,f,w,L){var J;super(f.code,f.message),this.operationType=w,this.user=L,Object.setPrototypeOf(this,bs.prototype),this.customData={appName:c.name,tenantId:null!==(J=c.tenantId)&&void 0!==J?J:void 0,_serverResponse:f.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(c,f,w,L){return new bs(c,f,w,L)}}function Xi(g,c,f,w){return("reauthenticate"===c?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?bs._fromErrorAndOperation(g,J,c,w):J})}function ti(g){return new Set(g.map(({providerId:c})=>c).filter(c=>!!c))}function Rs(){return(Rs=(0,p.Z)(function*(g,c){const f=(0,Q.m9)(g);yield H(!0,f,c);const{providerUserInfo:w}=yield wn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),L=ti(w||[]);return f.providerData=f.providerData.filter(J=>L.has(J.providerId)),L.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Rn(g,c){return O.apply(this,arguments)}function O(){return(O=(0,p.Z)(function*(g,c,f=!1){const w=yield mr(g,c._linkToIdToken(g.auth,yield g.getIdToken()),f);return qr._forOperation(g,"link",w)})).apply(this,arguments)}function H(g,c,f){return x.apply(this,arguments)}function x(){return(x=(0,p.Z)(function*(g,c,f){yield xr(c);const L=!1===g?"provider-already-linked":"no-such-provider";ke(ti(c.providerData).has(f)===g,c.auth,L)})).apply(this,arguments)}function Z(g,c){return me.apply(this,arguments)}function me(){return(me=(0,p.Z)(function*(g,c,f=!1){const{auth:w}=g,L="reauthenticate";try{const J=yield mr(g,Xi(w,L,c,g),f);ke(J.idToken,w,"internal-error");const Re=Ot(J.idToken);ke(Re,w,"internal-error");const{sub:tt}=Re;return ke(g.uid===tt,w,"user-mismatch"),qr._forOperation(g,L,J)}catch(J){throw"auth/user-not-found"===(null==J?void 0:J.code)&&U(w,"user-mismatch"),J}})).apply(this,arguments)}function Je(g,c){return et.apply(this,arguments)}function et(){return(et=(0,p.Z)(function*(g,c,f=!1){const w="signIn",L=yield Xi(g,w,c),J=yield qr._fromIdTokenResponse(g,w,L);return f||(yield g._updateCurrentUser(J.user)),J})).apply(this,arguments)}function bt(g,c){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,p.Z)(function*(g,c){return Je(ct(g),c)})).apply(this,arguments)}function jn(g,c){return vn.apply(this,arguments)}function vn(){return(vn=(0,p.Z)(function*(g,c){const f=(0,Q.m9)(g);return yield H(!1,f,c.providerId),Rn(f,c)})).apply(this,arguments)}function En(g,c){return vr.apply(this,arguments)}function vr(){return(vr=(0,p.Z)(function*(g,c){return Z((0,Q.m9)(g),c)})).apply(this,arguments)}function Qn(g,c){return cr.apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(g,c){return tr(g,"POST","/v1/accounts:signInWithCustomToken",kt(g,c))})).apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*(g,c){const f=ct(g),w=yield Qn(f,{token:c,returnSecureToken:!0}),L=yield qr._fromIdTokenResponse(f,"signIn",w);return yield f._updateCurrentUser(L.user),L})).apply(this,arguments)}class un{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?ji._fromServerResponse(c,f):U(c,"internal-error")}}class ji extends un{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new ji(f)}}function $i(g,c,f){var w;ke((null===(w=f.url)||void 0===w?void 0:w.length)>0,g,"invalid-continue-uri"),ke(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ke(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(ke(f.android.packageName.length>0,g,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Os(){return(Os=(0,p.Z)(function*(g,c,f){const w=(0,Q.m9)(g),L={requestType:"PASSWORD_RESET",email:c};f&&$i(w,L,f),yield Bi(w,L)})).apply(this,arguments)}function M(){return(M=(0,p.Z)(function*(g,c,f){yield _r((0,Q.m9)(g),{oobCode:c,newPassword:f})})).apply(this,arguments)}function m(){return(m=(0,p.Z)(function*(g,c){yield hi((0,Q.m9)(g),{oobCode:c})})).apply(this,arguments)}function C(g,c){return K.apply(this,arguments)}function K(){return(K=(0,p.Z)(function*(g,c){const f=(0,Q.m9)(g),w=yield _r(f,{oobCode:c}),L=w.requestType;switch(ke(L,f,"internal-error"),L){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ke(w.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ke(w.mfaInfo,f,"internal-error");default:ke(w.email,f,"internal-error")}let J=null;return w.mfaInfo&&(J=un._fromServerResponse(ct(f),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:J},operation:L}})).apply(this,arguments)}function De(){return(De=(0,p.Z)(function*(g,c){const{data:f}=yield C((0,Q.m9)(g),c);return f.email})).apply(this,arguments)}function it(){return(it=(0,p.Z)(function*(g,c,f){const w=ct(g),L=yield Qi(w,{returnSecureToken:!0,email:c,password:f}),J=yield qr._fromIdTokenResponse(w,"signIn",L);return yield w._updateCurrentUser(J.user),J})).apply(this,arguments)}function _n(){return(_n=(0,p.Z)(function*(g,c,f){const w=(0,Q.m9)(g),L={requestType:"EMAIL_SIGNIN",email:c};ke(f.handleCodeInApp,w,"argument-error"),f&&$i(w,L,f),yield br(w,L)})).apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(g,c,f){const w=(0,Q.m9)(g),L=as.credentialWithLink(c,f||Vt());return ke(L._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),bt(w,L)})).apply(this,arguments)}function zn(g,c){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:createAuthUri",kt(g,c))})).apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(g,c){const w={identifier:c,continueUri:wt()?Vt():"http://localhost"},{signinMethods:L}=yield zn((0,Q.m9)(g),w);return L||[]})).apply(this,arguments)}function Hi(){return(Hi=(0,p.Z)(function*(g,c){const f=(0,Q.m9)(g),L={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};c&&$i(f.auth,L,c);const{email:J}=yield xn(f.auth,L);J!==g.email&&(yield g.reload())})).apply(this,arguments)}function si(){return(si=(0,p.Z)(function*(g,c,f){const w=(0,Q.m9)(g),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:c};f&&$i(w.auth,J,f);const{email:Re}=yield hs(w.auth,J);Re!==g.email&&(yield g.reload())})).apply(this,arguments)}function Tr(g,c){return ms.apply(this,arguments)}function ms(){return(ms=(0,p.Z)(function*(g,c){return nn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ls(){return(Ls=(0,p.Z)(function*(g,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const w=(0,Q.m9)(g),J={idToken:yield w.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Re=yield mr(w,Tr(w.auth,J));w.displayName=Re.displayName||null,w.photoURL=Re.photoUrl||null;const tt=w.providerData.find(({providerId:Rt})=>"password"===Rt);tt&&(tt.displayName=w.displayName,tt.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Re)})).apply(this,arguments)}function Go(g,c,f){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(g,c,f){const{auth:w}=g,J={idToken:yield g.getIdToken(),returnSecureToken:!0};c&&(J.email=c),f&&(J.password=f);const Re=yield mr(g,mn(w,J));yield g._updateTokensIfNecessary(Re,!0)})).apply(this,arguments)}class Ws{constructor(c,f,w={}){this.isNewUser=c,this.providerId=f,this.profile=w}}class ba extends Ws{constructor(c,f,w,L){super(c,f,w),this.username=L}}class ks extends Ws{constructor(c,f){super(c,"facebook.com",f)}}class xo extends ba{constructor(c,f){super(c,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class qa extends Ws{constructor(c,f){super(c,"google.com",f)}}class sa extends ba{constructor(c,f,w){super(c,"twitter.com",f,w)}}function Si(g){const{user:c,_tokenResponse:f}=g;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Ka(g){var c,f;if(!g)return null;const{providerId:w}=g,L=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},J=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!w&&(null==g?void 0:g.idToken)){const Re=null===(f=null===(c=Ot(g.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Re)return new Ws(J,"anonymous"!==Re&&"custom"!==Re?Re:null)}if(!w)return null;switch(w){case"facebook.com":return new ks(J,L);case"github.com":return new xo(J,L);case"google.com":return new qa(J,L);case"twitter.com":return new sa(J,L,g.screenName||null);case"custom":case"anonymous":return new Ws(J,null);default:return new Ws(J,w,L)}}(f)}class ys{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new ys("enroll",c)}static _fromMfaPendingCredential(c){return new ys("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,w;if(null==c?void 0:c.multiFactorSession){if(null===(f=c.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return ys._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null===(w=c.multiFactorSession)||void 0===w?void 0:w.idToken)return ys._fromIdtoken(c.multiFactorSession.idToken)}return null}}class ko{constructor(c,f,w){this.session=c,this.hints=f,this.signInResolver=w}static _fromError(c,f){const w=ct(c),L=f.customData._serverResponse,J=(L.mfaInfo||[]).map(tt=>un._fromServerResponse(w,tt));ke(L.mfaPendingCredential,w,"internal-error");const Re=ys._fromMfaPendingCredential(L.mfaPendingCredential);return new ko(Re,J,function(){var tt=(0,p.Z)(function*(Rt){const on=yield Rt._process(w,Re);delete L.mfaInfo,delete L.mfaPendingCredential;const Dn=Object.assign(Object.assign({},L),{idToken:on.idToken,refreshToken:on.refreshToken});switch(f.operationType){case"signIn":const Qt=yield qr._fromIdTokenResponse(w,f.operationType,Dn);return yield w._updateCurrentUser(Qt.user),Qt;case"reauthenticate":return ke(f.user,w,"internal-error"),qr._forOperation(f.user,f.operationType,Dn);default:U(w,"internal-error")}});return function(Rt){return tt.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function fi(g,c){return nn(g,"POST","/v2/accounts/mfaEnrollment:start",kt(g,c))}class es{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(w=>un._fromServerResponse(c.auth,w)))})}static _fromUser(c){return new es(c)}getSession(){var c=this;return(0,p.Z)(function*(){return ys._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var w=this;return(0,p.Z)(function*(){const L=c,J=yield w.getSession(),Re=yield mr(w.user,L._process(w.user.auth,J,f));return yield w.user._updateTokensIfNecessary(Re),w.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){const w="string"==typeof c?c:c.uid,L=yield f.user.getIdToken(),J=yield mr(f.user,function Ta(g,c){return nn(g,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(g,c))}(f.user.auth,{idToken:L,mfaEnrollmentId:w}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Re})=>Re!==w),yield f.user._updateTokensIfNecessary(J);try{yield f.user.reload()}catch(Re){if("auth/user-token-expired"!==Re.code)throw Re}})()}}const As=new WeakMap,zs="__sak";class Ks{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(zs,"1"),this.storage.removeItem(zs),Promise.resolve(!0)):Promise.resolve(!1)}catch(c){return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const jr=(()=>{class g extends Ks{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,w)=>this.onStorageEvent(f,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Aa(){const g=(0,Q.z$)();return Cn(g)||yr(g)}()&&function ir(){try{return!(!window||window===window.top)}catch(g){return!1}}(),this.fallbackToPolling=qn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const w of Object.keys(this.listeners)){const L=this.storage.getItem(w),J=this.localCache[w];L!==J&&f(w,J,L)}}onStorageEvent(f,w=!1){if(!f.key)return void this.forAllChangedKeys((tt,Rt,on)=>{this.notifyListeners(tt,on)});const L=f.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const tt=this.storage.getItem(L);if(f.newValue!==tt)null!==f.newValue?this.storage.setItem(L,f.newValue):this.storage.removeItem(L);else if(this.localCache[L]===f.newValue&&!w)return}const J=()=>{const tt=this.storage.getItem(L);!w&&this.localCache[L]===tt||this.notifyListeners(L,tt)},Re=this.storage.getItem(L);!function rr(){return(0,Q.w1)()&&10===document.documentMode}()||Re===f.newValue||f.newValue===f.oldValue?J():setTimeout(J,10)}notifyListeners(f,w){this.localCache[f]=w;const L=this.listeners[f];if(L)for(const J of Array.from(L))J(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,w,L)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:w,newValue:L}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(w)}_removeListener(f,w){this.listeners[f]&&(this.listeners[f].delete(w),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,w){var L=()=>super._set,J=this;return(0,p.Z)(function*(){yield L().call(J,f,w),J.localCache[f]=JSON.stringify(w)})()}_get(f){var w=()=>super._get,L=this;return(0,p.Z)(function*(){const J=yield w().call(L,f);return L.localCache[f]=JSON.stringify(J),J})()}_remove(f){var w=()=>super._remove,L=this;return(0,p.Z)(function*(){yield w().call(L,f),delete L.localCache[f]})()}}return g.type="LOCAL",g})(),Vs=(()=>{class g extends Ks{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,w){}_removeListener(f,w){}}return g.type="SESSION",g})();let ua=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const w=this.receivers.find(J=>J.isListeningto(f));if(w)return w;const L=new g(f);return this.receivers.push(L),L}isListeningto(f){return this.eventTarget===f}handleEvent(f){var w=this;return(0,p.Z)(function*(){const L=f,{eventId:J,eventType:Re,data:tt}=L.data,Rt=w.handlersMap[Re];if(!(null==Rt?void 0:Rt.size))return;L.ports[0].postMessage({status:"ack",eventId:J,eventType:Re});const on=Array.from(Rt).map(function(){var Qt=(0,p.Z)(function*(Oi){return Oi(L.origin,tt)});return function(Oi){return Qt.apply(this,arguments)}}()),Dn=yield function mo(g){return Promise.all(g.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(w){return{fulfilled:!1,reason:w}}});return function(f){return c.apply(this,arguments)}}()))}(on);L.ports[0].postMessage({status:"done",eventId:J,eventType:Re,response:Dn})})()}_subscribe(f,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(w)}_unsubscribe(f,w){this.handlersMap[f]&&w&&this.handlersMap[f].delete(w),(!w||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Ko(g="",c=10){let f="";for(let w=0;w<c;w++)f+=Math.floor(10*Math.random());return g+f}class Ma{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,w=50){var L=this;return(0,p.Z)(function*(){const J="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let Re,tt;return new Promise((Rt,on)=>{const Dn=Ko("",20);J.port1.start();const Qt=setTimeout(()=>{on(new Error("unsupported_event"))},w);tt={messageChannel:J,onMessage(Oi){const ho=Oi;if(ho.data.eventId===Dn)switch(ho.data.status){case"ack":clearTimeout(Qt),Re=setTimeout(()=>{on(new Error("timeout"))},3e3);break;case"done":clearTimeout(Re),Rt(ho.data.response);break;default:clearTimeout(Qt),clearTimeout(Re),on(new Error("invalid_response"))}}},L.handlers.add(tt),J.port1.addEventListener("message",tt.onMessage),L.target.postMessage({eventType:c,eventId:Dn,data:f},[J.port2])}).finally(()=>{tt&&L.removeMessageHandler(tt)})})()}}function $r(){return window}function Ps(){return void 0!==$r().WorkerGlobalScope&&"function"==typeof $r().importScripts}function Us(){return(Us=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(g){return null}})).apply(this,arguments)}const xi="firebaseLocalStorageDb",_s="firebaseLocalStorage",yo="fbase_key";class _o{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function I(g,c){return g.transaction([_s],c?"readwrite":"readonly").objectStore(_s)}function v(){const g=indexedDB.open(xi,1);return new Promise((c,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const w=g.result;try{w.createObjectStore(_s,{keyPath:yo})}catch(L){f(L)}}),g.addEventListener("success",(0,p.Z)(function*(){const w=g.result;w.objectStoreNames.contains(_s)?c(w):(w.close(),yield function E(){const g=indexedDB.deleteDatabase(xi);return new _o(g).toPromise()}(),c(yield v()))}))})}function R(g,c,f){return k.apply(this,arguments)}function k(){return(k=(0,p.Z)(function*(g,c,f){const w=I(g,!0).put({[yo]:c,value:f});return new _o(w).toPromise()})).apply(this,arguments)}function oe(){return(oe=(0,p.Z)(function*(g,c){const f=I(g,!1).get(c),w=yield new _o(f).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function te(g,c){const f=I(g,!0).delete(c);return new _o(f).toPromise()}const zt=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield v()),f.db})()}_withRetries(f){var w=this;return(0,p.Z)(function*(){let L=0;for(;;)try{const J=yield w._openDb();return yield f(J)}catch(J){if(L++>3)throw J;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return Ps()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=ua._getInstance(function la(){return Ps()?self:null}()),f.receiver._subscribe("keyChanged",function(){var w=(0,p.Z)(function*(L,J){return{keyProcessed:(yield f._poll()).includes(J.key)}});return function(L,J){return w.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var w=(0,p.Z)(function*(L,J){return["keyChanged"]});return function(L,J){return w.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var w,L;if(f.activeServiceWorker=yield function xa(){return Us.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Ma(f.activeServiceWorker);const J=yield f.sender._send("ping",{},800);!J||(null===(w=J[0])||void 0===w?void 0:w.fulfilled)&&(null===(L=J[0])||void 0===L?void 0:L.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var w=this;return(0,p.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function nc(){var g;return(null===(g=null==navigator?void 0:navigator.serviceWorker)||void 0===g?void 0:g.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:f},w.serviceWorkerReceiverAvailable?800:50)}catch(L){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield v();return yield R(f,zs,"1"),yield te(f,zs),!0}catch(f){}return!1})()}_withPendingWrite(f){var w=this;return(0,p.Z)(function*(){w.pendingWrites++;try{yield f()}finally{w.pendingWrites--}})()}_set(f,w){var L=this;return(0,p.Z)(function*(){return L._withPendingWrite((0,p.Z)(function*(){return yield L._withRetries(J=>R(J,f,w)),L.localCache[f]=w,L.notifyServiceWorker(f)}))})()}_get(f){var w=this;return(0,p.Z)(function*(){const L=yield w._withRetries(J=>function $(g,c){return oe.apply(this,arguments)}(J,f));return w.localCache[f]=L,L})()}_remove(f){var w=this;return(0,p.Z)(function*(){return w._withPendingWrite((0,p.Z)(function*(){return yield w._withRetries(L=>te(L,f)),delete w.localCache[f],w.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const w=yield f._withRetries(Re=>{const tt=I(Re,!1).getAll();return new _o(tt).toPromise()});if(!w)return[];if(0!==f.pendingWrites)return[];const L=[],J=new Set;for(const{fbase_key:Re,value:tt}of w)J.add(Re),JSON.stringify(f.localCache[Re])!==JSON.stringify(tt)&&(f.notifyListeners(Re,tt),L.push(Re));for(const Re of Object.keys(f.localCache))f.localCache[Re]&&!J.has(Re)&&(f.notifyListeners(Re,null),L.push(Re));return L})()}notifyListeners(f,w){this.localCache[f]=w;const L=this.listeners[f];if(L)for(const J of Array.from(L))J(w)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(w)}_removeListener(f,w){this.listeners[f]&&(this.listeners[f].delete(w),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function Ar(g,c){return nn(g,"POST","/v2/accounts/mfaSignIn:start",kt(g,c))}function ts(){return(ts=(0,p.Z)(function*(g){return(yield nn(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vo(g){return new Promise((c,f)=>{const w=document.createElement("script");w.setAttribute("src",g),w.onload=c,w.onerror=L=>{const J=Y("internal-error");J.customData=L,f(J)},w.type="text/javascript",w.charset="UTF-8",function Ra(){var g,c;return null!==(c=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==c?c:document}().appendChild(w)})}function Eo(g){return`__${g}${Math.floor(1e6*Math.random())}`}const so=1e12;class rc{constructor(c){this.auth=c,this.counter=so,this._widgets=new Map}render(c,f){const w=this.counter;return this._widgets.set(w,new On(c,this.auth.name,f||{})),this.counter++,w}reset(c){var f;const w=c||so;null===(f=this._widgets.get(w))||void 0===f||f.delete(),this._widgets.delete(w)}getResponse(c){var f;return(null===(f=this._widgets.get(c||so))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var w;return null===(w=f._widgets.get(c||so))||void 0===w||w.execute(),""})()}}class On{constructor(c,f,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const L="string"==typeof c?document.getElementById(c):c;ke(L,"argument-error",{appName:f}),this.container=L,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oo(g){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<g;w++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qa=Eo("rcb"),Li=new $t(3e4,6e4);class Zc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!$r().grecaptcha}load(c,f=""){return ke(function Xa(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve($r().grecaptcha):new Promise((w,L)=>{const J=$r().setTimeout(()=>{L(Y(c,"network-request-failed"))},Li.get());$r()[Qa]=()=>{$r().clearTimeout(J),delete $r()[Qa];const tt=$r().grecaptcha;if(!tt)return void L(Y(c,"internal-error"));const Rt=tt.render;tt.render=(on,Dn)=>{const Qt=Rt(on,Dn);return this.counter++,Qt},this.hostLanguage=f,w(tt)},vo(`https://www.google.com/recaptcha/api.js??${(0,Q.xO)({onload:Qa,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(J),L(Y(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){return!!$r().grecaptcha&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yc{load(c){return(0,p.Z)(function*(){return new rc(c)})()}clearedOneInstance(){}}const Oa="recaptcha",fr={theme:"light",type:"image"};class Wd{constructor(c,f=Object.assign({},fr),w){this.parameters=f,this.type=Oa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ct(w),this.isInvisible="invisible"===this.parameters.size,ke("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const L="string"==typeof c?document.getElementById(c):c;ke(L,this.auth,"argument-error"),this.container=L,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yc:new Zc,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),w=c.getAssertedRecaptcha();return w.getResponse(f)||new Promise(J=>{const Re=tt=>{!tt||(c.tokenChangeListeners.delete(Re),J(tt))};c.tokenChangeListeners.add(Re),c.isInvisible&&w.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ke(!this.parameters.sitekey,this.auth,"argument-error"),ke(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ke("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(w=>w(f)),"function"==typeof c)c(f);else if("string"==typeof c){const w=$r()[c];"function"==typeof w&&w(f)}}}assertNotDestroyed(){ke(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const w=document.createElement("div");f.appendChild(w),f=w}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){ke(wt()&&!Ps(),c.auth,"internal-error"),yield function cs(){let g=null;return new Promise(c=>{"complete"!==document.readyState?(g=()=>c(),window.addEventListener("load",g)):c()}).catch(c=>{throw g&&window.removeEventListener("load",g),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Bs(g){return ts.apply(this,arguments)}(c.auth);ke(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return ke(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zs{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=Di._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Kn(){return(Kn=(0,p.Z)(function*(g,c,f){const w=ct(g),L=yield rs(w,c,(0,Q.m9)(f));return new Zs(L,J=>bt(w,J))})).apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(g,c,f){const w=(0,Q.m9)(g);yield H(!1,w,"phone");const L=yield rs(w.auth,c,(0,Q.m9)(f));return new Zs(L,J=>jn(w,J))})).apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(g,c,f){const w=(0,Q.m9)(g),L=yield rs(w.auth,c,(0,Q.m9)(f));return new Zs(L,J=>En(w,J))})).apply(this,arguments)}function rs(g,c,f){return $s.apply(this,arguments)}function $s(){return($s=(0,p.Z)(function*(g,c,f){var w;const L=yield f.verify();try{let J;if(ke("string"==typeof L,g,"argument-error"),ke(f.type===Oa,g,"argument-error"),J="string"==typeof c?{phoneNumber:c}:c,"session"in J){const Re=J.session;if("phoneNumber"in J)return ke("enroll"===Re.type,g,"internal-error"),(yield fi(g,{idToken:Re.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:L}})).phoneSessionInfo.sessionInfo;{ke("signin"===Re.type,g,"internal-error");const tt=(null===(w=J.multiFactorHint)||void 0===w?void 0:w.uid)||J.multiFactorUid;return ke(tt,g,"missing-multi-factor-info"),(yield Ar(g,{mfaPendingCredential:Re.credential,mfaEnrollmentId:tt,phoneSignInInfo:{recaptchaToken:L}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Re}=yield _e(g,{phoneNumber:J.phoneNumber,recaptchaToken:L});return Re}}finally{f._reset()}})).apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(g,c){yield Rn((0,Q.m9)(g),c)})).apply(this,arguments)}let Gi=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=ct(f)}verifyPhoneNumber(f,w){return rs(this.auth,f,(0,Q.m9)(w))}static credential(f,w){return Di._fromVerification(f,w)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:w,temporaryProof:L}=f;return w&&L?Di._fromTokenResponse(w,L):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function vs(g,c){return c?pe(c):(ke(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Fo extends Vn{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return xe(c,this._buildIdpRequest())}_linkToIdToken(c,f){return xe(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return xe(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function Iu(g){return Je(g.auth,new Fo(g),g.bypassAuthState)}function Mt(g){const{auth:c,user:f}=g;return ke(f,c,"internal-error"),Z(f,new Fo(g),g.bypassAuthState)}function ll(g){return Du.apply(this,arguments)}function Du(){return(Du=(0,p.Z)(function*(g){const{auth:c,user:f}=g;return ke(f,c,"internal-error"),Rn(f,new Fo(g),g.bypassAuthState)})).apply(this,arguments)}class Wi{constructor(c,f,w,L,J=!1){this.auth=c,this.resolver=w,this.user=L,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(w,L){c.pendingPromise={resolve:w,reject:L};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(J){c.reject(J)}});return function(w,L){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:w,sessionId:L,postBody:J,tenantId:Re,error:tt,type:Rt}=c;if(tt)return void f.reject(tt);const on={auth:f.auth,requestUri:w,sessionId:L,tenantId:Re||void 0,postBody:J||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Rt)(on))}catch(Dn){f.reject(Dn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Iu;case"linkViaPopup":case"linkViaRedirect":return ll;case"reauthViaPopup":case"reauthViaRedirect":return Mt;default:U(this.auth,"internal-error")}}resolve(c){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ao=new $t(2e3,1e4);function Lo(){return(Lo=(0,p.Z)(function*(g,c,f){const w=ct(g);Ve(g,c,bi);const L=vs(w,f);return new uo(w,"signInViaPopup",c,L).executeNotNull()})).apply(this,arguments)}function Vo(){return(Vo=(0,p.Z)(function*(g,c,f){const w=(0,Q.m9)(g);Ve(w.auth,c,bi);const L=vs(w.auth,f);return new uo(w.auth,"reauthViaPopup",c,L,w).executeNotNull()})).apply(this,arguments)}function Uo(){return(Uo=(0,p.Z)(function*(g,c,f){const w=(0,Q.m9)(g);Ve(w.auth,c,bi);const L=vs(w.auth,f);return new uo(w.auth,"linkViaPopup",c,L,w).executeNotNull()})).apply(this,arguments)}let uo=(()=>{class g extends Wi{constructor(f,w,L,J,Re){super(f,w,J,Re),this.provider=L,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const w=yield f.execute();return ke(w,f.auth,"internal-error"),w})()}onExecution(){var f=this;return(0,p.Z)(function*(){X(1===f.filter.length,"Popup operations only handle one event");const w=Ko();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],w),f.authWindow.associatedEvent=w,f.resolver._originValidation(f.auth).catch(L=>{f.reject(L)}),f.resolver._isIframeWebStorageSupported(f.auth,L=>{L||f.reject(Y(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var w,L;this.pollId=(null===(L=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===L?void 0:L.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Y(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,ao.get())};f()}}return g.currentPopupAction=null,g})();const Ys=new Map;class Cu extends Wi{constructor(c,f,w=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,w),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let w=Ys.get(f.auth._key());if(!w){try{const J=(yield function Pa(g,c){return ca.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;w=()=>Promise.resolve(J)}catch(L){w=()=>Promise.reject(L)}Ys.set(f.auth._key(),w)}return f.bypassAuthState||Ys.set(f.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,w=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(w,c);if("unknown"!==c.type){if(c.eventId){const L=yield w.auth._redirectUserForId(c.eventId);if(L)return w.user=L,f().call(w,c);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ca(){return(ca=(0,p.Z)(function*(g,c){const f=P(c),w=A(g);if(!(yield w._isAvailable()))return!1;const L="true"===(yield w._get(f));return yield w._remove(f),L})).apply(this,arguments)}function Qo(g,c){return eu.apply(this,arguments)}function eu(){return(eu=(0,p.Z)(function*(g,c){return A(g)._set(P(c),"true")})).apply(this,arguments)}function A(g){return pe(g._redirectPersistence)}function P(g){return qe("pendingRedirect",g.config.apiKey,g.name)}function Me(){return(Me=(0,p.Z)(function*(g,c,f){const w=ct(g);Ve(g,c,bi);const L=vs(w,f);return yield Qo(L,w),L._openRedirect(w,c,"signInViaRedirect")})).apply(this,arguments)}function Gt(){return(Gt=(0,p.Z)(function*(g,c,f){const w=(0,Q.m9)(g);Ve(w.auth,c,bi);const L=vs(w.auth,f);yield Qo(L,w.auth);const J=yield tu(w);return L._openRedirect(w.auth,c,"reauthViaRedirect",J)})).apply(this,arguments)}function ar(){return(ar=(0,p.Z)(function*(g,c,f){const w=(0,Q.m9)(g);Ve(w.auth,c,bi);const L=vs(w.auth,f);yield H(!1,w,c.providerId),yield Qo(L,w.auth);const J=yield tu(w);return L._openRedirect(w.auth,c,"linkViaRedirect",J)})).apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(g,c){return yield ct(g)._initializationPromise,Vi(g,c,!1)})).apply(this,arguments)}function Vi(g,c){return Na.apply(this,arguments)}function Na(){return(Na=(0,p.Z)(function*(g,c,f=!1){const w=ct(g),L=vs(w,c),Re=yield new Cu(w,L,f).execute();return Re&&!f&&(delete Re.user._redirectEventId,yield w._persistUserIfCurrent(Re.user),yield w._setRedirectUser(null,c)),Re})).apply(this,arguments)}function tu(g){return Es.apply(this,arguments)}function Es(){return(Es=(0,p.Z)(function*(g){const c=Ko(`${g.uid}:::`);return g._redirectEventId=c,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),c})).apply(this,arguments)}class Qs{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(c,w)&&(f=!0,this.sendToConsumer(c,w),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Qc(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hl(g);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var w;if(c.error&&!hl(c)){const L=(null===(w=c.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";f.onError(Y(this.auth,L))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const w=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&w}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Io(c))}saveEventToCache(c){this.cachedEventUids.add(Io(c)),this.lastProcessedEventTime=Date.now()}}function Io(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(c=>c).join("-")}function hl({type:g,error:c}){return"unknown"===g&&"auth/no-auth-event"===(null==c?void 0:c.code)}function fl(g){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,p.Z)(function*(g,c={}){return nn(g,"GET","/v1/projects",c)})).apply(this,arguments)}const Kd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Af=/^https?/;function da(){return(da=(0,p.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:c}=yield fl(g);for(const f of c)try{if(pl(f))return}catch(w){}U(g,"unauthorized-domain")})).apply(this,arguments)}function pl(g){const c=Vt(),{protocol:f,hostname:w}=new URL(c);if(g.startsWith("chrome-extension://")){const Re=new URL(g);return""===Re.hostname&&""===w?"chrome-extension:"===f&&g.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Re.hostname===w}if(!Af.test(f))return!1;if(Kd.test(g))return w===g;const L=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+L+"|"+L+")$","i").test(w)}const Mf=new $t(3e4,6e4);function xf(){const g=$r().___jsl;if(null==g?void 0:g.H)for(const c of Object.keys(g.H))if(g.H[c].r=g.H[c].r||[],g.H[c].L=g.H[c].L||[],g.H[c].r=[...g.H[c].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Bo=null;function gl(g){return Bo=Bo||function qd(g){return new Promise((c,f)=>{var w,L,J;function Re(){xf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{xf(),f(Y(g,"network-request-failed"))},timeout:Mf.get()})}if(null===(L=null===(w=$r().gapi)||void 0===w?void 0:w.iframes)||void 0===L?void 0:L.Iframe)c(gapi.iframes.getContext());else{if(!(null===(J=$r().gapi)||void 0===J?void 0:J.load)){const tt=Eo("iframefcb");return $r()[tt]=()=>{gapi.load?Re():f(Y(g,"network-request-failed"))},vo(`https://apis.google.com/js/api.js?onload=${tt}`).catch(Rt=>f(Rt))}Re()}}).catch(c=>{throw Bo=null,c})}(g),Bo}const Rf=new $t(5e3,15e3),Do={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ic=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jo(g){const c=g.config;ke(c.authDomain,g,"auth-domain-config-required");const f=c.emulator?It(c,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,w={apiKey:c.apiKey,appName:g.name,v:Ee.SDK_VERSION},L=ic.get(g.config.apiHost);L&&(w.eid=L);const J=g._getFrameworks();return J.length&&(w.fw=J.join(",")),`${f}?${(0,Q.xO)(w).slice(1)}`}function bu(){return bu=(0,p.Z)(function*(g){const c=yield gl(g),f=$r().gapi;return ke(f,g,"internal-error"),c.open({where:document.body,url:jo(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Do,dontclear:!0},w=>new Promise(function(){var L=(0,p.Z)(function*(J,Re){yield w.restyle({setHideOnLeave:!1});const tt=Y(g,"network-request-failed"),Rt=$r().setTimeout(()=>{Re(tt)},Rf.get());function on(){$r().clearTimeout(Rt),J(w)}w.ping(on).then(on,()=>{Re(tt)})});return function(J,Re){return L.apply(this,arguments)}}()))}),bu.apply(this,arguments)}const Qd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oc{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(c){}}}function ac(g,c,f,w,L,J){ke(g.config.authDomain,g,"auth-domain-config-required"),ke(g.config.apiKey,g,"invalid-api-key");const Re={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:w,v:Ee.SDK_VERSION,eventId:L};if(c instanceof bi){c.setDefaultLanguage(g.languageCode),Re.providerId=c.providerId||"",(0,Q.xb)(c.getCustomParameters())||(Re.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Rt,on]of Object.entries(J||{}))Re[Rt]=on}if(c instanceof Jr){const Rt=c.getScopes().filter(on=>""!==on);Rt.length>0&&(Re.scopes=Rt.join(","))}g.tenantId&&(Re.tid=g.tenantId);const tt=Re;for(const Rt of Object.keys(tt))void 0===tt[Rt]&&delete tt[Rt];return`${function Jd({config:g}){return g.emulator?It(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,Q.xO)(tt).slice(1)}`}const Xo="webStorageSupport";class yl extends class Of{constructor(c){this.factorId=c}_process(c,f,w){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,w);case"signin":return this._finalizeSignIn(c,f.credential);default:return we("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new yl(c)}_finalizeEnroll(c,f,w){return function zo(g,c){return nn(g,"POST","/v2/accounts/mfaEnrollment:finalize",kt(g,c))}(c,{idToken:f,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function or(g,c){return nn(g,"POST","/v2/accounts/mfaSignIn:finalize",kt(g,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mg=(()=>{class g{constructor(){}static assertion(f){return yl._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var kf="@firebase/auth",eh="0.19.12";class ru{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(w=>{var L;c((null===(L=w)||void 0===L?void 0:L.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fa(){return window}function su(){return(su=(0,p.Z)(function*(g,c,f){var w;const{BuildInfo:L}=Fa();X(c.sessionId,"AuthEvent did not contain a session ID");const J=yield xg(c.sessionId),Re={};return yr()?Re.ibi=L.packageName:Xn()?Re.apn=L.packageName:U(g,"operation-not-supported-in-this-environment"),L.displayName&&(Re.appDisplayName=L.displayName),Re.sessionId=J,ac(g,f,c.type,void 0,null!==(w=c.eventId)&&void 0!==w?w:void 0,Re)})).apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(g){const{BuildInfo:c}=Fa(),f={};yr()?f.iosBundleId=c.packageName:Xn()?f.androidPackageName=c.packageName:U(g,"operation-not-supported-in-this-environment"),yield fl(g,f)})).apply(this,arguments)}function ou(){return(ou=(0,p.Z)(function*(g,c,f){const{cordova:w}=Fa();let L=()=>{};try{yield new Promise((J,Re)=>{let tt=null;function Rt(){var Qt;J();const Oi=null===(Qt=w.plugins.browsertab)||void 0===Qt?void 0:Qt.close;"function"==typeof Oi&&Oi(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function on(){tt||(tt=window.setTimeout(()=>{Re(Y(g,"redirect-cancelled-by-user"))},2e3))}function Dn(){"visible"===(null==document?void 0:document.visibilityState)&&on()}c.addPassiveListener(Rt),document.addEventListener("resume",on,!1),Xn()&&document.addEventListener("visibilitychange",Dn,!1),L=()=>{c.removePassiveListener(Rt),document.removeEventListener("resume",on,!1),document.removeEventListener("visibilitychange",Dn,!1),tt&&window.clearTimeout(tt)}})}finally{L()}})).apply(this,arguments)}function xg(g){return uc.apply(this,arguments)}function uc(){return(uc=(0,p.Z)(function*(g){const c=Rg(g),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(L=>L.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Rg(g){if(X(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(g);const c=new ArrayBuffer(g.length),f=new Uint8Array(c);for(let w=0;w<g.length;w++)f[w]=g.charCodeAt(w);return f}!function th(g){(0,Ee._registerComponent)(new Oe.wA("auth",(c,{options:f})=>{const w=c.getProvider("app").getImmediate(),L=c.getProvider("heartbeat"),{apiKey:J,authDomain:Re}=w.options;return((tt,Rt)=>{ke(J&&!J.includes(":"),"invalid-api-key",{appName:tt.name}),ke(!(null==Re?void 0:Re.includes(":")),"argument-error",{appName:tt.name});const on={apiKey:J,authDomain:Re,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ii(g)},Dn=new Or(tt,Rt,on);return function Ue(g,c){const f=(null==c?void 0:c.persistence)||[],w=(Array.isArray(f)?f:[f]).map(pe);(null==c?void 0:c.errorMap)&&g._updateErrorMap(c.errorMap),g._initializeWithPersistence(w,null==c?void 0:c.popupRedirectResolver)}(Dn,f),Dn})(w,L)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,w)=>{c.getProvider("auth-internal").initialize()})),(0,Ee._registerComponent)(new Oe.wA("auth-internal",c=>{const f=ct(c.getProvider("auth").getImmediate());return new ru(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ee.registerVersion)(kf,eh,function iu(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,Ee.registerVersion)(kf,eh,"esm2017")}("Browser");class cc extends Qs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function rh(g){return wl.apply(this,arguments)}function wl(){return(wl=(0,p.Z)(function*(g){const c=yield Dl()._get(td(g));return c&&(yield Dl()._remove(td(g))),c})).apply(this,arguments)}function Il(){const g=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const w=Math.floor(Math.random()*c.length);g.push(c.charAt(w))}return g.join("")}function Dl(){return pe(jr)}function td(g){return qe("authEvent",g.config.apiKey,g.name)}function Cl(g){if(!(null==g?void 0:g.includes("?")))return{};const[c,...f]=g.split("?");return(0,Q.zd)(f.join("?"))}function bl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Y("no-auth-event")}}function hc(){var g;return(null===(g=null==self?void 0:self.location)||void 0===g?void 0:g.protocol)||null}function sh(g=(0,Q.z$)()){return!("file:"!==hc()&&"ionic:"!==hc()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pn(){try{const g=self.localStorage,c=Ko();if(g)return g.setItem(c,"1"),g.removeItem(c),!function Tl(g=(0,Q.z$)()){return function fc(){return(0,Q.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Og(g=(0,Q.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,Q.hl)()}catch(g){return Al()&&(0,Q.hl)()}return!1}function Al(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function uu(){return(function bo(){return"http:"===hc()||"https:"===hc()}()||(0,Q.ru)()||sh())&&!function rd(){return(0,Q.b$)()||(0,Q.UG)()}()&&Pn()&&!Al()}function lu(){return sh()&&"undefined"!=typeof document}function Jo(){return(Jo=(0,p.Z)(function*(){return!!lu()&&new Promise(g=>{const c=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),g(!0)})})})).apply(this,arguments)}const Xs={LOCAL:"local",NONE:"none",SESSION:"session"},ku=ke,id="persistence";function Sl(g){return sd.apply(this,arguments)}function sd(){return(sd=(0,p.Z)(function*(g){yield g._initializationPromise;const c=uh(),f=qe(id,g.config.apiKey,g.name);c&&c.setItem(f,g._getPersistence())})).apply(this,arguments)}function uh(){var g;try{return(null===(g=function pc(){return"undefined"!=typeof window?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch(c){return null}}const Ml=ke;class $o{constructor(){this.browserResolver=pe(class Su{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vs,this._completeRedirectFn=Vi}_openPopup(c,f,w,L){var J=this;return(0,p.Z)(function*(){var Re;X(null===(Re=J.eventManagers[c._key()])||void 0===Re?void 0:Re.manager,"_initialize() not called before _openPopup()");const tt=ac(c,f,w,Vt(),L);return function Au(g,c,f,w=500,L=600){const J=Math.max((window.screen.availHeight-L)/2,0).toString(),Re=Math.max((window.screen.availWidth-w)/2,0).toString();let tt="";const Rt=Object.assign(Object.assign({},Qd),{width:w.toString(),height:L.toString(),top:J,left:Re}),on=(0,Q.z$)().toLowerCase();f&&(tt=Rr(on)?"_blank":f),pt(on)&&(c=c||"http://localhost",Rt.scrollbars="yes");const Dn=Object.entries(Rt).reduce((Oi,[ho,Js])=>`${Oi}${ho}=${Js},`,"");if(function wi(g=(0,Q.z$)()){var c;return yr(g)&&!!(null===(c=window.navigator)||void 0===c?void 0:c.standalone)}(on)&&"_self"!==tt)return function Xd(g,c){const f=document.createElement("a");f.href=g,f.target=c;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(w)}(c||"",tt),new oc(null);const Qt=window.open(c||"",tt,Dn);ke(Qt,g,"popup-blocked");try{Qt.focus()}catch(Oi){}return new oc(Qt)}(c,tt,Ko())})()}_openRedirect(c,f,w,L){var J=this;return(0,p.Z)(function*(){return yield J._originValidation(c),function al(g){$r().location.href=g}(ac(c,f,w,Vt(),L)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:L,promise:J}=this.eventManagers[f];return L?Promise.resolve(L):(X(J,"If manager is not set, promise should be"),J)}const w=this.initAndGetManager(c);return this.eventManagers[f]={promise:w},w.catch(()=>{delete this.eventManagers[f]}),w}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const w=yield function sc(g){return bu.apply(this,arguments)}(c),L=new Qs(c);return w.register("authEvent",J=>(ke(null==J?void 0:J.authEvent,c,"invalid-auth-event"),{status:L.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:L},f.iframes[c._key()]=w,L})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(Xo,{type:Xo},L=>{var J;const Re=null===(J=null==L?void 0:L[0])||void 0===J?void 0:J[Xo];void 0!==Re&&f(!!Re),U(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Sf(g){return da.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return qn()||Cn()||yr()}}),this.cordovaResolver=pe(class La{constructor(){this._redirectPersistence=Vs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vi}_initialize(c){var f=this;return(0,p.Z)(function*(){const w=c._key();let L=f.eventManagers.get(w);return L||(L=new cc(c),f.eventManagers.set(w,L),f.attachCallbackListeners(c,L)),L})()}_openPopup(c){U(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,w,L){var J=this;return(0,p.Z)(function*(){!function El(g){var c,f,w,L,J,Re,tt,Rt,on,Dn;const Qt=Fa();ke("function"==typeof(null===(c=null==Qt?void 0:Qt.universalLinks)||void 0===c?void 0:c.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ke(void 0!==(null===(f=null==Qt?void 0:Qt.BuildInfo)||void 0===f?void 0:f.packageName),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ke("function"==typeof(null===(J=null===(L=null===(w=null==Qt?void 0:Qt.cordova)||void 0===w?void 0:w.plugins)||void 0===L?void 0:L.browsertab)||void 0===J?void 0:J.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ke("function"==typeof(null===(Rt=null===(tt=null===(Re=null==Qt?void 0:Qt.cordova)||void 0===Re?void 0:Re.plugins)||void 0===tt?void 0:tt.browsertab)||void 0===Rt?void 0:Rt.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ke("function"==typeof(null===(Dn=null===(on=null==Qt?void 0:Qt.cordova)||void 0===on?void 0:on.InAppBrowser)||void 0===Dn?void 0:Dn.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Re=yield J._initialize(c);yield Re.initialized(),Re.resetRedirect(),function dl(){Ys.clear()}(),yield J._originValidation(c);const tt=function au(g,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:Il(),postBody:null,tenantId:g.tenantId,error:Y(g,"no-auth-event")}}(c,w,L);yield function Ru(g,c){return Dl()._set(td(g),c)}(c,tt);const Rt=yield function nh(g,c,f){return su.apply(this,arguments)}(c,tt,f),on=yield function vl(g){const{cordova:c}=Fa();return new Promise(f=>{c.plugins.browsertab.isAvailable(w=>{let L=null;w?c.plugins.browsertab.openUrl(g):L=c.InAppBrowser.open(g,function Xr(g=(0,Q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(L)})})}(Rt);return function zi(g,c,f){return ou.apply(this,arguments)}(c,Re,on)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function xu(g){return Co.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:w,handleOpenURL:L,BuildInfo:J}=Fa(),Re=setTimeout((0,p.Z)(function*(){yield rh(c),f.onEvent(bl())}),500),tt=function(){var Dn=(0,p.Z)(function*(Qt){clearTimeout(Re);const Oi=yield rh(c);let ho=null;Oi&&(null==Qt?void 0:Qt.url)&&(ho=function ih(g,c){var f,w;const L=function ur(g){const c=Cl(g),f=c.link?decodeURIComponent(c.link):void 0,w=Cl(f).link,L=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Cl(L).link||L||w||f||g}(c);if(L.includes("/__/auth/callback")){const J=Cl(L),Re=J.firebaseError?function Ki(g){try{return JSON.parse(g)}catch(c){return null}}(decodeURIComponent(J.firebaseError)):null,tt=null===(w=null===(f=null==Re?void 0:Re.code)||void 0===f?void 0:f.split("auth/"))||void 0===w?void 0:w[1],Rt=tt?Y(tt):null;return Rt?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Rt,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:L,postBody:null}}return null}(Oi,Qt.url)),f.onEvent(ho||bl())});return function(Oi){return Dn.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,tt);const Rt=L,on=`${J.packageName.toLowerCase()}://`;Fa().handleOpenURL=function(){var Dn=(0,p.Z)(function*(Qt){if(Qt.toLowerCase().startsWith(on)&&tt({url:Qt}),"function"==typeof Rt)try{Rt(Qt)}catch(Oi){console.error(Oi)}});return function(Qt){return Dn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Vs,this._completeRedirectFn=Vi}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,w,L){var J=this;return(0,p.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openPopup(c,f,w,L)})()}_openRedirect(c,f,w,L){var J=this;return(0,p.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openRedirect(c,f,w,L)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return lu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ml(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function is(){return Jo.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function lh(g){return g.unwrap()}function xl(g){return Pu(g)}function Pu(g){const{_tokenResponse:c}=g instanceof Q.ZR?g.customData:g;if(!c)return null;if(!(g instanceof Q.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Gi.credentialFromResult(g);const f=c.providerId;if(!f||"password"===f)return null;let w;switch(f){case"google.com":w=ei;break;case"facebook.com":w=Fi;break;case"github.com":w=Fs;break;case"twitter.com":w=ps;break;default:const{oauthIdToken:L,oauthAccessToken:J,oauthTokenSecret:Re,pendingToken:tt,nonce:Rt}=c;return J||Re||L||tt?tt?f.startsWith("saml.")?xs._create(f,tt):de._fromParams({providerId:f,signInMethod:f,pendingToken:tt,idToken:L,accessToken:J}):new us(f).credential({idToken:L,accessToken:J,rawNonce:Rt}):null}return g instanceof Q.ZR?w.credentialFromError(g):w.credentialFromResult(g)}function oi(g,c){return c.catch(f=>{throw f instanceof Q.ZR&&function ch(g,c){var f;const w=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===c.code)c.resolver=new Ol(g,function Mi(g,c){var f;const w=(0,Q.m9)(g),L=c;return ke(c.customData.operationType,w,"argument-error"),ke(null===(f=L.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,w,"argument-error"),ko._fromError(w,L)}(g,c));else if(w){const L=Pu(c),J=c;L&&(J.credential=L,J.tenantId=w.tenantId||void 0,J.email=w.email||void 0,J.phoneNumber=w.phoneNumber||void 0)}}(g,f),f}).then(f=>{const L=f.user;return{operationType:f.operationType,credential:xl(f),additionalUserInfo:Si(f),user:ea.getOrCreate(L)}})}function Rl(g,c){return gc.apply(this,arguments)}function gc(){return(gc=(0,p.Z)(function*(g,c){const f=yield c;return{verificationId:f.verificationId,confirm:w=>oi(g,f.confirm(w))}})).apply(this,arguments)}class Ol{constructor(c,f){this.resolver=f,this.auth=function ws(g){return g.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return oi(lh(this.auth),this.resolver.resolveSignIn(c))}}class ea{constructor(c){this._delegate=c,this.multiFactor=function aa(g){const c=(0,Q.m9)(g);return As.has(c)||As.set(c,es._fromUser(c)),As.get(c)}(c)}static getOrCreate(c){return ea.USER_MAP.has(c)||ea.USER_MAP.set(c,new ea(c)),ea.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return oi(f.auth,jn(f._delegate,c))})()}linkWithPhoneNumber(c,f){var w=this;return(0,p.Z)(function*(){return Rl(w.auth,function ul(g,c,f){return js.apply(this,arguments)}(w._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return oi(f.auth,function cl(g,c,f){return Uo.apply(this,arguments)}(f._delegate,c,$o))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Sl(ct(f.auth)),function rn(g,c,f){return function In(g,c,f){return ar.apply(this,arguments)}(g,c,f)}(f._delegate,c,$o)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return oi(f.auth,En(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Rl(this.auth,function Ri(g,c,f){return No.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return oi(this.auth,function Yo(g,c,f){return Vo.apply(this,arguments)}(this._delegate,c,$o))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Sl(ct(f.auth)),function Ye(g,c,f){return function vt(g,c,f){return Gt.apply(this,arguments)}(g,c,f)}(f._delegate,c,$o)})()}sendEmailVerification(c){return function ii(g,c){return Hi.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function Ji(g,c){return Rs.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function po(g,c){return Go((0,Q.m9)(g),c,null)}(this._delegate,c)}updatePassword(c){return function Ca(g,c){return Go((0,Q.m9)(g),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function ka(g,c){return Zo.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function fo(g,c){return Ls.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Wr(g,c,f){return si.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ea.USER_MAP=new WeakMap;const Nu=ke;let mc=(()=>{class g{constructor(f,w){if(this.app=f,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:L}=f.options;Nu(L,"invalid-api-key",{appName:f.name}),Nu(L,"invalid-api-key",{appName:f.name});const J="undefined"!=typeof window?$o:void 0;this._delegate=w.initialize({options:{persistence:Pf(L,f.name),popupRedirectResolver:J}}),this._delegate._updateErrorMap(Ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ea.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,w){!function cn(g,c,f){const w=ct(g);ke(w._canInitEmulator,w,"emulator-config-failed"),ke(/^https?:\/\//.test(c),w,"invalid-emulator-scheme");const L=!!(null==f?void 0:f.disableWarnings),J=Jn(c),{host:Re,port:tt}=function li(g){const c=Jn(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(c.length));if(!f)return{host:"",port:null};const w=f[2].split("@").pop()||"",L=/^(\[[^\]]+\])(:|$)/.exec(w);if(L){const J=L[1];return{host:J,port:er(w.substr(J.length+1))}}{const[J,Re]=w.split(":");return{host:J,port:er(Re)}}}(c);w.config.emulator={url:`${J}//${Re}${null===tt?"":`:${tt}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Re,port:tt,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:L})}),L||function ci(){function g(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,w)}applyActionCode(f){return function S(g,c){return m.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return C(this._delegate,f)}confirmPasswordReset(f,w){return function N(g,c,f){return M.apply(this,arguments)}(this._delegate,f,w)}createUserWithEmailAndPassword(f,w){var L=this;return(0,p.Z)(function*(){return oi(L._delegate,function Ke(g,c,f){return it.apply(this,arguments)}(L._delegate,f,w))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function yi(g,c){return hr.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function $n(g,c){const f=Ni.parseLink(c);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Nu(uu(),f._delegate,"operation-not-supported-in-this-environment");const w=yield function kn(g,c){return Yr.apply(this,arguments)}(f._delegate,$o);return w?oi(f._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Ss(g,c){ct(g)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,w,L){const{next:J,error:Re,complete:tt}=dh(f,w,L);return this._delegate.onAuthStateChanged(J,Re,tt)}onIdTokenChanged(f,w,L){const{next:J,error:Re,complete:tt}=dh(f,w,L);return this._delegate.onIdTokenChanged(J,Re,tt)}sendSignInLinkToEmail(f,w){return function St(g,c,f){return _n.apply(this,arguments)}(this._delegate,f,w)}sendPasswordResetEmail(f,w){return function Ts(g,c,f){return Os.apply(this,arguments)}(this._delegate,f,w||void 0)}setPersistence(f){var w=this;return(0,p.Z)(function*(){let L;switch(function oh(g,c){ku(Object.values(Xs).includes(c),g,"invalid-persistence-type"),(0,Q.b$)()?ku(c!==Xs.SESSION,g,"unsupported-persistence-type"):(0,Q.UG)()?ku(c===Xs.NONE,g,"unsupported-persistence-type"):Al()?ku(c===Xs.NONE||c===Xs.LOCAL&&(0,Q.hl)(),g,"unsupported-persistence-type"):ku(c===Xs.NONE||Pn(),g,"unsupported-persistence-type")}(w._delegate,f),f){case Xs.SESSION:L=Vs;break;case Xs.LOCAL:L=(yield pe(zt)._isAvailable())?zt:jr;break;case Xs.NONE:L=Ie;break;default:return U("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(L)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return oi(this._delegate,function ls(g){return Gs.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return oi(this._delegate,bt(this._delegate,f))}signInWithCustomToken(f){return oi(this._delegate,function gs(g,c){return ni.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,w){return oi(this._delegate,function Lt(g,c,f){return bt((0,Q.m9)(g),as.credential(c,f))}(this._delegate,f,w))}signInWithEmailLink(f,w){return oi(this._delegate,function Br(g,c,f){return dr.apply(this,arguments)}(this._delegate,f,w))}signInWithPhoneNumber(f,w){return Rl(this._delegate,function zd(g,c,f){return Kn.apply(this,arguments)}(this._delegate,f,w))}signInWithPopup(f){var w=this;return(0,p.Z)(function*(){return Nu(uu(),w._delegate,"operation-not-supported-in-this-environment"),oi(w._delegate,function wo(g,c,f){return Lo.apply(this,arguments)}(w._delegate,f,$o))})()}signInWithRedirect(f){var w=this;return(0,p.Z)(function*(){return Nu(uu(),w._delegate,"operation-not-supported-in-this-environment"),yield Sl(w._delegate),function z(g,c,f){return function le(g,c,f){return Me.apply(this,arguments)}(g,c,f)}(w._delegate,f,$o)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function ee(g,c){return De.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Xs,g})();function dh(g,c,f){let w=g;"function"!=typeof g&&({next:w,error:c,complete:f}=g);const L=w;return{next:Re=>L(Re&&ea.getOrCreate(Re)),error:c,complete:f}}function Pf(g,c){const f=function ah(g,c){const f=uh();if(!f)return[];const w=qe(id,g,c);switch(f.getItem(w)){case Xs.NONE:return[Ie];case Xs.LOCAL:return[zt,Vs];case Xs.SESSION:return[Vs];default:return[]}}(g,c);if("undefined"!=typeof self&&!f.includes(zt)&&f.push(zt),"undefined"!=typeof window)for(const w of[jr,Vs])f.includes(w)||f.push(w);return f.includes(Ie)||f.push(Ie),f}class cu{constructor(){this.providerId="phone",this._delegate=new Gi(lh(q.Z.auth()))}static credential(c,f){return Gi.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}cu.PHONE_SIGN_IN_METHOD=Gi.PHONE_SIGN_IN_METHOD,cu.PROVIDER_ID=Gi.PROVIDER_ID;const od=ke;class Nf{constructor(c,f,w=q.Z.app()){var L;od(null===(L=w.options)||void 0===L?void 0:L.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Wd(c,f,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fh(g){g.INTERNAL.registerComponent(new Oe.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),w=c.getProvider("auth");return new mc(f,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:as,FacebookAuthProvider:Fi,GithubAuthProvider:Fs,GoogleAuthProvider:ei,OAuthProvider:us,SAMLAuthProvider:Ti,PhoneAuthProvider:cu,PhoneMultiFactorGenerator:Mg,RecaptchaVerifier:Nf,TwitterAuthProvider:ps,Auth:mc,AuthCredential:Vn,Error:Q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.12")}(q.Z)},1135:(Tt,We,F)=>{F.d(We,{X:()=>q});var p=F(7579);class q extends p.x{constructor(Ee){super(),this._value=Ee}get value(){return this.getValue()}_subscribe(Ee){const ye=super._subscribe(Ee);return!ye.closed&&Ee.next(this._value),ye}getValue(){const{hasError:Ee,thrownError:ye,_value:Se}=this;if(Ee)throw ye;return this._throwIfClosed(),Se}next(Ee){super.next(this._value=Ee)}}},9751:(Tt,We,F)=>{F.d(We,{y:()=>Pe});var p=F(930),q=F(727),Q=F(8822),Ee=F(9635),ye=F(2416),Se=F(576),Oe=F(2806);let Pe=(()=>{class Te{constructor(Qe){Qe&&(this._subscribe=Qe)}lift(Qe){const Ze=new Te;return Ze.source=this,Ze.operator=Qe,Ze}subscribe(Qe,Ze,gt){const ze=function ie(Te){return Te&&Te instanceof p.Lv||function ce(Te){return Te&&(0,Se.m)(Te.next)&&(0,Se.m)(Te.error)&&(0,Se.m)(Te.complete)}(Te)&&(0,q.Nn)(Te)}(Qe)?Qe:new p.Hp(Qe,Ze,gt);return(0,Oe.x)(()=>{const{operator:Le,source:Et}=this;ze.add(Le?Le.call(ze,Et):Et?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Qe){try{return this._subscribe(Qe)}catch(Ze){Qe.error(Ze)}}forEach(Qe,Ze){return new(Ze=Ne(Ze))((gt,ze)=>{const Le=new p.Hp({next:Et=>{try{Qe(Et)}catch(j){ze(j),Le.unsubscribe()}},error:ze,complete:gt});this.subscribe(Le)})}_subscribe(Qe){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(Qe)}[Q.L](){return this}pipe(...Qe){return(0,Ee.U)(Qe)(this)}toPromise(Qe){return new(Qe=Ne(Qe))((Ze,gt)=>{let ze;this.subscribe(Le=>ze=Le,Le=>gt(Le),()=>Ze(ze))})}}return Te.create=ut=>new Te(ut),Te})();function Ne(Te){var ut;return null!==(ut=null!=Te?Te:ye.v.Promise)&&void 0!==ut?ut:Promise}},7579:(Tt,We,F)=>{F.d(We,{x:()=>Oe});var p=F(9751),q=F(727);const Ee=(0,F(3888).d)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ye=F(8737),Se=F(2806);let Oe=(()=>{class Ne extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const Te=new Pe(this,this);return Te.operator=ie,Te}_throwIfClosed(){if(this.closed)throw new Ee}next(ie){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Te of this.currentObservers)Te.next(ie)}})}error(ie){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:Te}=this;for(;Te.length;)Te.shift().error(ie)}})}complete(){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:Te,isStopped:ut,observers:Qe}=this;return Te||ut?q.Lc:(this.currentObservers=null,Qe.push(ie),new q.w0(()=>{this.currentObservers=null,(0,ye.P)(Qe,ie)}))}_checkFinalizedStatuses(ie){const{hasError:Te,thrownError:ut,isStopped:Qe}=this;Te?ie.error(ut):Qe&&ie.complete()}asObservable(){const ie=new p.y;return ie.source=this,ie}}return Ne.create=(ce,ie)=>new Pe(ce,ie),Ne})();class Pe extends Oe{constructor(ce,ie){super(),this.destination=ce,this.source=ie}next(ce){var ie,Te;null===(Te=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===Te||Te.call(ie,ce)}error(ce){var ie,Te;null===(Te=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===Te||Te.call(ie,ce)}complete(){var ce,ie;null===(ie=null===(ce=this.destination)||void 0===ce?void 0:ce.complete)||void 0===ie||ie.call(ce)}_subscribe(ce){var ie,Te;return null!==(Te=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(ce))&&void 0!==Te?Te:q.Lc}}},930:(Tt,We,F)=>{F.d(We,{Hp:()=>gt,Lv:()=>Te});var p=F(576),q=F(727),Q=F(2416),Ee=F(7849),ye=F(5032);const Se=Ne("C",void 0,void 0);function Ne(U,Y,ve){return{kind:U,value:Y,error:ve}}var ce=F(3410),ie=F(2806);class Te extends q.w0{constructor(Y){super(),this.isStopped=!1,Y?(this.destination=Y,(0,q.Nn)(Y)&&Y.add(this)):this.destination=j}static create(Y,ve,Ve){return new gt(Y,ve,Ve)}next(Y){this.isStopped?Et(function Pe(U){return Ne("N",U,void 0)}(Y),this):this._next(Y)}error(Y){this.isStopped?Et(function Oe(U){return Ne("E",void 0,U)}(Y),this):(this.isStopped=!0,this._error(Y))}complete(){this.isStopped?Et(Se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Y){this.destination.next(Y)}_error(Y){try{this.destination.error(Y)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ut=Function.prototype.bind;function Qe(U,Y){return ut.call(U,Y)}class Ze{constructor(Y){this.partialObserver=Y}next(Y){const{partialObserver:ve}=this;if(ve.next)try{ve.next(Y)}catch(Ve){ze(Ve)}}error(Y){const{partialObserver:ve}=this;if(ve.error)try{ve.error(Y)}catch(Ve){ze(Ve)}else ze(Y)}complete(){const{partialObserver:Y}=this;if(Y.complete)try{Y.complete()}catch(ve){ze(ve)}}}class gt extends Te{constructor(Y,ve,Ve){let $e;if(super(),(0,p.m)(Y)||!Y)$e={next:null!=Y?Y:void 0,error:null!=ve?ve:void 0,complete:null!=Ve?Ve:void 0};else{let ke;this&&Q.v.useDeprecatedNextContext?(ke=Object.create(Y),ke.unsubscribe=()=>this.unsubscribe(),$e={next:Y.next&&Qe(Y.next,ke),error:Y.error&&Qe(Y.error,ke),complete:Y.complete&&Qe(Y.complete,ke)}):$e=Y}this.destination=new Ze($e)}}function ze(U){Q.v.useDeprecatedSynchronousErrorHandling?(0,ie.O)(U):(0,Ee.h)(U)}function Et(U,Y){const{onStoppedNotification:ve}=Q.v;ve&&ce.z.setTimeout(()=>ve(U,Y))}const j={closed:!0,next:ye.Z,error:function Le(U){throw U},complete:ye.Z}},727:(Tt,We,F)=>{F.d(We,{Lc:()=>Se,w0:()=>ye,Nn:()=>Oe});var p=F(576);const Q=(0,F(3888).d)(Ne=>function(ie){Ne(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((Te,ut)=>`${ut+1}) ${Te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var Ee=F(8737);class ye{constructor(ce){this.initialTeardown=ce,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ce;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const Qe of ie)Qe.remove(this);else ie.remove(this);const{initialTeardown:Te}=this;if((0,p.m)(Te))try{Te()}catch(Qe){ce=Qe instanceof Q?Qe.errors:[Qe]}const{_finalizers:ut}=this;if(ut){this._finalizers=null;for(const Qe of ut)try{Pe(Qe)}catch(Ze){ce=null!=ce?ce:[],Ze instanceof Q?ce=[...ce,...Ze.errors]:ce.push(Ze)}}if(ce)throw new Q(ce)}}add(ce){var ie;if(ce&&ce!==this)if(this.closed)Pe(ce);else{if(ce instanceof ye){if(ce.closed||ce._hasParent(this))return;ce._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(ce)}}_hasParent(ce){const{_parentage:ie}=this;return ie===ce||Array.isArray(ie)&&ie.includes(ce)}_addParent(ce){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(ce),ie):ie?[ie,ce]:ce}_removeParent(ce){const{_parentage:ie}=this;ie===ce?this._parentage=null:Array.isArray(ie)&&(0,Ee.P)(ie,ce)}remove(ce){const{_finalizers:ie}=this;ie&&(0,Ee.P)(ie,ce),ce instanceof ye&&ce._removeParent(this)}}ye.EMPTY=(()=>{const Ne=new ye;return Ne.closed=!0,Ne})();const Se=ye.EMPTY;function Oe(Ne){return Ne instanceof ye||Ne&&"closed"in Ne&&(0,p.m)(Ne.remove)&&(0,p.m)(Ne.add)&&(0,p.m)(Ne.unsubscribe)}function Pe(Ne){(0,p.m)(Ne)?Ne():Ne.unsubscribe()}},2416:(Tt,We,F)=>{F.d(We,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Tt,We,F)=>{F.d(We,{z:()=>ye});var p=F(8189),Q=F(3269),Ee=F(8996);function ye(...Se){return function q(){return(0,p.J)(1)}()((0,Ee.D)(Se,(0,Q.yG)(Se)))}},515:(Tt,We,F)=>{F.d(We,{E:()=>q});const q=new(F(9751).y)(ye=>ye.complete())},8996:(Tt,We,F)=>{F.d(We,{D:()=>Y});var p=F(8421),q=F(5363),Q=F(9468),Se=F(9751),Pe=F(2202),Ne=F(576),ce=F(9672);function Te(ve,Ve){if(!ve)throw new Error("Iterable cannot be null");return new Se.y($e=>{(0,ce.f)($e,Ve,()=>{const ke=ve[Symbol.asyncIterator]();(0,ce.f)($e,Ve,()=>{ke.next().then(we=>{we.done?$e.complete():$e.next(we.value)})},0,!0)})})}var ut=F(3670),Qe=F(8239),Ze=F(1144),gt=F(6495),ze=F(2206),Le=F(4532),Et=F(3260);function Y(ve,Ve){return Ve?function U(ve,Ve){if(null!=ve){if((0,ut.c)(ve))return function Ee(ve,Ve){return(0,p.Xf)(ve).pipe((0,Q.R)(Ve),(0,q.Q)(Ve))}(ve,Ve);if((0,Ze.z)(ve))return function Oe(ve,Ve){return new Se.y($e=>{let ke=0;return Ve.schedule(function(){ke===ve.length?$e.complete():($e.next(ve[ke++]),$e.closed||this.schedule())})})}(ve,Ve);if((0,Qe.t)(ve))return function ye(ve,Ve){return(0,p.Xf)(ve).pipe((0,Q.R)(Ve),(0,q.Q)(Ve))}(ve,Ve);if((0,ze.D)(ve))return Te(ve,Ve);if((0,gt.T)(ve))return function ie(ve,Ve){return new Se.y($e=>{let ke;return(0,ce.f)($e,Ve,()=>{ke=ve[Pe.h](),(0,ce.f)($e,Ve,()=>{let we,X;try{({value:we,done:X}=ke.next())}catch(Ce){return void $e.error(Ce)}X?$e.complete():$e.next(we)},0,!0)}),()=>(0,Ne.m)(null==ke?void 0:ke.return)&&ke.return()})}(ve,Ve);if((0,Et.L)(ve))return function j(ve,Ve){return Te((0,Et.Q)(ve),Ve)}(ve,Ve)}throw(0,Le.z)(ve)}(ve,Ve):(0,p.Xf)(ve)}},8421:(Tt,We,F)=>{F.d(We,{Xf:()=>ut});var p=F(655),q=F(1144),Q=F(8239),Ee=F(9751),ye=F(3670),Se=F(2206),Oe=F(4532),Pe=F(6495),Ne=F(3260),ce=F(576),ie=F(7849),Te=F(8822);function ut(U){if(U instanceof Ee.y)return U;if(null!=U){if((0,ye.c)(U))return function Qe(U){return new Ee.y(Y=>{const ve=U[Te.L]();if((0,ce.m)(ve.subscribe))return ve.subscribe(Y);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(U);if((0,q.z)(U))return function Ze(U){return new Ee.y(Y=>{for(let ve=0;ve<U.length&&!Y.closed;ve++)Y.next(U[ve]);Y.complete()})}(U);if((0,Q.t)(U))return function gt(U){return new Ee.y(Y=>{U.then(ve=>{Y.closed||(Y.next(ve),Y.complete())},ve=>Y.error(ve)).then(null,ie.h)})}(U);if((0,Se.D)(U))return Le(U);if((0,Pe.T)(U))return function ze(U){return new Ee.y(Y=>{for(const ve of U)if(Y.next(ve),Y.closed)return;Y.complete()})}(U);if((0,Ne.L)(U))return function Et(U){return Le((0,Ne.Q)(U))}(U)}throw(0,Oe.z)(U)}function Le(U){return new Ee.y(Y=>{(function j(U,Y){var ve,Ve,$e,ke;return(0,p.mG)(this,void 0,void 0,function*(){try{for(ve=(0,p.KL)(U);!(Ve=yield ve.next()).done;)if(Y.next(Ve.value),Y.closed)return}catch(we){$e={error:we}}finally{try{Ve&&!Ve.done&&(ke=ve.return)&&(yield ke.call(ve))}finally{if($e)throw $e.error}}Y.complete()})})(U,Y).catch(ve=>Y.error(ve))})}},6451:(Tt,We,F)=>{F.d(We,{T:()=>Se});var p=F(8189),q=F(8421),Q=F(515),Ee=F(3269),ye=F(8996);function Se(...Oe){const Pe=(0,Ee.yG)(Oe),Ne=(0,Ee._6)(Oe,1/0),ce=Oe;return ce.length?1===ce.length?(0,q.Xf)(ce[0]):(0,p.J)(Ne)((0,ye.D)(ce,Pe)):Q.E}},9646:(Tt,We,F)=>{F.d(We,{of:()=>Q});var p=F(3269),q=F(8996);function Q(...Ee){const ye=(0,p.yG)(Ee);return(0,q.D)(Ee,ye)}},5403:(Tt,We,F)=>{F.d(We,{x:()=>q});var p=F(930);function q(Ee,ye,Se,Oe,Pe){return new Q(Ee,ye,Se,Oe,Pe)}class Q extends p.Lv{constructor(ye,Se,Oe,Pe,Ne,ce){super(ye),this.onFinalize=Ne,this.shouldUnsubscribe=ce,this._next=Se?function(ie){try{Se(ie)}catch(Te){ye.error(Te)}}:super._next,this._error=Pe?function(ie){try{Pe(ie)}catch(Te){ye.error(Te)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(ie){ye.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ye;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Se}=this;super.unsubscribe(),!Se&&(null===(ye=this.onFinalize)||void 0===ye||ye.call(this))}}}},6590:(Tt,We,F)=>{F.d(We,{d:()=>Q});var p=F(4482),q=F(5403);function Q(Ee){return(0,p.e)((ye,Se)=>{let Oe=!1;ye.subscribe((0,q.x)(Se,Pe=>{Oe=!0,Se.next(Pe)},()=>{Oe||Se.next(Ee),Se.complete()}))})}},9300:(Tt,We,F)=>{F.d(We,{h:()=>Q});var p=F(4482),q=F(5403);function Q(Ee,ye){return(0,p.e)((Se,Oe)=>{let Pe=0;Se.subscribe((0,q.x)(Oe,Ne=>Ee.call(ye,Ne,Pe++)&&Oe.next(Ne)))})}},8746:(Tt,We,F)=>{F.d(We,{x:()=>q});var p=F(4482);function q(Q){return(0,p.e)((Ee,ye)=>{try{Ee.subscribe(ye)}finally{ye.add(Q)}})}},590:(Tt,We,F)=>{F.d(We,{P:()=>Oe});var p=F(6805),q=F(9300),Q=F(5698),Ee=F(6590),ye=F(8068),Se=F(4671);function Oe(Pe,Ne){const ce=arguments.length>=2;return ie=>ie.pipe(Pe?(0,q.h)((Te,ut)=>Pe(Te,ut,ie)):Se.y,(0,Q.q)(1),ce?(0,Ee.d)(Ne):(0,ye.T)(()=>new p.K))}},3103:(Tt,We,F)=>{F.d(We,{Z:()=>Oe});var p=F(6805),q=F(9300),Q=F(2035),Ee=F(8068),ye=F(6590),Se=F(4671);function Oe(Pe,Ne){const ce=arguments.length>=2;return ie=>ie.pipe(Pe?(0,q.h)((Te,ut)=>Pe(Te,ut,ie)):Se.y,(0,Q.h)(1),ce?(0,ye.d)(Ne):(0,Ee.T)(()=>new p.K))}},4004:(Tt,We,F)=>{F.d(We,{U:()=>Q});var p=F(4482),q=F(5403);function Q(Ee,ye){return(0,p.e)((Se,Oe)=>{let Pe=0;Se.subscribe((0,q.x)(Oe,Ne=>{Oe.next(Ee.call(ye,Ne,Pe++))}))})}},8189:(Tt,We,F)=>{F.d(We,{J:()=>Q});var p=F(5577),q=F(4671);function Q(Ee=1/0){return(0,p.z)(q.y,Ee)}},5577:(Tt,We,F)=>{F.d(We,{z:()=>Pe});var p=F(4004),q=F(8421),Q=F(4482),Ee=F(9672),ye=F(5403),Oe=F(576);function Pe(Ne,ce,ie=1/0){return(0,Oe.m)(ce)?Pe((Te,ut)=>(0,p.U)((Qe,Ze)=>ce(Te,Qe,ut,Ze))((0,q.Xf)(Ne(Te,ut))),ie):("number"==typeof ce&&(ie=ce),(0,Q.e)((Te,ut)=>function Se(Ne,ce,ie,Te,ut,Qe,Ze,gt){const ze=[];let Le=0,Et=0,j=!1;const U=()=>{j&&!ze.length&&!Le&&ce.complete()},Y=Ve=>Le<Te?ve(Ve):ze.push(Ve),ve=Ve=>{Qe&&ce.next(Ve),Le++;let $e=!1;(0,q.Xf)(ie(Ve,Et++)).subscribe((0,ye.x)(ce,ke=>{null==ut||ut(ke),Qe?Y(ke):ce.next(ke)},()=>{$e=!0},void 0,()=>{if($e)try{for(Le--;ze.length&&Le<Te;){const ke=ze.shift();Ze?(0,Ee.f)(ce,Ze,()=>ve(ke)):ve(ke)}U()}catch(ke){ce.error(ke)}}))};return Ne.subscribe((0,ye.x)(ce,Y,()=>{j=!0,U()})),()=>{null==gt||gt()}}(Te,ut,Ne,ie)))}},5363:(Tt,We,F)=>{F.d(We,{Q:()=>Ee});var p=F(9672),q=F(4482),Q=F(5403);function Ee(ye,Se=0){return(0,q.e)((Oe,Pe)=>{Oe.subscribe((0,Q.x)(Pe,Ne=>(0,p.f)(Pe,ye,()=>Pe.next(Ne),Se),()=>(0,p.f)(Pe,ye,()=>Pe.complete(),Se),Ne=>(0,p.f)(Pe,ye,()=>Pe.error(Ne),Se)))})}},5026:(Tt,We,F)=>{F.d(We,{R:()=>Ee});var p=F(4482),q=F(5403);function Q(ye,Se,Oe,Pe,Ne){return(ce,ie)=>{let Te=Oe,ut=Se,Qe=0;ce.subscribe((0,q.x)(ie,Ze=>{const gt=Qe++;ut=Te?ye(ut,Ze,gt):(Te=!0,Ze),Pe&&ie.next(ut)},Ne&&(()=>{Te&&ie.next(ut),ie.complete()})))}}function Ee(ye,Se){return(0,p.e)(Q(ye,Se,arguments.length>=2,!0))}},3099:(Tt,We,F)=>{F.d(We,{B:()=>Se});var p=F(8996),q=F(5698),Q=F(7579),Ee=F(930),ye=F(4482);function Se(Pe={}){const{connector:Ne=(()=>new Q.x),resetOnError:ce=!0,resetOnComplete:ie=!0,resetOnRefCountZero:Te=!0}=Pe;return ut=>{let Qe=null,Ze=null,gt=null,ze=0,Le=!1,Et=!1;const j=()=>{null==Ze||Ze.unsubscribe(),Ze=null},U=()=>{j(),Qe=gt=null,Le=Et=!1},Y=()=>{const ve=Qe;U(),null==ve||ve.unsubscribe()};return(0,ye.e)((ve,Ve)=>{ze++,!Et&&!Le&&j();const $e=gt=null!=gt?gt:Ne();Ve.add(()=>{ze--,0===ze&&!Et&&!Le&&(Ze=Oe(Y,Te))}),$e.subscribe(Ve),Qe||(Qe=new Ee.Hp({next:ke=>$e.next(ke),error:ke=>{Et=!0,j(),Ze=Oe(U,ce,ke),$e.error(ke)},complete:()=>{Le=!0,j(),Ze=Oe(U,ie),$e.complete()}}),(0,p.D)(ve).subscribe(Qe))})(ut)}}function Oe(Pe,Ne,...ce){return!0===Ne?(Pe(),null):!1===Ne?null:Ne(...ce).pipe((0,q.q)(1)).subscribe(()=>Pe())}},8675:(Tt,We,F)=>{F.d(We,{O:()=>Ee});var p=F(7272),q=F(3269),Q=F(4482);function Ee(...ye){const Se=(0,q.yG)(ye);return(0,Q.e)((Oe,Pe)=>{(Se?(0,p.z)(ye,Oe,Se):(0,p.z)(ye,Oe)).subscribe(Pe)})}},9468:(Tt,We,F)=>{F.d(We,{R:()=>q});var p=F(4482);function q(Q,Ee=0){return(0,p.e)((ye,Se)=>{Se.add(Q.schedule(()=>ye.subscribe(Se),Ee))})}},3900:(Tt,We,F)=>{F.d(We,{w:()=>Ee});var p=F(8421),q=F(4482),Q=F(5403);function Ee(ye,Se){return(0,q.e)((Oe,Pe)=>{let Ne=null,ce=0,ie=!1;const Te=()=>ie&&!Ne&&Pe.complete();Oe.subscribe((0,Q.x)(Pe,ut=>{null==Ne||Ne.unsubscribe();let Qe=0;const Ze=ce++;(0,p.Xf)(ye(ut,Ze)).subscribe(Ne=(0,Q.x)(Pe,gt=>Pe.next(Se?Se(ut,gt,Ze,Qe++):gt),()=>{Ne=null,Te()}))},()=>{ie=!0,Te()}))})}},5698:(Tt,We,F)=>{F.d(We,{q:()=>Ee});var p=F(515),q=F(4482),Q=F(5403);function Ee(ye){return ye<=0?()=>p.E:(0,q.e)((Se,Oe)=>{let Pe=0;Se.subscribe((0,Q.x)(Oe,Ne=>{++Pe<=ye&&(Oe.next(Ne),ye<=Pe&&Oe.complete())}))})}},2035:(Tt,We,F)=>{F.d(We,{h:()=>Ee});var p=F(515),q=F(4482),Q=F(5403);function Ee(ye){return ye<=0?()=>p.E:(0,q.e)((Se,Oe)=>{let Pe=[];Se.subscribe((0,Q.x)(Oe,Ne=>{Pe.push(Ne),ye<Pe.length&&Pe.shift()},()=>{for(const Ne of Pe)Oe.next(Ne);Oe.complete()},void 0,()=>{Pe=null}))})}},8505:(Tt,We,F)=>{F.d(We,{b:()=>ye});var p=F(576),q=F(4482),Q=F(5403),Ee=F(4671);function ye(Se,Oe,Pe){const Ne=(0,p.m)(Se)||Oe||Pe?{next:Se,error:Oe,complete:Pe}:Se;return Ne?(0,q.e)((ce,ie)=>{var Te;null===(Te=Ne.subscribe)||void 0===Te||Te.call(Ne);let ut=!0;ce.subscribe((0,Q.x)(ie,Qe=>{var Ze;null===(Ze=Ne.next)||void 0===Ze||Ze.call(Ne,Qe),ie.next(Qe)},()=>{var Qe;ut=!1,null===(Qe=Ne.complete)||void 0===Qe||Qe.call(Ne),ie.complete()},Qe=>{var Ze;ut=!1,null===(Ze=Ne.error)||void 0===Ze||Ze.call(Ne,Qe),ie.error(Qe)},()=>{var Qe,Ze;ut&&(null===(Qe=Ne.unsubscribe)||void 0===Qe||Qe.call(Ne)),null===(Ze=Ne.finalize)||void 0===Ze||Ze.call(Ne)}))}):Ee.y}},8068:(Tt,We,F)=>{F.d(We,{T:()=>Ee});var p=F(6805),q=F(4482),Q=F(5403);function Ee(Se=ye){return(0,q.e)((Oe,Pe)=>{let Ne=!1;Oe.subscribe((0,Q.x)(Pe,ce=>{Ne=!0,Pe.next(ce)},()=>Ne?Pe.complete():Pe.error(Se())))})}function ye(){return new p.K}},4408:(Tt,We,F)=>{F.d(We,{o:()=>ye});var p=F(727);class q extends p.w0{constructor(Oe,Pe){super()}schedule(Oe,Pe=0){return this}}const Q={setInterval(Se,Oe,...Pe){const{delegate:Ne}=Q;return(null==Ne?void 0:Ne.setInterval)?Ne.setInterval(Se,Oe,...Pe):setInterval(Se,Oe,...Pe)},clearInterval(Se){const{delegate:Oe}=Q;return((null==Oe?void 0:Oe.clearInterval)||clearInterval)(Se)},delegate:void 0};var Ee=F(8737);class ye extends q{constructor(Oe,Pe){super(Oe,Pe),this.scheduler=Oe,this.work=Pe,this.pending=!1}schedule(Oe,Pe=0){if(this.closed)return this;this.state=Oe;const Ne=this.id,ce=this.scheduler;return null!=Ne&&(this.id=this.recycleAsyncId(ce,Ne,Pe)),this.pending=!0,this.delay=Pe,this.id=this.id||this.requestAsyncId(ce,this.id,Pe),this}requestAsyncId(Oe,Pe,Ne=0){return Q.setInterval(Oe.flush.bind(Oe,this),Ne)}recycleAsyncId(Oe,Pe,Ne=0){if(null!=Ne&&this.delay===Ne&&!1===this.pending)return Pe;Q.clearInterval(Pe)}execute(Oe,Pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ne=this._execute(Oe,Pe);if(Ne)return Ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,Pe){let ce,Ne=!1;try{this.work(Oe)}catch(ie){Ne=!0,ce=ie||new Error("Scheduled action threw falsy error")}if(Ne)return this.unsubscribe(),ce}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:Pe}=this,{actions:Ne}=Pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ee.P)(Ne,this),null!=Oe&&(this.id=this.recycleAsyncId(Pe,Oe,null)),this.delay=null,super.unsubscribe()}}}},9490:(Tt,We,F)=>{F.d(We,{v:()=>Q});var p=F(6063);class q{constructor(ye,Se=q.now){this.schedulerActionCtor=ye,this.now=Se}schedule(ye,Se=0,Oe){return new this.schedulerActionCtor(this,ye).schedule(Oe,Se)}}q.now=p.l.now;class Q extends q{constructor(ye,Se=q.now){super(ye,Se),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ye){const{actions:Se}=this;if(this._active)return void Se.push(ye);let Oe;this._active=!0;do{if(Oe=ye.execute(ye.state,ye.delay))break}while(ye=Se.shift());if(this._active=!1,Oe){for(;ye=Se.shift();)ye.unsubscribe();throw Oe}}}},4986:(Tt,We,F)=>{F.d(We,{P:()=>Ee,z:()=>Q});var p=F(4408);const Q=new(F(9490).v)(p.o),Ee=Q},6063:(Tt,We,F)=>{F.d(We,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Tt,We,F)=>{F.d(We,{z:()=>p});const p={setTimeout(q,Q,...Ee){const{delegate:ye}=p;return(null==ye?void 0:ye.setTimeout)?ye.setTimeout(q,Q,...Ee):setTimeout(q,Q,...Ee)},clearTimeout(q){const{delegate:Q}=p;return((null==Q?void 0:Q.clearTimeout)||clearTimeout)(q)},delegate:void 0}},2202:(Tt,We,F)=>{F.d(We,{h:()=>q});const q=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Tt,We,F)=>{F.d(We,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Tt,We,F)=>{F.d(We,{K:()=>q});const q=(0,F(3888).d)(Q=>function(){Q(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Tt,We,F)=>{F.d(We,{_6:()=>Se,jO:()=>Ee,yG:()=>ye});var p=F(576),q=F(3532);function Q(Oe){return Oe[Oe.length-1]}function Ee(Oe){return(0,p.m)(Q(Oe))?Oe.pop():void 0}function ye(Oe){return(0,q.K)(Q(Oe))?Oe.pop():void 0}function Se(Oe,Pe){return"number"==typeof Q(Oe)?Oe.pop():Pe}},4742:(Tt,We,F)=>{F.d(We,{D:()=>ye});const{isArray:p}=Array,{getPrototypeOf:q,prototype:Q,keys:Ee}=Object;function ye(Oe){if(1===Oe.length){const Pe=Oe[0];if(p(Pe))return{args:Pe,keys:null};if(function Se(Oe){return Oe&&"object"==typeof Oe&&q(Oe)===Q}(Pe)){const Ne=Ee(Pe);return{args:Ne.map(ce=>Pe[ce]),keys:Ne}}}return{args:Oe,keys:null}}},8737:(Tt,We,F)=>{function p(q,Q){if(q){const Ee=q.indexOf(Q);0<=Ee&&q.splice(Ee,1)}}F.d(We,{P:()=>p})},3888:(Tt,We,F)=>{function p(q){const Ee=q(ye=>{Error.call(ye),ye.stack=(new Error).stack});return Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee,Ee}F.d(We,{d:()=>p})},1810:(Tt,We,F)=>{function p(q,Q){return q.reduce((Ee,ye,Se)=>(Ee[ye]=Q[Se],Ee),{})}F.d(We,{n:()=>p})},2806:(Tt,We,F)=>{F.d(We,{O:()=>Ee,x:()=>Q});var p=F(2416);let q=null;function Q(ye){if(p.v.useDeprecatedSynchronousErrorHandling){const Se=!q;if(Se&&(q={errorThrown:!1,error:null}),ye(),Se){const{errorThrown:Oe,error:Pe}=q;if(q=null,Oe)throw Pe}}else ye()}function Ee(ye){p.v.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=ye)}},9672:(Tt,We,F)=>{function p(q,Q,Ee,ye=0,Se=!1){const Oe=Q.schedule(function(){Ee(),Se?q.add(this.schedule(null,ye)):this.unsubscribe()},ye);if(q.add(Oe),!Se)return Oe}F.d(We,{f:()=>p})},4671:(Tt,We,F)=>{function p(q){return q}F.d(We,{y:()=>p})},1144:(Tt,We,F)=>{F.d(We,{z:()=>p});const p=q=>q&&"number"==typeof q.length&&"function"!=typeof q},2206:(Tt,We,F)=>{F.d(We,{D:()=>q});var p=F(576);function q(Q){return Symbol.asyncIterator&&(0,p.m)(null==Q?void 0:Q[Symbol.asyncIterator])}},576:(Tt,We,F)=>{function p(q){return"function"==typeof q}F.d(We,{m:()=>p})},3670:(Tt,We,F)=>{F.d(We,{c:()=>Q});var p=F(8822),q=F(576);function Q(Ee){return(0,q.m)(Ee[p.L])}},6495:(Tt,We,F)=>{F.d(We,{T:()=>Q});var p=F(2202),q=F(576);function Q(Ee){return(0,q.m)(null==Ee?void 0:Ee[p.h])}},8239:(Tt,We,F)=>{F.d(We,{t:()=>q});var p=F(576);function q(Q){return(0,p.m)(null==Q?void 0:Q.then)}},3260:(Tt,We,F)=>{F.d(We,{L:()=>Ee,Q:()=>Q});var p=F(655),q=F(576);function Q(ye){return(0,p.FC)(this,arguments,function*(){const Oe=ye.getReader();try{for(;;){const{value:Pe,done:Ne}=yield(0,p.qq)(Oe.read());if(Ne)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Pe)}}finally{Oe.releaseLock()}})}function Ee(ye){return(0,q.m)(null==ye?void 0:ye.getReader)}},3532:(Tt,We,F)=>{F.d(We,{K:()=>q});var p=F(576);function q(Q){return Q&&(0,p.m)(Q.schedule)}},4482:(Tt,We,F)=>{F.d(We,{A:()=>q,e:()=>Q});var p=F(576);function q(Ee){return(0,p.m)(null==Ee?void 0:Ee.lift)}function Q(Ee){return ye=>{if(q(ye))return ye.lift(function(Se){try{return Ee(Se,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Tt,We,F)=>{F.d(We,{Z:()=>Ee});var p=F(4004);const{isArray:q}=Array;function Ee(ye){return(0,p.U)(Se=>function Q(ye,Se){return q(Se)?ye(...Se):ye(Se)}(ye,Se))}},5032:(Tt,We,F)=>{function p(){}F.d(We,{Z:()=>p})},9635:(Tt,We,F)=>{F.d(We,{U:()=>Q,z:()=>q});var p=F(4671);function q(...Ee){return Q(Ee)}function Q(Ee){return 0===Ee.length?p.y:1===Ee.length?Ee[0]:function(Se){return Ee.reduce((Oe,Pe)=>Pe(Oe),Se)}}},7849:(Tt,We,F)=>{F.d(We,{h:()=>Q});var p=F(2416),q=F(3410);function Q(Ee){q.z.setTimeout(()=>{const{onUnhandledError:ye}=p.v;if(!ye)throw Ee;ye(Ee)})}},4532:(Tt,We,F)=>{function p(q){return new TypeError(`You provided ${null!==q&&"object"==typeof q?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(We,{z:()=>p})},655:(Tt,We,F)=>{function Ee(we,X){var Ce={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&X.indexOf(pe)<0&&(Ce[pe]=we[pe]);if(null!=we&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(pe=Object.getOwnPropertySymbols(we);Ge<pe.length;Ge++)X.indexOf(pe[Ge])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Ge])&&(Ce[pe[Ge]]=we[pe[Ge]])}return Ce}function ye(we,X,Ce,pe){var Vt,Ge=arguments.length,Ue=Ge<3?X:null===pe?pe=Object.getOwnPropertyDescriptor(X,Ce):pe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ue=Reflect.decorate(we,X,Ce,pe);else for(var wt=we.length-1;wt>=0;wt--)(Vt=we[wt])&&(Ue=(Ge<3?Vt(Ue):Ge>3?Vt(X,Ce,Ue):Vt(X,Ce))||Ue);return Ge>3&&Ue&&Object.defineProperty(X,Ce,Ue),Ue}function Pe(we,X,Ce,pe){return new(Ce||(Ce=Promise))(function(Ue,Vt){function wt(Dt){try{mt(pe.next(Dt))}catch($t){Vt($t)}}function Wt(Dt){try{mt(pe.throw(Dt))}catch($t){Vt($t)}}function mt(Dt){Dt.done?Ue(Dt.value):function Ge(Ue){return Ue instanceof Ce?Ue:new Ce(function(Vt){Vt(Ue)})}(Dt.value).then(wt,Wt)}mt((pe=pe.apply(we,X||[])).next())})}function ze(we){return this instanceof ze?(this.v=we,this):new ze(we)}function Le(we,X,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,pe=Ce.apply(we,X||[]),Ue=[];return Ge={},Vt("next"),Vt("throw"),Vt("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function Vt(It){pe[It]&&(Ge[It]=function(xt){return new Promise(function(lt,ln){Ue.push([It,xt,lt,ln])>1||wt(It,xt)})})}function wt(It,xt){try{!function Wt(It){It.value instanceof ze?Promise.resolve(It.value.v).then(mt,Dt):$t(Ue[0][2],It)}(pe[It](xt))}catch(lt){$t(Ue[0][3],lt)}}function mt(It){wt("next",It)}function Dt(It){wt("throw",It)}function $t(It,xt){It(xt),Ue.shift(),Ue.length&&wt(Ue[0][0],Ue[0][1])}}function j(we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,X=we[Symbol.asyncIterator];return X?X.call(we):(we=function Te(we){var X="function"==typeof Symbol&&Symbol.iterator,Ce=X&&we[X],pe=0;if(Ce)return Ce.call(we);if(we&&"number"==typeof we.length)return{next:function(){return we&&pe>=we.length&&(we=void 0),{value:we&&we[pe++],done:!we}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(we),Ce={},pe("next"),pe("throw"),pe("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function pe(Ue){Ce[Ue]=we[Ue]&&function(Vt){return new Promise(function(wt,Wt){!function Ge(Ue,Vt,wt,Wt){Promise.resolve(Wt).then(function(mt){Ue({value:mt,done:wt})},Vt)}(wt,Wt,(Vt=we[Ue](Vt)).done,Vt.value)})}}}F.d(We,{FC:()=>Le,KL:()=>j,_T:()=>Ee,gn:()=>ye,mG:()=>Pe,qq:()=>ze})},9808:(Tt,We,F)=>{F.d(We,{Do:()=>U,EM:()=>bs,HT:()=>ye,JF:()=>Rn,K0:()=>Oe,Mx:()=>Nr,O5:()=>xn,Ov:()=>Be,PM:()=>qr,S$:()=>ze,Ts:()=>os,V_:()=>ce,Ye:()=>Y,Zx:()=>Jr,b0:()=>j,bD:()=>Yi,ez:()=>xs,lw:()=>Pe,mk:()=>hi,mr:()=>Et,q:()=>Q,sg:()=>sr,w_:()=>Se});var p=F(5e3);let q=null;function Q(){return q}function ye(O){q||(q=O)}class Se{}const Oe=new p.OlP("DocumentToken");let Pe=(()=>{class O{historyGo(x){throw new Error("Not implemented")}}return O.\u0275fac=function(x){return new(x||O)},O.\u0275prov=p.Yz7({token:O,factory:function(){return function Ne(){return(0,p.LFG)(ie)}()},providedIn:"platform"}),O})();const ce=new p.OlP("Location Initialized");let ie=(()=>{class O extends Pe{constructor(x){super(),this._doc=x,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Q().getBaseHref(this._doc)}onPopState(x){const Z=Q().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("popstate",x,!1),()=>Z.removeEventListener("popstate",x)}onHashChange(x){const Z=Q().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("hashchange",x,!1),()=>Z.removeEventListener("hashchange",x)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(x){this.location.pathname=x}pushState(x,Z,me){Te()?this._history.pushState(x,Z,me):this.location.hash=me}replaceState(x,Z,me){Te()?this._history.replaceState(x,Z,me):this.location.hash=me}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return O.\u0275fac=function(x){return new(x||O)(p.LFG(Oe))},O.\u0275prov=p.Yz7({token:O,factory:function(){return function ut(){return new ie((0,p.LFG)(Oe))}()},providedIn:"platform"}),O})();function Te(){return!!window.history.pushState}function Qe(O,H){if(0==O.length)return H;if(0==H.length)return O;let x=0;return O.endsWith("/")&&x++,H.startsWith("/")&&x++,2==x?O+H.substring(1):1==x?O+H:O+"/"+H}function Ze(O){const H=O.match(/#|\?|$/),x=H&&H.index||O.length;return O.slice(0,x-("/"===O[x-1]?1:0))+O.slice(x)}function gt(O){return O&&"?"!==O[0]?"?"+O:O}let ze=(()=>{class O{historyGo(x){throw new Error("Not implemented")}}return O.\u0275fac=function(x){return new(x||O)},O.\u0275prov=p.Yz7({token:O,factory:function(){return function Le(O){const H=(0,p.LFG)(Oe).location;return new j((0,p.LFG)(Pe),H&&H.origin||"")}()},providedIn:"root"}),O})();const Et=new p.OlP("appBaseHref");let j=(()=>{class O extends ze{constructor(x,Z){if(super(),this._platformLocation=x,this._removeListenerFns=[],null==Z&&(Z=this._platformLocation.getBaseHrefFromDOM()),null==Z)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Z}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return Qe(this._baseHref,x)}path(x=!1){const Z=this._platformLocation.pathname+gt(this._platformLocation.search),me=this._platformLocation.hash;return me&&x?`${Z}${me}`:Z}pushState(x,Z,me,Je){const et=this.prepareExternalUrl(me+gt(Je));this._platformLocation.pushState(x,Z,et)}replaceState(x,Z,me,Je){const et=this.prepareExternalUrl(me+gt(Je));this._platformLocation.replaceState(x,Z,et)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(x=0){var Z,me;null===(me=(Z=this._platformLocation).historyGo)||void 0===me||me.call(Z,x)}}return O.\u0275fac=function(x){return new(x||O)(p.LFG(Pe),p.LFG(Et,8))},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac}),O})(),U=(()=>{class O extends ze{constructor(x,Z){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=Z&&(this._baseHref=Z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let Z=this._platformLocation.hash;return null==Z&&(Z="#"),Z.length>0?Z.substring(1):Z}prepareExternalUrl(x){const Z=Qe(this._baseHref,x);return Z.length>0?"#"+Z:Z}pushState(x,Z,me,Je){let et=this.prepareExternalUrl(me+gt(Je));0==et.length&&(et=this._platformLocation.pathname),this._platformLocation.pushState(x,Z,et)}replaceState(x,Z,me,Je){let et=this.prepareExternalUrl(me+gt(Je));0==et.length&&(et=this._platformLocation.pathname),this._platformLocation.replaceState(x,Z,et)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(x=0){var Z,me;null===(me=(Z=this._platformLocation).historyGo)||void 0===me||me.call(Z,x)}}return O.\u0275fac=function(x){return new(x||O)(p.LFG(Pe),p.LFG(Et,8))},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac}),O})(),Y=(()=>{class O{constructor(x,Z){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=x;const me=this._platformStrategy.getBaseHref();this._platformLocation=Z,this._baseHref=Ze($e(me)),this._platformStrategy.onPopState(Je=>{this._subject.emit({url:this.path(!0),pop:!0,state:Je.state,type:Je.type})})}path(x=!1){return this.normalize(this._platformStrategy.path(x))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(x,Z=""){return this.path()==this.normalize(x+gt(Z))}normalize(x){return O.stripTrailingSlash(function Ve(O,H){return O&&H.startsWith(O)?H.substring(O.length):H}(this._baseHref,$e(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._platformStrategy.prepareExternalUrl(x)}go(x,Z="",me=null){this._platformStrategy.pushState(me,"",x,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+gt(Z)),me)}replaceState(x,Z="",me=null){this._platformStrategy.replaceState(me,"",x,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+gt(Z)),me)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(x=0){var Z,me;null===(me=(Z=this._platformStrategy).historyGo)||void 0===me||me.call(Z,x)}onUrlChange(x){this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Z=>{this._notifyUrlChangeListeners(Z.url,Z.state)}))}_notifyUrlChangeListeners(x="",Z){this._urlChangeListeners.forEach(me=>me(x,Z))}subscribe(x,Z,me){return this._subject.subscribe({next:x,error:Z,complete:me})}}return O.normalizeQueryParams=gt,O.joinWithSlash=Qe,O.stripTrailingSlash=Ze,O.\u0275fac=function(x){return new(x||O)(p.LFG(ze),p.LFG(Pe))},O.\u0275prov=p.Yz7({token:O,factory:function(){return function ve(){return new Y((0,p.LFG)(ze),(0,p.LFG)(Pe))}()},providedIn:"root"}),O})();function $e(O){return O.replace(/\/index.html$/,"")}var we=(()=>((we=we||{})[we.Decimal=0]="Decimal",we[we.Percent=1]="Percent",we[we.Currency=2]="Currency",we[we.Scientific=3]="Scientific",we))(),Ue=(()=>((Ue=Ue||{})[Ue.Decimal=0]="Decimal",Ue[Ue.Group=1]="Group",Ue[Ue.List=2]="List",Ue[Ue.PercentSign=3]="PercentSign",Ue[Ue.PlusSign=4]="PlusSign",Ue[Ue.MinusSign=5]="MinusSign",Ue[Ue.Exponential=6]="Exponential",Ue[Ue.SuperscriptingExponent=7]="SuperscriptingExponent",Ue[Ue.PerMille=8]="PerMille",Ue[Ue.Infinity=9]="Infinity",Ue[Ue.NaN=10]="NaN",Ue[Ue.TimeSeparator=11]="TimeSeparator",Ue[Ue.CurrencyDecimal=12]="CurrencyDecimal",Ue[Ue.CurrencyGroup=13]="CurrencyGroup",Ue))();function nn(O,H){const x=(0,p.cg1)(O),Z=x[p.wAp.NumberSymbols][H];if(void 0===Z){if(H===Ue.CurrencyDecimal)return x[p.wAp.NumberSymbols][Ue.Decimal];if(H===Ue.CurrencyGroup)return x[p.wAp.NumberSymbols][Ue.Group]}return Z}const Xn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ci(O){const H=parseInt(O);if(isNaN(H))throw new Error("Invalid integer literal when parsing "+O);return H}function Nr(O,H){H=encodeURIComponent(H);for(const x of O.split(";")){const Z=x.indexOf("="),[me,Je]=-1==Z?[x,""]:[x.slice(0,Z),x.slice(Z+1)];if(me.trim()===H)return decodeURIComponent(Je)}return null}let hi=(()=>{class O{constructor(x,Z,me,Je){this._iterableDiffers=x,this._keyValueDiffers=Z,this._ngEl=me,this._renderer=Je,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(x){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof x?x.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(x){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof x?x.split(/\s+/):x,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const x=this._iterableDiffer.diff(this._rawClass);x&&this._applyIterableChanges(x)}else if(this._keyValueDiffer){const x=this._keyValueDiffer.diff(this._rawClass);x&&this._applyKeyValueChanges(x)}}_applyKeyValueChanges(x){x.forEachAddedItem(Z=>this._toggleClass(Z.key,Z.currentValue)),x.forEachChangedItem(Z=>this._toggleClass(Z.key,Z.currentValue)),x.forEachRemovedItem(Z=>{Z.previousValue&&this._toggleClass(Z.key,!1)})}_applyIterableChanges(x){x.forEachAddedItem(Z=>{if("string"!=typeof Z.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(Z.item)}`);this._toggleClass(Z.item,!0)}),x.forEachRemovedItem(Z=>this._toggleClass(Z.item,!1))}_applyClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(Z=>this._toggleClass(Z,!0)):Object.keys(x).forEach(Z=>this._toggleClass(Z,!!x[Z])))}_removeClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(Z=>this._toggleClass(Z,!1)):Object.keys(x).forEach(Z=>this._toggleClass(Z,!1)))}_toggleClass(x,Z){(x=x.trim())&&x.split(/\s+/g).forEach(me=>{Z?this._renderer.addClass(this._ngEl.nativeElement,me):this._renderer.removeClass(this._ngEl.nativeElement,me)})}}return O.\u0275fac=function(x){return new(x||O)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},O.\u0275dir=p.lG2({type:O,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),O})();class Cr{constructor(H,x,Z,me){this.$implicit=H,this.ngForOf=x,this.index=Z,this.count=me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sr=(()=>{class O{constructor(x,Z,me){this._viewContainer=x,this._template=Z,this._differs=me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const Z=this._viewContainer;x.forEachOperation((me,Je,et)=>{if(null==me.previousIndex)Z.createEmbeddedView(this._template,new Cr(me.item,this._ngForOf,-1,-1),null===et?void 0:et);else if(null==et)Z.remove(null===Je?void 0:Je);else if(null!==Je){const bt=Z.get(Je);Z.move(bt,et),Fr(bt,me)}});for(let me=0,Je=Z.length;me<Je;me++){const bt=Z.get(me).context;bt.index=me,bt.count=Je,bt.ngForOf=this._ngForOf}x.forEachIdentityChange(me=>{Fr(Z.get(me.currentIndex),me)})}static ngTemplateContextGuard(x,Z){return!0}}return O.\u0275fac=function(x){return new(x||O)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},O.\u0275dir=p.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),O})();function Fr(O,H){O.context.$implicit=H.item}let xn=(()=>{class O{constructor(x,Z){this._viewContainer=x,this._context=new Tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Z}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){Bi("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){Bi("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,Z){return!0}}return O.\u0275fac=function(x){return new(x||O)(p.Y36(p.s_b),p.Y36(p.Rgc))},O.\u0275dir=p.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),O})();class Tn{constructor(){this.$implicit=null,this.ngIf=null}}function Bi(O,H){if(H&&!H.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,p.AaK)(H)}'.`)}function xe(O,H){return new p.vHH(2100,"")}class st{createSubscription(H,x){return H.subscribe({next:x,error:Z=>{throw Z}})}dispose(H){H.unsubscribe()}onDestroy(H){H.unsubscribe()}}class en{createSubscription(H,x){return H.then(x,Z=>{throw Z})}dispose(H){}onDestroy(H){}}const de=new en,_e=new st;let Be=(()=>{class O{constructor(x){this._ref=x,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(x){return this._obj?x!==this._obj?(this._dispose(),this.transform(x)):this._latestValue:(x&&this._subscribe(x),this._latestValue)}_subscribe(x){this._obj=x,this._strategy=this._selectStrategy(x),this._subscription=this._strategy.createSubscription(x,Z=>this._updateLatestValue(x,Z))}_selectStrategy(x){if((0,p.QGY)(x))return de;if((0,p.F4k)(x))return _e;throw xe()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(x,Z){x===this._obj&&(this._latestValue=Z,this._ref.markForCheck())}}return O.\u0275fac=function(x){return new(x||O)(p.Y36(p.sBO,16))},O.\u0275pipe=p.Yjl({name:"async",type:O,pure:!1}),O})(),os=(()=>{class O{transform(x){return JSON.stringify(x,null,2)}}return O.\u0275fac=function(x){return new(x||O)},O.\u0275pipe=p.Yjl({name:"json",type:O,pure:!1}),O})(),Jr=(()=>{class O{constructor(x){this._locale=x}transform(x,Z,me){if(!function Fi(O){return!(null==O||""===O||O!=O)}(x))return null;me=me||this._locale;try{return function ct(O,H,x){return function Ii(O,H,x,Z,me,Je,et=!1){let bt="",Wn=!1;if(isFinite(O)){let jn=function li(O){let Z,me,Je,et,bt,H=Math.abs(O)+"",x=0;for((me=H.indexOf("."))>-1&&(H=H.replace(".","")),(Je=H.search(/e/i))>0?(me<0&&(me=Je),me+=+H.slice(Je+1),H=H.substring(0,Je)):me<0&&(me=H.length),Je=0;"0"===H.charAt(Je);Je++);if(Je===(bt=H.length))Z=[0],me=1;else{for(bt--;"0"===H.charAt(bt);)bt--;for(me-=Je,Z=[],et=0;Je<=bt;Je++,et++)Z[et]=Number(H.charAt(Je))}return me>22&&(Z=Z.splice(0,21),x=me-1,me=1),{digits:Z,exponent:x,integerLen:me}}(O);et&&(jn=function Jn(O){if(0===O.digits[0])return O;const H=O.digits.length-O.integerLen;return O.exponent?O.exponent+=2:(0===H?O.digits.push(0,0):1===H&&O.digits.push(0),O.integerLen+=2),O}(jn));let vn=H.minInt,En=H.minFrac,vr=H.maxFrac;if(Je){const ji=Je.match(Xn);if(null===ji)throw new Error(`${Je} is not a valid digit info`);const $i=ji[1],Ts=ji[3],Os=ji[5];null!=$i&&(vn=ci($i)),null!=Ts&&(En=ci(Ts)),null!=Os?vr=ci(Os):null!=Ts&&En>vr&&(vr=En)}!function er(O,H,x){if(H>x)throw new Error(`The minimum number of digits after fraction (${H}) is higher than the maximum (${x}).`);let Z=O.digits,me=Z.length-O.integerLen;const Je=Math.min(Math.max(H,me),x);let et=Je+O.integerLen,bt=Z[et];if(et>0){Z.splice(Math.max(O.integerLen,et));for(let En=et;En<Z.length;En++)Z[En]=0}else{me=Math.max(0,me),O.integerLen=1,Z.length=Math.max(1,et=Je+1),Z[0]=0;for(let En=1;En<et;En++)Z[En]=0}if(bt>=5)if(et-1<0){for(let En=0;En>et;En--)Z.unshift(0),O.integerLen++;Z.unshift(1),O.integerLen++}else Z[et-1]++;for(;me<Math.max(0,Je);me++)Z.push(0);let Wn=0!==Je;const jn=H+O.integerLen,vn=Z.reduceRight(function(En,vr,Qn,cr){return cr[Qn]=(vr+=En)<10?vr:vr-10,Wn&&(0===cr[Qn]&&Qn>=jn?cr.pop():Wn=!1),vr>=10?1:0},0);vn&&(Z.unshift(vn),O.integerLen++)}(jn,En,vr);let Qn=jn.digits,cr=jn.integerLen;const gs=jn.exponent;let ni=[];for(Wn=Qn.every(ji=>!ji);cr<vn;cr++)Qn.unshift(0);for(;cr<0;cr++)Qn.unshift(0);cr>0?ni=Qn.splice(cr,Qn.length):(ni=Qn,Qn=[0]);const un=[];for(Qn.length>=H.lgSize&&un.unshift(Qn.splice(-H.lgSize,Qn.length).join(""));Qn.length>H.gSize;)un.unshift(Qn.splice(-H.gSize,Qn.length).join(""));Qn.length&&un.unshift(Qn.join("")),bt=un.join(nn(x,Z)),ni.length&&(bt+=nn(x,me)+ni.join("")),gs&&(bt+=nn(x,Ue.Exponential)+"+"+gs)}else bt=nn(x,Ue.Infinity);return bt=O<0&&!Wn?H.negPre+bt+H.negSuf:H.posPre+bt+H.posSuf,bt}(O,function cn(O,H="-"){const x={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Z=O.split(";"),me=Z[0],Je=Z[1],et=-1!==me.indexOf(".")?me.split("."):[me.substring(0,me.lastIndexOf("0")+1),me.substring(me.lastIndexOf("0")+1)],bt=et[0],Wn=et[1]||"";x.posPre=bt.substr(0,bt.indexOf("#"));for(let vn=0;vn<Wn.length;vn++){const En=Wn.charAt(vn);"0"===En?x.minFrac=x.maxFrac=vn+1:"#"===En?x.maxFrac=vn+1:x.posSuf+=En}const jn=bt.split(",");if(x.gSize=jn[1]?jn[1].length:0,x.lgSize=jn[2]||jn[1]?(jn[2]||jn[1]).length:0,Je){const vn=me.length-x.posPre.length-x.posSuf.length,En=Je.indexOf("#");x.negPre=Je.substr(0,En).replace(/'/g,""),x.negSuf=Je.substr(En+vn).replace(/'/g,"")}else x.negPre=H+x.posPre,x.negSuf=x.posSuf;return x}(function Hn(O,H){return(0,p.cg1)(O)[p.wAp.NumberFormats][H]}(H,we.Percent),nn(H,Ue.MinusSign)),H,Ue.Group,Ue.Decimal,x,!0).replace(new RegExp("%","g"),nn(H,Ue.PercentSign))}(function ei(O){if("string"==typeof O&&!isNaN(Number(O)-parseFloat(O)))return Number(O);if("number"!=typeof O)throw new Error(`${O} is not a number`);return O}(x),me,Z)}catch(Je){throw xe()}}}return O.\u0275fac=function(x){return new(x||O)(p.Y36(p.soG,16))},O.\u0275pipe=p.Yjl({name:"percent",type:O,pure:!0}),O})();let xs=(()=>{class O{}return O.\u0275fac=function(x){return new(x||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({}),O})();const Yi="browser";function qr(O){return"server"===O}let bs=(()=>{class O{}return O.\u0275prov=(0,p.Yz7)({token:O,providedIn:"root",factory:()=>new Xi((0,p.LFG)(Oe),window)}),O})();class Xi{constructor(H,x){this.document=H,this.window=x,this.offset=()=>[0,0]}setOffset(H){this.offset=Array.isArray(H)?()=>H:H}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(H){this.supportsScrolling()&&this.window.scrollTo(H[0],H[1])}scrollToAnchor(H){if(!this.supportsScrolling())return;const x=function Ji(O,H){const x=O.getElementById(H)||O.getElementsByName(H)[0];if(x)return x;if("function"==typeof O.createTreeWalker&&O.body&&(O.body.createShadowRoot||O.body.attachShadow)){const Z=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let me=Z.currentNode;for(;me;){const Je=me.shadowRoot;if(Je){const et=Je.getElementById(H)||Je.querySelector(`[name="${H}"]`);if(et)return et}me=Z.nextNode()}}return null}(this.document,H);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(H){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=H)}}scrollToElement(H){const x=H.getBoundingClientRect(),Z=x.left+this.window.pageXOffset,me=x.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(Z-Je[0],me-Je[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const H=ti(this.window.history)||ti(Object.getPrototypeOf(this.window.history));return!(!H||!H.writable&&!H.set)}catch(H){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(H){return!1}}}function ti(O){return Object.getOwnPropertyDescriptor(O,"scrollRestoration")}class Rn{}},5e3:(Tt,We,F)=>{F.d(We,{$8M:()=>Eo,$Z:()=>Vm,AFp:()=>hE,ALo:()=>N0,AaK:()=>Pe,BQk:()=>lf,CHM:()=>K,CRH:()=>G0,CZH:()=>yv,CqO:()=>jm,DdM:()=>A0,EJc:()=>vI,EpF:()=>Bm,F$t:()=>$m,F4k:()=>C_,FYo:()=>_0,FiY:()=>lo,G48:()=>BI,GfV:()=>v0,Gpc:()=>ie,Hsn:()=>Xp,JOm:()=>tt,LFG:()=>rn,LSH:()=>ri,Lbi:()=>gE,MAs:()=>tf,NdJ:()=>Yp,O4$:()=>Oo,OlP:()=>qt,Oqu:()=>pf,PXZ:()=>kI,Q6J:()=>Kp,QGY:()=>Zp,Qsj:()=>yw,R0b:()=>vu,RDi:()=>ti,Rgc:()=>Ag,SBq:()=>Dg,Sil:()=>wI,Suo:()=>H0,TTD:()=>Fi,TgZ:()=>qp,VKq:()=>S0,VLi:()=>xI,W1O:()=>q0,WLB:()=>M0,X6Q:()=>UI,XFs:()=>Ut,Xpm:()=>Kt,Y36:()=>Kl,YKP:()=>D0,YNc:()=>Rm,Yjl:()=>Rr,Yz7:()=>lt,ZZ4:()=>xv,_Bn:()=>g0,_UZ:()=>uf,_Vd:()=>Ey,_c5:()=>nD,_uU:()=>Xm,aQg:()=>Rv,c2e:()=>yE,cJS:()=>kt,cg1:()=>yf,dDg:()=>EE,deG:()=>Zc,dqk:()=>fn,eFA:()=>DE,ekj:()=>ff,g9A:()=>pE,h0i:()=>Cf,hGG:()=>rD,hij:()=>Ia,iGM:()=>$0,ifc:()=>gn,ip1:()=>dE,kL8:()=>Hc,kcU:()=>wu,lG2:()=>Cn,lcZ:()=>F0,n5z:()=>Ra,oAB:()=>Fe,oxw:()=>Pd,q4F:()=>E0,qLn:()=>oi,qOj:()=>Ap,qZA:()=>qi,sBO:()=>jI,sIi:()=>Gl,s_b:()=>Dy,soG:()=>vv,tBr:()=>Es,tb:()=>mE,tp0:()=>Io,uIk:()=>Jh,vHH:()=>Ze,vpe:()=>ol,wAp:()=>An,xp6:()=>Wf,ynx:()=>kd,z2F:()=>Cv,zSh:()=>pp,zs3:()=>ma});var p=F(7579),q=F(727),Q=F(9751),Ee=F(6451),ye=F(3099);function Se(n){for(let r in n)if(n[r]===Se)return r;throw Error("Could not find renamed property on target object.")}function Oe(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Pe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Pe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ne(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ce=Se({__forward_ref__:Se});function ie(n){return n.__forward_ref__=ie,n.toString=function(){return Pe(this())},n}function Te(n){return ut(n)?n():n}function ut(n){return"function"==typeof n&&n.hasOwnProperty(ce)&&n.__forward_ref__===ie}class Ze extends Error{constructor(r,s){super(function gt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function ze(n){return"string"==typeof n?n:null==n?"":String(n)}function Le(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ze(n)}function Y(n,r){const s=r?` in ${r}`:"";throw new Ze(-201,`No provider for ${Le(n)} found${s}`)}function mt(n,r){null==n&&function Dt(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function lt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function kt(n){return{providers:n.providers||[],imports:n.imports||[]}}function nn(n){return Hn(n,Er)||Hn(n,wr)}function Hn(n,r){return n.hasOwnProperty(r)?n[r]:null}function tr(n){return n&&(n.hasOwnProperty(Gn)||n.hasOwnProperty(Ln))?n[Gn]:null}const Er=Se({\u0275prov:Se}),Gn=Se({\u0275inj:Se}),wr=Se({ngInjectableDef:Se}),Ln=Se({ngInjectorDef:Se});var Ut=(()=>((Ut=Ut||{})[Ut.Default=0]="Default",Ut[Ut.Host=1]="Host",Ut[Ut.Self=2]="Self",Ut[Ut.SkipSelf=4]="SkipSelf",Ut[Ut.Optional=8]="Optional",Ut))();let Ht;function sn(n){const r=Ht;return Ht=n,r}function Pr(n,r,s){const a=nn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Ut.Optional?null:void 0!==r?r:void Y(Pe(n),"Injector")}function nr(n){return{toString:n}.toString()}var Ir=(()=>((Ir=Ir||{})[Ir.OnPush=0]="OnPush",Ir[Ir.Default=1]="Default",Ir))(),gn=(()=>{return(n=gn||(gn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",gn;var n})();const Ot="undefined"!=typeof globalThis&&globalThis,Zt="undefined"!=typeof window&&window,mr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,fn=Ot||"undefined"!=typeof global&&global||Zt||mr,xr={},Yt=[],kr=Se({\u0275cmp:Se}),Xt=Se({\u0275dir:Se}),Ct=Se({\u0275pipe:Se}),ot=Se({\u0275mod:Se}),Pt=Se({\u0275fac:Se}),Nt=Se({__NG_ELEMENT_ID__:Se});let pn=0;function Kt(n){return nr(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ir.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Yt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||gn.Emulated,id:"c",styles:n.styles||Yt,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.directives,h=n.features,_=n.pipes;return a.id+=pn++,a.inputs=pt(n.inputs,s),a.outputs=pt(n.outputs),h&&h.forEach(D=>D(a)),a.directiveDefs=l?()=>("function"==typeof l?l():l).map(ae):null,a.pipeDefs=_?()=>("function"==typeof _?_():_).map(Ie):null,a})}function ae(n){return yn(n)||function Xn(n){return n[Xt]||null}(n)}function Ie(n){return function Jt(n){return n[Ct]||null}(n)}const qe={};function Fe(n){return nr(()=>{const r={type:n.type,bootstrap:n.bootstrap||Yt,declarations:n.declarations||Yt,imports:n.imports||Yt,exports:n.exports||Yt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(qe[n.id]=n.type),r})}function pt(n,r){if(null==n)return xr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const Cn=Kt;function Rr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function yn(n){return n[kr]||null}function Nn(n,r){const s=n[ot]||null;if(!s&&!0===r)throw new Error(`Type ${Pe(n)} does not have '\u0275mod' property.`);return s}function br(n){return Array.isArray(n)&&"object"==typeof n[1]}function zr(n){return Array.isArray(n)&&!0===n[1]}function hs(n){return 0!=(8&n.flags)}function gr(n){return 2==(2&n.flags)}function fs(n){return 1==(1&n.flags)}function Kr(n){return null!==n.template}function he(n){return 0!=(512&n[2])}function Jr(n,r){return n.hasOwnProperty(Pt)?n[Pt]:null}class us{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Fi(){return ei}function ei(n){return n.type.prototype.ngOnChanges&&(n.setInput=Cs),Fs}function Fs(){const n=Yi(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===xr)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Cs(n,r,s,a){const l=Yi(n)||function Ti(n,r){return n[xs]=r}(n,{previous:xr,current:null}),h=l.current||(l.current={}),_=l.previous,D=this.declaredInputs[s],T=_[D];h[D]=new us(T&&T.currentValue,r,_===xr),n[a]=r}Fi.ngInherit=!0;const xs="__ngSimpleChanges__";function Yi(n){return n[xs]||null}let Xi;function ti(n){Xi=n}function Rn(n){return!!n.listen}const O={createRenderer:(n,r)=>function Ji(){return void 0!==Xi?Xi:"undefined"!=typeof document?document:void 0}()};function x(n){for(;Array.isArray(n);)n=n[0];return n}function Je(n,r){return x(r[n])}function et(n,r){return x(r[n.index])}function Wn(n,r){return n.data[r]}function jn(n,r){return n[r]}function vn(n,r){const s=r[n];return br(s)?s:s[0]}function En(n){return 4==(4&n[2])}function vr(n){return 128==(128&n[2])}function cr(n,r){return null==r?null:n[r]}function gs(n){n[18]=0}function ni(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const un={lFrame:Ws(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function N(){return un.bindingsEnabled}function m(){return un.lFrame.lView}function C(){return un.lFrame.tView}function K(n){return un.lFrame.contextLView=n,n[8]}function ee(){let n=De();for(;null!==n&&64===n.type;)n=n.parent;return n}function De(){return un.lFrame.currentTNode}function it(n,r){const s=un.lFrame;s.currentTNode=n,s.isParent=r}function Lt(){return un.lFrame.isParent}function St(){un.lFrame.isParent=!1}function Br(){return un.isInCheckNoChangesMode}function dr(n){un.isInCheckNoChangesMode=n}function zn(){const n=un.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function hr(){return un.lFrame.bindingIndex++}function si(n,r){const s=un.lFrame;s.bindingIndex=s.bindingRootIndex=n,ms(r)}function ms(n){un.lFrame.currentDirectiveIndex=n}function Ls(){return un.lFrame.currentQueryIndex}function po(n){un.lFrame.currentQueryIndex=n}function Ca(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Go(n,r,s){if(s&Ut.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&Ut.Host||(l=Ca(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=un.lFrame=Ka();return a.currentTNode=r,a.lView=n,!0}function go(n){const r=Ka(),s=n[1];un.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Ka(){const n=un.lFrame,r=null===n?null:n.child;return null===r?Ws(n):r}function Ws(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function ba(){const n=un.lFrame;return un.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ks=ba;function xo(){const n=ba();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Si(){return un.lFrame.selectedIndex}function Ro(n){un.lFrame.selectedIndex=n}function Zr(){const n=un.lFrame;return Wn(n.tView,n.selectedIndex)}function Oo(){un.lFrame.currentNamespace="svg"}function wu(){!function Wo(){un.lFrame.currentNamespace=null}()}function ys(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:D,ngAfterViewInit:T,ngAfterViewChecked:V,ngOnDestroy:G}=h;_&&(n.contentHooks||(n.contentHooks=[])).push(-s,_),D&&((n.contentHooks||(n.contentHooks=[])).push(s,D),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,D)),T&&(n.viewHooks||(n.viewHooks=[])).push(-s,T),V&&((n.viewHooks||(n.viewHooks=[])).push(s,V),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,V)),null!=G&&(n.destroyHooks||(n.destroyHooks=[])).push(s,G)}}function ko(n,r,s){zo(n,r,3,s)}function Mi(n,r,s,a){(3&n[2])===s&&zo(n,r,s,a)}function fi(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function zo(n,r,s,a){const h=null!=a?a:-1,_=r.length-1;let D=0;for(let T=void 0!==a?65535&n[18]:0;T<_;T++)if("number"==typeof r[T+1]){if(D=r[T],null!=a&&D>=a)break}else r[T]<0&&(n[18]+=65536),(D<h||-1==h)&&(Ta(n,s,r,T),n[18]=(4294901760&n[18])+T+2),T++}function Ta(n,r,s,a){const l=s[a]<0,h=s[a+1],D=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(D)}finally{}}}else try{h.call(D)}finally{}}class As{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function qs(n,r,s){const a=Rn(n);let l=0;for(;l<s.length;){const h=s[l];if("number"==typeof h){if(0!==h)break;l++;const _=s[l++],D=s[l++],T=s[l++];a?n.setAttribute(r,D,T,_):r.setAttributeNS(_,D,T)}else{const _=h,D=s[++l];mo(_)?a&&n.setProperty(r,_,D):a?n.setAttribute(r,_,D):r.setAttribute(_,D),l++}}return l}function Vs(n){return 3===n||4===n||6===n}function mo(n){return 64===n.charCodeAt(0)}function ua(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||Ko(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function Ko(n,r,s,a,l){let h=0,_=n.length;if(-1===r)_=-1;else for(;h<n.length;){const D=n[h++];if("number"==typeof D){if(D===r){_=-1;break}if(D>r){_=h-1;break}}}for(;h<n.length;){const D=n[h];if("number"==typeof D)break;if(D===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==_&&(n.splice(_,0,r),h=_+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Ma(n){return-1!==n}function $r(n){return 32767&n}function Ps(n,r){let s=function al(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let xa=!0;function Us(n){const r=xa;return xa=n,r}let qo=0;function yo(n,r){const s=I(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,_o(a.data,n),_o(r,null),_o(a.blueprint,null));const l=E(n,r),h=n.injectorIndex;if(Ma(l)){const _=$r(l),D=Ps(l,r),T=D[1].data;for(let V=0;V<8;V++)r[h+V]=D[_+V]|T[_+V]}return r[h+8]=l,h}function _o(n,r){n.push(0,0,0,0,0,0,0,0,r)}function I(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function E(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){const h=l[1],_=h.type;if(a=2===_?h.declTNode:1===_?l[6]:null,null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function v(n,r,s){!function _s(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Nt)&&(a=s[Nt]),null==a&&(a=s[Nt]=qo++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function k(n,r,s){if(s&Ut.Optional)return n;Y(r,"NodeInjector")}function $(n,r,s,a){if(s&Ut.Optional&&void 0===a&&(a=null),0==(s&(Ut.Self|Ut.Host))){const l=n[9],h=sn(void 0);try{return l?l.get(r,a,s&Ut.Optional):Pr(r,a,s&Ut.Optional)}finally{sn(h)}}return k(a,r,s)}function oe(n,r,s,a=Ut.Default,l){if(null!==n){const h=function Ar(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Nt)?n[Nt]:void 0;return"number"==typeof r?r>=0?255&r:se:r}(s);if("function"==typeof h){if(!Go(r,n,a))return a&Ut.Host?k(l,s,a):$(r,s,a,l);try{const _=h(a);if(null!=_||a&Ut.Optional)return _;Y(s)}finally{ks()}}else if("number"==typeof h){let _=null,D=I(n,r),T=-1,V=a&Ut.Host?r[16][6]:null;for((-1===D||a&Ut.SkipSelf)&&(T=-1===D?E(n,r):r[D+8],-1!==T&&Bs(a,!1)?(_=r[1],D=$r(T),r=Ps(T,r)):D=-1);-1!==D;){const G=r[1];if(or(h,D,G.data)){const re=je(D,r,s,_,a,V);if(re!==te)return re}T=r[D+8],-1!==T&&Bs(a,r[1].data[D+8]===V)&&or(h,D,r)?(_=G,D=$r(T),r=Ps(T,r)):D=-1}}}return $(r,s,a,l)}const te={};function se(){return new ts(ee(),m())}function je(n,r,s,a,l,h){const _=r[1],D=_.data[n+8],G=dn(D,_,s,null==a?gr(D)&&xa:a!=_&&0!=(3&D.type),l&Ut.Host&&h===D);return null!==G?zt(r,_,G,D):te}function dn(n,r,s,a,l){const h=n.providerIndexes,_=r.data,D=1048575&h,T=n.directiveStart,G=h>>20,be=l?D+G:n.directiveEnd;for(let He=a?D:D+G;He<be;He++){const at=_[He];if(He<T&&s===at||He>=T&&at.type===s)return He}if(l){const He=_[T];if(He&&Kr(He)&&He.type===s)return T}return null}function zt(n,r,s,a){let l=n[s];const h=r.data;if(function aa(n){return n instanceof As}(l)){const _=l;_.resolving&&function Et(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ze(-200,`Circular dependency in DI detected for ${n}${s}`)}(Le(h[s]));const D=Us(_.canSeeViewProviders);_.resolving=!0;const T=_.injectImpl?sn(_.injectImpl):null;Go(n,a,Ut.Default);try{l=n[s]=_.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function oa(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const _=ei(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,_),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,_)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==T&&sn(T),Us(D),_.resolving=!1,ks()}}return l}function or(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Bs(n,r){return!(n&Ut.Self||n&Ut.Host&&r)}class ts{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return oe(this._tNode,this._lView,r,a,s)}}function Ra(n){return nr(()=>{const r=n.prototype.constructor,s=r[Pt]||vo(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[Pt]||vo(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function vo(n){return ut(n)?()=>{const r=vo(Te(n));return r&&r()}:Jr(n)}function Eo(n){return function R(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Vs(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(ee(),n)}const ns="__parameters__";function oo(n,r,s){return nr(()=>{const a=function On(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const _=new l(...h);return D.annotation=_,D;function D(T,V,G){const re=T.hasOwnProperty(ns)?T[ns]:Object.defineProperty(T,ns,{value:[]})[ns];for(;re.length<=G;)re.push(null);return(re[G]=re[G]||[]).push(_),T}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class qt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=lt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zc=new qt("AnalyzeForEntryComponents");function rs(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),rs(a,r)):r!==n&&r.push(a)}return r}function $s(n,r){n.forEach(s=>Array.isArray(s)?$s(s,r):r(s))}function ka(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Zo(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Gi(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function Wi(n,r,s){let a=wo(n,r);return a>=0?n[1|a]=s:(a=~a,function Iu(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function ao(n,r){const s=wo(n,r);if(s>=0)return n[1|s]}function wo(n,r){return function Yo(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),_=n[h<<s];if(r===_)return h<<s;_>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Qo={},eu="__NG_DI_FLAG__",dl="ngTempTokenPath",P=/\n/gm,le="__source",Me=Se({provide:String,useValue:Se});let Ye;function vt(n){const r=Ye;return Ye=n,r}function Gt(n,r=Ut.Default){if(void 0===Ye)throw new Ze(203,"");return null===Ye?Pr(n,void 0,r):Ye.get(n,r&Ut.Optional?null:void 0,r)}function rn(n,r=Ut.Default){return(function wn(){return Ht}()||Gt)(Te(n),r)}const ar=rn;function kn(n){const r=[];for(let s=0;s<n.length;s++){const a=Te(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ze(900,"");let l,h=Ut.Default;for(let _=0;_<a.length;_++){const D=a[_],T=Vi(D);"number"==typeof T?-1===T?l=D.token:h|=T:l=D}r.push(rn(l,h))}else r.push(rn(a))}return r}function Yr(n,r){return n[eu]=r,n.prototype[eu]=r,n}function Vi(n){return n[eu]}const Es=Yr(oo("Inject",n=>({token:n})),-1),lo=Yr(oo("Optional"),8),Io=Yr(oo("SkipSelf"),4);class Au{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Xo(n){return n instanceof Au?n.changingThisBreaksApplicationSecurity:n}const Fa=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,nh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Yn=(()=>((Yn=Yn||{})[Yn.NONE=0]="NONE",Yn[Yn.HTML=1]="HTML",Yn[Yn.STYLE=2]="STYLE",Yn[Yn.SCRIPT=3]="SCRIPT",Yn[Yn.URL=4]="URL",Yn[Yn.RESOURCE_URL=5]="RESOURCE_URL",Yn))();function ri(n){const r=function Tl(){const n=m();return n&&n[12]}();return r?r.sanitize(Yn.URL,n)||"":function Su(n,r){const s=function ed(n){return n instanceof Au&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?Xo(n):function su(n){return(n=String(n)).match(Fa)||n.match(nh)?n:"unsafe:"+n}(ze(n))}const lu="__ngContext__";function is(n,r){n[lu]=r}function pc(n){const r=function Jo(n){return n[lu]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function xl(n){return n.ngOriginalError}function Pu(n,...r){n.error(...r)}class oi{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function ch(n){return n&&n.ngErrorLogger||Pu}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&xl(r);for(;s&&xl(s);)s=xl(s);return s||null}}const Nf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(fn))();function f(n){return n instanceof Function?n():n}var tt=(()=>((tt=tt||{})[tt.Important=1]="Important",tt[tt.DashCase=2]="DashCase",tt))();function on(n,r){return undefined(n,r)}function Oi(n){const r=n[3];return zr(r)?r[3]:r}function kl(n){return yc(n[13])}function Va(n){return yc(n[4])}function yc(n){for(;null!==n&&!zr(n);)n=n[4];return n}function Ua(n,r,s,a,l){if(null!=a){let h,_=!1;zr(a)?h=a:br(a)&&(_=!0,a=a[0]);const D=x(a);0===n&&null!==s?null==l?rt(r,s,D):Fu(r,s,D,l||null,!0):1===n&&null!==s?Fu(r,s,D,l||null,!0):2===n?function vh(n,r,s){const a=gh(n,r);a&&function ha(n,r,s,a){Rn(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,D,_):3===n&&r.destroyNode(D),null!=h&&function Eh(n,r,s,a,l){const h=s[7];h!==x(s)&&Ua(r,n,a,h,l);for(let D=10;D<s.length;D++){const T=s[D];Ec(T[1],T,n,r,a,h)}}(r,n,h,s,l)}}function vc(n,r,s){if(Rn(n))return n.createElement(r,s);{const a=null!==s?function bs(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function kg(n,r){const s=n[9],a=s.indexOf(r),l=r[3];1024&r[2]&&(r[2]&=-1025,ni(l,-1)),s.splice(a,1)}function Uf(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&kg(l,a),r>0&&(n[s-1][4]=a[4]);const h=Zo(n,10+r);!function Lf(n,r){Ec(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const _=h[19];null!==_&&_.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Pg(n,r){if(!(256&r[2])){const s=r[11];Rn(s)&&s.destroyNode&&Ec(n,r,s,3,null,null),function My(n){let r=n[13];if(!r)return ph(n[1],n);for(;r;){let s=null;if(br(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)br(r)&&ph(r[1],r),r=r[3];null===r&&(r=n),br(r)&&ph(r[1],r),s=r&&r[4]}r=s}}(r)}}function ph(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Ng(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof As)){const h=s[a+1];if(Array.isArray(h))for(let _=0;_<h.length;_+=2){const D=l[h[_]],T=h[_+1];try{T.call(D)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function Oy(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const _=s[h+1],D="function"==typeof _?_(r):x(r[_]),T=a[l=s[h+2]],V=s[h+3];"boolean"==typeof V?D.removeEventListener(s[h],T,V):V>=0?a[l=V]():a[l=-V].unsubscribe(),h+=2}else{const _=a[l=s[h+1]];s[h].call(_)}if(null!==a){for(let h=l+1;h<a.length;h++)a[h]();r[7]=null}}(n,r),1===r[1].type&&Rn(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&zr(r[3])){s!==r[3]&&kg(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function Fg(n,r,s){return function Bf(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===gn.None||l===gn.Emulated)return null}return et(a,s)}(n,r.parent,s)}function Fu(n,r,s,a,l){Rn(n)?n.insertBefore(r,s,a,l):r.insertBefore(s,a,l)}function rt(n,r,s){Rn(n)?n.appendChild(r,s):r.appendChild(s)}function cd(n,r,s,a,l){null!==a?Fu(n,r,s,a,l):rt(n,r,s)}function gh(n,r){return Rn(n)?n.parentNode(r):r.parentNode}function Lu(n,r,s){return Vu(n,r,s)}let Vu=function Lg(n,r,s){return 40&n.type?et(n,s):null};function hd(n,r,s,a){const l=Fg(n,a,r),h=r[11],D=Lu(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let T=0;T<s.length;T++)cd(h,l,s[T],D,!1);else cd(h,l,s,D,!1)}function ds(n,r){if(null!==r){const s=r.type;if(3&s)return et(r,n);if(4&s)return fd(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return ds(n,a);{const l=n[r.index];return zr(l)?fd(-1,l):x(l)}}if(32&s)return on(r,n)()||x(n[r.index]);{const a=_h(n,r);return null!==a?Array.isArray(a)?a[0]:ds(Oi(n[16]),a):ds(n,r.next)}}return null}function _h(n,r){return null!==r?n[16][6].projection[r.projection]:null}function fd(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return ds(a,l)}return r[7]}function Ba(n,r,s,a,l,h,_){for(;null!=s;){const D=a[s.index],T=s.type;if(_&&0===r&&(D&&is(x(D),a),s.flags|=4),64!=(64&s.flags))if(8&T)Ba(n,r,s.child,a,l,h,!1),Ua(r,n,l,D,h);else if(32&T){const V=on(s,a);let G;for(;G=V();)Ua(r,n,l,G,h);Ua(r,n,l,D,h)}else 16&T?jf(n,r,a,s,l,h):Ua(r,n,l,D,h);s=_?s.projectionNext:s.next}}function Ec(n,r,s,a,l,h){Ba(s,a,n.firstChild,r,l,h,!1)}function jf(n,r,s,a,l,h){const _=s[16],T=_[6].projection[a.projection];if(Array.isArray(T))for(let V=0;V<T.length;V++)Ua(r,n,l,T[V],h);else Ba(n,r,T,_[3],l,h,!0)}function Uu(n,r,s){Rn(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Bu(n,r,s){Rn(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function wc(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const wh="ng-template";function $f(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==wc(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Hf(n){return 4===n.type&&n.value!==wh}function Ny(n,r,s){return r===(4!==n.type||s?n.value:wh)}function Vg(n,r,s){let a=4;const l=n.attrs||[],h=function Fy(n){for(let r=0;r<n.length;r++)if(Vs(n[r]))return r;return n.length}(l);let _=!1;for(let D=0;D<r.length;D++){const T=r[D];if("number"!=typeof T){if(!_)if(4&a){if(a=2|1&a,""!==T&&!Ny(n,T,s)||""===T&&1===r.length){if(ta(a))return!1;_=!0}}else{const V=8&a?T:r[++D];if(8&a&&null!==n.attrs){if(!$f(n.attrs,V,s)){if(ta(a))return!1;_=!0}continue}const re=Gf(8&a?"class":T,l,Hf(n),s);if(-1===re){if(ta(a))return!1;_=!0;continue}if(""!==V){let be;be=re>h?"":l[re+1].toLowerCase();const He=8&a?be:null;if(He&&-1!==wc(He,V,0)||2&a&&V!==be){if(ta(a))return!1;_=!0}}}}else{if(!_&&!ta(a)&&!ta(T))return!1;if(_&&ta(T))continue;_=!1,a=T|1&a}}return ta(a)||_}function ta(n){return 0==(1&n)}function Gf(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const _=r[l];if(_===n)return l;if(3===_||6===_)h=!0;else{if(1===_||2===_){let D=r[++l];for(;"string"==typeof D;)D=r[++l];continue}if(4===_)break;if(0===_){l+=4;continue}}l+=h?1:2}return-1}return function Ug(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Ic(n,r,s=!1){for(let a=0;a<r.length;a++)if(Vg(n,r[a],s))return!0;return!1}function Ly(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let l=0;l<n.length;l++)if(n[l]!==a[l])continue e;return!0}}return!1}function Bg(n,r){return n?":not("+r.trim()+")":r}function Vy(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let _=n[s];if("string"==typeof _)if(2&a){const D=n[++s];l+="["+_+(D.length>0?'="'+D+'"':"")+"]"}else 8&a?l+="."+_:4&a&&(l+=" "+_);else""!==l&&!ta(_)&&(r+=Bg(h,l),l=""),a=_,h=h||!ta(a);s++}return""!==l&&(r+=Bg(h,l)),r}const Sn={};function Wf(n){jg(C(),m(),Si()+n,Br())}function jg(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&ko(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Mi(r,h,0,s)}Ro(s)}function Dc(n,r){return n<<17|r<<2}function eo(n){return n>>17&32767}function Fl(n){return 2|n}function na(n){return(131068&n)>>2}function Cc(n,r){return-131069&n|r<<2}function to(n){return 1|n}function Qg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const _=n.data[h];po(l),_.contentQueries(2,r[h],h)}}}function $a(n,r,s,a,l,h,_,D,T,V){const G=r.blueprint.slice();return G[0]=l,G[2]=140|a,gs(G),G[3]=G[15]=n,G[8]=s,G[10]=_||n&&n[10],G[11]=D||n&&n[11],G[12]=T||n&&n[12]||null,G[9]=V||n&&n[9]||null,G[6]=h,G[16]=2==r.type?n[16]:G,G}function pa(n,r,s,a,l){let h=n.data[r];if(null===h)h=function yd(n,r,s,a,l){const h=De(),_=Lt(),T=n.data[r]=function qy(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=T),null!==h&&(_?null==h.child&&null!==T.parent&&(h.child=T):null===h.next&&(h.next=T)),T}(n,r,s,a,l),function Hi(){return un.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const _=function Ke(){const n=un.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===_?-1:_.injectorIndex}return it(h,!0),h}function fu(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Ac(n,r,s){go(r);try{const a=n.viewQuery;null!==a&&dp(1,a,s);const l=n.template;null!==l&&em(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Qg(n,r),n.staticViewQueries&&dp(2,n.viewQuery,s);const h=n.components;null!==h&&function Ky(n,r){for(let s=0;s<r.length;s++)up(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,xo()}}function Ul(n,r,s,a){const l=r[2];if(256==(256&l))return;go(r);const h=Br();try{gs(r),function yi(n){return un.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&em(n,r,s,2,a);const _=3==(3&l);if(!h)if(_){const V=n.preOrderCheckHooks;null!==V&&ko(r,V,null)}else{const V=n.preOrderHooks;null!==V&&Mi(r,V,0,null),fi(r,0)}if(function ap(n){for(let r=kl(n);null!==r;r=Va(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(1024&l[2])&&ni(h,1),l[2]|=1024}}}(r),function Sc(n){for(let r=kl(n);null!==r;r=Va(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];vr(a)&&Ul(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Qg(n,r),!h)if(_){const V=n.contentCheckHooks;null!==V&&ko(r,V)}else{const V=n.contentHooks;null!==V&&Mi(r,V,1),fi(r,1)}!function Yg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Ro(~l);else{const h=l,_=s[++a],D=s[++a];si(_,h),D(2,r[h])}}}finally{Ro(-1)}}(n,r);const D=n.components;null!==D&&function Xg(n,r){for(let s=0;s<r.length;s++)Vh(n,r[s])}(r,D);const T=n.viewQuery;if(null!==T&&dp(2,T,a),!h)if(_){const V=n.viewCheckHooks;null!==V&&ko(r,V)}else{const V=n.viewHooks;null!==V&&Mi(r,V,2),fi(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),h||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,ni(r[3],-1))}finally{xo()}}function Jg(n,r,s,a){const l=r[10],h=!Br(),_=En(r);try{h&&!_&&l.begin&&l.begin(),_&&Ac(n,r,a),Ul(n,r,s,a)}finally{h&&!_&&l.end&&l.end()}}function em(n,r,s,a,l){const h=Si(),_=2&a;try{Ro(-1),_&&r.length>20&&jg(n,r,20,Br()),s(a,l)}finally{Ro(h)}}function Rh(n,r,s){if(hs(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const _=n.data[h];_.contentQueries&&_.contentQueries(1,s[h],h)}}}function Qf(n,r,s){!N()||(function am(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||yo(s,r),is(a,r);const _=s.initialInputs;for(let D=l;D<h;D++){const T=n.data[D],V=Kr(T);V&&Jy(r,s,T);const G=zt(r,n,D,s);is(G,r),null!==_&&e_(0,D-l,G,T,0,_),V&&(vn(s.index,r)[8]=G)}}(n,r,s,et(s,r)),128==(128&s.flags)&&function Qy(n,r,s){const a=s.directiveStart,l=s.directiveEnd,_=s.index,D=function Tr(){return un.lFrame.currentDirectiveIndex}();try{Ro(_);for(let T=a;T<l;T++){const V=n.data[T],G=r[T];ms(T),(null!==V.hostBindings||0!==V.hostVars||null!==V.hostAttrs)&&um(V,G)}}finally{Ro(-1),ms(D)}}(n,r,s))}function _d(n,r,s=et){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const _=a[h+1],D=-1===_?s(r,n):n[_];n[l++]=D}}}function tm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Oh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Oh(n,r,s,a,l,h,_,D,T,V){const G=20+a,re=G+l,be=function Xf(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Sn);return s}(G,re),He="function"==typeof V?V():V;return be[1]={type:n,blueprint:be,template:s,queries:null,viewQuery:D,declTNode:r,data:be.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:T,consts:He,incompleteFirstPass:!1}}function rm(n,r,s,a){const l=$h(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&hp(n).push(a,l.length-1))}function im(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function Ed(n,r,s,a){let l=!1;if(N()){const h=function Xy(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const _=a[h];Ic(s,_.selectors,!1)&&(l||(l=[]),v(yo(s,r),n,_.type),Kr(_)?(ip(n,s),l.unshift(_)):l.push(_))}return l}(n,r,s),_=null===a?null:{"":-1};if(null!==h){l=!0,Nh(s,n.data.length,h.length);for(let G=0;G<h.length;G++){const re=h[G];re.providersResolver&&re.providersResolver(re)}let D=!1,T=!1,V=fu(n,r,h.length,null);for(let G=0;G<h.length;G++){const re=h[G];s.mergedAttrs=ua(s.mergedAttrs,re.hostAttrs),sp(n,s,r,V,re),wd(V,re,_),null!==re.contentQueries&&(s.flags|=8),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(s.flags|=128);const be=re.type.prototype;!D&&(be.ngOnChanges||be.ngOnInit||be.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),D=!0),!T&&(be.ngOnChanges||be.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),T=!0),V++}!function Zy(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,_=[];let D=null,T=null;for(let V=r.directiveStart;V<a;V++){const G=l[V],re=G.inputs,be=null===h||Hf(r)?null:t_(re,h);_.push(be),D=im(re,V,D),T=im(G.outputs,V,T)}null!==D&&(D.hasOwnProperty("class")&&(r.flags|=16),D.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=_,r.inputs=D,r.outputs=T}(n,s)}_&&function Ph(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new Ze(-301,!1);a.push(r[l],h)}}}(s,a,_)}return s.mergedAttrs=ua(s.mergedAttrs,s.attrs),l}function rp(n,r,s,a,l,h){const _=h.hostBindings;if(_){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const T=~r.index;(function Yy(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(D)!=T&&D.push(T),D.push(a,l,_)}}function um(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function ip(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function wd(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Kr(r)&&(s[""]=n)}}function Nh(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function sp(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=Jr(l.type)),_=new As(h,Kr(l),null);n.blueprint[a]=_,s[a]=_,rp(n,r,0,a,fu(n,s,l.hostVars,Sn),l)}function Jy(n,r,s){const a=et(r,n),l=tm(s),h=n[10],_=Mc(n,$a(n,l,null,s.onPush?64:16,a,r,h,h.createRenderer(a,s),null,null));n[r.index]=_}function Ha(n,r,s,a,l,h){const _=et(n,r);!function op(n,r,s,a,l,h,_){if(null==h)Rn(n)?n.removeAttribute(r,l,s):r.removeAttribute(l);else{const D=null==_?ze(h):_(h,a||"",l);Rn(n)?n.setAttribute(r,l,D,s):s?r.setAttributeNS(s,l,D):r.setAttribute(l,D)}}(r[11],_,h,n.value,s,a,l)}function e_(n,r,s,a,l,h){const _=h[r];if(null!==_){const D=a.setInput;for(let T=0;T<_.length;){const V=_[T++],G=_[T++],re=_[T++];null!==D?a.setInput(s,re,V,G):s[G]=re}}}function t_(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Lh(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Vh(n,r){const s=vn(r,n);if(vr(s)){const a=s[1];80&s[2]?Ul(a,s,a.template,s[8]):s[5]>0&&Bl(s)}}function Bl(n){for(let a=kl(n);null!==a;a=Va(a))for(let l=10;l<a.length;l++){const h=a[l];if(1024&h[2]){const _=h[1];Ul(_,h,_.template,h[8])}else h[5]>0&&Bl(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=vn(s[a],n);vr(l)&&l[5]>0&&Bl(l)}}function up(n,r){const s=vn(r,n),a=s[1];(function lm(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Ac(a,s,s[8])}function Mc(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Id(n){for(;n;){n[2]|=64;const r=Oi(n);if(he(n)&&!r)return n;n=r}return null}function lp(n,r,s){const a=r[10];a.begin&&a.begin();try{Ul(n,r,n.template,s)}catch(l){throw Hh(r,l),l}finally{a.end&&a.end()}}function Bh(n){!function Uh(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=pc(s),l=a[1];Jg(l,a,l.template,s)}}(n[8])}function dp(n,r,s){po(0),r(n,s)}const jh=(()=>Promise.resolve(null))();function $h(n){return n[7]||(n[7]=[])}function hp(n){return n.cleanup||(n.cleanup=[])}function Hh(n,r){const s=n[9],a=s?s.get(oi,null):null;a&&a.handleError(r)}function dm(n,r,s,a,l){for(let h=0;h<s.length;){const _=s[h++],D=s[h++],T=r[_],V=n.data[_];null!==V.setInput?V.setInput(T,l,a,D):T[D]=l}}function pu(n,r,s){const a=Je(r,n);!function ad(n,r,s){Rn(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Dd(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let _=0;_<r.length;_++){const D=r[_];"number"==typeof D?h=D:1==h?l=Ne(l,D):2==h&&(a=Ne(a,D+": "+r[++_]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}const fp=new qt("INJECTOR",-1);class Gh{get(r,s=Qo){if(s===Qo){const a=new Error(`NullInjectorError: No provider for ${Pe(r)}!`);throw a.name="NullInjectorError",a}return s}}const pp=new qt("Set Injector scope."),$l={},i_={};let Cd;function gp(){return void 0===Cd&&(Cd=new Gh),Cd}function Wh(n,r=null,s=null,a){const l=zh(n,r,s,a);return l._resolveInjectorDefTypes(),l}function zh(n,r=null,s=null,a){return new mp(n,s,r||gp(),a)}class mp{constructor(r,s,a,l=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];s&&$s(s,D=>this.processProvider(D,r,s)),$s([r],D=>this.processInjectorType(D,[],h)),this.records.set(fp,ga(void 0,this));const _=this.records.get(pp);this.scope=null!=_?_.value:null,this.source=l||("object"==typeof r?null:Pe(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=Qo,a=Ut.Default){this.assertNotDestroyed();const l=vt(this),h=sn(void 0);try{if(!(a&Ut.SkipSelf)){let D=this.records.get(r);if(void 0===D){const T=function Ip(n){return"function"==typeof n||"object"==typeof n&&n instanceof qt}(r)&&nn(r);D=T&&this.injectableDefInScope(T)?ga(Wu(r),$l):null,this.records.set(r,D)}if(null!=D)return this.hydrate(r,D)}return(a&Ut.Self?gp():this.parent).get(r,s=a&Ut.Optional&&s===Qo?null:s)}catch(_){if("NullInjectorError"===_.name){if((_[dl]=_[dl]||[]).unshift(Pe(r)),l)throw _;return function Na(n,r,s,a){const l=n[dl];throw r[le]&&l.unshift(r[le]),n.message=function tu(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let l=Pe(r);if(Array.isArray(r))l=r.map(Pe).join(" -> ");else if("object"==typeof r){let h=[];for(let _ in r)if(r.hasOwnProperty(_)){let D=r[_];h.push(_+":"+("string"==typeof D?JSON.stringify(D):Pe(D)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(P,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[dl]=null,n}(_,r,"R3InjectorError",this.source)}throw _}finally{sn(h),vt(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,l)=>r.push(Pe(l))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ze(205,!1)}processInjectorType(r,s,a){if(!(r=Te(r)))return!1;let l=tr(r);const h=null==l&&r.ngModule||void 0,_=void 0===h?r:h,D=-1!==a.indexOf(_);if(void 0!==h&&(l=tr(h)),null==l)return!1;if(null!=l.imports&&!D){let G;a.push(_);try{$s(l.imports,re=>{this.processInjectorType(re,s,a)&&(void 0===G&&(G=[]),G.push(re))})}finally{}if(void 0!==G)for(let re=0;re<G.length;re++){const{ngModule:be,providers:He}=G[re];$s(He,at=>this.processProvider(at,be,He||Yt))}}this.injectorDefTypes.add(_);const T=Jr(_)||(()=>new _);this.records.set(_,ga(T,$l));const V=l.providers;if(null!=V&&!D){const G=r;$s(V,re=>this.processProvider(re,G,V))}return void 0!==h&&void 0!==r.providers}processProvider(r,s,a){let l=Rc(r=Te(r))?r:Te(r&&r.provide);const h=function yp(n,r,s){return _p(n)?ga(void 0,n.useValue):ga(Hl(n),$l)}(r);if(Rc(r)||!0!==r.multi)this.records.get(l);else{let _=this.records.get(l);_||(_=ga(void 0,$l,!0),_.factory=()=>kn(_.multi),this.records.set(l,_)),l=r,_.multi.push(r)}this.records.set(l,h)}hydrate(r,s){return s.value===$l&&(s.value=i_,s.value=s.factory()),"object"==typeof s.value&&s.value&&function wp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Te(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Wu(n){const r=nn(n),s=null!==r?r.factory:Jr(n);if(null!==s)return s;if(n instanceof qt)throw new Ze(204,!1);if(n instanceof Function)return function zu(n){const r=n.length;if(r>0)throw Gi(r,"?"),new Ze(204,!1);const s=function Mn(n){const r=n&&(n[Er]||n[wr]);if(r){const s=function lr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ze(204,!1)}function Hl(n,r,s){let a;if(Rc(n)){const l=Te(n);return Jr(l)||Wu(l)}if(_p(n))a=()=>Te(n.useValue);else if(function s_(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...kn(n.deps||[]));else if(function xc(n){return!(!n||!n.useExisting)}(n))a=()=>rn(Te(n.useExisting));else{const l=Te(n&&(n.useClass||n.provide));if(!function Ep(n){return!!n.deps}(n))return Jr(l)||Wu(l);a=()=>new l(...kn(n.deps))}return a}function ga(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function _p(n){return null!==n&&"object"==typeof n&&Me in n}function Rc(n){return"function"==typeof n}let ma=(()=>{class n{static create(s,a){var l;if(Array.isArray(s))return Wh({name:""},a,s,"");{const h=null!==(l=s.name)&&void 0!==l?l:"";return Wh({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=Qo,n.NULL=new Gh,n.\u0275prov=lt({token:n,providedIn:"any",factory:()=>rn(fp)}),n.__NG_ELEMENT_ID__=-1,n})();function Tp(n,r){ys(pc(n)[1],ee())}function Ap(n){let r=function Qh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(Kr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ze(903,"");l=r.\u0275dir}if(l){if(s){a.push(l);const _=n;_.inputs=Td(n.inputs),_.declaredInputs=Td(n.declaredInputs),_.outputs=Td(n.outputs);const D=l.hostBindings;D&&Tm(n,D);const T=l.viewQuery,V=l.contentQueries;if(T&&Mp(n,T),V&&Oc(n,V),Oe(n.inputs,l.inputs),Oe(n.declaredInputs,l.declaredInputs),Oe(n.outputs,l.outputs),Kr(l)&&l.data.animation){const G=n.data;G.animation=(G.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let _=0;_<h.length;_++){const D=h[_];D&&D.ngInherit&&D(n),D===Ap&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Sp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=ua(l.hostAttrs,s=ua(s,l.hostAttrs))}}(a)}function Td(n){return n===xr?{}:n===Yt?[]:n}function Mp(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Oc(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function Tm(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let ia=null;function Ku(){if(!ia){const n=fn.Symbol;if(n&&n.iterator)ia=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(ia=a)}}}return ia}function Gl(n){return!!Ad(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ku()in n)}function Ad(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ga(n,r,s){return n[r]=s}function no(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Jh(n,r,s,a){const l=m();return no(l,hr(),r)&&(C(),Ha(Zr(),l,n,r,s,a)),Jh}function Rm(n,r,s,a,l,h,_,D){const T=m(),V=C(),G=n+20,re=V.firstCreatePass?function g_(n,r,s,a,l,h,_,D,T){const V=r.consts,G=pa(r,n,4,_||null,cr(V,D));Ed(r,s,G,cr(V,T)),ys(r,G);const re=G.tViews=Oh(2,G,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,V);return null!==r.queries&&(r.queries.template(r,G),re.queries=r.queries.embeddedTView(G)),G}(G,V,T,r,s,a,l,h,_):V.data[G];it(re,!1);const be=T[11].createComment("");hd(V,T,be,re),is(be,T),Mc(T,T[G]=Lh(be,T,be,re)),fs(re)&&Qf(V,T,re),null!=_&&_d(T,re,D)}function tf(n){return jn(function $n(){return un.lFrame.contextLView}(),20+n)}function Kl(n,r=Ut.Default){const s=m();return null===s?rn(n,r):oe(ee(),s,Te(n),r)}function Vm(){throw new Error("invalid")}function Kp(n,r,s){const a=m();return no(a,hr(),r)&&function To(n,r,s,a,l,h,_,D){const T=et(r,s);let G,V=r.inputs;!D&&null!=V&&(G=V[a])?(dm(n,s,G,a,l),gr(r)&&function sm(n,r){const s=vn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function Jf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=_?_(l,r.value||"",a):l,Rn(h)?h.setProperty(T,a,l):mo(a)||(T.setProperty?T.setProperty(a,l):T[a]=l))}(C(),Zr(),a,n,r,a[11],s,!1),Kp}function vi(n,r,s,a,l){const _=l?"class":"style";dm(n,s,r.inputs[_],_,a)}function qp(n,r,s,a){const l=m(),h=C(),_=20+n,D=l[11],T=l[_]=vc(D,r,function tc(){return un.lFrame.currentNamespace}()),V=h.firstCreatePass?function Jv(n,r,s,a,l,h,_){const D=r.consts,V=pa(r,n,2,l,cr(D,h));return Ed(r,s,V,cr(D,_)),null!==V.attrs&&Dd(V,V.attrs,!1),null!==V.mergedAttrs&&Dd(V,V.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,V),V}(_,h,l,0,r,s,a):h.data[_];it(V,!0);const G=V.mergedAttrs;null!==G&&qs(D,T,G);const re=V.classes;null!==re&&Bu(D,T,re);const be=V.styles;return null!==be&&Uu(D,T,be),64!=(64&V.flags)&&hd(h,l,T,V),0===function $i(){return un.lFrame.elementDepthCount}()&&is(T,l),function Ts(){un.lFrame.elementDepthCount++}(),fs(V)&&(Qf(h,l,V),Rh(h,V,l)),null!==a&&_d(l,V),qp}function qi(){let n=ee();Lt()?St():(n=n.parent,it(n,!1));const r=n;!function Os(){un.lFrame.elementDepthCount--}();const s=C();return s.firstCreatePass&&(ys(s,n),hs(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Za(n){return 0!=(16&n.flags)}(r)&&vi(s,r,m(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ya(n){return 0!=(32&n.flags)}(r)&&vi(s,r,m(),r.stylesWithoutHost,!1),qi}function uf(n,r,s,a){return qp(n,r,s,a),qi(),uf}function kd(n,r,s){const a=m(),l=C(),h=n+20,_=l.firstCreatePass?function D_(n,r,s,a,l){const h=r.consts,_=cr(h,a),D=pa(r,n,8,"ng-container",_);return null!==_&&Dd(D,_,!0),Ed(r,s,D,cr(h,l)),null!==r.queries&&r.queries.elementStart(r,D),D}(h,l,a,r,s):l.data[h];it(_,!0);const D=a[h]=a[11].createComment("");return hd(l,a,D,_),is(D,a),fs(_)&&(Qf(l,a,_),Rh(l,_,a)),null!=s&&_d(a,_),kd}function lf(){let n=ee();const r=C();return Lt()?St():(n=n.parent,it(n,!1)),r.firstCreatePass&&(ys(r,n),hs(n)&&r.queries.elementEnd(n)),lf}function Bm(){return m()}function Zp(n){return!!n&&"function"==typeof n.then}function C_(n){return!!n&&"function"==typeof n.subscribe}const jm=C_;function Yp(n,r,s,a){const l=m(),h=C(),_=ee();return function b_(n,r,s,a,l,h,_,D){const T=fs(a),G=n.firstCreatePass&&hp(n),re=r[8],be=$h(r);let He=!0;if(3&a.type||D){const jt=et(a,r),hn=D?D(jt):jt,ft=be.length,bn=D?Mr=>D(x(Mr[a.index])):a.index;if(Rn(s)){let Mr=null;if(!D&&T&&(Mr=function mu(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const _=l[h];if(_===s&&l[h+1]===a){const D=r[7],T=l[h+2];return D.length>T?D[T]:null}"string"==typeof _&&(h+=2)}return null}(n,r,l,a.index)),null!==Mr)(Mr.__ngLastListenerFn__||Mr).__ngNextListenerFn__=h,Mr.__ngLastListenerFn__=h,He=!1;else{h=yu(a,r,re,h,!1);const ui=s.listen(hn,l,h);be.push(h,ui),G&&G.push(l,bn,ft,ft+1)}}else h=yu(a,r,re,h,!0),hn.addEventListener(l,h,_),be.push(h),G&&G.push(l,bn,ft,_)}else h=yu(a,r,re,h,!1);const at=a.outputs;let At;if(He&&null!==at&&(At=at[l])){const jt=At.length;if(jt)for(let hn=0;hn<jt;hn+=2){const Da=r[At[hn]][At[hn+1]].subscribe(h),Gd=be.length;be.push(h,Da),G&&G.push(l,a.index,Gd,-(Gd+1))}}}(h,l,l[11],_,n,r,!!s,a),Yp}function _a(n,r,s,a){try{return!1!==s(a)}catch(l){return Hh(n,l),!1}}function yu(n,r,s,a,l){return function h(_){if(_===Function)return a;const D=2&n.flags?vn(n.index,r):r;0==(32&r[2])&&Id(D);let T=_a(r,0,a,_),V=h.__ngNextListenerFn__;for(;V;)T=_a(r,0,V,_)&&T,V=V.__ngNextListenerFn__;return l&&!1===T&&(_.preventDefault(),_.returnValue=!1),T}}function Pd(n=1){return function qa(n){return(un.lFrame.contextLView=function sa(n,r){for(;n>0;)r=r[15],n--;return r}(n,un.lFrame.contextLView))[8]}(n)}function T_(n,r){let s=null;const a=function Nl(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let l=0;l<r.length;l++){const h=r[l];if("*"!==h){if(null===a?Ic(n,h,!0):Ly(a,h))return l}else s=l}return s}function $m(n){const r=m()[16][6];if(!r.projection){const a=r.projection=Gi(n?n.length:1,null),l=a.slice();let h=r.child;for(;null!==h;){const _=n?T_(h,n):0;null!==_&&(l[_]?l[_].projectionNext=h:a[_]=h,l[_]=h),h=h.next}}}function Xp(n,r=0,s){const a=m(),l=C(),h=pa(l,20+n,16,null,s||null);null===h.projection&&(h.projection=r),St(),64!=(64&h.flags)&&function ky(n,r,s){jf(r[11],0,r,s,Fg(n,s,r),Lu(s.parent||r[6],s,r))}(l,a,h)}function rg(n,r,s,a,l){const h=n[s+1],_=null===r;let D=a?eo(h):na(h),T=!1;for(;0!==D&&(!1===T||_);){const G=n[D+1];ql(n[D],r)&&(T=!0,n[D+1]=a?to(G):Fl(G)),D=a?eo(G):na(G)}T&&(n[s+1]=a?Fl(h):to(h))}function ql(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&wo(n,r)>=0}function ff(n,r){return function Ea(n,r,s,a){const l=m(),h=C(),_=function ii(n){const r=un.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function ug(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[Si()],_=function qm(n,r){return r>=n.expandoStartIndex}(n,s);(function Ud(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!_&&(r=!1),r=function S_(n,r,s,a){const l=function fo(n){const r=un.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Bc(s=lg(null,n,r,s,a),r.attrs,a),h=null);else{const _=r.directiveStylingLast;if(-1===_||n[_]!==l)if(s=lg(l,n,r,s,a),null===h){let T=function M_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==na(a))return n[eo(a)]}(n,r,a);void 0!==T&&Array.isArray(T)&&(T=lg(null,n,r,T[1],a),T=Bc(T,r.attrs,a),function Zm(n,r,s,a){n[eo(s?r.classBindings:r.styleBindings)]=a}(n,r,a,T))}else h=function x_(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Bc(a,n[h].hostAttrs,s);return Bc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function tg(n,r,s,a,l,h){let _=h?r.classBindings:r.styleBindings,D=eo(_),T=na(_);n[a]=s;let G,V=!1;if(Array.isArray(s)){const re=s;G=re[1],(null===G||wo(re,G)>0)&&(V=!0)}else G=s;if(l)if(0!==T){const be=eo(n[D+1]);n[a+1]=Dc(be,D),0!==be&&(n[be+1]=Cc(n[be+1],a)),n[D+1]=function Gg(n,r){return 131071&n|r<<17}(n[D+1],a)}else n[a+1]=Dc(D,0),0!==D&&(n[D+1]=Cc(n[D+1],a)),D=a;else n[a+1]=Dc(T,0),0===D?D=a:n[T+1]=Cc(n[T+1],a),T=a;V&&(n[a+1]=Fl(n[a+1])),rg(n,G,a,!0),rg(n,G,a,!1),function ng(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&wo(h,r)>=0&&(s[a+1]=to(s[a+1]))}(r,G,n,a,h),_=Dc(D,T),h?r.classBindings=_:r.styleBindings=_}(l,h,r,s,_,a)}}(h,n,_,a),r!==Sn&&no(l,_,r)&&function cg(n,r,s,a,l,h,_,D){if(!(3&r.type))return;const T=n.data,V=T[D+1];Vd(function zf(n){return 1==(1&n)}(V)?dg(T,r,s,l,na(V),_):void 0)||(Vd(h)||function Hg(n){return 2==(2&n)}(V)&&(h=dg(T,null,s,l,D,_)),function Pl(n,r,s,a,l){const h=Rn(n);if(r)l?h?n.addClass(s,a):s.classList.add(a):h?n.removeClass(s,a):s.classList.remove(a);else{let _=-1===a.indexOf("-")?void 0:tt.DashCase;if(null==l)h?n.removeStyle(s,a,_):s.style.removeProperty(a);else{const D="string"==typeof l&&l.endsWith("!important");D&&(l=l.slice(0,-10),_|=tt.Important),h?n.setStyle(s,a,l,_):s.style.setProperty(a,l,D?"important":"")}}}(a,_,Je(Si(),s),l,h))}(h,h.data[Si()],l,l[11],n,l[_+1]=function hg(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Pe(Xo(n)))),n}(r,s),a,_)}(n,r,null,!0),ff}function lg(n,r,s,a,l){let h=null;const _=s.directiveEnd;let D=s.directiveStylingLast;for(-1===D?D=s.directiveStart:D++;D<_&&(h=r[D],a=Bc(a,h.hostAttrs,l),h!==n);)D++;return null!==n&&(s.directiveStylingLast=D),a}function Bc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const _=r[h];"number"==typeof _?l=_:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Wi(n,_,!!s||r[++h]))}return void 0===n?null:n}function dg(n,r,s,a,l,h){const _=null===r;let D;for(;l>0;){const T=n[l],V=Array.isArray(T),G=V?T[1]:T,re=null===G;let be=s[l+1];be===Sn&&(be=re?Yt:void 0);let He=re?ao(be,a):G===a?be:void 0;if(V&&!Vd(He)&&(He=ao(T,a)),Vd(He)&&(D=He,_))return D;const at=n[l+1];l=_?eo(at):na(at)}if(null!==r){let T=h?r.residualClasses:r.residualStyles;null!=T&&(D=ao(T,a))}return D}function Vd(n){return void 0!==n}function Xm(n,r=""){const s=m(),a=C(),l=n+20,h=a.firstCreatePass?pa(a,l,1,r,null):a.data[l],_=s[l]=function _c(n,r){return Rn(n)?n.createText(r):n.createTextNode(r)}(s[11],r);hd(a,s,_,h),it(h,!1)}function pf(n){return Ia("",n,""),pf}function Ia(n,r,s){const a=m(),l=function zl(n,r,s,a){return no(n,hr(),s)?r+ze(s)+a:Sn}(a,n,r,s);return l!==Sn&&pu(a,Si(),l),Ia}const il=void 0;var Yl=["en",[["a","p"],["AM","PM"],il],[["AM","PM"],il,il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",il,"{1} 'at' {0}",il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hy(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Hs={};function yf(n){const r=function _g(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Gc(r);if(s)return s;const a=r.split("-")[0];if(s=Gc(a),s)return s;if("en"===a)return Yl;throw new Error(`Missing locale data for the locale "${n}".`)}function Hc(n){return yf(n)[An.PluralCase]}function Gc(n){return n in Hs||(Hs[n]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[n]),Hs[n]}var An=(()=>((An=An||{})[An.LocaleId=0]="LocaleId",An[An.DayPeriodsFormat=1]="DayPeriodsFormat",An[An.DayPeriodsStandalone=2]="DayPeriodsStandalone",An[An.DaysFormat=3]="DaysFormat",An[An.DaysStandalone=4]="DaysStandalone",An[An.MonthsFormat=5]="MonthsFormat",An[An.MonthsStandalone=6]="MonthsStandalone",An[An.Eras=7]="Eras",An[An.FirstDayOfWeek=8]="FirstDayOfWeek",An[An.WeekendRange=9]="WeekendRange",An[An.DateFormat=10]="DateFormat",An[An.TimeFormat=11]="TimeFormat",An[An.DateTimeFormat=12]="DateTimeFormat",An[An.NumberSymbols=13]="NumberSymbols",An[An.NumberFormats=14]="NumberFormats",An[An.CurrencyCode=15]="CurrencyCode",An[An.CurrencySymbol=16]="CurrencySymbol",An[An.CurrencyName=17]="CurrencyName",An[An.Currencies=18]="Currencies",An[An.Directionality=19]="Directionality",An[An.PluralCase=20]="PluralCase",An[An.ExtraData=21]="ExtraData",An))();const zc="en-US";let fy=zc;function Q_(n,r,s,a,l){if(n=Te(n),Array.isArray(n))for(let h=0;h<n.length;h++)Q_(n[h],r,s,a,l);else{const h=C(),_=m();let D=Rc(n)?n:Te(n.provide),T=Hl(n);const V=ee(),G=1048575&V.providerIndexes,re=V.directiveStart,be=V.providerIndexes>>20;if(Rc(n)||!n.multi){const He=new As(T,l,Kl),at=J_(D,r,l?G:G+be,re);-1===at?(v(yo(V,_),h,D),X_(h,n,r.length),r.push(D),V.directiveStart++,V.directiveEnd++,l&&(V.providerIndexes+=1048576),s.push(He),_.push(He)):(s[at]=He,_[at]=He)}else{const He=J_(D,r,G+be,re),at=J_(D,r,G,G+be),At=He>=0&&s[He],jt=at>=0&&s[at];if(l&&!jt||!l&&!At){v(yo(V,_),h,D);const hn=function dw(n,r,s,a,l){const h=new As(n,s,Kl);return h.multi=[],h.index=r,h.componentProviders=0,p0(h,l,a&&!s),h}(l?cw:lw,s.length,l,a,T);!l&&jt&&(s[at].providerFactory=hn),X_(h,n,r.length,0),r.push(D),V.directiveStart++,V.directiveEnd++,l&&(V.providerIndexes+=1048576),s.push(hn),_.push(hn)}else X_(h,n,He>-1?He:at,p0(s[l?at:He],T,!l&&a));!l&&a&&jt&&s[at].componentProviders++}}}function X_(n,r,s,a){const l=Rc(r),h=function vp(n){return!!n.useClass}(r);if(l||h){const T=(h?Te(r.useClass):r).prototype.ngOnDestroy;if(T){const V=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const G=V.indexOf(s);-1===G?V.push(s,[a,T]):V[G+1].push(a,T)}else V.push(s,T)}}}function p0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function J_(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function lw(n,r,s,a){return ev(this.multi,[])}function cw(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const _=this.providerFactory.componentProviders,D=zt(s,s[1],this.providerFactory.index,a);h=D.slice(0,_),ev(l,h);for(let T=_;T<D.length;T++)h.push(D[T])}else h=[],ev(l,h);return h}function ev(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function g0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function uw(n,r,s){const a=C();if(a.firstCreatePass){const l=Kr(n);Q_(s,a.data,a.blueprint,l,!0),Q_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class m0{}class pw{resolveComponentFactory(r){throw function fw(n){const r=Error(`No component factory found for ${Pe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ey=(()=>{class n{}return n.NULL=new pw,n})();function gw(){return Df(ee(),m())}function Df(n,r){return new Dg(et(n,r))}let Dg=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=gw,n})();function mw(n){return n instanceof Dg?n.nativeElement:n}class _0{}let yw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function vw(){const n=m(),s=vn(ee().index,n);return function _w(n){return n[11]}(br(s)?s:n)}(),n})(),Ew=(()=>{class n{}return n.\u0275prov=lt({token:n,providedIn:"root",factory:()=>null}),n})();class v0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const E0=new v0("13.3.2"),tv={};function wy(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(x(h)),zr(h))for(let D=10;D<h.length;D++){const T=h[D],V=T[1].firstChild;null!==V&&wy(T[1],T,V,a)}const _=s.type;if(8&_)wy(n,r,s.child,a);else if(32&_){const D=on(s,r);let T;for(;T=D();)a.push(T)}else if(16&_){const D=_h(r,s);if(Array.isArray(D))a.push(...D);else{const T=Oi(r[16]);wy(T[1],T,D,a,!0)}}s=l?s.projectionNext:s.next}return a}class Cg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return wy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(zr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Uf(r,a),Zo(s,a))}this._attachedToViewContainer=!1}Pg(this._lView[1],this._lView)}onDestroy(r){rm(this._lView[1],this._lView,null,r)}markForCheck(){Id(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){lp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function n_(n,r,s){dr(!0);try{lp(n,r,s)}finally{dr(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ze(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vf(n,r){Ec(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ze(902,"");this._appRef=r}}class ww extends Cg{constructor(r){super(r),this._view=r}detectChanges(){Bh(this._view)}checkNoChanges(){!function cp(n){dr(!0);try{Bh(n)}finally{dr(!1)}}(this._view)}get context(){return null}}class w0 extends Ey{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=yn(r);return new nv(s,this.ngModule)}}function I0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class nv extends m0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function pd(n){return n.map(Vy).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return I0(this.componentDef.inputs)}get outputs(){return I0(this.componentDef.outputs)}create(r,s,a,l){const h=(l=l||this.ngModule)?function Dw(n,r){return{get:(s,a,l)=>{const h=n.get(s,tv,l);return h!==tv||a===tv?h:r.get(s,a,l)}}}(r,l.injector):r,_=h.get(_0,O),D=h.get(Ew,null),T=_.createRenderer(null,this.componentDef),V=this.componentDef.selectors[0][0]||"div",G=a?function nm(n,r,s){if(Rn(n))return n.selectRootElement(r,s===gn.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(T,a,this.componentDef.encapsulation):vc(_.createRenderer(null,this.componentDef),V,function Iw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(V)),re=this.componentDef.onPush?576:528,be=function bm(n,r){return{components:[],scheduler:n||Nf,clean:jh,playerHandler:r||null,flags:0}}(),He=Oh(0,null,null,1,0,null,null,null,null,null),at=$a(null,He,be,re,null,null,_,T,D,h);let At,jt;go(at);try{const hn=function Cm(n,r,s,a,l,h){const _=s[1];s[20]=n;const T=pa(_,20,2,"#host",null),V=T.mergedAttrs=r.hostAttrs;null!==V&&(Dd(T,V,!0),null!==n&&(qs(l,n,V),null!==T.classes&&Bu(l,n,T.classes),null!==T.styles&&Uu(l,n,T.styles)));const G=a.createRenderer(n,r),re=$a(s,tm(r),null,r.onPush?64:16,s[20],T,a,G,h||null,null);return _.firstCreatePass&&(v(yo(T,s),_,r.type),ip(_,T),Nh(T,s.length,1)),Mc(s,re),s[20]=re}(G,this.componentDef,at,_,T);if(G)if(a)qs(T,G,["ng-version",E0.full]);else{const{attrs:ft,classes:bn}=function ju(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!ta(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);ft&&qs(T,G,ft),bn&&bn.length>0&&Bu(T,G,bn.join(" "))}if(jt=Wn(He,20),void 0!==s){const ft=jt.projection=[];for(let bn=0;bn<this.ngContentSelectors.length;bn++){const Mr=s[bn];ft.push(null!=Mr?Array.from(Mr):null)}}At=function Yh(n,r,s,a,l){const h=s[1],_=function np(n,r,s){const a=ee();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),sp(n,a,r,fu(n,r,1,null),s));const l=zt(r,n,a.directiveStart,a);is(l,r);const h=et(a,r);return h&&is(h,r),l}(h,s,r);if(a.components.push(_),n[8]=_,l&&l.forEach(T=>T(_,r)),r.contentQueries){const T=ee();r.contentQueries(1,_,T.directiveStart)}const D=ee();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ro(D.index),rp(s[1],D,0,D.directiveStart,D.directiveEnd,r),um(r,_)),_}(hn,this.componentDef,at,be,[Tp]),Ac(He,at,null)}finally{xo()}return new bw(this.componentType,At,Df(jt,at),at,jt)}}class bw extends class hw{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new ww(l),this.componentType=r}get injector(){return new ts(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Cf{}class D0{}const bf=new Map;class T0 extends Cf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new w0(this);const a=Nn(r);this._bootstrapComponents=f(a.bootstrap),this._r3Injector=zh(r,s,[{provide:Cf,useValue:this},{provide:Ey,useValue:this.componentFactoryResolver}],Pe(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=ma.THROW_IF_NOT_FOUND,a=Ut.Default){return r===ma||r===Cf||r===fp?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class rv extends D0{constructor(r){super(),this.moduleType=r,null!==Nn(r)&&function Aw(n){const r=new Set;!function s(a){const l=Nn(a,!0),h=l.id;null!==h&&(function C0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Pe(r)} vs ${Pe(r.name)}`)}(h,bf.get(h),a),bf.set(h,a));const _=f(l.imports);for(const D of _)r.has(D)||(r.add(D),s(D))}(n)}(r)}create(r){return new T0(this.moduleType,r)}}function A0(n,r,s){const a=zn()+n,l=m();return l[a]===Sn?Ga(l,a,s?r.call(s):r()):function Wl(n,r){return n[r]}(l,a)}function S0(n,r,s,a){return x0(m(),zn(),n,r,s,a)}function M0(n,r,s,a,l){return function R0(n,r,s,a,l,h,_){const D=r+s;return function gu(n,r,s,a){const l=no(n,r,s);return no(n,r+1,a)||l}(n,D,l,h)?Ga(n,D+2,_?a.call(_,l,h):a(l,h)):bg(n,D+2)}(m(),zn(),n,r,s,a,l)}function bg(n,r){const s=n[r];return s===Sn?void 0:s}function x0(n,r,s,a,l,h){const _=r+s;return no(n,_,l)?Ga(n,_+1,h?a.call(h,l):a(l)):bg(n,_+1)}function N0(n,r){const s=C();let a;const l=n+20;s.firstCreatePass?(a=function Nw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=Jr(a.type)),_=sn(Kl);try{const D=Us(!1),T=h();return Us(D),function Om(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,m(),l,T),T}finally{sn(_)}}function F0(n,r,s){const a=n+20,l=m(),h=jn(l,a);return function Tg(n,r){return n[1].data[r].pure}(l,a)?x0(l,zn(),r,h.transform,s,h):h.transform(s)}function iv(n){return r=>{setTimeout(n,void 0,r)}}const ol=class Bw extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var l,h,_;let D=r,T=s||(()=>null),V=a;if(r&&"object"==typeof r){const re=r;D=null===(l=re.next)||void 0===l?void 0:l.bind(re),T=null===(h=re.error)||void 0===h?void 0:h.bind(re),V=null===(_=re.complete)||void 0===_?void 0:_.bind(re)}this.__isAsync&&(T=iv(T),D&&(D=iv(D)),V&&(V=iv(V)));const G=super.subscribe({next:D,error:T,complete:V});return r instanceof q.w0&&r.add(G),G}};function jw(){return this._results[Ku()]()}class sv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ku(),a=sv.prototype;a[s]||(a[s]=jw)}get changes(){return this._changes||(this._changes=new ol)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=rs(r);(this._changesDetected=!function No(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ag=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gw,n})();const $w=Ag,Hw=class extends $w{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=$a(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(a[19]=h.createEmbeddedView(s)),Ac(s,a,r),new Cg(a)}};function Gw(){return Iy(ee(),m())}function Iy(n,r){return 4&n.type?new Hw(r,n,Df(n,r)):null}let Dy=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ww,n})();function Ww(){return U0(ee(),m())}const zw=Dy,L0=class extends zw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Df(this._hostTNode,this._hostLView)}get injector(){return new ts(this._hostTNode,this._hostLView)}get parentInjector(){const r=E(this._hostTNode,this._hostLView);if(Ma(r)){const s=Ps(r,this._hostLView),a=$r(r);return new ts(s[1].data[a+8],s)}return new ts(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=V0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const l=r.createEmbeddedView(s||{});return this.insert(l,a),l}createComponent(r,s,a,l,h){const _=r&&!function js(n){return"function"==typeof n}(r);let D;if(_)D=s;else{const re=s||{};D=re.index,a=re.injector,l=re.projectableNodes,h=re.ngModuleRef}const T=_?r:new nv(yn(r)),V=a||this.parentInjector;if(!h&&null==T.ngModule){const be=(_?V:this.parentInjector).get(Cf,null);be&&(h=be)}const G=T.create(V,l,void 0,h);return this.insert(G.hostView,D),G}insert(r,s){const a=r._lView,l=a[1];if(function Qn(n){return zr(n[3])}(a)){const G=this.indexOf(r);if(-1!==G)this.detach(G);else{const re=a[3],be=new L0(re,re[6],re[3]);be.detach(be.indexOf(r))}}const h=this._adjustIndex(s),_=this._lContainer;!function xy(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],ka(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const _=r[17];null!==_&&s!==_&&function Ry(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(_,r);const D=r[19];null!==D&&D.insertView(n),r[2]|=128}(l,a,_,h);const D=fd(h,_),T=a[11],V=gh(T,_[7]);return null!==V&&function ld(n,r,s,a,l,h){a[0]=l,a[6]=r,Ec(n,a,s,1,l,h)}(l,_[6],T,a,V,D),r.attachToViewContainerRef(),ka(ov(_),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=V0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Uf(this._lContainer,s);a&&(Zo(ov(this._lContainer),s),Pg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Uf(this._lContainer,s);return a&&null!=Zo(ov(this._lContainer),s)?new Cg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function V0(n){return n[8]}function ov(n){return n[8]||(n[8]=[])}function U0(n,r){let s;const a=r[n.index];if(zr(a))s=a;else{let l;if(8&n.type)l=x(a);else{const h=r[11];l=h.createComment("");const _=et(n,r);Fu(h,gh(h,_),l,function dd(n,r){return Rn(n)?n.nextSibling(r):r.nextSibling}(h,_),!1)}r[n.index]=s=Lh(a,r,l,n),Mc(r,s)}return new L0(s,n,r)}class av{constructor(r){this.queryList=r,this.matches=null}clone(){return new av(this.queryList)}setDirty(){this.queryList.setDirty()}}class uv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const _=s.getByIndex(h);l.push(this.queries[_.indexInDeclarationView].clone())}return new uv(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==K0(r,s).matches&&this.queries[s].setDirty()}}class B0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class lv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new lv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class cv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new cv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,Zw(s,h)),this.matchTNodeWithReadOption(r,s,dn(s,r,h,!1,!1))}else a===Ag?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,dn(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Dg||l===Dy||l===Ag&&4&s.type)this.addMatch(s.index,-2);else{const h=dn(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Zw(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function Qw(n,r,s,a){return-1===s?function Yw(n,r){return 11&n.type?Df(n,r):4&n.type?Iy(n,r):null}(r,n):-2===s?function Xw(n,r,s){return s===Dg?Df(r,n):s===Ag?Iy(r,n):s===Dy?U0(r,n):void 0}(n,r,a):zt(n,n[1],s,r)}function j0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,_=s.matches,D=[];for(let T=0;T<_.length;T+=2){const V=_[T];D.push(V<0?null:Qw(r,h[V],_[T+1],s.metadata.read))}l.matches=D}return l.matches}function dv(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const _=j0(n,r,l,s);for(let D=0;D<h.length;D+=2){const T=h[D];if(T>0)a.push(_[D/2]);else{const V=h[D+1],G=r[-T];for(let re=10;re<G.length;re++){const be=G[re];be[17]===be[3]&&dv(be[1],be,V,a)}if(null!==G[9]){const re=G[9];for(let be=0;be<re.length;be++){const He=re[be];dv(He[1],He,V,a)}}}}}return a}function $0(n){const r=m(),s=C(),a=Ls();po(a+1);const l=K0(s,a);if(n.dirty&&En(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?dv(s,r,a,[]):j0(s,r,l,a);n.reset(h,mw),n.notifyOnChanges()}return!0}return!1}function H0(n,r,s,a){const l=C();if(l.firstCreatePass){const h=ee();(function z0(n,r,s){null===n.queries&&(n.queries=new lv),n.queries.track(new cv(r,s))})(l,new B0(r,s,a),h.index),function tI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function W0(n,r,s){const a=new sv(4==(4&s));rm(n,r,a,a.destroy),null===r[19]&&(r[19]=new uv),r[19].queries.push(new av(a))}(l,m(),s)}function G0(){return function eI(n,r){return n[19].queries[r].queryList}(m(),Ls())}function K0(n,r){return n.queries.getByIndex(r)}function q0(n,r){return Iy(n,r)}function Ty(...n){}const dE=new qt("Application Initializer");let yv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Ty,this.reject=Ty,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Zp(h))s.push(h);else if(jm(h)){const _=new Promise((D,T)=>{h.subscribe({complete:D,error:T})});s.push(_)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(rn(dE,8))},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hE=new qt("AppId",{providedIn:"root",factory:function fE(){return`${_v()}${_v()}${_v()}`}});function _v(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pE=new qt("Platform Initializer"),gE=new qt("Platform ID"),mE=new qt("appBootstrapListener");let yE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();const vv=new qt("LocaleId",{providedIn:"root",factory:()=>ar(vv,Ut.Optional|Ut.SkipSelf)||function _I(){return"undefined"!=typeof $localize&&$localize.locale||zc}()}),vI=new qt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class EI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let wI=(()=>{class n{compileModuleSync(s){return new rv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=f(Nn(s).declarations).reduce((_,D)=>{const T=yn(D);return T&&_.push(new nv(T)),_},[]);return new EI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DI=(()=>Promise.resolve(0))();function Ev(n){"undefined"==typeof Zone?DI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class vu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ol(!1),this.onMicrotaskEmpty=new ol(!1),this.onStable=new ol(!1),this.onError=new ol(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function CI(){let n=fn.requestAnimationFrame,r=fn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function AI(n){const r=()=>{!function TI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(fn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Iv(n),n.isCheckStableRunning=!0,wv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Iv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,_,D)=>{try{return _E(n),s.invokeTask(l,h,_,D)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),vE(n)}},onInvoke:(s,a,l,h,_,D,T)=>{try{return _E(n),s.invoke(l,h,_,D,T)}finally{n.shouldCoalesceRunChangeDetection&&r(),vE(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,Iv(n),wv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,_=h.scheduleEventTask("NgZoneEvent: "+l,r,bI,Ty,Ty);try{return h.runTask(_,s,a)}finally{h.cancelTask(_)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const bI={};function wv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Iv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function _E(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function vE(n){n._nesting--,wv(n)}class SI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ol,this.onMicrotaskEmpty=new ol,this.onStable=new ol,this.onError=new ol}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}let EE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vu.assertNotInAngularZone(),Ev(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ev(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(rn(vu))},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})(),wE=(()=>{class n{constructor(){this._applications=new Map,Dv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Dv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();class MI{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function xI(n){Dv=n}let Eu,Dv=new MI;const IE=new qt("AllowMultipleToken");class kI{constructor(r,s){this.name=r,this.token=s}}function DE(n,r,s=[]){const a=`Platform: ${r}`,l=new qt(a);return(h=[])=>{let _=CE();if(!_||_.injector.get(IE,!1))if(n)n(s.concat(h).concat({provide:l,useValue:!0}));else{const D=s.concat(h).concat({provide:l,useValue:!0},{provide:pp,useValue:"platform"});!function PI(n){if(Eu&&!Eu.destroyed&&!Eu.injector.get(IE,!1))throw new Ze(400,"");Eu=n.get(bE);const r=n.get(pE,null);r&&r.forEach(s=>s())}(ma.create({providers:D,name:a}))}return function NI(n){const r=CE();if(!r)throw new Ze(401,"");return r}()}}function CE(){return Eu&&!Eu.destroyed?Eu:null}let bE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const D=function FI(n,r){let s;return s="noop"===n?new SI:("zone.js"===n?void 0:n)||new vu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),T=[{provide:vu,useValue:D}];return D.run(()=>{const V=ma.create({providers:T,parent:this.injector,name:s.moduleType.name}),G=s.create(V),re=G.injector.get(oi,null);if(!re)throw new Ze(402,"");return D.runOutsideAngular(()=>{const be=D.onError.subscribe({next:He=>{re.handleError(He)}});G.onDestroy(()=>{bv(this._modules,G),be.unsubscribe()})}),function LI(n,r,s){try{const a=s();return Zp(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(re,D,()=>{const be=G.injector.get(yv);return be.runInitializers(),be.donePromise.then(()=>(function G_(n){mt(n,"Expected localeId to be defined"),"string"==typeof n&&(fy=n.toLowerCase().replace(/_/g,"-"))}(G.injector.get(vv,zc)||zc),this._moduleDoBootstrap(G),G))})})}bootstrapModule(s,a=[]){const l=TE({},a);return function RI(n,r,s){const a=new rv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Cv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Ze(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ze(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(rn(ma))},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();function TE(n,r){return Array.isArray(r)?r.reduce(TE,n):Object.assign(Object.assign({},n),r)}let Cv=(()=>{class n{constructor(s,a,l,h,_){this._zone=s,this._injector=a,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const D=new Q.y(V=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{V.next(this._stable),V.complete()})}),T=new Q.y(V=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{vu.assertNotInAngularZone(),Ev(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,V.next(!0))})})});const re=this._zone.onUnstable.subscribe(()=>{vu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{V.next(!1)}))});return()=>{G.unsubscribe(),re.unsubscribe()}});this.isStable=(0,Ee.T)(D,T.pipe((0,ye.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new Ze(405,"");let l;l=s instanceof m0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(l.componentType);const h=function OI(n){return n.isBoundToModule}(l)?void 0:this._injector.get(Cf),D=l.create(ma.NULL,[],a||l.selector,h),T=D.location.nativeElement,V=D.injector.get(EE,null),G=V&&D.injector.get(wE);return V&&G&&G.registerApplication(T,V),D.onDestroy(()=>{this.detachView(D.hostView),bv(this.components,D),G&&G.unregisterApplication(T)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new Ze(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;bv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(mE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(rn(vu),rn(ma),rn(oi),rn(Ey),rn(yv))},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let SE=!0,ME=!1;function UI(){return ME=!0,SE}function BI(){if(ME)throw new Error("Cannot enable prod mode after platform setup.");SE=!1}let jI=(()=>{class n{}return n.__NG_ELEMENT_ID__=$I,n})();function $I(n){return function HI(n,r,s){if(gr(n)&&!s){const a=vn(n.index,r);return new Cg(a,a)}return 47&n.type?new Cg(r[16],r):null}(ee(),m(),16==(16&n))}class kE{constructor(){}supports(r){return Gl(r)}create(r){return new ZI(r)}}const qI=(n,r)=>r;class ZI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const _=!a||s&&s.currentIndex<NE(a,l,h)?s:a,D=NE(_,l,h),T=_.currentIndex;if(_===a)l--,a=a._nextRemoved;else if(s=s._next,null==_.previousIndex)l++;else{h||(h=[]);const V=D-l,G=T-l;if(V!=G){for(let be=0;be<V;be++){const He=be<h.length?h[be]:h[be]=0,at=He+be;G<=at&&at<V&&(h[be]=He+1)}h[_.previousIndex]=G-V}}D!==T&&r(_,D,T)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Gl(r))throw new Ze(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,_,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let D=0;D<this.length;D++)h=r[D],_=this._trackByFn(D,h),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,h,_,D)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,_,D),a=!0),s=s._next}else l=0,function p_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Ku()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,D=>{_=this._trackByFn(l,D),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,D,_,l)),Object.is(s.item,D)||this._addIdentityChange(s,D)):(s=this._mismatch(s,D,_,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new YI(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new PE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new PE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class YI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class PE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new QI,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class FE{constructor(){}supports(r){return r instanceof Map||Ad(r)}create(){return new XI}}class XI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Ad(r)))throw new Ze(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,_=l._next;return h&&(h._next=_),_&&(_._prev=h),l._next=null,l._prev=null,l}const a=new JI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class JI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function LE(){return new xv([new kE])}let xv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||LE()),deps:[[n,new Io,new lo]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Ze(901,"")}}return n.\u0275prov=lt({token:n,providedIn:"root",factory:LE}),n})();function VE(){return new Rv([new FE])}let Rv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||VE()),deps:[[n,new Io,new lo]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(a)return a;throw new Ze(901,"")}}return n.\u0275prov=lt({token:n,providedIn:"root",factory:VE}),n})();const nD=DE(null,"core",[{provide:gE,useValue:"unknown"},{provide:bE,deps:[ma]},{provide:wE,deps:[]},{provide:yE,deps:[]}]);let rD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(rn(Cv))},n.\u0275mod=Fe({type:n}),n.\u0275inj=kt({}),n})()},2382:(Tt,We,F)=>{F.d(We,{Fj:()=>U,NI:()=>Lr,oH:()=>Ci,cw:()=>xn,sg:()=>Ni,u5:()=>un,Cf:()=>Ve,JU:()=>Ze,JJ:()=>Ir,JL:()=>an,F:()=>br,On:()=>st,YN:()=>Ti,c5:()=>vr,UX:()=>ji,Q7:()=>Z,kI:()=>we,_Y:()=>en,Kr:()=>ls});var p=F(5e3),q=F(9808),Q=F(9751),Ee=F(4742),ye=F(8421),Se=F(3269),Oe=F(5403),Pe=F(3268),Ne=F(1810),ie=F(8996),Te=F(4004);let ut=(()=>{class N{constructor(S,m){this._renderer=S,this._elementRef=m,this.onChange=C=>{},this.onTouched=()=>{}}setProperty(S,m){this._renderer.setProperty(this._elementRef.nativeElement,S,m)}registerOnTouched(S){this.onTouched=S}registerOnChange(S){this.onChange=S}setDisabledState(S){this.setProperty("disabled",S)}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(p.Qsj),p.Y36(p.SBq))},N.\u0275dir=p.lG2({type:N}),N})(),Qe=(()=>{class N extends ut{}return N.\u0275fac=function(){let M;return function(m){return(M||(M=p.n5z(N)))(m||N)}}(),N.\u0275dir=p.lG2({type:N,features:[p.qOj]}),N})();const Ze=new p.OlP("NgValueAccessor"),Le={provide:Ze,useExisting:(0,p.Gpc)(()=>U),multi:!0},j=new p.OlP("CompositionEventMode");let U=(()=>{class N extends ut{constructor(S,m,C){super(S,m),this._compositionMode=C,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Et(){const N=(0,q.q)()?(0,q.q)().getUserAgent():"";return/android (\d+)/.test(N.toLowerCase())}())}writeValue(S){this.setProperty("value",null==S?"":S)}_handleInput(S){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(S)}_compositionStart(){this._composing=!0}_compositionEnd(S){this._composing=!1,this._compositionMode&&this.onChange(S)}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(j,8))},N.\u0275dir=p.lG2({type:N,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(S,m){1&S&&p.NdJ("input",function(K){return m._handleInput(K.target.value)})("blur",function(){return m.onTouched()})("compositionstart",function(){return m._compositionStart()})("compositionend",function(K){return m._compositionEnd(K.target.value)})},features:[p._Bn([Le]),p.qOj]}),N})();function Y(N){return null==N||0===N.length}function ve(N){return null!=N&&"number"==typeof N.length}const Ve=new p.OlP("NgValidators"),$e=new p.OlP("NgAsyncValidators"),ke=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class we{static min(M){return function X(N){return M=>{if(Y(M.value)||Y(N))return null;const S=parseFloat(M.value);return!isNaN(S)&&S<N?{min:{min:N,actual:M.value}}:null}}(M)}static max(M){return function Ce(N){return M=>{if(Y(M.value)||Y(N))return null;const S=parseFloat(M.value);return!isNaN(S)&&S>N?{max:{max:N,actual:M.value}}:null}}(M)}static required(M){return pe(M)}static requiredTrue(M){return function Ge(N){return!0===N.value?null:{required:!0}}(M)}static email(M){return function Ue(N){return Y(N.value)||ke.test(N.value)?null:{email:!0}}(M)}static minLength(M){return function Vt(N){return M=>Y(M.value)||!ve(M.value)?null:M.value.length<N?{minlength:{requiredLength:N,actualLength:M.value.length}}:null}(M)}static maxLength(M){return function wt(N){return M=>ve(M.value)&&M.value.length>N?{maxlength:{requiredLength:N,actualLength:M.value.length}}:null}(M)}static pattern(M){return Wt(M)}static nullValidator(M){return null}static compose(M){return kt(M)}static composeAsync(M){return Hn(M)}}function pe(N){return Y(N.value)?{required:!0}:null}function Wt(N){if(!N)return mt;let M,S;return"string"==typeof N?(S="","^"!==N.charAt(0)&&(S+="^"),S+=N,"$"!==N.charAt(N.length-1)&&(S+="$"),M=new RegExp(S)):(S=N.toString(),M=N),m=>{if(Y(m.value))return null;const C=m.value;return M.test(C)?null:{pattern:{requiredPattern:S,actualValue:C}}}}function mt(N){return null}function Dt(N){return null!=N}function $t(N){const M=(0,p.QGY)(N)?(0,ie.D)(N):N;return(0,p.CqO)(M),M}function It(N){let M={};return N.forEach(S=>{M=null!=S?Object.assign(Object.assign({},M),S):M}),0===Object.keys(M).length?null:M}function xt(N,M){return M.map(S=>S(N))}function ln(N){return N.map(M=>function lt(N){return!N.validate}(M)?M:S=>M.validate(S))}function kt(N){if(!N)return null;const M=N.filter(Dt);return 0==M.length?null:function(S){return It(xt(S,M))}}function nn(N){return null!=N?kt(ln(N)):null}function Hn(N){if(!N)return null;const M=N.filter(Dt);return 0==M.length?null:function(S){return function ce(...N){const M=(0,Se.jO)(N),{args:S,keys:m}=(0,Ee.D)(N),C=new Q.y(K=>{const{length:ee}=S;if(!ee)return void K.complete();const De=new Array(ee);let Ke=ee,it=ee;for(let Lt=0;Lt<ee;Lt++){let St=!1;(0,ye.Xf)(S[Lt]).subscribe((0,Oe.x)(K,_n=>{St||(St=!0,it--),De[Lt]=_n},()=>Ke--,void 0,()=>{(!Ke||!St)&&(it||K.next(m?(0,Ne.n)(m,De):De),K.complete())}))}});return M?C.pipe((0,Pe.Z)(M)):C}(xt(S,M).map($t)).pipe((0,Te.U)(It))}}function Mn(N){return null!=N?Hn(ln(N)):null}function lr(N,M){return null===N?[M]:Array.isArray(N)?[...N,M]:[N,M]}function tr(N){return N._rawValidators}function Er(N){return N._rawAsyncValidators}function Gn(N){return N?Array.isArray(N)?N:[N]:[]}function wr(N,M){return Array.isArray(N)?N.includes(M):N===M}function Ln(N,M){const S=Gn(M);return Gn(N).forEach(C=>{wr(S,C)||S.push(C)}),S}function Ut(N,M){return Gn(M).filter(S=>!wr(N,S))}class Ht{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(M){this._rawValidators=M||[],this._composedValidatorFn=nn(this._rawValidators)}_setAsyncValidators(M){this._rawAsyncValidators=M||[],this._composedAsyncValidatorFn=Mn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(M){this._onDestroyCallbacks.push(M)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(M=>M()),this._onDestroyCallbacks=[]}reset(M){this.control&&this.control.reset(M)}hasError(M,S){return!!this.control&&this.control.hasError(M,S)}getError(M,S){return this.control?this.control.getError(M,S):null}}class wn extends Ht{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class sn extends Ht{get formDirective(){return null}get path(){return null}}class Pr{constructor(M){this._cd=M}is(M){var S,m,C;return"submitted"===M?!!(null===(S=this._cd)||void 0===S?void 0:S.submitted):!!(null===(C=null===(m=this._cd)||void 0===m?void 0:m.control)||void 0===C?void 0:C[M])}}let Ir=(()=>{class N extends Pr{constructor(S){super(S)}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(wn,2))},N.\u0275dir=p.lG2({type:N,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(S,m){2&S&&p.ekj("ng-untouched",m.is("untouched"))("ng-touched",m.is("touched"))("ng-pristine",m.is("pristine"))("ng-dirty",m.is("dirty"))("ng-valid",m.is("valid"))("ng-invalid",m.is("invalid"))("ng-pending",m.is("pending"))},features:[p.qOj]}),N})(),an=(()=>{class N extends Pr{constructor(S){super(S)}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(sn,10))},N.\u0275dir=p.lG2({type:N,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(S,m){2&S&&p.ekj("ng-untouched",m.is("untouched"))("ng-touched",m.is("touched"))("ng-pristine",m.is("pristine"))("ng-dirty",m.is("dirty"))("ng-valid",m.is("valid"))("ng-invalid",m.is("invalid"))("ng-pending",m.is("pending"))("ng-submitted",m.is("submitted"))},features:[p.qOj]}),N})();function pn(N,M){Ie(N,M),M.valueAccessor.writeValue(N.value),function Fe(N,M){M.valueAccessor.registerOnChange(S=>{N._pendingValue=S,N._pendingChange=!0,N._pendingDirty=!0,"change"===N.updateOn&&pt(N,M)})}(N,M),function Cn(N,M){const S=(m,C)=>{M.valueAccessor.writeValue(m),C&&M.viewToModelUpdate(m)};N.registerOnChange(S),M._registerOnDestroy(()=>{N._unregisterOnChange(S)})}(N,M),function yt(N,M){M.valueAccessor.registerOnTouched(()=>{N._pendingTouched=!0,"blur"===N.updateOn&&N._pendingChange&&pt(N,M),"submit"!==N.updateOn&&N.markAsTouched()})}(N,M),function ae(N,M){if(M.valueAccessor.setDisabledState){const S=m=>{M.valueAccessor.setDisabledState(m)};N.registerOnDisabledChange(S),M._registerOnDestroy(()=>{N._unregisterOnDisabledChange(S)})}}(N,M)}function Kt(N,M,S=!0){const m=()=>{};M.valueAccessor&&(M.valueAccessor.registerOnChange(m),M.valueAccessor.registerOnTouched(m)),qe(N,M),N&&(M._invokeOnDestroyCallbacks(),N._registerOnCollectionChange(()=>{}))}function ge(N,M){N.forEach(S=>{S.registerOnValidatorChange&&S.registerOnValidatorChange(M)})}function Ie(N,M){const S=tr(N);null!==M.validator?N.setValidators(lr(S,M.validator)):"function"==typeof S&&N.setValidators([S]);const m=Er(N);null!==M.asyncValidator?N.setAsyncValidators(lr(m,M.asyncValidator)):"function"==typeof m&&N.setAsyncValidators([m]);const C=()=>N.updateValueAndValidity();ge(M._rawValidators,C),ge(M._rawAsyncValidators,C)}function qe(N,M){let S=!1;if(null!==N){if(null!==M.validator){const C=tr(N);if(Array.isArray(C)&&C.length>0){const K=C.filter(ee=>ee!==M.validator);K.length!==C.length&&(S=!0,N.setValidators(K))}}if(null!==M.asyncValidator){const C=Er(N);if(Array.isArray(C)&&C.length>0){const K=C.filter(ee=>ee!==M.asyncValidator);K.length!==C.length&&(S=!0,N.setAsyncValidators(K))}}}const m=()=>{};return ge(M._rawValidators,m),ge(M._rawAsyncValidators,m),S}function pt(N,M){N._pendingDirty&&N.markAsDirty(),N.setValue(N._pendingValue,{emitModelToViewChange:!1}),M.viewToModelUpdate(N._pendingValue),N._pendingChange=!1}function Rr(N,M){Ie(N,M)}function Xr(N,M){if(!N.hasOwnProperty("model"))return!1;const S=N.model;return!!S.isFirstChange()||!Object.is(M,S.currentValue)}function rr(N,M){N._syncPendingControls(),M.forEach(S=>{const m=S.control;"submit"===m.updateOn&&m._pendingChange&&(S.viewToModelUpdate(m._pendingValue),m._pendingChange=!1)})}function qn(N,M){if(!M)return null;let S,m,C;return Array.isArray(M),M.forEach(K=>{K.constructor===U?S=K:function wi(N){return Object.getPrototypeOf(N.constructor)===Qe}(K)?m=K:C=K}),C||m||S||null}function ir(N,M){const S=N.indexOf(M);S>-1&&N.splice(S,1)}const ct="VALID",Ft="INVALID",cn="PENDING",Jn="DISABLED";function er(N){return(di(N)?N.validators:N)||null}function ci(N){return Array.isArray(N)?nn(N):N||null}function Vn(N,M){return(di(M)?M.asyncValidators:N)||null}function _r(N){return Array.isArray(N)?Mn(N):N||null}function di(N){return null!=N&&!Array.isArray(N)&&"object"==typeof N}const mn=N=>N instanceof Lr,Nr=N=>N instanceof xn;function gi(N){return mn(N)?N.value:N.getRawValue()}function Cr(N,M){const S=Nr(N),m=N.controls;if(!(S?Object.keys(m):m).length)throw new p.vHH(1e3,"");if(!m[M])throw new p.vHH(1001,"")}function sr(N,M){Nr(N),N._forEachChild((m,C)=>{if(void 0===M[C])throw new p.vHH(1002,"")})}class Fr{constructor(M,S){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=M,this._rawAsyncValidators=S,this._composedValidatorFn=ci(this._rawValidators),this._composedAsyncValidatorFn=_r(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(M){this._rawValidators=this._composedValidatorFn=M}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(M){this._rawAsyncValidators=this._composedAsyncValidatorFn=M}get parent(){return this._parent}get valid(){return this.status===ct}get invalid(){return this.status===Ft}get pending(){return this.status==cn}get disabled(){return this.status===Jn}get enabled(){return this.status!==Jn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(M){this._rawValidators=M,this._composedValidatorFn=ci(M)}setAsyncValidators(M){this._rawAsyncValidators=M,this._composedAsyncValidatorFn=_r(M)}addValidators(M){this.setValidators(Ln(M,this._rawValidators))}addAsyncValidators(M){this.setAsyncValidators(Ln(M,this._rawAsyncValidators))}removeValidators(M){this.setValidators(Ut(M,this._rawValidators))}removeAsyncValidators(M){this.setAsyncValidators(Ut(M,this._rawAsyncValidators))}hasValidator(M){return wr(this._rawValidators,M)}hasAsyncValidator(M){return wr(this._rawAsyncValidators,M)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(M={}){this.touched=!0,this._parent&&!M.onlySelf&&this._parent.markAsTouched(M)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(M=>M.markAllAsTouched())}markAsUntouched(M={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(S=>{S.markAsUntouched({onlySelf:!0})}),this._parent&&!M.onlySelf&&this._parent._updateTouched(M)}markAsDirty(M={}){this.pristine=!1,this._parent&&!M.onlySelf&&this._parent.markAsDirty(M)}markAsPristine(M={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(S=>{S.markAsPristine({onlySelf:!0})}),this._parent&&!M.onlySelf&&this._parent._updatePristine(M)}markAsPending(M={}){this.status=cn,!1!==M.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!M.onlySelf&&this._parent.markAsPending(M)}disable(M={}){const S=this._parentMarkedDirty(M.onlySelf);this.status=Jn,this.errors=null,this._forEachChild(m=>{m.disable(Object.assign(Object.assign({},M),{onlySelf:!0}))}),this._updateValue(),!1!==M.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},M),{skipPristineCheck:S})),this._onDisabledChange.forEach(m=>m(!0))}enable(M={}){const S=this._parentMarkedDirty(M.onlySelf);this.status=ct,this._forEachChild(m=>{m.enable(Object.assign(Object.assign({},M),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:M.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},M),{skipPristineCheck:S})),this._onDisabledChange.forEach(m=>m(!1))}_updateAncestors(M){this._parent&&!M.onlySelf&&(this._parent.updateValueAndValidity(M),M.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(M){this._parent=M}updateValueAndValidity(M={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ct||this.status===cn)&&this._runAsyncValidator(M.emitEvent)),!1!==M.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!M.onlySelf&&this._parent.updateValueAndValidity(M)}_updateTreeValidity(M={emitEvent:!0}){this._forEachChild(S=>S._updateTreeValidity(M)),this.updateValueAndValidity({onlySelf:!0,emitEvent:M.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jn:ct}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(M){if(this.asyncValidator){this.status=cn,this._hasOwnPendingAsyncValidator=!0;const S=$t(this.asyncValidator(this));this._asyncValidationSubscription=S.subscribe(m=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(m,{emitEvent:M})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(M,S={}){this.errors=M,this._updateControlsErrors(!1!==S.emitEvent)}get(M){return function li(N,M,S){if(null==M||(Array.isArray(M)||(M=M.split(S)),Array.isArray(M)&&0===M.length))return null;let m=N;return M.forEach(C=>{m=Nr(m)?m.controls.hasOwnProperty(C)?m.controls[C]:null:(N=>N instanceof Tn)(m)&&m.at(C)||null}),m}(this,M,".")}getError(M,S){const m=S?this.get(S):this;return m&&m.errors?m.errors[M]:null}hasError(M,S){return!!this.getError(M,S)}get root(){let M=this;for(;M._parent;)M=M._parent;return M}_updateControlsErrors(M){this.status=this._calculateStatus(),M&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(M)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Jn:this.errors?Ft:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cn)?cn:this._anyControlsHaveStatus(Ft)?Ft:ct}_anyControlsHaveStatus(M){return this._anyControls(S=>S.status===M)}_anyControlsDirty(){return this._anyControls(M=>M.dirty)}_anyControlsTouched(){return this._anyControls(M=>M.touched)}_updatePristine(M={}){this.pristine=!this._anyControlsDirty(),this._parent&&!M.onlySelf&&this._parent._updatePristine(M)}_updateTouched(M={}){this.touched=this._anyControlsTouched(),this._parent&&!M.onlySelf&&this._parent._updateTouched(M)}_isBoxedValue(M){return"object"==typeof M&&null!==M&&2===Object.keys(M).length&&"value"in M&&"disabled"in M}_registerOnCollectionChange(M){this._onCollectionChange=M}_setUpdateStrategy(M){di(M)&&null!=M.updateOn&&(this._updateOn=M.updateOn)}_parentMarkedDirty(M){return!M&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Lr extends Fr{constructor(M=null,S,m){super(er(S),Vn(m,S)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(M),this._setUpdateStrategy(S),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),di(S)&&S.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(M)?M.value:M)}setValue(M,S={}){this.value=this._pendingValue=M,this._onChange.length&&!1!==S.emitModelToViewChange&&this._onChange.forEach(m=>m(this.value,!1!==S.emitViewToModelChange)),this.updateValueAndValidity(S)}patchValue(M,S={}){this.setValue(M,S)}reset(M=this.defaultValue,S={}){this._applyFormState(M),this.markAsPristine(S),this.markAsUntouched(S),this.setValue(this.value,S),this._pendingChange=!1}_updateValue(){}_anyControls(M){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(M){this._onChange.push(M)}_unregisterOnChange(M){ir(this._onChange,M)}registerOnDisabledChange(M){this._onDisabledChange.push(M)}_unregisterOnDisabledChange(M){ir(this._onDisabledChange,M)}_forEachChild(M){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(M){this._isBoxedValue(M)?(this.value=this._pendingValue=M.value,M.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=M}}class xn extends Fr{constructor(M,S,m){super(er(S),Vn(m,S)),this.controls=M,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(M,S){return this.controls[M]?this.controls[M]:(this.controls[M]=S,S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange),S)}addControl(M,S,m={}){this.registerControl(M,S),this.updateValueAndValidity({emitEvent:m.emitEvent}),this._onCollectionChange()}removeControl(M,S={}){this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),delete this.controls[M],this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}setControl(M,S,m={}){this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),delete this.controls[M],S&&this.registerControl(M,S),this.updateValueAndValidity({emitEvent:m.emitEvent}),this._onCollectionChange()}contains(M){return this.controls.hasOwnProperty(M)&&this.controls[M].enabled}setValue(M,S={}){sr(this,M),Object.keys(M).forEach(m=>{Cr(this,m),this.controls[m].setValue(M[m],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(M,S={}){null!=M&&(Object.keys(M).forEach(m=>{this.controls[m]&&this.controls[m].patchValue(M[m],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(M={},S={}){this._forEachChild((m,C)=>{m.reset(M[C],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this._reduceChildren({},(M,S,m)=>(M[m]=gi(S),M))}_syncPendingControls(){let M=this._reduceChildren(!1,(S,m)=>!!m._syncPendingControls()||S);return M&&this.updateValueAndValidity({onlySelf:!0}),M}_forEachChild(M){Object.keys(this.controls).forEach(S=>{const m=this.controls[S];m&&M(m,S)})}_setUpControls(){this._forEachChild(M=>{M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(M){for(const S of Object.keys(this.controls)){const m=this.controls[S];if(this.contains(S)&&M(m))return!0}return!1}_reduceValue(){return this._reduceChildren({},(M,S,m)=>((S.enabled||this.disabled)&&(M[m]=S.value),M))}_reduceChildren(M,S){let m=M;return this._forEachChild((C,K)=>{m=S(m,C,K)}),m}_allControlsDisabled(){for(const M of Object.keys(this.controls))if(this.controls[M].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Tn extends Fr{constructor(M,S,m){super(er(S),Vn(m,S)),this.controls=M,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(M){return this.controls[M]}push(M,S={}){this.controls.push(M),this._registerControl(M),this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}insert(M,S,m={}){this.controls.splice(M,0,S),this._registerControl(S),this.updateValueAndValidity({emitEvent:m.emitEvent})}removeAt(M,S={}){this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),this.controls.splice(M,1),this.updateValueAndValidity({emitEvent:S.emitEvent})}setControl(M,S,m={}){this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),this.controls.splice(M,1),S&&(this.controls.splice(M,0,S),this._registerControl(S)),this.updateValueAndValidity({emitEvent:m.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(M,S={}){sr(this,M),M.forEach((m,C)=>{Cr(this,C),this.at(C).setValue(m,{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(M,S={}){null!=M&&(M.forEach((m,C)=>{this.at(C)&&this.at(C).patchValue(m,{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(M=[],S={}){this._forEachChild((m,C)=>{m.reset(M[C],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this.controls.map(M=>gi(M))}clear(M={}){this.controls.length<1||(this._forEachChild(S=>S._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:M.emitEvent}))}_syncPendingControls(){let M=this.controls.reduce((S,m)=>!!m._syncPendingControls()||S,!1);return M&&this.updateValueAndValidity({onlySelf:!0}),M}_forEachChild(M){this.controls.forEach((S,m)=>{M(S,m)})}_updateValue(){this.value=this.controls.filter(M=>M.enabled||this.disabled).map(M=>M.value)}_anyControls(M){return this.controls.some(S=>S.enabled&&M(S))}_setUpControls(){this._forEachChild(M=>this._registerControl(M))}_allControlsDisabled(){for(const M of this.controls)if(M.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(M){M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange)}}const Bi={provide:sn,useExisting:(0,p.Gpc)(()=>br)},Vr=(()=>Promise.resolve(null))();let br=(()=>{class N extends sn{constructor(S,m){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new xn({},nn(S),Mn(m))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(S){Vr.then(()=>{const m=this._findContainer(S.path);S.control=m.registerControl(S.name,S.control),pn(S.control,S),S.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(S)})}getControl(S){return this.form.get(S.path)}removeControl(S){Vr.then(()=>{const m=this._findContainer(S.path);m&&m.removeControl(S.name),this._directives.delete(S)})}addFormGroup(S){Vr.then(()=>{const m=this._findContainer(S.path),C=new xn({});Rr(C,S),m.registerControl(S.name,C),C.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(S){Vr.then(()=>{const m=this._findContainer(S.path);m&&m.removeControl(S.name)})}getFormGroup(S){return this.form.get(S.path)}updateModel(S,m){Vr.then(()=>{this.form.get(S.path).setValue(m)})}setValue(S){this.control.setValue(S)}onSubmit(S){return this.submitted=!0,rr(this.form,this._directives),this.ngSubmit.emit(S),!1}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(S){return S.pop(),S.length?this.form.get(S):this.form}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(Ve,10),p.Y36($e,10))},N.\u0275dir=p.lG2({type:N,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(S,m){1&S&&p.NdJ("submit",function(K){return m.onSubmit(K)})("reset",function(){return m.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Bi]),p.qOj]}),N})();const ne={provide:wn,useExisting:(0,p.Gpc)(()=>st)},xe=(()=>Promise.resolve(null))();let st=(()=>{class N extends wn{constructor(S,m,C,K,ee){super(),this._changeDetectorRef=ee,this.control=new Lr,this._registered=!1,this.update=new p.vpe,this._parent=S,this._setValidators(m),this._setAsyncValidators(C),this.valueAccessor=qn(0,K)}ngOnChanges(S){if(this._checkForErrors(),!this._registered||"name"in S){if(this._registered&&(this._checkName(),this.formDirective)){const m=S.name.previousValue;this.formDirective.removeControl({name:m,path:this._getPath(m)})}this._setUpControl()}"isDisabled"in S&&this._updateDisabled(S),Xr(S,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(S){xe.then(()=>{var m;this.control.setValue(S,{emitViewToModelChange:!1}),null===(m=this._changeDetectorRef)||void 0===m||m.markForCheck()})}_updateDisabled(S){const m=S.isDisabled.currentValue,C=""===m||m&&"false"!==m;xe.then(()=>{var K;C&&!this.control.disabled?this.control.disable():!C&&this.control.disabled&&this.control.enable(),null===(K=this._changeDetectorRef)||void 0===K||K.markForCheck()})}_getPath(S){return this._parent?function Nt(N,M){return[...M.path,N]}(S,this._parent):[S]}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(sn,9),p.Y36(Ve,10),p.Y36($e,10),p.Y36(Ze,10),p.Y36(p.sBO,8))},N.\u0275dir=p.lG2({type:N,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([ne]),p.qOj,p.TTD]}),N})(),en=(()=>{class N{}return N.\u0275fac=function(S){return new(S||N)},N.\u0275dir=p.lG2({type:N,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),N})(),_t=(()=>{class N{}return N.\u0275fac=function(S){return new(S||N)},N.\u0275mod=p.oAB({type:N}),N.\u0275inj=p.cJS({}),N})();const mi=new p.OlP("NgModelWithFormControlWarning"),Di={provide:wn,useExisting:(0,p.Gpc)(()=>Ci)};let Ci=(()=>{class N extends wn{constructor(S,m,C,K){super(),this._ngModelWarningConfig=K,this.update=new p.vpe,this._ngModelWarningSent=!1,this._setValidators(S),this._setAsyncValidators(m),this.valueAccessor=qn(0,C)}set isDisabled(S){}ngOnChanges(S){if(this._isControlChanged(S)){const m=S.form.previousValue;m&&Kt(m,this,!1),pn(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Xr(S,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Kt(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}_isControlChanged(S){return S.hasOwnProperty("form")}}return N._ngModelWarningSentOnce=!1,N.\u0275fac=function(S){return new(S||N)(p.Y36(Ve,10),p.Y36($e,10),p.Y36(Ze,10),p.Y36(mi,8))},N.\u0275dir=p.lG2({type:N,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[p._Bn([Di]),p.qOj,p.TTD]}),N})();const os={provide:sn,useExisting:(0,p.Gpc)(()=>Ni)};let Ni=(()=>{class N extends sn{constructor(S,m){super(),this.validators=S,this.asyncValidators=m,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(S),this._setAsyncValidators(m)}ngOnChanges(S){this._checkFormPresent(),S.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(S){const m=this.form.get(S.path);return pn(m,S),m.updateValueAndValidity({emitEvent:!1}),this.directives.push(S),m}getControl(S){return this.form.get(S.path)}removeControl(S){Kt(S.control||null,S,!1),ir(this.directives,S)}addFormGroup(S){this._setUpFormContainer(S)}removeFormGroup(S){this._cleanUpFormContainer(S)}getFormGroup(S){return this.form.get(S.path)}addFormArray(S){this._setUpFormContainer(S)}removeFormArray(S){this._cleanUpFormContainer(S)}getFormArray(S){return this.form.get(S.path)}updateModel(S,m){this.form.get(S.path).setValue(m)}onSubmit(S){return this.submitted=!0,rr(this.form,this.directives),this.ngSubmit.emit(S),!1}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_updateDomValue(){this.directives.forEach(S=>{const m=S.control,C=this.form.get(S.path);m!==C&&(Kt(m||null,S),mn(C)&&(pn(C,S),S.control=C))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(S){const m=this.form.get(S.path);Rr(m,S),m.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(S){if(this.form){const m=this.form.get(S.path);m&&function yn(N,M){return qe(N,M)}(m,S)&&m.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ie(this.form,this),this._oldForm&&qe(this._oldForm,this)}_checkFormPresent(){}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(Ve,10),p.Y36($e,10))},N.\u0275dir=p.lG2({type:N,selectors:[["","formGroup",""]],hostBindings:function(S,m){1&S&&p.NdJ("submit",function(K){return m.onSubmit(K)})("reset",function(){return m.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([os]),p.qOj,p.TTD]}),N})();const Fs={provide:Ze,useExisting:(0,p.Gpc)(()=>Yi),multi:!0};function Cs(N,M){return null==N?`${M}`:(M&&"object"==typeof M&&(M="Object"),`${N}: ${M}`.slice(0,50))}let Yi=(()=>{class N extends Qe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(S){this._compareWith=S}writeValue(S){this.value=S;const C=Cs(this._getOptionId(S),S);this.setProperty("value",C)}registerOnChange(S){this.onChange=m=>{this.value=this._getOptionValue(m),S(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(S){for(const m of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(m),S))return m;return null}_getOptionValue(S){const m=function xs(N){return N.split(":")[0]}(S);return this._optionMap.has(m)?this._optionMap.get(m):S}}return N.\u0275fac=function(){let M;return function(m){return(M||(M=p.n5z(N)))(m||N)}}(),N.\u0275dir=p.lG2({type:N,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(S,m){1&S&&p.NdJ("change",function(K){return m.onChange(K.target.value)})("blur",function(){return m.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Fs]),p.qOj]}),N})(),Ti=(()=>{class N{constructor(S,m,C){this._element=S,this._renderer=m,this._select=C,this._select&&(this.id=this._select._registerOption())}set ngValue(S){null!=this._select&&(this._select._optionMap.set(this.id,S),this._setElementValue(Cs(this.id,S)),this._select.writeValue(this._select.value))}set value(S){this._setElementValue(S),this._select&&this._select.writeValue(this._select.value)}_setElementValue(S){this._renderer.setProperty(this._element.nativeElement,"value",S)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Yi,9))},N.\u0275dir=p.lG2({type:N,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),N})();const ps={provide:Ze,useExisting:(0,p.Gpc)(()=>Ai),multi:!0};function Qi(N,M){return null==N?`${M}`:("string"==typeof M&&(M=`'${M}'`),M&&"object"==typeof M&&(M="Object"),`${N}: ${M}`.slice(0,50))}let Ai=(()=>{class N extends Qe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(S){this._compareWith=S}writeValue(S){let m;if(this.value=S,Array.isArray(S)){const C=S.map(K=>this._getOptionId(K));m=(K,ee)=>{K._setSelected(C.indexOf(ee.toString())>-1)}}else m=(C,K)=>{C._setSelected(!1)};this._optionMap.forEach(m)}registerOnChange(S){this.onChange=m=>{const C=[],K=m.selectedOptions;if(void 0!==K){const ee=K;for(let De=0;De<ee.length;De++){const it=this._getOptionValue(ee[De].value);C.push(it)}}else{const ee=m.options;for(let De=0;De<ee.length;De++){const Ke=ee[De];if(Ke.selected){const it=this._getOptionValue(Ke.value);C.push(it)}}}this.value=C,S(C)}}_registerOption(S){const m=(this._idCounter++).toString();return this._optionMap.set(m,S),m}_getOptionId(S){for(const m of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(m)._value,S))return m;return null}_getOptionValue(S){const m=function Ur(N){return N.split(":")[0]}(S);return this._optionMap.has(m)?this._optionMap.get(m)._value:S}}return N.\u0275fac=function(){let M;return function(m){return(M||(M=p.n5z(N)))(m||N)}}(),N.\u0275dir=p.lG2({type:N,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(S,m){1&S&&p.NdJ("change",function(K){return m.onChange(K.target)})("blur",function(){return m.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([ps]),p.qOj]}),N})(),ls=(()=>{class N{constructor(S,m,C){this._element=S,this._renderer=m,this._select=C,this._select&&(this.id=this._select._registerOption(this))}set ngValue(S){null!=this._select&&(this._value=S,this._setElementValue(Qi(this.id,S)),this._select.writeValue(this._select.value))}set value(S){this._select?(this._value=S,this._setElementValue(Qi(this.id,S)),this._select.writeValue(this._select.value)):this._setElementValue(S)}_setElementValue(S){this._renderer.setProperty(this._element.nativeElement,"value",S)}_setSelected(S){this._renderer.setProperty(this._element.nativeElement,"selected",S)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Ai,9))},N.\u0275dir=p.lG2({type:N,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),N})(),ti=(()=>{class N{constructor(){this._validator=mt}ngOnChanges(S){if(this.inputName in S){const m=this.normalizeInput(S[this.inputName].currentValue);this._enabled=this.enabled(m),this._validator=this._enabled?this.createValidator(m):mt,this._onChange&&this._onChange()}}validate(S){return this._validator(S)}registerOnValidatorChange(S){this._onChange=S}enabled(S){return null!=S}}return N.\u0275fac=function(S){return new(S||N)},N.\u0275dir=p.lG2({type:N,features:[p.TTD]}),N})();const H={provide:Ve,useExisting:(0,p.Gpc)(()=>Z),multi:!0};let Z=(()=>{class N extends ti{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=S=>function bs(N){return null!=N&&!1!==N&&"false"!=`${N}`}(S),this.createValidator=S=>pe}enabled(S){return S}}return N.\u0275fac=function(){let M;return function(m){return(M||(M=p.n5z(N)))(m||N)}}(),N.\u0275dir=p.lG2({type:N,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(S,m){2&S&&p.uIk("required",m._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([H]),p.qOj]}),N})();const En={provide:Ve,useExisting:(0,p.Gpc)(()=>vr),multi:!0};let vr=(()=>{class N extends ti{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=S=>S,this.createValidator=S=>Wt(S)}}return N.\u0275fac=function(){let M;return function(m){return(M||(M=p.n5z(N)))(m||N)}}(),N.\u0275dir=p.lG2({type:N,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(S,m){2&S&&p.uIk("pattern",m._enabled?m.pattern:null)},inputs:{pattern:"pattern"},features:[p._Bn([En]),p.qOj]}),N})(),ni=(()=>{class N{}return N.\u0275fac=function(S){return new(S||N)},N.\u0275mod=p.oAB({type:N}),N.\u0275inj=p.cJS({imports:[[_t]]}),N})(),un=(()=>{class N{}return N.\u0275fac=function(S){return new(S||N)},N.\u0275mod=p.oAB({type:N}),N.\u0275inj=p.cJS({imports:[ni]}),N})(),ji=(()=>{class N{static withConfig(S){return{ngModule:N,providers:[{provide:mi,useValue:S.warnOnNgModelWithFormControl}]}}}return N.\u0275fac=function(S){return new(S||N)},N.\u0275mod=p.oAB({type:N}),N.\u0275inj=p.cJS({imports:[ni]}),N})()},7565:(Tt,We,F)=>{F.d(We,{gz:()=>Tn,gk:()=>lr,m2:()=>Mn,GH:()=>wn,xV:()=>Ht,F0:()=>Mi,Od:()=>aa,yS:()=>es,Bz:()=>Ko,lC:()=>ls});var p=F(5e3),q=F(9751),Q=F(4742),Ee=F(8996),ye=F(4671),Se=F(3268),Oe=F(3269),Pe=F(1810),Ne=F(5403),ce=F(9672);function ut(I,E,v){I?(0,ce.f)(v,I,E):E()}var Qe=F(576);function Ze(I,E){const v=(0,Qe.m)(I)?I:()=>I,R=k=>k.error(v());return new q.y(E?k=>E.schedule(R,0,k):R)}var gt=F(8421);function ze(I){return new q.y(E=>{(0,gt.Xf)(I()).subscribe(E)})}var Le=F(727),Et=F(4482);function j(){return(0,Et.e)((I,E)=>{let v=null;I._refCount++;const R=(0,Ne.x)(E,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(v=null);const k=I._connection,$=v;v=null,k&&(!$||k===$)&&k.unsubscribe(),E.unsubscribe()});I.subscribe(R),R.closed||(v=I.connect())})}class U extends q.y{constructor(E,v){super(),this.source=E,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,Et.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,null==E||E.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new Le.w0;const v=this.getSubject();E.add(this.source.subscribe((0,Ne.x)(v,void 0,()=>{this._teardown(),v.complete()},R=>{this._teardown(),v.error(R)},()=>this._teardown()))),E.closed&&(this._connection=null,E=Le.w0.EMPTY)}return E}refCount(){return j()(this)}}var Y=F(9646),ve=F(1135),Ve=F(6805),$e=F(7272),ke=F(515),we=F(7579);function X(I){return(0,Et.e)((E,v)=>{let $,R=null,k=!1;R=E.subscribe((0,Ne.x)(v,void 0,void 0,oe=>{$=(0,gt.Xf)(I(oe,X(I)(E))),R?(R.unsubscribe(),R=null,$.subscribe(v)):k=!0})),k&&(R.unsubscribe(),R=null,$.subscribe(v))})}var Ce=F(5577);function pe(I,E){return(0,Qe.m)(E)?(0,Ce.z)(I,E,1):(0,Ce.z)(I,1)}var Ge=F(4004),Ue=F(3900),Vt=F(5698),wt=F(8675),Wt=F(5026),mt=F(9300),Dt=F(3103),$t=F(590),It=F(8505),xt=F(2035),lt=F(8746),ln=F(8189),kt=F(9808);class nn{constructor(E,v){this.id=E,this.url=v}}class Hn extends nn{constructor(E,v,R="imperative",k=null){super(E,v),this.navigationTrigger=R,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mn extends nn{constructor(E,v,R){super(E,v),this.urlAfterRedirects=R}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lr extends nn{constructor(E,v,R){super(E,v),this.reason=R}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tr extends nn{constructor(E,v,R){super(E,v),this.error=R}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Er extends nn{constructor(E,v,R,k){super(E,v),this.urlAfterRedirects=R,this.state=k}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gn extends nn{constructor(E,v,R,k){super(E,v),this.urlAfterRedirects=R,this.state=k}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wr extends nn{constructor(E,v,R,k,$){super(E,v),this.urlAfterRedirects=R,this.state=k,this.shouldActivate=$}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ln extends nn{constructor(E,v,R,k){super(E,v),this.urlAfterRedirects=R,this.state=k}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ut extends nn{constructor(E,v,R,k){super(E,v),this.urlAfterRedirects=R,this.state=k}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ht{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wn{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sn{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pr{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pi{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nr{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ir{constructor(E,v,R){this.routerEvent=E,this.position=v,this.anchor=R}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const an="primary";class Hr{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const v=this.params[E];return Array.isArray(v)?v[0]:v}return null}getAll(E){if(this.has(E)){const v=this.params[E];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function gn(I){return new Hr(I)}const Ot="ngNavigationCancelingError";function Zt(I){const E=Error("NavigationCancelingError: "+I);return E[Ot]=!0,E}function Qr(I,E,v){const R=v.path.split("/");if(R.length>I.length||"full"===v.pathMatch&&(E.hasChildren()||R.length<I.length))return null;const k={};for(let $=0;$<R.length;$++){const oe=R[$],te=I[$];if(oe.startsWith(":"))k[oe.substring(1)]=te;else if(oe!==te.path)return null}return{consumed:I.slice(0,R.length),posParams:k}}function Dr(I,E){const v=I?Object.keys(I):void 0,R=E?Object.keys(E):void 0;if(!v||!R||v.length!=R.length)return!1;let k;for(let $=0;$<v.length;$++)if(k=v[$],!pr(I[k],E[k]))return!1;return!0}function pr(I,E){if(Array.isArray(I)&&Array.isArray(E)){if(I.length!==E.length)return!1;const v=[...I].sort(),R=[...E].sort();return v.every((k,$)=>R[$]===k)}return I===E}function xr(I){return Array.prototype.concat.apply([],I)}function Yt(I){return I.length>0?I[I.length-1]:null}function Xt(I,E){for(const v in I)I.hasOwnProperty(v)&&E(I[v],v)}function Ct(I){return(0,p.CqO)(I)?I:(0,p.QGY)(I)?(0,Ee.D)(Promise.resolve(I)):(0,Y.of)(I)}const Pt={exact:function ge(I,E,v){if(!yn(I.segments,E.segments)||!Fe(I.segments,E.segments,v)||I.numberOfChildren!==E.numberOfChildren)return!1;for(const R in E.children)if(!I.children[R]||!ge(I.children[R],E.children[R],v))return!1;return!0},subset:Ie},Nt={exact:function Kt(I,E){return Dr(I,E)},subset:function ae(I,E){return Object.keys(E).length<=Object.keys(I).length&&Object.keys(E).every(v=>pr(I[v],E[v]))},ignored:()=>!0};function pn(I,E,v){return Pt[v.paths](I.root,E.root,v.matrixParams)&&Nt[v.queryParams](I.queryParams,E.queryParams)&&!("exact"===v.fragment&&I.fragment!==E.fragment)}function Ie(I,E,v){return qe(I,E,E.segments,v)}function qe(I,E,v,R){if(I.segments.length>v.length){const k=I.segments.slice(0,v.length);return!(!yn(k,v)||E.hasChildren()||!Fe(k,v,R))}if(I.segments.length===v.length){if(!yn(I.segments,v)||!Fe(I.segments,v,R))return!1;for(const k in E.children)if(!I.children[k]||!Ie(I.children[k],E.children[k],R))return!1;return!0}{const k=v.slice(0,I.segments.length),$=v.slice(I.segments.length);return!!(yn(I.segments,k)&&Fe(I.segments,k,R)&&I.children[an])&&qe(I.children[an],E,$,R)}}function Fe(I,E,v){return E.every((R,k)=>Nt[v](I[k].parameters,R.parameters))}class yt{constructor(E,v,R){this.root=E,this.queryParams=v,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gn(this.queryParams)),this._queryParamMap}toString(){return yr.serialize(this)}}class pt{constructor(E,v){this.segments=E,this.children=v,this.parent=null,Xt(v,(R,k)=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xr(this)}}class Cn{constructor(E,v){this.path=E,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=gn(this.parameters)),this._parameterMap}toString(){return Ft(this)}}function yn(I,E){return I.length===E.length&&I.every((v,R)=>v.path===E[R].path)}class Jt{}class Nn{parse(E){const v=new mn(E);return new yt(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(E){const v=`/${wi(E.root,!0)}`,R=function Jn(I){const E=Object.keys(I).map(v=>{const R=I[v];return Array.isArray(R)?R.map(k=>`${qn(v)}=${qn(k)}`).join("&"):`${qn(v)}=${qn(R)}`}).filter(v=>!!v);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${v}${R}${"string"==typeof E.fragment?`#${function ir(I){return encodeURI(I)}(E.fragment)}`:""}`}}const yr=new Nn;function Xr(I){return I.segments.map(E=>Ft(E)).join("/")}function wi(I,E){if(!I.hasChildren())return Xr(I);if(E){const v=I.children[an]?wi(I.children[an],!1):"",R=[];return Xt(I.children,(k,$)=>{$!==an&&R.push(`${$}:${wi(k,!1)}`)}),R.length>0?`${v}(${R.join("//")})`:v}{const v=function Xn(I,E){let v=[];return Xt(I.children,(R,k)=>{k===an&&(v=v.concat(E(R,k)))}),Xt(I.children,(R,k)=>{k!==an&&(v=v.concat(E(R,k)))}),v}(I,(R,k)=>k===an?[wi(I.children[an],!1)]:[`${k}:${wi(R,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[an]?`${Xr(I)}/${v[0]}`:`${Xr(I)}/(${v.join("//")})`}}function rr(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qn(I){return rr(I).replace(/%3B/gi,";")}function Ii(I){return rr(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Or(I){return decodeURIComponent(I)}function ct(I){return Or(I.replace(/\+/g,"%20"))}function Ft(I){return`${Ii(I.path)}${function cn(I){return Object.keys(I).map(E=>`;${Ii(E)}=${Ii(I[E])}`).join("")}(I.parameters)}`}const li=/^[^\/()?;=#]+/;function er(I){const E=I.match(li);return E?E[0]:""}const ci=/^[^=?&#]+/,_r=/^[^&#]+/;class mn{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pt([],{}):new pt([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(E.length>0||Object.keys(v).length>0)&&(R[an]=new pt(E,v)),R}parseSegment(){const E=er(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new Cn(Or(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const v=er(this.remaining);if(!v)return;this.capture(v);let R="";if(this.consumeOptional("=")){const k=er(this.remaining);k&&(R=k,this.capture(R))}E[Or(v)]=Or(R)}parseQueryParam(E){const v=function Vn(I){const E=I.match(ci);return E?E[0]:""}(this.remaining);if(!v)return;this.capture(v);let R="";if(this.consumeOptional("=")){const oe=function di(I){const E=I.match(_r);return E?E[0]:""}(this.remaining);oe&&(R=oe,this.capture(R))}const k=ct(v),$=ct(R);if(E.hasOwnProperty(k)){let oe=E[k];Array.isArray(oe)||(oe=[oe],E[k]=oe),oe.push($)}else E[k]=$}parseParens(E){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=er(this.remaining),k=this.remaining[R.length];if("/"!==k&&")"!==k&&";"!==k)throw new Error(`Cannot parse url '${this.url}'`);let $;R.indexOf(":")>-1?($=R.substr(0,R.indexOf(":")),this.capture($),this.capture(":")):E&&($=an);const oe=this.parseChildren();v[$]=1===Object.keys(oe).length?oe[an]:new pt([],oe),this.consumeOptional("//")}return v}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class Nr{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const v=this.pathFromRoot(E);return v.length>1?v[v.length-2]:null}children(E){const v=hi(E,this._root);return v?v.children.map(R=>R.value):[]}firstChild(E){const v=hi(E,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(E){const v=gi(E,this._root);return v.length<2?[]:v[v.length-2].children.map(k=>k.value).filter(k=>k!==E)}pathFromRoot(E){return gi(E,this._root).map(v=>v.value)}}function hi(I,E){if(I===E.value)return E;for(const v of E.children){const R=hi(I,v);if(R)return R}return null}function gi(I,E){if(I===E.value)return[E];for(const v of E.children){const R=gi(I,v);if(R.length)return R.unshift(E),R}return[]}class Cr{constructor(E,v){this.value=E,this.children=v}toString(){return`TreeNode(${this.value})`}}function sr(I){const E={};return I&&I.children.forEach(v=>E[v.value.outlet]=v),E}class Fr extends Nr{constructor(E,v){super(E),this.snapshot=v,hs(this,E)}toString(){return this.snapshot.toString()}}function Lr(I,E){const v=function xn(I,E){const oe=new br([],{},{},"",{},an,E,null,I.root,-1,{});return new zr("",new Cr(oe,[]))}(I,E),R=new ve.X([new Cn("",{})]),k=new ve.X({}),$=new ve.X({}),oe=new ve.X({}),te=new ve.X(""),se=new Tn(R,k,oe,te,$,an,E,v.root);return se.snapshot=v.root,new Fr(new Cr(se,[]),v)}class Tn{constructor(E,v,R,k,$,oe,te,se){this.url=E,this.params=v,this.queryParams=R,this.fragment=k,this.data=$,this.outlet=oe,this.component=te,this._futureSnapshot=se}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ge.U)(E=>gn(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ge.U)(E=>gn(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bi(I,E="emptyOnly"){const v=I.pathFromRoot;let R=0;if("always"!==E)for(R=v.length-1;R>=1;){const k=v[R],$=v[R-1];if(k.routeConfig&&""===k.routeConfig.path)R--;else{if($.component)break;R--}}return function Vr(I){return I.reduce((E,v)=>({params:Object.assign(Object.assign({},E.params),v.params),data:Object.assign(Object.assign({},E.data),v.data),resolve:Object.assign(Object.assign({},E.resolve),v._resolvedData)}),{params:{},data:{},resolve:{}})}(v.slice(R))}class br{constructor(E,v,R,k,$,oe,te,se,je,dn,zt){this.url=E,this.params=v,this.queryParams=R,this.fragment=k,this.data=$,this.outlet=oe,this.component=te,this.routeConfig=se,this._urlSegment=je,this._lastPathIndex=dn,this._resolve=zt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zr extends Nr{constructor(E,v){super(v),this.url=E,hs(this,v)}toString(){return gr(this._root)}}function hs(I,E){E.value._routerState=I,E.children.forEach(v=>hs(I,v))}function gr(I){const E=I.children.length>0?` { ${I.children.map(gr).join(", ")} } `:"";return`${I.value}${E}`}function fs(I){if(I.snapshot){const E=I.snapshot,v=I._futureSnapshot;I.snapshot=v,Dr(E.queryParams,v.queryParams)||I.queryParams.next(v.queryParams),E.fragment!==v.fragment&&I.fragment.next(v.fragment),Dr(E.params,v.params)||I.params.next(v.params),function fn(I,E){if(I.length!==E.length)return!1;for(let v=0;v<I.length;++v)if(!Dr(I[v],E[v]))return!1;return!0}(E.url,v.url)||I.url.next(v.url),Dr(E.data,v.data)||I.data.next(v.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function Kr(I,E){const v=Dr(I.params,E.params)&&function Rr(I,E){return yn(I,E)&&I.every((v,R)=>Dr(v.parameters,E[R].parameters))}(I.url,E.url);return v&&!(!I.parent!=!E.parent)&&(!I.parent||Kr(I.parent,E.parent))}function fe(I,E,v){if(v&&I.shouldReuseRoute(E.value,v.value.snapshot)){const R=v.value;R._futureSnapshot=E.value;const k=function ne(I,E,v){return E.children.map(R=>{for(const k of v.children)if(I.shouldReuseRoute(R.value,k.value.snapshot))return fe(I,R,k);return fe(I,R)})}(I,E,v);return new Cr(R,k)}{if(I.shouldAttach(E.value)){const $=I.retrieve(E.value);if(null!==$){const oe=$.route;return oe.value._futureSnapshot=E.value,oe.children=E.children.map(te=>fe(I,te)),oe}}const R=function xe(I){return new Tn(new ve.X(I.url),new ve.X(I.params),new ve.X(I.queryParams),new ve.X(I.fragment),new ve.X(I.data),I.outlet,I.component,I)}(E.value),k=E.children.map($=>fe(I,$));return new Cr(R,k)}}function en(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function de(I){return"object"==typeof I&&null!=I&&I.outlets}function _e(I,E,v,R,k){let $={};if(R&&Xt(R,(te,se)=>{$[se]=Array.isArray(te)?te.map(je=>`${je}`):`${te}`}),I===E)return new yt(v,$,k);const oe=Be(I,E,v);return new yt(oe,$,k)}function Be(I,E,v){const R={};return Xt(I.children,(k,$)=>{R[$]=k===E?v:Be(k,E,v)}),new pt(I.segments,R)}class nt{constructor(E,v,R){if(this.isAbsolute=E,this.numberOfDoubleDots=v,this.commands=R,E&&R.length>0&&en(R[0]))throw new Error("Root segment cannot have matrix parameters");const k=R.find(de);if(k&&k!==Yt(R))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bt{constructor(E,v,R){this.segmentGroup=E,this.processChildren=v,this.index=R}}function mi(I,E,v){if(I||(I=new pt([],{})),0===I.segments.length&&I.hasChildren())return Di(I,E,v);const R=function Ci(I,E,v){let R=0,k=E;const $={match:!1,pathIndex:0,commandIndex:0};for(;k<I.segments.length;){if(R>=v.length)return $;const oe=I.segments[k],te=v[R];if(de(te))break;const se=`${te}`,je=R<v.length-1?v[R+1]:null;if(k>0&&void 0===se)break;if(se&&je&&"object"==typeof je&&void 0===je.outlets){if(!as(se,je,oe))return $;R+=2}else{if(!as(se,{},oe))return $;R++}k++}return{match:!0,pathIndex:k,commandIndex:R}}(I,E,v),k=v.slice(R.commandIndex);if(R.match&&R.pathIndex<I.segments.length){const $=new pt(I.segments.slice(0,R.pathIndex),{});return $.children[an]=new pt(I.segments.slice(R.pathIndex),I.children),Di($,0,k)}return R.match&&0===k.length?new pt(I.segments,{}):R.match&&!I.hasChildren()?os(I,E,v):R.match?Di(I,0,k):os(I,E,v)}function Di(I,E,v){if(0===v.length)return new pt(I.segments,{});{const R=function Bn(I){return de(I[0])?I[0].outlets:{[an]:I}}(v),k={};return Xt(R,($,oe)=>{"string"==typeof $&&($=[$]),null!==$&&(k[oe]=mi(I.children[oe],E,$))}),Xt(I.children,($,oe)=>{void 0===R[oe]&&(k[oe]=$)}),new pt(I.segments,k)}}function os(I,E,v){const R=I.segments.slice(0,E);let k=0;for(;k<v.length;){const $=v[k];if(de($)){const se=Ni($.outlets);return new pt(R,se)}if(0===k&&en(v[0])){R.push(new Cn(I.segments[E].path,Ns(v[0]))),k++;continue}const oe=de($)?$.outlets[an]:`${$}`,te=k<v.length-1?v[k+1]:null;oe&&te&&en(te)?(R.push(new Cn(oe,Ns(te))),k+=2):(R.push(new Cn(oe,{})),k++)}return new pt(R,{})}function Ni(I){const E={};return Xt(I,(v,R)=>{"string"==typeof v&&(v=[v]),null!==v&&(E[R]=os(new pt([],{}),0,v))}),E}function Ns(I){const E={};return Xt(I,(v,R)=>E[R]=`${v}`),E}function as(I,E,v){return I==v.path&&Dr(E,v.parameters)}class Jr{constructor(E,v,R,k){this.routeReuseStrategy=E,this.futureState=v,this.currState=R,this.forwardEvent=k}activate(E){const v=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,R,E),fs(this.futureState.root),this.activateChildRoutes(v,R,E)}deactivateChildRoutes(E,v,R){const k=sr(v);E.children.forEach($=>{const oe=$.value.outlet;this.deactivateRoutes($,k[oe],R),delete k[oe]}),Xt(k,($,oe)=>{this.deactivateRouteAndItsChildren($,R)})}deactivateRoutes(E,v,R){const k=E.value,$=v?v.value:null;if(k===$)if(k.component){const oe=R.getContext(k.outlet);oe&&this.deactivateChildRoutes(E,v,oe.children)}else this.deactivateChildRoutes(E,v,R);else $&&this.deactivateRouteAndItsChildren(v,R)}deactivateRouteAndItsChildren(E,v){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,v):this.deactivateRouteAndOutlet(E,v)}detachAndStoreRouteSubtree(E,v){const R=v.getContext(E.value.outlet),k=R&&E.value.component?R.children:v,$=sr(E);for(const oe of Object.keys($))this.deactivateRouteAndItsChildren($[oe],k);if(R&&R.outlet){const oe=R.outlet.detach(),te=R.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:oe,route:E,contexts:te})}}deactivateRouteAndOutlet(E,v){const R=v.getContext(E.value.outlet),k=R&&E.value.component?R.children:v,$=sr(E);for(const oe of Object.keys($))this.deactivateRouteAndItsChildren($[oe],k);R&&R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated(),R.attachRef=null,R.resolver=null,R.route=null)}activateChildRoutes(E,v,R){const k=sr(v);E.children.forEach($=>{this.activateRoutes($,k[$.value.outlet],R),this.forwardEvent(new nr($.value.snapshot))}),E.children.length&&this.forwardEvent(new Pr(E.value.snapshot))}activateRoutes(E,v,R){const k=E.value,$=v?v.value:null;if(fs(k),k===$)if(k.component){const oe=R.getOrCreateContext(k.outlet);this.activateChildRoutes(E,v,oe.children)}else this.activateChildRoutes(E,v,R);else if(k.component){const oe=R.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const te=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),oe.children.onOutletReAttached(te.contexts),oe.attachRef=te.componentRef,oe.route=te.route.value,oe.outlet&&oe.outlet.attach(te.componentRef,te.route.value),fs(te.route.value),this.activateChildRoutes(E,null,oe.children)}else{const te=function us(I){for(let E=I.parent;E;E=E.parent){const v=E.routeConfig;if(v&&v._loadedConfig)return v._loadedConfig;if(v&&v.component)return null}return null}(k.snapshot),se=te?te.module.componentFactoryResolver:null;oe.attachRef=null,oe.route=k,oe.resolver=se,oe.outlet&&oe.outlet.activateWith(k,se),this.activateChildRoutes(E,null,oe.children)}}else this.activateChildRoutes(E,null,R)}}class Fi{constructor(E,v){this.routes=E,this.module=v}}function ei(I){return"function"==typeof I}function Cs(I){return I instanceof yt}const Qi=Symbol("INITIAL_VALUE");function Ur(){return(0,Ue.w)(I=>function ie(...I){const E=(0,Oe.yG)(I),v=(0,Oe.jO)(I),{args:R,keys:k}=(0,Q.D)(I);if(0===R.length)return(0,Ee.D)([],E);const $=new q.y(function Te(I,E,v=ye.y){return R=>{ut(E,()=>{const{length:k}=I,$=new Array(k);let oe=k,te=k;for(let se=0;se<k;se++)ut(E,()=>{const je=(0,Ee.D)(I[se],E);let dn=!1;je.subscribe((0,Ne.x)(R,zt=>{$[se]=zt,dn||(dn=!0,te--),te||R.next(v($.slice()))},()=>{--oe||R.complete()}))},R)},R)}}(R,E,k?oe=>(0,Pe.n)(k,oe):ye.y));return v?$.pipe((0,Se.Z)(v)):$}(I.map(E=>E.pipe((0,Vt.q)(1),(0,wt.O)(Qi)))).pipe((0,Wt.R)((E,v)=>{let R=!1;return v.reduce((k,$,oe)=>k!==Qi?k:($===Qi&&(R=!0),R||!1!==$&&oe!==v.length-1&&!Cs($)?k:$),E)},Qi),(0,mt.h)(E=>E!==Qi),(0,Ge.U)(E=>Cs(E)?E:!0===E),(0,Vt.q)(1)))}class qr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ai,this.attachRef=null}}class Ai{constructor(){this.contexts=new Map}onChildOutletCreated(E,v){const R=this.getOrCreateContext(E);R.outlet=v,this.contexts.set(E,R)}onChildOutletDestroyed(E){const v=this.getContext(E);v&&(v.outlet=null,v.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let v=this.getContext(E);return v||(v=new qr,this.contexts.set(E,v)),v}getContext(E){return this.contexts.get(E)||null}}let ls=(()=>{class I{constructor(v,R,k,$,oe){this.parentContexts=v,this.location=R,this.resolver=k,this.changeDetector=oe,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=$||an,v.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const v=this.parentContexts.getContext(this.name);v&&v.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,R){this.activated=v,this._activatedRoute=R,this.location.insert(v.hostView),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,R){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=v;const oe=(R=R||this.resolver).resolveComponentFactory(v._futureSnapshot.routeConfig.component),te=this.parentContexts.getOrCreateContext(this.name).children,se=new Gs(v,te,this.location.injector);this.activated=this.location.createComponent(oe,this.location.length,se),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(v){return new(v||I)(p.Y36(Ai),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},I.\u0275dir=p.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),I})();class Gs{constructor(E,v,R){this.route=E,this.childContexts=v,this.parent=R}get(E,v){return E===Tn?this.route:E===Ai?this.childContexts:this.parent.get(E,v)}}let bs=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275cmp=p.Xpm({type:I,selectors:[["ng-component"]],decls:1,vars:0,template:function(v,R){1&v&&p._UZ(0,"router-outlet")},directives:[ls],encapsulation:2}),I})();function Xi(I,E=""){for(let v=0;v<I.length;v++){const R=I[v];ti(R,Ji(E,R))}}function ti(I,E){I.children&&Xi(I.children,E)}function Ji(I,E){return E?I||E.path?I&&!E.path?`${I}/`:!I&&E.path?E.path:`${I}/${E.path}`:"":I}function Rs(I){const E=I.children&&I.children.map(Rs),v=E?Object.assign(Object.assign({},I),{children:E}):Object.assign({},I);return!v.component&&(E||v.loadChildren)&&v.outlet&&v.outlet!==an&&(v.component=bs),v}function Rn(I){return I.outlet||an}function O(I,E){const v=I.filter(R=>Rn(R)===E);return v.push(...I.filter(R=>Rn(R)!==E)),v}const H={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function x(I,E,v){var R;if(""===E.path)return"full"===E.pathMatch&&(I.hasChildren()||v.length>0)?Object.assign({},H):{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const $=(E.matcher||Qr)(v,I,E);if(!$)return Object.assign({},H);const oe={};Xt($.posParams,(se,je)=>{oe[je]=se.path});const te=$.consumed.length>0?Object.assign(Object.assign({},oe),$.consumed[$.consumed.length-1].parameters):oe;return{matched:!0,consumedSegments:$.consumed,remainingSegments:v.slice($.consumed.length),parameters:te,positionalParamSegments:null!==(R=$.posParams)&&void 0!==R?R:{}}}function Z(I,E,v,R,k="corrected"){if(v.length>0&&function et(I,E,v){return v.some(R=>Wn(I,E,R)&&Rn(R)!==an)}(I,v,R)){const oe=new pt(E,function Je(I,E,v,R){const k={};k[an]=R,R._sourceSegment=I,R._segmentIndexShift=E.length;for(const $ of v)if(""===$.path&&Rn($)!==an){const oe=new pt([],{});oe._sourceSegment=I,oe._segmentIndexShift=E.length,k[Rn($)]=oe}return k}(I,E,R,new pt(v,I.children)));return oe._sourceSegment=I,oe._segmentIndexShift=E.length,{segmentGroup:oe,slicedSegments:[]}}if(0===v.length&&function bt(I,E,v){return v.some(R=>Wn(I,E,R))}(I,v,R)){const oe=new pt(I.segments,function me(I,E,v,R,k,$){const oe={};for(const te of R)if(Wn(I,v,te)&&!k[Rn(te)]){const se=new pt([],{});se._sourceSegment=I,se._segmentIndexShift="legacy"===$?I.segments.length:E.length,oe[Rn(te)]=se}return Object.assign(Object.assign({},k),oe)}(I,E,v,R,I.children,k));return oe._sourceSegment=I,oe._segmentIndexShift=E.length,{segmentGroup:oe,slicedSegments:v}}const $=new pt(I.segments,I.children);return $._sourceSegment=I,$._segmentIndexShift=E.length,{segmentGroup:$,slicedSegments:v}}function Wn(I,E,v){return(!(I.hasChildren()||E.length>0)||"full"!==v.pathMatch)&&""===v.path}function jn(I,E,v,R){return!!(Rn(I)===R||R!==an&&Wn(E,v,I))&&("**"===I.path||x(E,I,v).matched)}function vn(I,E,v){return 0===E.length&&!I.children[v]}class En{constructor(E){this.segmentGroup=E||null}}class vr{constructor(E){this.urlTree=E}}function Qn(I){return Ze(new En(I))}function cr(I){return Ze(new vr(I))}class ji{constructor(E,v,R,k,$){this.configLoader=v,this.urlSerializer=R,this.urlTree=k,this.config=$,this.allowRedirects=!0,this.ngModule=E.get(p.h0i)}apply(){const E=Z(this.urlTree.root,[],[],this.config).segmentGroup,v=new pt(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,v,an).pipe((0,Ge.U)($=>this.createUrlTree(Ts($),this.urlTree.queryParams,this.urlTree.fragment))).pipe(X($=>{if($ instanceof vr)return this.allowRedirects=!1,this.match($.urlTree);throw $ instanceof En?this.noMatchError($):$}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,an).pipe((0,Ge.U)(k=>this.createUrlTree(Ts(k),E.queryParams,E.fragment))).pipe(X(k=>{throw k instanceof En?this.noMatchError(k):k}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,v,R){const k=E.segments.length>0?new pt([],{[an]:E}):E;return new yt(k,v,R)}expandSegmentGroup(E,v,R,k){return 0===R.segments.length&&R.hasChildren()?this.expandChildren(E,v,R).pipe((0,Ge.U)($=>new pt([],$))):this.expandSegment(E,R,v,R.segments,k,!0)}expandChildren(E,v,R){const k=[];for(const $ of Object.keys(R.children))"primary"===$?k.unshift($):k.push($);return(0,Ee.D)(k).pipe(pe($=>{const oe=R.children[$],te=O(v,$);return this.expandSegmentGroup(E,te,oe,$).pipe((0,Ge.U)(se=>({segment:se,outlet:$})))}),(0,Wt.R)(($,oe)=>($[oe.outlet]=oe.segment,$),{}),(0,Dt.Z)())}expandSegment(E,v,R,k,$,oe){return(0,Ee.D)(R).pipe(pe(te=>this.expandSegmentAgainstRoute(E,v,R,te,k,$,oe).pipe(X(je=>{if(je instanceof En)return(0,Y.of)(null);throw je}))),(0,$t.P)(te=>!!te),X((te,se)=>{if(te instanceof Ve.K||"EmptyError"===te.name)return vn(v,k,$)?(0,Y.of)(new pt([],{})):Qn(v);throw te}))}expandSegmentAgainstRoute(E,v,R,k,$,oe,te){return jn(k,v,$,oe)?void 0===k.redirectTo?this.matchSegmentAgainstRoute(E,v,k,$,oe):te&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,v,R,k,$,oe):Qn(v):Qn(v)}expandSegmentAgainstRouteUsingRedirect(E,v,R,k,$,oe){return"**"===k.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,R,k,oe):this.expandRegularSegmentAgainstRouteUsingRedirect(E,v,R,k,$,oe)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,v,R,k){const $=this.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?cr($):this.lineralizeSegments(R,$).pipe((0,Ce.z)(oe=>{const te=new pt(oe,{});return this.expandSegment(E,te,v,oe,k,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,v,R,k,$,oe){const{matched:te,consumedSegments:se,remainingSegments:je,positionalParamSegments:dn}=x(v,k,$);if(!te)return Qn(v);const zt=this.applyRedirectCommands(se,k.redirectTo,dn);return k.redirectTo.startsWith("/")?cr(zt):this.lineralizeSegments(k,zt).pipe((0,Ce.z)(Ar=>this.expandSegment(E,v,R,Ar.concat(je),oe,!1)))}matchSegmentAgainstRoute(E,v,R,k,$){if("**"===R.path)return R.loadChildren?(R._loadedConfig?(0,Y.of)(R._loadedConfig):this.configLoader.load(E.injector,R)).pipe((0,Ge.U)(zt=>(R._loadedConfig=zt,new pt(k,{})))):(0,Y.of)(new pt(k,{}));const{matched:oe,consumedSegments:te,remainingSegments:se}=x(v,R,k);return oe?this.getChildConfig(E,R,k).pipe((0,Ce.z)(dn=>{const zt=dn.module,Ar=dn.routes,{segmentGroup:or,slicedSegments:Bs}=Z(v,te,se,Ar),ts=new pt(or.segments,or.children);if(0===Bs.length&&ts.hasChildren())return this.expandChildren(zt,Ar,ts).pipe((0,Ge.U)(Po=>new pt(te,Po)));if(0===Ar.length&&0===Bs.length)return(0,Y.of)(new pt(te,{}));const Ra=Rn(R)===$;return this.expandSegment(zt,ts,Ar,Bs,Ra?an:$,!0).pipe((0,Ge.U)(Eo=>new pt(te.concat(Eo.segments),Eo.children)))})):Qn(v)}getChildConfig(E,v,R){return v.children?(0,Y.of)(new Fi(v.children,E)):v.loadChildren?void 0!==v._loadedConfig?(0,Y.of)(v._loadedConfig):this.runCanLoadGuards(E.injector,v,R).pipe((0,Ce.z)(k=>k?this.configLoader.load(E.injector,v).pipe((0,Ge.U)($=>(v._loadedConfig=$,$))):function ni(I){return Ze(Zt(`Cannot load children because the guard of the route "path: '${I.path}'" returned false`))}(v))):(0,Y.of)(new Fi([],E))}runCanLoadGuards(E,v,R){const k=v.canLoad;if(!k||0===k.length)return(0,Y.of)(!0);const $=k.map(oe=>{const te=E.get(oe);let se;if(function xs(I){return I&&ei(I.canLoad)}(te))se=te.canLoad(v,R);else{if(!ei(te))throw new Error("Invalid CanLoad guard");se=te(v,R)}return Ct(se)});return(0,Y.of)($).pipe(Ur(),(0,It.b)(oe=>{if(!Cs(oe))return;const te=Zt(`Redirecting to "${this.urlSerializer.serialize(oe)}"`);throw te.url=oe,te}),(0,Ge.U)(oe=>!0===oe))}lineralizeSegments(E,v){let R=[],k=v.root;for(;;){if(R=R.concat(k.segments),0===k.numberOfChildren)return(0,Y.of)(R);if(k.numberOfChildren>1||!k.children[an])return Ze(new Error(`Only absolute redirects can have named outlets. redirectTo: '${E.redirectTo}'`));k=k.children[an]}}applyRedirectCommands(E,v,R){return this.applyRedirectCreatreUrlTree(v,this.urlSerializer.parse(v),E,R)}applyRedirectCreatreUrlTree(E,v,R,k){const $=this.createSegmentGroup(E,v.root,R,k);return new yt($,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(E,v){const R={};return Xt(E,(k,$)=>{if("string"==typeof k&&k.startsWith(":")){const te=k.substring(1);R[$]=v[te]}else R[$]=k}),R}createSegmentGroup(E,v,R,k){const $=this.createSegments(E,v.segments,R,k);let oe={};return Xt(v.children,(te,se)=>{oe[se]=this.createSegmentGroup(E,te,R,k)}),new pt($,oe)}createSegments(E,v,R,k){return v.map($=>$.path.startsWith(":")?this.findPosParam(E,$,k):this.findOrReturn($,R))}findPosParam(E,v,R){const k=R[v.path.substring(1)];if(!k)throw new Error(`Cannot redirect to '${E}'. Cannot find '${v.path}'.`);return k}findOrReturn(E,v){let R=0;for(const k of v){if(k.path===E.path)return v.splice(R),k;R++}return E}}function Ts(I){const E={};for(const R of Object.keys(I.children)){const $=Ts(I.children[R]);($.segments.length>0||$.hasChildren())&&(E[R]=$)}return function $i(I){if(1===I.numberOfChildren&&I.children[an]){const E=I.children[an];return new pt(I.segments.concat(E.segments),E.children)}return I}(new pt(I.segments,E))}class N{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class M{constructor(E,v){this.component=E,this.route=v}}function S(I,E,v){const R=I._root;return ee(R,E?E._root:null,v,[R.value])}function C(I,E,v){const R=function K(I){if(!I)return null;for(let E=I.parent;E;E=E.parent){const v=E.routeConfig;if(v&&v._loadedConfig)return v._loadedConfig}return null}(E);return(R?R.module.injector:v).get(I)}function ee(I,E,v,R,k={canDeactivateChecks:[],canActivateChecks:[]}){const $=sr(E);return I.children.forEach(oe=>{(function De(I,E,v,R,k={canDeactivateChecks:[],canActivateChecks:[]}){const $=I.value,oe=E?E.value:null,te=v?v.getContext(I.value.outlet):null;if(oe&&$.routeConfig===oe.routeConfig){const se=function Ke(I,E,v){if("function"==typeof v)return v(I,E);switch(v){case"pathParamsChange":return!yn(I.url,E.url);case"pathParamsOrQueryParamsChange":return!yn(I.url,E.url)||!Dr(I.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kr(I,E)||!Dr(I.queryParams,E.queryParams);default:return!Kr(I,E)}}(oe,$,$.routeConfig.runGuardsAndResolvers);se?k.canActivateChecks.push(new N(R)):($.data=oe.data,$._resolvedData=oe._resolvedData),ee(I,E,$.component?te?te.children:null:v,R,k),se&&te&&te.outlet&&te.outlet.isActivated&&k.canDeactivateChecks.push(new M(te.outlet.component,oe))}else oe&&it(E,te,k),k.canActivateChecks.push(new N(R)),ee(I,null,$.component?te?te.children:null:v,R,k)})(oe,$[oe.value.outlet],v,R.concat([oe.value]),k),delete $[oe.value.outlet]}),Xt($,(oe,te)=>it(oe,v.getContext(te),k)),k}function it(I,E,v){const R=sr(I),k=I.value;Xt(R,($,oe)=>{it($,k.component?E?E.children.getContext(oe):null:E,v)}),v.canDeactivateChecks.push(new M(k.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,k))}class yi{}function hr(I){return new q.y(E=>E.error(I))}class Hi{constructor(E,v,R,k,$,oe){this.rootComponentType=E,this.config=v,this.urlTree=R,this.url=k,this.paramsInheritanceStrategy=$,this.relativeLinkResolution=oe}recognize(){const E=Z(this.urlTree.root,[],[],this.config.filter(oe=>void 0===oe.redirectTo),this.relativeLinkResolution).segmentGroup,v=this.processSegmentGroup(this.config,E,an);if(null===v)return null;const R=new br([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),k=new Cr(R,v),$=new zr(this.url,k);return this.inheritParamsAndData($._root),$}inheritParamsAndData(E){const v=E.value,R=Bi(v,this.paramsInheritanceStrategy);v.params=Object.freeze(R.params),v.data=Object.freeze(R.data),E.children.forEach(k=>this.inheritParamsAndData(k))}processSegmentGroup(E,v,R){return 0===v.segments.length&&v.hasChildren()?this.processChildren(E,v):this.processSegment(E,v,v.segments,R)}processChildren(E,v){const R=[];for(const $ of Object.keys(v.children)){const oe=v.children[$],te=O(E,$),se=this.processSegmentGroup(te,oe,$);if(null===se)return null;R.push(...se)}const k=ms(R);return function Wr(I){I.sort((E,v)=>E.value.outlet===an?-1:v.value.outlet===an?1:E.value.outlet.localeCompare(v.value.outlet))}(k),k}processSegment(E,v,R,k){for(const $ of E){const oe=this.processSegmentAgainstRoute($,v,R,k);if(null!==oe)return oe}return vn(v,R,k)?[]:null}processSegmentAgainstRoute(E,v,R,k){if(E.redirectTo||!jn(E,v,R,k))return null;let $,oe=[],te=[];if("**"===E.path){const or=R.length>0?Yt(R).parameters:{};$=new br(R,or,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ca(E),Rn(E),E.component,E,Ls(v),po(v)+R.length,Go(E))}else{const or=x(v,E,R);if(!or.matched)return null;oe=or.consumedSegments,te=or.remainingSegments,$=new br(oe,or.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ca(E),Rn(E),E.component,E,Ls(v),po(v)+oe.length,Go(E))}const se=function si(I){return I.children?I.children:I.loadChildren?I._loadedConfig.routes:[]}(E),{segmentGroup:je,slicedSegments:dn}=Z(v,oe,te,se.filter(or=>void 0===or.redirectTo),this.relativeLinkResolution);if(0===dn.length&&je.hasChildren()){const or=this.processChildren(se,je);return null===or?null:[new Cr($,or)]}if(0===se.length&&0===dn.length)return[new Cr($,[])];const zt=Rn(E)===k,Ar=this.processSegment(se,je,dn,zt?an:k);return null===Ar?null:[new Cr($,Ar)]}}function Tr(I){const E=I.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function ms(I){const E=[],v=new Set;for(const R of I){if(!Tr(R)){E.push(R);continue}const k=E.find($=>R.value.routeConfig===$.value.routeConfig);void 0!==k?(k.children.push(...R.children),v.add(k)):E.push(R)}for(const R of v){const k=ms(R.children);E.push(new Cr(R.value,k))}return E.filter(R=>!v.has(R))}function Ls(I){let E=I;for(;E._sourceSegment;)E=E._sourceSegment;return E}function po(I){let E=I,v=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,v+=E._segmentIndexShift?E._segmentIndexShift:0;return v-1}function Ca(I){return I.data||{}}function Go(I){return I.resolve||{}}function ks(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function qa(I){return(0,Ue.w)(E=>{const v=I(E);return v?(0,Ee.D)(v).pipe((0,Ge.U)(()=>E)):(0,Y.of)(E)})}class Ro extends class Si{shouldDetach(E){return!1}store(E,v){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,v){return E.routeConfig===v.routeConfig}}{}const Zr=new p.OlP("ROUTES");class Oo{constructor(E,v,R,k){this.injector=E,this.compiler=v,this.onLoadStartListener=R,this.onLoadEndListener=k}load(E,v){if(v._loader$)return v._loader$;this.onLoadStartListener&&this.onLoadStartListener(v);const k=this.loadModuleFactory(v.loadChildren).pipe((0,Ge.U)($=>{this.onLoadEndListener&&this.onLoadEndListener(v);const oe=$.create(E);return new Fi(xr(oe.injector.get(Zr,void 0,p.XFs.Self|p.XFs.Optional)).map(Rs),oe)}),X($=>{throw v._loader$=void 0,$}));return v._loader$=new U(k,()=>new we.x).pipe(j()),v._loader$}loadModuleFactory(E){return Ct(E()).pipe((0,Ce.z)(v=>v instanceof p.YKP?(0,Y.of)(v):(0,Ee.D)(this.compiler.compileModuleAsync(v))))}}class wu{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,v){return E}}function Wo(I){throw I}function tc(I,E,v){return E.parse("/")}function oa(I,E){return(0,Y.of)(null)}const ys={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ko={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mi=(()=>{class I{constructor(v,R,k,$,oe,te,se){this.rootComponentType=v,this.urlSerializer=R,this.rootContexts=k,this.location=$,this.config=se,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new we.x,this.errorHandler=Wo,this.malformedUriErrorHandler=tc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:oa,afterPreactivation:oa},this.urlHandlingStrategy=new wu,this.routeReuseStrategy=new Ro,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=oe.get(p.h0i),this.console=oe.get(p.c2e);const zt=oe.get(p.R0b);this.isNgZoneEnabled=zt instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(se),this.currentUrlTree=function ot(){return new yt(new pt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Oo(oe,te,Ar=>this.triggerEvent(new Ht(Ar)),Ar=>this.triggerEvent(new wn(Ar))),this.routerState=Lr(this.currentUrlTree,this.rootComponentType),this.transitions=new ve.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var v;return null===(v=this.location.getState())||void 0===v?void 0:v.\u0275routerPageId}setupNavigations(v){const R=this.events;return v.pipe((0,mt.h)(k=>0!==k.id),(0,Ge.U)(k=>Object.assign(Object.assign({},k),{extractedUrl:this.urlHandlingStrategy.extract(k.rawUrl)})),(0,Ue.w)(k=>{let $=!1,oe=!1;return(0,Y.of)(k).pipe((0,It.b)(te=>{this.currentNavigation={id:te.id,initialUrl:te.currentRawUrl,extractedUrl:te.extractedUrl,trigger:te.source,extras:te.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ue.w)(te=>{const se=this.browserUrlTree.toString(),je=!this.navigated||te.extractedUrl.toString()!==se||se!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||je)&&this.urlHandlingStrategy.shouldProcessUrl(te.rawUrl))return zo(te.source)&&(this.browserUrlTree=te.extractedUrl),(0,Y.of)(te).pipe((0,Ue.w)(zt=>{const Ar=this.transitions.getValue();return R.next(new Hn(zt.id,this.serializeUrl(zt.extractedUrl),zt.source,zt.restoredState)),Ar!==this.transitions.getValue()?ke.E:Promise.resolve(zt)}),function Os(I,E,v,R){return(0,Ue.w)(k=>function un(I,E,v,R,k){return new ji(I,E,v,R,k).apply()}(I,E,v,k.extractedUrl,R).pipe((0,Ge.U)($=>Object.assign(Object.assign({},k),{urlAfterRedirects:$}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,It.b)(zt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:zt.urlAfterRedirects})}),function go(I,E,v,R,k){return(0,Ce.z)($=>function ii(I,E,v,R,k="emptyOnly",$="legacy"){try{const oe=new Hi(I,E,v,R,k,$).recognize();return null===oe?hr(new yi):(0,Y.of)(oe)}catch(oe){return hr(oe)}}(I,E,$.urlAfterRedirects,v($.urlAfterRedirects),R,k).pipe((0,Ge.U)(oe=>Object.assign(Object.assign({},$),{targetSnapshot:oe}))))}(this.rootComponentType,this.config,zt=>this.serializeUrl(zt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,It.b)(zt=>{if("eager"===this.urlUpdateStrategy){if(!zt.extras.skipLocationChange){const or=this.urlHandlingStrategy.merge(zt.urlAfterRedirects,zt.rawUrl);this.setBrowserUrl(or,zt)}this.browserUrlTree=zt.urlAfterRedirects}const Ar=new Er(zt.id,this.serializeUrl(zt.extractedUrl),this.serializeUrl(zt.urlAfterRedirects),zt.targetSnapshot);R.next(Ar)}));if(je&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ar,extractedUrl:or,source:Bs,restoredState:ts,extras:Ra}=te,vo=new Hn(Ar,this.serializeUrl(or),Bs,ts);R.next(vo);const Eo=Lr(or,this.rootComponentType).snapshot;return(0,Y.of)(Object.assign(Object.assign({},te),{targetSnapshot:Eo,urlAfterRedirects:or,extras:Object.assign(Object.assign({},Ra),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=te.rawUrl,te.resolve(null),ke.E}),qa(te=>{const{targetSnapshot:se,id:je,extractedUrl:dn,rawUrl:zt,extras:{skipLocationChange:Ar,replaceUrl:or}}=te;return this.hooks.beforePreactivation(se,{navigationId:je,appliedUrlTree:dn,rawUrlTree:zt,skipLocationChange:!!Ar,replaceUrl:!!or})}),(0,It.b)(te=>{const se=new Gn(te.id,this.serializeUrl(te.extractedUrl),this.serializeUrl(te.urlAfterRedirects),te.targetSnapshot);this.triggerEvent(se)}),(0,Ge.U)(te=>Object.assign(Object.assign({},te),{guards:S(te.targetSnapshot,te.currentSnapshot,this.rootContexts)})),function Lt(I,E){return(0,Ce.z)(v=>{const{targetSnapshot:R,currentSnapshot:k,guards:{canActivateChecks:$,canDeactivateChecks:oe}}=v;return 0===oe.length&&0===$.length?(0,Y.of)(Object.assign(Object.assign({},v),{guardsResult:!0})):function St(I,E,v,R){return(0,Ee.D)(I).pipe((0,Ce.z)(k=>function Zn(I,E,v,R,k){const $=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!$||0===$.length)return(0,Y.of)(!0);const oe=$.map(te=>{const se=C(te,E,k);let je;if(function ps(I){return I&&ei(I.canDeactivate)}(se))je=Ct(se.canDeactivate(I,E,v,R));else{if(!ei(se))throw new Error("Invalid CanDeactivate guard");je=Ct(se(I,E,v,R))}return je.pipe((0,$t.P)())});return(0,Y.of)(oe).pipe(Ur())}(k.component,k.route,v,E,R)),(0,$t.P)(k=>!0!==k,!0))}(oe,R,k,I).pipe((0,Ce.z)(te=>te&&function Fs(I){return"boolean"==typeof I}(te)?function _n(I,E,v,R){return(0,Ee.D)(E).pipe(pe(k=>(0,$e.z)(function Br(I,E){return null!==I&&E&&E(new sn(I)),(0,Y.of)(!0)}(k.route.parent,R),function $n(I,E){return null!==I&&E&&E(new pi(I)),(0,Y.of)(!0)}(k.route,R),function zn(I,E,v){const R=E[E.length-1],$=E.slice(0,E.length-1).reverse().map(oe=>function m(I){const E=I.routeConfig?I.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:I,guards:E}:null}(oe)).filter(oe=>null!==oe).map(oe=>ze(()=>{const te=oe.guards.map(se=>{const je=C(se,oe.node,v);let dn;if(function Ti(I){return I&&ei(I.canActivateChild)}(je))dn=Ct(je.canActivateChild(R,I));else{if(!ei(je))throw new Error("Invalid CanActivateChild guard");dn=Ct(je(R,I))}return dn.pipe((0,$t.P)())});return(0,Y.of)(te).pipe(Ur())}));return(0,Y.of)($).pipe(Ur())}(I,k.path,v),function dr(I,E,v){const R=E.routeConfig?E.routeConfig.canActivate:null;if(!R||0===R.length)return(0,Y.of)(!0);const k=R.map($=>ze(()=>{const oe=C($,E,v);let te;if(function Yi(I){return I&&ei(I.canActivate)}(oe))te=Ct(oe.canActivate(E,I));else{if(!ei(oe))throw new Error("Invalid CanActivate guard");te=Ct(oe(E,I))}return te.pipe((0,$t.P)())}));return(0,Y.of)(k).pipe(Ur())}(I,k.route,v))),(0,$t.P)(k=>!0!==k,!0))}(R,$,I,E):(0,Y.of)(te)),(0,Ge.U)(te=>Object.assign(Object.assign({},v),{guardsResult:te})))})}(this.ngModule.injector,te=>this.triggerEvent(te)),(0,It.b)(te=>{if(Cs(te.guardsResult)){const je=Zt(`Redirecting to "${this.serializeUrl(te.guardsResult)}"`);throw je.url=te.guardsResult,je}const se=new wr(te.id,this.serializeUrl(te.extractedUrl),this.serializeUrl(te.urlAfterRedirects),te.targetSnapshot,!!te.guardsResult);this.triggerEvent(se)}),(0,mt.h)(te=>!!te.guardsResult||(this.restoreHistory(te),this.cancelNavigationTransition(te,""),!1)),qa(te=>{if(te.guards.canActivateChecks.length)return(0,Y.of)(te).pipe((0,It.b)(se=>{const je=new Ln(se.id,this.serializeUrl(se.extractedUrl),this.serializeUrl(se.urlAfterRedirects),se.targetSnapshot);this.triggerEvent(je)}),(0,Ue.w)(se=>{let je=!1;return(0,Y.of)(se).pipe(function Ka(I,E){return(0,Ce.z)(v=>{const{targetSnapshot:R,guards:{canActivateChecks:k}}=v;if(!k.length)return(0,Y.of)(v);let $=0;return(0,Ee.D)(k).pipe(pe(oe=>function Ws(I,E,v,R){return function ba(I,E,v,R){const k=ks(I);if(0===k.length)return(0,Y.of)({});const $={};return(0,Ee.D)(k).pipe((0,Ce.z)(oe=>function xo(I,E,v,R){const k=C(I,E,R);return Ct(k.resolve?k.resolve(E,v):k(E,v))}(I[oe],E,v,R).pipe((0,It.b)(te=>{$[oe]=te}))),(0,xt.h)(1),(0,Ce.z)(()=>ks($).length===k.length?(0,Y.of)($):ke.E))}(I._resolve,I,E,R).pipe((0,Ge.U)($=>(I._resolvedData=$,I.data=Object.assign(Object.assign({},I.data),Bi(I,v).resolve),null)))}(oe.route,R,I,E)),(0,It.b)(()=>$++),(0,xt.h)(1),(0,Ce.z)(oe=>$===k.length?(0,Y.of)(v):ke.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,It.b)({next:()=>je=!0,complete:()=>{je||(this.restoreHistory(se),this.cancelNavigationTransition(se,"At least one route resolver didn't emit any value."))}}))}),(0,It.b)(se=>{const je=new Ut(se.id,this.serializeUrl(se.extractedUrl),this.serializeUrl(se.urlAfterRedirects),se.targetSnapshot);this.triggerEvent(je)}))}),qa(te=>{const{targetSnapshot:se,id:je,extractedUrl:dn,rawUrl:zt,extras:{skipLocationChange:Ar,replaceUrl:or}}=te;return this.hooks.afterPreactivation(se,{navigationId:je,appliedUrlTree:dn,rawUrlTree:zt,skipLocationChange:!!Ar,replaceUrl:!!or})}),(0,Ge.U)(te=>{const se=function he(I,E,v){const R=fe(I,E._root,v?v._root:void 0);return new Fr(R,E)}(this.routeReuseStrategy,te.targetSnapshot,te.currentRouterState);return Object.assign(Object.assign({},te),{targetRouterState:se})}),(0,It.b)(te=>{this.currentUrlTree=te.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(te.urlAfterRedirects,te.rawUrl),this.routerState=te.targetRouterState,"deferred"===this.urlUpdateStrategy&&(te.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,te),this.browserUrlTree=te.urlAfterRedirects)}),((I,E,v)=>(0,Ge.U)(R=>(new Jr(E,R.targetRouterState,R.currentRouterState,v).activate(I),R)))(this.rootContexts,this.routeReuseStrategy,te=>this.triggerEvent(te)),(0,It.b)({next(){$=!0},complete(){$=!0}}),(0,lt.x)(()=>{var te;$||oe||this.cancelNavigationTransition(k,`Navigation ID ${k.id} is not equal to the current navigation id ${this.navigationId}`),(null===(te=this.currentNavigation)||void 0===te?void 0:te.id)===k.id&&(this.currentNavigation=null)}),X(te=>{if(oe=!0,function mr(I){return I&&I[Ot]}(te)){const se=Cs(te.url);se||(this.navigated=!0,this.restoreHistory(k,!0));const je=new lr(k.id,this.serializeUrl(k.extractedUrl),te.message);R.next(je),se?setTimeout(()=>{const dn=this.urlHandlingStrategy.merge(te.url,this.rawUrlTree),zt={skipLocationChange:k.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zo(k.source)};this.scheduleNavigation(dn,"imperative",null,zt,{resolve:k.resolve,reject:k.reject,promise:k.promise})},0):k.resolve(!1)}else{this.restoreHistory(k,!0);const se=new tr(k.id,this.serializeUrl(k.extractedUrl),te);R.next(se);try{k.resolve(this.errorHandler(te))}catch(je){k.reject(je)}}return ke.E}))}))}resetRootComponentType(v){this.rootComponentType=v,this.routerState.root.component=this.rootComponentType}setTransition(v){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),v))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const R="popstate"===v.type?"popstate":"hashchange";"popstate"===R&&setTimeout(()=>{var k;const $={replaceUrl:!0},oe=(null===(k=v.state)||void 0===k?void 0:k.navigationId)?v.state:null;if(oe){const se=Object.assign({},oe);delete se.navigationId,delete se.\u0275routerPageId,0!==Object.keys(se).length&&($.state=se)}const te=this.parseUrl(v.url);this.scheduleNavigation(te,R,oe,$)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(v){this.events.next(v)}resetConfig(v){Xi(v),this.config=v.map(Rs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(v,R={}){const{relativeTo:k,queryParams:$,fragment:oe,queryParamsHandling:te,preserveFragment:se}=R,je=k||this.routerState.root,dn=se?this.currentUrlTree.fragment:oe;let zt=null;switch(te){case"merge":zt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),$);break;case"preserve":zt=this.currentUrlTree.queryParams;break;default:zt=$||null}return null!==zt&&(zt=this.removeEmptyProps(zt)),function st(I,E,v,R,k){if(0===v.length)return _e(E.root,E.root,E.root,R,k);const $=function _t(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new nt(!0,0,I);let E=0,v=!1;const R=I.reduce((k,$,oe)=>{if("object"==typeof $&&null!=$){if($.outlets){const te={};return Xt($.outlets,(se,je)=>{te[je]="string"==typeof se?se.split("/"):se}),[...k,{outlets:te}]}if($.segmentPath)return[...k,$.segmentPath]}return"string"!=typeof $?[...k,$]:0===oe?($.split("/").forEach((te,se)=>{0==se&&"."===te||(0==se&&""===te?v=!0:".."===te?E++:""!=te&&k.push(te))}),k):[...k,$]},[]);return new nt(v,E,R)}(v);if($.toRoot())return _e(E.root,E.root,new pt([],{}),R,k);const oe=function Un(I,E,v){if(I.isAbsolute)return new Bt(E.root,!0,0);if(-1===v.snapshot._lastPathIndex){const $=v.snapshot._urlSegment;return new Bt($,$===E.root,0)}const R=en(I.commands[0])?0:1;return function Gr(I,E,v){let R=I,k=E,$=v;for(;$>k;){if($-=k,R=R.parent,!R)throw new Error("Invalid number of '../'");k=R.segments.length}return new Bt(R,!1,k-$)}(v.snapshot._urlSegment,v.snapshot._lastPathIndex+R,I.numberOfDoubleDots)}($,E,I),te=oe.processChildren?Di(oe.segmentGroup,oe.index,$.commands):mi(oe.segmentGroup,oe.index,$.commands);return _e(E.root,oe.segmentGroup,te,R,k)}(je,this.currentUrlTree,v,zt,null!=dn?dn:null)}navigateByUrl(v,R={skipLocationChange:!1}){const k=Cs(v)?v:this.parseUrl(v),$=this.urlHandlingStrategy.merge(k,this.rawUrlTree);return this.scheduleNavigation($,"imperative",null,R)}navigate(v,R={skipLocationChange:!1}){return function fi(I){for(let E=0;E<I.length;E++){const v=I[E];if(null==v)throw new Error(`The requested path contains ${v} segment at index ${E}`)}}(v),this.navigateByUrl(this.createUrlTree(v,R),R)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let R;try{R=this.urlSerializer.parse(v)}catch(k){R=this.malformedUriErrorHandler(k,this.urlSerializer,v)}return R}isActive(v,R){let k;if(k=!0===R?Object.assign({},ys):!1===R?Object.assign({},ko):R,Cs(v))return pn(this.currentUrlTree,v,k);const $=this.parseUrl(v);return pn(this.currentUrlTree,$,k)}removeEmptyProps(v){return Object.keys(v).reduce((R,k)=>{const $=v[k];return null!=$&&(R[k]=$),R},{})}processNavigations(){this.navigations.subscribe(v=>{this.navigated=!0,this.lastSuccessfulId=v.id,this.currentPageId=v.targetPageId,this.events.next(new Mn(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,v.resolve(!0)},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)})}scheduleNavigation(v,R,k,$,oe){var te,se;if(this.disposed)return Promise.resolve(!1);let je,dn,zt;oe?(je=oe.resolve,dn=oe.reject,zt=oe.promise):zt=new Promise((Bs,ts)=>{je=Bs,dn=ts});const Ar=++this.navigationId;let or;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(k=this.location.getState()),or=k&&k.\u0275routerPageId?k.\u0275routerPageId:$.replaceUrl||$.skipLocationChange?null!==(te=this.browserPageId)&&void 0!==te?te:0:(null!==(se=this.browserPageId)&&void 0!==se?se:0)+1):or=0,this.setTransition({id:Ar,targetPageId:or,source:R,restoredState:k,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:v,extras:$,resolve:je,reject:dn,promise:zt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),zt.catch(Bs=>Promise.reject(Bs))}setBrowserUrl(v,R){const k=this.urlSerializer.serialize(v),$=Object.assign(Object.assign({},R.extras.state),this.generateNgRouterState(R.id,R.targetPageId));this.location.isCurrentPathEqualTo(k)||R.extras.replaceUrl?this.location.replaceState(k,"",$):this.location.go(k,"",$)}restoreHistory(v,R=!1){var k,$;if("computed"===this.canceledNavigationResolution){const oe=this.currentPageId-v.targetPageId;"popstate"!==v.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(k=this.currentNavigation)||void 0===k?void 0:k.finalUrl)||0===oe?this.currentUrlTree===(null===($=this.currentNavigation)||void 0===$?void 0:$.finalUrl)&&0===oe&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(oe)}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(v,R){const k=new lr(v.id,this.serializeUrl(v.extractedUrl),R);this.triggerEvent(k),v.resolve(!1)}generateNgRouterState(v,R){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:R}:{navigationId:v}}}return I.\u0275fac=function(v){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function zo(I){return"imperative"!==I}let Ta=(()=>{class I{constructor(v,R,k,$,oe){this.router=v,this.route=R,this.tabIndexAttribute=k,this.renderer=$,this.el=oe,this.commands=null,this.onChanges=new we.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(v){if(null!=this.tabIndexAttribute)return;const R=this.renderer,k=this.el.nativeElement;null!==v?R.setAttribute(k,"tabindex",v):R.removeAttribute(k,"tabindex")}ngOnChanges(v){this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const v={skipLocationChange:As(this.skipLocationChange),replaceUrl:As(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,v),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:As(this.preserveFragment)})}}return I.\u0275fac=function(v){return new(v||I)(p.Y36(Mi),p.Y36(Tn),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},I.\u0275dir=p.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(v,R){1&v&&p.NdJ("click",function(){return R.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})(),es=(()=>{class I{constructor(v,R,k){this.router=v,this.route=R,this.locationStrategy=k,this.commands=null,this.href=null,this.onChanges=new we.x,this.subscription=v.events.subscribe($=>{$ instanceof Mn&&this.updateTargetUrlAndHref()})}set routerLink(v){this.commands=null!=v?Array.isArray(v)?v:[v]:null}ngOnChanges(v){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(v,R,k,$,oe){if(0!==v||R||k||$||oe||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const te={skipLocationChange:As(this.skipLocationChange),replaceUrl:As(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,te),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:As(this.preserveFragment)})}}return I.\u0275fac=function(v){return new(v||I)(p.Y36(Mi),p.Y36(Tn),p.Y36(kt.S$))},I.\u0275dir=p.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(v,R){1&v&&p.NdJ("click",function($){return R.onClick($.button,$.ctrlKey,$.shiftKey,$.altKey,$.metaKey)}),2&v&&p.uIk("target",R.target)("href",R.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),I})();function As(I){return""===I||!!I}let aa=(()=>{class I{constructor(v,R,k,$,oe,te){this.router=v,this.element=R,this.renderer=k,this.cdr=$,this.link=oe,this.linkWithHref=te,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=v.events.subscribe(se=>{se instanceof Mn&&this.update()})}ngAfterContentInit(){(0,Y.of)(this.links.changes,this.linksWithHrefs.changes,(0,Y.of)(null)).pipe((0,ln.J)()).subscribe(v=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var v;null===(v=this.linkInputChangesSubscription)||void 0===v||v.unsubscribe();const R=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(k=>!!k).map(k=>k.onChanges);this.linkInputChangesSubscription=(0,Ee.D)(R).pipe((0,ln.J)()).subscribe(k=>{this.isActive!==this.isLinkActive(this.router)(k)&&this.update()})}set routerLinkActive(v){const R=Array.isArray(v)?v:v.split(" ");this.classes=R.filter(k=>!!k)}ngOnChanges(v){this.update()}ngOnDestroy(){var v;this.routerEventsSubscription.unsubscribe(),null===(v=this.linkInputChangesSubscription)||void 0===v||v.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const v=this.hasActiveLinks();this.isActive!==v&&(this.isActive=v,this.cdr.markForCheck(),this.classes.forEach(R=>{v?this.renderer.addClass(this.element.nativeElement,R):this.renderer.removeClass(this.element.nativeElement,R)}),this.isActiveChange.emit(v))})}isLinkActive(v){const R=function zs(I){return!!I.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return k=>!!k.urlTree&&v.isActive(k.urlTree,R)}hasActiveLinks(){const v=this.isLinkActive(this.router);return this.link&&v(this.link)||this.linkWithHref&&v(this.linkWithHref)||this.links.some(v)||this.linksWithHrefs.some(v)}}return I.\u0275fac=function(v){return new(v||I)(p.Y36(Mi),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(Ta,8),p.Y36(es,8))},I.\u0275dir=p.lG2({type:I,selectors:[["","routerLinkActive",""]],contentQueries:function(v,R,k){if(1&v&&(p.Suo(k,Ta,5),p.Suo(k,es,5)),2&v){let $;p.iGM($=p.CRH())&&(R.links=$),p.iGM($=p.CRH())&&(R.linksWithHrefs=$)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[p.TTD]}),I})();class Ks{}class Za{preload(E,v){return(0,Y.of)(null)}}let Ya=(()=>{class I{constructor(v,R,k,$){this.router=v,this.injector=k,this.preloadingStrategy=$,this.loader=new Oo(k,R,se=>v.triggerEvent(new Ht(se)),se=>v.triggerEvent(new wn(se)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,mt.h)(v=>v instanceof Mn),pe(()=>this.preload())).subscribe(()=>{})}preload(){const v=this.injector.get(p.h0i);return this.processRoutes(v,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,R){const k=[];for(const $ of R)if($.loadChildren&&!$.canLoad&&$._loadedConfig){const oe=$._loadedConfig;k.push(this.processRoutes(oe.module,oe.routes))}else $.loadChildren&&!$.canLoad?k.push(this.preloadConfig(v,$)):$.children&&k.push(this.processRoutes(v,$.children));return(0,Ee.D)(k).pipe((0,ln.J)(),(0,Ge.U)($=>{}))}preloadConfig(v,R){return this.preloadingStrategy.preload(R,()=>(R._loadedConfig?(0,Y.of)(R._loadedConfig):this.loader.load(v.injector,R)).pipe((0,Ce.z)($=>(R._loadedConfig=$,this.processRoutes($.module,$.routes)))))}}return I.\u0275fac=function(v){return new(v||I)(p.LFG(Mi),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Ks))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})(),Sa=(()=>{class I{constructor(v,R,k={}){this.router=v,this.viewportScroller=R,this.options=k,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},k.scrollPositionRestoration=k.scrollPositionRestoration||"disabled",k.anchorScrolling=k.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(v=>{v instanceof Hn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Mn&&(this.lastId=v.id,this.scheduleScrollEvent(v,this.router.parseUrl(v.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(v=>{v instanceof Ir&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,R){this.router.triggerEvent(new Ir(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(v){p.$Z()},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();const qs=new p.OlP("ROUTER_CONFIGURATION"),Vs=new p.OlP("ROUTER_FORROOT_GUARD"),mo=[kt.Ye,{provide:Jt,useClass:Nn},{provide:Mi,useFactory:function xa(I,E,v,R,k,$,oe={},te,se){const je=new Mi(null,I,E,v,R,k,xr($));return te&&(je.urlHandlingStrategy=te),se&&(je.routeReuseStrategy=se),function Us(I,E){I.errorHandler&&(E.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(E.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(E.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(E.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(E.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(E.canceledNavigationResolution=I.canceledNavigationResolution)}(oe,je),oe.enableTracing&&je.events.subscribe(dn=>{var zt,Ar;null===(zt=console.group)||void 0===zt||zt.call(console,`Router Event: ${dn.constructor.name}`),console.log(dn.toString()),console.log(dn),null===(Ar=console.groupEnd)||void 0===Ar||Ar.call(console)}),je},deps:[Jt,Ai,kt.Ye,p.zs3,p.Sil,Zr,qs,[class ec{},new p.FiY],[class sa{},new p.FiY]]},Ai,{provide:Tn,useFactory:function nc(I){return I.routerState.root},deps:[Mi]},Ya,Za,class Aa{preload(E,v){return v().pipe(X(()=>(0,Y.of)(null)))}},{provide:qs,useValue:{enableTracing:!1}}];function ua(){return new p.PXZ("Router",Mi)}let Ko=(()=>{class I{constructor(v,R){}static forRoot(v,R){return{ngModule:I,providers:[mo,Ps(v),{provide:Vs,useFactory:al,deps:[[Mi,new p.FiY,new p.tp0]]},{provide:qs,useValue:R||{}},{provide:kt.S$,useFactory:$r,deps:[kt.lw,[new p.tBr(kt.mr),new p.FiY],qs]},{provide:Sa,useFactory:Ma,deps:[Mi,kt.EM,qs]},{provide:Ks,useExisting:R&&R.preloadingStrategy?R.preloadingStrategy:Za},{provide:p.PXZ,multi:!0,useFactory:ua},[la,{provide:p.ip1,multi:!0,useFactory:xi,deps:[la]},{provide:_s,useFactory:qo,deps:[la]},{provide:p.tb,multi:!0,useExisting:_s}]]}}static forChild(v){return{ngModule:I,providers:[Ps(v)]}}}return I.\u0275fac=function(v){return new(v||I)(p.LFG(Vs,8),p.LFG(Mi,8))},I.\u0275mod=p.oAB({type:I}),I.\u0275inj=p.cJS({}),I})();function Ma(I,E,v){return v.scrollOffset&&E.setOffset(v.scrollOffset),new Sa(I,E,v)}function $r(I,E,v={}){return v.useHash?new kt.Do(I,E):new kt.b0(I,E)}function al(I){return"guarded"}function Ps(I){return[{provide:p.deG,multi:!0,useValue:I},{provide:Zr,multi:!0,useValue:I}]}let la=(()=>{class I{constructor(v){this.injector=v,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new we.x}appInitializer(){return this.injector.get(kt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let R=null;const k=new Promise(te=>R=te),$=this.injector.get(Mi),oe=this.injector.get(qs);return"disabled"===oe.initialNavigation?($.setUpLocationChangeListener(),R(!0)):"enabled"===oe.initialNavigation||"enabledBlocking"===oe.initialNavigation?($.hooks.afterPreactivation=()=>this.initNavigation?(0,Y.of)(null):(this.initNavigation=!0,R(!0),this.resultOfPreactivationDone),$.initialNavigation()):R(!0),k})}bootstrapListener(v){const R=this.injector.get(qs),k=this.injector.get(Ya),$=this.injector.get(Sa),oe=this.injector.get(Mi),te=this.injector.get(p.z2F);v===te.components[0]&&(("enabledNonBlocking"===R.initialNavigation||void 0===R.initialNavigation)&&oe.initialNavigation(),k.setUpPreloading(),$.init(),oe.resetRootComponentType(te.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return I.\u0275fac=function(v){return new(v||I)(p.LFG(p.zs3))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac}),I})();function xi(I){return I.appInitializer.bind(I)}function qo(I){return I.bootstrapListener.bind(I)}const _s=new p.OlP("Router Initializer")},3942:(Tt,We,F)=>{F.d(We,{Z:()=>Ze});var p=F(2090),q=F(4859),Q=F(9681),Ee=F(1877);class ye{constructor(ze,Le){this._delegate=ze,this.firebase=Le,(0,Q._addComponent)(ze,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Q.deleteApp)(this._delegate)))}_getService(ze,Le=Q._DEFAULT_ENTRY_NAME){var Et;this._delegate.checkDestroyed();const j=this._delegate.container.getProvider(ze);return!j.isInitialized()&&"EXPLICIT"===(null===(Et=j.getComponent())||void 0===Et?void 0:Et.instantiationMode)&&j.initialize(),j.getImmediate({identifier:Le})}_removeServiceInstance(ze,Le=Q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Le)}_addComponent(ze){(0,Q._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,Q._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function Ne(){const gt=function Pe(gt){const ze={},Le={__esModule:!0,initializeApp:function U($e,ke={}){const we=Q.initializeApp($e,ke);if((0,p.r3)(ze,we.name))return ze[we.name];const X=new gt(we,Le);return ze[we.name]=X,X},app:j,registerVersion:Q.registerVersion,setLogLevel:Q.setLogLevel,onLog:Q.onLog,apps:null,SDK_VERSION:Q.SDK_VERSION,INTERNAL:{registerComponent:function ve($e){const ke=$e.name,we=ke.replace("-compat","");if(Q._registerComponent($e)&&"PUBLIC"===$e.type){const X=(Ce=j())=>{if("function"!=typeof Ce[we])throw Oe.create("invalid-app-argument",{appName:ke});return Ce[we]()};void 0!==$e.serviceProps&&(0,p.ZB)(X,$e.serviceProps),Le[we]=X,gt.prototype[we]=function(...Ce){return this._getService.bind(this,ke).apply(this,$e.multipleInstances?Ce:[])}}return"PUBLIC"===$e.type?Le[we]:null},removeApp:function Et($e){delete ze[$e]},useAsService:function Ve($e,ke){return"serverAuth"===ke?null:ke},modularAPIs:Q}};function j($e){if(!(0,p.r3)(ze,$e=$e||Q._DEFAULT_ENTRY_NAME))throw Oe.create("no-app",{appName:$e});return ze[$e]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function Y(){return Object.keys(ze).map($e=>ze[$e])}}),j.App=gt,Le}(ye);return gt.INTERNAL=Object.assign(Object.assign({},gt.INTERNAL),{createFirebaseNamespace:Ne,extendNamespace:function ze(Le){(0,p.ZB)(gt,Le)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),gt}(),ie=new Ee.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const gt=self.firebase.SDK_VERSION;gt&&gt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=ce;!function Qe(gt){(0,Q.registerVersion)("@firebase/app-compat","0.1.22",gt)}()},9681:(Tt,We,F)=>{F.r(We),F.d(We,{FirebaseError:()=>Ee.ZR,SDK_VERSION:()=>tr,_DEFAULT_ENTRY_NAME:()=>Wt,_addComponent:()=>It,_addOrOverwriteComponent:()=>xt,_apps:()=>Dt,_clearComponents:()=>nn,_components:()=>$t,_getProvider:()=>ln,_registerComponent:()=>lt,_removeServiceInstance:()=>kt,deleteApp:()=>Ln,getApp:()=>Gn,getApps:()=>wr,initializeApp:()=>Er,onLog:()=>wn,registerVersion:()=>Ht,setLogLevel:()=>sn});var p=F(5861),q=F(4859),Q=F(1877),Ee=F(2090);class ye{constructor(ot){this.container=ot}getPlatformInfoString(){return this.container.getProviders().map(Pt=>{if(function Se(Ct){const ot=Ct.getComponent();return"VERSION"===(null==ot?void 0:ot.type)}(Pt)){const Nt=Pt.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(Pt=>Pt).join(" ")}}const Oe="@firebase/app",Ne=new Q.Yd("@firebase/app"),Wt="[DEFAULT]",mt={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Dt=new Map,$t=new Map;function It(Ct,ot){try{Ct.container.addComponent(ot)}catch(Pt){Ne.debug(`Component ${ot.name} failed to register with FirebaseApp ${Ct.name}`,Pt)}}function xt(Ct,ot){Ct.container.addOrOverwriteComponent(ot)}function lt(Ct){const ot=Ct.name;if($t.has(ot))return Ne.debug(`There were multiple attempts to register component ${ot}.`),!1;$t.set(ot,Ct);for(const Pt of Dt.values())It(Pt,Ct);return!0}function ln(Ct,ot){const Pt=Ct.container.getProvider("heartbeat").getImmediate({optional:!0});return Pt&&Pt.triggerHeartbeat(),Ct.container.getProvider(ot)}function kt(Ct,ot,Pt=Wt){ln(Ct,ot).clearInstance(Pt)}function nn(){$t.clear()}const Mn=new Ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class lr{constructor(ot,Pt,Nt){this._isDeleted=!1,this._options=Object.assign({},ot),this._config=Object.assign({},Pt),this._name=Pt.name,this._automaticDataCollectionEnabled=Pt.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this.checkDestroyed(),this._automaticDataCollectionEnabled=ot}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ot){this._isDeleted=ot}checkDestroyed(){if(this.isDeleted)throw Mn.create("app-deleted",{appName:this._name})}}const tr="9.6.11";function Er(Ct,ot={}){"object"!=typeof ot&&(ot={name:ot});const Pt=Object.assign({name:Wt,automaticDataCollectionEnabled:!1},ot),Nt=Pt.name;if("string"!=typeof Nt||!Nt)throw Mn.create("bad-app-name",{appName:String(Nt)});const pn=Dt.get(Nt);if(pn){if((0,Ee.vZ)(Ct,pn.options)&&(0,Ee.vZ)(Pt,pn.config))return pn;throw Mn.create("duplicate-app",{appName:Nt})}const Kt=new q.H0(Nt);for(const ae of $t.values())Kt.addComponent(ae);const ge=new lr(Ct,Pt,Kt);return Dt.set(Nt,ge),ge}function Gn(Ct=Wt){const ot=Dt.get(Ct);if(!ot)throw Mn.create("no-app",{appName:Ct});return ot}function wr(){return Array.from(Dt.values())}function Ln(Ct){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,p.Z)(function*(Ct){const ot=Ct.name;Dt.has(ot)&&(Dt.delete(ot),yield Promise.all(Ct.container.getProviders().map(Pt=>Pt.delete())),Ct.isDeleted=!0)})).apply(this,arguments)}function Ht(Ct,ot,Pt){var Nt;let pn=null!==(Nt=mt[Ct])&&void 0!==Nt?Nt:Ct;Pt&&(pn+=`-${Pt}`);const Kt=pn.match(/\s|\//),ge=ot.match(/\s|\//);if(Kt||ge){const ae=[`Unable to register library "${pn}" with version "${ot}":`];return Kt&&ae.push(`library name "${pn}" contains illegal characters (whitespace or "/")`),Kt&&ge&&ae.push("and"),ge&&ae.push(`version name "${ot}" contains illegal characters (whitespace or "/")`),void Ne.warn(ae.join(" "))}lt(new q.wA(`${pn}-version`,()=>({library:pn,version:ot}),"VERSION"))}function wn(Ct,ot){if(null!==Ct&&"function"!=typeof Ct)throw Mn.create("invalid-log-argument");(0,Q.Am)(Ct,ot)}function sn(Ct){(0,Q.Ub)(Ct)}const nr="firebase-heartbeat-store";let Ir=null;function an(){return Ir||(Ir=(0,Ee.X3)("firebase-heartbeat-database",1,(Ct,ot)=>{0===ot&&Ct.createObjectStore(nr)}).catch(Ct=>{throw Mn.create("storage-open",{originalErrorMessage:Ct.message})})),Ir}function gn(){return(gn=(0,p.Z)(function*(Ct){try{return(yield an()).transaction(nr).objectStore(nr).get(mr(Ct))}catch(ot){throw Mn.create("storage-get",{originalErrorMessage:ot.message})}})).apply(this,arguments)}function Ot(Ct,ot){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,p.Z)(function*(Ct,ot){try{const Nt=(yield an()).transaction(nr,"readwrite");return yield Nt.objectStore(nr).put(ot,mr(Ct)),Nt.complete}catch(Pt){throw Mn.create("storage-set",{originalErrorMessage:Pt.message})}})).apply(this,arguments)}function mr(Ct){return`${Ct.name}!${Ct.options.appId}`}class Dr{constructor(ot){this.container=ot,this._heartbeatsCache=null;const Pt=this.container.getProvider("app").getImmediate();this._storage=new Yt(Pt),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var ot=this;return(0,p.Z)(function*(){const Nt=ot.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pn=pr();if(null===ot._heartbeatsCache&&(ot._heartbeatsCache=yield ot._heartbeatsCachePromise),ot._heartbeatsCache.lastSentHeartbeatDate!==pn&&!ot._heartbeatsCache.heartbeats.some(Kt=>Kt.date===pn))return ot._heartbeatsCache.heartbeats.push({date:pn,agent:Nt}),ot._heartbeatsCache.heartbeats=ot._heartbeatsCache.heartbeats.filter(Kt=>{const ge=new Date(Kt.date).valueOf();return Date.now()-ge<=2592e6}),ot._storage.overwrite(ot._heartbeatsCache)})()}getHeartbeatsHeader(){var ot=this;return(0,p.Z)(function*(){if(null===ot._heartbeatsCache&&(yield ot._heartbeatsCachePromise),null===ot._heartbeatsCache||0===ot._heartbeatsCache.heartbeats.length)return"";const Pt=pr(),{heartbeatsToSend:Nt,unsentEntries:pn}=function xr(Ct,ot=1024){const Pt=[];let Nt=Ct.slice();for(const pn of Ct){const Kt=Pt.find(ge=>ge.agent===pn.agent);if(Kt){if(Kt.dates.push(pn.date),kr(Pt)>ot){Kt.dates.pop();break}}else if(Pt.push({agent:pn.agent,dates:[pn.date]}),kr(Pt)>ot){Pt.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:Pt,unsentEntries:Nt}}(ot._heartbeatsCache.heartbeats),Kt=(0,Ee.L)(JSON.stringify({version:2,heartbeats:Nt}));return ot._heartbeatsCache.lastSentHeartbeatDate=Pt,pn.length>0?(ot._heartbeatsCache.heartbeats=pn,yield ot._storage.overwrite(ot._heartbeatsCache)):(ot._heartbeatsCache.heartbeats=[],ot._storage.overwrite(ot._heartbeatsCache)),Kt})()}}function pr(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(ot){this.app=ot,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,Ee.hl)()&&(0,Ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ot=this;return(0,p.Z)(function*(){return(yield ot._canUseIndexedDBPromise)&&(yield function Hr(Ct){return gn.apply(this,arguments)}(ot.app))||{heartbeats:[]}})()}overwrite(ot){var Pt=this;return(0,p.Z)(function*(){var Nt;if(yield Pt._canUseIndexedDBPromise){const Kt=yield Pt.read();return Ot(Pt.app,{lastSentHeartbeatDate:null!==(Nt=ot.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Kt.lastSentHeartbeatDate,heartbeats:ot.heartbeats})}})()}add(ot){var Pt=this;return(0,p.Z)(function*(){var Nt;if(yield Pt._canUseIndexedDBPromise){const Kt=yield Pt.read();return Ot(Pt.app,{lastSentHeartbeatDate:null!==(Nt=ot.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Kt.lastSentHeartbeatDate,heartbeats:[...Kt.heartbeats,...ot.heartbeats]})}})()}}function kr(Ct){return(0,Ee.L)(JSON.stringify({version:2,heartbeats:Ct})).length}!function Xt(Ct){lt(new q.wA("platform-logger",ot=>new ye(ot),"PRIVATE")),lt(new q.wA("heartbeat",ot=>new Dr(ot),"PRIVATE")),Ht(Oe,"0.7.21",Ct),Ht(Oe,"0.7.21","esm2017"),Ht("fire-js","")}("")},4859:(Tt,We,F)=>{F.d(We,{H0:()=>Pe,wA:()=>Q});var p=F(5861),q=F(2090);class Q{constructor(ce,ie,Te){this.name=ce,this.instanceFactory=ie,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const Ee="[DEFAULT]";class ye{constructor(ce,ie){this.name=ce,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const ie=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(ie)){const Te=new q.BH;if(this.instancesDeferred.set(ie,Te),this.isInitialized(ie)||this.shouldAutoInitialize())try{const ut=this.getOrInitializeService({instanceIdentifier:ie});ut&&Te.resolve(ut)}catch(ut){}}return this.instancesDeferred.get(ie).promise}getImmediate(ce){var ie;const Te=this.normalizeInstanceIdentifier(null==ce?void 0:ce.identifier),ut=null!==(ie=null==ce?void 0:ce.optional)&&void 0!==ie&&ie;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(ut)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(Qe){if(ut)return null;throw Qe}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function Oe(Ne){return"EAGER"===Ne.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch(ie){}for(const[ie,Te]of this.instancesDeferred.entries()){const ut=this.normalizeInstanceIdentifier(ie);try{const Qe=this.getOrInitializeService({instanceIdentifier:ut});Te.resolve(Qe)}catch(Qe){}}}}clearInstance(ce=Ee){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,p.Z)(function*(){const ie=Array.from(ce.instances.values());yield Promise.all([...ie.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...ie.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=Ee){return this.instances.has(ce)}getOptions(ce=Ee){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:ie={}}=ce,Te=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ut=this.getOrInitializeService({instanceIdentifier:Te,options:ie});for(const[Qe,Ze]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(Qe)&&Ze.resolve(ut);return ut}onInit(ce,ie){var Te;const ut=this.normalizeInstanceIdentifier(ie),Qe=null!==(Te=this.onInitCallbacks.get(ut))&&void 0!==Te?Te:new Set;Qe.add(ce),this.onInitCallbacks.set(ut,Qe);const Ze=this.instances.get(ut);return Ze&&ce(Ze,ut),()=>{Qe.delete(ce)}}invokeOnInitCallbacks(ce,ie){const Te=this.onInitCallbacks.get(ie);if(Te)for(const ut of Te)try{ut(ce,ie)}catch(Qe){}}getOrInitializeService({instanceIdentifier:ce,options:ie={}}){let Te=this.instances.get(ce);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(Ne=ce,Ne===Ee?void 0:Ne),options:ie}),this.instances.set(ce,Te),this.instancesOptions.set(ce,ie),this.invokeOnInitCallbacks(Te,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,Te)}catch(ut){}var Ne;return Te||null}normalizeInstanceIdentifier(ce=Ee){return this.component?this.component.multipleInstances?ce:Ee:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pe{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const ie=this.getProvider(ce.name);if(ie.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);ie.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const ie=new ye(ce,this);return this.providers.set(ce,ie),ie}getProviders(){return Array.from(this.providers.values())}}},1877:(Tt,We,F)=>{F.d(We,{Am:()=>Ne,Ub:()=>Pe,Yd:()=>Oe,in:()=>q});const p=[];var q=(()=>{return(ce=q||(q={}))[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",q;var ce})();const Q={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Ee=q.INFO,ye={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Se=(ce,ie,...Te)=>{if(ie<ce.logLevel)return;const ut=(new Date).toISOString(),Qe=ye[ie];if(!Qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[Qe](`[${ut}]  ${ce.name}:`,...Te)};class Oe{constructor(ie){this.name=ie,this._logLevel=Ee,this._logHandler=Se,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in q))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?Q[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...ie),this._logHandler(this,q.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...ie),this._logHandler(this,q.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,q.INFO,...ie),this._logHandler(this,q.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,q.WARN,...ie),this._logHandler(this,q.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...ie),this._logHandler(this,q.ERROR,...ie)}}function Pe(ce){p.forEach(ie=>{ie.setLogLevel(ce)})}function Ne(ce,ie){for(const Te of p){let ut=null;ie&&ie.level&&(ut=Q[ie.level]),Te.userLogHandler=null===ce?null:(Qe,Ze,...gt)=>{const ze=gt.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch(Et){return null}}).filter(Le=>Le).join(" ");Ze>=(null!=ut?ut:Qe.logLevel)&&ce({level:q[Ze].toLowerCase(),message:ze,args:gt,type:Qe.name})}}}},1470:(Tt,We,F)=>{F.d(We,{hx:()=>ut,yI:()=>gt});var p=F(5e3),q=F(655),Q=F(2382),Ee=F(9808);const ye=new p.OlP("ngx-mask config"),Se=new p.OlP("new ngx-mask config"),Oe=new p.OlP("initial ngx-mask config"),Pe={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new p.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Ne=["Hh:m0:s0","Hh:m0","m0:s0"],ce=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let ie=(()=>{class Le{constructor(j){this._config=j,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(U,Y,ve,Ve)=>{var $e,ke;let we=[],X="";if(Array.isArray(ve)){const Vt=new RegExp(ve.map(wt=>"[\\^$.|?*+()".indexOf(wt)>=0?`\\${wt}`:wt).join("|"));we=U.split(Vt),X=null!==(ke=null===($e=U.match(Vt))||void 0===$e?void 0:$e[0])&&void 0!==ke?ke:""}else we=U.split(ve),X=ve;const Ce=we.length>1?`${X}${we[1]}`:"";let pe=we[0];const Ge=this.separatorLimit.replace(/\s/g,"");Ge&&+Ge&&(pe="-"===pe[0]?`-${pe.slice(1,pe.length).slice(0,Ge.length)}`:pe.slice(0,Ge.length));const Ue=/(\d+)(\d{3})/;for(;Y&&Ue.test(pe);)pe=pe.replace(Ue,"$1"+Y+"$2");return void 0===Ve?pe+Ce:0===Ve?pe:pe+Ce.substr(0,Ve+1)},this.percentage=U=>Number(U)>=0&&Number(U)<=100,this.getPrecision=U=>{const Y=U.split(".");return Y.length>1?Number(Y[Y.length-1]):1/0},this.checkAndRemoveSuffix=U=>{var Y,ve,Ve;for(let $e=(null===(Y=this.suffix)||void 0===Y?void 0:Y.length)-1;$e>=0;$e--){const ke=this.suffix.substr($e,null===(ve=this.suffix)||void 0===ve?void 0:ve.length);if(U.includes(ke)&&($e-1<0||!U.includes(this.suffix.substr($e-1,null===(Ve=this.suffix)||void 0===Ve?void 0:Ve.length))))return U.replace(ke,"")}return U},this.checkInputPrecision=(U,Y,ve)=>{if(Y<1/0){if(Array.isArray(ve)){const ke=ve.find(we=>we!==this.thousandSeparator);ve=ke||ve[0]}const Ve=new RegExp(this._charToRegExpExpression(ve)+`\\d{${Y}}.*$`),$e=U.match(Ve);$e&&$e[0].length-1>Y&&(U=U.substring(0,U.length-($e[0].length-1-Y))),0===Y&&this._compareOrIncludes(U[U.length-1],ve,this.thousandSeparator)&&(U=U.substring(0,U.length-1))}return U},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(j,U){const[Y,ve]=U;return this.customPattern=ve,this.applyMask(j,Y)}applyMask(j,U,Y=0,ve=!1,Ve=!1,$e=(()=>{})){var ke,we;if(!U||"string"!=typeof j)return"";let X=0,Ce="",pe=!1,Ge=!1,Ue=1,Vt=!1;j.slice(0,this.prefix.length)===this.prefix&&(j=j.slice(this.prefix.length,j.length)),this.suffix&&(null==j?void 0:j.length)>0&&(j=this.checkAndRemoveSuffix(j));const wt=j.toString().split("");"IP"===U&&(this.ipError=wt.filter(xt=>"."===xt).length<3&&wt.length<7,U="099.099.099.099");const Wt=[];for(let xt=0;xt<j.length;xt++)(null===(ke=j[xt])||void 0===ke?void 0:ke.match("\\d"))&&Wt.push(j[xt]);if("CPF_CNPJ"===U&&(this.cpfCnpjError=11!==Wt.length&&14!==Wt.length,U=Wt.length>11?"00.000.000/0000-00":"000.000.000-00"),U.startsWith("percent")){if(j.match("[a-z]|[A-Z]")||j.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){j=this._stripToDecimal(j);const xt=this.getPrecision(U);j=this.checkInputPrecision(j,xt,this.decimalMarker)}j.indexOf(".")>0&&!this.percentage(j.substring(0,j.indexOf(".")))&&(j=`${j.substring(0,j.indexOf(".")-1)}${j.substring(j.indexOf("."),j.length)}`),Ce=this.percentage(j)?j:j.substring(0,j.length-1)}else if(U.startsWith("separator")){(j.match("[w\u0430-\u044f\u0410-\u042f]")||j.match("[\u0401\u0451\u0410-\u044f]")||j.match("[a-z]|[A-Z]")||j.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||j.match("[^A-Za-z0-9,]"))&&(j=this._stripToDecimal(j)),j=j.length>1&&"0"===j[0]&&!this._compareOrIncludes(j[1],this.decimalMarker,this.thousandSeparator)&&!Ve?j.slice(1,j.length):j,Ve&&(j=this._compareOrIncludes(j[j.length-1],this.decimalMarker,this.thousandSeparator)?j.slice(0,j.length-1):j);const xt=this._charToRegExpExpression(this.thousandSeparator);let lt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(xt,"");if(Array.isArray(this.decimalMarker))for(const lr of this.decimalMarker)lt=lt.replace(this._charToRegExpExpression(lr),"");else lt=lt.replace(this._charToRegExpExpression(this.decimalMarker),"");const ln=new RegExp("["+lt+"]");(j.match(ln)||1===j.length&&this._compareOrIncludes(j,this.decimalMarker,this.thousandSeparator))&&(j=j.substring(0,j.length-1));const kt=this.getPrecision(U),nn=(j=this.checkInputPrecision(j,kt,this.decimalMarker)).replace(new RegExp(xt,"g"),"");Ce=this._formatWithSeparators(nn,this.thousandSeparator,this.decimalMarker,kt);const Hn=Ce.indexOf(",")-j.indexOf(","),Mn=Ce.length-j.length;if(Mn>0&&","!==Ce[Y]){Ge=!0;let lr=0;do{this._shift.add(Y+lr),lr++}while(lr<Mn)}else 0!==Hn&&Y>0&&!(Ce.indexOf(",")>=Y&&Y>3)||!(Ce.indexOf(".")>=Y&&Y>3)&&Mn<=0?(this._shift.clear(),Ge=!0,Ue=Mn,this._shift.add(Y+=Mn)):this._shift.clear()}else for(let xt=0,lt=wt[0];xt<wt.length&&X!==U.length;xt++,lt=wt[xt])if(this._checkSymbolMask(lt,U[X])&&"?"===U[X+1])Ce+=lt,X+=2;else if("*"===U[X+1]&&pe&&this._checkSymbolMask(lt,U[X+2]))Ce+=lt,X+=3,pe=!1;else if(this._checkSymbolMask(lt,U[X])&&"*"===U[X+1])Ce+=lt,pe=!0;else if("?"===U[X+1]&&this._checkSymbolMask(lt,U[X+2]))Ce+=lt,X+=3;else if(this._checkSymbolMask(lt,U[X])){if("H"===U[X]&&Number(lt)>2){X+=1,this._shiftStep(U,X,wt.length),xt--,this.leadZeroDateTime&&(Ce+="0");continue}if("h"===U[X]&&"2"===Ce&&Number(lt)>3){X+=1,xt--;continue}if("m"===U[X]&&Number(lt)>5){X+=1,this._shiftStep(U,X,wt.length),xt--,this.leadZeroDateTime&&(Ce+="0");continue}if("s"===U[X]&&Number(lt)>5){X+=1,this._shiftStep(U,X,wt.length),xt--,this.leadZeroDateTime&&(Ce+="0");continue}const ln=31;if("d"===U[X]&&(Number(lt)>3&&this.leadZeroDateTime||Number(j.slice(X,X+2))>ln||"/"===j[X+1])){X+=1,this._shiftStep(U,X,wt.length),xt--,this.leadZeroDateTime&&(Ce+="0");continue}if("M"===U[X]){const nn=0===X&&(Number(lt)>2||Number(j.slice(X,X+2))>12||"/"===j[X+1]),Hn=j.slice(X-3,X-1).includes("/")&&("/"===j[X-2]&&Number(j.slice(X-1,X+1))>12&&"/"!==j[X]||"/"===j[X]||"/"===j[X-3]&&Number(j.slice(X-2,X))>12&&"/"!==j[X-1]||"/"===j[X-1]),Mn=Number(j.slice(X-3,X-1))<=ln&&!j.slice(X-3,X-1).includes("/")&&"/"===j[X-1]&&(Number(j.slice(X,X+2))>12||"/"===j[X+1]),lr=Number(j.slice(X-3,X-1))>ln&&!j.slice(X-3,X-1).includes("/")&&!j.slice(X-2,X).includes("/")&&Number(j.slice(X-2,X))>12,tr=Number(j.slice(X-3,X-1))<=ln&&!j.slice(X-3,X-1).includes("/")&&"/"!==j[X-1]&&Number(j.slice(X-1,X+1))>12;if(Number(lt)>1&&this.leadZeroDateTime||nn||Hn||Mn||lr||tr){X+=1,this._shiftStep(U,X,wt.length),xt--,this.leadZeroDateTime&&(Ce+="0");continue}}Ce+=lt,X++}else-1!==this.maskSpecialCharacters.indexOf(U[X])?(Ce+=U[X],X++,this._shiftStep(U,X,wt.length),xt--):this.maskSpecialCharacters.indexOf(lt)>-1&&this.maskAvailablePatterns[U[X]]&&(null===(we=this.maskAvailablePatterns[U[X]])||void 0===we?void 0:we.optional)?(!!wt[X]&&"099.099.099.099"!==U&&"000.000.000-00"!==U&&"00.000.000/0000-00"!==U&&!U.match(/^9+\.0+$/)&&(Ce+=wt[X]),X++,xt--):"*"===this.maskExpression[X+1]&&this._findSpecialChar(this.maskExpression[X+2])&&this._findSpecialChar(lt)===this.maskExpression[X+2]&&pe||"?"===this.maskExpression[X+1]&&this._findSpecialChar(this.maskExpression[X+2])&&this._findSpecialChar(lt)===this.maskExpression[X+2]&&pe?(X+=3,Ce+=lt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(lt)<0&&lt!==this.placeHolderCharacter&&(Vt=!0);Ce.length+1===U.length&&-1!==this.maskSpecialCharacters.indexOf(U[U.length-1])&&(Ce+=U[U.length-1]);let mt=Y+1;for(;this._shift.has(mt);)Ue++,mt++;let Dt=ve?X:this._shift.has(Y)?Ue:0;Vt&&Dt--,$e(Dt,Ge),Ue<0&&this._shift.clear();let $t=!1;Ve&&($t=wt.every(xt=>this.maskSpecialCharacters.includes(xt)));let It=`${this.prefix}${$t?"":Ce}${this.suffix}`;return 0===Ce.length&&(It=`${this.prefix}${Ce}`),It}_findSpecialChar(j){return this.maskSpecialCharacters.find(U=>U===j)}_checkSymbolMask(j,U){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[U]&&this.maskAvailablePatterns[U].pattern&&this.maskAvailablePatterns[U].pattern.test(j)}_stripToDecimal(j){return j.split("").filter((U,Y)=>U.match("^-?\\d")||U.match("\\s")||"."===U||","===U||"-"===U&&0===Y&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(j){return j&&(" "===j?"\\s":"[\\^$.|?*+()".indexOf(j)>=0?`\\${j}`:j)}_shiftStep(j,U,Y){const ve=/[*?]/g.test(j.slice(0,U))?Y:U;this._shift.add(ve+this.prefix.length||0)}_compareOrIncludes(j,U,Y){return Array.isArray(U)?U.filter(ve=>ve!==Y).includes(j):j===U}}return Le.\u0275fac=function(j){return new(j||Le)(p.LFG(ye))},Le.\u0275prov=p.Yz7({token:Le,factory:Le.\u0275fac}),Le})(),Te=(()=>{class Le extends ie{constructor(j,U,Y,ve){super(U),this.document=j,this._config=U,this._elementRef=Y,this._renderer=ve,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=Ve=>{}}applyMask(j,U,Y=0,ve=!1,Ve=!1,$e=(()=>{})){if(!U)return j!==this.actualValue?this.actualValue:j;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(j||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(j||"#")),!j&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const ke=j&&"number"==typeof this.selStart?j[this.selStart]:"";let we="";if(this.hiddenInput&&!this.writingValue){let Ge=this.actualValue.split("");""!==j&&Ge.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(j.length>Ge.length?Ge.splice(this.selStart,0,ke):j.length<Ge.length&&(Ge.length-j.length==1?Ge.splice(this.selStart-1,1):Ge.splice(this.selStart,this.selEnd-this.selStart))):Ge=[],this.showMaskTyped&&(j=this.removeMask(j)),we=this.actualValue.length&&Ge.length<=j.length?this.shiftTypedSymbols(Ge.join("")):j}we=Boolean(we)&&we.length?we:j;const X=super.applyMask(we,U,Y,ve,Ve,$e);if(this.actualValue=this.getActualValue(X),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(Ge=>!this._compareOrIncludes(Ge,this.decimalMarker,this.thousandSeparator))),this.formControlResult(X),!this.showMaskTyped)return this.hiddenInput&&X&&X.length?this.hideInput(X,this.maskExpression):X;const Ce=X.length,pe=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const Ge=this._numberSkipedSymbols(X);return X+pe.slice(Ce+Ge)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?X+pe:X+pe.slice(Ce)}_numberSkipedSymbols(j){const U=/(^|\D)(\d\D)/g;let Y=U.exec(j),ve=0;for(;null!=Y;)ve+=1,Y=U.exec(j);return ve}applyValueChanges(j,U,Y,ve=(()=>{})){const Ve=this._elementRef.nativeElement;Ve.value=this.applyMask(Ve.value,this.maskExpression,j,U,Y,ve),Ve!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(j,U){return j.split("").map((Y,ve)=>{var Ve,$e;return this.maskAvailablePatterns&&this.maskAvailablePatterns[U[ve]]&&(null===(Ve=this.maskAvailablePatterns[U[ve]])||void 0===Ve?void 0:Ve.symbol)?null===($e=this.maskAvailablePatterns[U[ve]])||void 0===$e?void 0:$e.symbol:Y}).join("")}getActualValue(j){const U=j.split("").filter((Y,ve)=>this._checkSymbolMask(Y,this.maskExpression[ve])||this.maskSpecialCharacters.includes(this.maskExpression[ve])&&Y===this.maskExpression[ve]);return U.join("")===j?U.join(""):j}shiftTypedSymbols(j){let U="";return(j&&j.split("").map((ve,Ve)=>{if(this.maskSpecialCharacters.includes(j[Ve+1])&&j[Ve+1]!==this.maskExpression[Ve+1])return U=ve,j[Ve+1];if(U.length){const $e=U;return U="",$e}return ve})||[]).join("")}numberToString(j){return j||0===j?Number(j).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(j)}showMaskInInput(j){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(j){if("IP"===this.maskExpression)return this._checkForIp(j);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(j)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const j=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==j.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(j.value,this.maskExpression))}set formElementProperty([j,U]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,j,U))}checkSpecialCharAmount(j){return j.split("").filter(Y=>this._findSpecialChar(Y)).length}removeMask(j){return this._removeMask(this._removeSuffix(this._removePrefix(j)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(j){var U;if("#"===j)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const Y=[];for(let ve=0;ve<j.length;ve++)(null===(U=j[ve])||void 0===U?void 0:U.match("\\d"))&&Y.push(j[ve]);return Y.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:Y.length>3&&Y.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:Y.length>6&&Y.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(j){var U;const Y=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,ve=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===j)return Y;const Ve=[];for(let $e=0;$e<j.length;$e++)(null===(U=j[$e])||void 0===U?void 0:U.match("\\d"))&&Ve.push(j[$e]);return Ve.length<=3?Y.slice(Ve.length,Y.length):Ve.length>3&&Ve.length<=6?Y.slice(Ve.length+1,Y.length):Ve.length>6&&Ve.length<=9?Y.slice(Ve.length+2,Y.length):Ve.length>9&&Ve.length<11?Y.slice(Ve.length+3,Y.length):11===Ve.length?"":12===Ve.length?ve.slice(17===j.length?16:15,ve.length):Ve.length>12&&Ve.length<=14?ve.slice(Ve.length+4,ve.length):""}formControlResult(j){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(j)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(j)):this._removeSuffix(j))}_toNumber(j){if(!this.isNumberValue||""===j)return j;const U=Number(j);return Number.isNaN(U)?j:U}_removeMask(j,U){return j&&j.replace(this._regExpForRemove(U),"")}_removePrefix(j){return this.prefix?j&&j.replace(this.prefix,""):j}_removeSuffix(j){return this.suffix?j&&j.replace(this.suffix,""):j}_retrieveSeparatorValue(j){return this._removeMask(this._removeSuffix(this._removePrefix(j)),this.maskSpecialCharacters)}_regExpForRemove(j){return new RegExp(j.map(U=>`\\${U}`).join("|"),"gi")}_checkSymbols(j){if(""===j)return j;const U=this._retrieveSeparatorPrecision(this.maskExpression);let Y=this._retrieveSeparatorValue(j);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(Y=Y.replace(this.decimalMarker,".")),this.isNumberValue?U?j===this.decimalMarker?null:this._checkPrecision(this.maskExpression,Y):Number(Y):Y}_retrieveSeparatorPrecision(j){const U=j.match(new RegExp("^separator\\.([^d]*)"));return U?Number(U[1]):null}_checkPrecision(j,U){return j.indexOf("2")>0?Number(U).toFixed(2):Number(U)}}return Le.\u0275fac=function(j){return new(j||Le)(p.LFG(Ee.K0),p.LFG(ye),p.LFG(p.SBq),p.LFG(p.Qsj))},Le.\u0275prov=p.Yz7({token:Le,factory:Le.\u0275fac}),Le})(),ut=(()=>{class Le{constructor(j,U,Y){this.document=j,this._maskService=U,this._config=Y,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new p.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=ve=>{},this.onTouch=()=>{}}ngOnChanges(j){const{maskExpression:U,specialCharacters:Y,patterns:ve,prefix:Ve,suffix:$e,thousandSeparator:ke,decimalMarker:we,dropSpecialCharacters:X,hiddenInput:Ce,showMaskTyped:pe,placeHolderCharacter:Ge,shownMaskExpression:Ue,showTemplate:Vt,clearIfNotMatch:wt,validation:Wt,separatorLimit:mt,allowNegativeNumbers:Dt,leadZeroDateTime:$t,triggerOnMaskChange:It}=j;if(U&&(U.currentValue!==U.previousValue&&!U.firstChange&&(this._maskService.maskChanged=!0),U.currentValue&&U.currentValue.split("||").length>1?(this._maskExpressionArray=U.currentValue.split("||").sort((xt,lt)=>xt.length-lt.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0]):(this._maskExpressionArray=[],this._maskValue=U.currentValue||"",this._maskService.maskExpression=this._maskValue)),Y){if(!Y.currentValue||!Array.isArray(Y.currentValue))return;this._maskService.maskSpecialCharacters=Y.currentValue||[]}ve&&ve.currentValue&&(this._maskService.maskAvailablePatterns=ve.currentValue),Ve&&(this._maskService.prefix=Ve.currentValue),$e&&(this._maskService.suffix=$e.currentValue),ke&&(this._maskService.thousandSeparator=ke.currentValue),we&&(this._maskService.decimalMarker=we.currentValue),X&&(this._maskService.dropSpecialCharacters=X.currentValue),Ce&&(this._maskService.hiddenInput=Ce.currentValue),pe&&(this._maskService.showMaskTyped=pe.currentValue),Ge&&(this._maskService.placeHolderCharacter=Ge.currentValue),Ue&&(this._maskService.shownMaskExpression=Ue.currentValue),Vt&&(this._maskService.showTemplate=Vt.currentValue),wt&&(this._maskService.clearIfNotMatch=wt.currentValue),Wt&&(this._maskService.validation=Wt.currentValue),mt&&(this._maskService.separatorLimit=mt.currentValue),Dt&&(this._maskService.allowNegativeNumbers=Dt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(xt=>"-"!==xt))),$t&&(this._maskService.leadZeroDateTime=$t.currentValue),It&&(this._maskService.triggerOnMaskChange=It.currentValue),this._applyMask()}validate({value:j}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(j);if(this._maskService.cpfCnpjError)return this._createValidationError(j);if(this._maskValue.startsWith("separator")||ce.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Ne.includes(this._maskValue))return this._validateTime(j);if(j&&j.toString().length>=1){let U=0;for(const Y in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[Y].optional&&(this._maskValue.indexOf(Y)!==this._maskValue.lastIndexOf(Y)?U+=this._maskValue.split("").filter(Ve=>Ve===Y).join("").length:-1!==this._maskValue.indexOf(Y)&&U++,-1!==this._maskValue.indexOf(Y)&&j.toString().length>=this._maskValue.indexOf(Y)||U===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&j.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&j.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&j.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(j);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const Y=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-U:this._maskValue.length-U;if(j.toString().length<Y)return this._createValidationError(j)}}return j&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(j){!j&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(j){const U=j.target;if(this._inputValue=U.value,this._setMask(),!this._maskValue)return void this.onChange(U.value);const Y=1===U.selectionStart?U.selectionStart+this._maskService.prefix.length:U.selectionStart;let ve=0,Ve=!1;if(this._maskService.applyValueChanges(Y,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(ke,we)=>{this._justPasted=!1,ve=ke,Ve=we}),this.document.activeElement!==U)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let $e=this._position?this._inputValue.length+Y+ve:Y+("Backspace"!==this._code||Ve?ve:0);$e>this._getActualInputLength()&&($e=this._getActualInputLength()),$e<0&&($e=0),U.setSelectionRange($e,$e),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(j){if(!this._maskValue)return;const U=j.target;null!==U&&null!==U.selectionStart&&U.selectionStart===U.selectionEnd&&U.selectionStart>this._maskService.prefix.length&&38!==j.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),U.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===U.value?(U.focus(),U.setSelectionRange(0,0)):U.selectionStart>this._maskService.actualValue.length&&U.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const Ve=U.value&&U.value!==this._maskService.prefix?U.value:this._maskService.prefix+this._maskService.maskIsShown;U.value!==Ve&&(U.value=Ve),(U.selectionStart||U.selectionEnd)<=this._maskService.prefix.length?U.selectionStart=this._maskService.prefix.length:U.selectionEnd>this._getActualInputLength()&&(U.selectionEnd=this._getActualInputLength())}onKeyDown(j){var U;if(!this._maskValue)return;this._code=j.code?j.code:j.key;const Y=j.target;if(this._inputValue=Y.value,this._setMask(),38===j.keyCode&&j.preventDefault(),37===j.keyCode||8===j.keyCode||46===j.keyCode){if(8===j.keyCode&&0===Y.value.length&&(Y.selectionStart=Y.selectionEnd),8===j.keyCode&&0!==Y.selectionStart)if(this.specialCharacters=(null===(U=this.specialCharacters)||void 0===U?void 0:U.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&Y.selectionStart<=this.prefix.length)Y.setSelectionRange(this.prefix.length,Y.selectionEnd);else if(this._inputValue.length!==Y.selectionStart&&1!==Y.selectionStart)for(;this.specialCharacters.includes(this._inputValue[Y.selectionStart-1].toString())&&(this.prefix.length>=1&&Y.selectionStart>this.prefix.length||0===this.prefix.length);)Y.setSelectionRange(Y.selectionStart-1,Y.selectionEnd);this.checkSelectionOnDeletion(Y),this._maskService.prefix.length&&Y.selectionStart<=this._maskService.prefix.length&&Y.selectionEnd<=this._maskService.prefix.length&&j.preventDefault();const ve=Y.selectionStart;8===j.keyCode&&!Y.readOnly&&0===ve&&Y.selectionEnd===Y.value.length&&0!==Y.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<Y.selectionStart?Y.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===j.keyCode&&j.ctrlKey||65===j.keyCode&&j.metaKey)&&(Y.setSelectionRange(0,this._getActualInputLength()),j.preventDefault()),this._maskService.selStart=Y.selectionStart,this._maskService.selEnd=Y.selectionEnd}writeValue(j){return(0,q.mG)(this,void 0,void 0,function*(){"object"==typeof j&&null!==j&&"value"in j&&("disable"in j&&this.setDisabledState(Boolean(j.disable)),j=j.value),("number"==typeof j||this._maskValue.startsWith("separator"))&&(j=this._maskService.numberToString(j),Array.isArray(this.decimalMarker)||(j="."!==this.decimalMarker?j.replace(".",this.decimalMarker):j),this._maskService.isNumberValue=!0),"string"!=typeof j&&(j=""),this._inputValue=j,this._setMask(),j&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(j,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",j],this._inputValue=j})}registerOnChange(j){this.onChange=j,this._maskService.onChange=this.onChange}registerOnTouched(j){this.onTouch=j}checkSelectionOnDeletion(j){j.selectionStart=Math.min(Math.max(this.prefix.length,j.selectionStart),this._inputValue.length-this.suffix.length),j.selectionEnd=Math.min(Math.max(this.prefix.length,j.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(j){this._maskService.formElementProperty=["disabled",j]}_repeatPatternSymbols(j){return j.match(/{[0-9]+}/)&&j.split("").reduce((U,Y,ve)=>{if(this._start="{"===Y?ve:this._start,"}"!==Y)return this._maskService._findSpecialChar(Y)?U+Y:U;this._end=ve;const Ve=Number(j.slice(this._start+1,this._end));return U+new Array(Ve+1).join(j[this._start-1])},"")||j}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(j){const U=this._maskValue.split("").filter(Y=>":"!==Y).length;return j&&(0==+j[j.length-1]&&j.length<U||j.length<=U-2)?this._createValidationError(j):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(j){return{mask:{requiredMask:this._maskValue,actualValue:j}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(j=>{var U,Y;const ve=(null===(U=this._maskService.removeMask(this._inputValue))||void 0===U?void 0:U.length)<=(null===(Y=this._maskService.removeMask(j))||void 0===Y?void 0:Y.length);if(this._inputValue&&ve)return this._maskValue=j,this.maskExpression=j,this._maskService.maskExpression=j,ve;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return Le.\u0275fac=function(j){return new(j||Le)(p.Y36(Ee.K0),p.Y36(Te),p.Y36(ye))},Le.\u0275dir=p.lG2({type:Le,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(j,U){1&j&&p.NdJ("paste",function(){return U.onPaste()})("ngModelChange",function(ve){return U.onModelChange(ve)})("input",function(ve){return U.onInput(ve)})("blur",function(){return U.onBlur()})("click",function(ve){return U.onClick(ve)})("keydown",function(ve){return U.onKeyDown(ve)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[p._Bn([{provide:Q.JU,useExisting:(0,p.Gpc)(()=>Le),multi:!0},{provide:Q.Cf,useExisting:(0,p.Gpc)(()=>Le),multi:!0},Te]),p.TTD]}),Le})();function Ze(Le,Et){return Object.assign(Object.assign({},Le),Et instanceof Function?Et():Et)}let gt=(()=>{class Le{static forRoot(j){return{ngModule:Le,providers:[{provide:Se,useValue:j},{provide:Oe,useValue:Pe},{provide:ye,useFactory:Ze,deps:[Oe,Se]},ie]}}static forChild(){return{ngModule:Le}}}return Le.\u0275fac=function(j){return new(j||Le)},Le.\u0275mod=p.oAB({type:Le}),Le.\u0275inj=p.cJS({}),Le})();const ze="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ze.KeyboardEvent||(ze.KeyboardEvent=function(Le,Et){})},5861:(Tt,We,F)=>{function p(Q,Ee,ye,Se,Oe,Pe,Ne){try{var ce=Q[Pe](Ne),ie=ce.value}catch(Te){return void ye(Te)}ce.done?Ee(ie):Promise.resolve(ie).then(Se,Oe)}function q(Q){return function(){var Ee=this,ye=arguments;return new Promise(function(Se,Oe){var Pe=Q.apply(Ee,ye);function Ne(ie){p(Pe,Se,Oe,Ne,ce,"next",ie)}function ce(ie){p(Pe,Se,Oe,Ne,ce,"throw",ie)}Ne(void 0)})}}F.d(We,{Z:()=>q})}},Tt=>{Tt(Tt.s=6213)}]);