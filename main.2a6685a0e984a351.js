"use strict";(self.webpackChunkclipit=self.webpackChunkclipit||[]).push([[179],{440:(Mt,We,k)=>{k.d(We,{nm:()=>Pn});var p=k(5813);k(5e3),k(5867);var F=k(5861),J=k(9681),le=k(4859),Le=k(2090),je=k(1877);const Ne=new Map,Ie={activated:!1,tokenObservers:[]},Q={initialized:!1,enabled:!1};function Se(he){return Ne.get(he)||Ie}function de(he,ye){Ne.set(he,ye)}function Ye(){return Q}class qt{constructor(ye,Ue,rt,_t,Zt){if(this.operation=ye,this.retryPolicy=Ue,this.getWaitDuration=rt,this.lowerBound=_t,this.upperBound=Zt,this.pending=null,this.nextErrorWaitInterval=_t,_t>Zt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ye){var Ue=this;return(0,F.Z)(function*(){Ue.stop();try{Ue.pending=new Le.BH,yield function Rt(he){return new Promise(ye=>{setTimeout(ye,he)})}(Ue.getNextRun(ye)),Ue.pending.resolve(),yield Ue.pending.promise,Ue.pending=new Le.BH,yield Ue.operation(),Ue.pending.resolve(),yield Ue.pending.promise,Ue.process(!0).catch(()=>{})}catch(rt){Ue.retryPolicy(rt)?Ue.process(!1).catch(()=>{}):Ue.stop()}})()}getNextRun(ye){if(ye)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ue=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ue}}}const lt=new Le.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function en(he){if(!Se(he).activated)throw lt.create("use-before-activation",{appName:he.name})}function cr(he,ye){return rr.apply(this,arguments)}function rr(){return(rr=(0,F.Z)(function*({url:he,body:ye},Ue){const rt={"Content-Type":"application/json"},_t=Ue.getImmediate({optional:!0});if(_t){const gi=yield _t.getHeartbeatsHeader();gi&&(rt["X-Firebase-Client"]=gi)}const Zt={method:"POST",body:JSON.stringify(ye),headers:rt};let $n,Hr;try{$n=yield fetch(he,Zt)}catch(gi){throw lt.create("fetch-network-error",{originalErrorMessage:gi.message})}if(200!==$n.status)throw lt.create("fetch-status-error",{httpStatus:$n.status});try{Hr=yield $n.json()}catch(gi){throw lt.create("fetch-parse-error",{originalErrorMessage:gi.message})}const Gn=Hr.ttl.match(/^([\d.]+)(s)$/);if(!Gn||!Gn[2]||isNaN(Number(Gn[1])))throw lt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Hr.ttl}`});const Mi=1e3*Number(Gn[1]),ts=Date.now();return{token:Hr.attestationToken,expireTimeMillis:ts+Mi,issuedAtTimeMillis:ts}})).apply(this,arguments)}function Ar(he,ye){const{projectId:Ue,appId:rt,apiKey:_t}=he.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Ue}/apps/${rt}:exchangeDebugToken?key=${_t}`,body:{debug_token:ye}}}const Qt="firebase-app-check-store";let on=null;function Nr(){return on||(on=new Promise((he,ye)=>{try{const Ue=indexedDB.open("firebase-app-check-database",1);Ue.onsuccess=rt=>{he(rt.target.result)},Ue.onerror=rt=>{var _t;ye(lt.create("storage-open",{originalErrorMessage:null===(_t=rt.target.error)||void 0===_t?void 0:_t.message}))},Ue.onupgradeneeded=rt=>{0===rt.oldVersion&&rt.target.result.createObjectStore(Qt,{keyPath:"compositeKey"})}}catch(Ue){ye(lt.create("storage-open",{originalErrorMessage:Ue.message}))}}),on)}function En(){return(En=(0,F.Z)(function*(he,ye){const rt=(yield Nr()).transaction(Qt,"readwrite"),Zt=rt.objectStore(Qt).put({compositeKey:he,value:ye});return new Promise(($n,Hr)=>{Zt.onsuccess=Gn=>{$n()},rt.onerror=Gn=>{var Mi;Hr(lt.create("storage-set",{originalErrorMessage:null===(Mi=Gn.target.error)||void 0===Mi?void 0:Mi.message}))}})})).apply(this,arguments)}const dr=new je.Yd("@firebase/app-check");function _r(he,ye){return(0,Le.hl)()?function ir(he,ye){return function Br(he,ye){return En.apply(this,arguments)}(function Sn(he){return`${he.options.appId}-${he.name}`}(he),ye)}(he,ye).catch(Ue=>{dr.warn(`Failed to write token to IndexedDB. Error: ${Ue}`)}):Promise.resolve()}function Sr(){return Ye().enabled}function In(){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,F.Z)(function*(){const he=Ye();if(he.enabled&&he.token)return he.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ut={error:"UNKNOWN_ERROR"};function kt(he){return Le.US.encodeString(JSON.stringify(he),!1)}function Tt(he){return zt.apply(this,arguments)}function zt(){return(zt=(0,F.Z)(function*(he,ye=!1){const Ue=he.app;en(Ue);const rt=Se(Ue);let Zt,_t=rt.token;if(!_t){const Gn=yield rt.cachedTokenPromise;Gn&&Ct(Gn)&&(_t=Gn)}if(!ye&&_t&&Ct(_t))return{token:_t.token};let Hr,$n=!1;if(Sr()){rt.exchangeTokenPromise||(rt.exchangeTokenPromise=cr(Ar(Ue,yield In()),he.heartbeatServiceProvider).then(Mi=>(rt.exchangeTokenPromise=void 0,Mi)),$n=!0);const Gn=yield rt.exchangeTokenPromise;return yield _r(Ue,Gn),de(Ue,Object.assign(Object.assign({},rt),{token:Gn})),{token:Gn.token}}try{rt.exchangeTokenPromise||(rt.exchangeTokenPromise=rt.provider.getToken().then(Gn=>(rt.exchangeTokenPromise=void 0,Gn)),$n=!0),_t=yield rt.exchangeTokenPromise}catch(Gn){"appCheck/throttled"===Gn.code?dr.warn(Gn.message):dr.error(Gn),Zt=Gn}return _t?(Hr={token:_t.token},de(Ue,Object.assign(Object.assign({},rt),{token:_t})),yield _r(Ue,_t)):Hr=Kt(Zt),$n&&Ve(Ue,Hr),Hr})).apply(this,arguments)}function ie(he,ye){const Ue=Se(he),rt=Ue.tokenObservers.filter(_t=>_t.next!==ye);0===rt.length&&Ue.tokenRefresher&&Ue.tokenRefresher.isRunning()&&Ue.tokenRefresher.stop(),de(he,Object.assign(Object.assign({},Ue),{tokenObservers:rt}))}function Ce(he){const{app:ye}=he,Ue=Se(ye);let rt=Ue.tokenRefresher;rt||(rt=function qe(he){const{app:ye}=he;return new qt((0,F.Z)(function*(){let rt;if(rt=Se(ye).token?yield Tt(he,!0):yield Tt(he),rt.error)throw rt.error}),()=>!0,()=>{const Ue=Se(ye);if(Ue.token){let rt=Ue.token.issuedAtTimeMillis+.5*(Ue.token.expireTimeMillis-Ue.token.issuedAtTimeMillis)+3e5;return rt=Math.min(rt,Ue.token.expireTimeMillis-3e5),Math.max(0,rt-Date.now())}return 0},3e4,96e4)}(he),de(ye,Object.assign(Object.assign({},Ue),{tokenRefresher:rt}))),!rt.isRunning()&&Ue.isTokenAutoRefreshEnabled&&rt.start()}function Ve(he,ye){const Ue=Se(he).tokenObservers;for(const rt of Ue)try{"EXTERNAL"===rt.type&&null!=ye.error?rt.error(ye.error):rt.next(ye)}catch(_t){}}function Ct(he){return he.expireTimeMillis-Date.now()>0}function Kt(he){return{token:kt(Ut),error:he}}class Tn{constructor(ye,Ue){this.app=ye,this.heartbeatServiceProvider=Ue}_delete(){const{tokenObservers:ye}=Se(this.app);for(const Ue of ye)ie(this.app,Ue.next);return Promise.resolve()}}const Yr="app-check-internal";!function Rr(){(0,J._registerComponent)(new le.wA("app-check",he=>function Mr(he,ye){return new Tn(he,ye)}(he.getProvider("app").getImmediate(),he.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((he,ye,Ue)=>{he.getProvider(Yr).initialize()})),(0,J._registerComponent)(new le.wA(Yr,he=>function wn(he){return{getToken:ye=>Tt(he,ye),addTokenListener:ye=>function pe(he,ye,Ue,rt){const{app:_t}=he,Zt=Se(_t),$n={next:Ue,error:rt,type:ye};if(de(_t,Object.assign(Object.assign({},Zt),{tokenObservers:[...Zt.tokenObservers,$n]})),Zt.token&&Ct(Zt.token)){const Hr=Zt.token;Promise.resolve().then(()=>{Ue({token:Hr.token}),Ce(he)}).catch(()=>{})}Zt.cachedTokenPromise.then(()=>Ce(he))}(he,"INTERNAL",ye),removeTokenListener:ye=>ie(he.app,ye)}}(he.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)("@firebase/app-check","0.5.6")}();class Pn{constructor(){return(0,p.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Mt,We,k)=>{k.d(We,{zQ:()=>$e,ww:()=>Wt,rT:()=>Q,f7:()=>de,L6:()=>Ne,_Q:()=>Ie,lh:()=>Se,Qv:()=>je,nw:()=>Ye});var p=k(5e3),K=k(7579),Y=k(9646),we=k(9751),me=k(8996),Ae=k(6451),Oe=k(6063);class Re extends K.x{constructor(Lt=1/0,pt=1/0,bt=Oe.l){super(),this._bufferSize=Lt,this._windowTime=pt,this._timestampProvider=bt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=pt===1/0,this._bufferSize=Math.max(1,Lt),this._windowTime=Math.max(1,pt)}next(Lt){const{isStopped:pt,_buffer:bt,_infiniteTimeWindow:qt,_timestampProvider:Rt,_windowTime:Vt}=this;pt||(bt.push(Lt),!qt&&bt.push(Rt.now()+Vt)),this._trimBuffer(),super.next(Lt)}_subscribe(Lt){this._throwIfClosed(),this._trimBuffer();const pt=this._innerSubscribe(Lt),{_infiniteTimeWindow:bt,_buffer:qt}=this,Rt=qt.slice();for(let Vt=0;Vt<Rt.length&&!Lt.closed;Vt+=bt?1:2)Lt.next(Rt[Vt]);return this._checkFinalizedStatuses(Lt),pt}_trimBuffer(){const{_bufferSize:Lt,_timestampProvider:pt,_buffer:bt,_infiniteTimeWindow:qt}=this,Rt=(qt?1:2)*Lt;if(Lt<1/0&&Rt<bt.length&&bt.splice(0,bt.length-Rt),!qt){const Vt=pt.now();let lt=0;for(let pn=1;pn<bt.length&&bt[pn]<=Vt;pn+=2)lt=pn;lt&&bt.splice(0,lt+1)}}}var Fe=k(3099);function ue(It,Lt,pt){let bt,qt=!1;return It&&"object"==typeof It?({bufferSize:bt=1/0,windowTime:Lt=1/0,refCount:qt=!1,scheduler:pt}=It):bt=null!=It?It:1/0,(0,Fe.B)({connector:()=>new Re(bt,Lt,pt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:qt})}var re=k(3900),_e=k(576);function He(It,Lt){return(0,_e.m)(Lt)?(0,re.w)(()=>It,Lt):(0,re.w)(()=>It)}var ze=k(5363),Ze=k(4004),ct=k(590),Be=k(9468),ke=k(9300),vt=k(5813),j=k(2011),F=k(9808),J=k(440),le=k(127);const je=new p.OlP("angularfire2.auth.use-emulator"),Ne=new p.OlP("angularfire2.auth.settings"),Ie=new p.OlP("angularfire2.auth.tenant-id"),Q=new p.OlP("angularfire2.auth.langugage-code"),Se=new p.OlP("angularfire2.auth.use-device-language"),de=new p.OlP("angularfire.auth.persistence"),Ye=(It,Lt,pt,bt,qt,Rt,Vt,lt)=>(0,j.cc)(`${It.name}.auth`,"AngularFireAuth",It.name,()=>{const pn=Lt.runOutsideAngular(()=>It.auth());if(pt&&pn.useEmulator(...pt),bt&&(pn.tenantId=bt),pn.languageCode=qt,Rt&&pn.useDeviceLanguage(),Vt)for(const[en,mn]of Object.entries(Vt))pn.settings[en]=mn;return lt&&pn.setPersistence(lt),pn},[pt,bt,qt,Rt,Vt,lt]);let $e=(()=>{class It{constructor(pt,bt,qt,Rt,Vt,lt,pn,en,mn,Qn,Bn,cr){const rr=new K.x,Tr=(0,Y.of)(void 0).pipe((0,ze.Q)(Vt.outsideAngular),(0,re.w)(()=>Rt.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,820)))),(0,Ze.U)(()=>(0,j.on)(pt,Rt,bt)),(0,Ze.U)(zn=>Ye(zn,Rt,lt,en,mn,Qn,pn,Bn)),ue({bufferSize:1,refCount:!1}));if((0,F.PM)(qt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Y.of)(null);else{Tr.pipe((0,ct.P)()).subscribe();const Ar=Tr.pipe((0,re.w)(Qt=>Qt.getRedirectResult().then(vn=>vn,()=>null)),vt.iC,ue({bufferSize:1,refCount:!1})),jn=Tr.pipe((0,re.w)(Qt=>new we.y(vn=>({unsubscribe:Rt.runOutsideAngular(()=>Qt.onAuthStateChanged(on=>vn.next(on),on=>vn.error(on),()=>vn.complete()))})))),ht=Tr.pipe((0,re.w)(Qt=>new we.y(vn=>({unsubscribe:Rt.runOutsideAngular(()=>Qt.onIdTokenChanged(on=>vn.next(on),on=>vn.error(on),()=>vn.complete()))}))));this.authState=Ar.pipe(He(jn),(0,Be.R)(Vt.outsideAngular),(0,ze.Q)(Vt.insideAngular)),this.user=Ar.pipe(He(ht),(0,Be.R)(Vt.outsideAngular),(0,ze.Q)(Vt.insideAngular)),this.idToken=this.user.pipe((0,re.w)(Qt=>Qt?(0,me.D)(Qt.getIdToken()):(0,Y.of)(null))),this.idTokenResult=this.user.pipe((0,re.w)(Qt=>Qt?(0,me.D)(Qt.getIdTokenResult()):(0,Y.of)(null))),this.credential=(0,Ae.T)(Ar,rr,this.authState.pipe((0,ke.h)(Qt=>!Qt))).pipe((0,Ze.U)(Qt=>(null==Qt?void 0:Qt.user)?Qt:null),(0,Be.R)(Vt.outsideAngular),(0,ze.Q)(Vt.insideAngular))}return(0,j.pX)(this,Tr,Rt,{spy:{apply:(zn,Ar,jn)=>{(zn.startsWith("signIn")||zn.startsWith("createUser"))&&jn.then(ht=>rr.next(ht))}}})}}return It.\u0275fac=function(pt){return new(pt||It)(p.LFG(j.Dh),p.LFG(j.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(vt.HU),p.LFG(je,8),p.LFG(Ne,8),p.LFG(Ie,8),p.LFG(Q,8),p.LFG(Se,8),p.LFG(de,8),p.LFG(J.nm,8))},It.\u0275prov=p.Yz7({token:It,factory:It.\u0275fac,providedIn:"any"}),It})(),Wt=(()=>{class It{constructor(){le.Z.registerVersion("angularfire",vt.q4.full,"auth-compat")}}return It.\u0275fac=function(pt){return new(pt||It)},It.\u0275mod=p.oAB({type:It}),It.\u0275inj=p.cJS({providers:[$e]}),It})()},7566:(Mt,We,k)=>{k.d(We,{ST:()=>Kc,yb:()=>q_});var p=k(5e3),K=k(4986),Y=k(9751),we=k(8996),me=k(9646),Ae=k(5813),Oe=k(4482),Re=k(5403);function Fe(){return(0,Oe.e)((i,e)=>{let t,o=!1;i.subscribe((0,Re.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var ue=k(4671);function _e(i,e){return i===e}var Q,He=k(8675),ze=k(4004),Ze=k(5026),ct=k(9300),Be=k(2011),ke=k(9808),j=(k(820),k(3942)),F=k(5861),J=k(9681),le=k(4859),Le=k(1877),je=k(2090),Ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ie={},Se=Se||{},de=Ne||self;function Ye(){}function $e(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Wt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Lt="closure_uid_"+(1e9*Math.random()>>>0),pt=0;function bt(i,e,t){return i.call.apply(i.bind,arguments)}function qt(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Rt(i,e,t){return(Rt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bt:qt).apply(null,arguments)}function Vt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function lt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var y=Array(arguments.length-2),b=2;b<arguments.length;b++)y[b-2]=arguments[b];return e.prototype[u].apply(o,y)}}function pn(){this.s=this.s,this.o=this.o}var mn={};pn.prototype.s=!1,pn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function It(i){return Object.prototype.hasOwnProperty.call(i,Lt)&&i[Lt]||(i[Lt]=++pt)}(this);delete mn[i]}},pn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Bn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function rr(i){return Array.prototype.concat.apply([],arguments)}function Tr(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function zn(i){return/^[\s\xa0]*$/.test(i)}var Qt,Ar=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function jn(i,e){return-1!=i.indexOf(e)}function ht(i,e){return i<e?-1:i>e?1:0}e:{var vn=de.navigator;if(vn){var on=vn.userAgent;if(on){Qt=on;break e}}Qt=""}function Nr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function yi(i){const e={};for(const t in i)e[t]=i[t];return e}var ir="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fr(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<ir.length;d++)t=ir[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function yr(i){return yr[" "](i),i}yr[" "]=Ye;var _r,i,En=jn(Qt,"Opera"),jt=jn(Qt,"Trident")||jn(Qt,"MSIE"),rn=jn(Qt,"Edge"),Sn=rn||jt,dr=jn(Qt,"Gecko")&&!(jn(Qt.toLowerCase(),"webkit")&&!jn(Qt,"Edge"))&&!(jn(Qt,"Trident")||jn(Qt,"MSIE"))&&!jn(Qt,"Edge"),gn=jn(Qt.toLowerCase(),"webkit")&&!jn(Qt,"Edge");function _i(){var i=de.document;return i?i.documentMode:void 0}e:{var Lr="",tn=(i=Qt,dr?/rv:([^\);]+)(\)|;)/.exec(i):rn?/Edge\/([\d\.]+)/.exec(i):jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):gn?/WebKit\/(\S+)/.exec(i):En?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(tn&&(Lr=tn?tn[1]:""),jt){var Sr=_i();if(null!=Sr&&Sr>parseFloat(Lr)){_r=String(Sr);break e}}_r=Lr}var In={};var kt=de.document&&jt&&(_i()||parseInt(_r,10))||void 0,Tt=function(){if(!de.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{de.addEventListener("test",Ye,e),de.removeEventListener("test",Ye,e)}catch(t){}return i}();function zt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function pe(i,e){if(zt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(dr){e:{try{yr(e.nodeName);var u=!0;break e}catch(d){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ie[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&pe.Z.h.call(this)}}zt.prototype.h=function(){this.defaultPrevented=!0},lt(pe,zt);var ie={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),qe=0;function Ve(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++qe,this.ca=this.fa=!1}function Ct(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Kt(i){this.src=i,this.g={},this.h=0}function Tn(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=Qn(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(Ct(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Mr(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}Kt.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var y=Mr(i,e,o,u);return-1<y?(e=i[y],t||(e.fa=!1)):((e=new Ve(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var wn="closure_lm_"+(1e6*Math.random()|0),nr={};function nn(i,e,t,o,u){if(o&&o.once)return pi(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)nn(i,e[d],t,o,u);return null}return t=dt(t),i&&i[Ce]?i.N(e,t,Wt(o)?!!o.capture:!!o,u):Nn(i,e,t,!1,o,u)}function Nn(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var y=Wt(u)?!!u.capture:!!u,b=Gi(i);if(b||(i[wn]=b=new Kt(i)),(t=b.add(e,t,o,y,d)).proxy)return t;if(o=function vr(){var e=Xn;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Tt||(u=y),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(sr(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function pi(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)pi(i,e[d],t,o,u);return null}return t=dt(t),i&&i[Ce]?i.O(e,t,Wt(o)?!!o.capture:!!o,u):Nn(i,e,t,!0,o,u)}function ls(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)ls(i,e[d],t,o,u);else o=Wt(o)?!!o.capture:!!o,t=dt(t),i&&i[Ce]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Mr(d=i.g[e],t,o,u))&&(Ct(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=Gi(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Mr(e,t,o,u)),(t=-1<i?e[i]:null)&&hr(t))}function hr(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Ce])Tn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(sr(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Gi(e))?(Tn(t,i),0==t.h&&(t.src=null,e[wn]=null)):Ct(i)}}}function sr(i){return i in nr?nr[i]:nr[i]="on"+i}function Xn(i,e){if(i.ca)i=!0;else{e=new pe(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&hr(i),i=t.call(o,e)}return i}function Gi(i){return(i=i[wn])instanceof Kt?i:null}var Zr="__closure_events_fn_"+(1e9*Math.random()>>>0);function dt(i){return"function"==typeof i?i:(i[Zr]||(i[Zr]=function(e){return i.handleEvent(e)}),i[Zr])}function $t(){pn.call(this),this.i=new Kt(this),this.P=this,this.I=null}function hn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new zt(e,i);else if(e instanceof zt)e.target=e.target||i;else{var u=e;Fr(e=new zt(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var y=e.g=t[d];u=er(y,o,!0,e)&&u}if(u=er(y=e.g=i,o,!0,e)&&u,u=er(y,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=er(y=e.g=t[d],o,!1,e)&&u}function er(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var y=e[d];if(y&&!y.ca&&y.capture==t){var b=y.listener,B=y.ia||y.src;y.fa&&Tn(i.i,y),u=!1!==b.call(B,o)&&u}}return u&&!o.defaultPrevented}lt($t,pn),$t.prototype[Ce]=!0,$t.prototype.removeEventListener=function(i,e,t,o){ls(this,i,e,t,o)},$t.prototype.M=function(){if($t.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Ct(t[o]);delete i.g[e],i.h--}}this.I=null},$t.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},$t.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var ei=de.JSON.stringify;function or(){var i=Yr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var wr,On=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Er,i=>i.reset());class Er{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ai(i){de.setTimeout(()=>{throw i},0)}function yn(i,e){wr||function vi(){var i=de.Promise.resolve(void 0);wr=function(){i.then(Rr)}}(),Li||(wr(),Li=!0),Yr.add(i,e)}var Li=!1,Yr=new class xr{constructor(){this.h=this.g=null}add(e,t){const o=On.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Rr(){for(var i;i=or();){try{i.h.call(i.g)}catch(t){ai(t)}var e=On;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Li=!1}function Vr(i,e){$t.call(this),this.h=i||1,this.g=e||de,this.j=Rt(this.kb,this),this.l=Date.now()}function jr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Pn(i,e,t){if("function"==typeof i)t&&(i=Rt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Rt(i.handleEvent,i)}return 2147483647<Number(e)?-1:de.setTimeout(i,e||0)}function Fn(i){i.g=Pn(()=>{i.g=null,i.i&&(i.i=!1,Fn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}lt(Vr,$t),(Q=Vr.prototype).da=!1,Q.S=null,Q.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),hn(this,"tick"),this.da&&(jr(this),this.start()))}},Q.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Q.M=function(){Vr.Z.M.call(this),jr(this),delete this.g};class Ji extends pn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fn(this)}M(){super.M(),this.g&&(de.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(i){pn.call(this),this.h=i,this.g={}}lt(br,pn);var $r=[];function ti(i,e,t,o){Array.isArray(t)||(t&&($r[0]=t.toString()),t=$r);for(var u=0;u<t.length;u++){var d=nn(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function xs(i){Nr(i.g,function(e,t){this.g.hasOwnProperty(t)&&hr(e)},i),i.g={}}function ar(){this.g=!0}function ce(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function te(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var y=1;y<u.length;y++)u[y]=""}}}return ei(t)}catch(b){return e}}(i,t)+(o?" "+o:"")})}br.prototype.M=function(){br.Z.M.call(this),xs(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ar.prototype.Aa=function(){this.g=!1},ar.prototype.info=function(){};var xe={},at=null;function cn(){return at=at||new $t}function he(i){zt.call(this,xe.Ma,i)}function ye(i){const e=cn();hn(e,new he(e,i))}function Ue(i,e){zt.call(this,xe.STAT_EVENT,i),this.stat=e}function rt(i){const e=cn();hn(e,new Ue(e,i))}function _t(i,e){zt.call(this,xe.Na,i),this.size=e}function Zt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return de.setTimeout(function(){i()},e)}xe.Ma="serverreachability",lt(he,zt),xe.STAT_EVENT="statevent",lt(Ue,zt),xe.Na="timingevent",lt(_t,zt);var $n={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Hr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Gn(){}function ts(){}Gn.prototype.h=null;var ns,gi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ei(){zt.call(this,"d")}function Vi(){zt.call(this,"c")}function _s(){}function xi(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new br(this),this.P=cs,this.W=new Vr(i=Sn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}lt(Ei,zt),lt(Vi,zt),lt(_s,Gn),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},ns=new _s;var cs=45e3,wi={},Ii={};function ks(i,e,t){i.K=1,i.v=At($(e)),i.s=t,i.U=!0,Ns(i,null)}function Ns(i,e){i.F=Date.now(),ds(i),i.A=$(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),N(t.h,"t",o),i.C=0,t=i.l.H,i.h=new ni,i.g=gu(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Ji(Rt(i.Ia,i,i.g),i.O)),ti(i.V,i.g,"readystatechange",i.gb),e=i.H?yi(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),ye(1),function es(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var y="",b=d.split("&"),B=0;B<b.length;B++){var G=b[B].split("=");if(1<G.length){var oe=G[0];G=G[1];var Te=oe.split("_");y=2<=Te.length&&"type"==Te[1]?y+(oe+"=")+G+"&":y+(oe+"=redacted&")}}else y=null;else y=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+y})}(i.j,i.u,i.A,i.m,i.X,i.s)}function vs(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function rs(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Di(i,t),u==Ii){4==e&&(i.o=4,rt(14),o=!1),ce(i.j,i.m,null,"[Incomplete Response]");break}if(u==wi){i.o=4,rt(15),ce(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}ce(i.j,i.m,u,null),Es(i,u)}vs(i)&&u!=Ii&&u!=wi&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,rt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Go(e),e.L=!0,rt(11))):(ce(i.j,i.m,t,"[Invalid Chunked Response]"),Wr(i),Gr(i))}function Di(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Ii:(t=Number(e.substring(t,o)),isNaN(t)?wi:(o+=1)+t>e.length?Ii:(e=e.substr(o,t),i.C=o+t,e))}function ds(i){i.Y=Date.now()+i.P,Rs(i,i.P)}function Rs(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Zt(Rt(i.eb,i),e)}function ui(i){i.B&&(de.clearTimeout(i.B),i.B=null)}function Gr(i){0==i.l.G||i.I||ko(i.l,i)}function Wr(i){ui(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,jr(i.W),xs(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Es(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Ke(t.i,i)))if(t.I=i.N,!i.J&&Ke(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(G){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=Zt(Rt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;gs(t),Oi(t)}mi(t),rt(18)}if(1>=De(t.i)&&t.ka){try{t.ka()}catch(G){}t.ka=void 0}}else Us(t,11)}else if((i.J||t.g==i)&&gs(t),!zn(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let G=u[e];if(t.U=G[0],G=G[1],2==t.G)if("c"==G[0]){t.J=G[1],t.la=G[2];const oe=G[3];null!=oe&&(t.ma=oe,t.h.info("VER="+t.ma));const Te=G[4];null!=Te&&(t.za=Te,t.h.info("SVER="+t.za));const Je=G[5];null!=Je&&"number"==typeof Je&&0<Je&&(t.K=o=1.5*Je,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const ft=i.g;if(ft){const gt=ft.g?ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gt){var d=o.i;!d.g&&(jn(gt,"spdy")||jn(gt,"quic")||jn(gt,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(st(d,d.h),d.h=null))}if(o.D){const sn=ft.g?ft.g.getResponseHeader("X-HTTP-Session-Id"):null;sn&&(o.sa=sn,tt(o.F,o.D,sn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var y=i;if((o=t).oa=Da(o,o.H?o.la:null,o.W),y.J){Ht(o.i,y);var b=y,B=o.K;B&&b.setTimeout(B),b.B&&(ui(b),ds(b)),o.g=y}else Po(o);0<t.l.length&&mo(t)}else"stop"!=G[0]&&"close"!=G[0]||Us(t,7);else 3==t.G&&("stop"==G[0]||"close"==G[0]?"stop"==G[0]?Us(t,7):ci(t):"noop"!=G[0]&&t.j&&t.j.wa(G),t.A=0)}ye(4)}catch(G){}}function hs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if($e(i)||"string"==typeof i)Bn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if($e(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function Fs(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if($e(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function Ui(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Ui)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function ri(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];is(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)is(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function is(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(Q=xi.prototype).setTimeout=function(i){this.P=i},Q.gb=function(i){i=i.target;const e=this.L;e&&3==Vs(i)?e.l():this.Ia(i)},Q.Ia=function(i){try{if(i==this.g)e:{const oe=Vs(this.g);var e=this.g.Da();const Te=this.g.ba();if(!(3>oe)&&(3!=oe||Sn||this.g&&(this.h.h||this.g.ga()||xo(this.g)))){this.I||4!=oe||7==e||ye(8==e||0>=Te?3:2),ui(this);var t=this.g.ba();this.N=t;t:if(vs(this)){var o=xo(this.g);i="";var u=o.length,d=4==Vs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Wr(this),Gr(this);var y="";break t}this.h.i=new de.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,y=this.h.g}else y=this.g.ga();if(this.i=200==t,function Qr(i,e,t,o,u,d,y){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+y})}(this.j,this.u,this.A,this.m,this.X,oe,t),this.i){if(this.$&&!this.J){t:{if(this.g){var b,B=this.g;if((b=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zn(b)){var G=b;break t}}G=null}if(!(t=G)){this.i=!1,this.o=3,rt(12),Wr(this),Gr(this);break e}ce(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Es(this,t)}this.U?(rs(this,oe,y),Sn&&this.i&&3==oe&&(ti(this.V,this.W,"tick",this.fb),this.W.start())):(ce(this.j,this.m,y,null),Es(this,y)),4==oe&&Wr(this),this.i&&!this.I&&(4==oe?ko(this.l,this):(this.i=!1,ds(this)))}else 400==t&&0<y.indexOf("Unknown SID")?(this.o=3,rt(12)):(this.o=0,rt(13)),Wr(this),Gr(this)}}}catch(oe){}},Q.fb=function(){if(this.g){var i=Vs(this.g),e=this.g.ga();this.C<e.length&&(ui(this),rs(this,i,e),this.i&&4!=i&&ds(this))}},Q.cancel=function(){this.I=!0,Wr(this)},Q.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function fe(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ye(3),rt(17)),Wr(this),this.o=2,Gr(this)):Rs(this,this.Y-i)},(Q=Ui.prototype).R=function(){ri(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},Q.T=function(){return ri(this),this.g.concat()},Q.get=function(i,e){return is(this.h,i)?this.h[i]:e},Q.set=function(i,e){is(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},Q.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var Ws=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function O(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof O){this.g=void 0!==e?e:i.g,R(this,i.j),this.s=i.s,Z(this,i.i),ge(this,i.m),this.l=i.l,e=i.h;var t=new Ci;t.i=e.i,e.g&&(t.g=new Ui(e.g),t.h=e.h),Xe(this,t),this.o=i.o}else i&&(t=String(i).match(Ws))?(this.g=!!e,R(this,t[1]||"",!0),this.s=Dn(t[2]||""),Z(this,t[3]||"",!0),ge(this,t[4]),this.l=Dn(t[5]||"",!0),Xe(this,t[6]||"",!0),this.o=Dn(t[7]||"")):(this.g=!!e,this.h=new Ci(null,this.g))}function $(i){return new O(i)}function R(i,e,t){i.j=t?Dn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Z(i,e,t){i.i=t?Dn(e,!0):e}function ge(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Xe(i,e,t){e instanceof Ci?(i.h=e,function S(i,e){e&&!i.j&&(zi(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(fs(this,o),N(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Mn(e,ii)),i.h=new Ci(e,i.g))}function tt(i,e,t){i.h.set(e,t)}function At(i){return tt(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Dn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Mn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Dr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Dr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}O.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Mn(e,Cr,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Mn(e,Cr,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Mn(t,"/"==t.charAt(0)?Wi:fr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Mn(t,dn)),i.join("")};var Cr=/[#\/\?@]/g,fr=/[#\?:]/g,Wi=/[#\?]/g,ii=/[#\?@]/g,dn=/#/g;function Ci(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function zi(i){i.g||(i.g=new Ui,i.h=0,i.i&&function Ir(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fs(i,e){zi(i),e=M(i,e),is(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,is((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&ri(i)))}function Os(i,e){return zi(i),e=M(i,e),is(i.g.h,e)}function N(i,e,t){fs(i,e),0<t.length&&(i.i=null,i.g.set(M(i,e),Tr(t)),i.h+=t.length)}function M(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function D(i){this.l=i||z,i=de.PerformanceNavigationTiming?0<(i=de.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(de.g&&de.g.Ea&&de.g.Ea()&&de.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Q=Ci.prototype).add=function(i,e){zi(this),this.i=null,i=M(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Q.forEach=function(i,e){zi(this),this.g.forEach(function(t,o){Bn(t,function(u){i.call(e,u,o,this)},this)},this)},Q.T=function(){zi(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},Q.R=function(i){zi(this);var e=[];if("string"==typeof i)Os(this,i)&&(e=rr(e,this.g.get(M(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=rr(e,i[t])}return e},Q.set=function(i,e){return zi(this),this.i=null,Os(this,i=M(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Q.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var y=u;""!==o[d]&&(y+="="+encodeURIComponent(String(o[d]))),i.push(y)}}return this.i=i.join("&")};var z=10;function ee(i){return!!i.h||!!i.g&&i.g.size>=i.j}function De(i){return i.h?1:i.g?i.g.size:0}function Ke(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function st(i,e){i.g?i.g.add(e):i.h=e}function Ht(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ot(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Tr(i.i)}function _n(){}function Wn(){this.g=new _n}function zr(i,e,t){const o=t||"";try{hs(i,function(u,d){let y=u;Wt(u)&&(y=ei(u)),e.push(o+d+"="+encodeURIComponent(y))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function qn(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(d){}}function Zn(i){this.l=i.$b||null,this.j=i.ib||!1}function Ri(i,e){$t.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=gr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}D.prototype.cancel=function(){if(this.i=Ot(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},_n.prototype.stringify=function(i){return de.JSON.stringify(i,void 0)},_n.prototype.parse=function(i){return de.JSON.parse(i,void 0)},lt(Zn,Gn),Zn.prototype.g=function(){return new Ri(this.l,this.j)},Zn.prototype.i=function(i){return function(){return i}}({}),lt(Ri,$t);var gr=0;function si(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Bi(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Kr(i)}function Kr(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Q=Ri.prototype).open=function(i,e){if(this.readyState!=gr)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Kr(this)},Q.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||de).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bi(this)),this.readyState=gr},Q.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Kr(this)),this.g&&(this.readyState=3,Kr(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==de.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;si(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Q.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Bi(this):Kr(this),3==this.readyState&&si(this)}},Q.Ua=function(i){this.g&&(this.response=this.responseText=i,Bi(this))},Q.Ta=function(i){this.g&&(this.response=i,Bi(this))},Q.ha=function(){this.g&&Bi(this)},Q.setRequestHeader=function(i,e){this.v.append(i,e)},Q.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Q.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var li=de.JSON.parse;function Or(i){$t.call(this),this.headers=new Ui,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=As,this.K=this.L=!1}lt(Or,$t);var As="",io=/^https?$/i,Ls=["POST","PUT"];function ta(i){return"content-type"==i.toLowerCase()}function na(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,go(i),Ps(i)}function go(i){i.D||(i.D=!0,hn(i,"complete"),hn(i,"error"))}function Ba(i){if(i.h&&void 0!==Se&&(!i.C[1]||4!=Vs(i)||2!=i.ba()))if(i.v&&4==Vs(i))Pn(i.Fa,0,i);else if(hn(i,"readystatechange"),4==Vs(i)){i.h=!1;try{const b=i.ba();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===b){var u=String(i.H).match(Ws)[1]||null;if(!u&&de.self&&de.self.location){var d=de.self.location.protocol;u=d.substr(0,d.length-1)}o=!io.test(u?u.toLowerCase():"")}t=o}if(t)hn(i,"complete"),hn(i,"success");else{i.m=6;try{var y=2<Vs(i)?i.g.statusText:""}catch(B){y=""}i.j=y+" ["+i.ba()+"]",go(i)}}finally{Ps(i)}}}function Ps(i,e){if(i.g){ra(i);const t=i.g,o=i.C[0]?Ye:null;i.g=null,i.C=null,e||hn(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function ra(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(de.clearTimeout(i.A),i.A=null)}function Vs(i){return i.g?i.g.readyState:0}function xo(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case As:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ia(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function ol(i){let e="";return Nr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):tt(i,e,t))}function bi(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Ro(i){this.za=0,this.l=[],this.h=new ar,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bi("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bi("baseRetryDelayMs",5e3,i),this.$a=bi("retryDelaySeedMs",1e4,i),this.Ya=bi("forwardChannelMaxRetries",2,i),this.ra=bi("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new D(i&&i.concurrentRequestLimit),this.Ca=new Wn,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function ci(i){if(Jl(i),3==i.G){var e=i.V++,t=$(i.F);tt(t,"SID",i.J),tt(t,"RID",e),tt(t,"TYPE","terminate"),ps(i,t),(e=new xi(i,i.h,e,void 0)).K=2,e.v=At($(t)),t=!1,de.navigator&&de.navigator.sendBeacon&&(t=de.navigator.sendBeacon(e.v.toString(),"")),!t&&de.Image&&((new Image).src=e.v,t=!0),t||(e.g=gu(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ds(e)}oo(i)}function Oi(i){i.g&&(Go(i),i.g.cancel(),i.g=null)}function Jl(i){Oi(i),i.u&&(de.clearTimeout(i.u),i.u=null),gs(i),i.i.cancel(),i.m&&("number"==typeof i.m&&de.clearTimeout(i.m),i.m=null)}function ja(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&mo(i)}function mo(i){ee(i.i)||i.m||(i.m=!0,yn(i.Ha,i),i.C=0)}function so(i,e){var t;t=e?e.m:i.V++;const o=$(i.F);tt(o,"SID",i.J),tt(o,"RID",t),tt(o,"AID",i.U),ps(i,o),i.o&&i.s&&ia(o,i.o,i.s),t=new xi(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Oo(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),st(i.i,t),ks(t,o,e)}function ps(i,e){i.j&&hs({},function(t,o){tt(e,o,t)})}function Oo(i,e,t){t=Math.min(i.l.length,t);var o=i.j?Rt(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const y=["count="+t];-1==d?0<t?(d=u[0].h,y.push("ofs="+d)):d=0:y.push("ofs="+d);let b=!0;for(let B=0;B<t;B++){let G=u[B].h;const oe=u[B].g;if(G-=d,0>G)d=Math.max(0,u[B].h-100),b=!1;else try{zr(oe,y,"req"+G+"_")}catch(Te){o&&o(oe)}}if(b){o=y.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Po(i){i.g||i.u||(i.Y=1,yn(i.Ga,i),i.A=0)}function mi(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Zt(Rt(i.Ga,i),zs(i,i.A)),i.A++,0))}function Go(i){null!=i.B&&(de.clearTimeout(i.B),i.B=null)}function Ha(i){i.g=new xi(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=$(i.oa);tt(e,"RID","rpc"),tt(e,"SID",i.J),tt(e,"CI",i.N?"0":"1"),tt(e,"AID",i.U),ps(i,e),tt(e,"TYPE","xmlhttp"),i.o&&i.s&&ia(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=At($(e)),t.s=null,t.U=!0,Ns(t,i)}function gs(i){null!=i.v&&(de.clearTimeout(i.v),i.v=null)}function ko(i,e){var t=null;if(i.g==e){gs(i),Go(i),i.g=null;var o=2}else{if(!Ke(i.i,e))return;t=e.D,Ht(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;hn(o=cn(),new _t(o,t,e,u)),mo(i)}else Po(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function $a(i,e){return!(De(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Zt(Rt(i.Ha,i,e),zs(i,i.C)),i.C++,0)))}(i,e)||2==o&&mi(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:Us(i,5);break;case 4:Us(i,10);break;case 3:Us(i,6);break;default:Us(i,2)}}function zs(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Us(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=Rt(i.jb,i);t||(t=new O("//www.google.com/images/cleardot.gif"),de.location&&"http"==de.location.protocol||R(t,"https"),At(t)),function pr(i,e){const t=new ar;if(de.Image){const o=new Image;o.onload=Vt(qn,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Vt(qn,t,o,"TestLoadImage: error",!1,e),o.onabort=Vt(qn,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Vt(qn,t,o,"TestLoadImage: timeout",!1,e),de.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else rt(2);i.G=0,i.j&&i.j.va(e),oo(i),Jl(i)}function oo(i){i.G=0,i.I=-1,i.j&&((0!=Ot(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Tr(i.l),i.l.length=0),i.j.ua())}function Da(i,e,t){let o=function tr(i){return i instanceof O?$(i):new O(i,void 0)}(t);if(""!=o.i)e&&Z(o,e+"."+o.i),ge(o,o.m);else{const u=de.location;o=function Kn(i,e,t,o){var u=new O(null,void 0);return i&&R(u,i),e&&Z(u,e),t&&ge(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&Nr(i.aa,function(u,d){tt(o,d,u)}),t=i.sa,(e=i.D)&&t&&tt(o,e,t),tt(o,"VER",i.ma),ps(i,o),o}function gu(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Or(t&&i.Ba&&!i.qa?new Zn({ib:!0}):i.qa)).L=i.H,e}function mu(){}function yu(){if(jt&&!(10<=Number(kt)))throw Error("Environmental error: no available transport.")}function Ur(i,e){$t.call(this),this.g=new Ro(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!zn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new yo(this)}function sa(i){Ei.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ks(){Vi.call(this),this.status=1}function yo(i){this.g=i}(Q=Or.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ns.g(),this.C=function Mi(i){return i.h||(i.h=i.i())}(this.u?this.u:ns),this.g.onreadystatechange=Rt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void na(this,d)}i=t||"";const u=new Ui(this.headers);o&&hs(o,function(d,y){u.set(y,d)}),o=function cr(i){e:{var e=ta;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=de.FormData&&i instanceof de.FormData,!(0<=Qn(Ls,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,y){this.g.setRequestHeader(y,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ra(this),0<this.B&&((this.K=function Mo(i){return jt&&function Pt(){return function Br(i){var e=In;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Ar(String(_r)).split("."),t=Ar("9").split("."),o=Math.max(e.length,t.length);for(let y=0;0==i&&y<o;y++){var u=e[y]||"",d=t[y]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=ht(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||ht(0==u[2].length,0==d[2].length)||ht(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rt(this.pa,this)):this.A=Pn(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){na(this,d)}},Q.pa=function(){void 0!==Se&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hn(this,"timeout"),this.abort(8))},Q.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,hn(this,"complete"),hn(this,"abort"),Ps(this))},Q.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ps(this,!0)),Or.Z.M.call(this)},Q.Fa=function(){this.s||(this.F||this.v||this.l?Ba(this):this.cb())},Q.cb=function(){Ba(this)},Q.ba=function(){try{return 2<Vs(this)?this.g.status:-1}catch(i){return-1}},Q.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Q.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),li(e)}},Q.Da=function(){return this.m},Q.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Q=Ro.prototype).ma=8,Q.G=1,Q.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},Q.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new xi(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=yi(d),Fr(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Oo(this,u,e),tt(t=$(this.F),"RID",i),tt(t,"CVER",22),this.D&&tt(t,"X-HTTP-Session-Id",this.D),ps(this,t),this.o&&d&&ia(t,this.o,d),st(this.i,u),this.Ra&&tt(t,"TYPE","init"),this.ja?(tt(t,"$req",e),tt(t,"SID","null"),u.$=!0,ks(u,t,null)):ks(u,t,e),this.G=2}}else 3==this.G&&(i?so(this,i):0==this.l.length||ee(this.i)||so(this))},Q.Ga=function(){if(this.u=null,Ha(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Zt(Rt(this.bb,this),i)}},Q.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rt(10),Oi(this),Ha(this))},Q.ab=function(){null!=this.v&&(this.v=null,Oi(this),mi(this),rt(19))},Q.jb=function(i){i?(this.h.info("Successfully pinged google.com"),rt(2)):(this.h.info("Failed to ping google.com"),rt(1))},(Q=mu.prototype).xa=function(){},Q.wa=function(){},Q.va=function(){},Q.ua=function(){},Q.Oa=function(){},yu.prototype.g=function(i,e){return new Ur(i,e)},lt(Ur,$t),Ur.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),yn(Rt(i.hb,i,e))),rt(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Da(i,null,i.W),mo(i)},Ur.prototype.close=function(){ci(this.g)},Ur.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,ja(this.g,e)}else this.v?((e={}).__data__=ei(i),ja(this.g,e)):ja(this.g,i)},Ur.prototype.M=function(){this.g.j=null,delete this.j,ci(this.g),delete this.g,Ur.Z.M.call(this)},lt(sa,Ei),lt(Ks,Vi),lt(yo,mu),yo.prototype.xa=function(){hn(this.g,"a")},yo.prototype.wa=function(i){hn(this.g,new sa(i))},yo.prototype.va=function(i){hn(this.g,new Ks(i))},yo.prototype.ua=function(){hn(this.g,"b")},yu.prototype.createWebChannel=yu.prototype.g,Ur.prototype.send=Ur.prototype.u,Ur.prototype.open=Ur.prototype.m,Ur.prototype.close=Ur.prototype.close,$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,Hr.COMPLETE="complete",ts.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",$t.prototype.listen=$t.prototype.N,Or.prototype.listenOnce=Or.prototype.O,Or.prototype.getLastError=Or.prototype.La,Or.prototype.getLastErrorCode=Or.prototype.Da,Or.prototype.getStatus=Or.prototype.ba,Or.prototype.getResponseJson=Or.prototype.Qa,Or.prototype.getResponseText=Or.prototype.ga,Or.prototype.send=Or.prototype.ea;var oa=Ie.createWebChannelTransport=function(){return new yu},_o=Ie.getStatEventTarget=function(){return cn()},Ca=Ie.ErrorCode=$n,qr=Ie.EventType=Hr,_u=Ie.Event=xe,Bs=Ie.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ga=Ie.FetchXmlHttpFactory=Zn,C=Ie.WebChannel=ts,w=Ie.XhrIo=Or;const v="@firebase/firestore";class x{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}x.UNAUTHENTICATED=new x(null),x.GOOGLE_CREDENTIALS=new x("google-credentials-uid"),x.FIRST_PARTY=new x("first-party-uid"),x.MOCK_USER=new x("mock-user");let L="9.6.11";const q=new Le.Yd("@firebase/firestore");function se(){return q.logLevel}function Ee(i,...e){if(q.logLevel<=Le.in.DEBUG){const t=e.map(un);q.debug(`Firestore (${L}): ${i}`,...t)}}function wt(i,...e){if(q.logLevel<=Le.in.ERROR){const t=e.map(un);q.error(`Firestore (${L}): ${i}`,...t)}}function xn(i,...e){if(q.logLevel<=Le.in.WARN){const t=e.map(un);q.warn(`Firestore (${L}): ${i}`,...t)}}function un(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function Et(i="Unexpected state"){const e=`FIRESTORE (${L}) INTERNAL ASSERTION FAILED: `+i;throw wt(e),new Error(e)}function Ft(i,e){i||Et()}function St(i,e){return i}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends je.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class js{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(x.UNAUTHENTICATED))}shutdown(){}}class vu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ec{constructor(e){this.t=e,this.currentUser=x.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=G=>this.i!==u?(u=this.i,t(G)):Promise.resolve();let y=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),y.resolve(),y=new Xr,e.enqueueRetryable(()=>d(this.currentUser))};const b=()=>{const G=y;e.enqueueRetryable((0,F.Z)(function*(){yield G.promise,yield d(o.currentUser)}))},B=G=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=G,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit(G=>B(G)),setTimeout(()=>{if(!this.auth){const G=this.t.getImmediate({optional:!0});G?B(G):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),y.resolve(),y=new Xr)}},0),b()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ft("string"==typeof o.accessToken),new js(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new x(e)}}class vo{constructor(e,t,o){this.type="FirstParty",this.user=x.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class tc{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new vo(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(x.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Eu{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=d=>{null!=d.error&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const y=d.token!==this.p;return this.p=d.token,Ee("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.g.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.g.getImmediate({optional:!0});d?u(d):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.p=t.token,new aa(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ss{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ao(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}ss.A=-1;class nc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=ao(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function Ln(i,e){return i<e?-1:i>e?1:0}function uo(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function Wa(i){return i+"\0"}class ji{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new mt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new mt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new mt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new mt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ji.fromMillis(Date.now())}static fromDate(e){return ji.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new ji(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ln(this.nanoseconds,e.nanoseconds):Ln(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xt(e)}static min(){return new Xt(new ji(0,0))}static max(){return new Xt(new ji(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Zc(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function za(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Yc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class ba{constructor(e,t,o){void 0===t?t=0:t>e.length&&Et(),void 0===o?o=e.length-t:o>e.length-t&&Et(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===ba.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ba?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),y=t.get(u);if(d<y)return-1;if(d>y)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mr extends ba{construct(e,t,o){return new mr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new mt(et.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new mr(t)}static emptyPath(){return new mr([])}}const Wd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ms extends ba{construct(e,t,o){return new ms(e,t,o)}static isValidIdentifier(e){return Wd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ms.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ms(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new mt(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let y=!1;for(;u<e.length;){const b=e[u];if("\\"===b){if(u+1===e.length)throw new mt(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const B=e[u+1];if("\\"!==B&&"."!==B&&"`"!==B)throw new mt(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=B,u+=2}else"`"===b?(y=!y,u++):"."!==b||y?(o+=b,u++):(d(),u++)}if(d(),y)throw new mt(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ms(t)}static emptyPath(){return new ms([])}}class qs{constructor(e){this.fields=e,e.sort(ms.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Yn(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new Yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ln(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const al=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $s(i){if(Ft(!!i),"string"==typeof i){let e=0;const t=al.exec(i);if(Ft(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Pi(i.seconds),nanos:Pi(i.nanos)}}function Pi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function No(i){return"string"==typeof i?Yn.fromBase64String(i):Yn.fromUint8Array(i)}function os(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Hs(i){const e=i.mapValue.fields.__previous_value__;return os(e)?Hs(e):e}function Ta(i){const e=$s(i.mapValue.fields.__local_write_time__.timestampValue);return new ji(e.seconds,e.nanos)}class Wo{constructor(e,t,o,u,d,y,b,B){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=y,this.autoDetectLongPolling=b,this.useFetchStreams=B}}class Ki{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}function Is(i){return null==i}function Fo(i){return 0===i&&1/i==-1/0}function wu(i){return"number"==typeof i&&Number.isInteger(i)&&!Fo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Nt{constructor(e){this.path=e}static fromPath(e){return new Nt(mr.fromString(e))}static fromName(e){return new Nt(mr.fromString(e).popFirst(5))}static empty(){return new Nt(mr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Nt(new mr(e.slice()))}}const ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Iu={nullValue:"NULL_VALUE"};function qi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?os(i)?4:Ko(i)?9:10:Et()}function lo(i,e){if(i===e)return!0;const t=qi(i);if(t!==qi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ta(i).isEqual(Ta(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=$s(o.timestampValue),y=$s(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,No(i.bytesValue).isEqual(No(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Pi(o.geoPointValue.latitude)===Pi(u.geoPointValue.latitude)&&Pi(o.geoPointValue.longitude)===Pi(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Pi(o.integerValue)===Pi(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Pi(o.doubleValue),y=Pi(u.doubleValue);return d===y?Fo(d)===Fo(y):isNaN(d)&&isNaN(y)}return!1}(i,e);case 9:return uo(i.arrayValue.values||[],e.arrayValue.values||[],lo);case 10:return function(o,u){const d=o.mapValue.fields||{},y=u.mapValue.fields||{};if(Zc(d)!==Zc(y))return!1;for(const b in d)if(d.hasOwnProperty(b)&&(void 0===y[b]||!lo(d[b],y[b])))return!1;return!0}(i,e);default:return Et()}var u}function Eo(i,e){return void 0!==(i.values||[]).find(t=>lo(t,e))}function Lo(i,e){if(i===e)return 0;const t=qi(i),o=qi(e);if(t!==o)return Ln(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ln(i.booleanValue,e.booleanValue);case 2:return function(u,d){const y=Pi(u.integerValue||u.doubleValue),b=Pi(d.integerValue||d.doubleValue);return y<b?-1:y>b?1:y===b?0:isNaN(y)?isNaN(b)?0:-1:1}(i,e);case 3:return zo(i.timestampValue,e.timestampValue);case 4:return zo(Ta(i),Ta(e));case 5:return Ln(i.stringValue,e.stringValue);case 6:return function(u,d){const y=No(u),b=No(d);return y.compareTo(b)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const y=u.split("/"),b=d.split("/");for(let B=0;B<y.length&&B<b.length;B++){const G=Ln(y[B],b[B]);if(0!==G)return G}return Ln(y.length,b.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const y=Ln(Pi(u.latitude),Pi(d.latitude));return 0!==y?y:Ln(Pi(u.longitude),Pi(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const y=u.values||[],b=d.values||[];for(let B=0;B<y.length&&B<b.length;++B){const G=Lo(y[B],b[B]);if(G)return G}return Ln(y.length,b.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){const y=u.fields||{},b=Object.keys(y),B=d.fields||{},G=Object.keys(B);b.sort(),G.sort();for(let oe=0;oe<b.length&&oe<G.length;++oe){const Te=Ln(b[oe],G[oe]);if(0!==Te)return Te;const Je=Lo(y[b[oe]],B[G[oe]]);if(0!==Je)return Je}return Ln(b.length,G.length)}(i.mapValue,e.mapValue);default:throw Et()}}function zo(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Ln(i,e);const t=$s(i),o=$s(e),u=Ln(t.seconds,o.seconds);return 0!==u?u:Ln(t.nanos,o.nanos)}function Vo(i){return ll(i)}function ll(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=$s(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?No(i.bytesValue).toBase64():"referenceValue"in i?Nt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const y of o.values||[])d?d=!1:u+=",",u+=ll(y);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",y=!0;for(const b of u)y?y=!1:d+=",",d+=`${b}:${ll(o.fields[b])}`;return d+"}"}(i.mapValue):Et();var e}function Uo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function co(i){return!!i&&"integerValue"in i}function Ka(i){return!!i&&"arrayValue"in i}function Zs(i){return!!i&&"nullValue"in i}function Du(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Aa(i){return!!i&&"mapValue"in i}function la(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return za(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=la(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=la(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Ko(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function qa(i){return"nullValue"in i?Iu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Uo(Ki.empty(),Nt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Et()}function cl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Uo(Ki.empty(),Nt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ul:Et()}function A(i,e){return void 0===i?e:void 0===e||Lo(i,e)>0?i:e}function P(i,e){return void 0===i?e:void 0===e||Lo(i,e)<0?i:e}class W{constructor(e){this.value=e}static empty(){return new W({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Aa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=la(t)}setAll(e){let t=ms.emptyPath(),o={},u=[];e.forEach((y,b)=>{if(!t.isImmediateParentOf(b)){const B=this.getFieldsMap(t);this.applyChanges(B,o,u),o={},u=[],t=b.popLast()}y?o[b.lastSegment()]=la(y):u.push(b.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Aa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Aa(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){za(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new W(la(this.value))}}function ae(i){const e=[];return za(i.fields,(t,o)=>{const u=new ms([t]);if(Aa(o)){const d=ae(o.mapValue).fields;if(0===d.length)e.push(u);else for(const y of d)e.push(u.child(y))}else e.push(u)}),new qs(e)}class Me{constructor(e,t,o,u,d,y){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=y}static newInvalidDocument(e){return new Me(e,0,Xt.min(),Xt.min(),W.empty(),0)}static newFoundDocument(e,t,o){return new Me(e,1,t,Xt.min(),o,0)}static newNoDocument(e,t){return new Me(e,2,t,Xt.min(),W.empty(),0)}static newUnknownDocument(e,t){return new Me(e,3,t,Xt.min(),W.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=W.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=W.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Me&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qe{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function Dt(i){return i.fields.find(e=>2===e.kind)}function Yt(i){return i.fields.filter(e=>2!==e.kind)}Qe.UNKNOWN_ID=-1;class an{constructor(e,t){this.fieldPath=e,this.kind=t}}class Cn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Cn(0,Jr.min())}}function ur(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=Xt.fromTimestamp(1e9===o?new ji(t+1,0):new ji(t,o));return new Jr(u,Nt.empty(),e)}function Vn(i){return new Jr(i.readTime,i.key,-1)}class Jr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Jr(Xt.min(),Nt.empty(),-1)}static max(){return new Jr(Xt.max(),Nt.empty(),-1)}}function $i(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Nt.comparator(i.documentKey,e.documentKey),0!==t?t:Ln(i.largestBatchId,e.largestBatchId))}class Sa{constructor(e,t=null,o=[],u=[],d=null,y=null,b=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=y,this.endAt=b,this.P=null}}function Za(i,e=null,t=[],o=[],u=null,d=null,y=null){return new Sa(i,e,t,o,u,d,y)}function Ds(i){const e=St(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+Vo(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Is(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Vo(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Vo(o)).join(",")),e.P=t}return e.P}function Ys(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Rf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!lo(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Yd(i.startAt,e.startAt)&&Yd(i.endAt,e.endAt)}function wo(i){return Nt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function dl(i,e){return i.filters.filter(t=>t instanceof Hi&&t.field.isEqual(e))}function Qc(i,e,t){let o,u=!0;for(const d of dl(i,e)){let y,b=!0;switch(d.op){case"<":case"<=":y=qa(d.value);break;case"==":case"in":case">=":y=d.value;break;case">":y=d.value,b=!1;break;case"!=":case"not-in":y=Iu}A(o,y)===y&&(o=y,u=b)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const y=t.position[d];A(o,y)===y&&(o=y,u=t.inclusive);break}return{value:o,inclusive:u}}function hl(i,e,t){let o,u=!0;for(const d of dl(i,e)){let y,b=!0;switch(d.op){case">=":case">":y=cl(d.value),b=!1;break;case"==":case"in":case"<=":y=d.value;break;case"<":y=d.value,b=!1;break;case"!=":case"not-in":y=ul}P(o,y)===y&&(o=y,u=b)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const y=t.position[d];P(o,y)===y&&(o=y,u=t.inclusive);break}return{value:o,inclusive:u}}class Hi extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new Kd(e,t,o):"array-contains"===t?new fl(e,o):"in"===t?new Mf(e,o):"not-in"===t?new xf(e,o):"array-contains-any"===t?new qd(e,o):new Hi(e,t,o)}static V(e,t,o){return"in"===t?new Af(e,o):new Sf(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Lo(t,this.value)):null!==t&&qi(this.value)===qi(t)&&this.v(Lo(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Et()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Kd extends Hi{constructor(e,t,o){super(e,t,o),this.key=Nt.fromName(o.referenceValue)}matches(e){const t=Nt.comparator(e.key,this.key);return this.v(t)}}class Af extends Hi{constructor(e,t){super(e,"in",t),this.keys=ca(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sf extends Hi{constructor(e,t){super(e,"not-in",t),this.keys=ca(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ca(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Nt.fromName(o.referenceValue))}class fl extends Hi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ka(t)&&Eo(t.arrayValue,this.value)}}class Mf extends Hi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Eo(this.value.arrayValue,t)}}class xf extends Hi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Eo(this.value.arrayValue,t)}}class qd extends Hi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ka(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>Eo(this.value.arrayValue,o))}}class Bo{constructor(e,t){this.position=e,this.inclusive=t}}class pl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Rf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Zd(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],y=i.position[u];if(o=d.field.isKeyField()?Nt.comparator(Nt.fromName(y.referenceValue),t.key):Lo(y,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Yd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!lo(i.position[t],e.position[t]))return!1;return!0}class Io{constructor(e,t=null,o=[],u=[],d=null,y="F",b=null,B=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=y,this.startAt=b,this.endAt=B,this.D=null,this.C=null}}function rc(i,e,t,o,u,d,y,b){return new Io(i,e,t,o,u,d,y,b)}function jo(i){return new Io(i)}function ic(i){return!Is(i.limit)&&"F"===i.limitType}function Cu(i){return!Is(i.limit)&&"L"===i.limitType}function Qd(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function bu(i){for(const e of i.filters)if(e.S())return e.field;return null}function gl(i){return null!==i.collectionGroup}function Ya(i){const e=St(i);if(null===e.D){e.D=[];const t=bu(e),o=Qd(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new pl(t)),e.D.push(new pl(ms.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.D.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new pl(ms.keyField(),d))}}}return e.D}function fo(i){const e=St(i);if(!e.C)if("F"===e.limitType)e.C=Za(e.path,e.collectionGroup,Ya(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Ya(e))t.push(new pl(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Bo(e.endAt.position,!e.endAt.inclusive):null,u=e.startAt?new Bo(e.startAt.position,!e.startAt.inclusive):null;e.C=Za(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function sc(i,e,t){return new Io(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Tu(i,e){return Ys(fo(i),fo(e))&&i.limitType===e.limitType}function Xd(i){return`${Ds(fo(i))}|lt:${i.limitType}`}function Xc(i){return`Query(target=${function ho(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${Vo(o.value)}`;var o}).join(", ")}]`),Is(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Vo(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Vo(t)).join(",")),`Target(${e})`}(fo(i))}; limitType=${i.limitType})`}function Jc(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Nt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,y){const b=Zd(u,d,y);return u.inclusive?b<=0:b<0}(t.startAt,Ya(t),o)||t.endAt&&!function(u,d,y){const b=Zd(u,d,y);return u.inclusive?b>=0:b>0}(t.endAt,Ya(t),o)));var t,o}function oc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Jd(i){return(e,t)=>{let o=!1;for(const u of Ya(i)){const d=qo(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function qo(i,e,t){const o=i.field.isKeyField()?Nt.comparator(e.key,t.key):function(u,d,y){const b=d.data.field(u),B=y.data.field(u);return null!==b&&null!==B?Lo(b,B):Et()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Et()}}function Au(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fo(e)?"-0":e}}function ed(i){return{integerValue:""+i}}function Of(i,e){return wu(e)?ed(e):Au(i,e)}class ml{constructor(){this._=void 0}}function Mg(i,e,t){return i instanceof Qa?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof Xa?th(i,e):i instanceof Su?Ma(i,e):function(o,u){const d=eh(o,u),y=nh(d)+nh(o.k);return co(d)&&co(o.k)?ed(y):Au(o.M,y)}(i,e)}function Pf(i,e,t){return i instanceof Xa?th(i,e):i instanceof Su?Ma(i,e):t}function eh(i,e){return i instanceof yl?co(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Qa extends ml{}class Xa extends ml{constructor(e){super(),this.elements=e}}function th(i,e){const t=Ja(e);for(const o of i.elements)t.some(u=>lo(u,o))||t.push(o);return{arrayValue:{values:t}}}class Su extends ml{constructor(e){super(),this.elements=e}}function Ma(i,e){let t=Ja(e);for(const o of i.elements)t=t.filter(u=>!lo(u,o));return{arrayValue:{values:t}}}class yl extends ml{constructor(e,t){super(),this.M=e,this.k=t}}function nh(i){return Pi(i.integerValue||i.doubleValue)}function Ja(i){return Ka(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Mu{constructor(e,t){this.field=e,this.transform=t}}class _l{constructor(e,t){this.version=e,this.transformResults=t}}class Zi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zi}static exists(e){return new Zi(void 0,e)}static updateTime(e){return new Zi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class vl{}function xg(i,e,t){i instanceof tu?function(o,u,d){const y=o.value.clone(),b=El(o.fieldTransforms,u,d.transformResults);y.setAll(b),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(i,e,t):i instanceof xu?function(o,u,d){if(!eu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const y=El(o.fieldTransforms,u,d.transformResults),b=u.data;b.setAll(rh(o)),b.setAll(y),u.convertToFoundDocument(d.version,b).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ac(i,e,t){var u;i instanceof tu?function(o,u,d){if(!eu(o.precondition,u))return;const y=o.value.clone(),b=ih(o.fieldTransforms,d,u);y.setAll(b),u.convertToFoundDocument(lc(u),y).setHasLocalMutations()}(i,e,t):i instanceof xu?function(o,u,d){if(!eu(o.precondition,u))return;const y=ih(o.fieldTransforms,d,u),b=u.data;b.setAll(rh(o)),b.setAll(y),u.convertToFoundDocument(lc(u),b).setHasLocalMutations()}(i,e,t):eu(i.precondition,u=e)&&u.convertToNoDocument(Xt.min())}function Rg(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=eh(o.transform,u||null);null!=d&&(null==t&&(t=W.empty()),t.set(o.field,d))}return t||null}function uc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&uo(t,o,(u,d)=>function Do(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Xa&&o instanceof Xa||t instanceof Su&&o instanceof Su?uo(t.elements,o.elements,lo):t instanceof yl&&o instanceof yl?lo(t.k,o.k):t instanceof Qa&&o instanceof Qa);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function lc(i){return i.isFoundDocument()?i.version:Xt.min()}class tu extends vl{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class xu extends vl{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}}function rh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function El(i,e,t){const o=new Map;Ft(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],y=d.transform,b=e.data.field(d.field);o.set(d.field,Pf(y,b,t[u]))}return o}function ih(i,e,t){const o=new Map;for(const u of i){const d=u.transform,y=t.data.field(u.field);o.set(u.field,Mg(d,y,e))}return o}class wl extends vl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Il extends vl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class td{constructor(e){this.count=e}}var Yi,lr;function Dl(i){switch(i){default:return Et();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}function cc(i){if(void 0===i)return wt("GRPC error has no .code"),et.UNKNOWN;switch(i){case Yi.OK:return et.OK;case Yi.CANCELLED:return et.CANCELLED;case Yi.UNKNOWN:return et.UNKNOWN;case Yi.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case Yi.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case Yi.INTERNAL:return et.INTERNAL;case Yi.UNAVAILABLE:return et.UNAVAILABLE;case Yi.UNAUTHENTICATED:return et.UNAUTHENTICATED;case Yi.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case Yi.NOT_FOUND:return et.NOT_FOUND;case Yi.ALREADY_EXISTS:return et.ALREADY_EXISTS;case Yi.PERMISSION_DENIED:return et.PERMISSION_DENIED;case Yi.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case Yi.ABORTED:return et.ABORTED;case Yi.OUT_OF_RANGE:return et.OUT_OF_RANGE;case Yi.UNIMPLEMENTED:return et.UNIMPLEMENTED;case Yi.DATA_LOSS:return et.DATA_LOSS;default:return Et()}}(lr=Yi||(Yi={}))[lr.OK=0]="OK",lr[lr.CANCELLED=1]="CANCELLED",lr[lr.UNKNOWN=2]="UNKNOWN",lr[lr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lr[lr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lr[lr.NOT_FOUND=5]="NOT_FOUND",lr[lr.ALREADY_EXISTS=6]="ALREADY_EXISTS",lr[lr.PERMISSION_DENIED=7]="PERMISSION_DENIED",lr[lr.UNAUTHENTICATED=16]="UNAUTHENTICATED",lr[lr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lr[lr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lr[lr.ABORTED=10]="ABORTED",lr[lr.OUT_OF_RANGE=11]="OUT_OF_RANGE",lr[lr.UNIMPLEMENTED=12]="UNIMPLEMENTED",lr[lr.INTERNAL=13]="INTERNAL",lr[lr.UNAVAILABLE=14]="UNAVAILABLE",lr[lr.DATA_LOSS=15]="DATA_LOSS";class xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){za(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Yc(this.inner)}size(){return this.innerSize}}class Jn{constructor(e,t){this.comparator=e,this.root=t||Ss.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ss.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cl(this.root,e,this.comparator,!0)}}class Cl{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ss{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=null!=o?o:Ss.RED,this.left=null!=u?u:Ss.EMPTY,this.right=null!=d?d:Ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new Ss(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Ss.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();const e=this.left.check();if(e!==this.right.check())throw Et();return e+(this.isRed()?0:1)}}Ss.EMPTY=null,Ss.RED=!0,Ss.BLACK=!1,Ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(i,e,t,o,u){return this}insert(i,e,t){return new Ss(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class oi{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nd(this.data.getIterator())}getIteratorFrom(e){return new nd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new oi(this.comparator);return t.data=e,t}}class nd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ru(i){return i.hasNext()?i.getNext():void 0}const dc=new Jn(Nt.comparator);function Co(){return dc}const sh=new Jn(Nt.comparator);function rd(){return sh}function hc(){return new xa(i=>i.toString(),(i,e)=>i.isEqual(e))}const Og=new Jn(Nt.comparator),bl=new oi(Nt.comparator);function Un(...i){let e=bl;for(const t of i)e=e.add(t);return e}const Tl=new oi(Ln);function nu(){return Tl}class ru{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,as.createSynthesizedTargetChangeForCurrentChange(e,t)),new ru(Xt.min(),o,nu(),Co(),Un())}}class as{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new as(Yn.EMPTY_BYTE_STRING,t,Un(),Un(),Un())}}class Zo{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class fc{constructor(e,t){this.targetId=e,this.$=t}}class Qs{constructor(e,t,o=Yn.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class Ou{constructor(){this.B=0,this.L=Al(),this.U=Yn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Un(),t=Un(),o=Un();return this.L.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:Et()}}),new as(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=Al()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class id{constructor(e){this.nt=e,this.st=new Map,this.it=Co(),this.rt=oh(),this.ot=new oi(Ln)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:Et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const d=u.target;if(wo(d))if(0===o){const y=new Nt(d.path);this.ct(t,y,Me.newNoDocument(y,Xt.min()))}else Ft(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((d,y)=>{const b=this.wt(y);if(b){if(d.current&&wo(b.target)){const B=new Nt(b.target.path);null!==this.it.get(B)||this.It(y,B)||this.ct(y,B,Me.newNoDocument(B,e))}d.j&&(t.set(y,d.H()),d.J())}});let o=Un();this.rt.forEach((d,y)=>{let b=!0;y.forEachWhile(B=>{const G=this.wt(B);return!G||2===G.purpose||(b=!1,!1)}),b&&(o=o.add(d))}),this.it.forEach((d,y)=>y.setReadTime(e));const u=new ru(e,t,this.ot,this.it,o);return this.it=Co(),this.rt=oh(),this.ot=new oi(Ln),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Ou,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new oi(Ln),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Ou),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function oh(){return new Jn(Nt.comparator)}function Al(){return new Jn(Nt.comparator)}const sd={asc:"ASCENDING",desc:"DESCENDING"},ah={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class uh{constructor(e,t){this.databaseId=e,this.N=t}}function Sl(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $o(i,e){return i.N?e.toBase64():e.toUint8Array()}function lh(i,e){return Sl(i,e.toTimestamp())}function Cs(i){return Ft(!!i),Xt.fromTimestamp(function(e){const t=$s(e);return new ji(t.seconds,t.nanos)}(i))}function Ml(i,e){return(t=i,new mr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ch(i){const e=mr.fromString(i);return Ft(bn(e)),e}function Pu(i,e){return Ml(i.databaseId,e.path)}function di(i,e){const t=ch(e);if(t.get(1)!==i.databaseId.projectId)throw new mt(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new mt(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Nt(Yo(t))}function xl(i,e){return Ml(i.databaseId,e)}function pc(i){const e=ch(i);return 4===e.length?mr.emptyPath():Yo(e)}function Rl(i){return new mr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Yo(i){return Ft(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function ku(i,e,t){return{name:Pu(i,e),fields:t.value.mapValue.fields}}function gc(i,e,t){const o=di(i,e.name),u=Cs(e.updateTime),d=new W({mapValue:{fields:e.fields}}),y=Me.newFoundDocument(o,u,d);return t&&y.setHasCommittedMutations(),t?y.setHasCommittedMutations():y}function iu(i,e){let t;if(e instanceof tu)t={update:ku(i,e.key,e.value)};else if(e instanceof wl)t={delete:Pu(i,e.key)};else if(e instanceof xu)t={update:ku(i,e.key,e.data),updateMask:ln(e.fieldMask)};else{if(!(e instanceof Il))return Et();t={verify:Pu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const y=d.transform;if(y instanceof Qa)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Xa)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Su)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof yl)return{fieldPath:d.field.canonicalString(),increment:y.k};throw Et()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:lh(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Et()),t;var u}function od(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Zi.updateTime(Cs(u.updateTime)):void 0!==u.exists?Zi.exists(u.exists):Zi.none():Zi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,y){let b=null;"setToServerValue"in y?(Ft("REQUEST_TIME"===y.setToServerValue),b=new Qa):"appendMissingElements"in y?b=new Xa(y.appendMissingElements.values||[]):"removeAllFromArray"in y?b=new Su(y.removeAllFromArray.values||[]):"increment"in y?b=new yl(d,y.increment):Et();const B=ms.fromServerFormat(y.fieldPath);return new Mu(B,b)}(i,u)):[];var u;if(e.update){const u=di(i,e.update.name),d=new W({mapValue:{fields:e.update.fields}});if(e.updateMask){const y=new qs((e.updateMask.fieldPaths||[]).map(G=>ms.fromServerFormat(G)));return new xu(u,d,y,t,o)}return new tu(u,d,t,o)}if(e.delete){const u=di(i,e.delete);return new wl(u,t)}if(e.verify){const u=di(i,e.verify);return new Il(u,t)}return Et()}function hh(i,e){return{documents:[xl(i,e.path)]}}function fh(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=xl(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xl(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(B){if(0===B.length)return;const G=B.map(oe=>function(Te){if("=="===Te.op){if(Du(Te.value))return{unaryFilter:{field:X(Te.field),op:"IS_NAN"}};if(Zs(Te.value))return{unaryFilter:{field:X(Te.field),op:"IS_NULL"}}}else if("!="===Te.op){if(Du(Te.value))return{unaryFilter:{field:X(Te.field),op:"IS_NOT_NAN"}};if(Zs(Te.value))return{unaryFilter:{field:X(Te.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:X(Te.field),op:V(Te.op),value:Te.value}}}(oe));return 1===G.length?G[0]:{compositeFilter:{op:"AND",filters:G}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(B){if(0!==B.length)return B.map(G=>{return{field:X((oe=G).field),direction:E(oe.dir)};var oe})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const y=(G=e.limit,i.N||Is(G)?G:{value:G});var G,b,B;return null!==y&&(t.structuredQuery.limit=y),e.startAt&&(t.structuredQuery.startAt={before:(b=e.startAt).inclusive,values:b.position}),e.endAt&&(t.structuredQuery.endAt={before:!(B=e.endAt).inclusive,values:B.position}),t}function g(i){let e=pc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){Ft(1===o);const oe=t.from[0];oe.allDescendants?u=oe.collectionId:e=e.child(oe.collectionId)}let d=[];t.where&&(d=f(t.where));let y=[];t.orderBy&&(y=t.orderBy.map(oe=>{return new pl(Pe((Te=oe).field),function(Je){switch(Je){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Te.direction));var Te}));let b=null;t.limit&&(b=function(oe){let Te;return Te="object"==typeof oe?oe.value:oe,Is(Te)?null:Te}(t.limit));let B=null;var oe;t.startAt&&(B=new Bo((oe=t.startAt).values||[],!!oe.before));let G=null;return t.endAt&&(G=function(oe){return new Bo(oe.values||[],!oe.before)}(t.endAt)),rc(e,u,y,d,b,"F",B,G)}function f(i){return i?void 0!==i.unaryFilter?[Bt(i)]:void 0!==i.fieldFilter?[nt(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>f(e)).reduce((e,t)=>e.concat(t)):Et():[]}function E(i){return sd[i]}function V(i){return ah[i]}function X(i){return{fieldPath:i.canonicalString()}}function Pe(i){return ms.fromServerFormat(i.fieldPath)}function nt(i){return Hi.create(Pe(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}}(i.fieldFilter.op),i.fieldFilter.value)}function Bt(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Pe(i.unaryFilter.field);return Hi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Pe(i.unaryFilter.field);return Hi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Pe(i.unaryFilter.field);return Hi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Pe(i.unaryFilter.field);return Hi.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Et()}}function ln(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bn(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Jt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=po(e)),e=ki(i.get(t),e);return po(e)}function ki(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function po(i){return i+"\x01\x01"}function Xs(i){const e=i.length;if(Ft(e>=2),2===e)return Ft("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),mr.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const y=i.indexOf("\x01",d);switch((y<0||y>t)&&Et(),i.charAt(y+1)){case"\x01":const b=i.substring(d,y);let B;0===u.length?B=b:(u+=b,B=u,u=""),o.push(B);break;case"\x10":u+=i.substring(d,y),u+="\0";break;case"\x11":u+=i.substring(d,y+1);break;default:Et()}d=y+2}return new mr(o)}const Ol=["userId","batchId"];function Ra(i,e){return[i,Jt(e)]}function mc(i,e,t){return[i,Jt(e),t]}const Ff={},Oa=["prefixPath","collectionGroup","readTime","documentId"],yc=["prefixPath","collectionGroup","documentId"],ad=["collectionGroup","readTime","prefixPath","documentId"],ud=["canonicalId","targetId"],_c=["targetId","path"],Lf=["path","targetId"],ld=["collectionId","parent"],Vf=["indexId","uid"],My=["uid","sequenceNumber"],xy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ry=["indexId","uid","orderedDocumentKey"],Pg=["userId","collectionPath","documentId"],Uf=["userId","collectionPath","largestBatchId"],kg=["userId","collectionGroup","largestBatchId"],ph=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oy=[...ph,"documentOverlays"],Ng=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fg=[...Ng,"indexConfiguration","indexState","indexEntries"],Bf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class it{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new it((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof it?t:it.resolve(t)}catch(t){return it.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):it.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):it.reject(t)}static resolve(e){return new it((t,o)=>{t(e)})}static reject(e){return new it((t,o)=>{o(e)})}static waitFor(e){return new it((t,o)=>{let u=0,d=0,y=!1;e.forEach(b=>{++u,b.next(()=>{++d,y&&d===u&&t()},B=>o(B))}),y=!0,d===u&&t()})}static or(e){let t=it.resolve(!1);for(const o of e)t=t.next(u=>u?it.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}}class cd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Xr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new dd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=yh(o.target.error);this.At.reject(new dd(e,u))}}static open(e,t,o,u){try{return new cd(t,e.transaction(u,o))}catch(d){throw new dd(t,d)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lg(t)}}class da{constructor(e,t,o){this.name=e,this.version=t,this.bt=o,12.2===da.Vt((0,je.z$)())&&wt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ee("SimpleDb","Removing database:",e),Lu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,je.hl)())return!1;if(da.St())return!0;const e=(0,je.z$)(),t=da.Vt(e),o=0<t&&t<10,u=da.Dt(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,F.Z)(function*(){return t.db||(Ee("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=y=>{o(y.target.result)},d.onblocked=()=>{u(new dd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=y=>{const b=y.target.error;u("VersionError"===b.name?new mt(et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new mt(et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new dd(e,b))},d.onupgradeneeded=y=>{Ee("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',y.oldVersion),t.bt.kt(y.target.result,d.transaction,y.oldVersion,t.version).next(()=>{Ee("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,F.Z)(function*(){const y="readonly"===t;let b=0;for(;;){++b;try{d.db=yield d.Nt(e);const B=cd.open(d.db,e,y?"readonly":"readwrite",o),G=u(B).next(oe=>(B.Pt(),oe)).catch(oe=>(B.abort(oe),it.reject(oe))).toPromise();return G.catch(()=>{}),yield B.Rt,G}catch(B){const G="FirebaseError"!==B.name&&b<3;if(Ee("SimpleDb","Transaction failed with error:",B.message,"Retrying:",G),d.close(),!G)return Promise.reject(B)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gh{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Lu(this.Ft.delete())}}class dd extends mt{constructor(e,t){super(et.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fu(i){return"IndexedDbTransactionError"===i.name}class Lg{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Ee("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Lu(o)}add(e){return Ee("SimpleDb","ADD",this.store.name,e,e),Lu(this.store.add(e))}get(e){return Lu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ee("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ee("SimpleDb","DELETE",this.store.name,e),Lu(this.store.delete(e))}count(){return Ee("SimpleDb","COUNT",this.store.name),Lu(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.Kt(u,(y,b)=>{d.push(b)}).next(()=>d)}{const u=this.store.getAll(o.range);return new it((d,y)=>{u.onerror=b=>{y(b.target.error)},u.onsuccess=b=>{d(b.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new it((u,d)=>{o.onerror=y=>{d(y.target.error)},o.onsuccess=y=>{u(y.target.result)}})}Qt(e,t){Ee("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Kt(u,(d,y,b)=>b.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Kt(u,t)}zt(e){const t=this.cursor({});return new it((o,u)=>{t.onerror=d=>{const y=yh(d.target.error);u(y)},t.onsuccess=d=>{const y=d.target.result;y?e(y.primaryKey,y.value).next(b=>{b?y.continue():o()}):o()}})}Kt(e,t){const o=[];return new it((u,d)=>{e.onerror=y=>{d(y.target.error)},e.onsuccess=y=>{const b=y.target.result;if(!b)return void u();const B=new gh(b),G=t(b.primaryKey,b.value,B);if(G instanceof it){const oe=G.catch(Te=>(B.done(),it.reject(Te)));o.push(oe)}B.isDone?u():null===B.Lt?b.continue():b.continue(B.Lt)}}).next(()=>it.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Lu(i){return new it((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=yh(o.target.error);t(u)}})}let mh=!1;function yh(i){const e=da.Vt((0,je.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new mt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mh||(mh=!0,setTimeout(()=>{throw o},0)),o}}return i}class hd extends Nu{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ys(i,e){const t=St(i);return da.xt(t.Ht,e)}class _h{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&xg(d,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ac(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ac(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(Xt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Un())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(t,o)=>uc(t,o))&&uo(this.baseMutations,e.baseMutations,(t,o)=>uc(t,o))}}class fd{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){Ft(e.mutations.length===o.length);let u=Og;const d=e.mutations;for(let y=0;y<d.length;y++)u=u.insert(d[y].key,o[y].version);return new fd(e,t,o,u)}}class vh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Pa{constructor(e,t,o,u,d=Xt.min(),y=Xt.min(),b=Yn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=b}withSequenceNumber(e){return new Pa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vc{constructor(e){this.Jt=e}}function jf(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Eh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Pu(u=i.Jt,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Sl(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Pl(e.version)};else{if(!e.isUnknownDocument())return Et();o.unknownDocument={path:t.path.toArray(),version:Pl(e.version)}}var u,d;return o}function Eh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Pl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vu(i){const e=new ji(i.seconds,i.nanoseconds);return Xt.fromTimestamp(e)}function Uu(i,e){const t=(e.baseMutations||[]).map(d=>od(i.Jt,d));for(let d=0;d<e.mutations.length-1;++d){const y=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(y.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>od(i.Jt,d)),u=ji.fromMillis(e.localWriteTimeMs);return new _h(e.batchId,u,t,o)}function Ec(i){const e=Vu(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Vu(i.lastLimboFreeSnapshotVersion):Xt.min();let o;var u;return void 0!==i.query.documents?(Ft(1===(u=i.query).documents.length),o=fo(jo(pc(u.documents[0])))):o=fo(g(i.query)),new Pa(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Yn.fromBase64String(i.resumeToken))}function ky(i,e){const t=Pl(e.snapshotVersion),o=Pl(e.lastLimboFreeSnapshotVersion);let u;u=wo(e.target)?hh(i.Jt,e.target):fh(i.Jt,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ds(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function wh(i){const e=g({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?sc(e,e.limit,"L"):e}function $f(i,e){return new vh(e.largestBatchId,od(i.Jt,e.overlayMutation))}function Hf(i,e){const t=e.path.lastSegment();return[i,Jt(e.path.popLast()),t]}class Ny{getBundleMetadata(e,t){return Vg(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Vu(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Vg(e).put({bundleId:(o=t).id,createTime:Pl(Cs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Qo(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:wh(u.bundledQuery),readTime:Vu(u.readTime)};var u})}saveNamedQuery(e,t){return Qo(e).put({name:(o=t).name,readTime:Pl(Cs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Vg(i){return ys(i,"bundles")}function Qo(i){return ys(i,"namedQueries")}class Gf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Gf(e,t.uid||"")}getOverlay(e,t){return wc(e).get(Hf(this.userId,t)).next(o=>o?$f(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((d,y)=>{const b=new vh(t,y);u.push(this.Xt(e,b))}),it.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(y=>u.add(Jt(y.getCollectionPath())));const d=[];return u.forEach(y=>{const b=IDBKeyRange.bound([this.userId,y,o],[this.userId,y,o+1],!1,!0);d.push(wc(e).Qt("collectionPathOverlayIndex",b))}),it.waitFor(d)}getOverlaysForCollection(e,t,o){const u=hc(),d=Jt(t),y=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return wc(e).qt("collectionPathOverlayIndex",y).next(b=>{for(const B of b){const G=$f(this.M,B);u.set(G.getKey(),G)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=hc();let y;const b=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wc(e).Wt({index:"collectionGroupOverlayIndex",range:b},(B,G,oe)=>{const Te=$f(this.M,G);d.size()<u||Te.largestBatchId===y?(d.set(Te.getKey(),Te),y=Te.largestBatchId):oe.done()}).next(()=>d)}Xt(e,t){return wc(e).put(function(o,u,d){const[y,b,B]=Hf(u,d.mutation.key);return{userId:u,collectionPath:b,documentId:B,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:iu(o.Jt,d.mutation)}}(this.M,this.userId,t))}}function wc(i){return ys(i,"documentOverlays")}class kl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Pi(e.integerValue));else if("doubleValue"in e){const o=Pi(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),Fo(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(No(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?Ko(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Et()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),Nt.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Fy(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ug(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=Fy(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}kl.fe=new kl;class Ly{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=Ug(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Bg{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Vy{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class pd{constructor(){this.De=new Ly,this.Ce=new Bg(this.De),this.xe=new Vy(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Bu{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Bu(this.indexId,this.documentKey,this.arrayValue,o)}}function kn(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Wf(i.arrayValue,e.arrayValue),0!==t?t:(t=Wf(i.directionalValue,e.directionalValue),0!==t?t:Nt.comparator(i.documentKey,e.documentKey)))}function Wf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class jg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=Dt(e);if(void 0!==t&&!this.Be(t))return!1;const o=Yt(e);let u=0,d=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const y=o[u];if(!this.Le(this.Fe,y)||!this.Ue(this.Me[d++],y))return!1;++u}for(;u<o.length;++u){const y=o[u];if(d>=this.Me.length||!this.Ue(this.Me[d++],y))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class $g{constructor(){this.qe=new Ic}addToCollectionParentIndex(e,t){return this.qe.add(t),it.resolve()}getCollectionParents(e,t){return it.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return it.resolve()}deleteFieldIndex(e,t){return it.resolve()}getDocumentsMatchingTarget(e,t){return it.resolve(null)}getFieldIndex(e,t){return it.resolve(null)}getFieldIndexes(e,t){return it.resolve([])}getNextCollectionGroupToUpdate(e){return it.resolve(null)}updateCollectionGroup(e,t,o){return it.resolve()}updateIndexEntries(e,t){return it.resolve()}}class Ic{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new oi(mr.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new oi(mr.comparator)).toArray()}}const Js=new Uint8Array(0);class Hg{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Ic,this.Ge=new xa(o=>Ds(o),(o,u)=>Ys(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const d={collectionId:o,parent:Jt(u)};return Gg(e).put(d)}return it.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[Wa(t),""],!1,!0);return Gg(e).qt(u).next(d=>{for(const y of d){if(y.collectionId!==t)break;o.push(Xs(y.parent))}return o})}addFieldIndex(e,t){const o=Xo(e),u={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var d;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=Xo(e),u=Dc(e),d=Nl(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Nl(e);let u=!0;const d=new Map;return it.forEach(this.Qe(t),y=>this.getFieldIndex(e,y).next(b=>{u&&(u=!!b),d.set(y,b)})).next(()=>{if(u){let y=Un();const b=[];return it.forEach(d,(B,G)=>{var oe;Ee("IndexedDbIndexManager",`Using index ${oe=B,`id=${oe.indexId}|cg=${oe.collectionGroup}|f=${oe.fields.map(hi=>`${hi.fieldPath}:${hi.kind}`).join(",")}`} to execute ${Ds(t)}`);const Te=function(hi,Ts){const Fi=Dt(Ts);if(void 0===Fi)return null;for(const Xi of dl(hi,Fi.fieldPath))switch(Xi.op){case"array-contains-any":return Xi.value.arrayValue.values||[];case"array-contains":return[Xi.value]}return null}(G,B),Je=function(hi,Ts){const Fi=new Map;for(const Xi of Yt(Ts))for(const ro of dl(hi,Xi.fieldPath))switch(ro.op){case"==":case"in":Fi.set(Xi.fieldPath.canonicalString(),ro.value);break;case"not-in":case"!=":return Fi.set(Xi.fieldPath.canonicalString(),ro.value),Array.from(Fi.values())}return null}(G,B),ft=function(hi,Ts){const Fi=[];let Xi=!0;for(const ro of Yt(Ts)){const il=0===ro.kind?Qc(hi,ro.fieldPath,hi.startAt):hl(hi,ro.fieldPath,hi.startAt);if(!il.value)return null;Fi.push(il.value),Xi&&(Xi=il.inclusive)}return new Bo(Fi,Xi)}(G,B),gt=function(hi,Ts){const Fi=[];let Xi=!0;for(const ro of Yt(Ts)){const il=0===ro.kind?hl(hi,ro.fieldPath,hi.endAt):Qc(hi,ro.fieldPath,hi.endAt);if(!il.value)return null;Fi.push(il.value),Xi&&(Xi=il.inclusive)}return new Bo(Fi,Xi)}(G,B),sn=this.je(B,G,ft),Hn=this.je(B,G,gt),Si=this.We(B,G,Je),Ni=this.ze(B.indexId,Te,sn,!!ft&&ft.inclusive,Hn,!!gt&&gt.inclusive,Si);return it.forEach(Ni,hi=>o.Gt(hi,t.limit).next(Ts=>{Ts.forEach(Fi=>{const Xi=Nt.fromSegments(Fi.documentKey);y.has(Xi)||(y=y.add(Xi),b.push(Xi))})}))}).next(()=>b)}return it.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,o,u,d,y,b){const B=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=d?d.length:1),G=B/(null!=t?t.length:1),oe=[];for(let Te=0;Te<B;++Te){const Je=t?this.He(t[Te/G]):Js,ft=o?this.Je(e,Je,o[Te%G],u):this.Ye(e),gt=d?this.Xe(e,Je,d[Te%G],y):this.Ye(e+1);oe.push(...this.createRange(ft,gt,b.map(sn=>this.Je(e,Je,sn,!0))))}return oe}Je(e,t,o,u){const d=new Bu(e,Nt.empty(),t,o);return u?d:d.ke()}Xe(e,t,o,u){const d=new Bu(e,Nt.empty(),t,o);return u?d.ke():d}Ye(e){return new Bu(e,Nt.empty(),Js,Js)}getFieldIndex(e,t){const o=new jg(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{const y=d.filter(b=>o.$e(b));return y.sort((b,B)=>B.fields.length-b.fields.length),y.length>0?y[0]:null})}Ze(e,t){const o=new pd;for(const u of Yt(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const y=o.Ne(u.kind);kl.fe.Zt(d,y)}return o.Se()}He(e){const t=new pd;return kl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new pd;return kl.fe.Zt(Uo(this.databaseId,t),o.Ne(function(u){const d=Yt(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.Se()}We(e,t,o){if(null===o)return[];let u=[];u.push(new pd);let d=0;for(const y of Yt(e)){const b=o[d++];for(const B of u)if(this.en(t,y.fieldPath)&&Ka(b))u=this.nn(u,y,b);else{const G=B.Ne(y.kind);kl.fe.Zt(b,G)}}return this.sn(u)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const u=[...e],d=[];for(const y of o.arrayValue.values||[])for(const b of u){const B=new pd;B.seed(b.Se()),kl.fe.Zt(y,B.Ne(t.kind)),d.push(B)}return d}en(e,t){return!!e.filters.find(o=>o instanceof Hi&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Xo(e),u=Dc(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(d=>{const y=[];return it.forEach(d,b=>u.get([b.indexId,this.uid]).next(B=>{y.push(function(G,oe){const Te=oe?new Cn(oe.sequenceNumber,new Jr(Vu(oe.readTime),new Nt(Xs(oe.documentKey)),oe.largestBatchId)):Cn.empty(),Je=G.fields.map(([ft,gt])=>new an(ms.fromServerFormat(ft),gt));return new Qe(G.indexId,G.collectionGroup,Je,Te)}(b,B))})).next(()=>y)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Ln(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Xo(e),d=Dc(e);return this.rn(e).next(y=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(b=>it.forEach(b,B=>{return d.put({indexId:B.indexId,uid:this.user.uid||"",sequenceNumber:y,readTime:Pl((Je=o).readTime),documentKey:Jt(Je.documentKey.path),largestBatchId:Je.largestBatchId});var Je})))}updateIndexEntries(e,t){const o=new Map;return it.forEach(t,(u,d)=>{const y=o.get(u.collectionGroup);return(y?it.resolve(y):this.getFieldIndexes(e,u.collectionGroup)).next(b=>(o.set(u.collectionGroup,b),it.forEach(b,B=>this.on(e,u,B).next(G=>{const oe=this.un(d,B);return G.isEqual(oe)?it.resolve():this.an(e,d,B,G,oe)}))))})}cn(e,t,o,u){return Nl(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,u){return Nl(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const u=Nl(e);let d=new oi(kn);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(y,b)=>{d=d.add(new Bu(o.indexId,t,b.arrayValue,b.directionalValue))}).next(()=>d)}un(e,t){let o=new oi(kn);const u=this.Ze(t,e);if(null==u)return o;const d=Dt(t);if(null!=d){const y=e.data.field(d.fieldPath);if(Ka(y))for(const b of y.arrayValue.values||[])o=o.add(new Bu(t.indexId,e.key,this.He(b),u))}else o=o.add(new Bu(t.indexId,e.key,Js,u));return o}an(e,t,o,u,d){Ee("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const y=[];return function(b,B,G,oe,Te){const Je=b.getIterator(),ft=B.getIterator();let gt=Ru(Je),sn=Ru(ft);for(;gt||sn;){let Hn=!1,Si=!1;if(gt&&sn){const Ni=G(gt,sn);Ni<0?Si=!0:Ni>0&&(Hn=!0)}else null!=gt?Si=!0:Hn=!0;Hn?(oe(sn),sn=Ru(ft)):Si?(Te(gt),gt=Ru(Je)):(gt=Ru(Je),sn=Ru(ft))}}(u,d,kn,b=>{y.push(this.cn(e,t,o,b))},b=>{y.push(this.hn(e,t,o,b))}),it.waitFor(y)}rn(e){let t=1;return Dc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((y,b)=>kn(y,b)).filter((y,b,B)=>!b||0!==kn(y,B[b-1]));const u=[];u.push(e);for(const y of o){const b=kn(y,e),B=kn(y,t);if(0===b)u[0]=e.ke();else if(b>0&&B<0)u.push(y),u.push(y.ke());else if(B>0)break}u.push(t);const d=[];for(let y=0;y<u.length;y+=2)d.push(IDBKeyRange.bound([u[y].indexId,this.uid,u[y].arrayValue,u[y].directionalValue,Js,[]],[u[y+1].indexId,this.uid,u[y+1].arrayValue,u[y+1].directionalValue,Js,[]]));return d}}function Gg(i){return ys(i,"collectionParents")}function Nl(i){return ys(i,"indexEntries")}function Xo(i){return ys(i,"indexConfiguration")}function Dc(i){return ys(i,"indexState")}const zf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class eo{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new eo(e,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Uy(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],y=IDBKeyRange.only(t.batchId);let b=0;const B=o.Wt({range:y},(oe,Te,Je)=>(b++,Je.delete()));d.push(B.next(()=>{Ft(1===b)}));const G=[];for(const oe of t.mutations){const Te=mc(e,oe.key.path,t.batchId);d.push(u.delete(Te)),G.push(oe.key)}return it.waitFor(d).next(()=>G)}function gd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Et();e=i.noDocument}return JSON.stringify(e).length}eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo(41943040,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);class Wg{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.ln={}}static Yt(e,t,o,u){Ft(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Wg(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ha(e).Wt({index:"userMutationsIndex",range:o},(u,d,y)=>{t=!1,y.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=ju(e),y=ha(e);return y.add({}).next(b=>{Ft("number"==typeof b);const B=new _h(b,t,o,u),G=function(Je,ft,gt){const sn=gt.baseMutations.map(Si=>iu(Je.Jt,Si)),Hn=gt.mutations.map(Si=>iu(Je.Jt,Si));return{userId:ft,batchId:gt.batchId,localWriteTimeMs:gt.localWriteTime.toMillis(),baseMutations:sn,mutations:Hn}}(this.M,this.userId,B),oe=[];let Te=new oi((Je,ft)=>Ln(Je.canonicalString(),ft.canonicalString()));for(const Je of u){const ft=mc(this.userId,Je.key.path,b);Te=Te.add(Je.key.path.popLast()),oe.push(y.put(G)),oe.push(d.put(ft,Ff))}return Te.forEach(Je=>{oe.push(this.indexManager.addToCollectionParentIndex(e,Je))}),e.addOnCommittedListener(()=>{this.ln[b]=B.keys()}),it.waitFor(oe).next(()=>B)})}lookupMutationBatch(e,t){return ha(e).get(t).next(o=>o?(Ft(o.userId===this.userId),Uu(this.M,o)):null)}fn(e,t){return this.ln[t]?it.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.ln[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return ha(e).Wt({index:"userMutationsIndex",range:u},(y,b,B)=>{b.userId===this.userId&&(Ft(b.batchId>=o),d=Uu(this.M,b)),B.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ha(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,d,y)=>{o=d.batchId,y.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ha(e).qt("userMutationsIndex",t).next(o=>o.map(u=>Uu(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Ra(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return ju(e).Wt({range:u},(y,b,B)=>{const[G,oe,Te]=y,Je=Xs(oe);if(G===this.userId&&t.path.isEqual(Je))return ha(e).get(Te).next(ft=>{if(!ft)throw Et();Ft(ft.userId===this.userId),d.push(Uu(this.M,ft))});B.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new oi(Ln);const u=[];return t.forEach(d=>{const y=Ra(this.userId,d.path),b=IDBKeyRange.lowerBound(y),B=ju(e).Wt({range:b},(G,oe,Te)=>{const[Je,ft,gt]=G,sn=Xs(ft);Je===this.userId&&d.path.isEqual(sn)?o=o.add(gt):Te.done()});u.push(B)}),it.waitFor(u).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=Ra(this.userId,o),y=IDBKeyRange.lowerBound(d);let b=new oi(Ln);return ju(e).Wt({range:y},(B,G,oe)=>{const[Te,Je,ft]=B,gt=Xs(Je);Te===this.userId&&o.isPrefixOf(gt)?gt.length===u&&(b=b.add(ft)):oe.done()}).next(()=>this.dn(e,b))}dn(e,t){const o=[],u=[];return t.forEach(d=>{u.push(ha(e).get(d).next(y=>{if(null===y)throw Et();Ft(y.userId===this.userId),o.push(Uu(this.M,y))}))}),it.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Uy(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),it.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return it.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return ju(e).Wt({range:o},(d,y,b)=>{if(d[0]===this.userId){const B=Xs(d[1]);u.push(B)}else b.done()}).next(()=>{Ft(0===u.length)})})}containsKey(e,t){return md(e,this.userId,t)}wn(e){return Ih(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function md(i,e,t){const o=Ra(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let y=!1;return ju(i).Wt({range:d,jt:!0},(b,B,G)=>{const[oe,Te,Je]=b;oe===e&&Te===u&&(y=!0),G.done()}).next(()=>y)}function ha(i){return ys(i,"mutations")}function ju(i){return ys(i,"documentMutations")}function Ih(i){return ys(i,"mutationQueues")}class su{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new su(0)}static yn(){return new su(-1)}}class jv{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new su(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Xt.fromTimestamp(new ji(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.In(e,u)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Cc(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(Ft(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return Cc(e).Wt((y,b)=>{const B=Ec(b);B.sequenceNumber<=t&&null===o.get(B.targetId)&&(u++,d.push(this.removeTargetData(e,B)))}).next(()=>it.waitFor(d)).next(()=>u)}forEachTarget(e,t){return Cc(e).Wt((o,u)=>{const d=Ec(u);t(d)})}pn(e){return zg(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}In(e,t){return zg(e).put("targetGlobalKey",t)}Tn(e,t){return Cc(e).put(ky(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Ds(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Cc(e).Wt({range:u,index:"queryTargetsIndex"},(y,b,B)=>{const G=Ec(b);Ys(t,G.target)&&(d=G,B.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=$u(e);return t.forEach(y=>{const b=Jt(y.path);u.push(d.put({targetId:o,path:b})),u.push(this.referenceDelegate.addReference(e,o,y))}),it.waitFor(u)}removeMatchingKeys(e,t,o){const u=$u(e);return it.forEach(t,d=>{const y=Jt(d.path);return it.waitFor([u.delete([o,y]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=$u(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=$u(e);let d=Un();return u.Wt({range:o,jt:!0},(y,b,B)=>{const G=Xs(y[1]),oe=new Nt(G);d=d.add(oe)}).next(()=>d)}containsKey(e,t){const o=Jt(t.path),u=IDBKeyRange.bound([o],[Wa(o)],!1,!0);let d=0;return $u(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([y,b],B,G)=>{0!==y&&(d++,G.done())}).next(()=>d>0)}Et(e,t){return Cc(e).get(t).next(o=>o?Ec(o):null)}}function Cc(i){return ys(i,"targets")}function zg(i){return ys(i,"targetGlobal")}function $u(i){return ys(i,"targetDocuments")}function Fl(i){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,F.Z)(function*(i){if(i.code!==et.FAILED_PRECONDITION||i.message!==Bf)throw i;Ee("LocalStore","Unexpectedly lost primary lease")}),Dh.apply(this,arguments)}function By([i,e],[t,o]){const u=Ln(i,t);return 0===u?Ln(e,o):u}class jy{constructor(e){this.An=e,this.buffer=new oi(By),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();By(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $v{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;Ee("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,F.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){Fu(u)?Ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Fl(u)}yield t.Sn(e)}))}}class Kg{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return it.resolve(ss.A);const o=new jy(t);return this.Dn.forEachTarget(e,u=>o.bn(u.sequenceNumber)).next(()=>this.Dn.xn(e,u=>o.bn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(zf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zf):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,u,d,y,b,B,G;const oe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Te=>(Te>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Te}`),u=this.params.maximumSequenceNumbersToCollect):u=Te,y=Date.now(),this.nthSequenceNumber(e,u))).next(Te=>(o=Te,b=Date.now(),this.removeTargets(e,o,t))).next(Te=>(d=Te,B=Date.now(),this.removeOrphanedDocuments(e,o))).next(Te=>(G=Date.now(),se()<=Le.in.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${y-oe}ms\n\tDetermined least recently used ${u} in `+(b-y)+`ms\n\tRemoved ${d} targets in `+(B-b)+`ms\n\tRemoved ${Te} documents in `+(G-B)+`ms\nTotal Duration: ${G-oe}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:Te})))}}class qg{constructor(e,t){this.db=e,this.garbageCollector=new Kg(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,u)=>t(u))}addReference(e,t,o){return Ch(e,o)}removeReference(e,t,o){return Ch(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Ch(e,t)}On(e,t){return function(o,u){let d=!1;return Ih(o).zt(y=>md(o,y,u).next(b=>(b&&(d=!0),it.resolve(!b)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Mn(e,(y,b)=>{if(b<=t){const B=this.On(e,y).next(G=>{if(!G)return d++,o.getEntry(e,y).next(()=>(o.removeEntry(y,Xt.min()),$u(e).delete([0,Jt(y.path)])))});u.push(B)}}).next(()=>it.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Ch(e,t)}Mn(e,t){const o=$u(e);let u,d=ss.A;return o.Wt({index:"documentTargetsIndex"},([y,b],{path:B,sequenceNumber:G})=>{0===y?(d!==ss.A&&t(new Nt(Xs(u)),d),d=G,u=B):d=ss.A}).next(()=>{d!==ss.A&&t(new Nt(Xs(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ch(i,e){return $u(i).put((o=i.currentSequenceNumber,{targetId:0,path:Jt(e.path),sequenceNumber:o}));var o}class bh{constructor(){this.changes=new xa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?it.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hv{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return bc(e).put(o)}removeEntry(e,t,o){return bc(e).delete(function(u,d){const y=u.path.toArray();return[y.slice(0,y.length-2),y[y.length-2],Eh(d),y[y.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=Me.newInvalidDocument(t);return bc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Th(t))},(u,d)=>{o=this.$n(t,d)}).next(()=>o)}Bn(e,t){let o={size:0,document:Me.newInvalidDocument(t)};return bc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Th(t))},(u,d)=>{o={document:this.$n(t,d),size:gd(d)}}).next(()=>o)}getEntries(e,t){let o=Co();return this.Ln(e,t,(u,d)=>{const y=this.$n(u,d);o=o.insert(u,y)}).next(()=>o)}Un(e,t){let o=Co(),u=new Jn(Nt.comparator);return this.Ln(e,t,(d,y)=>{const b=this.$n(d,y);o=o.insert(d,b),u=u.insert(d,gd(y))}).next(()=>({documents:o,qn:u}))}Ln(e,t,o){if(t.isEmpty())return it.resolve();let u=new oi(Gy);t.forEach(B=>u=u.add(B));const d=IDBKeyRange.bound(Th(u.first()),Th(u.last())),y=u.getIterator();let b=y.getNext();return bc(e).Wt({index:"documentKeyIndex",range:d},(B,G,oe)=>{const Te=Nt.fromSegments([...G.prefixPath,G.collectionGroup,G.documentId]);for(;b&&Gy(b,Te)<0;)o(b,null),b=y.getNext();b&&b.isEqual(Te)&&(o(b,G),b=y.hasNext()?y.getNext():null),b?oe.Ut(Th(b)):oe.done()}).next(()=>{for(;b;)o(b,null),b=y.hasNext()?y.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),Eh(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bc(e).qt(IDBKeyRange.bound(u,d,!0)).next(y=>{let b=Co();for(const B of y){const G=this.$n(Nt.fromSegments(B.prefixPath.concat(B.collectionGroup,B.documentId)),B);b=b.insert(G.key,G)}return b})}getAllFromCollectionGroup(e,t,o,u){let d=Co();const y=Hy(t,o),b=Hy(t,Jr.max());return bc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(y,b,!0)},(B,G,oe)=>{const Te=this.$n(Nt.fromSegments(G.prefixPath.concat(G.collectionGroup,G.documentId)),G);d=d.insert(Te.key,Te),d.size===u&&oe.done()}).next(()=>d)}newChangeBuffer(e){return new Gv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $y(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Fn(e,t){return $y(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function Py(i,e){let t;if(e.document)t=gc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Nt.fromSegments(e.noDocument.path),u=Vu(e.noDocument.readTime);t=Me.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Et();{const o=Nt.fromSegments(e.unknownDocument.path),u=Vu(e.unknownDocument.version);t=Me.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new ji(o[0],o[1]);return Xt.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(Xt.min()))return o}return Me.newInvalidDocument(e)}}class Gv extends bh{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new xa(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new oi((d,y)=>Ln(d.canonicalString(),y.canonicalString()));return this.changes.forEach((d,y)=>{const b=this.Gn.get(d);if(t.push(this.Kn.removeEntry(e,d,b.readTime)),y.isValidDocument()){const B=jf(this.Kn.M,y);u=u.add(d.path.popLast()),o+=gd(B)-b.size,t.push(this.Kn.addEntry(e,d,B))}else if(o-=b.size,this.trackRemovals){const B=jf(this.Kn.M,y.convertToNoDocument(Xt.min()));t.push(this.Kn.addEntry(e,d,B))}}),u.forEach(d=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Kn.updateMetadata(e,o)),it.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:u})=>(u.forEach((d,y)=>{this.Gn.set(d,{size:y,readTime:o.get(d).readTime})}),o))}}function $y(i){return ys(i,"remoteDocumentGlobal")}function bc(i){return ys(i,"remoteDocumentsV14")}function Th(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Hy(i,e){const t=e.documentKey.path.toArray();return[i,Eh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gy(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=Ln(t[d],o[d]),u)return u;return u=Ln(t.length,o.length),u||(u=Ln(t[t.length-2],o[o.length-2]),u||Ln(t[t.length-1],o[o.length-1]))}class Wv{constructor(e){this.M=e}kt(e,t,o,u){const d=new cd("createOrUpgrade",t);var b;o<1&&u>=1&&(e.createObjectStore("owner"),(b=e).createObjectStore("mutationQueues",{keyPath:"userId"}),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ol,{unique:!0}),b.createObjectStore("documentMutations"),Wy(e),function(b){b.createObjectStore("remoteDocuments")}(e));let y=it.resolve();return o<3&&u>=3&&(0!==o&&(function(b){b.deleteObjectStore("targetDocuments"),b.deleteObjectStore("targets"),b.deleteObjectStore("targetGlobal")}(e),Wy(e)),y=y.next(()=>function(b){const B=b.store("targetGlobal"),G={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xt.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",G)}(d))),o<4&&u>=4&&(0!==o&&(y=y.next(()=>function(b,B){return B.store("mutations").qt().next(G=>{b.deleteObjectStore("mutations"),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ol,{unique:!0});const oe=B.store("mutations"),Te=G.map(Je=>oe.put(Je));return it.waitFor(Te)})}(e,d))),y=y.next(()=>{!function(b){b.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(y=y.next(()=>this.Qn(d))),o<6&&u>=6&&(y=y.next(()=>(function(b){b.createObjectStore("remoteDocumentGlobal")}(e),this.jn(d)))),o<7&&u>=7&&(y=y.next(()=>this.Wn(d))),o<8&&u>=8&&(y=y.next(()=>this.zn(e,d))),o<9&&u>=9&&(y=y.next(()=>{!function(b){b.objectStoreNames.contains("remoteDocumentChanges")&&b.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(y=y.next(()=>this.Hn(d))),o<11&&u>=11&&(y=y.next(()=>{(function(b){b.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(b){b.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(y=y.next(()=>{!function(b){const B=b.createObjectStore("documentOverlays",{keyPath:Pg});B.createIndex("collectionPathOverlayIndex",Uf,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",kg,{unique:!1})}(e)})),o<13&&u>=13&&(y=y.next(()=>function(b){const B=b.createObjectStore("remoteDocumentsV14",{keyPath:Oa});B.createIndex("documentKeyIndex",yc),B.createIndex("collectionGroupIndex",ad)}(e)).next(()=>this.Jn(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(y=y.next(()=>{!function(b){b.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),b.createObjectStore("indexState",{keyPath:Vf}).createIndex("sequenceNumberIndex",My,{unique:!1}),b.createObjectStore("indexEntries",{keyPath:xy}).createIndex("documentKeyIndex",Ry,{unique:!1})}(e)})),y}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=gd(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>it.forEach(u,d=>{const y=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",y).next(b=>it.forEach(b,B=>{Ft(B.userId===d.userId);const G=Uu(this.M,B);return Uy(e,d.userId,G).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Wt((y,b)=>{const B=new mr(y),G=[0,Jt(B)];d.push(t.get(G).next(oe=>oe?it.resolve():t.put({targetId:0,path:Jt(B),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>it.waitFor(d))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:ld});const o=t.store("collectionParents"),u=new Ic,d=y=>{if(u.add(y)){const b=y.lastSegment(),B=y.popLast();return o.put({collectionId:b,parent:Jt(B)})}};return t.store("remoteDocuments").Wt({jt:!0},(y,b)=>{const B=new mr(y);return d(B.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([y,b,B],G)=>{const oe=Xs(b);return d(oe.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,u)=>{const d=Ec(u),y=ky(this.M,d);return t.put(y)})}Jn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((d,y)=>{const b=t.store("remoteDocumentsV14"),B=(G=y,G.document?new Nt(mr.fromString(G.document.name).popFirst(5)):G.noDocument?Nt.fromSegments(G.noDocument.path):G.unknownDocument?Nt.fromSegments(G.unknownDocument.path):Et()).path.toArray();var G;const oe={prefixPath:B.slice(0,B.length-2),collectionGroup:B[B.length-2],documentId:B[B.length-1],readTime:y.readTime||[0,0],unknownDocument:y.unknownDocument,noDocument:y.noDocument,document:y.document,hasCommittedMutations:!!y.hasCommittedMutations};u.push(b.put(oe))}).next(()=>it.waitFor(u))}}function Wy(i){i.createObjectStore("targetDocuments",{keyPath:_c}).createIndex("documentTargetsIndex",Lf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ud,{unique:!0}),i.createObjectStore("targetGlobal")}const Zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ka{constructor(e,t,o,u,d,y,b,B,G,oe,Te=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=d,this.window=y,this.document=b,this.Xn=G,this.Zn=oe,this.ts=Te,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=Je=>Promise.resolve(),!ka.vt())throw new mt(et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qg(this,u),this.hs=t+"main",this.M=new vc(B),this.ls=new da(this.hs,this.ts,new Wv(this.M)),this.fs=new jv(this.referenceDelegate,this.M),this.ds=new Hv(this.M),this._s=new Ny,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===oe&&wt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new mt(et.FAILED_PRECONDITION,Zg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ss(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,F.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,F.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,F.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ah(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Fu(e))return Ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ll(e).get("owner").next(t=>it.resolve(this.bs(t)))}Vs(e){return Ah(e).delete(this.clientId)}vs(){var e=this;return(0,F.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=ys(o,"clientMetadata");return u.qt().next(d=>{const y=e.Ds(d,18e5),b=d.filter(B=>-1===y.indexOf(B));return it.forEach(b,B=>u.delete(B.clientId)).next(()=>b)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?it.resolve(!0):Ll(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new mt(et.FAILED_PRECONDITION,Zg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ah(e).qt().next(o=>void 0===this.Ds(o,5e3).find(u=>{if(this.clientId!==u.clientId){const y=!this.inForeground&&u.inForeground,b=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||y&&b)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ee("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,F.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new hd(t,ss.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Ah(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Wg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Hg(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Gf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){Ee("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=14===(y=this.ts)?Fg:13===y?Ng:12===y?Oy:11===y?ph:void Et();var y;let b;return this.ls.runTransaction(e,u,d,B=>(b=new hd(B,this.es?this.es.next():ss.A),"readwrite-primary"===t?this.Es(b).next(G=>!!G||this.As(b)).next(G=>{if(!G)throw wt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new mt(et.FAILED_PRECONDITION,Bf);return o(b)}).next(G=>this.Ps(b).next(()=>G)):this.$s(b).next(()=>o(b)))).then(B=>(b.raiseOnCommittedEvent(),B))}$s(e){return Ll(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new mt(et.FAILED_PRECONDITION,Zg)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ll(e).put("owner",t)}static vt(){return da.vt()}Rs(e){const t=Ll(e);return t.get("owner").next(o=>this.bs(o)?(Ee("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):it.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(wt(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,je.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ee("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return wt("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){wt("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ll(i){return ys(i,"owner")}function Ah(i){return ys(i,"clientMetadata")}function Sh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Kf{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(u=>{for(const d of o)d.applyToLocalView(u);return u})}qs(e,t){e.forEach((o,u)=>{for(const d of t)d.applyToLocalView(u)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return Nt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.js(e,t.path):gl(t)?this.Ws(e,t,o):this.zs(e,t,o);var u}js(e,t){return this.Ls(e,new Nt(t)).next(o=>{let u=rd();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}Ws(e,t,o){const u=t.collectionGroup;let d=rd();return this.indexManager.getCollectionParents(e,u).next(y=>it.forEach(y,b=>{const B=(G=t,oe=b.child(u),new Io(oe,null,G.explicitOrderBy.slice(),G.filters.slice(),G.limit,G.limitType,G.startAt,G.endAt));var G,oe;return this.zs(e,B,o).next(G=>{G.forEach((oe,Te)=>{d=d.insert(oe,Te)})})}).next(()=>d))}zs(e,t,o){let u;return this.ds.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(d=>{for(const y of d)for(const b of y.mutations){const B=b.key;let G=u.get(B);null==G&&(G=Me.newInvalidDocument(B),u=u.insert(B,G)),ac(b,G,y.localWriteTime),G.isFoundDocument()||(u=u.remove(B))}}).next(()=>(u.forEach((d,y)=>{Jc(t,y)||(u=u.remove(d))}),u))}}class Mh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=u}static Ys(e,t){let o=Un(),u=Un();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Mh(e,t.fromCache,o,u)}}class xh{Xs(e){this.Zs=e}Qs(e,t,o,u){return 0===(d=t).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||o.isEqual(Xt.min())?this.ti(e,t):this.Zs.Ks(e,u).next(d=>{const y=this.ei(t,d);return(ic(t)||Cu(t))&&this.ni(t.limitType,y,u,o)?this.ti(e,t):(se()<=Le.in.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xc(t)),this.Zs.Qs(e,t,ur(o,-1)).next(b=>(y.forEach(B=>{b=b.insert(B.key,B)}),b)))});var d}ei(e,t){let o=new oi(Jd(e));return t.forEach((u,d)=>{Jc(e,d)&&(o=o.add(d))}),o}ni(e,t,o,u){if(o.size!==t.size)return!0;const d="F"===e?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}ti(e,t){return se()<=Le.in.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Xc(t)),this.Zs.Qs(e,t,Jr.min())}}class zy{constructor(e,t,o,u){this.persistence=e,this.si=t,this.M=u,this.ii=new Jn(Ln),this.ri=new xa(d=>Ds(d),Ys),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(o)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Kf(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function ou(i,e,t,o){return new zy(i,e,t,o)}function qf(i,e){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,F.Z)(function*(i,e){const t=St(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.Bs.getAllMutationBatches(o).next(d=>(u=d,t.ai(e),t.Bs.getAllMutationBatches(o))).next(d=>{const y=[],b=[];let B=Un();for(const G of u){y.push(G.batchId);for(const oe of G.mutations)B=B.add(oe.key)}for(const G of d){b.push(G.batchId);for(const oe of G.mutations)B=B.add(oe.key)}return t.ci.Ks(o,B).next(G=>({hi:G,removedBatchIds:y,addedBatchIds:b}))})})}),Zf.apply(this,arguments)}function Yf(i,e){const t=St(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.ui.newChangeBuffer({trackRemovals:!0});return function(y,b,B,G){const oe=B.batch,Te=oe.keys();let Je=it.resolve();return Te.forEach(ft=>{Je=Je.next(()=>G.getEntry(b,ft)).next(gt=>{const sn=B.docVersions.get(ft);Ft(null!==sn),gt.version.compareTo(sn)<0&&(oe.applyToRemoteDocument(gt,B),gt.isValidDocument()&&(gt.setReadTime(B.commitVersion),G.addEntry(gt)))})}),Je.next(()=>y.Bs.removeMutationBatch(b,oe))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.ci.Ks(o,u))})}function Yg(i){const e=St(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Qg(i,e){const t=St(i),o=e.snapshotVersion;let u=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const y=t.ui.newChangeBuffer({trackRemovals:!0});u=t.ii;const b=[];e.targetChanges.forEach((G,oe)=>{const Te=u.get(oe);if(!Te)return;b.push(t.fs.removeMatchingKeys(d,G.removedDocuments,oe).next(()=>t.fs.addMatchingKeys(d,G.addedDocuments,oe)));let Je=Te.withSequenceNumber(d.currentSequenceNumber);var ft,gt,sn;e.targetMismatches.has(oe)?Je=Je.withResumeToken(Yn.EMPTY_BYTE_STRING,Xt.min()).withLastLimboFreeSnapshotVersion(Xt.min()):G.resumeToken.approximateByteSize()>0&&(Je=Je.withResumeToken(G.resumeToken,o)),u=u.insert(oe,Je),gt=Je,sn=G,(0===(ft=Te).resumeToken.approximateByteSize()||gt.snapshotVersion.toMicroseconds()-ft.snapshotVersion.toMicroseconds()>=3e8||sn.addedDocuments.size+sn.modifiedDocuments.size+sn.removedDocuments.size>0)&&b.push(t.fs.updateTargetData(d,Je))});let B=Co();if(e.documentUpdates.forEach(G=>{e.resolvedLimboDocuments.has(G)&&b.push(t.persistence.referenceDelegate.updateLimboDocument(d,G))}),b.push(Xg(d,y,e.documentUpdates).next(G=>{B=G})),!o.isEqual(Xt.min())){const G=t.fs.getLastRemoteSnapshotVersion(d).next(oe=>t.fs.setTargetsMetadata(d,d.currentSequenceNumber,o));b.push(G)}return it.waitFor(b).next(()=>y.apply(d)).next(()=>t.ci.Gs(d,B)).next(()=>B)}).then(d=>(t.ii=u,d))}function Xg(i,e,t){let o=Un();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let d=Co();return t.forEach((y,b)=>{const B=u.get(y);b.isNoDocument()&&b.version.isEqual(Xt.min())?(e.removeEntry(y,b.readTime),d=d.insert(y,b)):!B.isValidDocument()||b.version.compareTo(B.version)>0||0===b.version.compareTo(B.version)&&B.hasPendingWrites?(e.addEntry(b),d=d.insert(y,b)):Ee("LocalStore","Ignoring outdated watch update for ",y,". Current version:",B.version," Watch version:",b.version)}),d})}function Ky(i,e){const t=St(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function Na(i,e){const t=St(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.fs.getTargetData(o,e).next(d=>d?(u=d,it.resolve(u)):t.fs.allocateTargetId(o).next(y=>(u=new Pa(e,y,0,o.currentSequenceNumber),t.fs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.ii.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.ii=t.ii.insert(o.targetId,o),t.ri.set(e,o.targetId)),o})}function fa(i,e,t){return yd.apply(this,arguments)}function yd(){return yd=(0,F.Z)(function*(i,e,t){const o=St(i),u=o.ii.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,y=>o.persistence.referenceDelegate.removeTarget(y,u)))}catch(y){if(!Fu(y))throw y;Ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${y}`)}o.ii=o.ii.remove(e),o.ri.delete(u.target)}),yd.apply(this,arguments)}function au(i,e,t){const o=St(i);let u=Xt.min(),d=Un();return o.persistence.runTransaction("Execute query","readonly",y=>function(b,B,G){const oe=St(b),Te=oe.ri.get(G);return void 0!==Te?it.resolve(oe.ii.get(Te)):oe.fs.getTargetData(B,G)}(o,y,fo(e)).next(b=>{if(b)return u=b.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(y,b.targetId).next(B=>{d=B})}).next(()=>o.si.Qs(y,e,t?u:Xt.min(),t?d:Un())).next(b=>(Jg(o,oc(e),b),{documents:b,li:d})))}function Tc(i,e){const t=St(i),o=St(t.fs),u=t.ii.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.Et(d,e).next(y=>y?y.target:null))}function Vl(i,e){const t=St(i),o=t.oi.get(e)||Xt.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.ui.getAllFromCollectionGroup(u,e,ur(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Jg(t,e,u),u))}function Jg(i,e,t){let o=Xt.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.oi.set(e,o)}function Rh(){return Rh=(0,F.Z)(function*(i,e,t,o){const u=St(i);let d=Un(),y=Co();for(const G of t){const oe=e.fi(G.metadata.name);G.document&&(d=d.add(oe));const Te=e.di(G);Te.setReadTime(e._i(G.metadata.readTime)),y=y.insert(oe,Te)}const b=u.ui.newChangeBuffer({trackRemovals:!0}),B=yield Na(u,(G=o,fo(jo(mr.fromString(`__bundle__/docs/${G}`)))));var G;return u.persistence.runTransaction("Apply bundle documents","readwrite",G=>Xg(G,b,y).next(oe=>(b.apply(G),oe)).next(oe=>u.fs.removeMatchingKeysForTargetId(G,B.targetId).next(()=>u.fs.addMatchingKeys(G,d,B.targetId)).next(()=>u.ci.Gs(G,oe)).next(()=>oe)))}),Rh.apply(this,arguments)}function Qf(i,e){return _d.apply(this,arguments)}function _d(){return _d=(0,F.Z)(function*(i,e,t=Un()){const o=yield Na(i,fo(wh(e.bundledQuery))),u=St(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const y=Cs(e.readTime);if(o.snapshotVersion.compareTo(y)>=0)return u._s.saveNamedQuery(d,e);const b=o.withResumeToken(Yn.EMPTY_BYTE_STRING,y);return u.ii=u.ii.insert(b.targetId,b),u.fs.updateTargetData(d,b).next(()=>u.fs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.fs.addMatchingKeys(d,t,o.targetId)).next(()=>u._s.saveNamedQuery(d,e))})}),_d.apply(this,arguments)}class tm{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return it.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var o;return this.wi.set(t.id,{id:(o=t).id,version:o.version,createTime:Cs(o.createTime)}),it.resolve()}getNamedQuery(e,t){return it.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(o=t).name,query:wh(o.bundledQuery),readTime:Cs(o.readTime)}),it.resolve();var o}}class Oh{constructor(){this.overlays=new Jn(Nt.comparator),this.gi=new Map}getOverlay(e,t){return it.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.Xt(e,t,d)}),it.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.gi.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.gi.delete(o)),it.resolve()}getOverlaysForCollection(e,t,o){const u=hc(),d=t.length+1,y=new Nt(t.child("")),b=this.overlays.getIteratorFrom(y);for(;b.hasNext();){const B=b.getNext().value,G=B.getKey();if(!t.isPrefixOf(G.path))break;G.path.length===d&&B.largestBatchId>o&&u.set(B.getKey(),B)}return it.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Jn((G,oe)=>G-oe);const y=this.overlays.getIterator();for(;y.hasNext();){const G=y.getNext().value;if(G.getKey().getCollectionGroup()===t&&G.largestBatchId>o){let oe=d.get(G.largestBatchId);null===oe&&(oe=hc(),d=d.insert(G.largestBatchId,oe)),oe.set(G.getKey(),G)}}const b=hc(),B=d.getIterator();for(;B.hasNext()&&(B.getNext().value.forEach((G,oe)=>b.set(G,oe)),!(b.size()>=u)););return it.resolve(b)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const y=this.gi.get(u.largestBatchId).delete(o.key);this.gi.set(u.largestBatchId,y)}this.overlays=this.overlays.insert(o.key,new vh(t,o));let d=this.gi.get(t);void 0===d&&(d=Un(),this.gi.set(t,d)),this.gi.set(t,d.add(o.key))}}class Xf{constructor(){this.yi=new oi(Ms.pi),this.Ii=new oi(Ms.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const o=new Ms(e,t);this.yi=this.yi.add(o),this.Ii=this.Ii.add(o)}Ei(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ai(new Ms(e,t))}Ri(e,t){e.forEach(o=>this.removeReference(o,t))}Pi(e){const t=new Nt(new mr([])),o=new Ms(t,e),u=new Ms(t,e+1),d=[];return this.Ii.forEachInRange([o,u],y=>{this.Ai(y),d.push(y.key)}),d}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Nt(new mr([])),o=new Ms(t,e),u=new Ms(t,e+1);let d=Un();return this.Ii.forEachInRange([o,u],y=>{d=d.add(y.key)}),d}containsKey(e){const t=new Ms(e,0),o=this.yi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Ms{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Nt.comparator(e.key,t.key)||Ln(e.vi,t.vi)}static Ti(e,t){return Ln(e.vi,t.vi)||Nt.comparator(e.key,t.key)}}class zv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new oi(Ms.pi)}checkEmpty(e){return it.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,u){const d=this.Si;this.Si++;const y=new _h(d,t,o,u);this.Bs.push(y);for(const b of u)this.Di=this.Di.add(new Ms(b.key,d)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return it.resolve(y)}lookupMutationBatch(e,t){return it.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.xi(t+1),d=u<0?0:u;return it.resolve(this.Bs.length>d?this.Bs[d]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return it.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Ms(t,0),u=new Ms(t,Number.POSITIVE_INFINITY),d=[];return this.Di.forEachInRange([o,u],y=>{const b=this.Ci(y.vi);d.push(b)}),it.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new oi(Ln);return t.forEach(u=>{const d=new Ms(u,0),y=new Ms(u,Number.POSITIVE_INFINITY);this.Di.forEachInRange([d,y],b=>{o=o.add(b.vi)})}),it.resolve(this.Ni(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;Nt.isDocumentKey(d)||(d=d.child(""));const y=new Ms(new Nt(d),0);let b=new oi(Ln);return this.Di.forEachWhile(B=>{const G=B.key.path;return!!o.isPrefixOf(G)&&(G.length===u&&(b=b.add(B.vi)),!0)},y),it.resolve(this.Ni(b))}Ni(e){const t=[];return e.forEach(o=>{const u=this.Ci(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){Ft(0===this.ki(t.batchId,"removed")),this.Bs.shift();let o=this.Di;return it.forEach(t.mutations,u=>{const d=new Ms(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Di=o})}_n(e){}containsKey(e,t){const o=new Ms(t,0),u=this.Di.firstAfterOrEqual(o);return it.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return it.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class nm{constructor(e){this.Mi=e,this.docs=new Jn(Nt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,y=this.Mi(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:y}),this.size+=y-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return it.resolve(o?o.document.mutableCopy():Me.newInvalidDocument(t))}getEntries(e,t){let o=Co();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():Me.newInvalidDocument(u))}),it.resolve(o)}getAllFromCollection(e,t,o){let u=Co();const d=new Nt(t.child("")),y=this.docs.getIteratorFrom(d);for(;y.hasNext();){const{key:b,value:{document:B}}=y.getNext();if(!t.isPrefixOf(b.path))break;b.path.length>t.length+1||$i(Vn(B),o)<=0||(u=u.insert(B.key,B.mutableCopy()))}return it.resolve(u)}getAllFromCollectionGroup(e,t,o,u){Et()}Oi(e,t){return it.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new rm(this)}getSize(e){return it.resolve(this.size)}}class rm extends bh{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Kn.addEntry(e,u)):this.Kn.removeEntry(o)}),it.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class qy{constructor(e){this.persistence=e,this.Fi=new xa(t=>Ds(t),Ys),this.lastRemoteSnapshotVersion=Xt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Xf,this.targetCount=0,this.Li=su.gn()}forEachTarget(e,t){return this.Fi.forEach((o,u)=>t(u)),it.resolve()}getLastRemoteSnapshotVersion(e){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return it.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.$i&&(this.$i=t),it.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new su(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,it.resolve()}updateTargetData(e,t){return this.Tn(t),it.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,it.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Fi.forEach((y,b)=>{b.sequenceNumber<=t&&null===o.get(b.targetId)&&(this.Fi.delete(y),d.push(this.removeMatchingKeysForTargetId(e,b.targetId)),u++)}),it.waitFor(d).next(()=>u)}getTargetCount(e){return it.resolve(this.targetCount)}getTargetData(e,t){const o=this.Fi.get(t)||null;return it.resolve(o)}addMatchingKeys(e,t,o){return this.Bi.Ei(t,o),it.resolve()}removeMatchingKeys(e,t,o){this.Bi.Ri(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(y=>{d.push(u.markPotentiallyOrphaned(e,y))}),it.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),it.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Bi.Vi(t);return it.resolve(o)}containsKey(e,t){return it.resolve(this.Bi.containsKey(t))}}class im{constructor(e,t){this.Ui={},this.overlays={},this.es=new ss(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new qy(this),this.indexManager=new $g,this.ds=new nm(o=>this.referenceDelegate.qi(o)),this.M=new vc(t),this._s=new tm(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Oh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ui[e.toKey()];return o||(o=new zv(t,this.referenceDelegate),this.Ui[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){Ee("MemoryPersistence","Starting transaction:",e);const u=new Zy(this.es.next());return this.referenceDelegate.Ki(),o(u).next(d=>this.referenceDelegate.Gi(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Qi(e,t){return it.or(Object.values(this.Ui).map(o=>()=>o.containsKey(e,t)))}}class Zy extends Nu{constructor(e){super(),this.currentSequenceNumber=e}}class Jf{constructor(e){this.persistence=e,this.ji=new Xf,this.Wi=null}static zi(e){return new Jf(e)}get Hi(){if(this.Wi)return this.Wi;throw Et()}addReference(e,t,o){return this.ji.addReference(o,t),this.Hi.delete(o.toString()),it.resolve()}removeReference(e,t,o){return this.ji.removeReference(o,t),this.Hi.add(o.toString()),it.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),it.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(u=>this.Hi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Hi.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.Hi,o=>{const u=Nt.fromPath(o);return this.Ji(e,u).next(d=>{d||t.removeEntry(u,Xt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(o=>{o?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return it.or([()=>it.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function bo(i,e){return`firestore_clients_${i}_${e}`}function sm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function ep(i,e){return`firestore_targets_${i}_${e}`}class tp{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Yi(e,t,o){const u=JSON.parse(o);let d,y="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return y&&u.error&&(y="string"==typeof u.error.message&&"string"==typeof u.error.code,y&&(d=new mt(u.error.code,u.error.message))),y?new tp(e,t,u.state,d):(wt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ph{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Yi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new mt(o.error.code,o.error.message))),d?new Ph(e,o.state,u):(wt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=nu();for(let y=0;u&&y<o.activeTargetIds.length;++y)u=wu(o.activeTargetIds[y]),d=d.add(o.activeTargetIds[y]);return u?new vd(e,d):(wt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class om{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new om(t.clientId,t.onlineState):(wt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class np{constructor(){this.activeTargetIds=nu()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ed{constructor(e,t,o,u,d){this.window=e,this.Yn=t,this.persistenceKey=o,this.er=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Jn(Ln),this.started=!1,this.rr=[];const y=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ur=bo(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new np),this.cr=new RegExp(`^firestore_clients_${y}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${y}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${y}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(b){return`firestore_bundle_loaded_v2_${b}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,F.Z)(function*(){const t=yield e.syncEngine.Fs();for(const u of t){if(u===e.er)continue;const d=e.getItem(bo(e.persistenceKey,u));if(d){const y=vd.Yi(u,d);y&&(e.ir=e.ir.insert(y.clientId,y))}}e.wr();const o=e.storage.getItem(e.dr);if(o){const u=e.mr(o);u&&e.gr(u)}for(const u of e.rr)e.sr(u);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,o){this.pr(e,t,o),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(ep(this.persistenceKey,e));if(o){const u=Ph.Yi(e,o);u&&(t=u.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ep(this.persistenceKey,e))}updateQueryState(e,t,o){this.Er(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Ir(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ee("SharedClientState","READ",e,t),t}setItem(e,t){Ee("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Ee("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ur)return void wt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,F.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const u=t.Pr(o.key);return t.br(u,null)}{const u=t.Vr(o.key,o.newValue);if(u)return t.br(u.clientId,u)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const u=t.vr(o.key,o.newValue);if(u)return t.Sr(u)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(o.key===t.dr){if(null!==o.newValue){const u=t.mr(o.newValue);if(u)return t.gr(u)}}else if(o.key===t.ar){const u=function(d){let y=ss.A;if(null!=d)try{const b=JSON.parse(d);Ft("number"==typeof b),y=b}catch(b){wt("SharedClientState","Failed to read sequence number from WebStorage",b)}return y}(o.newValue);u!==ss.A&&t.sequenceNumberHandler(u)}else if(o.key===t._r){const u=t.Nr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.kr(d)))}}else t.rr.push(o)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,o){const u=new tp(this.currentUser,e,t,o),d=sm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Xi())}Ir(e){const t=sm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,o){const u=ep(this.persistenceKey,e),d=new Ph(e,t,o);this.setItem(u,d.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.Pr(e);return vd.Yi(o,t)}vr(e,t){const o=this.hr.exec(e),u=Number(o[1]);return tp.Yi(new x(void 0!==o[2]?o[2]:null),u,t)}Dr(e,t){const o=this.lr.exec(e),u=Number(o[1]);return Ph.Yi(u,t)}mr(e){return om.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,F.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const o=t?this.ir.insert(e,t):this.ir.remove(e),u=this.yr(this.ir),d=this.yr(o),y=[],b=[];return d.forEach(B=>{u.has(B)||y.push(B)}),u.forEach(B=>{d.has(B)||b.push(B)}),this.syncEngine.Fr(y,b).then(()=>{this.ir=o})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=nu();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class rp{constructor(){this.$r=new np,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,o){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new np,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Yy{Lr(e){}shutdown(){}}class am{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Qy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class um{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Xy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,o,u,d){const y=this.uo(e,t);Ee("RestConnection","Sending: ",y,o);const b={};return this.ao(b,u,d),this.co(e,y,b,o).then(B=>(Ee("RestConnection","Received: ",B),B),B=>{throw xn("RestConnection",`${e} failed with error: `,B,"url: ",y,"request:",o),B})}ho(e,t,o,u,d){return this.oo(e,t,o,u,d)}ao(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+L,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}uo(e,t){return`${this.io}/v1/${t}:${Qy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,u){return new Promise((d,y)=>{const b=new w;b.listenOnce(qr.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case Ca.NO_ERROR:const G=b.getResponseJson();Ee("Connection","XHR received:",JSON.stringify(G)),d(G);break;case Ca.TIMEOUT:Ee("Connection",'RPC "'+e+'" timed out'),y(new mt(et.DEADLINE_EXCEEDED,"Request time out"));break;case Ca.HTTP_ERROR:const oe=b.getStatus();if(Ee("Connection",'RPC "'+e+'" failed with status:',oe,"response text:",b.getResponseText()),oe>0){const Te=b.getResponseJson().error;if(Te&&Te.status&&Te.message){const Je=function(ft){const gt=ft.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(gt)>=0?gt:et.UNKNOWN}(Te.status);y(new mt(Je,Te.message))}else y(new mt(et.UNKNOWN,"Server responded with status "+b.getStatus()))}else y(new mt(et.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{Ee("Connection",'RPC "'+e+'" completed.')}});const B=JSON.stringify(u);b.send(t,"POST",B,o,15)})}lo(e,t,o){const u=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=oa(),y=_o(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(b.xmlHttpFactory=new Ga({})),this.ao(b.initMessageHeaders,t,o),(0,je.uI)()||(0,je.b$)()||(0,je.d)()||(0,je.w1)()||(0,je.Mn)()||(0,je.ru)()||(b.httpHeadersOverwriteParam="$httpHeaders");const B=u.join("");Ee("Connection","Creating WebChannel: "+B,b);const G=d.createWebChannel(B,b);let oe=!1,Te=!1;const Je=new um({Wr:gt=>{Te?Ee("Connection","Not sending because WebChannel is closed:",gt):(oe||(Ee("Connection","Opening WebChannel transport."),G.open(),oe=!0),Ee("Connection","WebChannel sending:",gt),G.send(gt))},zr:()=>G.close()}),ft=(gt,sn,Hn)=>{gt.listen(sn,Si=>{try{Hn(Si)}catch(Ni){setTimeout(()=>{throw Ni},0)}})};return ft(G,C.EventType.OPEN,()=>{Te||Ee("Connection","WebChannel transport opened.")}),ft(G,C.EventType.CLOSE,()=>{Te||(Te=!0,Ee("Connection","WebChannel transport closed"),Je.no())}),ft(G,C.EventType.ERROR,gt=>{Te||(Te=!0,xn("Connection","WebChannel transport errored:",gt),Je.no(new mt(et.UNAVAILABLE,"The operation could not be completed")))}),ft(G,C.EventType.MESSAGE,gt=>{var sn;if(!Te){const Hn=gt.data[0];Ft(!!Hn);const Si=Hn,Ni=Si.error||(null===(sn=Si[0])||void 0===sn?void 0:sn.error);if(Ni){Ee("Connection","WebChannel received error:",Ni);const hi=Ni.status;let Ts=function(Xi){const ro=Yi[Xi];if(void 0!==ro)return cc(ro)}(hi),Fi=Ni.message;void 0===Ts&&(Ts=et.INTERNAL,Fi="Unknown error status: "+hi+" with message "+Ni.message),Te=!0,Je.no(new mt(Ts,Fi)),G.close()}else Ee("Connection","WebChannel received:",Hn),Je.so(Hn)}}),ft(y,_u.STAT_EVENT,gt=>{gt.stat===Bs.PROXY?Ee("Connection","Detected buffering proxy"):gt.stat===Bs.NOPROXY&&Ee("Connection","Detected no buffering proxy")}),setTimeout(()=>{Je.eo()},0),Je}}function ip(){return"undefined"!=typeof window?window:null}function kh(){return"undefined"!=typeof document?document:null}function wd(i){return new uh(i,!0)}class Nh{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Yn=e,this.timerId=t,this.fo=o,this._o=u,this.wo=d,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),o=Math.max(0,Date.now()-this.po),u=Math.max(0,t-o);u>0&&Ee("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,u,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class sp{constructor(e,t,o,u,d,y,b,B){this.Yn=e,this.Ro=o,this.Po=u,this.bo=d,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=b,this.listener=B,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Nh(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,F.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,F.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var o=this;return(0,F.Z)(function*(){o.$o(),o.Bo(),o.Do.cancel(),o.Vo++,4!==e?o.Do.reset():t&&t.code===et.RESOURCE_EXHAUSTED?(wt(t.toString()),wt("Using maximum backoff delay to prevent overloading the backend."),o.Do.Io()):t&&t.code===et.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Lo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Vo===t&&this.qo(o,u)},o=>{e(()=>{const u=new mt(et.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ko(u)})})}qo(e,t){const o=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{o(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(u=>{o(()=>this.Ko(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}No(){var e=this;this.state=5,this.Do.To((0,F.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jy extends sp{constructor(e,t,o,u,d,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,y),this.M=d}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function kf(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:Et(),u=e.targetChange.targetIds||[],d=function(B,G){return B.N?(Ft(void 0===G||"string"==typeof G),Yn.fromBase64String(G||"")):(Ft(void 0===G||G instanceof Uint8Array),Yn.fromUint8Array(G||new Uint8Array))}(i,e.targetChange.resumeToken),y=e.targetChange.cause,b=y&&function(B){const G=void 0===B.code?et.UNKNOWN:cc(B.code);return new mt(G,B.message||"")}(y);t=new Qs(o,u,d,b||null)}else if("documentChange"in e){const o=e.documentChange,u=di(i,o.document.name),d=Cs(o.document.updateTime),y=new W({mapValue:{fields:o.document.fields}}),b=Me.newFoundDocument(u,d,y);t=new Zo(o.targetIds||[],o.removedTargetIds||[],b.key,b)}else if("documentDelete"in e){const o=e.documentDelete,u=di(i,o.document),d=o.readTime?Cs(o.readTime):Xt.min(),y=Me.newNoDocument(u,d);t=new Zo([],o.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){const o=e.documentRemove,u=di(i,o.document);t=new Zo([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Et();{const o=e.filter,d=new td(o.count||0);t=new fc(o.targetId,d)}}var B;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return Xt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Xt.min():d.readTime?Cs(d.readTime):Xt.min()}(e);return this.listener.Qo(t,o)}jo(e){const t={};t.database=Rl(this.M),t.addTarget=function(u,d){let y;const b=d.target;return y=wo(b)?{documents:hh(u,b)}:{query:fh(u,b)},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?y.resumeToken=$o(u,d.resumeToken):d.snapshotVersion.compareTo(Xt.min())>0&&(y.readTime=Sl(u,d.snapshotVersion.toTimestamp())),y}(this.M,e);const o=function c(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=Rl(this.M),t.removeTarget=e,this.Fo(t)}}class Fa extends sp{constructor(e,t,o,u,d,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,y),this.M=d,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Nf(i,e){return i&&i.length>0?(Ft(void 0!==e),i.map(t=>function(o,u){let d=Cs(o.updateTime?o.updateTime:u);return d.isEqual(Xt.min())&&(d=Cs(u)),new _l(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Cs(e.commitTime);return this.listener.Yo(o,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Rl(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>iu(this.M,o))};this.Fo(t)}}class op extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=u,this.tu=!1}eu(){if(this.tu)throw new mt(et.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.oo(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new mt(et.UNKNOWN,u.toString())})}ho(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ho(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new mt(et.UNKNOWN,u.toString())})}terminate(){this.tu=!0}}class e_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(wt(t),this.iu=!1):Ee("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class t_{constructor(e,t,o,u,d){var y=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=d,this._u.Lr(b=>{o.enqueueAndForget((0,F.Z)(function*(){var B;Hu(y)&&(Ee("RemoteStore","Restarting streams for network reachability change."),yield(B=(0,F.Z)(function*(G){const oe=St(G);oe.fu.add(4),yield Ac(oe),oe.wu.set("Unknown"),oe.fu.delete(4),yield Fh(oe)}),function(G){return B.apply(this,arguments)})(y))}))}),this.wu=new e_(o,u)}}function Fh(i){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,F.Z)(function*(i){if(Hu(i))for(const e of i.du)yield e(!0)}),Lh.apply(this,arguments)}function Ac(i){return ap.apply(this,arguments)}function ap(){return ap=(0,F.Z)(function*(i){for(const e of i.du)yield e(!1)}),ap.apply(this,arguments)}function Vh(i,e){const t=St(i);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Id(t)?Sc(t):Gu(t).xo()&&up(t,e))}function Ul(i,e){const t=St(i),o=Gu(t);t.lu.delete(e),o.xo()&&lm(t,e),0===t.lu.size&&(o.xo()?o.Mo():Hu(t)&&t.wu.set("Unknown"))}function up(i,e){i.mu.Z(e.targetId),Gu(i).jo(e)}function lm(i,e){i.mu.Z(e),Gu(i).Wo(e)}function Sc(i){i.mu=new id({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.lu.get(e)||null}),Gu(i).start(),i.wu.ru()}function Id(i){return Hu(i)&&!Gu(i).Co()&&i.lu.size>0}function Hu(i){return 0===St(i).fu.size}function Uh(i){i.mu=void 0}function lp(i){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,F.Z)(function*(i){i.lu.forEach((e,t)=>{up(i,e)})}),Bh.apply(this,arguments)}function n_(i,e){return cp.apply(this,arguments)}function cp(){return cp=(0,F.Z)(function*(i,e){Uh(i),Id(i)?(i.wu.au(e),Sc(i)):i.wu.set("Unknown")}),cp.apply(this,arguments)}function dp(i,e,t){return cm.apply(this,arguments)}function cm(){return cm=(0,F.Z)(function*(i,e,t){if(i.wu.set("Online"),e instanceof Qs&&2===e.state&&e.cause)try{yield(o=(0,F.Z)(function*(u,d){const y=d.cause;for(const b of d.targetIds)u.lu.has(b)&&(yield u.remoteSyncer.rejectListen(b,y),u.lu.delete(b),u.mu.removeTarget(b))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){Ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield jh(i,o)}else if(e instanceof Zo?i.mu.ut(e):e instanceof fc?i.mu._t(e):i.mu.ht(e),!t.isEqual(Xt.min()))try{const o=yield Yg(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const y=u.mu.yt(d);return y.targetChanges.forEach((b,B)=>{if(b.resumeToken.approximateByteSize()>0){const G=u.lu.get(B);G&&u.lu.set(B,G.withResumeToken(b.resumeToken,d))}}),y.targetMismatches.forEach(b=>{const B=u.lu.get(b);if(!B)return;u.lu.set(b,B.withResumeToken(Yn.EMPTY_BYTE_STRING,B.snapshotVersion)),lm(u,b);const G=new Pa(B.target,b,1,B.sequenceNumber);up(u,G)}),u.remoteSyncer.applyRemoteEvent(y)}(i,t))}catch(o){Ee("RemoteStore","Failed to raise snapshot:",o),yield jh(i,o)}var o}),cm.apply(this,arguments)}function jh(i,e,t){return $h.apply(this,arguments)}function $h(){return $h=(0,F.Z)(function*(i,e,t){if(!Fu(e))throw e;i.fu.add(1),yield Ac(i),i.wu.set("Offline"),t||(t=()=>Yg(i.localStore)),i.asyncQueue.enqueueRetryable((0,F.Z)(function*(){Ee("RemoteStore","Retrying IndexedDB access"),yield t(),i.fu.delete(1),yield Fh(i)}))}),$h.apply(this,arguments)}function hp(i,e){return e().catch(t=>jh(i,t,e))}function Bl(i){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,F.Z)(function*(i){const e=St(i),t=Wu(e);let o=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;dm(e);)try{const u=yield Ky(e.localStore,o);if(null===u){0===e.hu.length&&t.Mo();break}o=u.batchId,uu(e,u)}catch(u){yield jh(e,u)}Dd(e)&&hm(e)}),Hh.apply(this,arguments)}function dm(i){return Hu(i)&&i.hu.length<10}function uu(i,e){i.hu.push(e);const t=Wu(i);t.xo()&&t.Ho&&t.Jo(e.mutations)}function Dd(i){return Hu(i)&&!Wu(i).Co()&&i.hu.length>0}function hm(i){Wu(i).start()}function r_(i){return fm.apply(this,arguments)}function fm(){return fm=(0,F.Z)(function*(i){Wu(i).Zo()}),fm.apply(this,arguments)}function fp(i){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,F.Z)(function*(i){const e=Wu(i);for(const t of i.hu)e.Jo(t.mutations)}),Gh.apply(this,arguments)}function pp(i,e,t){return jl.apply(this,arguments)}function jl(){return jl=(0,F.Z)(function*(i,e,t){const o=i.hu.shift(),u=fd.from(o,e,t);yield hp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Bl(i)}),jl.apply(this,arguments)}function i_(i,e){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,F.Z)(function*(i,e){var t;e&&Wu(i).Ho&&(yield(t=(0,F.Z)(function*(o,u){if(Dl(d=u.code)&&d!==et.ABORTED){const y=o.hu.shift();Wu(o).ko(),yield hp(o,()=>o.remoteSyncer.rejectFailedWrite(y.batchId,u)),yield Bl(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Dd(i)&&hm(i)}),Cd.apply(this,arguments)}function gp(i,e){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,F.Z)(function*(i,e){const t=St(i);t.asyncQueue.verifyOperationInProgress(),Ee("RemoteStore","RemoteStore received new credentials");const o=Hu(t);t.fu.add(3),yield Ac(t),o&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Fh(t)}),Wh.apply(this,arguments)}function zh(i,e){return mp.apply(this,arguments)}function mp(){return mp=(0,F.Z)(function*(i,e){const t=St(i);e?(t.fu.delete(2),yield Fh(t)):e||(t.fu.add(2),yield Ac(t),t.wu.set("Unknown"))}),mp.apply(this,arguments)}function Gu(i){return i.gu||(i.gu=function(e,t,o){const u=St(e);return u.eu(),new Jy(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:lp.bind(null,i),Yr:n_.bind(null,i),Qo:dp.bind(null,i)}),i.du.push(function(){var e=(0,F.Z)(function*(t){t?(i.gu.ko(),Id(i)?Sc(i):i.wu.set("Unknown")):(yield i.gu.stop(),Uh(i))});return function(t){return e.apply(this,arguments)}}())),i.gu}function Wu(i){return i.yu||(i.yu=function(e,t,o){const u=St(e);return u.eu(),new Fa(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Hr:r_.bind(null,i),Yr:i_.bind(null,i),Xo:fp.bind(null,i),Yo:pp.bind(null,i)}),i.du.push(function(){var e=(0,F.Z)(function*(t){t?(i.yu.ko(),yield Bl(i)):(yield i.yu.stop(),i.hu.length>0&&(Ee("RemoteStore",`Stopping write stream with ${i.hu.length} pending writes`),i.hu=[]))});return function(t){return e.apply(this,arguments)}}())),i.yu}class yp{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}static createAndSchedule(e,t,o,u,d){const y=Date.now()+o,b=new yp(e,t,y,u,d);return b.start(o),b}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mt(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $l(i,e){if(wt("AsyncQueue",`${e}: ${i}`),Fu(i))return new mt(et.UNAVAILABLE,`${e}: ${i}`);throw i}class pa{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Nt.comparator(t.key,o.key):(t,o)=>Nt.comparator(t.key,o.key),this.keyedMap=rd(),this.sortedSet=new Jn(this.comparator)}static emptySet(e){return new pa(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new pa;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class _p{constructor(){this.pu=new Jn(Nt.comparator)}track(e){const t=e.doc.key,o=this.pu.get(t);o?0!==e.type&&3===o.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==o.type?this.pu=this.pu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.pu=this.pu.remove(t):1===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):Et():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Mc{constructor(e,t,o,u,d,y,b,B){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=y,this.syncStateChanged=b,this.excludesMetadataChanges=B}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(y=>{d.push({type:0,doc:y})}),new Mc(e,t,pa.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class s_{constructor(){this.Tu=void 0,this.listeners=[]}}class xc{constructor(){this.queries=new xa(e=>Xd(e),Tu),this.onlineState="Unknown",this.Eu=new Set}}function vp(i,e){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,F.Z)(function*(i,e){const t=St(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new s_),u)try{d.Tu=yield t.onListen(o)}catch(y){const b=$l(y,`Initialization of query '${Xc(e.query)}' failed`);return void e.onError(b)}t.queries.set(o,d),d.listeners.push(e),e.Au(t.onlineState),d.Tu&&e.Ru(d.Tu)&&Kh(t)}),Ep.apply(this,arguments)}function wp(i,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,F.Z)(function*(i,e){const t=St(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const y=d.listeners.indexOf(e);y>=0&&(d.listeners.splice(y,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Ip.apply(this,arguments)}function ga(i,e){const t=St(i);let o=!1;for(const u of e){const y=t.queries.get(u.query);if(y){for(const b of y.listeners)b.Ru(u)&&(o=!0);y.Tu=u}}o&&Kh(t)}function Dp(i,e,t){const o=St(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Kh(i){i.Eu.forEach(e=>{e.next()})}class qh{constructor(e,t,o){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}Ru(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Mc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class pm{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class Cp{constructor(e){this.M=e}fi(e){return di(this.M,e)}di(e){return e.metadata.exists?gc(this.M,e.document,!1):Me.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Cs(e)}}class o_{constructor(e,t,o){this.Nu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gm(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=mr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new Cp(this.M);for(const u of e)if(u.metadata.queries){const d=o.fi(u.metadata.name);for(const y of u.metadata.queries){const b=(t.get(y)||Un()).add(d);t.set(y,b)}}return t}complete(){var e=this;return(0,F.Z)(function*(){const t=yield function em(i,e,t,o){return Rh.apply(this,arguments)}(e.localStore,new Cp(e.M),e.documents,e.Nu.id),o=e.Mu(e.documents);for(const u of e.queries)yield Qf(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function gm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class mm{constructor(e){this.key=e}}class ym{constructor(e){this.key=e}}class bp{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Un(),this.mutatedKeys=Un(),this.Uu=Jd(e),this.qu=new pa(this.Uu)}get Ku(){return this.$u}Gu(e,t){const o=t?t.Qu:new _p,u=t?t.qu:this.qu;let d=t?t.mutatedKeys:this.mutatedKeys,y=u,b=!1;const B=ic(this.query)&&u.size===this.query.limit?u.last():null,G=Cu(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((oe,Te)=>{const Je=u.get(oe),ft=Jc(this.query,Te)?Te:null,gt=!!Je&&this.mutatedKeys.has(Je.key),sn=!!ft&&(ft.hasLocalMutations||this.mutatedKeys.has(ft.key)&&ft.hasCommittedMutations);let Hn=!1;Je&&ft?Je.data.isEqual(ft.data)?gt!==sn&&(o.track({type:3,doc:ft}),Hn=!0):this.ju(Je,ft)||(o.track({type:2,doc:ft}),Hn=!0,(B&&this.Uu(ft,B)>0||G&&this.Uu(ft,G)<0)&&(b=!0)):!Je&&ft?(o.track({type:0,doc:ft}),Hn=!0):Je&&!ft&&(o.track({type:1,doc:Je}),Hn=!0,(B||G)&&(b=!0)),Hn&&(ft?(y=y.add(ft),d=sn?d.add(oe):d.delete(oe)):(y=y.delete(oe),d=d.delete(oe)))}),ic(this.query)||Cu(this.query))for(;y.size>this.query.limit;){const oe=ic(this.query)?y.last():y.first();y=y.delete(oe.key),d=d.delete(oe.key),o.track({type:1,doc:oe})}return{qu:y,Qu:o,ni:b,mutatedKeys:d}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const d=e.Qu.Iu();d.sort((G,oe)=>function(Te,Je){const ft=gt=>{switch(gt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return ft(Te)-ft(Je)}(G.type,oe.type)||this.Uu(G.doc,oe.doc)),this.Wu(o);const y=t?this.zu():[],b=0===this.Lu.size&&this.current?1:0,B=b!==this.Bu;return this.Bu=b,0!==d.length||B?{snapshot:new Mc(this.query,e.qu,u,d,e.mutatedKeys,0===b,B,!1),Hu:y}:{Hu:y}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new _p,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Un(),this.qu.forEach(o=>{this.Ju(o.key)&&(this.Lu=this.Lu.add(o.key))});const t=[];return e.forEach(o=>{this.Lu.has(o)||t.push(new ym(o))}),this.Lu.forEach(o=>{e.has(o)||t.push(new mm(o))}),t}Yu(e){this.$u=e.li,this.Lu=Un();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Mc.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Kv{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class _m{constructor(e){this.key=e,this.Zu=!1}}class a_{constructor(e,t,o,u,d,y){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=y,this.ta={},this.ea=new xa(b=>Xd(b),Tu),this.na=new Map,this.sa=new Set,this.ia=new Jn(Nt.comparator),this.ra=new Map,this.oa=new Xf,this.ua={},this.aa=new Map,this.ca=su.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function u_(i,e){return vm.apply(this,arguments)}function vm(){return vm=(0,F.Z)(function*(i,e){const t=Yu(i);let o,u;const d=t.ea.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.Xu();else{const y=yield Na(t.localStore,fo(e));t.isPrimaryClient&&Vh(t.remoteStore,y);const b=t.sharedClientState.addLocalQueryTarget(y.targetId);o=y.targetId,u=yield Em(t,e,o,"current"===b)}return u}),vm.apply(this,arguments)}function Em(i,e,t,o){return bd.apply(this,arguments)}function bd(){return bd=(0,F.Z)(function*(i,e,t,o){i.la=(oe,Te,Je)=>{return(ft=(0,F.Z)(function*(gt,sn,Hn,Si){let Ni=sn.view.Gu(Hn);Ni.ni&&(Ni=yield au(gt.localStore,sn.query,!1).then(({documents:Fi})=>sn.view.Gu(Fi,Ni)));const hi=Si&&Si.targetChanges.get(sn.targetId),Ts=sn.view.applyChanges(Ni,gt.isPrimaryClient,hi);return xp(gt,sn.targetId,Ts.Hu),Ts.snapshot}),function(gt,sn,Hn,Si){return ft.apply(this,arguments)})(i,oe,Te,Je);var ft};const u=yield au(i.localStore,e,!0),d=new bp(e,u.li),y=d.Gu(u.documents),b=as.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),B=d.applyChanges(y,i.isPrimaryClient,b);xp(i,t,B.Hu);const G=new Kv(e,t,d);return i.ea.set(e,G),i.na.has(t)?i.na.get(t).push(e):i.na.set(t,[e]),B.snapshot}),bd.apply(this,arguments)}function l_(i,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,F.Z)(function*(i,e){const t=St(i),o=t.ea.get(e),u=t.na.get(o.targetId);if(u.length>1)return t.na.set(o.targetId,u.filter(d=>!Tu(d,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield fa(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Ul(t.remoteStore,o.targetId),Rc(t,o.targetId)}).catch(Fl))):(Rc(t,o.targetId),yield fa(t.localStore,o.targetId,!0))}),Zh.apply(this,arguments)}function Im(){return Im=(0,F.Z)(function*(i,e,t){const o=Qu(i);try{const u=yield function(d,y){const b=St(d),B=ji.now(),G=y.reduce((Te,Je)=>Te.add(Je.key),Un());let oe;return b.persistence.runTransaction("Locally write mutations","readwrite",Te=>b.ci.Ks(Te,G).next(Je=>{oe=Je;const ft=[];for(const gt of y){const sn=Rg(gt,oe.get(gt.key));null!=sn&&ft.push(new xu(gt.key,sn,ae(sn.value.mapValue),Zi.exists(!0)))}return b.Bs.addMutationBatch(Te,B,ft,y)})).then(Te=>(Te.applyToLocalDocumentSet(oe),{batchId:Te.batchId,changes:oe}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,y,b){let B=d.ua[d.currentUser.toKey()];B||(B=new Jn(Ln)),B=B.insert(y,b),d.ua[d.currentUser.toKey()]=B}(o,u.batchId,t),yield ea(o,u.changes),yield Bl(o.remoteStore)}catch(u){const d=$l(u,"Failed to persist write");t.reject(d)}}),Im.apply(this,arguments)}function Jo(i,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,F.Z)(function*(i,e){const t=St(i);try{const o=yield Qg(t.localStore,e);e.targetChanges.forEach((u,d)=>{const y=t.ra.get(d);y&&(Ft(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?y.Zu=!0:u.modifiedDocuments.size>0?Ft(y.Zu):u.removedDocuments.size>0&&(Ft(y.Zu),y.Zu=!1))}),yield ea(t,o,e)}catch(o){yield Fl(o)}}),Dm.apply(this,arguments)}function c_(i,e,t){const o=St(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ea.forEach((d,y)=>{const b=y.view.Au(e);b.snapshot&&u.push(b.snapshot)}),function(d,y){const b=St(d);b.onlineState=y;let B=!1;b.queries.forEach((G,oe)=>{for(const Te of oe.listeners)Te.Au(y)&&(B=!0)}),B&&Kh(b)}(o.eventManager,e),u.length&&o.ta.Qo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Cm(i,e,t){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,F.Z)(function*(i,e,t){const o=St(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.ra.get(e),d=u&&u.key;if(d){let y=new Jn(Nt.comparator);y=y.insert(d,Me.newNoDocument(d,Xt.min()));const b=Un().add(d),B=new ru(Xt.min(),new Map,new oi(Ln),y,b);yield Jo(o,B),o.ia=o.ia.remove(d),o.ra.delete(e),Rp(o)}else yield fa(o.localStore,e,!1).then(()=>Rc(o,e,t)).catch(Fl)}),Yh.apply(this,arguments)}function bm(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,F.Z)(function*(i,e){const t=St(i),o=e.batch.batchId;try{const u=yield Yf(t.localStore,e);Mp(t,o,null),Td(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield ea(t,u)}catch(u){yield Fl(u)}}),Tp.apply(this,arguments)}function qv(i,e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,F.Z)(function*(i,e,t){const o=St(i);try{const u=yield function(d,y){const b=St(d);return b.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let G;return b.Bs.lookupMutationBatch(B,y).next(oe=>(Ft(null!==oe),G=oe.keys(),b.Bs.removeMutationBatch(B,oe))).next(()=>b.Bs.performConsistencyCheck(B)).next(()=>b.ci.Ks(B,G))})}(o.localStore,e);Mp(o,e,t),Td(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield ea(o,u)}catch(u){yield Fl(u)}}),Qh.apply(this,arguments)}function Sp(){return Sp=(0,F.Z)(function*(i,e){const t=St(i);Hu(t.remoteStore)||Ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const y=St(d);return y.persistence.runTransaction("Get highest unacknowledged batch id","readonly",b=>y.Bs.getHighestUnacknowledgedBatchId(b))}(t.localStore);if(-1===o)return void e.resolve();const u=t.aa.get(o)||[];u.push(e),t.aa.set(o,u)}catch(o){const u=$l(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Sp.apply(this,arguments)}function Td(i,e){(i.aa.get(e)||[]).forEach(t=>{t.resolve()}),i.aa.delete(e)}function Mp(i,e,t){const o=St(i);let u=o.ua[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ua[o.currentUser.toKey()]=u}}function Rc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.na.get(e))i.ea.delete(o),t&&i.ta.fa(o,t);i.na.delete(e),i.isPrimaryClient&&i.oa.Pi(e).forEach(o=>{i.oa.containsKey(o)||Tm(i,o)})}function Tm(i,e){i.sa.delete(e.path.canonicalString());const t=i.ia.get(e);null!==t&&(Ul(i.remoteStore,t),i.ia=i.ia.remove(e),i.ra.delete(t),Rp(i))}function xp(i,e,t){for(const o of t)o instanceof mm?(i.oa.addReference(o.key,e),d_(i,o)):o instanceof ym?(Ee("SyncEngine","Document no longer in limbo: "+o.key),i.oa.removeReference(o.key,e),i.oa.containsKey(o.key)||Tm(i,o.key)):Et()}function d_(i,e){const t=e.key,o=t.path.canonicalString();i.ia.get(t)||i.sa.has(o)||(Ee("SyncEngine","New document in limbo: "+t),i.sa.add(o),Rp(i))}function Rp(i){for(;i.sa.size>0&&i.ia.size<i.maxConcurrentLimboResolutions;){const e=i.sa.values().next().value;i.sa.delete(e);const t=new Nt(mr.fromString(e)),o=i.ca.next();i.ra.set(o,new _m(t)),i.ia=i.ia.insert(t,o),Vh(i.remoteStore,new Pa(fo(jo(t.path)),o,2,ss.A))}}function ea(i,e,t){return zu.apply(this,arguments)}function zu(){return zu=(0,F.Z)(function*(i,e,t){const o=St(i),u=[],d=[],y=[];var b;o.ea.isEmpty()||(o.ea.forEach((b,B)=>{y.push(o.la(B,e,t).then(G=>{if(G){o.isPrimaryClient&&o.sharedClientState.updateQueryState(B.targetId,G.fromCache?"not-current":"current"),u.push(G);const oe=Mh.Ys(B.targetId,G);d.push(oe)}}))}),yield Promise.all(y),o.ta.Qo(u),yield(b=(0,F.Z)(function*(B,G){const oe=St(B);try{yield oe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Te=>it.forEach(G,Je=>it.forEach(Je.Hs,ft=>oe.persistence.referenceDelegate.addReference(Te,Je.targetId,ft)).next(()=>it.forEach(Je.Js,ft=>oe.persistence.referenceDelegate.removeReference(Te,Je.targetId,ft)))))}catch(Te){if(!Fu(Te))throw Te;Ee("LocalStore","Failed to update sequence numbers: "+Te)}for(const Te of G){const Je=Te.targetId;if(!Te.fromCache){const ft=oe.ii.get(Je),sn=ft.withLastLimboFreeSnapshotVersion(ft.snapshotVersion);oe.ii=oe.ii.insert(Je,sn)}}}),function(B,G){return b.apply(this,arguments)})(o.localStore,d))}),zu.apply(this,arguments)}function h_(i,e){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,F.Z)(function*(i,e){const t=St(i);if(!t.currentUser.isEqual(e)){Ee("SyncEngine","User change. New user:",e.toKey());const o=yield qf(t.localStore,e);t.currentUser=e,(u=t).aa.forEach(y=>{y.forEach(b=>{b.reject(new mt(et.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.aa.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ea(t,o.hi)}var u}),Hl.apply(this,arguments)}function f_(i,e){const t=St(i),o=t.ra.get(e);if(o&&o.Zu)return Un().add(o.key);{let u=Un();const d=t.na.get(e);if(!d)return u;for(const y of d){const b=t.ea.get(y);u=u.unionWith(b.view.Ku)}return u}}function p_(i,e){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,F.Z)(function*(i,e){const t=St(i),o=yield au(t.localStore,e.query,!0),u=e.view.Yu(o);return t.isPrimaryClient&&xp(t,e.targetId,u.Hu),u}),Ad.apply(this,arguments)}function La(i,e){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,F.Z)(function*(i,e){const t=St(i);return Vl(t.localStore,e).then(o=>ea(t,o))}),Gl.apply(this,arguments)}function to(i,e,t,o){return lu.apply(this,arguments)}function lu(){return lu=(0,F.Z)(function*(i,e,t,o){const u=St(i),d=yield function(y,b){const B=St(y),G=St(B.Bs);return B.persistence.runTransaction("Lookup mutation documents","readonly",oe=>G.fn(oe,b).next(Te=>Te?B.ci.Ks(oe,Te):it.resolve(null)))}(u.localStore,e);var b;null!==d?("pending"===t?yield Bl(u.remoteStore):"acknowledged"===t||"rejected"===t?(Mp(u,e,o||null),Td(u,e),b=e,St(St(u.localStore).Bs)._n(b)):Et(),yield ea(u,d)):Ee("SyncEngine","Cannot apply mutation batch with id: "+e)}),lu.apply(this,arguments)}function To(){return To=(0,F.Z)(function*(i,e){const t=St(i);if(Yu(t),Qu(t),!0===e&&!0!==t.ha){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield Jh(t,o.toArray());t.ha=!0,yield zh(t.remoteStore,!0);for(const d of u)Vh(t.remoteStore,d)}else if(!1===e&&!1!==t.ha){const o=[];let u=Promise.resolve();t.na.forEach((d,y)=>{t.sharedClientState.isLocalQueryTarget(y)?o.push(y):u=u.then(()=>(Rc(t,y),fa(t.localStore,y,!0))),Ul(t.remoteStore,y)}),yield u,yield Jh(t,o),function(d){const y=St(d);y.ra.forEach((b,B)=>{Ul(y.remoteStore,B)}),y.oa.bi(),y.ra=new Map,y.ia=new Jn(Nt.comparator)}(t),t.ha=!1,yield zh(t.remoteStore,!1)}}),To.apply(this,arguments)}function Jh(i,e,t){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,F.Z)(function*(i,e,t){const o=St(i),u=[],d=[];for(const y of e){let b;const B=o.na.get(y);if(B&&0!==B.length){b=yield Na(o.localStore,fo(B[0]));for(const G of B){const oe=o.ea.get(G),Te=yield p_(o,oe);Te.snapshot&&d.push(Te.snapshot)}}else{const G=yield Tc(o.localStore,y);b=yield Na(o.localStore,G),yield Em(o,Wl(G),y,!1)}u.push(b)}return o.ta.Qo(d),u}),Ku.apply(this,arguments)}function Wl(i){return rc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Oc(i){const e=St(i);return St(St(e.localStore).persistence).Fs()}function Pc(i,e,t,o){return qu.apply(this,arguments)}function qu(){return qu=(0,F.Z)(function*(i,e,t,o){const u=St(i);if(u.ha)return void Ee("SyncEngine","Ignoring unexpected query state notification.");const d=u.na.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const y=yield Vl(u.localStore,oc(d[0])),b=ru.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ea(u,y,b);break}case"rejected":yield fa(u.localStore,e,!0),Rc(u,e,o);break;default:Et()}}),qu.apply(this,arguments)}function kc(i,e,t){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,F.Z)(function*(i,e,t){const o=Yu(i);if(o.ha){for(const u of e){if(o.na.has(u)){Ee("SyncEngine","Adding an already active target "+u);continue}const d=yield Tc(o.localStore,u),y=yield Na(o.localStore,d);yield Em(o,Wl(d),y.targetId,!1),Vh(o.remoteStore,y)}for(const u of t)o.na.has(u)&&(yield fa(o.localStore,u,!1).then(()=>{Ul(o.remoteStore,u),Rc(o,u)}).catch(Fl))}}),Zu.apply(this,arguments)}function Yu(i){const e=St(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cm.bind(null,e),e.ta.Qo=ga.bind(null,e.eventManager),e.ta.fa=Dp.bind(null,e.eventManager),e}function Qu(i){const e=St(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qv.bind(null,e),e}class Op{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,F.Z)(function*(){t.M=wd(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return ou(this.persistence,new xh,e.initialUser,this.M)}wa(e){return new im(Jf.zi,this.M)}_a(e){return new rp}terminate(){var e=this;return(0,F.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Pp extends Op{constructor(e,t,o){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,F.Z)(function*(){yield t().call(o,e),yield o.ya.initialize(o,e),yield Qu(o.ya.syncEngine),yield Bl(o.ya.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ga(e){return ou(this.persistence,new xh,e.initialUser,this.M)}ma(e){return new $v(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new ka(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,ip(),kh(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new rp}}class Sm extends Pp{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,F.Z)(function*(){yield t().call(o,e);const u=o.ya.syncEngine;o.sharedClientState instanceof Ed&&(o.sharedClientState.syncEngine={Mr:to.bind(null,u),Or:Pc.bind(null,u),Fr:kc.bind(null,u),Fs:Oc.bind(null,u),kr:La.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var d=(0,F.Z)(function*(y){yield function Xh(i,e){return To.apply(this,arguments)}(o.ya.syncEngine,y),o.gcScheduler&&(y&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):y||o.gcScheduler.stop())});return function(y){return d.apply(this,arguments)}}())})()}_a(e){const t=ip();if(!Ed.vt(t))throw new mt(et.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ed(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class ef{initialize(e,t){var o=this;return(0,F.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>c_(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=h_.bind(null,o.syncEngine),yield zh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xc}createDatastore(e){const t=wd(e.databaseInfo.databaseId),o=new Xy(e.databaseInfo);return new op(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=b=>c_(this.syncEngine,b,0),y=am.vt()?new am:new Yy,new t_(t,o,u,d,y);var t,o,u,d,y}createSyncEngine(e,t){return function(o,u,d,y,b,B,G){const oe=new a_(o,u,d,y,b,B);return G&&(oe.ha=!0),oe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,F.Z)(function*(t){const o=St(t);Ee("RemoteStore","RemoteStore shutting down."),o.fu.add(5),yield Ac(o),o._u.shutdown(),o.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function kp(i,e=10240){let t=0;return{read:()=>(0,F.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,F.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Sd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mm{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Xr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(o=>{o&&o.xu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,F.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,F.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,F.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const o=e.Ea.decode(t),u=Number(o);isNaN(u)&&e.Pa(`length string (${o}) is not valid number`);const d=yield e.ba(u);return new pm(JSON.parse(d),t.length+u)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,F.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,F.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const o=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,F.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class xm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,F.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new mt(et.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,F.Z)(function*(d,y){const b=St(d),B=Rl(b.M)+"/documents",G={documents:y.map(ft=>Pu(b.M,ft))},oe=yield b.ho("BatchGetDocuments",B,G),Te=new Map;oe.forEach(ft=>{const gt=function dh(i,e){return"found"in e?function(t,o){Ft(!!o.found);const u=di(t,o.found.name),d=Cs(o.found.updateTime),y=new W({mapValue:{fields:o.found.fields}});return Me.newFoundDocument(u,d,y)}(i,e):"missing"in e?function(t,o){Ft(!!o.missing),Ft(!!o.readTime);const u=di(t,o.missing),d=Cs(o.readTime);return Me.newNoDocument(u,d)}(i,e):Et()}(b.M,ft);Te.set(gt.key.toString(),gt)});const Je=[];return y.forEach(ft=>{const gt=Te.get(ft.toString());Ft(!!gt),Je.push(gt)}),Je}),function(d,y){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new wl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,F.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=Nt.fromPath(u);e.mutations.push(new Il(d,e.precondition(d)))}),yield(o=(0,F.Z)(function*(u,d){const y=St(u),b=Rl(y.M)+"/documents",B={writes:d.map(G=>iu(y.M,G))};yield y.oo("Commit",b,B)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Et();t=Xt.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new mt(et.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Zi.updateTime(t):Zi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Xt.min()))throw new mt(et.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zi.updateTime(t)}return Zi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class g_{constructor(e,t,o,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=u,this.Sa=5,this.Do=new Nh(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,F.Z)(function*(){const t=new xm(e.datastore),o=e.Ca(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.xa(d)}))}).catch(u=>{e.xa(u)})}))}Ca(e){try{const t=this.updateFunction(e);return!Is(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Dl(t)}return!1}}class Rm{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=x.UNAUTHENTICATED,this.clientId=nc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var y=(0,F.Z)(function*(b){Ee("FirestoreClient","Received user=",b.uid),yield d.authCredentialListener(b),d.user=b});return function(b){return y.apply(this,arguments)}}()),this.appCheckCredentials.start(o,y=>(Ee("FirestoreClient","Received new app check token=",y),this.appCheckCredentialListener(y,this.user)))}getConfiguration(){var e=this;return(0,F.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new mt(et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,F.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=$l(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Om(i,e){return tf.apply(this,arguments)}function tf(){return tf=(0,F.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ee("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,F.Z)(function*(d){o.isEqual(d)||(yield qf(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),tf.apply(this,arguments)}function Np(i,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,F.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Lp(i);Ee("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>gp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>gp(e.remoteStore,d)),i.onlineComponents=e}),Fp.apply(this,arguments)}function Lp(i){return nf.apply(this,arguments)}function nf(){return nf=(0,F.Z)(function*(i){return i.offlineComponents||(Ee("FirestoreClient","Using default OfflineComponentProvider"),yield Om(i,new Op)),i.offlineComponents}),nf.apply(this,arguments)}function rf(i){return sf.apply(this,arguments)}function sf(){return sf=(0,F.Z)(function*(i){return i.onlineComponents||(Ee("FirestoreClient","Using default OnlineComponentProvider"),yield Np(i,new ef)),i.onlineComponents}),sf.apply(this,arguments)}function Pm(i){return Lp(i).then(e=>e.persistence)}function Vp(i){return Lp(i).then(e=>e.localStore)}function m_(i){return rf(i).then(e=>e.remoteStore)}function Up(i){return rf(i).then(e=>e.syncEngine)}function Xu(i){return Md.apply(this,arguments)}function Md(){return Md=(0,F.Z)(function*(i){const e=yield rf(i),t=e.eventManager;return t.onListen=u_.bind(null,e.syncEngine),t.onUnlisten=l_.bind(null,e.syncEngine),t}),Md.apply(this,arguments)}function __(i,e,t={}){const o=new Xr;return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return function(u,d,y,b,B){const G=new Sd({next:Te=>{d.enqueueAndForget(()=>wp(u,oe));const Je=Te.docs.has(y);!Je&&Te.fromCache?B.reject(new mt(et.UNAVAILABLE,"Failed to get document because the client is offline.")):Je&&Te.fromCache&&b&&"server"===b.source?B.reject(new mt(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(Te)},error:Te=>B.reject(Te)}),oe=new qh(jo(y.path),G,{includeMetadataChanges:!0,Cu:!0});return vp(u,oe)}(yield Xu(i),i.asyncQueue,e,t,o)})),o.promise}function Bp(i,e,t={}){const o=new Xr;return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return function(u,d,y,b,B){const G=new Sd({next:Te=>{d.enqueueAndForget(()=>wp(u,oe)),Te.fromCache&&"server"===b.source?B.reject(new mt(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(Te)},error:Te=>B.reject(Te)}),oe=new qh(y,G,{includeMetadataChanges:!0,Cu:!0});return vp(u,oe)}(yield Xu(i),i.asyncQueue,e,t,o)})),o.promise}const jp=new Map;function $p(i,e,t){if(!t)throw new mt(et.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Hp(i,e,t,o){if(!0===e&&!0===o)throw new mt(et.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function xd(i){if(!Nt.isDocumentKey(i))throw new mt(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function km(i){if(Nt.isDocumentKey(i))throw new mt(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Rd(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Et()}function Pr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new mt(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rd(i);throw new mt(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Nm(i,e){if(e<=0)throw new mt(et.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Fm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new mt(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new mt(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Hp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fm({}),this._settingsFrozen=!1,e instanceof Ki?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new mt(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(u.options.projectId)}(e))}get app(){if(!this._app)throw new mt(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new mt(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qc;switch(t.type){case"gapi":const o=t.client;return Ft(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new tc(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new mt(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jp.get(e);t&&(Ee("ComponentProvider","Removing Datastore"),jp.delete(e),t.terminate())}(this),Promise.resolve()}}class Ti{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ti(this.firestore,e,this._key)}}class no{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new no(this.firestore,e,this._query)}}class ma extends no{constructor(e,t,o){super(e,t,jo(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ti(this.firestore,null,new Nt(e))}withConverter(e){return new ma(this.firestore,e,this._path)}}function Gp(i,e,...t){if(i=(0,je.m9)(i),$p("collection","path",e),i instanceof Od){const o=mr.fromString(e,...t);return km(o),new ma(i,null,o)}{if(!(i instanceof Ti||i instanceof ma))throw new mt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(mr.fromString(e,...t));return km(o),new ma(i.firestore,null,o)}}function zp(i,e,...t){if(i=(0,je.m9)(i),1===arguments.length&&(e=nc.R()),$p("doc","path",e),i instanceof Od){const o=mr.fromString(e,...t);return xd(o),new Ti(i,null,new Nt(o))}{if(!(i instanceof Ti||i instanceof ma))throw new mt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(mr.fromString(e,...t));return xd(o),new Ti(i.firestore,i instanceof ma?i.converter:null,new Nt(o))}}function af(i,e){return i=(0,je.m9)(i),e=(0,je.m9)(e),(i instanceof Ti||i instanceof ma)&&(e instanceof Ti||e instanceof ma)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Lm(i,e){return i=(0,je.m9)(i),e=(0,je.m9)(e),i instanceof no&&e instanceof no&&i.firestore===e.firestore&&Tu(i._query,e._query)&&i.converter===e.converter}class Xv{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Nh(this,"async_queue_retry"),this.qa=()=>{const t=kh();t&&Ee("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=kh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=kh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Xr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,F.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Fu(t))throw t;Ee("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(o=>{throw this.$a=o,this.Ba=!1,wt("INTERNAL UNHANDLED ERROR: ",function(d){let y=d.message||"";return d.stack&&(y=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),y}(o)),o}).then(o=>(this.Ba=!1,o))));return this.ka=t,t}enqueueAfterDelay(e,t,o){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const u=yp.createAndSchedule(this,e,t,o,d=>this.ja(d));return this.Fa.push(u),u}Ka(){this.$a&&Et()}verifyOperationInProgress(){}Wa(){var e=this;return(0,F.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function zl(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Vm{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ai extends Od{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new Xv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||uf(this),this._firestoreClient.terminate()}}function Qi(i){return i._firestoreClient||uf(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function uf(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Wo(i._databaseId,d,i._persistenceKey,(b=t).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,b.useFetchStreams));var d,b;i._firestoreClient=new Rm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Pd(i,e,t){const o=new Xr;return i.asyncQueue.enqueue((0,F.Z)(function*(){try{yield Om(i,t),yield Np(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(d=u).name?d.code===et.FAILED_PRECONDITION||d.code===et.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var d})).then(()=>o.promise)}function Qp(i){if(i._initialized||i._terminated)throw new mt(et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new mt(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ms(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ya(Yn.fromBase64String(e))}catch(t){throw new mt(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ya(Yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class du{constructor(e){this._methodName=e}}class kd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new mt(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new mt(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ln(this._lat,e._lat)||Ln(this._long,e._long)}}const T_=/^__.*__$/;class $m{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new xu(e,this.data,this.fieldMask,t,this.fieldTransforms):new tu(e,this.data,t,this.fieldTransforms)}}class Xp{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new xu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}class Fc{constructor(e,t,o,u,d,y){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===d&&this.Ya(),this.fieldTransforms=d||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Fc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.nc(e),u}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Za({path:o,ec:!1});return u.Ya(),u}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Fd(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(Jp(this.Xa)&&T_.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Hm{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||wd(e)}ac(e,t,o,u=!1){return new Fc({Xa:e,methodName:t,uc:o,path:ms.emptyPath(),ec:!1,oc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Ju(i){const e=i._freezeSettings(),t=wd(i._databaseId);return new Hm(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Nd(i,e,t,o,u,d={}){const y=i.ac(d.merge||d.mergeFields?2:0,e,t,u);sg("Data must be an object, but it was:",y,o);const b=bs(o,y);let B,G;if(d.merge)B=new qs(y.fieldMask),G=y.fieldTransforms;else if(d.mergeFields){const oe=[];for(const Te of d.mergeFields){const Je=og(e,Te,t);if(!y.contains(Je))throw new mt(et.INVALID_ARGUMENT,`Field '${Je}' is specified in your field mask but missing from your input data.`);ag(oe,Je)||oe.push(Je)}B=new qs(oe),G=y.fieldTransforms.filter(Te=>B.covers(Te.field))}else B=null,G=y.fieldTransforms;return new $m(new W(b),B,G)}class Lc extends du{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lc}}function eg(i,e,t){return new Fc({Xa:3,uc:e.settings.uc,methodName:i._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class cf extends du{_toFieldTransform(e){return new Mu(e.path,new Qa)}isEqual(e){return e instanceof cf}}class Gm extends du{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=eg(this,e,!0),o=this.cc.map(d=>Kl(d,t)),u=new Xa(o);return new Mu(e.path,u)}isEqual(e){return this===e}}class Wm extends du{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=eg(this,e,!0),o=this.cc.map(d=>Kl(d,t)),u=new Su(o);return new Mu(e.path,u)}isEqual(e){return this===e}}class t0 extends du{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new yl(e.M,Of(e.M,this.hc));return new Mu(e.path,t)}isEqual(e){return this===e}}function tg(i,e,t,o){const u=i.ac(1,e,t);sg("Data must be an object, but it was:",u,o);const d=[],y=W.empty();za(o,(B,G)=>{const oe=df(e,B,t);G=(0,je.m9)(G);const Te=u.sc(oe);if(G instanceof Lc)d.push(oe);else{const Je=Kl(G,Te);null!=Je&&(d.push(oe),y.set(oe,Je))}});const b=new qs(d);return new Xp(y,b,u.fieldTransforms)}function ng(i,e,t,o,u,d){const y=i.ac(1,e,t),b=[og(e,o,t)],B=[u];if(d.length%2!=0)throw new mt(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Je=0;Je<d.length;Je+=2)b.push(og(e,d[Je])),B.push(d[Je+1]);const G=[],oe=W.empty();for(let Je=b.length-1;Je>=0;--Je)if(!ag(G,b[Je])){const ft=b[Je];let gt=B[Je];gt=(0,je.m9)(gt);const sn=y.sc(ft);if(gt instanceof Lc)G.push(ft);else{const Hn=Kl(gt,sn);null!=Hn&&(G.push(ft),oe.set(ft,Hn))}}const Te=new qs(G);return new Xp(oe,Te,y.fieldTransforms)}function rg(i,e,t,o=!1){return Kl(t,i.ac(o?4:3,e))}function Kl(i,e){if(ig(i=(0,je.m9)(i)))return sg("Unsupported field value:",e,i),bs(i,e);if(i instanceof du)return function(t,o){if(!Jp(o.Xa))throw o.rc(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.rc(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const y of t){let b=Kl(y,o.ic(d));null==b&&(b={nullValue:"NULL_VALUE"}),u.push(b),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,je.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Of(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=ji.fromDate(t);return{timestampValue:Sl(o.M,u)}}if(t instanceof ji){const u=new ji(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sl(o.M,u)}}if(t instanceof kd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ya)return{bytesValue:$o(o.M,t._byteString)};if(t instanceof Ti){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.rc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ml(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.rc(`Unsupported field value: ${Rd(t)}`)}(i,e)}function bs(i,e){const t={};return Yc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):za(i,(o,u)=>{const d=Kl(u,e.tc(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function ig(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ji||i instanceof kd||i instanceof ya||i instanceof Ti||i instanceof du)}function sg(i,e,t){if(!ig(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Rd(t);throw e.rc("an object"===o?i+" a custom object":i+" "+o)}var o}function og(i,e,t){if((e=(0,je.m9)(e))instanceof cu)return e._internalPath;if("string"==typeof e)return df(i,e);throw Fd("Field path arguments must be of type string or ",i,!1,void 0,t)}const zm=new RegExp("[~\\*/\\[\\]]");function df(i,e,t){if(e.search(zm)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new cu(...e.split("."))._internalPath}catch(o){throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Fd(i,e,t,o,u){const d=o&&!o.isEmpty(),y=void 0!==u;let b=`Function ${e}() called with invalid data`;t&&(b+=" (via `toFirestore()`)"),b+=". ";let B="";return(d||y)&&(B+=" (found",d&&(B+=` in field ${o}`),y&&(B+=` in document ${u}`),B+=")"),new mt(et.INVALID_ARGUMENT,b+i+B)}function ag(i,e){return i.some(t=>t.isEqual(e))}class Va{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Ti(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new A_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class A_ extends Va{data(){return super.data()}}function hf(i,e){return"string"==typeof e?df(i,e):e instanceof cu?e._internalPath:e._delegate._internalPath}class el{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hu extends Va{constructor(e,t,o,u,d,y){super(e,t,o,u,y),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(hf("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Vc extends hu{data(e={}){return super.data(e)}}class ql{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new el(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Vc(this._firestore,this._userDataWriter,o.key,o,new el(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new mt(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(y=>({type:"added",doc:new Vc(o._firestore,o._userDataWriter,y.doc.key,y.doc,new el(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(y=>u||3!==y.type).map(y=>{const b=new Vc(o._firestore,o._userDataWriter,y.doc.key,y.doc,new el(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let B=-1,G=-1;return 0!==y.type&&(B=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),1!==y.type&&(d=d.add(y.doc),G=d.indexOf(y.doc.key)),{type:Km(y.type),doc:b,oldIndex:B,newIndex:G}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Km(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}function ff(i,e){return i instanceof hu&&e instanceof hu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ql&&e instanceof ql&&i._firestore===e._firestore&&Lm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function _a(i){if(Cu(i)&&0===i.explicitOrderBy.length)throw new mt(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ld{}function tl(i,...e){for(const t of e)i=t._apply(i);return i}class Ua extends Ld{constructor(e,t,o){super(),this.lc=e,this.fc=t,this.dc=o,this.type="where"}_apply(e){const t=Ju(e.firestore),o=function(u,d,y,b,B,G,oe){let Te;if(B.isKeyField()){if("array-contains"===G||"array-contains-any"===G)throw new mt(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${G}' queries on documentId().`);if("in"===G||"not-in"===G){dg(oe,G);const ft=[];for(const gt of oe)ft.push(cg(b,u,gt));Te={arrayValue:{values:ft}}}else Te=cg(b,u,oe)}else"in"!==G&&"not-in"!==G&&"array-contains-any"!==G||dg(oe,G),Te=rg(y,"where",oe,"in"===G||"not-in"===G);const Je=Hi.create(B,G,Te);return function(ft,gt){if(gt.S()){const Hn=bu(ft);if(null!==Hn&&!Hn.isEqual(gt.field))throw new mt(et.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Hn.toString()}' and '${gt.field.toString()}'`);const Si=Qd(ft);null!==Si&&Vd(0,gt.field,Si)}const sn=function(Hn,Si){for(const Ni of Hn.filters)if(Si.indexOf(Ni.op)>=0)return Ni.op;return null}(ft,function(Hn){switch(Hn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(gt.op));if(null!==sn)throw new mt(et.INVALID_ARGUMENT,sn===gt.op?`Invalid query. You cannot use more than one '${gt.op.toString()}' filter.`:`Invalid query. You cannot use '${gt.op.toString()}' filters with '${sn.toString()}' filters.`)}(u,Je),Je}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new no(e.firestore,e.converter,function(u,d){const y=u.filters.concat([d]);return new Io(u.path,u.collectionGroup,u.explicitOrderBy.slice(),y,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class Ea extends Ld{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new mt(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new mt(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const y=new pl(u,d);return function(b,B){if(null===Qd(b)){const G=bu(b);null!==G&&Vd(0,G,B.field)}}(o,y),y}(e._query,this.lc,this._c);return new no(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Io(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ug extends Ld{constructor(e,t,o){super(),this.type=e,this.wc=t,this.mc=o}_apply(e){return new no(e.firestore,e.converter,sc(e._query,this.wc,this.mc))}}class Zm extends Ld{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new no(e.firestore,e.converter,(u=t,new Io((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class Uc extends Ld{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=Qm(e,this.type,this.gc,this.yc);return new no(e.firestore,e.converter,(u=t,new Io((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function Qm(i,e,t,o){if(t[0]=(0,je.m9)(t[0]),t[0]instanceof Va)return function(u,d,y,b,B){if(!b)throw new mt(et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${y}().`);const G=[];for(const oe of Ya(u))if(oe.field.isKeyField())G.push(Uo(d,b.key));else{const Te=b.data.field(oe.field);if(os(Te))throw new mt(et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+oe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Te){const Je=oe.field.canonicalString();throw new mt(et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Je}' (used as the orderBy) does not exist.`)}G.push(Te)}return new Bo(G,B)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=Ju(i.firestore);return function(d,y,b,B,G,oe){const Te=d.explicitOrderBy;if(G.length>Te.length)throw new mt(et.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Je=[];for(let ft=0;ft<G.length;ft++){const gt=G[ft];if(Te[ft].field.isKeyField()){if("string"!=typeof gt)throw new mt(et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof gt}`);if(!gl(d)&&-1!==gt.indexOf("/"))throw new mt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${gt}' contains a slash.`);const sn=d.path.child(mr.fromString(gt));if(!Nt.isDocumentKey(sn))throw new mt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${sn}' is not because it contains an odd number of segments.`);const Hn=new Nt(sn);Je.push(Uo(y,Hn))}else{const sn=rg(b,B,gt);Je.push(sn)}}return new Bo(Je,oe)}(i._query,i.firestore._databaseId,u,e,t,o)}}function cg(i,e,t){if("string"==typeof(t=(0,je.m9)(t))){if(""===t)throw new mt(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gl(e)&&-1!==t.indexOf("/"))throw new mt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(mr.fromString(t));if(!Nt.isDocumentKey(o))throw new mt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Uo(i,new Nt(o))}if(t instanceof Ti)return Uo(i,t._key);throw new mt(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(t)}.`)}function dg(i,e){if(!Array.isArray(i)||0===i.length)throw new mt(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new mt(et.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Vd(i,e,t){if(!t.isEqual(e))throw new mt(et.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class hg{convertValue(e,t="none"){switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Et()}}convertObject(e,t){const o={};return za(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new kd(Pi(e.latitude),Pi(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Hs(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ta(e));default:return null}}convertTimestamp(e){const t=$s(e);return new ji(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=mr.fromString(e);Ft(bn(o));const u=new Ki(o.get(1),o.get(3)),d=new Nt(o.popFirst(5));return u.isEqual(t)||wt(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Ud(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Xm extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ti(this.firestore,null,t)}}class pf{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ju(e)}set(e,t,o){this._verifyNotCommitted();const u=wa(e,this._firestore),d=Ud(u.converter,t,o),y=Nd(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(y.toMutation(u._key,Zi.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=wa(e,this._firestore);let y;return y="string"==typeof(t=(0,je.m9)(t))||t instanceof cu?ng(this._dataReader,"WriteBatch.update",d._key,t,o,u):tg(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(y.toMutation(d._key,Zi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wa(e,this._firestore);return this._mutations=this._mutations.concat(new wl(t._key,Zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new mt(et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wa(i,e){if((i=(0,je.m9)(i)).firestore!==e)throw new mt(et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class nl extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ti(this.firestore,null,t)}}function fg(i,e,t){i=Pr(i,Ti);const o=Pr(i.firestore,Ai),u=Ud(i.converter,e,t);return Bc(o,[Nd(Ju(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,Zi.none())])}function sy(i,e,t,...o){i=Pr(i,Ti);const u=Pr(i.firestore,Ai),d=Ju(u);let y;return y="string"==typeof(e=(0,je.m9)(e))||e instanceof cu?ng(d,"updateDoc",i._key,e,t,o):tg(d,"updateDoc",i._key,e),Bc(u,[y.toMutation(i._key,Zi.exists(!0))])}function oy(i,...e){var t,o,u;i=(0,je.m9)(i);let d={includeMetadataChanges:!1},y=0;"object"!=typeof e[y]||zl(e[y])||(d=e[y],y++);const b={includeMetadataChanges:d.includeMetadataChanges};if(zl(e[y])){const Te=e[y];e[y]=null===(t=Te.next)||void 0===t?void 0:t.bind(Te),e[y+1]=null===(o=Te.error)||void 0===o?void 0:o.bind(Te),e[y+2]=null===(u=Te.complete)||void 0===u?void 0:u.bind(Te)}let B,G,oe;if(i instanceof Ti)G=Pr(i.firestore,Ai),oe=jo(i._key.path),B={next:Te=>{e[y]&&e[y](pg(G,i,Te))},error:e[y+1],complete:e[y+2]};else{const Te=Pr(i,no);G=Pr(Te.firestore,Ai),oe=Te._query;const Je=new nl(G);B={next:ft=>{e[y]&&e[y](new ql(G,Je,Te,ft))},error:e[y+1],complete:e[y+2]},_a(i._query)}return function(Te,Je,ft,gt){const sn=new Sd(gt),Hn=new qh(Je,sn,ft);return Te.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return vp(yield Xu(Te),Hn)})),()=>{sn.Ia(),Te.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return wp(yield Xu(Te),Hn)}))}}(Qi(G),oe,b,B)}function Bc(i,e){return function(t,o){const u=new Xr;return t.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return function wm(i,e,t){return Im.apply(this,arguments)}(yield Up(t),o,u)})),u.promise}(Qi(i),e)}function pg(i,e,t){const o=t.docs.get(e._key),u=new nl(i);return new hu(i,u,e._key,o,new el(t.hasPendingWrites,t.fromCache),e.converter)}class N_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ju(e)}get(e){const t=wa(e,this._firestore),o=new Xm(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Et();const d=u[0];if(d.isFoundDocument())return new Va(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new Va(this._firestore,o,t._key,null,t.converter);throw Et()})}set(e,t,o){const u=wa(e,this._firestore),d=Ud(u.converter,t,o),y=Nd(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,y),this}update(e,t,o,...u){const d=wa(e,this._firestore);let y;return y="string"==typeof(t=(0,je.m9)(t))||t instanceof cu?ng(this._dataReader,"Transaction.update",d._key,t,o,u):tg(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,y),this}delete(e){const t=wa(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wa(e,this._firestore),o=new nl(this._firestore);return super.get(e).then(u=>new hu(this._firestore,o,t._key,u._document,new el(!1,!1),t.converter))}}function gf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new mt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function gg(){if("undefined"==typeof Uint8Array)throw new mt("unimplemented","Uint8Arrays are not available in this environment.")}function mg(){if(!function zd(){return"undefined"!=typeof atob}())throw new mt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){L=J.SDK_VERSION,(0,J._registerComponent)(new le.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Ai(u,new ec(t.getProvider("auth-internal")),new Eu(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC")),(0,J.registerVersion)(v,"3.4.8",i),(0,J.registerVersion)(v,"3.4.8","esm2017")}();class jc{constructor(e){this._delegate=e}static fromBase64String(e){return mg(),new jc(ya.fromBase64String(e))}static fromUint8Array(e){return gg(),new jc(ya.fromUint8Array(e))}toBase64(){return mg(),this._delegate.toBase64()}toUint8Array(){return gg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mf(i){return function ly(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class cy{enableIndexedDbPersistence(e,t){return function e0(i,e){Qp(i=Pr(i,Ai));const t=Qi(i),o=i._freezeSettings(),u=new ef;return Pd(t,u,new Pp(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function D_(i){Qp(i=Pr(i,Ai));const e=Qi(i),t=i._freezeSettings(),o=new ef;return Pd(e,o,new Sm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function lf(i){if(i._initialized&&!i._terminated)throw new mt(et.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,F.Z)(function*(){try{yield(t=(0,F.Z)(function*(o){if(!da.vt())return Promise.resolve();const u=o+"main";yield da.delete(u)}),function(o){return t.apply(this,arguments)})(Sh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class yg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ki||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function I_(i,e,t,o={}){var u;const d=(i=Pr(i,Od))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&xn("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let y,b;if("string"==typeof o.mockUserToken)y=o.mockUserToken,b=x.MOCK_USER;else{y=(0,je.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const B=o.mockUserToken.sub||o.mockUserToken.user_id;if(!B)throw new mt(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new x(B)}i._authCredentials=new vu(new js(y,b))}}(this._delegate,e,t,o)}enableNetwork(){return function Bm(i){return function y_(i){return i.asyncQueue.enqueue((0,F.Z)(function*(){const e=yield Pm(i),t=yield m_(i);return e.setNetworkEnabled(!0),function(o){const u=St(o);return u.fu.delete(0),Fh(u)}(t)}))}(Qi(i=Pr(i,Ai)))}(this._delegate)}disableNetwork(){return function Zp(i){return function Zv(i){return i.asyncQueue.enqueue((0,F.Z)(function*(){const e=yield Pm(i),t=yield m_(i);return e.setNetworkEnabled(!1),(o=(0,F.Z)(function*(u){const d=St(u);d.fu.add(0),yield Ac(d),d.wu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Qi(i=Pr(i,Ai)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Hp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Um(i){return function(e){const t=new Xr;return e.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return function Ap(i,e){return Sp.apply(this,arguments)}(yield Up(e),t)})),t.promise}(Qi(i=Pr(i,Ai)))}(this._delegate)}onSnapshotsInSync(e){return function k_(i,e){return function Qv(i,e){const t=new Sd(e);return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return o=yield Xu(i),u=t,St(o).Eu.add(u),void u.next();var o,u})),()=>{t.Ia(),i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return o=yield Xu(i),u=t,void St(o).Eu.delete(u);var o,u}))}}(Qi(i=Pr(i,Ai)),zl(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new mt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gc(this,Gp(this._delegate,e))}catch(t){throw Ao(t,"collection()","Firestore.collection()")}}doc(e){try{return new Gs(this,zp(this._delegate,e))}catch(t){throw Ao(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new So(this,function Wp(i,e){if(i=Pr(i,Od),$p("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new mt(et.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new no(i,null,(t=e,new Io(mr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ao(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F_(i,e){return function E_(i,e){const t=new Xr;return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){const o=yield(u=i,rf(u).then(d=>d.datastore));var u;new g_(i.asyncQueue,o,e,t).run()})),t.promise}(Qi(i=Pr(i,Ai)),t=>e(new N_(i,t)))}(this._delegate,t=>e(new rl(this,t)))}batch(){return Qi(this._delegate),new hy(new pf(this._delegate,e=>Bc(this._delegate,e)))}loadBundle(e){return function jm(i,e){const t=Qi(i=Pr(i,Ai)),o=new Vm;return function Nc(i,e,t,o){const u=function(d,y){let b;return b="string"==typeof d?(new TextEncoder).encode(d):d,B=function(B,G){if(B instanceof Uint8Array)return kp(B,G);if(B instanceof ArrayBuffer)return kp(new Uint8Array(B),G);if(B instanceof ReadableStream)return B.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(b),new Mm(B,y);var B}(t,wd(e));i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){!function Am(i,e,t){const o=St(i);var u;(u=(0,F.Z)(function*(d,y,b){try{const B=yield y.getMetadata();if(yield function(Je,ft){const gt=St(Je),sn=Cs(ft.createTime);return gt.persistence.runTransaction("hasNewerBundle","readonly",Hn=>gt._s.getBundleMetadata(Hn,ft.id)).then(Hn=>!!Hn&&Hn.createTime.compareTo(sn)>=0)}(d.localStore,B))return yield y.close(),b._completeWith({taskState:"Success",documentsLoaded:(Je=B).totalDocuments,bytesLoaded:Je.totalBytes,totalDocuments:Je.totalDocuments,totalBytes:Je.totalBytes}),Promise.resolve(new Set);b._updateProgress(gm(B));const G=new o_(B,d.localStore,y.M);let oe=yield y.da();for(;oe;){const Je=yield G.ku(oe);Je&&b._updateProgress(Je),oe=yield y.da()}const Te=yield G.complete();return yield ea(d,Te.Fu,void 0),yield function(Je,ft){const gt=St(Je);return gt.persistence.runTransaction("Save bundle","readwrite",sn=>gt._s.saveBundleMetadata(sn,ft))}(d.localStore,B),b._completeWith(Te.progress),Promise.resolve(Te.Ou)}catch(B){return xn("SyncEngine",`Loading bundle failed with ${B}`),b._failWith(B),Promise.resolve(new Set)}var Je}),function(d,y,b){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Up(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Yp(i,e){return function w_(i,e){return i.asyncQueue.enqueue((0,F.Z)(function*(){return function(t,o){const u=St(t);return u.persistence.runTransaction("Get named query","readonly",d=>u._s.getNamedQuery(d,o))}(yield Vp(i),e)}))}(Qi(i=Pr(i,Ai)),e).then(t=>t?new no(i,null,t.query):null)}(this._delegate,e).then(t=>t?new So(this,t):null)}}class Bd extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new jc(new ya(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Gs.forKey(t,this.firestore,null)}}class rl{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}get(e){const t=Yl(e);return this._delegate.get(t).then(o=>new $c(this._firestore,new hu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Yl(e);return o?(gf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Yl(e);return this._delegate.delete(t),this}}class hy{constructor(e){this._delegate=e}set(e,t,o){const u=Yl(e);return o?(gf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Yl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Vc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hc(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Zl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Zl(e,new Bd(e),t),u.set(t,d)),d}}Zl.INSTANCES=new WeakMap;class Gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new mt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Gs(t,new Ti(t._delegate,o,new Nt(e)))}static forKey(e,t,o){return new Gs(t,new Ti(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Gc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gc(this.firestore,Gp(this._delegate,e))}catch(t){throw Ao(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,je.m9)(e))instanceof Ti&&af(this._delegate,e)}set(e,t){t=gf("DocumentReference.set",t);try{return t?fg(this._delegate,e,t):fg(this._delegate,e)}catch(o){throw Ao(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?sy(this._delegate,e):sy(this._delegate,e,t,...o)}catch(u){throw Ao(u,"updateDoc()","DocumentReference.update()")}}delete(){return function O_(i){return Bc(Pr(i.firestore,Ai),[new wl(i._key,Zi.none())])}(this._delegate)}onSnapshot(...e){const t=yf(e),o=H_(e,u=>new $c(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return oy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ey(i){i=Pr(i,Ti);const e=Pr(i.firestore,Ai),t=Qi(e),o=new nl(e);return function Yv(i,e){const t=new Xr;return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return(o=(0,F.Z)(function*(u,d,y){try{const b=yield function(B,G){const oe=St(B);return oe.persistence.runTransaction("read document","readonly",Te=>oe.ci.Ls(Te,G))}(u,d);b.isFoundDocument()?y.resolve(b):b.isNoDocument()?y.resolve(null):y.reject(new mt(et.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(b){const B=$l(b,`Failed to get document '${d} from cache`);y.reject(B)}}),function(u,d,y){return o.apply(this,arguments)})(yield Vp(i),e,t);var o})),t.promise}(t,i._key).then(u=>new hu(e,o,i._key,u,new el(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ty(i){i=Pr(i,Ti);const e=Pr(i.firestore,Ai);return __(Qi(e),i._key,{source:"server"}).then(t=>pg(e,i,t))}(this._delegate):function Jm(i){i=Pr(i,Ti);const e=Pr(i.firestore,Ai);return __(Qi(e),i._key).then(t=>pg(e,i,t))}(this._delegate),t.then(o=>new $c(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Gs(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function Ao(i,e,t){return i.message=i.message.replace(e,t),i}function yf(i){for(const e of i)if("object"==typeof e&&!mf(e))return e;return{}}function H_(i,e){var t,o;let u;return u=mf(i[0])?i[0]:mf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class $c{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ff(this._delegate,e._delegate)}}class Hc extends $c{data(e){const t=this._delegate.data(e);return function ws(i,e){i||Et()}(void 0!==t),t}}class So{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bd(e)}where(e,t,o){try{return new So(this.firestore,tl(this._delegate,function va(i,e,t){const o=e,u=hf("where",i);return new Ua(u,o,t)}(e,t,o)))}catch(u){throw Ao(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new So(this.firestore,tl(this._delegate,function qm(i,e="asc"){const t=e,o=hf("orderBy",i);return new Ea(o,t)}(e,t)))}catch(o){throw Ao(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new So(this.firestore,tl(this._delegate,function S_(i){return Nm("limit",i),new ug("limit",i,"F")}(e)))}catch(t){throw Ao(t,"limit()","Query.limit()")}}limitToLast(e){try{return new So(this.firestore,tl(this._delegate,function M_(i){return Nm("limitToLast",i),new ug("limitToLast",i,"L")}(e)))}catch(t){throw Ao(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new So(this.firestore,tl(this._delegate,function x_(...i){return new Zm("startAt",i,!0)}(...e)))}catch(t){throw Ao(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new So(this.firestore,tl(this._delegate,function lg(...i){return new Zm("startAfter",i,!1)}(...e)))}catch(t){throw Ao(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new So(this.firestore,tl(this._delegate,function R_(...i){return new Uc("endBefore",i,!1)}(...e)))}catch(t){throw Ao(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new So(this.firestore,tl(this._delegate,function Ym(...i){return new Uc("endAt",i,!0)}(...e)))}catch(t){throw Ao(t,"endAt()","Query.endAt()")}}isEqual(e){return Lm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ry(i){i=Pr(i,no);const e=Pr(i.firestore,Ai),t=Qi(e),o=new nl(e);return function v_(i,e){const t=new Xr;return i.asyncQueue.enqueueAndForget((0,F.Z)(function*(){return(o=(0,F.Z)(function*(u,d,y){try{const b=yield au(u,d,!0),B=new bp(d,b.li),G=B.Gu(b.documents),oe=B.applyChanges(G,!1);y.resolve(oe.snapshot)}catch(b){const B=$l(b,`Failed to execute query '${d} against cache`);y.reject(B)}}),function(u,d,y){return o.apply(this,arguments)})(yield Vp(i),e,t);var o})),t.promise}(t,i._query).then(u=>new ql(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function iy(i){i=Pr(i,no);const e=Pr(i.firestore,Ai),t=Qi(e),o=new nl(e);return Bp(t,i._query,{source:"server"}).then(u=>new ql(e,o,i,u))}(this._delegate):function ny(i){i=Pr(i,no);const e=Pr(i.firestore,Ai),t=Qi(e),o=new nl(e);return _a(i._query),Bp(t,i._query).then(u=>new ql(e,o,i,u))}(this._delegate),t.then(o=>new _g(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=yf(e),o=H_(e,u=>new _g(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return oy(this._delegate,t,o)}withConverter(e){return new So(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}class Rn{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _g{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new So(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Rn(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Hc(this._firestore,o))})}isEqual(e){return ff(this._delegate,e._delegate)}}class Gc extends So{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gs(this.firestore,e):null}doc(e){try{return new Gs(this.firestore,void 0===e?zp(this._delegate):zp(this._delegate,e))}catch(t){throw Ao(t,"doc()","CollectionReference.doc()")}}add(e){return function P_(i,e){const t=Pr(i.firestore,Ai),o=zp(i),u=Ud(i.converter,e);return Bc(t,[Nd(Ju(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Zi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Gs(this.firestore,t))}isEqual(e){return af(this._delegate,e._delegate)}withConverter(e){return new Gc(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function Yl(i){return Pr(i,Ti)}class Wc{constructor(...e){this._delegate=new cu(...e)}static documentId(){return new Wc(ms.keyField().canonicalString())}isEqual(e){return(e=(0,je.m9)(e))instanceof cu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ql{constructor(e){this._delegate=e}static serverTimestamp(){const e=function V_(){return new cf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ql(e)}static delete(){const e=function L_(){return new Lc("deleteField")}();return e._methodName="FieldValue.delete",new Ql(e)}static arrayUnion(...e){const t=function U_(...i){return new Gm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Ql(t)}static arrayRemove(...e){const t=function B_(...i){return new Wm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Ql(t)}static increment(e){const t=function j_(i){return new t0("increment",i)}(e);return t._methodName="FieldValue.increment",new Ql(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _f={Firestore:yg,GeoPoint:kd,Timestamp:ji,Blob:jc,Transaction:rl,WriteBatch:hy,DocumentReference:Gs,DocumentSnapshot:$c,Query:So,QueryDocumentSnapshot:Hc,QuerySnapshot:_g,CollectionReference:Gc,FieldPath:Wc,FieldValue:Ql,setLogLevel:function dy(i){!function ve(i){q.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function us(i){(function vf(i,e){i.INTERNAL.registerComponent(new le.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},_f)))})(i,(e,t)=>new yg(e,t,new cy)),i.registerVersion("@firebase/firestore-compat","0.1.17")}(j.Z);var Xl=k(1205),fy=k(440),G_=k(127);function vg(i,e){return function W_(i,e=K.z){return new Y.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function Ef(i,e){return vg(i,e).pipe((0,ze.U)(t=>({payload:t,type:"query"})))}function jd(i,e){return Ef(i,e).pipe((0,He.O)(void 0),Fe(),(0,ze.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(y=>({type:y.type,payload:y}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((y,b)=>{const B=u.find(oe=>oe.doc.ref.isEqual(y.ref)),G=null==t?void 0:t.payload.docs.find(oe=>oe.ref.isEqual(y.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(y.metadata)||!B&&G&&JSON.stringify(G.metadata)===JSON.stringify(y.metadata)||d.push({type:"modified",payload:{oldIndex:b,newIndex:b,type:"modified",doc:y}})}),d}))}function gy(i,e,t){return jd(i,t).pipe((0,Ze.R)((o,u)=>function z_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function $d(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Eg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Eg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Eg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function re(i,e=ue.y){return i=null!=i?i:_e,(0,Oe.e)((t,o)=>{let u,d=!0;t.subscribe((0,Re.x)(o,y=>{const b=e(y);(d||!i(u,b))&&(d=!1,u=b,o.next(y))}))})}(),(0,ze.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Eg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function my(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class yy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=jd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ze.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,He.O)(void 0),Fe(),(0,ct.h)(([o,u])=>u.length>0||!o),(0,ze.U)(([o,u])=>u),Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ze.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return Ef(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Ae.iC)}get(e){return(0,we.D)(this.query.get(e)).pipe(Ae.iC)}add(e){return this.ref.add(e)}doc(e){return new _y(this.ref.doc(e),this.afs)}}class _y{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=zc(o,t);return new yy(u,d,this.afs)}snapshotChanges(){return function py(i,e){return vg(i,e).pipe((0,He.O)(void 0),Fe(),(0,ze.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ze.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,we.D)(this.ref.get(e)).pipe(Ae.iC)}}class wf{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jd(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,ct.h)(t=>t.length>0),Ae.iC):jd(this.query,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ze.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=my(e);return gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return Ef(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Ae.iC)}get(e){return(0,we.D)(this.query.get(e)).pipe(Ae.iC)}}const wg=new p.OlP("angularfire2.enableFirestorePersistence"),Ig=new p.OlP("angularfire2.firestore.persistenceSettings"),vy=new p.OlP("angularfire2.firestore.settings"),K_=new p.OlP("angularfire2.firestore.use-emulator");function zc(i,e=(t=>t)){return{query:e(i),ref:i}}let Kc=(()=>{class i{constructor(t,o,u,d,y,b,B,G,oe,Te,Je,ft,gt,sn,Hn,Si,Ni){this.schedulers=B;const hi=(0,Be.on)(t,b,o),Ts=oe;Te&&(0,Xl.nw)(hi,b,Je,gt,sn,Hn,ft,Si),[this.firestore,this.persistenceEnabled$]=(0,Be.cc)(`${hi.name}.firestore`,"AngularFirestore",hi.name,()=>{const Fi=b.runOutsideAngular(()=>hi.firestore());if(d&&Fi.settings(d),Ts&&Fi.useEmulator(...Ts),u&&!(0,ke.PM)(y)){const Xi=()=>{try{return(0,we.D)(Fi.enablePersistence(G||void 0).then(()=>!0,()=>!1))}catch(ro){return"undefined"!=typeof console&&console.warn(ro),(0,me.of)(!1)}};return[Fi,b.runOutsideAngular(Xi)]}return[Fi,(0,me.of)(!1)]},[d,Ts,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:y}=zc(u,o),b=this.schedulers.ngZone.run(()=>d);return new yy(b,y,this)}collectionGroup(t,o){const u=o||(y=>y),d=this.firestore.collectionGroup(t);return new wf(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new _y(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Be.Dh),p.LFG(Be.xv,8),p.LFG(wg,8),p.LFG(vy,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ae.HU),p.LFG(Ig,8),p.LFG(K_,8),p.LFG(Xl.zQ,8),p.LFG(Xl.Qv,8),p.LFG(Xl.L6,8),p.LFG(Xl._Q,8),p.LFG(Xl.rT,8),p.LFG(Xl.lh,8),p.LFG(Xl.f7,8),p.LFG(fy.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),q_=(()=>{class i{constructor(){G_.Z.registerVersion("angularfire",Ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:wg,useValue:!0},{provide:Ig,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[Kc]}),i})()},2084:(Mt,We,k)=>{k.d(We,{Q1:()=>Os,TE:()=>S});var p=k(9751),K=k(9646),Y=k(8996),we=k(4986),me=k(4482),Ae=k(5403),Re=k(4004),Fe=k(3900),ue=k(5813),re=k(5e3),_e=k(2011),He=k(3942),ze=k(5861),Ze=k(9681),ct=k(2090),Be=k(4859);const ke="firebasestorage.googleapis.com",vt="storageBucket";class J extends ct.ZR{constructor(D,z){super(le(D),`Firebase Storage: ${z} (${le(D)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,J.prototype)}_codeEquals(D){return le(D)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(D){this.customData.serverResponse=D,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function le(m){return"storage/"+m}function Le(){return new J("unknown","An unknown error occurred, please check the error payload for server response.")}function Ye(){return new J("canceled","User canceled the upload/download.")}function Lt(){return new J("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function qt(m){return new J("invalid-argument",m)}function Rt(){return new J("app-deleted","The Firebase app was deleted.")}function Vt(m){return new J("invalid-root-operation","The operation '"+m+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lt(m,D){return new J("invalid-format","String does not match format '"+m+"': "+D)}function pn(m){throw new J("internal-error","Internal error: "+m)}class en{constructor(D,z){this.bucket=D,this.path_=z}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const D=encodeURIComponent;return"/b/"+D(this.bucket)+"/o/"+D(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(D,z){let ee;try{ee=en.makeFromUrl(D,z)}catch(De){return new en(D,"")}if(""===ee.path)return ee;throw function Wt(m){return new J("invalid-default-bucket","Invalid default bucket '"+m+"'.")}(D)}static makeFromUrl(D,z){let ee=null;const De="([A-Za-z0-9.\\-_]+)",Ht=new RegExp("^gs://"+De+"(/(.*))?$","i");function _n(li){li.path_=decodeURIComponent(li.path)}const zr=z.replace(/[.]/g,"\\."),Kr=[{regex:Ht,indices:{bucket:1,path:3},postModify:function Ke(li){"/"===li.path.charAt(li.path.length-1)&&(li.path_=li.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${zr}/v[A-Za-z0-9_]+/b/${De}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_n},{regex:new RegExp(`^https?://${z===ke?"(?:storage.googleapis.com|storage.cloud.google.com)":z}/${De}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_n}];for(let li=0;li<Kr.length;li++){const Or=Kr[li],As=Or.regex.exec(D);if(As){let Ls=As[Or.indices.path];Ls||(Ls=""),ee=new en(As[Or.indices.bucket],Ls),Or.postModify(ee);break}}if(null==ee)throw function $e(m){return new J("invalid-url","Invalid URL '"+m+"'.")}(D);return ee}}class mn{constructor(D){this.promise_=Promise.reject(D)}getPromise(){return this.promise_}cancel(D=!1){}}function zn(m){return"string"==typeof m||m instanceof String}function Ar(m){return jn()&&m instanceof Blob}function jn(){return"undefined"!=typeof Blob}function ht(m,D,z,ee){if(ee<D)throw qt(`Invalid value for '${m}'. Expected ${D} or greater.`);if(ee>z)throw qt(`Invalid value for '${m}'. Expected ${z} or less.`)}function Qt(m,D,z){let ee=D;return null==z&&(ee=`https://${D}`),`${z}://${ee}/v0${m}`}function vn(m){const D=encodeURIComponent;let z="?";for(const ee in m)m.hasOwnProperty(ee)&&(z=z+(D(ee)+"=")+D(m[ee])+"&");return z=z.slice(0,-1),z}var on=(()=>{return(m=on||(on={}))[m.NO_ERROR=0]="NO_ERROR",m[m.NETWORK_ERROR=1]="NETWORK_ERROR",m[m.ABORT=2]="ABORT",on;var m})();class Nr{constructor(D,z,ee,De,Ke,st,Ht,Ot,_n,Wn,zr){this.url_=D,this.method_=z,this.headers_=ee,this.body_=De,this.successCodes_=Ke,this.additionalRetryCodes_=st,this.callback_=Ht,this.errorCallback_=Ot,this.timeout_=_n,this.progressCallback_=Wn,this.connectionFactory_=zr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((pr,qn)=>{this.resolve_=pr,this.reject_=qn,this.start_()})}start_(){const z=(ee,De)=>{const Ke=this.resolve_,st=this.reject_,Ht=De.connection;if(De.wasSuccessCode)try{const Ot=this.callback_(Ht,Ht.getResponse());!function cr(m){return void 0!==m}(Ot)?Ke():Ke(Ot)}catch(Ot){st(Ot)}else if(null!==Ht){const Ot=Le();Ot.serverResponse=Ht.getErrorText(),st(this.errorCallback_?this.errorCallback_(Ht,Ot):Ot)}else st(De.canceled?this.appDelete_?Rt():Ye():function de(){return new J("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?z(0,new yi(!1,null,!0)):this.backoffId_=function Qn(m,D,z){let ee=1,De=null,Ke=null,st=!1,Ht=0;function Ot(){return 2===Ht}let _n=!1;function Wn(...gr){_n||(_n=!0,D.apply(null,gr))}function zr(gr){De=setTimeout(()=>{De=null,m(qn,Ot())},gr)}function pr(){Ke&&clearTimeout(Ke)}function qn(gr,...si){if(_n)return void pr();if(gr)return pr(),void Wn.call(null,gr,...si);if(Ot()||st)return pr(),void Wn.call(null,gr,...si);let Kr;ee<64&&(ee*=2),1===Ht?(Ht=2,Kr=0):Kr=1e3*(ee+Math.random()),zr(Kr)}let Zn=!1;function Ri(gr){Zn||(Zn=!0,pr(),!_n&&(null!==De?(gr||(Ht=2),clearTimeout(De),zr(0)):gr||(Ht=1)))}return zr(0),Ke=setTimeout(()=>{st=!0,Ri(!0)},z),Ri}((ee,De)=>{if(De)return void ee(!1,new yi(!1,null,!0));const Ke=this.connectionFactory_();this.pendingConnection_=Ke;const st=Ht=>{null!==this.progressCallback_&&this.progressCallback_(Ht.loaded,Ht.lengthComputable?Ht.total:-1)};null!==this.progressCallback_&&Ke.addUploadProgressListener(st),Ke.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ke.removeUploadProgressListener(st),this.pendingConnection_=null;const Ht=Ke.getErrorCode()===on.NO_ERROR,Ot=Ke.getStatus();if(!Ht||this.isRetryStatusCode_(Ot)){const Wn=Ke.getErrorCode()===on.ABORT;return void ee(!1,new yi(!1,null,Wn))}const _n=-1!==this.successCodes_.indexOf(Ot);ee(!0,new yi(_n,Ke))})},z,this.timeout_)}getPromise(){return this.promise_}cancel(D){this.canceled_=!0,this.appDelete_=D||!1,null!==this.backoffId_&&function Bn(m){m(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(D){const z=D>=500&&D<600,De=-1!==[408,429].indexOf(D),Ke=-1!==this.additionalRetryCodes_.indexOf(D);return z||De||Ke}}class yi{constructor(D,z,ee){this.wasSuccessCode=D,this.connection=z,this.canceled=!!ee}}function rn(...m){const D=function jt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==D){const z=new D;for(let ee=0;ee<m.length;ee++)z.append(m[ee]);return z.getBlob()}if(jn())return new Blob(m);throw new J("unsupported-environment","This browser doesn't seem to support creating Blobs")}const gn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _i{constructor(D,z){this.data=D,this.contentType=z||null}}function _r(m,D){switch(m){case gn.RAW:return new _i(Lr(D));case gn.BASE64:case gn.BASE64URL:return new _i(Sr(m,D));case gn.DATA_URL:return new _i(function Pt(m){const D=new In(m);return D.base64?Sr(gn.BASE64,D.rest):function tn(m){let D;try{D=decodeURIComponent(m)}catch(z){throw lt(gn.DATA_URL,"Malformed data URL.")}return Lr(D)}(D.rest)}(D),function ot(m){return new In(m).contentType}(D))}throw Le()}function Lr(m){const D=[];for(let z=0;z<m.length;z++){let ee=m.charCodeAt(z);ee<=127?D.push(ee):ee<=2047?D.push(192|ee>>6,128|63&ee):55296==(64512&ee)?z<m.length-1&&56320==(64512&m.charCodeAt(z+1))?(ee=65536|(1023&ee)<<10|1023&m.charCodeAt(++z),D.push(240|ee>>18,128|ee>>12&63,128|ee>>6&63,128|63&ee)):D.push(239,191,189):56320==(64512&ee)?D.push(239,191,189):D.push(224|ee>>12,128|ee>>6&63,128|63&ee)}return new Uint8Array(D)}function Sr(m,D){switch(m){case gn.BASE64:{const De=-1!==D.indexOf("-"),Ke=-1!==D.indexOf("_");if(De||Ke)throw lt(m,"Invalid character '"+(De?"-":"_")+"' found: is it base64url encoded?");break}case gn.BASE64URL:{const De=-1!==D.indexOf("+"),Ke=-1!==D.indexOf("/");if(De||Ke)throw lt(m,"Invalid character '"+(De?"+":"/")+"' found: is it base64 encoded?");D=D.replace(/-/g,"+").replace(/_/g,"/");break}}let z;try{z=function dr(m){return atob(m)}(D)}catch(De){throw lt(m,"Invalid character found")}const ee=new Uint8Array(z.length);for(let De=0;De<z.length;De++)ee[De]=z.charCodeAt(De);return ee}class In{constructor(D){this.base64=!1,this.contentType=null;const z=D.match(/^data:([^,]+)?,/);if(null===z)throw lt(gn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const ee=z[1]||null;null!=ee&&(this.base64=function Ut(m,D){return m.length>=D.length&&m.substring(m.length-D.length)===D}(ee,";base64"),this.contentType=this.base64?ee.substring(0,ee.length-7):ee),this.rest=D.substring(D.indexOf(",")+1)}}class kt{constructor(D,z){let ee=0,De="";Ar(D)?(this.data_=D,ee=D.size,De=D.type):D instanceof ArrayBuffer?(z?this.data_=new Uint8Array(D):(this.data_=new Uint8Array(D.byteLength),this.data_.set(new Uint8Array(D))),ee=this.data_.length):D instanceof Uint8Array&&(z?this.data_=D:(this.data_=new Uint8Array(D.length),this.data_.set(D)),ee=D.length),this.size_=ee,this.type_=De}size(){return this.size_}type(){return this.type_}slice(D,z){if(Ar(this.data_)){const De=function Sn(m,D,z){return m.webkitSlice?m.webkitSlice(D,z):m.mozSlice?m.mozSlice(D,z):m.slice?m.slice(D,z):null}(this.data_,D,z);return null===De?null:new kt(De)}{const ee=new Uint8Array(this.data_.buffer,D,z-D);return new kt(ee,!0)}}static getBlob(...D){if(jn()){const z=D.map(ee=>ee instanceof kt?ee.data_:ee);return new kt(rn.apply(null,z))}{const z=D.map(st=>zn(st)?_r(gn.RAW,st).data:st.data_);let ee=0;z.forEach(st=>{ee+=st.byteLength});const De=new Uint8Array(ee);let Ke=0;return z.forEach(st=>{for(let Ht=0;Ht<st.length;Ht++)De[Ke++]=st[Ht]}),new kt(De,!0)}}uploadData(){return this.data_}}function Tt(m){let D;try{D=JSON.parse(m)}catch(z){return null}return function Tr(m){return"object"==typeof m&&!Array.isArray(m)}(D)?D:null}function ie(m){const D=m.lastIndexOf("/",m.length-2);return-1===D?m:m.slice(D+1)}function Ce(m,D){return D}class qe{constructor(D,z,ee,De){this.server=D,this.local=z||D,this.writable=!!ee,this.xform=De||Ce}}let Ve=null;function Kt(){if(Ve)return Ve;const m=[];m.push(new qe("bucket")),m.push(new qe("generation")),m.push(new qe("metageneration")),m.push(new qe("name","fullPath",!0));const z=new qe("name");z.xform=function D(Ke,st){return function Ct(m){return!zn(m)||m.length<2?m:ie(m)}(st)},m.push(z);const De=new qe("size");return De.xform=function ee(Ke,st){return void 0!==st?Number(st):st},m.push(De),m.push(new qe("timeCreated")),m.push(new qe("updated")),m.push(new qe("md5Hash",null,!0)),m.push(new qe("cacheControl",null,!0)),m.push(new qe("contentDisposition",null,!0)),m.push(new qe("contentEncoding",null,!0)),m.push(new qe("contentLanguage",null,!0)),m.push(new qe("contentType",null,!0)),m.push(new qe("metadata","customMetadata",!0)),Ve=m,Ve}function wn(m,D,z){const ee=Tt(D);return null===ee?null:function Mr(m,D,z){const ee={type:"file"},De=z.length;for(let Ke=0;Ke<De;Ke++){const st=z[Ke];ee[st.local]=st.xform(ee,D[st.server])}return function Tn(m,D){Object.defineProperty(m,"ref",{get:function z(){const Ke=new en(m.bucket,m.fullPath);return D._makeStorageReference(Ke)}})}(ee,m),ee}(m,ee,z)}function nn(m,D){const z={},ee=D.length;for(let De=0;De<ee;De++){const Ke=D[De];Ke.writable&&(z[Ke.server]=m[Ke.local])}return JSON.stringify(z)}const Nn="prefixes";class hr{constructor(D,z,ee,De){this.url=D,this.method=z,this.handler=ee,this.timeout=De,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function sr(m){if(!m)throw Le()}function Xn(m,D){return function z(ee,De){const Ke=wn(m,De,D);return sr(null!==Ke),Ke}}function dt(m){return function D(z,ee){let De;return De=401===z.getStatus()?z.getErrorText().includes("Firebase App Check token is invalid")?function Q(){return new J("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Ie(){return new J("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===z.getStatus()?function Ne(m){return new J("quota-exceeded","Quota for bucket '"+m+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(m.bucket):403===z.getStatus()?function Se(m){return new J("unauthorized","User does not have permission to access '"+m+"'.")}(m.path):ee,De.serverResponse=ee.serverResponse,De}}function $t(m){const D=dt(m);return function z(ee,De){let Ke=D(ee,De);return 404===ee.getStatus()&&(Ke=function je(m){return new J("object-not-found","Object '"+m+"' does not exist.")}(m.path)),Ke.serverResponse=De.serverResponse,Ke}}function hn(m,D,z){const De=Qt(D.fullServerUrl(),m.host,m._protocol),st=m.maxOperationRetryTime,Ht=new hr(De,"GET",Xn(m,z),st);return Ht.errorHandler=$t(D),Ht}function er(m,D,z,ee,De){const Ke={};Ke.prefix=D.isRoot?"":D.path+"/",z&&z.length>0&&(Ke.delimiter=z),ee&&(Ke.pageToken=ee),De&&(Ke.maxResults=De);const Ht=Qt(D.bucketOnlyServerUrl(),m.host,m._protocol),_n=m.maxOperationRetryTime,Wn=new hr(Ht,"GET",function Gi(m,D){return function z(ee,De){const Ke=function ls(m,D,z){const ee=Tt(z);return null===ee?null:function pi(m,D,z){const ee={prefixes:[],items:[],nextPageToken:z.nextPageToken};if(z[Nn])for(const De of z[Nn]){const Ke=De.replace(/\/$/,""),st=m._makeStorageReference(new en(D,Ke));ee.prefixes.push(st)}if(z.items)for(const De of z.items){const Ke=m._makeStorageReference(new en(D,De.name));ee.items.push(Ke)}return ee}(m,D,ee)}(m,D,De);return sr(null!==Ke),Ke}}(m,D.bucket),_n);return Wn.urlParams=Ke,Wn.errorHandler=dt(D),Wn}function ai(m,D,z){const ee=Object.assign({},z);return ee.fullPath=m.path,ee.size=D.size(),ee.contentType||(ee.contentType=function Er(m,D){return m&&m.contentType||D&&D.type()||"application/octet-stream"}(null,D)),ee}class wr{constructor(D,z,ee,De){this.current=D,this.total=z,this.finalized=!!ee,this.metadata=De||null}}function vi(m,D){let z=null;try{z=m.getResponseHeader("X-Goog-Upload-Status")}catch(De){sr(!1)}return sr(!!z&&-1!==(D||["active"]).indexOf(z)),z}const jr={STATE_CHANGED:"state_changed"},Pn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fn(m){switch(m){case"running":case"pausing":case"canceling":return Pn.RUNNING;case"paused":return Pn.PAUSED;case"success":return Pn.SUCCESS;case"canceled":return Pn.CANCELED;default:return Pn.ERROR}}class Ji{constructor(D,z,ee){if(function rr(m){return"function"==typeof m}(D)||null!=z||null!=ee)this.next=D,this.error=null!=z?z:void 0,this.complete=null!=ee?ee:void 0;else{const Ke=D;this.next=Ke.next,this.error=Ke.error,this.complete=Ke.complete}}}function br(m){return(...D)=>{Promise.resolve().then(()=>m(...D))}}class xs extends class ti{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=on.NO_ERROR,this.sendPromise_=new Promise(D=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=on.ABORT,D()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=on.NETWORK_ERROR,D()}),this.xhr_.addEventListener("load",()=>{D()})})}send(D,z,ee,De){if(this.sent_)throw pn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(z,D,!0),void 0!==De)for(const Ke in De)De.hasOwnProperty(Ke)&&this.xhr_.setRequestHeader(Ke,De[Ke].toString());return void 0!==ee?this.xhr_.send(ee):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(D){return-1}}getResponse(){if(!this.sent_)throw pn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(D){return this.xhr_.getResponseHeader(D)}addUploadProgressListener(D){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",D)}removeUploadProgressListener(D){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",D)}}{initXhr(){this.xhr_.responseType="text"}}function ar(){return new xs}class te{constructor(D,z,ee=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=D,this._blob=z,this._metadata=ee,this._mappings=Kt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=De=>{this._request=void 0,this._chunkMultiplier=1,De._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=De,this._transition("error"))},this._metadataErrorHandler=De=>{this._request=void 0,De._codeEquals("canceled")?this.completeTransitions_():(this._error=De,this._transition("error"))},this._promise=new Promise((De,Ke)=>{this._resolve=De,this._reject=Ke,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const D=this._transferred;return z=>this._updateProgress(D+z)}_shouldDoResumable(D){return D.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(D){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([z,ee])=>{switch(this._state){case"running":D(z,ee);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((D,z)=>{const ee=function Li(m,D,z,ee,De){const Ke=D.bucketOnlyServerUrl(),st=ai(D,ee,De),Ht={name:st.fullPath},Ot=Qt(Ke,m.host,m._protocol),Wn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${ee.size()}`,"X-Goog-Upload-Header-Content-Type":st.contentType,"Content-Type":"application/json; charset=utf-8"},zr=nn(st,z),Zn=new hr(Ot,"POST",function qn(Ri){let gr;vi(Ri);try{gr=Ri.getResponseHeader("X-Goog-Upload-URL")}catch(si){sr(!1)}return sr(zn(gr)),gr},m.maxUploadRetryTime);return Zn.urlParams=Ht,Zn.headers=Wn,Zn.body=zr,Zn.errorHandler=dt(D),Zn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),De=this._ref.storage._makeRequest(ee,ar,D,z);this._request=De,De.getPromise().then(Ke=>{this._request=void 0,this._uploadUrl=Ke,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const D=this._uploadUrl;this._resolveToken((z,ee)=>{const De=function Yr(m,D,z,ee){const Ot=new hr(z,"POST",function Ke(_n){const Wn=vi(_n,["active","final"]);let zr=null;try{zr=_n.getResponseHeader("X-Goog-Upload-Size-Received")}catch(qn){sr(!1)}zr||sr(!1);const pr=Number(zr);return sr(!isNaN(pr)),new wr(pr,ee.size(),"final"===Wn)},m.maxUploadRetryTime);return Ot.headers={"X-Goog-Upload-Command":"query"},Ot.errorHandler=dt(D),Ot}(this._ref.storage,this._ref._location,D,this._blob),Ke=this._ref.storage._makeRequest(De,ar,z,ee);this._request=Ke,Ke.getPromise().then(st=>{st=st,this._request=void 0,this._updateProgress(st.current),this._needToFetchStatus=!1,st.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const D=262144*this._chunkMultiplier,z=new wr(this._transferred,this._blob.size()),ee=this._uploadUrl;this._resolveToken((De,Ke)=>{let st;try{st=function Vr(m,D,z,ee,De,Ke,st,Ht){const Ot=new wr(0,0);if(st?(Ot.current=st.current,Ot.total=st.total):(Ot.current=0,Ot.total=ee.size()),ee.size()!==Ot.total)throw function pt(){return new J("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _n=Ot.total-Ot.current;let Wn=_n;De>0&&(Wn=Math.min(Wn,De));const zr=Ot.current,Zn={"X-Goog-Upload-Command":Wn===_n?"upload, finalize":"upload","X-Goog-Upload-Offset":`${Ot.current}`},Ri=ee.slice(zr,zr+Wn);if(null===Ri)throw Lt();const Kr=new hr(z,"POST",function gr(li,Or){const As=vi(li,["active","final"]),io=Ot.current+Wn,Ls=ee.size();let Mo;return Mo="final"===As?Xn(D,Ke)(li,Or):null,new wr(io,Ls,"final"===As,Mo)},D.maxUploadRetryTime);return Kr.headers=Zn,Kr.body=Ri.uploadData(),Kr.progressCallback=Ht||null,Kr.errorHandler=dt(m),Kr}(this._ref._location,this._ref.storage,ee,this._blob,D,this._mappings,z,this._makeProgressCallback())}catch(Ot){return this._error=Ot,void this._transition("error")}const Ht=this._ref.storage._makeRequest(st,ar,De,Ke);this._request=Ht,Ht.getPromise().then(Ot=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Ot.current),Ot.finalized?(this._metadata=Ot.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((D,z)=>{const ee=hn(this._ref.storage,this._ref._location,this._mappings),De=this._ref.storage._makeRequest(ee,ar,D,z);this._request=De,De.getPromise().then(Ke=>{this._request=void 0,this._metadata=Ke,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((D,z)=>{const ee=function yn(m,D,z,ee,De){const Ke=D.bucketOnlyServerUrl(),st={"X-Goog-Upload-Protocol":"multipart"},Ot=function Ht(){let Kr="";for(let li=0;li<2;li++)Kr+=Math.random().toString().slice(2);return Kr}();st["Content-Type"]="multipart/related; boundary="+Ot;const _n=ai(D,ee,De),Wn=nn(_n,z),qn=kt.getBlob("--"+Ot+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Wn+"\r\n--"+Ot+"\r\nContent-Type: "+_n.contentType+"\r\n\r\n",ee,"\r\n--"+Ot+"--");if(null===qn)throw Lt();const Zn={name:_n.fullPath},Ri=Qt(Ke,m.host,m._protocol),si=m.maxUploadRetryTime,Bi=new hr(Ri,"POST",Xn(m,z),si);return Bi.urlParams=Zn,Bi.headers=st,Bi.body=qn.uploadData(),Bi.errorHandler=dt(D),Bi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),De=this._ref.storage._makeRequest(ee,ar,D,z);this._request=De,De.getPromise().then(Ke=>{this._request=void 0,this._metadata=Ke,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(D){const z=this._transferred;this._transferred=D,this._transferred!==z&&this._notifyObservers()}_transition(D){if(this._state!==D)switch(D){case"canceling":case"pausing":this._state=D,void 0!==this._request&&this._request.cancel();break;case"running":const z="paused"===this._state;this._state=D,z&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=D,this._notifyObservers();break;case"canceled":this._error=Ye(),this._state=D,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const D=Fn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:D,metadata:this._metadata,task:this,ref:this._ref}}on(D,z,ee,De){const Ke=new Ji(z||void 0,ee||void 0,De||void 0);return this._addObserver(Ke),()=>{this._removeObserver(Ke)}}then(D,z){return this._promise.then(D,z)}catch(D){return this.then(null,D)}_addObserver(D){this._observers.push(D),this._notifyObserver(D)}_removeObserver(D){const z=this._observers.indexOf(D);-1!==z&&this._observers.splice(z,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(z=>{this._notifyObserver(z)})}_finishPromise(){if(void 0!==this._resolve){let D=!0;switch(Fn(this._state)){case Pn.SUCCESS:br(this._resolve.bind(null,this.snapshot))();break;case Pn.CANCELED:case Pn.ERROR:br(this._reject.bind(null,this._error))();break;default:D=!1}D&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(D){switch(Fn(this._state)){case Pn.RUNNING:case Pn.PAUSED:D.next&&br(D.next.bind(D,this.snapshot))();break;case Pn.SUCCESS:D.complete&&br(D.complete.bind(D))();break;default:D.error&&br(D.error.bind(D,this._error))()}}resume(){const D="paused"===this._state||"pausing"===this._state;return D&&this._transition("running"),D}pause(){const D="running"===this._state;return D&&this._transition("pausing"),D}cancel(){const D="running"===this._state||"pausing"===this._state;return D&&this._transition("canceling"),D}}class xe{constructor(D,z){this._service=D,this._location=z instanceof en?z:en.makeFromUrl(z,D.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(D,z){return new xe(D,z)}get root(){const D=new en(this._location.bucket,"");return this._newRef(this._service,D)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ie(this._location.path)}get storage(){return this._service}get parent(){const D=function zt(m){if(0===m.length)return null;const D=m.lastIndexOf("/");return-1===D?"":m.slice(0,D)}(this._location.path);if(null===D)return null;const z=new en(this._location.bucket,D);return new xe(this._service,z)}_throwIfRoot(D){if(""===this._location.path)throw Vt(D)}}function _t(m,D,z){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,ze.Z)(function*(m,D,z){const De=yield $n(m,{pageToken:z});D.prefixes.push(...De.prefixes),D.items.push(...De.items),null!=De.nextPageToken&&(yield _t(m,D,De.nextPageToken))})).apply(this,arguments)}function $n(m,D){null!=D&&"number"==typeof D.maxResults&&ht("options.maxResults",1,1e3,D.maxResults);const z=D||{},ee=er(m.storage,m._location,"/",z.pageToken,z.maxResults);return m.storage.makeRequestWithTokens(ee,ar)}function Mi(m){m._throwIfRoot("getDownloadURL");const D=function or(m,D,z){const De=Qt(D.fullServerUrl(),m.host,m._protocol),st=m.maxOperationRetryTime,Ht=new hr(De,"GET",function Zr(m,D){return function z(ee,De){const Ke=wn(m,De,D);return sr(null!==Ke),function nr(m,D,z,ee){const De=Tt(D);if(null===De||!zn(De.downloadTokens))return null;const Ke=De.downloadTokens;if(0===Ke.length)return null;const st=encodeURIComponent;return Ke.split(",").map(_n=>{const zr=m.fullPath;return Qt("/b/"+st(m.bucket)+"/o/"+st(zr),z,ee)+vn({alt:"media",token:_n})})[0]}(Ke,De,m.host,m._protocol)}}(m,z),st);return Ht.errorHandler=$t(D),Ht}(m.storage,m._location,Kt());return m.storage.makeRequestWithTokens(D,ar).then(z=>{if(null===z)throw function bt(){return new J("no-download-url","The given file does not have any download URLs.")}();return z})}function gi(m,D){const z=function pe(m,D){const z=D.split("/").filter(ee=>ee.length>0).join("/");return 0===m.length?z:m+"/"+z}(m._location.path,D),ee=new en(m._location.bucket,z);return new xe(m.storage,ee)}function ns(m,D){if(m instanceof cs){const z=m;if(null==z._bucket)throw function It(){return new J("no-default-bucket","No default bucket found. Did you set the '"+vt+"' property when initializing the app?")}();const ee=new xe(z,z._bucket);return null!=D?ns(ee,D):ee}return void 0!==D?gi(m,D):m}function _s(m,D){if(D&&function Ei(m){return/^[A-Za-z]+:\/\//.test(m)}(D)){if(m instanceof cs)return function Vi(m,D){return new xe(m,D)}(m,D);throw qt("To use ref(service, url), the first argument must be a Storage instance.")}return ns(m,D)}function xi(m,D){const z=null==D?void 0:D[vt];return null==z?null:en.makeFromBucketSpec(z,m)}class cs{constructor(D,z,ee,De,Ke){this.app=D,this._authProvider=z,this._appCheckProvider=ee,this._url=De,this._firebaseVersion=Ke,this._bucket=null,this._host=ke,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=De?en.makeFromBucketSpec(De,this._host):xi(this._host,this.app.options)}get host(){return this._host}set host(D){this._host=D,this._bucket=null!=this._url?en.makeFromBucketSpec(this._url,D):xi(D,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(D){ht("time",0,Number.POSITIVE_INFINITY,D),this._maxUploadRetryTime=D}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(D){ht("time",0,Number.POSITIVE_INFINITY,D),this._maxOperationRetryTime=D}_getAuthToken(){var D=this;return(0,ze.Z)(function*(){if(D._overrideAuthToken)return D._overrideAuthToken;const z=D._authProvider.getImmediate({optional:!0});if(z){const ee=yield z.getToken();if(null!==ee)return ee.accessToken}return null})()}_getAppCheckToken(){var D=this;return(0,ze.Z)(function*(){const z=D._appCheckProvider.getImmediate({optional:!0});return z?(yield z.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(D=>D.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(D){return new xe(this,D)}_makeRequest(D,z,ee,De){if(this._deleted)return new mn(Rt());{const Ke=function En(m,D,z,ee,De,Ke){const st=vn(m.urlParams),Ht=m.url+st,Ot=Object.assign({},m.headers);return function yr(m,D){D&&(m["X-Firebase-GMPID"]=D)}(Ot,D),function ir(m,D){null!==D&&D.length>0&&(m.Authorization="Firebase "+D)}(Ot,z),function Fr(m,D){m["X-Firebase-Storage-Version"]="webjs/"+(null!=D?D:"AppManager")}(Ot,Ke),function Br(m,D){null!==D&&(m["X-Firebase-AppCheck"]=D)}(Ot,ee),new Nr(Ht,m.method,Ot,m.body,m.successCodes,m.additionalRetryCodes,m.handler,m.errorHandler,m.timeout,m.progressCallback,De)}(D,this._appId,ee,De,z,this._firebaseVersion);return this._requests.add(Ke),Ke.getPromise().then(()=>this._requests.delete(Ke),()=>this._requests.delete(Ke)),Ke}}makeRequestWithTokens(D,z){var ee=this;return(0,ze.Z)(function*(){const[De,Ke]=yield Promise.all([ee._getAuthToken(),ee._getAppCheckToken()]);return ee._makeRequest(D,z,De,Ke).getPromise()})()}}const wi="@firebase/storage";function Fs(m,D){return _s(m=(0,ct.m9)(m),D)}function Ir(m,{instanceIdentifier:D}){const z=m.getProvider("app").getImmediate(),ee=m.getProvider("auth-internal"),De=m.getProvider("app-check-internal");return new cs(z,ee,De,D,Ze.SDK_VERSION)}!function O(){(0,Ze._registerComponent)(new Be.wA("storage",Ir,"PUBLIC").setMultipleInstances(!0)),(0,Ze.registerVersion)(wi,"0.9.5",""),(0,Ze.registerVersion)(wi,"0.9.5","esm2017")}();class ${constructor(D,z,ee){this._delegate=D,this.task=z,this.ref=ee}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class R{constructor(D,z){this._delegate=D,this._ref=z,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new $(this._delegate.snapshot,this,this._ref)}then(D,z){return this._delegate.then(ee=>{if(D)return D(new $(ee,this,this._ref))},z)}on(D,z,ee,De){let Ke;return z&&(Ke="function"==typeof z?st=>z(new $(st,this,this._ref)):{next:z.next?st=>z.next(new $(st,this,this._ref)):void 0,complete:z.complete||void 0,error:z.error||void 0}),this._delegate.on(D,Ke,ee||void 0,De||void 0)}}class Z{constructor(D,z){this._delegate=D,this._service=z}get prefixes(){return this._delegate.prefixes.map(D=>new ge(D,this._service))}get items(){return this._delegate.items.map(D=>new ge(D,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ge{constructor(D,z){this._delegate=D,this.storage=z}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(D){const z=function hs(m,D){return gi(m,D)}(this._delegate,D);return new ge(z,this.storage)}get root(){return new ge(this._delegate.root,this.storage)}get parent(){const D=this._delegate.parent;return null==D?null:new ge(D,this.storage)}put(D,z){return this._throwIfRoot("put"),new R(function Di(m,D,z){return function ye(m,D,z){return m._throwIfRoot("uploadBytesResumable"),new te(m,new kt(D),z)}(m=(0,ct.m9)(m),D,z)}(this._delegate,D,z),this)}putString(D,z=gn.RAW,ee){this._throwIfRoot("putString");const De=_r(z,D),Ke=Object.assign({},ee);return null==Ke.contentType&&null!=De.contentType&&(Ke.contentType=De.contentType),new R(new te(this._delegate,new kt(De.data,!0),Ke),this)}listAll(){return function Gr(m){return function rt(m){const D={prefixes:[],items:[]};return _t(m,D).then(()=>D)}(m=(0,ct.m9)(m))}(this._delegate).then(D=>new Z(D,this.storage))}list(D){return function ui(m,D){return $n(m=(0,ct.m9)(m),D)}(this._delegate,D||void 0).then(z=>new Z(z,this.storage))}getMetadata(){return function ds(m){return function Hr(m){m._throwIfRoot("getMetadata");const D=hn(m.storage,m._location,Kt());return m.storage.makeRequestWithTokens(D,ar)}(m=(0,ct.m9)(m))}(this._delegate)}updateMetadata(D){return function Rs(m,D){return function Gn(m,D){m._throwIfRoot("updateMetadata");const z=function xr(m,D,z,ee){const Ke=Qt(D.fullServerUrl(),m.host,m._protocol),Ht=nn(z,ee),_n=m.maxOperationRetryTime,Wn=new hr(Ke,"PATCH",Xn(m,ee),_n);return Wn.headers={"Content-Type":"application/json; charset=utf-8"},Wn.body=Ht,Wn.errorHandler=$t(D),Wn}(m.storage,m._location,D,Kt());return m.storage.makeRequestWithTokens(z,ar)}(m=(0,ct.m9)(m),D)}(this._delegate,D)}getDownloadURL(){return function Wr(m){return Mi(m=(0,ct.m9)(m))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Es(m){return function ts(m){m._throwIfRoot("deleteObject");const D=function On(m,D){const ee=Qt(D.fullServerUrl(),m.host,m._protocol),Ht=new hr(ee,"DELETE",function st(Ot,_n){},m.maxOperationRetryTime);return Ht.successCodes=[200,204],Ht.errorHandler=$t(D),Ht}(m.storage,m._location);return m.storage.makeRequestWithTokens(D,ar)}(m=(0,ct.m9)(m))}(this._delegate)}_throwIfRoot(D){if(""===this._delegate._location.path)throw Vt(D)}}class Xe{constructor(D,z){this.app=D,this._delegate=z}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(D){if(tt(D))throw qt("ref() expected a child path but got a URL, use refFromURL instead.");return new ge(Fs(this._delegate,D),this)}refFromURL(D){if(!tt(D))throw qt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{en.makeFromUrl(D,this._delegate.host)}catch(z){throw qt("refFromUrl() expected a valid full URL but got an invalid one.")}return new ge(Fs(this._delegate,D),this)}setMaxUploadRetryTime(D){this._delegate.maxUploadRetryTime=D}setMaxOperationRetryTime(D){this._delegate.maxOperationRetryTime=D}useEmulator(D,z,ee={}){!function ri(m,D,z,ee={}){!function ni(m,D,z,ee={}){m.host=`${D}:${z}`,m._protocol="http";const{mockUserToken:De}=ee;De&&(m._overrideAuthToken="string"==typeof De?De:(0,ct.Sg)(De,m.app.options.projectId))}(m,D,z,ee)}(this._delegate,D,z,ee)}}function tt(m){return/^[A-Za-z]+:\/\//.test(m)}function Dn(m,{instanceIdentifier:D}){const z=m.getProvider("app-compat").getImmediate(),ee=m.getProvider("storage").getImmediate({identifier:D});return new Xe(z,ee)}!function Mn(m){const D={TaskState:Pn,TaskEvent:jr,StringFormat:gn,Storage:Xe,Reference:ge};m.INTERNAL.registerComponent(new Be.wA("storage-compat",Dn,"PUBLIC").setServiceProps(D).setMultipleInstances(!0)),m.registerVersion("@firebase/storage-compat","0.1.13")}(He.Z);var Dr=k(440),Cr=k(127);function Wi(m){const D=function fr(m){return new p.y(D=>{const z=st=>D.next(st);z(m.snapshot);const Ke=m.on("state_changed",z);return m.then(st=>{z(st),D.complete()},st=>{z(m.snapshot),(st=>{D.error(st)})(st)}),function(){Ke()}}).pipe(function Oe(m,D=we.z){return(0,me.e)((z,ee)=>{let De=null,Ke=null,st=null;const Ht=()=>{if(De){De.unsubscribe(),De=null;const _n=Ke;Ke=null,ee.next(_n)}};function Ot(){const _n=st+m,Wn=D.now();if(Wn<_n)return De=this.schedule(void 0,_n-Wn),void ee.add(De);Ht()}z.subscribe((0,Ae.x)(ee,_n=>{Ke=_n,st=D.now(),De||(De=D.schedule(Ot,m),ee.add(De))},()=>{Ht(),ee.complete()},void 0,()=>{Ke=De=null}))})}(0))}(m);return{task:m,then:m.then.bind(m),catch:m.catch.bind(m),pause:m.pause.bind(m),cancel:m.cancel.bind(m),resume:m.resume.bind(m),snapshotChanges:()=>D,percentageChanges:()=>D.pipe((0,Re.U)(z=>z.bytesTransferred/z.totalBytes*100))}}function ii(m){return{getDownloadURL:()=>(0,K.of)(void 0).pipe(ue.fc,(0,Fe.w)(()=>m.getDownloadURL()),ue.iC),getMetadata:()=>(0,K.of)(void 0).pipe(ue.fc,(0,Fe.w)(()=>m.getMetadata()),ue.iC),delete:()=>(0,Y.D)(m.delete()),child:D=>ii(m.child(D)),updateMetadata:D=>(0,Y.D)(m.updateMetadata(D)),put:(D,z)=>Wi(m.put(D,z)),putString:(D,z,ee)=>Wi(m.putString(D,z,ee)),list:D=>(0,Y.D)(m.list(D)),listAll:()=>(0,Y.D)(m.listAll())}}const dn=new re.OlP("angularfire2.storageBucket"),Ci=new re.OlP("angularfire2.storage.maxUploadRetryTime"),zi=new re.OlP("angularfire2.storage.maxOperationRetryTime"),fs=new re.OlP("angularfire2.storage.use-emulator");let Os=(()=>{class m{constructor(z,ee,De,Ke,st,Ht,Ot,_n,Wn,zr){const pr=(0,_e.on)(z,st,ee);this.storage=(0,_e.cc)(`${pr.name}.storage.${De}`,"AngularFireStorage",pr.name,()=>{const qn=st.runOutsideAngular(()=>pr.storage(De||void 0)),Zn=Wn;return Zn&&qn.useEmulator(...Zn),Ot&&qn.setMaxUploadRetryTime(Ot),_n&&qn.setMaxOperationRetryTime(_n),qn},[Ot,_n])}ref(z){return ii(this.storage.ref(z))}refFromURL(z){return ii(this.storage.refFromURL(z))}upload(z,ee,De){return ii(this.storage.ref(z)).put(ee,De)}}return m.\u0275fac=function(z){return new(z||m)(re.LFG(_e.Dh),re.LFG(_e.xv,8),re.LFG(dn,8),re.LFG(re.Lbi),re.LFG(re.R0b),re.LFG(ue.HU),re.LFG(Ci,8),re.LFG(zi,8),re.LFG(fs,8),re.LFG(Dr.nm,8))},m.\u0275prov=re.Yz7({token:m,factory:m.\u0275fac,providedIn:"any"}),m})(),M=(()=>{class m{}return m.\u0275fac=function(z){return new(z||m)},m.\u0275mod=re.oAB({type:m}),m.\u0275inj=re.cJS({}),m})(),S=(()=>{class m{constructor(){Cr.Z.registerVersion("angularfire",ue.q4.full,"gcs-compat")}}return m.\u0275fac=function(z){return new(z||m)},m.\u0275mod=re.oAB({type:m}),m.\u0275inj=re.cJS({providers:[Os],imports:[M]}),m})()},2011:(Mt,We,k)=>{k.d(We,{Dh:()=>Re,GT:()=>Ae,cc:()=>ze,hO:()=>He,on:()=>ue,pX:()=>me,xv:()=>Fe});var p=k(5e3),K=k(127),Y=k(5813);Mt=k.hmd(Mt);const we=["ngOnDestroy"],me=(ke,vt,j,F={})=>new Proxy(ke,{get:(J,le)=>j.runOutsideAngular(()=>{var Le;if(ke[le])return(null===(Le=null==F?void 0:F.spy)||void 0===Le?void 0:Le.get)&&F.spy.get(le,ke[le]),ke[le];if(we.indexOf(le)>-1)return()=>{};const je=vt.toPromise().then(Ne=>{const Ie=Ne&&Ne[le];return"function"==typeof Ie?Ie.bind(Ne):Ie&&Ie.then?Ie.then(Q=>j.run(()=>Q)):j.run(()=>Ie)});return new Proxy(()=>{},{get:(Ne,Ie)=>je[Ie],apply:(Ne,Ie,Q)=>je.then(Se=>{var de;const Ye=Se&&Se(...Q);return(null===(de=null==F?void 0:F.spy)||void 0===de?void 0:de.apply)&&F.spy.apply(le,Q,Ye),Ye})})})}),Ae=(ke,vt)=>{vt.forEach(j=>{Object.getOwnPropertyNames(j.prototype||j).forEach(F=>{Object.defineProperty(ke.prototype,F,Object.getOwnPropertyDescriptor(j.prototype||j,F))})})};class Oe{constructor(vt){return vt}}const Re=new p.OlP("angularfire2.app.options"),Fe=new p.OlP("angularfire2.app.name");function ue(ke,vt,j){const J="object"==typeof j&&j||{};J.name=J.name||"string"==typeof j&&j||"[DEFAULT]";const Le=K.Z.apps.filter(je=>je&&je.name===J.name)[0]||vt.runOutsideAngular(()=>K.Z.initializeApp(ke,J));try{JSON.stringify(ke)!==JSON.stringify(Le.options)&&re("error",`${Le.name} Firebase App already initialized with different options${Mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new Oe(Le)}const re=(ke,...vt)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[ke](...vt)},_e={provide:Oe,useFactory:ue,deps:[Re,p.R0b,[new p.FiY,Fe]]};let He=(()=>{class ke{constructor(j){K.Z.registerVersion("angularfire",Y.q4.full,"core"),K.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),K.Z.registerVersion("angular",p.q4F.full,j.toString())}static initializeApp(j,F){return{ngModule:ke,providers:[{provide:Re,useValue:j},{provide:Fe,useValue:F}]}}}return ke.\u0275fac=function(j){return new(j||ke)(p.LFG(p.Lbi))},ke.\u0275mod=p.oAB({type:ke}),ke.\u0275inj=p.cJS({providers:[_e]}),ke})();function ze(ke,vt,j,F,J){const[,le,Le]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===ke)||[];if(le)return function Ze(ke,vt){try{return ke.toString()===vt.toString()}catch(j){return ke===vt}}(J,Le)||(Be("error",`${vt} was already initialized on the ${j} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:J,was:Le})),le;{const je=F();return globalThis.\u0275AngularfireInstanceCache.push([ke,je,J]),je}}const ct=!!Mt.hot,Be=(ke,...vt)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[ke](...vt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Mt,We,k)=>{k.d(We,{q4:()=>Ta,iC:()=>la,fc:()=>Du,HU:()=>Uo,vb:()=>Lo,JM:()=>Eo});var p=k(5e3),K=k(5867),Y=k(5861),we=k(9681),me=k(2090),Ae=k(4859),Oe=k(1877);const Re="@firebase/installations",re="w:0.5.8",_e="FIS_v2",ke=new me.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function vt(A){return A instanceof me.ZR&&A.code.includes("request-failed")}function j({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function F(A){return{token:A.token,requestStatus:2,expiresIn:Q(A.expiresIn),creationTime:Date.now()}}function J(A,P){return le.apply(this,arguments)}function le(){return(le=(0,Y.Z)(function*(A,P){const ae=(yield P.json()).error;return ke.create("request-failed",{requestName:A,serverCode:ae.code,serverMessage:ae.message,serverStatus:ae.status})})).apply(this,arguments)}function Le({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function je(A,{refreshToken:P}){const W=Le(A);return W.append("Authorization",function Se(A){return`${_e} ${A}`}(P)),W}function Ne(A){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,Y.Z)(function*(A){const P=yield A();return P.status>=500&&P.status<600?A():P})).apply(this,arguments)}function Q(A){return Number(A.replace("s","000"))}function de(A,P){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,Y.Z)(function*({appConfig:A,heartbeatServiceProvider:P},{fid:W}){const ae=j(A),Me=Le(A),Qe=P.getImmediate({optional:!0});if(Qe){const Cn=yield Qe.getHeartbeatsHeader();Cn&&Me.append("x-firebase-client",Cn)}const Yt={method:"POST",headers:Me,body:JSON.stringify({fid:W,authVersion:_e,appId:A.appId,sdkVersion:re})},an=yield Ne(()=>fetch(ae,Yt));if(an.ok){const Cn=yield an.json();return{fid:Cn.fid||W,registrationStatus:2,refreshToken:Cn.refreshToken,authToken:F(Cn.authToken)}}throw yield J("Create Installation",an)})).apply(this,arguments)}function $e(A){return new Promise(P=>{setTimeout(P,A)})}const It=/^[cdef][\w-]{21}$/;function pt(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const W=function bt(A){return function Wt(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return It.test(W)?W:""}catch(A){return""}}function qt(A){return`${A.appName}!${A.appId}`}const Rt=new Map;function Vt(A,P){const W=qt(A);en(W,P),function mn(A,P){const W=function Bn(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=A=>{en(A.data.key,A.data.fid)}),Qn}();W&&W.postMessage({key:A,fid:P}),function cr(){0===Rt.size&&Qn&&(Qn.close(),Qn=null)}()}(W,P)}function en(A,P){const W=Rt.get(A);if(W)for(const ae of W)ae(P)}let Qn=null;const zn="firebase-installations-store";let Ar=null;function jn(){return Ar||(Ar=(0,me.X3)("firebase-installations-database",1,(A,P)=>{0===P&&A.createObjectStore(zn)})),Ar}function ht(A,P){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,Y.Z)(function*(A,P){const W=qt(A),Me=(yield jn()).transaction(zn,"readwrite"),Qe=Me.objectStore(zn),Dt=yield Qe.get(W);return yield Qe.put(P,W),yield Me.complete,(!Dt||Dt.fid!==P.fid)&&Vt(A,P.fid),P})).apply(this,arguments)}function vn(A){return on.apply(this,arguments)}function on(){return(on=(0,Y.Z)(function*(A){const P=qt(A),ae=(yield jn()).transaction(zn,"readwrite");yield ae.objectStore(zn).delete(P),yield ae.complete})).apply(this,arguments)}function Nr(A,P){return yi.apply(this,arguments)}function yi(){return(yi=(0,Y.Z)(function*(A,P){const W=qt(A),Me=(yield jn()).transaction(zn,"readwrite"),Qe=Me.objectStore(zn),Dt=yield Qe.get(W),Yt=P(Dt);return void 0===Yt?yield Qe.delete(W):yield Qe.put(Yt,W),yield Me.complete,Yt&&(!Dt||Dt.fid!==Yt.fid)&&Vt(A,Yt.fid),Yt})).apply(this,arguments)}function ir(A){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,Y.Z)(function*(A){let P;const W=yield Nr(A.appConfig,ae=>{const Me=yr(ae),Qe=Br(A,Me);return P=Qe.registrationPromise,Qe.installationEntry});return""===W.fid?{installationEntry:yield P}:{installationEntry:W,registrationPromise:P}})).apply(this,arguments)}function yr(A){return gn(A||{fid:pt(),registrationStatus:0})}function Br(A,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(ke.create("app-offline"))};const W={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},ae=function En(A,P){return jt.apply(this,arguments)}(A,W);return{installationEntry:W,registrationPromise:ae}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:rn(A)}:{installationEntry:P}}function jt(){return(jt=(0,Y.Z)(function*(A,P){try{const W=yield de(A,P);return ht(A.appConfig,W)}catch(W){throw vt(W)&&409===W.customData.serverCode?yield vn(A.appConfig):yield ht(A.appConfig,{fid:P.fid,registrationStatus:0}),W}})).apply(this,arguments)}function rn(A){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,Y.Z)(function*(A){let P=yield dr(A.appConfig);for(;1===P.registrationStatus;)yield $e(100),P=yield dr(A.appConfig);if(0===P.registrationStatus){const{installationEntry:W,registrationPromise:ae}=yield ir(A);return ae||W}return P})).apply(this,arguments)}function dr(A){return Nr(A,P=>{if(!P)throw ke.create("installation-not-found");return gn(P)})}function gn(A){return function _i(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function _r(A,P){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,Y.Z)(function*({appConfig:A,heartbeatServiceProvider:P},W){const ae=tn(A,W),Me=je(A,W),Qe=P.getImmediate({optional:!0});if(Qe){const Cn=yield Qe.getHeartbeatsHeader();Cn&&Me.append("x-firebase-client",Cn)}const Yt={method:"POST",headers:Me,body:JSON.stringify({installation:{sdkVersion:re,appId:A.appId}})},an=yield Ne(()=>fetch(ae,Yt));if(an.ok)return F(yield an.json());throw yield J("Generate Auth Token",an)})).apply(this,arguments)}function tn(A,{fid:P}){return`${j(A)}/${P}/authTokens:generate`}function Sr(A){return In.apply(this,arguments)}function In(){return(In=(0,Y.Z)(function*(A,P=!1){let W;const ae=yield Nr(A.appConfig,Qe=>{if(!zt(Qe))throw ke.create("not-registered");const Dt=Qe.authToken;if(!P&&pe(Dt))return Qe;if(1===Dt.requestStatus)return W=Pt(A,P),Qe;{if(!navigator.onLine)throw ke.create("app-offline");const Yt=Ce(Qe);return W=kt(A,Yt),Yt}});return W?yield W:ae.authToken})).apply(this,arguments)}function Pt(A,P){return ot.apply(this,arguments)}function ot(){return(ot=(0,Y.Z)(function*(A,P){let W=yield Ut(A.appConfig);for(;1===W.authToken.requestStatus;)yield $e(100),W=yield Ut(A.appConfig);const ae=W.authToken;return 0===ae.requestStatus?Sr(A,P):ae})).apply(this,arguments)}function Ut(A){return Nr(A,P=>{if(!zt(P))throw ke.create("not-registered");return function qe(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function kt(A,P){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,Y.Z)(function*(A,P){try{const W=yield _r(A,P),ae=Object.assign(Object.assign({},P),{authToken:W});return yield ht(A.appConfig,ae),W}catch(W){if(!vt(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const ae=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield ht(A.appConfig,ae)}else yield vn(A.appConfig);throw W}})).apply(this,arguments)}function zt(A){return void 0!==A&&2===A.registrationStatus}function pe(A){return 2===A.requestStatus&&!function ie(A){const P=Date.now();return P<A.creationTime||A.creationTime+A.expiresIn<P+36e5}(A)}function Ce(A){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:P})}function Ct(){return(Ct=(0,Y.Z)(function*(A){const P=A,{installationEntry:W,registrationPromise:ae}=yield ir(P);return ae?ae.catch(console.error):Sr(P).catch(console.error),W.fid})).apply(this,arguments)}function Tn(){return(Tn=(0,Y.Z)(function*(A,P=!1){const W=A;return yield Mr(W),(yield Sr(W,P)).token})).apply(this,arguments)}function Mr(A){return wn.apply(this,arguments)}function wn(){return(wn=(0,Y.Z)(function*(A){const{registrationPromise:P}=yield ir(A);P&&(yield P)})).apply(this,arguments)}function Xn(A){return ke.create("missing-app-config-values",{valueName:A})}const Gi="installations",dt=A=>{const P=A.getProvider("app").getImmediate(),W=function sr(A){if(!A||!A.options)throw Xn("App Configuration");if(!A.name)throw Xn("App Name");const P=["projectId","apiKey","appId"];for(const W of P)if(!A.options[W])throw Xn(W);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(P);return{app:P,appConfig:W,heartbeatServiceProvider:(0,we._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},$t=A=>{const P=A.getProvider("app").getImmediate(),W=(0,we._getProvider)(P,Gi).getImmediate();return{getId:()=>function Ve(A){return Ct.apply(this,arguments)}(W),getToken:Me=>function Kt(A){return Tn.apply(this,arguments)}(W,Me)}};(function hn(){(0,we._registerComponent)(new Ae.wA(Gi,dt,"PUBLIC")),(0,we._registerComponent)(new Ae.wA("installations-internal",$t,"PRIVATE"))})(),(0,we.registerVersion)(Re,"0.5.8"),(0,we.registerVersion)(Re,"0.5.8","esm2017");const er="@firebase/remote-config",Er=new me.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ce{constructor(P,W,ae,Me){this.client=P,this.storage=W,this.storageCache=ae,this.logger=Me}isCachedDataFresh(P,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ae=Date.now()-W,Me=ae<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ae}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${Me}.`),Me}fetch(P){var W=this;return(0,Y.Z)(function*(){const[ae,Me]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(Me&&W.isCachedDataFresh(P.cacheMaxAgeMillis,ae))return Me;P.eTag=Me&&Me.eTag;const Qe=yield W.client.fetch(P),Dt=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Qe.status&&Dt.push(W.storage.setLastSuccessfulFetchResponse(Qe)),yield Promise.all(Dt),Qe})()}}function fe(A=navigator){return A.languages&&A.languages[0]||A.language}class te{constructor(P,W,ae,Me,Qe,Dt){this.firebaseInstallations=P,this.sdkVersion=W,this.namespace=ae,this.projectId=Me,this.apiKey=Qe,this.appId=Dt}fetch(P){var W=this;return(0,Y.Z)(function*(){const[ae,Me]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,Yt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},an={sdk_version:W.sdkVersion,app_instance_id:ae,app_instance_id_token:Me,app_id:W.appId,language_code:fe()},Cn={method:"POST",headers:Yt,body:JSON.stringify(an)},ur=fetch(Dt,Cn),Vn=new Promise((ho,Ys)=>{P.signal.addEventListener(()=>{const wo=new Error("The operation was aborted.");wo.name="AbortError",Ys(wo)})});let Jr;try{yield Promise.race([ur,Vn]),Jr=yield ur}catch(ho){let Ys="fetch-client-network";throw"AbortError"===ho.name&&(Ys="fetch-timeout"),Er.create(Ys,{originalErrorMessage:ho.message})}let $i=Jr.status;const Sa=Jr.headers.get("ETag")||void 0;let Za,Ds;if(200===Jr.status){let ho;try{ho=yield Jr.json()}catch(Ys){throw Er.create("fetch-client-parse",{originalErrorMessage:Ys.message})}Za=ho.entries,Ds=ho.state}if("INSTANCE_STATE_UNSPECIFIED"===Ds?$i=500:"NO_CHANGE"===Ds?$i=304:("NO_TEMPLATE"===Ds||"EMPTY_CONFIG"===Ds)&&(Za={}),304!==$i&&200!==$i)throw Er.create("fetch-status",{httpStatus:$i});return{status:$i,eTag:Sa,config:Za}})()}}class cn{constructor(P,W){this.client=P,this.storage=W}fetch(P){var W=this;return(0,Y.Z)(function*(){const ae=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(P,ae)})()}attemptFetch(P,{throttleEndTimeMillis:W,backoffCount:ae}){var Me=this;return(0,Y.Z)(function*(){yield function xe(A,P){return new Promise((W,ae)=>{const Me=Math.max(P-Date.now(),0),Qe=setTimeout(W,Me);A.addEventListener(()=>{clearTimeout(Qe),ae(Er.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,W);try{const Qe=yield Me.client.fetch(P);return yield Me.storage.deleteThrottleMetadata(),Qe}catch(Qe){if(!function at(A){if(!(A instanceof me.ZR&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}(Qe))throw Qe;const Dt={throttleEndTimeMillis:Date.now()+(0,me.$s)(ae),backoffCount:ae+1};return yield Me.storage.setThrottleMetadata(Dt),Me.attemptFetch(P,Dt)}})()}}class Ue{constructor(P,W,ae,Me,Qe){this.app=P,this._client=W,this._storageCache=ae,this._storage=Me,this._logger=Qe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function rt(A,P){const W=A.target.error||void 0;return Er.create(P,{originalErrorMessage:W&&W.message})}const _t="app_namespace_store";class Gn{constructor(P,W,ae,Me=function Hr(){return new Promise((A,P)=>{try{const W=indexedDB.open("firebase_remote_config",1);W.onerror=ae=>{P(rt(ae,"storage-open"))},W.onsuccess=ae=>{A(ae.target.result)},W.onupgradeneeded=ae=>{0===ae.oldVersion&&ae.target.result.createObjectStore(_t,{keyPath:"compositeKey"})}}catch(W){P(Er.create("storage-open",{originalErrorMessage:W}))}})}()){this.appId=P,this.appName=W,this.namespace=ae,this.openDbPromise=Me}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var W=this;return(0,Y.Z)(function*(){const ae=yield W.openDbPromise;return new Promise((Me,Qe)=>{const Yt=ae.transaction([_t],"readonly").objectStore(_t),an=W.createCompositeKey(P);try{const Cn=Yt.get(an);Cn.onerror=ur=>{Qe(rt(ur,"storage-get"))},Cn.onsuccess=ur=>{const Vn=ur.target.result;Me(Vn?Vn.value:void 0)}}catch(Cn){Qe(Er.create("storage-get",{originalErrorMessage:Cn&&Cn.message}))}})})()}set(P,W){var ae=this;return(0,Y.Z)(function*(){const Me=yield ae.openDbPromise;return new Promise((Qe,Dt)=>{const an=Me.transaction([_t],"readwrite").objectStore(_t),Cn=ae.createCompositeKey(P);try{const ur=an.put({compositeKey:Cn,value:W});ur.onerror=Vn=>{Dt(rt(Vn,"storage-set"))},ur.onsuccess=()=>{Qe()}}catch(ur){Dt(Er.create("storage-set",{originalErrorMessage:ur&&ur.message}))}})})()}delete(P){var W=this;return(0,Y.Z)(function*(){const ae=yield W.openDbPromise;return new Promise((Me,Qe)=>{const Yt=ae.transaction([_t],"readwrite").objectStore(_t),an=W.createCompositeKey(P);try{const Cn=Yt.delete(an);Cn.onerror=ur=>{Qe(rt(ur,"storage-delete"))},Cn.onsuccess=()=>{Me()}}catch(Cn){Qe(Er.create("storage-delete",{originalErrorMessage:Cn&&Cn.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class Mi{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,Y.Z)(function*(){const W=P.storage.getLastFetchStatus(),ae=P.storage.getLastSuccessfulFetchTimestampMillis(),Me=P.storage.getActiveConfig(),Qe=yield W;Qe&&(P.lastFetchStatus=Qe);const Dt=yield ae;Dt&&(P.lastSuccessfulFetchTimestampMillis=Dt);const Yt=yield Me;Yt&&(P.activeConfig=Yt)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function Vi(){return ns.apply(this,arguments)}function ns(){return(ns=(0,Y.Z)(function*(){if(!(0,me.hl)())return!1;try{return yield(0,me.eu)()}catch(A){return!1}})).apply(this,arguments)}!function ts(){(0,we._registerComponent)(new Ae.wA("remote-config",function A(P,{instanceIdentifier:W}){const ae=P.getProvider("app").getImmediate(),Me=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Er.create("registration-window");if(!(0,me.hl)())throw Er.create("indexed-db-unavailable");const{projectId:Qe,apiKey:Dt,appId:Yt}=ae.options;if(!Qe)throw Er.create("registration-project-id");if(!Dt)throw Er.create("registration-api-key");if(!Yt)throw Er.create("registration-app-id");const an=new Gn(Yt,ae.name,W=W||"firebase"),Cn=new Mi(an),ur=new Oe.Yd(er);ur.logLevel=Oe.in.ERROR;const Vn=new te(Me,we.SDK_VERSION,W,Qe,Dt,Yt),Jr=new cn(Vn,an),$i=new ce(Jr,an,Cn,ur),Sa=new Ue(ae,$i,Cn,an,ur);return function Pn(A){const P=(0,me.m9)(A);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(Sa),Sa},"PUBLIC").setMultipleInstances(!0)),(0,we.registerVersion)(er,"0.3.7"),(0,we.registerVersion)(er,"0.3.7","esm2017")}();const _s="/firebase-messaging-sw.js",xi="/firebase-cloud-messaging-push-scope",ni="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wi="google.c.a.c_id",Ii="google.c.a.c_l",ks="google.c.a.ts",Ns="google.c.a.e";var rs=(()=>{return(A=rs||(rs={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",rs;var A})();function Di(A){const P=new Uint8Array(A);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ds(A){const W=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ae=atob(W),Me=new Uint8Array(ae.length);for(let Qe=0;Qe<ae.length;++Qe)Me[Qe]=ae.charCodeAt(Qe);return Me}const Rs="fcm_token_details_db",Gr="fcm_token_object_Store";function Wr(A){return Es.apply(this,arguments)}function Es(){return Es=(0,Y.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Qe=>Qe.name).includes(Rs))return null;let P=null;return(yield(0,me.X3)(Rs,5,function(){var ae=(0,Y.Z)(function*(Me,Qe,Dt,Yt){var an;if(Qe<2||!Me.objectStoreNames.contains(Gr))return;const Cn=Yt.objectStore(Gr),ur=yield Cn.index("fcmSenderId").get(A);if(yield Cn.clear(),ur)if(2===Qe){const Vn=ur;if(!Vn.auth||!Vn.p256dh||!Vn.endpoint)return;P={token:Vn.fcmToken,createTime:null!==(an=Vn.createTime)&&void 0!==an?an:Date.now(),subscriptionOptions:{auth:Vn.auth,p256dh:Vn.p256dh,endpoint:Vn.endpoint,swScope:Vn.swScope,vapidKey:"string"==typeof Vn.vapidKey?Vn.vapidKey:Di(Vn.vapidKey)}}}else if(3===Qe){const Vn=ur;P={token:Vn.fcmToken,createTime:Vn.createTime,subscriptionOptions:{auth:Di(Vn.auth),p256dh:Di(Vn.p256dh),endpoint:Vn.endpoint,swScope:Vn.swScope,vapidKey:Di(Vn.vapidKey)}}}else if(4===Qe){const Vn=ur;P={token:Vn.fcmToken,createTime:Vn.createTime,subscriptionOptions:{auth:Di(Vn.auth),p256dh:Di(Vn.p256dh),endpoint:Vn.endpoint,swScope:Vn.swScope,vapidKey:Di(Vn.vapidKey)}}}});return function(Me,Qe,Dt,Yt){return ae.apply(this,arguments)}}())).close(),yield(0,me.Lj)(Rs),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),Fs(P)?P:null}),Es.apply(this,arguments)}function Fs(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:P}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const ri="firebase-messaging-store";let is=null;function Ws(){return is||(is=(0,me.X3)("firebase-messaging-database",1,(A,P)=>{0===P&&A.createObjectStore(ri)})),is}function Ir(A){return O.apply(this,arguments)}function O(){return(O=(0,Y.Z)(function*(A){const P=Xe(A),ae=yield(yield Ws()).transaction(ri).objectStore(ri).get(P);if(ae)return ae;{const Me=yield Wr(A.appConfig.senderId);if(Me)return yield $(A,Me),Me}})).apply(this,arguments)}function $(A,P){return R.apply(this,arguments)}function R(){return(R=(0,Y.Z)(function*(A,P){const W=Xe(A),Me=(yield Ws()).transaction(ri,"readwrite");return yield Me.objectStore(ri).put(P,W),yield Me.complete,P})).apply(this,arguments)}function Z(A){return ge.apply(this,arguments)}function ge(){return(ge=(0,Y.Z)(function*(A){const P=Xe(A),ae=(yield Ws()).transaction(ri,"readwrite");yield ae.objectStore(ri).delete(P),yield ae.complete})).apply(this,arguments)}function Xe({appConfig:A}){return A.appId}const At=new me.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function tr(A,P){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,Y.Z)(function*(A,P){const W=yield Wi(A),ae=dn(P),Me={method:"POST",headers:W,body:JSON.stringify(ae)};let Qe;try{Qe=yield(yield fetch(fr(A.appConfig),Me)).json()}catch(Dt){throw At.create("token-subscribe-failed",{errorInfo:Dt})}if(Qe.error)throw At.create("token-subscribe-failed",{errorInfo:Qe.error.message});if(!Qe.token)throw At.create("token-subscribe-no-token");return Qe.token})).apply(this,arguments)}function Dn(A,P){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,Y.Z)(function*(A,P){const W=yield Wi(A),ae=dn(P.subscriptionOptions),Me={method:"PATCH",headers:W,body:JSON.stringify(ae)};let Qe;try{Qe=yield(yield fetch(`${fr(A.appConfig)}/${P.token}`,Me)).json()}catch(Dt){throw At.create("token-update-failed",{errorInfo:Dt})}if(Qe.error)throw At.create("token-update-failed",{errorInfo:Qe.error.message});if(!Qe.token)throw At.create("token-update-no-token");return Qe.token})).apply(this,arguments)}function Dr(A,P){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,Y.Z)(function*(A,P){const ae={method:"DELETE",headers:yield Wi(A)};try{const Qe=yield(yield fetch(`${fr(A.appConfig)}/${P}`,ae)).json();if(Qe.error)throw At.create("token-unsubscribe-failed",{errorInfo:Qe.error.message})}catch(Me){throw At.create("token-unsubscribe-failed",{errorInfo:Me})}})).apply(this,arguments)}function fr({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function Wi(A){return ii.apply(this,arguments)}function ii(){return(ii=(0,Y.Z)(function*({appConfig:A,installations:P}){const W=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function dn({p256dh:A,auth:P,endpoint:W,vapidKey:ae}){const Me={web:{endpoint:W,auth:P,p256dh:A}};return ae!==ni&&(Me.web.applicationPubKey=ae),Me}const Ci=6048e5;function zi(A){return fs.apply(this,arguments)}function fs(){return(fs=(0,Y.Z)(function*(A){const P=yield z(A.swRegistration,A.vapidKey),W={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:P.endpoint,auth:Di(P.getKey("auth")),p256dh:Di(P.getKey("p256dh"))},ae=yield Ir(A.firebaseDependencies);if(ae){if(De(ae.subscriptionOptions,W))return Date.now()>=ae.createTime+Ci?M(A,{token:ae.token,createTime:Date.now(),subscriptionOptions:W}):ae.token;try{yield Dr(A.firebaseDependencies,ae.token)}catch(Me){console.warn(Me)}return m(A.firebaseDependencies,W)}return m(A.firebaseDependencies,W)})).apply(this,arguments)}function Os(A){return N.apply(this,arguments)}function N(){return(N=(0,Y.Z)(function*(A){const P=yield Ir(A.firebaseDependencies);P&&(yield Dr(A.firebaseDependencies,P.token),yield Z(A.firebaseDependencies));const W=yield A.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function M(A,P){return S.apply(this,arguments)}function S(){return(S=(0,Y.Z)(function*(A,P){try{const W=yield Dn(A.firebaseDependencies,P),ae=Object.assign(Object.assign({},P),{token:W,createTime:Date.now()});return yield $(A.firebaseDependencies,ae),W}catch(W){throw yield Os(A),W}})).apply(this,arguments)}function m(A,P){return D.apply(this,arguments)}function D(){return(D=(0,Y.Z)(function*(A,P){const ae={token:yield tr(A,P),createTime:Date.now(),subscriptionOptions:P};return yield $(A,ae),ae.token})).apply(this,arguments)}function z(A,P){return ee.apply(this,arguments)}function ee(){return(ee=(0,Y.Z)(function*(A,P){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ds(P)})})).apply(this,arguments)}function De(A,P){return P.vapidKey===A.vapidKey&&P.endpoint===A.endpoint&&P.auth===A.auth&&P.p256dh===A.p256dh}function Ke(A){const P={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function st(A,P){if(!P.notification)return;A.notification={};const W=P.notification.title;W&&(A.notification.title=W);const ae=P.notification.body;ae&&(A.notification.body=ae);const Me=P.notification.image;Me&&(A.notification.image=Me)}(P,A),function Ht(A,P){!P.data||(A.data=P.data)}(P,A),function Ot(A,P){if(!P.fcmOptions)return;A.fcmOptions={};const W=P.fcmOptions.link;W&&(A.fcmOptions.link=W);const ae=P.fcmOptions.analytics_label;ae&&(A.fcmOptions.analyticsLabel=ae)}(P,A),P}function _n(A){return"object"==typeof A&&!!A&&wi in A}function Wn(A,P){const W=[];for(let ae=0;ae<A.length;ae++)W.push(A.charAt(ae)),ae<P.length&&W.push(P.charAt(ae));return W.join("")}function pr(A){return At.create("missing-app-config-values",{valueName:A})}Wn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class qn{constructor(P,W,ae){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Me=function zr(A){if(!A||!A.options)throw pr("App Configuration Object");if(!A.name)throw pr("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:W}=A;for(const ae of P)if(!W[ae])throw pr(ae);return{appName:A.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:Me,installations:W,analyticsProvider:ae}}_delete(){return Promise.resolve()}}function Zn(A){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,Y.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(_s,{scope:xi}),A.swRegistration.update().catch(()=>{})}catch(P){throw At.create("failed-service-worker-registration",{browserErrorMessage:P.message})}})).apply(this,arguments)}function gr(A,P){return si.apply(this,arguments)}function si(){return(si=(0,Y.Z)(function*(A,P){if(!P&&!A.swRegistration&&(yield Zn(A)),P||!A.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw At.create("invalid-sw-registration");A.swRegistration=P}})).apply(this,arguments)}function Bi(A,P){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,Y.Z)(function*(A,P){P?A.vapidKey=P:A.vapidKey||(A.vapidKey=ni)})).apply(this,arguments)}function Or(){return(Or=(0,Y.Z)(function*(A,P){if(!navigator)throw At.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw At.create("permission-blocked");return yield Bi(A,null==P?void 0:P.vapidKey),yield gr(A,null==P?void 0:P.serviceWorkerRegistration),zi(A)})).apply(this,arguments)}function As(A,P,W){return io.apply(this,arguments)}function io(){return(io=(0,Y.Z)(function*(A,P,W){const ae=Ls(P);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(ae,{message_id:W[wi],message_name:W[Ii],message_time:W[ks],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ls(A){switch(A){case rs.NOTIFICATION_CLICKED:return"notification_open";case rs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ta(){return(ta=(0,Y.Z)(function*(A,P){const W=P.data;if(!W.isFirebaseMessaging)return;A.onMessageHandler&&W.messageType===rs.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Ke(W)):A.onMessageHandler.next(Ke(W)));const ae=W.data;_n(ae)&&"1"===ae[Ns]&&(yield As(A,W.messageType,ae))})).apply(this,arguments)}const na="@firebase/messaging",Ba=A=>{const P=new qn(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function Mo(A,P){return ta.apply(this,arguments)}(P,W)),P},Ps=A=>{const P=A.getProvider("messaging").getImmediate();return{getToken:ae=>function li(A,P){return Or.apply(this,arguments)}(P,ae)}};function Vs(){return xo.apply(this,arguments)}function xo(){return(xo=(0,Y.Z)(function*(){try{yield(0,me.eu)()}catch(A){return!1}return"undefined"!=typeof window&&(0,me.hl)()&&(0,me.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ra(){(0,we._registerComponent)(new Ae.wA("messaging",Ba,"PUBLIC")),(0,we._registerComponent)(new Ae.wA("messaging-internal",Ps,"PRIVATE")),(0,we.registerVersion)(na,"0.9.12"),(0,we.registerVersion)(na,"0.9.12","esm2017")}();const mo="analytics",$a="firebase_id",Oo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Po="https://www.googletagmanager.com/gtag/js",mi=new Oe.Yd("@firebase/analytics");function Go(A){return Promise.all(A.map(P=>P.catch(W=>W)))}function Ha(A,P){const W=document.createElement("script");W.src=`${Po}?l=${A}&id=${P}`,W.async=!0,document.head.appendChild(W)}function ko(A,P,W,ae,Me,Qe){return zs.apply(this,arguments)}function zs(){return(zs=(0,Y.Z)(function*(A,P,W,ae,Me,Qe){const Dt=ae[Me];try{if(Dt)yield P[Dt];else{const an=(yield Go(W)).find(Cn=>Cn.measurementId===Me);an&&(yield P[an.appId])}}catch(Yt){mi.error(Yt)}A("config",Me,Qe)})).apply(this,arguments)}function Us(A,P,W,ae,Me){return oo.apply(this,arguments)}function oo(){return(oo=(0,Y.Z)(function*(A,P,W,ae,Me){try{let Qe=[];if(Me&&Me.send_to){let Dt=Me.send_to;Array.isArray(Dt)||(Dt=[Dt]);const Yt=yield Go(W);for(const an of Dt){const Cn=Yt.find(Vn=>Vn.measurementId===an),ur=Cn&&P[Cn.appId];if(!ur){Qe=[];break}Qe.push(ur)}}0===Qe.length&&(Qe=Object.values(P)),yield Promise.all(Qe),A("event",ae,Me||{})}catch(Qe){mi.error(Qe)}})).apply(this,arguments)}function mu(){const A=window.document.getElementsByTagName("script");for(const P of Object.values(A))if(P.src&&P.src.includes(Po))return P;return null}const Ur=new me.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),oa=new class yo{constructor(P={},W=1e3){this.throttleMetadata=P,this.intervalMillis=W}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,W){this.throttleMetadata[P]=W}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function _o(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function Ca(A){return qr.apply(this,arguments)}function qr(){return(qr=(0,Y.Z)(function*(A){var P;const{appId:W,apiKey:ae}=A,Me={method:"GET",headers:_o(ae)},Qe=Oo.replace("{app-id}",W),Dt=yield fetch(Qe,Me);if(200!==Dt.status&&304!==Dt.status){let Yt="";try{const an=yield Dt.json();(null===(P=an.error)||void 0===P?void 0:P.message)&&(Yt=an.error.message)}catch(an){}throw Ur.create("config-fetch-failed",{httpStatus:Dt.status,responseMessage:Yt})}return Dt.json()})).apply(this,arguments)}function _u(A){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,Y.Z)(function*(A,P=oa,W){const{appId:ae,apiKey:Me,measurementId:Qe}=A.options;if(!ae)throw Ur.create("no-app-id");if(!Me){if(Qe)return{measurementId:Qe,appId:ae};throw Ur.create("no-api-key")}const Dt=P.getThrottleMetadata(ae)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Yt=new x;return setTimeout((0,Y.Z)(function*(){Yt.abort()}),void 0!==W?W:6e4),Ga({appId:ae,apiKey:Me,measurementId:Qe},Dt,Yt,P)})).apply(this,arguments)}function Ga(A,P,W){return C.apply(this,arguments)}function C(){return(C=(0,Y.Z)(function*(A,{throttleEndTimeMillis:P,backoffCount:W},ae,Me=oa){const{appId:Qe,measurementId:Dt}=A;try{yield w(ae,P)}catch(Yt){if(Dt)return mi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${Yt.message}]`),{appId:Qe,measurementId:Dt};throw Yt}try{const Yt=yield Ca(A);return Me.deleteThrottleMetadata(Qe),Yt}catch(Yt){if(!v(Yt)){if(Me.deleteThrottleMetadata(Qe),Dt)return mi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${Yt.message}]`),{appId:Qe,measurementId:Dt};throw Yt}const an=503===Number(Yt.customData.httpStatus)?(0,me.$s)(W,Me.intervalMillis,30):(0,me.$s)(W,Me.intervalMillis),Cn={throttleEndTimeMillis:Date.now()+an,backoffCount:W+1};return Me.setThrottleMetadata(Qe,Cn),mi.debug(`Calling attemptFetch again in ${an} millis`),Ga(A,Cn,ae,Me)}})).apply(this,arguments)}function w(A,P){return new Promise((W,ae)=>{const Me=Math.max(P-Date.now(),0),Qe=setTimeout(W,Me);A.addEventListener(()=>{clearTimeout(Qe),ae(Ur.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function v(A){if(!(A instanceof me.ZR&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}class x{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}function L(){return q.apply(this,arguments)}function q(){return(q=(0,Y.Z)(function*(){if(!(0,me.hl)())return mi.warn(Ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,me.eu)()}catch(A){return mi.warn(Ur.create("indexeddb-unavailable",{errorInfo:A}).message),!1}return!0})).apply(this,arguments)}function ve(){return(ve=(0,Y.Z)(function*(A,P,W,ae,Me,Qe,Dt){var Yt;const an=_u(A);an.then($i=>{W[$i.measurementId]=$i.appId,A.options.measurementId&&$i.measurementId!==A.options.measurementId&&mi.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${$i.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($i=>mi.error($i)),P.push(an);const Cn=L().then($i=>{if($i)return ae.getId()}),[ur,Vn]=yield Promise.all([an,Cn]);mu()||Ha(Qe,ur.measurementId),Me("js",new Date);const Jr=null!==(Yt=null==Dt?void 0:Dt.config)&&void 0!==Yt?Yt:{};return Jr.origin="firebase",Jr.update=!0,null!=Vn&&(Jr[$a]=Vn),Me("config",ur.measurementId,Jr),ur.measurementId})).apply(this,arguments)}class Ee{constructor(P){this.app=P}_delete(){return delete wt[this.app.options.appId],Promise.resolve()}}let wt={},xn=[];const un={};let ws,St,Et="dataLayer",et=!1;function js(A,P,W){!function Xr(){const A=[];if((0,me.ru)()&&A.push("This is a browser extension environment."),(0,me.zI)()||A.push("Cookies are not available."),A.length>0){const P=A.map((ae,Me)=>`(${Me+1}) ${ae}`).join(" "),W=Ur.create("invalid-analytics-context",{errorInfo:P});mi.warn(W.message)}}();const ae=A.options.appId;if(!ae)throw Ur.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Ur.create("no-api-key");mi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wt[ae])throw Ur.create("already-exists",{id:ae});if(!et){!function gs(A){let P=[];Array.isArray(window[A])?P=window[A]:window[A]=P}(Et);const{wrappedGtag:Qe,gtagCore:Dt}=function gu(A,P,W,ae,Me){let Qe=function(...Dt){window[ae].push(arguments)};return window[Me]&&"function"==typeof window[Me]&&(Qe=window[Me]),window[Me]=function Da(A,P,W,ae){function Qe(){return(Qe=(0,Y.Z)(function*(Dt,Yt,an){try{"event"===Dt?yield Us(A,P,W,Yt,an):"config"===Dt?yield ko(A,P,W,ae,Yt,an):A("set",Yt)}catch(Cn){mi.error(Cn)}})).apply(this,arguments)}return function Me(Dt,Yt,an){return Qe.apply(this,arguments)}}(Qe,A,P,W),{gtagCore:Qe,wrappedGtag:window[Me]}}(wt,xn,un,Et,"gtag");St=Qe,ws=Dt,et=!0}return wt[ae]=function se(A,P,W,ae,Me,Qe,Dt){return ve.apply(this,arguments)}(A,xn,un,P,ws,Et,W),new Ee(A)}function vu(){return(vu=(0,Y.Z)(function*(A,P,W,ae,Me){if(Me&&Me.global)A("event",W,ae);else{const Qe=yield P;A("event",W,Object.assign(Object.assign({},ae),{send_to:Qe}))}})).apply(this,arguments)}function uo(){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,Y.Z)(function*(){if((0,me.ru)()||!(0,me.zI)()||!(0,me.hl)())return!1;try{return yield(0,me.eu)()}catch(A){return!1}})).apply(this,arguments)}const ba="@firebase/analytics";!function Wd(){(0,we._registerComponent)(new Ae.wA(mo,(P,{options:W})=>js(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,we._registerComponent)(new Ae.wA("analytics-internal",function A(P){try{const W=P.getProvider(mo).getImmediate();return{logEvent:(ae,Me,Qe)=>function Yc(A,P,W,ae){A=(0,me.m9)(A),function qc(A,P,W,ae,Me){return vu.apply(this,arguments)}(St,wt[A.app.options.appId],P,W,ae).catch(Me=>mi.error(Me))}(W,ae,Me,Qe)}}catch(W){throw Ur.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,we.registerVersion)(ba,"0.7.8"),(0,we.registerVersion)(ba,"0.7.8","esm2017")}();var ms=k(4408),zd=k(7565);const al=new class Yn extends zd.v{}(class qs extends ms.o{constructor(P,W){super(P,W),this.scheduler=P,this.work=W}schedule(P,W=0){return W>0?super.schedule(P,W):(this.delay=W,this.state=P,this.scheduler.flush(this),this)}execute(P,W){return W>0||this.closed?super.execute(P,W):this._execute(P,W)}requestAsyncId(P,W,ae=0){return null!=ae&&ae>0||null==ae&&this.delay>0?super.requestAsyncId(P,W,ae):P.flush(this)}});var Pi=k(4986),No=k(8505),os=k(5363),Hs=k(9468);const Ta=new p.GfV("7.3.0"),Wo="__angularfire_symbol__analyticsIsSupportedValue",Ki="__angularfire_symbol__analyticsIsSupported",Is="__angularfire_symbol__remoteConfigIsSupportedValue",Fo="__angularfire_symbol__remoteConfigIsSupported",wu="__angularfire_symbol__messagingIsSupportedValue",Nt="__angularfire_symbol__messagingIsSupported";function Eo(A,P,W){if(P){if(1===P.length)return P[0];const Qe=P.filter(Dt=>Dt.app===W);if(1===Qe.length)return Qe[0]}return W.container.getProvider(A).getImmediate({optional:!0})}globalThis[Ki]||(globalThis[Ki]=uo().then(A=>globalThis[Wo]=A).catch(()=>globalThis[Wo]=!1)),globalThis[Nt]||(globalThis[Nt]=Vs().then(A=>globalThis[wu]=A).catch(()=>globalThis[wu]=!1)),globalThis[Fo]||(globalThis[Fo]=Vi().then(A=>globalThis[Is]=A).catch(()=>globalThis[Is]=!1));const Lo=(A,P)=>{const W=P?[P]:(0,K.C6)(),ae=[];return W.forEach(Me=>{Me.container.getProvider(A).instances.forEach(Dt=>{ae.includes(Dt)||ae.push(Dt)})}),ae};function zo(){}class Vo{constructor(P,W=al){this.zone=P,this.delegate=W}now(){return this.delegate.now()}schedule(P,W,ae){const Me=this.zone;return this.delegate.schedule(function(Dt){Me.runGuarded(()=>{P.apply(this,[Dt])})},W,ae)}}class ll{constructor(P){this.zone=P,this.task=null}call(P,W){const ae=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zo,{},zo,zo)),W.pipe((0,No.b)({next:ae,complete:ae,error:ae})).subscribe(P).add(ae)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Uo=(()=>{class A{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new Vo(Zone.current)),this.insideAngular=W.run(()=>new Vo(Zone.current,Pi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(W){return new(W||A)(p.LFG(p.R0b))},A.\u0275prov=p.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function co(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function Du(A){return A.pipe((0,os.Q)(co().outsideAngular))}function la(A){return co(),function Ko(A){return function(W){return(W=W.lift(new ll(A.ngZone))).pipe((0,Hs.R)(A.outsideAngular),(0,os.Q)(A.insideAngular))}}(co())(A)}},2090:(Mt,We,k)=>{k.d(We,{$s:()=>_i,BH:()=>ze,G6:()=>Ne,L:()=>Fe,LL:()=>Wt,Lj:()=>Tt,Mn:()=>Le,Sg:()=>Ze,UG:()=>ke,US:()=>Oe,X3:()=>kt,ZB:()=>_e,ZR:()=>$e,b$:()=>F,d:()=>J,eu:()=>Q,hl:()=>Ie,jU:()=>vt,m9:()=>tn,ne:()=>ht,pd:()=>Ar,r3:()=>en,ru:()=>j,tV:()=>ue,uI:()=>Be,vZ:()=>cr,w1:()=>le,xO:()=>Tr,xb:()=>Qn,z$:()=>ct,zI:()=>Se,zd:()=>zn});var p=k(5861);const me=function(pe){const ie=[];let Ce=0;for(let qe=0;qe<pe.length;qe++){let Ve=pe.charCodeAt(qe);Ve<128?ie[Ce++]=Ve:Ve<2048?(ie[Ce++]=Ve>>6|192,ie[Ce++]=63&Ve|128):55296==(64512&Ve)&&qe+1<pe.length&&56320==(64512&pe.charCodeAt(qe+1))?(Ve=65536+((1023&Ve)<<10)+(1023&pe.charCodeAt(++qe)),ie[Ce++]=Ve>>18|240,ie[Ce++]=Ve>>12&63|128,ie[Ce++]=Ve>>6&63|128,ie[Ce++]=63&Ve|128):(ie[Ce++]=Ve>>12|224,ie[Ce++]=Ve>>6&63|128,ie[Ce++]=63&Ve|128)}return ie},Oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(pe,ie){if(!Array.isArray(pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ce=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,qe=[];for(let Ve=0;Ve<pe.length;Ve+=3){const Ct=pe[Ve],Kt=Ve+1<pe.length,Tn=Kt?pe[Ve+1]:0,Mr=Ve+2<pe.length,wn=Mr?pe[Ve+2]:0;let Nn=(15&Tn)<<2|wn>>6,vr=63&wn;Mr||(vr=64,Kt||(Nn=64)),qe.push(Ce[Ct>>2],Ce[(3&Ct)<<4|Tn>>4],Ce[Nn],Ce[vr])}return qe.join("")},encodeString(pe,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(pe):this.encodeByteArray(me(pe),ie)},decodeString(pe,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(pe):function(pe){const ie=[];let Ce=0,qe=0;for(;Ce<pe.length;){const Ve=pe[Ce++];if(Ve<128)ie[qe++]=String.fromCharCode(Ve);else if(Ve>191&&Ve<224){const Ct=pe[Ce++];ie[qe++]=String.fromCharCode((31&Ve)<<6|63&Ct)}else if(Ve>239&&Ve<365){const Mr=((7&Ve)<<18|(63&pe[Ce++])<<12|(63&pe[Ce++])<<6|63&pe[Ce++])-65536;ie[qe++]=String.fromCharCode(55296+(Mr>>10)),ie[qe++]=String.fromCharCode(56320+(1023&Mr))}else{const Ct=pe[Ce++],Kt=pe[Ce++];ie[qe++]=String.fromCharCode((15&Ve)<<12|(63&Ct)<<6|63&Kt)}}return ie.join("")}(this.decodeStringToByteArray(pe,ie))},decodeStringToByteArray(pe,ie){this.init_();const Ce=ie?this.charToByteMapWebSafe_:this.charToByteMap_,qe=[];for(let Ve=0;Ve<pe.length;){const Ct=Ce[pe.charAt(Ve++)],Tn=Ve<pe.length?Ce[pe.charAt(Ve)]:0;++Ve;const wn=Ve<pe.length?Ce[pe.charAt(Ve)]:64;++Ve;const nn=Ve<pe.length?Ce[pe.charAt(Ve)]:64;if(++Ve,null==Ct||null==Tn||null==wn||null==nn)throw Error();qe.push(Ct<<2|Tn>>4),64!==wn&&(qe.push(Tn<<4&240|wn>>2),64!==nn&&qe.push(wn<<6&192|nn))}return qe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let pe=0;pe<this.ENCODED_VALS.length;pe++)this.byteToCharMap_[pe]=this.ENCODED_VALS.charAt(pe),this.charToByteMap_[this.byteToCharMap_[pe]]=pe,this.byteToCharMapWebSafe_[pe]=this.ENCODED_VALS_WEBSAFE.charAt(pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[pe]]=pe,pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(pe)]=pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(pe)]=pe)}}},Fe=function(pe){return function(pe){const ie=me(pe);return Oe.encodeByteArray(ie,!0)}(pe).replace(/\./g,"")},ue=function(pe){try{return Oe.decodeString(pe,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function _e(pe,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===pe&&(pe={});break;case Array:pe=[];break;default:return ie}for(const Ce in ie)!ie.hasOwnProperty(Ce)||!He(Ce)||(pe[Ce]=_e(pe[Ce],ie[Ce]));return pe}function He(pe){return"__proto__"!==pe}class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ie,Ce)=>{this.resolve=ie,this.reject=Ce})}wrapCallback(ie){return(Ce,qe)=>{Ce?this.reject(Ce):this.resolve(qe),"function"==typeof ie&&(this.promise.catch(()=>{}),1===ie.length?ie(Ce):ie(Ce,qe))}}}function Ze(pe,ie){if(pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const qe=ie||"demo-project",Ve=pe.iat||0,Ct=pe.sub||pe.user_id;if(!Ct)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Kt=Object.assign({iss:`https://securetoken.google.com/${qe}`,aud:qe,iat:Ve,exp:Ve+3600,auth_time:Ve,sub:Ct,user_id:Ct,firebase:{sign_in_provider:"custom",identities:{}}},pe);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(Kt)),""].join(".")}function ct(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function ke(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(pe){return!1}}function vt(){return"object"==typeof self&&self.self===self}function j(){const pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof pe&&void 0!==pe.id}function F(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function J(){return ct().indexOf("Electron/")>=0}function le(){const pe=ct();return pe.indexOf("MSIE ")>=0||pe.indexOf("Trident/")>=0}function Le(){return ct().indexOf("MSAppHost/")>=0}function Ne(){return!ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ie(){return"object"==typeof indexedDB}function Q(){return new Promise((pe,ie)=>{try{let Ce=!0;const qe="validate-browser-context-for-indexeddb-analytics-module",Ve=self.indexedDB.open(qe);Ve.onsuccess=()=>{Ve.result.close(),Ce||self.indexedDB.deleteDatabase(qe),pe(!0)},Ve.onupgradeneeded=()=>{Ce=!1},Ve.onerror=()=>{var Ct;ie((null===(Ct=Ve.error)||void 0===Ct?void 0:Ct.message)||"")}}catch(Ce){ie(Ce)}})}function Se(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class $e extends Error{constructor(ie,Ce,qe){super(Ce),this.code=ie,this.customData=qe,this.name="FirebaseError",Object.setPrototypeOf(this,$e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}}class Wt{constructor(ie,Ce,qe){this.service=ie,this.serviceName=Ce,this.errors=qe}create(ie,...Ce){const qe=Ce[0]||{},Ve=`${this.service}/${ie}`,Ct=this.errors[ie],Kt=Ct?function It(pe,ie){return pe.replace(Lt,(Ce,qe)=>{const Ve=ie[qe];return null!=Ve?String(Ve):`<${qe}?>`})}(Ct,qe):"Error";return new $e(Ve,`${this.serviceName}: ${Kt} (${Ve}).`,qe)}}const Lt=/\{\$([^}]+)}/g;function en(pe,ie){return Object.prototype.hasOwnProperty.call(pe,ie)}function Qn(pe){for(const ie in pe)if(Object.prototype.hasOwnProperty.call(pe,ie))return!1;return!0}function cr(pe,ie){if(pe===ie)return!0;const Ce=Object.keys(pe),qe=Object.keys(ie);for(const Ve of Ce){if(!qe.includes(Ve))return!1;const Ct=pe[Ve],Kt=ie[Ve];if(rr(Ct)&&rr(Kt)){if(!cr(Ct,Kt))return!1}else if(Ct!==Kt)return!1}for(const Ve of qe)if(!Ce.includes(Ve))return!1;return!0}function rr(pe){return null!==pe&&"object"==typeof pe}function Tr(pe){const ie=[];for(const[Ce,qe]of Object.entries(pe))Array.isArray(qe)?qe.forEach(Ve=>{ie.push(encodeURIComponent(Ce)+"="+encodeURIComponent(Ve))}):ie.push(encodeURIComponent(Ce)+"="+encodeURIComponent(qe));return ie.length?"&"+ie.join("&"):""}function zn(pe){const ie={};return pe.replace(/^\?/,"").split("&").forEach(qe=>{if(qe){const[Ve,Ct]=qe.split("=");ie[decodeURIComponent(Ve)]=decodeURIComponent(Ct)}}),ie}function Ar(pe){const ie=pe.indexOf("?");if(!ie)return"";const Ce=pe.indexOf("#",ie);return pe.substring(ie,Ce>0?Ce:void 0)}function ht(pe,ie){const Ce=new Qt(pe,ie);return Ce.subscribe.bind(Ce)}class Qt{constructor(ie,Ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ce,this.task.then(()=>{ie(this)}).catch(qe=>{this.error(qe)})}next(ie){this.forEachObserver(Ce=>{Ce.next(ie)})}error(ie){this.forEachObserver(Ce=>{Ce.error(ie)}),this.close(ie)}complete(){this.forEachObserver(ie=>{ie.complete()}),this.close()}subscribe(ie,Ce,qe){let Ve;if(void 0===ie&&void 0===Ce&&void 0===qe)throw new Error("Missing Observer.");Ve=function on(pe,ie){if("object"!=typeof pe||null===pe)return!1;for(const Ce of ie)if(Ce in pe&&"function"==typeof pe[Ce])return!0;return!1}(ie,["next","error","complete"])?ie:{next:ie,error:Ce,complete:qe},void 0===Ve.next&&(Ve.next=Nr),void 0===Ve.error&&(Ve.error=Nr),void 0===Ve.complete&&(Ve.complete=Nr);const Ct=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ve.error(this.finalError):Ve.complete()}catch(Kt){}}),this.observers.push(Ve),Ct}unsubscribeOne(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ie){if(!this.finalized)for(let Ce=0;Ce<this.observers.length;Ce++)this.sendOne(Ce,ie)}sendOne(ie,Ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ie])try{Ce(this.observers[ie])}catch(qe){"undefined"!=typeof console&&console.error&&console.error(qe)}})}close(ie){this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nr(){}function _i(pe,ie=1e3,Ce=2){const qe=ie*Math.pow(Ce,pe),Ve=Math.round(.5*qe*(Math.random()-.5)*2);return Math.min(144e5,qe+Ve)}function tn(pe){return pe&&pe._delegate?pe._delegate:pe}function Sr(pe,ie){return new Promise((Ce,qe)=>{pe.onsuccess=Ve=>{Ce(Ve.target.result)},pe.onerror=Ve=>{var Ct;qe(`${ie}: ${null===(Ct=Ve.target.error)||void 0===Ct?void 0:Ct.message}`)}})}class In{constructor(ie){this._db=ie,this.objectStoreNames=this._db.objectStoreNames}transaction(ie,Ce="readonly"){return new Pt(this._db.transaction.call(this._db,ie,Ce))}createObjectStore(ie,Ce){return new ot(this._db.createObjectStore(ie,Ce))}close(){this._db.close()}}class Pt{constructor(ie){this._transaction=ie,this.complete=new Promise((Ce,qe)=>{this._transaction.oncomplete=function(){Ce()},this._transaction.onerror=()=>{qe(this._transaction.error)},this._transaction.onabort=()=>{qe(this._transaction.error)}})}objectStore(ie){return new ot(this._transaction.objectStore(ie))}}class ot{constructor(ie){this._store=ie}index(ie){return new Ut(this._store.index(ie))}createIndex(ie,Ce,qe){return new Ut(this._store.createIndex(ie,Ce,qe))}get(ie){return Sr(this._store.get(ie),"Error reading from IndexedDB")}put(ie,Ce){return Sr(this._store.put(ie,Ce),"Error writing to IndexedDB")}delete(ie){return Sr(this._store.delete(ie),"Error deleting from IndexedDB")}clear(){return Sr(this._store.clear(),"Error clearing IndexedDB object store")}}class Ut{constructor(ie){this._index=ie}get(ie){return Sr(this._index.get(ie),"Error reading from IndexedDB")}}function kt(pe,ie,Ce){return new Promise((qe,Ve)=>{try{const Ct=indexedDB.open(pe,ie);Ct.onsuccess=Kt=>{qe(new In(Kt.target.result))},Ct.onerror=Kt=>{var Tn;Ve(`Error opening indexedDB: ${null===(Tn=Kt.target.error)||void 0===Tn?void 0:Tn.message}`)},Ct.onupgradeneeded=Kt=>{Ce(new In(Ct.result),Kt.oldVersion,Kt.newVersion,new Pt(Ct.transaction))}}catch(Ct){Ve(`Error opening indexedDB: ${Ct.message}`)}})}function Tt(pe){return zt.apply(this,arguments)}function zt(){return(zt=(0,p.Z)(function*(pe){return new Promise((ie,Ce)=>{try{const qe=indexedDB.deleteDatabase(pe);qe.onsuccess=()=>{ie()},qe.onerror=Ve=>{var Ct;Ce(`Error deleting indexedDB database "${pe}": ${null===(Ct=Ve.target.error)||void 0===Ct?void 0:Ct.message}`)}}catch(qe){Ce(`Error deleting indexedDB database "${pe}": ${qe.message}`)}})})).apply(this,arguments)}},7556:(Mt,We,k)=>{k.d(We,{e:()=>ue});var p=k(5861),K=k(991),Y=k(4004),we=k(9300),me=k(3900),Ae=k(9646),Oe=k(5e3),Re=k(1205),Fe=k(7566);let ue=(()=>{class re{constructor(He,ze,Ze,ct){this.angularFireAuth=He,this.angularFireStore=ze,this.activatedRoute=Ze,this.router=ct,this.redirectOnLoggedOutUrl=null,this.usersCollection=this.angularFireStore.collection("users"),this.isAuthenticated$=this.angularFireAuth.user.pipe((0,Y.U)(Be=>!!Be)),this.user$=this.angularFireAuth.user.pipe((0,Y.U)(Be=>{var ke,vt,j;return Be?{name:null!==(ke=Be.displayName)&&void 0!==ke?ke:"unknown name",email:null!==(vt=Be.email)&&void 0!==vt?vt:"unknow email",age:10,phoneNumber:null!==(j=Be.phoneNumber)&&void 0!==j?j:"unknown phone",uuid:Be.uid}:null})),this.router.events.pipe((0,we.h)(Be=>Be instanceof K.m2),(0,Y.U)(()=>this.activatedRoute.firstChild),(0,me.w)(Be=>{var ke;return null!==(ke=null==Be?void 0:Be.data)&&void 0!==ke?ke:(0,Ae.of)({})})).subscribe(Be=>{this.redirectOnLoggedOutUrl=Be.redirectOnLoggedOutUrl})}createUser(He){var ze=this;return(0,p.Z)(function*(){var Ze;const{name:ct,email:Be,password:ke,age:vt,phoneNumber:j}=He,F=yield ze.angularFireAuth.createUserWithEmailAndPassword(Be,ke);if(!F.user)throw Error("User cannot be found");yield ze.usersCollection.doc(null===(Ze=F.user)||void 0===Ze?void 0:Ze.uid).set({name:ct,email:Be,phoneNumber:j,age:vt}),yield F.user.updateProfile({displayName:ct})})()}login(He){var ze=this;return(0,p.Z)(function*(){const{email:Ze,password:ct}=He;yield ze.angularFireAuth.signInWithEmailAndPassword(Ze,ct)})()}logout(){var He=this;return(0,p.Z)(function*(){yield He.angularFireAuth.signOut(),He.redirectOnLoggedOutUrl&&He.router.navigateByUrl(He.redirectOnLoggedOutUrl)})()}}return re.\u0275fac=function(He){return new(He||re)(Oe.LFG(Re.zQ),Oe.LFG(Fe.ST),Oe.LFG(K.gz),Oe.LFG(K.F0))},re.\u0275prov=Oe.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})()},4466:(Mt,We,k)=>{k.d(We,{m:()=>me});var p=k(9808),K=k(2382),Y=k(1470),we=k(5e3);let me=(()=>{class Ae{}return Ae.\u0275fac=function(Re){return new(Re||Ae)},Ae.\u0275mod=we.oAB({type:Ae}),Ae.\u0275inj=we.cJS({imports:[[p.ez,K.UX,Y.yI.forRoot()]]}),Ae})()},6213:(Mt,We,k)=>{var p=k(9808),K=k(5e3);class Y extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class we extends Y{static makeCurrent(){(0,p.HT)(new we)}onAndCancel(fe,te,xe){return fe.addEventListener(te,xe,!1),()=>{fe.removeEventListener(te,xe,!1)}}dispatchEvent(fe,te){fe.dispatchEvent(te)}remove(fe){fe.parentNode&&fe.parentNode.removeChild(fe)}createElement(fe,te){return(te=te||this.getDefaultDocument()).createElement(fe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(fe){return fe.nodeType===Node.ELEMENT_NODE}isShadowRoot(fe){return fe instanceof DocumentFragment}getGlobalEventTarget(fe,te){return"window"===te?window:"document"===te?fe:"body"===te?fe.body:null}getBaseHref(fe){const te=function Ae(){return me=me||document.querySelector("base"),me?me.getAttribute("href"):null}();return null==te?null:function Re(ce){Oe=Oe||document.createElement("a"),Oe.setAttribute("href",ce);const fe=Oe.pathname;return"/"===fe.charAt(0)?fe:`/${fe}`}(te)}resetBaseElement(){me=null}getUserAgent(){return window.navigator.userAgent}getCookie(fe){return(0,p.Mx)(document.cookie,fe)}}let Oe,me=null;const Fe=new K.OlP("TRANSITION_ID"),re=[{provide:K.ip1,useFactory:function ue(ce,fe,te){return()=>{te.get(K.CZH).donePromise.then(()=>{const xe=(0,p.q)(),at=fe.querySelectorAll(`style[ng-transition="${ce}"]`);for(let cn=0;cn<at.length;cn++)xe.remove(at[cn])})}},deps:[Fe,p.K0,K.zs3],multi:!0}];class _e{static init(){(0,K.VLi)(new _e)}addToWindow(fe){K.dqk.getAngularTestability=(xe,at=!0)=>{const cn=fe.findTestabilityInTree(xe,at);if(null==cn)throw new Error("Could not find testability for element.");return cn},K.dqk.getAllAngularTestabilities=()=>fe.getAllTestabilities(),K.dqk.getAllAngularRootElements=()=>fe.getAllRootElements(),K.dqk.frameworkStabilizers||(K.dqk.frameworkStabilizers=[]),K.dqk.frameworkStabilizers.push(xe=>{const at=K.dqk.getAllAngularTestabilities();let cn=at.length,he=!1;const ye=function(Ue){he=he||Ue,cn--,0==cn&&xe(he)};at.forEach(function(Ue){Ue.whenStable(ye)})})}findTestabilityInTree(fe,te,xe){if(null==te)return null;const at=fe.getTestability(te);return null!=at?at:xe?(0,p.q)().isShadowRoot(te)?this.findTestabilityInTree(fe,te.host,!0):this.findTestabilityInTree(fe,te.parentElement,!0):null}}let He=(()=>{class ce{build(){return new XMLHttpRequest}}return ce.\u0275fac=function(te){return new(te||ce)},ce.\u0275prov=K.Yz7({token:ce,factory:ce.\u0275fac}),ce})();const ze=new K.OlP("EventManagerPlugins");let Ze=(()=>{class ce{constructor(te,xe){this._zone=xe,this._eventNameToPlugin=new Map,te.forEach(at=>at.manager=this),this._plugins=te.slice().reverse()}addEventListener(te,xe,at){return this._findPluginFor(xe).addEventListener(te,xe,at)}addGlobalEventListener(te,xe,at){return this._findPluginFor(xe).addGlobalEventListener(te,xe,at)}getZone(){return this._zone}_findPluginFor(te){const xe=this._eventNameToPlugin.get(te);if(xe)return xe;const at=this._plugins;for(let cn=0;cn<at.length;cn++){const he=at[cn];if(he.supports(te))return this._eventNameToPlugin.set(te,he),he}throw new Error(`No event manager plugin found for event ${te}`)}}return ce.\u0275fac=function(te){return new(te||ce)(K.LFG(ze),K.LFG(K.R0b))},ce.\u0275prov=K.Yz7({token:ce,factory:ce.\u0275fac}),ce})();class ct{constructor(fe){this._doc=fe}addGlobalEventListener(fe,te,xe){const at=(0,p.q)().getGlobalEventTarget(this._doc,fe);if(!at)throw new Error(`Unsupported event target ${at} for event ${te}`);return this.addEventListener(at,te,xe)}}let Be=(()=>{class ce{constructor(){this._stylesSet=new Set}addStyles(te){const xe=new Set;te.forEach(at=>{this._stylesSet.has(at)||(this._stylesSet.add(at),xe.add(at))}),this.onStylesAdded(xe)}onStylesAdded(te){}getAllStyles(){return Array.from(this._stylesSet)}}return ce.\u0275fac=function(te){return new(te||ce)},ce.\u0275prov=K.Yz7({token:ce,factory:ce.\u0275fac}),ce})(),ke=(()=>{class ce extends Be{constructor(te){super(),this._doc=te,this._hostNodes=new Map,this._hostNodes.set(te.head,[])}_addStylesToHost(te,xe,at){te.forEach(cn=>{const he=this._doc.createElement("style");he.textContent=cn,at.push(xe.appendChild(he))})}addHost(te){const xe=[];this._addStylesToHost(this._stylesSet,te,xe),this._hostNodes.set(te,xe)}removeHost(te){const xe=this._hostNodes.get(te);xe&&xe.forEach(vt),this._hostNodes.delete(te)}onStylesAdded(te){this._hostNodes.forEach((xe,at)=>{this._addStylesToHost(te,at,xe)})}ngOnDestroy(){this._hostNodes.forEach(te=>te.forEach(vt))}}return ce.\u0275fac=function(te){return new(te||ce)(K.LFG(p.K0))},ce.\u0275prov=K.Yz7({token:ce,factory:ce.\u0275fac}),ce})();function vt(ce){(0,p.q)().remove(ce)}const j={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},F=/%COMP%/g;function Q(ce,fe,te){for(let xe=0;xe<fe.length;xe++){let at=fe[xe];Array.isArray(at)?Q(ce,at,te):(at=at.replace(F,ce),te.push(at))}return te}function Se(ce){return fe=>{if("__ngUnwrap__"===fe)return ce;!1===ce(fe)&&(fe.preventDefault(),fe.returnValue=!1)}}let Ye=(()=>{class ce{constructor(te,xe,at){this.eventManager=te,this.sharedStylesHost=xe,this.appId=at,this.rendererByCompId=new Map,this.defaultRenderer=new $e(te)}createRenderer(te,xe){if(!te||!xe)return this.defaultRenderer;switch(xe.encapsulation){case K.ifc.Emulated:{let at=this.rendererByCompId.get(xe.id);return at||(at=new Lt(this.eventManager,this.sharedStylesHost,xe,this.appId),this.rendererByCompId.set(xe.id,at)),at.applyToHost(te),at}case 1:case K.ifc.ShadowDom:return new pt(this.eventManager,this.sharedStylesHost,te,xe);default:if(!this.rendererByCompId.has(xe.id)){const at=Q(xe.id,xe.styles,[]);this.sharedStylesHost.addStyles(at),this.rendererByCompId.set(xe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ce.\u0275fac=function(te){return new(te||ce)(K.LFG(Ze),K.LFG(ke),K.LFG(K.AFp))},ce.\u0275prov=K.Yz7({token:ce,factory:ce.\u0275fac}),ce})();class $e{constructor(fe){this.eventManager=fe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(fe,te){return te?document.createElementNS(j[te]||te,fe):document.createElement(fe)}createComment(fe){return document.createComment(fe)}createText(fe){return document.createTextNode(fe)}appendChild(fe,te){fe.appendChild(te)}insertBefore(fe,te,xe){fe&&fe.insertBefore(te,xe)}removeChild(fe,te){fe&&fe.removeChild(te)}selectRootElement(fe,te){let xe="string"==typeof fe?document.querySelector(fe):fe;if(!xe)throw new Error(`The selector "${fe}" did not match any elements`);return te||(xe.textContent=""),xe}parentNode(fe){return fe.parentNode}nextSibling(fe){return fe.nextSibling}setAttribute(fe,te,xe,at){if(at){te=at+":"+te;const cn=j[at];cn?fe.setAttributeNS(cn,te,xe):fe.setAttribute(te,xe)}else fe.setAttribute(te,xe)}removeAttribute(fe,te,xe){if(xe){const at=j[xe];at?fe.removeAttributeNS(at,te):fe.removeAttribute(`${xe}:${te}`)}else fe.removeAttribute(te)}addClass(fe,te){fe.classList.add(te)}removeClass(fe,te){fe.classList.remove(te)}setStyle(fe,te,xe,at){at&(K.JOm.DashCase|K.JOm.Important)?fe.style.setProperty(te,xe,at&K.JOm.Important?"important":""):fe.style[te]=xe}removeStyle(fe,te,xe){xe&K.JOm.DashCase?fe.style.removeProperty(te):fe.style[te]=""}setProperty(fe,te,xe){fe[te]=xe}setValue(fe,te){fe.nodeValue=te}listen(fe,te,xe){return"string"==typeof fe?this.eventManager.addGlobalEventListener(fe,te,Se(xe)):this.eventManager.addEventListener(fe,te,Se(xe))}}class Lt extends $e{constructor(fe,te,xe,at){super(fe),this.component=xe;const cn=Q(at+"-"+xe.id,xe.styles,[]);te.addStyles(cn),this.contentAttr=function Ne(ce){return"_ngcontent-%COMP%".replace(F,ce)}(at+"-"+xe.id),this.hostAttr=function Ie(ce){return"_nghost-%COMP%".replace(F,ce)}(at+"-"+xe.id)}applyToHost(fe){super.setAttribute(fe,this.hostAttr,"")}createElement(fe,te){const xe=super.createElement(fe,te);return super.setAttribute(xe,this.contentAttr,""),xe}}class pt extends $e{constructor(fe,te,xe,at){super(fe),this.sharedStylesHost=te,this.hostEl=xe,this.shadowRoot=xe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const cn=Q(at.id,at.styles,[]);for(let he=0;he<cn.length;he++){const ye=document.createElement("style");ye.textContent=cn[he],this.shadowRoot.appendChild(ye)}}nodeOrShadowRoot(fe){return fe===this.hostEl?this.shadowRoot:fe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(fe,te){return super.appendChild(this.nodeOrShadowRoot(fe),te)}insertBefore(fe,te,xe){return super.insertBefore(this.nodeOrShadowRoot(fe),te,xe)}removeChild(fe,te){return super.removeChild(this.nodeOrShadowRoot(fe),te)}parentNode(fe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(fe)))}}let bt=(()=>{class ce extends ct{constructor(te){super(te)}supports(te){return!0}addEventListener(te,xe,at){return te.addEventListener(xe,at,!1),()=>this.removeEventListener(te,xe,at)}removeEventListener(te,xe,at){return te.removeEventListener(xe,at)}}return ce.\u0275fac=function(te){return new(te||ce)(K.LFG(p.K0))},ce.\u0275prov=K.Yz7({token:ce,factory:ce.\u0275fac}),ce})();const qt=["alt","control","meta","shift"],Vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pn={alt:ce=>ce.altKey,control:ce=>ce.ctrlKey,meta:ce=>ce.metaKey,shift:ce=>ce.shiftKey};let en=(()=>{class ce extends ct{constructor(te){super(te)}supports(te){return null!=ce.parseEventName(te)}addEventListener(te,xe,at){const cn=ce.parseEventName(xe),he=ce.eventCallback(cn.fullKey,at,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(te,cn.domEventName,he))}static parseEventName(te){const xe=te.toLowerCase().split("."),at=xe.shift();if(0===xe.length||"keydown"!==at&&"keyup"!==at)return null;const cn=ce._normalizeKey(xe.pop());let he="";if(qt.forEach(Ue=>{const rt=xe.indexOf(Ue);rt>-1&&(xe.splice(rt,1),he+=Ue+".")}),he+=cn,0!=xe.length||0===cn.length)return null;const ye={};return ye.domEventName=at,ye.fullKey=he,ye}static getEventFullKey(te){let xe="",at=function mn(ce){let fe=ce.key;if(null==fe){if(fe=ce.keyIdentifier,null==fe)return"Unidentified";fe.startsWith("U+")&&(fe=String.fromCharCode(parseInt(fe.substring(2),16)),3===ce.location&&lt.hasOwnProperty(fe)&&(fe=lt[fe]))}return Vt[fe]||fe}(te);return at=at.toLowerCase()," "===at?at="space":"."===at&&(at="dot"),qt.forEach(cn=>{cn!=at&&pn[cn](te)&&(xe+=cn+".")}),xe+=at,xe}static eventCallback(te,xe,at){return cn=>{ce.getEventFullKey(cn)===te&&at.runGuarded(()=>xe(cn))}}static _normalizeKey(te){return"esc"===te?"escape":te}}return ce.\u0275fac=function(te){return new(te||ce)(K.LFG(p.K0))},ce.\u0275prov=K.Yz7({token:ce,factory:ce.\u0275fac}),ce})();const Tr=(0,K.eFA)(K._c5,"browser",[{provide:K.Lbi,useValue:p.bD},{provide:K.g9A,useValue:function Qn(){we.makeCurrent(),_e.init()},multi:!0},{provide:p.K0,useFactory:function cr(){return(0,K.RDi)(document),document},deps:[]}]),zn=[{provide:K.zSh,useValue:"root"},{provide:K.qLn,useFactory:function Bn(){return new K.qLn},deps:[]},{provide:ze,useClass:bt,multi:!0,deps:[p.K0,K.R0b,K.Lbi]},{provide:ze,useClass:en,multi:!0,deps:[p.K0]},{provide:Ye,useClass:Ye,deps:[Ze,ke,K.AFp]},{provide:K.FYo,useExisting:Ye},{provide:Be,useExisting:ke},{provide:ke,useClass:ke,deps:[p.K0]},{provide:K.dDg,useClass:K.dDg,deps:[K.R0b]},{provide:Ze,useClass:Ze,deps:[ze,K.R0b]},{provide:p.JF,useClass:He,deps:[]}];let Ar=(()=>{class ce{constructor(te){if(te)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(te){return{ngModule:ce,providers:[{provide:K.AFp,useValue:te.appId},{provide:Fe,useExisting:K.AFp},re]}}}return ce.\u0275fac=function(te){return new(te||ce)(K.LFG(ce,12))},ce.\u0275mod=K.oAB({type:ce}),ce.\u0275inj=K.cJS({providers:zn,imports:[p.ez,K.hGG]}),ce})();"undefined"!=typeof window&&window;var Kt=k(127),Mr=(k(820),k(2011)),wn=k(2084);const nr_firebase={apiKey:"AIzaSyAcBedrPQWtwsBA-t8ZSjUk3y4SQ8eGRK8",authDomain:"clipit-31d1c.firebaseapp.com",projectId:"clipit-31d1c",storageBucket:"clipit-31d1c.appspot.com",messagingSenderId:"169059670918",appId:"1:169059670918:web:0da8e64eae1eddd785ea07"};var nn=k(991),Nn=k(9635),vr=k(4004),pi=k(5698),ls=k(1205);const hr=(0,vr.U)(ce=>!!ce);let sr=(()=>{class ce{constructor(te,xe){this.router=te,this.auth=xe,this.canActivate=(at,cn)=>{const he=at.data.authGuardPipe||(()=>hr);return this.auth.user.pipe((0,pi.q)(1),he(at,cn),(0,vr.U)(ye=>"boolean"==typeof ye?ye:Array.isArray(ye)?this.router.createUrlTree(ye):this.router.parseUrl(ye)))}}}return ce.\u0275fac=function(te){return new(te||ce)(K.LFG(nn.F0),K.LFG(ls.zQ))},ce.\u0275prov=K.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"any"}),ce})();const ai=[{path:"",component:(()=>{class ce{constructor(){}ngOnInit(){}}return ce.\u0275fac=function(te){return new(te||ce)},ce.\u0275cmp=K.Xpm({type:ce,selectors:[["app-home"]],decls:2,vars:0,template:function(te,xe){1&te&&(K.TgZ(0,"p"),K._uU(1,"home works!"),K.qZA())},styles:[""]}),ce})()},{path:"about",loadChildren:()=>k.e(630).then(k.bind(k,7630)).then(ce=>ce.AboutModule)},{path:"video",canActivate:[sr],data:{redirectOnLoggedOutUrl:"/",authGuardPipe:()=>("/",(0,Nn.z)(hr,(0,vr.U)(fe=>fe||"/")))},loadChildren:()=>Promise.all([k.e(592),k.e(604)]).then(k.bind(k,3604)).then(ce=>ce.VideoModule)},{path:"clips",loadChildren:()=>k.e(163).then(k.bind(k,9163)).then(ce=>ce.ClipsModule)},{path:"user",outlet:"modal",loadChildren:()=>Promise.all([k.e(592),k.e(983)]).then(k.bind(k,9983)).then(ce=>ce.UserModule)},{path:"**",loadChildren:()=>k.e(442).then(k.bind(k,2442)).then(ce=>ce.NotFoundModule)}];let yn=(()=>{class ce{}return ce.\u0275fac=function(te){return new(te||ce)},ce.\u0275mod=K.oAB({type:ce}),ce.\u0275inj=K.cJS({imports:[[nn.Bz.forRoot(ai)],nn.Bz]}),ce})();var wr=k(9646),vi=k(5861),Li=k(7556);const Yr=function(){return["user"]},Rr=function(ce){return{modal:ce}},Vr=function(ce){return{outlets:ce}},jr=function(ce){return[ce]};function Pn(ce,fe){1&ce&&(K.TgZ(0,"li")(1,"a",14),K._uU(2,"Login / Register"),K.qZA()()),2&ce&&(K.xp6(1),K.Q6J("routerLink",K.VKq(6,jr,K.VKq(4,Vr,K.VKq(2,Rr,K.DdM(1,Yr))))))}const Fn=function(){return{sort:"asc"}};function Ji(ce,fe){if(1&ce){const te=K.EpF();K.TgZ(0,"li",7)(1,"a",15),K._uU(2,"Manage"),K.qZA()(),K.TgZ(3,"li",7)(4,"a",16),K._uU(5,"Upload"),K.qZA()(),K.TgZ(6,"li",7)(7,"a",17),K.NdJ("click",function(at){return K.CHM(te),K.oxw().logout(at)}),K._uU(8,"Logout"),K.qZA()()}2&ce&&(K.xp6(1),K.Q6J("queryParams",K.DdM(1,Fn)))}let br=(()=>{class ce{constructor(te){this.authService=te}logout(te){var xe=this;return(0,vi.Z)(function*(){te.preventDefault(),yield xe.authService.logout()})()}}return ce.\u0275fac=function(te){return new(te||ce)(K.Y36(Li.e))},ce.\u0275cmp=K.Xpm({type:ce,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","about",1,"px-2"],[1,"flex","flex-row","ml-auto"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],[1,"px-2",3,"routerLink"],["routerLink","video/manage",1,"px-2",3,"queryParams"],["routerLink","video/upload","href","javascript:void(0);",1,"px-2"],["href","javascript:void(0);",1,"px-2",3,"click"]],template:function(te,xe){if(1&te&&(K.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),K._uU(3,"Clipit!"),K.qZA(),K.TgZ(4,"div",3)(5,"ul",4),K.YNc(6,Pn,3,8,"li",5),K.ALo(7,"async"),K.YNc(8,Ji,9,2,"ng-template",null,6,K.W1O),K.TgZ(10,"li",7)(11,"a",8),K._uU(12,"About"),K.qZA()()(),K.TgZ(13,"ul",9)(14,"li")(15,"a"),K._UZ(16,"img",10),K.TgZ(17,"span",11),K._uU(18,"English"),K.qZA()()(),K.TgZ(19,"li",12)(20,"a"),K._UZ(21,"img",13),K.TgZ(22,"span",11),K._uU(23,"French"),K.qZA()()()()()()()),2&te){const at=K.MAs(9);K.xp6(6),K.Q6J("ngIf",!1===K.lcZ(7,2,xe.authService.isAuthenticated$))("ngIfElse",at)}},directives:[nn.yS,p.O5,nn.Od],pipes:[p.Ov],styles:[""],changeDetection:0}),ce})(),$r=(()=>{class ce{constructor(){}}return ce.\u0275fac=function(te){return new(te||ce)},ce.\u0275cmp=K.Xpm({type:ce,selectors:[["app-loading-spinner"]],decls:5,vars:0,consts:[[1,"loadingio-spinner-dual-ring-tosstnkrw7b"],[1,"ldio-stkcctj1ev"]],template:function(te,xe){1&te&&(K.TgZ(0,"div",0)(1,"div",1),K._UZ(2,"div"),K.TgZ(3,"div"),K._UZ(4,"div"),K.qZA()()())},styles:['[_nghost-%COMP%]{display:block;position:fixed;top:0;right:0;width:100vw;height:100vh;background:rgba(82,118,154,.2)}@keyframes ldio-stkcctj1ev{0%{transform:rotate(0)}to{transform:rotate(360deg)}}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box!important}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:144px;height:144px;top:28px;left:28px;border-radius:50%;border:16px solid #000;border-color:#1c4595 transparent #1c4595 transparent;animation:ldio-stkcctj1ev 1s linear infinite}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-color:transparent}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;transform:rotate(45deg)}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:16px;height:16px;top:-16px;left:48px;background:#1c4595;border-radius:50%;box-shadow:0 128px #1c4595}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   div[_ngcontent-%COMP%]:after{left:-16px;top:48px;box-shadow:128px 0 #1c4595}[_nghost-%COMP%]   .loadingio-spinner-dual-ring-tosstnkrw7b[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;display:inline-block;overflow:hidden}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(1);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}[_nghost-%COMP%]   .ldio-stkcctj1ev[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}'],changeDetection:0}),ce})();function ti(ce,fe){1&ce&&K._UZ(0,"app-loading-spinner")}let xs=(()=>{class ce{constructor(te){this.router=te,this.title="clipit",this.loading$=(0,wr.of)(!1),this.loading$=this.router.events.pipe((0,vr.U)(xe=>xe instanceof nn.xV))}}return ce.\u0275fac=function(te){return new(te||ce)(K.Y36(nn.F0))},ce.\u0275cmp=K.Xpm({type:ce,selectors:[["app-root"]],decls:5,vars:3,consts:[["name","modal"],[4,"ngIf"]],template:function(te,xe){1&te&&(K._UZ(0,"app-nav")(1,"router-outlet")(2,"router-outlet",0),K.YNc(3,ti,1,0,"app-loading-spinner",1),K.ALo(4,"async")),2&te&&(K.xp6(3),K.Q6J("ngIf",K.lcZ(4,1,xe.loading$)))},directives:[br,nn.lC,p.O5,$r],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),ce})();var ar=k(4466);let es=(()=>{class ce{}return ce.\u0275fac=function(te){return new(te||ce)},ce.\u0275mod=K.oAB({type:ce,bootstrap:[xs]}),ce.\u0275inj=K.cJS({providers:[],imports:[[Ar,yn,Mr.hO.initializeApp(nr_firebase),ar.m,wn.TE]]}),ce})();(0,K.G48)();let Qr=!1;Kt.Z.initializeApp(nr_firebase),Kt.Z.auth().onAuthStateChanged(()=>{Qr||Tr().bootstrapModule(es).catch(ce=>console.error(ce)),Qr=!0})},5867:(Mt,We,k)=>{k.d(We,{C6:()=>p.getApps,Mq:()=>p.getApp,ZR:()=>p.FirebaseError});var p=k(9681);(0,p.registerVersion)("firebase","9.6.11","app")},127:(Mt,We,k)=>{k.d(We,{Z:()=>p.Z});var p=k(3942);p.Z.registerVersion("firebase","9.6.11","app-compat")},820:(Mt,We,k)=>{k.r(We);var p=k(5861),K=k(3942),Y=k(2090),we=k(9681),me=k(655),Ae=k(1877),Oe=k(4859);const Ze=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ct=function ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Be=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vt=new Ae.Yd("@firebase/auth");function j(g,...c){vt.logLevel<=Ae.in.ERROR&&vt.error(`Auth (${we.SDK_VERSION}): ${g}`,...c)}function F(g,...c){throw je(g,...c)}function J(g,...c){return je(g,...c)}function le(g,c,f){const E=Object.assign(Object.assign({},ct()),{[c]:f});return new Y.LL("auth","Firebase",E).create(c,{appName:g.name})}function Le(g,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&F(g,"argument-error"),le(g,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(g,...c){if("string"!=typeof g){const f=c[0],E=[...c.slice(1)];return E[0]&&(E[0].appName=g.name),g._errorFactory.create(f,...E)}return Be.create(g,...c)}function Ne(g,c,...f){if(!g)throw je(c,...f)}function Ie(g){const c="INTERNAL ASSERTION FAILED: "+g;throw j(c),new Error(c)}function Q(g,c){g||Ie(c)}const Se=new Map;function de(g){Q(g instanceof Function,"Expected a class definition");let c=Se.get(g);return c?(Q(c instanceof g,"Instance stored in cache mismatched with class"),c):(c=new g,Se.set(g,c),c)}function Wt(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function It(){return"http:"===Lt()||"https:"===Lt()}function Lt(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class qt{constructor(c,f){this.shortDelay=c,this.longDelay=f,Q(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function pt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(It()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rt(g,c){Q(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class Vt{static initialize(c,f,E){this.fetchImpl=c,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},pn=new qt(3e4,6e4);function en(g,c){return g.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:g.tenantId}):c}function mn(g,c,f,E){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,p.Z)(function*(g,c,f,E,V={}){return Bn(g,V,(0,p.Z)(function*(){let X={},Pe={};E&&("GET"===c?Pe=E:X={body:JSON.stringify(E)});const nt=(0,Y.xO)(Object.assign({key:g.config.apiKey},Pe)).slice(1),Bt=yield g._getAdditionalHeaders();return Bt["Content-Type"]="application/json",g.languageCode&&(Bt["X-Firebase-Locale"]=g.languageCode),Vt.fetch()(zn(g,g.config.apiHost,f,nt),Object.assign({method:c,headers:Bt,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function Bn(g,c,f){return cr.apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(g,c,f){g._canInitEmulator=!1;const E=Object.assign(Object.assign({},lt),c);try{const V=new Ar(g),X=yield Promise.race([f(),V.promise]);V.clearNetworkTimeout();const Pe=yield X.json();if("needConfirmation"in Pe)throw jn(g,"account-exists-with-different-credential",Pe);if(X.ok&&!("errorMessage"in Pe))return Pe;{const nt=X.ok?Pe.errorMessage:Pe.error.message,[Bt,ln]=nt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Bt)throw jn(g,"credential-already-in-use",Pe);if("EMAIL_EXISTS"===Bt)throw jn(g,"email-already-in-use",Pe);const bn=E[Bt]||Bt.toLowerCase().replace(/[_\s]+/g,"-");if(ln)throw le(g,bn,ln);F(g,bn)}}catch(V){if(V instanceof Y.ZR)throw V;F(g,"network-request-failed")}})).apply(this,arguments)}function rr(g,c,f,E){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,p.Z)(function*(g,c,f,E,V={}){const X=yield mn(g,c,f,E,V);return"mfaPendingCredential"in X&&F(g,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function zn(g,c,f,E){const V=`${c}${f}?${E}`;return g.config.emulator?Rt(g.config,V):`${g.config.apiScheme}://${V}`}class Ar{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(J(this.auth,"network-request-failed")),pn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(g,c,f){const E={appName:g.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const V=J(g,c,E);return V.customData._tokenResponse=f,V}function Qt(){return(Qt=(0,p.Z)(function*(g,c){return mn(g,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function vn(g,c){return on.apply(this,arguments)}function on(){return(on=(0,p.Z)(function*(g,c){return mn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Nr(g,c){return yi.apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(g,c){return mn(g,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function ir(g){if(g)try{const c=new Date(Number(g));if(!isNaN(c.getTime()))return c.toUTCString()}catch(c){}}function Br(){return(Br=(0,p.Z)(function*(g,c=!1){const f=(0,Y.m9)(g),E=yield f.getIdToken(c),V=jt(E);Ne(V&&V.exp&&V.auth_time&&V.iat,f.auth,"internal-error");const X="object"==typeof V.firebase?V.firebase:void 0,Pe=null==X?void 0:X.sign_in_provider;return{claims:V,token:E,authTime:ir(En(V.auth_time)),issuedAtTime:ir(En(V.iat)),expirationTime:ir(En(V.exp)),signInProvider:Pe||null,signInSecondFactor:(null==X?void 0:X.sign_in_second_factor)||null}})).apply(this,arguments)}function En(g){return 1e3*Number(g)}function jt(g){const[c,f,E]=g.split(".");if(void 0===c||void 0===f||void 0===E)return j("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,Y.tV)(f);return V?JSON.parse(V):(j("Failed to decode base64 JWT payload"),null)}catch(V){return j("Caught error parsing JWT payload as JSON",V),null}}function Sn(g,c){return dr.apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(g,c,f=!1){if(f)return c;try{return yield c}catch(E){throw E instanceof Y.ZR&&gn(E)&&g.auth.currentUser===g&&(yield g.auth.signOut()),E}})).apply(this,arguments)}function gn({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class _i{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const V=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),E)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&c.schedule(!0))}c.schedule()})()}}class _r{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=ir(this.lastLoginAt),this.creationTime=ir(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Lr(g){return tn.apply(this,arguments)}function tn(){return(tn=(0,p.Z)(function*(g){var c;const f=g.auth,E=yield g.getIdToken(),V=yield Sn(g,Nr(f,{idToken:E}));Ne(null==V?void 0:V.users.length,f,"internal-error");const X=V.users[0];g._notifyReloadListener(X);const Pe=(null===(c=X.providerUserInfo)||void 0===c?void 0:c.length)?ot(X.providerUserInfo):[],nt=Pt(g.providerData,Pe),bn=!!g.isAnonymous&&!(g.email&&X.passwordHash||(null==nt?void 0:nt.length)),Jt={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:nt,metadata:new _r(X.createdAt,X.lastLoginAt),isAnonymous:bn};Object.assign(g,Jt)})).apply(this,arguments)}function In(){return(In=(0,p.Z)(function*(g){const c=(0,Y.m9)(g);yield Lr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Pt(g,c){return[...g.filter(E=>!c.some(V=>V.providerId===E.providerId)),...c]}function ot(g){return g.map(c=>{var{providerId:f}=c,E=(0,me._T)(c,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function kt(){return(kt=(0,p.Z)(function*(g,c){const f=yield Bn(g,{},(0,p.Z)(function*(){const E=(0,Y.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:V,apiKey:X}=g.config,Pe=zn(g,V,"/v1/token",`key=${X}`),nt=yield g._getAdditionalHeaders();return nt["Content-Type"]="application/x-www-form-urlencoded",Vt.fetch()(Pe,{method:"POST",headers:nt,body:E})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Ne(c.idToken,"internal-error"),Ne(void 0!==c.idToken,"internal-error"),Ne(void 0!==c.refreshToken,"internal-error");const f="expiresIn"in c&&void 0!==c.expiresIn?Number(c.expiresIn):function rn(g){const c=jt(g);return Ne(c,"internal-error"),Ne(void 0!==c.exp,"internal-error"),Ne(void 0!==c.iat,"internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var E=this;return(0,p.Z)(function*(){return Ne(!E.accessToken||E.refreshToken,c,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(c,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var E=this;return(0,p.Z)(function*(){const{accessToken:V,refreshToken:X,expiresIn:Pe}=yield function Ut(g,c){return kt.apply(this,arguments)}(c,f);E.updateTokensAndExpiration(V,X,Number(Pe))})()}updateTokensAndExpiration(c,f,E){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(c,f){const{refreshToken:E,accessToken:V,expirationTime:X}=f,Pe=new Tt;return E&&(Ne("string"==typeof E,"internal-error",{appName:c}),Pe.refreshToken=E),V&&(Ne("string"==typeof V,"internal-error",{appName:c}),Pe.accessToken=V),X&&(Ne("number"==typeof X,"internal-error",{appName:c}),Pe.expirationTime=X),Pe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new Tt,this.toJSON())}_performRefresh(){return Ie("not implemented")}}function zt(g,c){Ne("string"==typeof g||void 0===g,"internal-error",{appName:c})}class pe{constructor(c){var{uid:f,auth:E,stsTokenManager:V}=c,X=(0,me._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _i(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new _r(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const E=yield Sn(f,f.stsTokenManager.getToken(f.auth,c));return Ne(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(c){return function yr(g){return Br.apply(this,arguments)}(this,c)}reload(){return function Sr(g){return In.apply(this,arguments)}(this)}_assign(c){this!==c&&(Ne(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new pe(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var E=this;return(0,p.Z)(function*(){let V=!1;c.idToken&&c.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(c),V=!0),f&&(yield Lr(E)),yield E.auth._persistUserIfCurrent(E),V&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield Sn(c,function ht(g,c){return Qt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var E,V,X,Pe,nt,Bt,ln,bn;const Jt=null!==(E=f.displayName)&&void 0!==E?E:void 0,ki=null!==(V=f.email)&&void 0!==V?V:void 0,po=null!==(X=f.phoneNumber)&&void 0!==X?X:void 0,Xs=null!==(Pe=f.photoURL)&&void 0!==Pe?Pe:void 0,Ol=null!==(nt=f.tenantId)&&void 0!==nt?nt:void 0,Ra=null!==(Bt=f._redirectEventId)&&void 0!==Bt?Bt:void 0,mc=null!==(ln=f.createdAt)&&void 0!==ln?ln:void 0,Ff=null!==(bn=f.lastLoginAt)&&void 0!==bn?bn:void 0,{uid:Oa,emailVerified:yc,isAnonymous:ad,providerData:ud,stsTokenManager:_c}=f;Ne(Oa&&_c,c,"internal-error");const Lf=Tt.fromJSON(this.name,_c);Ne("string"==typeof Oa,c,"internal-error"),zt(Jt,c.name),zt(ki,c.name),Ne("boolean"==typeof yc,c,"internal-error"),Ne("boolean"==typeof ad,c,"internal-error"),zt(po,c.name),zt(Xs,c.name),zt(Ol,c.name),zt(Ra,c.name),zt(mc,c.name),zt(Ff,c.name);const ld=new pe({uid:Oa,auth:c,email:ki,emailVerified:yc,displayName:Jt,isAnonymous:ad,photoURL:Xs,phoneNumber:po,tenantId:Ol,stsTokenManager:Lf,createdAt:mc,lastLoginAt:Ff});return ud&&Array.isArray(ud)&&(ld.providerData=ud.map(Vf=>Object.assign({},Vf))),Ra&&(ld._redirectEventId=Ra),ld}static _fromIdTokenResponse(c,f,E=!1){return(0,p.Z)(function*(){const V=new Tt;V.updateFromServerResponse(f);const X=new pe({uid:f.localId,auth:c,stsTokenManager:V,isAnonymous:E});return yield Lr(X),X})()}}const Ce=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,E){var V=this;return(0,p.Z)(function*(){V.storage[f]=E})()}_get(f){var E=this;return(0,p.Z)(function*(){const V=E.storage[f];return void 0===V?null:V})()}_remove(f){var E=this;return(0,p.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return g.type="NONE",g})();function qe(g,c,f){return`firebase:${g}:${c}:${f}`}class Ve{constructor(c,f,E){this.persistence=c,this.auth=f,this.userKey=E;const{config:V,name:X}=this.auth;this.fullUserKey=qe(this.userKey,V.apiKey,X),this.fullPersistenceKey=qe("persistence",V.apiKey,X),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?pe._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,E="authUser"){return(0,p.Z)(function*(){if(!f.length)return new Ve(de(Ce),c,E);const V=(yield Promise.all(f.map(function(){var ln=(0,p.Z)(function*(bn){if(yield bn._isAvailable())return bn});return function(bn){return ln.apply(this,arguments)}}()))).filter(ln=>ln);let X=V[0]||de(Ce);const Pe=qe(E,c.config.apiKey,c.name);let nt=null;for(const ln of f)try{const bn=yield ln._get(Pe);if(bn){const Jt=pe._fromJSON(c,bn);ln!==X&&(nt=Jt),X=ln;break}}catch(bn){}const Bt=V.filter(ln=>ln._shouldAllowMigration);return X._shouldAllowMigration&&Bt.length?(X=Bt[0],nt&&(yield X._set(Pe,nt.toJSON())),yield Promise.all(f.map(function(){var ln=(0,p.Z)(function*(bn){if(bn!==X)try{yield bn._remove(Pe)}catch(Jt){}});return function(bn){return ln.apply(this,arguments)}}())),new Ve(X,c,E)):new Ve(X,c,E)})()}}function Ct(g){const c=g.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(wn(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Kt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(nn(c))return"Blackberry";if(Nn(c))return"Webos";if(Tn(c))return"Safari";if((c.includes("chrome/")||Mr(c))&&!c.includes("edge/"))return"Chrome";if(nr(c))return"Android";{const E=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Kt(g=(0,Y.z$)()){return/firefox\//i.test(g)}function Tn(g=(0,Y.z$)()){const c=g.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Mr(g=(0,Y.z$)()){return/crios\//i.test(g)}function wn(g=(0,Y.z$)()){return/iemobile/i.test(g)}function nr(g=(0,Y.z$)()){return/android/i.test(g)}function nn(g=(0,Y.z$)()){return/blackberry/i.test(g)}function Nn(g=(0,Y.z$)()){return/webos/i.test(g)}function vr(g=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(g)}function sr(g=(0,Y.z$)()){return vr(g)||nr(g)||Nn(g)||nn(g)||/windows phone/i.test(g)||wn(g)}function Gi(g,c=[]){let f;switch(g){case"Browser":f=Ct((0,Y.z$)());break;case"Worker":f=`${Ct((0,Y.z$)())}-${g}`;break;default:f=g}const E=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${we.SDK_VERSION}/${E}`}class Zr{constructor(c,f,E){this.app=c,this.heartbeatServiceProvider=f,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $t(this),this.idTokenSubscription=new $t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(c,f){var E=this;return f&&(this._popupRedirectResolver=de(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var V,X;if(!E._deleted&&(E.persistenceManager=yield Ve.create(E,c),!E._deleted)){if(null===(V=E._popupRedirectResolver)||void 0===V?void 0:V._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Pe){}yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(X=E.currentUser)||void 0===X?void 0:X.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var E;let V=yield f.assertedPersistence.getCurrentUser();if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const X=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,Pe=null==V?void 0:V._redirectEventId,nt=yield f.tryRedirectSignIn(c);(!X||X===Pe)&&(null==nt?void 0:nt.user)&&(V=nt.user)}return V?V._redirectEventId?(Ne(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===V._redirectEventId?f.directlySetCurrentUser(V):f.reloadAndSetCurrentUserOrClear(V)):f.reloadAndSetCurrentUserOrClear(V):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch(V){yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){try{yield Lr(c)}catch(E){if("auth/network-request-failed"!==E.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function bt(){if("undefined"==typeof navigator)return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const E=c?(0,Y.m9)(c):null;return E&&Ne(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){if(!f._deleted)return c&&Ne(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),f.queue((0,p.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(de(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new Y.LL("auth","Firebase",c())}onAuthStateChanged(c,f,E){return this.registerStateListener(this.authStateSubscription,c,f,E)}onIdTokenChanged(c,f,E){return this.registerStateListener(this.idTokenSubscription,c,f,E)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var E=this;return(0,p.Z)(function*(){const V=yield E.getOrInitRedirectPersistenceManager(f);return null===c?V.removeCurrentUser():V.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const E=c&&de(c)||f._popupRedirectResolver;Ne(E,f,"argument-error"),f.redirectPersistenceManager=yield Ve.create(f,[de(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var E,V;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===c?f._currentUser:(null===(V=f.redirectUser)||void 0===V?void 0:V._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,E,V){if(this._deleted)return()=>{};const X="function"==typeof f?f:f.next.bind(f),Pe=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(Pe,this,"internal-error"),Pe.then(()=>X(this.currentUser)),"function"==typeof f?c.addObserver(f,E,V):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&(f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh()),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Gi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const E={"X-Client-Version":c.clientVersion};c.app.options.appId&&(E["X-Firebase-gmpid"]=c.app.options.appId);const V=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return V&&(E["X-Firebase-Client"]=V),E})()}}function dt(g){return(0,Y.m9)(g)}class $t{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,Y.ne)(f=>this.observer=f)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function er(g){const c=g.indexOf(":");return c<0?"":g.substr(0,c+1)}function or(g){if(!g)return null;const c=Number(g);return isNaN(c)?null:c}class On{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return Ie("not implemented")}_getIdTokenResponse(c){return Ie("not implemented")}_linkToIdToken(c,f){return Ie("not implemented")}_getReauthenticationResolver(c){return Ie("not implemented")}}function Er(g,c){return ai.apply(this,arguments)}function ai(){return(ai=(0,p.Z)(function*(g,c){return mn(g,"POST","/v1/accounts:resetPassword",en(g,c))})).apply(this,arguments)}function yn(g,c){return wr.apply(this,arguments)}function wr(){return(wr=(0,p.Z)(function*(g,c){return mn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function vi(g,c){return Li.apply(this,arguments)}function Li(){return(Li=(0,p.Z)(function*(g,c){return mn(g,"POST","/v1/accounts:update",en(g,c))})).apply(this,arguments)}function Rr(){return(Rr=(0,p.Z)(function*(g,c){return rr(g,"POST","/v1/accounts:signInWithPassword",en(g,c))})).apply(this,arguments)}function Vr(g,c){return jr.apply(this,arguments)}function jr(){return(jr=(0,p.Z)(function*(g,c){return mn(g,"POST","/v1/accounts:sendOobCode",en(g,c))})).apply(this,arguments)}function Pn(g,c){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,p.Z)(function*(g,c){return Vr(g,c)})).apply(this,arguments)}function Ji(g,c){return br.apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(g,c){return Vr(g,c)})).apply(this,arguments)}function $r(g,c){return ti.apply(this,arguments)}function ti(){return(ti=(0,p.Z)(function*(g,c){return Vr(g,c)})).apply(this,arguments)}function xs(g,c){return ar.apply(this,arguments)}function ar(){return(ar=(0,p.Z)(function*(g,c){return Vr(g,c)})).apply(this,arguments)}function Qr(){return(Qr=(0,p.Z)(function*(g,c){return rr(g,"POST","/v1/accounts:signInWithEmailLink",en(g,c))})).apply(this,arguments)}function fe(){return(fe=(0,p.Z)(function*(g,c){return rr(g,"POST","/v1/accounts:signInWithEmailLink",en(g,c))})).apply(this,arguments)}class te extends On{constructor(c,f,E,V=null){super("password",E),this._email=c,this._password=f,this._tenantId=V}static _fromEmailAndPassword(c,f){return new te(c,f,"password")}static _fromEmailAndCode(c,f,E=null){return new te(c,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Yr(g,c){return Rr.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function es(g,c){return Qr.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:F(c,"internal-error")}})()}_linkToIdToken(c,f){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return yn(c,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function ce(g,c){return fe.apply(this,arguments)}(c,{idToken:f,email:E._email,oobCode:E._password});default:F(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function xe(g,c){return at.apply(this,arguments)}function at(){return(at=(0,p.Z)(function*(g,c){return rr(g,"POST","/v1/accounts:signInWithIdp",en(g,c))})).apply(this,arguments)}class he extends On{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new he(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):F("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:V}=f,X=(0,me._T)(f,["providerId","signInMethod"]);if(!E||!V)return null;const Pe=new he(E,V);return Pe.idToken=X.idToken||void 0,Pe.accessToken=X.accessToken||void 0,Pe.secret=X.secret,Pe.nonce=X.nonce,Pe.pendingToken=X.pendingToken||null,Pe}_getIdTokenResponse(c){return xe(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,xe(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,xe(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,Y.xO)(f)}return c}}function ye(g,c){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,p.Z)(function*(g,c){return mn(g,"POST","/v1/accounts:sendVerificationCode",en(g,c))})).apply(this,arguments)}function _t(){return(_t=(0,p.Z)(function*(g,c){return rr(g,"POST","/v1/accounts:signInWithPhoneNumber",en(g,c))})).apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(g,c){const f=yield rr(g,"POST","/v1/accounts:signInWithPhoneNumber",en(g,c));if(f.temporaryProof)throw jn(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Hr={USER_NOT_FOUND:"user-not-found"};function Mi(){return(Mi=(0,p.Z)(function*(g,c){return rr(g,"POST","/v1/accounts:signInWithPhoneNumber",en(g,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Hr)})).apply(this,arguments)}class ts extends On{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new ts({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new ts({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function rt(g,c){return _t.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function Zt(g,c){return $n.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Gn(g,c){return Mi.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:E,verificationCode:V}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:E,code:V}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:E,phoneNumber:V,temporaryProof:X}=c;return E||f||V||X?new ts({verificationId:f,verificationCode:E,phoneNumber:V,temporaryProof:X}):null}}class Vi{constructor(c){var f,E,V,X,Pe,nt;const Bt=(0,Y.zd)((0,Y.pd)(c)),ln=null!==(f=Bt.apiKey)&&void 0!==f?f:null,bn=null!==(E=Bt.oobCode)&&void 0!==E?E:null,Jt=function gi(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=Bt.mode)&&void 0!==V?V:null);Ne(ln&&bn&&Jt,"argument-error"),this.apiKey=ln,this.operation=Jt,this.code=bn,this.continueUrl=null!==(X=Bt.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(Pe=Bt.languageCode)&&void 0!==Pe?Pe:null,this.tenantId=null!==(nt=Bt.tenantId)&&void 0!==nt?nt:null}static parseLink(c){const f=function Ei(g){const c=(0,Y.zd)((0,Y.pd)(g)).link,f=c?(0,Y.zd)((0,Y.pd)(c)).deep_link_id:null,E=(0,Y.zd)((0,Y.pd)(g)).deep_link_id;return(E?(0,Y.zd)((0,Y.pd)(E)).link:null)||E||f||c||g}(c);try{return new Vi(f)}catch(E){return null}}}let _s=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,E){return te._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const V=Vi.parseLink(E);return Ne(V,"argument-error"),te._fromEmailAndCode(f,V.code,V.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class xi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class ni extends xi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class cs extends ni{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return Ne("providerId"in f&&"signInMethod"in f,"argument-error"),he._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Ne(c.idToken||c.accessToken,"argument-error"),he._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return cs.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return cs.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:V,pendingToken:X,nonce:Pe,providerId:nt}=c;if(!E&&!V&&!f&&!X||!nt)return null;try{return new cs(nt)._credential({idToken:f,accessToken:E,nonce:Pe,pendingToken:X})}catch(Bt){return null}}}let wi=(()=>{class g extends ni{constructor(){super("facebook.com")}static credential(f){return he._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(E){return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Ii=(()=>{class g extends ni{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return he._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:V}=f;if(!E&&!V)return null;try{return g.credential(E,V)}catch(X){return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),ks=(()=>{class g extends ni{constructor(){super("github.com")}static credential(f){return he._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(E){return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class vs extends On{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return xe(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,xe(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,xe(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:V,pendingToken:X}=f;return E&&V&&X&&E===V?new vs(E,X):null}static _create(c,f){return new vs(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Di extends xi{constructor(c){Ne(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Di.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Di.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=vs.fromJSON(c);return Ne(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:E}=c;if(!f||!E)return null;try{return vs._create(E,f)}catch(V){return null}}}let ds=(()=>{class g extends ni{constructor(){super("twitter.com")}static credential(f,E){return he._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:V}=f;if(!E||!V)return null;try{return g.credential(E,V)}catch(X){return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Rs(g,c){return ui.apply(this,arguments)}function ui(){return(ui=(0,p.Z)(function*(g,c){return rr(g,"POST","/v1/accounts:signUp",en(g,c))})).apply(this,arguments)}class Gr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,E,V=!1){return(0,p.Z)(function*(){const X=yield pe._fromIdTokenResponse(c,E,V),Pe=Wr(E);return new Gr({user:X,providerId:Pe,_tokenResponse:E,operationType:f})})()}static _forOperation(c,f,E){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(E,!0);const V=Wr(E);return new Gr({user:c,providerId:V,_tokenResponse:E,operationType:f})})()}}function Wr(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Fs(){return(Fs=(0,p.Z)(function*(g){var c;const f=dt(g);if(yield f._initializationPromise,null===(c=f.currentUser)||void 0===c?void 0:c.isAnonymous)return new Gr({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield Rs(f,{returnSecureToken:!0}),V=yield Gr._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class hs extends Y.ZR{constructor(c,f,E,V){var X;super(f.code,f.message),this.operationType=E,this.user=V,Object.setPrototypeOf(this,hs.prototype),this.customData={appName:c.name,tenantId:null!==(X=c.tenantId)&&void 0!==X?X:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(c,f,E,V){return new hs(c,f,E,V)}}function Ui(g,c,f,E){return("reauthenticate"===c?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?hs._fromErrorAndOperation(g,X,c,E):X})}function ri(g){return new Set(g.map(({providerId:c})=>c).filter(c=>!!c))}function Ws(){return(Ws=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g);yield $(!0,f,c);const{providerUserInfo:E}=yield vn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),V=ri(E||[]);return f.providerData=f.providerData.filter(X=>V.has(X.providerId)),V.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Ir(g,c){return O.apply(this,arguments)}function O(){return(O=(0,p.Z)(function*(g,c,f=!1){const E=yield Sn(g,c._linkToIdToken(g.auth,yield g.getIdToken()),f);return Gr._forOperation(g,"link",E)})).apply(this,arguments)}function $(g,c,f){return R.apply(this,arguments)}function R(){return(R=(0,p.Z)(function*(g,c,f){yield Lr(c);const V=!1===g?"provider-already-linked":"no-such-provider";Ne(ri(c.providerData).has(f)===g,c.auth,V)})).apply(this,arguments)}function Z(g,c){return ge.apply(this,arguments)}function ge(){return(ge=(0,p.Z)(function*(g,c,f=!1){const{auth:E}=g,V="reauthenticate";try{const X=yield Sn(g,Ui(E,V,c,g),f);Ne(X.idToken,E,"internal-error");const Pe=jt(X.idToken);Ne(Pe,E,"internal-error");const{sub:nt}=Pe;return Ne(g.uid===nt,E,"user-mismatch"),Gr._forOperation(g,V,X)}catch(X){throw"auth/user-not-found"===(null==X?void 0:X.code)&&F(E,"user-mismatch"),X}})).apply(this,arguments)}function Xe(g,c){return tt.apply(this,arguments)}function tt(){return(tt=(0,p.Z)(function*(g,c,f=!1){const E="signIn",V=yield Ui(g,E,c),X=yield Gr._fromIdTokenResponse(g,E,V);return f||(yield g._updateCurrentUser(X.user)),X})).apply(this,arguments)}function At(g,c){return tr.apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(g,c){return Xe(dt(g),c)})).apply(this,arguments)}function Kn(g,c){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g);return yield $(!1,f,c.providerId),Ir(f,c)})).apply(this,arguments)}function Mn(g,c){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,p.Z)(function*(g,c){return Z((0,Y.m9)(g),c)})).apply(this,arguments)}function Cr(g,c){return fr.apply(this,arguments)}function fr(){return(fr=(0,p.Z)(function*(g,c){return rr(g,"POST","/v1/accounts:signInWithCustomToken",en(g,c))})).apply(this,arguments)}function ii(){return(ii=(0,p.Z)(function*(g,c){const f=dt(g),E=yield Cr(f,{token:c,returnSecureToken:!0}),V=yield Gr._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class dn{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Ci._fromServerResponse(c,f):F(c,"internal-error")}}class Ci extends dn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Ci(f)}}function zi(g,c,f){var E;Ne((null===(E=f.url)||void 0===E?void 0:E.length)>0,g,"invalid-continue-uri"),Ne(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Ne(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(Ne(f.android.packageName.length>0,g,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Os(){return(Os=(0,p.Z)(function*(g,c,f){const E=(0,Y.m9)(g),V={requestType:"PASSWORD_RESET",email:c};f&&zi(E,V,f),yield Ji(E,V)})).apply(this,arguments)}function M(){return(M=(0,p.Z)(function*(g,c,f){yield Er((0,Y.m9)(g),{oobCode:c,newPassword:f})})).apply(this,arguments)}function m(){return(m=(0,p.Z)(function*(g,c){yield vi((0,Y.m9)(g),{oobCode:c})})).apply(this,arguments)}function D(g,c){return z.apply(this,arguments)}function z(){return(z=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g),E=yield Er(f,{oobCode:c}),V=E.requestType;switch(Ne(V,f,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(E.mfaInfo,f,"internal-error");default:Ne(E.email,f,"internal-error")}let X=null;return E.mfaInfo&&(X=dn._fromServerResponse(dt(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:X},operation:V}})).apply(this,arguments)}function De(){return(De=(0,p.Z)(function*(g,c){const{data:f}=yield D((0,Y.m9)(g),c);return f.email})).apply(this,arguments)}function st(){return(st=(0,p.Z)(function*(g,c,f){const E=dt(g),V=yield Rs(E,{returnSecureToken:!0,email:c,password:f}),X=yield Gr._fromIdTokenResponse(E,"signIn",V);return yield E._updateCurrentUser(X.user),X})).apply(this,arguments)}function _n(){return(_n=(0,p.Z)(function*(g,c,f){const E=(0,Y.m9)(g),V={requestType:"EMAIL_SIGNIN",email:c};Ne(f.handleCodeInApp,E,"argument-error"),f&&zi(E,V,f),yield $r(E,V)})).apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(g,c,f){const E=(0,Y.m9)(g),V=_s.credentialWithLink(c,f||Wt());return Ne(V._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),At(E,V)})).apply(this,arguments)}function qn(g,c){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,p.Z)(function*(g,c){return mn(g,"POST","/v1/accounts:createAuthUri",en(g,c))})).apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(g,c){const E={identifier:c,continueUri:It()?Wt():"http://localhost"},{signinMethods:V}=yield qn((0,Y.m9)(g),E);return V||[]})).apply(this,arguments)}function Bi(){return(Bi=(0,p.Z)(function*(g,c){const f=(0,Y.m9)(g),V={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};c&&zi(f.auth,V,c);const{email:X}=yield Pn(f.auth,V);X!==g.email&&(yield g.reload())})).apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(g,c,f){const E=(0,Y.m9)(g),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:c};f&&zi(E.auth,X,f);const{email:Pe}=yield xs(E.auth,X);Pe!==g.email&&(yield g.reload())})).apply(this,arguments)}function Or(g,c){return As.apply(this,arguments)}function As(){return(As=(0,p.Z)(function*(g,c){return mn(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ls(){return(Ls=(0,p.Z)(function*(g,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const E=(0,Y.m9)(g),X={idToken:yield E.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Pe=yield Sn(E,Or(E.auth,X));E.displayName=Pe.displayName||null,E.photoURL=Pe.photoUrl||null;const nt=E.providerData.find(({providerId:Bt})=>"password"===Bt);nt&&(nt.displayName=E.displayName,nt.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Pe)})).apply(this,arguments)}function na(g,c,f){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(g,c,f){const{auth:E}=g,X={idToken:yield g.getIdToken(),returnSecureToken:!0};c&&(X.email=c),f&&(X.password=f);const Pe=yield Sn(g,yn(E,X));yield g._updateTokensIfNecessary(Pe,!0)})).apply(this,arguments)}class Ps{constructor(c,f,E={}){this.isNewUser=c,this.providerId=f,this.profile=E}}class ra extends Ps{constructor(c,f,E,V){super(c,f,E),this.username=V}}class Vs extends Ps{constructor(c,f){super(c,"facebook.com",f)}}class xo extends ra{constructor(c,f){super(c,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class ol extends Ps{constructor(c,f){super(c,"google.com",f)}}class ia extends ra{constructor(c,f,E){super(c,"twitter.com",f,E)}}function bi(g){const{user:c,_tokenResponse:f}=g;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Ba(g){var c,f;if(!g)return null;const{providerId:E}=g,V=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},X=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!E&&(null==g?void 0:g.idToken)){const Pe=null===(f=null===(c=jt(g.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Pe)return new Ps(X,"anonymous"!==Pe&&"custom"!==Pe?Pe:null)}if(!E)return null;switch(E){case"facebook.com":return new Vs(X,V);case"github.com":return new xo(X,V);case"google.com":return new ol(X,V);case"twitter.com":return new ia(X,V,g.screenName||null);case"custom":case"anonymous":return new Ps(X,null);default:return new Ps(X,E,V)}}(f)}class ps{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new ps("enroll",c)}static _fromMfaPendingCredential(c){return new ps("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,E;if(null==c?void 0:c.multiFactorSession){if(null===(f=c.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return ps._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null===(E=c.multiFactorSession)||void 0===E?void 0:E.idToken)return ps._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Oo{constructor(c,f,E){this.session=c,this.hints=f,this.signInResolver=E}static _fromError(c,f){const E=dt(c),V=f.customData._serverResponse,X=(V.mfaInfo||[]).map(nt=>dn._fromServerResponse(E,nt));Ne(V.mfaPendingCredential,E,"internal-error");const Pe=ps._fromMfaPendingCredential(V.mfaPendingCredential);return new Oo(Pe,X,function(){var nt=(0,p.Z)(function*(Bt){const ln=yield Bt._process(E,Pe);delete V.mfaInfo,delete V.mfaPendingCredential;const bn=Object.assign(Object.assign({},V),{idToken:ln.idToken,refreshToken:ln.refreshToken});switch(f.operationType){case"signIn":const Jt=yield Gr._fromIdTokenResponse(E,f.operationType,bn);return yield E._updateCurrentUser(Jt.user),Jt;case"reauthenticate":return Ne(f.user,E,"internal-error"),Gr._forOperation(f.user,f.operationType,bn);default:F(E,"internal-error")}});return function(Bt){return nt.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function mi(g,c){return mn(g,"POST","/v2/accounts/mfaEnrollment:start",en(g,c))}class gs{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>dn._fromServerResponse(c.auth,E)))})}static _fromUser(c){return new gs(c)}getSession(){var c=this;return(0,p.Z)(function*(){return ps._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var E=this;return(0,p.Z)(function*(){const V=c,X=yield E.getSession(),Pe=yield Sn(E.user,V._process(E.user.auth,X,f));return yield E.user._updateTokensIfNecessary(Pe),E.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){const E="string"==typeof c?c:c.uid,V=yield f.user.getIdToken(),X=yield Sn(f.user,function Ha(g,c){return mn(g,"POST","/v2/accounts/mfaEnrollment:withdraw",en(g,c))}(f.user.auth,{idToken:V,mfaEnrollmentId:E}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Pe})=>Pe!==E),yield f.user._updateTokensIfNecessary(X);try{yield f.user.reload()}catch(Pe){if("auth/user-token-expired"!==Pe.code)throw Pe}})()}}const ko=new WeakMap,Us="__sak";class oo{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Us,"1"),this.storage.removeItem(Us),Promise.resolve(!0)):Promise.resolve(!1)}catch(c){return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ur=(()=>{class g extends oo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Da(){const g=(0,Y.z$)();return Tn(g)||vr(g)}()&&function Xn(){try{return!(!window||window===window.top)}catch(g){return!1}}(),this.fallbackToPolling=sr(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const V=this.storage.getItem(E),X=this.localCache[E];V!==X&&f(E,X,V)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((nt,Bt,ln)=>{this.notifyListeners(nt,ln)});const V=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const nt=this.storage.getItem(V);if(f.newValue!==nt)null!==f.newValue?this.storage.setItem(V,f.newValue):this.storage.removeItem(V);else if(this.localCache[V]===f.newValue&&!E)return}const X=()=>{const nt=this.storage.getItem(V);!E&&this.localCache[V]===nt||this.notifyListeners(V,nt)},Pe=this.storage.getItem(V);!function hr(){return(0,Y.w1)()&&10===document.documentMode}()||Pe===f.newValue||f.newValue===f.oldValue?X():setTimeout(X,10)}notifyListeners(f,E){this.localCache[f]=E;const V=this.listeners[f];if(V)for(const X of Array.from(V))X(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var V=()=>super._set,X=this;return(0,p.Z)(function*(){yield V().call(X,f,E),X.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,V=this;return(0,p.Z)(function*(){const X=yield E().call(V,f);return V.localCache[f]=JSON.stringify(X),X})()}_remove(f){var E=()=>super._remove,V=this;return(0,p.Z)(function*(){yield E().call(V,f),delete V.localCache[f]})()}}return g.type="LOCAL",g})(),Ks=(()=>{class g extends oo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return g.type="SESSION",g})();let oa=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(X=>X.isListeningto(f));if(E)return E;const V=new g(f);return this.receivers.push(V),V}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,p.Z)(function*(){const V=f,{eventId:X,eventType:Pe,data:nt}=V.data,Bt=E.handlersMap[Pe];if(!(null==Bt?void 0:Bt.size))return;V.ports[0].postMessage({status:"ack",eventId:X,eventType:Pe});const ln=Array.from(Bt).map(function(){var Jt=(0,p.Z)(function*(ki){return ki(V.origin,nt)});return function(ki){return Jt.apply(this,arguments)}}()),bn=yield function yo(g){return Promise.all(g.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return c.apply(this,arguments)}}()))}(ln);V.ports[0].postMessage({status:"done",eventId:X,eventType:Pe,response:bn})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function _o(g="",c=10){let f="";for(let E=0;E<c;E++)f+=Math.floor(10*Math.random());return g+f}class Ca{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,E=50){var V=this;return(0,p.Z)(function*(){const X="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let Pe,nt;return new Promise((Bt,ln)=>{const bn=_o("",20);X.port1.start();const Jt=setTimeout(()=>{ln(new Error("unsupported_event"))},E);nt={messageChannel:X,onMessage(ki){const po=ki;if(po.data.eventId===bn)switch(po.data.status){case"ack":clearTimeout(Jt),Pe=setTimeout(()=>{ln(new Error("timeout"))},3e3);break;case"done":clearTimeout(Pe),Bt(po.data.response);break;default:clearTimeout(Jt),clearTimeout(Pe),ln(new Error("invalid_response"))}}},V.handlers.add(nt),X.port1.addEventListener("message",nt.onMessage),V.target.postMessage({eventType:c,eventId:bn,data:f},[X.port2])}).finally(()=>{nt&&V.removeMessageHandler(nt)})})()}}function qr(){return window}function Bs(){return void 0!==qr().WorkerGlobalScope&&"function"==typeof qr().importScripts}function C(){return(C=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(g){return null}})).apply(this,arguments)}const x="firebaseLocalStorageDb",q="firebaseLocalStorage",se="fbase_key";class ve{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Ee(g,c){return g.transaction([q],c?"readwrite":"readonly").objectStore(q)}function xn(){const g=indexedDB.open(x,1);return new Promise((c,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const E=g.result;try{E.createObjectStore(q,{keyPath:se})}catch(V){f(V)}}),g.addEventListener("success",(0,p.Z)(function*(){const E=g.result;E.objectStoreNames.contains(q)?c(E):(E.close(),yield function wt(){const g=indexedDB.deleteDatabase(x);return new ve(g).toPromise()}(),c(yield xn()))}))})}function un(g,c,f){return Et.apply(this,arguments)}function Et(){return(Et=(0,p.Z)(function*(g,c,f){const E=Ee(g,!0).put({[se]:c,value:f});return new ve(E).toPromise()})).apply(this,arguments)}function ws(){return(ws=(0,p.Z)(function*(g,c){const f=Ee(g,!1).get(c),E=yield new ve(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function St(g,c){const f=Ee(g,!0).delete(c);return new ve(f).toPromise()}const js=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield xn()),f.db})()}_withRetries(f){var E=this;return(0,p.Z)(function*(){let V=0;for(;;)try{const X=yield E._openDb();return yield f(X)}catch(X){if(V++>3)throw X;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return Bs()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=oa._getInstance(function v(){return Bs()?self:null}()),f.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(V,X){return{keyProcessed:(yield f._poll()).includes(X.key)}});return function(V,X){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(V,X){return["keyChanged"]});return function(V,X){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var E,V;if(f.activeServiceWorker=yield function Ga(){return C.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Ca(f.activeServiceWorker);const X=yield f.sender._send("ping",{},800);!X||(null===(E=X[0])||void 0===E?void 0:E.fulfilled)&&(null===(V=X[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function w(){var g;return(null===(g=null==navigator?void 0:navigator.serviceWorker)||void 0===g?void 0:g.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch(V){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield xn();return yield un(f,Us,"1"),yield St(f,Us),!0}catch(f){}return!1})()}_withPendingWrite(f){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var V=this;return(0,p.Z)(function*(){return V._withPendingWrite((0,p.Z)(function*(){return yield V._withRetries(X=>un(X,f,E)),V.localCache[f]=E,V.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,p.Z)(function*(){const V=yield E._withRetries(X=>function Ft(g,c){return ws.apply(this,arguments)}(X,f));return E.localCache[f]=V,V})()}_remove(f){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(V=>St(V,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const E=yield f._withRetries(Pe=>{const nt=Ee(Pe,!1).getAll();return new ve(nt).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const V=[],X=new Set;for(const{fbase_key:Pe,value:nt}of E)X.add(Pe),JSON.stringify(f.localCache[Pe])!==JSON.stringify(nt)&&(f.notifyListeners(Pe,nt),V.push(Pe));for(const Pe of Object.keys(f.localCache))f.localCache[Pe]&&!X.has(Pe)&&(f.notifyListeners(Pe,null),V.push(Pe));return V})()}notifyListeners(f,E){this.localCache[f]=E;const V=this.listeners[f];if(V)for(const X of Array.from(V))X(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function qc(g,c){return mn(g,"POST","/v2/accounts/mfaSignIn:start",en(g,c))}function vo(){return(vo=(0,p.Z)(function*(g){return(yield mn(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function aa(g){return new Promise((c,f)=>{const E=document.createElement("script");E.setAttribute("src",g),E.onload=c,E.onerror=V=>{const X=J("internal-error");X.customData=V,f(X)},E.type="text/javascript",E.charset="UTF-8",function tc(){var g,c;return null!==(c=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==c?c:document}().appendChild(E)})}function Eu(g){return`__${g}${Math.floor(1e6*Math.random())}`}const ao=1e12;class nc{constructor(c){this.auth=c,this.counter=ao,this._widgets=new Map}render(c,f){const E=this.counter;return this._widgets.set(E,new Ln(c,this.auth.name,f||{})),this.counter++,E}reset(c){var f;const E=c||ao;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(c){var f;return(null===(f=this._widgets.get(c||ao))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var E;return null===(E=f._widgets.get(c||ao))||void 0===E||E.execute(),""})()}}class Ln{constructor(c,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof c?document.getElementById(c):c;Ne(V,"argument-error",{appName:f}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function uo(g){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<g;E++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wa=Eu("rcb"),ji=new qt(3e4,6e4);class Zc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!qr().grecaptcha}load(c,f=""){return Ne(function za(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(qr().grecaptcha):new Promise((E,V)=>{const X=qr().setTimeout(()=>{V(J(c,"network-request-failed"))},ji.get());qr()[Wa]=()=>{qr().clearTimeout(X),delete qr()[Wa];const nt=qr().grecaptcha;if(!nt)return void V(J(c,"internal-error"));const Bt=nt.render;nt.render=(ln,bn)=>{const Jt=Bt(ln,bn);return this.counter++,Jt},this.hostLanguage=f,E(nt)},aa(`https://www.google.com/recaptcha/api.js??${(0,Y.xO)({onload:Wa,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(X),V(J(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){return!!qr().grecaptcha&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yc{load(c){return(0,p.Z)(function*(){return new nc(c)})()}clearedOneInstance(){}}const ba="recaptcha",mr={theme:"light",type:"image"};class Wd{constructor(c,f=Object.assign({},mr),E){this.parameters=f,this.type=ba,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dt(E),this.isInvisible="invisible"===this.parameters.size,Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof c?document.getElementById(c):c;Ne(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yc:new Zc,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),E=c.getAssertedRecaptcha();return E.getResponse(f)||new Promise(X=>{const Pe=nt=>{!nt||(c.tokenChangeListeners.delete(Pe),X(nt))};c.tokenChangeListeners.add(Pe),c.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof c)c(f);else if("string"==typeof c){const E=qr()[c];"function"==typeof E&&E(f)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){Ne(It()&&!Bs(),c.auth,"internal-error"),yield function ms(){let g=null;return new Promise(c=>{"complete"!==document.readyState?(g=()=>c(),window.addEventListener("load",g)):c()}).catch(c=>{throw g&&window.removeEventListener("load",g),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function ec(g){return vo.apply(this,arguments)}(c.auth);Ne(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qs{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=ts._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Yn(){return(Yn=(0,p.Z)(function*(g,c,f){const E=dt(g),V=yield os(E,c,(0,Y.m9)(f));return new qs(V,X=>At(E,X))})).apply(this,arguments)}function $s(){return($s=(0,p.Z)(function*(g,c,f){const E=(0,Y.m9)(g);yield $(!1,E,"phone");const V=yield os(E.auth,c,(0,Y.m9)(f));return new qs(V,X=>Kn(E,X))})).apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(g,c,f){const E=(0,Y.m9)(g),V=yield os(E.auth,c,(0,Y.m9)(f));return new qs(V,X=>Mn(E,X))})).apply(this,arguments)}function os(g,c,f){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,p.Z)(function*(g,c,f){var E;const V=yield f.verify();try{let X;if(Ne("string"==typeof V,g,"argument-error"),Ne(f.type===ba,g,"argument-error"),X="string"==typeof c?{phoneNumber:c}:c,"session"in X){const Pe=X.session;if("phoneNumber"in X)return Ne("enroll"===Pe.type,g,"internal-error"),(yield mi(g,{idToken:Pe.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{Ne("signin"===Pe.type,g,"internal-error");const nt=(null===(E=X.multiFactorHint)||void 0===E?void 0:E.uid)||X.multiFactorUid;return Ne(nt,g,"missing-multi-factor-info"),(yield qc(g,{mfaPendingCredential:Pe.credential,mfaEnrollmentId:nt,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Pe}=yield ye(g,{phoneNumber:X.phoneNumber,recaptchaToken:V});return Pe}}finally{f._reset()}})).apply(this,arguments)}function Wo(){return(Wo=(0,p.Z)(function*(g,c){yield Ir((0,Y.m9)(g),c)})).apply(this,arguments)}let Ki=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=dt(f)}verifyPhoneNumber(f,E){return os(this.auth,f,(0,Y.m9)(E))}static credential(f,E){return ts._fromVerification(f,E)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:V}=f;return E&&V?ts._fromTokenResponse(E,V):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Is(g,c){return c?de(c):(Ne(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Fo extends On{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return xe(c,this._buildIdpRequest())}_linkToIdToken(c,f){return xe(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return xe(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function wu(g){return Xe(g.auth,new Fo(g),g.bypassAuthState)}function Nt(g){const{auth:c,user:f}=g;return Ne(f,c,"internal-error"),Z(f,new Fo(g),g.bypassAuthState)}function ul(g){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,p.Z)(function*(g){const{auth:c,user:f}=g;return Ne(f,c,"internal-error"),Ir(f,new Fo(g),g.bypassAuthState)})).apply(this,arguments)}class qi{constructor(c,f,E,V,X=!1){this.auth=c,this.resolver=E,this.user=V,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(E,V){c.pendingPromise={resolve:E,reject:V};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(X){c.reject(X)}});return function(E,V){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:V,postBody:X,tenantId:Pe,error:nt,type:Bt}=c;if(nt)return void f.reject(nt);const ln={auth:f.auth,requestUri:E,sessionId:V,tenantId:Pe||void 0,postBody:X||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Bt)(ln))}catch(bn){f.reject(bn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return wu;case"linkViaPopup":case"linkViaRedirect":return ul;case"reauthViaPopup":case"reauthViaRedirect":return Nt;default:F(this.auth,"internal-error")}}resolve(c){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lo=new qt(2e3,1e4);function Lo(){return(Lo=(0,p.Z)(function*(g,c,f){const E=dt(g);Le(g,c,xi);const V=Is(E,f);return new co(E,"signInViaPopup",c,V).executeNotNull()})).apply(this,arguments)}function Vo(){return(Vo=(0,p.Z)(function*(g,c,f){const E=(0,Y.m9)(g);Le(E.auth,c,xi);const V=Is(E.auth,f);return new co(E.auth,"reauthViaPopup",c,V,E).executeNotNull()})).apply(this,arguments)}function Uo(){return(Uo=(0,p.Z)(function*(g,c,f){const E=(0,Y.m9)(g);Le(E.auth,c,xi);const V=Is(E.auth,f);return new co(E.auth,"linkViaPopup",c,V,E).executeNotNull()})).apply(this,arguments)}let co=(()=>{class g extends qi{constructor(f,E,V,X,Pe){super(f,E,X,Pe),this.provider=V,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const E=yield f.execute();return Ne(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,p.Z)(function*(){Q(1===f.filter.length,"Popup operations only handle one event");const E=_o();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(V=>{f.reject(V)}),f.resolver._isIframeWebStorageSupported(f.auth,V=>{V||f.reject(J(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(J(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,V;this.pollId=(null===(V=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===V?void 0:V.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(J(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,lo.get())};f()}}return g.currentPopupAction=null,g})();const Zs=new Map;class Du extends qi{constructor(c,f,E=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let E=Zs.get(f.auth._key());if(!E){try{const X=(yield function Aa(g,c){return la.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;E=()=>Promise.resolve(X)}catch(V){E=()=>Promise.reject(V)}Zs.set(f.auth._key(),E)}return f.bypassAuthState||Zs.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(E,c);if("unknown"!==c.type){if(c.eventId){const V=yield E.auth._redirectUserForId(c.eventId);if(V)return E.user=V,f().call(E,c);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function la(){return(la=(0,p.Z)(function*(g,c){const f=P(c),E=A(g);if(!(yield E._isAvailable()))return!1;const V="true"===(yield E._get(f));return yield E._remove(f),V})).apply(this,arguments)}function Ko(g,c){return qa.apply(this,arguments)}function qa(){return(qa=(0,p.Z)(function*(g,c){return A(g)._set(P(c),"true")})).apply(this,arguments)}function A(g){return de(g._redirectPersistence)}function P(g){return qe("pendingRedirect",g.config.apiKey,g.name)}function Me(){return(Me=(0,p.Z)(function*(g,c,f){const E=dt(g);Le(g,c,xi);const V=Is(E,f);return yield Ko(V,E),V._openRedirect(E,c,"signInViaRedirect")})).apply(this,arguments)}function Yt(){return(Yt=(0,p.Z)(function*(g,c,f){const E=(0,Y.m9)(g);Le(E.auth,c,xi);const V=Is(E.auth,f);yield Ko(V,E.auth);const X=yield Za(E);return V._openRedirect(E.auth,c,"reauthViaRedirect",X)})).apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(g,c,f){const E=(0,Y.m9)(g);Le(E.auth,c,xi);const V=Is(E.auth,f);yield $(!1,E,c.providerId),yield Ko(V,E.auth);const X=yield Za(E);return V._openRedirect(E.auth,c,"linkViaRedirect",X)})).apply(this,arguments)}function Jr(){return(Jr=(0,p.Z)(function*(g,c){return yield dt(g)._initializationPromise,$i(g,c,!1)})).apply(this,arguments)}function $i(g,c){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,p.Z)(function*(g,c,f=!1){const E=dt(g),V=Is(E,c),Pe=yield new Du(E,V,f).execute();return Pe&&!f&&(delete Pe.user._redirectEventId,yield E._persistUserIfCurrent(Pe.user),yield E._setRedirectUser(null,c)),Pe})).apply(this,arguments)}function Za(g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,p.Z)(function*(g){const c=_o(`${g.uid}:::`);return g._redirectEventId=c,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),c})).apply(this,arguments)}class Ys{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(c,E)&&(f=!0,this.sendToConsumer(c,E),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Qc(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dl(g);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var E;if(c.error&&!dl(c)){const V=(null===(E=c.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(J(this.auth,V))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const E=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&E}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wo(c))}saveEventToCache(c){this.cachedEventUids.add(wo(c)),this.lastProcessedEventTime=Date.now()}}function wo(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(c=>c).join("-")}function dl({type:g,error:c}){return"unknown"===g&&"auth/no-auth-event"===(null==c?void 0:c.code)}function hl(g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,p.Z)(function*(g,c={}){return mn(g,"GET","/v1/projects",c)})).apply(this,arguments)}const Kd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Af=/^https?/;function ca(){return(ca=(0,p.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:c}=yield hl(g);for(const f of c)try{if(fl(f))return}catch(E){}F(g,"unauthorized-domain")})).apply(this,arguments)}function fl(g){const c=Wt(),{protocol:f,hostname:E}=new URL(c);if(g.startsWith("chrome-extension://")){const Pe=new URL(g);return""===Pe.hostname&&""===E?"chrome-extension:"===f&&g.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Pe.hostname===E}if(!Af.test(f))return!1;if(Kd.test(g))return E===g;const V=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(E)}const Mf=new qt(3e4,6e4);function xf(){const g=qr().___jsl;if(null==g?void 0:g.H)for(const c of Object.keys(g.H))if(g.H[c].r=g.H[c].r||[],g.H[c].L=g.H[c].L||[],g.H[c].r=[...g.H[c].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Bo=null;function pl(g){return Bo=Bo||function qd(g){return new Promise((c,f)=>{var E,V,X;function Pe(){xf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{xf(),f(J(g,"network-request-failed"))},timeout:Mf.get()})}if(null===(V=null===(E=qr().gapi)||void 0===E?void 0:E.iframes)||void 0===V?void 0:V.Iframe)c(gapi.iframes.getContext());else{if(!(null===(X=qr().gapi)||void 0===X?void 0:X.load)){const nt=Eu("iframefcb");return qr()[nt]=()=>{gapi.load?Pe():f(J(g,"network-request-failed"))},aa(`https://apis.google.com/js/api.js?onload=${nt}`).catch(Bt=>f(Bt))}Pe()}}).catch(c=>{throw Bo=null,c})}(g),Bo}const Rf=new qt(5e3,15e3),Io={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jo(g){const c=g.config;Ne(c.authDomain,g,"auth-domain-config-required");const f=c.emulator?Rt(c,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,E={apiKey:c.apiKey,appName:g.name,v:we.SDK_VERSION},V=rc.get(g.config.apiHost);V&&(E.eid=V);const X=g._getFrameworks();return X.length&&(E.fw=X.join(",")),`${f}?${(0,Y.xO)(E).slice(1)}`}function Cu(){return Cu=(0,p.Z)(function*(g){const c=yield pl(g),f=qr().gapi;return Ne(f,g,"internal-error"),c.open({where:document.body,url:jo(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Io,dontclear:!0},E=>new Promise(function(){var V=(0,p.Z)(function*(X,Pe){yield E.restyle({setHideOnLeave:!1});const nt=J(g,"network-request-failed"),Bt=qr().setTimeout(()=>{Pe(nt)},Rf.get());function ln(){qr().clearTimeout(Bt),X(E)}E.ping(ln).then(ln,()=>{Pe(nt)})});return function(X,Pe){return V.apply(this,arguments)}}()))}),Cu.apply(this,arguments)}const Qd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sc{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(c){}}}function oc(g,c,f,E,V,X){Ne(g.config.authDomain,g,"auth-domain-config-required"),Ne(g.config.apiKey,g,"invalid-api-key");const Pe={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:E,v:we.SDK_VERSION,eventId:V};if(c instanceof xi){c.setDefaultLanguage(g.languageCode),Pe.providerId=c.providerId||"",(0,Y.xb)(c.getCustomParameters())||(Pe.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Bt,ln]of Object.entries(X||{}))Pe[Bt]=ln}if(c instanceof ni){const Bt=c.getScopes().filter(ln=>""!==ln);Bt.length>0&&(Pe.scopes=Bt.join(","))}g.tenantId&&(Pe.tid=g.tenantId);const nt=Pe;for(const Bt of Object.keys(nt))void 0===nt[Bt]&&delete nt[Bt];return`${function Jd({config:g}){return g.emulator?Rt(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,Y.xO)(nt).slice(1)}`}const qo="webStorageSupport";class ml extends class Of{constructor(c){this.factorId=c}_process(c,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,E);case"signin":return this._finalizeSignIn(c,f.credential);default:return Ie("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new ml(c)}_finalizeEnroll(c,f,E){return function Go(g,c){return mn(g,"POST","/v2/accounts/mfaEnrollment:finalize",en(g,c))}(c,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function vu(g,c){return mn(g,"POST","/v2/accounts/mfaSignIn:finalize",en(g,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mg=(()=>{class g{constructor(){}static assertion(f){return ml._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var Pf="@firebase/auth",eh="0.19.12";class Qa{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(E=>{var V;c((null===(V=E)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ma(){return window}function Ja(){return(Ja=(0,p.Z)(function*(g,c,f){var E;const{BuildInfo:V}=Ma();Q(c.sessionId,"AuthEvent did not contain a session ID");const X=yield xg(c.sessionId),Pe={};return vr()?Pe.ibi=V.packageName:nr()?Pe.apn=V.packageName:F(g,"operation-not-supported-in-this-environment"),V.displayName&&(Pe.appDisplayName=V.displayName),Pe.sessionId=X,oc(g,f,c.type,void 0,null!==(E=c.eventId)&&void 0!==E?E:void 0,Pe)})).apply(this,arguments)}function Do(){return(Do=(0,p.Z)(function*(g){const{BuildInfo:c}=Ma(),f={};vr()?f.iosBundleId=c.packageName:nr()?f.androidPackageName=c.packageName:F(g,"operation-not-supported-in-this-environment"),yield hl(g,f)})).apply(this,arguments)}function eu(){return(eu=(0,p.Z)(function*(g,c,f){const{cordova:E}=Ma();let V=()=>{};try{yield new Promise((X,Pe)=>{let nt=null;function Bt(){var Jt;X();const ki=null===(Jt=E.plugins.browsertab)||void 0===Jt?void 0:Jt.close;"function"==typeof ki&&ki(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function ln(){nt||(nt=window.setTimeout(()=>{Pe(J(g,"redirect-cancelled-by-user"))},2e3))}function bn(){"visible"===(null==document?void 0:document.visibilityState)&&ln()}c.addPassiveListener(Bt),document.addEventListener("resume",ln,!1),nr()&&document.addEventListener("visibilitychange",bn,!1),V=()=>{c.removePassiveListener(Bt),document.removeEventListener("resume",ln,!1),document.removeEventListener("visibilitychange",bn,!1),nt&&window.clearTimeout(nt)}})}finally{V()}})).apply(this,arguments)}function xg(g){return ac.apply(this,arguments)}function ac(){return(ac=(0,p.Z)(function*(g){const c=Rg(g),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Rg(g){if(Q(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(g);const c=new ArrayBuffer(g.length),f=new Uint8Array(c);for(let E=0;E<g.length;E++)f[E]=g.charCodeAt(E);return f}!function th(g){(0,we._registerComponent)(new Oe.wA("auth",(c,{options:f})=>{const E=c.getProvider("app").getImmediate(),V=c.getProvider("heartbeat"),{apiKey:X,authDomain:Pe}=E.options;return((nt,Bt)=>{Ne(X&&!X.includes(":"),"invalid-api-key",{appName:nt.name}),Ne(!(null==Pe?void 0:Pe.includes(":")),"argument-error",{appName:nt.name});const ln={apiKey:X,authDomain:Pe,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gi(g)},bn=new Zr(nt,Bt,ln);return function $e(g,c){const f=(null==c?void 0:c.persistence)||[],E=(Array.isArray(f)?f:[f]).map(de);(null==c?void 0:c.errorMap)&&g._updateErrorMap(c.errorMap),g._initializeWithPersistence(E,null==c?void 0:c.popupRedirectResolver)}(bn,f),bn})(E,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,E)=>{c.getProvider("auth-internal").initialize()})),(0,we._registerComponent)(new Oe.wA("auth-internal",c=>{const f=dt(c.getProvider("auth").getImmediate());return new Qa(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,we.registerVersion)(Pf,eh,function Xa(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,we.registerVersion)(Pf,eh,"esm2017")}("Browser");class lc extends Ys{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function rh(g){return El.apply(this,arguments)}function El(){return(El=(0,p.Z)(function*(g){const c=yield Il()._get(td(g));return c&&(yield Il()._remove(td(g))),c})).apply(this,arguments)}function wl(){const g=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const E=Math.floor(Math.random()*c.length);g.push(c.charAt(E))}return g.join("")}function Il(){return de(Ur)}function td(g){return qe("authEvent",g.config.apiKey,g.name)}function Dl(g){if(!(null==g?void 0:g.includes("?")))return{};const[c,...f]=g.split("?");return(0,Y.zd)(f.join("?"))}function Cl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:J("no-auth-event")}}function dc(){var g;return(null===(g=null==self?void 0:self.location)||void 0===g?void 0:g.protocol)||null}function sh(g=(0,Y.z$)()){return!("file:"!==dc()&&"ionic:"!==dc()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Un(){try{const g=self.localStorage,c=_o();if(g)return g.setItem(c,"1"),g.removeItem(c),!function bl(g=(0,Y.z$)()){return function hc(){return(0,Y.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Og(g=(0,Y.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,Y.hl)()}catch(g){return Tl()&&(0,Y.hl)()}return!1}function Tl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function nu(){return(function Co(){return"http:"===dc()||"https:"===dc()}()||(0,Y.ru)()||sh())&&!function rd(){return(0,Y.b$)()||(0,Y.UG)()}()&&Un()&&!Tl()}function ru(){return sh()&&"undefined"!=typeof document}function Zo(){return(Zo=(0,p.Z)(function*(){return!!ru()&&new Promise(g=>{const c=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),g(!0)})})})).apply(this,arguments)}const Qs={LOCAL:"local",NONE:"none",SESSION:"session"},Ou=Ne,id="persistence";function Al(g){return sd.apply(this,arguments)}function sd(){return(sd=(0,p.Z)(function*(g){yield g._initializationPromise;const c=uh(),f=qe(id,g.config.apiKey,g.name);c&&c.setItem(f,g._getPersistence())})).apply(this,arguments)}function uh(){var g;try{return(null===(g=function fc(){return"undefined"!=typeof window?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch(c){return null}}const Sl=Ne;class $o{constructor(){this.browserResolver=de(class Au{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ks,this._completeRedirectFn=$i}_openPopup(c,f,E,V){var X=this;return(0,p.Z)(function*(){var Pe;Q(null===(Pe=X.eventManagers[c._key()])||void 0===Pe?void 0:Pe.manager,"_initialize() not called before _openPopup()");const nt=oc(c,f,E,Wt(),V);return function Tu(g,c,f,E=500,V=600){const X=Math.max((window.screen.availHeight-V)/2,0).toString(),Pe=Math.max((window.screen.availWidth-E)/2,0).toString();let nt="";const Bt=Object.assign(Object.assign({},Qd),{width:E.toString(),height:V.toString(),top:X,left:Pe}),ln=(0,Y.z$)().toLowerCase();f&&(nt=Mr(ln)?"_blank":f),Kt(ln)&&(c=c||"http://localhost",Bt.scrollbars="yes");const bn=Object.entries(Bt).reduce((ki,[po,Xs])=>`${ki}${po}=${Xs},`,"");if(function ls(g=(0,Y.z$)()){var c;return vr(g)&&!!(null===(c=window.navigator)||void 0===c?void 0:c.standalone)}(ln)&&"_self"!==nt)return function Xd(g,c){const f=document.createElement("a");f.href=g,f.target=c;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(c||"",nt),new sc(null);const Jt=window.open(c||"",nt,bn);Ne(Jt,g,"popup-blocked");try{Jt.focus()}catch(ki){}return new sc(Jt)}(c,nt,_o())})()}_openRedirect(c,f,E,V){var X=this;return(0,p.Z)(function*(){return yield X._originValidation(c),function _u(g){qr().location.href=g}(oc(c,f,E,Wt(),V)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:V,promise:X}=this.eventManagers[f];return V?Promise.resolve(V):(Q(X,"If manager is not set, promise should be"),X)}const E=this.initAndGetManager(c);return this.eventManagers[f]={promise:E},E.catch(()=>{delete this.eventManagers[f]}),E}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const E=yield function ic(g){return Cu.apply(this,arguments)}(c),V=new Ys(c);return E.register("authEvent",X=>(Ne(null==X?void 0:X.authEvent,c,"invalid-auth-event"),{status:V.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:V},f.iframes[c._key()]=E,V})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(qo,{type:qo},V=>{var X;const Pe=null===(X=null==V?void 0:V[0])||void 0===X?void 0:X[qo];void 0!==Pe&&f(!!Pe),F(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Sf(g){return ca.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return sr()||Tn()||vr()}}),this.cordovaResolver=de(class xa{constructor(){this._redirectPersistence=Ks,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$i}_initialize(c){var f=this;return(0,p.Z)(function*(){const E=c._key();let V=f.eventManagers.get(E);return V||(V=new lc(c),f.eventManagers.set(E,V),f.attachCallbackListeners(c,V)),V})()}_openPopup(c){F(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,E,V){var X=this;return(0,p.Z)(function*(){!function vl(g){var c,f,E,V,X,Pe,nt,Bt,ln,bn;const Jt=Ma();Ne("function"==typeof(null===(c=null==Jt?void 0:Jt.universalLinks)||void 0===c?void 0:c.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ne(void 0!==(null===(f=null==Jt?void 0:Jt.BuildInfo)||void 0===f?void 0:f.packageName),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ne("function"==typeof(null===(X=null===(V=null===(E=null==Jt?void 0:Jt.cordova)||void 0===E?void 0:E.plugins)||void 0===V?void 0:V.browsertab)||void 0===X?void 0:X.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ne("function"==typeof(null===(Bt=null===(nt=null===(Pe=null==Jt?void 0:Jt.cordova)||void 0===Pe?void 0:Pe.plugins)||void 0===nt?void 0:nt.browsertab)||void 0===Bt?void 0:Bt.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ne("function"==typeof(null===(bn=null===(ln=null==Jt?void 0:Jt.cordova)||void 0===ln?void 0:ln.InAppBrowser)||void 0===bn?void 0:bn.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Pe=yield X._initialize(c);yield Pe.initialized(),Pe.resetRedirect(),function cl(){Zs.clear()}(),yield X._originValidation(c);const nt=function tu(g,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:wl(),postBody:null,tenantId:g.tenantId,error:J(g,"no-auth-event")}}(c,E,V);yield function xu(g,c){return Il()._set(td(g),c)}(c,nt);const Bt=yield function nh(g,c,f){return Ja.apply(this,arguments)}(c,nt,f),ln=yield function _l(g){const{cordova:c}=Ma();return new Promise(f=>{c.plugins.browsertab.isAvailable(E=>{let V=null;E?c.plugins.browsertab.openUrl(g):V=c.InAppBrowser.open(g,function pi(g=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(V)})})}(Bt);return function Zi(g,c,f){return eu.apply(this,arguments)}(c,Pe,ln)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Mu(g){return Do.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:E,handleOpenURL:V,BuildInfo:X}=Ma(),Pe=setTimeout((0,p.Z)(function*(){yield rh(c),f.onEvent(Cl())}),500),nt=function(){var bn=(0,p.Z)(function*(Jt){clearTimeout(Pe);const ki=yield rh(c);let po=null;ki&&(null==Jt?void 0:Jt.url)&&(po=function ih(g,c){var f,E;const V=function lr(g){const c=Dl(g),f=c.link?decodeURIComponent(c.link):void 0,E=Dl(f).link,V=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Dl(V).link||V||E||f||g}(c);if(V.includes("/__/auth/callback")){const X=Dl(V),Pe=X.firebaseError?function Yi(g){try{return JSON.parse(g)}catch(c){return null}}(decodeURIComponent(X.firebaseError)):null,nt=null===(E=null===(f=null==Pe?void 0:Pe.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],Bt=nt?J(nt):null;return Bt?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Bt,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:V,postBody:null}}return null}(ki,Jt.url)),f.onEvent(po||Cl())});return function(ki){return bn.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,nt);const Bt=V,ln=`${X.packageName.toLowerCase()}://`;Ma().handleOpenURL=function(){var bn=(0,p.Z)(function*(Jt){if(Jt.toLowerCase().startsWith(ln)&&nt({url:Jt}),"function"==typeof Bt)try{Bt(Jt)}catch(ki){console.error(ki)}});return function(Jt){return bn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ks,this._completeRedirectFn=$i}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,E,V){var X=this;return(0,p.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openPopup(c,f,E,V)})()}_openRedirect(c,f,E,V){var X=this;return(0,p.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openRedirect(c,f,E,V)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return ru()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function as(){return Zo.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function lh(g){return g.unwrap()}function Ml(g){return Pu(g)}function Pu(g){const{_tokenResponse:c}=g instanceof Y.ZR?g.customData:g;if(!c)return null;if(!(g instanceof Y.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Ki.credentialFromResult(g);const f=c.providerId;if(!f||"password"===f)return null;let E;switch(f){case"google.com":E=Ii;break;case"facebook.com":E=wi;break;case"github.com":E=ks;break;case"twitter.com":E=ds;break;default:const{oauthIdToken:V,oauthAccessToken:X,oauthTokenSecret:Pe,pendingToken:nt,nonce:Bt}=c;return X||Pe||V||nt?nt?f.startsWith("saml.")?vs._create(f,nt):he._fromParams({providerId:f,signInMethod:f,pendingToken:nt,idToken:V,accessToken:X}):new cs(f).credential({idToken:V,accessToken:X,rawNonce:Bt}):null}return g instanceof Y.ZR?E.credentialFromError(g):E.credentialFromResult(g)}function di(g,c){return c.catch(f=>{throw f instanceof Y.ZR&&function ch(g,c){var f;const E=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===c.code)c.resolver=new Rl(g,function Po(g,c){var f;const E=(0,Y.m9)(g),V=c;return Ne(c.customData.operationType,E,"argument-error"),Ne(null===(f=V.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),Oo._fromError(E,V)}(g,c));else if(E){const V=Pu(c),X=c;V&&(X.credential=V,X.tenantId=E.tenantId||void 0,X.email=E.email||void 0,X.phoneNumber=E.phoneNumber||void 0)}}(g,f),f}).then(f=>{const V=f.user;return{operationType:f.operationType,credential:Ml(f),additionalUserInfo:bi(f),user:Yo.getOrCreate(V)}})}function xl(g,c){return pc.apply(this,arguments)}function pc(){return(pc=(0,p.Z)(function*(g,c){const f=yield c;return{verificationId:f.verificationId,confirm:E=>di(g,f.confirm(E))}})).apply(this,arguments)}class Rl{constructor(c,f){this.resolver=f,this.auth=function Cs(g){return g.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return di(lh(this.auth),this.resolver.resolveSignIn(c))}}class Yo{constructor(c){this._delegate=c,this.multiFactor=function zs(g){const c=(0,Y.m9)(g);return ko.has(c)||ko.set(c,gs._fromUser(c)),ko.get(c)}(c)}static getOrCreate(c){return Yo.USER_MAP.has(c)||Yo.USER_MAP.set(c,new Yo(c)),Yo.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return di(f.auth,Kn(f._delegate,c))})()}linkWithPhoneNumber(c,f){var E=this;return(0,p.Z)(function*(){return xl(E.auth,function al(g,c,f){return $s.apply(this,arguments)}(E._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return di(f.auth,function ll(g,c,f){return Uo.apply(this,arguments)}(f._delegate,c,$o))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Al(dt(f.auth)),function an(g,c,f){return function Cn(g,c,f){return ur.apply(this,arguments)}(g,c,f)}(f._delegate,c,$o)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return di(f.auth,Mn(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return xl(this.auth,function Pi(g,c,f){return No.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return di(this.auth,function zo(g,c,f){return Vo.apply(this,arguments)}(this._delegate,c,$o))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Al(dt(f.auth)),function Qe(g,c,f){return function Dt(g,c,f){return Yt.apply(this,arguments)}(g,c,f)}(f._delegate,c,$o)})()}sendEmailVerification(c){return function si(g,c){return Bi.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function is(g,c){return Ws.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function Mo(g,c){return na((0,Y.m9)(g),c,null)}(this._delegate,c)}updatePassword(c){return function ta(g,c){return na((0,Y.m9)(g),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Ta(g,c){return Wo.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function io(g,c){return Ls.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Kr(g,c,f){return li.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yo.USER_MAP=new WeakMap;const ku=Ne;let gc=(()=>{class g{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=f.options;ku(V,"invalid-api-key",{appName:f.name}),ku(V,"invalid-api-key",{appName:f.name});const X="undefined"!=typeof window?$o:void 0;this._delegate=E.initialize({options:{persistence:kf(V,f.name),popupRedirectResolver:X}}),this._delegate._updateErrorMap(Ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function hn(g,c,f){const E=dt(g);Ne(E._canInitEmulator,E,"emulator-config-failed"),Ne(/^https?:\/\//.test(c),E,"invalid-emulator-scheme");const V=!!(null==f?void 0:f.disableWarnings),X=er(c),{host:Pe,port:nt}=function ei(g){const c=er(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(c.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(E);if(V){const X=V[1];return{host:X,port:or(E.substr(X.length+1))}}{const[X,Pe]=E.split(":");return{host:X,port:or(Pe)}}}(c);E.config.emulator={url:`${X}//${Pe}${null===nt?"":`:${nt}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Pe,port:nt,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function xr(){function g(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,E)}applyActionCode(f){return function S(g,c){return m.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return D(this._delegate,f)}confirmPasswordReset(f,E){return function N(g,c,f){return M.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var V=this;return(0,p.Z)(function*(){return di(V._delegate,function Ke(g,c,f){return st.apply(this,arguments)}(V._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Ri(g,c){return gr.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Wn(g,c){const f=Vi.parseLink(c);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){ku(nu(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function Vn(g,c){return Jr.apply(this,arguments)}(f._delegate,$o);return E?di(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Ss(g,c){dt(g)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,E,V){const{next:X,error:Pe,complete:nt}=dh(f,E,V);return this._delegate.onAuthStateChanged(X,Pe,nt)}onIdTokenChanged(f,E,V){const{next:X,error:Pe,complete:nt}=dh(f,E,V);return this._delegate.onIdTokenChanged(X,Pe,nt)}sendSignInLinkToEmail(f,E){return function Ot(g,c,f){return _n.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function fs(g,c,f){return Os.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,p.Z)(function*(){let V;switch(function oh(g,c){Ou(Object.values(Qs).includes(c),g,"invalid-persistence-type"),(0,Y.b$)()?Ou(c!==Qs.SESSION,g,"unsupported-persistence-type"):(0,Y.UG)()?Ou(c===Qs.NONE,g,"unsupported-persistence-type"):Tl()?Ou(c===Qs.NONE||c===Qs.LOCAL&&(0,Y.hl)(),g,"unsupported-persistence-type"):Ou(c===Qs.NONE||Un(),g,"unsupported-persistence-type")}(E._delegate,f),f){case Qs.SESSION:V=Ks;break;case Qs.LOCAL:V=(yield de(js)._isAvailable())?js:Ur;break;case Qs.NONE:V=Ce;break;default:return F("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return di(this._delegate,function Es(g){return Fs.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return di(this._delegate,At(this._delegate,f))}signInWithCustomToken(f){return di(this._delegate,function Wi(g,c){return ii.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return di(this._delegate,function Ht(g,c,f){return At((0,Y.m9)(g),_s.credential(c,f))}(this._delegate,f,E))}signInWithEmailLink(f,E){return di(this._delegate,function zr(g,c,f){return pr.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return xl(this._delegate,function zd(g,c,f){return Yn.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,p.Z)(function*(){return ku(nu(),E._delegate,"operation-not-supported-in-this-environment"),di(E._delegate,function Eo(g,c,f){return Lo.apply(this,arguments)}(E._delegate,f,$o))})()}signInWithRedirect(f){var E=this;return(0,p.Z)(function*(){return ku(nu(),E._delegate,"operation-not-supported-in-this-environment"),yield Al(E._delegate),function W(g,c,f){return function ae(g,c,f){return Me.apply(this,arguments)}(g,c,f)}(E._delegate,f,$o)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function ee(g,c){return De.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Qs,g})();function dh(g,c,f){let E=g;"function"!=typeof g&&({next:E,error:c,complete:f}=g);const V=E;return{next:Pe=>V(Pe&&Yo.getOrCreate(Pe)),error:c,complete:f}}function kf(g,c){const f=function ah(g,c){const f=uh();if(!f)return[];const E=qe(id,g,c);switch(f.getItem(E)){case Qs.NONE:return[Ce];case Qs.LOCAL:return[js,Ks];case Qs.SESSION:return[Ks];default:return[]}}(g,c);if("undefined"!=typeof self&&!f.includes(js)&&f.push(js),"undefined"!=typeof window)for(const E of[Ur,Ks])f.includes(E)||f.push(E);return f.includes(Ce)||f.push(Ce),f}class iu{constructor(){this.providerId="phone",this._delegate=new Ki(lh(K.Z.auth()))}static credential(c,f){return Ki.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}iu.PHONE_SIGN_IN_METHOD=Ki.PHONE_SIGN_IN_METHOD,iu.PROVIDER_ID=Ki.PROVIDER_ID;const od=Ne;class Nf{constructor(c,f,E=K.Z.app()){var V;od(null===(V=E.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Wd(c,f,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fh(g){g.INTERNAL.registerComponent(new Oe.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),E=c.getProvider("auth");return new gc(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:_s,FacebookAuthProvider:wi,GithubAuthProvider:ks,GoogleAuthProvider:Ii,OAuthProvider:cs,SAMLAuthProvider:Di,PhoneAuthProvider:iu,PhoneMultiFactorGenerator:Mg,RecaptchaVerifier:Nf,TwitterAuthProvider:ds,Auth:gc,AuthCredential:On,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.12")}(K.Z)},1135:(Mt,We,k)=>{k.d(We,{X:()=>K});var p=k(7579);class K extends p.x{constructor(we){super(),this._value=we}get value(){return this.getValue()}_subscribe(we){const me=super._subscribe(we);return!me.closed&&we.next(this._value),me}getValue(){const{hasError:we,thrownError:me,_value:Ae}=this;if(we)throw me;return this._throwIfClosed(),Ae}next(we){super.next(this._value=we)}}},9751:(Mt,We,k)=>{k.d(We,{y:()=>Re});var p=k(930),K=k(727),Y=k(8822),we=k(9635),me=k(2416),Ae=k(576),Oe=k(2806);let Re=(()=>{class _e{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const Ze=new _e;return Ze.source=this,Ze.operator=ze,Ze}subscribe(ze,Ze,ct){const Be=function re(_e){return _e&&_e instanceof p.Lv||function ue(_e){return _e&&(0,Ae.m)(_e.next)&&(0,Ae.m)(_e.error)&&(0,Ae.m)(_e.complete)}(_e)&&(0,K.Nn)(_e)}(ze)?ze:new p.Hp(ze,Ze,ct);return(0,Oe.x)(()=>{const{operator:ke,source:vt}=this;Be.add(ke?ke.call(Be,vt):vt?this._subscribe(Be):this._trySubscribe(Be))}),Be}_trySubscribe(ze){try{return this._subscribe(ze)}catch(Ze){ze.error(Ze)}}forEach(ze,Ze){return new(Ze=Fe(Ze))((ct,Be)=>{const ke=new p.Hp({next:vt=>{try{ze(vt)}catch(j){Be(j),ke.unsubscribe()}},error:Be,complete:ct});this.subscribe(ke)})}_subscribe(ze){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(ze)}[Y.L](){return this}pipe(...ze){return(0,we.U)(ze)(this)}toPromise(ze){return new(ze=Fe(ze))((Ze,ct)=>{let Be;this.subscribe(ke=>Be=ke,ke=>ct(ke),()=>Ze(Be))})}}return _e.create=He=>new _e(He),_e})();function Fe(_e){var He;return null!==(He=null!=_e?_e:me.v.Promise)&&void 0!==He?He:Promise}},7579:(Mt,We,k)=>{k.d(We,{x:()=>Oe});var p=k(9751),K=k(727);const we=(0,k(3888).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=k(8737),Ae=k(2806);let Oe=(()=>{class Fe extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const _e=new Re(this,this);return _e.operator=re,_e}_throwIfClosed(){if(this.closed)throw new we}next(re){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const _e of this.currentObservers)_e.next(re)}})}error(re){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:_e}=this;for(;_e.length;)_e.shift().error(re)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:_e,isStopped:He,observers:ze}=this;return _e||He?K.Lc:(this.currentObservers=null,ze.push(re),new K.w0(()=>{this.currentObservers=null,(0,me.P)(ze,re)}))}_checkFinalizedStatuses(re){const{hasError:_e,thrownError:He,isStopped:ze}=this;_e?re.error(He):ze&&re.complete()}asObservable(){const re=new p.y;return re.source=this,re}}return Fe.create=(ue,re)=>new Re(ue,re),Fe})();class Re extends Oe{constructor(ue,re){super(),this.destination=ue,this.source=re}next(ue){var re,_e;null===(_e=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===_e||_e.call(re,ue)}error(ue){var re,_e;null===(_e=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===_e||_e.call(re,ue)}complete(){var ue,re;null===(re=null===(ue=this.destination)||void 0===ue?void 0:ue.complete)||void 0===re||re.call(ue)}_subscribe(ue){var re,_e;return null!==(_e=null===(re=this.source)||void 0===re?void 0:re.subscribe(ue))&&void 0!==_e?_e:K.Lc}}},930:(Mt,We,k)=>{k.d(We,{Hp:()=>ct,Lv:()=>_e});var p=k(576),K=k(727),Y=k(2416),we=k(7849),me=k(5032);const Ae=Fe("C",void 0,void 0);function Fe(F,J,le){return{kind:F,value:J,error:le}}var ue=k(3410),re=k(2806);class _e extends K.w0{constructor(J){super(),this.isStopped=!1,J?(this.destination=J,(0,K.Nn)(J)&&J.add(this)):this.destination=j}static create(J,le,Le){return new ct(J,le,Le)}next(J){this.isStopped?vt(function Re(F){return Fe("N",F,void 0)}(J),this):this._next(J)}error(J){this.isStopped?vt(function Oe(F){return Fe("E",void 0,F)}(J),this):(this.isStopped=!0,this._error(J))}complete(){this.isStopped?vt(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(J){this.destination.next(J)}_error(J){try{this.destination.error(J)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function ze(F,J){return He.call(F,J)}class Ze{constructor(J){this.partialObserver=J}next(J){const{partialObserver:le}=this;if(le.next)try{le.next(J)}catch(Le){Be(Le)}}error(J){const{partialObserver:le}=this;if(le.error)try{le.error(J)}catch(Le){Be(Le)}else Be(J)}complete(){const{partialObserver:J}=this;if(J.complete)try{J.complete()}catch(le){Be(le)}}}class ct extends _e{constructor(J,le,Le){let je;if(super(),(0,p.m)(J)||!J)je={next:null!=J?J:void 0,error:null!=le?le:void 0,complete:null!=Le?Le:void 0};else{let Ne;this&&Y.v.useDeprecatedNextContext?(Ne=Object.create(J),Ne.unsubscribe=()=>this.unsubscribe(),je={next:J.next&&ze(J.next,Ne),error:J.error&&ze(J.error,Ne),complete:J.complete&&ze(J.complete,Ne)}):je=J}this.destination=new Ze(je)}}function Be(F){Y.v.useDeprecatedSynchronousErrorHandling?(0,re.O)(F):(0,we.h)(F)}function vt(F,J){const{onStoppedNotification:le}=Y.v;le&&ue.z.setTimeout(()=>le(F,J))}const j={closed:!0,next:me.Z,error:function ke(F){throw F},complete:me.Z}},727:(Mt,We,k)=>{k.d(We,{Lc:()=>Ae,w0:()=>me,Nn:()=>Oe});var p=k(576);const Y=(0,k(3888).d)(Fe=>function(re){Fe(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((_e,He)=>`${He+1}) ${_e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var we=k(8737);class me{constructor(ue){this.initialTeardown=ue,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ue;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const ze of re)ze.remove(this);else re.remove(this);const{initialTeardown:_e}=this;if((0,p.m)(_e))try{_e()}catch(ze){ue=ze instanceof Y?ze.errors:[ze]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const ze of He)try{Re(ze)}catch(Ze){ue=null!=ue?ue:[],Ze instanceof Y?ue=[...ue,...Ze.errors]:ue.push(Ze)}}if(ue)throw new Y(ue)}}add(ue){var re;if(ue&&ue!==this)if(this.closed)Re(ue);else{if(ue instanceof me){if(ue.closed||ue._hasParent(this))return;ue._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(ue)}}_hasParent(ue){const{_parentage:re}=this;return re===ue||Array.isArray(re)&&re.includes(ue)}_addParent(ue){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(ue),re):re?[re,ue]:ue}_removeParent(ue){const{_parentage:re}=this;re===ue?this._parentage=null:Array.isArray(re)&&(0,we.P)(re,ue)}remove(ue){const{_finalizers:re}=this;re&&(0,we.P)(re,ue),ue instanceof me&&ue._removeParent(this)}}me.EMPTY=(()=>{const Fe=new me;return Fe.closed=!0,Fe})();const Ae=me.EMPTY;function Oe(Fe){return Fe instanceof me||Fe&&"closed"in Fe&&(0,p.m)(Fe.remove)&&(0,p.m)(Fe.add)&&(0,p.m)(Fe.unsubscribe)}function Re(Fe){(0,p.m)(Fe)?Fe():Fe.unsubscribe()}},2416:(Mt,We,k)=>{k.d(We,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Mt,We,k)=>{k.d(We,{a:()=>ue});var p=k(9751),K=k(4742),Y=k(8996),we=k(4671),me=k(3268),Ae=k(3269),Oe=k(1810),Re=k(5403),Fe=k(9672);function ue(...He){const ze=(0,Ae.yG)(He),Ze=(0,Ae.jO)(He),{args:ct,keys:Be}=(0,K.D)(He);if(0===ct.length)return(0,Y.D)([],ze);const ke=new p.y(function re(He,ze,Ze=we.y){return ct=>{_e(ze,()=>{const{length:Be}=He,ke=new Array(Be);let vt=Be,j=Be;for(let F=0;F<Be;F++)_e(ze,()=>{const J=(0,Y.D)(He[F],ze);let le=!1;J.subscribe((0,Re.x)(ct,Le=>{ke[F]=Le,le||(le=!0,j--),j||ct.next(Ze(ke.slice()))},()=>{--vt||ct.complete()}))},ct)},ct)}}(ct,ze,Be?vt=>(0,Oe.n)(Be,vt):we.y));return Ze?ke.pipe((0,me.Z)(Ze)):ke}function _e(He,ze,Ze){He?(0,Fe.f)(Ze,He,ze):ze()}},7272:(Mt,We,k)=>{k.d(We,{z:()=>me});var p=k(8189),Y=k(3269),we=k(8996);function me(...Ae){return function K(){return(0,p.J)(1)}()((0,we.D)(Ae,(0,Y.yG)(Ae)))}},515:(Mt,We,k)=>{k.d(We,{E:()=>K});const K=new(k(9751).y)(me=>me.complete())},8996:(Mt,We,k)=>{k.d(We,{D:()=>J});var p=k(8421),K=k(5363),Y=k(9468),Ae=k(9751),Re=k(2202),Fe=k(576),ue=k(9672);function _e(le,Le){if(!le)throw new Error("Iterable cannot be null");return new Ae.y(je=>{(0,ue.f)(je,Le,()=>{const Ne=le[Symbol.asyncIterator]();(0,ue.f)(je,Le,()=>{Ne.next().then(Ie=>{Ie.done?je.complete():je.next(Ie.value)})},0,!0)})})}var He=k(3670),ze=k(8239),Ze=k(1144),ct=k(6495),Be=k(2206),ke=k(4532),vt=k(3260);function J(le,Le){return Le?function F(le,Le){if(null!=le){if((0,He.c)(le))return function we(le,Le){return(0,p.Xf)(le).pipe((0,Y.R)(Le),(0,K.Q)(Le))}(le,Le);if((0,Ze.z)(le))return function Oe(le,Le){return new Ae.y(je=>{let Ne=0;return Le.schedule(function(){Ne===le.length?je.complete():(je.next(le[Ne++]),je.closed||this.schedule())})})}(le,Le);if((0,ze.t)(le))return function me(le,Le){return(0,p.Xf)(le).pipe((0,Y.R)(Le),(0,K.Q)(Le))}(le,Le);if((0,Be.D)(le))return _e(le,Le);if((0,ct.T)(le))return function re(le,Le){return new Ae.y(je=>{let Ne;return(0,ue.f)(je,Le,()=>{Ne=le[Re.h](),(0,ue.f)(je,Le,()=>{let Ie,Q;try{({value:Ie,done:Q}=Ne.next())}catch(Se){return void je.error(Se)}Q?je.complete():je.next(Ie)},0,!0)}),()=>(0,Fe.m)(null==Ne?void 0:Ne.return)&&Ne.return()})}(le,Le);if((0,vt.L)(le))return function j(le,Le){return _e((0,vt.Q)(le),Le)}(le,Le)}throw(0,ke.z)(le)}(le,Le):(0,p.Xf)(le)}},8421:(Mt,We,k)=>{k.d(We,{Xf:()=>He});var p=k(655),K=k(1144),Y=k(8239),we=k(9751),me=k(3670),Ae=k(2206),Oe=k(4532),Re=k(6495),Fe=k(3260),ue=k(576),re=k(7849),_e=k(8822);function He(F){if(F instanceof we.y)return F;if(null!=F){if((0,me.c)(F))return function ze(F){return new we.y(J=>{const le=F[_e.L]();if((0,ue.m)(le.subscribe))return le.subscribe(J);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(F);if((0,K.z)(F))return function Ze(F){return new we.y(J=>{for(let le=0;le<F.length&&!J.closed;le++)J.next(F[le]);J.complete()})}(F);if((0,Y.t)(F))return function ct(F){return new we.y(J=>{F.then(le=>{J.closed||(J.next(le),J.complete())},le=>J.error(le)).then(null,re.h)})}(F);if((0,Ae.D)(F))return ke(F);if((0,Re.T)(F))return function Be(F){return new we.y(J=>{for(const le of F)if(J.next(le),J.closed)return;J.complete()})}(F);if((0,Fe.L)(F))return function vt(F){return ke((0,Fe.Q)(F))}(F)}throw(0,Oe.z)(F)}function ke(F){return new we.y(J=>{(function j(F,J){var le,Le,je,Ne;return(0,p.mG)(this,void 0,void 0,function*(){try{for(le=(0,p.KL)(F);!(Le=yield le.next()).done;)if(J.next(Le.value),J.closed)return}catch(Ie){je={error:Ie}}finally{try{Le&&!Le.done&&(Ne=le.return)&&(yield Ne.call(le))}finally{if(je)throw je.error}}J.complete()})})(F,J).catch(le=>J.error(le))})}},6451:(Mt,We,k)=>{k.d(We,{T:()=>Ae});var p=k(8189),K=k(8421),Y=k(515),we=k(3269),me=k(8996);function Ae(...Oe){const Re=(0,we.yG)(Oe),Fe=(0,we._6)(Oe,1/0),ue=Oe;return ue.length?1===ue.length?(0,K.Xf)(ue[0]):(0,p.J)(Fe)((0,me.D)(ue,Re)):Y.E}},9646:(Mt,We,k)=>{k.d(We,{of:()=>Y});var p=k(3269),K=k(8996);function Y(...we){const me=(0,p.yG)(we);return(0,K.D)(we,me)}},5403:(Mt,We,k)=>{k.d(We,{x:()=>K});var p=k(930);function K(we,me,Ae,Oe,Re){return new Y(we,me,Ae,Oe,Re)}class Y extends p.Lv{constructor(me,Ae,Oe,Re,Fe,ue){super(me),this.onFinalize=Fe,this.shouldUnsubscribe=ue,this._next=Ae?function(re){try{Ae(re)}catch(_e){me.error(_e)}}:super._next,this._error=Re?function(re){try{Re(re)}catch(_e){me.error(_e)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(re){me.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(me=this.onFinalize)||void 0===me||me.call(this))}}}},6590:(Mt,We,k)=>{k.d(We,{d:()=>Y});var p=k(4482),K=k(5403);function Y(we){return(0,p.e)((me,Ae)=>{let Oe=!1;me.subscribe((0,K.x)(Ae,Re=>{Oe=!0,Ae.next(Re)},()=>{Oe||Ae.next(we),Ae.complete()}))})}},9300:(Mt,We,k)=>{k.d(We,{h:()=>Y});var p=k(4482),K=k(5403);function Y(we,me){return(0,p.e)((Ae,Oe)=>{let Re=0;Ae.subscribe((0,K.x)(Oe,Fe=>we.call(me,Fe,Re++)&&Oe.next(Fe)))})}},8746:(Mt,We,k)=>{k.d(We,{x:()=>K});var p=k(4482);function K(Y){return(0,p.e)((we,me)=>{try{we.subscribe(me)}finally{me.add(Y)}})}},590:(Mt,We,k)=>{k.d(We,{P:()=>Oe});var p=k(6805),K=k(9300),Y=k(5698),we=k(6590),me=k(8068),Ae=k(4671);function Oe(Re,Fe){const ue=arguments.length>=2;return re=>re.pipe(Re?(0,K.h)((_e,He)=>Re(_e,He,re)):Ae.y,(0,Y.q)(1),ue?(0,we.d)(Fe):(0,me.T)(()=>new p.K))}},3103:(Mt,We,k)=>{k.d(We,{Z:()=>Oe});var p=k(6805),K=k(9300),Y=k(2035),we=k(8068),me=k(6590),Ae=k(4671);function Oe(Re,Fe){const ue=arguments.length>=2;return re=>re.pipe(Re?(0,K.h)((_e,He)=>Re(_e,He,re)):Ae.y,(0,Y.h)(1),ue?(0,me.d)(Fe):(0,we.T)(()=>new p.K))}},4004:(Mt,We,k)=>{k.d(We,{U:()=>Y});var p=k(4482),K=k(5403);function Y(we,me){return(0,p.e)((Ae,Oe)=>{let Re=0;Ae.subscribe((0,K.x)(Oe,Fe=>{Oe.next(we.call(me,Fe,Re++))}))})}},8189:(Mt,We,k)=>{k.d(We,{J:()=>Y});var p=k(5577),K=k(4671);function Y(we=1/0){return(0,p.z)(K.y,we)}},5577:(Mt,We,k)=>{k.d(We,{z:()=>Re});var p=k(4004),K=k(8421),Y=k(4482),we=k(9672),me=k(5403),Oe=k(576);function Re(Fe,ue,re=1/0){return(0,Oe.m)(ue)?Re((_e,He)=>(0,p.U)((ze,Ze)=>ue(_e,ze,He,Ze))((0,K.Xf)(Fe(_e,He))),re):("number"==typeof ue&&(re=ue),(0,Y.e)((_e,He)=>function Ae(Fe,ue,re,_e,He,ze,Ze,ct){const Be=[];let ke=0,vt=0,j=!1;const F=()=>{j&&!Be.length&&!ke&&ue.complete()},J=Le=>ke<_e?le(Le):Be.push(Le),le=Le=>{ze&&ue.next(Le),ke++;let je=!1;(0,K.Xf)(re(Le,vt++)).subscribe((0,me.x)(ue,Ne=>{null==He||He(Ne),ze?J(Ne):ue.next(Ne)},()=>{je=!0},void 0,()=>{if(je)try{for(ke--;Be.length&&ke<_e;){const Ne=Be.shift();Ze?(0,we.f)(ue,Ze,()=>le(Ne)):le(Ne)}F()}catch(Ne){ue.error(Ne)}}))};return Fe.subscribe((0,me.x)(ue,J,()=>{j=!0,F()})),()=>{null==ct||ct()}}(_e,He,Fe,re)))}},5363:(Mt,We,k)=>{k.d(We,{Q:()=>we});var p=k(9672),K=k(4482),Y=k(5403);function we(me,Ae=0){return(0,K.e)((Oe,Re)=>{Oe.subscribe((0,Y.x)(Re,Fe=>(0,p.f)(Re,me,()=>Re.next(Fe),Ae),()=>(0,p.f)(Re,me,()=>Re.complete(),Ae),Fe=>(0,p.f)(Re,me,()=>Re.error(Fe),Ae)))})}},5026:(Mt,We,k)=>{k.d(We,{R:()=>we});var p=k(4482),K=k(5403);function Y(me,Ae,Oe,Re,Fe){return(ue,re)=>{let _e=Oe,He=Ae,ze=0;ue.subscribe((0,K.x)(re,Ze=>{const ct=ze++;He=_e?me(He,Ze,ct):(_e=!0,Ze),Re&&re.next(He)},Fe&&(()=>{_e&&re.next(He),re.complete()})))}}function we(me,Ae){return(0,p.e)(Y(me,Ae,arguments.length>=2,!0))}},3099:(Mt,We,k)=>{k.d(We,{B:()=>Ae});var p=k(8996),K=k(5698),Y=k(7579),we=k(930),me=k(4482);function Ae(Re={}){const{connector:Fe=(()=>new Y.x),resetOnError:ue=!0,resetOnComplete:re=!0,resetOnRefCountZero:_e=!0}=Re;return He=>{let ze=null,Ze=null,ct=null,Be=0,ke=!1,vt=!1;const j=()=>{null==Ze||Ze.unsubscribe(),Ze=null},F=()=>{j(),ze=ct=null,ke=vt=!1},J=()=>{const le=ze;F(),null==le||le.unsubscribe()};return(0,me.e)((le,Le)=>{Be++,!vt&&!ke&&j();const je=ct=null!=ct?ct:Fe();Le.add(()=>{Be--,0===Be&&!vt&&!ke&&(Ze=Oe(J,_e))}),je.subscribe(Le),ze||(ze=new we.Hp({next:Ne=>je.next(Ne),error:Ne=>{vt=!0,j(),Ze=Oe(F,ue,Ne),je.error(Ne)},complete:()=>{ke=!0,j(),Ze=Oe(F,re),je.complete()}}),(0,p.D)(le).subscribe(ze))})(He)}}function Oe(Re,Fe,...ue){return!0===Fe?(Re(),null):!1===Fe?null:Fe(...ue).pipe((0,K.q)(1)).subscribe(()=>Re())}},8675:(Mt,We,k)=>{k.d(We,{O:()=>we});var p=k(7272),K=k(3269),Y=k(4482);function we(...me){const Ae=(0,K.yG)(me);return(0,Y.e)((Oe,Re)=>{(Ae?(0,p.z)(me,Oe,Ae):(0,p.z)(me,Oe)).subscribe(Re)})}},9468:(Mt,We,k)=>{k.d(We,{R:()=>K});var p=k(4482);function K(Y,we=0){return(0,p.e)((me,Ae)=>{Ae.add(Y.schedule(()=>me.subscribe(Ae),we))})}},3900:(Mt,We,k)=>{k.d(We,{w:()=>we});var p=k(8421),K=k(4482),Y=k(5403);function we(me,Ae){return(0,K.e)((Oe,Re)=>{let Fe=null,ue=0,re=!1;const _e=()=>re&&!Fe&&Re.complete();Oe.subscribe((0,Y.x)(Re,He=>{null==Fe||Fe.unsubscribe();let ze=0;const Ze=ue++;(0,p.Xf)(me(He,Ze)).subscribe(Fe=(0,Y.x)(Re,ct=>Re.next(Ae?Ae(He,ct,Ze,ze++):ct),()=>{Fe=null,_e()}))},()=>{re=!0,_e()}))})}},5698:(Mt,We,k)=>{k.d(We,{q:()=>we});var p=k(515),K=k(4482),Y=k(5403);function we(me){return me<=0?()=>p.E:(0,K.e)((Ae,Oe)=>{let Re=0;Ae.subscribe((0,Y.x)(Oe,Fe=>{++Re<=me&&(Oe.next(Fe),me<=Re&&Oe.complete())}))})}},2035:(Mt,We,k)=>{k.d(We,{h:()=>we});var p=k(515),K=k(4482),Y=k(5403);function we(me){return me<=0?()=>p.E:(0,K.e)((Ae,Oe)=>{let Re=[];Ae.subscribe((0,Y.x)(Oe,Fe=>{Re.push(Fe),me<Re.length&&Re.shift()},()=>{for(const Fe of Re)Oe.next(Fe);Oe.complete()},void 0,()=>{Re=null}))})}},8505:(Mt,We,k)=>{k.d(We,{b:()=>me});var p=k(576),K=k(4482),Y=k(5403),we=k(4671);function me(Ae,Oe,Re){const Fe=(0,p.m)(Ae)||Oe||Re?{next:Ae,error:Oe,complete:Re}:Ae;return Fe?(0,K.e)((ue,re)=>{var _e;null===(_e=Fe.subscribe)||void 0===_e||_e.call(Fe);let He=!0;ue.subscribe((0,Y.x)(re,ze=>{var Ze;null===(Ze=Fe.next)||void 0===Ze||Ze.call(Fe,ze),re.next(ze)},()=>{var ze;He=!1,null===(ze=Fe.complete)||void 0===ze||ze.call(Fe),re.complete()},ze=>{var Ze;He=!1,null===(Ze=Fe.error)||void 0===Ze||Ze.call(Fe,ze),re.error(ze)},()=>{var ze,Ze;He&&(null===(ze=Fe.unsubscribe)||void 0===ze||ze.call(Fe)),null===(Ze=Fe.finalize)||void 0===Ze||Ze.call(Fe)}))}):we.y}},8068:(Mt,We,k)=>{k.d(We,{T:()=>we});var p=k(6805),K=k(4482),Y=k(5403);function we(Ae=me){return(0,K.e)((Oe,Re)=>{let Fe=!1;Oe.subscribe((0,Y.x)(Re,ue=>{Fe=!0,Re.next(ue)},()=>Fe?Re.complete():Re.error(Ae())))})}function me(){return new p.K}},4408:(Mt,We,k)=>{k.d(We,{o:()=>me});var p=k(727);class K extends p.w0{constructor(Oe,Re){super()}schedule(Oe,Re=0){return this}}const Y={setInterval(Ae,Oe,...Re){const{delegate:Fe}=Y;return(null==Fe?void 0:Fe.setInterval)?Fe.setInterval(Ae,Oe,...Re):setInterval(Ae,Oe,...Re)},clearInterval(Ae){const{delegate:Oe}=Y;return((null==Oe?void 0:Oe.clearInterval)||clearInterval)(Ae)},delegate:void 0};var we=k(8737);class me extends K{constructor(Oe,Re){super(Oe,Re),this.scheduler=Oe,this.work=Re,this.pending=!1}schedule(Oe,Re=0){if(this.closed)return this;this.state=Oe;const Fe=this.id,ue=this.scheduler;return null!=Fe&&(this.id=this.recycleAsyncId(ue,Fe,Re)),this.pending=!0,this.delay=Re,this.id=this.id||this.requestAsyncId(ue,this.id,Re),this}requestAsyncId(Oe,Re,Fe=0){return Y.setInterval(Oe.flush.bind(Oe,this),Fe)}recycleAsyncId(Oe,Re,Fe=0){if(null!=Fe&&this.delay===Fe&&!1===this.pending)return Re;Y.clearInterval(Re)}execute(Oe,Re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(Oe,Re);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,Re){let ue,Fe=!1;try{this.work(Oe)}catch(re){Fe=!0,ue=re||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),ue}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:Re}=this,{actions:Fe}=Re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,we.P)(Fe,this),null!=Oe&&(this.id=this.recycleAsyncId(Re,Oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Mt,We,k)=>{k.d(We,{v:()=>Y});var p=k(6063);class K{constructor(me,Ae=K.now){this.schedulerActionCtor=me,this.now=Ae}schedule(me,Ae=0,Oe){return new this.schedulerActionCtor(this,me).schedule(Oe,Ae)}}K.now=p.l.now;class Y extends K{constructor(me,Ae=K.now){super(me,Ae),this.actions=[],this._active=!1,this._scheduled=void 0}flush(me){const{actions:Ae}=this;if(this._active)return void Ae.push(me);let Oe;this._active=!0;do{if(Oe=me.execute(me.state,me.delay))break}while(me=Ae.shift());if(this._active=!1,Oe){for(;me=Ae.shift();)me.unsubscribe();throw Oe}}}},4986:(Mt,We,k)=>{k.d(We,{P:()=>we,z:()=>Y});var p=k(4408);const Y=new(k(7565).v)(p.o),we=Y},6063:(Mt,We,k)=>{k.d(We,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Mt,We,k)=>{k.d(We,{z:()=>p});const p={setTimeout(K,Y,...we){const{delegate:me}=p;return(null==me?void 0:me.setTimeout)?me.setTimeout(K,Y,...we):setTimeout(K,Y,...we)},clearTimeout(K){const{delegate:Y}=p;return((null==Y?void 0:Y.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(Mt,We,k)=>{k.d(We,{h:()=>K});const K=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Mt,We,k)=>{k.d(We,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Mt,We,k)=>{k.d(We,{K:()=>K});const K=(0,k(3888).d)(Y=>function(){Y(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Mt,We,k)=>{k.d(We,{_6:()=>Ae,jO:()=>we,yG:()=>me});var p=k(576),K=k(3532);function Y(Oe){return Oe[Oe.length-1]}function we(Oe){return(0,p.m)(Y(Oe))?Oe.pop():void 0}function me(Oe){return(0,K.K)(Y(Oe))?Oe.pop():void 0}function Ae(Oe,Re){return"number"==typeof Y(Oe)?Oe.pop():Re}},4742:(Mt,We,k)=>{k.d(We,{D:()=>me});const{isArray:p}=Array,{getPrototypeOf:K,prototype:Y,keys:we}=Object;function me(Oe){if(1===Oe.length){const Re=Oe[0];if(p(Re))return{args:Re,keys:null};if(function Ae(Oe){return Oe&&"object"==typeof Oe&&K(Oe)===Y}(Re)){const Fe=we(Re);return{args:Fe.map(ue=>Re[ue]),keys:Fe}}}return{args:Oe,keys:null}}},8737:(Mt,We,k)=>{function p(K,Y){if(K){const we=K.indexOf(Y);0<=we&&K.splice(we,1)}}k.d(We,{P:()=>p})},3888:(Mt,We,k)=>{function p(K){const we=K(me=>{Error.call(me),me.stack=(new Error).stack});return we.prototype=Object.create(Error.prototype),we.prototype.constructor=we,we}k.d(We,{d:()=>p})},1810:(Mt,We,k)=>{function p(K,Y){return K.reduce((we,me,Ae)=>(we[me]=Y[Ae],we),{})}k.d(We,{n:()=>p})},2806:(Mt,We,k)=>{k.d(We,{O:()=>we,x:()=>Y});var p=k(2416);let K=null;function Y(me){if(p.v.useDeprecatedSynchronousErrorHandling){const Ae=!K;if(Ae&&(K={errorThrown:!1,error:null}),me(),Ae){const{errorThrown:Oe,error:Re}=K;if(K=null,Oe)throw Re}}else me()}function we(me){p.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=me)}},9672:(Mt,We,k)=>{function p(K,Y,we,me=0,Ae=!1){const Oe=Y.schedule(function(){we(),Ae?K.add(this.schedule(null,me)):this.unsubscribe()},me);if(K.add(Oe),!Ae)return Oe}k.d(We,{f:()=>p})},4671:(Mt,We,k)=>{function p(K){return K}k.d(We,{y:()=>p})},1144:(Mt,We,k)=>{k.d(We,{z:()=>p});const p=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(Mt,We,k)=>{k.d(We,{D:()=>K});var p=k(576);function K(Y){return Symbol.asyncIterator&&(0,p.m)(null==Y?void 0:Y[Symbol.asyncIterator])}},576:(Mt,We,k)=>{function p(K){return"function"==typeof K}k.d(We,{m:()=>p})},3670:(Mt,We,k)=>{k.d(We,{c:()=>Y});var p=k(8822),K=k(576);function Y(we){return(0,K.m)(we[p.L])}},6495:(Mt,We,k)=>{k.d(We,{T:()=>Y});var p=k(2202),K=k(576);function Y(we){return(0,K.m)(null==we?void 0:we[p.h])}},8239:(Mt,We,k)=>{k.d(We,{t:()=>K});var p=k(576);function K(Y){return(0,p.m)(null==Y?void 0:Y.then)}},3260:(Mt,We,k)=>{k.d(We,{L:()=>we,Q:()=>Y});var p=k(655),K=k(576);function Y(me){return(0,p.FC)(this,arguments,function*(){const Oe=me.getReader();try{for(;;){const{value:Re,done:Fe}=yield(0,p.qq)(Oe.read());if(Fe)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Re)}}finally{Oe.releaseLock()}})}function we(me){return(0,K.m)(null==me?void 0:me.getReader)}},3532:(Mt,We,k)=>{k.d(We,{K:()=>K});var p=k(576);function K(Y){return Y&&(0,p.m)(Y.schedule)}},4482:(Mt,We,k)=>{k.d(We,{A:()=>K,e:()=>Y});var p=k(576);function K(we){return(0,p.m)(null==we?void 0:we.lift)}function Y(we){return me=>{if(K(me))return me.lift(function(Ae){try{return we(Ae,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Mt,We,k)=>{k.d(We,{Z:()=>we});var p=k(4004);const{isArray:K}=Array;function we(me){return(0,p.U)(Ae=>function Y(me,Ae){return K(Ae)?me(...Ae):me(Ae)}(me,Ae))}},5032:(Mt,We,k)=>{function p(){}k.d(We,{Z:()=>p})},9635:(Mt,We,k)=>{k.d(We,{U:()=>Y,z:()=>K});var p=k(4671);function K(...we){return Y(we)}function Y(we){return 0===we.length?p.y:1===we.length?we[0]:function(Ae){return we.reduce((Oe,Re)=>Re(Oe),Ae)}}},7849:(Mt,We,k)=>{k.d(We,{h:()=>Y});var p=k(2416),K=k(3410);function Y(we){K.z.setTimeout(()=>{const{onUnhandledError:me}=p.v;if(!me)throw we;me(we)})}},4532:(Mt,We,k)=>{function p(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(We,{z:()=>p})},655:(Mt,We,k)=>{function we(Ie,Q){var Se={};for(var de in Ie)Object.prototype.hasOwnProperty.call(Ie,de)&&Q.indexOf(de)<0&&(Se[de]=Ie[de]);if(null!=Ie&&"function"==typeof Object.getOwnPropertySymbols){var Ye=0;for(de=Object.getOwnPropertySymbols(Ie);Ye<de.length;Ye++)Q.indexOf(de[Ye])<0&&Object.prototype.propertyIsEnumerable.call(Ie,de[Ye])&&(Se[de[Ye]]=Ie[de[Ye]])}return Se}function me(Ie,Q,Se,de){var Wt,Ye=arguments.length,$e=Ye<3?Q:null===de?de=Object.getOwnPropertyDescriptor(Q,Se):de;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)$e=Reflect.decorate(Ie,Q,Se,de);else for(var It=Ie.length-1;It>=0;It--)(Wt=Ie[It])&&($e=(Ye<3?Wt($e):Ye>3?Wt(Q,Se,$e):Wt(Q,Se))||$e);return Ye>3&&$e&&Object.defineProperty(Q,Se,$e),$e}function Re(Ie,Q,Se,de){return new(Se||(Se=Promise))(function($e,Wt){function It(bt){try{pt(de.next(bt))}catch(qt){Wt(qt)}}function Lt(bt){try{pt(de.throw(bt))}catch(qt){Wt(qt)}}function pt(bt){bt.done?$e(bt.value):function Ye($e){return $e instanceof Se?$e:new Se(function(Wt){Wt($e)})}(bt.value).then(It,Lt)}pt((de=de.apply(Ie,Q||[])).next())})}function Be(Ie){return this instanceof Be?(this.v=Ie,this):new Be(Ie)}function ke(Ie,Q,Se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ye,de=Se.apply(Ie,Q||[]),$e=[];return Ye={},Wt("next"),Wt("throw"),Wt("return"),Ye[Symbol.asyncIterator]=function(){return this},Ye;function Wt(Rt){de[Rt]&&(Ye[Rt]=function(Vt){return new Promise(function(lt,pn){$e.push([Rt,Vt,lt,pn])>1||It(Rt,Vt)})})}function It(Rt,Vt){try{!function Lt(Rt){Rt.value instanceof Be?Promise.resolve(Rt.value.v).then(pt,bt):qt($e[0][2],Rt)}(de[Rt](Vt))}catch(lt){qt($e[0][3],lt)}}function pt(Rt){It("next",Rt)}function bt(Rt){It("throw",Rt)}function qt(Rt,Vt){Rt(Vt),$e.shift(),$e.length&&It($e[0][0],$e[0][1])}}function j(Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,Q=Ie[Symbol.asyncIterator];return Q?Q.call(Ie):(Ie=function _e(Ie){var Q="function"==typeof Symbol&&Symbol.iterator,Se=Q&&Ie[Q],de=0;if(Se)return Se.call(Ie);if(Ie&&"number"==typeof Ie.length)return{next:function(){return Ie&&de>=Ie.length&&(Ie=void 0),{value:Ie&&Ie[de++],done:!Ie}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ie),Se={},de("next"),de("throw"),de("return"),Se[Symbol.asyncIterator]=function(){return this},Se);function de($e){Se[$e]=Ie[$e]&&function(Wt){return new Promise(function(It,Lt){!function Ye($e,Wt,It,Lt){Promise.resolve(Lt).then(function(pt){$e({value:pt,done:It})},Wt)}(It,Lt,(Wt=Ie[$e](Wt)).done,Wt.value)})}}}k.d(We,{FC:()=>ke,KL:()=>j,_T:()=>we,gn:()=>me,mG:()=>Re,qq:()=>Be})},9808:(Mt,We,k)=>{k.d(We,{Do:()=>F,EM:()=>hs,HT:()=>me,JF:()=>Ir,K0:()=>Oe,Mx:()=>wr,O5:()=>Pn,Ov:()=>Ue,PM:()=>Gr,S$:()=>Be,Ts:()=>Ei,V_:()=>ue,Ye:()=>J,Zx:()=>ni,b0:()=>j,bD:()=>rs,ez:()=>vs,lw:()=>Re,mk:()=>vi,mr:()=>vt,q:()=>Y,sg:()=>Rr,w_:()=>Ae});var p=k(5e3);let K=null;function Y(){return K}function me(O){K||(K=O)}class Ae{}const Oe=new p.OlP("DocumentToken");let Re=(()=>{class O{historyGo(R){throw new Error("Not implemented")}}return O.\u0275fac=function(R){return new(R||O)},O.\u0275prov=p.Yz7({token:O,factory:function(){return function Fe(){return(0,p.LFG)(re)}()},providedIn:"platform"}),O})();const ue=new p.OlP("Location Initialized");let re=(()=>{class O extends Re{constructor(R){super(),this._doc=R,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState(R){const Z=Y().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("popstate",R,!1),()=>Z.removeEventListener("popstate",R)}onHashChange(R){const Z=Y().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("hashchange",R,!1),()=>Z.removeEventListener("hashchange",R)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(R){this.location.pathname=R}pushState(R,Z,ge){_e()?this._history.pushState(R,Z,ge):this.location.hash=ge}replaceState(R,Z,ge){_e()?this._history.replaceState(R,Z,ge):this.location.hash=ge}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}}return O.\u0275fac=function(R){return new(R||O)(p.LFG(Oe))},O.\u0275prov=p.Yz7({token:O,factory:function(){return function He(){return new re((0,p.LFG)(Oe))}()},providedIn:"platform"}),O})();function _e(){return!!window.history.pushState}function ze(O,$){if(0==O.length)return $;if(0==$.length)return O;let R=0;return O.endsWith("/")&&R++,$.startsWith("/")&&R++,2==R?O+$.substring(1):1==R?O+$:O+"/"+$}function Ze(O){const $=O.match(/#|\?|$/),R=$&&$.index||O.length;return O.slice(0,R-("/"===O[R-1]?1:0))+O.slice(R)}function ct(O){return O&&"?"!==O[0]?"?"+O:O}let Be=(()=>{class O{historyGo(R){throw new Error("Not implemented")}}return O.\u0275fac=function(R){return new(R||O)},O.\u0275prov=p.Yz7({token:O,factory:function(){return function ke(O){const $=(0,p.LFG)(Oe).location;return new j((0,p.LFG)(Re),$&&$.origin||"")}()},providedIn:"root"}),O})();const vt=new p.OlP("appBaseHref");let j=(()=>{class O extends Be{constructor(R,Z){if(super(),this._platformLocation=R,this._removeListenerFns=[],null==Z&&(Z=this._platformLocation.getBaseHrefFromDOM()),null==Z)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Z}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return ze(this._baseHref,R)}path(R=!1){const Z=this._platformLocation.pathname+ct(this._platformLocation.search),ge=this._platformLocation.hash;return ge&&R?`${Z}${ge}`:Z}pushState(R,Z,ge,Xe){const tt=this.prepareExternalUrl(ge+ct(Xe));this._platformLocation.pushState(R,Z,tt)}replaceState(R,Z,ge,Xe){const tt=this.prepareExternalUrl(ge+ct(Xe));this._platformLocation.replaceState(R,Z,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(R=0){var Z,ge;null===(ge=(Z=this._platformLocation).historyGo)||void 0===ge||ge.call(Z,R)}}return O.\u0275fac=function(R){return new(R||O)(p.LFG(Re),p.LFG(vt,8))},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac}),O})(),F=(()=>{class O extends Be{constructor(R,Z){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=Z&&(this._baseHref=Z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let Z=this._platformLocation.hash;return null==Z&&(Z="#"),Z.length>0?Z.substring(1):Z}prepareExternalUrl(R){const Z=ze(this._baseHref,R);return Z.length>0?"#"+Z:Z}pushState(R,Z,ge,Xe){let tt=this.prepareExternalUrl(ge+ct(Xe));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.pushState(R,Z,tt)}replaceState(R,Z,ge,Xe){let tt=this.prepareExternalUrl(ge+ct(Xe));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.replaceState(R,Z,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(R=0){var Z,ge;null===(ge=(Z=this._platformLocation).historyGo)||void 0===ge||ge.call(Z,R)}}return O.\u0275fac=function(R){return new(R||O)(p.LFG(Re),p.LFG(vt,8))},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac}),O})(),J=(()=>{class O{constructor(R,Z){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=R;const ge=this._platformStrategy.getBaseHref();this._platformLocation=Z,this._baseHref=Ze(je(ge)),this._platformStrategy.onPopState(Xe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Xe.state,type:Xe.type})})}path(R=!1){return this.normalize(this._platformStrategy.path(R))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(R,Z=""){return this.path()==this.normalize(R+ct(Z))}normalize(R){return O.stripTrailingSlash(function Le(O,$){return O&&$.startsWith(O)?$.substring(O.length):$}(this._baseHref,je(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._platformStrategy.prepareExternalUrl(R)}go(R,Z="",ge=null){this._platformStrategy.pushState(ge,"",R,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+ct(Z)),ge)}replaceState(R,Z="",ge=null){this._platformStrategy.replaceState(ge,"",R,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+ct(Z)),ge)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(R=0){var Z,ge;null===(ge=(Z=this._platformStrategy).historyGo)||void 0===ge||ge.call(Z,R)}onUrlChange(R){this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Z=>{this._notifyUrlChangeListeners(Z.url,Z.state)}))}_notifyUrlChangeListeners(R="",Z){this._urlChangeListeners.forEach(ge=>ge(R,Z))}subscribe(R,Z,ge){return this._subject.subscribe({next:R,error:Z,complete:ge})}}return O.normalizeQueryParams=ct,O.joinWithSlash=ze,O.stripTrailingSlash=Ze,O.\u0275fac=function(R){return new(R||O)(p.LFG(Be),p.LFG(Re))},O.\u0275prov=p.Yz7({token:O,factory:function(){return function le(){return new J((0,p.LFG)(Be),(0,p.LFG)(Re))}()},providedIn:"root"}),O})();function je(O){return O.replace(/\/index.html$/,"")}var Ie=(()=>((Ie=Ie||{})[Ie.Decimal=0]="Decimal",Ie[Ie.Percent=1]="Percent",Ie[Ie.Currency=2]="Currency",Ie[Ie.Scientific=3]="Scientific",Ie))(),$e=(()=>(($e=$e||{})[$e.Decimal=0]="Decimal",$e[$e.Group=1]="Group",$e[$e.List=2]="List",$e[$e.PercentSign=3]="PercentSign",$e[$e.PlusSign=4]="PlusSign",$e[$e.MinusSign=5]="MinusSign",$e[$e.Exponential=6]="Exponential",$e[$e.SuperscriptingExponent=7]="SuperscriptingExponent",$e[$e.PerMille=8]="PerMille",$e[$e.Infinity=9]="Infinity",$e[$e.NaN=10]="NaN",$e[$e.TimeSeparator=11]="TimeSeparator",$e[$e.CurrencyDecimal=12]="CurrencyDecimal",$e[$e.CurrencyGroup=13]="CurrencyGroup",$e))();function mn(O,$){const R=(0,p.cg1)(O),Z=R[p.wAp.NumberSymbols][$];if(void 0===Z){if($===$e.CurrencyDecimal)return R[p.wAp.NumberSymbols][$e.Decimal];if($===$e.CurrencyGroup)return R[p.wAp.NumberSymbols][$e.Group]}return Z}const nr=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function xr(O){const $=parseInt(O);if(isNaN($))throw new Error("Invalid integer literal when parsing "+O);return $}function wr(O,$){$=encodeURIComponent($);for(const R of O.split(";")){const Z=R.indexOf("="),[ge,Xe]=-1==Z?[R,""]:[R.slice(0,Z),R.slice(Z+1)];if(ge.trim()===$)return decodeURIComponent(Xe)}return null}let vi=(()=>{class O{constructor(R,Z,ge,Xe){this._iterableDiffers=R,this._keyValueDiffers=Z,this._ngEl=ge,this._renderer=Xe,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(R){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof R?R.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(R){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof R?R.split(/\s+/):R,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const R=this._iterableDiffer.diff(this._rawClass);R&&this._applyIterableChanges(R)}else if(this._keyValueDiffer){const R=this._keyValueDiffer.diff(this._rawClass);R&&this._applyKeyValueChanges(R)}}_applyKeyValueChanges(R){R.forEachAddedItem(Z=>this._toggleClass(Z.key,Z.currentValue)),R.forEachChangedItem(Z=>this._toggleClass(Z.key,Z.currentValue)),R.forEachRemovedItem(Z=>{Z.previousValue&&this._toggleClass(Z.key,!1)})}_applyIterableChanges(R){R.forEachAddedItem(Z=>{if("string"!=typeof Z.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(Z.item)}`);this._toggleClass(Z.item,!0)}),R.forEachRemovedItem(Z=>this._toggleClass(Z.item,!1))}_applyClasses(R){R&&(Array.isArray(R)||R instanceof Set?R.forEach(Z=>this._toggleClass(Z,!0)):Object.keys(R).forEach(Z=>this._toggleClass(Z,!!R[Z])))}_removeClasses(R){R&&(Array.isArray(R)||R instanceof Set?R.forEach(Z=>this._toggleClass(Z,!1)):Object.keys(R).forEach(Z=>this._toggleClass(Z,!1)))}_toggleClass(R,Z){(R=R.trim())&&R.split(/\s+/g).forEach(ge=>{Z?this._renderer.addClass(this._ngEl.nativeElement,ge):this._renderer.removeClass(this._ngEl.nativeElement,ge)})}}return O.\u0275fac=function(R){return new(R||O)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},O.\u0275dir=p.lG2({type:O,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),O})();class Yr{constructor($,R,Z,ge){this.$implicit=$,this.ngForOf=R,this.index=Z,this.count=ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Rr=(()=>{class O{constructor(R,Z,ge){this._viewContainer=R,this._template=Z,this._differs=ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(R){this._ngForOf=R,this._ngForOfDirty=!0}set ngForTrackBy(R){this._trackByFn=R}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(R){R&&(this._template=R)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const R=this._ngForOf;!this._differ&&R&&(this._differ=this._differs.find(R).create(this.ngForTrackBy))}if(this._differ){const R=this._differ.diff(this._ngForOf);R&&this._applyChanges(R)}}_applyChanges(R){const Z=this._viewContainer;R.forEachOperation((ge,Xe,tt)=>{if(null==ge.previousIndex)Z.createEmbeddedView(this._template,new Yr(ge.item,this._ngForOf,-1,-1),null===tt?void 0:tt);else if(null==tt)Z.remove(null===Xe?void 0:Xe);else if(null!==Xe){const At=Z.get(Xe);Z.move(At,tt),Vr(At,ge)}});for(let ge=0,Xe=Z.length;ge<Xe;ge++){const At=Z.get(ge).context;At.index=ge,At.count=Xe,At.ngForOf=this._ngForOf}R.forEachIdentityChange(ge=>{Vr(Z.get(ge.currentIndex),ge)})}static ngTemplateContextGuard(R,Z){return!0}}return O.\u0275fac=function(R){return new(R||O)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},O.\u0275dir=p.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),O})();function Vr(O,$){O.context.$implicit=$.item}let Pn=(()=>{class O{constructor(R,Z){this._viewContainer=R,this._context=new Fn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Z}set ngIf(R){this._context.$implicit=this._context.ngIf=R,this._updateView()}set ngIfThen(R){Ji("ngIfThen",R),this._thenTemplateRef=R,this._thenViewRef=null,this._updateView()}set ngIfElse(R){Ji("ngIfElse",R),this._elseTemplateRef=R,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(R,Z){return!0}}return O.\u0275fac=function(R){return new(R||O)(p.Y36(p.s_b),p.Y36(p.Rgc))},O.\u0275dir=p.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),O})();class Fn{constructor(){this.$implicit=null,this.ngIf=null}}function Ji(O,$){if($&&!$.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,p.AaK)($)}'.`)}function xe(O,$){return new p.vHH(2100,"")}class at{createSubscription($,R){return $.subscribe({next:R,error:Z=>{throw Z}})}dispose($){$.unsubscribe()}onDestroy($){$.unsubscribe()}}class cn{createSubscription($,R){return $.then(R,Z=>{throw Z})}dispose($){}onDestroy($){}}const he=new cn,ye=new at;let Ue=(()=>{class O{constructor(R){this._ref=R,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(R){return this._obj?R!==this._obj?(this._dispose(),this.transform(R)):this._latestValue:(R&&this._subscribe(R),this._latestValue)}_subscribe(R){this._obj=R,this._strategy=this._selectStrategy(R),this._subscription=this._strategy.createSubscription(R,Z=>this._updateLatestValue(R,Z))}_selectStrategy(R){if((0,p.QGY)(R))return he;if((0,p.F4k)(R))return ye;throw xe()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(R,Z){R===this._obj&&(this._latestValue=Z,this._ref.markForCheck())}}return O.\u0275fac=function(R){return new(R||O)(p.Y36(p.sBO,16))},O.\u0275pipe=p.Yjl({name:"async",type:O,pure:!1}),O})(),Ei=(()=>{class O{transform(R){return JSON.stringify(R,null,2)}}return O.\u0275fac=function(R){return new(R||O)},O.\u0275pipe=p.Yjl({name:"json",type:O,pure:!1}),O})(),ni=(()=>{class O{constructor(R){this._locale=R}transform(R,Z,ge){if(!function wi(O){return!(null==O||""===O||O!=O)}(R))return null;ge=ge||this._locale;try{return function dt(O,$,R){return function Gi(O,$,R,Z,ge,Xe,tt=!1){let At="",tr=!1;if(isFinite(O)){let Kn=function ei(O){let Z,ge,Xe,tt,At,$=Math.abs(O)+"",R=0;for((ge=$.indexOf("."))>-1&&($=$.replace(".","")),(Xe=$.search(/e/i))>0?(ge<0&&(ge=Xe),ge+=+$.slice(Xe+1),$=$.substring(0,Xe)):ge<0&&(ge=$.length),Xe=0;"0"===$.charAt(Xe);Xe++);if(Xe===(At=$.length))Z=[0],ge=1;else{for(At--;"0"===$.charAt(At);)At--;for(ge-=Xe,Z=[],tt=0;Xe<=At;Xe++,tt++)Z[tt]=Number($.charAt(Xe))}return ge>22&&(Z=Z.splice(0,21),R=ge-1,ge=1),{digits:Z,exponent:R,integerLen:ge}}(O);tt&&(Kn=function er(O){if(0===O.digits[0])return O;const $=O.digits.length-O.integerLen;return O.exponent?O.exponent+=2:(0===$?O.digits.push(0,0):1===$&&O.digits.push(0),O.integerLen+=2),O}(Kn));let Dn=$.minInt,Mn=$.minFrac,Dr=$.maxFrac;if(Xe){const Ci=Xe.match(nr);if(null===Ci)throw new Error(`${Xe} is not a valid digit info`);const zi=Ci[1],fs=Ci[3],Os=Ci[5];null!=zi&&(Dn=xr(zi)),null!=fs&&(Mn=xr(fs)),null!=Os?Dr=xr(Os):null!=fs&&Mn>Dr&&(Dr=Mn)}!function or(O,$,R){if($>R)throw new Error(`The minimum number of digits after fraction (${$}) is higher than the maximum (${R}).`);let Z=O.digits,ge=Z.length-O.integerLen;const Xe=Math.min(Math.max($,ge),R);let tt=Xe+O.integerLen,At=Z[tt];if(tt>0){Z.splice(Math.max(O.integerLen,tt));for(let Mn=tt;Mn<Z.length;Mn++)Z[Mn]=0}else{ge=Math.max(0,ge),O.integerLen=1,Z.length=Math.max(1,tt=Xe+1),Z[0]=0;for(let Mn=1;Mn<tt;Mn++)Z[Mn]=0}if(At>=5)if(tt-1<0){for(let Mn=0;Mn>tt;Mn--)Z.unshift(0),O.integerLen++;Z.unshift(1),O.integerLen++}else Z[tt-1]++;for(;ge<Math.max(0,Xe);ge++)Z.push(0);let tr=0!==Xe;const Kn=$+O.integerLen,Dn=Z.reduceRight(function(Mn,Dr,Cr,fr){return fr[Cr]=(Dr+=Mn)<10?Dr:Dr-10,tr&&(0===fr[Cr]&&Cr>=Kn?fr.pop():tr=!1),Dr>=10?1:0},0);Dn&&(Z.unshift(Dn),O.integerLen++)}(Kn,Mn,Dr);let Cr=Kn.digits,fr=Kn.integerLen;const Wi=Kn.exponent;let ii=[];for(tr=Cr.every(Ci=>!Ci);fr<Dn;fr++)Cr.unshift(0);for(;fr<0;fr++)Cr.unshift(0);fr>0?ii=Cr.splice(fr,Cr.length):(ii=Cr,Cr=[0]);const dn=[];for(Cr.length>=$.lgSize&&dn.unshift(Cr.splice(-$.lgSize,Cr.length).join(""));Cr.length>$.gSize;)dn.unshift(Cr.splice(-$.gSize,Cr.length).join(""));Cr.length&&dn.unshift(Cr.join("")),At=dn.join(mn(R,Z)),ii.length&&(At+=mn(R,ge)+ii.join("")),Wi&&(At+=mn(R,$e.Exponential)+"+"+Wi)}else At=mn(R,$e.Infinity);return At=O<0&&!tr?$.negPre+At+$.negSuf:$.posPre+At+$.posSuf,At}(O,function hn(O,$="-"){const R={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Z=O.split(";"),ge=Z[0],Xe=Z[1],tt=-1!==ge.indexOf(".")?ge.split("."):[ge.substring(0,ge.lastIndexOf("0")+1),ge.substring(ge.lastIndexOf("0")+1)],At=tt[0],tr=tt[1]||"";R.posPre=At.substr(0,At.indexOf("#"));for(let Dn=0;Dn<tr.length;Dn++){const Mn=tr.charAt(Dn);"0"===Mn?R.minFrac=R.maxFrac=Dn+1:"#"===Mn?R.maxFrac=Dn+1:R.posSuf+=Mn}const Kn=At.split(",");if(R.gSize=Kn[1]?Kn[1].length:0,R.lgSize=Kn[2]||Kn[1]?(Kn[2]||Kn[1]).length:0,Xe){const Dn=ge.length-R.posPre.length-R.posSuf.length,Mn=Xe.indexOf("#");R.negPre=Xe.substr(0,Mn).replace(/'/g,""),R.negSuf=Xe.substr(Mn+Dn).replace(/'/g,"")}else R.negPre=$+R.posPre,R.negSuf=R.posSuf;return R}(function Qn(O,$){return(0,p.cg1)(O)[p.wAp.NumberFormats][$]}($,Ie.Percent),mn($,$e.MinusSign)),$,$e.Group,$e.Decimal,R,!0).replace(new RegExp("%","g"),mn($,$e.PercentSign))}(function Ii(O){if("string"==typeof O&&!isNaN(Number(O)-parseFloat(O)))return Number(O);if("number"!=typeof O)throw new Error(`${O} is not a number`);return O}(R),ge,Z)}catch(Xe){throw xe()}}}return O.\u0275fac=function(R){return new(R||O)(p.Y36(p.soG,16))},O.\u0275pipe=p.Yjl({name:"percent",type:O,pure:!0}),O})();let vs=(()=>{class O{}return O.\u0275fac=function(R){return new(R||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({}),O})();const rs="browser";function Gr(O){return"server"===O}let hs=(()=>{class O{}return O.\u0275prov=(0,p.Yz7)({token:O,providedIn:"root",factory:()=>new Ui((0,p.LFG)(Oe),window)}),O})();class Ui{constructor($,R){this.document=$,this.window=R,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const R=function is(O,$){const R=O.getElementById($)||O.getElementsByName($)[0];if(R)return R;if("function"==typeof O.createTreeWalker&&O.body&&(O.body.createShadowRoot||O.body.attachShadow)){const Z=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ge=Z.currentNode;for(;ge;){const Xe=ge.shadowRoot;if(Xe){const tt=Xe.getElementById($)||Xe.querySelector(`[name="${$}"]`);if(tt)return tt}ge=Z.nextNode()}}return null}(this.document,$);R&&(this.scrollToElement(R),R.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const R=this.window.history;R&&R.scrollRestoration&&(R.scrollRestoration=$)}}scrollToElement($){const R=$.getBoundingClientRect(),Z=R.left+this.window.pageXOffset,ge=R.top+this.window.pageYOffset,Xe=this.offset();this.window.scrollTo(Z-Xe[0],ge-Xe[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=ri(this.window.history)||ri(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch($){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch($){return!1}}}function ri(O){return Object.getOwnPropertyDescriptor(O,"scrollRestoration")}class Ir{}},5e3:(Mt,We,k)=>{k.d(We,{$8M:()=>Eu,$Z:()=>Vm,AFp:()=>hE,ALo:()=>N0,AaK:()=>Re,BQk:()=>lf,CHM:()=>z,CRH:()=>G0,CZH:()=>yv,CqO:()=>jm,DdM:()=>A0,EJc:()=>vI,EpF:()=>Bm,F$t:()=>$m,F4k:()=>C_,FYo:()=>_0,FiY:()=>ho,G48:()=>BI,GfV:()=>v0,Gpc:()=>re,Hsn:()=>Xp,JOm:()=>nt,LFG:()=>an,LSH:()=>oi,Lbi:()=>gE,MAs:()=>tf,NdJ:()=>Yp,O4$:()=>Oi,OlP:()=>Xt,Oqu:()=>pf,PXZ:()=>PI,Q6J:()=>Kp,QGY:()=>Zp,Qsj:()=>yw,R0b:()=>fu,RDi:()=>ri,Rgc:()=>Ag,SBq:()=>Dg,Sil:()=>wI,Suo:()=>H0,TTD:()=>wi,TgZ:()=>qp,VKq:()=>S0,VLi:()=>xI,W1O:()=>q0,WLB:()=>M0,X6Q:()=>UI,XFs:()=>ht,Xpm:()=>zt,Y36:()=>zl,YKP:()=>D0,YNc:()=>Rm,Yjl:()=>Mr,Yz7:()=>lt,ZZ4:()=>xv,_Bn:()=>g0,_UZ:()=>uf,_Vd:()=>Ey,_c5:()=>nD,_uU:()=>Xm,aQg:()=>Rv,c2e:()=>yE,cJS:()=>en,cg1:()=>yf,dDg:()=>EE,deG:()=>Zc,dqk:()=>gn,eFA:()=>DE,ekj:()=>ff,g9A:()=>pE,h0i:()=>Cf,hGG:()=>rD,hij:()=>wa,iGM:()=>$0,ifc:()=>En,ip1:()=>dE,kL8:()=>$c,kcU:()=>ja,lG2:()=>Tn,lcZ:()=>F0,n5z:()=>tc,oAB:()=>Ve,oxw:()=>kd,q4F:()=>E0,qLn:()=>di,qOj:()=>Ap,qZA:()=>Qi,sBO:()=>jI,sIi:()=>Hl,s_b:()=>Dy,soG:()=>vv,tBr:()=>Ds,tb:()=>mE,tp0:()=>wo,uIk:()=>Jh,vHH:()=>Ze,vpe:()=>sl,wAp:()=>Rn,xp6:()=>Wf,ynx:()=>Pd,z2F:()=>Cv,zSh:()=>pp,zs3:()=>ga});var p=k(7579),K=k(727),Y=k(9751),we=k(6451),me=k(3099);function Ae(n){for(let r in n)if(n[r]===Ae)return r;throw Error("Could not find renamed property on target object.")}function Oe(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Re(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Re).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Fe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ue=Ae({__forward_ref__:Ae});function re(n){return n.__forward_ref__=re,n.toString=function(){return Re(this())},n}function _e(n){return He(n)?n():n}function He(n){return"function"==typeof n&&n.hasOwnProperty(ue)&&n.__forward_ref__===re}class Ze extends Error{constructor(r,s){super(function ct(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Be(n){return"string"==typeof n?n:null==n?"":String(n)}function ke(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Be(n)}function J(n,r){const s=r?` in ${r}`:"";throw new Ze(-201,`No provider for ${ke(n)} found${s}`)}function pt(n,r){null==n&&function bt(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function lt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function en(n){return{providers:n.providers||[],imports:n.imports||[]}}function mn(n){return Qn(n,Tr)||Qn(n,Ar)}function Qn(n,r){return n.hasOwnProperty(r)?n[r]:null}function rr(n){return n&&(n.hasOwnProperty(zn)||n.hasOwnProperty(jn))?n[zn]:null}const Tr=Ae({\u0275prov:Ae}),zn=Ae({\u0275inj:Ae}),Ar=Ae({ngInjectableDef:Ae}),jn=Ae({ngInjectorDef:Ae});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let Qt;function on(n){const r=Qt;return Qt=n,r}function Nr(n,r,s){const a=mn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&ht.Optional?null:void 0!==r?r:void J(Re(n),"Injector")}function ir(n){return{toString:n}.toString()}var Fr=(()=>((Fr=Fr||{})[Fr.OnPush=0]="OnPush",Fr[Fr.Default=1]="Default",Fr))(),En=(()=>{return(n=En||(En={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",En;var n})();const jt="undefined"!=typeof globalThis&&globalThis,rn="undefined"!=typeof window&&window,Sn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,gn=jt||"undefined"!=typeof global&&global||rn||Sn,Lr={},tn=[],Sr=Ae({\u0275cmp:Ae}),In=Ae({\u0275dir:Ae}),Pt=Ae({\u0275pipe:Ae}),ot=Ae({\u0275mod:Ae}),Ut=Ae({\u0275fac:Ae}),kt=Ae({__NG_ELEMENT_ID__:Ae});let Tt=0;function zt(n){return ir(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Fr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||tn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||En.Emulated,id:"c",styles:n.styles||tn,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.directives,h=n.features,_=n.pipes;return a.id+=Tt++,a.inputs=Kt(n.inputs,s),a.outputs=Kt(n.outputs),h&&h.forEach(I=>I(a)),a.directiveDefs=l?()=>("function"==typeof l?l():l).map(ie):null,a.pipeDefs=_?()=>("function"==typeof _?_():_).map(Ce):null,a})}function ie(n){return wn(n)||function nr(n){return n[In]||null}(n)}function Ce(n){return function nn(n){return n[Pt]||null}(n)}const qe={};function Ve(n){return ir(()=>{const r={type:n.type,bootstrap:n.bootstrap||tn,declarations:n.declarations||tn,imports:n.imports||tn,exports:n.exports||tn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(qe[n.id]=n.type),r})}function Kt(n,r){if(null==n)return Lr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const Tn=zt;function Mr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function wn(n){return n[Sr]||null}function Nn(n,r){const s=n[ot]||null;if(!s&&!0===r)throw new Error(`Type ${Re(n)} does not have '\u0275mod' property.`);return s}function $r(n){return Array.isArray(n)&&"object"==typeof n[1]}function ti(n){return Array.isArray(n)&&!0===n[1]}function xs(n){return 0!=(8&n.flags)}function ar(n){return 2==(2&n.flags)}function es(n){return 1==(1&n.flags)}function Qr(n){return null!==n.template}function ce(n){return 0!=(512&n[2])}function ni(n,r){return n.hasOwnProperty(Ut)?n[Ut]:null}class cs{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function wi(){return Ii}function Ii(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ns),ks}function ks(){const n=rs(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Lr)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Ns(n,r,s,a){const l=rs(n)||function Di(n,r){return n[vs]=r}(n,{previous:Lr,current:null}),h=l.current||(l.current={}),_=l.previous,I=this.declaredInputs[s],T=_[I];h[I]=new cs(T&&T.currentValue,r,_===Lr),n[a]=r}wi.ngInherit=!0;const vs="__ngSimpleChanges__";function rs(n){return n[vs]||null}let Ui;function ri(n){Ui=n}function Ir(n){return!!n.listen}const O={createRenderer:(n,r)=>function is(){return void 0!==Ui?Ui:"undefined"!=typeof document?document:void 0}()};function R(n){for(;Array.isArray(n);)n=n[0];return n}function Xe(n,r){return R(r[n])}function tt(n,r){return R(r[n.index])}function tr(n,r){return n.data[r]}function Kn(n,r){return n[r]}function Dn(n,r){const s=r[n];return $r(s)?s:s[0]}function Mn(n){return 4==(4&n[2])}function Dr(n){return 128==(128&n[2])}function fr(n,r){return null==r?null:n[r]}function Wi(n){n[18]=0}function ii(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const dn={lFrame:Ps(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function N(){return dn.bindingsEnabled}function m(){return dn.lFrame.lView}function D(){return dn.lFrame.tView}function z(n){return dn.lFrame.contextLView=n,n[8]}function ee(){let n=De();for(;null!==n&&64===n.type;)n=n.parent;return n}function De(){return dn.lFrame.currentTNode}function st(n,r){const s=dn.lFrame;s.currentTNode=n,s.isParent=r}function Ht(){return dn.lFrame.isParent}function Ot(){dn.lFrame.isParent=!1}function zr(){return dn.isInCheckNoChangesMode}function pr(n){dn.isInCheckNoChangesMode=n}function qn(){const n=dn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function gr(){return dn.lFrame.bindingIndex++}function li(n,r){const s=dn.lFrame;s.bindingIndex=s.bindingRootIndex=n,As(r)}function As(n){dn.lFrame.currentDirectiveIndex=n}function Ls(){return dn.lFrame.currentQueryIndex}function Mo(n){dn.lFrame.currentQueryIndex=n}function ta(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function na(n,r,s){if(s&ht.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&ht.Host||(l=ta(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=dn.lFrame=Ba();return a.currentTNode=r,a.lView=n,!0}function go(n){const r=Ba(),s=n[1];dn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Ba(){const n=dn.lFrame,r=null===n?null:n.child;return null===r?Ps(n):r}function Ps(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function ra(){const n=dn.lFrame;return dn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Vs=ra;function xo(){const n=ra();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function bi(){return dn.lFrame.selectedIndex}function Ro(n){dn.lFrame.selectedIndex=n}function ci(){const n=dn.lFrame;return tr(n.tView,n.selectedIndex)}function Oi(){dn.lFrame.currentNamespace="svg"}function ja(){!function mo(){dn.lFrame.currentNamespace=null}()}function ps(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:T,ngAfterViewChecked:U,ngOnDestroy:H}=h;_&&(n.contentHooks||(n.contentHooks=[])).push(-s,_),I&&((n.contentHooks||(n.contentHooks=[])).push(s,I),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,I)),T&&(n.viewHooks||(n.viewHooks=[])).push(-s,T),U&&((n.viewHooks||(n.viewHooks=[])).push(s,U),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,U)),null!=H&&(n.destroyHooks||(n.destroyHooks=[])).push(s,H)}}function Oo(n,r,s){Go(n,r,3,s)}function Po(n,r,s,a){(3&n[2])===s&&Go(n,r,s,a)}function mi(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Go(n,r,s,a){const h=null!=a?a:-1,_=r.length-1;let I=0;for(let T=void 0!==a?65535&n[18]:0;T<_;T++)if("number"==typeof r[T+1]){if(I=r[T],null!=a&&I>=a)break}else r[T]<0&&(n[18]+=65536),(I<h||-1==h)&&(Ha(n,s,r,T),n[18]=(4294901760&n[18])+T+2),T++}function Ha(n,r,s,a){const l=s[a]<0,h=s[a+1],I=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(I)}finally{}}}else try{h.call(I)}finally{}}class ko{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function sa(n,r,s){const a=Ir(n);let l=0;for(;l<s.length;){const h=s[l];if("number"==typeof h){if(0!==h)break;l++;const _=s[l++],I=s[l++],T=s[l++];a?n.setAttribute(r,I,T,_):r.setAttributeNS(_,I,T)}else{const _=h,I=s[++l];yo(_)?a&&n.setProperty(r,_,I):a?n.setAttribute(r,_,I):r.setAttribute(_,I),l++}}return l}function Ks(n){return 3===n||4===n||6===n}function yo(n){return 64===n.charCodeAt(0)}function oa(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||_o(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function _o(n,r,s,a,l){let h=0,_=n.length;if(-1===r)_=-1;else for(;h<n.length;){const I=n[h++];if("number"==typeof I){if(I===r){_=-1;break}if(I>r){_=h-1;break}}}for(;h<n.length;){const I=n[h];if("number"==typeof I)break;if(I===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==_&&(n.splice(_,0,r),h=_+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Ca(n){return-1!==n}function qr(n){return 32767&n}function Bs(n,r){let s=function _u(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Ga=!0;function C(n){const r=Ga;return Ga=n,r}let L=0;function se(n,r){const s=Ee(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,ve(a.data,n),ve(r,null),ve(a.blueprint,null));const l=wt(n,r),h=n.injectorIndex;if(Ca(l)){const _=qr(l),I=Bs(l,r),T=I[1].data;for(let U=0;U<8;U++)r[h+U]=I[_+U]|T[_+U]}return r[h+8]=l,h}function ve(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Ee(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function wt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){const h=l[1],_=h.type;if(a=2===_?h.declTNode:1===_?l[6]:null,null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function xn(n,r,s){!function q(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(kt)&&(a=s[kt]),null==a&&(a=s[kt]=L++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function Et(n,r,s){if(s&ht.Optional)return n;J(r,"NodeInjector")}function Ft(n,r,s,a){if(s&ht.Optional&&void 0===a&&(a=null),0==(s&(ht.Self|ht.Host))){const l=n[9],h=on(void 0);try{return l?l.get(r,a,s&ht.Optional):Nr(r,a,s&ht.Optional)}finally{on(h)}}return Et(a,r,s)}function ws(n,r,s,a=ht.Default,l){if(null!==n){const h=function qc(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(kt)?n[kt]:void 0;return"number"==typeof r?r>=0?255&r:et:r}(s);if("function"==typeof h){if(!na(r,n,a))return a&ht.Host?Et(l,s,a):Ft(r,s,a,l);try{const _=h(a);if(null!=_||a&ht.Optional)return _;J(s)}finally{Vs()}}else if("number"==typeof h){let _=null,I=Ee(n,r),T=-1,U=a&ht.Host?r[16][6]:null;for((-1===I||a&ht.SkipSelf)&&(T=-1===I?wt(n,r):r[I+8],-1!==T&&ec(a,!1)?(_=r[1],I=qr(T),r=Bs(T,r)):I=-1);-1!==I;){const H=r[1];if(vu(h,I,H.data)){const ne=mt(I,r,s,_,a,U);if(ne!==St)return ne}T=r[I+8],-1!==T&&ec(a,r[1].data[I+8]===U)&&vu(h,I,r)?(_=H,I=qr(T),r=Bs(T,r)):I=-1}}}return Ft(r,s,a,l)}const St={};function et(){return new vo(ee(),m())}function mt(n,r,s,a,l,h){const _=r[1],I=_.data[n+8],H=Xr(I,_,s,null==a?ar(I)&&Ga:a!=_&&0!=(3&I.type),l&ht.Host&&h===I);return null!==H?js(r,_,H,I):St}function Xr(n,r,s,a,l){const h=n.providerIndexes,_=r.data,I=1048575&h,T=n.directiveStart,H=h>>20,be=l?I+H:n.directiveEnd;for(let Ge=a?I:I+H;Ge<be;Ge++){const ut=_[Ge];if(Ge<T&&s===ut||Ge>=T&&ut.type===s)return Ge}if(l){const Ge=_[T];if(Ge&&Qr(Ge)&&Ge.type===s)return T}return null}function js(n,r,s,a){let l=n[s];const h=r.data;if(function zs(n){return n instanceof ko}(l)){const _=l;_.resolving&&function vt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ze(-200,`Circular dependency in DI detected for ${n}${s}`)}(ke(h[s]));const I=C(_.canSeeViewProviders);_.resolving=!0;const T=_.injectImpl?on(_.injectImpl):null;na(n,a,ht.Default);try{l=n[s]=_.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function so(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const _=Ii(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,_),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,_)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==T&&on(T),C(I),_.resolving=!1,Vs()}}return l}function vu(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function ec(n,r){return!(n&ht.Self||n&ht.Host&&r)}class vo{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return ws(this._tNode,this._lView,r,a,s)}}function tc(n){return ir(()=>{const r=n.prototype.constructor,s=r[Ut]||aa(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[Ut]||aa(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function aa(n){return He(n)?()=>{const r=aa(_e(n));return r&&r()}:ni(n)}function Eu(n){return function un(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Ks(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(ee(),n)}const ss="__parameters__";function uo(n,r,s){return ir(()=>{const a=function Ln(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const _=new l(...h);return I.annotation=_,I;function I(T,U,H){const ne=T.hasOwnProperty(ss)?T[ss]:Object.defineProperty(T,ss,{value:[]})[ss];for(;ne.length<=H;)ne.push(null);return(ne[H]=ne[H]||[]).push(_),T}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Xt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=lt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zc=new Xt("AnalyzeForEntryComponents");function os(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),os(a,r)):r!==n&&r.push(a)}return r}function Hs(n,r){n.forEach(s=>Array.isArray(s)?Hs(s,r):r(s))}function Ta(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Wo(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Ki(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function qi(n,r,s){let a=Eo(n,r);return a>=0?n[1|a]=s:(a=~a,function wu(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function lo(n,r){const s=Eo(n,r);if(s>=0)return n[1|s]}function Eo(n,r){return function zo(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),_=n[h<<s];if(r===_)return h<<s;_>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Ko={},qa="__NG_DI_FLAG__",cl="ngTempTokenPath",P=/\n/gm,ae="__source",Me=Ae({provide:String,useValue:Ae});let Qe;function Dt(n){const r=Qe;return Qe=n,r}function Yt(n,r=ht.Default){if(void 0===Qe)throw new Ze(203,"");return null===Qe?Nr(n,void 0,r):Qe.get(n,r&ht.Optional?null:void 0,r)}function an(n,r=ht.Default){return(function vn(){return Qt}()||Yt)(_e(n),r)}const ur=an;function Vn(n){const r=[];for(let s=0;s<n.length;s++){const a=_e(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ze(900,"");let l,h=ht.Default;for(let _=0;_<a.length;_++){const I=a[_],T=$i(I);"number"==typeof T?-1===T?l=I.token:h|=T:l=I}r.push(an(l,h))}else r.push(an(a))}return r}function Jr(n,r){return n[qa]=r,n.prototype[qa]=r,n}function $i(n){return n[qa]}const Ds=Jr(uo("Inject",n=>({token:n})),-1),ho=Jr(uo("Optional"),8),wo=Jr(uo("SkipSelf"),4);class Tu{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function qo(n){return n instanceof Tu?n.changingThisBreaksApplicationSecurity:n}const Ma=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,nh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Jn=(()=>((Jn=Jn||{})[Jn.NONE=0]="NONE",Jn[Jn.HTML=1]="HTML",Jn[Jn.STYLE=2]="STYLE",Jn[Jn.SCRIPT=3]="SCRIPT",Jn[Jn.URL=4]="URL",Jn[Jn.RESOURCE_URL=5]="RESOURCE_URL",Jn))();function oi(n){const r=function bl(){const n=m();return n&&n[12]}();return r?r.sanitize(Jn.URL,n)||"":function Au(n,r){const s=function ed(n){return n instanceof Tu&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?qo(n):function Ja(n){return(n=String(n)).match(Ma)||n.match(nh)?n:"unsafe:"+n}(Be(n))}const ru="__ngContext__";function as(n,r){n[ru]=r}function fc(n){const r=function Zo(n){return n[ru]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Ml(n){return n.ngOriginalError}function Pu(n,...r){n.error(...r)}class di{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function ch(n){return n&&n.ngErrorLogger||Pu}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ml(r);for(;s&&Ml(s);)s=Ml(s);return s||null}}const Nf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(gn))();function f(n){return n instanceof Function?n():n}var nt=(()=>((nt=nt||{})[nt.Important=1]="Important",nt[nt.DashCase=2]="DashCase",nt))();function ln(n,r){return undefined(n,r)}function ki(n){const r=n[3];return ti(r)?r[3]:r}function Ol(n){return mc(n[13])}function Ra(n){return mc(n[4])}function mc(n){for(;null!==n&&!ti(n);)n=n[4];return n}function Oa(n,r,s,a,l){if(null!=a){let h,_=!1;ti(a)?h=a:$r(a)&&(_=!0,a=a[0]);const I=R(a);0===n&&null!==s?null==l?it(r,s,I):Nu(r,s,I,l||null,!0):1===n&&null!==s?Nu(r,s,I,l||null,!0):2===n?function vh(n,r,s){const a=gh(n,r);a&&function da(n,r,s,a){Ir(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,I,_):3===n&&r.destroyNode(I),null!=h&&function Eh(n,r,s,a,l){const h=s[7];h!==R(s)&&Oa(r,n,a,h,l);for(let I=10;I<s.length;I++){const T=s[I];vc(T[1],T,n,r,a,h)}}(r,n,h,s,l)}}function _c(n,r,s){if(Ir(n))return n.createElement(r,s);{const a=null!==s?function hs(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Pg(n,r){const s=n[9],a=s.indexOf(r),l=r[3];1024&r[2]&&(r[2]&=-1025,ii(l,-1)),s.splice(a,1)}function Uf(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&Pg(l,a),r>0&&(n[s-1][4]=a[4]);const h=Wo(n,10+r);!function Lf(n,r){vc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const _=h[19];null!==_&&_.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function kg(n,r){if(!(256&r[2])){const s=r[11];Ir(s)&&s.destroyNode&&vc(n,r,s,3,null,null),function My(n){let r=n[13];if(!r)return ph(n[1],n);for(;r;){let s=null;if($r(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)$r(r)&&ph(r[1],r),r=r[3];null===r&&(r=n),$r(r)&&ph(r[1],r),s=r&&r[4]}r=s}}(r)}}function ph(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Ng(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof ko)){const h=s[a+1];if(Array.isArray(h))for(let _=0;_<h.length;_+=2){const I=l[h[_]],T=h[_+1];try{T.call(I)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function Oy(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const _=s[h+1],I="function"==typeof _?_(r):R(r[_]),T=a[l=s[h+2]],U=s[h+3];"boolean"==typeof U?I.removeEventListener(s[h],T,U):U>=0?a[l=U]():a[l=-U].unsubscribe(),h+=2}else{const _=a[l=s[h+1]];s[h].call(_)}if(null!==a){for(let h=l+1;h<a.length;h++)a[h]();r[7]=null}}(n,r),1===r[1].type&&Ir(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&ti(r[3])){s!==r[3]&&Pg(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function Fg(n,r,s){return function Bf(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===En.None||l===En.Emulated)return null}return tt(a,s)}(n,r.parent,s)}function Nu(n,r,s,a,l){Ir(n)?n.insertBefore(r,s,a,l):r.insertBefore(s,a,l)}function it(n,r,s){Ir(n)?n.appendChild(r,s):r.appendChild(s)}function cd(n,r,s,a,l){null!==a?Nu(n,r,s,a,l):it(n,r,s)}function gh(n,r){return Ir(n)?n.parentNode(r):r.parentNode}function Fu(n,r,s){return Lu(n,r,s)}let Lu=function Lg(n,r,s){return 40&n.type?tt(n,s):null};function hd(n,r,s,a){const l=Fg(n,a,r),h=r[11],I=Fu(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let T=0;T<s.length;T++)cd(h,l,s[T],I,!1);else cd(h,l,s,I,!1)}function ys(n,r){if(null!==r){const s=r.type;if(3&s)return tt(r,n);if(4&s)return fd(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return ys(n,a);{const l=n[r.index];return ti(l)?fd(-1,l):R(l)}}if(32&s)return ln(r,n)()||R(n[r.index]);{const a=_h(n,r);return null!==a?Array.isArray(a)?a[0]:ys(ki(n[16]),a):ys(n,r.next)}}return null}function _h(n,r){return null!==r?n[16][6].projection[r.projection]:null}function fd(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return ys(a,l)}return r[7]}function Pa(n,r,s,a,l,h,_){for(;null!=s;){const I=a[s.index],T=s.type;if(_&&0===r&&(I&&as(R(I),a),s.flags|=4),64!=(64&s.flags))if(8&T)Pa(n,r,s.child,a,l,h,!1),Oa(r,n,l,I,h);else if(32&T){const U=ln(s,a);let H;for(;H=U();)Oa(r,n,l,H,h);Oa(r,n,l,I,h)}else 16&T?jf(n,r,a,s,l,h):Oa(r,n,l,I,h);s=_?s.projectionNext:s.next}}function vc(n,r,s,a,l,h){Pa(s,a,n.firstChild,r,l,h,!1)}function jf(n,r,s,a,l,h){const _=s[16],T=_[6].projection[a.projection];if(Array.isArray(T))for(let U=0;U<T.length;U++)Oa(r,n,l,T[U],h);else Pa(n,r,T,_[3],l,h,!0)}function Vu(n,r,s){Ir(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Uu(n,r,s){Ir(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function Ec(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const wh="ng-template";function $f(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==Ec(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Hf(n){return 4===n.type&&n.value!==wh}function Ny(n,r,s){return r===(4!==n.type||s?n.value:wh)}function Vg(n,r,s){let a=4;const l=n.attrs||[],h=function Fy(n){for(let r=0;r<n.length;r++)if(Ks(n[r]))return r;return n.length}(l);let _=!1;for(let I=0;I<r.length;I++){const T=r[I];if("number"!=typeof T){if(!_)if(4&a){if(a=2|1&a,""!==T&&!Ny(n,T,s)||""===T&&1===r.length){if(Qo(a))return!1;_=!0}}else{const U=8&a?T:r[++I];if(8&a&&null!==n.attrs){if(!$f(n.attrs,U,s)){if(Qo(a))return!1;_=!0}continue}const ne=Gf(8&a?"class":T,l,Hf(n),s);if(-1===ne){if(Qo(a))return!1;_=!0;continue}if(""!==U){let be;be=ne>h?"":l[ne+1].toLowerCase();const Ge=8&a?be:null;if(Ge&&-1!==Ec(Ge,U,0)||2&a&&U!==be){if(Qo(a))return!1;_=!0}}}}else{if(!_&&!Qo(a)&&!Qo(T))return!1;if(_&&Qo(T))continue;_=!1,a=T|1&a}}return Qo(a)||_}function Qo(n){return 0==(1&n)}function Gf(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const _=r[l];if(_===n)return l;if(3===_||6===_)h=!0;else{if(1===_||2===_){let I=r[++l];for(;"string"==typeof I;)I=r[++l];continue}if(4===_)break;if(0===_){l+=4;continue}}l+=h?1:2}return-1}return function Ug(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function wc(n,r,s=!1){for(let a=0;a<r.length;a++)if(Vg(n,r[a],s))return!0;return!1}function Ly(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let l=0;l<n.length;l++)if(n[l]!==a[l])continue e;return!0}}return!1}function Bg(n,r){return n?":not("+r.trim()+")":r}function Vy(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let _=n[s];if("string"==typeof _)if(2&a){const I=n[++s];l+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&a?l+="."+_:4&a&&(l+=" "+_);else""!==l&&!Qo(_)&&(r+=Bg(h,l),l=""),a=_,h=h||!Qo(a);s++}return""!==l&&(r+=Bg(h,l)),r}const kn={};function Wf(n){jg(D(),m(),bi()+n,zr())}function jg(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&Oo(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Po(r,h,0,s)}Ro(s)}function Ic(n,r){return n<<17|r<<2}function Js(n){return n>>17&32767}function Nl(n){return 2|n}function Xo(n){return(131068&n)>>2}function Dc(n,r){return-131069&n|r<<2}function eo(n){return 1|n}function Qg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const _=n.data[h];Mo(l),_.contentQueries(2,r[h],h)}}}function Na(n,r,s,a,l,h,_,I,T,U){const H=r.blueprint.slice();return H[0]=l,H[2]=140|a,Wi(H),H[3]=H[15]=n,H[8]=s,H[10]=_||n&&n[10],H[11]=I||n&&n[11],H[12]=T||n&&n[12]||null,H[9]=U||n&&n[9]||null,H[6]=h,H[16]=2==r.type?n[16]:H,H}function fa(n,r,s,a,l){let h=n.data[r];if(null===h)h=function yd(n,r,s,a,l){const h=De(),_=Ht(),T=n.data[r]=function qy(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=T),null!==h&&(_?null==h.child&&null!==T.parent&&(h.child=T):null===h.next&&(h.next=T)),T}(n,r,s,a,l),function Bi(){return dn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const _=function Ke(){const n=dn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===_?-1:_.injectorIndex}return st(h,!0),h}function au(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Tc(n,r,s){go(r);try{const a=n.viewQuery;null!==a&&dp(1,a,s);const l=n.template;null!==l&&em(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Qg(n,r),n.staticViewQueries&&dp(2,n.viewQuery,s);const h=n.components;null!==h&&function Ky(n,r){for(let s=0;s<r.length;s++)up(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,xo()}}function Vl(n,r,s,a){const l=r[2];if(256==(256&l))return;go(r);const h=zr();try{Wi(r),function Ri(n){return dn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&em(n,r,s,2,a);const _=3==(3&l);if(!h)if(_){const U=n.preOrderCheckHooks;null!==U&&Oo(r,U,null)}else{const U=n.preOrderHooks;null!==U&&Po(r,U,0,null),mi(r,0)}if(function ap(n){for(let r=Ol(n);null!==r;r=Ra(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(1024&l[2])&&ii(h,1),l[2]|=1024}}}(r),function Ac(n){for(let r=Ol(n);null!==r;r=Ra(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];Dr(a)&&Vl(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Qg(n,r),!h)if(_){const U=n.contentCheckHooks;null!==U&&Oo(r,U)}else{const U=n.contentHooks;null!==U&&Po(r,U,1),mi(r,1)}!function Yg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Ro(~l);else{const h=l,_=s[++a],I=s[++a];li(_,h),I(2,r[h])}}}finally{Ro(-1)}}(n,r);const I=n.components;null!==I&&function Xg(n,r){for(let s=0;s<r.length;s++)Vh(n,r[s])}(r,I);const T=n.viewQuery;if(null!==T&&dp(2,T,a),!h)if(_){const U=n.viewCheckHooks;null!==U&&Oo(r,U)}else{const U=n.viewHooks;null!==U&&Po(r,U,2),mi(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),h||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,ii(r[3],-1))}finally{xo()}}function Jg(n,r,s,a){const l=r[10],h=!zr(),_=Mn(r);try{h&&!_&&l.begin&&l.begin(),_&&Tc(n,r,a),Vl(n,r,s,a)}finally{h&&!_&&l.end&&l.end()}}function em(n,r,s,a,l){const h=bi(),_=2&a;try{Ro(-1),_&&r.length>20&&jg(n,r,20,zr()),s(a,l)}finally{Ro(h)}}function Rh(n,r,s){if(xs(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const _=n.data[h];_.contentQueries&&_.contentQueries(1,s[h],h)}}}function Qf(n,r,s){!N()||(function am(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||se(s,r),as(a,r);const _=s.initialInputs;for(let I=l;I<h;I++){const T=n.data[I],U=Qr(T);U&&Jy(r,s,T);const H=js(r,n,I,s);as(H,r),null!==_&&e_(0,I-l,H,T,0,_),U&&(Dn(s.index,r)[8]=H)}}(n,r,s,tt(s,r)),128==(128&s.flags)&&function Qy(n,r,s){const a=s.directiveStart,l=s.directiveEnd,_=s.index,I=function Or(){return dn.lFrame.currentDirectiveIndex}();try{Ro(_);for(let T=a;T<l;T++){const U=n.data[T],H=r[T];As(T),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&um(U,H)}}finally{Ro(-1),As(I)}}(n,r,s))}function _d(n,r,s=tt){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const _=a[h+1],I=-1===_?s(r,n):n[_];n[l++]=I}}}function tm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Oh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Oh(n,r,s,a,l,h,_,I,T,U){const H=20+a,ne=H+l,be=function Xf(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:kn);return s}(H,ne),Ge="function"==typeof U?U():U;return be[1]={type:n,blueprint:be,template:s,queries:null,viewQuery:I,declTNode:r,data:be.slice().fill(null,H),bindingStartIndex:H,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:T,consts:Ge,incompleteFirstPass:!1}}function rm(n,r,s,a){const l=$h(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&hp(n).push(a,l.length-1))}function im(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function Ed(n,r,s,a){let l=!1;if(N()){const h=function Xy(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const _=a[h];wc(s,_.selectors,!1)&&(l||(l=[]),xn(se(s,r),n,_.type),Qr(_)?(ip(n,s),l.unshift(_)):l.push(_))}return l}(n,r,s),_=null===a?null:{"":-1};if(null!==h){l=!0,Nh(s,n.data.length,h.length);for(let H=0;H<h.length;H++){const ne=h[H];ne.providersResolver&&ne.providersResolver(ne)}let I=!1,T=!1,U=au(n,r,h.length,null);for(let H=0;H<h.length;H++){const ne=h[H];s.mergedAttrs=oa(s.mergedAttrs,ne.hostAttrs),sp(n,s,r,U,ne),wd(U,ne,_),null!==ne.contentQueries&&(s.flags|=8),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(s.flags|=128);const be=ne.type.prototype;!I&&(be.ngOnChanges||be.ngOnInit||be.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),I=!0),!T&&(be.ngOnChanges||be.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),T=!0),U++}!function Zy(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,_=[];let I=null,T=null;for(let U=r.directiveStart;U<a;U++){const H=l[U],ne=H.inputs,be=null===h||Hf(r)?null:t_(ne,h);_.push(be),I=im(ne,U,I),T=im(H.outputs,U,T)}null!==I&&(I.hasOwnProperty("class")&&(r.flags|=16),I.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=_,r.inputs=I,r.outputs=T}(n,s)}_&&function kh(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new Ze(-301,!1);a.push(r[l],h)}}}(s,a,_)}return s.mergedAttrs=oa(s.mergedAttrs,s.attrs),l}function rp(n,r,s,a,l,h){const _=h.hostBindings;if(_){let I=n.hostBindingOpCodes;null===I&&(I=n.hostBindingOpCodes=[]);const T=~r.index;(function Yy(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(I)!=T&&I.push(T),I.push(a,l,_)}}function um(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function ip(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function wd(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Qr(r)&&(s[""]=n)}}function Nh(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function sp(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=ni(l.type)),_=new ko(h,Qr(l),null);n.blueprint[a]=_,s[a]=_,rp(n,r,0,a,au(n,s,l.hostVars,kn),l)}function Jy(n,r,s){const a=tt(r,n),l=tm(s),h=n[10],_=Sc(n,Na(n,l,null,s.onPush?64:16,a,r,h,h.createRenderer(a,s),null,null));n[r.index]=_}function Fa(n,r,s,a,l,h){const _=tt(n,r);!function op(n,r,s,a,l,h,_){if(null==h)Ir(n)?n.removeAttribute(r,l,s):r.removeAttribute(l);else{const I=null==_?Be(h):_(h,a||"",l);Ir(n)?n.setAttribute(r,l,I,s):s?r.setAttributeNS(s,l,I):r.setAttribute(l,I)}}(r[11],_,h,n.value,s,a,l)}function e_(n,r,s,a,l,h){const _=h[r];if(null!==_){const I=a.setInput;for(let T=0;T<_.length;){const U=_[T++],H=_[T++],ne=_[T++];null!==I?a.setInput(s,ne,U,H):s[H]=ne}}}function t_(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Lh(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Vh(n,r){const s=Dn(r,n);if(Dr(s)){const a=s[1];80&s[2]?Vl(a,s,a.template,s[8]):s[5]>0&&Ul(s)}}function Ul(n){for(let a=Ol(n);null!==a;a=Ra(a))for(let l=10;l<a.length;l++){const h=a[l];if(1024&h[2]){const _=h[1];Vl(_,h,_.template,h[8])}else h[5]>0&&Ul(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=Dn(s[a],n);Dr(l)&&l[5]>0&&Ul(l)}}function up(n,r){const s=Dn(r,n),a=s[1];(function lm(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Tc(a,s,s[8])}function Sc(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Id(n){for(;n;){n[2]|=64;const r=ki(n);if(ce(n)&&!r)return n;n=r}return null}function lp(n,r,s){const a=r[10];a.begin&&a.begin();try{Vl(n,r,n.template,s)}catch(l){throw Hh(r,l),l}finally{a.end&&a.end()}}function Bh(n){!function Uh(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=fc(s),l=a[1];Jg(l,a,l.template,s)}}(n[8])}function dp(n,r,s){Mo(0),r(n,s)}const jh=(()=>Promise.resolve(null))();function $h(n){return n[7]||(n[7]=[])}function hp(n){return n.cleanup||(n.cleanup=[])}function Hh(n,r){const s=n[9],a=s?s.get(di,null):null;a&&a.handleError(r)}function dm(n,r,s,a,l){for(let h=0;h<s.length;){const _=s[h++],I=s[h++],T=r[_],U=n.data[_];null!==U.setInput?U.setInput(T,l,a,I):T[I]=l}}function uu(n,r,s){const a=Xe(r,n);!function ad(n,r,s){Ir(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Dd(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let _=0;_<r.length;_++){const I=r[_];"number"==typeof I?h=I:1==h?l=Fe(l,I):2==h&&(a=Fe(a,I+": "+r[++_]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}const fp=new Xt("INJECTOR",-1);class Gh{get(r,s=Ko){if(s===Ko){const a=new Error(`NullInjectorError: No provider for ${Re(r)}!`);throw a.name="NullInjectorError",a}return s}}const pp=new Xt("Set Injector scope."),jl={},i_={};let Cd;function gp(){return void 0===Cd&&(Cd=new Gh),Cd}function Wh(n,r=null,s=null,a){const l=zh(n,r,s,a);return l._resolveInjectorDefTypes(),l}function zh(n,r=null,s=null,a){return new mp(n,s,r||gp(),a)}class mp{constructor(r,s,a,l=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];s&&Hs(s,I=>this.processProvider(I,r,s)),Hs([r],I=>this.processInjectorType(I,[],h)),this.records.set(fp,pa(void 0,this));const _=this.records.get(pp);this.scope=null!=_?_.value:null,this.source=l||("object"==typeof r?null:Re(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=Ko,a=ht.Default){this.assertNotDestroyed();const l=Dt(this),h=on(void 0);try{if(!(a&ht.SkipSelf)){let I=this.records.get(r);if(void 0===I){const T=function Ip(n){return"function"==typeof n||"object"==typeof n&&n instanceof Xt}(r)&&mn(r);I=T&&this.injectableDefInScope(T)?pa(Gu(r),jl):null,this.records.set(r,I)}if(null!=I)return this.hydrate(r,I)}return(a&ht.Self?gp():this.parent).get(r,s=a&ht.Optional&&s===Ko?null:s)}catch(_){if("NullInjectorError"===_.name){if((_[cl]=_[cl]||[]).unshift(Re(r)),l)throw _;return function Sa(n,r,s,a){const l=n[cl];throw r[ae]&&l.unshift(r[ae]),n.message=function Za(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let l=Re(r);if(Array.isArray(r))l=r.map(Re).join(" -> ");else if("object"==typeof r){let h=[];for(let _ in r)if(r.hasOwnProperty(_)){let I=r[_];h.push(_+":"+("string"==typeof I?JSON.stringify(I):Re(I)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(P,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[cl]=null,n}(_,r,"R3InjectorError",this.source)}throw _}finally{on(h),Dt(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,l)=>r.push(Re(l))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ze(205,!1)}processInjectorType(r,s,a){if(!(r=_e(r)))return!1;let l=rr(r);const h=null==l&&r.ngModule||void 0,_=void 0===h?r:h,I=-1!==a.indexOf(_);if(void 0!==h&&(l=rr(h)),null==l)return!1;if(null!=l.imports&&!I){let H;a.push(_);try{Hs(l.imports,ne=>{this.processInjectorType(ne,s,a)&&(void 0===H&&(H=[]),H.push(ne))})}finally{}if(void 0!==H)for(let ne=0;ne<H.length;ne++){const{ngModule:be,providers:Ge}=H[ne];Hs(Ge,ut=>this.processProvider(ut,be,Ge||tn))}}this.injectorDefTypes.add(_);const T=ni(_)||(()=>new _);this.records.set(_,pa(T,jl));const U=l.providers;if(null!=U&&!I){const H=r;Hs(U,ne=>this.processProvider(ne,H,U))}return void 0!==h&&void 0!==r.providers}processProvider(r,s,a){let l=xc(r=_e(r))?r:_e(r&&r.provide);const h=function yp(n,r,s){return _p(n)?pa(void 0,n.useValue):pa($l(n),jl)}(r);if(xc(r)||!0!==r.multi)this.records.get(l);else{let _=this.records.get(l);_||(_=pa(void 0,jl,!0),_.factory=()=>Vn(_.multi),this.records.set(l,_)),l=r,_.multi.push(r)}this.records.set(l,h)}hydrate(r,s){return s.value===jl&&(s.value=i_,s.value=s.factory()),"object"==typeof s.value&&s.value&&function wp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=_e(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Gu(n){const r=mn(n),s=null!==r?r.factory:ni(n);if(null!==s)return s;if(n instanceof Xt)throw new Ze(204,!1);if(n instanceof Function)return function Wu(n){const r=n.length;if(r>0)throw Ki(r,"?"),new Ze(204,!1);const s=function Bn(n){const r=n&&(n[Tr]||n[Ar]);if(r){const s=function cr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ze(204,!1)}function $l(n,r,s){let a;if(xc(n)){const l=_e(n);return ni(l)||Gu(l)}if(_p(n))a=()=>_e(n.useValue);else if(function s_(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Vn(n.deps||[]));else if(function Mc(n){return!(!n||!n.useExisting)}(n))a=()=>an(_e(n.useExisting));else{const l=_e(n&&(n.useClass||n.provide));if(!function Ep(n){return!!n.deps}(n))return ni(l)||Gu(l);a=()=>new l(...Vn(n.deps))}return a}function pa(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function _p(n){return null!==n&&"object"==typeof n&&Me in n}function xc(n){return"function"==typeof n}let ga=(()=>{class n{static create(s,a){var l;if(Array.isArray(s))return Wh({name:""},a,s,"");{const h=null!==(l=s.name)&&void 0!==l?l:"";return Wh({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=Ko,n.NULL=new Gh,n.\u0275prov=lt({token:n,providedIn:"any",factory:()=>an(fp)}),n.__NG_ELEMENT_ID__=-1,n})();function Tp(n,r){ps(fc(n)[1],ee())}function Ap(n){let r=function Qh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(Qr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ze(903,"");l=r.\u0275dir}if(l){if(s){a.push(l);const _=n;_.inputs=Td(n.inputs),_.declaredInputs=Td(n.declaredInputs),_.outputs=Td(n.outputs);const I=l.hostBindings;I&&Tm(n,I);const T=l.viewQuery,U=l.contentQueries;if(T&&Mp(n,T),U&&Rc(n,U),Oe(n.inputs,l.inputs),Oe(n.declaredInputs,l.declaredInputs),Oe(n.outputs,l.outputs),Qr(l)&&l.data.animation){const H=n.data;H.animation=(H.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let _=0;_<h.length;_++){const I=h[_];I&&I.ngInherit&&I(n),I===Ap&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Sp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=oa(l.hostAttrs,s=oa(s,l.hostAttrs))}}(a)}function Td(n){return n===Lr?{}:n===tn?[]:n}function Mp(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Rc(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function Tm(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let ea=null;function zu(){if(!ea){const n=gn.Symbol;if(n&&n.iterator)ea=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(ea=a)}}}return ea}function Hl(n){return!!Ad(n)&&(Array.isArray(n)||!(n instanceof Map)&&zu()in n)}function Ad(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function La(n,r,s){return n[r]=s}function to(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Jh(n,r,s,a){const l=m();return to(l,gr(),r)&&(D(),Fa(ci(),l,n,r,s,a)),Jh}function Rm(n,r,s,a,l,h,_,I){const T=m(),U=D(),H=n+20,ne=U.firstCreatePass?function g_(n,r,s,a,l,h,_,I,T){const U=r.consts,H=fa(r,n,4,_||null,fr(U,I));Ed(r,s,H,fr(U,T)),ps(r,H);const ne=H.tViews=Oh(2,H,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U);return null!==r.queries&&(r.queries.template(r,H),ne.queries=r.queries.embeddedTView(H)),H}(H,U,T,r,s,a,l,h,_):U.data[H];st(ne,!1);const be=T[11].createComment("");hd(U,T,be,ne),as(be,T),Sc(T,T[H]=Lh(be,T,be,ne)),es(ne)&&Qf(U,T,ne),null!=_&&_d(T,ne,I)}function tf(n){return Kn(function Wn(){return dn.lFrame.contextLView}(),20+n)}function zl(n,r=ht.Default){const s=m();return null===s?an(n,r):ws(ee(),s,_e(n),r)}function Vm(){throw new Error("invalid")}function Kp(n,r,s){const a=m();return to(a,gr(),r)&&function bo(n,r,s,a,l,h,_,I){const T=tt(r,s);let H,U=r.inputs;!I&&null!=U&&(H=U[a])?(dm(n,s,H,a,l),ar(r)&&function sm(n,r){const s=Dn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function Jf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=_?_(l,r.value||"",a):l,Ir(h)?h.setProperty(T,a,l):yo(a)||(T.setProperty?T.setProperty(a,l):T[a]=l))}(D(),ci(),a,n,r,a[11],s,!1),Kp}function Ai(n,r,s,a,l){const _=l?"class":"style";dm(n,s,r.inputs[_],_,a)}function qp(n,r,s,a){const l=m(),h=D(),_=20+n,I=l[11],T=l[_]=_c(I,r,function $a(){return dn.lFrame.currentNamespace}()),U=h.firstCreatePass?function Jv(n,r,s,a,l,h,_){const I=r.consts,U=fa(r,n,2,l,fr(I,h));return Ed(r,s,U,fr(I,_)),null!==U.attrs&&Dd(U,U.attrs,!1),null!==U.mergedAttrs&&Dd(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(_,h,l,0,r,s,a):h.data[_];st(U,!0);const H=U.mergedAttrs;null!==H&&sa(I,T,H);const ne=U.classes;null!==ne&&Uu(I,T,ne);const be=U.styles;return null!==be&&Vu(I,T,be),64!=(64&U.flags)&&hd(h,l,T,U),0===function zi(){return dn.lFrame.elementDepthCount}()&&as(T,l),function fs(){dn.lFrame.elementDepthCount++}(),es(U)&&(Qf(h,l,U),Rh(h,U,l)),null!==a&&_d(l,U),qp}function Qi(){let n=ee();Ht()?Ot():(n=n.parent,st(n,!1));const r=n;!function Os(){dn.lFrame.elementDepthCount--}();const s=D();return s.firstCreatePass&&(ps(s,n),xs(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function gu(n){return 0!=(16&n.flags)}(r)&&Ai(s,r,m(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function mu(n){return 0!=(32&n.flags)}(r)&&Ai(s,r,m(),r.stylesWithoutHost,!1),Qi}function uf(n,r,s,a){return qp(n,r,s,a),Qi(),uf}function Pd(n,r,s){const a=m(),l=D(),h=n+20,_=l.firstCreatePass?function D_(n,r,s,a,l){const h=r.consts,_=fr(h,a),I=fa(r,n,8,"ng-container",_);return null!==_&&Dd(I,_,!0),Ed(r,s,I,fr(h,l)),null!==r.queries&&r.queries.elementStart(r,I),I}(h,l,a,r,s):l.data[h];st(_,!0);const I=a[h]=a[11].createComment("");return hd(l,a,I,_),as(I,a),es(_)&&(Qf(l,a,_),Rh(l,_,a)),null!=s&&_d(a,_),Pd}function lf(){let n=ee();const r=D();return Ht()?Ot():(n=n.parent,st(n,!1)),r.firstCreatePass&&(ps(r,n),xs(n)&&r.queries.elementEnd(n)),lf}function Bm(){return m()}function Zp(n){return!!n&&"function"==typeof n.then}function C_(n){return!!n&&"function"==typeof n.subscribe}const jm=C_;function Yp(n,r,s,a){const l=m(),h=D(),_=ee();return function b_(n,r,s,a,l,h,_,I){const T=es(a),H=n.firstCreatePass&&hp(n),ne=r[8],be=$h(r);let Ge=!0;if(3&a.type||I){const Gt=tt(a,r),fn=I?I(Gt):Gt,yt=be.length,An=I?kr=>I(R(kr[a.index])):a.index;if(Ir(s)){let kr=null;if(!I&&T&&(kr=function cu(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const _=l[h];if(_===s&&l[h+1]===a){const I=r[7],T=l[h+2];return I.length>T?I[T]:null}"string"==typeof _&&(h+=2)}return null}(n,r,l,a.index)),null!==kr)(kr.__ngLastListenerFn__||kr).__ngNextListenerFn__=h,kr.__ngLastListenerFn__=h,Ge=!1;else{h=du(a,r,ne,h,!1);const fi=s.listen(fn,l,h);be.push(h,fi),H&&H.push(l,An,yt,yt+1)}}else h=du(a,r,ne,h,!0),fn.addEventListener(l,h,_),be.push(h),H&&H.push(l,An,yt,_)}else h=du(a,r,ne,h,!1);const ut=a.outputs;let xt;if(Ge&&null!==ut&&(xt=ut[l])){const Gt=xt.length;if(Gt)for(let fn=0;fn<Gt;fn+=2){const Ia=r[xt[fn]][xt[fn+1]].subscribe(h),Gd=be.length;be.push(h,Ia),H&&H.push(l,a.index,Gd,-(Gd+1))}}}(h,l,l[11],_,n,r,!!s,a),Yp}function ya(n,r,s,a){try{return!1!==s(a)}catch(l){return Hh(n,l),!1}}function du(n,r,s,a,l){return function h(_){if(_===Function)return a;const I=2&n.flags?Dn(n.index,r):r;0==(32&r[2])&&Id(I);let T=ya(r,0,a,_),U=h.__ngNextListenerFn__;for(;U;)T=ya(r,0,U,_)&&T,U=U.__ngNextListenerFn__;return l&&!1===T&&(_.preventDefault(),_.returnValue=!1),T}}function kd(n=1){return function ol(n){return(dn.lFrame.contextLView=function ia(n,r){for(;n>0;)r=r[15],n--;return r}(n,dn.lFrame.contextLView))[8]}(n)}function T_(n,r){let s=null;const a=function kl(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let l=0;l<r.length;l++){const h=r[l];if("*"!==h){if(null===a?wc(n,h,!0):Ly(a,h))return l}else s=l}return s}function $m(n){const r=m()[16][6];if(!r.projection){const a=r.projection=Ki(n?n.length:1,null),l=a.slice();let h=r.child;for(;null!==h;){const _=n?T_(h,n):0;null!==_&&(l[_]?l[_].projectionNext=h:a[_]=h,l[_]=h),h=h.next}}}function Xp(n,r=0,s){const a=m(),l=D(),h=fa(l,20+n,16,null,s||null);null===h.projection&&(h.projection=r),Ot(),64!=(64&h.flags)&&function Py(n,r,s){jf(r[11],0,r,s,Fg(n,s,r),Fu(s.parent||r[6],s,r))}(l,a,h)}function rg(n,r,s,a,l){const h=n[s+1],_=null===r;let I=a?Js(h):Xo(h),T=!1;for(;0!==I&&(!1===T||_);){const H=n[I+1];Kl(n[I],r)&&(T=!0,n[I+1]=a?eo(H):Nl(H)),I=a?Js(H):Xo(H)}T&&(n[s+1]=a?Nl(h):eo(h))}function Kl(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Eo(n,r)>=0}function ff(n,r){return function va(n,r,s,a){const l=m(),h=D(),_=function si(n){const r=dn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function ug(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[bi()],_=function qm(n,r){return r>=n.expandoStartIndex}(n,s);(function Ud(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!_&&(r=!1),r=function S_(n,r,s,a){const l=function io(n){const r=dn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Uc(s=lg(null,n,r,s,a),r.attrs,a),h=null);else{const _=r.directiveStylingLast;if(-1===_||n[_]!==l)if(s=lg(l,n,r,s,a),null===h){let T=function M_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Xo(a))return n[Js(a)]}(n,r,a);void 0!==T&&Array.isArray(T)&&(T=lg(null,n,r,T[1],a),T=Uc(T,r.attrs,a),function Zm(n,r,s,a){n[Js(s?r.classBindings:r.styleBindings)]=a}(n,r,a,T))}else h=function x_(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Uc(a,n[h].hostAttrs,s);return Uc(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function tg(n,r,s,a,l,h){let _=h?r.classBindings:r.styleBindings,I=Js(_),T=Xo(_);n[a]=s;let H,U=!1;if(Array.isArray(s)){const ne=s;H=ne[1],(null===H||Eo(ne,H)>0)&&(U=!0)}else H=s;if(l)if(0!==T){const be=Js(n[I+1]);n[a+1]=Ic(be,I),0!==be&&(n[be+1]=Dc(n[be+1],a)),n[I+1]=function Gg(n,r){return 131071&n|r<<17}(n[I+1],a)}else n[a+1]=Ic(I,0),0!==I&&(n[I+1]=Dc(n[I+1],a)),I=a;else n[a+1]=Ic(T,0),0===I?I=a:n[T+1]=Dc(n[T+1],a),T=a;U&&(n[a+1]=Nl(n[a+1])),rg(n,H,a,!0),rg(n,H,a,!1),function ng(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&Eo(h,r)>=0&&(s[a+1]=eo(s[a+1]))}(r,H,n,a,h),_=Ic(I,T),h?r.classBindings=_:r.styleBindings=_}(l,h,r,s,_,a)}}(h,n,_,a),r!==kn&&to(l,_,r)&&function cg(n,r,s,a,l,h,_,I){if(!(3&r.type))return;const T=n.data,U=T[I+1];Vd(function zf(n){return 1==(1&n)}(U)?dg(T,r,s,l,Xo(U),_):void 0)||(Vd(h)||function Hg(n){return 2==(2&n)}(U)&&(h=dg(T,null,s,l,I,_)),function Pl(n,r,s,a,l){const h=Ir(n);if(r)l?h?n.addClass(s,a):s.classList.add(a):h?n.removeClass(s,a):s.classList.remove(a);else{let _=-1===a.indexOf("-")?void 0:nt.DashCase;if(null==l)h?n.removeStyle(s,a,_):s.style.removeProperty(a);else{const I="string"==typeof l&&l.endsWith("!important");I&&(l=l.slice(0,-10),_|=nt.Important),h?n.setStyle(s,a,l,_):s.style.setProperty(a,l,I?"important":"")}}}(a,_,Xe(bi(),s),l,h))}(h,h.data[bi()],l,l[11],n,l[_+1]=function hg(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Re(qo(n)))),n}(r,s),a,_)}(n,r,null,!0),ff}function lg(n,r,s,a,l){let h=null;const _=s.directiveEnd;let I=s.directiveStylingLast;for(-1===I?I=s.directiveStart:I++;I<_&&(h=r[I],a=Uc(a,h.hostAttrs,l),h!==n);)I++;return null!==n&&(s.directiveStylingLast=I),a}function Uc(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const _=r[h];"number"==typeof _?l=_:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),qi(n,_,!!s||r[++h]))}return void 0===n?null:n}function dg(n,r,s,a,l,h){const _=null===r;let I;for(;l>0;){const T=n[l],U=Array.isArray(T),H=U?T[1]:T,ne=null===H;let be=s[l+1];be===kn&&(be=ne?tn:void 0);let Ge=ne?lo(be,a):H===a?be:void 0;if(U&&!Vd(Ge)&&(Ge=lo(T,a)),Vd(Ge)&&(I=Ge,_))return I;const ut=n[l+1];l=_?Js(ut):Xo(ut)}if(null!==r){let T=h?r.residualClasses:r.residualStyles;null!=T&&(I=lo(T,a))}return I}function Vd(n){return void 0!==n}function Xm(n,r=""){const s=m(),a=D(),l=n+20,h=a.firstCreatePass?fa(a,l,1,r,null):a.data[l],_=s[l]=function yc(n,r){return Ir(n)?n.createText(r):n.createTextNode(r)}(s[11],r);hd(a,s,_,h),st(h,!1)}function pf(n){return wa("",n,""),pf}function wa(n,r,s){const a=m(),l=function Wl(n,r,s,a){return to(n,gr(),s)?r+Be(s)+a:kn}(a,n,r,s);return l!==kn&&uu(a,bi(),l),wa}const rl=void 0;var Zl=["en",[["a","p"],["AM","PM"],rl],[["AM","PM"],rl,rl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rl,"{1} 'at' {0}",rl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hy(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Gs={};function yf(n){const r=function _g(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Hc(r);if(s)return s;const a=r.split("-")[0];if(s=Hc(a),s)return s;if("en"===a)return Zl;throw new Error(`Missing locale data for the locale "${n}".`)}function $c(n){return yf(n)[Rn.PluralCase]}function Hc(n){return n in Gs||(Gs[n]=gn.ng&&gn.ng.common&&gn.ng.common.locales&&gn.ng.common.locales[n]),Gs[n]}var Rn=(()=>((Rn=Rn||{})[Rn.LocaleId=0]="LocaleId",Rn[Rn.DayPeriodsFormat=1]="DayPeriodsFormat",Rn[Rn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rn[Rn.DaysFormat=3]="DaysFormat",Rn[Rn.DaysStandalone=4]="DaysStandalone",Rn[Rn.MonthsFormat=5]="MonthsFormat",Rn[Rn.MonthsStandalone=6]="MonthsStandalone",Rn[Rn.Eras=7]="Eras",Rn[Rn.FirstDayOfWeek=8]="FirstDayOfWeek",Rn[Rn.WeekendRange=9]="WeekendRange",Rn[Rn.DateFormat=10]="DateFormat",Rn[Rn.TimeFormat=11]="TimeFormat",Rn[Rn.DateTimeFormat=12]="DateTimeFormat",Rn[Rn.NumberSymbols=13]="NumberSymbols",Rn[Rn.NumberFormats=14]="NumberFormats",Rn[Rn.CurrencyCode=15]="CurrencyCode",Rn[Rn.CurrencySymbol=16]="CurrencySymbol",Rn[Rn.CurrencyName=17]="CurrencyName",Rn[Rn.Currencies=18]="Currencies",Rn[Rn.Directionality=19]="Directionality",Rn[Rn.PluralCase=20]="PluralCase",Rn[Rn.ExtraData=21]="ExtraData",Rn))();const Wc="en-US";let fy=Wc;function Q_(n,r,s,a,l){if(n=_e(n),Array.isArray(n))for(let h=0;h<n.length;h++)Q_(n[h],r,s,a,l);else{const h=D(),_=m();let I=xc(n)?n:_e(n.provide),T=$l(n);const U=ee(),H=1048575&U.providerIndexes,ne=U.directiveStart,be=U.providerIndexes>>20;if(xc(n)||!n.multi){const Ge=new ko(T,l,zl),ut=J_(I,r,l?H:H+be,ne);-1===ut?(xn(se(U,_),h,I),X_(h,n,r.length),r.push(I),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(Ge),_.push(Ge)):(s[ut]=Ge,_[ut]=Ge)}else{const Ge=J_(I,r,H+be,ne),ut=J_(I,r,H,H+be),xt=Ge>=0&&s[Ge],Gt=ut>=0&&s[ut];if(l&&!Gt||!l&&!xt){xn(se(U,_),h,I);const fn=function dw(n,r,s,a,l){const h=new ko(n,s,zl);return h.multi=[],h.index=r,h.componentProviders=0,p0(h,l,a&&!s),h}(l?cw:lw,s.length,l,a,T);!l&&Gt&&(s[ut].providerFactory=fn),X_(h,n,r.length,0),r.push(I),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(fn),_.push(fn)}else X_(h,n,Ge>-1?Ge:ut,p0(s[l?ut:Ge],T,!l&&a));!l&&a&&Gt&&s[ut].componentProviders++}}}function X_(n,r,s,a){const l=xc(r),h=function vp(n){return!!n.useClass}(r);if(l||h){const T=(h?_e(r.useClass):r).prototype.ngOnDestroy;if(T){const U=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const H=U.indexOf(s);-1===H?U.push(s,[a,T]):U[H+1].push(a,T)}else U.push(s,T)}}}function p0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function J_(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function lw(n,r,s,a){return ev(this.multi,[])}function cw(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const _=this.providerFactory.componentProviders,I=js(s,s[1],this.providerFactory.index,a);h=I.slice(0,_),ev(l,h);for(let T=_;T<I.length;T++)h.push(I[T])}else h=[],ev(l,h);return h}function ev(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function g0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function uw(n,r,s){const a=D();if(a.firstCreatePass){const l=Qr(n);Q_(s,a.data,a.blueprint,l,!0),Q_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class m0{}class pw{resolveComponentFactory(r){throw function fw(n){const r=Error(`No component factory found for ${Re(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ey=(()=>{class n{}return n.NULL=new pw,n})();function gw(){return Df(ee(),m())}function Df(n,r){return new Dg(tt(n,r))}let Dg=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=gw,n})();function mw(n){return n instanceof Dg?n.nativeElement:n}class _0{}let yw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function vw(){const n=m(),s=Dn(ee().index,n);return function _w(n){return n[11]}($r(s)?s:n)}(),n})(),Ew=(()=>{class n{}return n.\u0275prov=lt({token:n,providedIn:"root",factory:()=>null}),n})();class v0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const E0=new v0("13.3.2"),tv={};function wy(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(R(h)),ti(h))for(let I=10;I<h.length;I++){const T=h[I],U=T[1].firstChild;null!==U&&wy(T[1],T,U,a)}const _=s.type;if(8&_)wy(n,r,s.child,a);else if(32&_){const I=ln(s,r);let T;for(;T=I();)a.push(T)}else if(16&_){const I=_h(r,s);if(Array.isArray(I))a.push(...I);else{const T=ki(r[16]);wy(T[1],T,I,a,!0)}}s=l?s.projectionNext:s.next}return a}class Cg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return wy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(ti(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Uf(r,a),Wo(s,a))}this._attachedToViewContainer=!1}kg(this._lView[1],this._lView)}onDestroy(r){rm(this._lView[1],this._lView,null,r)}markForCheck(){Id(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){lp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function n_(n,r,s){pr(!0);try{lp(n,r,s)}finally{pr(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ze(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vf(n,r){vc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ze(902,"");this._appRef=r}}class ww extends Cg{constructor(r){super(r),this._view=r}detectChanges(){Bh(this._view)}checkNoChanges(){!function cp(n){pr(!0);try{Bh(n)}finally{pr(!1)}}(this._view)}get context(){return null}}class w0 extends Ey{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=wn(r);return new nv(s,this.ngModule)}}function I0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class nv extends m0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function pd(n){return n.map(Vy).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return I0(this.componentDef.inputs)}get outputs(){return I0(this.componentDef.outputs)}create(r,s,a,l){const h=(l=l||this.ngModule)?function Dw(n,r){return{get:(s,a,l)=>{const h=n.get(s,tv,l);return h!==tv||a===tv?h:r.get(s,a,l)}}}(r,l.injector):r,_=h.get(_0,O),I=h.get(Ew,null),T=_.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",H=a?function nm(n,r,s){if(Ir(n))return n.selectRootElement(r,s===En.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(T,a,this.componentDef.encapsulation):_c(_.createRenderer(null,this.componentDef),U,function Iw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(U)),ne=this.componentDef.onPush?576:528,be=function bm(n,r){return{components:[],scheduler:n||Nf,clean:jh,playerHandler:r||null,flags:0}}(),Ge=Oh(0,null,null,1,0,null,null,null,null,null),ut=Na(null,Ge,be,ne,null,null,_,T,I,h);let xt,Gt;go(ut);try{const fn=function Cm(n,r,s,a,l,h){const _=s[1];s[20]=n;const T=fa(_,20,2,"#host",null),U=T.mergedAttrs=r.hostAttrs;null!==U&&(Dd(T,U,!0),null!==n&&(sa(l,n,U),null!==T.classes&&Uu(l,n,T.classes),null!==T.styles&&Vu(l,n,T.styles)));const H=a.createRenderer(n,r),ne=Na(s,tm(r),null,r.onPush?64:16,s[20],T,a,H,h||null,null);return _.firstCreatePass&&(xn(se(T,s),_,r.type),ip(_,T),Nh(T,s.length,1)),Sc(s,ne),s[20]=ne}(H,this.componentDef,ut,_,T);if(H)if(a)sa(T,H,["ng-version",E0.full]);else{const{attrs:yt,classes:An}=function Bu(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!Qo(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);yt&&sa(T,H,yt),An&&An.length>0&&Uu(T,H,An.join(" "))}if(Gt=tr(Ge,20),void 0!==s){const yt=Gt.projection=[];for(let An=0;An<this.ngContentSelectors.length;An++){const kr=s[An];yt.push(null!=kr?Array.from(kr):null)}}xt=function Yh(n,r,s,a,l){const h=s[1],_=function np(n,r,s){const a=ee();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),sp(n,a,r,au(n,r,1,null),s));const l=js(r,n,a.directiveStart,a);as(l,r);const h=tt(a,r);return h&&as(h,r),l}(h,s,r);if(a.components.push(_),n[8]=_,l&&l.forEach(T=>T(_,r)),r.contentQueries){const T=ee();r.contentQueries(1,_,T.directiveStart)}const I=ee();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ro(I.index),rp(s[1],I,0,I.directiveStart,I.directiveEnd,r),um(r,_)),_}(fn,this.componentDef,ut,be,[Tp]),Tc(Ge,ut,null)}finally{xo()}return new bw(this.componentType,xt,Df(Gt,ut),ut,Gt)}}class bw extends class hw{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new ww(l),this.componentType=r}get injector(){return new vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Cf{}class D0{}const bf=new Map;class T0 extends Cf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new w0(this);const a=Nn(r);this._bootstrapComponents=f(a.bootstrap),this._r3Injector=zh(r,s,[{provide:Cf,useValue:this},{provide:Ey,useValue:this.componentFactoryResolver}],Re(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=ga.THROW_IF_NOT_FOUND,a=ht.Default){return r===ga||r===Cf||r===fp?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class rv extends D0{constructor(r){super(),this.moduleType=r,null!==Nn(r)&&function Aw(n){const r=new Set;!function s(a){const l=Nn(a,!0),h=l.id;null!==h&&(function C0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Re(r)} vs ${Re(r.name)}`)}(h,bf.get(h),a),bf.set(h,a));const _=f(l.imports);for(const I of _)r.has(I)||(r.add(I),s(I))}(n)}(r)}create(r){return new T0(this.moduleType,r)}}function A0(n,r,s){const a=qn()+n,l=m();return l[a]===kn?La(l,a,s?r.call(s):r()):function Gl(n,r){return n[r]}(l,a)}function S0(n,r,s,a){return x0(m(),qn(),n,r,s,a)}function M0(n,r,s,a,l){return function R0(n,r,s,a,l,h,_){const I=r+s;return function lu(n,r,s,a){const l=to(n,r,s);return to(n,r+1,a)||l}(n,I,l,h)?La(n,I+2,_?a.call(_,l,h):a(l,h)):bg(n,I+2)}(m(),qn(),n,r,s,a,l)}function bg(n,r){const s=n[r];return s===kn?void 0:s}function x0(n,r,s,a,l,h){const _=r+s;return to(n,_,l)?La(n,_+1,h?a.call(h,l):a(l)):bg(n,_+1)}function N0(n,r){const s=D();let a;const l=n+20;s.firstCreatePass?(a=function Nw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=ni(a.type)),_=on(zl);try{const I=C(!1),T=h();return C(I),function Om(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,m(),l,T),T}finally{on(_)}}function F0(n,r,s){const a=n+20,l=m(),h=Kn(l,a);return function Tg(n,r){return n[1].data[r].pure}(l,a)?x0(l,qn(),r,h.transform,s,h):h.transform(s)}function iv(n){return r=>{setTimeout(n,void 0,r)}}const sl=class Bw extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var l,h,_;let I=r,T=s||(()=>null),U=a;if(r&&"object"==typeof r){const ne=r;I=null===(l=ne.next)||void 0===l?void 0:l.bind(ne),T=null===(h=ne.error)||void 0===h?void 0:h.bind(ne),U=null===(_=ne.complete)||void 0===_?void 0:_.bind(ne)}this.__isAsync&&(T=iv(T),I&&(I=iv(I)),U&&(U=iv(U)));const H=super.subscribe({next:I,error:T,complete:U});return r instanceof K.w0&&r.add(H),H}};function jw(){return this._results[zu()]()}class sv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=zu(),a=sv.prototype;a[s]||(a[s]=jw)}get changes(){return this._changes||(this._changes=new sl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=os(r);(this._changesDetected=!function No(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ag=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gw,n})();const $w=Ag,Hw=class extends $w{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=Na(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(a[19]=h.createEmbeddedView(s)),Tc(s,a,r),new Cg(a)}};function Gw(){return Iy(ee(),m())}function Iy(n,r){return 4&n.type?new Hw(r,n,Df(n,r)):null}let Dy=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ww,n})();function Ww(){return U0(ee(),m())}const zw=Dy,L0=class extends zw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Df(this._hostTNode,this._hostLView)}get injector(){return new vo(this._hostTNode,this._hostLView)}get parentInjector(){const r=wt(this._hostTNode,this._hostLView);if(Ca(r)){const s=Bs(r,this._hostLView),a=qr(r);return new vo(s[1].data[a+8],s)}return new vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=V0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const l=r.createEmbeddedView(s||{});return this.insert(l,a),l}createComponent(r,s,a,l,h){const _=r&&!function $s(n){return"function"==typeof n}(r);let I;if(_)I=s;else{const ne=s||{};I=ne.index,a=ne.injector,l=ne.projectableNodes,h=ne.ngModuleRef}const T=_?r:new nv(wn(r)),U=a||this.parentInjector;if(!h&&null==T.ngModule){const be=(_?U:this.parentInjector).get(Cf,null);be&&(h=be)}const H=T.create(U,l,void 0,h);return this.insert(H.hostView,I),H}insert(r,s){const a=r._lView,l=a[1];if(function Cr(n){return ti(n[3])}(a)){const H=this.indexOf(r);if(-1!==H)this.detach(H);else{const ne=a[3],be=new L0(ne,ne[6],ne[3]);be.detach(be.indexOf(r))}}const h=this._adjustIndex(s),_=this._lContainer;!function xy(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Ta(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const _=r[17];null!==_&&s!==_&&function Ry(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(_,r);const I=r[19];null!==I&&I.insertView(n),r[2]|=128}(l,a,_,h);const I=fd(h,_),T=a[11],U=gh(T,_[7]);return null!==U&&function ld(n,r,s,a,l,h){a[0]=l,a[6]=r,vc(n,a,s,1,l,h)}(l,_[6],T,a,U,I),r.attachToViewContainerRef(),Ta(ov(_),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=V0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Uf(this._lContainer,s);a&&(Wo(ov(this._lContainer),s),kg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Uf(this._lContainer,s);return a&&null!=Wo(ov(this._lContainer),s)?new Cg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function V0(n){return n[8]}function ov(n){return n[8]||(n[8]=[])}function U0(n,r){let s;const a=r[n.index];if(ti(a))s=a;else{let l;if(8&n.type)l=R(a);else{const h=r[11];l=h.createComment("");const _=tt(n,r);Nu(h,gh(h,_),l,function dd(n,r){return Ir(n)?n.nextSibling(r):r.nextSibling}(h,_),!1)}r[n.index]=s=Lh(a,r,l,n),Sc(r,s)}return new L0(s,n,r)}class av{constructor(r){this.queryList=r,this.matches=null}clone(){return new av(this.queryList)}setDirty(){this.queryList.setDirty()}}class uv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const _=s.getByIndex(h);l.push(this.queries[_.indexInDeclarationView].clone())}return new uv(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==K0(r,s).matches&&this.queries[s].setDirty()}}class B0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class lv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new lv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class cv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new cv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,Zw(s,h)),this.matchTNodeWithReadOption(r,s,Xr(s,r,h,!1,!1))}else a===Ag?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Xr(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Dg||l===Dy||l===Ag&&4&s.type)this.addMatch(s.index,-2);else{const h=Xr(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Zw(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function Qw(n,r,s,a){return-1===s?function Yw(n,r){return 11&n.type?Df(n,r):4&n.type?Iy(n,r):null}(r,n):-2===s?function Xw(n,r,s){return s===Dg?Df(r,n):s===Ag?Iy(r,n):s===Dy?U0(r,n):void 0}(n,r,a):js(n,n[1],s,r)}function j0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,_=s.matches,I=[];for(let T=0;T<_.length;T+=2){const U=_[T];I.push(U<0?null:Qw(r,h[U],_[T+1],s.metadata.read))}l.matches=I}return l.matches}function dv(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const _=j0(n,r,l,s);for(let I=0;I<h.length;I+=2){const T=h[I];if(T>0)a.push(_[I/2]);else{const U=h[I+1],H=r[-T];for(let ne=10;ne<H.length;ne++){const be=H[ne];be[17]===be[3]&&dv(be[1],be,U,a)}if(null!==H[9]){const ne=H[9];for(let be=0;be<ne.length;be++){const Ge=ne[be];dv(Ge[1],Ge,U,a)}}}}}return a}function $0(n){const r=m(),s=D(),a=Ls();Mo(a+1);const l=K0(s,a);if(n.dirty&&Mn(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?dv(s,r,a,[]):j0(s,r,l,a);n.reset(h,mw),n.notifyOnChanges()}return!0}return!1}function H0(n,r,s,a){const l=D();if(l.firstCreatePass){const h=ee();(function z0(n,r,s){null===n.queries&&(n.queries=new lv),n.queries.track(new cv(r,s))})(l,new B0(r,s,a),h.index),function tI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function W0(n,r,s){const a=new sv(4==(4&s));rm(n,r,a,a.destroy),null===r[19]&&(r[19]=new uv),r[19].queries.push(new av(a))}(l,m(),s)}function G0(){return function eI(n,r){return n[19].queries[r].queryList}(m(),Ls())}function K0(n,r){return n.queries.getByIndex(r)}function q0(n,r){return Iy(n,r)}function Ty(...n){}const dE=new Xt("Application Initializer");let yv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Ty,this.reject=Ty,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Zp(h))s.push(h);else if(jm(h)){const _=new Promise((I,T)=>{h.subscribe({complete:I,error:T})});s.push(_)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(an(dE,8))},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hE=new Xt("AppId",{providedIn:"root",factory:function fE(){return`${_v()}${_v()}${_v()}`}});function _v(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pE=new Xt("Platform Initializer"),gE=new Xt("Platform ID"),mE=new Xt("appBootstrapListener");let yE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();const vv=new Xt("LocaleId",{providedIn:"root",factory:()=>ur(vv,ht.Optional|ht.SkipSelf)||function _I(){return"undefined"!=typeof $localize&&$localize.locale||Wc}()}),vI=new Xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class EI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let wI=(()=>{class n{compileModuleSync(s){return new rv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=f(Nn(s).declarations).reduce((_,I)=>{const T=wn(I);return T&&_.push(new nv(T)),_},[]);return new EI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DI=(()=>Promise.resolve(0))();function Ev(n){"undefined"==typeof Zone?DI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class fu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sl(!1),this.onMicrotaskEmpty=new sl(!1),this.onStable=new sl(!1),this.onError=new sl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function CI(){let n=gn.requestAnimationFrame,r=gn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function AI(n){const r=()=>{!function TI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(gn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Iv(n),n.isCheckStableRunning=!0,wv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Iv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,_,I)=>{try{return _E(n),s.invokeTask(l,h,_,I)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),vE(n)}},onInvoke:(s,a,l,h,_,I,T)=>{try{return _E(n),s.invoke(l,h,_,I,T)}finally{n.shouldCoalesceRunChangeDetection&&r(),vE(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,Iv(n),wv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,_=h.scheduleEventTask("NgZoneEvent: "+l,r,bI,Ty,Ty);try{return h.runTask(_,s,a)}finally{h.cancelTask(_)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const bI={};function wv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Iv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function _E(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function vE(n){n._nesting--,wv(n)}class SI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sl,this.onMicrotaskEmpty=new sl,this.onStable=new sl,this.onError=new sl}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}let EE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fu.assertNotInAngularZone(),Ev(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ev(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(an(fu))},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})(),wE=(()=>{class n{constructor(){this._applications=new Map,Dv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Dv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();class MI{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function xI(n){Dv=n}let pu,Dv=new MI;const IE=new Xt("AllowMultipleToken");class PI{constructor(r,s){this.name=r,this.token=s}}function DE(n,r,s=[]){const a=`Platform: ${r}`,l=new Xt(a);return(h=[])=>{let _=CE();if(!_||_.injector.get(IE,!1))if(n)n(s.concat(h).concat({provide:l,useValue:!0}));else{const I=s.concat(h).concat({provide:l,useValue:!0},{provide:pp,useValue:"platform"});!function kI(n){if(pu&&!pu.destroyed&&!pu.injector.get(IE,!1))throw new Ze(400,"");pu=n.get(bE);const r=n.get(pE,null);r&&r.forEach(s=>s())}(ga.create({providers:I,name:a}))}return function NI(n){const r=CE();if(!r)throw new Ze(401,"");return r}()}}function CE(){return pu&&!pu.destroyed?pu:null}let bE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const I=function FI(n,r){let s;return s="noop"===n?new SI:("zone.js"===n?void 0:n)||new fu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),T=[{provide:fu,useValue:I}];return I.run(()=>{const U=ga.create({providers:T,parent:this.injector,name:s.moduleType.name}),H=s.create(U),ne=H.injector.get(di,null);if(!ne)throw new Ze(402,"");return I.runOutsideAngular(()=>{const be=I.onError.subscribe({next:Ge=>{ne.handleError(Ge)}});H.onDestroy(()=>{bv(this._modules,H),be.unsubscribe()})}),function LI(n,r,s){try{const a=s();return Zp(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(ne,I,()=>{const be=H.injector.get(yv);return be.runInitializers(),be.donePromise.then(()=>(function G_(n){pt(n,"Expected localeId to be defined"),"string"==typeof n&&(fy=n.toLowerCase().replace(/_/g,"-"))}(H.injector.get(vv,Wc)||Wc),this._moduleDoBootstrap(H),H))})})}bootstrapModule(s,a=[]){const l=TE({},a);return function RI(n,r,s){const a=new rv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Cv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Ze(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ze(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(an(ga))},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();function TE(n,r){return Array.isArray(r)?r.reduce(TE,n):Object.assign(Object.assign({},n),r)}let Cv=(()=>{class n{constructor(s,a,l,h,_){this._zone=s,this._injector=a,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new Y.y(U=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{U.next(this._stable),U.complete()})}),T=new Y.y(U=>{let H;this._zone.runOutsideAngular(()=>{H=this._zone.onStable.subscribe(()=>{fu.assertNotInAngularZone(),Ev(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,U.next(!0))})})});const ne=this._zone.onUnstable.subscribe(()=>{fu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{U.next(!1)}))});return()=>{H.unsubscribe(),ne.unsubscribe()}});this.isStable=(0,we.T)(I,T.pipe((0,me.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new Ze(405,"");let l;l=s instanceof m0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(l.componentType);const h=function OI(n){return n.isBoundToModule}(l)?void 0:this._injector.get(Cf),I=l.create(ga.NULL,[],a||l.selector,h),T=I.location.nativeElement,U=I.injector.get(EE,null),H=U&&I.injector.get(wE);return U&&H&&H.registerApplication(T,U),I.onDestroy(()=>{this.detachView(I.hostView),bv(this.components,I),H&&H.unregisterApplication(T)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Ze(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;bv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(mE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(an(fu),an(ga),an(di),an(Ey),an(yv))},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let SE=!0,ME=!1;function UI(){return ME=!0,SE}function BI(){if(ME)throw new Error("Cannot enable prod mode after platform setup.");SE=!1}let jI=(()=>{class n{}return n.__NG_ELEMENT_ID__=$I,n})();function $I(n){return function HI(n,r,s){if(ar(n)&&!s){const a=Dn(n.index,r);return new Cg(a,a)}return 47&n.type?new Cg(r[16],r):null}(ee(),m(),16==(16&n))}class PE{constructor(){}supports(r){return Hl(r)}create(r){return new ZI(r)}}const qI=(n,r)=>r;class ZI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const _=!a||s&&s.currentIndex<NE(a,l,h)?s:a,I=NE(_,l,h),T=_.currentIndex;if(_===a)l--,a=a._nextRemoved;else if(s=s._next,null==_.previousIndex)l++;else{h||(h=[]);const U=I-l,H=T-l;if(U!=H){for(let be=0;be<U;be++){const Ge=be<h.length?h[be]:h[be]=0,ut=Ge+be;H<=ut&&ut<U&&(h[be]=Ge+1)}h[_.previousIndex]=H-U}}I!==T&&r(_,I,T)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Hl(r))throw new Ze(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,_,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let I=0;I<this.length;I++)h=r[I],_=this._trackByFn(I,h),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,h,_,I)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,_,I),a=!0),s=s._next}else l=0,function p_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[zu()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,I=>{_=this._trackByFn(l,I),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,I,_,l)),Object.is(s.item,I)||this._addIdentityChange(s,I)):(s=this._mismatch(s,I,_,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new YI(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new kE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class YI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class kE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new QI,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class FE{constructor(){}supports(r){return r instanceof Map||Ad(r)}create(){return new XI}}class XI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Ad(r)))throw new Ze(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,_=l._next;return h&&(h._next=_),_&&(_._prev=h),l._next=null,l._prev=null,l}const a=new JI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class JI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function LE(){return new xv([new PE])}let xv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||LE()),deps:[[n,new wo,new ho]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Ze(901,"")}}return n.\u0275prov=lt({token:n,providedIn:"root",factory:LE}),n})();function VE(){return new Rv([new FE])}let Rv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||VE()),deps:[[n,new wo,new ho]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(a)return a;throw new Ze(901,"")}}return n.\u0275prov=lt({token:n,providedIn:"root",factory:VE}),n})();const nD=DE(null,"core",[{provide:gE,useValue:"unknown"},{provide:bE,deps:[ga]},{provide:wE,deps:[]},{provide:yE,deps:[]}]);let rD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(an(Cv))},n.\u0275mod=Ve({type:n}),n.\u0275inj=en({}),n})()},2382:(Mt,We,k)=>{k.d(We,{Fj:()=>F,NI:()=>jr,oH:()=>gi,cw:()=>Pn,sg:()=>Vi,u5:()=>dn,Cf:()=>Le,JU:()=>Ze,JJ:()=>Fr,JL:()=>yr,F:()=>$r,On:()=>at,YN:()=>Di,c5:()=>Dr,UX:()=>Ci,Q7:()=>Z,kI:()=>Ie,_Y:()=>cn,Kr:()=>Es});var p=k(5e3),K=k(9808),Y=k(9751),we=k(4742),me=k(8421),Ae=k(3269),Oe=k(5403),Re=k(3268),Fe=k(1810),re=k(8996),_e=k(4004);let He=(()=>{class N{constructor(S,m){this._renderer=S,this._elementRef=m,this.onChange=D=>{},this.onTouched=()=>{}}setProperty(S,m){this._renderer.setProperty(this._elementRef.nativeElement,S,m)}registerOnTouched(S){this.onTouched=S}registerOnChange(S){this.onChange=S}setDisabledState(S){this.setProperty("disabled",S)}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(p.Qsj),p.Y36(p.SBq))},N.\u0275dir=p.lG2({type:N}),N})(),ze=(()=>{class N extends He{}return N.\u0275fac=function(){let M;return function(m){return(M||(M=p.n5z(N)))(m||N)}}(),N.\u0275dir=p.lG2({type:N,features:[p.qOj]}),N})();const Ze=new p.OlP("NgValueAccessor"),ke={provide:Ze,useExisting:(0,p.Gpc)(()=>F),multi:!0},j=new p.OlP("CompositionEventMode");let F=(()=>{class N extends He{constructor(S,m,D){super(S,m),this._compositionMode=D,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vt(){const N=(0,K.q)()?(0,K.q)().getUserAgent():"";return/android (\d+)/.test(N.toLowerCase())}())}writeValue(S){this.setProperty("value",null==S?"":S)}_handleInput(S){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(S)}_compositionStart(){this._composing=!0}_compositionEnd(S){this._composing=!1,this._compositionMode&&this.onChange(S)}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(j,8))},N.\u0275dir=p.lG2({type:N,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(S,m){1&S&&p.NdJ("input",function(z){return m._handleInput(z.target.value)})("blur",function(){return m.onTouched()})("compositionstart",function(){return m._compositionStart()})("compositionend",function(z){return m._compositionEnd(z.target.value)})},features:[p._Bn([ke]),p.qOj]}),N})();function J(N){return null==N||0===N.length}function le(N){return null!=N&&"number"==typeof N.length}const Le=new p.OlP("NgValidators"),je=new p.OlP("NgAsyncValidators"),Ne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ie{static min(M){return function Q(N){return M=>{if(J(M.value)||J(N))return null;const S=parseFloat(M.value);return!isNaN(S)&&S<N?{min:{min:N,actual:M.value}}:null}}(M)}static max(M){return function Se(N){return M=>{if(J(M.value)||J(N))return null;const S=parseFloat(M.value);return!isNaN(S)&&S>N?{max:{max:N,actual:M.value}}:null}}(M)}static required(M){return de(M)}static requiredTrue(M){return function Ye(N){return!0===N.value?null:{required:!0}}(M)}static email(M){return function $e(N){return J(N.value)||Ne.test(N.value)?null:{email:!0}}(M)}static minLength(M){return function Wt(N){return M=>J(M.value)||!le(M.value)?null:M.value.length<N?{minlength:{requiredLength:N,actualLength:M.value.length}}:null}(M)}static maxLength(M){return function It(N){return M=>le(M.value)&&M.value.length>N?{maxlength:{requiredLength:N,actualLength:M.value.length}}:null}(M)}static pattern(M){return Lt(M)}static nullValidator(M){return null}static compose(M){return en(M)}static composeAsync(M){return Qn(M)}}function de(N){return J(N.value)?{required:!0}:null}function Lt(N){if(!N)return pt;let M,S;return"string"==typeof N?(S="","^"!==N.charAt(0)&&(S+="^"),S+=N,"$"!==N.charAt(N.length-1)&&(S+="$"),M=new RegExp(S)):(S=N.toString(),M=N),m=>{if(J(m.value))return null;const D=m.value;return M.test(D)?null:{pattern:{requiredPattern:S,actualValue:D}}}}function pt(N){return null}function bt(N){return null!=N}function qt(N){const M=(0,p.QGY)(N)?(0,re.D)(N):N;return(0,p.CqO)(M),M}function Rt(N){let M={};return N.forEach(S=>{M=null!=S?Object.assign(Object.assign({},M),S):M}),0===Object.keys(M).length?null:M}function Vt(N,M){return M.map(S=>S(N))}function pn(N){return N.map(M=>function lt(N){return!N.validate}(M)?M:S=>M.validate(S))}function en(N){if(!N)return null;const M=N.filter(bt);return 0==M.length?null:function(S){return Rt(Vt(S,M))}}function mn(N){return null!=N?en(pn(N)):null}function Qn(N){if(!N)return null;const M=N.filter(bt);return 0==M.length?null:function(S){return function ue(...N){const M=(0,Ae.jO)(N),{args:S,keys:m}=(0,we.D)(N),D=new Y.y(z=>{const{length:ee}=S;if(!ee)return void z.complete();const De=new Array(ee);let Ke=ee,st=ee;for(let Ht=0;Ht<ee;Ht++){let Ot=!1;(0,me.Xf)(S[Ht]).subscribe((0,Oe.x)(z,_n=>{Ot||(Ot=!0,st--),De[Ht]=_n},()=>Ke--,void 0,()=>{(!Ke||!Ot)&&(st||z.next(m?(0,Fe.n)(m,De):De),z.complete())}))}});return M?D.pipe((0,Re.Z)(M)):D}(Vt(S,M).map(qt)).pipe((0,_e.U)(Rt))}}function Bn(N){return null!=N?Qn(pn(N)):null}function cr(N,M){return null===N?[M]:Array.isArray(N)?[...N,M]:[N,M]}function rr(N){return N._rawValidators}function Tr(N){return N._rawAsyncValidators}function zn(N){return N?Array.isArray(N)?N:[N]:[]}function Ar(N,M){return Array.isArray(N)?N.includes(M):N===M}function jn(N,M){const S=zn(M);return zn(N).forEach(D=>{Ar(S,D)||S.push(D)}),S}function ht(N,M){return zn(M).filter(S=>!Ar(N,S))}class Qt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(M){this._rawValidators=M||[],this._composedValidatorFn=mn(this._rawValidators)}_setAsyncValidators(M){this._rawAsyncValidators=M||[],this._composedAsyncValidatorFn=Bn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(M){this._onDestroyCallbacks.push(M)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(M=>M()),this._onDestroyCallbacks=[]}reset(M){this.control&&this.control.reset(M)}hasError(M,S){return!!this.control&&this.control.hasError(M,S)}getError(M,S){return this.control?this.control.getError(M,S):null}}class vn extends Qt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class on extends Qt{get formDirective(){return null}get path(){return null}}class Nr{constructor(M){this._cd=M}is(M){var S,m,D;return"submitted"===M?!!(null===(S=this._cd)||void 0===S?void 0:S.submitted):!!(null===(D=null===(m=this._cd)||void 0===m?void 0:m.control)||void 0===D?void 0:D[M])}}let Fr=(()=>{class N extends Nr{constructor(S){super(S)}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(vn,2))},N.\u0275dir=p.lG2({type:N,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(S,m){2&S&&p.ekj("ng-untouched",m.is("untouched"))("ng-touched",m.is("touched"))("ng-pristine",m.is("pristine"))("ng-dirty",m.is("dirty"))("ng-valid",m.is("valid"))("ng-invalid",m.is("invalid"))("ng-pending",m.is("pending"))},features:[p.qOj]}),N})(),yr=(()=>{class N extends Nr{constructor(S){super(S)}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(on,10))},N.\u0275dir=p.lG2({type:N,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(S,m){2&S&&p.ekj("ng-untouched",m.is("untouched"))("ng-touched",m.is("touched"))("ng-pristine",m.is("pristine"))("ng-dirty",m.is("dirty"))("ng-valid",m.is("valid"))("ng-invalid",m.is("invalid"))("ng-pending",m.is("pending"))("ng-submitted",m.is("submitted"))},features:[p.qOj]}),N})();function Tt(N,M){Ce(N,M),M.valueAccessor.writeValue(N.value),function Ve(N,M){M.valueAccessor.registerOnChange(S=>{N._pendingValue=S,N._pendingChange=!0,N._pendingDirty=!0,"change"===N.updateOn&&Kt(N,M)})}(N,M),function Tn(N,M){const S=(m,D)=>{M.valueAccessor.writeValue(m),D&&M.viewToModelUpdate(m)};N.registerOnChange(S),M._registerOnDestroy(()=>{N._unregisterOnChange(S)})}(N,M),function Ct(N,M){M.valueAccessor.registerOnTouched(()=>{N._pendingTouched=!0,"blur"===N.updateOn&&N._pendingChange&&Kt(N,M),"submit"!==N.updateOn&&N.markAsTouched()})}(N,M),function ie(N,M){if(M.valueAccessor.setDisabledState){const S=m=>{M.valueAccessor.setDisabledState(m)};N.registerOnDisabledChange(S),M._registerOnDestroy(()=>{N._unregisterOnDisabledChange(S)})}}(N,M)}function zt(N,M,S=!0){const m=()=>{};M.valueAccessor&&(M.valueAccessor.registerOnChange(m),M.valueAccessor.registerOnTouched(m)),qe(N,M),N&&(M._invokeOnDestroyCallbacks(),N._registerOnCollectionChange(()=>{}))}function pe(N,M){N.forEach(S=>{S.registerOnValidatorChange&&S.registerOnValidatorChange(M)})}function Ce(N,M){const S=rr(N);null!==M.validator?N.setValidators(cr(S,M.validator)):"function"==typeof S&&N.setValidators([S]);const m=Tr(N);null!==M.asyncValidator?N.setAsyncValidators(cr(m,M.asyncValidator)):"function"==typeof m&&N.setAsyncValidators([m]);const D=()=>N.updateValueAndValidity();pe(M._rawValidators,D),pe(M._rawAsyncValidators,D)}function qe(N,M){let S=!1;if(null!==N){if(null!==M.validator){const D=rr(N);if(Array.isArray(D)&&D.length>0){const z=D.filter(ee=>ee!==M.validator);z.length!==D.length&&(S=!0,N.setValidators(z))}}if(null!==M.asyncValidator){const D=Tr(N);if(Array.isArray(D)&&D.length>0){const z=D.filter(ee=>ee!==M.asyncValidator);z.length!==D.length&&(S=!0,N.setAsyncValidators(z))}}}const m=()=>{};return pe(M._rawValidators,m),pe(M._rawAsyncValidators,m),S}function Kt(N,M){N._pendingDirty&&N.markAsDirty(),N.setValue(N._pendingValue,{emitModelToViewChange:!1}),M.viewToModelUpdate(N._pendingValue),N._pendingChange=!1}function Mr(N,M){Ce(N,M)}function pi(N,M){if(!N.hasOwnProperty("model"))return!1;const S=N.model;return!!S.isFirstChange()||!Object.is(M,S.currentValue)}function hr(N,M){N._syncPendingControls(),M.forEach(S=>{const m=S.control;"submit"===m.updateOn&&m._pendingChange&&(S.viewToModelUpdate(m._pendingValue),m._pendingChange=!1)})}function sr(N,M){if(!M)return null;let S,m,D;return Array.isArray(M),M.forEach(z=>{z.constructor===F?S=z:function ls(N){return Object.getPrototypeOf(N.constructor)===ze}(z)?m=z:D=z}),D||m||S||null}function Xn(N,M){const S=N.indexOf(M);S>-1&&N.splice(S,1)}const dt="VALID",$t="INVALID",hn="PENDING",er="DISABLED";function or(N){return(ai(N)?N.validators:N)||null}function xr(N){return Array.isArray(N)?mn(N):N||null}function On(N,M){return(ai(M)?M.asyncValidators:N)||null}function Er(N){return Array.isArray(N)?Bn(N):N||null}function ai(N){return null!=N&&!Array.isArray(N)&&"object"==typeof N}const yn=N=>N instanceof jr,wr=N=>N instanceof Pn;function Li(N){return yn(N)?N.value:N.getRawValue()}function Yr(N,M){const S=wr(N),m=N.controls;if(!(S?Object.keys(m):m).length)throw new p.vHH(1e3,"");if(!m[M])throw new p.vHH(1001,"")}function Rr(N,M){wr(N),N._forEachChild((m,D)=>{if(void 0===M[D])throw new p.vHH(1002,"")})}class Vr{constructor(M,S){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=M,this._rawAsyncValidators=S,this._composedValidatorFn=xr(this._rawValidators),this._composedAsyncValidatorFn=Er(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(M){this._rawValidators=this._composedValidatorFn=M}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(M){this._rawAsyncValidators=this._composedAsyncValidatorFn=M}get parent(){return this._parent}get valid(){return this.status===dt}get invalid(){return this.status===$t}get pending(){return this.status==hn}get disabled(){return this.status===er}get enabled(){return this.status!==er}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(M){this._rawValidators=M,this._composedValidatorFn=xr(M)}setAsyncValidators(M){this._rawAsyncValidators=M,this._composedAsyncValidatorFn=Er(M)}addValidators(M){this.setValidators(jn(M,this._rawValidators))}addAsyncValidators(M){this.setAsyncValidators(jn(M,this._rawAsyncValidators))}removeValidators(M){this.setValidators(ht(M,this._rawValidators))}removeAsyncValidators(M){this.setAsyncValidators(ht(M,this._rawAsyncValidators))}hasValidator(M){return Ar(this._rawValidators,M)}hasAsyncValidator(M){return Ar(this._rawAsyncValidators,M)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(M={}){this.touched=!0,this._parent&&!M.onlySelf&&this._parent.markAsTouched(M)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(M=>M.markAllAsTouched())}markAsUntouched(M={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(S=>{S.markAsUntouched({onlySelf:!0})}),this._parent&&!M.onlySelf&&this._parent._updateTouched(M)}markAsDirty(M={}){this.pristine=!1,this._parent&&!M.onlySelf&&this._parent.markAsDirty(M)}markAsPristine(M={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(S=>{S.markAsPristine({onlySelf:!0})}),this._parent&&!M.onlySelf&&this._parent._updatePristine(M)}markAsPending(M={}){this.status=hn,!1!==M.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!M.onlySelf&&this._parent.markAsPending(M)}disable(M={}){const S=this._parentMarkedDirty(M.onlySelf);this.status=er,this.errors=null,this._forEachChild(m=>{m.disable(Object.assign(Object.assign({},M),{onlySelf:!0}))}),this._updateValue(),!1!==M.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},M),{skipPristineCheck:S})),this._onDisabledChange.forEach(m=>m(!0))}enable(M={}){const S=this._parentMarkedDirty(M.onlySelf);this.status=dt,this._forEachChild(m=>{m.enable(Object.assign(Object.assign({},M),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:M.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},M),{skipPristineCheck:S})),this._onDisabledChange.forEach(m=>m(!1))}_updateAncestors(M){this._parent&&!M.onlySelf&&(this._parent.updateValueAndValidity(M),M.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(M){this._parent=M}updateValueAndValidity(M={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dt||this.status===hn)&&this._runAsyncValidator(M.emitEvent)),!1!==M.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!M.onlySelf&&this._parent.updateValueAndValidity(M)}_updateTreeValidity(M={emitEvent:!0}){this._forEachChild(S=>S._updateTreeValidity(M)),this.updateValueAndValidity({onlySelf:!0,emitEvent:M.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?er:dt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(M){if(this.asyncValidator){this.status=hn,this._hasOwnPendingAsyncValidator=!0;const S=qt(this.asyncValidator(this));this._asyncValidationSubscription=S.subscribe(m=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(m,{emitEvent:M})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(M,S={}){this.errors=M,this._updateControlsErrors(!1!==S.emitEvent)}get(M){return function ei(N,M,S){if(null==M||(Array.isArray(M)||(M=M.split(S)),Array.isArray(M)&&0===M.length))return null;let m=N;return M.forEach(D=>{m=wr(m)?m.controls.hasOwnProperty(D)?m.controls[D]:null:(N=>N instanceof Fn)(m)&&m.at(D)||null}),m}(this,M,".")}getError(M,S){const m=S?this.get(S):this;return m&&m.errors?m.errors[M]:null}hasError(M,S){return!!this.getError(M,S)}get root(){let M=this;for(;M._parent;)M=M._parent;return M}_updateControlsErrors(M){this.status=this._calculateStatus(),M&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(M)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?er:this.errors?$t:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hn)?hn:this._anyControlsHaveStatus($t)?$t:dt}_anyControlsHaveStatus(M){return this._anyControls(S=>S.status===M)}_anyControlsDirty(){return this._anyControls(M=>M.dirty)}_anyControlsTouched(){return this._anyControls(M=>M.touched)}_updatePristine(M={}){this.pristine=!this._anyControlsDirty(),this._parent&&!M.onlySelf&&this._parent._updatePristine(M)}_updateTouched(M={}){this.touched=this._anyControlsTouched(),this._parent&&!M.onlySelf&&this._parent._updateTouched(M)}_isBoxedValue(M){return"object"==typeof M&&null!==M&&2===Object.keys(M).length&&"value"in M&&"disabled"in M}_registerOnCollectionChange(M){this._onCollectionChange=M}_setUpdateStrategy(M){ai(M)&&null!=M.updateOn&&(this._updateOn=M.updateOn)}_parentMarkedDirty(M){return!M&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class jr extends Vr{constructor(M=null,S,m){super(or(S),On(m,S)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(M),this._setUpdateStrategy(S),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ai(S)&&S.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(M)?M.value:M)}setValue(M,S={}){this.value=this._pendingValue=M,this._onChange.length&&!1!==S.emitModelToViewChange&&this._onChange.forEach(m=>m(this.value,!1!==S.emitViewToModelChange)),this.updateValueAndValidity(S)}patchValue(M,S={}){this.setValue(M,S)}reset(M=this.defaultValue,S={}){this._applyFormState(M),this.markAsPristine(S),this.markAsUntouched(S),this.setValue(this.value,S),this._pendingChange=!1}_updateValue(){}_anyControls(M){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(M){this._onChange.push(M)}_unregisterOnChange(M){Xn(this._onChange,M)}registerOnDisabledChange(M){this._onDisabledChange.push(M)}_unregisterOnDisabledChange(M){Xn(this._onDisabledChange,M)}_forEachChild(M){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(M){this._isBoxedValue(M)?(this.value=this._pendingValue=M.value,M.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=M}}class Pn extends Vr{constructor(M,S,m){super(or(S),On(m,S)),this.controls=M,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(M,S){return this.controls[M]?this.controls[M]:(this.controls[M]=S,S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange),S)}addControl(M,S,m={}){this.registerControl(M,S),this.updateValueAndValidity({emitEvent:m.emitEvent}),this._onCollectionChange()}removeControl(M,S={}){this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),delete this.controls[M],this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}setControl(M,S,m={}){this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),delete this.controls[M],S&&this.registerControl(M,S),this.updateValueAndValidity({emitEvent:m.emitEvent}),this._onCollectionChange()}contains(M){return this.controls.hasOwnProperty(M)&&this.controls[M].enabled}setValue(M,S={}){Rr(this,M),Object.keys(M).forEach(m=>{Yr(this,m),this.controls[m].setValue(M[m],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(M,S={}){null!=M&&(Object.keys(M).forEach(m=>{this.controls[m]&&this.controls[m].patchValue(M[m],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(M={},S={}){this._forEachChild((m,D)=>{m.reset(M[D],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this._reduceChildren({},(M,S,m)=>(M[m]=Li(S),M))}_syncPendingControls(){let M=this._reduceChildren(!1,(S,m)=>!!m._syncPendingControls()||S);return M&&this.updateValueAndValidity({onlySelf:!0}),M}_forEachChild(M){Object.keys(this.controls).forEach(S=>{const m=this.controls[S];m&&M(m,S)})}_setUpControls(){this._forEachChild(M=>{M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(M){for(const S of Object.keys(this.controls)){const m=this.controls[S];if(this.contains(S)&&M(m))return!0}return!1}_reduceValue(){return this._reduceChildren({},(M,S,m)=>((S.enabled||this.disabled)&&(M[m]=S.value),M))}_reduceChildren(M,S){let m=M;return this._forEachChild((D,z)=>{m=S(m,D,z)}),m}_allControlsDisabled(){for(const M of Object.keys(this.controls))if(this.controls[M].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Fn extends Vr{constructor(M,S,m){super(or(S),On(m,S)),this.controls=M,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(M){return this.controls[M]}push(M,S={}){this.controls.push(M),this._registerControl(M),this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}insert(M,S,m={}){this.controls.splice(M,0,S),this._registerControl(S),this.updateValueAndValidity({emitEvent:m.emitEvent})}removeAt(M,S={}){this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),this.controls.splice(M,1),this.updateValueAndValidity({emitEvent:S.emitEvent})}setControl(M,S,m={}){this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),this.controls.splice(M,1),S&&(this.controls.splice(M,0,S),this._registerControl(S)),this.updateValueAndValidity({emitEvent:m.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(M,S={}){Rr(this,M),M.forEach((m,D)=>{Yr(this,D),this.at(D).setValue(m,{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(M,S={}){null!=M&&(M.forEach((m,D)=>{this.at(D)&&this.at(D).patchValue(m,{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(M=[],S={}){this._forEachChild((m,D)=>{m.reset(M[D],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this.controls.map(M=>Li(M))}clear(M={}){this.controls.length<1||(this._forEachChild(S=>S._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:M.emitEvent}))}_syncPendingControls(){let M=this.controls.reduce((S,m)=>!!m._syncPendingControls()||S,!1);return M&&this.updateValueAndValidity({onlySelf:!0}),M}_forEachChild(M){this.controls.forEach((S,m)=>{M(S,m)})}_updateValue(){this.value=this.controls.filter(M=>M.enabled||this.disabled).map(M=>M.value)}_anyControls(M){return this.controls.some(S=>S.enabled&&M(S))}_setUpControls(){this._forEachChild(M=>this._registerControl(M))}_allControlsDisabled(){for(const M of this.controls)if(M.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(M){M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange)}}const Ji={provide:on,useExisting:(0,p.Gpc)(()=>$r)},br=(()=>Promise.resolve(null))();let $r=(()=>{class N extends on{constructor(S,m){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new Pn({},mn(S),Bn(m))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(S){br.then(()=>{const m=this._findContainer(S.path);S.control=m.registerControl(S.name,S.control),Tt(S.control,S),S.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(S)})}getControl(S){return this.form.get(S.path)}removeControl(S){br.then(()=>{const m=this._findContainer(S.path);m&&m.removeControl(S.name),this._directives.delete(S)})}addFormGroup(S){br.then(()=>{const m=this._findContainer(S.path),D=new Pn({});Mr(D,S),m.registerControl(S.name,D),D.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(S){br.then(()=>{const m=this._findContainer(S.path);m&&m.removeControl(S.name)})}getFormGroup(S){return this.form.get(S.path)}updateModel(S,m){br.then(()=>{this.form.get(S.path).setValue(m)})}setValue(S){this.control.setValue(S)}onSubmit(S){return this.submitted=!0,hr(this.form,this._directives),this.ngSubmit.emit(S),!1}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(S){return S.pop(),S.length?this.form.get(S):this.form}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(Le,10),p.Y36(je,10))},N.\u0275dir=p.lG2({type:N,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(S,m){1&S&&p.NdJ("submit",function(z){return m.onSubmit(z)})("reset",function(){return m.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Ji]),p.qOj]}),N})();const te={provide:vn,useExisting:(0,p.Gpc)(()=>at)},xe=(()=>Promise.resolve(null))();let at=(()=>{class N extends vn{constructor(S,m,D,z,ee){super(),this._changeDetectorRef=ee,this.control=new jr,this._registered=!1,this.update=new p.vpe,this._parent=S,this._setValidators(m),this._setAsyncValidators(D),this.valueAccessor=sr(0,z)}ngOnChanges(S){if(this._checkForErrors(),!this._registered||"name"in S){if(this._registered&&(this._checkName(),this.formDirective)){const m=S.name.previousValue;this.formDirective.removeControl({name:m,path:this._getPath(m)})}this._setUpControl()}"isDisabled"in S&&this._updateDisabled(S),pi(S,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Tt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(S){xe.then(()=>{var m;this.control.setValue(S,{emitViewToModelChange:!1}),null===(m=this._changeDetectorRef)||void 0===m||m.markForCheck()})}_updateDisabled(S){const m=S.isDisabled.currentValue,D=""===m||m&&"false"!==m;xe.then(()=>{var z;D&&!this.control.disabled?this.control.disable():!D&&this.control.disabled&&this.control.enable(),null===(z=this._changeDetectorRef)||void 0===z||z.markForCheck()})}_getPath(S){return this._parent?function kt(N,M){return[...M.path,N]}(S,this._parent):[S]}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(on,9),p.Y36(Le,10),p.Y36(je,10),p.Y36(Ze,10),p.Y36(p.sBO,8))},N.\u0275dir=p.lG2({type:N,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([te]),p.qOj,p.TTD]}),N})(),cn=(()=>{class N{}return N.\u0275fac=function(S){return new(S||N)},N.\u0275dir=p.lG2({type:N,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),N})(),_t=(()=>{class N{}return N.\u0275fac=function(S){return new(S||N)},N.\u0275mod=p.oAB({type:N}),N.\u0275inj=p.cJS({}),N})();const Mi=new p.OlP("NgModelWithFormControlWarning"),ts={provide:vn,useExisting:(0,p.Gpc)(()=>gi)};let gi=(()=>{class N extends vn{constructor(S,m,D,z){super(),this._ngModelWarningConfig=z,this.update=new p.vpe,this._ngModelWarningSent=!1,this._setValidators(S),this._setAsyncValidators(m),this.valueAccessor=sr(0,D)}set isDisabled(S){}ngOnChanges(S){if(this._isControlChanged(S)){const m=S.form.previousValue;m&&zt(m,this,!1),Tt(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}pi(S,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&zt(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}_isControlChanged(S){return S.hasOwnProperty("form")}}return N._ngModelWarningSentOnce=!1,N.\u0275fac=function(S){return new(S||N)(p.Y36(Le,10),p.Y36(je,10),p.Y36(Ze,10),p.Y36(Mi,8))},N.\u0275dir=p.lG2({type:N,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[p._Bn([ts]),p.qOj,p.TTD]}),N})();const Ei={provide:on,useExisting:(0,p.Gpc)(()=>Vi)};let Vi=(()=>{class N extends on{constructor(S,m){super(),this.validators=S,this.asyncValidators=m,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(S),this._setAsyncValidators(m)}ngOnChanges(S){this._checkFormPresent(),S.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(S){const m=this.form.get(S.path);return Tt(m,S),m.updateValueAndValidity({emitEvent:!1}),this.directives.push(S),m}getControl(S){return this.form.get(S.path)}removeControl(S){zt(S.control||null,S,!1),Xn(this.directives,S)}addFormGroup(S){this._setUpFormContainer(S)}removeFormGroup(S){this._cleanUpFormContainer(S)}getFormGroup(S){return this.form.get(S.path)}addFormArray(S){this._setUpFormContainer(S)}removeFormArray(S){this._cleanUpFormContainer(S)}getFormArray(S){return this.form.get(S.path)}updateModel(S,m){this.form.get(S.path).setValue(m)}onSubmit(S){return this.submitted=!0,hr(this.form,this.directives),this.ngSubmit.emit(S),!1}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_updateDomValue(){this.directives.forEach(S=>{const m=S.control,D=this.form.get(S.path);m!==D&&(zt(m||null,S),yn(D)&&(Tt(D,S),S.control=D))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(S){const m=this.form.get(S.path);Mr(m,S),m.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(S){if(this.form){const m=this.form.get(S.path);m&&function wn(N,M){return qe(N,M)}(m,S)&&m.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ce(this.form,this),this._oldForm&&qe(this._oldForm,this)}_checkFormPresent(){}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(Le,10),p.Y36(je,10))},N.\u0275dir=p.lG2({type:N,selectors:[["","formGroup",""]],hostBindings:function(S,m){1&S&&p.NdJ("submit",function(z){return m.onSubmit(z)})("reset",function(){return m.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Ei]),p.qOj,p.TTD]}),N})();const ks={provide:Ze,useExisting:(0,p.Gpc)(()=>rs),multi:!0};function Ns(N,M){return null==N?`${M}`:(M&&"object"==typeof M&&(M="Object"),`${N}: ${M}`.slice(0,50))}let rs=(()=>{class N extends ze{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(S){this._compareWith=S}writeValue(S){this.value=S;const D=Ns(this._getOptionId(S),S);this.setProperty("value",D)}registerOnChange(S){this.onChange=m=>{this.value=this._getOptionValue(m),S(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(S){for(const m of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(m),S))return m;return null}_getOptionValue(S){const m=function vs(N){return N.split(":")[0]}(S);return this._optionMap.has(m)?this._optionMap.get(m):S}}return N.\u0275fac=function(){let M;return function(m){return(M||(M=p.n5z(N)))(m||N)}}(),N.\u0275dir=p.lG2({type:N,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(S,m){1&S&&p.NdJ("change",function(z){return m.onChange(z.target.value)})("blur",function(){return m.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([ks]),p.qOj]}),N})(),Di=(()=>{class N{constructor(S,m,D){this._element=S,this._renderer=m,this._select=D,this._select&&(this.id=this._select._registerOption())}set ngValue(S){null!=this._select&&(this._select._optionMap.set(this.id,S),this._setElementValue(Ns(this.id,S)),this._select.writeValue(this._select.value))}set value(S){this._setElementValue(S),this._select&&this._select.writeValue(this._select.value)}_setElementValue(S){this._renderer.setProperty(this._element.nativeElement,"value",S)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(rs,9))},N.\u0275dir=p.lG2({type:N,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),N})();const ds={provide:Ze,useExisting:(0,p.Gpc)(()=>Wr),multi:!0};function Rs(N,M){return null==N?`${M}`:("string"==typeof M&&(M=`'${M}'`),M&&"object"==typeof M&&(M="Object"),`${N}: ${M}`.slice(0,50))}let Wr=(()=>{class N extends ze{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(S){this._compareWith=S}writeValue(S){let m;if(this.value=S,Array.isArray(S)){const D=S.map(z=>this._getOptionId(z));m=(z,ee)=>{z._setSelected(D.indexOf(ee.toString())>-1)}}else m=(D,z)=>{D._setSelected(!1)};this._optionMap.forEach(m)}registerOnChange(S){this.onChange=m=>{const D=[],z=m.selectedOptions;if(void 0!==z){const ee=z;for(let De=0;De<ee.length;De++){const st=this._getOptionValue(ee[De].value);D.push(st)}}else{const ee=m.options;for(let De=0;De<ee.length;De++){const Ke=ee[De];if(Ke.selected){const st=this._getOptionValue(Ke.value);D.push(st)}}}this.value=D,S(D)}}_registerOption(S){const m=(this._idCounter++).toString();return this._optionMap.set(m,S),m}_getOptionId(S){for(const m of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(m)._value,S))return m;return null}_getOptionValue(S){const m=function ui(N){return N.split(":")[0]}(S);return this._optionMap.has(m)?this._optionMap.get(m)._value:S}}return N.\u0275fac=function(){let M;return function(m){return(M||(M=p.n5z(N)))(m||N)}}(),N.\u0275dir=p.lG2({type:N,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(S,m){1&S&&p.NdJ("change",function(z){return m.onChange(z.target)})("blur",function(){return m.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([ds]),p.qOj]}),N})(),Es=(()=>{class N{constructor(S,m,D){this._element=S,this._renderer=m,this._select=D,this._select&&(this.id=this._select._registerOption(this))}set ngValue(S){null!=this._select&&(this._value=S,this._setElementValue(Rs(this.id,S)),this._select.writeValue(this._select.value))}set value(S){this._select?(this._value=S,this._setElementValue(Rs(this.id,S)),this._select.writeValue(this._select.value)):this._setElementValue(S)}_setElementValue(S){this._renderer.setProperty(this._element.nativeElement,"value",S)}_setSelected(S){this._renderer.setProperty(this._element.nativeElement,"selected",S)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return N.\u0275fac=function(S){return new(S||N)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Wr,9))},N.\u0275dir=p.lG2({type:N,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),N})(),ri=(()=>{class N{constructor(){this._validator=pt}ngOnChanges(S){if(this.inputName in S){const m=this.normalizeInput(S[this.inputName].currentValue);this._enabled=this.enabled(m),this._validator=this._enabled?this.createValidator(m):pt,this._onChange&&this._onChange()}}validate(S){return this._validator(S)}registerOnValidatorChange(S){this._onChange=S}enabled(S){return null!=S}}return N.\u0275fac=function(S){return new(S||N)},N.\u0275dir=p.lG2({type:N,features:[p.TTD]}),N})();const $={provide:Le,useExisting:(0,p.Gpc)(()=>Z),multi:!0};let Z=(()=>{class N extends ri{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=S=>function hs(N){return null!=N&&!1!==N&&"false"!=`${N}`}(S),this.createValidator=S=>de}enabled(S){return S}}return N.\u0275fac=function(){let M;return function(m){return(M||(M=p.n5z(N)))(m||N)}}(),N.\u0275dir=p.lG2({type:N,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(S,m){2&S&&p.uIk("required",m._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([$]),p.qOj]}),N})();const Mn={provide:Le,useExisting:(0,p.Gpc)(()=>Dr),multi:!0};let Dr=(()=>{class N extends ri{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=S=>S,this.createValidator=S=>Lt(S)}}return N.\u0275fac=function(){let M;return function(m){return(M||(M=p.n5z(N)))(m||N)}}(),N.\u0275dir=p.lG2({type:N,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(S,m){2&S&&p.uIk("pattern",m._enabled?m.pattern:null)},inputs:{pattern:"pattern"},features:[p._Bn([Mn]),p.qOj]}),N})(),ii=(()=>{class N{}return N.\u0275fac=function(S){return new(S||N)},N.\u0275mod=p.oAB({type:N}),N.\u0275inj=p.cJS({imports:[[_t]]}),N})(),dn=(()=>{class N{}return N.\u0275fac=function(S){return new(S||N)},N.\u0275mod=p.oAB({type:N}),N.\u0275inj=p.cJS({imports:[ii]}),N})(),Ci=(()=>{class N{static withConfig(S){return{ngModule:N,providers:[{provide:Mi,useValue:S.warnOnNgModelWithFormControl}]}}}return N.\u0275fac=function(S){return new(S||N)},N.\u0275mod=p.oAB({type:N}),N.\u0275inj=p.cJS({imports:[ii]}),N})()},991:(Mt,We,k)=>{k.d(We,{gz:()=>wr,gk:()=>Rt,m2:()=>qt,GH:()=>cr,xV:()=>Bn,F0:()=>Oi,Od:()=>ps,yS:()=>$a,Bz:()=>gu,lC:()=>vs});var p=k(5e3),K=k(9751),Y=k(576);function we(C,w){const v=(0,Y.m)(C)?C:()=>C,x=L=>L.error(v());return new K.y(w?L=>w.schedule(x,0,L):x)}var me=k(8421);function Ae(C){return new K.y(w=>{(0,me.Xf)(C()).subscribe(w)})}var Oe=k(727),Re=k(4482),Fe=k(5403);function ue(){return(0,Re.e)((C,w)=>{let v=null;C._refCount++;const x=(0,Fe.x)(w,void 0,void 0,void 0,()=>{if(!C||C._refCount<=0||0<--C._refCount)return void(v=null);const L=C._connection,q=v;v=null,L&&(!q||L===q)&&L.unsubscribe(),w.unsubscribe()});C.subscribe(x),x.closed||(v=C.connect())})}class re extends K.y{constructor(w,v){super(),this.source=w,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,Re.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,null==w||w.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new Oe.w0;const v=this.getSubject();w.add(this.source.subscribe((0,Fe.x)(v,void 0,()=>{this._teardown(),v.complete()},x=>{this._teardown(),v.error(x)},()=>this._teardown()))),w.closed&&(this._connection=null,w=Oe.w0.EMPTY)}return w}refCount(){return ue()(this)}}var _e=k(8996),He=k(9646),ze=k(1135),Ze=k(9841),ct=k(6805),Be=k(7272),ke=k(515),vt=k(7579);function j(C){return(0,Re.e)((w,v)=>{let q,x=null,L=!1;x=w.subscribe((0,Fe.x)(v,void 0,void 0,se=>{q=(0,me.Xf)(C(se,j(C)(w))),x?(x.unsubscribe(),x=null,q.subscribe(v)):L=!0})),L&&(x.unsubscribe(),x=null,q.subscribe(v))})}var F=k(5577);function J(C,w){return(0,Y.m)(w)?(0,F.z)(C,w,1):(0,F.z)(C,1)}var le=k(4004),Le=k(3900),je=k(5698),Ne=k(8675),Ie=k(5026),Q=k(9300),Se=k(3103),de=k(590),Ye=k(8505),$e=k(2035),Wt=k(8746),It=k(8189),Lt=k(9808);class pt{constructor(w,v){this.id=w,this.url=v}}class bt extends pt{constructor(w,v,x="imperative",L=null){super(w,v),this.navigationTrigger=x,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qt extends pt{constructor(w,v,x){super(w,v),this.urlAfterRedirects=x}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rt extends pt{constructor(w,v,x){super(w,v),this.reason=x}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vt extends pt{constructor(w,v,x){super(w,v),this.error=x}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lt extends pt{constructor(w,v,x,L){super(w,v),this.urlAfterRedirects=x,this.state=L}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pn extends pt{constructor(w,v,x,L){super(w,v),this.urlAfterRedirects=x,this.state=L}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class en extends pt{constructor(w,v,x,L,q){super(w,v),this.urlAfterRedirects=x,this.state=L,this.shouldActivate=q}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mn extends pt{constructor(w,v,x,L){super(w,v),this.urlAfterRedirects=x,this.state=L}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qn extends pt{constructor(w,v,x,L){super(w,v),this.urlAfterRedirects=x,this.state=L}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bn{constructor(w){this.route=w}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cr{constructor(w){this.route=w}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rr{constructor(w){this.snapshot=w}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tr{constructor(w){this.snapshot=w}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zn{constructor(w){this.snapshot=w}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ar{constructor(w){this.snapshot=w}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jn{constructor(w,v,x){this.routerEvent=w,this.position=v,this.anchor=x}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ht="primary";class Qt{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const v=this.params[w];return Array.isArray(v)?v[0]:v}return null}getAll(w){if(this.has(w)){const v=this.params[w];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function vn(C){return new Qt(C)}const on="ngNavigationCancelingError";function Nr(C){const w=Error("NavigationCancelingError: "+C);return w[on]=!0,w}function ir(C,w,v){const x=v.path.split("/");if(x.length>C.length||"full"===v.pathMatch&&(w.hasChildren()||x.length<C.length))return null;const L={};for(let q=0;q<x.length;q++){const se=x[q],ve=C[q];if(se.startsWith(":"))L[se.substring(1)]=ve;else if(se!==ve.path)return null}return{consumed:C.slice(0,x.length),posParams:L}}function yr(C,w){const v=C?Object.keys(C):void 0,x=w?Object.keys(w):void 0;if(!v||!x||v.length!=x.length)return!1;let L;for(let q=0;q<v.length;q++)if(L=v[q],!Br(C[L],w[L]))return!1;return!0}function Br(C,w){if(Array.isArray(C)&&Array.isArray(w)){if(C.length!==w.length)return!1;const v=[...C].sort(),x=[...w].sort();return v.every((L,q)=>x[q]===L)}return C===w}function En(C){return Array.prototype.concat.apply([],C)}function jt(C){return C.length>0?C[C.length-1]:null}function Sn(C,w){for(const v in C)C.hasOwnProperty(v)&&w(C[v],v)}function dr(C){return(0,p.CqO)(C)?C:(0,p.QGY)(C)?(0,_e.D)(Promise.resolve(C)):(0,He.of)(C)}const _i={exact:function Sr(C,w,v){if(!ie(C.segments,w.segments)||!Ut(C.segments,w.segments,v)||C.numberOfChildren!==w.numberOfChildren)return!1;for(const x in w.children)if(!C.children[x]||!Sr(C.children[x],w.children[x],v))return!1;return!0},subset:Pt},_r={exact:function tn(C,w){return yr(C,w)},subset:function In(C,w){return Object.keys(w).length<=Object.keys(C).length&&Object.keys(w).every(v=>Br(C[v],w[v]))},ignored:()=>!0};function Lr(C,w,v){return _i[v.paths](C.root,w.root,v.matrixParams)&&_r[v.queryParams](C.queryParams,w.queryParams)&&!("exact"===v.fragment&&C.fragment!==w.fragment)}function Pt(C,w,v){return ot(C,w,w.segments,v)}function ot(C,w,v,x){if(C.segments.length>v.length){const L=C.segments.slice(0,v.length);return!(!ie(L,v)||w.hasChildren()||!Ut(L,v,x))}if(C.segments.length===v.length){if(!ie(C.segments,v)||!Ut(C.segments,v,x))return!1;for(const L in w.children)if(!C.children[L]||!Pt(C.children[L],w.children[L],x))return!1;return!0}{const L=v.slice(0,C.segments.length),q=v.slice(C.segments.length);return!!(ie(C.segments,L)&&Ut(C.segments,L,x)&&C.children[ht])&&ot(C.children[ht],w,q,x)}}function Ut(C,w,v){return w.every((x,L)=>_r[v](C[L].parameters,x.parameters))}class kt{constructor(w,v,x){this.root=w,this.queryParams=v,this.fragment=x}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vn(this.queryParams)),this._queryParamMap}toString(){return Ct.serialize(this)}}class Tt{constructor(w,v){this.segments=w,this.children=v,this.parent=null,Sn(v,(x,L)=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kt(this)}}class zt{constructor(w,v){this.path=w,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=vn(this.parameters)),this._parameterMap}toString(){return pi(this)}}function ie(C,w){return C.length===w.length&&C.every((v,x)=>v.path===w[x].path)}class qe{}class Ve{parse(w){const v=new hn(w);return new kt(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(w){const v=`/${Tn(w.root,!0)}`,x=function hr(C){const w=Object.keys(C).map(v=>{const x=C[v];return Array.isArray(x)?x.map(L=>`${wn(v)}=${wn(L)}`).join("&"):`${wn(v)}=${wn(x)}`}).filter(v=>!!v);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${v}${x}${"string"==typeof w.fragment?`#${function nr(C){return encodeURI(C)}(w.fragment)}`:""}`}}const Ct=new Ve;function Kt(C){return C.segments.map(w=>pi(w)).join("/")}function Tn(C,w){if(!C.hasChildren())return Kt(C);if(w){const v=C.children[ht]?Tn(C.children[ht],!1):"",x=[];return Sn(C.children,(L,q)=>{q!==ht&&x.push(`${q}:${Tn(L,!1)}`)}),x.length>0?`${v}(${x.join("//")})`:v}{const v=function Ce(C,w){let v=[];return Sn(C.children,(x,L)=>{L===ht&&(v=v.concat(w(x,L)))}),Sn(C.children,(x,L)=>{L!==ht&&(v=v.concat(w(x,L)))}),v}(C,(x,L)=>L===ht?[Tn(C.children[ht],!1)]:[`${L}:${Tn(x,!1)}`]);return 1===Object.keys(C.children).length&&null!=C.children[ht]?`${Kt(C)}/${v[0]}`:`${Kt(C)}/(${v.join("//")})`}}function Mr(C){return encodeURIComponent(C).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wn(C){return Mr(C).replace(/%3B/gi,";")}function nn(C){return Mr(C).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nn(C){return decodeURIComponent(C)}function vr(C){return Nn(C.replace(/\+/g,"%20"))}function pi(C){return`${nn(C.path)}${function ls(C){return Object.keys(C).map(w=>`;${nn(w)}=${nn(C[w])}`).join("")}(C.parameters)}`}const sr=/^[^\/()?;=#]+/;function Xn(C){const w=C.match(sr);return w?w[0]:""}const Gi=/^[^=?&#]+/,dt=/^[^&#]+/;class hn{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tt([],{}):new Tt([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(w.length>0||Object.keys(v).length>0)&&(x[ht]=new Tt(w,v)),x}parseSegment(){const w=Xn(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(w),new zt(Nn(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const v=Xn(this.remaining);if(!v)return;this.capture(v);let x="";if(this.consumeOptional("=")){const L=Xn(this.remaining);L&&(x=L,this.capture(x))}w[Nn(v)]=Nn(x)}parseQueryParam(w){const v=function Zr(C){const w=C.match(Gi);return w?w[0]:""}(this.remaining);if(!v)return;this.capture(v);let x="";if(this.consumeOptional("=")){const se=function $t(C){const w=C.match(dt);return w?w[0]:""}(this.remaining);se&&(x=se,this.capture(x))}const L=vr(v),q=vr(x);if(w.hasOwnProperty(L)){let se=w[L];Array.isArray(se)||(se=[se],w[L]=se),se.push(q)}else w[L]=q}parseParens(w){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=Xn(this.remaining),L=this.remaining[x.length];if("/"!==L&&")"!==L&&";"!==L)throw new Error(`Cannot parse url '${this.url}'`);let q;x.indexOf(":")>-1?(q=x.substr(0,x.indexOf(":")),this.capture(q),this.capture(":")):w&&(q=ht);const se=this.parseChildren();v[q]=1===Object.keys(se).length?se[ht]:new Tt([],se),this.consumeOptional("//")}return v}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new Error(`Expected "${w}".`)}}class er{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const v=this.pathFromRoot(w);return v.length>1?v[v.length-2]:null}children(w){const v=ei(w,this._root);return v?v.children.map(x=>x.value):[]}firstChild(w){const v=ei(w,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(w){const v=or(w,this._root);return v.length<2?[]:v[v.length-2].children.map(L=>L.value).filter(L=>L!==w)}pathFromRoot(w){return or(w,this._root).map(v=>v.value)}}function ei(C,w){if(C===w.value)return w;for(const v of w.children){const x=ei(C,v);if(x)return x}return null}function or(C,w){if(C===w.value)return[w];for(const v of w.children){const x=or(C,v);if(x.length)return x.unshift(w),x}return[]}class xr{constructor(w,v){this.value=w,this.children=v}toString(){return`TreeNode(${this.value})`}}function On(C){const w={};return C&&C.children.forEach(v=>w[v.value.outlet]=v),w}class Er extends er{constructor(w,v){super(w),this.snapshot=v,Vr(this,w)}toString(){return this.snapshot.toString()}}function ai(C,w){const v=function yn(C,w){const se=new Yr([],{},{},"",{},ht,w,null,C.root,-1,{});return new Rr("",new xr(se,[]))}(C,w),x=new ze.X([new zt("",{})]),L=new ze.X({}),q=new ze.X({}),se=new ze.X({}),ve=new ze.X(""),Ee=new wr(x,L,se,ve,q,ht,w,v.root);return Ee.snapshot=v.root,new Er(new xr(Ee,[]),v)}class wr{constructor(w,v,x,L,q,se,ve,Ee){this.url=w,this.params=v,this.queryParams=x,this.fragment=L,this.data=q,this.outlet=se,this.component=ve,this._futureSnapshot=Ee}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,le.U)(w=>vn(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,le.U)(w=>vn(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vi(C,w="emptyOnly"){const v=C.pathFromRoot;let x=0;if("always"!==w)for(x=v.length-1;x>=1;){const L=v[x],q=v[x-1];if(L.routeConfig&&""===L.routeConfig.path)x--;else{if(q.component)break;x--}}return function Li(C){return C.reduce((w,v)=>({params:Object.assign(Object.assign({},w.params),v.params),data:Object.assign(Object.assign({},w.data),v.data),resolve:Object.assign(Object.assign({},w.resolve),v._resolvedData)}),{params:{},data:{},resolve:{}})}(v.slice(x))}class Yr{constructor(w,v,x,L,q,se,ve,Ee,wt,xn,un){this.url=w,this.params=v,this.queryParams=x,this.fragment=L,this.data=q,this.outlet=se,this.component=ve,this.routeConfig=Ee,this._urlSegment=wt,this._lastPathIndex=xn,this._resolve=un}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rr extends er{constructor(w,v){super(v),this.url=w,Vr(this,v)}toString(){return jr(this._root)}}function Vr(C,w){w.value._routerState=C,w.children.forEach(v=>Vr(C,v))}function jr(C){const w=C.children.length>0?` { ${C.children.map(jr).join(", ")} } `:"";return`${C.value}${w}`}function Pn(C){if(C.snapshot){const w=C.snapshot,v=C._futureSnapshot;C.snapshot=v,yr(w.queryParams,v.queryParams)||C.queryParams.next(v.queryParams),w.fragment!==v.fragment&&C.fragment.next(v.fragment),yr(w.params,v.params)||C.params.next(v.params),function Fr(C,w){if(C.length!==w.length)return!1;for(let v=0;v<C.length;++v)if(!yr(C[v],w[v]))return!1;return!0}(w.url,v.url)||C.url.next(v.url),yr(w.data,v.data)||C.data.next(v.data)}else C.snapshot=C._futureSnapshot,C.data.next(C._futureSnapshot.data)}function Fn(C,w){const v=yr(C.params,w.params)&&function pe(C,w){return ie(C,w)&&C.every((v,x)=>yr(v.parameters,w[x].parameters))}(C.url,w.url);return v&&!(!C.parent!=!w.parent)&&(!C.parent||Fn(C.parent,w.parent))}function br(C,w,v){if(v&&C.shouldReuseRoute(w.value,v.value.snapshot)){const x=v.value;x._futureSnapshot=w.value;const L=function $r(C,w,v){return w.children.map(x=>{for(const L of v.children)if(C.shouldReuseRoute(x.value,L.value.snapshot))return br(C,x,L);return br(C,x)})}(C,w,v);return new xr(x,L)}{if(C.shouldAttach(w.value)){const q=C.retrieve(w.value);if(null!==q){const se=q.route;return se.value._futureSnapshot=w.value,se.children=w.children.map(ve=>br(C,ve)),se}}const x=function ti(C){return new wr(new ze.X(C.url),new ze.X(C.params),new ze.X(C.queryParams),new ze.X(C.fragment),new ze.X(C.data),C.outlet,C.component,C)}(w.value),L=w.children.map(q=>br(C,q));return new xr(x,L)}}function ar(C){return"object"==typeof C&&null!=C&&!C.outlets&&!C.segmentPath}function es(C){return"object"==typeof C&&null!=C&&C.outlets}function Qr(C,w,v,x,L){let q={};if(x&&Sn(x,(ve,Ee)=>{q[Ee]=Array.isArray(ve)?ve.map(wt=>`${wt}`):`${ve}`}),C===w)return new kt(v,q,L);const se=ce(C,w,v);return new kt(se,q,L)}function ce(C,w,v){const x={};return Sn(C.children,(L,q)=>{x[q]=L===w?v:ce(L,w,v)}),new Tt(C.segments,x)}class fe{constructor(w,v,x){if(this.isAbsolute=w,this.numberOfDoubleDots=v,this.commands=x,w&&x.length>0&&ar(x[0]))throw new Error("Root segment cannot have matrix parameters");const L=x.find(es);if(L&&L!==jt(x))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xe{constructor(w,v,x){this.segmentGroup=w,this.processChildren=v,this.index=x}}function ye(C,w,v){if(C||(C=new Tt([],{})),0===C.segments.length&&C.hasChildren())return Ue(C,w,v);const x=function rt(C,w,v){let x=0,L=w;const q={match:!1,pathIndex:0,commandIndex:0};for(;L<C.segments.length;){if(x>=v.length)return q;const se=C.segments[L],ve=v[x];if(es(ve))break;const Ee=`${ve}`,wt=x<v.length-1?v[x+1]:null;if(L>0&&void 0===Ee)break;if(Ee&&wt&&"object"==typeof wt&&void 0===wt.outlets){if(!Hr(Ee,wt,se))return q;x+=2}else{if(!Hr(Ee,{},se))return q;x++}L++}return{match:!0,pathIndex:L,commandIndex:x}}(C,w,v),L=v.slice(x.commandIndex);if(x.match&&x.pathIndex<C.segments.length){const q=new Tt(C.segments.slice(0,x.pathIndex),{});return q.children[ht]=new Tt(C.segments.slice(x.pathIndex),C.children),Ue(q,0,L)}return x.match&&0===L.length?new Tt(C.segments,{}):x.match&&!C.hasChildren()?_t(C,w,v):x.match?Ue(C,0,L):_t(C,w,v)}function Ue(C,w,v){if(0===v.length)return new Tt(C.segments,{});{const x=function he(C){return es(C[0])?C[0].outlets:{[ht]:C}}(v),L={};return Sn(x,(q,se)=>{"string"==typeof q&&(q=[q]),null!==q&&(L[se]=ye(C.children[se],w,q))}),Sn(C.children,(q,se)=>{void 0===x[se]&&(L[se]=q)}),new Tt(C.segments,L)}}function _t(C,w,v){const x=C.segments.slice(0,w);let L=0;for(;L<v.length;){const q=v[L];if(es(q)){const Ee=Zt(q.outlets);return new Tt(x,Ee)}if(0===L&&ar(v[0])){x.push(new zt(C.segments[w].path,$n(v[0]))),L++;continue}const se=es(q)?q.outlets[ht]:`${q}`,ve=L<v.length-1?v[L+1]:null;se&&ve&&ar(ve)?(x.push(new zt(se,$n(ve))),L+=2):(x.push(new zt(se,{})),L++)}return new Tt(x,{})}function Zt(C){const w={};return Sn(C,(v,x)=>{"string"==typeof v&&(v=[v]),null!==v&&(w[x]=_t(new Tt([],{}),0,v))}),w}function $n(C){const w={};return Sn(C,(v,x)=>w[x]=`${v}`),w}function Hr(C,w,v){return C==v.path&&yr(w,v.parameters)}class Mi{constructor(w,v,x,L){this.routeReuseStrategy=w,this.futureState=v,this.currState=x,this.forwardEvent=L}activate(w){const v=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,x,w),Pn(this.futureState.root),this.activateChildRoutes(v,x,w)}deactivateChildRoutes(w,v,x){const L=On(v);w.children.forEach(q=>{const se=q.value.outlet;this.deactivateRoutes(q,L[se],x),delete L[se]}),Sn(L,(q,se)=>{this.deactivateRouteAndItsChildren(q,x)})}deactivateRoutes(w,v,x){const L=w.value,q=v?v.value:null;if(L===q)if(L.component){const se=x.getContext(L.outlet);se&&this.deactivateChildRoutes(w,v,se.children)}else this.deactivateChildRoutes(w,v,x);else q&&this.deactivateRouteAndItsChildren(v,x)}deactivateRouteAndItsChildren(w,v){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,v):this.deactivateRouteAndOutlet(w,v)}detachAndStoreRouteSubtree(w,v){const x=v.getContext(w.value.outlet),L=x&&w.value.component?x.children:v,q=On(w);for(const se of Object.keys(q))this.deactivateRouteAndItsChildren(q[se],L);if(x&&x.outlet){const se=x.outlet.detach(),ve=x.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:se,route:w,contexts:ve})}}deactivateRouteAndOutlet(w,v){const x=v.getContext(w.value.outlet),L=x&&w.value.component?x.children:v,q=On(w);for(const se of Object.keys(q))this.deactivateRouteAndItsChildren(q[se],L);x&&x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated(),x.attachRef=null,x.resolver=null,x.route=null)}activateChildRoutes(w,v,x){const L=On(v);w.children.forEach(q=>{this.activateRoutes(q,L[q.value.outlet],x),this.forwardEvent(new Ar(q.value.snapshot))}),w.children.length&&this.forwardEvent(new Tr(w.value.snapshot))}activateRoutes(w,v,x){const L=w.value,q=v?v.value:null;if(Pn(L),L===q)if(L.component){const se=x.getOrCreateContext(L.outlet);this.activateChildRoutes(w,v,se.children)}else this.activateChildRoutes(w,v,x);else if(L.component){const se=x.getOrCreateContext(L.outlet);if(this.routeReuseStrategy.shouldAttach(L.snapshot)){const ve=this.routeReuseStrategy.retrieve(L.snapshot);this.routeReuseStrategy.store(L.snapshot,null),se.children.onOutletReAttached(ve.contexts),se.attachRef=ve.componentRef,se.route=ve.route.value,se.outlet&&se.outlet.attach(ve.componentRef,ve.route.value),Pn(ve.route.value),this.activateChildRoutes(w,null,se.children)}else{const ve=function ts(C){for(let w=C.parent;w;w=w.parent){const v=w.routeConfig;if(v&&v._loadedConfig)return v._loadedConfig;if(v&&v.component)return null}return null}(L.snapshot),Ee=ve?ve.module.componentFactoryResolver:null;se.attachRef=null,se.route=L,se.resolver=Ee,se.outlet&&se.outlet.activateWith(L,Ee),this.activateChildRoutes(w,null,se.children)}}else this.activateChildRoutes(w,null,x)}}class gi{constructor(w,v){this.routes=w,this.module=v}}function Ei(C){return"function"==typeof C}function ns(C){return C instanceof kt}const wi=Symbol("INITIAL_VALUE");function Ii(){return(0,Le.w)(C=>(0,Ze.a)(C.map(w=>w.pipe((0,je.q)(1),(0,Ne.O)(wi)))).pipe((0,Ie.R)((w,v)=>{let x=!1;return v.reduce((L,q,se)=>L!==wi?L:(q===wi&&(x=!0),x||!1!==q&&se!==v.length-1&&!ns(q)?L:q),w)},wi),(0,Q.h)(w=>w!==wi),(0,le.U)(w=>ns(w)?w:!0===w),(0,je.q)(1)))}class ks{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ns,this.attachRef=null}}class Ns{constructor(){this.contexts=new Map}onChildOutletCreated(w,v){const x=this.getOrCreateContext(w);x.outlet=v,this.contexts.set(w,x)}onChildOutletDestroyed(w){const v=this.getContext(w);v&&(v.outlet=null,v.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let v=this.getContext(w);return v||(v=new ks,this.contexts.set(w,v)),v}getContext(w){return this.contexts.get(w)||null}}let vs=(()=>{class C{constructor(v,x,L,q,se){this.parentContexts=v,this.location=x,this.resolver=L,this.changeDetector=se,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=q||ht,v.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const v=this.parentContexts.getContext(this.name);v&&v.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,x){this.activated=v,this._activatedRoute=x,this.location.insert(v.hostView),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,x){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=v;const se=(x=x||this.resolver).resolveComponentFactory(v._futureSnapshot.routeConfig.component),ve=this.parentContexts.getOrCreateContext(this.name).children,Ee=new rs(v,ve,this.location.injector);this.activated=this.location.createComponent(se,this.location.length,Ee),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return C.\u0275fac=function(v){return new(v||C)(p.Y36(Ns),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},C.\u0275dir=p.lG2({type:C,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),C})();class rs{constructor(w,v,x){this.route=w,this.childContexts=v,this.parent=x}get(w,v){return w===wr?this.route:w===Ns?this.childContexts:this.parent.get(w,v)}}let Di=(()=>{class C{}return C.\u0275fac=function(v){return new(v||C)},C.\u0275cmp=p.Xpm({type:C,selectors:[["ng-component"]],decls:1,vars:0,template:function(v,x){1&v&&p._UZ(0,"router-outlet")},directives:[vs],encapsulation:2}),C})();function ds(C,w=""){for(let v=0;v<C.length;v++){const x=C[v];Rs(x,ui(w,x))}}function Rs(C,w){C.children&&ds(C.children,w)}function ui(C,w){return w?C||w.path?C&&!w.path?`${C}/`:!C&&w.path?w.path:`${C}/${w.path}`:"":C}function Gr(C){const w=C.children&&C.children.map(Gr),v=w?Object.assign(Object.assign({},C),{children:w}):Object.assign({},C);return!v.component&&(w||v.loadChildren)&&v.outlet&&v.outlet!==ht&&(v.component=Di),v}function Wr(C){return C.outlet||ht}function Es(C,w){const v=C.filter(x=>Wr(x)===w);return v.push(...C.filter(x=>Wr(x)!==w)),v}const Fs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hs(C,w,v){var x;if(""===w.path)return"full"===w.pathMatch&&(C.hasChildren()||v.length>0)?Object.assign({},Fs):{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const q=(w.matcher||ir)(v,C,w);if(!q)return Object.assign({},Fs);const se={};Sn(q.posParams,(Ee,wt)=>{se[wt]=Ee.path});const ve=q.consumed.length>0?Object.assign(Object.assign({},se),q.consumed[q.consumed.length-1].parameters):se;return{matched:!0,consumedSegments:q.consumed,remainingSegments:v.slice(q.consumed.length),parameters:ve,positionalParamSegments:null!==(x=q.posParams)&&void 0!==x?x:{}}}function Ui(C,w,v,x,L="corrected"){if(v.length>0&&function Ws(C,w,v){return v.some(x=>O(C,w,x)&&Wr(x)!==ht)}(C,v,x)){const se=new Tt(w,function is(C,w,v,x){const L={};L[ht]=x,x._sourceSegment=C,x._segmentIndexShift=w.length;for(const q of v)if(""===q.path&&Wr(q)!==ht){const se=new Tt([],{});se._sourceSegment=C,se._segmentIndexShift=w.length,L[Wr(q)]=se}return L}(C,w,x,new Tt(v,C.children)));return se._sourceSegment=C,se._segmentIndexShift=w.length,{segmentGroup:se,slicedSegments:[]}}if(0===v.length&&function Ir(C,w,v){return v.some(x=>O(C,w,x))}(C,v,x)){const se=new Tt(C.segments,function ri(C,w,v,x,L,q){const se={};for(const ve of x)if(O(C,v,ve)&&!L[Wr(ve)]){const Ee=new Tt([],{});Ee._sourceSegment=C,Ee._segmentIndexShift="legacy"===q?C.segments.length:w.length,se[Wr(ve)]=Ee}return Object.assign(Object.assign({},L),se)}(C,w,v,x,C.children,L));return se._sourceSegment=C,se._segmentIndexShift=w.length,{segmentGroup:se,slicedSegments:v}}const q=new Tt(C.segments,C.children);return q._sourceSegment=C,q._segmentIndexShift=w.length,{segmentGroup:q,slicedSegments:v}}function O(C,w,v){return(!(C.hasChildren()||w.length>0)||"full"!==v.pathMatch)&&""===v.path}function $(C,w,v,x){return!!(Wr(C)===x||x!==ht&&O(w,v,C))&&("**"===C.path||hs(w,C,v).matched)}function R(C,w,v){return 0===w.length&&!C.children[v]}class Z{constructor(w){this.segmentGroup=w||null}}class ge{constructor(w){this.urlTree=w}}function Xe(C){return we(new Z(C))}function tt(C){return we(new ge(C))}class Dn{constructor(w,v,x,L,q){this.configLoader=v,this.urlSerializer=x,this.urlTree=L,this.config=q,this.allowRedirects=!0,this.ngModule=w.get(p.h0i)}apply(){const w=Ui(this.urlTree.root,[],[],this.config).segmentGroup,v=new Tt(w.segments,w.children);return this.expandSegmentGroup(this.ngModule,this.config,v,ht).pipe((0,le.U)(q=>this.createUrlTree(Dr(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(j(q=>{if(q instanceof ge)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof Z?this.noMatchError(q):q}))}match(w){return this.expandSegmentGroup(this.ngModule,this.config,w.root,ht).pipe((0,le.U)(L=>this.createUrlTree(Dr(L),w.queryParams,w.fragment))).pipe(j(L=>{throw L instanceof Z?this.noMatchError(L):L}))}noMatchError(w){return new Error(`Cannot match any routes. URL Segment: '${w.segmentGroup}'`)}createUrlTree(w,v,x){const L=w.segments.length>0?new Tt([],{[ht]:w}):w;return new kt(L,v,x)}expandSegmentGroup(w,v,x,L){return 0===x.segments.length&&x.hasChildren()?this.expandChildren(w,v,x).pipe((0,le.U)(q=>new Tt([],q))):this.expandSegment(w,x,v,x.segments,L,!0)}expandChildren(w,v,x){const L=[];for(const q of Object.keys(x.children))"primary"===q?L.unshift(q):L.push(q);return(0,_e.D)(L).pipe(J(q=>{const se=x.children[q],ve=Es(v,q);return this.expandSegmentGroup(w,ve,se,q).pipe((0,le.U)(Ee=>({segment:Ee,outlet:q})))}),(0,Ie.R)((q,se)=>(q[se.outlet]=se.segment,q),{}),(0,Se.Z)())}expandSegment(w,v,x,L,q,se){return(0,_e.D)(x).pipe(J(ve=>this.expandSegmentAgainstRoute(w,v,x,ve,L,q,se).pipe(j(wt=>{if(wt instanceof Z)return(0,He.of)(null);throw wt}))),(0,de.P)(ve=>!!ve),j((ve,Ee)=>{if(ve instanceof ct.K||"EmptyError"===ve.name)return R(v,L,q)?(0,He.of)(new Tt([],{})):Xe(v);throw ve}))}expandSegmentAgainstRoute(w,v,x,L,q,se,ve){return $(L,v,q,se)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(w,v,L,q,se):ve&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,v,x,L,q,se):Xe(v):Xe(v)}expandSegmentAgainstRouteUsingRedirect(w,v,x,L,q,se){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,x,L,se):this.expandRegularSegmentAgainstRouteUsingRedirect(w,v,x,L,q,se)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,v,x,L){const q=this.applyRedirectCommands([],x.redirectTo,{});return x.redirectTo.startsWith("/")?tt(q):this.lineralizeSegments(x,q).pipe((0,F.z)(se=>{const ve=new Tt(se,{});return this.expandSegment(w,ve,v,se,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,v,x,L,q,se){const{matched:ve,consumedSegments:Ee,remainingSegments:wt,positionalParamSegments:xn}=hs(v,L,q);if(!ve)return Xe(v);const un=this.applyRedirectCommands(Ee,L.redirectTo,xn);return L.redirectTo.startsWith("/")?tt(un):this.lineralizeSegments(L,un).pipe((0,F.z)(Et=>this.expandSegment(w,v,x,Et.concat(wt),se,!1)))}matchSegmentAgainstRoute(w,v,x,L,q){if("**"===x.path)return x.loadChildren?(x._loadedConfig?(0,He.of)(x._loadedConfig):this.configLoader.load(w.injector,x)).pipe((0,le.U)(un=>(x._loadedConfig=un,new Tt(L,{})))):(0,He.of)(new Tt(L,{}));const{matched:se,consumedSegments:ve,remainingSegments:Ee}=hs(v,x,L);return se?this.getChildConfig(w,x,L).pipe((0,F.z)(xn=>{const un=xn.module,Et=xn.routes,{segmentGroup:Ft,slicedSegments:ws}=Ui(v,ve,Ee,Et),St=new Tt(Ft.segments,Ft.children);if(0===ws.length&&St.hasChildren())return this.expandChildren(un,Et,St).pipe((0,le.U)(js=>new Tt(ve,js)));if(0===Et.length&&0===ws.length)return(0,He.of)(new Tt(ve,{}));const et=Wr(x)===q;return this.expandSegment(un,St,Et,ws,et?ht:q,!0).pipe((0,le.U)(Xr=>new Tt(ve.concat(Xr.segments),Xr.children)))})):Xe(v)}getChildConfig(w,v,x){return v.children?(0,He.of)(new gi(v.children,w)):v.loadChildren?void 0!==v._loadedConfig?(0,He.of)(v._loadedConfig):this.runCanLoadGuards(w.injector,v,x).pipe((0,F.z)(L=>L?this.configLoader.load(w.injector,v).pipe((0,le.U)(q=>(v._loadedConfig=q,q))):function tr(C){return we(Nr(`Cannot load children because the guard of the route "path: '${C.path}'" returned false`))}(v))):(0,He.of)(new gi([],w))}runCanLoadGuards(w,v,x){const L=v.canLoad;if(!L||0===L.length)return(0,He.of)(!0);const q=L.map(se=>{const ve=w.get(se);let Ee;if(function _s(C){return C&&Ei(C.canLoad)}(ve))Ee=ve.canLoad(v,x);else{if(!Ei(ve))throw new Error("Invalid CanLoad guard");Ee=ve(v,x)}return dr(Ee)});return(0,He.of)(q).pipe(Ii(),(0,Ye.b)(se=>{if(!ns(se))return;const ve=Nr(`Redirecting to "${this.urlSerializer.serialize(se)}"`);throw ve.url=se,ve}),(0,le.U)(se=>!0===se))}lineralizeSegments(w,v){let x=[],L=v.root;for(;;){if(x=x.concat(L.segments),0===L.numberOfChildren)return(0,He.of)(x);if(L.numberOfChildren>1||!L.children[ht])return we(new Error(`Only absolute redirects can have named outlets. redirectTo: '${w.redirectTo}'`));L=L.children[ht]}}applyRedirectCommands(w,v,x){return this.applyRedirectCreatreUrlTree(v,this.urlSerializer.parse(v),w,x)}applyRedirectCreatreUrlTree(w,v,x,L){const q=this.createSegmentGroup(w,v.root,x,L);return new kt(q,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(w,v){const x={};return Sn(w,(L,q)=>{if("string"==typeof L&&L.startsWith(":")){const ve=L.substring(1);x[q]=v[ve]}else x[q]=L}),x}createSegmentGroup(w,v,x,L){const q=this.createSegments(w,v.segments,x,L);let se={};return Sn(v.children,(ve,Ee)=>{se[Ee]=this.createSegmentGroup(w,ve,x,L)}),new Tt(q,se)}createSegments(w,v,x,L){return v.map(q=>q.path.startsWith(":")?this.findPosParam(w,q,L):this.findOrReturn(q,x))}findPosParam(w,v,x){const L=x[v.path.substring(1)];if(!L)throw new Error(`Cannot redirect to '${w}'. Cannot find '${v.path}'.`);return L}findOrReturn(w,v){let x=0;for(const L of v){if(L.path===w.path)return v.splice(x),L;x++}return w}}function Dr(C){const w={};for(const x of Object.keys(C.children)){const q=Dr(C.children[x]);(q.segments.length>0||q.hasChildren())&&(w[x]=q)}return function Mn(C){if(1===C.numberOfChildren&&C.children[ht]){const w=C.children[ht];return new Tt(C.segments.concat(w.segments),w.children)}return C}(new Tt(C.segments,w))}class fr{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class Wi{constructor(w,v){this.component=w,this.route=v}}function ii(C,w,v){const x=C._root;return fs(x,w?w._root:null,v,[x.value])}function Ci(C,w,v){const x=function zi(C){if(!C)return null;for(let w=C.parent;w;w=w.parent){const v=w.routeConfig;if(v&&v._loadedConfig)return v._loadedConfig}return null}(w);return(x?x.module.injector:v).get(C)}function fs(C,w,v,x,L={canDeactivateChecks:[],canActivateChecks:[]}){const q=On(w);return C.children.forEach(se=>{(function Os(C,w,v,x,L={canDeactivateChecks:[],canActivateChecks:[]}){const q=C.value,se=w?w.value:null,ve=v?v.getContext(C.value.outlet):null;if(se&&q.routeConfig===se.routeConfig){const Ee=function N(C,w,v){if("function"==typeof v)return v(C,w);switch(v){case"pathParamsChange":return!ie(C.url,w.url);case"pathParamsOrQueryParamsChange":return!ie(C.url,w.url)||!yr(C.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fn(C,w)||!yr(C.queryParams,w.queryParams);default:return!Fn(C,w)}}(se,q,q.routeConfig.runGuardsAndResolvers);Ee?L.canActivateChecks.push(new fr(x)):(q.data=se.data,q._resolvedData=se._resolvedData),fs(C,w,q.component?ve?ve.children:null:v,x,L),Ee&&ve&&ve.outlet&&ve.outlet.isActivated&&L.canDeactivateChecks.push(new Wi(ve.outlet.component,se))}else se&&M(w,ve,L),L.canActivateChecks.push(new fr(x)),fs(C,null,q.component?ve?ve.children:null:v,x,L)})(se,q[se.value.outlet],v,x.concat([se.value]),L),delete q[se.value.outlet]}),Sn(q,(se,ve)=>M(se,v.getContext(ve),L)),L}function M(C,w,v){const x=On(C),L=C.value;Sn(x,(q,se)=>{M(q,L.component?w?w.children.getContext(se):null:w,v)}),v.canDeactivateChecks.push(new Wi(L.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,L))}class Ht{}function Ot(C){return new K.y(w=>w.error(C))}class Wn{constructor(w,v,x,L,q,se){this.rootComponentType=w,this.config=v,this.urlTree=x,this.url=L,this.paramsInheritanceStrategy=q,this.relativeLinkResolution=se}recognize(){const w=Ui(this.urlTree.root,[],[],this.config.filter(se=>void 0===se.redirectTo),this.relativeLinkResolution).segmentGroup,v=this.processSegmentGroup(this.config,w,ht);if(null===v)return null;const x=new Yr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ht,this.rootComponentType,null,this.urlTree.root,-1,{}),L=new xr(x,v),q=new Rr(this.url,L);return this.inheritParamsAndData(q._root),q}inheritParamsAndData(w){const v=w.value,x=vi(v,this.paramsInheritanceStrategy);v.params=Object.freeze(x.params),v.data=Object.freeze(x.data),w.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(w,v,x){return 0===v.segments.length&&v.hasChildren()?this.processChildren(w,v):this.processSegment(w,v,v.segments,x)}processChildren(w,v){const x=[];for(const q of Object.keys(v.children)){const se=v.children[q],ve=Es(w,q),Ee=this.processSegmentGroup(ve,se,q);if(null===Ee)return null;x.push(...Ee)}const L=Zn(x);return function zr(C){C.sort((w,v)=>w.value.outlet===ht?-1:v.value.outlet===ht?1:w.value.outlet.localeCompare(v.value.outlet))}(L),L}processSegment(w,v,x,L){for(const q of w){const se=this.processSegmentAgainstRoute(q,v,x,L);if(null!==se)return se}return R(v,x,L)?[]:null}processSegmentAgainstRoute(w,v,x,L){if(w.redirectTo||!$(w,v,x,L))return null;let q,se=[],ve=[];if("**"===w.path){const Ft=x.length>0?jt(x).parameters:{};q=new Yr(x,Ft,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bi(w),Wr(w),w.component,w,gr(v),si(v)+x.length,Kr(w))}else{const Ft=hs(v,w,x);if(!Ft.matched)return null;se=Ft.consumedSegments,ve=Ft.remainingSegments,q=new Yr(se,Ft.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bi(w),Wr(w),w.component,w,gr(v),si(v)+se.length,Kr(w))}const Ee=function pr(C){return C.children?C.children:C.loadChildren?C._loadedConfig.routes:[]}(w),{segmentGroup:wt,slicedSegments:xn}=Ui(v,se,ve,Ee.filter(Ft=>void 0===Ft.redirectTo),this.relativeLinkResolution);if(0===xn.length&&wt.hasChildren()){const Ft=this.processChildren(Ee,wt);return null===Ft?null:[new xr(q,Ft)]}if(0===Ee.length&&0===xn.length)return[new xr(q,[])];const un=Wr(w)===L,Et=this.processSegment(Ee,wt,xn,un?ht:L);return null===Et?null:[new xr(q,Et)]}}function qn(C){const w=C.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function Zn(C){const w=[],v=new Set;for(const x of C){if(!qn(x)){w.push(x);continue}const L=w.find(q=>x.value.routeConfig===q.value.routeConfig);void 0!==L?(L.children.push(...x.children),v.add(L)):w.push(x)}for(const x of v){const L=Zn(x.children);w.push(new xr(x.value,L))}return w.filter(x=>!v.has(x))}function gr(C){let w=C;for(;w._sourceSegment;)w=w._sourceSegment;return w}function si(C){let w=C,v=w._segmentIndexShift?w._segmentIndexShift:0;for(;w._sourceSegment;)w=w._sourceSegment,v+=w._segmentIndexShift?w._segmentIndexShift:0;return v-1}function Bi(C){return C.data||{}}function Kr(C){return C.resolve||{}}function Ls(C){return[...Object.keys(C),...Object.getOwnPropertySymbols(C)]}function ta(C){return(0,Le.w)(w=>{const v=C(w);return v?(0,_e.D)(v).pipe((0,le.U)(()=>w)):(0,He.of)(w)})}class Ba extends class go{shouldDetach(w){return!1}store(w,v){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,v){return w.routeConfig===v.routeConfig}}{}const Ps=new p.OlP("ROUTES");class ra{constructor(w,v,x,L){this.injector=w,this.compiler=v,this.onLoadStartListener=x,this.onLoadEndListener=L}load(w,v){if(v._loader$)return v._loader$;this.onLoadStartListener&&this.onLoadStartListener(v);const L=this.loadModuleFactory(v.loadChildren).pipe((0,le.U)(q=>{this.onLoadEndListener&&this.onLoadEndListener(v);const se=q.create(w);return new gi(En(se.injector.get(Ps,void 0,p.XFs.Self|p.XFs.Optional)).map(Gr),se)}),j(q=>{throw v._loader$=void 0,q}));return v._loader$=new re(L,()=>new vt.x).pipe(ue()),v._loader$}loadModuleFactory(w){return dr(w()).pipe((0,F.z)(v=>v instanceof p.YKP?(0,He.of)(v):(0,_e.D)(this.compiler.compileModuleAsync(v))))}}class xo{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,v){return w}}function ol(C){throw C}function ia(C,w,v){return w.parse("/")}function bi(C,w){return(0,He.of)(null)}const Ro={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ci={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Oi=(()=>{class C{constructor(v,x,L,q,se,ve,Ee){this.rootComponentType=v,this.urlSerializer=x,this.rootContexts=L,this.location=q,this.config=Ee,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new vt.x,this.errorHandler=ol,this.malformedUriErrorHandler=ia,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:bi,afterPreactivation:bi},this.urlHandlingStrategy=new xo,this.routeReuseStrategy=new Ba,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=se.get(p.h0i),this.console=se.get(p.c2e);const un=se.get(p.R0b);this.isNgZoneEnabled=un instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(Ee),this.currentUrlTree=function gn(){return new kt(new Tt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ra(se,ve,Et=>this.triggerEvent(new Bn(Et)),Et=>this.triggerEvent(new cr(Et))),this.routerState=ai(this.currentUrlTree,this.rootComponentType),this.transitions=new ze.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var v;return null===(v=this.location.getState())||void 0===v?void 0:v.\u0275routerPageId}setupNavigations(v){const x=this.events;return v.pipe((0,Q.h)(L=>0!==L.id),(0,le.U)(L=>Object.assign(Object.assign({},L),{extractedUrl:this.urlHandlingStrategy.extract(L.rawUrl)})),(0,Le.w)(L=>{let q=!1,se=!1;return(0,He.of)(L).pipe((0,Ye.b)(ve=>{this.currentNavigation={id:ve.id,initialUrl:ve.currentRawUrl,extractedUrl:ve.extractedUrl,trigger:ve.source,extras:ve.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Le.w)(ve=>{const Ee=this.browserUrlTree.toString(),wt=!this.navigated||ve.extractedUrl.toString()!==Ee||Ee!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||wt)&&this.urlHandlingStrategy.shouldProcessUrl(ve.rawUrl))return ja(ve.source)&&(this.browserUrlTree=ve.extractedUrl),(0,He.of)(ve).pipe((0,Le.w)(un=>{const Et=this.transitions.getValue();return x.next(new bt(un.id,this.serializeUrl(un.extractedUrl),un.source,un.restoredState)),Et!==this.transitions.getValue()?ke.E:Promise.resolve(un)}),function Cr(C,w,v,x){return(0,Le.w)(L=>function Kn(C,w,v,x,L){return new Dn(C,w,v,x,L).apply()}(C,w,v,L.extractedUrl,x).pipe((0,le.U)(q=>Object.assign(Object.assign({},L),{urlAfterRedirects:q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ye.b)(un=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:un.urlAfterRedirects})}),function li(C,w,v,x,L){return(0,F.z)(q=>function _n(C,w,v,x,L="emptyOnly",q="legacy"){try{const se=new Wn(C,w,v,x,L,q).recognize();return null===se?Ot(new Ht):(0,He.of)(se)}catch(se){return Ot(se)}}(C,w,q.urlAfterRedirects,v(q.urlAfterRedirects),x,L).pipe((0,le.U)(se=>Object.assign(Object.assign({},q),{targetSnapshot:se}))))}(this.rootComponentType,this.config,un=>this.serializeUrl(un),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ye.b)(un=>{if("eager"===this.urlUpdateStrategy){if(!un.extras.skipLocationChange){const Ft=this.urlHandlingStrategy.merge(un.urlAfterRedirects,un.rawUrl);this.setBrowserUrl(Ft,un)}this.browserUrlTree=un.urlAfterRedirects}const Et=new lt(un.id,this.serializeUrl(un.extractedUrl),this.serializeUrl(un.urlAfterRedirects),un.targetSnapshot);x.next(Et)}));if(wt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Et,extractedUrl:Ft,source:ws,restoredState:St,extras:et}=ve,mt=new bt(Et,this.serializeUrl(Ft),ws,St);x.next(mt);const Xr=ai(Ft,this.rootComponentType).snapshot;return(0,He.of)(Object.assign(Object.assign({},ve),{targetSnapshot:Xr,urlAfterRedirects:Ft,extras:Object.assign(Object.assign({},et),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ve.rawUrl,ve.resolve(null),ke.E}),ta(ve=>{const{targetSnapshot:Ee,id:wt,extractedUrl:xn,rawUrl:un,extras:{skipLocationChange:Et,replaceUrl:Ft}}=ve;return this.hooks.beforePreactivation(Ee,{navigationId:wt,appliedUrlTree:xn,rawUrlTree:un,skipLocationChange:!!Et,replaceUrl:!!Ft})}),(0,Ye.b)(ve=>{const Ee=new pn(ve.id,this.serializeUrl(ve.extractedUrl),this.serializeUrl(ve.urlAfterRedirects),ve.targetSnapshot);this.triggerEvent(Ee)}),(0,le.U)(ve=>Object.assign(Object.assign({},ve),{guards:ii(ve.targetSnapshot,ve.currentSnapshot,this.rootContexts)})),function S(C,w){return(0,F.z)(v=>{const{targetSnapshot:x,currentSnapshot:L,guards:{canActivateChecks:q,canDeactivateChecks:se}}=v;return 0===se.length&&0===q.length?(0,He.of)(Object.assign(Object.assign({},v),{guardsResult:!0})):function m(C,w,v,x){return(0,_e.D)(C).pipe((0,F.z)(L=>function st(C,w,v,x,L){const q=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,He.of)(!0);const se=q.map(ve=>{const Ee=Ci(ve,w,L);let wt;if(function cs(C){return C&&Ei(C.canDeactivate)}(Ee))wt=dr(Ee.canDeactivate(C,w,v,x));else{if(!Ei(Ee))throw new Error("Invalid CanDeactivate guard");wt=dr(Ee(C,w,v,x))}return wt.pipe((0,de.P)())});return(0,He.of)(se).pipe(Ii())}(L.component,L.route,v,w,x)),(0,de.P)(L=>!0!==L,!0))}(se,x,L,C).pipe((0,F.z)(ve=>ve&&function Vi(C){return"boolean"==typeof C}(ve)?function D(C,w,v,x){return(0,_e.D)(w).pipe(J(L=>(0,Be.z)(function ee(C,w){return null!==C&&w&&w(new rr(C)),(0,He.of)(!0)}(L.route.parent,x),function z(C,w){return null!==C&&w&&w(new zn(C)),(0,He.of)(!0)}(L.route,x),function Ke(C,w,v){const x=w[w.length-1],q=w.slice(0,w.length-1).reverse().map(se=>function dn(C){const w=C.routeConfig?C.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:C,guards:w}:null}(se)).filter(se=>null!==se).map(se=>Ae(()=>{const ve=se.guards.map(Ee=>{const wt=Ci(Ee,se.node,v);let xn;if(function ni(C){return C&&Ei(C.canActivateChild)}(wt))xn=dr(wt.canActivateChild(x,C));else{if(!Ei(wt))throw new Error("Invalid CanActivateChild guard");xn=dr(wt(x,C))}return xn.pipe((0,de.P)())});return(0,He.of)(ve).pipe(Ii())}));return(0,He.of)(q).pipe(Ii())}(C,L.path,v),function De(C,w,v){const x=w.routeConfig?w.routeConfig.canActivate:null;if(!x||0===x.length)return(0,He.of)(!0);const L=x.map(q=>Ae(()=>{const se=Ci(q,w,v);let ve;if(function xi(C){return C&&Ei(C.canActivate)}(se))ve=dr(se.canActivate(w,C));else{if(!Ei(se))throw new Error("Invalid CanActivate guard");ve=dr(se(w,C))}return ve.pipe((0,de.P)())}));return(0,He.of)(L).pipe(Ii())}(C,L.route,v))),(0,de.P)(L=>!0!==L,!0))}(x,q,C,w):(0,He.of)(ve)),(0,le.U)(ve=>Object.assign(Object.assign({},v),{guardsResult:ve})))})}(this.ngModule.injector,ve=>this.triggerEvent(ve)),(0,Ye.b)(ve=>{if(ns(ve.guardsResult)){const wt=Nr(`Redirecting to "${this.serializeUrl(ve.guardsResult)}"`);throw wt.url=ve.guardsResult,wt}const Ee=new en(ve.id,this.serializeUrl(ve.extractedUrl),this.serializeUrl(ve.urlAfterRedirects),ve.targetSnapshot,!!ve.guardsResult);this.triggerEvent(Ee)}),(0,Q.h)(ve=>!!ve.guardsResult||(this.restoreHistory(ve),this.cancelNavigationTransition(ve,""),!1)),ta(ve=>{if(ve.guards.canActivateChecks.length)return(0,He.of)(ve).pipe((0,Ye.b)(Ee=>{const wt=new mn(Ee.id,this.serializeUrl(Ee.extractedUrl),this.serializeUrl(Ee.urlAfterRedirects),Ee.targetSnapshot);this.triggerEvent(wt)}),(0,Le.w)(Ee=>{let wt=!1;return(0,He.of)(Ee).pipe(function Or(C,w){return(0,F.z)(v=>{const{targetSnapshot:x,guards:{canActivateChecks:L}}=v;if(!L.length)return(0,He.of)(v);let q=0;return(0,_e.D)(L).pipe(J(se=>function As(C,w,v,x){return function io(C,w,v,x){const L=Ls(C);if(0===L.length)return(0,He.of)({});const q={};return(0,_e.D)(L).pipe((0,F.z)(se=>function Mo(C,w,v,x){const L=Ci(C,w,x);return dr(L.resolve?L.resolve(w,v):L(w,v))}(C[se],w,v,x).pipe((0,Ye.b)(ve=>{q[se]=ve}))),(0,$e.h)(1),(0,F.z)(()=>Ls(q).length===L.length?(0,He.of)(q):ke.E))}(C._resolve,C,w,x).pipe((0,le.U)(q=>(C._resolvedData=q,C.data=Object.assign(Object.assign({},C.data),vi(C,v).resolve),null)))}(se.route,x,C,w)),(0,Ye.b)(()=>q++),(0,$e.h)(1),(0,F.z)(se=>q===L.length?(0,He.of)(v):ke.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ye.b)({next:()=>wt=!0,complete:()=>{wt||(this.restoreHistory(Ee),this.cancelNavigationTransition(Ee,"At least one route resolver didn't emit any value."))}}))}),(0,Ye.b)(Ee=>{const wt=new Qn(Ee.id,this.serializeUrl(Ee.extractedUrl),this.serializeUrl(Ee.urlAfterRedirects),Ee.targetSnapshot);this.triggerEvent(wt)}))}),ta(ve=>{const{targetSnapshot:Ee,id:wt,extractedUrl:xn,rawUrl:un,extras:{skipLocationChange:Et,replaceUrl:Ft}}=ve;return this.hooks.afterPreactivation(Ee,{navigationId:wt,appliedUrlTree:xn,rawUrlTree:un,skipLocationChange:!!Et,replaceUrl:!!Ft})}),(0,le.U)(ve=>{const Ee=function Ji(C,w,v){const x=br(C,w._root,v?v._root:void 0);return new Er(x,w)}(this.routeReuseStrategy,ve.targetSnapshot,ve.currentRouterState);return Object.assign(Object.assign({},ve),{targetRouterState:Ee})}),(0,Ye.b)(ve=>{this.currentUrlTree=ve.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ve.urlAfterRedirects,ve.rawUrl),this.routerState=ve.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ve.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ve),this.browserUrlTree=ve.urlAfterRedirects)}),((C,w,v)=>(0,le.U)(x=>(new Mi(w,x.targetRouterState,x.currentRouterState,v).activate(C),x)))(this.rootContexts,this.routeReuseStrategy,ve=>this.triggerEvent(ve)),(0,Ye.b)({next(){q=!0},complete(){q=!0}}),(0,Wt.x)(()=>{var ve;q||se||this.cancelNavigationTransition(L,`Navigation ID ${L.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ve=this.currentNavigation)||void 0===ve?void 0:ve.id)===L.id&&(this.currentNavigation=null)}),j(ve=>{if(se=!0,function yi(C){return C&&C[on]}(ve)){const Ee=ns(ve.url);Ee||(this.navigated=!0,this.restoreHistory(L,!0));const wt=new Rt(L.id,this.serializeUrl(L.extractedUrl),ve.message);x.next(wt),Ee?setTimeout(()=>{const xn=this.urlHandlingStrategy.merge(ve.url,this.rawUrlTree),un={skipLocationChange:L.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ja(L.source)};this.scheduleNavigation(xn,"imperative",null,un,{resolve:L.resolve,reject:L.reject,promise:L.promise})},0):L.resolve(!1)}else{this.restoreHistory(L,!0);const Ee=new Vt(L.id,this.serializeUrl(L.extractedUrl),ve);x.next(Ee);try{L.resolve(this.errorHandler(ve))}catch(wt){L.reject(wt)}}return ke.E}))}))}resetRootComponentType(v){this.rootComponentType=v,this.routerState.root.component=this.rootComponentType}setTransition(v){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),v))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const x="popstate"===v.type?"popstate":"hashchange";"popstate"===x&&setTimeout(()=>{var L;const q={replaceUrl:!0},se=(null===(L=v.state)||void 0===L?void 0:L.navigationId)?v.state:null;if(se){const Ee=Object.assign({},se);delete Ee.navigationId,delete Ee.\u0275routerPageId,0!==Object.keys(Ee).length&&(q.state=Ee)}const ve=this.parseUrl(v.url);this.scheduleNavigation(ve,x,se,q)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(v){this.events.next(v)}resetConfig(v){ds(v),this.config=v.map(Gr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(v,x={}){const{relativeTo:L,queryParams:q,fragment:se,queryParamsHandling:ve,preserveFragment:Ee}=x,wt=L||this.routerState.root,xn=Ee?this.currentUrlTree.fragment:se;let un=null;switch(ve){case"merge":un=Object.assign(Object.assign({},this.currentUrlTree.queryParams),q);break;case"preserve":un=this.currentUrlTree.queryParams;break;default:un=q||null}return null!==un&&(un=this.removeEmptyProps(un)),function xs(C,w,v,x,L){if(0===v.length)return Qr(w.root,w.root,w.root,x,L);const q=function te(C){if("string"==typeof C[0]&&1===C.length&&"/"===C[0])return new fe(!0,0,C);let w=0,v=!1;const x=C.reduce((L,q,se)=>{if("object"==typeof q&&null!=q){if(q.outlets){const ve={};return Sn(q.outlets,(Ee,wt)=>{ve[wt]="string"==typeof Ee?Ee.split("/"):Ee}),[...L,{outlets:ve}]}if(q.segmentPath)return[...L,q.segmentPath]}return"string"!=typeof q?[...L,q]:0===se?(q.split("/").forEach((ve,Ee)=>{0==Ee&&"."===ve||(0==Ee&&""===ve?v=!0:".."===ve?w++:""!=ve&&L.push(ve))}),L):[...L,q]},[]);return new fe(v,w,x)}(v);if(q.toRoot())return Qr(w.root,w.root,new Tt([],{}),x,L);const se=function at(C,w,v){if(C.isAbsolute)return new xe(w.root,!0,0);if(-1===v.snapshot._lastPathIndex){const q=v.snapshot._urlSegment;return new xe(q,q===w.root,0)}const x=ar(C.commands[0])?0:1;return function cn(C,w,v){let x=C,L=w,q=v;for(;q>L;){if(q-=L,x=x.parent,!x)throw new Error("Invalid number of '../'");L=x.segments.length}return new xe(x,!1,L-q)}(v.snapshot._urlSegment,v.snapshot._lastPathIndex+x,C.numberOfDoubleDots)}(q,w,C),ve=se.processChildren?Ue(se.segmentGroup,se.index,q.commands):ye(se.segmentGroup,se.index,q.commands);return Qr(w.root,se.segmentGroup,ve,x,L)}(wt,this.currentUrlTree,v,un,null!=xn?xn:null)}navigateByUrl(v,x={skipLocationChange:!1}){const L=ns(v)?v:this.parseUrl(v),q=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation(q,"imperative",null,x)}navigate(v,x={skipLocationChange:!1}){return function Jl(C){for(let w=0;w<C.length;w++){const v=C[w];if(null==v)throw new Error(`The requested path contains ${v} segment at index ${w}`)}}(v),this.navigateByUrl(this.createUrlTree(v,x),x)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let x;try{x=this.urlSerializer.parse(v)}catch(L){x=this.malformedUriErrorHandler(L,this.urlSerializer,v)}return x}isActive(v,x){let L;if(L=!0===x?Object.assign({},Ro):!1===x?Object.assign({},ci):x,ns(v))return Lr(this.currentUrlTree,v,L);const q=this.parseUrl(v);return Lr(this.currentUrlTree,q,L)}removeEmptyProps(v){return Object.keys(v).reduce((x,L)=>{const q=v[L];return null!=q&&(x[L]=q),x},{})}processNavigations(){this.navigations.subscribe(v=>{this.navigated=!0,this.lastSuccessfulId=v.id,this.currentPageId=v.targetPageId,this.events.next(new qt(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,v.resolve(!0)},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)})}scheduleNavigation(v,x,L,q,se){var ve,Ee;if(this.disposed)return Promise.resolve(!1);let wt,xn,un;se?(wt=se.resolve,xn=se.reject,un=se.promise):un=new Promise((ws,St)=>{wt=ws,xn=St});const Et=++this.navigationId;let Ft;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(L=this.location.getState()),Ft=L&&L.\u0275routerPageId?L.\u0275routerPageId:q.replaceUrl||q.skipLocationChange?null!==(ve=this.browserPageId)&&void 0!==ve?ve:0:(null!==(Ee=this.browserPageId)&&void 0!==Ee?Ee:0)+1):Ft=0,this.setTransition({id:Et,targetPageId:Ft,source:x,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:v,extras:q,resolve:wt,reject:xn,promise:un,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),un.catch(ws=>Promise.reject(ws))}setBrowserUrl(v,x){const L=this.urlSerializer.serialize(v),q=Object.assign(Object.assign({},x.extras.state),this.generateNgRouterState(x.id,x.targetPageId));this.location.isCurrentPathEqualTo(L)||x.extras.replaceUrl?this.location.replaceState(L,"",q):this.location.go(L,"",q)}restoreHistory(v,x=!1){var L,q;if("computed"===this.canceledNavigationResolution){const se=this.currentPageId-v.targetPageId;"popstate"!==v.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(L=this.currentNavigation)||void 0===L?void 0:L.finalUrl)||0===se?this.currentUrlTree===(null===(q=this.currentNavigation)||void 0===q?void 0:q.finalUrl)&&0===se&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(se)}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(v,x){const L=new Rt(v.id,this.serializeUrl(v.extractedUrl),x);this.triggerEvent(L),v.resolve(!1)}generateNgRouterState(v,x){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:x}:{navigationId:v}}}return C.\u0275fac=function(v){p.$Z()},C.\u0275prov=p.Yz7({token:C,factory:C.\u0275fac}),C})();function ja(C){return"imperative"!==C}let mo=(()=>{class C{constructor(v,x,L,q,se){this.router=v,this.route=x,this.tabIndexAttribute=L,this.renderer=q,this.el=se,this.commands=null,this.onChanges=new vt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(v){if(null!=this.tabIndexAttribute)return;const x=this.renderer,L=this.el.nativeElement;null!==v?x.setAttribute(L,"tabindex",v):x.removeAttribute(L,"tabindex")}ngOnChanges(v){this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const v={skipLocationChange:so(this.skipLocationChange),replaceUrl:so(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,v),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:so(this.preserveFragment)})}}return C.\u0275fac=function(v){return new(v||C)(p.Y36(Oi),p.Y36(wr),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},C.\u0275dir=p.lG2({type:C,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(v,x){1&v&&p.NdJ("click",function(){return x.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),C})(),$a=(()=>{class C{constructor(v,x,L){this.router=v,this.route=x,this.locationStrategy=L,this.commands=null,this.href=null,this.onChanges=new vt.x,this.subscription=v.events.subscribe(q=>{q instanceof qt&&this.updateTargetUrlAndHref()})}set routerLink(v){this.commands=null!=v?Array.isArray(v)?v:[v]:null}ngOnChanges(v){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(v,x,L,q,se){if(0!==v||x||L||q||se||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ve={skipLocationChange:so(this.skipLocationChange),replaceUrl:so(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ve),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:so(this.preserveFragment)})}}return C.\u0275fac=function(v){return new(v||C)(p.Y36(Oi),p.Y36(wr),p.Y36(Lt.S$))},C.\u0275dir=p.lG2({type:C,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(v,x){1&v&&p.NdJ("click",function(q){return x.onClick(q.button,q.ctrlKey,q.shiftKey,q.altKey,q.metaKey)}),2&v&&p.uIk("target",x.target)("href",x.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),C})();function so(C){return""===C||!!C}let ps=(()=>{class C{constructor(v,x,L,q,se,ve){this.router=v,this.element=x,this.renderer=L,this.cdr=q,this.link=se,this.linkWithHref=ve,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=v.events.subscribe(Ee=>{Ee instanceof qt&&this.update()})}ngAfterContentInit(){(0,He.of)(this.links.changes,this.linksWithHrefs.changes,(0,He.of)(null)).pipe((0,It.J)()).subscribe(v=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var v;null===(v=this.linkInputChangesSubscription)||void 0===v||v.unsubscribe();const x=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(L=>!!L).map(L=>L.onChanges);this.linkInputChangesSubscription=(0,_e.D)(x).pipe((0,It.J)()).subscribe(L=>{this.isActive!==this.isLinkActive(this.router)(L)&&this.update()})}set routerLinkActive(v){const x=Array.isArray(v)?v:v.split(" ");this.classes=x.filter(L=>!!L)}ngOnChanges(v){this.update()}ngOnDestroy(){var v;this.routerEventsSubscription.unsubscribe(),null===(v=this.linkInputChangesSubscription)||void 0===v||v.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const v=this.hasActiveLinks();this.isActive!==v&&(this.isActive=v,this.cdr.markForCheck(),this.classes.forEach(x=>{v?this.renderer.addClass(this.element.nativeElement,x):this.renderer.removeClass(this.element.nativeElement,x)}),this.isActiveChange.emit(v))})}isLinkActive(v){const x=function Oo(C){return!!C.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return L=>!!L.urlTree&&v.isActive(L.urlTree,x)}hasActiveLinks(){const v=this.isLinkActive(this.router);return this.link&&v(this.link)||this.linkWithHref&&v(this.linkWithHref)||this.links.some(v)||this.linksWithHrefs.some(v)}}return C.\u0275fac=function(v){return new(v||C)(p.Y36(Oi),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(mo,8),p.Y36($a,8))},C.\u0275dir=p.lG2({type:C,selectors:[["","routerLinkActive",""]],contentQueries:function(v,x,L){if(1&v&&(p.Suo(L,mo,5),p.Suo(L,$a,5)),2&v){let q;p.iGM(q=p.CRH())&&(x.links=q),p.iGM(q=p.CRH())&&(x.linksWithHrefs=q)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[p.TTD]}),C})();class Po{}class Go{preload(w,v){return(0,He.of)(null)}}let Ha=(()=>{class C{constructor(v,x,L,q){this.router=v,this.injector=L,this.preloadingStrategy=q,this.loader=new ra(L,x,Ee=>v.triggerEvent(new Bn(Ee)),Ee=>v.triggerEvent(new cr(Ee)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Q.h)(v=>v instanceof qt),J(()=>this.preload())).subscribe(()=>{})}preload(){const v=this.injector.get(p.h0i);return this.processRoutes(v,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,x){const L=[];for(const q of x)if(q.loadChildren&&!q.canLoad&&q._loadedConfig){const se=q._loadedConfig;L.push(this.processRoutes(se.module,se.routes))}else q.loadChildren&&!q.canLoad?L.push(this.preloadConfig(v,q)):q.children&&L.push(this.processRoutes(v,q.children));return(0,_e.D)(L).pipe((0,It.J)(),(0,le.U)(q=>{}))}preloadConfig(v,x){return this.preloadingStrategy.preload(x,()=>(x._loadedConfig?(0,He.of)(x._loadedConfig):this.loader.load(v.injector,x)).pipe((0,F.z)(q=>(x._loadedConfig=q,this.processRoutes(q.module,q.routes)))))}}return C.\u0275fac=function(v){return new(v||C)(p.LFG(Oi),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Po))},C.\u0275prov=p.Yz7({token:C,factory:C.\u0275fac}),C})(),gs=(()=>{class C{constructor(v,x,L={}){this.router=v,this.viewportScroller=x,this.options=L,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},L.scrollPositionRestoration=L.scrollPositionRestoration||"disabled",L.anchorScrolling=L.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(v=>{v instanceof bt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof qt&&(this.lastId=v.id,this.scheduleScrollEvent(v,this.router.parseUrl(v.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(v=>{v instanceof jn&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,x){this.router.triggerEvent(new jn(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return C.\u0275fac=function(v){p.$Z()},C.\u0275prov=p.Yz7({token:C,factory:C.\u0275fac}),C})();const zs=new p.OlP("ROUTER_CONFIGURATION"),Us=new p.OlP("ROUTER_FORROOT_GUARD"),oo=[Lt.Ye,{provide:qe,useClass:Ve},{provide:Oi,useFactory:function Ks(C,w,v,x,L,q,se={},ve,Ee){const wt=new Oi(null,C,w,v,x,L,En(q));return ve&&(wt.urlHandlingStrategy=ve),Ee&&(wt.routeReuseStrategy=Ee),function yo(C,w){C.errorHandler&&(w.errorHandler=C.errorHandler),C.malformedUriErrorHandler&&(w.malformedUriErrorHandler=C.malformedUriErrorHandler),C.onSameUrlNavigation&&(w.onSameUrlNavigation=C.onSameUrlNavigation),C.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=C.paramsInheritanceStrategy),C.relativeLinkResolution&&(w.relativeLinkResolution=C.relativeLinkResolution),C.urlUpdateStrategy&&(w.urlUpdateStrategy=C.urlUpdateStrategy),C.canceledNavigationResolution&&(w.canceledNavigationResolution=C.canceledNavigationResolution)}(se,wt),se.enableTracing&&wt.events.subscribe(xn=>{var un,Et;null===(un=console.group)||void 0===un||un.call(console,`Router Event: ${xn.constructor.name}`),console.log(xn.toString()),console.log(xn),null===(Et=console.groupEnd)||void 0===Et||Et.call(console)}),wt},deps:[qe,Ns,Lt.Ye,p.zs3,p.Sil,Ps,zs,[class Vs{},new p.FiY],[class na{},new p.FiY]]},Ns,{provide:wr,useFactory:function oa(C){return C.routerState.root},deps:[Oi]},Ha,Go,class mi{preload(w,v){return v().pipe(j(()=>(0,He.of)(null)))}},{provide:zs,useValue:{enableTracing:!1}}];function Da(){return new p.PXZ("Router",Oi)}let gu=(()=>{class C{constructor(v,x){}static forRoot(v,x){return{ngModule:C,providers:[oo,sa(v),{provide:Us,useFactory:Ur,deps:[[Oi,new p.FiY,new p.tp0]]},{provide:zs,useValue:x||{}},{provide:Lt.S$,useFactory:yu,deps:[Lt.lw,[new p.tBr(Lt.mr),new p.FiY],zs]},{provide:gs,useFactory:mu,deps:[Oi,Lt.EM,zs]},{provide:Po,useExisting:x&&x.preloadingStrategy?x.preloadingStrategy:Go},{provide:p.PXZ,multi:!0,useFactory:Da},[_o,{provide:p.ip1,multi:!0,useFactory:Ca,deps:[_o]},{provide:_u,useFactory:qr,deps:[_o]},{provide:p.tb,multi:!0,useExisting:_u}]]}}static forChild(v){return{ngModule:C,providers:[sa(v)]}}}return C.\u0275fac=function(v){return new(v||C)(p.LFG(Us,8),p.LFG(Oi,8))},C.\u0275mod=p.oAB({type:C}),C.\u0275inj=p.cJS({}),C})();function mu(C,w,v){return v.scrollOffset&&w.setOffset(v.scrollOffset),new gs(C,w,v)}function yu(C,w,v={}){return v.useHash?new Lt.Do(C,w):new Lt.b0(C,w)}function Ur(C){return"guarded"}function sa(C){return[{provide:p.deG,multi:!0,useValue:C},{provide:Ps,multi:!0,useValue:C}]}let _o=(()=>{class C{constructor(v){this.injector=v,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new vt.x}appInitializer(){return this.injector.get(Lt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let x=null;const L=new Promise(ve=>x=ve),q=this.injector.get(Oi),se=this.injector.get(zs);return"disabled"===se.initialNavigation?(q.setUpLocationChangeListener(),x(!0)):"enabled"===se.initialNavigation||"enabledBlocking"===se.initialNavigation?(q.hooks.afterPreactivation=()=>this.initNavigation?(0,He.of)(null):(this.initNavigation=!0,x(!0),this.resultOfPreactivationDone),q.initialNavigation()):x(!0),L})}bootstrapListener(v){const x=this.injector.get(zs),L=this.injector.get(Ha),q=this.injector.get(gs),se=this.injector.get(Oi),ve=this.injector.get(p.z2F);v===ve.components[0]&&(("enabledNonBlocking"===x.initialNavigation||void 0===x.initialNavigation)&&se.initialNavigation(),L.setUpPreloading(),q.init(),se.resetRootComponentType(ve.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return C.\u0275fac=function(v){return new(v||C)(p.LFG(p.zs3))},C.\u0275prov=p.Yz7({token:C,factory:C.\u0275fac}),C})();function Ca(C){return C.appInitializer.bind(C)}function qr(C){return C.bootstrapListener.bind(C)}const _u=new p.OlP("Router Initializer")},3942:(Mt,We,k)=>{k.d(We,{Z:()=>Ze});var p=k(2090),K=k(4859),Y=k(9681),we=k(1877);class me{constructor(Be,ke){this._delegate=Be,this.firebase=ke,(0,Y._addComponent)(Be,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(Be,ke=Y._DEFAULT_ENTRY_NAME){var vt;this._delegate.checkDestroyed();const j=this._delegate.container.getProvider(Be);return!j.isInitialized()&&"EXPLICIT"===(null===(vt=j.getComponent())||void 0===vt?void 0:vt.instantiationMode)&&j.initialize(),j.getImmediate({identifier:ke})}_removeServiceInstance(Be,ke=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(ke)}_addComponent(Be){(0,Y._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,Y._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ue=function Fe(){const ct=function Re(ct){const Be={},ke={__esModule:!0,initializeApp:function F(je,Ne={}){const Ie=Y.initializeApp(je,Ne);if((0,p.r3)(Be,Ie.name))return Be[Ie.name];const Q=new ct(Ie,ke);return Be[Ie.name]=Q,Q},app:j,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function le(je){const Ne=je.name,Ie=Ne.replace("-compat","");if(Y._registerComponent(je)&&"PUBLIC"===je.type){const Q=(Se=j())=>{if("function"!=typeof Se[Ie])throw Oe.create("invalid-app-argument",{appName:Ne});return Se[Ie]()};void 0!==je.serviceProps&&(0,p.ZB)(Q,je.serviceProps),ke[Ie]=Q,ct.prototype[Ie]=function(...Se){return this._getService.bind(this,Ne).apply(this,je.multipleInstances?Se:[])}}return"PUBLIC"===je.type?ke[Ie]:null},removeApp:function vt(je){delete Be[je]},useAsService:function Le(je,Ne){return"serverAuth"===Ne?null:Ne},modularAPIs:Y}};function j(je){if(!(0,p.r3)(Be,je=je||Y._DEFAULT_ENTRY_NAME))throw Oe.create("no-app",{appName:je});return Be[je]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function J(){return Object.keys(Be).map(je=>Be[je])}}),j.App=ct,ke}(me);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:Fe,extendNamespace:function Be(ke){(0,p.ZB)(ct,ke)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),ct}(),re=new we.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=ue;!function ze(ct){(0,Y.registerVersion)("@firebase/app-compat","0.1.22",ct)}()},9681:(Mt,We,k)=>{k.r(We),k.d(We,{FirebaseError:()=>we.ZR,SDK_VERSION:()=>rr,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>Rt,_addOrOverwriteComponent:()=>Vt,_apps:()=>bt,_clearComponents:()=>mn,_components:()=>qt,_getProvider:()=>pn,_registerComponent:()=>lt,_removeServiceInstance:()=>en,deleteApp:()=>jn,getApp:()=>zn,getApps:()=>Ar,initializeApp:()=>Tr,onLog:()=>vn,registerVersion:()=>Qt,setLogLevel:()=>on});var p=k(5861),K=k(4859),Y=k(1877),we=k(2090);class me{constructor(ot){this.container=ot}getPlatformInfoString(){return this.container.getProviders().map(Ut=>{if(function Ae(Pt){const ot=Pt.getComponent();return"VERSION"===(null==ot?void 0:ot.type)}(Ut)){const kt=Ut.getImmediate();return`${kt.library}/${kt.version}`}return null}).filter(Ut=>Ut).join(" ")}}const Oe="@firebase/app",Fe=new Y.Yd("@firebase/app"),Lt="[DEFAULT]",pt={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bt=new Map,qt=new Map;function Rt(Pt,ot){try{Pt.container.addComponent(ot)}catch(Ut){Fe.debug(`Component ${ot.name} failed to register with FirebaseApp ${Pt.name}`,Ut)}}function Vt(Pt,ot){Pt.container.addOrOverwriteComponent(ot)}function lt(Pt){const ot=Pt.name;if(qt.has(ot))return Fe.debug(`There were multiple attempts to register component ${ot}.`),!1;qt.set(ot,Pt);for(const Ut of bt.values())Rt(Ut,Pt);return!0}function pn(Pt,ot){const Ut=Pt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ut&&Ut.triggerHeartbeat(),Pt.container.getProvider(ot)}function en(Pt,ot,Ut=Lt){pn(Pt,ot).clearInstance(Ut)}function mn(){qt.clear()}const Bn=new we.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class cr{constructor(ot,Ut,kt){this._isDeleted=!1,this._options=Object.assign({},ot),this._config=Object.assign({},Ut),this._name=Ut.name,this._automaticDataCollectionEnabled=Ut.automaticDataCollectionEnabled,this._container=kt,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this.checkDestroyed(),this._automaticDataCollectionEnabled=ot}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ot){this._isDeleted=ot}checkDestroyed(){if(this.isDeleted)throw Bn.create("app-deleted",{appName:this._name})}}const rr="9.6.11";function Tr(Pt,ot={}){"object"!=typeof ot&&(ot={name:ot});const Ut=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},ot),kt=Ut.name;if("string"!=typeof kt||!kt)throw Bn.create("bad-app-name",{appName:String(kt)});const Tt=bt.get(kt);if(Tt){if((0,we.vZ)(Pt,Tt.options)&&(0,we.vZ)(Ut,Tt.config))return Tt;throw Bn.create("duplicate-app",{appName:kt})}const zt=new K.H0(kt);for(const ie of qt.values())zt.addComponent(ie);const pe=new cr(Pt,Ut,zt);return bt.set(kt,pe),pe}function zn(Pt=Lt){const ot=bt.get(Pt);if(!ot)throw Bn.create("no-app",{appName:Pt});return ot}function Ar(){return Array.from(bt.values())}function jn(Pt){return ht.apply(this,arguments)}function ht(){return(ht=(0,p.Z)(function*(Pt){const ot=Pt.name;bt.has(ot)&&(bt.delete(ot),yield Promise.all(Pt.container.getProviders().map(Ut=>Ut.delete())),Pt.isDeleted=!0)})).apply(this,arguments)}function Qt(Pt,ot,Ut){var kt;let Tt=null!==(kt=pt[Pt])&&void 0!==kt?kt:Pt;Ut&&(Tt+=`-${Ut}`);const zt=Tt.match(/\s|\//),pe=ot.match(/\s|\//);if(zt||pe){const ie=[`Unable to register library "${Tt}" with version "${ot}":`];return zt&&ie.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),zt&&pe&&ie.push("and"),pe&&ie.push(`version name "${ot}" contains illegal characters (whitespace or "/")`),void Fe.warn(ie.join(" "))}lt(new K.wA(`${Tt}-version`,()=>({library:Tt,version:ot}),"VERSION"))}function vn(Pt,ot){if(null!==Pt&&"function"!=typeof Pt)throw Bn.create("invalid-log-argument");(0,Y.Am)(Pt,ot)}function on(Pt){(0,Y.Ub)(Pt)}const ir="firebase-heartbeat-store";let Fr=null;function yr(){return Fr||(Fr=(0,we.X3)("firebase-heartbeat-database",1,(Pt,ot)=>{0===ot&&Pt.createObjectStore(ir)}).catch(Pt=>{throw Bn.create("storage-open",{originalErrorMessage:Pt.message})})),Fr}function En(){return(En=(0,p.Z)(function*(Pt){try{return(yield yr()).transaction(ir).objectStore(ir).get(Sn(Pt))}catch(ot){throw Bn.create("storage-get",{originalErrorMessage:ot.message})}})).apply(this,arguments)}function jt(Pt,ot){return rn.apply(this,arguments)}function rn(){return(rn=(0,p.Z)(function*(Pt,ot){try{const kt=(yield yr()).transaction(ir,"readwrite");return yield kt.objectStore(ir).put(ot,Sn(Pt)),kt.complete}catch(Ut){throw Bn.create("storage-set",{originalErrorMessage:Ut.message})}})).apply(this,arguments)}function Sn(Pt){return`${Pt.name}!${Pt.options.appId}`}class _i{constructor(ot){this.container=ot,this._heartbeatsCache=null;const Ut=this.container.getProvider("app").getImmediate();this._storage=new tn(Ut),this._heartbeatsCachePromise=this._storage.read().then(kt=>(this._heartbeatsCache=kt,kt))}triggerHeartbeat(){var ot=this;return(0,p.Z)(function*(){const kt=ot.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=_r();if(null===ot._heartbeatsCache&&(ot._heartbeatsCache=yield ot._heartbeatsCachePromise),ot._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!ot._heartbeatsCache.heartbeats.some(zt=>zt.date===Tt))return ot._heartbeatsCache.heartbeats.push({date:Tt,agent:kt}),ot._heartbeatsCache.heartbeats=ot._heartbeatsCache.heartbeats.filter(zt=>{const pe=new Date(zt.date).valueOf();return Date.now()-pe<=2592e6}),ot._storage.overwrite(ot._heartbeatsCache)})()}getHeartbeatsHeader(){var ot=this;return(0,p.Z)(function*(){if(null===ot._heartbeatsCache&&(yield ot._heartbeatsCachePromise),null===ot._heartbeatsCache||0===ot._heartbeatsCache.heartbeats.length)return"";const Ut=_r(),{heartbeatsToSend:kt,unsentEntries:Tt}=function Lr(Pt,ot=1024){const Ut=[];let kt=Pt.slice();for(const Tt of Pt){const zt=Ut.find(pe=>pe.agent===Tt.agent);if(zt){if(zt.dates.push(Tt.date),Sr(Ut)>ot){zt.dates.pop();break}}else if(Ut.push({agent:Tt.agent,dates:[Tt.date]}),Sr(Ut)>ot){Ut.pop();break}kt=kt.slice(1)}return{heartbeatsToSend:Ut,unsentEntries:kt}}(ot._heartbeatsCache.heartbeats),zt=(0,we.L)(JSON.stringify({version:2,heartbeats:kt}));return ot._heartbeatsCache.lastSentHeartbeatDate=Ut,Tt.length>0?(ot._heartbeatsCache.heartbeats=Tt,yield ot._storage.overwrite(ot._heartbeatsCache)):(ot._heartbeatsCache.heartbeats=[],ot._storage.overwrite(ot._heartbeatsCache)),zt})()}}function _r(){return(new Date).toISOString().substring(0,10)}class tn{constructor(ot){this.app=ot,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,we.hl)()&&(0,we.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ot=this;return(0,p.Z)(function*(){return(yield ot._canUseIndexedDBPromise)&&(yield function Br(Pt){return En.apply(this,arguments)}(ot.app))||{heartbeats:[]}})()}overwrite(ot){var Ut=this;return(0,p.Z)(function*(){var kt;if(yield Ut._canUseIndexedDBPromise){const zt=yield Ut.read();return jt(Ut.app,{lastSentHeartbeatDate:null!==(kt=ot.lastSentHeartbeatDate)&&void 0!==kt?kt:zt.lastSentHeartbeatDate,heartbeats:ot.heartbeats})}})()}add(ot){var Ut=this;return(0,p.Z)(function*(){var kt;if(yield Ut._canUseIndexedDBPromise){const zt=yield Ut.read();return jt(Ut.app,{lastSentHeartbeatDate:null!==(kt=ot.lastSentHeartbeatDate)&&void 0!==kt?kt:zt.lastSentHeartbeatDate,heartbeats:[...zt.heartbeats,...ot.heartbeats]})}})()}}function Sr(Pt){return(0,we.L)(JSON.stringify({version:2,heartbeats:Pt})).length}!function In(Pt){lt(new K.wA("platform-logger",ot=>new me(ot),"PRIVATE")),lt(new K.wA("heartbeat",ot=>new _i(ot),"PRIVATE")),Qt(Oe,"0.7.21",Pt),Qt(Oe,"0.7.21","esm2017"),Qt("fire-js","")}("")},4859:(Mt,We,k)=>{k.d(We,{H0:()=>Re,wA:()=>Y});var p=k(5861),K=k(2090);class Y{constructor(ue,re,_e){this.name=ue,this.instanceFactory=re,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ue){return this.instantiationMode=ue,this}setMultipleInstances(ue){return this.multipleInstances=ue,this}setServiceProps(ue){return this.serviceProps=ue,this}setInstanceCreatedCallback(ue){return this.onInstanceCreated=ue,this}}const we="[DEFAULT]";class me{constructor(ue,re){this.name=ue,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ue){const re=this.normalizeInstanceIdentifier(ue);if(!this.instancesDeferred.has(re)){const _e=new K.BH;if(this.instancesDeferred.set(re,_e),this.isInitialized(re)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:re});He&&_e.resolve(He)}catch(He){}}return this.instancesDeferred.get(re).promise}getImmediate(ue){var re;const _e=this.normalizeInstanceIdentifier(null==ue?void 0:ue.identifier),He=null!==(re=null==ue?void 0:ue.optional)&&void 0!==re&&re;if(!this.isInitialized(_e)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(ze){if(He)return null;throw ze}}getComponent(){return this.component}setComponent(ue){if(ue.name!==this.name)throw Error(`Mismatching Component ${ue.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ue,this.shouldAutoInitialize()){if(function Oe(Fe){return"EAGER"===Fe.instantiationMode}(ue))try{this.getOrInitializeService({instanceIdentifier:we})}catch(re){}for(const[re,_e]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(re);try{const ze=this.getOrInitializeService({instanceIdentifier:He});_e.resolve(ze)}catch(ze){}}}}clearInstance(ue=we){this.instancesDeferred.delete(ue),this.instancesOptions.delete(ue),this.instances.delete(ue)}delete(){var ue=this;return(0,p.Z)(function*(){const re=Array.from(ue.instances.values());yield Promise.all([...re.filter(_e=>"INTERNAL"in _e).map(_e=>_e.INTERNAL.delete()),...re.filter(_e=>"_delete"in _e).map(_e=>_e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ue=we){return this.instances.has(ue)}getOptions(ue=we){return this.instancesOptions.get(ue)||{}}initialize(ue={}){const{options:re={}}=ue,_e=this.normalizeInstanceIdentifier(ue.instanceIdentifier);if(this.isInitialized(_e))throw Error(`${this.name}(${_e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:_e,options:re});for(const[ze,Ze]of this.instancesDeferred.entries())_e===this.normalizeInstanceIdentifier(ze)&&Ze.resolve(He);return He}onInit(ue,re){var _e;const He=this.normalizeInstanceIdentifier(re),ze=null!==(_e=this.onInitCallbacks.get(He))&&void 0!==_e?_e:new Set;ze.add(ue),this.onInitCallbacks.set(He,ze);const Ze=this.instances.get(He);return Ze&&ue(Ze,He),()=>{ze.delete(ue)}}invokeOnInitCallbacks(ue,re){const _e=this.onInitCallbacks.get(re);if(_e)for(const He of _e)try{He(ue,re)}catch(ze){}}getOrInitializeService({instanceIdentifier:ue,options:re={}}){let _e=this.instances.get(ue);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:(Fe=ue,Fe===we?void 0:Fe),options:re}),this.instances.set(ue,_e),this.instancesOptions.set(ue,re),this.invokeOnInitCallbacks(_e,ue),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ue,_e)}catch(He){}var Fe;return _e||null}normalizeInstanceIdentifier(ue=we){return this.component?this.component.multipleInstances?ue:we:ue}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(ue){this.name=ue,this.providers=new Map}addComponent(ue){const re=this.getProvider(ue.name);if(re.isComponentSet())throw new Error(`Component ${ue.name} has already been registered with ${this.name}`);re.setComponent(ue)}addOrOverwriteComponent(ue){this.getProvider(ue.name).isComponentSet()&&this.providers.delete(ue.name),this.addComponent(ue)}getProvider(ue){if(this.providers.has(ue))return this.providers.get(ue);const re=new me(ue,this);return this.providers.set(ue,re),re}getProviders(){return Array.from(this.providers.values())}}},1877:(Mt,We,k)=>{k.d(We,{Am:()=>Fe,Ub:()=>Re,Yd:()=>Oe,in:()=>K});const p=[];var K=(()=>{return(ue=K||(K={}))[ue.DEBUG=0]="DEBUG",ue[ue.VERBOSE=1]="VERBOSE",ue[ue.INFO=2]="INFO",ue[ue.WARN=3]="WARN",ue[ue.ERROR=4]="ERROR",ue[ue.SILENT=5]="SILENT",K;var ue})();const Y={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},we=K.INFO,me={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},Ae=(ue,re,..._e)=>{if(re<ue.logLevel)return;const He=(new Date).toISOString(),ze=me[re];if(!ze)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[ze](`[${He}]  ${ue.name}:`,..._e)};class Oe{constructor(re){this.name=re,this._logLevel=we,this._logHandler=Ae,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in K))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?Y[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...re),this._logHandler(this,K.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...re),this._logHandler(this,K.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,K.INFO,...re),this._logHandler(this,K.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,K.WARN,...re),this._logHandler(this,K.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...re),this._logHandler(this,K.ERROR,...re)}}function Re(ue){p.forEach(re=>{re.setLogLevel(ue)})}function Fe(ue,re){for(const _e of p){let He=null;re&&re.level&&(He=Y[re.level]),_e.userLogHandler=null===ue?null:(ze,Ze,...ct)=>{const Be=ct.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch(vt){return null}}).filter(ke=>ke).join(" ");Ze>=(null!=He?He:ze.logLevel)&&ue({level:K[Ze].toLowerCase(),message:Be,args:ct,type:ze.name})}}}},1470:(Mt,We,k)=>{k.d(We,{hx:()=>He,yI:()=>ct});var p=k(5e3),K=k(655),Y=k(2382),we=k(9808);const me=new p.OlP("ngx-mask config"),Ae=new p.OlP("new ngx-mask config"),Oe=new p.OlP("initial ngx-mask config"),Re={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new p.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Fe=["Hh:m0:s0","Hh:m0","m0:s0"],ue=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let re=(()=>{class ke{constructor(j){this._config=j,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(F,J,le,Le)=>{var je,Ne;let Ie=[],Q="";if(Array.isArray(le)){const Wt=new RegExp(le.map(It=>"[\\^$.|?*+()".indexOf(It)>=0?`\\${It}`:It).join("|"));Ie=F.split(Wt),Q=null!==(Ne=null===(je=F.match(Wt))||void 0===je?void 0:je[0])&&void 0!==Ne?Ne:""}else Ie=F.split(le),Q=le;const Se=Ie.length>1?`${Q}${Ie[1]}`:"";let de=Ie[0];const Ye=this.separatorLimit.replace(/\s/g,"");Ye&&+Ye&&(de="-"===de[0]?`-${de.slice(1,de.length).slice(0,Ye.length)}`:de.slice(0,Ye.length));const $e=/(\d+)(\d{3})/;for(;J&&$e.test(de);)de=de.replace($e,"$1"+J+"$2");return void 0===Le?de+Se:0===Le?de:de+Se.substr(0,Le+1)},this.percentage=F=>Number(F)>=0&&Number(F)<=100,this.getPrecision=F=>{const J=F.split(".");return J.length>1?Number(J[J.length-1]):1/0},this.checkAndRemoveSuffix=F=>{var J,le,Le;for(let je=(null===(J=this.suffix)||void 0===J?void 0:J.length)-1;je>=0;je--){const Ne=this.suffix.substr(je,null===(le=this.suffix)||void 0===le?void 0:le.length);if(F.includes(Ne)&&(je-1<0||!F.includes(this.suffix.substr(je-1,null===(Le=this.suffix)||void 0===Le?void 0:Le.length))))return F.replace(Ne,"")}return F},this.checkInputPrecision=(F,J,le)=>{if(J<1/0){if(Array.isArray(le)){const Ne=le.find(Ie=>Ie!==this.thousandSeparator);le=Ne||le[0]}const Le=new RegExp(this._charToRegExpExpression(le)+`\\d{${J}}.*$`),je=F.match(Le);je&&je[0].length-1>J&&(F=F.substring(0,F.length-(je[0].length-1-J))),0===J&&this._compareOrIncludes(F[F.length-1],le,this.thousandSeparator)&&(F=F.substring(0,F.length-1))}return F},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(j,F){const[J,le]=F;return this.customPattern=le,this.applyMask(j,J)}applyMask(j,F,J=0,le=!1,Le=!1,je=(()=>{})){var Ne,Ie;if(!F||"string"!=typeof j)return"";let Q=0,Se="",de=!1,Ye=!1,$e=1,Wt=!1;j.slice(0,this.prefix.length)===this.prefix&&(j=j.slice(this.prefix.length,j.length)),this.suffix&&(null==j?void 0:j.length)>0&&(j=this.checkAndRemoveSuffix(j));const It=j.toString().split("");"IP"===F&&(this.ipError=It.filter(Vt=>"."===Vt).length<3&&It.length<7,F="099.099.099.099");const Lt=[];for(let Vt=0;Vt<j.length;Vt++)(null===(Ne=j[Vt])||void 0===Ne?void 0:Ne.match("\\d"))&&Lt.push(j[Vt]);if("CPF_CNPJ"===F&&(this.cpfCnpjError=11!==Lt.length&&14!==Lt.length,F=Lt.length>11?"00.000.000/0000-00":"000.000.000-00"),F.startsWith("percent")){if(j.match("[a-z]|[A-Z]")||j.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){j=this._stripToDecimal(j);const Vt=this.getPrecision(F);j=this.checkInputPrecision(j,Vt,this.decimalMarker)}j.indexOf(".")>0&&!this.percentage(j.substring(0,j.indexOf(".")))&&(j=`${j.substring(0,j.indexOf(".")-1)}${j.substring(j.indexOf("."),j.length)}`),Se=this.percentage(j)?j:j.substring(0,j.length-1)}else if(F.startsWith("separator")){(j.match("[w\u0430-\u044f\u0410-\u042f]")||j.match("[\u0401\u0451\u0410-\u044f]")||j.match("[a-z]|[A-Z]")||j.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||j.match("[^A-Za-z0-9,]"))&&(j=this._stripToDecimal(j)),j=j.length>1&&"0"===j[0]&&!this._compareOrIncludes(j[1],this.decimalMarker,this.thousandSeparator)&&!Le?j.slice(1,j.length):j,Le&&(j=this._compareOrIncludes(j[j.length-1],this.decimalMarker,this.thousandSeparator)?j.slice(0,j.length-1):j);const Vt=this._charToRegExpExpression(this.thousandSeparator);let lt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Vt,"");if(Array.isArray(this.decimalMarker))for(const cr of this.decimalMarker)lt=lt.replace(this._charToRegExpExpression(cr),"");else lt=lt.replace(this._charToRegExpExpression(this.decimalMarker),"");const pn=new RegExp("["+lt+"]");(j.match(pn)||1===j.length&&this._compareOrIncludes(j,this.decimalMarker,this.thousandSeparator))&&(j=j.substring(0,j.length-1));const en=this.getPrecision(F),mn=(j=this.checkInputPrecision(j,en,this.decimalMarker)).replace(new RegExp(Vt,"g"),"");Se=this._formatWithSeparators(mn,this.thousandSeparator,this.decimalMarker,en);const Qn=Se.indexOf(",")-j.indexOf(","),Bn=Se.length-j.length;if(Bn>0&&","!==Se[J]){Ye=!0;let cr=0;do{this._shift.add(J+cr),cr++}while(cr<Bn)}else 0!==Qn&&J>0&&!(Se.indexOf(",")>=J&&J>3)||!(Se.indexOf(".")>=J&&J>3)&&Bn<=0?(this._shift.clear(),Ye=!0,$e=Bn,this._shift.add(J+=Bn)):this._shift.clear()}else for(let Vt=0,lt=It[0];Vt<It.length&&Q!==F.length;Vt++,lt=It[Vt])if(this._checkSymbolMask(lt,F[Q])&&"?"===F[Q+1])Se+=lt,Q+=2;else if("*"===F[Q+1]&&de&&this._checkSymbolMask(lt,F[Q+2]))Se+=lt,Q+=3,de=!1;else if(this._checkSymbolMask(lt,F[Q])&&"*"===F[Q+1])Se+=lt,de=!0;else if("?"===F[Q+1]&&this._checkSymbolMask(lt,F[Q+2]))Se+=lt,Q+=3;else if(this._checkSymbolMask(lt,F[Q])){if("H"===F[Q]&&Number(lt)>2){Q+=1,this._shiftStep(F,Q,It.length),Vt--,this.leadZeroDateTime&&(Se+="0");continue}if("h"===F[Q]&&"2"===Se&&Number(lt)>3){Q+=1,Vt--;continue}if("m"===F[Q]&&Number(lt)>5){Q+=1,this._shiftStep(F,Q,It.length),Vt--,this.leadZeroDateTime&&(Se+="0");continue}if("s"===F[Q]&&Number(lt)>5){Q+=1,this._shiftStep(F,Q,It.length),Vt--,this.leadZeroDateTime&&(Se+="0");continue}const pn=31;if("d"===F[Q]&&(Number(lt)>3&&this.leadZeroDateTime||Number(j.slice(Q,Q+2))>pn||"/"===j[Q+1])){Q+=1,this._shiftStep(F,Q,It.length),Vt--,this.leadZeroDateTime&&(Se+="0");continue}if("M"===F[Q]){const mn=0===Q&&(Number(lt)>2||Number(j.slice(Q,Q+2))>12||"/"===j[Q+1]),Qn=j.slice(Q-3,Q-1).includes("/")&&("/"===j[Q-2]&&Number(j.slice(Q-1,Q+1))>12&&"/"!==j[Q]||"/"===j[Q]||"/"===j[Q-3]&&Number(j.slice(Q-2,Q))>12&&"/"!==j[Q-1]||"/"===j[Q-1]),Bn=Number(j.slice(Q-3,Q-1))<=pn&&!j.slice(Q-3,Q-1).includes("/")&&"/"===j[Q-1]&&(Number(j.slice(Q,Q+2))>12||"/"===j[Q+1]),cr=Number(j.slice(Q-3,Q-1))>pn&&!j.slice(Q-3,Q-1).includes("/")&&!j.slice(Q-2,Q).includes("/")&&Number(j.slice(Q-2,Q))>12,rr=Number(j.slice(Q-3,Q-1))<=pn&&!j.slice(Q-3,Q-1).includes("/")&&"/"!==j[Q-1]&&Number(j.slice(Q-1,Q+1))>12;if(Number(lt)>1&&this.leadZeroDateTime||mn||Qn||Bn||cr||rr){Q+=1,this._shiftStep(F,Q,It.length),Vt--,this.leadZeroDateTime&&(Se+="0");continue}}Se+=lt,Q++}else-1!==this.maskSpecialCharacters.indexOf(F[Q])?(Se+=F[Q],Q++,this._shiftStep(F,Q,It.length),Vt--):this.maskSpecialCharacters.indexOf(lt)>-1&&this.maskAvailablePatterns[F[Q]]&&(null===(Ie=this.maskAvailablePatterns[F[Q]])||void 0===Ie?void 0:Ie.optional)?(!!It[Q]&&"099.099.099.099"!==F&&"000.000.000-00"!==F&&"00.000.000/0000-00"!==F&&!F.match(/^9+\.0+$/)&&(Se+=It[Q]),Q++,Vt--):"*"===this.maskExpression[Q+1]&&this._findSpecialChar(this.maskExpression[Q+2])&&this._findSpecialChar(lt)===this.maskExpression[Q+2]&&de||"?"===this.maskExpression[Q+1]&&this._findSpecialChar(this.maskExpression[Q+2])&&this._findSpecialChar(lt)===this.maskExpression[Q+2]&&de?(Q+=3,Se+=lt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(lt)<0&&lt!==this.placeHolderCharacter&&(Wt=!0);Se.length+1===F.length&&-1!==this.maskSpecialCharacters.indexOf(F[F.length-1])&&(Se+=F[F.length-1]);let pt=J+1;for(;this._shift.has(pt);)$e++,pt++;let bt=le?Q:this._shift.has(J)?$e:0;Wt&&bt--,je(bt,Ye),$e<0&&this._shift.clear();let qt=!1;Le&&(qt=It.every(Vt=>this.maskSpecialCharacters.includes(Vt)));let Rt=`${this.prefix}${qt?"":Se}${this.suffix}`;return 0===Se.length&&(Rt=`${this.prefix}${Se}`),Rt}_findSpecialChar(j){return this.maskSpecialCharacters.find(F=>F===j)}_checkSymbolMask(j,F){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[F]&&this.maskAvailablePatterns[F].pattern&&this.maskAvailablePatterns[F].pattern.test(j)}_stripToDecimal(j){return j.split("").filter((F,J)=>F.match("^-?\\d")||F.match("\\s")||"."===F||","===F||"-"===F&&0===J&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(j){return j&&(" "===j?"\\s":"[\\^$.|?*+()".indexOf(j)>=0?`\\${j}`:j)}_shiftStep(j,F,J){const le=/[*?]/g.test(j.slice(0,F))?J:F;this._shift.add(le+this.prefix.length||0)}_compareOrIncludes(j,F,J){return Array.isArray(F)?F.filter(le=>le!==J).includes(j):j===F}}return ke.\u0275fac=function(j){return new(j||ke)(p.LFG(me))},ke.\u0275prov=p.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),_e=(()=>{class ke extends re{constructor(j,F,J,le){super(F),this.document=j,this._config=F,this._elementRef=J,this._renderer=le,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=Le=>{}}applyMask(j,F,J=0,le=!1,Le=!1,je=(()=>{})){if(!F)return j!==this.actualValue?this.actualValue:j;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(j||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(j||"#")),!j&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const Ne=j&&"number"==typeof this.selStart?j[this.selStart]:"";let Ie="";if(this.hiddenInput&&!this.writingValue){let Ye=this.actualValue.split("");""!==j&&Ye.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(j.length>Ye.length?Ye.splice(this.selStart,0,Ne):j.length<Ye.length&&(Ye.length-j.length==1?Ye.splice(this.selStart-1,1):Ye.splice(this.selStart,this.selEnd-this.selStart))):Ye=[],this.showMaskTyped&&(j=this.removeMask(j)),Ie=this.actualValue.length&&Ye.length<=j.length?this.shiftTypedSymbols(Ye.join("")):j}Ie=Boolean(Ie)&&Ie.length?Ie:j;const Q=super.applyMask(Ie,F,J,le,Le,je);if(this.actualValue=this.getActualValue(Q),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(Ye=>!this._compareOrIncludes(Ye,this.decimalMarker,this.thousandSeparator))),this.formControlResult(Q),!this.showMaskTyped)return this.hiddenInput&&Q&&Q.length?this.hideInput(Q,this.maskExpression):Q;const Se=Q.length,de=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const Ye=this._numberSkipedSymbols(Q);return Q+de.slice(Se+Ye)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?Q+de:Q+de.slice(Se)}_numberSkipedSymbols(j){const F=/(^|\D)(\d\D)/g;let J=F.exec(j),le=0;for(;null!=J;)le+=1,J=F.exec(j);return le}applyValueChanges(j,F,J,le=(()=>{})){const Le=this._elementRef.nativeElement;Le.value=this.applyMask(Le.value,this.maskExpression,j,F,J,le),Le!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(j,F){return j.split("").map((J,le)=>{var Le,je;return this.maskAvailablePatterns&&this.maskAvailablePatterns[F[le]]&&(null===(Le=this.maskAvailablePatterns[F[le]])||void 0===Le?void 0:Le.symbol)?null===(je=this.maskAvailablePatterns[F[le]])||void 0===je?void 0:je.symbol:J}).join("")}getActualValue(j){const F=j.split("").filter((J,le)=>this._checkSymbolMask(J,this.maskExpression[le])||this.maskSpecialCharacters.includes(this.maskExpression[le])&&J===this.maskExpression[le]);return F.join("")===j?F.join(""):j}shiftTypedSymbols(j){let F="";return(j&&j.split("").map((le,Le)=>{if(this.maskSpecialCharacters.includes(j[Le+1])&&j[Le+1]!==this.maskExpression[Le+1])return F=le,j[Le+1];if(F.length){const je=F;return F="",je}return le})||[]).join("")}numberToString(j){return j||0===j?Number(j).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(j)}showMaskInInput(j){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(j){if("IP"===this.maskExpression)return this._checkForIp(j);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(j)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const j=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==j.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(j.value,this.maskExpression))}set formElementProperty([j,F]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,j,F))}checkSpecialCharAmount(j){return j.split("").filter(J=>this._findSpecialChar(J)).length}removeMask(j){return this._removeMask(this._removeSuffix(this._removePrefix(j)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(j){var F;if("#"===j)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const J=[];for(let le=0;le<j.length;le++)(null===(F=j[le])||void 0===F?void 0:F.match("\\d"))&&J.push(j[le]);return J.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:J.length>3&&J.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:J.length>6&&J.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(j){var F;const J=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,le=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===j)return J;const Le=[];for(let je=0;je<j.length;je++)(null===(F=j[je])||void 0===F?void 0:F.match("\\d"))&&Le.push(j[je]);return Le.length<=3?J.slice(Le.length,J.length):Le.length>3&&Le.length<=6?J.slice(Le.length+1,J.length):Le.length>6&&Le.length<=9?J.slice(Le.length+2,J.length):Le.length>9&&Le.length<11?J.slice(Le.length+3,J.length):11===Le.length?"":12===Le.length?le.slice(17===j.length?16:15,le.length):Le.length>12&&Le.length<=14?le.slice(Le.length+4,le.length):""}formControlResult(j){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(j)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(j)):this._removeSuffix(j))}_toNumber(j){if(!this.isNumberValue||""===j)return j;const F=Number(j);return Number.isNaN(F)?j:F}_removeMask(j,F){return j&&j.replace(this._regExpForRemove(F),"")}_removePrefix(j){return this.prefix?j&&j.replace(this.prefix,""):j}_removeSuffix(j){return this.suffix?j&&j.replace(this.suffix,""):j}_retrieveSeparatorValue(j){return this._removeMask(this._removeSuffix(this._removePrefix(j)),this.maskSpecialCharacters)}_regExpForRemove(j){return new RegExp(j.map(F=>`\\${F}`).join("|"),"gi")}_checkSymbols(j){if(""===j)return j;const F=this._retrieveSeparatorPrecision(this.maskExpression);let J=this._retrieveSeparatorValue(j);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(J=J.replace(this.decimalMarker,".")),this.isNumberValue?F?j===this.decimalMarker?null:this._checkPrecision(this.maskExpression,J):Number(J):J}_retrieveSeparatorPrecision(j){const F=j.match(new RegExp("^separator\\.([^d]*)"));return F?Number(F[1]):null}_checkPrecision(j,F){return j.indexOf("2")>0?Number(F).toFixed(2):Number(F)}}return ke.\u0275fac=function(j){return new(j||ke)(p.LFG(we.K0),p.LFG(me),p.LFG(p.SBq),p.LFG(p.Qsj))},ke.\u0275prov=p.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),He=(()=>{class ke{constructor(j,F,J){this.document=j,this._maskService=F,this._config=J,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new p.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=le=>{},this.onTouch=()=>{}}ngOnChanges(j){const{maskExpression:F,specialCharacters:J,patterns:le,prefix:Le,suffix:je,thousandSeparator:Ne,decimalMarker:Ie,dropSpecialCharacters:Q,hiddenInput:Se,showMaskTyped:de,placeHolderCharacter:Ye,shownMaskExpression:$e,showTemplate:Wt,clearIfNotMatch:It,validation:Lt,separatorLimit:pt,allowNegativeNumbers:bt,leadZeroDateTime:qt,triggerOnMaskChange:Rt}=j;if(F&&(F.currentValue!==F.previousValue&&!F.firstChange&&(this._maskService.maskChanged=!0),F.currentValue&&F.currentValue.split("||").length>1?(this._maskExpressionArray=F.currentValue.split("||").sort((Vt,lt)=>Vt.length-lt.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0]):(this._maskExpressionArray=[],this._maskValue=F.currentValue||"",this._maskService.maskExpression=this._maskValue)),J){if(!J.currentValue||!Array.isArray(J.currentValue))return;this._maskService.maskSpecialCharacters=J.currentValue||[]}le&&le.currentValue&&(this._maskService.maskAvailablePatterns=le.currentValue),Le&&(this._maskService.prefix=Le.currentValue),je&&(this._maskService.suffix=je.currentValue),Ne&&(this._maskService.thousandSeparator=Ne.currentValue),Ie&&(this._maskService.decimalMarker=Ie.currentValue),Q&&(this._maskService.dropSpecialCharacters=Q.currentValue),Se&&(this._maskService.hiddenInput=Se.currentValue),de&&(this._maskService.showMaskTyped=de.currentValue),Ye&&(this._maskService.placeHolderCharacter=Ye.currentValue),$e&&(this._maskService.shownMaskExpression=$e.currentValue),Wt&&(this._maskService.showTemplate=Wt.currentValue),It&&(this._maskService.clearIfNotMatch=It.currentValue),Lt&&(this._maskService.validation=Lt.currentValue),pt&&(this._maskService.separatorLimit=pt.currentValue),bt&&(this._maskService.allowNegativeNumbers=bt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(Vt=>"-"!==Vt))),qt&&(this._maskService.leadZeroDateTime=qt.currentValue),Rt&&(this._maskService.triggerOnMaskChange=Rt.currentValue),this._applyMask()}validate({value:j}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(j);if(this._maskService.cpfCnpjError)return this._createValidationError(j);if(this._maskValue.startsWith("separator")||ue.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Fe.includes(this._maskValue))return this._validateTime(j);if(j&&j.toString().length>=1){let F=0;for(const J in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[J].optional&&(this._maskValue.indexOf(J)!==this._maskValue.lastIndexOf(J)?F+=this._maskValue.split("").filter(Le=>Le===J).join("").length:-1!==this._maskValue.indexOf(J)&&F++,-1!==this._maskValue.indexOf(J)&&j.toString().length>=this._maskValue.indexOf(J)||F===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&j.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&j.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&j.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(j);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const J=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-F:this._maskValue.length-F;if(j.toString().length<J)return this._createValidationError(j)}}return j&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(j){!j&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(j){const F=j.target;if(this._inputValue=F.value,this._setMask(),!this._maskValue)return void this.onChange(F.value);const J=1===F.selectionStart?F.selectionStart+this._maskService.prefix.length:F.selectionStart;let le=0,Le=!1;if(this._maskService.applyValueChanges(J,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(Ne,Ie)=>{this._justPasted=!1,le=Ne,Le=Ie}),this.document.activeElement!==F)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let je=this._position?this._inputValue.length+J+le:J+("Backspace"!==this._code||Le?le:0);je>this._getActualInputLength()&&(je=this._getActualInputLength()),je<0&&(je=0),F.setSelectionRange(je,je),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(j){if(!this._maskValue)return;const F=j.target;null!==F&&null!==F.selectionStart&&F.selectionStart===F.selectionEnd&&F.selectionStart>this._maskService.prefix.length&&38!==j.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),F.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===F.value?(F.focus(),F.setSelectionRange(0,0)):F.selectionStart>this._maskService.actualValue.length&&F.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const Le=F.value&&F.value!==this._maskService.prefix?F.value:this._maskService.prefix+this._maskService.maskIsShown;F.value!==Le&&(F.value=Le),(F.selectionStart||F.selectionEnd)<=this._maskService.prefix.length?F.selectionStart=this._maskService.prefix.length:F.selectionEnd>this._getActualInputLength()&&(F.selectionEnd=this._getActualInputLength())}onKeyDown(j){var F;if(!this._maskValue)return;this._code=j.code?j.code:j.key;const J=j.target;if(this._inputValue=J.value,this._setMask(),38===j.keyCode&&j.preventDefault(),37===j.keyCode||8===j.keyCode||46===j.keyCode){if(8===j.keyCode&&0===J.value.length&&(J.selectionStart=J.selectionEnd),8===j.keyCode&&0!==J.selectionStart)if(this.specialCharacters=(null===(F=this.specialCharacters)||void 0===F?void 0:F.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&J.selectionStart<=this.prefix.length)J.setSelectionRange(this.prefix.length,J.selectionEnd);else if(this._inputValue.length!==J.selectionStart&&1!==J.selectionStart)for(;this.specialCharacters.includes(this._inputValue[J.selectionStart-1].toString())&&(this.prefix.length>=1&&J.selectionStart>this.prefix.length||0===this.prefix.length);)J.setSelectionRange(J.selectionStart-1,J.selectionEnd);this.checkSelectionOnDeletion(J),this._maskService.prefix.length&&J.selectionStart<=this._maskService.prefix.length&&J.selectionEnd<=this._maskService.prefix.length&&j.preventDefault();const le=J.selectionStart;8===j.keyCode&&!J.readOnly&&0===le&&J.selectionEnd===J.value.length&&0!==J.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<J.selectionStart?J.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===j.keyCode&&j.ctrlKey||65===j.keyCode&&j.metaKey)&&(J.setSelectionRange(0,this._getActualInputLength()),j.preventDefault()),this._maskService.selStart=J.selectionStart,this._maskService.selEnd=J.selectionEnd}writeValue(j){return(0,K.mG)(this,void 0,void 0,function*(){"object"==typeof j&&null!==j&&"value"in j&&("disable"in j&&this.setDisabledState(Boolean(j.disable)),j=j.value),("number"==typeof j||this._maskValue.startsWith("separator"))&&(j=this._maskService.numberToString(j),Array.isArray(this.decimalMarker)||(j="."!==this.decimalMarker?j.replace(".",this.decimalMarker):j),this._maskService.isNumberValue=!0),"string"!=typeof j&&(j=""),this._inputValue=j,this._setMask(),j&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(j,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",j],this._inputValue=j})}registerOnChange(j){this.onChange=j,this._maskService.onChange=this.onChange}registerOnTouched(j){this.onTouch=j}checkSelectionOnDeletion(j){j.selectionStart=Math.min(Math.max(this.prefix.length,j.selectionStart),this._inputValue.length-this.suffix.length),j.selectionEnd=Math.min(Math.max(this.prefix.length,j.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(j){this._maskService.formElementProperty=["disabled",j]}_repeatPatternSymbols(j){return j.match(/{[0-9]+}/)&&j.split("").reduce((F,J,le)=>{if(this._start="{"===J?le:this._start,"}"!==J)return this._maskService._findSpecialChar(J)?F+J:F;this._end=le;const Le=Number(j.slice(this._start+1,this._end));return F+new Array(Le+1).join(j[this._start-1])},"")||j}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(j){const F=this._maskValue.split("").filter(J=>":"!==J).length;return j&&(0==+j[j.length-1]&&j.length<F||j.length<=F-2)?this._createValidationError(j):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(j){return{mask:{requiredMask:this._maskValue,actualValue:j}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(j=>{var F,J;const le=(null===(F=this._maskService.removeMask(this._inputValue))||void 0===F?void 0:F.length)<=(null===(J=this._maskService.removeMask(j))||void 0===J?void 0:J.length);if(this._inputValue&&le)return this._maskValue=j,this.maskExpression=j,this._maskService.maskExpression=j,le;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return ke.\u0275fac=function(j){return new(j||ke)(p.Y36(we.K0),p.Y36(_e),p.Y36(me))},ke.\u0275dir=p.lG2({type:ke,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(j,F){1&j&&p.NdJ("paste",function(){return F.onPaste()})("ngModelChange",function(le){return F.onModelChange(le)})("input",function(le){return F.onInput(le)})("blur",function(){return F.onBlur()})("click",function(le){return F.onClick(le)})("keydown",function(le){return F.onKeyDown(le)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[p._Bn([{provide:Y.JU,useExisting:(0,p.Gpc)(()=>ke),multi:!0},{provide:Y.Cf,useExisting:(0,p.Gpc)(()=>ke),multi:!0},_e]),p.TTD]}),ke})();function Ze(ke,vt){return Object.assign(Object.assign({},ke),vt instanceof Function?vt():vt)}let ct=(()=>{class ke{static forRoot(j){return{ngModule:ke,providers:[{provide:Ae,useValue:j},{provide:Oe,useValue:Re},{provide:me,useFactory:Ze,deps:[Oe,Ae]},re]}}static forChild(){return{ngModule:ke}}}return ke.\u0275fac=function(j){return new(j||ke)},ke.\u0275mod=p.oAB({type:ke}),ke.\u0275inj=p.cJS({}),ke})();const Be="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Be.KeyboardEvent||(Be.KeyboardEvent=function(ke,vt){})},5861:(Mt,We,k)=>{function p(Y,we,me,Ae,Oe,Re,Fe){try{var ue=Y[Re](Fe),re=ue.value}catch(_e){return void me(_e)}ue.done?we(re):Promise.resolve(re).then(Ae,Oe)}function K(Y){return function(){var we=this,me=arguments;return new Promise(function(Ae,Oe){var Re=Y.apply(we,me);function Fe(re){p(Re,Ae,Oe,Fe,ue,"next",re)}function ue(re){p(Re,Ae,Oe,Fe,ue,"throw",re)}Fe(void 0)})}}k.d(We,{Z:()=>K})}},Mt=>{Mt(Mt.s=6213)}]);