"use strict";(self.webpackChunkclipit=self.webpackChunkclipit||[]).push([[515],{2515:(he,f,r)=>{r.r(f),r.d(f,{UserModule:()=>ge});var c=r(9808),v=r(1205),S=r(7566),s=r(2382),_=r(4466),p=r(7565),e=r(5e3),N=r(1135),g=r(4004);let b=(()=>{class n{constructor(){this._modals=[],this._modalsSubject=new N.X([])}registerModal(t){if(this._modals.findIndex(o=>o.id===t)>=0)throw Error(`This modal has already been used: ${t}. Please use a different one.`);this._modals.push({id:t,isVisible:!1}),this._modalsSubject.next(this._modals)}unregisteredModal(t){this._modals=this._modals.filter(o=>o.id!==t),this._modalsSubject.next(this._modals)}toggleModal(t){const o=this._getModal(t);o.isVisible=!o.isVisible,this._modalsSubject.next(this._modals)}showModal(t){this._getModal(t).isVisible=!0,this._modalsSubject.next(this._modals)}hideModal(t){this._getModal(t).isVisible=!1,this._modalsSubject.next(this._modals)}getModalSubscription(t){return this._modalsSubject.asObservable().pipe((0,g.U)(o=>{const a=o.find(l=>l.id===t);if(!a)throw Error(`Cannot find modal with ID: ${t}`);return a}))}_getModal(t){const o=this._modals.find(a=>a.id===t);if(!o)throw Error(`No modal with given id: ${t}`);return o}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),h=(()=>{class n{constructor(t,o){this.router=t,this.location=o,this.history=[],this.router.events.subscribe(a=>{a instanceof p.m2&&this.history.push(a.urlAfterRedirects)})}back(){this.history.pop(),this.history.length>0?this.location.back():this.router.navigateByUrl("/")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(p.F0),e.LFG(c.Ye))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var I=r(655);const U=[[["","heading",""]],"*"],$=function(n){return{hidden:n}};class m{constructor(i,t){this.modalService=i,this.el=t,this.modalClose=new e.vpe}ngOnDestroy(){this.modalService.unregisteredModal(this.id),document.body.removeChild(this.el.nativeElement)}ngOnInit(){this.modal$=this.modalService.getModalSubscription(this.id),document.body.appendChild(this.el.nativeElement)}onCloseModal(){this.modalService.hideModal(this.id),this.modalClose.emit()}}m.\u0275fac=function(i){return new(i||m)(e.Y36(b),e.Y36(e.SBq))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-modal"]],inputs:{id:"id"},outputs:{modalClose:"modalClose"},ngContentSelectors:["[heading]","*"],decls:14,vars:5,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(i,t){if(1&i&&(e.F$t(U),e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"div",1)(3,"div",2),e.NdJ("click",function(){return t.onCloseModal()}),e._UZ(4,"div",3),e.qZA(),e.TgZ(5,"span",4),e._uU(6,"\u200b"),e.qZA(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7),e.Hsn(10),e.TgZ(11,"div",8),e.NdJ("click",function(){return t.onCloseModal()}),e._uU(12," \u2715 "),e.qZA()(),e.Hsn(13,1),e.qZA()()()()),2&i){let o;e.Q6J("ngClass",e.VKq(3,$,!1===(null==(o=e.lcZ(1,1,t.modal$))?null:o.isVisible)))}},directives:[c.mk],pipes:[c.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),(0,I.gn)([function F(n,i){Object.defineProperty(n,i,{get(){throw new Error(`Attribute ${i} is required`)},set(t){Object.defineProperty(n,i,{value:t,writable:!0,configurable:!0})},configurable:!0})}],m.prototype,"id",void 0);const k=["*"];let C=(()=>{class n{constructor(t){this.cdr=t,this.tabTitle="",this._active=!1}set active(t){this._active=t,this.cdr.detectChanges()}get active(){return this._active}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:k,decls:2,vars:2,template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"div"),e.Hsn(1),e.qZA()),2&t&&e.ekj("hidden",!o.active)},styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})();const L=function(n,i){return{"hover:text-indigo-400":n,"hover:text-white text-white bg-indigo-400":i}};function P(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"li",2)(1,"a",3),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().selectTab(l)}),e._uU(2),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(2,L,!t.active,t.active)),e.xp6(1),e.Oqu(t.tabTitle)}}const Q=["*"];let E=(()=>{class n{constructor(){}ngAfterContentInit(){0!==this.tabs.length&&0===this.tabs.filter(o=>o.active).length&&this.selectTab(this.tabs.first)}selectTab(t){return this.tabs.forEach(o=>o.active=!1),t.active=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,o,a){if(1&t&&e.Suo(a,C,4),2&t){let l;e.iGM(l=e.CRH())&&(o.tabs=l)}},ngContentSelectors:Q,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],[1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"ul",0),e.YNc(1,P,3,5,"li",1),e.qZA(),e.Hsn(2)),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.tabs))},directives:[c.sg,c.mk],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})();var y=r(5861),u=r(7579),Z=r(7556),w=r(8549);function O(n,i){if(1&n&&(e.TgZ(0,"app-alert",11),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("color",t.color),e.xp6(1),e.hij(" ",t.msg,"\n")}}function Y(n,i){1&n&&(e.TgZ(0,"p",12),e._uU(1," Email is invalid "),e.qZA())}function z(n,i){1&n&&(e.TgZ(0,"span",12),e._uU(1," Please enter your password "),e.qZA())}let q=(()=>{class n{constructor(t,o){this.authService=t,this.navService=o,this.alert$=new u.x,this.processing$=new u.x,this.credentials={email:"",password:""}}login(){var t=this;return(0,y.Z)(function*(){try{t.alert$.next({show:!0,msg:"Please wait while we are processing your request",color:"blue"}),t.processing$.next(!0),yield t.authService.login(t.credentials)}catch(o){return t.processing$.next(!1),t.alert$.next({show:!0,msg:"Something went wrong, please try again later",color:"red"}),void console.log("Nam data is: ",o)}t.alert$.next({show:!0,msg:"Success, you are now logged in!",color:"green"}),t.processing$.next(!1),setTimeout(()=>{t.navService.back()},1e3)})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.e),e.Y36(h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:19,vars:10,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","placeholder","Password","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,o){if(1&t&&(e.YNc(0,O,2,2,"app-alert",0),e.ALo(1,"async"),e.TgZ(2,"form",1,2),e.NdJ("ngSubmit",function(){return o.login()}),e.TgZ(4,"div",3)(5,"label",4),e._uU(6,"Email"),e.qZA(),e.TgZ(7,"input",5,6),e.NdJ("ngModelChange",function(l){return o.credentials.email=l}),e.qZA(),e.YNc(9,Y,2,0,"p",7),e.qZA(),e.TgZ(10,"div",3)(11,"label",4),e._uU(12,"Password"),e.qZA(),e.TgZ(13,"input",8,9),e.NdJ("ngModelChange",function(l){return o.credentials.password=l}),e.qZA(),e.YNc(15,z,2,0,"span",7),e.qZA(),e.TgZ(16,"button",10),e.ALo(17,"async"),e._uU(18," Submit "),e.qZA()()),2&t){const a=e.MAs(3),l=e.MAs(8),d=e.MAs(14);e.Q6J("ngIf",e.lcZ(1,6,o.alert$)),e.xp6(7),e.Q6J("ngModel",o.credentials.email),e.xp6(2),e.Q6J("ngIf",l.errors&&l.touched&&l.dirty),e.xp6(4),e.Q6J("ngModel",o.credentials.password),e.xp6(2),e.Q6J("ngIf",d.errors&&d.touched&&d.dirty),e.xp6(1),e.Q6J("disabled",a.invalid||e.lcZ(17,8,o.processing$))}},directives:[c.O5,w.w,s._Y,s.JL,s.F,s.Fj,s.Q7,s.c5,s.JJ,s.On],pipes:[c.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})();var j=r(5867);class D{static match(i){const{controlName:t,matchingControlName:o}=i;return a=>{const l=a.get(t),d=a.get(o);if(!l||!d)return console.error("Form controls cannot be found in the form group"),{controlNotFound:!1};const A=l.value===d.value?null:{noMatch:!0};return d.setErrors(A),A}}}var R=r(9646),T=r(4986),H=r(7272),M=r(5698),B=r(4482),V=r(5403),X=r(5032),K=r(5577);function x(n,i){return i?t=>(0,H.z)(i.pipe((0,M.q)(1),function G(){return(0,B.e)((n,i)=>{n.subscribe((0,V.x)(i,X.Z))})}()),t.pipe(x(n))):(0,K.z)((t,o)=>n(t,o).pipe((0,M.q)(1),function W(n){return(0,g.U)(()=>n)}(t)))}var ee=r(9751),te=r(3532);var se=r(3900),ae=r(8996);let re=(()=>{class n{constructor(t){this.angularFireAuth=t,this.validate=o=>(0,R.of)(o.value).pipe(function ie(n,i=T.z){const t=function oe(n=0,i,t=T.P){let o=-1;return null!=i&&((0,te.K)(i)?t=i:o=i),new ee.y(a=>{let l=function ne(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;l<0&&(l=0);let d=0;return t.schedule(function(){a.closed||(a.next(d++),0<=o?this.schedule(void 0,o):a.complete())},l)})}(n,i);return x(()=>t)}(500),(0,se.w)(a=>(0,ae.D)(this.angularFireAuth.fetchSignInMethodsForEmail(a))),(0,g.U)(a=>a.length>0?{emailTaken:!0}:null))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v.zQ))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var le=r(235);function ce(n,i){if(1&n&&(e.TgZ(0,"app-alert",12),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("color",t.color),e.xp6(1),e.hij(" ",t.msg," ")}}function de(n,i){if(1&n&&(e.ynx(0),e.YNc(1,ce,2,2,"app-alert",11),e.BQk()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.show)}}let me=(()=>{class n{constructor(t,o,a){this.authService=t,this.navService=o,this.emailTaken=a,this.registerFormFields={name:"name",email:"email",age:"age",password:"password",confirmedPassword:"confirmedPassword",phoneNumber:"phoneNumber"},this.name=new s.NI("",[s.kI.required,s.kI.minLength(3)]),this.email=new s.NI("",[s.kI.required,s.kI.email],[this.emailTaken.validate]),this.age=new s.NI("",[s.kI.required,s.kI.min(18),s.kI.max(120)]),this.phoneNumber=new s.NI("",[s.kI.required,s.kI.maxLength(13),s.kI.minLength(13)]),this.password=new s.NI("",[s.kI.required,s.kI.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirmedPassword=new s.NI("",[s.kI.required]),this.registerForm=new s.cw({name:this.name,email:this.email,age:this.age,password:this.password,confirmedPassword:this.confirmedPassword,phoneNumber:this.phoneNumber},[D.match({controlName:"password",matchingControlName:"confirmedPassword"})]),this.alert$=new u.x,this.processing$=new u.x}onFormSubmit(){var t=this;return(0,y.Z)(function*(){t.processing$.next(!0),t.alert$.next({show:!0,msg:"Please wait while your account is being created!",color:"blue"});try{yield t.authService.createUser(t.registerForm.value)}catch(l){return l instanceof j.ZR?t.alert$.next({show:!0,msg:l.message,color:"red"}):(console.log("Nam data is: ",l),t.alert$.next({show:!0,msg:"Something went wrong. Please try again later.",color:"red"})),void t.processing$.next(!1)}t.processing$.next(!1),t.alert$.next({show:!0,msg:"Success! Your account has been created!",color:"green"}),setTimeout(()=>{t.navService.back()},1e3)})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.e),e.Y36(h),e.Y36(re))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],decls:30,vars:13,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeHolder","Enter Name",3,"control"],["placeHolder","Enter Email","type","email",3,"control"],["type","number","placeHolder","Enter Age",3,"control"],["type","password","placeHolder","Enter Password",3,"control"],["type","password","placeHolder","Confirm Password",3,"control"],["type","phone","placeHolder","Enter Phone Number","format","(000)000-0000",3,"control"],["type","submit",1,"block","disabled:opacity-50","disabled:bg-indigo-400","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500",3,"disabled"],[3,"color",4,"ngIf"],[3,"color"]],template:function(t,o){1&t&&(e.YNc(0,de,2,1,"ng-container",0),e.ALo(1,"async"),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return o.onFormSubmit()}),e.TgZ(3,"div",2)(4,"label",3),e._uU(5,"Name"),e.qZA(),e._UZ(6,"app-input",4),e.qZA(),e.TgZ(7,"div",2)(8,"label",3),e._uU(9,"Email"),e.qZA(),e._UZ(10,"app-input",5),e.qZA(),e.TgZ(11,"div",2)(12,"label",3),e._uU(13,"Age"),e.qZA(),e._UZ(14,"app-input",6),e.qZA(),e.TgZ(15,"div",2)(16,"label",3),e._uU(17,"Password"),e.qZA(),e._UZ(18,"app-input",7),e.qZA(),e.TgZ(19,"div",2)(20,"label",3),e._uU(21,"Confirm Password"),e.qZA(),e._UZ(22,"app-input",8),e.qZA(),e.TgZ(23,"div",2)(24,"label",3),e._uU(25,"Phone Number"),e.qZA(),e._UZ(26,"app-input",9),e.qZA(),e.TgZ(27,"button",10),e.ALo(28,"async"),e._uU(29," Submit "),e.qZA()()),2&t&&(e.Q6J("ngIf",e.lcZ(1,9,o.alert$)),e.xp6(2),e.Q6J("formGroup",o.registerForm),e.xp6(4),e.Q6J("control",o.name),e.xp6(4),e.Q6J("control",o.email),e.xp6(4),e.Q6J("control",o.age),e.xp6(4),e.Q6J("control",o.password),e.xp6(4),e.Q6J("control",o.confirmedPassword),e.xp6(4),e.Q6J("control",o.phoneNumber),e.xp6(1),e.Q6J("disabled",o.registerForm.invalid||e.lcZ(28,11,o.processing$)))},directives:[c.O5,w.w,s._Y,s.JL,s.sg,le.a],pipes:[c.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})();const pe=[{path:"",component:(()=>{class n{constructor(t,o){this.modalService=t,this.navigationService=o,this.MODAL_ID="registrationModal"}ngOnInit(){this.modalService.registerModal(this.MODAL_ID),this.modalService.showModal(this.MODAL_ID)}onModalClose(){this.navigationService.back()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b),e.Y36(h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:1,consts:[[3,"id","modalClose"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(t,o){1&t&&(e.TgZ(0,"app-modal",0),e.NdJ("modalClose",function(){return o.onModalClose()}),e.TgZ(1,"p",1),e._uU(2,"Your Account"),e.qZA(),e.TgZ(3,"app-tabs-container")(4,"app-tab",2),e._UZ(5,"app-login"),e.qZA(),e.TgZ(6,"app-tab",3),e._UZ(7,"app-register"),e.qZA()()()),2&t&&e.Q6J("id",o.MODAL_ID)},directives:[m,E,C,q,me],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})()}];let ue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.Bz.forChild(pe)],p.Bz]}),n})(),ge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,ue,_.m,s.UX,s.u5,v.ww,S.yb]]}),n})()}}]);